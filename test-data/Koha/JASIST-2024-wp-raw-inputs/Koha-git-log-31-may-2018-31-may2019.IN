commit 1b5635bebd75c418fdda68036e1e91f857cb1e4d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu May 30 15:29:07 2019 +0000

    Update release notes for the 19.05.00 release
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9e839d2fc717dbc4377a3890f4855ff331249c6e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu May 30 13:42:23 2019 +0000

    Increment version for 19.05.00 release
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7142895922dcb2219552bd6d545c4c2677ff5d43
Author: Koha translators <>
Date:   Thu May 30 10:28:33 2019 -0300

    Translation updates for Koha 19.05.00
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e65b708f5385aa9df352cebe3c688a152fe1e176
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue May 14 08:22:43 2019 +0200

    Bug 22901: On items search fix search field change listening
    
    In items search, when there is a custom field with authorised values :
    when changing the conditional select AND/OR then the authorised values select disappears.
    This behaviour is like when the search field is changed.
    
    The bug is that JavaScript code meaning search field change listens on all selects instead of only search field select.
    
    Test plan :
    1) Define a custom items search field with authorised values
    2) Go to items search
    3) Click on 'New field'
    4) On second line, select custom field
    5) The authorised values select appears
    6) Select 'AND' in conditional select
    7) Without patch the authorised values select disappears, with patch nothing changes
    8) On second line, select a non-custom field
    9) The authorised values select is replaced by a text field
    10) On second line, select custom field
    11) The authorised values select appears
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 122d92b9f89ddb22d58134c48dd8fb296fa84f3d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 23 18:35:31 2019 +0000

    Bug 22981: Remove type attribute from script tags: Catalog
    
    This patch removes the "type" attribute from <script> tags in several
    catalog-related templates.
    
    To test, apply the patch and confirm that the following work properly
    without any JavaScript errors in the browser console:
    
     - Catalog -> Advanced search
     - Catalog -> Item search
     - Search history
    
    Validating the HTML source of these pages should return no errors
    related to the "type" attribute.
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 22eba6b957fe763f5bcb0412585966dece5d9ea2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 23 15:54:07 2019 +0000

    Bug 22979: Remove type attribute from script tags: Authorities
    
    This patch removes the "type" attribute from <script> tags in several
    authorities templates. Also removed: Obsolete "//<![CDATA[ //]]>"
    markers.
    
    To test, apply the patch and confirm that examples of affected pages
    work properly without any JavaScript errors in the browser console:
    
     - Authorities -> Search -> View authority record
     - Authorities -> Search -> Edit authority record
     - Cataloging -> New record
       - Trigger the authority search form by clicking the plugin link next
         to a tag which has been linked to an authority type (e.g. 100a ->
         Personal name).
       - Search for an authority record.
       - Select an authority record.
    
    Validating the HTML source of any of these pages should return no errors
    related to the "type" attribute.
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=22797
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8e9cd13d98f5574cc327c02679f612c4f4e18956
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 23 13:50:07 2019 +0000

    Bug 22975: Remove type attribute from script tags: Acquisitions
    
    This patch removes the "type" attribute from <script> tags in several
    acquisitions templates. Also removed: Obsolete "//<![CDATA[ //]]>"
    markers.
    
    This patch also makes minor indentation changes, so diff using the "-w"
    flag.
    
    To test, apply the patch and confirm that examples of affected pages
    work properly without any JavaScript errors in the browser console:
    
     - Acquisitions -> Vendors -> Vendor -> Basket groups
     - Acquisitions -> Vendors -> Vendor -> Receive shipments
     - Acquisitions -> Vendors -> Vendor -> Basket:
       In the table of orders, click "Transfer." Transfer an order
    
    Validating the HTML source of any of these pages should return no errors
    related to the "type" attribute.
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9c4f36862261ed1be89770c90f0cfa8b019f5226
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 23 12:37:45 2019 +0000

    Bug 22973: Remove type attribute from script tags: Staff client includes 2/2
    
    This patch removes the "type" attribute from <script> tags in several
    staff client include files. Also removed: Obsolete "//<![CDATA[ //]]>"
    markers.
    
    This patch also makes minor indentation changes, so diff using the "-w"
    flag.
    
    To test, apply the patch and confirm that examples of affected pages
    work properly without any JavaScript errors in the browser console:
    
     - Installer -> Onboarding (uses installer-strings.inc,
       validator-strings.inc)
     - Patrons -> Patron details -> Change password (uses
       password_check.inc)
     - Patrons -> Patron details -> Print summary (slip-print.inc)
     - Circulation -> Check out (strings.inc, timepicker.inc)
     - Cataloging -> New from Z39.50/SRU (z3950_search.inc)
    
    Validating the HTML source of any of these pages should return no errors
    related to the "type" attribute.
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7d42e29c8b8cd913b052d10525c4d0b2cb36fc0d
Author: Hayley Pelham <hayleymapley@catalyst.net.nz>
Date:   Fri May 24 13:52:58 2019 -0500

    Bug 20537: Added checks to remove warning from overdue_notices.pl
    
    When executing overdue_notices.pl on borrowers that lack a surname, we
    see this error:
    Use of uninitialized value in concatenation (.) or string at
    /usr/share/koha/bin/cronjobs/overdue_notices.pl line 575.
    
    This patch fixes this issue by setting the $borr variable
    based on the information that has been defined.
    
    To test:
    1) Create a borrower and set its surname to null
    2) Checkout an item to the borrower and set it to be overdue
    3) Navigate to kohaclone/misc/cronjobs and enter a koha-shell
    4) Run the script: ./overdue_notices.pl
    5) Observe the error appears
    6) Apply the patch
    7) Repeat steps 3-4
    8) Observe the error is gone
    9) Sign off!
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 02305630824e46c9c7846aa6f163265970463d1e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 16 13:02:29 2019 -0500

    Bug 22907: Add missing use statement
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8fed07826ee9fd69f3b92bbb6decb864e4c7dfd2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 14 12:27:25 2019 -0500

    Bug 22907: Remove previous code handling the same thing
    
    See:
      commit a71b96295fb07084e4f87ac1a471e89355f3c5a4
      Bug 12627: Fix default values
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2329d2ea8393e133bf689eb2d311fb0bcc99640f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 14 12:06:24 2019 -0500

    Bug 22907: Fix new suggestion with strict sql modes
    
    With sql_strict_modes turned on, if you try to create a new suggestion
    you will get:
    Incorrect integer value: '' for column '$INT_COLUMN' at row 1
    
    Test plan:
    Turn on strict_sql_modes, create a new suggestion, then edit it.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    JD: Edit after SO, remove unecessary changes (not related to this bug)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 936cf409992d6393473f564a25f70ea8b390e74b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 14 12:05:53 2019 -0500

    Bug 22907: Add tests
    
    Do not use copyrightdate as it is weird to have it int
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1cdf657c057a7a565016df28a17151a2f4fce134
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri May 17 13:19:33 2019 +0000

    Bug 22932: GetLatestSerials should not return formatted date
    
    This patch updates GetLatestSerials in Serials.pm to remove date
    formatting. Formatting of dates should be done in the template using
    $KohaDates.
    
    To test, apply the patch and locate a bibliographic record in the staff
    client which has a subscription with issues.
    
     - On the bibliographic detail page for that record, view the
       "Subscriptions" tab. Dates in the table of recent issues should be
       formatted correctly.
     - View the details for the subscription in the Serials module. Create
       or edit a routing list for that serial. In the "Issue" dropdown the
       issue dates should be formatted correctly.
     - View the bibliographic detail page for the record in the OPAC. Open
       the "Subscriptions" tab. In the table of recent issues publication
       date and received date should be formatted correctly. The table
       should sort correctly on these dates.
    
    Note: Although opac-ISBDdetail.pl calls GetLatestSerials, as far as I
    can tell there is no serial-related output to update. The code appears
    to be unused.
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bb06060c4c3e0f4393f24096400ee4c8312a44ec
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon May 13 18:05:38 2019 +0000

    Bug 22914: Add holds column to batch item delete to fix show/hide columns behaviour
    
    The changes on 19490 caused a bug, where the show/hide column feature hides the
    wrong column on the items table. The two templates share a js file, and
    the data passed is the same.
    
    Adding the column to the template brings things back into alignment,
    the data is already there, we just show it.
    
    TEST PLAN:
    1. Go to Tools > Batch item deletion and enter at least one barcode.
    2. Try to hide a column that is showing
    3. Notice it hides the wrong column
    4. apply patch
    5. repeat steps 1 and 2.
    6. Notice the correct column is being hidden
    7. Verify the new column for number of holds on the item works correctly
       for item and record level holds
    
    Signed-off-by: Lisette Scheer <lisetteslatah@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 427e4ebc6ba4d52154bc8330b8edf54d5a6b88b2
Author: Liz Rea <wizzyrea@gmail.com>
Date:   Fri May 24 12:56:40 2019 -0500

    Bug 21450: (QA follow-up) remove a couple of unused variables to make QA script happy
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 848a0d41fffba7df1be9f2584770112f0938beb0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 28 14:58:20 2018 +0000

    Bug 21450: Cache authorities search using term and auth_type
    
    This is a simple fix to prevent incorrect caching of results when using
    link_bibs_to_authorities
    
    To test:
    1 - Find or create a record with the same term in a subject and genre
    heading
    2 - Find or create authority records for the term as a subject and genre
    type
    3 - Run link bibs to authorities
    4 - Verify both tags in the record are linked to the subject heading
    5 - Aply patch
    6 - Unlink the record and re-run the script (or just re-run)
    7 - Each tag should be linked to correct authority
    
    Signed-off-by: Frank Hansen <frank.hansen@ub.lu.se>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 366ef794969c3bc67c70ea7c9d85cb04944f4f05
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 23 21:07:41 2019 +0000

    Bug 21450: Unit tests
    
    To test:
    1 - Apply just this patch
    2 - prove -v t/db_dependent/Linker_Default.t
    3 - It fails
    4 - Apply second patch
    5 - prove -v t/db_dependent/Linker_Default.t
    6 - It passes
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Bug 21450: Remove copyright lines
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3034c028264f072fc1a447a11a518255282fc990
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu May 16 10:54:03 2019 +0000

    Bug 22724: Check permissions in the script before displaying template
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d36566d6eaa9dd02528bbd1219747ccfd4e6b531
Author: Hayley Pelham <hayleymapley@catalyst.net.nz>
Date:   Wed May 8 15:39:33 2019 +1200

    Bug 22724: Allow only users with correct permissions to 'Write off selected'
    
    Due to the addition of a 'Write off selected' button in 18.11, users without
    writeoff permissions could mistakenly view and action the 'Write off
    selected' option for a patron in Accounting > Make a payment (Fines > Pay fines).
    The attached patch corrects this error.
    
    Test plan:
    1) Make sure that a staff user has '(writeoff) Write off fines and fees'
    permission disabled
    2) Bring up a patron with an unpaid fee, go to Accounting -> Make a
    payment
    3) Note that 'Write off selected' button is displayed.
    4) Select a fee, click 'Write off selected'. Note that staff member has
    access to 'Write off an amount toward selected fines'
    5) Apply the patch
    6) Repeat steps 1-2, and note that the button is no longer displayed
    7) Bonus points, as a staff user with writeoff permissions enabled check
    that all four buttons (Pay amount, Pay selected, Write off all, Write
    off selected) are displayed
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f5894d41d21b3d57217397f7d8de500082e66157
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue May 14 13:43:12 2019 +0000

    Bug 22904: Untranslatable strings in members-menu.js
    
    This patch moves several English strings out of members-menu.js and into
    str/members-menu.inc where they can be picked up by the translation
    process. The following strings are affected:
    
    "Are you sure you want to renew this patron's registration?"
    "Are you sure you want to update this child to an Adult category?  This
    cannot be undone."
    "Dates of birth should be entered in the format 'MM/DD/YYYY'"
    "Dates of birth should be entered in the format 'YYYY-MM-DD'"
    "Dates of birth should be entered in the format 'DD/MM/YYYY'"
    "Dates of birth should be entered in the format 'DD.MM.YYYY'"
    
    This patch also makes a correction to members-toolbar.inc in order to
    enable the presence of the "Update child to Adult" menu item.
    
    To test:
    
     - Install and update a language.
     - Check the po-file for that language. You should find no msgid for
       the strings listed above.
     - Apply the patch.
     - Update the language you installed.
     - You should find entries for all the strings above.
     - Translate those messages and update the translated templates.
     - Reinstall the translation.
    
    In the staff client:
    
     - Select your updated translation.
     - Open an expired patron's account and choose "Renew patron" from the
       "More" button in the toolbar. You should be prompted for confirmation
       using the translation you provided.
     - To test the "Update child" confirmation you should have only one
       patron category in the "Adult" category.
       - Open a patron record with a child category and choose "Update
         child" from the "More" menu in the toolbar. You should be prompted
         for confirmation using the translation you provided.
     - To test the date format messages: From the patrons home page, expand
       the advanced search options in the header search form. Select "Date
       of birth" under "Search fields." A correctly-translated tooltip
       should appear above the search field.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 39c4d9d55e5a2e137adbbbd2b29b5b829f66b59e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 14 12:23:25 2019 -0500

    Bug 22908: Prevent ModSuggestion to send a notice if something wrong happened
    
    There is a return value $status_update_table that is set to 0, then we
    send the alert (whatever the value of this variable). We must return
    earlier if something happened!
    
    Test plan:
    Not sure how to recreate it via the interface, so just run the tests?
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9613d9f1647bfceeb15b60c731f2c84796a12f87
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 14 12:21:57 2019 -0500

    Bug 22908: Add tests
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 990c94721c0822d4660021080f52f5c5edf2ef66
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 23 13:29:26 2019 +0000

    Bug 22974: Patron password update validation broken
    
    This patch adds back an include file to the change password template
    which was inadvertently removed by Bug 21964. This broke Javascript
    validation of the new password fields.
    
    To test, apply the patch and enable the RequireStrongPassword system
    preference.
    
     - Go to Patrons -> Patron details -> Change password.
     - Try entering a weak password in the "New password" field. You should
       get a validation error: "Password must contain at least 3 characters,
       including UPPERCASE, lowercase and numbers."
     - Try entering a password in the second password field which doesn't
       match the first. You should get a validation error: "Please enter the
       same password as above."
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Bin Wen <bin.wen@inlibro.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bf501498634eca478f7f902bb9e41c42731c7622
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri May 17 14:00:32 2019 +0100

    Bug 21662: (QA follow-up) Use commitdates over RM dates
    
    The manual maintanence of the history.txt file lead to some
    discrepancies in first commit dates for many contributors. After a
    discussion regarding the automation proccess (and with some of the
    contributors who would be most heavily affected) we decided to update
    the history file on mass to match the commite dates found in the
    repository.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 533ff7ab29a1ca6d35d0e306dd97273838ad3064
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon May 27 09:39:34 2019 +0000

    Bug 15221: (QA follow-up) Fix Message.t
    
    As Jonathan reported on comment11, SIP/Message.t fails now.
    
    This is a trivial fix for that. In the first case we should just no longer
    expect the alert flag. In the second case it makes more sense to toggle
    the value of the checked_in_ok setting.
    
    Test plan:
    Run t/db_dependent/SIP/Message.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e9aa9b84fcc1b18a7988b380760374c8c9a6848d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 22 14:26:41 2019 +0000

    Bug 20436: (RM follow-up) Use Koha objects instead of mysql
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d7e3b483714436772c47ba0f8d33e5ace74c1427
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 22 14:37:53 2019 +0000

    Bug 17698: (RM follow-up) Pass lang variable so letter can be translated
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 78b866fcd9f792f1195b90d7a49566f0055e658c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 22 14:32:26 2019 +0000

    Bug 14385: (RM follow-up) Remove line from bad rebase
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit edb9f498f7148a0d6b2c232a8c22412e113c422b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon May 13 15:34:47 2019 +0000

    Bug 22896: Missing inputs in transfer modal
    
    This patch restores hidden inputs to save overridden checkin date and other data
    
    Currently we lose the list of checkouts and several settings when items with transfers are checked in
    
    To test:
    1 - Find an item from another branch
    2 - Set a checkin date and click the box for the date to be remembered
    3 - Check in the item
    4 - Click ok or print, note the checkin date is lost
    5 - Apply patch
    6 - Repeat
    7 - Checkin date remains
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a6840d14d27c669b09e0dbd4e6469e0b3196cd4b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue May 14 13:17:34 2019 +0000

    Bug 22802: Check item funds, order funds, and default funds when ordering from a file
    
    This patch tries to centralise the logic of order funds requirements into a single routine.
    If propogates defaults down into items/order as necessary, it also prevents unsetting lower values if
    a default is set.
    
    To test:
    1 - Populate 'MarcItemFieldsToOrder'
    2 - Add to a basket from a file
    3 - Use a file containing some item records with funds defined or not
    4 - Confirm if all items have funds defined, you can order
    5 - Confirm that setting the default for an order populates items and you can order
    6 - Confirm that setting the default for all orders populates items if present/ order if not
    7 - Confirm that if defaults are set the lower levels cannot be unset
    8 - Try various settings and confirm all work as expected
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b67462d471a54bf342295cbc5e46373d065bab7e
Author: Henry Bolshaw <bolshawh@parliament.uk>
Date:   Wed May 22 15:02:40 2019 +0000

    Bug 22965: fixes typo on classification sources description on admin homepage
    
    Removed comma from description.
    
    Test plan:
    1. Go to Admin homepage
    2. Check Classification Sources description
    3. Verify that comma after i.e. has gone removed
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bb2459f12ed7c8151ae0690850ca5351d64c4aac
Author: Chris Cormack <chrisc@catalyst.net.nz>
Date:   Wed May 22 13:32:14 2019 +0000

    Bug 22962: Punctuation error in RisExportAdditionalFields
    
    To test
    1/ Go to systempreferences search for RisExportAdditionalFields
    2/ See the extra , on the first line
    3/ Apply the patch
    4/ See it is fixed
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6586762ff3a52da3316aec4f55ce3ecbdbd133b6
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue Apr 23 10:37:10 2019 +0000

    Bug 22746: Fix typos in add mana comment modals again
    
    Test plan:
    1) Create subscription from Mana
    2) On subscription detail page: report mistake > other a modal is shown
    it should be exactly 'Please enter a new commment (max 35 characters)'
    3) The same in mana search results and in reports
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d963a3854c962bda3361213f2ad8e7626311d20b
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue May 21 11:12:44 2019 +1000

    Bug 15221: SIP server always sets the alert flag when item not returned
    
    The checked in response from the ACS always has the alert bit set to
    true, even when using the checked_in_ok option.
    
    This patch sets the alert bit to 0 when checked_in_ok is used and
    the item is checked in without a preceding checkout.
    
    To test:
    
    0) Create patron in web interface with a cardnumber and userid of "staff" with a password
    that matches the account in SIPconfig.xml. Also set their branch to CPL
    (also matching SIPconfig.xml).
    1) Create an item with a barcode of 'test'
    2) Choose a patron to check out to and record their borrowernumber
    
    In one terminal:
    3) cd to your git directory (e.g. /home/koha/koha)
    4) perl ./C4/SIP/SIPServer.pm ~/koha-dev/etc/SIPconfig.xml
    
    In another terminal:
    5) cd to your git directory (e.g. /home/koha/koha)
    6) perl ./misc/sip_cli_emulator.pl -l CPL -su staff -sp <password> --port=6001 --address=localhost --item test -m checkin --patron <borrowernumber>
    NOTE: You need to replace <borrowernumber> with the borrowernumber from Step 2, and <password> with the password from Step 0.
    
    Before patch:
    
    koha@9ec653ab82ce:~/koha$ perl ./misc/sip_cli_emulator.pl -l CPL -su staff -sp <password> --port=6001 --address=localhost --item test -m checkin --patron <borrowernumber>
    Attempting socket connection to localhost:6001...connected!
    SEND: 9300CNstaff|COStaff1|CPCPL|
    READ: 941
    
    Trying 'checkin'
    SEND: 09N20190521    00310320190521    003103APCPL|AOCPL|ABtest|AC<password>|BIN|
    READ: 101YNY20190521    003106AOCPL|ABtest|AQCPL|AJTest|
    
    After patch:
    koha@9ec653ab82ce:~/koha$ perl ./misc/sip_cli_emulator.pl -l CPL -su staff -sp <password> --port=6001 --address=localhost --item test -m checkin --patron <borrowernumber>
    Attempting socket connection to localhost:6001...connected!
    SEND: 9300CNstaff|CO<password>|CPCPL|
    READ: 941
    
    Trying 'checkin'
    SEND: 09N20190521    01000020190521    010000APCPL|AOCPL|ABtest|AC<password>|BIN|
    READ: 101YNN20190521    010004AOCPL|ABtest|AQCPL|AJTest|
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 189bde4a1d043a25a0eddcc07401b7946653c3b1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Dec 7 14:43:18 2018 -0300

    Bug 21831: Allow move all fields even if destination field is different
    
    Tests exist in t/SimpleMARC.t to prove that it works and it is possible.
    I do not remember what I wrote this limitation.
    
    Signed-off-by: Jon Knight <j.p.knight@lboro.ac.uk>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6ae2edb033ed7ebc2683026f42cf9400babd604b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 16 14:07:25 2019 -0500

    Bug 22917: Fix typo in another test file
    
    It looks safe to do it here and now.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 04d990c71d34d0c44999cfdf80e8379959d14de8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu May 16 16:55:16 2019 +0100

    Bug 22917: Fix a typo in an output_pref call
    
    Due to a type in a call to output_pref (datenonly vs dateonly) we were
    comparing logactions within a minutes accuracy. Counting the logs for
    the day would be sufficient for the test ;)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6cf717e6c9e377850674ad6462480884a047145b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 15 19:46:48 2019 -0500

    Bug 22917: Prevent Circulation.t if tests ran too slowly
    
    After bug 21213 we wanted to know why Circulation.t was failing randomly on a given test.
    Since it is pushed, it failed (at least) twice, with the same error:
    
        #   Failed test 'AddReturn must have debarred the patron'
        #   at t/db_dependent/Circulation.t line 3112.
        #          got: ''
        #     expected: '1'
        # AddReturn returned message $VAR1 = {
        #           'WasReturned' => 1
        #         };
    
        #   Failed test 'Test at line 1918'
        #   at t/db_dependent/Circulation.t line 3116.
        #          got: '0'
        #     expected: '1'
    
        #   Failed test 'Test at line 1918'
        #   at t/db_dependent/Circulation.t line 3119.
        #          got: undef
        #     expected: '2019-05-30'
        # Looks like you failed 3 tests of 21.
    
    The test at line 3113 expects the flags 'WasReturned' and 'Debarred' to be set,
    but only WasReturned is.
    Which means the patron has not been debarred. It is not because the checkout has
    not been detected as overdue.
    
    If you apply only the first patch you will see that the tests are failing with
    the exact same failures.
    Indeed, if due_date is not passed to test_debarment_on_checkout, it is set to now (dt_from_string).
    However, if the call and the test of the parameters inside the subroutine takes
    more than 1 second,
    then due_date will be after what we really expect. To reproduce that, we add
    1 minute to due_date and we observe the tests failing.
    
    The trick here (and we should have in all our tests) is to mock
    DateTime->now to make sure dt_from_string will always return the same
    value, it is what we expect from our tests (in 99.9% of the cases at
    least).
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 085cb4de51c528b6a50b60f591f6b5ac426efd6a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 15 19:45:06 2019 -0500

    Bug 22917: Recreate the failure
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 53545ba739e1706da7f3e52c145f0f6c8bbfb18c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Dec 24 12:52:53 2018 +0000

    Bug 22046: Simplify and unify the code for get_matches
    
    To test:
    1 - Stage some records for import
    2 - Manage the records
    3 - Use several different matching rules and note the results
    4 - Apply patch
    5 - Try several matching rules again and note the results have not
    changed
    6 - Try under both search engines (Zebra and ES)
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cbacf68d7fb554bd949e2f498c1eda86b34ef97f
Author: David Gustafsson <glasklas@gmail.com>
Date:   Fri May 17 12:30:47 2019 +0000

    Bug 22934: Add missing use statement
    
    Also fixes a typo
    
    To test:
    1 - Add a subscription to a record
    2 - Add an additional field in the admin section
    3 - Edit the subscription and define the additional field
    4 - Ensure you can view the record in the staff client and opac
    5 - Without patch ,in the subscription detail page,click the link of the record title. => software error.
    6 - Apply the patch. => no error anymore.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Bin Wen <bin.wen@inlibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Fixed another typo on L21
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9532a3edeacd8fb3df67e8a01ed4e89069ffc017
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed May 15 08:41:01 2019 +0200

    Bug 22705: Change default value of cxn_pool to 'Static'
    
    'Static' is the default value of Search::Elasticsearch and for a good
    reason : it works in most cases, unlike the 'Sniff' option
    
    To test:
    1 - Apply patch
    2 - Edit koha-conf.xml
    3 - Add '<cxn_pool>Static</cxn_pool>' to the elasticsearch stanza
    4 - Restart all the things!
    5 - Reindex ES, it works
    6 - Set SearchEngine to ES, try searching
    7 - It works!
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ae2f21e74dc68c305d88ba26f60282550e3c448b
Author: Liz Rea <wizzyrea@gmail.com>
Date:   Thu May 16 18:38:23 2019 +0000

    Bug 22905: (QA follow-up) remove bad warn
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fe053f0ee06508d1c6e2675dcadc535075900b6e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 16 13:20:53 2019 -0500

    Bug 22905: Fix update of suggestion's status if branchcode filter is 'all'
    
    Because of the "Library" filter on the left of the "Suggestions management" screen, there is something wrong happening:
    
    1. Create a suggestion from library A, login from library B
    2. Go to  Home › Acquisitions › Suggestions management
    => The suggestion does not appear - OK
    3. In the filter on the left, select "all library"
    => The suggestion appears on the pending tab - KO
    4. Select the suggestion and mark is as 'Accepted'
    => The suggestion still appears on the pending tab - Failure
    
    The log says:
    DBD::mysql::st execute failed: Cannot add or update a child row: a foreign key constraint fails (`koha_kohadev`.`suggestions`, CONSTRAINT `suggestions_ibfk_branchcode` FOREIGN KEY (`branchcode`) REFERENCES `branches` (`branchcode`) ON DELETE SET NULL ON UPDATE CASCADE) [for Statement "UPDATE `suggestions` SET `accepteddate` = ?, `branchcode` = ?, `currency` = ?, `manageddate` = ?, `price` = ?, `reason` = ?, `suggesteddate` = ?, `total` = ? WHERE ( `suggestionid` = ? )" with ParamValues: 0='2019-05-14T15:48:18', 1="", 2="CAD", 3='2019-05-14T15:48:18', 4="0.00", 5="", 6='2019-05-14T00:00:00', 7="0.00", 8=3] at /usr/share/perl5/DBIx/Class/Storage/DBI.pm line 1836.
    
    Let forget what could have happened earlier in the script and do it the regular
    way, from $input. Then call ModSuggestion with only what we need.
    
    Test plan:
    Confirm that the steps described before work as expected once this patch is applied
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    https://bugs.koha-community.org/show_bug.cgi?id=22907
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0ed7cc0c577720f262110427ebe4d0922aa6ca99
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue May 14 15:52:29 2019 +0100

    Bug 21626: (QA follow-up) Remove duplicate roles
    
    The teams file contains all roles so we don't need to also list them in
    the contributors file. This patch removes them from contributors.yaml
    and relies only on the merging of teams.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fc3f34afbe05442d82237abca7c8999945186791
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue May 14 15:39:01 2019 +0100

    Bug 21626: (QA follow-up) Embed teams.yaml for debian packages
    
    Like history.txt we need to tell some debian/ files to copy
    teams.yaml
    Also pick it for the `make install` process (Makefile.PL)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ec08e5af1202eb01cb70b0f922767f02eaeaedc3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue May 14 15:34:44 2019 +0100

    Bug 21626: (QA follow-up) Don't crash on missing teams file
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1edd15129c965fc85772484b1cd011817ffaa764
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon May 13 20:53:05 2019 +0100

    Bug 21626: (follow-up) Template corrections for arrayref
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6c7cf0111a2c231b5888bb0884fd217432539f1f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon May 13 20:11:45 2019 +0100

    Bug 21626: Corrections to typos
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 06ccce11c1a9071b08973e2ab6930c39492f4d42
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri May 3 11:56:48 2019 +0100

    Bug 21626: Add release dates to team
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5578771047e7ddb072bcd6025933591bebd53e6d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri May 3 10:10:04 2019 +0100

    Bug 21626: (follow-up) Performance Improvement
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 77e91f34fc782f2492a0d2315daeca145acfd5be
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri May 3 06:41:44 2019 +0100

    Bug 21626: (follow-up) Changes based on feedback
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c07aaf8aca9d850a92727b0158680bccd15be505
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 11 14:33:30 2019 +0100

    Bug 21626: Use teams.yaml for teams section
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5849613649010f182d2ec2a90e8ff51ad4d0b640
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 11 14:17:54 2019 +0100

    Bug 21626: Add teams.yaml to /docs
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3690ee6513241bd855422ab7450866e246eff2d3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 16 12:22:13 2019 -0500

    Bug 22928: Add selenium tests
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 583fba977e18cbe4d1fad7a6609d6345095e9920
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 16 09:42:32 2019 -0500

    Bug 22928: (bug 20226 follow-up) Fix display of 'Update child to adult' link
    
    Looks like it is caused by bug 20226, however I am pretty sure it works when I wrote the patch.
    
    [% IF Categories.scalar.all(category_type => 'A').count > 0 %]
    
    is always wrong.
    
    It must be, either:
      [% IF Categories.all(category_type => 'A').size > 0 %]
    or
      [% SET adult_categories = Categories.scalar.all(category_type => 'A') %]
      [% IF adult_categories.count > 0 %]
    
    In the first case we are getting an array whereas in the later, a
    Koha::Patrons which is preferable.
    
    Test plan (from 20226):
    - Remove all your adult categories (categories.category_type='A')
    - Create a patron with a child category
    - Try to update to adult category
    => The entry does no longer appears! (This is a change in the behaviour)
    - Create one adult category
    - Update to adult category
    => There is a JS confirmation message, if you accept the patron will
    be updated to the adult category
    - Create (at least) another adult category
    - Create another child
    - Update to adult category
    => No more confirmation message but a popup to select the adult category
    - Pick one
    => The patron has been updated to the adult category
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2ccc5dcdf124ff8275f58826c837fc55cfd8a9a1
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri May 17 08:35:20 2019 +0000

    Bug 22930: (QA follow-up) Add two test descriptions
    
    No more than that ;)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 52325a771a02b603e807c29d586fe44fabebb792
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 16 12:56:07 2019 -0500

    Bug 22930: Make TestBuilder->build_object explodes if parameters are wrong
    
    This patch implements bug 15339 for build_object.
    We want it to warn if the call is wrong.
    
    Test plan:
    Make sure the tests are still returning green
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9515ee6bf05236d189f5318bc33a5469e45acc5b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 9 17:52:26 2019 +0000

    Bug 22657: (QA follow-up) Restore previous version of regex
    
    This patch restores the previous version of the regular expression which
    parses the OPACSuggestionMandatoryFields system preference value.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3bcde5d91fb19e30ee14c8ecc82c8f3985a22c2c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Mar 20 18:58:02 2019 +0000

    Bug 22657: Remove JavaScript from OPAC suggestion validation of required fields
    
    This patch modifies the OPAC suggestion form so that it doesn't require
    JavaScript for form validation. This change doesn't alter the behavior
    of the form for users but does fit with the general goal of progressive
    enhancement for the OPAC.
    
    The patch adds "required" labels to required fields to better identify
    required fields.
    
    To test, apply the patch and make sure there are required fields
    specified in the OPACSuggestionMandatoryFields system preference.
    
     - Log in to the OPAC and go to Your purchase suggestions -> New
       purchase suggestion.
     - Verify that the fields specified in OPACSuggestionMandatoryFields are
       highlighted and marked "required."
     - Verify that you can't submit the form without filling out these
       fields.
    
    Signed-off-by: Bin Wen <bin.wen@inlibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f2d886c3b3513ace62f428d4e42d4d144a689172
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat May 11 21:01:51 2019 +0000

    Bug 4833: (QA follow-up) Add budgetname to SearchSuggestion
    
    This patch adds the budgetname to the return of SearchSuggestion
    to improve performance.
    
    To test:
    - Same test plan as for the first patch
    - Verify fund names show in the table
    - Run t/db_dependent/Suggestions.t
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3d3944cba3ce11af8ecc7feeee4ad0fef737f069
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Mar 11 07:47:43 2019 +0000

    Bug 4833: Show acq information when selecting suggestion for order
    
    When adding an order line to a basket using the 'from a suggestion'
    feature, the list of accepted suggestions doesn't show any information
    from the acquisition are of the suggestions.
    
    This patch adds new columns to the list for:
    - library
    - fund
    - price
    - quantity
    - total
    
    To test:
    - Create several suggestions with
      - Empty acq values
      - A specific library, any library
      - Set acq values (fund, price, quantity)
      - Accept your suggestions
    - Create a new basket/order
      - Add an order line from accepted suggestions
      - Verify the list displays nicely with the new columns
      - Verify filters etc. still work ok
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 71018d4cca41c9e9eeab1d8980af4f7253a728a8
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat May 11 12:59:33 2019 +0000

    Bug 21651: (QA follow-up) Remove remaining obsolete file from German web installer
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 990cc79ef085b74764cd68875fc0fd6dc6da8ffe
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 24 17:02:39 2018 -0300

    Bug 21651: Always insert notice templates related tables
    
    The 3 following files must be mandatory and insert during the install process:
    - message_transport_types.sql
    - sample_notices_message_attributes.sql
    - sample_notices_message_transports.sql
    
    They insert data for
    - message_transport_types
    - message_attributes
    - message_transport_type
    
    Otherwise the notice templates (table letter) will fail.
    
    Moreover these 3 files are identical and are put in several places (1 per language)
    to make the description translatable (using the related .txt file)
    
    Test plan:
    - Install Koha in English and in another language
    - Select all the sample data
    => They all should be inserted correctly
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1114ba929f0aa634d6f9c10d8931c2ca25871c7d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 24 16:34:46 2018 -0300

    Bug 21651: Remove language specific sql file for notice templates related tables
    
    This patch removes the 3 following files for the different languages
    - message_transport_types.sql
    - sample_notices_message_attributes.sql
    - sample_notices_message_transports.sql
    They were all identical, only one version is kept in installer/data/mysql/mandatory
    
    .txt files are removed as well
    
    They inserted data for
    - message_transport_types
    - message_attributes
    - message_transport_type
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5cc8fb5e07eab457f998c42e1b7cd22c387e647b
Author: Arthur Suzuki <arthur.suzuki@biblibre.com>
Date:   Fri Apr 19 11:48:31 2019 +0200

    Bug 22742: ILS-DI - Fix datetime format returned by RenewLoan
    
    Test plan :
    Call RenewLoan a few times and check the date returned is correct (minute wise).
    
    Signed-off-by: Arthur Bousquet <arthur.bousquet@inlibro.com>
    Signed-off-by: Bin Wen <bin.wen@inlibro.com>
    
    https://bugs.koha-community.org/show_bug.cgi?id=22472
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3b037a77362c5a425fd2b551ddf0280eda38e733
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat May 11 21:33:32 2019 +0000

    Bug 22889: Fix typos librairies and libaries
    
    Fixes 2 typos.
    
    Test:
    - Review patch
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d9248c8802c4009ca99209da549447d13d6f686f
Author: Colin Campbell <colin.campbell@ptfs-europe.com>
Date:   Thu May 9 11:32:25 2019 +0100

    Bug 22875: Document verbose option in import_patrons
    
    Docs did not state that verbose can be repeated or that you
    need more than 1 repetition to see lines that have failed
    
    To test:
    - Run ./import_patrons.pl -h
    - Verify the additional documentation for -v is shown.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9bc386a98fa51617ef927d4133ae310e17676dd5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sun May 12 19:46:58 2019 -0500

    Bug 22892: Remove warning from rebuild_es if --processes not passed
    
    Use of uninitialized value $processes in numeric lt (<) at
    misc/search_tools/rebuild_elasticsearch.pl line 199.
    
    We want the number of processes to be set to 1 by default, and then
    assign it to $slice_count
    
    Test plan:
    Run the script with and without --processes and confirm that the warning
    went away.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f00d909220ebde5162335e255e4ba938a9563bff
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun May 12 00:34:03 2019 +0200

    Bug 22886: Missing space between fields from Keyword to MARC mapping in cataloguing search
    
    If you have multiple subfields mapped to the 'subtitle' keyword,
    those fields will show up without separating space.
    
    To test:
    - Add 3 subtitle entries in Keyword to MARC mapping for a framework
      - 245 b
      - 245 c
      - 245 h
    - Edit a record, make sure the framework matches, add:
      - 245 b, c, h
    - Search for it in cataloguing search (not catalog!)
    - Verify the subtitle fields show, but are all concatenated
    - Apply patch
    - Search again and verify the display is improved with a separating
      space
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 97ec0a2e4bf76cf2e67a7ddbd463d9942a4fe383
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sat May 11 10:23:28 2019 -0500

    Bug 20514: Use streetnumber when searching for patrons by address
    
    The streetnumber field was ignored from the search.
    
    Test plan:
    Create a patron with streetnumber="12", address="rue des cerisiers"
    Search for patrons using the search field "street address"
    using: 12 rue des cerisiers
    => Without this patch the patron will not be returned
    => With this patch applied it will!
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5410186f6829fc4b74a845e8954bd7eea3f19862
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 1 21:05:30 2019 -0400

    Bug 22781: Correctly filter the emails
    
    Ho, another bug!
    
    The email was not correctly filtered.
    
    Test plan:
    Use the evil string for an email, do a search.
    => Notice that without this patch the results never show up
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ecb12104ffc7284089a1c8134ca8811e99e7419c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 1 20:54:02 2019 -0400

    Bug 22781: Does not double filter address
    
    Ho, a bug!
    Some fields in the address where double filtered.
    
    Test plan:
    Use the evil strings in the address field and do a search, you will see
    double html encoded characters without this patch.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 35d00030ceb572822979300a5291356a32427a16
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 1 20:29:05 2019 -0400

    Bug 22781: Test patron's info filtering
    
    The patron's data was not correctly escaped actually.
    
    Test plan:
    This is a good value for the whole patchset: <strong>fir's"tname</strong> \123 ❤
    use it for a patron's firstname, then do a search
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3a3057545c56f4f1a41fcd7643265204844cd2d3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 1 20:28:04 2019 -0400

    Bug 22781: Escape cardnumber, category's description, library's name and dateexpiry
    
    This will fix the previous failure. Note that other fields like
    borrowernumber, Price escaped values, integers, etc. could be escaped
    the same way but will be useless (save polar bears).
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6e8ecb8c6c8cf5d5188d2ad138e4fdbd8f395b3e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 1 20:28:55 2019 -0400

    Bug 22781: Add tests
    
    Test plan:
    Apply only this patch
    => The tests will fail, the library's name is not correctly escaped.
    
    Note:
    This applies for the whole patchset, when the tests fail you will need
    to remove the patrons added by the tests with the following SQL query:
      delete from borrowers where surname like "test_patron_%";
    We are expecting END to be called even if something goes wrong, but
    DESTROY must be used instead. This will be fixed separately, on its own
    bug report.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 43047ee734e2b6b650e43710a712390433cbb2bd
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Feb 11 14:04:01 2019 +0000

    Bug 22225: Correctly use invoiceincgst over listincgst
    
    Mistakenly, we were looking at listincgst in the templates but using
    invoiceincgst in the scripts. This patch rectifies that by switching to
    use invoiceincgst in the templates too.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3f817f056bb7373abbd08882132c230f41057717
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sat May 4 12:31:05 2019 -0400

    Bug 22850: Do no longer use set_userenv in tests (SharedContent.t)
    
    Since bug 21817 we should use the mock_userenv subroutine instead.
    
    Test plan:
    The tests must pass after this patch
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8d53fae9494b50c0cf2dcc98b18982b0d8fc416f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri May 10 12:27:40 2019 -0500

    Bug 22878: Do not pass layout_id on creating a layout
    
    Attempting to create a patron card layout with mysql strict mode on gives the following error:
      DBD::mysql::st execute failed: Incorrect integer value: '' for column 'layout_id' at row 1
    
    Test plan:
    - Turn on sql_strict_modes
    - Create a new patron card
    => Must success with this patch applied
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9f18afa7b34574cd872c94ee366a8d3e75085413
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri May 10 12:27:34 2019 -0500

    Bug 22878: Add tests
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 700b7dfa09e38c074cebbbb5caac64e031d5c0d5
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Apr 29 03:14:35 2019 +0000

    Bug 7862: Preventing warns when creating a notice
    
    To reproduce warns:
    1) Go to Tools -> Notices & slips
    2) Create a new notice of any module
    
    Notice these warns:
    Use of uninitialized value $code in regexp compilation at
    /home/vagrant/kohaclone/tools/letter.pl line 265.
    Use of uninitialized value $code in regexp compilation at
    /home/vagrant/kohaclone/tools/letter.pl line 265.
    Use of uninitialized value $code in regexp compilation at
    /home/vagrant/kohaclone/tools/letter.pl line 265.
    
    CGI::param called in list context from package
    CGI::Compile::ROOT::home_vagrant_kohaclone_svc_letters_get line 50, this
    can lead to vulnerabilities. See the warning in "Fetching the value or
    values of a single named parameter" at /usr/share/perl5/CGI.pm line 436.
    CGI::param called in list context from package
    CGI::Compile::ROOT::home_vagrant_kohaclone_svc_letters_get line 50, this
    can lead to vulnerabilities. See the warning in "Fetching the value or
    values of a single named parameter" at /usr/share/perl5/CGI.pm line 436.
    
    3) Create a new notice of the Circulation module
    
    Notice this additional warn:
    Use of uninitialized value $code in pattern match (m//) at
    /home/vagrant/kohaclone/tools/letter.pl line 258.
    
    To test:
    4) Apply patch and refresh page
    5) Run steps 1-3 again and confirm no warns show
    
    Sponsored-by: Catalyst IT
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 92ab7f66eb5371596d8c46e56f4fdb503ed5d81c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 15 12:10:15 2019 +0000

    Bug 22836: (follow-up) improve test message
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7799f4ddd1f1fe111081dc3695c9038fa500e961
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 2 21:04:54 2019 -0400

    Bug 22836: (follow-up) Bug 22478: (QA follow-up) Make test consistent with variable name
    
    One occurrence was missing.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7bed2a3fe61ff605b636e292e73b96947de23b29
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 2 20:49:45 2019 -0400

    Revert "Bug 22478: (QA follow-up) Handle category in opac-shelves like a boolean"
    
    This reverts commit 375dd35d5354d46c4c16f534494b123ce370c3f4.
    
    https://bugs.koha-community.org/show_bug.cgi?id=22836
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c265fcc476bc4d4fc74d5a23c0d5ef8ef21650b2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 2 20:49:37 2019 -0400

    Revert "Bug 22478: (QA follow-up) Update tests to check for any script tags"
    
    This reverts commit d9b3b90849fd95d296b73b330c4e32ff018c81a5.
    
    https://bugs.koha-community.org/show_bug.cgi?id=22836
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0bf785018d18c3c9a548c87ce2769032e181d348
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sun May 12 11:51:28 2019 -0500

    Bug 22891: (bug 21206 follow-up) Fix RenewHold (ILS-DI)
    
    From
      commit 31c29fd31f557306233e6a2936148a5bb10b89a1
      Bug 21206: Replace C4::Items::GetItem
    
    A missing 'unless' test made RenewHold return prematurely:
      return $issue;
    should have been
      return unless $issue;
    
    Test plan:
    Hit /cgi-bin/koha/ilsdi.pl?service=RenewLoan&patron_id=51&item_id=756
    
    With different situations:
    1. Item is checked out to the patron
    2. Item is not checked out to the patron
    3. Item does not exist
    4. Patron does not exist
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bc0d3e1a34e78fcf00f512e2bdff73c9de0bea8c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sun May 12 11:48:11 2019 -0500

    Bug 22891: Add tests
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b41f215bfedbae0898a9291d2f14e2a3dd560049
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri May 10 11:11:14 2019 -0500

    Bug 22812: Use Koha::Subscription in NewSubscription
    
    Starting to write tests I realize that we are going to add too much
    specific logic which is already handled in Koha::Object->store.
    The easiest and safe way is to use it :)
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 256b134a94e83b7072b5891a2d60f0e08e813583
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 6 13:50:54 2019 -0500

    Bug 22812: Fix GROUP BY in checkrouting
    
    On the way, let fix this error
    DBD::mysql::st execute failed: Mixing of GROUP columns
    (MIN(),MAX(),COUNT(),...) with no GROUP columns is illegal if there is
    no GROUP BY clause [for Statement "SELECT count(routingid) routingids
    FROM subscription LEFT JOIN subscriptionroutinglist
    
    Test plan:
    Create a routing list, search for subscriptions
    In the action list you should see "Edit routing list (1)" or "New
    routing list"
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0759811ab629e8215ee270b4ec920f71d9bc0d25
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 6 13:50:26 2019 -0500

    Bug 22812: Add tests for checkrouting
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e8e7ea352ef237555ee4d47c98feb879f3eb9e31
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 6 13:34:19 2019 -0500

    Bug 22812: Fix new subscription with strict sql modes
    
    With sql_strict_modes turned on, if you try to create a new subscription
    you will get:
    Incorrect integer value: '' for column '$INT_COLUMN' at row 1
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3b877cc240eb44acafaef1ed5f287eae3dfb7baa
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 6 11:55:32 2019 -0500

    Bug 22713: Remove unecessary $replacementprice var
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 57b027734e3c1a315cd11fedbf94771fa8381a30
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 25 16:23:22 2019 +0000

    Bug 22713: Pass replacement price in to order if defined by MarcItemFieldsToOrder
    
    To test:
     1 - Have AcqCreateItems set to 'On ordering' (or set in a basket)
     2 - Define MARCItemFieldsToOrder
        homebranch: 975$a
        holdingbranch: 975$b
        itype: 975$y
        nonpublic_note: 975$x
        public_note: 975$z
        loc: 975$c
        ccode: 970$c
        notforloan: 975$7
        uri: 975$u
        copyno: 975$n
        quantity: 975$q
        budget_code: 975$h
        price: 975$g
        replacementprice: 975$p
     3 - Have a marc record with some order info defined as above, including a replacementprice
     4 - Add to basket - > from a new file
     5 - Don't check for duplicates, add the order
     6 - Note the order has no replacementprice, but the item does
     7 - Close basket, receive order, do not enter a new replacement price
     8 - Note the items replacement price is clear
     9 - Apply patch
    10 - Repeat
    11 - Note when order added to basket it has a replacement price
    12 - Note when order is received the replacement price is populated and passed into item correctly
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 735d23c299669b40d3e3e2a4fe21b88fc6cca00f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 8 16:37:40 2019 -0500

    Bug 11853: Add tests
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6692800794cbf403e8be8c8062608b60148c0d56
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 8 16:37:50 2019 -0500

    Bug 11853: Allow to clear the date of birth at the OPAC
    
    A patron is not able to clear their date of birth.
    
    When cleared tt is set to NULL in DB which means, for the patron's
    modifications feature, that nothing has been changed.
    
    Test plan:
    0/ Do not apply the patch
    1/ Edit your personal details at the OPAC
    2/ Add a date of birth
    3/ On the staff interface, approve the modification request
    => OK it is updated
    4/ Edit your personal details and clear the date of birth
    5/ On the staff interface
    => KO the table display is wrong, nothing is marked has changed
    6/ Approve the modification requiest
    => KO it has not been cleared
    7/ Apply the patch and repeat 1 to 6 and confirm that the behaviors are
    now correct.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6d1b7ff27eb2d53d637c169c7132a66d546c0124
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri May 10 13:24:39 2019 +0000

    Bug 22881: Trying to clear search history via the navbar X doesn't clear any searches
    
    This patch undoes a mistake introduced in my patch for Bug 21479. A
    "preventDefault()" was added to the search history clear button by
    mistake. The "confirmDelete" function only works if the default action
    of the link is allowed to complete.
    
    To test you must have the EnableOpacSearchHistory system preference
    enabled. Apply the patch and log into the OPAC as a patron who has a
    search history.
    
    Click the "X" link in the header next to the "Search history" link.
    Confirm that you want to clear your search history. The page should
    refresh. Navigate to your account -> Your search history to confirm that
    your search history has been cleared.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a7419482c1e08b4de2dd707e4a7c4b3185ebb771
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sun May 12 19:26:41 2019 -0500

    Bug 22893: Embed contributors.yaml for debian packages
    
    Like history.txt we need to tell some debian/ files to copy contributors.yaml
    Also pick it for the `make install` process (Makefile.PL)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d4b503aa14b9297889c2a5b6f18fd2132c7bb304
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sun May 12 19:22:54 2019 -0500

    Bug 22893: Do not crash if contributors.yaml does not exist
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b90bbc125969dc0048dde2ec37531a6ef6cd2b36
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue May 14 18:15:54 2019 +0000

    Bug 22899: DBRev 18.12.00.075
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5c81d986212b480d9b491e46b3fb4498c0eb2c2c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue May 14 13:21:55 2019 +0100

    Bug 22899: (QA follow-up) Change accessor name
    
    This patch changes pending_hold to has_pending_hold to signify that
    we're returning a boolean and not a Koha::Hold object.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 49a6aac8b6d8fd13999638f5a6ae4d4481dbf304
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue May 14 13:17:01 2019 +0100

    Bug 22899: (QA follow-up) Ensure constraint is created
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f21ebad7d298f25e44771e5833d1d1d4d6d8f777
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon May 13 20:09:05 2019 +0000

    Bug 22899: Add pending_hold method to Koha::Item
    
    To test:
     1 - Enable course reserves
     2 - Create a course
     3 - Add an item to the course
     4 - Attempt to view the course on the OPAC
     5 - Internal Server Error
     6 - Apply patch
     7 - Add an item to the holds queue by placing a hold and  running holds queue builder or:
         INSERT INTO tmp_holdsqueue (itemnumber) VALUES (###);
     8 - View the course page, note item appears 'Pending hold'
     9 - Remove the holdsqueue line
    10 - View the course page, note item appears 'Available'
    11 - prove -v t/db_dependent/Koha/Item.t
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    I see Jonathan's comments about small improvements, but will sign off as
    everything works as expected here.
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit af1067f3d466cf3bd32c4747c4a00dd7542c1fe0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon May 13 20:08:06 2019 +0000

    Bug 22899: Database update
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f45fe692b14f45300456327bc74fd0a0872dff75
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sat May 4 12:33:34 2019 -0400

    Bug 22849: Do not share data (Mana) without agreement
    
    A couple of things wrong in serials/subscription-add.pl
    
    1.
    447     if ( defined( $query->param('mana_id') ) ) {
    
    It's always defined, you wanted to test with ""
    
    2.
    375     if ( (C4::Context->preference('Mana')) and ( grep { $_ eq "subscription" } split(/,/, C4::Context->preference('AutoShareWithMana'))) ){
    
    Mana == 2 == let me think about it
    => I am not expecting to reach Koha::SharedContent in that case
    
    So we are sharing data whereas the library did not decide yet!
    
    Test plan:
    You need to be familiar you Mana to test this patch.
    
    JD: I did not test this patch
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 31684a426be4dcdf75a06f1f15fcfc73726fa6ae
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 10 19:05:38 2019 +0000

    Bug 21411: DBRev 18.12.00.074
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 814dedb537ee0c569c7b8b7a1faa6c0ff44c4520
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue May 7 08:11:56 2019 +0000

    Bug 21411: (QA follow-up) Fix permission checks on admin page and menu
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b60230dccba64f7b6d5519bf735899953fbe2255
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 1 11:27:05 2019 +0000

    Bug 21411: (follow-up) Clean up for QA
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 775701a15a737705ae3cf063cefd96b47165ed9f
Author: Liz Rea <wizzyrea@gmail.com>
Date:   Tue Apr 30 14:21:31 2019 +0000

    Bug 21411: (QA follow-up) fix tests
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 581d2edd449e125de97e6950e857086742a4ab84
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 23 11:17:27 2019 +0000

    Bug 21411: Address QA concerns
    
    Move to admin
    Add a permission
    Remove descriptions from table
    Clean up template
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 164caa7eeb7b4475e7832ecdca9eb561bd4e5aee
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 4 11:40:17 2019 -0500

    Bug 21411: (follow-up) Missing filters and unused variable
    
    POD warnings from QA tool are false positives (basic functionsn POD not
    needed)
    
    Signed-off-by: Liz Rea <liz@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8b7342a823582462798bf2115d2f2e9897485184
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 4 11:23:31 2019 -0500

    Bug 21411: Advanced cataloging editor - rancor - Allow configuration of Keyboard
    
    This patch allows for redfining the keyboard shortcuts used in rancor.
    For now these are set globally (per instance)
    Ctrl-S is a codemirror setting and cannot be altered
    
    To test:
     1 - Apply patches
     2 - update database
     3 - Load the advanced cataloging editor
     4 - Click the "Keyboard shortcuts" button
     5 - Ensure the list looks correct
     6 - Note that 'Ctrl-S' note sit cannot be remapped
     7 - Note the 'Redefine shortcuts' link at the top of the menu
     8 - Confirm all the listed shortcuts work as expected
     9 - Click the 'Redefine' link
    10 - Ensure current mappings load correctly
    11 - Read explanation and verify it makes sense
    12 - Remap some functions
    13 - Return to the cataloging editor
    14 - Confirm your mappings work
    
    Signed-off-by: Liz Rea <liz@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ca605455c24c032a389cbe0d3388f90620501c3b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon May 6 13:07:17 2019 +0000

    Bug 22856: Show SQL code button should trigger CodeMirror view
    
    This patch adds CodeMirror syntax highlighting to the SQL view which can
    be shown on the report results page by clicking the "Show SQL code"
    button.
    
    To test, apply the patch and run any SQL report. On the report results
    page, click the "Show SQL button." The SQL should be displayed with
    CodeMirror syntax highlighting. Test toggling the SQL code view on and
    off to confirm that the CodeMirror highlighting continues to work
    correctly.
    
    Signed-off-by: Barton Chittenden <barton@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 917a506ffc983f63d9541c862180916bb2adc0a0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Sep 12 15:26:27 2017 -0300

    Bug 19302: Send koha::objects to C4::Reserves::IsAvailableForItemLevelRequest
    
    Almost everywhere we call IsAvailableForItemLevelRequest we already have
    a Koha::Patron and Koha::Item object. It makes sense to use them to
    avoid a refetch
    
    Test plan:
    It would be good to test this patch on top of 19300 and 19301 and make
    sure everything works as expected
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f550977f73997371bdbac3d6e68b66294b4eb677
Author: Liz Rea <wizzyrea@gmail.com>
Date:   Thu Mar 21 16:16:19 2019 +0000

    Bug 20436: (QA follow up) - reference and typo fixes
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0c02332600d430e77c4cc3dc62f9996c4375d55f
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Mar 16 11:15:12 2018 +0000

    Bug 20436: Add ability to specify itemtypes for longoverdue.pl
    
    It would be nice if we could filter long overdues based on itemtype the same way we can already filter based on borrower category code.
    
    Test Plan:
    1) Set up a number of overdues of various itemtypes
    2) Run longoverdue.pl with --list-itemtypes to show itemtypes
    3) Run longoverdue.pl with --itemtype to verify it only operates on that itemtype
    4) Run longoverdue.pl with multiple --itemtype switches, verify it only operates on those itemtypes
    5) Run longoverdue.pl with --skip-itemtype to verify it does not operate on that itemtype
    6) Run longoverdue.pl with multiple --skip-itemtype switches, verify that it does not operate on those itemtypes
    
    Signed-off-by: Jesse Maseto <jesse@bywatersolution.com>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6270a0150fb331a3e6a3a0ba23af0d3a1915d5f9
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Jan 20 01:35:34 2019 +0000

    Bug 21312: (QA follow-up) Ease translation
    
    I've changed the language a bit from "account locked out" to
    "account locked" and split it up to ease translation.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ef44634a8d980bef8c77b6cd5724493e23513458
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Oct 10 16:53:30 2018 +0200

    Bug 21312: Show lockout on Patrons form
    
    Just what the title says :)
    Specifically: moremember.pl
    
    Test plan:
    Check if you see the locked message on the patron form for an account
    that has been locked. (Either login_attempts<0 or >FailedLoginAttempts)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Jose-Mario Monteiro-Santos <jose-mario.monteiro-santos@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b5b64e7900fd61bd525409ee869deafde7b8c50a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri May 10 12:32:23 2019 -0500

    Bug 22433: Use Data::Dumper instead of Data::Printer
    
    Data::Printer is not in our deps
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 63a8e27f2e087b698e986e026dc9fa511b2afbfe
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 9 13:04:38 2019 -0500

    Bug 22433: Add debug statement to Transaction.t
    
    Hard to know what's going on here without more info. Adding this output
    may help to investigate more.
    
    Test plan:
    Make sure the tests still pass
    
    If it fails, please paste the output!!
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3ef397125f92dde918a0745f44f047ccf6a98d84
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 10 17:41:41 2019 +0000

    Bug 5770: DBRev 18.12.00.073
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0b6537f5b842b258d91a63ba5e7d57a3c47c7974
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 1 18:58:23 2019 +0100

    Bug 5770: (QA follow-up) Adapt for replyto handling
    
    The ReplyTo preferences allwo for libraries to setup various
    combinations of addresses for email headers to ensure correct mail
    delivery. This patch accounts for their configuration and use in the
    suggestions notifications
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 48a5c0b20249c17210df4ec1e9f146094aebc5e8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 1 14:29:16 2019 +0100

    Bug 5770: (QA follow-up) Move system preference to appropriate section
    
    The new sysprefs wher in the general admin section. I believe they are
    better placed within the acquisitions area.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fa643aa253f179933f07c05250d52ab47d37d667
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 1 12:56:05 2019 +0100

    Bug 5770: (QA follow-up) Revert change to GetQueuedMessages
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a404b314b2787f223348158bcbab4a295d383396
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 1 14:14:38 2019 +0100

    Bug 5770: (QA follow-up) Allow feature to be disable
    
    This patch adds 'None' to the available options for the feature so it
    may be disabled entirely (and sets that as default)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f792bf5c93c2d30970f338c1bc8c845aa4d79e49
Author: Nazlı Çetin <nazli@devinim.com.tr>
Date:   Tue Apr 30 16:17:54 2019 +0000

    Bug 5770: Notify for new suggestion - sample notices
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a59003bea1310a1126b59272d9abe687e1258e30
Author: Nazlı Çetin <nazli@devinim.com.tr>
Date:   Tue Apr 30 15:56:26 2019 +0000

    Bug 5770: Unit test
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 85b2bc8cd0737ba583e5e6f3585d69ac99d0671f
Author: Nazlı Çetin <nazli@devinim.com.tr>
Date:   Tue Apr 30 15:53:20 2019 +0000

    Bug 5770: New system pref for new suggestion email
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c892642d9f6ac3f342966e5ce71b6c8ed7937018
Author: Nazlı Çetin <nazli@devinim.com.tr>
Date:   Tue Apr 30 15:50:43 2019 +0000

    Bug 5770: Email librarian when purchase suggestion made
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 88eb0c5904462bb6cd1b38932b93470f7032f27d
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Fri Mar 23 17:32:30 2018 +0100

    Bug 20485: Don't account for items timestamps when items not included
    
    If combining "--dont_export_items" and "--date" options
    in export_records.pl, don't include items modification/deletion
    timestamp in biblio query conditions.
    
    How to test:
    1) Delete or modify a biblio item.
    2) Run export_records.pl with "--dont_export_items" and "--date"
       options with a date value before item was deleted or modified,
       but after the biblio was modified.
    3) The biblio for which an item was changed should not be included in
       the export.
    
    Sponsored-by: Gothenburg University Library
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0d0d19ea7ed9c8d158b5b49a39891682c676c50c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri May 3 10:51:02 2019 +0100

    Bug 21662: (QA follow-up) Be consistent between history and contributors
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cf80509386ccf3452c7fbb7c1741c115654ec4ea
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri May 3 08:27:53 2019 +0000

    Bug 21662: (QA follow-up) Minor corrections
    
    [1] Move doXulting and Universidad ORT Uruguay to Institutions.
        We do not mention the institution for each developer.
    [2] Removing Anonymous.
    [3] Adding the Bugzilla alias shantanoo as additional transliterated text.
    [4] Resolve typo Continious.
    [5] Removing three plural unused roles in about.tt.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8f3d5fc3dc7da6d2733f2e9944835757736cc474
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu May 2 10:42:57 2019 +0100

    Bug 21662: (follow-up) Corrections to YAMP for incompatible format
    
    YAML::XS and YAML output incompatible (but both valid) YAML files
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b922579eca5a0af2a610cc42646bc20eb2ace9d3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu May 2 08:44:09 2019 +0100

    Bug 21662: (follow-up) Embelish contributor details
    
    Add details to the 'non-commiters' in the contributors list. Information
    gratefully recieved from Chris Cormack
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 73fd7e96986f6969bd6fbcb35eea9b40ee3073a5
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu May 2 08:03:23 2019 +0100

    Bug 21662: (follow-up) Drop YAML::XS, use YAML
    
    I mistakenly left us using YAML::XS when we don't already depend upon
    it. YAML is a sufficent alternative that we do already require.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c91dbddaf568ee66bb66051a324bde5cadc7a33f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Apr 26 09:24:58 2019 +0100

    Bug 21662: Other history correction
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 594f7d64d0ee5610e73a34b3274f874e1f023509
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 11 13:35:22 2019 +0100

    Bug 21662: Use contributors.yaml for contributors list
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cf2cb32fecc4f5c7d5084074fa29049d33885cad
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 26 11:27:23 2018 +0100

    Bug 21662: Add Contributors.yaml file
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 795a95824dc85360b485b595e173f0fef9ac4d84
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 26 10:13:39 2018 +0100

    Bug 21662: Update history.txt
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 73def70232b8281d7f960a2a743d799432286f53
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 26 08:20:49 2018 +0100

    Bug 21662: Make history.txt whitespace consistent
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b5a031b45dc8c43088074685af4cb14ac582869c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 10 11:52:34 2019 -0300

    Bug 22053: (QA follow-up) Fix tests
    
    This patch makes the tests enable the plugins that are required for
    them. Otherwise unexpected failures can happen
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4806b0ff4f4e351b860833f7c7b471927d3a73d4
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 10 16:56:50 2019 +0000

    Bug 22053: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 70dcc175c69446f51c4dab0be1b66f1f857a07c5
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Apr 29 15:48:14 2019 +0000

    Bug 22803: (alternate) Set dataTable width issue
    
    This patch sets the "autowidth" option to "false" for the OPAC
    subscriptions DataTable on opac-detail.pl. This gives the table a fluid
    width rather than having the width be "hard-coded" by DataTables upon
    first page render.
    
    To test, apply the patch and view the detail page for a bibliographic
    record with a subscription. Under the "Subscriptions" tab, the table of
    latest issues should fill the width of the tab container.
    
    Resize the browser window and confirm that the table width adjusts
    accordingly.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9fa97774ae6b3c84028b15f8c768460a012320ea
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 1 13:31:31 2018 -0300

    Bug 21709: Replace 'no popup' plugin links with a span
    
    Test plan:
    Edit a bibliographic record
    Notice that the icons next to fields linked with a plugin can be a link
    or not. The browser displays a pointer or not.
    
    It will remove the ambiguity to display an icon that is clickable but
    does nothing when clicked.
    We could also have another icon to disociate both behaviors.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ae6f5a347767135c3b707b638e5e496ae402752a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 10 14:44:47 2019 +0000

    Bug 22809: DBRev 18.12.00.072
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0aae53df1d4f284afc88f9e14d88c934ae3529d7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 10 14:43:11 2019 +0000

    Bug 22809: (RM follow-up) fix missing filter and update description
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 90d261364404cc7f6bdd8ec3df94b839526e68b8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu May 2 12:44:05 2019 +0100

    Bug 22809: (QA follow-up) Add notice translations
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 806d87d0c6cb1a05e921b1c7f2cb43903f75f881
Author: Liz Rea <wizzyrea@gmail.com>
Date:   Tue Apr 30 19:41:06 2019 +0000

    Bug 22809: (QA follow-up) add bug description to atomicupdate
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a308dbcffd16aaee3db54b3d4eecbe5c17987110
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Apr 30 07:53:50 2019 -0400

    Bug 22809: Move "INVOICE" from template to a slip
    
    Just as bug 22761 moves the "Fee receipt" to the ACCOUNT_CREDIT slip, we need to move the "INVOICE" to an ACCOUNT_DEBIT slip.
    
    Test Plan:
    1) Apply this patch set
    2) Restart all the things
    3) Use the "print" button beside a *fee*
    4) You should not see any difference from before the patches were applied
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ca2309ef1bb89f6ad8d26aabcbd3501115d1ba9a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 10 14:31:21 2019 +0000

    Bug 22761: DBRev 18.12.00.071
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 96382b6fd761269bbe18bc2cbe2bcc6c10a91ba8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 10 14:21:45 2019 +0000

    Bug 22716: (RM follow-up) missing filter and update description
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5317ccc5b82727eaac2bfb6e1d58ae6dedfe8db3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu May 2 12:33:15 2019 +0100

    Bug 22761: (QA follow-up) Add description to DB update
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 645fab36103ee47e6826a704ee5065ca545b6cac
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu May 2 12:27:44 2019 +0100

    Bug 22761: (QA follow-up) Add notice translations
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 86079b58238e8c243ac4ec0847ceb4d2b27bd393
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Apr 23 14:40:08 2019 -0400

    Bug 22761: Remove hard coded version from template
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d1a22a42be03ccc801d2cae960c7eaac389ffaa6
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Apr 23 14:39:44 2019 -0400

    Bug 22761: Add notice based on existing template
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 74bc51523a711d3526eb60ba5170e28ef0ac365a
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Apr 23 14:12:55 2019 -0400

    Bug 22761: Add ability to use print version of ACCOUNT_CREDIT slip
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 45c1cd1b666f9b890494c3f0396272d308b8dd2c
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Mon Mar 4 14:30:13 2019 +0200

    Bug 21872: Fix name of rebuild_elasticsearch.pl
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5f1660321f94d31127eaf2612ca464bf08da8dcc
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Mon Mar 4 14:18:00 2019 +0200

    Bug 21872: Add support for -p parameter to koha-elasticsearch
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0f73c9176890675ba0630ebb51657d16a865c8ad
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Thu Feb 14 15:59:27 2019 +0100

    Bug 21872: Remove duplicate modulo condition in authorities iterator
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f7e47847e4ff7bd61311fbfde5cc80a0cf91d214
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Thu Feb 14 15:06:35 2019 +0100

    Bug 21872: Simplify conditions and exit on invalid combination of arguments
    
    Change to zero based indexing for slice index to simplify some
    conditions. Exit with error message if trying to combine processes
    and biblio numbers arguments.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit abe70811098da409af6cb9e97a4a3d00b4f0d3ef
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Fri Nov 23 10:43:34 2018 +0200

    Bug 21872: Add multiprocess support to Elasticsearch indexing utility
    
    Test plan:
    1. Time execution without -p parameter
    2. Time execution with -p 2 or -p3 or -p 4 depending on CPU core count
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d35cc83379fae8998b1b9828c8fdb05746b44287
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Oct 10 14:49:02 2018 +0200

    Bug 21533: Do not allow password recovery for administrative locked patrons
    
    Depends on bug 21336 for the ADMINISTRATIVE_LOCKOUT constant.
    
    This is a bit lazy solution (but good enough): The account will not be found
    when recovering the password. The user should contact the library. Since
    the library chose to lock the account, that seems appropriate.
    
    Test plan:
    Select a borrower and set login_attempts to -1. Via mysql command line or
    with Koha::Patrons->find(borrowernumber)->lock.
    Enable password recovery.
    Try to recover password from OPAC. You should fail with 'Not found, contact
    the library'.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Bouzid Fergani <bouzid.fergani@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5ecbe281aff13e53d4fbc5064714de9209410358
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 10 12:10:42 2019 +0000

    Bug 22782: DBIC update for SocialData
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d80e5a2bb633419f9ca52b7d289829543341f7bd
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 10 12:09:59 2019 +0000

    Bug 14407: DBRev 18.12.00.070
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9388401f88788172c888e47d33739f2682750097
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 10 11:44:45 2019 +0000

    Bug 14407: (RM follow-up) bump version number
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a4f5cc4d66d5374dcbc32b402417ac770e8a695d
Author: Mark Tompsett <mtompset@hotmail.com>
Date:   Tue Mar 27 14:28:06 2018 +0000

    Bug 14407: Follow up to add test case and clean noise
    
    Comment #28 has a /36 which is invalid CIDR.
    This triggers a crash and noise.
    This cleans up the crash and noise, and adds
    test cases to check for them.
    
    prove t/Auth.t
    -- before missing null case, and /36 case.
    -- after null case, and /36 with/without warnings.
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9f25d1d003d099dcdca803c3385ecfb0f7fdbb49
Author: Mark Tompsett <mtompset@hotmail.com>
Date:   Tue Mar 27 14:43:46 2018 +0000

    Bug 14407: Follow up add missing atomic update
    
    The patch only added the system preference for fresh installs.
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 88e0fa19dfe3c83dd9f713fb81b2b00e23c21546
Author: Nicholas Van Oudtshoorn <vanoudt@gmail.com>
Date:   Fri Jan 12 18:14:59 2018 +0000

    Bug 14407: Unit tests for in_ipset
    
    TEST PLAN
    ---------
    1) apply all pathches
    2) sudo koha-shell -c bash kohadev
       prove t/Auth.t
       -- should run.
    3) run koha qa test tools
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 30f0e7fec988393531024bcd9bfa0e4f4effb254
Author: Nicholas Van Oudtshoorn <vanoudt@gmail.com>
Date:   Fri Jan 12 17:28:41 2018 +0000

    Bug 14407: Allow restricting SCO to IP or IP range
    
    Converted this to actual applicable patches.
    I think the test plan is comment #28. -- Mark Tompsett
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2330a155f6d13c37a81632c3088030c89a877401
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Oct 10 15:34:22 2018 +0200

    Bug 21535: Anonymize function in Patron should not scramble email addresses
    
    Scrambled email addresses will only generate warnings etc.
    Clear them although they might be in BorrowerMandatoryField.
    
    Test plan:
    Run t/db_dependent/Koha/Patrons.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    t/db_depepended/Koha/Patrons.t runs with no warnings.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 94c4a268ac098705c2db703512fc0065fed6a42b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Apr 30 14:57:59 2019 +0000

    Bug 22811: Add button to clear DataTables filtering
    
    This patch adds a "clear filter" button to the global
    DataTables configuration. The button will appear if:
    
     - There is no custom DOM configuration applied to the DataTable
       instance.
     - The DataTable has the search form enabled.
    
    The new button should be disabled by default. Entering a search term in
    the form should enable it.
    
    To test, apply the patch and clear your browser cache if necessary. View
    various pages with various DataTables configurations and confirm that
    everything looks correct and the new "Clear filter" button doesn't
    appear when there is no DataTable search field. For example:
    
     - Administration -> Libraries
     - Administration -> Currencies
     - Reports -> Saved reports
     - Circulation -> Check out
     - Tools -> News
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 629b2723cb3c654c57e1db2ab206ea163128ccbb
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu May 9 19:29:44 2019 +0000

    Bug 22053: DBRev 18.12.00.069
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1cd1fcc9d72fc031f1aba42eee7e79040f758569
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Apr 30 10:54:01 2019 -0300

    Bug 22053: (QA follow-up) Override enable_plugins configuration
    
    This patch makes the update script override the configured
    enable_plugins setting in koha-conf.xml.
    
    on testing the failure I wrote trivial tests on how
    Koha::Plugins->new({ enable_plugins => 1 }) should work. Adding them to
    this patch as well.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4aa2e16ec18f50dfe7c00f1eafc87a7546b24f04
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 29 15:21:32 2019 -0300

    Bug 22053: (QA follow-up) More tests
    
    This patch adds tests for:
    - $plugin->enable and $plugin->disable are chainable (i.e. return $self)
    - Disabled plugins don't inject routes
    
    To test:
    - Apply this patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/REST/Plugin/PluginRoutes.t \
              t/db_dependent/Plugins.t
    => SUCCESS: Tests pass
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d0e053e24d05ddc679a56d46ac121c3f4c89a21f
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Fri Dec 28 17:52:18 2018 +0100

    Bug 22053: update database
    
    Rebased-on: 2019-03-25 Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    Signed-off-by: Agustin Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7394028b27a36b55fd85285a87c8d2f00649e6e9
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Fri Dec 28 17:50:14 2018 +0100

    Bug 22053: ability to enable/disable some plugins
    
    Test plan:
    
      - apply this patch(es),
      - launch an updatedabase,
      - go to plugins/plugins-home.pl
        and deal with enable/disable method
      - install a plugin like KitchenSink
        https://github.com/bywatersolutions/koha-plugin-kitchen-sink
      - once installed, the plugin change the background color
        of the staff client to orange.
      - disable the plugin,
      - background color should be set back to the original one
    
    Rebased-on: 2019-03-25 Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    Signed-off-by: Agustin Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0a262a214f2c2ff6e836d7283cae413ee354cdce
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Fri Dec 28 17:48:43 2018 +0100

    Bug 22053: create unit tests
    
    Rebased-on: 2019-03-25 Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    Signed-off-by: Agustin Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e17500f621ec9de63f4cedb2905885b494c81edf
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu May 9 18:20:34 2019 +0000

    Bug 7088: DBRev 18.12.00.068
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a0bb818b0bc5acb54a48bf84772d795b2eea53fc
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu May 9 17:22:25 2019 +0000

    Bug 7088: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5f3c849014adad66deae505ff1ef8a7ddb8ea999
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Apr 26 10:58:31 2019 +0100

    Bug 7088: (follow-up) Modify checkbox enabling
    
    As described in comment #50, we need to only enable renewal on items
    that are disabled in line with which sysprefs are enabled. So we now
    only enable renewal of on hold items if the AllowRenewalOnHoldOverride
    syspref is on and we only enable renewal of all other limited items
    when the AllowRenewalLimitOverride syspref is on.
    
    NOTE: The test plan below has changed substantially from previous
    iterations
    
    Test plan (you might want to make a coffee first...):
    
    - Apply patch
    - Rebuild CSS
    
    - Go to the Patron Details page for a patron who has an item on loan that would fulfil an outstanding loan request.
    - The patron also needs to have an item on loan that cannot be renewed for some other reason, say renewal limit has been reached
    => TEST: Observe that it is NOT possible to select either item for renewal
    
    - Enable the "AllowRenewalLimitOverride" syspref
    - Return to the Patron Details page
    - Check the "Override renewal restrictions" checkbox
    => TEST: Observe that it IS possible to select the the item that has reached the renewal limit, but not the item that is on hold
    
    - Disable the "AllowRenewalLimitOverride" syspref
    - Enable the "AllowRenewalOnHoldOverride" syspref
    - Return to the Patron Details page
    - Check the "Override renewal restrictions" checkbox
    => TEST: Observe that it is NOT possible to select the the item that has reached the renewal limit, but it IS possible to select the item on hold
    
    - Enable the "AllowRenewalLimitOverride" syspref
    - Enable the "AllowRenewalOnHoldOverride" syspref
    - Return to the Patron Details page
    - Check the "Override renewal restrictions" checkbox
    => TEST: Observe that it IS possible to select the the item that has reached the renewal limit, AND it IS possible to select the item on hold
    
    - Select the item that is on hold
    => TEST: Observe that an additional "On hold due date" input box is displayed
    - De-select the item
    => TEST: Observe that an additional "On hold due date" input box is hidden
    - Select the item
    - In the "On hold due date" input box, select a due date for the item
    - Click "Renew or check in selected items"
    => TEST: Observe that the item is renewed as usual
    - In the "Renewal due date" input box, select a due date
    - Remove the contents of the "On hold due date" input box
    - Click "Renew or check in selected items"
    => TEST: Observe that the item is renewed by falling back to the "Renewal due date" value if a value is not specified in the "On hold due date" input box
    - Remove the contents of the "Renewal due date" input box
    - Click "Renew or check in selected items"
    => TEST: Observe that the standard loan period is used for the renewal period if no due date is specified in either box
    - In the "On hold due date" input box, select a due date for the item
    - In the "Renewal due date" input box, select a different due date
    - Click "Renew all"
    => TEST: Observe that all non on hold items are renewed using the value in "Renewal due date" and on hold items are renewed using the value in "On hold due date"
    - From the main staff client from page, choose "Circulation", then choose "Renew"
    - Enter the barcode of an item that you know to be on hold and submit
    => TEST: In the alert box that appears, observe that a date picker is
    displayed
    - Choose a due date for this item, then click "Override and renew"
    => TEST: In the "Item renewed" box, observe that the item has been
    renewed to the date specified
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 70c6c5dd93f9981a685d811c9e6adfc88508ffed
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Apr 23 10:44:08 2019 +0100

    Bug 7088: (follow-up) AllowRenewalLimitOverride fix
    
    This patch causes the click event listener on the #override_limit to be
    created if EITHER the AllowRenewalOnHoldOverride OR
    AllowRenewalLimitOverride sysprefs are enabled. Previously, it would
    only be created if the AllowRenewalLimitOverride syspref was enabled,
    which would cause the checkbox to be displayed but do nothing.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1c61e60a17f06f6eb532fff9b7026fe99b818ded
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu Feb 21 12:21:23 2019 +0000

    Bug 7088: (follow-up) Add pref to checkbox
    
    As per commit #29 here:
    https://bugs.koha-community.org/bugzilla3/show_bug.cgi?id=7088#c29
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 770212d134e780cef4ad5f0da20fb40a036c5978
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu Feb 7 14:43:55 2019 +0000

    Bug 7088: (follow-up) Default hold checkbox display
    
    As per item 4 here:
    https://bugs.koha-community.org/bugzilla3/show_bug.cgi?id=7088#c24
    
    Now, the checkbox for renewing on hold items behaves the same way as the
    checkbox for renewing items that have reached their renew limit. It is
    necessary to check the re-labelled "Override renewal restrictions"
    checkbox before it is possible to select on-hold items for renewal.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 89d764352f43004ebc33bea09c8557fd733a1b61
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Wed Jan 30 11:05:17 2019 +0000

    Bug 7088: (follow-up) Set syspref default to off
    
    As per item 2 here:
    https://bugs.koha-community.org/bugzilla3/show_bug.cgi?id=7088#c24
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3b50efb7d5b8fd366d140be83a000d9afbdf4c02
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Wed Jan 30 11:03:10 2019 +0000

    Bug 7088: (follow-up) Remove script "type" attribute
    
    As per item 1 here:
    https://bugs.koha-community.org/bugzilla3/show_bug.cgi?id=7088#c24
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cda1f7a65682573ad6ff7a219e518d508fcc18c6
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Nov 13 13:57:57 2018 +0000

    Bug 7088: (follow-up) Fix renewal limit bug
    
    There was a bug in that altering the state of the "Override renewal
    limit" checkbox was altering the appearance of the per-item "On hold"
    checkbox. This is incorrect, the "Override renewal limit" checkbox is
    unconnected with this bug.
    
    Sponsored-by: Cheshire Libraries Shared Services
    Sponsored-by: Halton Borough Council
    Sponsored-by: Sefton Council
    
    Signed-off-by: Andrew Farthing <Andrew.Farthing@sefton.gov.uk>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c48af49ded481f498087eaf8e4cb530c4cc0a8e9
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Sep 21 11:09:13 2018 +0100

    Bug 7088: Allow renew on hold items with due date
    
    This patch adds the ability for items that are on hold to be renewed with a due date specfied by the user. It is enabled by the new "AllowRenewalOnHoldOverride" syspref. It is manifested in two locations:
    
    1. In the "Checkouts" table on the Patron Details screen. It is now possible to select on loan items that would otherwise fulfil a hold request to be renewed. When such an item is selected, an additional date selection box is displayed to allow the user to specify the due date for all on hold items that are to be renewed.
    
    2. In the Circulation > Renew alert screen. When a barcode of an on loan item that would ordinarily fulfil a hold request is entered, the usual alert is displayed indicating that the item is on hold, it is still possible to override this, and renew, however it is now also possible to specify a due date.
    
    Test plan:
    
    - Go to the Patron Details page for a patron who has an item on loan that would fulfil an outstanding loan request.
    - TEST: Observe that it is NOT possible to select this item
    - Enable the "AllowRenewalOnHoldOverride" syspref
    - Return to the Patron Details page for a patron who has an item on loan that would fulfil an outstanding loan request.
    - TEST: Observe that it IS possible to select this item
    - Select the item
    - TEST: Observe that an additional "On hold due date" input box is displayed
    - De-select the item
    - TEST: Observe that an additional "On hold due date" input box is hidden
    - Select the item
    - In the "On hold due date" input box, select a due date for the item
    - Click "Renew or check in selected items"
    - TEST: Observe that the item is renewed as usual
    - In the "Renewal due date" input box, select a due date
    - Remove the contents of the "On hold due date" input box
    - Click "Renew or check in selected items"
    - TEST: Observe that the item is renewed by falling back to the "Renewal due date" value if a value is not specified in the "On hold due date" input box
    - Remove the contents of the "Renewal due date" input box
    - Click "Renew or check in selected items"
    - TEST: Observe that the standard loan period is used for the renewal period if no due date is specified in either box
    - In the "On hold due date" input box, select a due date for the item
    - In the "Renewal due date" input box, select a different due date
    - Click "Renew all"
    - TEST: Observe that all non on hold items are renewed using the value in "Renewal due date" and on hold items are renewed using the value in "On hold due date"
    - From the main staff client from page, choose "Circulation", then choose "Renew"
    - Enter the barcode of an item that you know to be on hold and submit
    - TEST: In the alert box that appears, observe that a date picker is
    displayed
    - Choose a due date for this item, then click "Override and renew"
    - TEST: In the "Item renewed" box, observe that the item has been
    renewed to the date specified
    
    Sponsored-by: Cheshire Libraries Shared Services
    Sponsored-by: Halton Borough Council
    Sponsored-by: Sefton Council
    
    Signed-off-by: Andrew Farthing <Andrew.Farthing@sefton.gov.uk>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3e9550019a16d3944816788342eb808f3524d81e
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Wed Sep 19 16:29:19 2018 +0100

    Bug 7088: Add AllowRenewalOnHoldOverride syspref
    
    Enables the renewal of on hold items with specified due dates to be turned on/off
    
    Sponsored-by: Cheshire Libraries Shared Services
    Sponsored-by: Halton Borough Council
    Sponsored-by: Sefton Council
    
    Signed-off-by: Andrew Farthing <Andrew.Farthing@sefton.gov.uk>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b40dd03ed54b6b08ad5b338d9d2d2de94de9cdf1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 8 10:28:22 2019 -0500

    Bug 22790: Add a test
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d3f4b50bdd476160d026012154c9f3463b94d37e
Author: Andreas Jonsson <andreas.jonsson@kreablo.se>
Date:   Fri Apr 26 19:44:59 2019 +0000

    Bug 22790: The system preference itemBarcodeInputFilter is not applied for barcodes inputed via SIP2
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 503842ac6c37cdbab2a8868604bd6f1294c829b1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri May 3 17:34:22 2019 -0400

    Bug 22847: Correctly displayed circ rule values for max_holds and maxissue*
    
    There are several things going wrong on the circulation rules screen. The global rule is displayed for specific libraries (even if the rule does not exist for the library), and max_holds is always blank.
    
    I have trouble finding the root of the issue, but I will propose a patch to fix both problem.
    
    Certainly a mismatch between bug 18887 and bug 18925.
    
    Test plan:
    0. Do not apply the patch
    1. Notice the issue on the circulation rules screen
    2. Apply the patch
    3. Confirm that the value you set are correctly displayed (and not the propagated ones!)
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Agustin Moyano <agustinmoyano@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d38d78bcf4cc62d34aa953864cf6da87bef93c80
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue May 7 15:57:35 2019 +0000

    Bug 22527: (RM follow-up) Add filter
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 604c7b818b63b93c66bb751ceb9d99bc1c109be9
Author: Liz Rea <wizzyrea@gmail.com>
Date:   Wed May 1 00:31:15 2019 +0000

    Bug 22816: OPAC detail holdings table should now look a bit better
    
    This patch sets the "autowidth" option to "false" for the OPAC
    holdings DataTable on opac-detail.pl. This gives the table a fluid
    width rather than having the width be "hard-coded" by DataTables upon
    first page render.
    
    To test, apply the patch and view the detail page for a bibliographic
    record with some items. Under the "Holdings" tab, the table of
    holdings should fill the width of the tab container.
    
    Resize the browser window and confirm that the table width adjusts
    accordingly.
    
    Signed-off-by: Bin Wen <bin.wen@inlibro.com>
    Signed-off-by: arthur <arthur.bousquet@inlibro.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 88b37330abaee6372ec999c1a81fd216d66a1379
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jul 5 12:10:26 2018 +0200

    Bug 21036: Remove odd number of elements warnings from AuthoritiesMarc.pm
    
    Like this one (16.11 line number):
    Odd number of elements in anonymous hash at C4/AuthoritiesMarc.pm line 1070.
    
    We need to add a scalar to some MARC::Field::subfield calls. In list context
    an empty list returned affects the hash built around it.
    
    Test plan:
    Could reproduce this warning easily from OPAC authority search.
    opac-authorities-home.pl calling BuildSummary.
    
    Signed-off-by: Bouzid Fergani <bouzid.fergani@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 295e9b1054386cf188c5fc1eb4fd590e5c451513
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jul 5 09:53:57 2018 +0200

    Bug 21036: Fix warnings from C4/Biblio
    
    Use of uninitialized value $isbn in string ne at /usr/share/koha/prodclone/C4/Biblio.pm line 1794. (16.11 line number)
    Trivial edit.
    
    And these warnings from TransformHtmlToXml (with 16.11 line numbers):
    Use of uninitialized value in substr at /usr/share/koha/prodclone/C4/Biblio.pm line 2527.
    Use of uninitialized value in substr at /usr/share/koha/prodclone/C4/Biblio.pm line 2528.
    substr outside of string at /usr/share/koha/prodclone/C4/Biblio.pm line 2528.
    Indicator in 952 is empty at /usr/share/koha/prodclone/C4/Biblio.pm line 2534.
    
    The last warning is not needed and can be removed.
    Note that the code used the construct @$indicator[$j] for $$indicator[$j].
    The first is an array slice. This worked in list context. But apparently
    the second was meant to be used. And can be rewritten as $indicator->[$j]
    which generally is considered more readable.
    The code around indicator1/2 and ind1/2 is simplified. This change is applied
    twice in the same sub.
    
    Test plan:
    Read the changes.
    Run t/Biblio/TransformHtmlToXml.t
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4560d9623663e9fd0b60f9a39ec53082cdd90f24
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Jul 4 16:49:38 2018 +0200

    Bug 21036: Fix uninitialized value within @itemnumber in string ne
    
    Line from 16.11 log:
    Use of uninitialized value within @itemnumber in string ne at /usr/share/koha/prodclone/reserve/modrequest.pl line 70.
    
    Test plan:
    Read the change. Not 100% identical (numeric zero) but should be enough.
    This line is probably not needed at all.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b9bff787ca863a45128cbd3a05a109e8f66d4fdf
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sun Apr 28 22:09:39 2019 -0400

    Bug 22800: (bug 22550 follow-up) Do not raw filter when not necessary (OPAC suggestions)
    
    This is a follow-up for bug 22550, we do not need to use the $raw
    filter.
    
    Test plan:
    Same as bug 22550:
    Test plan:
    Test plan:
    1. OPAC->login->your purchase suggestions->New purchase suggestion
    2. Click button "Submit your suggestion" directly without filling in any field.
       Empty suggestion record was added succeffully.
    3. Apply the patch.
    4. Click button "Submit your suggestion" directly without filling in any field.
       The required fields should be labeled in red.
       (you can change the mandatory fields by preference
       'OPACSuggestionMandatoryFields')
    
    Signed-off-by: Bin Wen <bin.wen@inlibro.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 100b1e3eecb4de27f6a85095196019f6b36251c0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 26 19:58:05 2019 +0000

    Bug 22791: Unify calculation between aqui-home and ordered.pl
    
    To test:
    1 - Enable order price rounding
    2 - Order an example with 8 * 16,99 and 42% discount, 19.45% tax.
    3 - Check ordered page - 94.17 is total
    4 - Check aqui-home - 94.16 is total
    5 - Apply patch
    6 - Verify numbers now match
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit abd4445cd2b86fe601de20b403bb621115b27c83
Author: Liz Rea <wizzyrea@gmail.com>
Date:   Tue Apr 16 06:55:36 2019 +0000

    Bug 22527: web installer links to outdated DB manual
    
    To reproduce:
    1. Use MySQL or MariaDB for your Koha installation
    2. Create an empty database and point $KOHA_CONF to this database name.
    3. Grant SELECT privilege to your database user, e.g.
    grant select on koha3.* to 'koha'@'%' identified by 'koha';
    4. Go to step 2 of web installer where it checks database
    connection
    5. Observe the following message
    
         User koha doesn't have enough privilege on database koha.
    
         Ask for or make a change in the user's privileges. User koha must
         have USAGE, INSERT, UPDATE, DELETE, DROP and CREATE privileges on
         database koha2.
    
         Need help? See manual for PostgreSQL
    
    6. Note "See manual for PostgreSQL" is wrong. Should now read Need help?
    For help with granting permissions, please search online for "[%
    dbms %] manual grant permissions" of course the dbms should be the dbms
    you are using.
    7. Apply patch, restart all
    8. Refresh page and observe it now displays correct link
    
    Test plan and original patchset by Lari Taskula <lari.taskula@hypernova.fi>
    
    Sponsored-by: Hypernova Oy
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Bug 22527: Remove extra space after '?'
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d57239ca78e7719f4c04865e8c493919c6362c15
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Apr 29 14:18:43 2019 +0200

    Bug 22787: Add mapping of letters "ů" and "Ů" to zebra definitions
    
    Test plan:
    0) Do not apply the patch
    1) Add some word with character "ů" into metadata, for example author "Martinů, Bohuslav"
    2) Try to search it with "Martinu" and you'll see you can't find it
    3) Apply the patch
    4) Copy file etc/zebradb/etc/word-phrase-utf.chr to your /etc/koha directory
        sudo cp etc/zebradb/etc/word-phrase-utf.chr /etc/koha/zebradb/etc/
    5) koha-zebra --restart kohadev
    6) koha-rebuild-zebra -f kohadev
    6) try to search "Martinu" again - you should be able to find your record
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 914f23970de536df3972ebd75b280ee8eec98955
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Nov 12 15:20:33 2018 -0300

    Bug 21671: Prevent Modifications.t to fail randomly
    
    If repeatable is set to 0 by TestBuilder, the tests will fail with:
    t/db_dependent/Koha/Patron/Modifications.t .. 1/6     # Looks like you planned 20 tests but ran 9.
    
     #   Failed test 'approve tests'
     #   at t/db_dependent/Koha/Patron/Modifications.t line 259.
    [repeatable not set for attribute type and tried to add a new attribute for the same code]# Looks like your test exited with 255 just after 5.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 45b1ff8dfa1054590544caff200b307144bd02cf
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Apr 30 15:48:14 2019 -0300

    Bug 22813: (follow-up) Add missing condition
    
    This patch restores a missing condition. $patron gets renamed to make
    it obvious that it related to the logged in user.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 10efe4e3f239c47b847c53f06f82245e07d54759
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Apr 30 12:30:25 2019 -0300

    Bug 22813: remove repetitive queries inside two nested loops in searchResults
    
    This patch moves a query on Koha::Patrons and then the related
    Koha::Patron::Category that needlessly happens inside two nested loops
    (all items of all MARC records in the resultset).
    
    The Koha::Patron and Koha::Patron::Category are always the same as it is
    fetched from C4::Context->userenv each time.
    
    To test:
    - Run:
      $ kshell
     k$ prove t/db_dependent/Search.t
    => SUCCESS: Tests pass
    - Apply this patch
    - Run:
     k$ prove t/db_dependent/Search.t
    => SUCCESS: Tests still pass!
    - Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c1513a10c35f721e3c519d5ab3c38c7154b7fa1c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Mar 4 18:12:56 2019 -0300

    Bug 22453: Make TestBuilder generates dates taking into account the timezone
    
    I have no idea why this only appears today but TestBuilder generates dates using DateTime->now,
    which does not take into account the timezone.
    
    It has been highlights by a failing test today on U18.
    Why today whereas this patch was pushed few weeks ago?
    Why U18 and not D9?
    
    The output of the test is:
    koha_1       |     #   Failed test 'With BorrowerLogs and TrackLastPatronActivity we should not spam the logs'
    koha_1       |     #   at t/db_dependent/Koha/Patrons.t line 1421.
    koha_1       |     #          got: '2'
    koha_1       |     #     expected: '1'
    koha_1       |     # Looks like you failed 1 test of 4.
    koha_1       |
    koha_1       | #   Failed test 'BorrowersLog tests'
    koha_1       | #   at t/db_dependent/Koha/Patrons.t line 1422.
    koha_1       | # Looks like you failed 1 test of 33.
    koha_1       | [19:51:44] t/db_dependent/Koha/Patrons.t
    
    Actually there are 2 logs, one for the cardnumber that is expected, and on for updated_on:
       "updated_on" : {
          "after" : "2019-03-04 21:10:00",
          "before" : "2019-03-04 18:10:00"
       }
    Apart from the fact that we may want to remove this updated_on field from MODIFY,
    the before/after dates differ from 3 hours.
    Here it's currently 18:10 and in UTC-3
    
    To prevent such behaviors in tests (create stuffs in the future...), we should
    use our Koha::DateUtils::dt_from_string method that takes care of the timezone
    used in other places of Koha.
    
    Test plan:
    prove t/db_dependent/Koha/Patrons.t
    May fail without this patch.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    This patch is fine in itself, but there may still be an issue around
    the failing test for TrackLastPatronActivity. Reopened bug 22741.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6509d73d7925fe5d317d6f2baa1d1565d8d36220
Author: Mirko Tietgen <mirko@abunchofthings.net>
Date:   Tue Apr 30 10:56:20 2019 +0200

    Bug 22808: Move Cache.t to db_dependent
    
    Cache.t fails during package build. Moving it to db_dependent fixes
    the problem.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 28bcc5aa68733e41d50a6a801088b06857968f42
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Feb 27 07:09:12 2019 -0300

    Bug 22420: Remove wrong calculation on approved tags
    
    Before the patch from bug 14385, the passed structure (that is returned
    by get_approval_rows() looks like:
    
    \ [
        [0] {
            approved           1,
            approved_by        51,
            approved_by_name   undef,
            date_approved      "2019-02-26 15:36:42",
            term               "another",
            weight_total       3
        },
        [1] {
        ...
    
    After the introduced 'filtering', we loose the information about the
    term weight!:
    
    \ [
        [0] {
            approved               1,
            author                 "Heylin, Clinton.",
            biblionumber           1,
            borrowernumber         51,
            date_created           "2019-02-26 15:36:37",
            language               undef,
            subtitle               [],
            tag_id                 1,
            term                   "word",
            time_created_display   "15:36:37",
            title                  "E Street shuffle :",
            visible                1,
            XSLTBloc               "
                <<<BUNCH OF GENERATED HTML HERE>>>
        ...
    
    The code even calls GetMarcBiblio. This needs to be reverted as it is
    plain wrong. If it was worth removing *some* biblios from the
    weight_total value, then this calculation should be done somewhere else,
    without fetching the MARC data again.
    
    Signed-off-by: Claudio  <costalc@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6a0246e24838cfba672baf4aef080588b7d091bf
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 21 14:45:37 2019 -0300

    Bug 22542: Force back button to display personal data
    
    This is a follow-up of bug 5371
    
    The following command must not return anything:
    grep ^output_html_with_http_headers `git grep -l -P "authnotrequired\s*=>\s*0" opac`|grep -v force_no_caching
    
    This must be a test somehwere to prevent further regressions.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d9b3b90849fd95d296b73b330c4e32ff018c81a5
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Apr 29 13:30:09 2019 +0100

    Bug 22478: (QA follow-up) Update tests to check for any script tags
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d5e7dd15fc9c064f99739b27e5b40456b359f420
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Apr 26 19:56:43 2019 +0100

    Bug 22478: (QA follow-up) Make test consistent with variable name
    
    We were adding data to category 1 (private lists) and testing against
    that, but we named the variable 'publist_lists'.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 375dd35d5354d46c4c16f534494b123ce370c3f4
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Apr 12 07:02:06 2019 +0000

    Bug 22478: (QA follow-up) Handle category in opac-shelves like a boolean
    
    The category parameter should be restricted to 1 or 2 (private/public). In
    order to keep same behavior, no parameter means 1 (private).
    Note: Adding the same line in intranet counterpart.
    
    Test plan
    [1] Check for category empty, '1a', '11' etc. And with script ;)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 401e8e791e32008e93e959dd9ed1b4491cb0796a
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Apr 10 02:06:37 2019 +0000

    Bug 22478: Fix POD
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3b12416dc8d8f833bc745402ae835cc56c897fef
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 15 13:41:27 2019 -0300

    Bug 22478: Add tests
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f021ca30a5d3944a43b4f6e089b21cfd9dc02997
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 14 19:42:50 2019 -0300

    Bug 22478: Prevent XSS vulnerabilities when pagination appears
    
    This is a bad one as we thought we were XSS safe since bug 13618.
    
    The html code generated in C4::Output::pagination_bar must escape the
    variables and values correctly.
    
    This patch needs to be widely tested, everywhere the pagination appears,
    to make sure we will not introduce regressions.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0fb9b9fdb080dfe8c7bccd7f83a9c63bb3c9b104
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Apr 26 17:24:06 2019 +0100

    Bug 22478: (RMaint follow-up) source t::lib::Mocks
    
    In 18.11.x the t::lib::Mocks module is not yet sourced for the relevant
    test
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 05f22c2159f3edf597d82ff76ea266760a7498cd
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu May 2 13:40:07 2019 +0000

    Bug 22692: (RM follow-up) Adjust test count
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 456a7ae6d452a4a805b521f0123c666bb8e84085
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 12 01:23:34 2019 +0000

    Bug 22692: Check for patron using cardnumber and userid
    
    TO test:
    1 - Set failed login attempts to 1
    2 - Attempt a login with a userid and bad password, no success
    3 - Attempt a login with userid and correct password, prevented because
    locked
    4 - Attempt a login with cardnumber and right password, you are logged
    in
    5 - Log out, try again with userid and correct password, prevented
    because locked?
    6 - Apply patch
    7 - Repeat 1-3 to lock account
    8 - Attempt logging in with cardnumber, you are prevented
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 30de51fa0c707322ce95a318df72ec5d7b5d3eb0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 12 01:11:19 2019 +0000

    Bug 22692: Unit tests
    
    1 - Apply just this patch
    2 - prove -v t/db_dependent/Auth.t
    3 - Failure
    4 - Apply second patch
    5 - prove -v t/db_dependent/Auth.t
    6 - Success
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 76871516050103f986e50034bccadd4b82fcd2d7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Apr 30 11:37:47 2019 -0300

    Bug 8995: (QA follow-up) Mock required sysprefs in the tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dd352428bb4fe9c5656bdf4921f913440db259a2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Apr 29 15:10:17 2019 +0000

    Bug 22424: (follow-up) Show blank value for empty status
    
    This patch updates the screen and CSV output of item searches so that if
    the item does not have a lost status a blank table cell is shown instead
    of "0."
    
    This patch also amends the table headers so that "Not for loan" statuses
    are explicitly labeled as such, and the "Lost" column has the header
    "Lost status."
    
    To test, apply the patch and perform an item search in the staff client
    which will return results with notforloan and lost items. Verify that
    the values display correctly in both onscreen and CSV output. Verify
    that the column headers look correct.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1ad52b371d028e4ffd65bce0599dcc0f6a412465
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Feb 27 15:31:29 2019 +0000

    Bug 22424: Add search by all lost statuses to item search
    
    This patch changes the item search form so that searching by lost status
    includes options for all lost authorised values instead of just "yes" or
    "no."
    
    To test you should have multiple authorized values for LOST.
    
     - Apply the patch and open the item search form.
     - Test searches which limit by lost status. Confirm that results are
       correctly limited.
     - Confirm that lost statuses are correctly displayed in the search
       results.
     - Confirm that in the search results table, the column header for
       "Lost" includes a dropdown menu for filtering by all available
       authorized values for lost.
     - Test the CSV export function and confirm that lost status is
       correctly exported.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1a44ce023e3c5dc0e8a547b8535c080602674c26
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 30 13:04:24 2019 +0000

    Bug 22408: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 10faf56c8eac5d9e9c1c8bddd267460f72116284
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Feb 25 16:28:10 2019 +0000

    Bug 22408: Subscription entry form cleanup
    
    This patch makes a number of changes to the subscription entry form:
    
      - Make the default layout single-column.
      - Switch the layout to two-column only when testing prediction
        pattern.
        - Add a button to hide the prediction pattern test pane.
      - Change the style of some buttons and links. Add Font Awesome icons
        to some.
      - Clean up some issues with capitalization and spacing.
      - Make it clearer when form fields are read-only: Move "locked" form
        field style from addbiblio.css to staff-global.css and improve it
        with regard to mouse interactions
    
    To test, apply the patch and regenerate the staff client CSS. Clear your
    browser cache if necessary.
    
     - Go to Serials -> New subscription.
     - Readonly fields under "Vendor" and "Record" should show a small
       padlock icon.
     - Test the process of adding a subscription, paying special attention
       to the advanced pattern controls: Showing, hiding, modifying,
       canceling.
     - Test the process of editing a subscription in the same way.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9e6be55a06bc44450845199dc3db25b4021da7ef
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Apr 27 13:42:17 2019 +0000

    Bug 21364: (QA follow-up) Fix QA script complaints (tabs and filters)
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d0e6a26558be8338af52a723a2664111abcbe861
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Apr 22 20:00:37 2019 +0000

    Bug 21364: (follow-up) Check for standing status and uncertain prices
    
    Fetch 'uncertainprices' when getting basket info. A side effect is that styling on baskets with uncertain prices is restored by this bug. They will appear in red
    
    To test:
    1 - Add an order with an uncertainprice to the basket
    2 - Return to vendor baskets view
    3 - Note the actions now include "Uncertain prices"
    4 - Click that, resolve the uncertain prcie
    5 - Return to vendor basket view
    6 - Note you can now close the basket, but don't
    7 - Edit the basket, mark it as standing
    8 - Return to vendor basket view
    9 - Note you cannot close the basket
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6e7b8f6f675d8657c431d6a899e6a47bb1049762
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Sun Sep 16 03:05:59 2018 +0000

    Bug 21364: Allow closing basket from vendor view/search
    
    To test:
    1 - Have a vendor
    2 - Add some empty baskets
    3 - Add some non-empty baskets
    4 - Search for vendor and note you now
        a - Can only 'View' empty or closed baskets
        b - Have a dropup menu to 'Add to ' or 'Close' open baskets
    5 - Confirm things look correct and buttons work
    6 - Confirm that basket name is now a link to view basket
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7a44c9edb969cd92db4de0223a2c9db06d576451
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Dec 17 13:35:09 2018 +0000

    Bug 22010: Check preferences for ebook integration
    
    To test:
    1 - Enable OverDrive and RecordedBooks (you can put anything in the
            prefs)
    2 - Search on the opac - verify you get results (or search error) on
    first page of results'
    3 - Go to second page of results - OD and RB are not searched
    4 - Apply patch
    5 - Verify nothing has changed
    
    If you have valid credentials:
    1 - Enable RB prefs
    2 - Sign in with an account that has an email matching your registered
    account for recordedbooks
    3 - Confirm you RB account loads on opac-user.pl
    
    Otherwise:
    Read the patches, verify it all makes sense
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4ca1d8e3b3f60722321f9f4b5f1f0caa461beecb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sun Apr 28 21:40:21 2019 -0400

    Bug 22357: Do not duplicate report rows if several reports exist
    
    At the moment every time you run runreport.pl with the --store-results
    option another line will appear for your report in the saved
    reports table. This is not a data, but a display problem as the
    report is still only stored once.
    
    1) Create a report and note the report number
    2) Run from command line (replace X by report number) :
        misc/cronjobs/runreport.pl X --format=csv --csv-header --store-results
    3) Go to saved reports table
    4) Look at the table, each run of the cronjob will create a new row
       in the table instead of just updating the saved results column.
    5) Apply patch
    6) Veriy the table displays correctly again and there are no regressions
    
    QA: Run t/db_dependent/Reports/Guided.t
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 59b740613e7a72bf6e5283c2876bad9444a7ef6a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 26 20:49:14 2019 -0400

    Bug 22717: (bug 20287 follow-up) Fix Google OpenId auto registration
    
    Silly bug caused by:
      commit ef410fd62f279a10687636a4f26babb2c91ecadc
      Bug 20287: Replace occurrences of AddMember with Koha::Patron->new->store->borrowernumber
    
    Constructors take a hashref!
    
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7de4511cef9c7204ff039356775ff3d59ceefc44
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Apr 29 12:16:59 2019 -0400

    Bug 8995: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0ecd8c2f8cbe50407babed026a462e98592a3010
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Apr 29 16:12:15 2019 +0000

    Bug 8000: DBRev 18.12.00.067
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e5dbc76fff52c63695b3670667e73a95c3309402
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Apr 29 16:09:00 2019 +0000

    Bug 8995: DBRev 18.12.00.066
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b46312dde9bd70a24cf744eacb3beeb37cc880b4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 25 10:39:14 2019 +0100

    Bug 8995: (QA follow-up) Convert db update to perl
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d99d32d033935f09b7c361177ac4b43f08b8c14a
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Mar 11 21:27:52 2019 +0000

    Bug 8995: (follow-up) Add tests, move open_url/coins routines to Koha namespace
    
    Test plan:
    1) Ensure the COinS span tag is still included on this pages. You need
    to look into html source and search for span tag with class 'Z3988',
       which has COinS string in title.
       Staff client:
           catalogue -> ISBDdetail
           catalogue -> MARCdetail
           catalogue -> detail
           virtualshelves -> shelves
        OPAC (you should have COinSinOPACResults system preference enabled):
            opac detail
            opac search
            opac shelves
    2) Run tests:
    prove t/Biblio.t t/db_dependent/Biblio.t t/db_dependent/Koha/Biblio.t
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Tested with all 9 current patches. Works as advertised, including
    OPACURLOpenInNewWindow. If a record has no items, no OpenURL link
    is displayed. All the suggested tests pass. I did not test with
    XSLT turned off.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 29c687bff71c2530adeaaf2bdfbfa1ea565ba5e5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Sep 28 13:18:12 2016 +0100

    Bug 8995: Add IGNORE to the INSERT statement
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ffb432df7801498e2eefe9daaa19dbb563090716
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Nov 6 16:04:42 2013 +0100

    Bug 8995: Show OpenURL links in OPAC search results
    
    This patch use GetCOinS sub to provide an OpenURL link in OPAC search
    results. It uses 4 new system preferences:
      - OpenURLinOPACResults: enable or disable this feature
      - OpenURLResolverURL: url of the openURL resolver
      - OpenURLText: text of the link
      - OpenURLImageLocation: image of the link
    
    Link is displayed as an image if OpenURLImageLocation is defined, and as
    text otherwise.
    It works both with and without XSLT enabled.
    
    Changes made to GetCOinSBiblio:
    
    For 'journal':
    - Title should be in rft.jtitle instead of rft.title
    - rft.date, rft.aulast, rft.aufirst, rft.au, rft.pub and rft.pages have
      no meaning for a subscription, so they are simply removed from URL
    
    This patch refactors GetCOinSBiblio, so the construction of URL is done
    only at the end. This way we do not have ugly
      $var .= "&amp;$value"
    in the function body.
    
    Also use URI::Escape instead of custom regexps.
    
    This development consider the value of syspref OPACURLOpenInNewWindow
    when building the link.
    
    Test plan:
    1/ Enable syspref OPACShowOpenURL and put your OpenURL resolver URL in
    OpenURLResolverURL syspref (if you don't have one, just fill it with
    some fake URL, you'll have to check if OpenURL links are correct)
    2/ If you want, set the other sysprefs OpenURLImageLocation and
    OpenURLText
    3/ Fill syspref OPACOpenURLItemTypes with some (not all) of your
    item types.
    4/ Empty sysprefs OPACXSLTDetailsDisplay and OPACXSLTResultsDisplay
    5/ Go to OPAC and launch a search.
    6/ Check you have in the results (near the title) the OpenURL link (only
    for itemtypes that are in OPACOpenURLItemTypes).
    Toggle OPACURLOpenInNewWindow syspref and check that the behaviour of
    the link is correct.
    7/ Go to the detail page of one of those and check you have the OpenURL
    link too. (Above tags)
    Toggle OPACURLOpenInNewWindow syspref and check that the behaviour of
    the link is correct.
    8/ Set sysprefs OPACXSLTDetailsDisplay and OPACXSLTResultsDisplay to
    "default" and repeat steps 5 to 7
    
    Signed-off-by: Paola Rossi <paola.rossi@cineca.it>
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c5a98ed3e1dff26a6e0c1482663891694ec7cf98
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Apr 26 09:05:01 2019 +0000

    Bug 8000: (QA follow-up) Two lastminute fixes
    
    [1] Number of tests Letters.t
    [2] Resolving uninitialized warn on Letters, L1327
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f98037ac53f74a664f7ea1bdbe63d884fd5f4c6f
Author: Maryse Simard <maryse.simard@inlibro.com>
Date:   Tue Feb 5 18:26:42 2019 -0500

    Bug 8000: (QA follow-up) Add email validation to system preferences
    
    This patch uses the JQuery validator plugin to add validation to preferences of class email in the system preferences page. A field containing an invalid value (even if not modified) should prevent saving.
    
    To test, confirm that when entering an invalid email address in the SendAllEmailsTo field, an error message appears and saving is prevented.
    Correcting the value should hide the message and let you save as normal.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 26a61c97f07a5a7354e1ae123f43d4cf13fbc5fb
Author: Maryse Simard <maryse.simard@inlibro.com>
Date:   Tue Feb 5 18:24:23 2019 -0500

    Bug 8000: (QA follow-up) Update the to_address in the message queue
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit de47e59be5482d7d6e2611c3ceea0e42928404b2
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Oct 29 21:35:00 2018 +0000

    Bug 8000: (QA follow-up) Fix accidently edited sysprefs.sql file
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 968eea155e676ceaf89ad34a6cf9a90f6ae0e37d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Oct 29 12:58:51 2018 +0000

    Bug 8000: (QA follow-up) Centralise Bcc too
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d51054c8b45a1c18a4e2bcf5272258a1ea523c8f
Author: David Bourgault <david.bourgault@inlibro.com>
Date:   Fri Sep 15 15:06:13 2017 -0400

    Bug 8000: Redirect all emails to SendAllEmailsTo
    
    Rebased and squashed after changes to master.
    Only difference from previous patches are small adjustements to conflicts in t/db_dependent/Letters.t
    
    Test plan:
    
    1) Apply path
    2) Run updatedatabase.pl
    3) Clear all SendAllEmailsTo system preference
    4) Send mail to a patron of your choosing, email will go to patron's
       email address as usual.
    5) Set SendAllEmailsTo to a test email address
    6) Send mail to the patron, email will be redirected to the email set
       in the systempreference.
    7) Run prove -v t/db_dependent/Letters.t
    
    It does not affect messages in the message_queue.
    
    This patch obsoletes previous patches, because it achieves the same
    functionality in a much more centralized way. (4 lines of code!)
    
    Signed-off-by: Ed Veal <eveal@mckinneytexas.org>
    Signed-off-by: BWS Sandboxes <ByWaterSandboxes@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e890cc42fda64b2bab3b0f26d66f5db60d2bdf4d
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Apr 15 10:05:28 2019 +0000

    Bug 20421: (follow-up) Fix styling
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit aa75553c3a84b89ac433aa3e1809b9855853f4bc
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue Mar 13 14:57:49 2018 +0000

    Bug 20421: Inform staff that patron does have the title checked out during placing hold
    
    Test plan:
    1) Enable the CheckPrevCheckout and DisplayMultiPlaceHold system preferences
    2) Have a patron with some checkouts history
    3) Try to place hold on one of titles from history for this patron
    4) You should see an information at the top of confirm request page, but
    you still should be able to place a hold
    5) Try this with multiple titles - one or more of them should be from
    history
    6) You should see this information in "Information" column
    7) There is also new column placed at the beggining with checkbox, you
    could uncheck it for titles you do not want to place a hold on it
    8) Confirm the hold is placed only on checked titles
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Bin Wen <bin.wen@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e9f0212f352c01b83c1505226587b5e4da2a115b
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Apr 24 23:56:30 2019 +0200

    Bug 21502: (QA follow-up) Rephrase warning slightly
    
    Test plan:
    Follow first test plan, look at warning, decide if you like it :)
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7d4126e278b0b4949e89afdb683c091ed6c089f5
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue Apr 23 12:25:52 2019 +0000

    Bug 21502: Add ItemsDeniedRenewal system preference to check syntax
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 81a614a0f5f79e7d54e0febf6d9ded0595a92977
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Fri Oct 5 13:48:07 2018 +0000

    Bug 21502: Add UpdateItemLocationOnCheckin preference to YAML format check
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 40f6822dc1b6abc3e2c1b0a408db4d52d9c42eb5
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Fri Oct 5 13:43:54 2018 +0000

    Bug 21502: Add check for YAML formatted system preferences to about page
    
    So far there are these yaml formatted preferences:
        UpdateNotForLoanStatusOnCheckin
        OpacHiddenItems
        BibtexExportAdditionalFields
        RisExportAdditionalFields
        UpdateItemWhenLostFromHoldList
        MarcFieldsToOrder
        MarcItemFieldsToOrder
    
    Test plan:
    1) Add some badly formatted YAML into some of preferences listed above
    2) Check the System information tab on About page for appropriate warnings
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d559f93151ceaff3036d6f1fbe6666fb2075756f
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue Apr 23 11:46:24 2019 +0000

    Bug 22757: Add CodeMirror highlighting on more YAML formatted preferences
    
    Test plan:
    Go to system preferences and ensure the code highlighting is used on
    these preferences:
        UpdateNotForLoanStatusOnCheckin
        BibtexExportAdditionalFields
        RisExportAdditionalFields
        UpdateItemWhenLostFromHoldList
        MarcFieldsToOrder
        MarcItemFieldsToOrder
        ItemsDeniedRenewal
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 99b2b2b6a70a6059ce862f3f89275c8dce99bd95
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Apr 24 08:02:32 2019 +0000

    Bug 21757: (follow-up) Fix number of columns in checkouts table footer template
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9fff134de69e59c047f54c1536a69b759ee11ab8
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Thu Apr 18 08:37:38 2019 +0000

    Bug 21757: (folow-up) Restore patron brief detail page
    
    Test plan
    1) Try to create patron with same name/datefobirth to trigger the
    duplicate patron check
    2) Click on "View existing record" link on "Duplicate patron record?"
    alert message
    3) You should see the patron data, but withou toolbar, menu, and so on.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dd4877706a378ab939ba9c6094c6a949b112864e
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Fri Nov 2 17:40:45 2018 +0000

    Bug 21757: Clenup of moremember.pl and its templates
    
    This patch:
      - removes unused templates
      - use objects as much as possible
      - remove many template params
    
    Test plan:
    1) Apply the patch
    2) Play with patron detail page and try to broke it anyhow ;)
    - messaging preferences
    - enhanced attributes
    - guarantors and guarantees
    - fines
    - messages
    - checkouts
    - overdues
    - use different date formats, price formats and address formats
    - ... there is many thinks you could try with this one page ;)
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c5647b4f6275b987e0c73c638de2b1b4d3c26015
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Apr 29 11:55:58 2019 +0000

    Bug 22772: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 64cc8f737b42870b26488c2f372c26cf298a15f1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Apr 25 15:23:15 2019 +0000

    Bug 22772: Menu link hover color incorrect in OPAC language choosers
    
    This patch makes a few corrections to OPAC CSS to fix colors in the
    language menus.
    
    To test, apply the patch and rebuild the OPAC CSS.
    
    - Enable multiple languages in the OPAC, including more than one
      language "variation" (fr-FR, fr-CA).
    - Set the OpacLangSelectorMode preference to "both."
    - In the OPAC, test the language menu in both the header and footer.
      When you hover over the sub-menu items the background should be green
      and the text color white.
    - Perform the same test in the self checkout and self checkin
      interfaces.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3d022dc20ea34ba5fb2d37f7399b6d07be3cdea8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Apr 26 13:55:31 2019 +0000

    Bug 22537: Suspend all hold button appears even if the hold can no longer be suspended.
    
    This patch adds to the user summary page in the OPAC a check for waiting
    or in-transit holds. If all holds are waiting or in transit the "Suspend
    all" controls will be hidden.
    
    This patch also adds a missing $KohaDates filter to the "suspended
    until" date.
    
    To test, apply the patch and log in to the OPAC as a patron with holds.
    Test these conditions:
    
     - All holds are waiting and/or in transit
       - The "Suspend holds" controls at the bottom of the page should not
         appear.
     - Some holds are waiting and/or in transit
       - The "Suspend holds" controls should appear.
    
    Signed-off-by: Marjorie <marjorie.barry-vila@collecto.ca>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5a63c5baa23c5f8b1fdd343995f360147f519d4b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Apr 26 14:09:13 2019 -0300

    Bug 15496: (QA follow-up) Fix remaining cases
    
    This patch fixes remaining cases of the list => scalar change.
    
    To test:
    - Run:
      $ kshell
     k$ prove t/db_dependent/Holds/HoldFulfillmentPolicy.t t/db_dependent/Reserves.t
    => FAIL: Tests fail
    - Apply this patch
    - Run:
     k$ prove t/db_dependent/Holds/HoldFulfillmentPolicy.t t/db_dependent/Reserves.t
    => SUCCESS: Tests pass
    - Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9b7a216c53e7874a44cc7e28fc23ffa3ee5ad9d2
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Apr 26 14:35:18 2019 +0100

    Bug 22461: (follow-up) Use `exists` not `defined`
    
    Prior to this patch there is a regression in the LDAP replication
    functionality such that clearing a field become impossible. This patch
    restores that functionality.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 90f8eb626d32694e3297a4cfe6566cbb9abe192b
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Apr 24 09:51:36 2019 -0400

    Bug 22765: Add class beside loggedinusername to indicate if logged in user is a superlibrarian
    
    It would be useful to know if a logged in user is a superlibrarian for the purpose of customization
    using Javascript and CSS.
    
    Test Plan:
    1) Apply this patch, restart all the things
    2) Log in as a superlibraraian
    3) Note the new class 'is_superlibrarian' next to the 'loggedinusername' class
    4) Log in as a non-superlibrarian
    5) Note the new class is not present
    
    Signed-off-by: Barton Chittenden <barton@bywatersolutions.com>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bfce1fea9652f84c2031f59e7213694b05e4ca8a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 26 12:04:57 2019 +0000

    Bug 15496: (QA follow-up) Fix new uses of Koha::Biblio::items in list context
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bf473396ab1313867ead815ca3e8758b76233931
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Apr 17 16:20:18 2019 +0000

    Bug 15496: (follow-up) Update interaction for deleting records
    
    This patch makes minor changes to markup and JavaScript to alter the
    interaction for deleting the record. Now a successful deletion will
    convert the dialog to a "message" type dialog and show only the success
    message.
    
    To test, apply the patch and test the process of attaching the last item
    from a record and deleting that record.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5743bb2945d3fb8900129123bf1f36f67310d843
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Apr 17 10:47:06 2019 +0000

    Bug 15496: (QA follow-up) Change success status on api
    
    DELETE response code must be 204, not 200 according to our API coding
    guidelines
    
    Test plan:
    
    prove t/db_dependent/api/v1/biblios.t
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 831e9fc98fd99a52da09f0b5a6fdd88a37c66e1f
Author: Liz Rea <wizzyrea@gmail.com>
Date:   Mon Apr 15 17:55:04 2019 +0000

    Bug 15496: (QA follow-up) remove text/javascript
    
    Make the QA tool happy for html5
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 21127d4a47bbebb74d44d32d5b51dac4bc470ce6
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Apr 12 13:50:32 2019 -0400

    Bug 15496: Delete Bib After Moving Item
    
    Librarians have requested the ability to delete records with no items
    quickly and easily from the "Attach item" results page as items are
    moved from one record to another.
    
    Test Plan:
    1) Apply this patch
    2) Create 2 records with 2 items each
    3) Move one item from record A to record B
    4) You should see no change from pre-patch behavior
    5) Move the second item from record A to record B
    6) You should now see a "Delete record" button
    7) Click the button
    8) Note the record in question has been deleted
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 443c2fafb7be74aa74282eb4dee7ad5f3d827f31
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 26 11:48:17 2019 +0000

    Bug 10300: DBRev 18.12.00.065
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 80be039d6c6ccff18ac029b4e2081728aeba5748
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Feb 28 16:23:22 2019 +0100

    Bug 10300: (follow-up) add controls on transfers page
    
    This patch moves the check of IndependentBranchesTransfers pref to templates and adds permission test inside branchtransfers.pl.
    It also corrects the libraries combobox in branchtransfers.tt, this list can contain all libraries, it is the access to the page that may be protected.
    
    Additions to test plan :
    1)
    1.1) Enable CircSidebar
    1.2) In circulation home page check the effect of IndependentBranchesTransfers on "Transfer" link
    1.3) Go to return page and check then effect of IndependentBranchesTransfers on "Transfer" link
    
    2)
    2.1) In circ/branchtransfers.pl, with and without IndependentBranches you see all libraries are in combobox
    
    3)
    3.1) Set IndependentBranchesTransfers to no and go to circ/branchtransfers.pl
    3.2) You are redirected to page 403 unless you are superlibarian
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6e6a6230a5e59ec1866a12174233471a07d616b8
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Aug 25 14:03:31 2016 +0000

    Bug 10300: Allow transferring of items to be have separate IndependentBranches syspref
    
    Some libraries want to have IndependentBranches enabled, but still be
    able to transfer items between themselves.
    
    Test Plan:
    1) Apply this patch
    2) Run updatedatabase.pl
    3) Enable IndpendentBranches and IndependentBranchesTransfers
    4) Log in as a super librarian
    5) Note you can transfer items
    6) Log in as a non-super librarian
    7) Note you cannot transfer items
    8) Disable IndependentBranchesTransfers
    9) Note you can now transfer items
    
    Signed-off-by: Maribeth Shafer <mshafer@ckls.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Bug 10300: (QA follow-up) Make database update idempotent
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 428fcb3421d0176bdb92cc394fbaec00b84871a8
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Apr 12 13:07:18 2019 -0400

    Bug 15496: Tidy code block (Whitespace changes only)
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2b45630e42813f0e9a383cb7f97c63f68f30a4a3
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Apr 11 10:05:14 2019 -0400

    Bug 15496: Add API endoint for deleting a bib
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6d93872d5a8f060a30104751997e312e74d21c33
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 26 10:52:41 2019 +0000

    Bug 22035: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7be6714148f35f3d33d848d4cc9dca251356971a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jan 16 18:27:54 2019 +0000

    Bug 22035: Improve local cover image browser page
    
    This patch makes changes to the way local cover images are handled on
    the image viewer page in the staff client. From this page you can now
    delete images or reach the upload images page.
    
    The patch also modifies slightly the process for deleting an image from
    the images tab on the bibliographic detail page.
    
    To test, apply the patch and regenerate the staff client CSS.
    LocalCoverImages and  AllowMultipleCovers should be enabled.
    
     - Open the detail view for a record which has multiple cover images
       attached. On the Images tab, click the "Delete image" link for an
       image. After confirming, the link should change to a spinner icon and
       image should fade out.
     - Click one of the cover images to open the image viewer page. The
       thumbnails should each have a delete link which looks like and
       behaves like the delete links on the biblio detail page.
     - Clicking an image thumbnail should load a spinner icon into the area
       where the full-sized image was, which should be replaced by the image
       you chose.
     - There should be a button for uploading images which takes you to the
       correct page for adding images to that record.
     - The page title and breadcrumbs should show the title of the record.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 27691d2db6b74fb42b8be169a5feb7577ff582eb
Author: Hayley Pelham <hayleymapley@catalyst.net.nz>
Date:   Fri Apr 26 15:22:30 2019 +1200

    Bug 22056: Removed test directory, including search.pl and README
    
    Test plan: Check that this directory has been removed.
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 696035229137ffb139446ba99f8ad41dab94a199
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 25 12:35:24 2019 +0100

    Bug 22200: (follow-up) Wrap accountline creation in a transaction
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 020da0e81712ca3d6856e31af4cd3b8d18346c01
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 18 09:44:01 2019 +0100

    Bug 22200: Add credit when forgiving overdue
    
    Prior to this patch the exemptfine option for_FixOverduesOnReturn would
    directly set the overdue amount to 0 rather than creating an appropriate
    credit of the type forgiven and offseting it against the debt.
    
    Test Plan:
    1) Find a checkout that is overdue with fines
    2) Check the item in with the forgive fines option checked
    3) Note that the users account details now shows the overdue as forgiven
    and a forgiven credit is added which matches the overdue amount (and is
    applied against it, i.e. both overdue and forgiven lines have 0
    amountoutstanding).
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f82d6acab668dfb86a227b155116679a2a540eea
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 18 09:56:24 2019 +0100

    Bug 22200: Add Tests for change
    
    Unit tests to check for the addition of a credit of type 'FOR' when
    _FixOverduesOnReturn is called with $exemptfine set to true.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1d6e9ff44c19379a41e9ce688685a24788583e0c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 23 22:49:46 2019 -0400

    Bug 22621: Fix filters on subscription search results
    
    Caused by
      commit 4e698f7b478a094d7b32ebfeaa917bca05ebcc5b
      Bug 18426: Allow to edit subscriptions in batch
    
    There is a shift caused by a hidden column, which make the filters
    searching on the previous column.
    
    Test plan:
    - Add 1+ searchable additional field for subscription
    - Create a new subscription
    - Search for subscriptions
    - Use the column filters to filter the results
    => The results must be filtered accordingly
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 20496bc78b7830d812fda454a0fe243fae9c465c
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Oct 17 14:43:11 2018 -0400

    Bug 21589: Series link formed from 830 field is incorrect
    
    Bug 13692 corrected the series link for records using a 490/800 combination
    
    When a record has a 490/830 conbination for series, the link is malformed (title is used as author, title is blank)
    
    Test Plan:
    1) Catalog two or more records with 830 fields
    2) Note the series links are broken
    3) Apply this patch
    4) Reload the record details page
    5) The series link should now work
    6) Repeat for the OPAC
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7e85754083bd66f45009f55a01e9dec9eda81504
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 25 17:47:14 2019 +0000

    Bug 22715: Remove extraneous html filter
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6e641c5bcb7370556326fb64838fce1eefbc2c18
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Apr 16 10:34:56 2019 -0400

    Bug 22715: Searching for patrons with "" in the circulation note hangs patron search
    
    To replicate:
    Edit a patron to have a circ note, include quoted text in it, such as "this is quoted string"
    Go to the patron search, search for a set of results that would include the patron with the quotes in the note
    Enjoy looking at "Processing" for forever.
    
    Test Plan:
    1) Apply this patch
    2) Attempt to replicate using the steps above
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    I took this a step further and used <script>"something in
    quotes"</script> for my test note and this worked just fine. YAY.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c9927a97ab814b18453f981b50ada546ca2ba064
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 23 23:48:35 2019 -0400

    Bug 22669: Fix item editing on receiving an order
    
    Since
      commit 1253975389975a8ff11a9bb2ef84582aeb6bd08b
      Bug 21091: Move add item template JavaScript to a separate file
    
    items cannot longer be edited when receiving an order.
    When moving the code to the JS file, the JS variable "opisadd" was
    always set to "true":
      var opisadd = '[% opisadd | html %]';
    Even if the TT variable is 0, opisadd will be "0", which is evaluated to
    true in Javascript
    
    To clean the situation it is easier to remove this variable and use "op"
    instead.
    
    Test plan:
    - Make sure acqcreateitem is set to "when placing an order"
    - Create a basket with some orders
    - Close the basket
    - Go to your vendor and receive an order
    - On the receive page, try to edit your item
    => Without the patch, the pop up page will open and then close, not allowing the item to be edited.
    => With this patch applied you will see the item edit form. Save and
    confirm that the parent window is updated with the new value (actually
    it's refreshed)
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 90a15e2d82cd345c6d2fd3cb3ddd1e318e3a79f7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 25 14:25:06 2019 +0000

    Bug 20837: (RM follow-up) fix test count
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bdc5cb00accf0464d352a8197d2d8ff86a774a64
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Mar 21 06:43:13 2019 -0400

    Bug 22556: Add ability to quickly filter funds/budgets by library on the Acquisitions home page
    
    Some librarians would like to have a quick pulldown selector to filter budgets and funds by library on the acquisitions home page.
    
    Test Plan:
    1) Apply this patch
    2) Navigate to the Acquisitions home page
    3) Notice the new pulldown on the budgets table labeled "Filter by library"
    4) Select a library that has one or more budgets/funds
    5) Note only budgets/funds from that library now display!
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Bin Wen <bin.wen@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c5f4f560d29e86b5dbaa02470c21f3128b70a382
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 25 11:39:11 2019 +0000

    Bug 14576: DBRev 18.12.00.064
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 41f3c1a98ef281325c51c7d9852db199281a05cd
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue Apr 23 12:02:32 2019 +0000

    Bug 14576: (follow-up) Add code highlighting to system preference UpdateItemLocationOnCheckin
    
    Test plan:
    1) Go to system preferences and find preference UpdateItemLocationOnCheckin
    2) Ensure the yaml code higlighting is used on textarea when editing
    this setting
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b2e5cf36ea41b854fbe2688f545be875fbc1f197
Author: Liz Rea <wizzyrea@gmail.com>
Date:   Wed Mar 27 23:56:51 2019 +0000

    Bug 14576: (QA follow-up) Tidy up feature documentation
    
    To test:
    Apply this patch with all of the others
    run the updatedatabase, it should work
    install a new Koha, this pref should be installed and look fine in the
    interface.
    Check the syspref, make sure the text looks ok and makes sense.
    
    Bonus points:
    for checking to make sure PROC: _PERM_ appears in the new
    pereference if InProcessingToShelvingCart was set
    for checking to make sure _ALL_: CART appears in the new preferenec if ReturnToShelvingCart was previously set.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a2b805a0df53be89884a64d890dfea4a5f13ac9c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 27 11:36:47 2019 +0000

    Bug 14576: (follow-up) Using item objects, not hashrefs
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 23a12cf4d81c6ebcdba02f15f0f6424d75e6ce55
Author: Hayley Pelham <hayleymapley@catalyst.net.nz>
Date:   Wed Mar 27 12:16:20 2019 +1300

    Bug 14576: Replaced calls using deprecated method GetItem with Koha::Items->find
    
    Test plan:
    1) Apply all patches except this one
    2) Checkout out an item to a patron
    3) Check the item in - note that this will fail
    4) Apply this patch, and repeat steps 1-3, noting instead that the the
    check is instead successful
    5) Verify also that reserves act as expected
    5) Sign off
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 62b6d94daaea5e113260e8888c522a2697b745f2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 20 15:46:26 2019 +0000

    Bug 14576: Rebase fixes Fix test Rebase code
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e7c05431f215064aa4d42df17023673cee27e414
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Feb 20 18:45:44 2019 +0000

    Bug 14576: (follow-up) fix some typos and style
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f2581eac358b198c4b219ebcbd11eb3838f0e06d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Dec 12 13:30:11 2018 +0000

    Bug 14576: Update to use get_yaml_pref_hash
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 152e89b7113b82e590c30a127e5ced9422496cdf
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 4 15:21:57 2017 +0000

    Bug 14576: Unit tests
    
    To test:
    1 - prove -v t/db_dependent/Circulation/Returns.t
    2 - prove -v t/db_dependent/Circulation/issue.t
    3 - prove -v t/db_dependent/UsageStats.t
    4 - All should pass
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 78a7d5aada4adb19943833f65beeac3ac3ff4eb9
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 4 15:19:26 2017 +0000

    Bug 14576: Allow arbitrary automatic update of location on checkin
    
    This patch adds a new syspref "UpdateItemLocationOnCheckin" which
    accepts pairs of shelving locations.  On check-in the items location is
    compared ot the location on the left and, if it matches, is updated to
    the location on the left.
    
    This preference replaces ReturnToShelvingCart and
    InProcessingToShelvingCart preferences.  The update statement should
    insert values that replciate these functions.  Note existing
    functionality of all items in PROC location being returned to
    permanent_location is preserved by default.  Also, any items issued from
    CART location will be returned to their permanent location on issue (if
    it differs)
    
    Special values for this pref are:
    _ALL_ - used on left side only to affect all items
    _BLANK_ - used on either side to match on/set to blank (actual blanks
            will work, but this is an easier to read option)
    _PERM_ - used on right side only to return items to permanent location
    
    Test Plan:
    1) Apply this patch
    2) Run updatedatabase.pl
    3) Set the new system preference UpdateitemLocationOnCheckin
       to the following (assuming sample data):
       NEW: FIC
       FIC: GEN
    4) Create an item, set its location to NEW
    5) Check in the item, note its location is now FIC
    6) Check in the item again, note its location is now GEN
    7) Check in the item again, note its location remains GEN
    8) Test using _ALL_, _BLANK_ and _PERM_ for updates
    9) Try entering various incorrect syntax in the pref and note you are warned
    
    Sponsored by:
        Arcadia Public Library (http://library.ci.arcadia.ca.us/)
        Middletown Township Public Library (http://www.mtpl.org/)
        Round Rock Public Library (https://www.roundrocktexas.gov/departments/library/)
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 90b8fb62eef4504b149b12593cf3518ad5575eed
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Apr 24 23:42:45 2019 +0000

    Bug 22764: Change marcfield to MARC field in alert message
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 63d942d84fbefb65226e65b7b07c2116bd126a3e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Apr 24 13:19:38 2019 +0000

    Bug 22764: More YUI grid cleanup
    
    This patch cleans up a few places where templates still contain YUI grid
    markup. Some other minor markup problems are also fixed.
    
     - additional-fields.tt:
       - Converts YUI grid to Bootstrap
       - Replaces obsolete <tt> tag with styled <span>
       - Adds _() function to string in embedded JavaScript
    
     - detail.tt:
       - Fixes some stray YUI grid classes
       - Fixes corresponding JavaScript to enable page adjustments
    
     - moredetail.tt:
       - Removes unnecessary YUI grid markup
    
    To test, apply the patch and view the affected pages, confirming that
    everything looks correct and that the page adjusts well to various
    browser widthds.
    
    When testing the bibliographic detail page, enable AmazonCoverImages and
    view a record with and without an Amazon cover image. The layout should
    work in both cases.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7dce351605e571c6bf6ae71b892f3b40fff2b3aa
Author: Liz Rea <wizzyrea@gmail.com>
Date:   Wed Apr 17 05:20:23 2019 +0000

    Bug 22664: More making acquisitions links more easily clickable
    
    To test:
    
    * create a basket with an order from a staged record, and an order from
    a suggestion
    * add that basket to a basket group when you close it.
    * note that the links to the basket in the first column, the link to the
    basket group in the second column, and the link to
    the suggester in the summary column are very small (only the ID# is
    linked)
    * apply this patch, restart the things
    * refresh the page, note that the previously ogled links are now bigger
    and easier to find and click, and that the links work and such
    * rejoice.
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c5bef78457a8d4cd57c91dc0a54ddcf2963785d0
Author: Liz Rea <wizzyrea@gmail.com>
Date:   Mon Apr 8 19:00:01 2019 +0000

    Bug 22664: Link names in order search results instead of numbers
    
    To test:
    Make up some orders, put some in basket groups.
    Search for your vendor's orders, note that the only thing linking to the
    order is a tiny number in parentheses.
    Apply this patch, restart the things.
    Refresh the results, note that te basket names *and* numbers are linked
    now.
    Rejoice.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f0fd89fd9c2ce397e01ccc6d63d2da9efd2aeda9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Apr 18 14:22:35 2019 +0000

    Bug 22734: Fund not marked as mandatory when ordering from a staged file
    
    This patch does some refactoring of JavaScript to make handling of
    required fields more robust. It also moves some template JavaScript to
    the footer and some to a separate file.
    
    A fallback "pattern" attribute is added to the quantity field, requiring
    0-9+ values.
    
    The "required" property of the funds dropdown is now dependent on the
    value set under the "Default accounting details" tab. If a default is
    selected, the individual item funds are preselected and not marked
    required.
    
    To test, apply the patch and begin the process of ordering from a staged
    file.
    
     - Select all items to import.
       - Under each item, the fund should be marked mandatory.
       - The quantity field should accept only numbers.
       - Select the "Default accounting details" tab and select a default
         fund.
         - Return to the "Select to import" tab. Your selected default fund
           should now be preselected under each item. The fund should no
           longer be marked required.
    
           Un-selecting a default fund should result in each item fund
           select becoming required.
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit de20398db303a1ee45b62f9aa51f124597ed0cd8
Author: Mark Tompsett <mtompset@hotmail.com>
Date:   Mon May 28 16:45:29 2018 +0000

    Bug 20692: Extreme toggle checking for plack
    
    TEST PLAN
    ---------
    sudo koha-plack --disable
    sudo koha-plack --disable
    sudo koha-plack --enable
    
    sudo koha-plack --disable
    echo $?
    sudo koha-plack --disable
    echo $?
    sudo koha-list --noplack
    echo $?
    sudo koha-plack --enable
    echo $?
    sudo koha-plack --enable
    echo $?
    sudo koha-list --plack
    echo $?
    
    git bz apply 20692
    sudo perl ~/misc4dev/cp_debian_files.pl
    then repeat the test.
    
    It should also be noted, because the enable
    and disable are now split, if for some reason
    they become out of sync, an enable or disable
    should correct them.
    
    Because these are bash scripts, the test tool
    (/home/vagrant/qa-test-tools/koha-qa.pl)
    does not apply.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a6a2e29db85dd51f99a1b112947e449b26ad0a54
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 25 11:10:29 2019 +0000

    Bug 22511: Fix type role->roll
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9fff49444368dffa9032feda071a1f70d429afc0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 25 11:09:38 2019 +0000

    Bug 22511: DBRev 18.12.00.063
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 43e6b00f093e7641470afce92547fa41c5a08fe8
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Thu Apr 25 08:28:13 2019 +0000

    Bug 22511: (QA follow-up) Refactor status description in templates
    
    Test plan:
    
    Before this patch, some accounttypes does not show status (for example
            voided payment)
    
    After this patch, the status is always generated - defaults to empty
    string
    
    This behaviour should be same in intranet and opac
    
    In OPAC templates there was even bug (used variable account instead of
            ACCOUNt_LINE), so the status was not shown at all
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1e95b94ea0c2e0115227c6cbf90cfae5dd0c5feb
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Thu Apr 25 08:25:42 2019 +0000

    Bug 22511: (QA follow-up) Fix update database
    
    Test plan:
    Run db update (and have some voided accountlines)
    --> without patch it fails with error message similar to:
        Can't use string ("Payment") as a HASH ref while "strict refs" in use at
        (eval 1393) line 19.
    --> with patch it runs as expected
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 69bd858712ece4811fbb7d8839c5c76cc749de3a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Apr 10 10:05:07 2019 +0100

    Bug 22511: (follow-up) Add DB Update
    
    This update takes old VOID accountlines and attempts to restore the
    original accounttypes using the offsets and set the status to 'VOID'
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 58195734ee7bfe91c448db49b0eea0327654cf8e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Mar 27 11:52:07 2019 +0000

    Bug 22511: (follow-up) Fix test plans
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e0690dc84748f582553c7e45166d4fa8b174a266
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 22 12:00:00 2019 +0000

    Bug 22511: Update UI to use accountlines.status
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1a25f1094d2d34163108b07b7486905cfbaac76f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 15 14:07:24 2019 +0000

    Bug 22511: Update void method to use status
    
    We added a 'status' field to 'accountlines' in bug 22512 to allow for
    more fined grained control over 'types' and 'states'.
    
    This patch updates the void method to utilise this new field so we may
    keep the original credit type for later auditing should it be required.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0db7b7a1c8e3c7d01971c93b311d2dc42d13c9cd
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 15 14:18:12 2019 +0000

    Bug 22511: Update tests
    
    Updated tests to check for 'status' change and fixed 'accounttype' and
    moved from t/db_dependent/Accounts.t to the more appropriate
    t/db_dependent/Koha/Account/Lines.t
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4b97a67ae4b940cbac57f69cb47a7ae058980e6d
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Wed Apr 24 14:58:41 2019 +0100

    Bug 21460: (follow-up) Fix bugs found in QA
    
    Fix silly bugs mentioned in comment #29
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 951b857a970e02cc10bf1b5a31005e8eccc96eaf
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Apr 23 10:18:31 2019 +0100

    Bug 21460: (follow-up) Filter params in .pl
    
    This patch filters the passed parameters in the .pl, rather than doing
    it in the template. As per comment 16
    (https://bugs.koha-community.org/bugzilla3/show_bug.cgi?id=21460#c16)
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3255525b59fa0ecd728a3b5942db89a21ab52f43
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Apr 23 10:09:33 2019 +0100

    Bug 21460: Simplify the code to have only 1 assignment
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit eb8f5c86fe5f3e1e20bea73fa8b646cdc092513a
Author: Eric Phetteplace <phette23@gmail.com>
Date:   Mon Apr 8 16:00:47 2019 -0700

    Bug 22551: Stray "//" appears at bottom of opac-detail.tt
    
    Removes a couple stray "//<![CDATA[" like comments which are artifacts of other
    code that since been removed. One of the comments causes two forward slashes to
    appear at the bottom of each OPAC detail page.
    
    Testing plan:
    
    - enable SocialNetworks
    - visit any OPAC detail page, observe "//" at bottom of page
    - apply patch
    - revisit page, slashes should be gone
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit aba8b130f8b96e5000e8a1eccecfb53d7b371c30
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Tue Mar 5 11:04:55 2019 +0200

    Bug 22413: Improve query string and desc creation for Elasticsearch
    
    Test plan:
    
    After each of the following steps, verify that the results and query description looks ok.
    
    1. Do a simple keyword query
    2. Change sort order
    3. Click a facet
    4. Do an advanced search with title and author
    5. Change sort order
    6. Click a facet
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Marjorie <marjorie.barry-vila@collecto.ca>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ed6228de83dc57e624c3b3dc30632775df972277
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 25 10:36:36 2019 +0000

    Bug 22339: DBRev 18.12.00.062
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0047ede37e46a3334c9c47d7ebaed848907b6890
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Thu Mar 14 13:31:34 2019 +0200

    Bug 22339: Fix search field mappings of MARC fixed fields
    
    Fixes handling of /0 selector in addition to several fixed field positions. Note that ff7-01-02 is in fact 00-01 in Zebra and that has been replicated here.
    
    Test plan:
    1. Before applying a patch, check from Elasticsearch (e.g. localhost:9200/koha_biblios/_search?q=_id:123) what is indexed in Elasticsearch for a record for date-entered-on-file, ff7-00, ff7-01, ff7-02 and lleader.
    2. Apply the patch, update database and save the record again.
    3. Verify that the contents of the forementioned fields is now correct in Elasticsearch.
    4. Verify that tests pass:  prove -v t/Koha/SearchEngine/Elasticsearch.t
    
    Signed-off-by: Björn Nylén <bjorn.nylen@ub.lu.se>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bdf0d85c1de9cbb37cc8a40b0b4a2e86633d3aaf
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 8 12:19:41 2018 -0300

    Bug 20891: Escape html then JSON
    
    To my understanding we need to escape first html chars then to JSON.
    
    If this patch works we will need to rethink the 'To' TT plugin.
    It was originally designed to have several escape methods, but with
    these changes it will not make sense to name it 'To' if used only to
    escape JSON
    
    IIRC we should keep the 2 different ways to use it:
     * [% To.json( string ) %]
     * [% string | $To %]
    otherwise it will be hard to use it when called in argument of
    patron-title.inc (`git grep To.json`)
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2be0195895628ec491ee1f25368e60181c4f1eb2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 7 12:17:26 2018 -0300

    Bug 20891: Escape list's names in JSON
    
    When someone uses \ in the description of a list, the datatable in staff
    won't load and keeps processing.
    
    Test plan:
    - Create a list named "<script>alert('hola');</script>"
    - Create another list named "k\o\h\a"
    - Hit /cgi-bin/koha/virtualshelves/shelves.pl
    
    => Without this patch the lists will not be displayed, JSON is
    malformated
    => With this patch everything is ok
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ab2e7730387156841adc18b1659241f427bde7ef
Author: Liz Rea <wizzyrea@gmail.com>
Date:   Tue Apr 9 19:37:13 2019 +0000

    Bug 20837: (QA follow-up) adding missing filter to make QA tool happy
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bf1100fbf1f3e7e6895d3f05da82c86313ad8e98
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 30 16:05:04 2018 +0000

    Bug 20837: Use ReservesControlBranch to determine holdability of items
    
    To test:
     1 - Set a default holds plicy for an item type as 'from home library'
     2 - Set CircControl to 'logged in library'
     3 - Log in as staff from a library without the rule set
     4 - Note you can set holds for patrons of any library on items of type
    above
     5 - Toggle ReservesControlBranch and note that nothing changes
     6 - Toggle CircControl and note some combinations don't allow holds
     7 - Apply patch
     8 - Toggle ReservesControlBranch and note that holdability is affected
     9 - Toggle CircControl and note holdability does not change
    10 - Read the note on admin/smartrules.pl and confirm it makes sense
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 28e536892a609cd92c624ee4eca4d84cabba8893
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 30 17:29:57 2018 +0000

    Bug 20837: Unit tests
    
    To test:
    prove -v t/db_dependent/Holds.t
    prove -v t/db_dependent/Holds/DisallowHoldIfItemsAvailable.t
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ef5adaff5ac045000b90c4b2b121d8c2ce2d5c59
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Apr 24 15:12:17 2019 +0000

    Bug 22650: Prevent multiple holds on individual items
    
    This patch corrects a missing id on the holds_to_place field and adds code to disable the box when an item is checked
    
    Additionally script login now places a single hold if an itemnumebr is passed and checks for holdability of the specific item
    
    To test:
     1 - Allow multiple holds per record in circ rules
     2 - In staff client, go to place a hold on a record
     3 - Select a patron
     4 - Increase the number of holds
     5 - Then select a specific item to hold
     6 - Patron now has multiple holds on a single item
     7 - Apply patch
     8 - Repeat, notice that count is disabled when item checked
     9 - Confirm count is enabled when 'Hold next available item' is checked
    10 - Set number to more than 1
    11 - Check an item and submit
    12 - Confirm only one item is reserved
    13 - Hit the script directly (with valid info):
         http://localhost:8081/cgi-bin/koha/reserve/placerequest.pl?biblionumber=1&checkitem=1&holds_to_place_count=2&borrowernumber=5
    14 - Confirm only one hold is placed
    15 - Confirm multiple hits of the url do not generate further holds
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e2fa6d97ef45efb902086aa3a3d232137c054afa
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 16 17:21:01 2019 +0000

    Bug 19241: Waiting items show as available in the cart
    
    The cart uses the same item-status.inc that the details page uses, however, we don't
    set the waiting or reserved flags. This patch adds those flags to the script
    
    To test:
    1 - Find an item on the opac
    2 - Place a hold on the item
    3 - Check in the item to confirm the hold
    4 - Note the details page on OPAC shows 'On hold'
    5 - Add the item to a basket
    6 - Note the basket shows 'Available'
    7 - Apply patch
    8 - Check the cart, should show as 'On hold'
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7be176cf1da5adb5f264bb9668667dfeb1d9a2ae
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 19 11:25:43 2019 +0000

    Bug 22743: Add password modal to overdrive results page
    
    This patch also removes a line abotu ratings which was throwing an error.
    Confirm stars rating for OD results are still shown as expected
    
    To test:
     1 - Enable overdrive circulation with password required
     2 - Sign in to OPAC but not overdrive
     3 - Perform a search that returns overdrive results
     4 - Click in to results page
         http://localhost:8080/cgi-bin/koha/opac-overdrive-search.pl?q=cats
     5 - Note 'Login to OverDrive account' link
     6 - Click it
     7 - Nothing happens!
     8 - Apply patch
     9 - Repeat
    10 - Success!
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 18fd7538581a2993757ca6eb3601c0e7342e1432
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 25 10:11:31 2019 +0000

    Bug 22729: (RM follow-up) Correct column in schema addition
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 41ef01098434aaa59b44368ac6b147b7d91939e1
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 25 10:09:09 2019 +0000

    Bug 22729: DBRev 18.12.00.061
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 482664cb804758b164161fe02df0813814fbd01b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 25 08:15:58 2019 +0100

    Bug 22729: (QA follow-up) Ensure no NULL values before setting NOT NULL
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7021af687936054c2e7fb5ea8073ef54cf4784ba
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Apr 17 15:06:44 2019 -0300

    Bug 22729: Adapt /patrons controller code to the change
    
    This patch makes the controller code aware of the flgAnonymized =>
    anonymized change.
    
    To test:
    - Run
      $ kshell
     k$ prove t/db_dependent/api/v1/patrons.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5854e5de7f0082b94c85006c267a72cade2c5687
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Apr 17 15:03:25 2019 -0300

    Bug 22729: Adapt Koha::Patron(s) and tests
    
    This patch adapts the Koha::Patron(s) code to the column change.
    To test:
    - Apply this patches
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Patrons.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 49cab949b4d8bd1dac3a3c0f25a9f83b5f167beb
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Apr 17 15:01:47 2019 -0300

    Bug 22729: DB update
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c1949cda9b2847bc6ecf7e1dbc07990c4055b69a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Apr 19 09:28:35 2019 -0300

    Bug 22739: Test SelfCheckInTimeout <> 0, not just defined
    
    On sci-main.pl the preference value is tested for 'defined'. This patch
    tests it is different than empty string too. This was causing a
    JavaScript syntax error, that made it display a wrong message.
    
    To test:
    1 - Blank the syspref SelfCheckInTimeout
    2 - Attempt to checkin something via sci
    => FAIL: The 'Your request included no check-ins.' message is printed.
    3 - Apply this patch, reload the sci-main.pl page
    4 - Attempt to checkin something via sci
    => SUCCESS: The UI correctly stacks the scanned barcodes
    5 - Sign off :-D
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 680dd7f340ef445820864045127da9c65b3be0e2
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Tue Apr 23 00:50:49 2019 +0000

    Bug 16232: Fix edit as new in Rancor
    
    When you edit a biblio as new, and you have enabled advanced editor,
    current record was opened, and was overwritten when saved. This patch
    effectively opens a new record based on the one selected.
    
    To test:
    1) Enable "EnableAdvancedCatalogingEditor" preference
    2) Go to cataloguing and click on advanced editor to save preference to the cookie
    3) Search for an item in catalog
    4) Click in "Edit as new (duplicate)"
    5) Advanced editor should appear.
    CHECK => browser url ends with #catalog/{original biblionumber}
          => Title above toolbar is "Editing catalog record #{original biblionumber}"
    6) Apply this patch
    7) Repeat steps 3 to 5
    SUCCESS => browser url ends with #duplicate/{original biblionumber}
            => Title above toolbar is "Editing duplicate record of #{original biblionumber}"
    8) Save
    SUCCESS => browser url ends with #catalog/{new biblionumber}
            => Title above toolbar is "Editing catalog record #{new biblionumber}"
    9) Sign off
    
    Sponsored-by: Carnegie
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4e2c74fced685db861a78fc1aa151dd35ad0d5f2
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Apr 17 13:58:57 2019 +0200

    Bug 22723: Correct syntax error on confess call in Koha/MetadataRecord/Authority.pm
    
    In Koha/MetadataRecord/Authority.pm the call to confess is missing string quotes.
    
    It may generates this error :
    
    Can't locate object method "confess" via package "Empty String at /usr/share/perl5/MARC/File/XML.pm line 448.
    " (perhaps you forgot to load "Empty String at /usr/share/perl5/MARC/File/XML.pm line 448.
    "?) at /home/koha/src/Koha/MetadataRecord/Authority.pm line 186.
    
    Simply missing double quotes.
    Also missing use Carp to call confess.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 40cf22ab5f9dbdcaa37f46977fe5386a6303a42e
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Apr 24 06:55:12 2019 +0000

    Bug 22753: Fix tabs pointed out by QA script
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit eb956eb4cf3d44f45ad54be58fe95d7355a2b8bf
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 23 18:03:33 2019 +0000

    Bug 22753: Fix hold priority adjustment, move to top
    
    Since the holds table can be split we need to calculate the
    first priority for each table. However, currently we use the
    first in the loop, not taking into account the waiting status.
    This patchset sets the first_priority to the first non-found hold
    
    Additionally, some clean-up is done to not display the alter
    priority arrows for waiting holds.
    
    To test:
    1 - Place several holds on a title
    2 - Confirm one of the holds to be waiting
    3 - Attempt to move the last hold to the top
    4 - Nothing happens
    5 - Apply patch
    6 - Note that the waiting hold has no options to move in the list
    7 - Attempt to move the last hold to the top
    8 - It moves as expected!
    9 - Split the holds queue by pickup library
    10 - PLace some holds for pickup at another branch
    11 - Confirm moving these holds works within their own table
    12 - Unsplit the queue
    13 - Ensure the holds end where you expect (moving in a split
         table didn't move above holds form another table)
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2f60cd8dd23662ad2878cb6d189679fde125290f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Apr 24 00:03:34 2019 -0400

    Bug 22762: Fix items.collection display on receiving
    
    Caused by
      commit 31c29fd31f557306233e6a2936148a5bb10b89a1
      Bug 21206: Replace C4::Items::GetItem
    
    The log says: The method Koha::Item->collection is not covered by tests!
    
    It has highlighted an older problem:
    Since
      commit bb1e9c500c810402c64436c53bcc00ffb9a0b857
      Bug 17248 - Koha::AuthorisedValues - Remove GetKohaAuthorisedValueLib
    the "Collection code" is not filled correctly (items.collection vs items.ccode).
    
    Test plan:
    - Set acqcreateitem to "when placing an order"
    - Receive an order with items
    => The "Collection code" column must be filled with the items.ccode value
    - Edit an item (You may need the patches on bug 22669)
    - Change the collection code value
    => The "Collection code" column must be filled with the new value
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit be0d338366589ef80b69f287d7dbfc059476e4b2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Apr 22 18:50:15 2019 +0000

    Bug 22751: Switch two-column templates to Bootstrap grid: Patron details
    
    This patch updates the patron details page template to use the Bootstrap
    grid.
    
    To test, apply the patch and view the detail page for a patron in the
    staff client. Adjust the browser width and confirm that the page adapts
    to different sizes.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7d598d9130c3d171af1e1a6a0a168cea043c277d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Apr 23 15:41:50 2019 +0000

    Bug 21034: Re-indent circulation.tt
    
    This patch reindents the template for the checkout page, circulation.tt:
    
    - Trailing spaces removed
    - Indentation changed to a consistent 4 spaces
    - Markup indentation made more consistent
    
    To test, view the checkout page under various circumstances:
    
    - No card number submitted
    - Name submitted (patron search results)
    - Card number submitted
      - Restricted patron
      - Patron with circulation messages
      - On-site checkouts
      - Check all tabs: checkouts, relatives' checkouts holds, article
        requests, restrictions, clubs
    
    HTML validation before and after the patch should return the same
    results.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1d845a1b3765f9ca11e526a0ea78dd0947246f4d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Apr 22 12:47:40 2019 +0000

    Bug 22418: (follow-up) OPAC changes
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit aa6c41db8dd60a0eb27560c515ffaab5f9371c42
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Apr 22 12:39:08 2019 +0000

    Bug 22418: Add magnifying glass to 655 results
    
    To test:
    1 - Have some 655 fields linked to authorities
    2 - Notice they have no magnifyiung glass
    3 - Apply patch
    4 - Note they have one now
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e7e1f2faeea94d2568779f9e7bbdc100909561c3
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Apr 10 00:02:09 2019 +0200

    Bug 22674: Change wording of payments in the GUI
    
    This changes the different versions of "Payment, thanks"
    to just read "Payment".
    
    To test:
    - Look at the Fines & Charges tables in
      - OPAC patron account > your fines
      - Staff patron account > Accounting > Transactions tab
      - Staff patron account > Accounting > Make a payment tab
    - Verify all tables display the descriptions correctly
    - Decide if you like this better than before
      Yes: sign-off
      No: comment on the bug please
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cac5edd81d58a399b2254f378593fdb44a893826
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 7 18:55:57 2018 +0000

    Bug 21784: Clean up js_includes.inc
    
    This patch cleans up js_includes.inc by removing script "type"
    attributes which are now invalid HTML. The patch also removes "CDATA"
    markers from script blocks. They have been unnecessary since we stopped
    using an XHTML doctype.
    
    To test, apply the patch and look at various pages in the staff client
    to confirm that no JavaScript-driven interactions are broken.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 097a6af3b03a90af8c42a4ea8139edca8c9eb616
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 22 10:20:17 2019 -0300

    Bug 22696: Prefetch items too
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 40ed0baba7f1156ba63d2a8ee095b40db66e13c8
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Apr 19 11:29:49 2019 -0300

    Bug 22696: (follow-up) Use new relationship for prefetching
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4a0fa82a5b3ed2f493c55c1b74bf3dac2738c47f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Apr 12 15:22:30 2019 -0300

    Bug 22696: Simplify visibility logic in opac-ISBDdetail.pl
    
    This patch removes many DB queries and uses state-of-the-art Koha code
    to accomplish the same things it did before.
    
    To test:
    - Apply this patch
    - Open opac-ISBDdetail.pl for a known record
    => SUCCESS: No behaviour change.
    - Sign off :-D
    
    Signed-off-by: Bin Wen <bin.wen@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 95e074414758c84800281e410cabd258b1d4741d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 22 10:08:41 2019 -0300

    Bug 22701: Make items prefetchable from Koha::Biblio
    
    This patch makes Koha::Biblio->items use _new_from_dbic instead of
    calling Koha::Items->search. This allows calling it with prefetch
    enabled for the items relationship. No noticeable behaviour change takes
    place besides this.
    
    To test:
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Biblio.t
    => SUCCESS: Tests pass!
    - Apply this patch
    - Run:
     k$ prove t/db_dependent/Koha/Biblio.t
    => SUCCESS: Tests still pass!
    - Sign off :-D
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6416ead3cb5f992146822f7de6b242a814d1a1be
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Apr 20 09:47:43 2019 -0300

    Bug 22701: Unit tests for Koha::Biblio->items
    
    This patch adds tests fr the current items() implementation. The idea is
    to verify no behaviour change takes place after we make it us
    _new_from_dbic instead of calling Koha::Items->search.
    
    To test:
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Biblio.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0a22e3127d90c9d76734b223523e0635b18cb32d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 23 15:49:28 2019 +0100

    Bug 22694: Add Koha::Patron::Category->override_hidden_items
    
    This patch introduces a method to determine for a given category if
    patrons belonging to it override OpacHiddenItems policies.
    
    To test:
    - Apply the patches
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Patron/Category.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Bin Wen <bin.wen@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e3b68414373ee23418a6dc3ce10e859ae8fb66b8
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Apr 12 10:42:30 2019 -0300

    Bug 22694: Unit tests
    
    Signed-off-by: Bin Wen <bin.wen@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0e762da67092e8bd04e37908e9e1419ea16f70e3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Apr 12 13:46:04 2019 -0300

    Bug 22700: Make biblio_metadata prefetchable from Koha::Biblio
    
    This patch makes $biblio->metadata be prefetchable as the Coding
    guidelines require.
    
    A new has_one relationship is added in the Biblio schema, named as the
    accessor to also convey to proposed guidelines for readability.
    
    To test:
    - Apply this patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Biblio.t
    => SUCCESS: No regressions!
    - Sign off :-D
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f76f93ecf191231036c96b17fceccf819247959f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Apr 22 15:05:51 2019 +0000

    Bug 22748: Pass userid to haspermission
    
    Signed-off-by: Agustin Moyano <agustinmoyano@theke.io>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6fa21ef939785c1fd757a4755cd9b12ed09a18a0
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue Apr 23 07:38:14 2019 +0000

    Bug 22755: Fix pod in patron_emailer.pl
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f11bda813695e025a3e0f45463d7f710d82548af
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue Apr 23 07:34:41 2019 +0000

    Bug 22755: Import Koha::Script into patron_emailer cronjob
    
    Test plan:
    Run patron_emailer.pl cronjob to ensure it is not broken after this
    patch
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b639271a615aaf9dce0d6fc2fd0dc7e22e8cf74a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 22 12:02:02 2019 -0300

    Bug 22749: Make Koha::Item->hidden_in_opac respect hidelostitems
    
    This patch makes Koha::Item->hidden_in_opac take hidelostitems into
    account when performing the calculation.
    
    To test:
    - Apply the regression tests patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Item.t
    => FAIL: Tests fail because the code doesn't (yet) care about the
    syspref
    - Apply this patch
    - Run:
     k$ prove t/db_dependent/Koha/Item.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6f4565ce686919ada0bc95ea26497ff80e4df250
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 22 11:54:21 2019 -0300

    Bug 22749: Regression tests for Koha::Item->hidden_in_opac
    
    This patch introduces regression tests for Koha::Item->hidden_in_opac to
    verify it is not considering the hidelostitems syspref when determining
    if an item should be hidden (per policy) in the OPAC.
    
    To test:
    - Apply this patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Item.t
    => FAIL: Tests fail!
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b78bd2faec703bb7d7c750dbc1070ba2449f29a9
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Apr 19 06:49:48 2019 +0000

    Bug 22735: Resolve internal server error on missing item type
    
    Trivial fix, similar to opac-detail, applied to ISBD and MARC detail.
    
    Test plan:
    Enable ArticleRequests pref.
    Make sure you have a biblio with no item type in 942c. (Perhaps you need to
    make 942c not mandatory temporarily and save a biblio record without this
    field being filled.)
    If you are logged in, log out.
    Go to MARC or ISBD detail page. No crash anymore?
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d8a759162cde8f373ea945a7e509102ec81878e0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 23 14:17:58 2019 +0000

    Bug 22679: Delete related CirculationRules when Removing IssuingRule
    
    Unfortunately, the tables here can't use a foreign key as one table uses null where the other uses
    '*' This patchset alters the delete method so delete related rules. It is somewhat of a workaround until
    all the columns in issuingrules are moved to circulation_rules
    
    To test:
    1 - Add some issuing rules in koha, making sure to set maxissueqty
    2 - Check the DB: SELECT * FROM circulation_rules;
    3 - note some circulation rules were created
    4 - Delete your rules via the staff interface
    5 - Check the DB, the circulation rules remain
    6 - Apply patch
    7 - Repeat
    8 - Huzzah! The rules delete!
    9 - Prove the tests, read the code
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d9ce1567937de5fe115ec8595db63b7cfe80d8d6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 23 16:18:51 2019 +0000

    Bug 22759: Fix wrong check of branch rule in C4::Circulation::TooMany
    
    The condition in TooMany applied branch limits only if the rule didn't have a branchcode, this was wrong
    
    To test:
     1 - Find a title in the catalog, add 8 items, all of a single itemtype, 4 for branch A, four for branch B
     2 - Remove any specific circ rules
     3 - Set a default circ rule for the itemtype used above, limiting the max issue quantity to 3
     4 - Find a patron and checkout the items from branch A
     5 - You should be allowed to checkout 3, but the fourth should trigger 'too many'
     6 - Now checkout the items from branch B, again you can checkout 3 and not four
     7 - Apply this patch
     8 - Assuming you have 6 items out now, try one from either branch, you should trigger 'too many' and have 6
     9 - Return two from branch B and one from branch A
    10 - Now you have three items issued total
    11 - An item from either branch should be refused now
    12 - Test with different values of 'CircControl' and confirm your expectations are met
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6d9839d800ac8334a902cba5917b878507f8ba18
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 23 16:17:20 2019 +0000

    Bug 22759: Unit tests
    
    To test:
    1 - Apply only this patch
    2 - prove -v t/db_dependent/Circulation/TooMany.t
    3 - It fails
    4 - Apply second path
    5 - repeat
    6 - All green!
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 22deca9445cb02320a04abb69febc9ef83d4d58f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 18 16:35:03 2019 +0000

    Bug 22501: (follow-up) Use raw filter for course note on details page
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3d840153d1e9736f126b04b96eea4367d096996b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 19 14:51:08 2019 +0000

    Bug 22564: DBRev 18.12.00.060
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7b7a2767c826abcb507a5fe2466ecbdcea6f9d2c
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Apr 19 09:53:53 2019 +0000

    Bug 22564: (QA follow-up) Correct copy-paste message
    
    We should be replacing Rep here ;)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 99cd771b09a6462381001ab98f7d833ca247c439
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 29 13:35:27 2019 +0000

    Bug 22564: Add UI handling for 'Replaced'
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d8dfb61a9099cd9c07b22bf1d5a4cc2a834f2fc6
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 29 12:20:26 2019 +0000

    Bug 22564: Add database update 'just in case'
    
    With the introduction of the 'status' field it's a clear oportunity to
    convert any last remaining instances of 'Rep' to 'L' + 'REPLACED'.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b3de8738b7f8db23c99b588a11da2225bd67106c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 22 15:49:13 2019 +0000

    Bug 22564: Remove references to 'Rep' accounttype
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5e20e438e80465fcd6f1c2af5e6138a639dec5f3
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Wed Mar 6 14:07:50 2019 +0000

    Bug 22464: Pass forward parameters
    
    This patch ensures that parameters that are present are passed forward
    when accepting the copyright notice.
    
    Test plan:
    
    - Clone the latest version of the FreeForm backend from:
      https://github.com/PTFS-Europe/koha-ill-freeform
    - Ensure the ILLModuleCopyrightClearance syspref is populated
    - Create an OpenURL in order to pre-populate the FreeForm form, a suitable URL would be:
    
    <your_koha_instance>/cgi-bin/koha/opac-illrequests.pl?openurl=true&backend=FreeForm&method=create&opac=1&atitle=Theater%20careers.%20%5Belectronic%20resource%5D%20%3A%20a%20realistic%20guide.&aulast=Donahue%2C%20Tim&date=2012&genre=article&isbn=978123123123&issn=1234-5678&issue=34&pages=12-34&sid=EBSCO%3AAthlone%20Institute%20of%20Technology%3Aait.101326&title=article%20title%20here&volume=12
    
    - Log in
    - Accept the copyright notice
    => TEST: Observe that the FreeForm form is pre-filled with the metadata
    supplied in the OpenURL
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 646e9fe3009b38694bc109611506932a3008932b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 7 17:18:00 2018 +0000

    Bug 21783: Reindent admin/columns_settings.tt
    
    This patch reindents admin/columns_settings.tt to use four spaces
    instead of two for indentation, following coding guidelines.
    
    To test, apply the patch and compare the file to master using the -w
    flag to ignore whitespace. The only changes should appear where lines
    were added during indentation.
    
    Go to Admin -> Columns settings and confirm that everything works
    correctly.
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 38d68299ce7405823c50a6a41ac0f5d18b0b9044
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 11 10:32:52 2019 +0100

    Bug 22687: Typo correction for Portuguese manual link
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0bbebced9dd463444cb1d91a60bcf4323e5a721e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Apr 17 11:20:25 2017 -0400

    Bug 16149: Generate and send custom notices based on report output
    
    Ths patch add an EmailReport function to C4::Reports::Guided
    
    It accepts a notice (module, code, branch) and a report and attempts to
    email notices to patron, generating content using report content.
    
    Notice must be in template toolkit syntax, only columns in report are
    available for notice.
    
    To test:
    1 - Specify various options
    2 - Ensure errors are returned if options are incomplete or incorrect
    3 - Pass a report containing 'from' and 'email' and 'borrowernumber'
    columns and ensure message queue populated as expected
    
    Signed-off-by: Jessica Ofsa <jofsa@vt.edu>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f751423d155d25b1ba80b4c429191389b46b6bcb
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 12 17:13:07 2017 -0400

    Bug 16149: Unit tests
    
    To test:
    prove -v t/db_dependent/Reports/Guided.t
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Jessica Ofsa <jofsa@vt.edu>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ac6dc3b2c12cf16464e8676f4e2da6ec99e34e70
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Apr 6 12:42:39 2019 +0000

    Bug 22649: Add itemtype to item search results and CSV file
    
    The itemtype can be searched for in the item search form, but
    it is not displayed in the result list.
    This patch adds the itemtype to the display and the CSV export
    file.
    
    To test:
    - Try different item searches
    - Verify that the itemtype now shows in the result list
    - Export to CSV
    - Verify that the itemtype shows there correctly as well
    
    Signed-off-by: Axel Amghar <axel.amghar@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b969ccbf97c218da2bf6e22ab7773baf36c4fa71
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Mar 12 11:19:35 2019 +0000

    Bug 22174: Add link to help page for API key management
    
    Makes the help link on the API key management page point
    to the proper section in the Koha manual.
    
    To test:
    - Activate RESTOAuth2ClientCredentials system preference
    - Go to any patron account
    - Go to More > Manage API keys
    - Click on the Help link in top right corner
    - Verify that the right section of the Koha manual displays
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 31ace6a9347a8260532f6cc50d55fc36f87f1b44
Author: Frédéric Demians <f.demians@tamil.fr>
Date:   Mon Dec 3 18:02:03 2018 +0100

    Bug 21937: Syspref autoBarcode annual doesn't increment properly barcode
    
    This patch fix the barcode annual builder. The test should pass.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7262bc066784247b12ce7f25c390498086e1d72b
Author: Frédéric Demians <f.demians@tamil.fr>
Date:   Mon Dec 3 18:27:08 2018 +0100

    Bug 21937: Add test to show autoBarcode annual increment bug
    
    This patch show the issue. If the DB contains a barcode (not auto attributed
    by Koha) which begin with the year used to generate automatically a new one,
    there may be a 'collision'.
    
    prove -v t/db_dependent/Barcodes_ValueBuilder.t
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 170085397b23d9b688628a56039f5e485fade6a5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Dec 27 17:07:20 2016 +0000

    Bug 15505: Mark Hold Items 'On hold' instead of 'Available'
    
    This patch adds a 'pending hold' column to C4::Items:GetItemsInfo to
    allow for displaying status of an item when it has been selected for a
    hold by the holdsqueue and AllowItemsOnHoldCheckout is set to 'Don't
    allow'
    
    To test:
    00 - Set AllowItemsOnHoldCheckout to 'Allow'
    01 - Place a hold on an item
    02 - Build the holdsqueue (kohadevbox example below)
          sudo koha-shell kohadev
          perl misc/cronjobs/holds/build_holds_queue.pl
    03 - Search for the item on the OPAC
    04 - Note item shows as 'Available' in results and details
    05 - Toggle AllowItemsOnHOldCheckout to 'Don't allow'
    06 - Repeat search, note there is no change
    06 - Apply Patch
    07 - Search for the item on the OPAC
    08 - Note that item now shows as 'Pending hold'
    09 - Toggle AllowItemsOnHoldCheckout to Allow
    10 - Note item shows as available
    11 - prove -v t/db_dependent/Items.t
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4f14f7c7af13a7ee29c68302bad1ff8ac12c7fdf
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Mar 11 13:18:06 2019 +0000

    Bug 21307: (follow-up) QA fixes
    
    This patch corrects a couple of issues discovered by QA: Removed markup
    copy-and-paste error; Add some CSS to help the responsive behavior of
    the advanced editor controls at smaller browser widths.
    
    To test, apply the patch and open the advanced MARC editor. Test the
    appearance of the page at various browser widths. At narrower widths the
    status bar and search fields should behave well.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b038195735d2e9e64598cf12485aff3c4eeb1948
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Mar 5 14:53:18 2019 +0000

    Bug 21307: (follow-up) Change the way Codemirror height is calculated
    
    This follow-up changes the way the height of the Codemirror editor is
    calculated. Using offset() instead of position() returns the correct
    values with the changed markup.
    
    To test, apply the patch and load the advanced MARC editor. The "status
    bar" should display correctly a the bottom of the editor and there
    should be no double scrollbar.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 44e1cb20649b8b03a0f1036a05b0b7cf5e42c3e1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Mar 11 14:25:27 2019 +0000

    Bug 21307: Switch two-column templates to Bootstrap grid: Cataloging
    
    This patch modifies two cataloging templates to use the Bootstrap grid
    instead of YUI.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Cataloging -> Edit record using the advanced editor
     - Cataloging -> Edit items
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a488c9f4512eafa3d742b3e8204c2ca8cc850987
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Mar 27 13:16:34 2019 +0000

    Bug 22584: Add YAML support for Codemirror
    
    This patch adds the dependencies required to provide YAML syntax
    highlighting in CodeMirror text areas. The OpacHiddenItems system
    preference configuration is updated to use a "text/x-yaml" CodeMirror
    syntax.
    
    To test, apply the patch and go to Administration -> System preferences
    -> OPAC.
    
    Expand the OpacHiddenItems preference and test that YAML-formatted text
    entry has the correct syntax highlighting.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    https://bugs.koha-community.org/show_bug.cgi?id=2700
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7a603d98d14527509fd38eb29ceb360ba0030904
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Apr 12 14:32:46 2019 +0000

    Bug 22697: Reindent catalogue/result.tt
    
    This patch reindents the template for staff client catalogue search
    results. The only non-whitespace changes are comments to help identify
    closing tags and template directives.
    
    To test, apply the patch and perform a catalog search in the staff
    client. The results should look correct.
    
    The diff using the '-w' flag to ignore whitespace should
    highlight only moved lines and added comments.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=22679
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8adb2f8003e25f6fe8cc78506a823a618a837fa1
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Feb 19 01:36:14 2019 +0000

    Bug 22365: Removing warn when accessing Log Viewer
    
    To test:
    Go to Tools -> Log Viewer and confirm the warn no longer shows after
    applying the patch.
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c54c12f53d75598f2b014fb03c14aa2b1d7bb7c5
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Dec 4 15:32:17 2018 +0000

    Bug 21942: Clean up cataloging merge template
    
    This patch makes a few minor markup corrections to the cataloging merge
    template:
    
     - Remove invalid "type" attributes from <style> and <script>
     - Add missing closing </span>
     - Remove obsolete YUI grid markup
    
    To test, apply the patch and test the process of merging records in
    Cataloging. Everything should look correct and work correctly.
    Validating the HTML source should return no errors stemming from the
    template.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 87026c6cad4bd65d7ed643ece830462f0ee95639
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 22 13:26:01 2019 +0000

    Bug 21308: Results from order search do not show the search parameters
    
    This patch modifies the orders search results page so that the search
    form appears in the sidebar. This allows the user to view and re-use
    their search parameters.
    
    This patch also moves the "no search results" message to the top of the
    page in a message box.
    
    To test, apply the patch and go to Acquisitions -> Orders search.
    
     - Perform a search which will return results. In the sidebar you should
       see the full orders search form with your search parameters in the
       form fields.
    
     - Perform a search which will return no results. You should see the
       "Your search returned no results." message in a standard message
       dialog.
    
    Signed-off-by: Bin Wen <bin.wen@inlibro.com>
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 296e0ce224debc9e1541683220df2306e166963f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 18 17:57:51 2019 +0000

    Revert "Bug 15253: Add Koha::Logger based logging for SIP2"
    
    This reverts commit 03c03ed8cdb94cda4cfd661e3b04f97cb36d8dc4.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 97faa17d710ed9e26f23e53a6dfbbd3ba79a3589
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 18 17:57:41 2019 +0000

    Revert "Bug 15253: (follow-up) Fix qa complaints"
    
    This reverts commit 9d80f9dc6b7d87bdf2e1536647a0bc8530465bd7.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6b610497ffba5008f4e2541dc6cb07727ac5a63a
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Dec 19 00:19:07 2018 +0100

    Bug 21545: Translate new ACCOUNT_PAYMENT and ACCOUNT_WRITEOFF notices to German
    
    To test:
    - Apply patch
    - Run the German web installer
    - Verify the sample notices installs without error
    - Verify it looks 'German' in the GUI :)
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bc1a21ec65377c8e7b331b89b45ebcddf9a7e4c7
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Dec 19 00:06:55 2018 +0100

    Bug 21545: Translate 'Stock rotation slip'
    
    Throwing in some capitalization fixes for the English
    version of the notice as well.
    
    To test:
    - Verify the changes make sense and the SQL is still valid
      and executes
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f88923c05a303fc0d458055b1d27a17a775f07d1
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jan 8 10:40:21 2019 -0500

    Bug 19619: Add support for SIP2 field CM ( Hold Pickup Date ) to Koha
    
    The CM field was all set up for implementation, but never completed.
    We should fully implement the CM ( Hold Pickup Date ), which according
    to the SIP2 protocol specification is "The date that the hold expires".
    
    Test Plan:
    1) Set up a waiting hold for an item
    2) Using the sip cli emulator, send an item information request for that item
    3) Note the CM field does not show up
    4) Apply this patch
    5) Restart all the things!
    6) Repeat the item information request
    7) Note the CM field is now transmitted!
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9d80f9dc6b7d87bdf2e1536647a0bc8530465bd7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 18 11:54:07 2019 +0000

    Bug 15253: (follow-up) Fix qa complaints
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 03c03ed8cdb94cda4cfd661e3b04f97cb36d8dc4
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue May 1 11:47:12 2018 +0000

    Bug 15253: Add Koha::Logger based logging for SIP2
    
    Now that we have Koha::Logger, we should use it in our SIP server. This
    has the potential to make debugging SIP issue much easier. We should add
    the userid for the sipuser to the namespace so we can allow for separate
    files per sip user if wanted.
    
    Also modifies the log4perl.conf to lazy-open filehandles to log files,
    so the same config can be used with log-files needing different
    permissions.
    
    Test Plan:
    1) Apply this patch set
    2) Update the modififed log4perl.conf to your system
    3) Restart your sip server
    4) Tail your sip2.log, run some queries
    5) Note you still get the same output messages as before, with the
       addition of the ip address and username ( if available )
       prefixing the message.
    
    Based on original patches by Kyle Hall and additions by Olli-Antti
    Kivilahti.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0bb1e01a0c553c18953be9799329128700e2d42b
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Apr 6 11:25:01 2019 +0000

    Bug 22645: Add 'ISSN' sarch option to OPAC simple search pull down
    
    To test:
    - Apply patch
    - Verify that the ISSN option shows up in the pull down
      for the simple search on top of the OPAC
    - Search for an ISSN with the new search option
    - Verify the correct search result shows
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 729987f40d442fd20c331e7ceec32f2e24486a5a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Apr 11 18:49:13 2019 +0000

    Bug 22175: (follow-up) Identify columns to exclude from export
    
    Bug 21216 added a way to designate DataTables columns to include in
    export operations (Copy, CSV, print, etc). However, this solution did
    not take hidden columns into account. This patch revises the global
    columns configuration settings so that exports will include only visible
    columns and will exclude columns with a "noExport" class on the <th>.
    
    To test, apply the patch and clear your browser cache if necessary.
    
     - Go to Tools -> Stock rotation
     - In the table of rotas, hide some columns in the table and verify that
       export operations include only your visible selections, excluding the
       last column with buttons.
     - Choose a rota and select Manage -> Items. Test that this table works
       in the same way.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8bf043b94d73724244429adfae249d87ca5c8b9c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 25 14:02:01 2019 +0000

    Bug 22175: Make stock rotation table sortable
    
    This patch adds sorting and column configuration to the stock
    rotation tables, both rotas and items. No new defaults for the table are
    defined.
    
    To test, apply the patch and clear your browser cache if necessary.
    
     - Go to Tools -> Stock rotation.
       - In the table of rotas test that sorting works correctly.
       - Test that the "Column visibility" button works to show and hide
         columns. The "actions" column should be excluded.
       - Test that export options (Excel, CSV, etc) exclude the "actions"
         column.
       - Choose a rota with multiple items on it and select manage ->
         items. Repeat the above DataTables functionality tests.
    
     - Go to Administration -> Columns settings and edit the default
       configuration of the stock rotation tables. Confirm that these
       changes are reflected in the corresponding tables.
    
    Signed-off-by: Jose-Mario Monteiro-Santos <jose-mario.monteiro-santos@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6f1459e2cea0b3ea2d14a649bda813cd9dee84ab
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 18 10:51:21 2019 +0000

    Bug 22532: DBRev 18.12.00.059
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 752eba6cfeee809e74cc24bcfa4d95b14e7b9b68
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Mar 18 16:48:51 2019 +0000

    Bug 22532: Database update
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5867683fe9aa91d9284d3554cebff9bbec2fa117
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Mar 18 16:46:00 2019 +0000

    Bug 22532: Remove Z39.50 random
    
    Test plan:
    Try to search, preview and import authority from Z39.50, everything
    should work as expected
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bc3f6a6aac993040e2cf57999bbbebeb1eb5ec9a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 18 10:32:32 2019 +0000

    Bug 22521: (RM follow-up) Adjust tests to use new accounttype
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f8bd40c1a619f530d5d8abc7e82b50b82a7d8db6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 18 10:08:58 2019 +0000

    Bug 22318: DBRev 18.12.00.058
    
    This includes DBRev 18.12.00.057 for bug 13795
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1758c8bc5da3c7d54f7537c80027dae0c369d847
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Apr 8 10:28:38 2019 +0100

    Bug 22318: (QA follow-up) Correct name of atomicupdate
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8011f226975fa4f38586d7e0f2e4ce747bdced2b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Mar 19 13:39:39 2019 +0000

    Bug 22318: (follow-up) Add new options to new table filter form
    
    This patch adds the new language/location options to the form for
    filtering entries in the table of news items. Since this markup is
    duplicated twice in the template, its contents have been moved to a
    BLOCK.
    
    To test, apply the patch and go to Tools -> News. At the top of the
    table of news items the "Display location" form should show all options
    including OpacNavRight for all your enabled languages.
    
    Confirm that location/language selection still works correctly upon
    adding and editing news items.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d6e1c6ffe639c08be9876c9e6f2f3551b3a82cb0
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Feb 14 15:49:25 2019 +0000

    Bug 22318: Example implementation: OpacNavRight system preference
    
    This patch implements a Koha news system replacement of the OpacNavRight
    system preference. The changes to koha-news.tt enable the selection of
    "OpacNavRight" as a location for the content. opac-main.pl is modified
    to ensure that the user's selected language is passed to the template
    for use by the KohaNews plugin.
    
    The database update process takes the contents of Koha's OpacNavRight
    system preference and adds it to the Koha news system. The OpacNavRight
    system preference is then removed from the database.
    
    When the new entry is added to Koha news, the language is set based on
    the top selected language in the "opaclanguages" preference. The entry
    is added to "All libraries" without an author, title, or expiration
    date.
    
    Note that this patch doesn't change the way OPAC news is displayed. I
    think it's best to keep existing markup and code for that since it
    handles details like branch selection and RSS.
    
    To test, apply the patch and run the database update.
    
     - In the staff client go to Tools -> News and confirm that there is now
       an entry with the location "OpacNavRight_en" (assuming an "en"
       English interface).
     - Confirm that the previous contents of OpacNavRight were added
       correctly.
     - Go to Administration -> System preferences -> OPAC and verify that
       the OpacNavRight preference has been removed.
     - In the OPAC, confirm that the correct content is displayed in the
       region previously defined in the OpacNavRight system preference.
     - Test that the language and library-specific nature of news items is
       reflected in the behavior of this content area:
       - Define different text based on language and location. Confirm that
         switching translations and logging in to the OPAC both trigger the
         correct display of different content.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cb83128f62f258ad4bf97896b44fbf0ca65f7b35
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Feb 14 15:46:24 2019 +0000

    Bug 22318: Extend Koha news feature to include other content areas
    
    This patch lays the groundwork for using the Koha news tool to replace
    OPAC system preferences which embed HTML content in the Koha interface.
    This will allow multiple translations of these content blocks to be
    created.
    
    This adds a new template plugin, KohaNews. It has a single subroutine,
    get(), which takes three parameters:
    
     - "location" -- the area of the template where the content will appear.
       This will correspond to the system preference it replaces:
       OpacMainUserBlock, OpacNavRight, etc.
     - "lang" -- the user's currently-selected language.
     - "library" -- the user's home library (if they are logged in)
    
    A new "koha_news_block" block is added to the OPAC templates'
    html_helpers include. The content area is activated in the template
    using this syntax:
    
    [% PROCESS koha_news_block news => KohaNews.get( location =>
    "OpacNavRight", lang => news_lang, library => branchcode ) %]
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0c95e22afe13349b60d134217fce6718bfa9727f
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Apr 10 00:33:48 2019 +0200

    Bug 6730: Rename 'basket' filter to 'basket name' on receive page
    
    This way it's clear that you can search for the name here, but
    not for the number. It also matches the labelling of the
    other filter: Basket group name below.
    
    To test:
    - Receive shipment
    - Enter invoice number and go to receive page
    - Look at the filters on the left
    - Confirm the changed label and that basket name is searched
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cc501af15082f3da329d0557b337dce944626511
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Mar 20 15:29:32 2019 +0000

    Bug 13795: Remove occurences of unused columns in code
    
    These patch removes these two columns from backfill_statstics script
    and from columns.def - this file is used to create description in guided
    reports
    
    Test plan:
    1. Run installer/data/mysql/backfull_statistics.pl
    --> without this patch, there are associatedborrower and usercode errors
    reported
    --> with patch, these two columns are not reported
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c90329fbe5c65c25908001383f24009811104240
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Mar 20 15:26:38 2019 +0000

    Bug 13795: Make database update idempotent
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 074233b9d3732f0282df598a1742a37c8859f24a
Author: Nicole C. Engard <nicole@bywatersolutions.com>
Date:   Tue Feb 2 09:33:46 2016 -0500

    Bug 13795: Delete unused columns from statistics table
    
    The following 2 fields are never used in the statistics table:
    
    associatedborrower
    usercode
    
    This patch removes them.
    
    To test:
    
    * check the database and make sure columns are gone
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e600ae6c4b125ee40ce80346ce15f954a1fa424d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Dec 5 21:05:32 2018 +0000

    Bug 21957: Add a flag to ModBiblio to avoid linking auths if called from linker
    
    To test:
    1 - prove -v t/db_dependent/Biblio.t
    2 - Set BiblioAddsAuthoorities and AutoCreateAuthorities
    3 - Modify a biblio to add a heading with no existing auth record
    4 - Ensure the record was created on saving
    5 - Ensure that editing works as normal otherwise
    6 - Run link_bibs_to_authorities
    7 - Ensure results are as expected
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d9cefbdd19c35ae83d0ffa59ca99aaf4bc775cac
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 18 10:00:48 2019 +0000

    Bug 8701: DBRev 18.12.00.056
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e8011cadddeedd594ba7fbbf90a49ce1822afa18
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Mar 16 13:19:11 2019 +0100

    Bug 8701: Remove links to OpacHiddenItems.txt in favor of wiki page
    
    Removes the OpacHiddenItems.txt file from Koha as this is not
    accessible for most people and replaces it with links to the wiki
    page like it's already done from the system preference editor.
    
    For reporting and the initial patch
    Thanks-to: Jane Sandberg <sandbej@linnbenton.edu>
    
    To test:
    - Changes are invisible from the GUI
    - Apply patch and run database update
    - SELECT * FROM systempreferences WHERE variable = "OpacHiddenItems";
    - Verify the description has the wiki link
    - Verify that docs/opac/OpacHiddenItems.txt has been removed
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 086a0007d2d484ecbd6ae6d60317ed4f0d3434b1
Author: Kris Sinnaeve <kris.sinnaeve@etf.edu>
Date:   Tue Apr 16 21:37:17 2019 +0000

    Bug 22139: Fields of ACCTDETAILS email not populating
    
    To test:
    * Make sure AutoEmailOpacUser is set to "send"
    * Create a new patron with a username and password, and an email address
    * In Kohadevbox, check the mail (usually you can type "mail" and go down
    to the last message) - these do not go into the message queue and they
    are processed immediately.
    notice that the email does not have
    <<borrowers.title>> <<borrowers.firstname>> <<borrowers.surname>>
    
    Apply this patch, restart the things, retest as above.
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c9fa30a55b585b3351ece9c3f789fd18d9807fac
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Apr 10 14:39:40 2019 +0100

    Bug 22461: Clarify and correct the hash reduction
    
    There were a couple of bugs in the previous patch which meant it wasn't
    working as intended. This patch corrects those bugs and simplifies the
    code a little along the way.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4e40784f99f883a4f2634ed938764221d818096c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 21 14:05:49 2019 -0300

    Bug 22461: Filter ldap mapping before inserting patron's info
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d482c7b27257f5a63425633a17efed0747c317a1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 15 20:16:41 2019 -0300

    Bug 22461: Fix LDAP user replication
    
    From bug 20287:
    -        $borrowernumber = C4::Members::AddMember(%borrower) or die "AddMember failed";
    +        Koha::Patron->new( \%borrower )->store;
             C4::Members::Messaging::SetMessagingPreferencesFromDefaults( { borrowernumber => $borrowernumber, categorycode => $borrower{'categorycode'} } );
    
    $borrowernumber is not updated with the value of the newly created patron
    
    This patch restores the previous behavior (as well as the die)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2d54c95e902c9111eb812d1b48dc0bb8df824f75
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Apr 17 14:34:24 2019 -0300

    Bug 21336: Add borrowers.flgAnonymized in an explicit position
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit da8ca6c865e65bfe0d078e39324951ab1f7ed838
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Apr 17 14:31:27 2019 -0300

    Bug 21336: Fix the API
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 75cdd63608596b02729d83f369eee8699eacb524
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Apr 17 17:01:10 2019 +0000

    Bug 22521: DBRev 18.12.00.055
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fa922322037ab1ce476aaa65984c66ef78bd3b9e
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Apr 11 15:11:45 2019 -0400

    Bug 22521: (QA follow-up) Update number of tests in Circulation.t
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 37606f8b44ae1d680a32e83458df5601b94efb33
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Apr 12 09:36:22 2019 +0100

    Bug 22521: (QA follow-up) remove FFOR from display
    
    A rebase re-introduced the FFOR accounttype in the display list.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 855ecd9f6ed57c643c983d738816fb3dfa1fbdef
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 29 10:04:46 2019 +0000

    Bug 22521: (QA follow-up) Update 'Offsets' test
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a6ba3bcc0d63784296d73a292780a994c2d09070
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Mar 27 11:39:30 2019 +0000

    Bug 22521: (QA follow-up) Corrections to tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7c3ffa816b7e323d31b2fdac03198021a16fd4e3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 22 11:46:36 2019 +0000

    Bug 22521: Update existing accounttypes
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5cad2946ae3ec52daf425118ffb35787160da417
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 29 14:31:22 2019 +0000

    Bug 22521: Update UI to use accountlines.status
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dc62187ebff139fe93ac1c404105ac4abf2741b5
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 29 14:31:06 2019 +0000

    Bug 22521: Update fines handling to use accountline.status
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c12433a336ad20de1a53239b7aebf121e6a49878
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Mar 19 14:24:35 2019 +0000

    Bug 22521: Increase varchar size for accounttype
    
    accountlines.accounttype is currently a short varchar(5) field for to
    store accounttype codes. Koha is moving towards more descriptive codes
    which require a larger capacity varchar(16).
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3004bbb6f7430524aaca6c62c584f2b0b16ad89d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Apr 9 13:47:35 2019 -0300

    Bug 22547: (QA follow-up) Warn in debug mode
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 97a680cc24b96e11e71da2e6fcc2bf6a239c7a00
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Mar 20 11:46:38 2019 +0000

    Bug 22547: Add tests for C4::Overdues->UpdateFine
    
    Add tests for UpdateFine, in particular testing the functionality of
    MaxFine.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ec6b3d18348189461b3d7587cb055394962255b6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Apr 17 12:22:45 2019 +0000

    Bug 20128: DBRev 18.12.00.054
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 92b329b22393ec802cabc2e048d7eebfecdcf9cf
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Apr 10 21:38:57 2019 +0000

    Bug 20128: Add new permission for new installations
    
    Change was missing from userpermissions.sql
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4c01891613f68d5eecc9d971717d2a439be041bb
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 21 10:16:34 2019 +0000

    Bug 20128: (QA follow-up) Corrections to haspermission
    
    The haspermission routine wrongly assumed that get_user_subpermissions
    would return a list of all subpermissions if the user had the top level
    permission, but instead if just returns 1.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8f8367c728112178d4831a9776c55d58eb7ef22b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 13 05:23:21 2019 +0000

    Bug 20128: Problem when checking individual perms where borrower has top level
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a2b057758d83c3530c38ced02921c82185f3251f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 6 12:21:38 2019 -0500

    Bug 20128: Add permission for advanced cataloging editor
    
    To test:
    1 - Have a borrower with edit_catalogue permission and one with
    editcatalogue top level
    2 - Confirm they can both access the advanced editor from the
    'Cataloguing' home page or from the basic editor
    3 - Apply patch
    4 - Update database
    5 - Confirm borrower with 'edit_catalogue' has 'advanced_editor'
    permission
    6 - Confirm borrowers can access advanced editor as above
    7 - Remove 'advanced_editor' permission from borrower
    8 - Ensure they cannot access the advanced editor
    9 - Ensure links to 'Edit record' from search results go to basic editor
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 313ad660e7ae28fb3f9036839b2cb773494c4af0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Apr 17 12:17:35 2019 +0000

    Bug 17171: DBRev 18.12.00.053
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 374527c1cb34788dc29eed2ef7a4fa52c7989052
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Apr 10 22:43:53 2019 +0000

    Bug 17171: (QA follow-up) Remove cardnumber template variable
    
    The INCLUDE already takes care of displaying the cardnumber, the
    extra variable is not needed.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5ed025a73f6c7c8d7ab859a2bad97a60e8c3986d
Author: Liz Rea <wizzyrea@gmail.com>
Date:   Mon Apr 1 19:38:17 2019 +0000

    Bug 17171: (QA follow-up) Using patron-title.inc for names
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 79ebbffd26b04222831f3b734c4f44d69d199a0b
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Tue Mar 27 10:11:27 2018 -0400

    Bug 17171: (QA follow-up) Add message to batch checkout template
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cd082782d1b42765d2ef1094a7e52f792ae75980
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Sun Jun 11 09:10:17 2017 +0000

    Bug 17171: Add a syspref to allow currently issued items to be issued to a new patron without staff confirmation
    
    Some libraries don't want to force the librarians to manually confirm
    each checkout when the item is checked out to another. Instead, they
    would prefer to be alerted after the fact.
    
    Test Plan:
    1) Apply this patch
    2) Run updatedatabase.pl
    3) Enable the new syspref AutoReturnCheckedOutItems
    4) Check an item out to a patron
    5) Check the same item out to another patron
    6) Note you are not prompted to confirm the checkout,
       but are instead alerted that is had been checked out to another patron!
    
    Signed-off-by: Christopher Brannon <cbrannon@cdalibrary.org>
    Signed-off-by: BWS Sandboxes <ByWaterSandboxes@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9ebdfb1ed1ff1c7a110dc7a7718bb17cd231f66f
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Apr 10 01:15:30 2019 +0200

    Bug 22580: Remove deprecated delete_expired_opac_registrations.pl cronjob
    
    Removes the deprecated script and changes the hint on the
    PatronSelfRegistrationExpireTemporaryAccountsDelay sytem preference.
    
    To test:
    - Make sure the script misc/cronjobs/delete_expired_opac_registrations.pl
      was deleted
    - Make sure the hint on the PatronSelfRegistrationExpireTemporaryAccountsDelay
      system preference is correct
    - Make sure there are no other reference to the removed script
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0393f053b08b316f4da174559b6f44f5a8b20e3b
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Wed Mar 20 00:16:05 2019 -0300

    Bug 22538: Add a noticeable alert about waiting holds
    
    In SCO, bug 21772 introduced holds information, but it lacked the
    capability to attract atention when any of those holds was in waiting
    status. Because SCO and opac-user uses the same include file for holds
    table, this bug applies to both modules.
    
    To test:
    1) Have a patron with holds in waiting status and pending status.
    2) Enable SCO module.
    3) Holds tab label contains holds count, but doesn't inform that there
       is something that requires attention.
    5) Holds tab content has no visual aid to recognize without reading
       effort which holds are in waiting status.
    6) Apply this patch
       => SUCCESS: Holds tab label has a visual aid to indicate that
          something requires attention, and in
          holds table it's easy to recognize waiting holds without reading
          effort.
    7) Sign off
    
    Sponsored-by: Theke Solutions
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4605d76a73f9b13ba3b0259e3f480fb396051309
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Mar 6 19:59:53 2019 +0000

    Bug 3766: Cities/Towns only on one address
    
    This patch ties the alternate address and alternate contact address
    fields in the patron entry form to the cities and towns data. This
    provides a dropdown of predefined city data to these address fields.
    
    To test, apply the patch and edit a patron record.
    
    Test city selection for all three address fields: Main address,
    alternate address, and alternate contact. Confirm that city selection
    works correctly and that your changes are saved correctly.
    
    Perform these tests with all AddressFormat options: French, German, and
    US.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 693bbc76e736f048c4c16e7a5664f3494db287c0
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Mar 26 13:51:47 2019 +0000

    Bug 11969: Show patrons star rating on their reading history
    
    This patch adds display of a user's ratings to their reading history in
    the OPAC.
    
    Also changed: Removed obsolete "border" attribute from the template, and
    removed obsolete JavaScript include from opac-results.tt
    
    To test, apply the patch and rebuild the OPAC CSS. OpacStarRatings
    should be set to all (results and details).
    
     - Log in to the OPAC as a user with a reading history and titles in
       that history which have ratings.
     - Under the "your reading history" tab, your ratings should show under
       rated titles with the date of the rating.
     - Test also with OpacStarRatings set to a value other than "all."
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    Star ratings are displayed in Reading History with OpacStarRatings
    enabled, and are not displayed when OpacStarRatings is disabled, as
    expected.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 21e9b55c2c9c2b72b9901233ea9263b5f5edfa5f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Apr 17 11:42:05 2019 +0000

    Bug 22311: DBRev 18.12.00.052
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2a59d22b894aa4d932d021eddf64b2a24c1b8e0c
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Feb 22 08:00:33 2019 -0500

    Bug 22311: Add a SysPref to allow adding content to the #moresearches div in the opac
    
    The idea of this development would be to match the syspref 'OPACSearchForTitleIn' but
    for populating the search headers (#moresearches) on the opac page to allow staff to
    easily add links without jQuery.
    
    Test Plan:
    1) Apply this patch
    2) Run updatedatabase.pl
    3) Update the new OpacMoreSearches system preference to include the following line:
        <li><a href="https://duckduckgo.com/">Duck Duck Go</a></li>
    4) Browse to the OPAC
    5) Note your new link displays in the "moresearches" area of the OPAC.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 78d35a2e44a3eeb303bdc81c66645d5d0412f54d
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Apr 8 10:47:03 2019 +0000

    Bug 22372: (QA follow-up) Change 'Available location' to 'Shelving location'
    
    Make terminology more consistent with other places in Koha.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e0f83eb4b68a53f8de87c82a2e48628c71e20f88
Author: Matthias Meusburger <matthias.meusburger@biblibre.com>
Date:   Tue Feb 12 15:33:33 2019 +0100

    Bug 22372: Add available location to Holds awaiting pickup
    
    Test plan:
     - Go to Circulation, Holds awaiting pickup (circ/waitingreserves.pl)
     - Note the additional column for available location.
    
    Signed-off-by: Jose-Mario Monteiro-Santos <jose-mario.monteiro-santos@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b31d314613994da218740b735139af70f009fca8
Author: Bernardo González Kriegel <gonzalez@di.unc.edu.ar>
Date:   Wed Nov 28 13:14:21 2018 -0300

    Bug 21899: Update MARC21 frameworks to Update 27 (November 2018)
    
    This bug updates MARC21 english frameworks to Update 27
    
    Bibliographic
    -------------
     * New fields 251, 341 and 532 with corresponding subfields
     * New subfields 041$p, 041$q and 041$r
     * Renamed subfield 041$j
    
    Authorities
    -----------
     * New subfield 055$2
    
    To test:
    1) Remove all your frameworks
    2) Check mandatory bibliographic and authority files load without problem
    3) Check new fields/subfields
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3f7e19ea7a054d55ccd0b8d74339cf6644bebfd0
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Apr 8 06:03:42 2019 +0000

    Bug 22656: Fix charts in reports
    
    This reverts a change on Create chart button in report toolbar made by
    bug 22023
    
    1) Confirm the bug
        a) Create some SQL report
        b) Run it and click on "Show chart settings" button
        c) There is no modal  or other way to actually draw the chart
    
    2) Apply the patch
    3) Go through 1) again - the modal and chart should work
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8153c73c6b3a8a8855091004e6a586d8b2de0e9d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Apr 17 11:21:07 2019 +0000

    Bug 21943: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 47111d993dd6308365732ad63e5cdc90823151ee
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Mar 11 13:41:49 2019 +0000

    Bug 21943: (follow-up) Fix float error with sidebar menu
    
    This patch makes a minor change to the staff client CSS to fix a float
    clearing problem when the <main> element contains only a floated element
    like <fieldset>. It is a global change, but shouldn't cause unwanted
    effects because a non-clearing <main> isn't used in any
    float-dependent layouts.
    
    To test, apply the patch and regenerate the staff client CSS. View the
    place hold screen and confirm that the sidebar menu looks correct at
    narrower browser widths.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fb192699859aa124a827ceac27a9b1776d9629b3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Dec 4 16:27:00 2018 +0000

    Bug 21943: Clean up holds template
    
    This patch makes a few markup corrections to the holds template in the
    staff client: Replace some YUI markup with Bootstrap; Replace invalid
    "alt" attributes with "title."
    
    To test, apply the patch and test the process of placing a hold, both
    single and multiple holds. At each step of the process the page should
    look correct and adjust well at various browser widths.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 81d3e415a9d87c7b6253a7ddb84efb6432715145
Author: Liz Rea <wizzyrea@gmail.com>
Date:   Fri Mar 29 16:31:14 2019 +0000

    Bug 22616: Updating error text messages
    
    To test:
    
    Apply this patch
    Go to a borrower that doesn't exist, check that the error message is
    displayed and looks correct. (i.e. http://127.0.0.1:8081/cgi-bin/koha/members/moremember.pl?borrowernumber=9999999999999999)
    Go to an item, subscription, biblio that don't exist, check that the
    error message is correct and the links work
    Go to a borrower that the logged in user doesn't have permission to see, check that the error message is correct and the links work.
    
    Signed-off-by: Bin Wen <bin.wen@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 47df429cc6b4a643e678391e95ec475dbe4b89c1
Author: Liz Rea <wizzyrea@gmail.com>
Date:   Thu Mar 21 17:59:59 2019 +0000

    Bug 22576: OPAC password text refresh
    
    To test:
    
    Create a patron with a username and password
    Make sure that password resets on OPAC are allowed in your system
    preferences (OpacPasswordChange -> Allow)
    Log into the OPAC with this patron
    Click the "Change password" tab
    Change the password - notice that the button to submit the changes says
    "Submit Changes" and also that the success page says "Return to my
    record"
    Apply this patch
    Reset the password again, noticing that the button to submit the new
    password says "Change password" and the success page says "Return to my
    account"
    
    Signed-off-by: Marie-Luce Laflamme <marie-luce.laflamme@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6f9341a7f79fd913669ee870a7f243f74d52498f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Apr 17 11:15:22 2019 +0000

    Bug 21336: DBRev 18.12.00.051
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d86f17e6b86fe2c94a6b27488f06598122cd120d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 4 09:42:38 2019 +0100

    Bug 21336: (QA follow-up) Add tests for administrative lockout
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5e1894c94813f10efa0c0d0454958ce19b890742
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Mar 29 08:30:06 2019 +0000

    Bug 21336: (QA follow-up) Add column_exists in db revision
    
    As requested by Josef on comment70.
    
    Test plan:
    Run db revision twice. No warnings.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit af84af7cb7cd7ade4054ad155963db4d1ecd6272
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Dec 17 09:15:29 2018 +0100

    Bug 21336: (follow-up) Handle strict SQL mode in _anonymize_column
    
    When a field is not nullable we should pass empty string, zero or today
    to a char, numeric or date column.
    The mandatory parameter does not refer to a database constraint but a Koha
    preference. Only for strings we generate a random value.
    
    Test plan:
    Enable strict_sql_modes.
    Run t/db_dependent/Koha/Patrons.t again.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 23db9b1d67ee9bf1927bfd7f11da46886d51999b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Oct 26 12:21:13 2018 +0200

    Bug 21336: (follow-up) Fix last line after PatronRemovalDelay in pref file
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2ca2585b1c5b61024351c32d84e605f61d04a418
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Sep 12 14:25:26 2018 +0200

    Bug 21336: Adjust cleanup_database.pl
    
    Add the new Patron routines to this cron job. Actions are performed only if
    preferences are set.
    
    Note: No specific command line flags for these actions are added here
    (and probably not needed too). So no crontab changes too.
    
    Test plan:
    Add a new patron.
    Enable GDPR_Policy and refuse consent on OPAC for this patron.
    Set only the first delay to zero (0) for immediate action.
    Run cleanup_database.pl --logs (or any other flag) for the first time.
    Check lock and expiration.
    Set the second delay to zero (0) for immediate action.
    Run cleanup_database.pl --logs for the second time. Check anonymization.
    Set the third delay to zero (0) for immediate action.
    Run cleanup_database.pl --logs for the third time. Check removal.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Amended: Added the warn $@ line in cleanup_database.pl
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f7f5f167e5736a1e40b59058fb4a99f96daaea42
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Sep 12 14:25:26 2018 +0200

    Bug 21336: Search, lock and anonymize methods
    
    Add Koha::Patron->lock and anonymize.
    Add Koha::Patrons methods search_unsubscribed, search_anonymize_candidates
    and search_anonymized. And wrappers for lock and anonymize.
    Add unit tests.
    
    Test plan:
    Run t/db_dependent/Koha/Patrons.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0611621ed082a2463b8a15d61273b5720c9db31c
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Oct 3 15:36:46 2018 +0200

    Bug 21336: Introduce administrative lockout
    
    As a preparation for Koha::Patron->lock, we add the concept of administrative
    lockout. The account is locked just as it would have been by too much
    failed login attempts.
    This is handled by a negative value in borrowers.login_attempts.
    
    Test plan:
    Run t/db_dependent/Auth.t
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 71f17b35ee8023967e671ca9203d5d5b62aa2931
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Oct 1 14:46:15 2018 +0200

    Bug 21336: Do not increase login_attempts after locking
    
    If an account has been locked, there is no use to keep increasing this
    number. It is not true too; after the pref number has been reached,
    we can not really speak of login attempts anymore. The credentials are
    just ignored.
    
    Adding a dbrev to put existing values in line. And a simple test in
    Auth.t to confirm that login_attempts stop increasing.
    
    Note: It feels safe to keep the '>=' condition in account_locked. But it
    could obviously be changed to '=='. (Added a test for that.)
    
    Note: Adding a mock_preference in Auth.t too for GDPR_Policy. Since not all
    tests will pass when the pref is enabled (though disabled by default).
    
    Test plan:
    Run dbrev with updatedatabase.pl.
    Run t/db_dependent/Koha/Patrons.t
    Run t/db_dependent/Auth.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 37460d924eef0383e55ef8078944354a9d500e9a
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Sep 20 12:48:10 2018 +0200

    Bug 21336: Database update for new prefs
    
    This patch adds three new prefs:
    - UnsubscribeReflectionDelay
    - PatronAnonymizeDelay
    - PatronRemovalDelay
    
    Test plan:
    Run upgrade.
    Check patrons pref page. Look under Privacy.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3b62cbb17bc062c2bb4801eb30460b5f82a171c0
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Sep 19 16:56:16 2018 +0200

    Bug 21336: Database revision for borrowers.flgAnonymized
    
    This new flag should speak for itself ;)
    
    Test plan:
    Run installer or updatedatabase.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4b3eb99ad6cd9fc8e9bac6627c38bd16600aa38a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Apr 16 16:34:13 2019 +0000

    Bug 22716: Use gender-neutral pronouns in system preference descriptions
    
    This patch makes a few corrections to the .pref files which provide
    descriptions for system preferences. Language like "him or her" is
    replaced with "they/them" pronouns.
    
    To test, apply the patch and check the following preferences:
    
     - OPACFineNoRenewalsBlockAutoRenew
     - ExpireReservesMaxPickUpDelayCharge
     - PatronSelfRegistrationVerifyByEmail
    
    Signed-off-by: Lisette <lisettes@latahlibrary.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b107d5029ed25cc26d16edb5c571ace749b46ccb
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Apr 17 10:31:03 2019 +0000

    Bug 22274: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e37dd514ad08f390a884752d84e457fa74bf208f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Apr 11 15:12:30 2019 +0000

    Bug 22274: (follow-up) Use one CSS file for SCO and SCI
    
    This patch makes the self-checkin CSS created in Bug 22638 the CSS for
    self-checkout as well. The interfaces have the same requirements.
    
    This patch also replaces some old image-based icons with Font Awesome
    icons.
    
    To test, apply the patch and rebuild the OPAC CSS. Clear your browser
    cache if necessary.
    
     - Enable both self checkout (WebBasedSelfCheck) and self checkin
       (SelfCheckInModule).
     - Test both interfaces, confirming that the style is consistent for
       each and looks correct.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 03deaadd31cfcb282c1210456a9429a8e41669a4
Author: Claire Gravely <claire.gravely@bsz-bw.de>
Date:   Wed Apr 3 13:01:21 2019 +0000

    Bug 22274: Self-checkout/checkin pages not covered by OPAC CSS changes
    
    This patch updates the Self-checkout pages to match the new OPAC style.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 93d130f357f77e5e8f8756642f422a2b12164d04
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Apr 11 13:50:12 2019 +0000

    Bug 22638: (follow-up) Convert SCI CSS to SCSS
    
    This patch makes a number of follow-up changes, including:
    
     - Covert remaining icons to Font Awesome
     - Convert CSS to SCSS
     - Move SCSS which is common to both the OPAC and SCI into separate
       files to be including in each during compilation.
     - Make minor correction to opac.scss to fix SCSS build warning
    
    To test, apply the patch and rebuild the OPAC CSS. Clear your browser
    cache if necessary.
    
    - Enable the self checkin module using using the SelfCheckInModule
      system preference.
    - Open the self checkin interface and test the checkin process.
      Everything should look correct.
      - After submitting barcodes for checkin, the "Finish" button should
        show a Font Awesome icon instead of an image icon.
    - Enable multiple translations and set the OpacLangSelectorMode
      preference to show the language menu in the footer.
    - Confirm that the language menu looks correct.
    - View the regular OPAC to make sure the changes to opac.scss didn't
      result in unintended changes to the interface.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fa64402384fa198ecafa5c54abc5a83b8ce42de3
Author: Claire Gravely <claire.gravely@bsz-bw.de>
Date:   Thu Apr 4 07:27:45 2019 +0000

    Bug 22638: Self checkin CSS update
    
    This patch updates the Self-Checkin CSS to match tne new OPAC design.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2a9b9a526bb3e1c73e09cbee499a2debcab74ee5
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Apr 14 03:13:01 2019 +0000

    Bug 21172: Remove obsolete framework parameter from GetMarcFromKohaField
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f3afec0587f4baeff580e153ea592020d4d36be3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Aug 7 17:06:41 2018 -0300

    Bug 21172: Remove warning from addbiblio.pl
    
    Argument "01e" isn't numeric in numeric ne (!=) at
    /home/vagrant/kohaclone/cataloguing/addbiblio.pl line 507.
    
    A tagfield can be 01e and so raise a warning is compared with == or !=
    
    This patch also fixes few inconsistencies:
    - tagfield for items.itemnumber must be retrieved with GetMarcFromKohaField
    (to support other marcflavours)
    - do not use $_
    - loop only once on $usedTagsLib
    
    Test plan:
    For devs only, read the code and confirm the changes make sense.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4177d2e32942b16e65748852df881541406297bd
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Apr 17 10:11:04 2019 +0000

    Bug 22044: DBRev 18.12.00.048
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f6e143c73c9ba7f6b1daf76d592dc7a56e8694bb
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Apr 14 04:26:29 2019 +0000

    Bug 22044: Fix sysprefs.sql description to use circ column description
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a3a3bf2dda3219b3385b587585985c51f6cc8498
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Apr 15 13:32:12 2019 +0000

    Bug 22044: Correct syspref name
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4779cf845077ffd7f564b63b22f72ba99aa812ff
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Dec 21 19:19:05 2018 +0000

    Bug 22044: Set default and add NoRenewalBeforePrecision preference for new/affected installs
    
    I am not sure the correct answer - for upgraded installs the pref was
    set to date, which changed behaviour
    
    For new installs the pref was unset, behaved as if 'exact_time' so we
    shouldn't change behaviour?
    
    If the perceived default is date then the code should be changed, or
    this shouldn't be a pref at all?
    
    To test:
    1 - Have a new system missing this pref
    2 - Note when searchign the pref in staff client if appears as 'date'
    3 - Check the db to confirm value is 'NULL'
    4 - Apply patch and run update
    5 - Pref is now set to 'exact_time'
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9f34d208d08fc89d2d0b4d3718fc43e3f32ff055
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Apr 12 23:04:06 2019 +0000

    Bug 22702: circulation note on patron page should allow for HTML tags
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fc6b7e5c3e101e0c5935f34c45b72cf3fd4f1bb7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 16 13:14:17 2019 +0000

    Bug 14457: DBRev 18.12.00.047
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8e77287b9b2453fc29980d57154030c52cc62a07
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Apr 3 21:20:40 2019 +0000

    Bug 14457: (QA follow-up) Fix POD
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a8e95a189f8842797395469680f686fba16fdca3
Author: Björn Nylén <bjorn.nylen@ub.lu.se>
Date:   Wed Mar 13 12:28:55 2019 +0100

    Bug 14457: (QA follow-up) Fix QA script complaints and amend system preference text
    
    Pod coverage for 'NAME'.
    Moved sysprefs in order and moved semicolon to last line.
    Replaced tab indentation with spaces.
    Added "Swedish service for spellchecking" to the syspref description.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8465b60a8e63ce53bf8225616fffe53b89e8c7b4
Author: Chris Cormack <chrisc@catalyst.net.nz>
Date:   Thu Sep 29 21:47:52 2016 +0000

    Bug 14457: (follow-up) Add syspref for Libris API URL
    
    Added another syspref for the url of the Libris API
    Added sysprefs to syspref.sql
    
    Please test the 2 patches together
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 37970eead1d265b6123f370afd87ac189d4e5e51
Author: Eivin Giske Skaaren <eskaaren@yahoo.no>
Date:   Mon Jul 6 21:46:49 2015 +0000

    Bug 14457: Integrate LIBRIS spellchecking
    
    This patch makes it possible to configure LIBRIS spellchecker as a
    "did you mean" feature. When searching for a word or phrase and misspelling
    the query will be sent to LIBRIS and if they have a suggestion it will
    be shown in the yellow did you mean box in the results page.
    
    The API is not very quick so this type of implementation was chosen to not
    disrupt the real-time feeling of the search.
    
    To test:
    
    1. Apply the patch.
    2. Go to http://api.libris.kb.se/bibspell/, enter the koha servers IP and click
    on the "Generera nyckel" button.
    3. Under "Nyckel" you can copy the value that looks like this: E47B44829E265607274B677BC17B8D78,
    and enter it into the LibrisKey syspref (cgi-bin/koha/admin/preferences.pl?tab=searching).
    4. In cgi-bin/koha/admin/didyoumean.pl check the box for using the LIBRIS API. It is only implemented for OPAC.
    5. Perform some searches:
    tset - Did you mean should suggest: test
    jeg är på smester - suggestion: jag är på semester
    dantes inferna - suggestion: dantes inferno
    
    Restored opac-search.pl
    
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Seems to work, of course I can't tell if it is giving me accurate
    suggestions :)
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b74be6724b4b25c73b1e6f22d0ba270b50af755c
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Thu Mar 28 08:53:46 2019 +0000

    Bug 22588: (follow-up) Simplify getting accounts even more
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6d6aa48f6adbb8c60f44dde6c6bb8fbf9afdbf8b
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Mar 27 08:27:13 2019 +0000

    Bug 22588: Simplify getting fines information in opac and selfcheckout
    
    Test plan:
    0) Have patron with some fines and credits
    1) Go to opac and log in
    2) Go to 'your summary' page and confirm it shows the right amount and
    description for both, credit and debit
    3) Go to 'your fines' page and confirm it show right information
    4) Go to self checkout page and confirm the fines are right here
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2d7eba5be3f99d33533de4f32a88cca4de94b755
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Mar 26 16:34:34 2019 +0000

    Bug 22698: Fix incorrect button classes
    
    This patch builds on Bug 22023 in making further corrections to toolbar
    button classes.
    
    To test, apply the patch and view the following pages to confirm that
    toolbar buttons are consistent:
    
    - Acquisitions -> Vendor -> View basket.
    - Administration -> Additional fields -> Select a table.
    - Administration -> Audio alerts.
    - Catalog -> Advanced search -> More/fewer options link
    - Cataloging -> Edit record -> Advanced editor -> Advanced search.
    - Cataloging -> Edit record -> Advanced editor -> Macros.
    - Cataloging -> Edit record -> MARC21 008 value builder.
    - Cataloging -> Search results.
    - Circulation -> Checkout notes.
    - Circulation: Sticky due date clear button, view restrictions, override
       restrictions temporarily, add message, delete message
    - Course reserves: Toolbar buttons on that page and the course reserve
       detail page.
    - ILL requests -> View ILL requests. The "New ILL request" and "List
       requests" button.
    - Lists and Lists -> View list.
    - Patrons -> Search -> Merge patrons.
    - Patrons -> View patron -> "Edit" button on patron image (patronimages
       must be enabled).
    - Patrons -> View patron -> "More" menu -> Manage API keys.
    - Patrons -> View patron -> "More" menu -> Set permissions.
    - Patrons -> View patron -> Delete circulation message link.
    - Patrons -> View patron -> Edit patron.
    - Patrons -> View patron -> Housebound.
    - Reports -> Dictionary.
    - Serials -> Numbering patterns.
    - Serials -> Subscription -> Receive.
    - Tools -> Labels -> Manage -> Label batches: Export selected.
    - Tools -> Patron card creator -> Manage -> Card batches -> Edit batch.
    - Tools -> Patron card creator. The "New" and "Manage" buttons.
    - Tools -> Patron clubs.
    - Tools -> Quote editor -> Import quotes.
    - Tools -> Rotating collections. Toolbar buttons on that page and the
       collection view page.
    - Tools -> Tags.
    - Tools -> Upload local cover image.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 44a39929afc60ddda3182a93197ced098044a12d
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Apr 4 01:36:47 2019 +0000

    Bug 22154: Fix search for Braille from Advanced search page
    
    When you do an advanced search and choose the Format subtype
    Braille, it looks for l-format:fk, but that is not the right
    code for Braille.
    
    fk does not exist. It should be fb for Tactile material/Braille
    OR tc for Text/Braille
    
    To test:
    0) Catalog 2 records, one with 007 tc and another with fb
       Use value builder to verify both are for Braille.
    1) In Administration > System preferences, make sure 'Subtypes'
       is checked in either OpacAdvSearchMoreOptions or OpacAdvSearchOptions
    2) Go to Advanced search
    3) If necessary, click on 'More options'
    4) In the 'Subtype limits' section, choose 'Braille' from the 'Format'
       drop-down menu
    5) Click on 'Search'
    6) Verify both records were found
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9df6a7d14f3dd869c00e514d7c3c45238aaaccc0
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Apr 12 11:51:52 2019 +0200

    Bug 21975: (follow-up) avoid undef in eq
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d4f133b0c03a0ef71ba689cea9abbea0a5149b80
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Apr 12 11:42:39 2019 +0200

    Bug 21975: (follow-up) get item datas from previous SQL query
    
    Forced by removal of C4::Items::GetItem from Bug 21206
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3a3ffbc54b8dec8ee63332417fe2732ee93f3034
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Dec 7 16:05:52 2018 +0100

    Bug 21975: Avoid unnecessary substitutions in automatic item modification by age
    
    Automatic item modification by age cronjob is based on rules with conditions and substitutions.
    When substitution value is equal to actual item value, the code should not call C4::Items::ModItem. It adds unnecessary action log and entry in zebraqueue.
    With a rule than can impact all catalogue you can explode your database with action logs.
    
    Test plan :
    1) Run prove t/db_dependent/Items/AutomaticItemModificationByAge.t
    2) Define a item modification by age with no condition
    3) Run several times misc/cronjobs/automatic_item_modification_by_age.pl
    4) Check it creates only one entry in action_logs and zebraqueue
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0be8fd212067ebd4b36e00b4d139761aa0e021c3
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Dec 7 15:21:48 2018 +0100

    Bug 21975: add Unit Test
    
    Added missing transaction rollback
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 003b70b697f9c57da8bfb0aca1223c867a07ac97
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Dec 7 15:58:54 2018 +0100

    Bug 21975: get item field in substitutions
    
    substitutions field stores the item field with 'items.' prefix.
    Looks like call of C4::Items::ModItem() works but it will not if ORM object is used in the futur.
    So I prefer fix it now and it is needed for main patch.
    
    Test plan :
    Run t/db_dependent/Items/AutomaticItemModificationByAge.t
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a131ffca088a8bf6a687cd57a7162c8511c88124
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 16 12:12:11 2019 +0000

    Bug 22695: DBRev 18.12.00.046
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6a58da7da2a3f72825d8b610961961a5f65f1af3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Apr 12 12:52:52 2019 +0000

    Bug 22695: Remove non-XSLT search results view from the staff client
    
    This patch removes the option to select non-XSLT search results in the
    staff client. The patch removes the markup from the template, updates
    the system preference options, and modifies Search.pm so that OPAC and
    staff client results XSLT functions are not tied together.
    
    To test, apply the patch and set the XSLTResultsDisplay to a blank
    value. Run the database update. The value of the XSLTResultsDisplay
    system preference should now be "default."
    
    Perform a catalog search in the staff client. The results should be
    shown using the XSLT view.
    
    Test that OPAC search results respect the OPACXSLTResultsDisplay
    preference when enabled and disabled.
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    Signed-off-by: Bin Wen <bin.wen@inlibro.com>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 34c835ed141a3b4758ad77e5b72f30e83d57024f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Apr 12 11:04:06 2019 +0000

    Bug 18011: Enrollment period date on patron category can be set in the past without any error/warning messages
    
    This patch modifies the patron category edit form so that the enrollment
    period datepicker widget cannot be used to select a date in the past.
    
    The <input> element had a "datepicker" class, which triggers a default
    datepicker configuration. This was overriding the configuration in the
    page-specific JavaScript file.
    
    To test, apply the patch and go to Administration -> Patron categories.
    
    Click the "Enrollment period -> Until date" field and verify that dates
    before today are disabled.
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 118f685dbf1519077ece65a47f83bff179efbf9b
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Thu Mar 7 16:35:30 2019 +0200

    Bug 22474: Clone field config before adding fields to it
    
    Test plain:
    
    1. Reindex both authorities and biblios with the -d flag to recreate the index, e.g. "perl misc/search_tools/rebuild_elastic_search.pl -v -d"
    2. Check that authorities only contains authority-specific fields in Elasticsearch e.g. by fetching  http://localhost:9200/koha_dev_authorities/_mappings
    3. Reindex both without the -d flag and verify it works, e.g. "perl misc/search_tools/rebuild_elastic_search.pl -v"
    
    Signed-off-by: Björn Nylén <bjorn.nylen@ub.lu.se>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1a2572915b4bf4a11b3a65c3a65e506610263a03
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Apr 7 18:23:32 2019 +0000

    Bug 22090: Add missing information to cash register CSV file
    
    Some information was missing from the CSV export file
    of the Cash register report: manager surname, patron surname
    and payment notes.
    
    Also pretties up the column headers a bit and makes the
    sequence between GUI and CSV export match.
    
    To test:
    - Make sure you have some fines and fees and payments in
      your system
    - Make a search with the Cash register report
    - Export results as CSV
    - Proof read hader line and make sure contents match headings
    - Verify first name and surname are shown for manager and patron
    - Verify notes show up
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 545a3a1295b908ac79f8fd379374f5776d5b455d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 16 11:52:46 2019 +0000

    Bug 22069: (follow-up) fix patorns type for patrons
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3e7b24e023c7c88eb9b1a30308a537de9dcd8682
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Apr 7 17:51:13 2019 +0000

    Bug 22069: Make log viewer find item renewals
    
    Without this patch renewals for checkouts wouldn't
    show in the log viewer. The log viewre was using
    RENEW, which we use for patrons, but for issue
    RENEWAL is used.
    
    The patch adds RENEWAL to the search params, when
    Renew was selected in the form, so both terms are
    included in the query.
    
    To test:
    - Make sure you have RenewalLog turned on
    - Make a patron renewal
    - Check something out and renew it
    - Go to Tools > Log viewer and test different
      searches
      - Modules All - Actions All
      - Modules All - Actions Renew
      - Modules Circulation - Actions Renew
      ...
    - Make sure results show as expected
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a48d1a43df24a47f1d31cd437a54961934d50230
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Apr 11 17:15:51 2019 -0300

    Bug 22688: (QA follow-up) Use search_params as all() does
    
    It looks like selected would be passed all the way down to
    Koha::Libraries->search and this would fail all the time.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ae18c4bb031a194302ced37f4b376c7439f77c99
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Apr 11 09:52:29 2019 -0400

    Bug 22688: TT plugin for pickup locations code wrong
    
    Test Plan:
    1) Apply this patch
    2) prove t/db_dependent/Koha/Libraries.t
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 111068485d455d2020d68a69d29a562547e345c6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Apr 11 17:14:05 2019 -0300

    Bug 22688: (follow-up) Unit tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2c461fc508d6161c3ab60b523bd724eef20870b9
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Apr 11 10:13:58 2019 -0400

    Bug 22688: Unit tests
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f1c150c98fb60ea75eae7d3b55adbcb7620b7519
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue Feb 26 13:54:28 2019 +0000

    Bug 22451: Use Asset everywhere
    
    Test plan:
    Use installer and onboaarding tool, make sure the js and css files are
    loaded
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit be3c2abbdc3410ea0cd7e9aa908329d9b46d8c14
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue Feb 26 13:43:21 2019 +0000

    Bug 22451: Update test
    
    Test plan:
    prove t/db_dependent/Koha/Template/Plugin/Asset.t
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4d3461a671f8ad95917aab9ac193cd69fe6c1691
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue Feb 26 13:30:20 2019 +0000

    Bug 22451: Make Asset plugin use Koha::version instead of version from db
    
    Test plan:
    Apply the patch a try to use Koha, css and js files should be used
    normally
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ba14e9ca7d40af664f7079c6a9f85a85e88fca9a
Author: Lyon 3 Team <koha@univ-lyon3.fr>
Date:   Thu Apr 11 10:48:42 2019 +0200

    Bug 22652: Editing Course reserves is broken
    
    To test:
    1. Create a course reserve or go on an existing one
    2. Add items and add a change for the holdingbranch
    3. On the list of items in this course reserve
    (course_reserves/course-details.pl?course_id=xx), click on "edit" at the
    end of a row :
    
    Without the patch, you can't see the holdingbranch you have choose for
    this item, but you see "LEAVE UNCHANGED"
    
    With the patch, you can see the holdingbranch you have choose when
    adding this item in the course
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Mikaël Olangcay Brisebois <mikael.olangcay-brisebois@inLibro.com>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8cb24d65849aa881a0e6eb74271ca2d9c7ea455c
Author: Olivier Crouzet <kohateam@univ-lyon3.fr>
Date:   Mon Mar 11 15:00:23 2019 +0100

    Bug 20830: Make sure a fund is selected when ordering from a stage file
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d5d4501290704b9b3a0893a4a3df0a356abe445b
Author: Christopher Brannon <cbrannon@cdalibrary.org>
Date:   Wed Dec 5 20:33:25 2018 +0000

    Bug 21346: Remove inline onclicks per comment 42
    
    To test:
    1)  Apply patch.
    2)  Check that there is no changed behavior with buttons or checkboxes.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5ed171a45c46f63b18266ad3a3d0a978719ca285
Author: Christopher Brannon <cbrannon@cdalibrary.org>
Date:   Sun Nov 4 03:47:30 2018 +0000

    Bug 21346: Convert dialogs to modals.
    
    This addresses most of the transfer dialogs.  There are some dialogs
    that I have not converted because I don't know what triggers them,
    therefore I cannot test them.
    
    The following scenarios have been addresses, and should be tested:
    
    FOR TRANSFERS
    
    1) Checkin with no issue, hold or transfer; not at home (AutomaticItemReturn set to Don't)
         * Should give 3 options - Yes, Yes with print, or No.
         * Yes and Yes with print should trigger a transfer back home.
         * No should do nothing.
         * Print should open a window for printing, with correct
         information.
         * All three options should close the modal.
    
         TO TEST:
         1) Set AutomaticItemREturn to Don't.
         2) Check in an item with no issues, holds or transfers set, at a
         location other than the owning library.
         3) Test conditions above.
    
    2) Checkin with no issue, hold or transfer; not at home (AutomaticItemReturn set to Do)
        * Should give 2 options - Print or OK.
        * Should automatically set transfer.
        * Print should open a window for printing, with correct information.
        * Both buttons should close modal.
    
        TO TEST:
        1) Set AutomaticItemReturn to Do.
        2) Check in an item with no issues, holds or transfers set, at a
        location other than the owning library.
        3) Test conditions above.
    
    3) Checkin with no issues or holds, but transfer already set
        * Should give 3 options - OK, Print or Cancel.
        * OK and print should not touch existing transfer.
        * Cancel should remove the exisiting transfer.
        * Print should open a window for printing, with correct information.
        * All three options should close the modal.
    
        TO TEST:
        1) Check in an item following step 2 of either test above.
        2) Check in item again, while a transfer exists.
        3) Test conditions above.
    
    WRONG BRANCH
    
    4) If AllowReturnToBranch is not set "to any library", and the item is not checked in at the appropriate branch, the wrong-branch-modal pops up:
        * Should give 1 option - OK.
        * Should not check anything in or initiate a transfer.
        * OK should close the modal.
    
        TO TEST:
        1) Set AllowReturnToBranch to "only the library the item is from".
        You can test the other settings, as long as you pay attention to
        where you are checking the item in at.
        2) Check in an item at a branch other than the owning library.
        3) Test conditions above.
    
    Signed-off-by: Lisette <lisetteslatah@gmail.com>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 230905e1d56a11cf5619f95c95920eb09803900c
Author: Christopher Brannon <cbrannon@cdalibrary.org>
Date:   Thu Nov 1 21:08:19 2018 +0000

    Bug 21346: Remove double dialog
    
    To Test:
    1) Place a hold on an item for pickup at another branch.
    2) Check in item to trigger hold and transfer.
    3) Check in item again without changing location.  Note modal AND old
    dialog behind modal.
    4) Apply patch.
    5) Check in item again without changing location.  Note modal without
    the old dialog.
    
    Signed-off-by: Lisette <lisetteslatah@gmail.com>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 48787acc6f725686583bb05f45888acf3e1231d0
Author: Christopher Brannon <cbrannon@cdalibrary.org>
Date:   Thu Nov 1 20:21:08 2018 +0000

    Bug 21346: Streamline logic in holds and transfers
    
    1) Replaced comparison with string to make testing branch easier.
    2) Replaced useless 0 values with undef.
    
    Does not change any behavior, only simplifies code.
    
    Signed-off-by: Lisette <lisetteslatah@gmail.com>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7e218b81e6f7e4cf8bb8be3aef547cd1c1aac573
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 12 02:52:58 2019 +0000

    Bug 21953: (follow-up) Fix test count
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 76599035cb9f604ea4a94928c82cc8efb396ea73
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 12 02:52:02 2019 +0000

    Bug 10796: Schema changes
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8c1bd93a3b1fd37e157173e8a1e813def70b1fa3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 12 02:41:53 2019 +0000

    Bug 10796: DBRev 18.12.00.045
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7205a02a19885d3a1baaab56c8e8749635501104
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 12 02:36:26 2019 +0000

    Bug 21890: DBRev 18.12.00.044
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 861fe06ab72be3d905ee5aaa1eca273454354a7a
Author: Liz Rea <wizzyrea@gmail.com>
Date:   Wed Mar 27 19:16:56 2019 +0000

    Bug 10796: (QA follow-up) Changing password recovery verbiage for users who are disallowed online password resets
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e155e6d5bba7b48245b2679d5f0b28d46761db93
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Feb 20 13:58:35 2019 -0300

    Bug 10796: Use $category->effective_change_password in the OPAC
    
    This patch makes the OPAC pages that rely on OpacPasswordChange use the
    current patron's category to make the decision to allow password change
    or not.
    
    It does so by making sure all the places in which OpacPasswordChange was
    used, use $logged_in_user->category->effective_change_password instead.
    
    Special attention is required on the case of opac-registration-verify.pl
    in which the use of an unblessed Koha::Patron object is changed in
    favour of the blessed object, so we can actually use the new method to
    make a decision on the text to display.
    
    To test:
    - Go through the OPAC pages, check that the password change strings and
    links are displayed only whne appropriate.
    - Sign off :-D
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d96fc928560e5353a805ec079bbde26a7e8dc4ce
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Feb 20 13:36:55 2019 -0300

    Bug 10796: Handle can_change_password on the staff interface
    
    This patch makes the staff interface handle the new flag when editing
    the categories. I didn't add the flag to the list of categories table
    because it makes it too big, but can be easily added if required by
    users or QA.
    
    To test:
    - Along with other patches from this bug, edit patron categories
    => SUCCESS: Notice the changes are correctly stored
    - Sign off :-D
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a6466f1f3b02915f0c4e578ce13455ad3aacf46c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Feb 20 13:26:18 2019 -0300

    Bug 10796: Add Koha::Patron::Category->effective_change_password method
    
    This method checks whether the local $self->change_password is set to
    override the OpacPasswordChange syspref (i.e. if it is set to a
    bool) or undef, in which case it falls back to the value of the syspref
    
    To test:
    - Apply this patches
    - Make sure the DB is updated:
      $ updatedatabase
    - Update the schema files:
      $ dbic
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Patron/Category.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 13f953317a64f66303db46424baacf15d962c0bd
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Feb 20 13:18:00 2019 -0300

    Bug 10796: DB update
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6388ffd7025290b1ca3e4c9b7a1ae67dfb63ed72
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Apr 1 18:46:21 2019 +0100

    Bug 21890: (QA follow-up) Use List::Util::any
    
    When possible it's a good idea to use `any` from List::Util to shortcut
    on the first occurence of a truthy value.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0059dc5a4041f13db11689f9df1bc6475ab45172
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Mar 22 11:22:00 2019 -0300

    Bug 21890: Wrap message in span
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 376d1a70232e7c0e96adbd7c5300ce593c0e120a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jan 31 16:29:30 2019 -0300

    Bug 21890: Allow restricting password resets by patron category
    
    This patch makes the templates relying on the OpacResetPassword syspref
    use the introduced TT plugin method instead by changing:
    
    [% IF Koha.Preference('OpacResetPassword') %]
    
    =>
    
    [% IF Categories.can_any_reset_password %]
    
    To test:
    - Verify that all the places in which the 'forgot password' link is
    displayed in OPAC keep working, provided there's at least one category
    that has the flag set
    - Attempt to recover the password for a patron that belong to a valid
    category (i.e. that has the flag set)
    => SUCCESS: You can go through the normal process
    - Attempt to recover the password for a patron that belongs to a
    category with the flag unset.
    => SUCCESS: Once Koha identifies your category, you are told you are not
    allowed to do it
    - Sign off :-D
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e55b627603450313954b98704e73d0baa3ed56f9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jan 31 16:27:10 2019 -0300

    Bug 21890: Add can_any_reset_password() to the Categories TT plugin
    
    This patch introduces a method to the Koha::Template::Plugin::Categories
    TT plugin. This methods queries for categories filtering them by
    effective_reset_password flag set, and returns a boolean representing the fact
    that there's at least one category allowed.
    
    To test:
    - Apply this patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/Template/Plugin/Categories.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Caveat: this patch/tests require the schema to be updated
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dea4f3caaadabc8977453615eb162d8403fa5b5d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Feb 5 16:44:14 2019 -0300

    Bug 21890: Add Koha::Patron::Category->effective_reset_password method
    
    This method checks wether the local $self->reset_password is set to
    override the OpacResetPassword syspref (i.e. if it is set to a bool) or
    undef, in which case if falls back to the value of the syspref.
    
    To test:
    - Apply this patches
    - Make sure the DB is updated:
      $ updatedatabase
    - Update the schema files:
      $ dbic
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Patron/Category.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e8fc66f0f612ce6516089894b28899522d13021e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jan 31 16:28:39 2019 -0300

    Bug 21890: Handle can_reset_password on the staff interface
    
    This patch makes the staff interface handle the new flag when editing
    the categories. I didn't add the flag to the list of categories table
    because it makes it too big, but can be easily added if required by
    users or QA.
    
    To test:
    - Along with other patches from this bug, edit patron categories
    => SUCCESS: Notice the changes are correctly stored
    - Sign off :-D
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ace782a1f354c675661d70fa9714ed114364c4b9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jan 31 16:25:59 2019 -0300

    Bug 21890: DB updates
    
    This patch adds a new column to the categories table:
    'reset_password' which is a boolean, and represents, well... that. The
    value itself is nullable.
    
    The idea is that OpacResetPassword governs the general behaviour, and
    this can be overriden at category-level.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 698efcc0aa2ae48b879b843857e6f12316d5ba83
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Mar 29 19:01:19 2019 +0000

    Bug 21582: Use CodeMirror for *UserJS & *UserCSS
    
    This patch adds CodeMirror syntax highlighting by default to JS and CSS
    system preferences. HTML preferences will use CodeMirror editors if
    UseWYSIWYGinSystemPreferences is disabled.
    
    Three new CodeMirror files are added to support three new syntax
    highlighting modes: XML (for HTML), CSS, and JS.
    
    A new option is added to *.pref file configurations for textareas which
    are intended for HTML, JS, or CSS: syntax. This option is passed to the
    CodeMirror configuration to control syntax highlighting mode.
    
    Textareas without a syntax option specified will not have CodeMirror
    enabled.
    
    To test, apply the patch and go to Administration -> System preferences.
    
    Test the behavior of several preferences which use <textarea> as their
    input. For example:
    
    - OPACUserJS (JS)
    - IntranetUserCSS (CSS)
    - OpacHeader (HTML)
    - BibtexExportAdditionalFields (no highlighting)
    
    Text entry in each of these should have the correct syntax highlighting
    applied to them. All data should be saved correctly.
    
    Test with UseWYSIWYGinSystemPreferences both on and off.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a0e61d8c3e94f2b9e990cc2b60668187047b24bb
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Mar 27 08:35:27 2019 -0400

    Bug 22594: Validate SMS messaging numbers using the E.164 format
    
    Many SMS messaging services reject numbers that do not conform to the E.164 international public telecommunication
    numbering plan.
    
    We already tell patrons on the OPAC "Please enter numbers only. (123) 456-7890 would be entered as 1234567890."
    but we do not enforce this. We should be validating the patron's SMS number on both the staff side and the patron
    self-service for updating the SMS number.
    
    Test plan:
    1) Apply this patch
    2) Enable SMS message ( you can set to Email to enable )
    3) Test entering and updating SMS numbers on the OPAC and staff
       interfaces.
    4) Note you can only enter a 1 to 14 digit number with an optional + sign
       at the beginning ( used to indicate the number includes a country calling code )
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8eb22efa0893849e2967e34c821c018c6405f8d3
Author: Thatcher Leonard <thatcher.f.leonard@gmail.com>
Date:   Wed Apr 10 23:23:46 2019 +0000

    Bug 18584: Our legacy code contains trailing-spaces
    
    This patch removes trailing spaces and replaces tab characters with
    spaces in the branch transfer limits template.
    
    Mentored-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d9e9c8545171524c1d1771a98642aa94cc17e74c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 12 02:01:05 2019 +0000

    Bug 21953: DBRev 18.12.00.043
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 776e552b40258b960c964d7d0baa6a801db23d24
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 9 12:03:22 2019 +0100

    Bug 21953: Clarify PF = Lost item processing fee
    
    Currently PF is only ever used for lost item processing fees. This patch
    alters the end user faceing description to clarify that.
    
    Note: It may be nice to make the code more descriptive too at some
    point, but that can happen in another bug in my opinion.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8ad273c12592fd8fe0bb18c4d542e714cc4252dc
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 9 12:00:16 2019 +0100

    Bug 21953: (QA follow-up) Corrections to DB Update
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cff05f88725e51001ad7c8b409f352570909d460
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 6 16:09:06 2019 -0300

    Bug 21953: Update existing rows in DB
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    Test plan passes.
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7ff3f68e20ae8739799ec015a82a7eb7a25cf1bf
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 6 16:00:09 2019 -0300

    Bug 21953: Add tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 65de5781f2b7fa3bc2e8598573050725b2aeaca0
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Thu Dec 20 17:12:21 2018 -0500

    Bug 21953: Term 'Lost item' untranslatable
    
    This patch removes the hardcoded untranslatable string
    'Lost item' from C4/Circulation.pm.
    
    To test:
    1) Make sure the system preference WhenLostChargeReplacementFee is set to Charge
    2) Optional: in Administration > Item types, add a default replacement cost to
    the item type you plan to use
    3) Loan an item out to a patron
    (If there is no default replacement cost, make sure the item has a replacement
    price)
    4) In the patron's account > Details > Loans, click on the item's barcode
    5) Set the lost status to Lost
    6) Go back to the patron's account > Fines
    7) Notice it is written 'Lost item , Lost item title barcode (title)'
    8) If you have another language installed, switch to the other language
    and notice the second Lost item is still in English
    9) Apply the patch
    10) Redo steps 3-6
    11) Notice it is written 'Lost item, title barcode (title)'
    12) Optional: switch to another language, notice there is no English string
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 73bc117b057bd5ea73c4075d586b644b0cafe00b
Author: Arthur Suzuki <arthur.suzuki@biblibre.com>
Date:   Wed Mar 27 15:49:04 2019 +0100

    Bug 22597: Remove "more_subfields_xml" from GetPatronInfo response
    
    Test plan
    1/ Set an item with some xml data in more_subfields_xml
    2/ Issue this item to a borrower
    3/ Query the webservice with GetPatronInfo methods and show_loans=1 params
    4/ Check no <more_subfields_xml> tags are returned in the xml response from the webservice
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7b90dace95e4c289a2b36b5f95d9116dbd5440db
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Feb 6 00:14:01 2019 +0000

    Bug 19648: Revise marc21_field_007.xml
    
    - Removes some doubled up entries
    - Fixes some whitespace issues
    - Adds some missing entries, for example:
        007, nonprojected graphic, secondary support material a-c
    
    To test:
      - Verify that the 007 cataloging plugin works correctly and
        matches standard:
        http://www.loc.gov/marc/bibliographic/bd007k.html
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8c038b9eab64d16c08a66218ab5bc631ce6a0b09
Author: Liz Rea <wizzyrea@gmail.com>
Date:   Tue Apr 9 17:49:00 2019 +0000

    Bug 18387: (QA Follow up) adding specificity to error template.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2ecca43004685408d999e2b0a765c55a32c404c5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jul 9 13:30:38 2018 +0000

    Bug 18387: Allow sco-user to access errors templates
    
    To test:
     1 - Enable AuthoSelfCheck prefs
     2 - In opacuserjs or scouserjs add a fetch of an unreachable resources
     3 - Visit the SCO
     4 - Sign in as a patron then click 'finish'
     5 - Say 'yes' to receipt
     6 - Note you are directed to log in
     7 - Apply patch
     8 - Restart all the things
     9 - Repeat 4 & 5
    10 - Sucess, receipt prints
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dbe541a99bcd0753f5c050bfdf3b786399c78b1d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 9 13:24:05 2019 +0100

    Bug 22628: Add VOID and FFOR to relevant templates
    
    This patch adds the VOID and FFOR codes to the releveant templates for
    display purposes
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 994245e09b6a19df14a4319ed231cc2c5bf087ed
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 12 01:43:44 2019 +0000

    Bug 21891: DBRev 18.12.00.042
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1fe39ed657bbc1e45181860cc1d9a2d29aff08d6
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Apr 11 11:03:20 2019 +0000

    Bug 21891: (follow-up) Update database to set blank values to "default"
    
    This patch adds a database update which will update any blank values of
    the XSLTDetailsDisplay system preference to "default." Although a blank
    value will still result in the default XSLT view, it's more consistent
    with the other XSLT preferences to use "default."
    
    To test, apply the patch and set the XSLTDetailsDisplay to a blank
    value. Run the database update. The value of the XSLTDetailsDisplay
    system preference should now be "default."
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 920ac202dc1f91e51f43dd07822636c5bbee6a48
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Nov 27 17:32:51 2018 +0000

    Bug 21891: Remove non-XSLT detail view in the staff client
    
    This patch removes the non-XSLT markup from the bibliographic detail
    page in the staff client. The XSLTDetailsDisplay preference has
    been altered to accommodate this change. A blank value in
    XSLTDetailsDisplay will now be equivalent to "default."
    
    To test, apply the patch and set the value of XSLTDetailsDisplay to
    either blank or "default."
    
    View the detail page for a bibliographic record in the staff client. The
    XSLT view should be shown.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0f02c37aab5e2b2cbffbc2fb84e16b5355a33bcf
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Apr 10 20:42:22 2019 +0000

    Bug 22501: Add raw filter to course reserves summary page
    
    Fixes another place where the public note is shown:
    - Course reserves module start/summary page
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8c7bc8946b4d100da841916b4fe5fa12c2505fb5
Author: Liz Rea <wizzyrea@gmail.com>
Date:   Tue Apr 9 17:56:43 2019 +0000

    Bug 22501: (QA follow-up) use $raw for the note in the intranet
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 79f1008c7ed97117c248c6aead8742bc64dd0353
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Mar 26 17:41:36 2019 +0000

    Bug 22501: OPAC course reserves notes should allow html links
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8b3f1cb151787d742886a328225ceb07d202f2f5
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Apr 8 18:04:14 2019 +0100

    Bug 22642: Corrections to updatedatebase for bug 12395
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 08f02c1aa5a6ae1f1ee3b10a086831c1a2dbcb66
Author: Hayley Pelham <hayleymapley@catalyst.net.nz>
Date:   Mon Apr 8 10:25:11 2019 +1200

    Bug 19630: Removed constant message from Status column
    
    Test plan:
    Same as initial test plan, except that when a hold has no status that
    the Status column for that hold should be blank instead of saying
    "Hold has been placed".
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ccc2b4b073113b2c0603437b5a84d4544ede16e4
Author: Hayley Pelham <hayleymapley@catalyst.net.nz>
Date:   Thu Mar 14 21:37:36 2019 +0000

    Bug 19630: Added Status column to Patron Holds table
    
    When a hold has been suspended or is waiting, the status
    message appears in the Barcode column of the Holds table. This patch
    fixes this by adding a separate Status column which details the status
    of the Hold, whether it has been suspended, or is in transit, etc.
    
    Test plan:
    1) Place an item level hold and a 'Next Available' record level hold for
    a patron.
    2) View the holds in Patrons->Patron details for that Patron in the Check out and Details tabs
    3) Suspend one of the holds, and note that the status appears in the
    barcode column
    4) Set a hold to be waiting for pickup, and note the status appears in
    the barcode column
    5) Apply the patch
    6) Check the same holds and note that the statuses now appear in the new
    column called Status, and note that if a hold has status effect that the
    row reads "Hold has been placed"
    7) Verify that this is the case in both the Holds tables (in Check out
        tab and Details tab)
    
    Sponsored-by: Catalyst IT
    Signed-off-by: Jose-Mario Monteiro-Santos <jose-mario.monteiro-santos@inLibro.com>
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 968c888e1579ab28ec165819a011612d8b8f5570
Author: Hayley Pelham <hayleymapley@catalyst.net.nz>
Date:   Thu Mar 14 04:14:57 2019 +0000

    Bug 19497: Removed title (tooltip) from Edit button in items_search_fields.tt
    
    This patch removes the tooltip that appears when hovering over the Edit button
    of Item Search Fields in the staff client. This was done for consistency reasons,
    including that this tooltip is not translated and tooltips do not appear to be
    on the majority of buttons in the staff client.
    
    Test plan:
    1) In Home->Administration->Item search fields create a new search field
    if you haven't got any already
    2) Observe the tooltip that appears when hovering over the Edit button in
    the Item serach fields table.
    3) Apply the patch and observe that the tool tip no longer appears.
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f7869ad48b8f2f86f2b912aad1c3dcbd1a5679c1
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 11 13:39:10 2019 +0000

    Bug 19670: DBRev 18.12.00.041
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a5f3d405f56202beb4426da52f3bf4019f26484b
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Thu Mar 14 14:33:18 2019 +0200

    Bug 19670: Change Collation of marc_field to allow mixed case mappings
    
    Test plan:
    1. Apply patch and update database
    2. Verify that you can add a search field mapping for both 100a and 100A.
    3. Verify that the above also works with a newly-created database.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 761b410f99cbbfff8e353c538fde2b6816408795
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Mar 6 19:02:50 2019 +0000

    Bug 22444: currencies_manage permission doesn't provide link to manage currencies when selected alone
    
    This patch modifies the acquisitions sidebar menu so that it checks
    properly for the currencies_manage permission.
    
    This patch also removes the menu link directly to the administration
    home page. Since we're removing the check on the general
    "CAN_user_parameters" permission it doesn't make sense to assume the
    page is accessible.
    
    To test, apply the patch and modifiy a staff user so that they have no
    "parameters" permissions but do have "currencies_manage" permission.
    
    Go to the Acquisitions home page. There should be a link to currencies
    management in the sidebar menu.
    
    Perform the same test with a user who has "parameters" permissions but
    not "currencies_manage" permission. There should be no link to
    currencies in the acquisitions sidebar menu. The user should have access
    to the administrative home page.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 275dee5f9b9a26b3490bf3646c71c78a2d8647eb
Author: Maryse Simard <maryse.simard@inlibro.com>
Date:   Thu Feb 7 08:24:03 2019 -0500

    Bug 21263: Pickup library not set correctly when using Default holds policy
    
    In the case of a specific item hold, it can only be fulfilled if the pickup library
    matches the hold fulfillment policy. Therefore, if OPACAllowUserToChooseBranch is
    set to don't allow, the pickup library should correspond to the policy.
    
    In case of hold that does not specify an item, the homebranch or holdingbranch
    can't be determined at this time, so the pickup library still defaults to the
    homebranch of the borrower. Same if there is no policy or it states 'any'.
    
    To test:
    - Make sure OPACAllowUserToChooseBranch is set to don't allow
    - Make sure you have two branches A and B
    - Have one item whose homebranch is B
    - Have one user whose homebranch is A
    - Make sure the circulation rules allow the user to reserve the item's item type
    
    1. Go to Administration > Circulation and fines rules
    2. Create a Default holds policy by item type for that item type
        - Item type = item's item type
        - Hold policy = From any library
        - Hold pickup library match = item's home library
        - Return policy = item returns home
    3. Go to the OPAC and log in with the user's credentials
    4. Search for the item
    5. Click on "Place hold"
    6. Select a specific item and confirm hold
    7. In the user's file on the OPAC and check the reservation's pickup library. It should be the item's homebranch
    
    You can then repeat the steps for 'item's holding library' or 'any library' as
    the Hold pickup library match. It should also work the same way if there is no
    'Default holds policy by item type' for this item type but a 'Default checkout,
    hold and return policy' set.
    
    Finally, check that placing a hold without selecting a specific item still
    defaults the pickup library to the borrower's homebranch.
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1493c42e7bae5bffab430072587b7aa0527f6fc7
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Apr 5 14:45:39 2019 +0100

    Bug 22121: Display 'Price paid' on ILL requests according to CurrencyFormat pref
    
    To test:
    - Install BLDSS backend
      see: https://wiki.koha-community.org/wiki/ILL_backends
    - Add a new BLDSS ILL request
    - Edit ILL request
    - Fill in Price paid field
    - Verify Price paid is formatted correctly on 'Manage ILL request'
      page
    
    Signed-off-by: Ethan Amohia <ethan.amohia@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    https://bugs.koha-community.org/show_bug.cgi?id=22121
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7208ac6196a8619dbb0cca3b6f01480f4c46cab1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 7 09:14:25 2019 -0300

    Bug 22472: Make column_exists early return if the table does not exist
    
    On the way we move TableExists to C4::Installer, where it belongs to.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 19b9aacfbae616f7198cd93ebdbd97115d204c5b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 7 09:14:06 2019 -0300

    Bug 22472: Add tests
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9cbc5f2aa072ec41a70fd1fa1de4f684fcd695e9
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Apr 4 00:56:43 2019 +0000

    Bug 21659: Change link to basket group edit page
    
    I have taken another look at other links like the one
    from acq order search and changed the link to not lead
    to the vendor's basket group page but to the edit page
    of the invidividual basket group.
    
    To test:
    - Same as first patch, verify links now lead
      to the basket grou edit page
    
    https://bugs.koha-community.org/show_bug.cgi?id=21650
    
    Signed-off-by: Jose-Mario Monteiro-Santos <jose-mario.monteiro-santos@inLibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3db5feb900d3e6a6400767c771afe78bab0fa880
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Mar 11 16:24:16 2019 +0000

    Bug 21659: Fix links to basket groups from order receive page
    
    Fixes a problem with the template variables on the order
    receive page, so that the links to basket groups work
    correctly again.
    
    To test:
    - Create some orders with and without basket groups
    - Receive shipment
    - Verify that the basket group links for pending orders work right
    - Receive an order line
    - Verify that the basket group links for received orders work right
    
    Signed-off-by: Jose-Mario Monteiro-Santos <jose-mario.monteiro-santos@inLibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fbdb2b2be009140be6f9b5b84c765741bc828a3c
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Apr 3 22:35:38 2019 +0200

    Bug 22634: Standardize table creation for stockrotation* tables in kohastructure.sql
    
    The existing pattern is:
    DROP TABLE IF EXISTS ...
    CRATE TABLE
    
    Stockrotation was using:
    CREATE TABLE IF NOT EXISTS ...
    which would not recreate the table in a database it's already
    existing in possibly causing mismatches in table structure.
    
    To test:
    - Drop your database
    - Run through the web installer
    - Make sure there are no Database/SQL errors
    - Makse sure the 4 stockrotation tables have been created
    
    Signed-off-by: Frédéric Demians <f.demians@tamil.fr>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b215c7d55195a4912fb3ab585aba6ee44581f746
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Apr 3 19:28:38 2019 +0000

    Bug 22631: Make links on barcode on hold summary page consistent (bug 21070)
    
    Bug 21070 changed the link on the holds summary so the barcode
    would link to the item on moredetail for an item level hold.
    
    If a hold is already waiting, the link still goes to the detail
    page of the record. This patch changes it so the barcode always
    links to the item.
    
    To test:
    - Place some item level holds on a record
    - Verify the barcodes on the hold summary page link to
      moredetail.pl
    - Return one of the items so that the hold is waiting
    - Verify the barcode links to the record detail page now
    - Apply patch
    - Verify barcodes for pending and waiting holds now both
      link to moredetail.pl
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Bin Wen <bin.wen@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3323a428eaf662a0ba1a31b2cb56002a7372461a
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Apr 1 19:15:18 2019 +0000

    Bug 22624: Show OPAC description for authorised values in OPAC
    
    Patch adds the IS_OPAC parameter to a few GetByCode calls in
    OPAC files.
    
    To test:
    - Add different OPAC and intranet descriptions to some authorised
      value categories:
      - TERM
      - DEPARTMENT
      - LOC
      - CCODE
    - Create a new course using the values and adding items to it
    - Check the course reserves overview and detail pages in OPAC
    - Verify Department, term, location, and collection show
      the OPAC description if existing
    - Create a subscription, make sure a default location is selected
    - Check the OPAC detail page, subscription tab for this subsription
      in the OPAC
    - Verify the location of the subscription displays correctly
    
    Signed-off-by: Mikaël Olangcay Brisebois <mikael.olangcay-brisebois@inLibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7acb5394e1f62728c90a1d18e988c23a3e2862d2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Apr 4 18:27:28 2019 +0000

    Bug 13629: SingleBranchMode removes both library and availability search from advanced search
    
    This patch modifies the OPAC advanced search form so that it is possible
    to limit searches to available items even if there is only one library.
    
    To test, apply the patch and go to the advanced search page in the OPAC.
    
     - With only one library configured: There should be a section labeled
       "Availability" with just the "only available" checkbox.
    
     - With multiple libraries: The section should be labeled "Location and
       availability" and should have the library dropdown and the
       availability checkbox.
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit edf173e6ef1fa6de6e07f41c229799733456901a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Apr 4 14:05:21 2019 +0000

    Bug 14358: Changing the module refreshes the page and resets library choice
    
    This patch makes an incremental change towards fixing Bug 14358: The
    "New notice" button is converted to a dropdown button which asks the
    user to select a module to start with.
    
    To test, apply the patch and go to Tools -> Notices. Test the "New
    notice" button and confirm that module selections are reflected in the
    notice add form you are shown.
    
    Signed-off-by: Mikaël Olangcay Brisebois <mikael.olangcay-brisebois@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d498c2563d76c05a1e819d63d8b56f732c3a7768
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 11 12:30:50 2019 +0000

    Bug 22680: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d8a196cc9decd19a5401907adc64c7dee80a0c55
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Apr 10 17:55:22 2019 +0000

    Bug 22680: OPAC language footer not positioned correctly
    
    This patch modifies the OPAC CSS so that the language-selection footer
    is positioned correctly.
    
    To test, apply the patch and rebuild the OPAC CSS.
    
    - Enable one or more translations in the OPAC
    - View a page in the OPAC which can display in your browser without a
      vertical scrollbar (for instance, the OPAC main page with no news
      items or OpacMainUserBlock).
      - The language-selection footer should appear at the bottom of the
        screen. At smaller browser heights the footer should scroll
        offscreen.
      - Test with content in the opaccredits system preference, and with
        OpacKohaUrl enabled. The footer should still be positioned
        correctly.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a1eba24391b4653f842a1767a48ac8b9f470b8ea
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 11 12:26:21 2019 +0000

    Bug 22626: (RM follow-up) Adjust column after 12166
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9c0197a8d1b1a29f28de4b91e6605ae0a1088235
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Apr 9 16:06:27 2019 +0000

    Bug 22626: 'Filter paid transactions' broken on Transactions tab in staff
    
    This patch changes a parameter in the function which filters the
    DataTable of transactions. The addition of more columns to the table
    changed the index of the column which is being filtered.
    
    To test, apply the patch and locate a patron who has multiple fines or
    charges, some of them paid. Go to Accounting -> Transactions. Test the
    "Filter paid transactions" link. Table rows which show "0.00" in the
    "Oustanding" column should be hidden.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5768ea9532e0ee19b77346e2ba13681339b18017
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 11 12:21:01 2019 +0000

    Bug 12166: DBRev 18.12.00.040
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bc5e84eedc7132c64452e7f37e5a825f6d17c9bd
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 9 09:19:16 2019 +0100

    Bug 12166: (QA follow-up) Update test for description
    
    Update the relevant test to check for 'description eq title' as aposed
    to the old 'description eq "Reserve Charge - title"'.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a00e1467b9754432196df838b6e000262b7251e7
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Apr 6 13:16:56 2019 +0000

    Bug 12166: (follow-up) Fix sequence of columns in OPAC
    
    Type and description column headings were switched.
    
    To test:
    - Check the table headings of the fines table in the
      OPAC fines table match the content
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7d550eb1b3b10f82c8463e85beb63184952fc4f1
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Apr 6 12:11:38 2019 +0000

    Bug 12166: (follow-up) Remove 'Reserve Charge' from descriptions in accountlines
    
    With the prior 'Hold fee' will be displayed in OPAC and staff, so
    the 'Reserve Charge' would just be an untranslatable double up
    of information.
    
    To test:
    - Make sure you create some Reserve Charges prior to applying this
      patch set
    - Verify they show in staff and OPAC account
    - Apply patch
    - Run database update
    - Verfy the "Rental Charge - " is gone and old and new entries
      match now
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 30ab16657b10dbe8e5c42f1f3900a31c3506bb25
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Apr 4 15:44:30 2019 +0000

    Bug 12166: Improve display of Reserve charges in patron account
    
    This patch makes changes to the way hold fees are recorded and displayed
    in the OPAC and staff client:
    
     - No English strings should be stored in the accountline description.
     - The accounttype code should be used to display what kind of charge it
       is.
    
    To test, apply the patch and go to the staff client:
    
     - Configure a patron category to have a hold fee.
     - Place one or more holds for a patron in that category.
     - On the patron's record, view Accounting -> Make a payment
       - There should be a separate column for "Account type" showing "Hold
         fee" for the hold charges.
       - There should be no "Res" or "Reserve Charge" text in the
         description column--just the title.
     - Switch to the "Transactions" tab. The display should be similar.
     - In the OPAC, log in as a patron who has hold fees on their account.
       - View the "your fines" page to confirm that the information is
         displayed correctly there as well.
    
     - Place a hold for a patron who incurs hold charges.
     - Log in to the self-checkout module as that patron and check out an
       item which will fulfill that hold.
     - The correct fine information should be saved to accountlines: A "Res"
       type with a description consisting only of the title.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 083f789b9548ec70d86dc48911df1bc9febda619
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Feb 27 12:45:47 2019 -0500

    Bug 20937: Truncate items for print notices when user has an email
    
    To test:
     1 - Set PrintNoticesMaxLines to 1
     2 - Checkout 2 (or more) items to a patron and make them overdue to trigger a
    notice
     3 - Make sure the patron has an email
     4 - Make sure the notice you are sending is set to 'print' as the type
     5 - Run overdue_notices.pl without the 'nomail' option
     6 - Find the message and note all items have been added
     7 - Apply patch
     8 - Clear the message queue
     9 - Re-run overdue_notices.pl
    10 - Confirm the message now has only 1 item.
    11 - Set PrintNoticesMaxLines to 0
    12 - Clear the message queue
    13 - Re-run overdue_notices.pl
    14 - Confirm the message has 2 items as expected
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bfeac6486516f185d9882d294d5000ab773c7dd5
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Apr 7 16:25:28 2019 +0000

    Bug 22075: Fix encoding problem with RIS export in OPAC
    
    When exporting a record with diacritics in RIS
    format from the detail page in OPAC the encoding
    is not correct and the diacritics appear broken.
    
    This patch fixes it.
    
    To test:
    - Find or create a record with some special
      chars in your OPAC
    - Go to the detail page
    - Save as > RIS
    - Verify the diacritics are broken in an editor
    - Apply patch
    - Repeat and verify everything now displays correctly
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3c2ce5df6f550fd2452b978e1b5f7ac54e66b092
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 25 12:55:03 2019 +0000

    Bug 22541: Invoice adjustments should show invoice number and include link on ordered.pl and spent.pl
    
    To test:
     1 - Find a vendor in acquisitions
     2 - Click 'receive shipment'
     3 - Create an invoice
     4 - Click 'Finish receiving'
     5 - Add an adjustment that encumbers while open and update adjustments
     6 - Go to acqui-home and click on the ordered total for the fund with the adjustment
     7 - Note the invoice adjustment shows the invoice id and does not link
     8 - Add another invoice and another adjustment, but close the invoice this time
     9 - Go to acqui-home and click on the spent total for the fund with the adjustment
    10 - Note the invoice adjustment shows the invoice id and does not link
    11 - Apply patch
    12 - Visit the spent and ordered pages and note the adjustments show invoicenumber and are links
    13 - prove -v t/db_dependent/Koha/Acquisition/Invoice/Adjustments.t
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3e9989568e171ebcfc73df80c49556e0b663a8ae
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Mar 27 16:19:29 2019 +0100

    Bug 22595: Items search is mixing inputs
    
    Items search is using inputs and selects from search form to create an Ajax call.
    
    In this call selects are parsed before inputs.
    But a custom search field can be used with authorised values and used after a regular search field.
    In this case the "q" param is not ordered like the "name" param.
    
    Test plan :
    1) Go to Administration > Item search fields
    2) Define a search field with an authorised values category
    3) Go to items search
    4) Use a regular filter like call number
    5) Click on new field
    6) Use custom field with an authorised value
    7) Perform search
    => Without patch you get wrong resuts, authorised value is used as value for first field
    => You can see this by listening traffic in Firebug, look at params "f" and "q"
    8) Check some combinaison of select and input filters
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 679fdaebb1a611859a968f22b85c37fbc00b055b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jan 31 14:29:45 2019 +0000

    Bug 22250: Clean up Mana KB integration with serials and reports
    
    This patch makes many changes to templates and JavaScript related to the
    integration of Mana with serials reports:
    
     - Many incorrect uses of the raw filter with html
     - Corrections to Bootstrap modal markup
     - Untranslatable strings moved out of JavaScript
     - Removed markup and JavaScript related to reports comments, a feature
       which doesn't exist in this version.
    
      New include file: mana/mana-comment-status.inc
    
      This file contains hidden-by-default messages which are shown during
      the process of submitting a comment on a subscription.
    
      New include file: mana/mana-share-report.inc
    
      This file contains the "Share report" modal markup formerly in
      guided_reports_start.tt
    
      New JavaScript file: mana.js
    
      Previously mana.inc, an include file containing only JavaScript which
      didn't include any template processing.
    
      Changed: mana/mana-report-search-result.inc
    
      This include file is now a full template so that jQuery's load()
      function can be used to pull its contents into the reports search
      modal.
    
      Changed: svc/mana/search
    
      This script was returning json-encoded HTML. Now it returns regular
      HTML.
    
    To test you must have Mana configured and enabled. Apply the patch and
    go to Reports -> Saved reports.
    
     - Choose New report -> New SQL from Mana. A "Mana search" modal should
       appear.
       - Perform a search which will return results, e.g. "circulation."
       - A "Loading" indicator should appear while the results are being
         retrieved. It should disappear when results appear.
       - Results should appear in the DataTable with sorting, paging, and
         search options.
       - In the "Notes" column, notes longer than 200 characters should be
         truncated with a "Show more" link. Clicking it should expand the
         comment and reveal a "Show less" link in its place.
       - Click the "Import" button (previously "Use"). The button icon
         should change to a loading indicator.
       - When the import is complete you should be redirected to a view of
         your new report.
    
    Go to Serials and click the "Search on Mana" link in the sidebar.
    
     - Perform a search for a serial
     - Results should appear in a DataTable with sorting, paging, and search
       options.
     - Sorting by title should ignore articles "a," "an," and "the."
    
    Create a new subscription or edit an existing subscription which will
    match a record in Mana.
    
     - On the second step of adding/editing the subscription a message
       should appear at the top of the form, "Searching for subscription in
       Mana Knowledge Base," with a loading icon.
     - When searching has completed a "Show Mana results" link should
       appear.
     - Clicking the link should trigger a modal showing search results which
       match your subscription, displayed in a DataTable with sorting,
       paging, and search options.
     - The last column of the table should contain "Import" and "Report"
       buttons.
       - Clicking the "Report" button should trigger a menu. Any existing
         comments will be listed as well as a "New comment" item.
         - Clicking an existing comment should cause the menu to close and a
           "Submitting comment" message to appear. It should be shortly
           replaced with a "Your comment has been submitted" message.
         - Clicking "New comment" should reveal a comment form.
           - It should not be possible to submit an empty comment.
           - Clicking the "cancel" link should redisplay the search results.
           - Submitting a new comment should trigger a "Submitting comment"
             message followed by a "Your comment has been submitted"
             message.
       - In the table of search results, click the "Import" button
         (previously "Use"). The button icon should change to a loading
         indicator.
         - The modal should close and the data from Mana should be loaded
           into the subscription entry form.
    
    View the detail page of a subscription which has saved with Mana data.
    
      - There should be a "Report mistake" button in the toolbar. Clicking
        it should reveal a menu of comments like the one you saw previously.
         - Clicking an existing comment should cause the menu to close and a
           "Submitting comment" message to appear. It should be shortly
           replaced with a "Your comment has been submitted" message.
         - Clicking "New comment" should reveal a comment form modal.
           - It should not be possible to submit an empty comment.
           - Clicking the "cancel" link should hide the modal.
           - Submitting a new comment should trigger a "Submitting comment"
             message followed by a "Your comment has been submitted"
             message.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 64740260e51b4249dbc99d151dadfb173cde5298
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Mar 12 11:11:45 2019 +0000

    Bug 19747: Add link to article requests help page
    
    Newer manuals contain information about article requests.
    This patch adds the link to the article request section
    in the manual.
    
    To test:
    - Activate ArticleRequests system preference
    - Go to Circulation > Article requests
    - Click on Help
    - Verify that you end up in the proper section of the manual
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d3059e6c94f324d6984368fa8b8e77ad1dfbcf71
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Apr 3 15:59:20 2019 +0100

    Bug 20912: (QA follow-up) Fix for missed signature failure
    
    We missed a change in calling parameters passed to CalcDateDue in AddRenewal
    during the initial QAing. This patch corrects the call and adds a test to catch
    regressions.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Dobrica Pavlinusic <dpavlin@rot13.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 35921d30a99f3f4c4cdb21438c8516444a10f24c
Author: Magnus Enger <magnus@libriotech.no>
Date:   Fri Apr 5 10:03:58 2019 +0200

    Bug 22646: Fix use of PrivacyPolicyURL
    
    To test:
    
    PatronSelfRegistration = Allow
    PatronSelfRegistrationDefaultCategory = PT (or some other real category)
    GDPR_Policy = Enforced
    PrivacyPolicyURL = Some URL
    
    - Go to <opac>/cgi-bin/koha/opac-memberentry.pl and verify that the text "privacy
      policy" displays a link to the current page, not the URL in PrivacyPolicyURL
    - Go to Administration > System preferences > Patrons > Privacy
    - Verify that the descriptions of GDPR_Policy and PrivacyPolicyURL does not
      mention that PrivacyPolicyURL needs to be set if GDPR_Policy is set.
    - Apply the patch
    - Verify that opac-memberentry.pl now links to the URL in PrivacyPolicyURL
    - Verify that the syspref descriptions mention the relationship between them
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Bin Wen <bin.wen@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ea7245631ebfb16d4921a6cf7b4b46799a241ff9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Mar 14 13:15:01 2019 +0000

    Bug 21013: Missing itemtype for checkut makes patron summary print explode
    
    This patch moves retrieval of the item type description from the script
    to the template using the ItemTypes template plugin.
    
    To test, apply the patch and locate an item which is checked out to
    someone. Modify the database record for that item to remove the item
    type (items.itype).
    
    View the print summary for the patron who has that item checked out. The
    page should display correctly. Checked-out items which have an item type
    should show that item type description correctly.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e90cb16d79f611caa3cd6d6cbbca4ea01d7a8077
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Fri Mar 8 13:27:26 2019 +0200

    Bug 22295: Make Elasticsearch query builder group multi-term queries
    
    Test plan:
    
    1. Do an advanced search for
    Title = new
    AND
    Title = york
    2. Verify that the results match an advanced search for:
    Title = new york
    3. Verify that tests in t/db_dependent/Koha/SearchEngine/Elasticsearch still pass
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5b11c25fe76415078d1b48956512c29c0b2030b1
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Apr 9 15:59:14 2019 -0300

    Bug 22675: Fix SCO behaviour on non-existent barcodes
    
    Bug 21206 replaced GetItem for Koha::Items->find, and introduced this
    problem. This patch verifies $item is defined before attempting to use
    its methods.
    
    To test:
    - Log into SCO
    - Type an invalid barcode
    => FAIL: Things explode :-/
    - Apply this patch, reload
    - Type an invalid barcode
    => SUCCESS: A nice error message is displayed :-D
    - Sign off :-D
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 383ec1f51b4c505ac23471f8b5ee1622dc862787
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Apr 9 13:21:08 2019 +0000

    Bug 22553: Unchecking a subpermission does not uncheck the top level permission
    
    This patch makes a minor change to the set permissions page's JavaScript
    so that unchecking a subpermission will uncheck the top level
    permission.
    
    To test, apply the patch and open the "Set permissions" page for a
    patron.
    
     - Expand a permission with multiple subpermissions.
     - Check the top level permission. All subpermissions should be checked.
     - Uncheck one of the subpermissions. The top level permission should
       now be unchecked.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 192e3baa75f16891582244595fe305292b886dda
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Sat Mar 23 11:44:53 2019 +0000

    Bug 22288: Correct item search in batchMod by barcode file
    
    To test:
    1 - Have a list of barcodes that exist in your catalog
    2 - Go to Tools->Batch item modification
    3 - Attempt to modify items using the list
    4 - Get an error page
    5 - Apply patch
    6 - Repeat
    7 - Modification should work correctly
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d6122ff78d4344441ed45ceb26ed09af83a15d15
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Mar 4 16:07:22 2019 -0300

    Bug 22390: Never copy items if original order has been created from a subscription
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Tiny change to the code comment: serial => subscription order
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ec78d0cddbb5cf5455a2c67130062917a0a23484
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 21 14:48:24 2019 -0300

    Bug 22390: (bug 15184 follow-up) Use aqorders.subscriptionid instead of biblio.serial
    
    It seems that we made a wrong assumption on bug 15184, see
      commit d658cb6f7ecb18845a78d4708ee63ad1126f220f
      Bug 15184: Do copy items for not a serial OR if items are created on ordering
    
    To know if an order has been created from a subscription we should check
    $order->subscriptionid instead of the $biblio->serial flag
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ea3cbef473a8b542b58341ef38beb9f7be20f4a1
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 2 18:02:14 2019 +0000

    Bug 22618: Move tests to t/db_dependent/Acquisition.t
    
    prove -v t/db_dependent/Acquisition.t
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 247d0d1df1ee5cc7f3184d8ac6ab35373af739b3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Sat Mar 23 08:13:13 2019 +0000

    Bug 22641: Use raw filter on html slip
    
    To test:
    Enable SCO
    Load a patron
    Hit finish, print slip
    Note slip shows as raw html
    Apply patch
    Repeat, get a correctly formatted slip
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    https://bugs.koha-community.org/show_bug.cgi?id=22068
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 313df03ed06f8c4229b38d0306c380214d895c4e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Dec 24 15:59:22 2018 +0000

    Bug 17978: Unit tests for changes
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fa53eb4cfa1d0c2125fc3097e6d2328899fc4259
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Dec 24 14:33:51 2018 +0000

    Bug 17978: Check if hold can be placed before placing on placerequest.pl
    
    To test:
     1 - Set an All/All/All rule with reserves limited 2 to
     2 - Search in the staff side
     3 - Select all records (or more than 2) from the results
     4 - Click 'Place hold'
     5 - Find a patron, place holds
     6 - You get more holds than you should
     7 - Delete those holds
     8 - Apply patch
     9 - Search and select more than 2 records
    10 - Find patron, place holds
    11 - Only 2 holds are placed
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d7a5925aa0a7a185c8671d8c9989d80bdf2c0939
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Dec 19 14:20:56 2017 -0500

    Bug 17978: Circ rules will not limit holds
    
    The crux of this issue is that all those holds are unfilled record level holds. The code that checks for the number of holds the user already has *always* uses a branchcode of some form. Because of this, any open record level holds are completely ignored for this purpose.
    
    Test Plan:
    1) Set ReservesControlBranch to "item's home library"
    2) Set an All libraries/All Patrons/All itemtypes rules limiting a patron to 2 holds
    3) Place 3 record level holds, you can but you should not be able to!
    4) Delete the holds
    5) Apply this patch
    6) Attempt to place 3 record level holds
    7) Note that you cannot!
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e98dacf9f1f8464f0db394da6bc1152f96713597
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Apr 5 15:13:36 2019 -0300

    Bug 22068: (QA follow-up) Return meaningful error codes
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0b931d5de3c4fe9fa2b4823d9b8727b28a46aa7c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 14 17:03:17 2019 -0300

    Bug 22068: Prevent patrons to cancel article request they did not create
    
    opac-article-request-cancel.pl doesn't check that the article request to
    be cancelled actually belongs to the logged-in borrower. This results in
    any logged-in user being able to cancel any article request just by
    changing the id in the URL.
    
    Test plan:
    - Login with Patron P1, create an article request
    - Cancel it
    - Create another one
    - Copy the cancellation link (must be /cgi-bin/koha/opac-article-request-cancel.pl?id=X)
    - Login with Patron P2
    - Hit the cancellation link
    => Without this patch the article request is cancelled
    => With this patch applied there is a 404 redirection
    
    Note that the 404 will also appears when the article request id does not
    exist.
    
    Signed-off-by: Ere Maijala <ere.maijala@helsinki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bdb157645538667cd23f8563ee6700e697a4adc8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Apr 10 19:57:10 2019 +0000

    Bug 22600: Schema updates
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6d4eb48dd47599dfd9738e1ae125abfa9f1109ee
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Apr 10 19:55:14 2019 +0000

    Bug 22600: DBRev 18.12.00.039
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 34b1713d86602cbfb9d7c6f68dccf7b293d18dce
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Apr 10 19:53:39 2019 +0000

    Bug 22512: DBRev 18.12.00.038
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a55e50cf62438ce356e8373ee1d03686d3f96e04
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Apr 9 11:58:19 2019 -0300

    Bug 22600: (QA follow-up) Raise an exception on missing interface param
    
    This patch makes add_credit and add_debit raise a
    Koha::Exceptions::MissingParameter exception if the 'interface'
    parameter is ommited.
    
    The database will fail to generate the line anyways in strict mode, and
    we better handle it gracefuly.
    
    Bonus: fixed the TODOs in the tests.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b1171d9ef399d68e49044fbc2cb17efbeeaee093
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 29 09:46:12 2019 +0000

    Bug 22600: Update Tests adding 'interface' as needed
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d2e189ca1c4f11d12435008053336563af2dd911
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 28 14:32:05 2019 +0000

    Bug 22600: Set 'commandline' interface appropriately
    
    This patch change Koha::Cron to be a more generic Koha::Script class and
    update all commanline driven scripts to use it.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 125de75517b64a95b93dead4b1fa5c2326f007eb
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Mar 25 19:04:58 2019 +0000

    Bug 22600: Add 'cron' to interface types and set appropriately
    
    This patch adds 'cron' as a valid interface and sets it appropriately for
    existing cron scripts.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c5bc2563a856981eab29637fb2da0f6f014c0d6b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 28 11:33:00 2019 +0000

    Bug 22600: Add 'api' to interface types and set appropriately
    
    This patch adds 'api' as a valid interface and sets it appropriately for
    both the new REST api and previous /svc/ api's.  Handling to keep the
    interface of a logged in session is included such that if the OPAC or
    Intranet use the API's internally via a Cookie we will maintain the
    interface throughout the session.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9ec4d86636ffd4a11863cafe8d4eddb6e55c13db
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 28 10:00:22 2019 +0000

    Bug 22600: Add 'interface' to accountlines
    
    This patch adds the 'interface' field to the accountlines table and
    updates all Koha::Object routines and calls to use it.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b763b4698b31c8d32f482f13b50e89b58f68c443
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 14 12:14:17 2019 +0000

    Bug 22512: Add status field to accountlines
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 41e0ff7cd6240c2c9ba2d1bec816b191ef091eb1
Author: Hayley Pelham <hayleymapley@catalyst.net.nz>
Date:   Thu Mar 7 20:28:48 2019 +0000

    Bug 21003: Made Edit keywords more consistent in add_items-step2.tt
    
    When adding a course reserve with a barcode that already exists, the
    title, breadcrumbs, and legend of the form all specify that the user is
    editing, and not adding, the book.
    
    Test plan:
    Same as comment 1
    
    Signed-off-by: Devinim <kohadevinim@devinim.com.tr>
    Signed-off-by: Bin Wen <bin.wen@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3eee6f3091fcb621152af7f4db6441c98cb74558
Author: Hayley Pelham <hayleymapley@catalyst.net.nz>
Date:   Thu Mar 7 02:50:12 2019 +0000

    Bug 21003: Removed warning and changed wording on add_items-step2.tt
    
    When editing an item in a Course Reserve, the page displayed is the same
    that is displayed when adding an item to a Course Reserve. This patch
    removes the warning 'This course already has this item on reserve' when
    the item is being edited, as well as changes the title, breadcrumbs, and
    header of the div. This patch also Changes the header of the div to say
    'Edit 'book_name' in 'course_name'' instead of 'Add 'book_name' to
    'course_name'' when adding items to a course reserve if the item is
    already present.
    
    To test:
    1) Create a new course in Course Reserves (you will need Course
        Reserves enabled in syspref)
    2) Add an item by clicking the Add reserves button
    3) Click the edit button on the right hand side of the item listing
    under the Reserves heading
    4) Observe that the warning 'The course already has this item on reserve' appears, and that the title, breadcrumbs and
    header of the div all say Add/Reserve
    5) Apply the patch
    6) Repeat step 3 and observe that the title, breadcrumbs and header of
    the div now say Edit
    7) Also verify that when adding a reserve with a barcode that does not
    yet exist in the course reserves that the warning 'The course already...' is not displayed and that the header of the div says Add
    8) Finally verify that when adding a reserve with a barcode that DOES
    exist in the course reserves that the warning 'The course already...' IS
    displayed and the header of the div says Edit
    9) Sign off!
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c786e4de2369de34ce26610309cbce53534446d3
Author: Hayley Pelham <hayleymapley@catalyst.net.nz>
Date:   Thu Mar 14 03:47:59 2019 +0000

    Bug 12441: Search.pl conditional checks and displays using same syspref
    
    Script search.pl checks OPACdefaultSortField and OPACdefaultSortOrder, but
    shows defaultSortField and defaultSortOrder when using Advanced Search
    in the staff client.
    
    Test plan:
    Apply the patch and then check that the Advanced Search uses
    defaultSortOrder and defaultSortField sysprefs instead of the OPAC
    sysprefs in the conditional. Check that sort behaviour in Advanced
    Search still functions as expected. (It should do - this doesn't change
    what displays, just improves consistency).
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 29dd8d62943c303c60284e0430b1b7230891b97a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Sat Mar 23 09:43:47 2019 +0000

    Bug 13782: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fc188dfc825eb81fb6969305e8945b95138cbd41
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Mar 22 18:16:33 2019 +0000

    Bug 13782: RSS for news needs a bit of styling
    
    This patch makes a number of updates to the display of news in the OPAC.
    I hope that this makes OPAC news nicer/easier to read. It includes style
    changes to make the RSS link look better too.
    
    To test, apply the patch and regenerate the OPAC CSS. You should have
    multiple active news items. View the OPAC news with varied values of
    NewsAuthorDisplay and OpacNewsLibrarySelect.
    
    Test the single news item view. Test with Quotes on and off, and with
    OpacMainUserBlock populated or not.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8629a11601371a0c20505c5b1f70a45745068e02
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Mar 22 16:43:51 2019 +0000

    Bug 22568: Replace RSS icon in the OPAC with Font Awesome
    
    This patch removes the RSS icon image (feed-icon-16x16.png) from the
    OPAC and replaces it with Font Awesome icons styled to match.
    
    To test, apply the patch and regenerate the OPAC CSS. View the
    following pages, confirming that the RSS icon looks correct:
    
     - OPAC home page (RSS news icon)
     - Search results page (Subscribe to search)
     - Recent comments
     - Search history
     - Lists -> View list
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 54cf1df239e3b83ae5550e3ef499038dd5597d95
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Mar 7 16:04:25 2019 +0000

    Bug 22475: Shelving location doesn't appear on tags list view
    
    This patch corrects the tags list view so that shelving location appears
    correctly. Previously the template tried to display a variable which was
    empty.
    
    To test, apply the patch and locate an title which has both a tag
    applied to it and a shelving location defined for one or more items. Go
    to Tools -> Tags and click the tag to view titles with that tag. In the
    location column of the table the shelving location should appear along
    with library and call number.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0e0a3173859d4374087e99e1a7cd929c8da61c76
Author: Björn Nylén <bjorn.nylen@ub.lu.se>
Date:   Thu Mar 28 10:28:29 2019 +0100

    Bug 10345: Increment copy number when adding multiple copies.
    
    To test:
    1. Add multiple copies of an item with data in the 'Copy number' field. Note that tha data will be identical for all items.
    2. Apply patch.
    3. Add multiple copies of an item with a positive integer (ie. only digits) in the 'Copy number' field. Note that the copy number is incremented for each item.
    4. Add multiple copies of an item with some other type of data in the 'Copy number' field. Note that the copy number field remains unchanged for the added items.
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 05e49e6be98723f67ec85a5843fad1fc9787925f
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Apr 2 09:57:35 2019 +0200

    Bug 22620: OPAC description for CCODE in opac-reserve.tt
    
    Bug 20450 added CCODE to opac-reserve.tt using AuthorisedValues TT plugin.
    
    This patch changes the plugin call so that it requests OPAC description.
    
    Test plan :
    1) Define a CCODE with staff and OPAC descriptions
    2) Apply this collection on an item
    3) At OPAC, place an hold on this item
    4) Verify the collection display correctly OPAC description and not staff description
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 40503c8fa86e6c4480ec8ca59e28f0c6f394502d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Mar 26 14:11:28 2019 +0000

    Bug 22575: Item type administration uses invalid error class for dialog
    
    This patch modifies the item types administration script so that it
    passes a valid message type to the template, where the type is used as a
    CSS class. "Error" is a nonexistent dialog class. It should be "alert."
    
    To test, apply the patch and go to Administration -> Item types.
    
     - Try to delete an item type which is in use. The style of the error
       dialog should be correct.
     - Try to add an item type using a code which already exists. The error
       should look correct.
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    Signed-off-by: Bin Wen <bin.wen@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b1c70a3c7e667137e54c88a2e02b5ca5ad5ee10b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Feb 28 13:12:59 2019 +0000

    Bug 22432: Star ratings plugin replacement missing from a couple pages
    
    This patch modifies two templates to conform to the change to the start
    ratings plugin: Overdrive search results and RecordedBooks search
    results.
    
    On the Overdrive page, the star ratings are now correctly displayed
    using the new plugin. On the RecordedBooks page, star ratings code has
    been removed because it is unused. RecordedBooks doesn't provide ratings
    information in their API.
    
    To test you need credentials for both Overdrive and RecordedBooks. Apply
    the patch and enable both services.
    
     - In the OPAC, perform a search that will return results from Overdrive
       and RecordedBooks.
     - Open the search results for each of those services.
       - On the Overdrive search results page, star ratings should appear
         correctly (in read-only mode).
       - On the RecordedBooks page everything should look the same.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ced69febf3de17691d885e9ee7e03ef46c28b2ae
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Sat Mar 23 08:51:15 2019 +0000

    Bug 22607: DBRev 18.12.00.037
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cf95f0a7e6897d3dc4b90c92ffad19230379d7cb
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Fri Mar 29 08:13:48 2019 +0000

    Bug 22607: Change default value in issues.renewals to '0'.
    
    This patch change renewals column of issues and old_issues tables.
    
    Now it is NOT NULL default 0. It does not make sense when number of
    renewals is undefined, it is always integer with value zero or more
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a5fcd93f72687e946d9bfbdc2541ed4a18704125
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 2 00:34:43 2019 +0000

    Bug 22619: Fix null empty behaviour for new rules
    
    To test:
     1 - Go to Admin->Circulation and fines rules
     2 - Set All/All rules ot have a limit for Current checkouts allowed (and onsite checkouts allowed)
     3 - Select an itemtype to add a new rule
     4 - Save without entering any values
     5 - Note that new rule displays with the same numebr as the all/all rule
     6 - Check the DB, not no lines were added to circulation_rules table
     7 - Delete the rule from the staff client
     8 - Apply patch
     9 - Repeat, note the new rule is unlimited
    10 - Run selenium tests
    11 - They pass!
    12 - Check no rules/itemtypes are added to your system by the tests
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f6bc67e851722451a970d085f51fb11fb03e21b3
Author: Colin Campbell <colin.campbell@ptfs-europe.com>
Date:   Mon Apr 1 12:16:51 2019 +0100

    Bug 22611: Correction for call to get create_item in EDI.pm
    
    There was a typo in the addition of a call to
    effective_create_items causing processing to abort after adding
    a single copy.
    
    This patch reverts to using the C4::Context call as used for the
    first copy created, the intended call to effective_create_items
    is a wrapper around that as the field in the basket is guaranteed
    to be null (its not set when we call AddBasket). Being consistent
    and explicit in what we call should guard against future changes
    in dependencies exposing the logic flaw
    
    Added some comments to make logical flow of code clearer
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6666918dd661b0207366becefd1480257197a353
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Mar 19 14:16:06 2019 +0100

    Bug 19380: Use Koha::Item::get_transfer instead of GetTransfers
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1611c13e85fca43f24a75287b333ff71db2361b9
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Sep 27 15:32:53 2017 +0200

    Bug 19380: Add transfer informations in ILS-DI GetRecords response
    
    Test plan:
    1. Put an item into a 'transfer' state
      a. Place a hold on an item in branch A for a patron of branch B
      b. Check in this item in branch A and confirm transfer
    2. Go to http://opac/cgi-bin/koha/ilsdi.pl?service=GetRecords&id=XXX
       where XXX is the biblionumber of the biblio the item belongs to.
    3. Verify you have a new <transfer> element inside //record/items/item
       that contains <datesent>, <frombranch> and <tobranch>
    4. Check in the same item in branch B, so that the item is not flagged
       as being transferred
    5. Repeat 2
    6. Verify that the <transfer> element is not there.
    7. prove t/db_dependent/ILSDI_Services.t
    
    Followed test plan, patch worked as described. Also ran QA test tools
    and modified files passed
    
    Signed-off-by: Alex Buckley <alexbuckley@catalyst.net.nz>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 94206510d7a7641e0e283738f56249c90f7d632e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 29 13:17:14 2019 +0000

    Bug 13895: (follow-up) Add Modern::Perl
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 67c99f585c560fc25c7dbd896b9cd4af50f4b11d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 29 11:44:55 2019 +0000

    Bug 22518: DBRev 18.12.00.036
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cd4858918f0ad2d6ee512edbf70677b1f62c0685
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 29 10:46:47 2019 +0000

    Bug 22518: (QA follow-up) Add rows updated to feedback
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c42aa0a53490c2d234742e09336def962e01d96e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 15 13:43:03 2019 +0000

    Bug 22518: Add database update 'just in case'
    
    All cases I could find where 'O' was referenced it was referenced
    alongside 'FU'.. as such I've written this DB update to case any last
    cases of 'O' and update them to 'FU' "just in case"
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e8eb0cf0f2ddf6aa741d63e9f4f38241d0c1ecf4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 15 13:29:00 2019 +0000

    Bug 22518: Remove references to 'O' accounttype
    
    I went back over 12 years to and still only found "FIXME: What are these
    accounttypes" concerning the 'O' type and I couldn't find anywhere where
    it was being set.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7aaa10e0922b21f1c9ed40ede0d3dfc0a63c2832
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Mar 26 11:17:31 2019 +0000

    Bug 22586: IntranetReportsHomeHTML no longer renders as HTML on reports-home.pl
    
    As of 18.11 the IntranetReportsHomeHTML syspref no longer renders HTML
    on report-home.pl. I think this is being filtered wrong in the template.
    
    Test Plan:
    
    1) Edit IntranetReportsHomeHTML, set to "<p>Test</p>"
    2) View a report, note that you see the html p tags are displayed
    litterly
    3) Apply this patch
    4) Reload the page
    5) Note the p tags are rendered as html
    
    Signed-off-by: George Williams <george@nekls.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit eb7e0f018c479024f0ceacb9f0c235b556ec2979
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Mar 27 15:37:51 2019 +0100

    Bug 22596: use raw TT filter in items search with custom field
    
    When items search is with a custom field using authorised values, html TT filter is breaking the JS, it should use raw.
    
    Test plan :
    1) Go to Administration > Item search fields
    2) Define a search field with an authorised values category
    3) Go to items search
    4) Use the "New field" link
    5) Check use of custom field is OK
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 68fbc962182cba2c97ac580446513ac542ee631d
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Jan 14 11:27:32 2019 +0000

    Bug 22127: Update date accessioned plugin - remove unused routine
    
    Test plan:
    1) Apply the patch
    2) Have set dateaccessioned plugin to an item subfield (it is set on 952$d by default)
    3) Confirm the functionality of this plugin is same as before patch
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d635827c541220a21190a26d28740f06e41a9cb1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 24 14:54:35 2018 +0000

    Bug 21646: Clean up Overdrive template
    
    This patch modifies the OverDrive administration page to correct some
    markup issues:
    
     - Switch to Bootstrap grid
     - Add missing header search box
     - Add missing DataTable configuration
     - Remove unnecessary fieldset
    
    To test you do not need to have OverDrive credentials. Apply the patch
    and go to System preferences -> Enhanced content -> OverDrive. In the
    description of the "OverDriveAuthName" preference, follow the link to
    manage "individual branch authnames."
    
     - Confirm that the page looks correct, including the header search
       box, page title, and breadcrumbs
     - Confirm that the page adjusts well to various browser window sizes.
     - Confirm that the DataTable works correctly.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit eabcec1d6c172e0e590aa497eae0c264bcd2b5dc
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Mar 27 14:23:18 2019 -0300

    Bug 13895: (QA follow-up) Make the class plural
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 583328e3f8c2e1827419185628069ad8c9979943
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Mar 13 16:25:38 2019 +0000

    Bug 13895: Fix test
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a142369b309068ed2ba5d34f033f4e047483401d
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Mar 13 16:03:09 2019 +0000

    Bug 13895: Adapt naming according to voted RFC
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 47ad7afccaf1ca0ae7b8dbfad9998aaac6d9a938
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Feb 25 22:17:01 2019 +0000

    Bug 13895: (follow-up) Fix POST response
    
    Test plan:
    prove t/db_dependent/api/v1/chcekouts.t
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 95d23bc3c38f3cd6a4e6be3aac451c3899cccc83
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Thu Feb 21 00:26:17 2019 +0000

    Bug 13895: Change renewal endpoint
    
    Instead of PUT on /checkout/{checkout_id} endpoint, you should now call
    POST on /checkouts/{checkout_id}/renewal
    
    Test plan:
    prove t/db_dependent/api/v1/checkouts.t
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a0148b440a4f05c6a6d216c85b03ea502b0da95b
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Thu Feb 21 00:15:22 2019 +0000

    Bug 13895: Refactor test using REST Basic auth
    
    Test plan:
    prove t/db_dependent/api/v1/checkouts.t
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a7e704382fa97ba08c8d2d57f6a818e76e858770
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Feb 20 21:42:36 2019 +0000

    Bug 13895: Remove create_item and create_biblio subs from test
    
    Test plan:
    prove t/db_dependent/api/v1/checkouts.t
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4672e6e6c40cf595da7e836525e5b6e486f78efe
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Feb 20 21:30:49 2019 +0000

    Bug 13895: Remove the opac checks in privileged endpoint
    
    Test plan:
    prove t/db_dependent/api/v1/checkouts.t
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1dfb57164fd6d986b110caa695a3baf9800ff93a
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Feb 4 14:22:54 2019 +0000

    Bug 13895: (follow-up) Adapt checkout endpoint to openapi, update terminology
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b63fd774c181b96e514122c0d693f222b99b1cdd
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 10 16:16:49 2017 -0300

    Bug 13895: (QA follow-up) Adjust OpenAPI definitions for checkouts
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e3f2e346f884e2ba6e4a8f43709955f776a259de
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Mon Mar 23 13:10:46 2015 +0100

    Bug 13895: Add API routes for checkouts retrieval and renewal
    
    GET /checkouts?borrowernumber={borrowernumber}
    GET /checkouts/{checkout_id}
    PUT /checkouts/{checkout_id}
    
    + unit tests in t/db_dependent/api/v1/checkouts.t
    
    Test plan:
    1. Open a browser tab on Koha staff and log in (to create CGISESSID
       cookie). You should have permission circulate_remaining_permissions.
    2. Go to http://yourlibrary/api/v1/checkouts?borrowernumber=XXX (replace
       XXX with a borrowernumber that has checkouts) and check you receive
       correct data
    3. Go to http://yourlibrary/api/v1/checkouts/YYY (replace YYY with an
       existing checkout id) and check you receive correct data
    4. Send PUT requests to http://yourlibrary/api/v1/checkouts/YYY until
       the maximum number of renewals is reached (you should have a 403
       error)
    5. Run unit tests in t/db_dependent/api/v1/checkouts.t
    
    Depends on bugs 16699 and 14868
    
    Signed-off-by: Benjamin Rokseth <benjamin.rokseth@kul.oslo.kommune.no>
    
    Signed-off-by: Lari Taskula <larit@student.uef.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 29c1c8ff92509e08b86106abea11436261b432df
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Mar 27 12:18:41 2019 +0000

    Bug 21772: (follow-up) Minor markup correction and reindentation
    
    This patch makes one minor markup correction: In HTML5 <tfoot> must be
    after <tbody>. Previously the opposite was true.
    
    I've also done a little bit of opinionated reindentation. There should
    be no changes visible to the user from this patch.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 281c89dd59105761c20700a9113ef9ebbc9117d0
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Mar 27 08:43:16 2019 +0000

    Bug 21772: (QA follow-up) Fix setting variables to PROCESS in holds
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ab5160a52088c55f5c66da8d4741630be6839b36
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Mar 27 08:40:15 2019 +0000

    Bug 21772: (QA follow-up) Fix button class on Cancel hold button
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 60f817a5676d5a65db7e5e4cdd6a17b046def81d
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Mar 27 08:32:37 2019 +0000

    Bug 21772: (QA follow-up) Hide .tdlabel class in sco for consistancy with opac-user page.
    
    Test plan:
    1) Compare holds table on selfcheckout and opac-user page, you will see
    the difference: In self checkout there are labels like Status, Pickup
    location, and so on in every table cell.
    2) Apply the patch, the label in selfcheckout dissappear
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c421f0806568e46aadaf06ba799ba31b9bfa6f0c
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Mon Mar 11 22:57:37 2019 -0300

    Bug 21772: (follow-up) Included more information on tab label for SCO
    
    Signed-off-by: Sarah Cornell <sbcornell@cityofportsmouth.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ce7096870ac1e6d2443b67d119e927574bd6ca30
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Thu Mar 7 16:31:55 2019 -0300

    Bug 21772: (follow-up) Remove redundant variable
    
    Sponsored-by: City of Portsmouth Public Library
    
    Signed-off-by: Sarah Cornell <sbcornell@cityofportsmouth.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3ce8fa6f104edb49ff4f3e7e1d9bf7a2e210f1af
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Thu Mar 7 15:58:41 2019 -0300

    Bug 21772: Add holds and account information to SCO
    
    This patch introduces holds and account information to the SCO page. It
    uses the introduced include files that are also used in OPAC
    (opac-user.pl and opac-account.pl).
    
    To test:
    1) Have a patron that has holds and account lines
    2) Enable the SCO module
    3) Use the patron's cardnumber to get to its details
    => SUCCESS: New tabs are presented, and they display holds and account
    information as expected
    4) Sign off :-D
    
    Sponsored-by: City of Portsmouth Public Library
    
    Signed-off-by: Sarah Cornell <sbcornell@cityofportsmouth.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6a7d4b19c7fa224fc1a5abd596a81d3ca52f43f9
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Thu Mar 7 15:51:46 2019 -0300

    Bug 21772: Move OPAC holds and account tables into .inc
    
    This patch moves the code to render the account and holds information
    for the patron into include files. They are loaded in the opac-user.tt
    and opac-account.tt templates respectively.
    
    To test:
    1) Have a patron with account lines and holds
    2) Notice they are displayed in the patron's detail section in the OPAC
    3) Apply this patch
    4) Reload the patron's detail page
    => SUCESS: Everything looks the same, no behaviuor or layout change.
    5) Sign off
    
    Sponsored-by: City of Portsmouth Public Library
    
    Signed-off-by: Sarah Cornell <sbcornell@cityofportsmouth.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0b1809bb9386b839d8dceae84f751f7ff8c0ad01
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Mar 28 18:16:33 2019 +0000

    Bug 19722: DBRev 18.12.00.035
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c18fd98bc7209bdc56b223469d3394b157548086
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 26 20:20:29 2019 +0000

    Bug 19722: Don't show items at job completion if over pref
    
    To test:
    1 - Set MaxItemsToDisplayForBatchMod to some number
    2 - Modify less items than that
    3 - Note they show
        a - Note if over 1000 they show in a simple display
    4 - Modify more items
    5 - Note they do not show and you see a note
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0e6f7861a8b62b3c4cebff7376eba9e7828bdb7d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jul 16 17:41:28 2018 +0000

    Bug 19722: (follow-up) Adjust template parameters
    
    Before we passed 'too_many_items' this was renamed to
    'too_many_items_display' but deletion template lacked changes
    
    To test:
    1 - Test a batch deletion by list and file
    2 - Test with deleting biblios and without
    3 - Results should be as expected
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 32cdfed1ecbe76bc435cc9a5f9db884a424e5669
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 30 23:22:27 2017 +0000

    Bug 19722: Add MaxItemsToDisplayForBatchMod systempreference
    
    To test:
    1 - Get a list of itemnumbers or barcodes
    2 - Set MaxItemsToProcessForBatchMod to less than this number of items
    3 - Attempt to batch edit, you arent allowed
    4 - Set MaxItemsToProcessForBatchMod to some hugh number like 60000
    5 - Try a list of as many items as possible 30000 was good for me (they
            should exist in your system)
    6 - Try to batch edit, system will timeout on displaying these items
    7 - Apply patch, update database
    8 - Set MaxItemsToDisplayForBatchMod to 1000 (default)
    9 - Try large file again, should not display items, but allow
    modification, wait for this to finish
    10 - SetMaxItemsToProcessForBatchMod to 1000 and try large file again
    11 - Should be prohibited as before
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d2e562947e4d511df587cf92085de56c3346cdc2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Mar 19 16:03:43 2019 +0000

    Bug 22525: Navigation arrows on the bottom of Cataloging search pages
    
    This patch adds a second set of pagination links to the cataloging
    search result page, at the bottom of the first set of search results.
    
    Also added is a horizontal rule after the second set of links in order
    to make it clearer that the links are for the search results above.
    
    To test, apply the patch and go to Cataloging. Perform a search which
    will return multiple pages of results. Confirm that the links work
    correctly.
    
    Signed-off-by: Marjorie <marjorie.barry-vila@collecto.ca>
    Signed-off-by: Bin Wen <bin.wen@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5d4f637a52bfb22dc5b031726c552e28b81e56f1
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Mar 13 14:19:44 2019 +0100

    Bug 22505: Add column configuration to patron list table
    
    Test plan:
    1. Create a list of patrons
    2. Add some patrons to this list
    3. Go to this patron list
       (/cgi-bin/koha/patron_lists/list.pl?patron_list_id=XXX)
    4. Verify that you can show/hide all columns except the one containing
       the checkbox
    5. Verify that you can export the table data using the Export menu
    6. Go to admin/columns_settings.pl, and verify that the configuration
       works for table 'patron-list-table'
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Jose-Mario Monteiro-Santos <jose-mario.monteiro-santos@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cf85d02daeba82507c3cdf1570c33480763cc58a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Mar 28 18:02:35 2019 +0000

    Bug 22516: DBRev 18.12.00.034
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a52c3f5fa37fa9b66ad4e5b90e2ca4834efbb58e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 15 08:43:12 2019 +0000

    Bug 22516: Database update
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f68fec12df1ad2f7a44b905dc24f0306604f521a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 15 08:38:17 2019 +0000

    Bug 22516: Remove remaining calls to lastincrement
    
    A few places still set lastincrement and the tests still checked for
    correct values. But nowhere in the code still uses lastincrement for
    anything meaningful.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 775029660cb6498e13b95434f213b3299804bc31
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Mar 28 15:44:47 2019 +0000

    Bug 18213: DBRev 18.12.00.033
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 13ca80c20bb7461b1007bdbfddfde2ae3a5d2d1f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Mar 15 12:53:13 2018 +0000

    Bug 18213: (follow-up) Correctly sort facets
    
    Previously we sorted alphabetically - that works for 1-9.
    With a 10th facet category we should sort numerically
    
    Signed-off-by: Nicolas Legrand <nicolas.legrand@bulac.fr>
    Signed-off-by: Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d1bd416341bca9824b08c2c2b24d5c32f8730dc3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jul 7 10:44:57 2017 +0000

    Bug 18213: Add Template plugin and fix for C4/Languages
    
    Signed-off-by: Nicolas Legrand <nicolas.legrand@bulac.fr>
    Signed-off-by: Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e2394f62438dfdd6cabf128cb76d0a4847aba202
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jul 6 09:41:31 2017 +0000

    Bug 18213: DB Update (facet order)
    
    Signed-off-by: Nicolas Legrand <nicolas.legrand@bulac.fr>
    Signed-off-by: Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 59918a3c2146a0e558125e246d0ac1b300189cf8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jul 5 12:11:35 2017 +0000

    Bug 18213: Add language facets to Elasticsearch
    
    This patch add language as a facet to ES results - it adds
    a new template plugin for languages to get the appropriate
    description given an iso 639-2 code
    
    To test:
    1 - Make sure you have records with differing languages (in the MARC21 008
            field characters 35-37 or UNIMARC 101a)
    2 - Apply patch
    3 - Reload Elasticsearch settings:
    http://localhost:8081/cgi-bin/koha/admin/searchengine/elasticsearch/mappings.pl?op=reset&i_know_what_i_am_doing=1
    4 - Reindex your records
    5 - Search for a phrase that will return results in several languages
    6 - Verify you see factes correctly labelled for 'Language'
    7 - Verify the facets work
    8 - Verify both opac and staff results
    9 - prove t/db_dependent/Languages.t
    
    Signed-off-by: Nicolas Legrand <nicolas.legrand@bulac.fr>
    Signed-off-by: Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ffef0c0027f81e5420445c33b4f14dfebea9a5b5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Mar 28 15:57:13 2019 +0000

    Bug 18235: (follow-up) fix tests and remove trailing space
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7cfeb543747cea87223cfaa7e380f48df754a017
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Mar 28 15:41:22 2019 +0000

    Bug 18235: DBRev 18.12.00.032
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 450fbad7512b01da1ec4300b8443210281e6e3d3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Mar 28 15:12:52 2019 +0000

    Bug 18235: (RM follow-up) fix mappings reset
    
    Without this we could not recreate mappings as there are no defaults for
    the additional fields - this restores behavoiur from before patches
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 915b4861fbd30b66898d834ac20e2ed55d011059
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Sat Mar 23 09:29:52 2019 +0000

    Bug 18235: (QA follow-up) Restore facet_order for su-geo field in mappings file
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit eba63272995b7f71815cd6e0028a55a2a042bd6f
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Fri Mar 8 07:34:09 2019 +0000

    Bug 18235: (QA follow-up) Series facet name after rebase
    
    Bug 19575 changes many field names so "se" facet field became "title-series"
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b311938370568a7b43d31392e0f266f45a1fdc2a
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Mar 4 13:52:19 2019 +0000

    Bug 18235: (QA follow-up) Make db update idempotent
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cbfeaca85998f77686a4c6860e21d1e7e02c9770
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sun Mar 3 21:36:22 2019 -0300

    Bug 18235: Do not call get_facetable_fields excessively
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5170880f7a1040240b15b0dd29fff6e6f7fff6b2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sun Mar 3 21:23:12 2019 -0300

    Bug 18235: Update facet_order default value in atomic update
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6ec68be83af08945d6b49c7335b7b19f807c645a
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Fri Mar 1 06:59:48 2019 +0000

    Bug 18235: (QA follow-up) Add missing filters
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bd2758c2141187289edf9047b9e5abe8d3c00b70
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Fri Mar 1 06:59:15 2019 +0000

    Bug 18235: (QA follow-up) Fix POD
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 854a7503764098ac348d637abeb1d13dd7ed02b1
Author: Alex Arnaud <alex.arnaud@gmail.com>
Date:   Fri Mar 23 15:55:09 2018 +0000

    Bug 18235: Add unit tests for get_facetable_fields
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 565cf4ac4032c77a15d05709bda1043b1b3c5949
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 8 15:25:55 2017 -0300

    Bug 18235: DB changes
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Nicolas Legrand <nicolas.legrand@bulac.fr>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bdb1652360530fb8dd66155fd8bcc2c2d3a6da72
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 20 10:44:03 2018 -0300

    Bug 18235: Add missing POD to get_facetable_fields
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b47e01cdc2affce3f0272b0ffe3c4890b1281be0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 8 12:04:46 2017 -0300

    Bug 18235: ES - Facets configurable
    
    This patch adds a new section 'Facet order' in the Biblio tab of the
    'Search engine configuration' admin page of the Elastic mappings.
    The idea is to let the librarians define the facet to display and order
    them as their needs.
    
    The ergonomic is not perfect and I am open to any suggestions.
    
    Test plan:
    Move up and down the field list to order the facets
    Hide/show some facets
    Rebuild index
    At the OPAC and the staff interface you should see the changes on the
    search result page.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Nicolas Legrand <nicolas.legrand@bulac.fr>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 856425db1e156ee4faf1aae70b0a78845711ba43
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Mar 8 10:12:50 2019 +0100

    Bug 21049: Set 007/00 when selecting material type (Rancor)
    
    There is a 1-1 relationship between the material type values and the
    position 00 of 007 field. Selecting a material type should set this
    position's value.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e85294a738da7cce2a4897998ffa795f977b4cd7
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Mar 6 08:43:18 2019 +0100

    Bug 21049: Fix value of material select for Rancor 007 widget
    
    The material type is selected in accordance with position 0 of 007
    
    Test plan:
    1. Create a new record using the advanced editor
    2. Select a material type for field 007 and set at least the position 0
       of this field
    3. Save the record and reload the page
    4. The material type should remain selected
    5. Try with all available material types
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d522d80c5cdb1f9c097e028499815dca6e9259cf
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Mar 27 13:55:05 2019 +0000

    Bug 22593: Fix bad ternaries after bug 22008
    
    A series of ternaries were introduced when we moved to add_debit which
    defaulted to 'user 0' should a userenv not be set.  This was incorrect
    as userenv may well not be set (during cronscript runs for example) and
    the new constraint would not allow such a default. We switch to 'undef'
    here to satisfy the constraint.
    
    Test plan
    1) Ensure you have data in your system that would be caught by the
    longoverdues cronjob.
    2) Ensure you're sysprefs are setup to charge for lost items
    3) Run the script and varify it runs to completion without errors
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3c69e084d7b1fd75dd04f5dc35fb99ceca9efb39
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Mar 22 10:52:16 2019 +0000

    Bug 12159: (QA follow-up) Remove double use module
    
    Speaks for itself.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e0b9d98827fa616f622e296254259ad475b742a2
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Mar 22 10:49:03 2019 +0000

    Bug 12159: (QA follow-up) Rename relation in Patron::Attributes
    
    It seems that we do not need the extra belongs_to in the schema result
    files if we rename the relation to code.
    
    Test plan:
    Run t/db_dependent/Koha/Patrons.t
    Run t/db_dependent/Koha/Patron/Attributes.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1218364dbea4d99b56b4abb0a4e77136a0c8d479
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Fri Mar 16 11:03:23 2018 +0000

    Bug 12159: Add tests
    
    Test plan:
    prove t/db_dependent/Koha/Patron/Attributes.t t/db_dependent/Koha/Patrons.t
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4fe300dec1937a7dc739573bc502fc566a55587d
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Thu Mar 15 13:12:55 2018 +0000

    Bug 12159: Fix getting extended patron attributes for circ-menu
    
    Changes:
    - Replace getting preference ExtendedPatronAttributes by Koha.Preference
    in templates
    - Add Koha::Patron->attributes for getting patrons extended attributes
    - Use this method in circ-menu.inc
    - Remove getting attributes from members perl scripts
    
    Test plan:
    0) Apply the patch
    1) Add some patron attributes type - with free text, authorised value,
        limited by libraries...
    2) Add some values to this attributes for some patrons
    3) Go through as many patron pages as you can and confirm that
    attributes are shown at side panel when they shoul and are not shown
    when they should not be shown
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] Removed Koha/Schema/Result/BorrowerAttribute.pm
    [EDIT] Added missing semicolon on L114 in Koha/Patron/Attribute.pm
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 100e1e758c622234d1a176b1cdb45def8443833f
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Mar 27 16:04:13 2019 +0000

    Bug 10577: (QA follow-up) Remove tab chars
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 92af7e53130304d27e5b0d9d531a89628c8ba1be
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Mar 13 11:16:09 2019 +0000

    Bug 10577: (QA follow-up) Remove bad call signature
    
    Whilst working through this patch for signoff I found a case where the
    calling signature of GetBudgetPeriod was incorrect. I removed the
    superflous passed parameter in this followup
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cc2a62bdee88908edb429155ae0d274ee9a6dfdb
Author: Galen Charlton <gmc@esilibrary.com>
Date:   Thu Jul 11 16:41:26 2013 +0000

    Bug 10577: Improve semantics of GetBudgetPeriod()
    
    Remove the option to pass zero to this function in
    order to get "the" active budget.  This was a problem
    in three ways:
    
    - Koha doesn't require that there be only one active
      budget at a time, so the concept of "the" active
      budget doesn't make sense.
    - Having the single parameter be either an ID or a flag
      based on its value is poor function design.
    - No callers of GetBudgetPeriod() were actually using this
      modality.
    
    This patch also improves the DB-dependent tests for budgets by
    
    - wrapping the test in a transaction
    - counting budgets correctly
    
    To test:
    
    [1] Apply the patch.
    [2] Verify that prove -v t/db_dependent/Budgets.t passes
    [3] Verify in the staff interface that:
        - the budget hierarchy displays correctly
        - you can add and modify a budget
    
    Signed-off-by: Galen Charlton <gmc@esilibrary.com>
    Rescued-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9a321c128fed457bf6d11d2ce7ee7edf7dd28004
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Mar 19 12:41:26 2019 +0000

    Bug 22536: Display problem in Holds to Pull report
    
    This patch modifies the display of several values in the holds to pull
    report so that they can be displayed as lists instead of as chunks of
    HTML generated in SQL.
    
    This patch modifies the SQL in pendingreserves.pl so that values can be
    formatted in the same way that holding branch is. The better long-term
    solution is to remove SQL from pendingreserves.pl altogether, but this
    is a quick fix.
    
    This patch also makes a couple of minor markup changes to fix
    validation.
    
    To test, apply the patch and go to Circulation -> Holds to pull. To see
    the changes the patch makes your holds to pull list should have titles
    with multiple items at multiple branches, with call number, copy number,
    and enumeration data. These values should all be displayed in bulleted
    lists.
    
    Signed-off-by: David Roberts <david.roberts@ptfs-europe.com>
    Signed-off-by: Bin Wen <bin.wen@inlibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b0e5790947df32383864466724a3e4838ee659bd
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Jan 9 07:06:25 2019 -0500

    Bug 22076: Add missing whitespace on if statments
    
    Rescued-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2153d851a094c6617551381899f8ec54d9e2fb0e
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Jan 9 07:02:30 2019 -0500

    Bug 22076: Fix the same situation for lost items
    
    Signed-off-by: Geeta Halley <ghalley@roundrocktexas.gov>
    Rescued-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c7e48b0a1ad72b36445bc5d4202adb1b34bb8387
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Jan 7 12:46:29 2019 -0500

    Bug 22076: SIP checkin for withdrawn item returns ok in checkin response
    
    If an item that is withdrawn is checked in via SIP2, Koha does not process the checkin, but still indicates the checkin succeeded via the ok flag in the checkin response message.
    
    To recreate:
     1 - Mark an item withdrawn
     2 - Set up sip server:
         https://wiki.koha-community.org/wiki/Koha_SIP2_server_setup
     3 - Set 'BlockReturnOfWithdrawnItems' to block
     4 - Use the sip_cli_emulator to checkin the withdrawn item
     5 - There is no error in the checkin
    
    Test Plan:
    1) Mark an item withdrawn
    2) Set BlockReturnOfWithdrawnItems to block
    3) Use the sip cli emulator to checkin the withdrawn item
    4) Note the response begins with 101
    5) Apply this patch
    6) Restart all the things ( including SIP server )
    7) Repeat checkin with sip cli emulator
    8) Note the checkin now beings with 100
    
    Signed-off-by: Geeta Halley <ghalley@roundrocktexas.gov>
    Rescued-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7ac1457ffc27cf6ec5a3a7bab6abc8a010e02b6a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Mar 22 13:19:51 2019 +0000

    Bug 22560: Forgotten password "token expired" page still shows boxes to reset password
    
    This patch modifies the OPAC password recovery template so that the new
    password entry form doesn't appear if the patron has followed an invalid
    or expired link.
    
    This patch also corrects the markup in the page title.
    
    To test, apply the patch and follow the process for resetting a
    forgotten password. When you follow the password recovery link, modify
    the URL so that the "uniqueKey" parameter is different.
    
    The page should show an error message. The password entry form should
    not appear.
    
    Check the page title in the browser's title bar. It should look correct.
    
    https://bugs.koha-community.org/show_bug.cgi?id=22520
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 50be1c4006e0a1d7e3b537bd849bc77f7a6bb56f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Mar 22 12:57:31 2019 +0000

    Bug 22561: Forgotten password requirements hint doesn't list all rules for new passwords
    
    This patch modifies a few templates in the OPAC so that all available
    information on password requirements is displayed for each case where
    the patron is setting a password:
    
     - If the RequireStrongPassword system preference is set, a message
       should appear listing strong password requirements and minimum
       password length.
     - If RequireStrongPassword is not set, the message should only ask for
       a minimum password length.
    
    To test, apply the patch and enable the PatronSelfRegistration and
    OpacResetPassword preferences.
    
    On the following pages, test with RequireStrongPassword both on and
    off. The correct messages should appear.
    
     - OPAC -> Forgot password. Follow the process to reset your password
       until you reach the step where you are entering the new password.
     - OPAC -> Register here. Check the password section of the registration
       form.
     - OPAC -> Log in -> Change your password.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3ef48c8708736e9d5b16e462e520302c007cb4c1
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Feb 20 11:26:40 2019 -0300

    Bug 17746: (QA follow-up) Make set_password.pl generate a password if required
    
    This patch makes the set_password.pl script generate the password if it
    is not passed as an argument.
    
    It also changes the behaviour of set_password.pl: it will now print the
    userid and password (generated or not) to mimick the behaviour from
    koha-reset-passwd.
    
    The koha-reset-passwd gets simplified as it doesn't generate the random
    password anymore, it passes the responsability to set_password.pl
    
    To test:
    - Follow the steps from the original platch
    - Verify all behaves as expected
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e2f6542e1ebbd15977b47c86d2a9ef55fa0c5e9b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Feb 4 15:09:34 2019 -0300

    Bug 17746: Add misc/admin/set_password.pl script
    
    This patch introduces a script that allows changing a patron's password.
    The change overrides the defined password enforcement policy.
    
    If multiple conditions are passed to match on the patron, they all need
    to match. Otherwise an error message is printed.
    
    Attributes to search the patron on:
    - cardnumber
    - patron_id (a.k.a. borrowernumber)
    - userid
    
    we usually know some of them, but if we specify more than one, they need
    to match a patron, together.
    
    To test:
    1) Apply this patch
    2) Have a known patron (i.e. you know the cardnumber, the borrowernumber
       and the userid).
    3) Run:
      $ kshell
     k$ perl misc/admin/set_password.pl --cardnumber <the_card_number> \
                                        --password a_password
    4) Verify you can login with the new password
    5) Repeat 3) through 5) with --patron_id and --userid
    => SUCCESS: You can login in all cases
    6) Try combining some or all the parameters
    => SUCCESS: It fails when it should, it succeeds when it should
    7) Sign off :-D
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0cd4ca289bd2e1bd11fdbd015225a909971ce213
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Feb 5 14:04:12 2019 -0300

    Bug 17746: Make koha-reset-passwd user set_password.pl
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 28e7f1d4e7a114b04d6940463f47351466a638dd
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Mar 20 16:24:42 2019 +0000

    Bug 22550: OPAC suggestion form doesn't require mandatory fields
    
    Test plan:
    1. OPAC->login->your purchase suggestions->New purchase suggestion
    2. Click button "Submit your suggestion" directly without filling in any field.
       Empty suggestion record was added succeffully.
    3. Apply the patch.
    4. Click button "Submit your suggestion" directly without filling in any field.
       The required fields should be labeled in red.
       (you can change the mandatory fields by preference 'OPACSuggestionMandatoryFields')
    
    Signed-off-by: Bin Wen <bin.wen@inlibro.com>
    
    Signed-off-by: Jogiraju,T. <rajujogi.t@gmail.com>
    
    Signed-off-by: Jogiraju,T. <rajujogi.t@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 53b059afbb5731373a92a3ebaaceea4e1d656363
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Tue Mar 12 11:29:33 2019 +0200

    Bug 22495: Restore Elasticsearch mapping for su-geo
    
    Test plan:
    1. Reset mappings
    2. Run perl misc/search_tools/rebuild_elastic_search.pl -d -b -v
    3. Do a search and verify that the Places facet works
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 65f35447e93008810cec3eba63a286b9940d5824
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Mon Dec 17 16:22:58 2018 +0200

    Bug 21974: Make Elasticsearch connection settings configurable
    
    Default settings are appended in get_elasticsearch_params so that there's a central place for them. Defaults can be overridden in koha-conf.xml.
    
    Test plan:
    
    1. Verify that searches still work with the patch applied.
    2. Verify that search fails after adding the following under <elasticsearch> in koha-conf.xml:
    <cxn_pool>Static</cxn_pool>
    3. Verify that search fails after adding the following under <elasticsearch> in koha-conf.xml:
    <cxn_pool>FOO</cxn_pool>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a993bd3843fdfcf3a7f2df916299b32d4601b879
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 27 17:36:35 2019 +0000

    Revert "Bug 22399: Improve responsive behavior of the basic marc editor"
    
    This reverts commit b5a742c62f016969dabad9b786a7fe2d75cca760.
    
    Style changes broke other features of rancor. Reverting to restore functionality
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2be687c419298478c1937f37ce0654ea7bc8bc9e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Mar 27 14:47:27 2019 +0000

    Bug 22008: (follow-up) Additional fix for bad test
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 18f9c3eb514f5733c55d92b16bd0f38d29161290
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 25 12:58:39 2019 +0000

    Bug 21622: (RM follow-up) adjust for changes from bug 21282
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 918328171b66c9633c6bf3c5debb194cc63f1d9d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 27 13:13:48 2019 +0000

    Bug 22008: (follow-up) Additional test fix and fix typo
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c31a50d06a854a15e20abd65d2975033eba2cf0c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 25 19:41:15 2019 +0000

    Bug 22008: Fix failing tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 607eb83bc06410d59aefb6907070865f9f272115
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Mar 25 11:21:45 2019 +0000

    Bug 22565: (QA follow-up) Fix test Acquisition.t
    
    Test plan:
    prove t/db_dependent/Acquisition.t
    should pass
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9bf2b27df5c0b403feea9f78962244d6cbf8a7c8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Mar 25 11:04:37 2019 +0000

    Bug 22565: Add test for ModReceiveOrder regression
    
    This test checks that order_internalnote is only updated for the given
    orderline in ModReceiveOrder.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9acf69f7a690a78bd09af7afbb28e4b32c493903
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Mar 25 10:49:15 2019 +0000

    Bug 22565: Do NOT replace all internalnote's on receive
    
    Bug 21467 introduced a but whereby setting any order_internalnote on
    receive one would end up setting all orders to have that internalnote.
    
    This patch adds the missing WHERE clause to the database query which was
    likely lost during a rebase?
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b879e68326fcebc549d8c5688973b824c31fd761
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 22 20:29:19 2019 +0000

    Bug 22032: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 52bceacd82cdf4e45b2e76bb7353bb84af1ee1b3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Dec 20 16:32:34 2018 +0000

    Bug 22032: Improve local cover image tab on detail page
    
    This patch makes a variety of improvements to the images tab of the
    staff client's bibliographic detail page.
    
    To test, apply the patch and regenerate the staff client CSS.
    
     - Enable the LocalCoverImages system preference.
     - Locate a bibliographic record which has no images attached.
       - There should be a "no images" message and an upload button.
         - Upload an image and return to the detail page.
           - The "Images" tab should have a nicely-styled thumbnail of the
             image you uploaded.
             - Test the "Delete image" link: It should ask for a
               confirmation. If you confirm, the image should disappear and
               a "loading" spinner should appear.
               - When the image has been deleted the thumbnail container
                 should disappear and the "no images" message should
                 reappear.
     - Test this process with AllowMultipleCovers enabled and disabled.
    
    Extra credit: Modify the AJAX url in the removeLocalImage
    function in detail.tt. After misspelling a parameter name or the URL
    path, clicking the "Delete image" link should trigger an alert and
    re-show the image thumbnail.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 441c64d63072d9cd6fd0a97d987dc99a9e0a73ab
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Mar 18 14:33:24 2019 +0000

    Bug 18589: (QA follow-up) Remove dateFormat from javascript on ill requests pages.
    
    This is not needed, the right formatting is done in calendar.inc
    
    Test plan:
    Use datepickers on ILL requests list page and ensure they work as
    expected and the list is right filterred
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e95733da3c46bb9160bd1105a648d693ac4a7acf
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Mar 18 13:40:54 2019 +0000

    Bug 18589: (QA follow-up) Move template to bootstrap grid
    
    Test plan:
    Go to patrons Ill request history page and ensure the layout is not
    broken and is consistant with other patron pages (except Circulation and
    Details pages)
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit aab6564c8c74a94ebedf4fe7590f825cece9bb6d
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Mar 18 09:32:11 2019 +0000

    Bug 18589: (QA follow-up) Rename page to "ILL requests history" for consistancy
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 58a07a2e6b18a9135b0f6dcf0b6c01616e768edb
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Mar 12 09:41:56 2019 +0000

    Bug 18589: (follow-up) Fix merge problem
    
    Bug in passing row to getStatusName
    
    As per item 3) in comment #20:
    https://bugs.koha-community.org/bugzilla3/show_bug.cgi?id=18589#c20
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8378c74c90009df0476f1832d67b859075654bee
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Mar 12 09:19:56 2019 +0000

    Bug 18589: (follow-up) Add borrowernumber test
    
    As per comment #21:
    https://bugs.koha-community.org/bugzilla3/show_bug.cgi?id=18589#c21
    
    We now test borrowernumber filter works. This test has come from
    https://bugs.koha-community.org/bugzilla3/attachment.cgi?id=83184&action=diff
    and will be removed from that bug
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 352d46464ce1dac3d0c8b92f0c43ef583684fc42
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Mon Mar 11 15:58:42 2019 +0000

    Bug 18589: (follow-up) Fix QA tool failures
    
    As per comment #17:
    https://bugs.koha-community.org/bugzilla3/show_bug.cgi?id=18589#c17
    
    Sorry Josef, I honestly have no idea where those tabs came from :( Every
    once in a while my copy of Vim decides to embarass me and stick in tabs
    instead of spaces... <shakes fist at screen>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 17e72b2b1c55d79a5c7cc3cbaa278552ab936c1c
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Mon Mar 11 14:19:36 2019 +0000

    Bug 18589: (follow-up) Remove redundant-ness
    
    Following feedback from Josef via IRC, removing redundant code
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit daac852c04eb0e9c866aef970f8a79e6db9261d3
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Mon Mar 11 11:56:28 2019 +0000

    Bug 18589: Show ILLs as part of patron profile
    
    This patch moves the display of a patron's ILL requests to be inline in
    the Patron Profile page, as per all other patron information.
    
    It includes a substantial refactor of
    koha-tmpl/intranet-tmpl/prog/en/modules/ill/ill-requests.tt in that it
    moves the display of the illlist table (which is populated by an API
    request) into it's own separate include file. It also moves the
    datatable related Javascript for this table into it's own JS file. Doing
    this allows us to reuse both in both the new members/ill-requests.tt
    template and the pre-existing ill/ill-requests.tt template.
    
    To test:
    1) Ensure ILL is enabled and your user has sufficient permissions
    2) Ensure your user has some ILL requests
    3) Navigate to the user's patron profile page
    4) Click on the "Interlibrary loans" tab
    5) Observe that the requests table is displayed inline
    6) Observe that only your user's requests are displayed
    
    Signed-off-by: Niamh.Walker-Headon@it-tallaght.ie
    
    This is essentially a reimplementation of attachment 84796 to take into
    account all changes that had happened beneath this bug and also to
    ensure JS strings are translatable.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e9fa69ca64e78cc9ea540e3fed1e9ffb1b3488fe
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 27 14:49:35 2019 -0300

    Bug 21998: Silent tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ee73d577ed564d98e77cf25fcdadcbc594f7217c
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue Dec 18 11:53:21 2018 +0000

    Bug 21998: Throw exception on bad pattern
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b794643bb075c0aa5de81f2481ae1df56f674309
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Sep 19 15:36:36 2018 +0200

    Bug 21998: Add pattern parameter in Koha::Token
    
    Allow a pattern too in Koha::Token->generate. Only supported length.
    Does not affect CSRF calls. So tiny change without further impact.
    
    Test plan:
    Run  t/Token.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f8c20ac4c91f22017093a2d8ed0dbb8b0a3738bc
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 22 20:04:33 2019 +0000

    Bug 22008: DBRev 18.12.00.031
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ee1f262f1466e96e9676b3650fe2300b55565d53
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Mar 6 08:08:19 2019 -0500

    Bug 22008: Fixes to make unit tests pass
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7f3dd675b7f20bb011c2fb0659526c6fdf9195e4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Feb 27 12:04:46 2019 +0000

    Bug 22008: Add missing constraints
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4e067c83e427e7d76227c11fd8d84780dca2cefb
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Feb 27 12:02:36 2019 +0000

    Bug 22008: Add tests for new constraints
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ce49552e6d46e098385a9d70f848793b7218f194
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 22 19:56:18 2019 +0000

    Bug 20478: Fix qa complaints
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2851d66254fe9dbb0edb2b8991e90de665063fd1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 8 10:35:49 2019 +0000

    Bug 20478: (QA follow-up) Make test more standard
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e7e27a934a1b1d968ea8d00116c0bf17bb196ec1
Author: Andreas Jonsson <andreas.jonsson@kreablo.se>
Date:   Mon Jan 22 10:37:14 2018 +0000

    Bug 20478: Have the cronjob script advance_notices.pl send digest messages per branch.
    
    Desired behavior of the script advance_notices.pl is that the sender
    address on the notice message is that of the branch of the issues in
    question.  Thus, the solution is to generate digest messages per
    branch.
    
    To test:
    1) Inspect unit test in t/db_dependent/cronjobs/advance_notices_digest.t and note that:
       - There are three libraries
       - There is a borrower
       - The borrower is registered at library1
       - The borrower has message preference wants_digest set to 1
       - The borrower has message preference days_in_advance set to 1
       - The content of the letter PREDUEDGST is '<<count>> <<branches.branchname>>'
       - There are three items
       - There is one issue per item
       - There is one issues at library2
       - There are two issues at library3
       - The date_due of the issues are set to tomorrow
       - For the default case (no -digest-per-message)
          - It is asserted that there is one message in the message queue after running the script
          - It is asserted that there are three items in the message.
          - It is asserted that the branchname is that of the borrower's home library.
       - For the case where -digest-per-message is enabled
          - It is asserted that there are two messages in the message queue after running the script
          - It is asserted that the item count of the message corresponding to library2 is 1
          - It is asserted that the item count of the message corresponding to library3 is 2
          - It is asserted that the branchnames are correct.
    2) Run unit test: prove t/db_dependent/cronjobs/advance_notices_digest.t
    
    Sponsored-By: Bibliotek Mellansjö, which is a cooperation between
    Sponsored-By: Gullspångs kommunbibliotek
    Sponsored-By: Hjo stadsbibliotek
    Sponsored-By: Karlsborgs bibliotek
    Sponsored-By: Mariestads stadsbibliotek
    Sponsored-By: Skövde stadsbibliotek
    Sponsored-By: Tibro bibliotek
    Sponsored-By: Tidaholms stadsbibliotek
    Sponsored-By: Töreboda kommunbibliotek
    
    Signed-off-by: Andreas Jonsson <andreas.jonsson@kreablo.se>
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Adding the --digest-per-branch switch turns the digest into one digest per
    library. I think it makes perfect sense to keep the default behaviour
    and hide this new functionality behind a command line switch.
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e18626b6f142128064317e95ef4a7fb089f4f48d
Author: Andreas Jonsson <andreas.jonsson@kreablo.se>
Date:   Tue Mar 27 11:22:45 2018 +0200

    Bug 20478: Refactor to remove code duplication.
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5b97398a3a88ab808121c958ddac5d1cd87ee63b
Author: Andreas Jonsson <andreas.jonsson@kreablo.se>
Date:   Mon Jan 22 08:50:10 2018 +0000

    Bug 20478: Add unit test for advance_notices.pl cronjob.
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 48484173e26bf9859984860a17089f09de5c8b6a
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue Feb 26 09:16:05 2019 +0000

    Bug 19661: (follow-up) Use Basic auth in tests
    
    Test plan:
    
    prove t/db_dependent/api/v1/acquisitions_funds.t
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6e98cc4503cedba411371d4005be41b5822569c8
Author: Matthias Meusburger <matthias.meusburger@biblibre.com>
Date:   Tue Jan 15 10:46:04 2019 +0100

    Bug 19661: Add and change properties and parameters to conform to the funds RFC.
    
    Also, perform an exact search when searching on the fund owner id.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b6be4024196c9e62363eabf0d2ad0b9f9141d15c
Author: Matthias Meusburger <matthias.meusburger@biblibre.com>
Date:   Wed Jan 17 11:49:14 2018 +0100

    Bug 19661: Use Koha::Acquisition::Funds instead of C4::Budgets
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 717975abebe938a5e79ffc07055ed6190b43f206
Author: Matthias Meusburger <matthias.meusburger@biblibre.com>
Date:   Thu Oct 12 07:55:12 2017 +0000

    Bug 19661: REST API - Funds Endpoint
    
    This patch adds a new route to the REST api:
    
    /api/v1/acquisitions/funds/
    
    Signed-off-by: David Bourgault <david.bourgault@inlibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7a9a8f2f08e4b74af712d59e1f1f9f0a7b3205a0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 22 19:20:55 2019 +0000

    Bug 21948: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 32020105e8494ba82a8a505711c5047560c9d304
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Dec 4 19:53:29 2018 +0000

    Bug 21948: Clean up style of item detail page
    
    This patch removes some page-specific style from the item detail page in
    the staff client and adds some markup in order to trigger a more
    generally-used style.
    
    This patch also adds a font-awesome icon to the "Edit item" link on the
    page.
    
    To test, apply the patch and regenerate the staff client CSS. Open a
    bibliographic record and view the "Items tab."
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0ad8984eb51a39beb9c1774d907ef19c7d01396e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 22 19:16:46 2019 +0000

    Bug 21304: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 027f01e0c8ef05c23151085da33137be77faa05b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Mar 19 15:46:42 2019 +0000

    Bug 21304: (follow-up) Correct hc-sticky configuration
    
    This patch corrects the element passed to the hc-sticky plugin to define
    which element the floating toolbar sticks to.
    
    To test, apply the patch and perform a search in the staff client which
    will return multiple results. Confirm that scrolling down the page
    triggers the floating toolbar.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7236422768aa22d8e9157d23d2a2608e6c3e8b5a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Sep 5 12:38:33 2018 +0000

    Bug 21304: (follow-up) Fix style of search results browser
    
    This follow-up revises the style of the search result browser in the
    staff client, making it behave better at smaller browser widths.
    
    The patch also makes a couple of ESLint-prompted changes to browser.js
    
    To test, apply the patch and regenerate CSS.
    
     - Perform a catalog search in the staff client.
     - Click on one of the search results.
     - On the bibliographic detail page there should be results browsing
       controls in the left-hand sidebar.
       - Resize the browser window and confirm that the controls work well
         at various sizes.
       - Test with both the first and last search result.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 374dbe02480ba8aafae7583e9ba8378b33186287
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 2 14:06:23 2018 +0000

    Bug 21304: Update two-column templates with Bootstrap grid: Catalog
    
    This patch modifies several catalog templates to use the Bootstrap grid
    instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags and "text/css" attributes from <style> tags in the
    modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Catalog -> Search
       - Search results
         - Bibliographic details
         - MARC details (viewMARC preference enabled)
         - Labeled MARC details (viewLabeledMARC preference enabled)
         - ISBD (viewISBD preference enabled)
         - Items
         - Checkout history
         - Rota (stock rotation)
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0429aadc217f05a98bbaa51f955b835ac552fd7a
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Feb 6 02:02:11 2019 +0000

    Bug 13735: Update PrepareItemrecordDisplay to use maxlength
    
    The PrepareItemrecordDisplay method used to generate the item
    display on receiving serials was using a hardcoded maxlength
    of 255 on input fields. This patch updates it to use the
    maxlength defined in the frameworks instead as the normal
    item form does.
    
    To test:
    - Create or reuse an existing subscription
    - Make note of the framework the record uses
    - Add an item on receive
    - Check the maxlength on the various fields is set to 255
      (check source code or use developer tools)
    - You can also verify that by adding a long note to
      one of the note fields
    - Apply patch
    - Repeat tests, the maxlength should now be 9999
    - In your framework settings, change the length of one
      of the subfields to another value
    - Verify that the item form reflects the change
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5334e0f32a8b93c407c2bfc931397a0ae70b8d64
Author: Philippe Blouin <philippe.blouin@inlibro.com>
Date:   Tue Sep 11 14:42:03 2018 -0400

    Bug 21130: (Follow up OPAC Results) Prevent HTML class from being translated
    
    This fixes the same issue where "title" is being translated (in fr-CA at least) and thus
    break the javascript impacting the result display in the OPAC
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e64fb90311a9f2b37b49fc670962089cbb3d32de
Author: David Bourgault <dav.bour@gmail.com>
Date:   Fri Jul 27 17:13:42 2018 -0400

    Bug 21130: Prevent HTML class from being translated
    
    Adds a xsl:value-of tag to prevent the value from being translated.
    
    TEST PLAN
    0) Apply patch
    1) Translate
    2) In the opac, div.record has not changed
    
    NOTE:
    I don't know if this bug affects all translations, I noticed it when translating to fr-CA.
    The fix will work for all languages.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 478f2392ce7b7cedd4f1c93ed3c64800a16a425b
Author: Liz Rea <wizzyrea@gmail.com>
Date:   Tue Mar 19 17:52:46 2019 +0000

    Bug 22533: Fix manual invoices from patron accounting
    
    To test:
    Attempt to create a manual fine from the patron accounting page, it
    should fail.
    Apply this patch, restart the things
    Attempt to create a manual fine from the patron accounting page, it
    should succeed.
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a0b81b906d26312aeb5ef6cab035954ad676790c
Author: Liz Rea <wizzyrea@gmail.com>
Date:   Thu Mar 21 01:53:54 2019 +0000

    Bug 22559: Restore OPAC forgotten password functionality
    
    To test:
    
    Enable OpacResetPassword
    Create a borrower with a username and password
    Go to the OPAC, try to reset the password (I always get the reset link
            token out of the message_queue in the database rather than worry about
            receiving the actual email. You do you.)
    Go to the link provided.
    Attempt to set a password, this should fail.
    Apply this patch
    Go through the process again, password should be reset.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c194d0e1478b494a1b60416891e589f2ae318e78
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 22 13:06:49 2019 +0000

    Bug 22330: Fix tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a1a2a76615c7ab25bee00e96b3266438130273d5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Mar 21 19:24:59 2019 +0000

    Bug 21683: Schema updates
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9712c8dcacbd33ed270fb455d8ce06d8d14b97c2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Mar 21 18:21:32 2019 +0000

    Bug 21683: DBRev 18.12.00.030
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a98e7521be9b01acd3f13c5e233072e615701099
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Fri Mar 8 06:22:08 2019 +0000

    Bug 21683: (follow-up) Remove last occurences of statistics.proccode
    
    columns.def is used to define descriptions of db columns in guided
    reports
    
    test is not useful anymore IMO
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 00697631d7905d687b5ccba9cbd3effe40ece67b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 7 08:12:30 2019 +0000

    Bug 21683: (QA follow-up) Drop statistics.proccode
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cb3831317f343a214f5f5fe363de5977a99b8bb9
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 22 14:29:50 2019 +0000

    Bug 21683: (QA follow-up) Koha::Account::Line rebase fix
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bb231e6208fb8e3f0fccc249da2b8a94e715c244
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Fri Feb 22 14:33:17 2019 +0000

    Bug 21683: (follow-up) Polish the change - based on feedback
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6e3da5397e00d4f87bcac20b9965fb317707a14f
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Fri Feb 22 14:27:21 2019 +0000

    Bug 21683: Remove accountlines.accountno
    
    Test plan:
    1) Play with fines, should work OK
    2) Try to print receipts on fines - prinfeercpt.pl, printinvoice.pl
    3) git grep getnextacctno -> no occurences
    4) git grep accountno should return only:
      installer/data/mysql/atomicupdate/bug_21683_remove_column_accountno.perl
      installer/data/mysql/update22to30.pl
      misc/release_notes/release_notes_3_10_0.txt
      misc/release_notes/release_notes_3_22_0.txt
    5) prove
      t/db_dependent/Accounts.t
      t/db_dependent/ILSDI_Services.t
      t/db_dependent/Stats.t
      t/db_dependent/Koha/Account.t
    
    Rescued-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e43e972ec57d9e07839ec2d678652469b9995bd5
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Fri Oct 26 11:02:58 2018 +0000

    Bug 21683: Database update
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 28ff4f6393e65ebfca60c05611fafc926f1fb239
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Mar 20 15:52:07 2019 +0000

    Bug 13763: (follow-up) Strip leading whitespace characters from input barcode
    
    this makes the work with barcodes from input consistant on checking out,
         checking in and renewing
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 48e9082043115416063e66217db60f0054b68088
Author: Hayley Pelham <hayleymapley@catalyst.net.nz>
Date:   Thu Mar 14 04:58:31 2019 +0000

    Bug 13763: Added check for filter syspref in renew.pl
    
    In Circulation->Renew, the renew feature does not check the system
    preference itemBarcodeFilter to see whether the barcode needs to be
    converted. This patch fixes this, adding a check for the system pref and
    applying it accordingly to convert the barcode if it is needed.
    
    Test plan:
    1) In Circulation->Renew, enter a barcode that you know exists in the
    catalogue but add extra spaces, breaking up the barcode. Note that this
    fails with a warning that says 'No item matches this barcode'
    
    2) In system Preferences, set the itemBarcodeInputFilter pref to Remove
    spaces and repeat step1. Note that the result is the same as in step 1
    
    3) Apply the patch
    
    4) Repeat step 1, and note that the filter removes the spaces and the
    item is renewed (or gives an error that indicates it recognises the
    barcode)
    
    Sponsored-by: Catalyst IT
    Signed-off-by: Bin Wen <bin.wen@inlibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bc36d8e06b3b43b09b655718f7fad5a1780b246a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Mar 21 18:11:29 2019 +0000

    Bug 18736: DBRev 18.12.00.029
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0aa4f355d4fa4f973530290044b694ddd2a55e33
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 1 12:51:54 2018 -0300

    Bug 19469: Fix record links on multi holds
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0aeae50229c6a381fe112644b72eefd6848fb655
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jan 15 15:06:06 2019 +0000

    Bug 18736: Calculate tax depending on rounding
    
    Marcel's comments pointed out that while I tried to avoid storing
    rounded values it is required for tax generation.
    
    This patch makes that change and adds test coverage and POD for
    populate_order_with_prices
    
    To test:
    Follow plan on other patches, ensure that orders and totals match on the
    basket, invoice, and budget pages
    
    prove -v t/db_dependent/Acquisition/populate_order_with_prices.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 876323cf5bb5185834a875f3da29ac33f7760ef4
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Dec 14 10:46:56 2018 +0100

    Bug 18736: (QA follow-up) Resolve uninitialized warn from Biblio.pm L3334
    
    Running t/db/Budgets.t:
    Use of uninitialized value in join or string at C4/Biblio.pm line 3334.
    
    Test plan:
    Run again. Verify no warnings left.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2f5e839bf780955d228c9672abce9d6e5ad1aedf
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 28 11:20:49 2018 +0200

    Bug 18736: (QA follow-up) Change to signed, add large int test
    
    [1] Add trivial subtest in t/Number/Price.t
    Checking a negative number and a large number for the MAX_INT change.
    Note: Confusing to have t/Prices.t too.
    
    [2] Change UNSIGNED to SIGNED in get_rounding_sql. Although I did not spot
    problems with negative prices, we theoretically could while casting.
    cast(-2 as unsigned) == 18446744073709551614
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9922d2bf40e2b7429f300d4d73134f9fef3b8c65
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 28 10:09:01 2018 +0200

    Bug 18736: (QA follow-up) Cosmetic changes
    
    [1] Resolve warnings like:
    Use of uninitialized value $rounding_pref in string eq at /usr/share/koha/devclone/C4/Acquisition.pm line 2040.
    
    [2] Fixing unusual use of whitespace too.
    
    [3] Remove list operator from get_rounding_sql return. Only used in scalar
    context.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ca28c83abbd449c7e5f1d7b86760b7fb53741988
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 20 19:34:10 2018 +0000

    Bug 18736: (follow-up) Remove duplicate code and adjust tests
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ab4cf23286219b473820b61bca82c884de274e80
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Sun Sep 16 01:21:16 2018 +0000

    Bug 18736: (follow-up) cast as UNSIGNED instead of INTEGER
    
    More recent MySql versions require the use of SIGNED or UNSIGNED rather
    than INTEGER. UNSIGNED will still work in older installs
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d9b3d0fa36869a40b9db65375dba4972913697d8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 24 11:11:19 2018 +0000

    Bug 18736: Unit tests for GetBudgetHierarchy
    
    prove -v t/db_dependent/Budgets.t
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4ccbae8879a386a1846bb48c18b3722f936dc983
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 24 01:22:35 2018 +0000

    Bug 18736: (follow-up) Fix missing rounding and bad formatting
    
    This patch:
    Adds a missing use
    Uses 'Koha::Number::Price->round()' instead of 'format()' to ensure numeric
    returns
    Ensures too big numbers don't crash round()
    Uses syspref in 'GetBudgetHierarchy'
    
    To test:
    Follow previous test plan
    Check values on admin/aqbudgets.pl are affected by syspref
    Ensure values throughout acquisitions are correctly calculated/displayed
    (even when greater than 1,000)
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b17ca2b701fab5307330b6196590e5d3048978e1
Author: Mark Tompsett <mtompset@hotmail.com>
Date:   Tue Apr 17 23:39:57 2018 +0000

    Bug 18736: (follow-up) Add missing test cases
    
    We now fully cover GetBudgetsPlanCell in these tests
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 00cf699c82aeea46ef5a72bf344fd306430c5aba
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 17 14:37:11 2018 +0000

    Bug 18736: (follow-up) Add tests and FIXME for GetbudgetsPlanCell
    
    prove t/db_dependent/Budgets.t
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bf0882252f242efa8cc9f08625c0abe305d205a6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jun 6 10:37:17 2017 -0400

    Bug 18736: Unit tests for rounding
    
    Unit tests to highlight the issue
    
    To test:
    Prove t/db_dependent/Budgets.t
    prove t/Acquisition.t
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7fe5f8cd2c2d1eddd2a835fb644c262cffcbd34c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Dec 28 15:15:47 2017 +0000

    Bug 18736: Use rounding syspref to determine correct prices in calculations
    
    To test:
    Place an order (no tax just for simplicity)
     listprice/rrp = 16.99
     discount = 42%
     quantity = 8
     estimated calculated at 9.85
     but order total is 78.83, but 8 times 9.85 = 78.80
    Apply patches, set OrderPriceRounding syspref to 'Nearest cent'
    Not order total is now as expected
    View ordered.pl and confirm values are correct
    Complete order, view invoice and confirm values
    View spent.pl and confirm values
    Go through acquisitions module and confirm prices throughout are
    correct.
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit aea90223d6f250d6f74e00244abbb3e0334107b5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Dec 28 15:11:11 2017 +0000

    Bug 18736: Add OrderPriceRounding syspref
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cde6c897d507d8e93453ed62c1f7f579744b9ded
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Mar 20 14:35:24 2019 +0000

    Bug 22330: (QA follow-up) Fix number of tests in Reserves.t
    
    Test plan:
    prove t/db_dependent/Reserves.t
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2b52e54b201ea8917ac6f6f0306cf36218aead9e
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Mar 20 14:29:25 2019 +0000

    Bug 22330: (QA follow-up) Enable datatable in patron search
    
    Test plan:
    Try to search patron for circulation (or for creating hold), when there
    are more than 1 patron, you should see a table with patrons found.
    --> without this patch, the datatable is not created (for example
            sorting the table by clicking to column heading does not work)
    --> with this patch, the datatable works
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 821e754e02b576320c29f00bf3d7d04f2655018a
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Mar 20 07:02:11 2019 -0400

    Bug 22330: (QA follow-up) Fix QA script failure
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dbcd0511e7580cce996965d54982bfcce7c97b14
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Mar 11 14:26:49 2019 -0400

    Bug 22330: (QA follow-up) Remove duplicate use lines, combine and sort remaning lines
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1f35fa518f38e5eea55886b74fb495b3f6105763
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Feb 13 15:45:28 2019 -0500

    Bug 22330: Cache item and library objects when building the holds queue
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a57723fc594e92a197da9470959d4067e3d63221
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Feb 8 14:46:18 2019 -0500

    Bug 22330: Transfer limits should be respected for placing holds in staff interface and APIs
    
    Branch transfer limits are respected for placing holds in the OPAC but nowhere else. This should be remedied.
    
    Test Plan:
    1) Set up a branch transfer limit from Library A to Library B
    2) Verify you cannot set up a hold for an item from Library A for pickup at Library B from the staff interface ( without overriding )
    3) Verify you cannot place that hold via ILS-DI
    4) Verify you cannot place that hold via SIP
    4) Verify a forced hold from Library A to Library B will not show up in the holds queue
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dccc6242fffe8133e07927658327d4bb0d05dd48
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 18 11:17:31 2019 +0000

    Bug 22454: (RM follow-up) Adjusts tests to avoid random failure
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2d8a01172edab1843b093ed484050a787caf6703
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Mar 12 13:14:18 2019 +0000

    Bug 19417: (QA follow-up) Fix missing $raw filter
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0b81721d2d4c6975accc39d4ad456258894e3aba
Author: Liz Rea <wizzyrea@gmail.com>
Date:   Mon Mar 4 20:15:04 2019 +0000

    Bug 19417: Make error just a wee more human
    
    Small follow up to make the text explicitly say "Import of records
    failed" instead of "Failed to submit form"
    
    Users don't even know that they're submitting a form, what they think
    they're doing is uploading records. Let's use their words instead of
    developer words.
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3d167645beae7a05ac6a0dfaac8a87d12b0b4824
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Oct 5 15:26:46 2017 +0000

    Bug 19417: Display full error text when problem importing records
    
    To test:
    1 - Upload a file to stage
    2 - Select your import options
    3 - Delete the file from the server, example:
        sudo rm /tmp/koha_kohadev_uploads/
    4 - 'Click stage for import'
    5 - Get an alert 'Failed to submit form: error'
    6 - Apply patches
    7 - Repeat 1-4
    8 - Get a pretty error with additional info
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 40d0a77a01be40b21f1190b195f47ae88c889b5b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Mar 5 11:00:44 2019 -0300

    Bug 22455: Add Koha::Biblio::hidden_in_opac method
    
    This patch adds a hidden_in_opac method that does the same calculation
    done in places like opac-tags.pl. The condition that is checked is that
    all items belonging to the biblio are hidden. This is the current
    behaviour in the code.
    
    To test:
    - Apply this patches
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Biblio.t
    => SUCCESS: Tests pass!
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5c2f3d236aa97ece1cdcfb1addc33bb46544326e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Mar 5 11:00:31 2019 -0300

    Bug 22455: Unit tests
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f5270a792c3f1ae53f050dc7fb861e14f9869afe
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Mar 5 09:44:59 2019 -0300

    Bug 22454: Add Koha::Item::hidden_in_opac method
    
    This patch adds a hidden_in_opac method that does the same calculation
    done in GetHiddenItemnumbers, but for a single item, and doesn't get the
    OpacHiddenItems syspref, but expects them to be passed as parameters (to
    avoid multiple reads).
    
    To test:
    - Apply this patches
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Item.t
    => SUCCESS: Tests pass!
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit eabd2f0e5464ba4a52f0f638b8af791991c1a7bb
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Mar 5 09:44:40 2019 -0300

    Bug 22454: Unit tests
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3aae5d2751ee5be1fcf4514541a4aee00d5cd01c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 13 04:08:29 2019 +0000

    Bug 22023: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 23ac3f061156f016e9543482833ff8f7f7cd4f64
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue Mar 12 06:11:51 2019 +0000

    Bug 22023: (QA follow-up) Remove console.log used for debugging
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit db454c70432b19389e79d508f28e47338ef127b2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Mar 11 16:07:59 2019 +0000

    Bug 22023: (follow-up) Right-to-left layout improvements
    
    This patch makes some corrections to accommodate right-to-left layouts.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a344b8cf8cd97b46f11966c2e903ccd883529f91
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Dec 18 19:10:14 2018 +0000

    Bug 22023: Further improve responsive layout handling of staff client menu bar
    
    This patch makes a number of changes in order to improve the way the
    staff client's header menu adjusts at narrower browser widths:
    
     - Updated version of Bootstrap 3.3.7 which includes the "collapse"
       JavaScript plugin.
     - Modified default Bootstrap CSS using Bootstrap's customization tool.
       These changes facilitate the removal of some custom CSS (overriding
       Bootstrap) from staff-global.scss.
     - Added Bootstrap config file for loading customizations at
       https://getbootstrap.com/docs/3.3/customize/
     - Revised button classes for buttons in Bootstrap-styled toolbars.
    
       The modified default CSS resets the base font size in Bootstrap to
       better match our global CSS. A side-effect of this is that toolbar
       buttons ended up looking smaller than they should. Changing the
       button class solves this.
    
     - Restructure the header menu in order to allow different rules to
       govern the appearance of the navigational part of the menu
       (Circulation, Search, etc) and the user menu (Set library, My
       account, Log out).
    
     - Modify the cart JS to so that the popup works well at narrow widths.
    
    To test, apply the patch, regenerate the staff client CSS, and clear
    your browser cache.
    
     - Log in to the staff client and observe the layout of the header menu
       as you adjust the browser to various widths.
       - Confirm that sections of the menu "collapse" as the window gets
         narrower.
       - Confirm that dropdown menus behave correctly and that links work.
       - Confirm that the Cart link works as expected when the cart empty
         and when it has items.
    - Install and enable multiple translations, including at least one
      set of sub-languages (e.g. fr-FR and fr-CA).
      - Test the appearance of the language menus in the footer at
        various browser widths.
    - View pages with button toolbars and confirm that they appear unchanged
      (e.g. biblio detail page, patron detail page).
    
    NOTE: While this patch is intended to make improvements to staff client
    responsiveness, it does so within a limited scope. There are still many
    pages which do not work well at narrower browser widths.
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4fdf3c9849b3226a06c71b2bdaeda406e608e125
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 13 05:30:24 2019 +0000

    Bug 21756: DBRev 18.12.00.028
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f97d88ef647fe7a08c101b0e993d4963087f6f6c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 13 04:02:51 2019 +0000

    Bug 21756: Fix spelling error
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 31ed9cf8bfbcae6f937c1d9f9a36be9ba9b8e23a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 7 14:04:23 2019 +0000

    Bug 21756: (QA follow-up) Add offest types to installer file
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cc8e0b904e9881286e45cbe05333948f858b4c45
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 22 09:39:49 2019 +0000

    Bug 21756: (QA follow-up) Add offset_types to database
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d922b8871364f10b3af3daf0dad2a0ca9a0451f8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 22 09:29:49 2019 +0000

    Bug 21756: (QA follow-up) Add `Account Fee` mapping
    
    Required for add_enrolement_fee_if_needed within Koha::Patron
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6f5f675194ba3de51e2f24354893faec2856bc91
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Feb 21 08:47:55 2019 +0000

    Bug 21756: (follow-up) Replace newly introduced manualinvoice call
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0c0ac4161eb02acea55b0543b33e9095a5c9521c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Feb 21 08:41:29 2019 +0000

    Bug 21756: (follow-up) Add test for deprecation warning
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 913b130ee4d7efdf6cff0bbf81136d69ffded4a7
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Feb 20 13:05:38 2019 +0000

    Bug 21756: (QA follow-up) Fix Circulation.t
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0118ccf9dd06ee93cd1d12976d70ab93b1c210fb
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Feb 20 11:10:49 2019 +0000

    Bug 21756: (QA follow-up) Correct the test for 'Lost Item' offsets
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a23577cefae2312efe4f91709dccdf39370504d9
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Feb 20 10:43:47 2019 +0000

    Bug 21756: (QA follow-up) Fix for 'Spurious text after =cut'
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 12a8dfb934bf3819d6581f9df82987475334a302
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Dec 17 08:56:53 2018 +0000

    Bug 21756: Add deprecation warning to manualinvoice
    
    https://bugs.koha-community.org/show_bug.cgi?id=21756
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e0e431bab17c095852c752db64d1ac33147324ed
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Sun Dec 16 13:11:42 2018 +0000

    Bug 21756: Replace manualinvoice with add_debit in tests
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b99180bcaa0b508c3e41c54f4de26399feb35e49
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Sat Dec 15 16:16:33 2018 +0000

    Bug 21756: Remove use of manualinvoice from Koha::Hold
    
    Known Side Effect: Prior to this patch hold cancellation fees
    were not recorded in the FinesLog. After this patch, if the
    FinesLog is enabled then the 'action' will be recorded as
    `create_hold_expiration`.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3fb6cf02895081adb8c3e259a7e5e4e4d659d269
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Sat Dec 15 15:58:46 2018 +0000

    Bug 21756: Remove use of manualinvoice from Koha::Patron
    
    Known Side Effect: Prior to this patch enrolment fees were not
    recorded in the FinesLog. After this patch, if the FinesLog is
    enabled then the 'action' will be recorded as `create_account`.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c0df2d0e8612e1ca428f51462fcfb99fbc3f0009
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Mar 7 14:46:29 2019 +0100

    Bug 21832: add is_expired to ILS-DI example
    
    Test plan :
    1) Apply patch
    2) Enable ILS-DI
    3) Go to <opac URL>/cgi-bin/koha/ilsdi.pl?service=Describe&verb=GetPatronInfo
    4) Check you see is_expired in example response
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 20ce110f5c656f51bad262708d4b577568c1a52a
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Feb 12 15:52:22 2019 +0100

    Bug 21832: add unit test
    
    Adds a check that is_expired exists in service GetPatronInfo.
    
    Test plan :
    Run : prove t/db_dependent/ILSDI_Services.t
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Amended patch: remove ref to bug number, we have git for that
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0748911eb26f2a35d8ba881dcb92e37a979fc9a9
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Nov 14 11:18:58 2018 +0100

    Bug 21832: Restore is_expired in ILS-DI GetPatronInfo service
    
    Since Bug 17578 removed C4::Member::GetMemberDetails, the information "is_expired" disappeared from ILS-DI service GetPatronInfo.
    
    I propose to restore in by adding the code that exisited in C4::Member::GetMemberDetails directly in C4::ILSDI::Services.
    
    Test plan :
    1) Enable ILS-DI webservice
    2) Choose a patron not expired
    3) Call web-service (replace X with patron's borrowernumber) :
       /cgi-bin/koha/ilsdi.pl?service=GetPatronInfo&patron_id=X
    4) You see : <is_expired>0</is_expired>
    5) Choose a patron expired
    6) Call web-service (replace X with patron's borrowernumber) :
       /cgi-bin/koha/ilsdi.pl?service=GetPatronInfo&patron_id=X
    7) You see : <is_expired>1</is_expired>
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 739180594608adba137e294cc81a0034e870f0d2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Mar 7 15:06:26 2019 +0000

    Bug 21070: request.pl details links to biblio instead of moredetail.pl for that item
    
    This patch alters the hold summary page so that links to records with
    item-level holds go to the item detail page instead of the bibliographic
    detail page. There is already a link to the bibliographic detail page in
    the page heading.
    
    To test, apply the patch and place or locate an item-level hold. In the
    list of existing holds for that record, the linked barcode on the
    item-level hold should take you to the corresponding item detail page.
    
    Signed-off-by: Lisette <lisettes@latahlibrary.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2aa868bad2ecc819fc3878d04e65bb04045c4daa
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Mar 6 18:41:12 2019 +0000

    Bug 15911: (follow-up) Allow enter to submit using the submit button
    
    This patch modifies the checkEnter function so that it is possible to
    submit a form by tabbing to the submit button and hitting ENTER to
    submit.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1af8ab1fc73030f903351c0e097ed73f1f869256
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 22 14:27:07 2019 +0000

    Bug 15911: Use noEnterSubmit CSS class instead of prevent_submit.js
    
    This patch removes the use of a separate js file, prevent_submit.js, in
    favor of using a CSS class to trigger the same functionality in
    staff-global.js.
    
    To test, apply the patch and test the following pages to confirm that
    pressing "Enter" when the cursor is in any field in the main form does
    not submit the form.
    
     - In Acquisitions, add to a basket from a new (empty) record
     - In Acquisitions, receive an order line
     - In Serials, locate a subscription and open the "Edit serials" page
       from the "Serial collection" page.
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 46eb540f6401960f10a53bd852c8d8c295d66fb4
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Mar 6 15:24:01 2019 +0000

    Bug 8775: (follow-up) Change column header to "Collection"
    
    This patch changes the table heading for ccode to be "Collection"
    instead of "Collection code." Current templates vary, but "Collection"
    is more logical because we show the description, not the code.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 757ebbc1700af32eab1bde653b29f7b16428cf1c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 22 14:00:37 2019 +0000

    Bug 8775: Add collection code to lost report
    
    This patch adds a column for collection code to the lost items report.
    
    To test, apply the patch and run the lost items report. You should see a
    collection code column.
    
    Test column configuration for this table: Go to Administration ->
    Configure columns. Confirm that the "collection_code" column can be
    configured and that configuration choices are applied correctly.
    
    Signed-off-by: Bin Wen <bin.wen@inlibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b5a742c62f016969dabad9b786a7fe2d75cca760
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 22 17:29:36 2019 +0000

    Bug 22399: Improve responsive behavior of the basic marc editor
    
    This patch makes markup and style changes to the basic MARC editor in
    order to improve the page's handling of smaller browser widths. It adds
    Bootstrap grid markup to the form to help accomplish this.
    
    To test, apply the patch and load a record for editing in the basic MARC
    editor. Adjust your browser width and confirm that the form adjusts well
    to various widths.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ef231b41119237952ce8a445c953c3957c987734
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Sep 24 12:10:47 2018 +0000

    Bug 20658: (follow-up) Fix for QA: Add missing html filters
    
    This patch adds missing filters to the installer header and footer
    include files.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9ceb745fb2f9c226ffab40a32137c8d43d10ad74
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Apr 25 16:28:18 2018 +0000

    Bug 20658: Move template JavaScript to the footer: Installer and onboarding
    
    This patch updates the installer and onboarding templates so that
    JavaScript is included in the footer instead of the header. A new
    include file is added, installer-intranet-bottom.inc, so that only
    required JS is being loaded.
    
    Some markup changes are included to improve validity.
    
    To test, apply the patch and start with a blank Koha database. Run
    through the installer and onboarding processes and confirm that there
    are no problems. Check especially JS-related interactions like
    datepickers and fields which are validated via JS, like the password
    inputs.
    
    NOTE: The qa tool will flag this patch for not using the Asset plugin,
    but it doesn't work correctly for installer files.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3a7332c742467af3af0c728a3d9c21db00fb4666
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Feb 4 21:36:08 2019 +0100

    Bug 18952: Add internal note to acq details tab
    
    Any important notes about an order are usually added to the
    internal note. This patch makes the note visible on the
    acq detail tab in the staff client.
    
    To test:
    - Add a basket
    - Order something
    - Add an internal note for the order
    - Go to the detail page of the ordered record
    - Switch to the Acquisition details tab
    - Verify that with the patch the internal note shows
    - Verify that the new column can be toggled using the
      column visibility settings
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 57cfc3bab7d76c3a382f8111f5d5c9490eb2eb91
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon May 21 12:15:37 2018 +0100

    Bug 20782: Fix link from edifactmessages to invoices
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6ebcc255d3def898c491333bc8702c56b09e4537
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Feb 28 10:00:27 2019 -0300

    Bug 22206: (follow-up) Voted RFC changes
    
    This patch changes expiration_date for end_date as voted when the RFC
    was approved.
    
    It also adds a test for the Location header being added correctly when
    suspending a hold (SWAGGER3.4.1)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1db9598e81abf009b80aa44699061e845c9e87e0
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Thu Feb 21 00:59:22 2019 +0000

    Bug 22206: (QA follow-up) Fix tests for hold suspension api
    
    Test plan:
    
    prove t/db_dependent/api/v1/holds.t
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6067d2d49f790ab9ffead1381c571c14b0ba43ff
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jan 28 07:40:15 2019 -0300

    Bug 22206: Add routes to suspend/resume holds
    
    This patch introduces:
    
    - POST   /holds/{hold_id}/suspension { "expiration_date": "2019-01-30" }
    - DELETE /holds/{hold_id}/suspension
    
    to suspend a hold or resume a suspended hold, respectively.
    
    To test:
    - Apply this patches
    - Run:
      $ kshell
     k$ prove t/db_dependent/api/v1/holds.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bcc150a9c05c1de4fe2fc5e07a5469f90d48953c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jan 28 07:39:47 2019 -0300

    Bug 22206: Unit tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 51a887a81d75c5ae561c17143ae9f70651449f04
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jan 28 07:39:27 2019 -0300

    Bug 22206: OpenAPI spec
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 41f394f4eedc152627080c0b4a89630034706121
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jan 24 16:13:25 2019 -0300

    Bug 20006: (follow-up) Plural class name
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f6b3d9979dc996dff7bf29fd5747e91695f93d0f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jan 24 15:11:21 2019 -0300

    Bug 20006: (follow-up) Fix holds.js
    
    This patch makes holds.js call the endpoint with 'pickup_library_id'
    instead of the old 'branchcode' property.
    
    To test:
    - Place a hold
    - Go to the patron's detail page
    - Go to the Holds tab
    - Change the pickup location
    => SUCCESS: It works!
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fc0d64506d75bde53afa3a3385a7f7f42bd566bc
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jan 24 14:53:30 2019 -0300

    Bug 20006: Adapt /holds to the RFC
    
    This patch makes the /holds endpoint respect the voted RFC. Some
    behaviours are changed as well:
    
    - As we voted to introduce a /public namespace for unprivileged access to
    endpoints, this endpoint gets the ability for owners and guarantors to
    manipulate holds through the API.
    
    - GET /holds now uses the objects->search helper, so it now has
    pagination.
    
    To test:
    - Apply this patches
    - Run:
      $ kshell
     k$ prove t/db_dependent/api/v1/holds.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 52bb9802dda6f6bb3619cc6d8e921ecd8175c8ce
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jan 24 14:51:03 2019 -0300

    Bug 20006: Unit tests fixes
    
    This patch makes the holds endpoint tests pass and expect data structures that match the voted RFC.
    
    As we voted to introduce a /public namespace for unprivileged access to
    endpoints, this endpoint gets the ability for owners and guarantors to
    manipulate holds through the API.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 62f1b2df68f16dcd7eec324d487963f737cbe450
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jan 24 14:48:26 2019 -0300

    Bug 20006: Spec changes
    
    This patch makes the spec match the voted RFC.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0af86d0b9b259bc9b171ea60b92cf96865a71c72
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Mar 11 08:46:54 2019 +0000

    Bug 20563: (QA follow-up) Get requested_partners from api
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5053ceda3c7fd7a0e0f29336e5d0732c03c1836b
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Mar 11 08:46:01 2019 +0000

    Bug 20563: (QA follow-up) Fix number of tests in api/v1/illrequests.t
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0c7d9e4cc884f60af39859dcd674688d98cf3fae
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Apr 13 09:22:26 2018 +0100

    Bug 20563: Allow display of requested partners
    
    This patch adds the display of requested partner email addresses when an
    ILL backend provides the ability to send requests to partners. Partner
    email addresses are displayed in the illlist and illview displays, they
    are also included in the 'illrequests' API response.
    
    * api/v1/swagger/paths/illrequests.json:
      - Add 'requested_partners' as an 'embed' enum
    * Koha/Illrequest.pm:
      - Add 'requested_partners' accessor calling optional backend 'get_requested_partners' method.
      - Store requested partners upon email send, calling optional backend 'set_requested_partners' method.
      - Add 'requested_parners' embed to overloaded TO_JSON method.
    * koha-tmpl/intranet-tmpl/prog/en/modules/ill/ill-requests.tt:
      - Add 'requested_partners' embed to illrequests API call
      - Add render function for "Additional status" datatables column
      - Add display of requested partner email addresses to illlist table
      - Add display of requested partner email addresses to illview display
    
    To test:
    1) Enable Interlibrary loans
    2) Add a backend that supports sending requests to partners, e.g.
    FreeForm
    3) Set up at least one partner
    4) Create an ILL request
    5) Send request to partner(s)
    6) Observe partner(s) email address(es) are displayed in "View ILL
    requests" view
    7) Observe partner(s) email address(es) are displayed in "Manage ILL
    request" view
    
    Signed-off-by: mmg@interleaf.ie
    
    https://bugs.koha-community.org/show_bug.cgi?id=20653
    
    Bug 20563: (follow-up) Fix requested partners
    
    As per:
    https://bugs.koha-community.org/bugzilla3/show_bug.cgi?id=20563#c10
    
    Thanks for the suggestion on merging the "Status" and "Additional status" columns, looks much better!
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a8435679d41663f9045c4b68d65c06678ac71237
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu Nov 29 12:26:33 2018 +0000

    Bug 20563: (follow-up) Fix rebasing bug
    
    Fix erroneous curly brackets
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0c41d8631474ae3fd33a1ff904dc241c791746aa
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Nov 9 12:23:32 2018 +0000

    Bug 20563: (follow-up) Add unit test
    
    Test that requested partners are returned in API response when requested
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6979847e8636d87e46551745e84b54afba64ba00
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 15 19:31:45 2019 +0000

    Bug 18837: DBRev 18.12.00.027
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8fef5120f30b73cd57c8d8f79b288ef0ddbfb608
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Mar 11 08:21:24 2019 +0000

    Bug 18837: (QA follow-up) Fix order of sysprefa.sql
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9e8c18572b1b6dd36edef72d5e47fd62f0c271d1
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Mar 8 11:28:09 2019 +0000

    Bug 18837: (follow-up) Add additional tests
    
    As requested by Josef on IRC, we now mock the unmediated_ill backend
    method and ensure it is called when the ILLModuleUnmediated syspref is
    enabled and ensure it is not called when the syspref is disabled
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 45662b4cc72c2fda2b4f47cfaeb2501b577f899e
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Thu Mar 7 09:49:46 2019 +0000

    Bug 18837: (QA follow-up) Update system preference desciprition
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 67c5956c1915ddab9069a226e45a838380acdf75
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu Apr 26 12:04:58 2018 +0100

    Bug 18837: Introduce delegation to backends for unmediated workflows
    
    This patch adds support to Illrequest.pm to allow delegation of
    unmediated requests to happen in backends that support them.
    
    It is a recreation of
    https://bugs.koha-community.org/bugzilla3/attachment.cgi?id=66629&action=diff
    which had diverged sufficiently as to make it impossible to apply
    
    Signed-off-by: Stephen Graham <s.graham4@herts.ac.uk>
    Signed-off-by: David Peacock <d.m.peacock@herts.ac.uk>
    Signed-off-by: Jayne Maisey <j.maisey@herts.ac.uk>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b1e076fab0da49d7480d22b8c440342af0bbc652
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu Apr 26 11:56:19 2018 +0100

    Bug 18837: Add ILL Unmediated syspref stuff
    
    This patch adds the syspref requirements for unmediated ILL requests. It
    is a recreation of
    https://bugs.koha-community.org/bugzilla3/attachment.cgi?id=66628&action=diff
    which had diverged sufficiently as to make it impossible to apply.
    
    * installer/data/mysql/atomicupdate/illunmediated_tables.sql: New
      file.
    * installer/data/mysql/sysprefs.sql: Add `ILLModuleUnmediated`.
    * koha-tmpl/intranet-tmpl/prog/en/modules/admin/preferences/admin.pref:
        Add `ILLModuleUnmediated` handling.
    
    Signed-off-by: Stephen Graham <s.graham4@herts.ac.uk>
    Signed-off-by: David Peacock <d.m.peacock@herts.ac.uk>
    Signed-off-by: Jayne Maisey <j.maisey@herts.ac.uk>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7413de82f2d3f4cc359c9963bcfb9008f8d048f4
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu Jul 12 11:12:00 2018 +0100

    Bug 21063: Add "Columns settings" for ILL
    
    This patch adds the "Columns settings" values for the illrequests table
    
    Signed-off-by: Niamh.Walker-Headon@it-tallaght.ie
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Bug 21063: Add ability to show / hide columns
    
    This patch adds the "Column visibility" functionality to the main ILL
    request list table.
    
    To test:
    - Ensure ILL is enabled and you have some requests
    - Apply patch
    - From the "Koha administration screen, select "Configure columns"
    - In the "Columns settings" page:
      => TEST: Ensure an "Interlibrary loans" category exists
      - Upon expanding the category:
      => TEST: Ensure a table is displayed showing columns
      => TEST: Ensure the "action" column has "Cannot be toggled"
      pre-selected
      => TEST: Change values for columns and ensure they're saved
    - From the main staff menu, select "ILL requests"
    - In the table:
      => TEST: Click the "Column visibility" button and ensure a modal
      containing all columns (except "Action")  is displayed
      => TEST: Select various columns and ensure they are shown and hidden
    
    Signed-off-by: Niamh.Walker-Headon@it-tallaght.ie
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Bug 21063: (follow-up) Add user ID to column list
    
    As originally specified in bug 20883, there is a requirement for some
    users to be able to display the user ID (borrowernumber) in the UI.
    
    This patch adds that ability to this bug, 20883 will be marked as a
    duplicate of this one.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Bug 21063: (follow-up) Amendments for rebase
    
    Modify to add the additional changes required now we're rebasing on top
    of the dependency tree. Includes adding additional columns (and changing
    indexes for search/filter where appropriate)
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Bug 21063: (follow-up) Add comments to column list
    
    Since this bug is now dependent on Bug 18591 (Allow an arbitrary number
    of comments on ILLs) we need to add the comments column to this table
    and the list of selectable columns. This patch does this.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Bug 21063: (follow-up) Sanitize datatable data
    
    This mitigates bug 22268 by sanitizing data prior to display using the
    built in $.fn.dataTable.render.text() helper provided by Datatables.
    
    The patch was added here, rather that in 22268 since this is the bug
    that introduced the problem by increasing the number of fields that are
    displayed in the table, some of which could contain user provided
    malicious data
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d777714a573c027dbb4d03f65ae065348ae2448c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 15 19:21:25 2019 +0000

    Bug 20750: DBRev 18.12.00.026
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3b01a6d063d0e40d3a97fe00dec2b4d4d9ce1c27
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Thu Feb 28 11:14:46 2019 +0000

    Bug 20750: (QA follow-up) Fix templates
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 58b81110dcd871bb0eb5131f4af2b3179dbcc2d5
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Oct 2 14:56:53 2018 +0100

    Bug 20750: Add unit tests
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Bug 20750: (follow-up) Remove status_alias test
    
    This test is now redundant.
    
    We can't test the return of $req->status_alias against the value of
    $req->{status_alias} any more since we've overloaded the status_alias
    method and it won't always return the value of the object's property.
    
    We test the functionality of the status_alias method elsewhere so we're
    still covered.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 79d64a37a0d200fc3f6ecf03731ff6c954fc0749
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Oct 2 14:55:58 2018 +0100

    Bug 20750: Allow logging of arbitrary actions
    
    This patch allows logging of arbitrary actions on request objects. A
    chronological summary of these actions can then be displayed when
    viewing a request.
    
    This patch also adds logging of request status changes. Additional work
    has been done on the BLDSS backend to log requests to the BLDSS request
    status check API.
    
    To test:
    - Apply patch
    - Ensure the Illlog logging preference is turned on
    - Create an ILL request and perform actions on it that change it's
    status.
    - Navigate to the "Manage ILL request" screen
    - Click the "Display request log" button
    - Observe that a modal opens displaying a summary of the status changes.
    
    Signed-off-by: Niamh Walker <Niamh.Walker-Headon@it-tallaght.ie>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Since this bug now is dependent on Bug 20581, it should be aware of the
    custom statuses provided in 20581. This patch enables logging of request
    statuses being changed to custom ones. As such the test plan is
    modified:
    
    To test:
    - Apply patch
    - Ensure the Illlog logging preference is turned on
    - Ensure you have some custom request statuses defined in the
    Authorised Values ILLSTATUS category
    - Create an ILL request and perform actions on it that change it's
    status.
    - Edit the request and change status to a custom one
    - Navigate to the "Manage ILL request" screen
    - Click the "Display request log" button
    - Observe that a modal opens displaying a summary of the status changes.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a13dff4b88b0c4efc66a05fa33870d81291da9db
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Mar 15 10:32:14 2019 -0400

    Bug 14591: (QA follow-up) Fix call to AddReturn for SIP
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6757591297a148744ca714502271a11ee4b737e6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 15 13:33:11 2019 +0000

    Bug 21846: Update Schema
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0c4bf00c30ce25165a5243bced7b7e19746a7e0b
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri May 25 16:51:15 2018 +0200

    Bug 20823: UNIMARC XSLT add subfield t for subjects
    
    In UNIMARC, 604 contains subfield t, see http://multimedia.bnf.fr/unimarcb_trad/B604-6-2011.pdf.
    Actual XSLT files use template tag_subject for 604, it does not use t subfield.
    
    This patch adds subfield t to tag_subject and tag_onesubject templates in intranet and OPAC XSLT files.
    
    Test plan :
    1) In UNIMARC catalog edit a biblio record to add 604$t
    2) Use default XSLT files in sysprefs
    2) Go to catalogue details page of this record using default XSLT files
    3) Check $t is displayed at OPAC and intranet
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 08ea70c109ce3432b5dd1a781d126c7353fca3da
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Mar 4 16:57:26 2019 -0300

    Bug 22219: Remove duplicated items in inventory (when skipping waiting holds)
    
    Test plan:
    0/ Do not apply this patch
    1/ Place several holds on a given item
    2/ Use the inventory with the "skip waiting holds" option to list this item.
    It will be displayed several times
    3/ Apply this patch and confirm that the item is now only displayed once
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2be9fd23d2e9aa91e2e1f38a2817a54a5cdc5d21
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Mar 4 16:52:30 2019 -0300

    Bug 22219: Add tests
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3e7620cf46d2e7079ff5494070ff6933fb9650af
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Mar 7 17:28:34 2019 +0000

    Bug 22477: Missing DataTables configuration when searching patrons for holds
    
    This patch adds columns configuration to the holds request page to fix a
    JavaScript error in the console and to allow the patron search results
    table to be enabled as a DataTable.
    
    To reproduce: Place a hold on a title in the staff client. When prompted
    for a patron, perform a search which will return multiple results. The
    patron search results will appear in an unsortable table. A JS error can
    be seen in the browser console.
    
    To test, apply the patch and repeat the steps above. The patron search
    results table should be sortable and there should be no JS error.
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    Signed-off-by: Bin Wen <bin.wen@inlibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3d462af21f3c13312b0ffb8496e55d277f703ebd
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 15 12:32:49 2019 +0000

    Bug 21846: DBRev 18.12.00.025
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 180781f4748d689674a9f91f546d8e76324e7291
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 26 17:01:41 2019 -0300

    Bug 21846: Simplify ugly double for loops
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d7c0547bd20bd266ea8cd023ac4be22c2a9644d0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 26 16:32:44 2019 -0300

    Bug 21846: Fix pod2usage return values
    
    According to existing pattern.
    However I am not sure it makes sense to return an errno (and print to STDERR)
    if --help is passed.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fa4aeaa87e957298874263ec7c3f8478fcaf8b49
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Feb 26 15:41:02 2019 -0300

    Bug 21846: (QA follow-up) Fix maintenance script path
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 293eee9959925397e4fdc84ae0d4baea2cf7d94c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jan 8 13:13:46 2019 -0300

    Bug 21846: (follow-up) Add maintenance script
    
    This patch adds a maintenance script that generates the missing
    tags_approval entries based on the tags_all table, and then recalculates
    the weights for both tags_approval and tags_index tables.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 04f1b0ca950a5a133f6afe6785787d1982414a1e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 23 16:47:05 2018 -0300

    Bug 21846: Make 'term' use utf8mb_bin collation on tags tables
    
    This patch makes the utf8mb4_bin collation preferred for comparing tags.
    Otherwise suppolemental unicode characters all match.
    
    To test:
    
    - Enable tags and disable moderation (or plan to moderate and accept tags)
    - Tag 3 records:
       a - with 🐋
       b - with 🌮
       c - with 👍
    - Note the weight on each says '3'
    - Click the tag to search, you get back all the records
    - Apply the previous patches from this bug report
    - Run:
      $ kshell
     k$ prove t/db_dependent/Tags.t
    => FAIL: Tests fail, related to counting stuffs
    - Apply this patch and
    (a) Run updatedatabase to upgrade the schema
    - Run:
     k$ prove t/db_dependent/Tags.t
    => SUCCESS: Tests pass!
    (b) reset_all to get a fresh DB using kohastructure.sql
    - Run:
     k$ prove t/db_dependent/Tags.t
    => SUCCESS: Tests pass too!
    - Sign off :-D
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 865f9a165d5d5e025737324843eccb5c39a74efb
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 23 15:30:52 2018 -0300

    Bug 21846: Regression tests for add_tag_approval
    
    Due to collation issues, add_tag_approval wrongly calculates
    the weight for strings including extended UNICODE characters.
    
    This patch introduces a test for this situation.
    
    To test:
    - Apply this patch on master
    - Run:
      $ kshell
     k$ prove t/db_dependent/Tags.t
    => FAIL: Tests fail because all extended characters match the same
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6c86de628d5873b88a7d6d2d676ecd7b98345aa7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 23 15:44:04 2018 -0300

    Bug 21846: Add Koha::Tags::Approval(s) and Koha::Tags::Index(es)
    
    In order to avoid writing the tests using plain DBIC which would later
    need to be replaced by a Koha::Object-based counterpart, I introduce
    this stub classes.
    
    Stub tests are added as well.
    
    To test:
    - Apply this patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Tags.t \
              t/db_dependent/Koha/Tags/Approvals.t \
              t/db_dependent/Koha/Tags/Indexes.t
    => SUCCESS: Tests pass
    - Sign off :-D
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1464328718619a673f233406fdb238f0391b0785
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 15 12:22:32 2019 +0000

    Bug 21987: (RM follow-up) Add text for simple tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5c41d584cb654efbfd8c854bac0d30d87a054ab5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Dec 18 14:02:19 2018 -0300

    Bug 21987: Do not generate true color thumbnails if not needed
    
    If the original image is not a true color image we should not generate a
    true color thumbnail.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit afb39b132b10b74efec31cd8191cdcd72a61d8d3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Dec 18 14:02:14 2018 -0300

    Bug 21987: Add tests
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ed5b7e4575917f07a3e895be754abc2bacc37337
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 11 14:47:01 2019 +0000

    Bug 22493: Clean up DecreaseLoanHighHolds.t
    
    To test:
    
    1 - prove -v t/db_dependent/DecreaseLoanHighHolds.t
    2 - should pass
    3 - read code, confirm changes make sense
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d48ae4adafbcb1700ac718c45d78957eb2db3b2e
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Fri Mar 15 09:41:22 2019 +0000

    Bug 14591: (QA follow-up) Fix AddReturn call in Circulation/issue.t
    
    Test plan:
    prove t/db_dependent/Circulation/issue.t
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a8c473c69160634fb18c0dc9de3b72a011ccd719
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 14 16:30:55 2019 +0000

    Bug 14591: (QA follow-up) Optimize DateTime passing
    
    We were passing around possibly undefined $return_date variables from
    AddReturn and then instantiating a new DateTime object as a default for
    each routine. This followup sets the default higher up the stack within
    AddReturn which provider clearer logic and a small performance
    improvment.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 004609e46814791fac540e1c8bfb21f647758143
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Mar 14 08:20:53 2019 -0400

    Bug 14591: Update unit tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bc24973c778ce77f1d3726eaad3ce1bc387cd480
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Mar 14 07:58:09 2019 -0400

    Bug 14591: Update other calls to AddReturn
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 467c24cb9da02deb00bf49333351a0843cdeda10
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Mar 14 07:54:09 2019 -0400

    Bug 14591: book drop / drop box mode incorrectly decrements accrued overdue fines
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9f5a1bc7ebbe3954607da88b87bab6e9c2689dad
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Feb 28 16:13:11 2019 -0500

    Bug 22043: (QA follow-up) Add parameter to control behavior
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7b4ee00a580807b6021758a790fec23c743719d2
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Dec 21 13:54:18 2018 -0500

    Bug 22043: SIP Checkin Response alert flag set to often set to Y incorrectly
    
    If a checkin has any messages at all, even informational like LocalUse, the alert flag ( 4th character of the response ) will be set to Y, even if we do not prove a corresponding alert code in the CV field. We should only set the alert flag if we are going to send a value in the CV field.If a checkin has any messages at all, even informational like LocalUse, the alert flag ( 4th character of the response ) will be set to Y, even if we do not prove a corresponding alert code in the CV field. We should only set the alert flag if we are going to send a value in the CV field.
    
    Test Plan:
    1) Set the checked_in_ok sip account flag to 1 for an account
    2) Check in an already checked in item via SIP
    3) Note the alert flag is set to Y
    4) Apply this patch
    5) Restart SIP
    6) Check the item in again
    7) Note the alert flag is set to N
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Jill Kleven <jill.kleven@pueblolibrary.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1934ca1100517ca1622c9c2c0587832504064b25
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue Feb 26 15:05:50 2019 +0000

    Bug 22222: Don't send empty params to mana service
    
    Test plan:
    0) Do not apply the patch
    1) Go to serials > Search on Mana
    2) Insert some value into the form
    3) Submit -> you get many (3000+) results
    4) Apply the patch and restart_all
    5) Repeat, now, you get only the subscription matching your query
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9682cc7d21645a673bd274b24aeab323f61f28aa
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Mar 7 16:49:11 2019 +0000

    Bug 22476: Correct default for MarkLostItemsAsReturned
    
    Signed-off-by: Bin Wen <bin.wen@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 639ad97d844f2774f49881174b559293edd6baa4
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Mar 5 15:51:15 2019 +0100

    Bug 21560: (follow-up) move use at the top
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 99ea714345a6278d68e2abb0d182d8b495cf2950
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Feb 19 12:01:16 2019 +0100

    Bug 21560: Unit test for Koha::Util::OpenDocument
    
    Run prove t/Koha/Util/OpenDocument.t
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ffb40290f88380418635a951dbb0788bf7b7e3ce
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Mon Feb 18 17:33:37 2019 +0100

    Bug 21560: create Koha::Util::OpenDocument with subroutine for ODS generation
    
    There is nearly the same code in misc/cronjobs/gather_print_notices.pl and reports/guided_reports.pl.
    This patch creates a new module with subroutine called by both scripts.
    
    If file path or content is undefined, subroutine will just return undef.
    If content is an empty arrayref, empty ods file is still generated.
    
    Unicode encoding is kept outisde because it may not be necessary.
    
    Note that for print notices the first line of message is always the column names so it is extracted only from first message.
    
    Test plan :
    Run previous patches test plans and check ODS files are the same.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5d4f80feac811a9d6e177975b50c57ba85e3434d
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Dec 7 10:30:30 2018 +0100

    Bug 21560: Optimize ODS export of gather_print_notices.pl
    
    Like previous patch, the call on OpenOffice-OODoc lib can be optimized.
    Based on https://grep.metacpan.org/search?qci=&q=expandTable&qft=&qd=OpenOffice-OODoc&f=examples%2Ftext2table
    
    Test plan inspired from Bug 11679.
    
    Test plan:
    - define your ODUE notice for the print template as:
    cardnumber:patron:email:item
    <<borrowers.cardnumber>>:<<borrowers.firstname>> <<borrowers.surname>>:<<borrowers.email>>:<item><<items.barcode>></item>
    - define overdues rules for a patron category
    - check-out 2 items using a due date in order to generate the overdue notices
    - check-in these 2 items
    - launch the script /misc/cronjobs/overdue_notices.pl
    - the 'message_queue' table should now contain 2 new entries
    - launch the gather_print_notices cronjob :
      perl misc/cronjobs/gather_print_notices.pl /tmp/test --ods --letter_code=OVERDUE -d=:
    - A ods file should be generated in your /tmp/test directory
    - Compare times with and without patch
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 28edd8848320fd0f0f284245f2f0567a5907619a
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Oct 12 14:09:54 2018 +0200

    Bug 21560: report ODS export optimization
    
    SQL reports can be exported with CSV, TSV of ODS format.
    When report has thousands of rows, using ODS format is around 10 times longer than other formats.
    It also loads CPU and RAM a lot.
    
    The longest call is expandTable().
    I found that the call on OpenOffice-OODoc lib can be optimized.
    Based on https://grep.metacpan.org/search?qci=&q=expandTable&qft=&qd=OpenOffice-OODoc&f=examples%2Ftext2table
    
    Test plan :
    1) Don't apply patch yet
    2) Create a new SQL report : Home > Reports > Create from SQL
    3) Enter a SQL that will return thousands of results
    4) Run report
    5) Click Download > Semicolon separated text (.csv), look execution time
    6) Click Download > Open Document Spreadsheet, look execution time
    7) Apply patch
    8) Redo 5) and 6) and compare times, CSV export should be the same but ODS export should be better
    
    My tests shows 1,5 seconds for CSV export.
    And for ODS export : 18 seconds without patch and 8 seconds with patch.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3bd900496690375b2b711743ffaa57371388f687
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon Mar 4 17:43:29 2019 +1100

    Bug 22429: Infinite loop in patron card printing
    
    Text fields in Patron Card Text Layouts can contain regular
    expression metacharacters, which - instead of being treated as
    literal values - are interpreted and prevent line wrapping. This
    causes the process to get stuck in an infinite loop, which keeps
    running even after the web server has timed out (at least when
    using CGI).
    
    This patch escapes the relevant input from the text field so the
    regular expression substitution treats characters as literals
    instead of as metacharacters.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2596e9b795d9e65e4f68a72bb587d323c97bad92
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jan 30 17:13:35 2019 +0000

    Bug 22237: Subscriptions are not linked to Mana upon edit
    
    This patch modifies C4/Serials.pm so that during the process of editing
    a subscription a link to Mana can be created.
    
    To test, apply the patch and go to Serials.
    
     - Locate a subscription which was not created using Mana data but which
       can be found in Mana.
     - Edit the subscription, skipping to the second page.
     - View the results returned by Mana and select one.
     - Save the subscription.
     - Upon being redirected to the subscription detail page you should see
       a "Report mistake" button. This shows that the subscription has been
       linked to Mana successfully.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit deb968ea45276e56826b592026617a96398b61da
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Feb 8 20:24:05 2019 +0000

    Bug 22296: Add Invoice Adjustments to GetBudgetHierarchy
    
    To test:
    1 - prove -v t/db_dependent/Budgets.t
    2 - Create some invoices on a single budget
        Invoice 1:
          add a non-encumbered adjustment for 1
          add an encumbered adjustment 2
          leave open
        Invoice 2:
          add a non-encumbered adjustment for 4
          add an encumbered adjustment for 8
    3 - View acq home page, should see 2 order and 12 spent for the budget
    4 - View the spent and ordered pages, they should show the correct amounts
    5 - Add more orders etc and confirm things total correctly
    
    https://bugs.koha-community.org/show_bug.cgi?id=22296
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 19aebacf7c6162e5628cba1078b2c0f2ec9751a6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 12 13:15:34 2019 +0000

    Bug 22498: Rename variable for budgets loop for invoice adjustments
    
    To test:
    1 - Try to add some adjustments to an invoice (receive shipments, create invoice, click 'finish receiving')
    2 - Note the fund dropdown has only 'No fund'
    3 - Apply patch
    4 - Refresh page
    5 - Note you can now select funds, hooray!
    
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3c4232e746cef574de9d1a346be7704dc3cd2e33
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Mar 12 17:29:38 2019 +0000

    Bug 22489: Update onboarding tool for bug 18925
    
    When going through the onboarding process, the tool fails on submit of step 5,
    due to changes made in the database structure and rule definitions by bug
    18925.
    
    This patch fixes this, adding code that creates a circulation rule where an
    issuing rule is also created in onboarding.pl. It removes maxissueqty from
    being sent with params to make an issuing rule, and adds it instead to the
    params to make a circulation rule, to reflect the changes that have been made
    in the database.
    
    Test plan:
    1) Drop and recreate your database
    2) Reload the staff client and follow the installer and onboarding
    process
    3) Confirm that the process finishes without errors
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Bug 22489: (follow-up) Correctly set success messages
    
    The original patch was duplicating the success message upon successful
    circ rule insertion. This corrects that.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Patches squashed for readability
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 585273b6147d0cda646296a5121e7a3af021473c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 11 13:08:54 2019 +0000

    Bug 11375: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit af182e4d11c570cac02a659007b2991716174b7d
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Feb 25 14:49:18 2019 +0000

    Bug 11375: (QA follow-up) Remove some more treeview occurences
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a38c49f33f80a5198772a7d43bdec78f51f23724
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Feb 25 14:32:23 2019 +0000

    Bug 11375: (QA follow-up) Fix typo
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d58d61abff146b9b33b651f6486e580e0f5a5462
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jan 17 15:37:15 2019 +0000

    Bug 11375: (follow-up) Add links to show all/hide all
    
    This patch adds links in the toolbar to show or hide all
    sub-permissions.
    
    To test, apply the patch and view the permissions page for a patron.
    Clicking the "Show all" or "Hide all" links should work to show or hide
    all sub-permissions. The corresponding "Show details" and "Hide details"
    links for each permission set should be correctly toggled.
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d9be495c36384d4a003e3b3b8938a75584df599d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 24 13:48:48 2018 +0000

    Bug 11375: Improve patrons permissions display
    
    This patch updates the patron permissions interface in order to
    emphasize permission descriptions (which can be translated) over
    permission code (which cannot).
    
    The tree structure (and jQuery plugin) is removed, and permissions are
    displayed in a table-like way. Sub-permissions are shown or hidden with
    a link.
    
    A free-text filter is added to the top for narrowing the list by
    keyword.
    
    Save and cancel buttons are now in a floating toolbar.
    
    To test, apply the patch, regenerate the staff client CSS, and clear
    your browser cache if necessary.
    
     - Open the "Set permissions" page for any patron.
     - Confirm that the filter works correctly to show only lines which
       match your entry
       - Note that the superlibrarian line stays visible all the time. This
         is to make it clearer that sub-permissions cannot be selected if
         superlibrarian is checked.
     - Check the superlibrarain "hint" text for clarity.
     - Test the show/hide controls.
     - Test that checking a "parent" permission displays the
       sub-permissions.
     - Test that the toolbar with Save and Cancel floats when scrolling.
     - Test that changing and saving permissions works correctly.
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c3f28829e50690da8fdfa104cdbacb3d0354da18
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 11 13:03:37 2019 +0000

    Bug 22368: DBRev 18.12.00.024
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b701ceae34664e2121942b3e16220cc6f419022e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 26 17:23:13 2019 -0300

    Bug 22368: Make sure the tests will always pass
    
    Who knows!
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1083256d4168672a1d4bc631fbb42d221371a8ee
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Feb 26 17:35:22 2019 +0000

    Bug 22368: (QA follow-up) Changed to LEFT JOIN as requested
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8856f3933bce2602df860780d1db1a6145f88e0a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Feb 25 12:39:19 2019 +0000

    Bug 22368: (QA follow-up) Switch to using foreign_key_exists
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e024c38c7750b8eeb903fb1182e6fd9b520d5ec3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Feb 20 16:51:22 2019 +0000

    Bug 22368: (QA follow-up) Missing comma in kohastructure.sql
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3459fd9493e2ae28ac86c3d5861469cc82c3cc2f
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Feb 20 16:08:38 2019 +0000

    Bug 22368: (QA follow-up) Mute db errors in test
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f8466fcc6a614c81d5b473be59782bb7ef74feba
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Feb 19 14:03:34 2019 +0000

    Bug 22368: Add missing constraints to `suggestions`
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dc644fcb0afc05023c07cf2cd299e37e432b239c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Feb 19 15:31:20 2019 +0000

    Bug 22368: Add tests
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7c38f63d85f3cd8024bc7038ec7f3e6db6e14f57
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Feb 25 21:43:17 2019 +0000

    Bug 19489: (QA follow-up) Revert changes in printinvoice
    
    It would be change behaviour, libraries are often using POS printers and
    wider table could make a problem for them and break theirs workflow.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9e6d6f4e7c14eb3ec2fea7551d93041d8fbc6583
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Feb 25 21:36:31 2019 +0000

    Bug 19489: (QA follow-up) Remove passing issue_id in pay form
    
    This is not needed
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bc269304f42ce653036805f8574261f7d30b95ac
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Feb 25 21:33:12 2019 +0000

    Bug 19489: (QA follow-up) Update test to use objects and module methods for creating needed data
    
    Test plan:
    prove t/db_dependent/Koha/Account/Lines.t
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 94f5a270ed83b4061fd9dd5ad9046ebf4b728283
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Feb 25 21:32:39 2019 +0000

    Bug 19489: (QA follow-up) Cache checkout object in variable
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ac3223342e26b60d9d2cc2f601ed1c097f1e48bd
Author: Nazlı Çetin <nazli@devinim.com.tr>
Date:   Wed Feb 20 07:21:33 2019 +0000

    Bug 19489: (follow-up) Fix typos in the tests
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit add47bf472cefacc6efafe0c73a36a1ea309de81
Author: Nazlı Çetin <nazli@devinim.com.tr>
Date:   Tue Feb 19 12:45:56 2019 +0000

    Bug 19489: Change method name issue --> checkout
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6338bf19a861df01f38b11eb35361760909583ab
Author: Nazlı Çetin <nazli@devinim.com.tr>
Date:   Mon Feb 18 09:50:10 2019 +0000

    Bug 19489: Detailed Description of charges in Patron accounting
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7bdbea041767393991dab2f6fa7a9065d97c79f1
Author: Nazlı Çetin <nazli@devinim.com.tr>
Date:   Mon Feb 18 09:44:24 2019 +0000

    Bug 19489: Koha::Account::Line->issue method and Unit test
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d885aefcd56e827e3f5f19a47636bff17474d804
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 21 16:02:31 2019 -0300

    Bug 22392: Reuse existing pattern
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3189df3ac9ea5ebabc53be0c12eb192afbd68842
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Feb 21 17:26:33 2019 +0000

    Bug 22392: Allow barcode to be passed to build_sample_item
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 417e13225320f124ba6be6a11d0546e0568b24da
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 11 12:33:35 2019 +0000

    Bug 22045: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4d3144310c00398b1f6629c27466bdce04436841
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Feb 14 19:37:21 2019 +0000

    Bug 22045: (follow-up) Fix tab-switching when some tab numbers are missing
    
    This patch changes the way tab-switching is done so that it switching
    tabs based on tab id rather than tab index. Using tab index doesn't work
    when the tab number doesn't match the tab index.
    
    To test, apply the patch and load a record or blank editor using a MARC
    framework which doesn't include one or more tabs (for instance, by
    deleting the entries in the framework for one tab:
    
    DELETE FROM marc_subfield_structure WHERE frameworkcode = 'KT' AND tab = 4;
    
    ...backup first). In the MARC editor the numbered tabs should exclude
    that number. Tab-switching should work correctly.
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 41a8c11fbb7525b5a767d2a37c1e2b473a78a45b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Feb 11 17:13:55 2019 +0000

    Bug 22045: (follow-up) Revert change to numbering of tabs
    
    I wanted the tabs to be numbered like humans count, starting from 1.
    But if the MARC framework setup isn't changed as well it doesn't make
    sense. This patch removes the change.
    
    Also fixed: Some missing template filters, an errant console.log()
    removed.
    
    To test, apply the patch and open a new or existing record for
    editing. The tabs (now "Sections") should be labeled from 0-9.
    
    Signed-off-by: John Doe <you@example.com>
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a134b69cf616aab944282924cf21ed0c11fd5f33
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jan 10 13:07:10 2019 +0000

    Bug 22045: Cataloging UX enhancement - Improve access to tabs
    
    This patch makes style changes to the standard MARC editor with the goal
    of both making it more responsive and making it easier to navigate among
    tabs and tags.
    
    Tabs are now part of the page's toolbar, which floats as the page
    scrolls. In addition to the numbered tabs, there is also a section
    showing in-page links to the MARC tags which are available on that page.
    
    To test, apply the patch, regenerate the staff client CSS, and clear
    your browser cache if necessary.
    
    Open a blank or existing record in the standard cataloging editor. Test
    the redesigned tabs, the floating toolbar, and the in-page tag links.
    Confirm that everything works well at various browser widths.
    
    Signed-off-by: Mikaël Olangcay Brisebois <mikael.olangcay-brisebois@inLibro.com>
    
    Signed-off-by: John Doe <you@example.com>
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 18f06151dc951354f3463ed613d9af0cb23bbf2f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 22 07:36:11 2019 -0300

    Bug 21091: Add missing USE raw statement
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1253975389975a8ff11a9bb2ef84582aeb6bd08b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 28 17:51:10 2018 +0000

    Bug 21091: Move add item template JavaScript to a separate file
    
    This patch moves the JavaScript in the add item template to separate
    files: 1 JS file and 1 include file containing translatable strings.
    
    While moving the JS to cataloging_additem.js I have made some changes to
    quiet ESLint warnings (spacing, variable definition).
    
    To test, apply the patch and open the add item page for an existing
    record. Test the various JS-driven functionalities:
    
    - Table sorting
    - Table column configuration
    - Table searching
    - Table inline edit/delete links (click anywhere in the table row)
    - Add multiple item form show/hide
    - Add multiple item warning when adding 100+ items
    
    Signed-off-by: Jose-Mario Monteiro-Santos <jose-mario.monteiro-santos@inLibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0adbf3fc326a103fd819f0853c3a64028da70e81
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Feb 25 18:13:04 2019 +0000

    Bug 22363: (follow-up) Fix pod
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit aeab8b50f4ca7a23bf7d3aa8f75f1259fb2e4073
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Sun Feb 17 22:45:07 2019 +0000

    Bug 22363: Update Circulation.t to use Koha::ActionLogs instead of GetLogs
    
    Test plan:
    prove t/db_dependent/Circulation.t
    
    Signed-off-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 25b927e296fe3adabfe15e6193bc15379add74fc
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Feb 18 14:08:19 2019 +0000

    Bug 22363: Use Koha::ActionLogs->search instead of GetLogs in log viewer
    
    Test plan:
    1) Use log viewer, try different parameters
    2) Try screen and file export
    3) prove t/db_dependent/Koha/ActionLogs.t
    
    Signed-off-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bc7d038ac042a1af16836cce60e6f41941359a12
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Feb 18 14:01:44 2019 +0000

    Bug 22363: Add tests
    
    Signed-off-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit abe0050ad6f68f0a6f87912ff5635a2f5411899a
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Feb 18 13:28:34 2019 +0000

    Bug 22363: Add Koha::ActionLog[s] objects
    
    Signed-off-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cab238755a69ca7e52b3822b390b31484abb5c72
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Feb 10 03:09:45 2019 +0100

    Bug 17496: Remove undocumented/maintained install-CPAN.pl file
    
    The install-CPAN.pl file was added in 2007 and hasn't been
    updated or documented since.
    
    This patch removed it from Koha.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 56cae15990e289da196f64ca44e27effabf8ff2a
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue Feb 26 12:58:41 2019 +0000

    Bug 22452: Fix typos in add mana comment modals
    
    There are typos in modal where you can add a comment to mana:
    
    'caracters' should be 'characters'
    'commment' should be 'comment'
    
    Test plan:
    1) Create subscription from Mana
    2) On subscription detail page: report mistake > other a modal is shown
    --> without patch it reads 'Please enter a new commment (max 35 caracters)'
    --> with patch it reads 'Please enter a new comment (max 35 characters)'
    3) The same in mana search resultss and in reports
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1727131ca5b50adc920c0a4395980fe479efa797
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 11 10:42:25 2019 +0000

    Bug 22422: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bc2d9f869ad0bde3e97e3773e0e050503d8083f4
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Feb 28 13:37:40 2019 +0100

    Bug 22422: improve item location display with class "shelvingloc"
    
    In record detail page, item location is displayed with CSS using class "shelvingloc".
    Many many places at intranet and OPAC can use this class.
    It allows to change display in all places using CSS customisation.
    
    This patch removes the CSS "display:block" for class "shelvingloc".
    Some places where using "inline" to correct the display.
    I think the display should not be managed in template.
    So it will be inline by default and it can be changed by custom CSS, on all places or depending on a selctor.
    
    Test plan :
    1) Compile SCSS to CSS
    2) Add to preferences IntranetUserCSS and OPACUserCSS : .shelvingloc { color:red }
    3) Go to pages impacted by patch, be sure to look at cart with "more details"
    4) You see item location italic and red
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c91c1a69a23ff8d826a077c61059953bcc51940b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Mar 5 18:22:12 2019 +0000

    Bug 21030: Date widget on suspend modal not working correctly
    
    This patch makes a change to the suspend hold modal markup in order to
    allow the datepicker <selects> to work properly.
    
    To test, apply the patch and locate a patron in the staff client who has
    holds.
    
     - On the checkout or patron detail page, open the holds tab.
     - Click the "Suspend" button for one of the holds.
     - In the modal, trigger the date picker and confirm that the dropdowns
       for selecting month and year work correctly.
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ae2caab54f53bd9b7fbe8e5c1575f38e97002bf2
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Mar 7 03:10:28 2019 +0000

    Bug 19046: (QA follow-up) Remove doubled up 'Title as phrase'
    
    One search option was doubled up by accident.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 74ac15800bbf358e3f1133a1f212400797640112
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Mar 4 15:39:29 2019 -0300

    Bug 19046: Make seach pulldown to retain index selection
    
    This patch also fixes add the term in the search input
    
    Test plan:
    Enable IntranetCatalogSearchPulldown
    Search for a term using the search input in the header (simple search)
    Re-do selecting different indices
    
    The selection must retain on the search result page.
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bb730c1b05c91ee92db09d117293a0ddb87dace1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Mar 4 14:50:36 2019 -0300

    Bug 22442: (bug 13618 follow-up) Fix item search CSV export
    
    We must not filter assignements statements.
    
    Test plan:
    Export item search result as CSV
    Without this patch the biblio and biblioitem values are not displayed.
    With this patch applied everything is displayed correctly
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d0c76286a2757d511563357820db48d7bbb58ead
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Mar 9 05:41:45 2019 -0300

    Bug 15774: (follow-up) Fix TestBuilder.t so it doesn't catch wrong classes
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0d26aa77e754934daa20b0343dbd25772771678e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Sat Mar 9 08:15:14 2019 +0000

    Bug 22483: Restore svc/members/search
    
    This script used to pass 'undef' to haspermission, this patch restores
    that behaviour.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4cffd7e267a2236140732aaed5ef9fb3983b6379
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Sat Mar 9 08:13:03 2019 +0000

    Bug 22483: Restore exact behaviour of undef
    
    Passing undef (or nothing) as $flagsrequired to haspermission simply
    returned the return from fetchrow prior to this patch. Restoring that
    behaviour.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 088e0243bf7cd16f7769ddbc2eeefd5857c471f7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 8 16:52:07 2019 +0000

    Bug 22483: Restore undef behaviour
    
    Turns out that we rely heavily on the side effect that passing undef
    to haspermission would always return true no matter what permissions
    or lack of permissions you had.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4cb1a47d0368640b3e10f51d83b0ce8ea5dd953e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Mar 8 13:45:03 2019 -0300

    Bug 22483: (follow-up) Fix wrong tests higlighted by bug
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2b2054e6948477a94408f96c08e4621ae2d2d8ed
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 8 15:10:20 2019 +0000

    Bug 22483: (QA follow-up) Tweaking call to haspermission
    
    This patch tweaks the logic to check the permissions is defined before
    passing to haspermission.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6b457885cd325da444d39b031eac567eb0f46351
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 8 14:20:41 2019 +0000

    Bug 22483: (QA follow-up) Corrections to logic in check_cookie_auth
    
    check_cookie_auth needs to allow for cases where we wish to check for
    ANY permission and cases where we wish to skip the permissions check
    entirely and just authenticate the session.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 32551fffdb4296456df2061fd5eaaf403a5799c2
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 8 12:49:10 2019 +0000

    Bug 22483: (follow-up) Improve POD as requested in bug 22031
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cc67ff26aad6e6d429a65d6ea3ffb2226b25ab51
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 8 12:24:17 2019 +0000

    Bug 22483: Explicitly ban 'undef' as a valid $flagsrequired
    
    Before bug 22031 the haspermission subroutine signature allowed for
    passing 'undef' to mean 'any permission' in $flagsrequired.  This feels
    like a mistake and was only in practical use in two places in the
    codebase.
    
    This patch explicitly forbids this practice (`*` may be used to the same
    result and is more explicit in it's nature) and replaces the two
    instances of it's use.
    
    Test Plan
    1. Before this patch, the API tests are all failing with authentication
    errors
    2. After this patch the API tests should now all pass.
    3. t/db_dependent/Auth/haspermission.t should continue to pass (with one
    addition subtest added herin)
    3. /svc/members/search is not unit tested. Please check that patron
    searching still yields results in the UI after this patch.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 255af719e65956d84d62ea52fea12619bb851f70
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Mon Feb 11 09:54:43 2019 +0100

    Bug 22303: Correct bottom in virtualshelves/addbybiblionumber.tt
    
    In virtualshelves/addbybiblionumber.tt the include intranet-bottom.inc which closes the HTML last tag is not the last line of the template.
    
    This patch moved bottom include to last line and uses popup-bottom.inc.
    
    Test plan :
    1) Permission OK :
    1.1) Login in staff interface with user 'Bob'
    1.2) Create a new list 'Readme' : category public and allow changes to contents from anyone
    1.3) Perform a search
    1.4) Check some results
    1.5) Click 'Add to list' and on the list 'Readme'
    1.6) A popup window opens
    1.7) Check its HTML is OK, ending with </html>
    2) Permission KO :
    2.1) Open a new window (Firefox private session) and login in staff interface with user 'Bill'
    2.2) Perform a search
    2.3) Check some results
    2.4) On session of 'Bob', edit list 'Readme'
    2.5) Change : category private and allow changes to contents from owner only
    2.6) On session of 'Bill'
    2.7) Click 'Add to list' and on the list 'Readme'
    2.8) A popup window opens saying 'Sorry, you do not have permission to add items to this list'
    2.9) Check its HTML is OK, ending with </html>
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bd68e2f75b2bd0cae7935715f4aa03342809cb9f
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Fri Feb 1 13:18:11 2019 +0200

    Bug 22246: Fix indexing of large fields with Elasticsearch
    
    Deduplicate multivalued fields and make sure sort fields are not excessively long. Also updates default mappings so that sort fields are not created for item fields where it doesn't make sense.
    
    Test plan:
    1. Reset ES mappings in administration
    2. Check that sort is '0' for local-classification in biblio mappings.
    3. Change sort back to '1' for local-classification for the next steps.
    4. Create a record with 20 items, each with a 100 character long call number
    5. Check that when indexed, the record in ES does not have duplicates in any of the item fields and local-classification__sort is truncated to 255 characters.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit eb7b2907c55d896a7c5b8bccf31daeae8bc5720b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 5 14:29:58 2019 -0300

    Bug 22416: (bug 22140 follow-up) Remove warnings in Search.t
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a0e10d97223ae2945f6ac64b7d86f4ac2fea9e03
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 5 15:16:44 2019 -0300

    Bug 22419: Records listed twice when select/unselect all from the cart
    
    It fixes a browser timeout when records are removed from the cart.
    The onchange event already call selRecord.
    
    Test plan:
    Launch a search
    Add all the result to your cart
    Open the cart
    Click "select all"
    Then remove them all from your cart
    => Without this patch the action will timeout
    => With this patch applied the action is immediate
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1f2685f7d4965d6aa4a25be81aebf91b1ed01b33
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Mar 7 20:52:59 2019 +0000

    Bug 20639: DBRev 18.12.00.023
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 916a27686a4e76b0a8b6982dbbbf4ae9eee4267e
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Feb 9 23:11:55 2019 +0100

    Bug 20639: (QA follow-up) Rephrase system preference
    
    Rephrases system preference a tiny bit and explaining case
    of leaving the pref empty.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6d3136c7e893011bd7cdfd0b6415d20929b6a66b
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu Sep 27 11:44:27 2018 +0100

    Bug 20639: (follow-up) Fix population of backends
    
    The OPAC view wasn't correctly restricting the display of backends when
    the ILLOpacbackends preference was set.
    
    See the test plan on comment 7
    
    Signed-off-by: Niamh.Walker-Headon@it-tallaght.ie
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ef6ad443a872c207654721d1e9edee3a6eb88087
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 24 14:15:22 2018 +0100

    Bug 20639: Add ILLOpacbackends syspref
    
    This adds the ILLOpacbackends syspref, allowing users to refine the ill
    backends available to opac users for initiating ill requests
    
    Remove default assignment for backends
    
    We don't need a default assignment for the ILLOpacbackends assignment,
    if the pref isn't set, it returns undef anyway. Also, having this
    default assignment actually breaks the fetching of the preference
    
    Signed-off-by: Niamh.Walker-Headon@it-tallaght.ie
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a8be1966f3855d6950021018254819b04a5287c3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Sat Dec 22 13:55:23 2018 +0000

    Bug 22031: Add SQL::Abstract like syntax to haspermission
    
    This patch adds an SQL::Abstract inspired query syntax to the
    haspermission method in C4::Auth.  One can now pass Arrayrefs to denote
    an OR list of flags, a Hashref to denote a AND list of flags.
    
    Structures can be nested at arbitrary depth.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 29bc2b583264a62c29a0f39dd79a5b3a64721ae6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 27 09:38:57 2019 -0300

    Bug 22275: (bug 15836 follow-up) Fix class_sources.class_split_rule FK creation
    
    18.06.00.060 will fail if custom Classification sources were created.
    
    In that case we should use the 'generic' split rule.
    
    Test plan:
    % git checkout -b bug_22395_pre 3a0cba67f1387595f570ab9d9efdeabc856345b4
    Reset the DB
    Go to  Home › Administration › Classification sources
    Create a custom "Classification filing rules"
    Create a custom "Classification sources" using this filing rules
    % git checkout master
    % perl installer/data/mysql/updatedatabase.pl
    => Without this patch you will get:
    DBD::mysql::db do failed: Cannot add or update a child row: a foreign key constraint fails (`koha_kohadev`.`#sql-33a_67`, CONSTRAINT `class_source_ibfk_2` FOREIGN KEY (`class_split_rule`) REFERENCES `class_split
    _rules` (`class_split_rule`)) [for Statement "
                ALTER TABLE class_sources
                ADD CONSTRAINT class_source_ibfk_2 FOREIGN KEY (class_split_rule)
                REFERENCES class_split_rules (class_split_rule)
            "] at installer/data/mysql/updatedatabase.pl line 17104.
    
    => With this patch applied the FK will be created successfully
    class_sources.class_split_rule will be set to "generic" for these custom values.
    
    Signed-off-by: Oliver Behnke <oliver.behnke@aei.mpg.de>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5ebf1a26dae62651d1749a2df2e54ee6d1af148a
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Fri Apr 6 11:15:07 2018 +0200

    Bug 20535: ModZebra called with $record with items stripped
    
    ModZebra called with $record with items stripped in
    ModBiblioMarc. Remove $record argument to force
    record to be loaded again from database with items
    embedded.
    
    How to test:
    1) Make sure biblios are indexed (with
       rebuild_elastic_search.pl).
    2) Perform a search that will produce a sample result
       containing at least one biblio with items.
    3) Edit and save a biblio with items.
    4) Perform the same search again, the updated biblio
       should now have no items when viewed in the search
       results (No items).
    5) Apply patch.
    6) Repeat step 1-3.
    7) The updated biblio should now have items when viewed
       in the search results.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 926d7c4ba11ad6cd768c884ec4b2dc71d864b64c
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Mar 6 08:58:03 2019 +0100

    Bug 16251: Fix value of material select for Rancor 008 widget
    
    The material type is selected in accordance with the leader (06-07)
    
    Test plan:
    1. Create a new record using the advanced editor
    2. Set the leader 6th position to 'c'
    3. Save the record and reload the page
    4. 'Music' should be automatically selected for 008
    5. Try other values for the leader 6th and 7th positions
    
    See comment 0 of this bug for the complete mapping
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit eeaf59a31ff33ec505fe86a3ef7278aed1733e25
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Mar 7 20:40:53 2019 +0000

    Bug 15774: DBRev 18.12.00.022
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0499a3bf2b8aad543a6d0e7b87cbee75cd14f166
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Thu Feb 28 07:45:13 2019 +0000

    Bug 15774: (QA follow-up) Remove asset of datables.css, and corresponding plugins
    
    It is now part of doc-head-close.inc
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fa243015988028cfba82eaeef35a7ec53a000586
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Thu Feb 28 07:44:52 2019 +0000

    Bug 15774: (QA follow-up) Fix use statemenets
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1966c6be2e21613c5e1efb977dc946f0f1c21e20
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Feb 27 13:22:31 2019 -0500

    Bug 15774: (follow-up) fix rebase issues
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9cfcd21f24c176cecb743084ee22243aeb44848d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Dec 18 12:05:10 2018 +0000

    Bug 15774: Add permission for managing additional fields
    
    To test:
     1 - Have three borrowers, one with order_manage permission, one with
     edit_subscription permisson, andone with both
     2 - Apply patch, updatedatabase
     3 - Verify all three now have the manage_additional_fields permission
     4 - Visit the admin page with these users, they should all see the
     'Manage additional fields' link
     5 - Click the link
     6 - User with order_manage should see 'Order baskest'
     7 - User with edit_subscription should see 'Subscriptions'
     8 - User with both should see both
     9 - Remove the additional permissions from a user - they should see a
     note about needing additional permissions
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fe8bc587f6f78600b7aecc0b7efd75306e9a2e12
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 1 17:58:14 2018 -0300

    Bug 15774: Remove unecessary returned value for ->delete
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7a109482865838f1594e2e84f762e3e9c95a22db
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 1 17:57:54 2018 -0300

    Bug 15774: Do not fetch additional fields from GetSubscription
    
    Finally we do not want that, they should be fetch when needed
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ee5b5175d9dafa906432835d018081ed62fbab05
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 1 17:57:24 2018 -0300

    Bug 15774: Fix and unify additional_fields in C4::Serials
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9bf62c78811e50aa1b3cfbb25e825d2ca093c180
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 1 17:54:43 2018 -0300

    Bug 15774: Add missing tests for Koha::Object::Mixin::AdditionalFields
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e0da941f712a2b2be6e43eefbcdd013ec4bd5adb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 1 17:51:56 2018 -0300

    Bug 15774: Fix insert and update for subscription
    
    Call it a typo
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ccd6a334b7447b446bd150d0420f5ad7544bbb8c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 1 17:41:37 2018 -0300

    Bug 15774: Use the include file to display the subscription's additional fields
    
    We have it, why not to use it?
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8035151e41fc2e97e8a0c32cfa0e8c252c393bf2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 1 18:32:05 2018 +0000

    Bug 15774: (follow-up) Address QA issues
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit feb866a618ad5fccb4384dbc9c8b6fd23fec6472
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 16 16:55:18 2018 -0300

    Bug 15774: Fix JS check when AV and MARC field are both selected
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 695ce65132e7e88bd5d3da46e99b665b91a71eb6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Oct 4 19:46:53 2018 +0000

    Bug 15774: (follow-up) Add html filters
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a0a7b779ee39fed7e8d88b7357716d7d4a78d8f0
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed May 16 09:30:42 2018 +0200

    Bug 15774: Show additional field values in edit form
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 284b543ea4a82dfd4873cc122ba7c2a816f141ca
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue May 15 17:16:34 2018 +0200

    Bug 15774: Add POD and license notices
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 904a4884601588ca89faaaee5e0fd53d3907ec10
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri May 4 17:35:45 2018 +0200

    Bug 15774: Use Koha::Object(s) for additional fields
    
    A lot of code can be removed just by using Koha::Object
    
    It also makes fetching and updating additional field values easier.
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bd9ef8f5843fa7bcb49dc490001c79750035e0d0
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Feb 22 13:52:10 2018 +0100

    Bug 15774: Fix additional fields filters
    
    Addresses the following QA comments:
    
    1/ Regression:
    On serials/serials-search.pl, the filters are not filled with what the
    users searched for and the additional fields linked to an AV are not
    displayed as a dropdown list.
    
    4/ When searching an order, there is no way not to set a "all" value for
    additional fields linked to AV.
    
    5/ When searching an order and the search does not return any results,
    the field should contain what the user filled in.
    
    https://bugs.koha-community.org/bugzilla3/show_bug.cgi?id=15774#c10
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a108256face480867de76f348d577ade0481cdfa
Author: Jesse Weaver <jweaver@bywatersolutions.com>
Date:   Thu Jul 21 13:34:26 2016 -0600

    Bug 15774: (QA follow-up) Make sure that tablename is correctly saved
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 84f83012295c90995db48775ff32f06b8d082581
Author: Jesse Weaver <jweaver@bywatersolutions.com>
Date:   Wed Feb 10 12:29:06 2016 -0700

    Bug 15774: Add additional fields to order baskets
    
    This also moves the admin page for additional fields for all tables to a
    single common screen, and factors out display/input parsing logic.
    
    Test plan:
      1. Create an additional field for a subscription (under Serials -> Add
         subscription fields).
      2. Apply patch.
      3. Visit Additional fields under administration, and verify that
         the field created above still shows under the list for the
         subscription table.
      4. Create at least four fields for aqbasket for each combination of
         searchable/not-searchable and with/without an authorized value.
      5. Create an order basket, and verify that all fields are visible and
         correctly save.
      6. Edit the basket, verifying that changes to these additional fields
         are saved.
      7. Add an order to the basket (contents are irrelevant).
      8. Go to advanced search within acquisitions.
      9. Verify that only the searchable fields show in the form, and that
         their contents may be searched.
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9ff997eda7582dbb68d599ab1436b162dd1559da
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 6 11:59:58 2019 -0300

    Bug 22466: Replace existing occurrences
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 158b3c3a4cfc8a97cc98a3473ca70395fdb398e1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 6 11:59:55 2019 -0300

    Bug 22466: Do not ask for TT methods to be filtered
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c7ef8e6b2db5830745759ad15fe9d6379f6f62b2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 6 11:59:35 2019 -0300

    Bug 22466: Add tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cfe4d0e29546ccf7566ad326be7db76f0e0b4171
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Mar 7 17:27:05 2019 +0000

    Bug 20912: DBRev 18.12.00.021
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ed62cb3ecfd714049b15d0728fab29b3a8540e3c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 7 17:18:02 2019 +0000

    Bug 20912: (QA follow-up) Add on_editing to $Price filter
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7d71d9507202ff667776bf9cb6de0bf2603ad0dd
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 7 08:39:30 2019 +0000

    Bug 20912: (QA follow-up) Rebase error corrections
    
    The automatic rebase after bug 21206 required a helping hand.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2b86e9659d5b1446fc5658f1f80bd5a21f2017a5
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Feb 25 11:04:15 2019 -0500

    Bug 20912: (QA follow-up) Warn patron of daily and hourly renewal fees
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2802f20e386e6e51341a1ef77b1225f858b0d1c6
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Feb 20 08:49:44 2019 +0000

    Bug 20912: (follow-up) Prevent double charging on renewal
    
    This patch updates the tests the ensure we do not double charge for
    renewals that take place before the original due date and fixes the
    corresponding loging in C4::Circulation::AddRenewal.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6be54ad1206491fc9c449b03a8249f8a75c14713
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Feb 4 11:18:29 2019 -0300

    Bug 20912: (QA follow-up) The default rule already has renewalsallowed=0
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5e2db4c2935b959a6534aab65e2de51239a55942
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Feb 4 11:06:09 2019 -0300

    Bug 20912: (QA follow-up) POD fix
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7b75849412d8e3465ca5e734869c74d5aa3241c1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jan 31 14:56:54 2019 +0000

    Bug 20912: (QA follow-up) Fix some test failures
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 45595334e64f8996cfcd52673ca0ae68a4815308
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jan 31 11:50:35 2019 +0000

    Bug 20912: (QA follow-up) Fix TestBuilder
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f5380b401428e8e81667aff278822c7667fcc4c7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jan 30 20:34:13 2019 +0000

    Bug 20912: (follow-up) Add hourly support
    
    It seemed strange to only add support for Daily loans in the feature
    when Koha also support loan periods in hours. This patch adds parallel
    functionaliy for hourly loan periods.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a68926d9cb1b485ae302a8c72f7e637fc9310fe0
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jan 30 16:20:23 2019 +0000

    Bug 20912: (follow-up) Improve test coverage
    
    Increase test coverage for CanBookBeIssued and fix a introduced during
    the refactoring to Koha::Fees.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 04ac65ba199cab432b19e3cf783a8b0be530e929
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jan 30 11:42:57 2019 +0000

    Bug 20912: (QA follow-up) Make DB Update idempotent
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6fe5466e5af99975910a382642c4b1c5c3b55c6a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jan 29 11:51:29 2019 +0000

    Bug 20912: (QA follow-up) Test for distinct accountlines
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8abb7edc98f6d7442984a5a7d1d2991e4abbb7f9
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jan 29 11:28:28 2019 +0000

    Bug 20912: (QA follow-up) Move Fees to Charges::
    
    In preparation for the introduction of Koha::Charges::Fines I have moved
    this ::Fees class into the Koha::Charges:: namespace
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8b4bcb315639ae1852329eba31609c75fd3e3b92
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jan 25 12:49:07 2019 -0500

    Bug 20912: (QA follow-up): Fix up unit tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit eb179d0ec0105fe8801c88ce0fe5c3bf7c2a2d8e
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jan 25 11:16:41 2019 -0500

    Bug 20912: (QA follow-up): Fix up Koha::Fees
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 84647ff0060a896a29e033b785a033decd7deea2
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Nov 9 13:34:05 2018 -0500

    Bug 20912: Move calculation to Koha::Fees
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 62a4969057f98728a466c0f83c3bf011ddec4835
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Oct 31 15:29:55 2018 -0400

    Bug 20912: (QA follow-up) Make unit tests reliable and get rid of perl warnings
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dde914e1f14875aaee15ee6bbfe03739c6859130
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Oct 31 15:14:03 2018 -0400

    Bug 20912: (QA follow-up) Set daily charge to 0 for item type not being used for test
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d9790c6fdec8d3e574c561bc0ee0945282a74669
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Oct 28 17:06:33 2018 +0000

    Bug 20912: (QA follow-up) Fix number of tests and correct typos
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3d84f4b9b3a11f32b37f27478de0ee6c5d9d37e4
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jun 14 13:36:51 2018 +0000

    Bug 20912: Rental Fees based on Time Period
    
    Some libraries would like to be able to charge a rental fee based on the
    number of days an item will be checked out, as opposed to the flat fee
    currently offered by Koha.
    
    Test Plan:
    1) Apply this patch
    2) Run updatedatabase.pl
    3) Edit an itemtype, add a daily rental fee of 1.00
    4) Check an item of that itemtype out for 7 days
    5) Verify the patron now has rental fee of 7.00
    
    Signed-off-by: Matha Fuerst <mfuerst@hmcpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e39541522ce30531cc8ef8d377fa60ebe45b0330
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jun 14 11:13:19 2018 +0000

    Bug 20912: Update database
    
    Signed-off-by: Matha Fuerst <mfuerst@hmcpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 178af5ab27fab49597b1e53c26cd1f21e09a27c1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Nov 1 13:28:25 2018 +0000

    Bug 21721: Use Koha::Account->add_debit in AddRenewal
    
    Known Side Effect: Prior to this patch renewal charges were not
    recorded in the FinesLog. After this patch, if the FinesLog is
    enabled then the 'action' will be recorded as `create_rent`.
    
    Sponsored-by: PTFS Europe
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fcd6bdc5b8ed5cd48b19d03a86e2ab9aaa0b0626
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 6 09:29:18 2019 -0500

    Bug 18925: (RM follow-up) Remove maxissueqty from issuingrule in SIP tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c57967681f3041aab19b7f14270e267c7de54be6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 6 09:28:08 2019 -0500

    Bug 18925: (RM follow-up) Remove schema files for deletedtables
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 32fc535b8a71483b401b964b273cb280758ea8f4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Mar 6 10:09:05 2019 -0300

    Bug 18925: (QA follow-up) Remove weird 'Null' values for integer column
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c53f907235116b17d9c31d644c8d576e915992c6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 5 20:59:07 2019 +0000

    Bug 18925: DBRev 18.12.00.020
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 60c51b9bb07de4dea16b0a883ad1881829fe69ed
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 5 20:53:04 2019 +0000

    Bug 18925: (RM follow-up) Remove issuingrules columns for new installs
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1fd998f413c320257341f8ff86279cc3ed2c0a24
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue Mar 5 14:08:34 2019 +0000

    Bug 18925: (QA follow-up) Fix Circulation.t
    
    Test plan:
    t/db_dependent/Circulation.t
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cf207a07a1104b752b16b89bd6dac50331fb2bc2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sat Mar 2 14:14:11 2019 -0300

    Bug 18925: Fix 'Default checkout, hold policy by patron category' block
    
    We want ->Search to return undef if the rule does not exist.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 13faff1250ed3ede712c405821f3ad9187e892b6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sat Mar 2 13:45:14 2019 -0300

    Bug 18925: Move existing rules
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 05a2c58f790cc2de03ff2a9f52700f55982d36b4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Mar 2 11:03:01 2019 -0300

    Bug 18925: (QA follow-up) Fix basic_workflow.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fbfcc5437ecbbb3e2bd2d65c6a8c55df3917b7ee
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Mar 2 10:20:23 2019 -0300

    Bug 18925: (QA follow-up) Fix indentation characters in smart-rules.tt
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fc92437665a337c3d731ed04ad617d6597718afa
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Mar 2 10:14:48 2019 -0300

    Bug 18925: (QA follow-up) Make DB update idempotent
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 566bb2976671dc56c67508c62bfe30f4b25a7656
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 21 17:04:38 2019 -0300

    Bug 18925: Update new occurrences
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2d3aaff84e0d467c0cc44ae9f99c88879b8bcc0d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 21 17:04:36 2019 -0300

    Bug 18925: Fix null/empty behavior, again
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6845cd6a67fcc57c22aa695970236e3caab336fd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sat Sep 15 13:19:04 2018 -0700

    Bug 18925: Replace logic in GetBranchBorrowerCircRule with get_effective_rule
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d1303ca834dd0b08fc1d44476cfbbb8b729b6165
Author: Jesse Weaver <pianohacker@gmail.com>
Date:   Mon Jan 29 15:30:29 2018 -0700

    Bug 18925: (follow-up) Fix null/empty behavior
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f9d90a26444b2c4b5c8dbeaaa237b9fcf3ae1234
Author: Jesse Weaver <pianohacker@gmail.com>
Date:   Sat Sep 16 17:23:01 2017 -0600

    Bug 18925: (follow-up) Change name of rule to fix ambiguity
    
    There was previously an ambiguity between the branch/category/itemtype
    specific max{,onsite}issueqty and the total-per-patron max{,onsite}issueqty.
    The latter has been renamed to patron_max{,onsite}issueqty.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 26a779eded6fe24abe0be904da64e0186c3d91ec
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Jul 10 11:00:44 2017 -0400

    Bug 18925: Move maxissueqty and maxonsiteissueqty to circulation_rules
    
    This patch set moves maxissueqty and maxonsiteissueqty to the
    circulation_rules table.
    
    Test Plan:
    1) Apply this patch
    2) Run updatedatabase
    3) prove t/db_dependent/Circulation.t
    4) prove t/db_dependent/Circulation/Branch.t
    5) prove t/db_dependent/Circulation/GetHardDueDate.t
    6) prove t/db_dependent/Circulation/Returns.t
    7) prove t/db_dependent/Circulation/SwitchOnSiteCheckouts.t
    8) prove t/db_dependent/Circulation/TooMany.t
    9) prove t/db_dependent/Holds/DisallowHoldIfItemsAvailable.t
    10) prove t/db_dependent/Reserves.t
    11) Note no changes in circulation behavior related to check out limis
        both on and off site
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1e4f442442844cfaf17f5b06f122f6259d5fee92
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 4 20:26:04 2019 +0000

    Bug 21728: (RM follow-up) Add 'Reserve Fee' for new installs
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f40a75876ec681b7a102ba190e63ecda3e2bc43e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 30 13:30:24 2018 +0000

    Bug 21720: Update Tests
    
    AddIssuing charge is always called in void context, but the tests
    checked that the return value was a Koha::Account::Offset and we now
    return a Koha::Account::Line.
    
    This patch changes the test to accept a Koha::Account::Line as returned,
    adds a test to ensure a Koha::Account::Offset is also created and
    corrects the logic that tests that only one accountline is added.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b104046d89ee6457946b998d9221b1d3771b5d5c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Nov 1 12:42:31 2018 +0000

    Bug 21720: Use Koha::Account->add_debit in AddIssuingCharge
    
    Known Side Effect: Prior to this patch issuing charges were not
    recorded in the FinesLog. After this patch, if the FinesLog is
    enabled then the 'action' will be recorded as `create_rent`.
    
    Sponsored-by: PTFS Europe
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a639299c9834ad80d763143910dd460193820acb
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 4 19:10:56 2019 +0000

    Bug 21728: DBRev 18.12.00.019
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6ca8b1eed25022fdaeb5a913196ebb502856bdc7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 30 19:45:19 2018 +0000

    Bug 21728: Add 'Reserve Fee' to the account_offset_types
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e7dbe4124272bfcaa212f71f4da07541f01ec0d8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Nov 1 11:08:51 2018 +0000

    Bug 21728: Use Koha::Account->add_debit in ChargeReserveFee
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 55d18aeca6e8bff1a1484fafe261dc4d2c5f21c8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Nov 1 12:26:35 2018 +0000

    Bug 21722: Use Koha::Account->add_debit in chargelostitem
    
    This patch updates C4::Accounts::chargelostitem to use the newly
    available add_debit method from Koha::Account.
    
    Known Side Effects: If the FinesLog is enabled then the 'action'
    recorded will change from the generic `create_fee` (for both the lost
    charge and any associated processing charge) to the more descriptive
    terms `create_processing` and `create_lost_item`.
    
    Sponsored-by: PTFS Europe
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1fa46154d19cfb294bb36c3ca05b98bbe62f14d7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Dec 13 19:23:07 2018 +0000

    Bug 21722: Tidy up tests and increase coverage
    
    This patch moves the chargelostitem 'branchcode' test to within the
    'chargelostitem' subtest block in t/db_dependent/Accounts.t. It also
    adds tests for additional accountline fields that should be getting
    set by this method and adds tests for ProcessingFeeNote before removing
    t/db_dependent/Circulation/Chargelostitem.t which covered this
    previously.
    
    Sponsored-by: PTFS Europe
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 62b4fbb9dd6b440630251fd6686bf7af83b6d5e2
Author: Hayley Pelham <hayleymapley@catalyst.net.nz>
Date:   Sun Mar 3 22:26:54 2019 +0000

    Bug 18584: remove trailing space from C4/XSLT.pm
    
    Test plan:
    1) Open C4/XSLT.pm and confirm that the trailing space at line 313 is
    gone.
    2) Sign off.
    
    Signed-off-by: Hayley Mapley <hayleymapley@catalyst.net.nz>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d6d91ac32fdd6c8f3e5fad19a29a943044ec0214
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Feb 25 08:46:11 2019 +0000

    Bug 22404: Fix parameter "for" of labels in subscription add form
    
    Attribute "for" of tag labelshould contain input id, not name.
    
    Test plan:
    1) Go to serials -> add subscription second step
    2) Click on labels of these three fields:
        - First issue publication date
        - Subscription start date
        - Subscription end date
    
    --> without patch, nothing happen
    --> with path, the datepicker is shown
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ec4ea59ec55de1816b47ab13f33597e4eb9c7664
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 4 18:37:43 2019 +0000

    Bug 22228: Update test for updated mappings
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dd98584c8572b85afbd68ff98423605df9b18822
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Thu Jan 31 13:43:00 2019 +0200

    Bug 22228: Escape lone colons and make sure term is balanced
    
    Escapes unquoted colons that have whitespace on either side. Removed unbalanced quotes.
    
    Test plan:
    
    1. Make sure the test case described in the bug works
    2. Make sure tests pass:
      prove t/Koha/SearchEngine/Elasticsearch/QueryBuilder.t
    
    Signed-off-by: Björn Nylén <bjorn.nylen(at)ub.lu.se>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ff20d029e397acbac2ddaf9d11e6a0a7dc184ce2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 4 13:30:55 2019 -0500

    Bug 19575: DBRev 18.12.00.018
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a17c2d9c9fb08ce362b07c3ea1420ae30f0527e8
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Mon Feb 18 14:56:17 2019 +0100

    Bug 19575: Don't lower case fields in db and use update script instead of raw SQL
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7df5b35a36e859f745f42b5c857cd965c83b55f3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Feb 15 14:49:33 2019 +0000

    Bug 19575: (RM follow-up) Fix mapping typo
    
    Found with QA tools, simple fix
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit eeda2afd3a710cbf4115b96f1386294df7693252
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Thu Feb 14 16:52:04 2019 +0100

    Bug 19575: Keep authority-number as alias and fix query
    
    Keep authority-number as alias and change field name
    from alias to real field in hard coded Elasticsearch query
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ef2a03a09249ee53ff2c431085673aca3f7c9863
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Feb 14 12:44:13 2019 +0000

    Bug 19575: Fix an search field
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c2061adc8be1a6843c0e082c18629f4a6b8fac78
Author: David Gustafsson <glasklas@gmail.com>
Date:   Tue Feb 12 21:52:39 2019 +0000

    Bug 19575: Rebase and fix tests
    
    This patch lower cases the sort by fields to normalize checking them and adjusts
    some existing tests to meet the new expectations.
    
    The regex for splitting terms has been moved into a subroutine so that adjustment was made
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6d53910f0ca05ae41b0d10ce6f3eb274efd3aca4
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Fri Nov 3 13:21:22 2017 +0100

    Bug 19575: Use canonical field names and resolve aliased fields
    
    Adjust elastic search mappings to more closely match Zebra equivalents
    resolving serveral issues with coded Zebra searches in templates and
    sorting of search results in UI. Also make field names in search strings
    case insensitive to accept case variations in template links and user input.
    
    Sponsored-by: Gothenburg University Library
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Ere Maijala <ere.maijala@helsinki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2331b8a295ce3db011b88bf3d42eacd42c9df4ee
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 21 15:28:10 2019 -0300

    Bug 22360: (bug 21205 follow-up) Restore OPACAcquisitionDetails behavior
    
    Caused by
      commit 7d10549ae8632e6640d3a99014268a2a1e46b3c4
      Bug 21205: Replace C4::Items::GetOrderFromItemnumber calls
    
    At this point $order is a Koha::Acquisition::Order object, not a hashref
    anymore.
    
    Test plan:
    Create an order, receive items
    Enable OPACAcquisitionDetails
    At the detail page of the bibliographic record you should see
    "X items are on order." at the bottom of the items list
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9f8187257a45b502a2b53ec1768177e7883dda35
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Feb 19 21:00:31 2019 +0000

    Bug 22370: Prevent OPAC users from seeing staff news from URL
    
    To test:
    1) Have some OPAC and staff only news items
    2) On the OPAC view a single news item
    3) Change the ID in the URL to the ID of a staff news item
    4) Notice you can view the news item without any problems
    5) Apply the patch and refresh the page
    6) An error should show that the news item doesn't exist
    7) Confirm you can still view OPAC news items individually
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f355788b340b19912891fd41c3168bac9c951aff
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 27 16:05:20 2019 -0300

    Bug 21747: Insert fine_increase and fine_decrease for new installs
    
    This fixes Circulation.t
    koha_1       | DBD::mysql::st execute failed: Cannot add or update a child row: a foreign key constraint fails (`koha_kohadev`.`account_offsets`, CONSTRAINT `account_offsets_ibfk_t` FOREIGN KEY (`type`) REFERENCES `account_offset_types` (`type`) ON DELETE CASCADE ON UPDATE CASCADE) [for Statement "INSERT INTO `account_offsets` ( `amount`, `debit_id`, `type`) VALUES ( ?, ?, ? )" with ParamValues: 0=1, 1='22', 2='fine_increase'] at /usr/share/perl5/DBIx/Class/Storage/DBI.pm line 1832.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 91435189fee9d095677e6a0a0b9d8934823cba47
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Feb 27 09:07:28 2019 -0500

    Bug 21747: DBRev 18.12.00.017
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1a385cae8d8e84cdf48824c8897545ff5e25471c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Feb 4 14:29:08 2019 +0000

    Bug 21747: (follow-up) Intelligent rename of offsets
    
    This patch intelligently renames the account_offset types for updateing
    fines from `Fine Update` to `fine_increment` and `fine_decrement`
    depending on the sign of the calculated difference of the adjustment.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b3969c52f8aaa956e4dc8d1f6ed15fc40003013b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Nov 1 14:55:15 2018 +0000

    Bug 21747: Use Koha::Account:: routines in UpdateFine
    
    Set to use Koha::Account->add_debit and Koha::Account::Line->adjust
    
    Known Side Effect: The format of the FinesLog, if enabled, is changed
    after this patch. Prior to this patch the $actionname was left undefined
    and the $infos field contained the string:
    
    `"due=".$due."  amount=".$amount." itemnumber=".$itemnum`
    
    After this patch, the logs are more consistent with other FINES logs,
    with an $actionname of 'CREATE' or 'UPDATE' and the $infos field
    containing a Dumper of fine data.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8c2e03020dc02519dec70b9697794a3624c73937
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jan 8 13:10:53 2019 -0500

    Bug 22084: Plugin upgrade method and database plugin version storage will never be triggered for existing installs
    
    If an existing plugin begins using the upgrade() method, it will never actually get triggered because the installation has already occurred and no database plugin version was stored at the time. Without that database version, the upgrade method will never be triggered.
    
    In addition, if the plugin has no upgrade method, the installed version is never updated in the database!
    
    Lastly, when an upgrade succeeds it prints a warning that the upgrade failed.
    
    Test Plan:
    1) Install an older version of the Kitchen sink plugin:
       * https://github.com/bywatersolutions/koha-plugin-kitchen-sink/releases/download/v2.1.0/koha-plugin-kitchen-sink-v2.1.0.kpz
    2) Delete the "__INSTALLED_VERSION__" key, and the "last_upgraded" key from plugin_data for this plugin, to simulate having installed from an earlier version of Koha
    3) Upgrade to the latest version of the Kitchen sink plugin:
       * https://github.com/bywatersolutions/koha-plugin-kitchen-sink/releases/download/v2.1.22/koha-plugin-kitchen-sink-v2.1.22.kpz
    4) Note "__INSTALLED_VERSION__" still doesn't exist for the plugin, in the plugin_data table
    5) Apply this patch
    6) Restart all the things
    7) Browse to the Kitchen sink configuration page, this should trigger the upgrade method
    8) Note the "__INSTALLED_VERSION__" and "last_upgraded" keys exist in plugin_data for the Kitchen Sink plugin
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 57f4c01b9a09d1c2e0fc8a3449ba86574775b840
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jan 9 07:33:15 2019 -0300

    Bug 22084: Regression tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7c3a5c78c1aacbdb0ad7eb758cb9880ecefcce3a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Feb 11 16:05:23 2019 -0300

    Bug 21765: Make AutoUnsuspendReserves call Koha::Hold->resume
    
    This patch makes the mentioned method use the biult-in method for
    resuming a suspended hold, instead of manually setting the specific
    attributes using the accessors.
    
    The side effect for this is that HoldsLog is now honoured.
    
    This patchset also refactors the tests a bit so they rely on the exposed
    methods and thus don't rely on specific implementation details (like
    suspended hold means a date in suspended_until plus suspended=1).
    
    To test:
    - Apply the regression tests patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/Reserves/AutoUnsuspendReserves.t
    => FAIL: It fails loudly because things are done manually
    - Apply this patch
    - Run:
     k$ prove t/db_dependent/Reserves/AutoUnsuspendReserves.t
    => SUCCESS: Tests pass!
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d441ce5cdadba7a87570162b9f54600c82f150e2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Feb 11 16:04:59 2019 -0300

    Bug 21765: Regression tests
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bc96fe5b4185e1d52ab7050c3c63802006fa35fd
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Feb 4 06:09:32 2019 +0000

    Bug 12318: Show shelving location on subscription tab in OPAC and staff
    
    The shelving location can be helpful to locate an item in the library.
    Especially, if the library has decided not to create items for a
    subscription this information is currently not visible to the patron.
    
    To test:
    - Apply patch
    - Create a subscription, set location
    - View the subscription tab in detail and staff
    - Verify that the location now shows above the callnumber
    - Unset location in the subscription
    - Verify that the page still looks ok
    
    Signed-off-by: Mikaël Olangcay Brisebois <mikael.olangcay-brisebois@inLibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit aae5e558465c365d9f857ad6f7b4aab46896a7da
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Nov 23 11:36:49 2018 +0100

    Bug 21875: Handling subject line in Letters.pm
    
    The variable name $utf8 is very misleading: it contains MIME-Header encoding.
    $message->{subject} comes from the database and is in perl internal format;
    it should NOT be decoded as a MIME-Header.
    After encoding to MIME-Header, previously another (useless) encoding to
    UTF-8 was done. Since the string is plain ASCII, this is useless and
    theoretically wrong. We should stay in MIME-Header.
    
    Test plan:
    See Bugzilla comment5.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f9162c2e5e7cd8eff0a9e96572156309f296fd41
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Feb 19 12:46:38 2019 -0500

    Bug 22016: Unit tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3e63209fa828144099cfdde2a740e372c4722287
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Dec 17 14:41:48 2018 -0500

    Bug 22016: Always send CT field for SIP checkin, even if empty
    
    Some SIP devices ( in this particular case, bin sorting machines from RFID Library Solutions ) require a CT field to be sent, even if that field is empty. Koha should be able to support this behavior.
    
    Test Plan:
    1) Apply this patch
    2) Enable the new option ct_always_send for a SIP2 account
    3) Restart SIP
    4) Check in an item successfully via SIP, which will not be transferred
    5) Note the response contains a CT field with no value
    
    Sponsored-by: Pueblo City-County Library District
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Jill Kleven <jill.kleven@pueblolibrary.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 08c83dbc6e5c57546c30ac76071e7a94891bacb9
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Feb 19 12:41:30 2019 -0500

    Bug 22014: Unit tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9cdac855c95d334b5119cf6f13c37354a1306722
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Dec 17 12:34:14 2018 -0500

    Bug 22014: Add ability to send "00" in SIP CV field on checkin success
    
    Some SIP devices ( in this particular case, bin sorting machines from RFID Library Solutions ) require a checkin success to return a CV field of the value "00" rather than no CV field at all. Koha should be able to support this behavior.
    
    Test Plan:
    1) Apply this patch
    2) Enable the new option cv_send_00_on_success for a SIP2 account
    3) Restart SIP
    4) Check in an item successfully via SIP
    5) Note the response contains a CV field with the value '00'
    
    Sponsored-by: Pueblo City-County Library District
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Jill Kleven <jill.kleven@pueblolibrary.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 660d7bbd5e97de320d539bd6bd0e1b0334562b07
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Feb 13 20:00:17 2019 +0000

    Bug 22337: Make it clearer that language preferences can be re-ordered
    
    This patch makes markup and CSS changes to the system preference
    interface so that it is visually clearer that language preferences
    (language and opaclanguages) can be re-ordered by the user to control
    the sequence of their appearance in language-selection menus.
    
    This patch makes some minor markup changes (including some whitespace
    fixes -- diff accordingly) in order to make it easier to apply these CSS
    changes.
    
    To test you should have more than one translation installed. Apply the
    patch and clear your browser cache if necessary.
    
     - Go to Administration -> System preferences -> I18N/L10N
     - The 'language' and 'opaclanguages' system preferences should show the
       new style.
       - Each language should show a "move" cursor when the mouse hovers
         over the "box."
       - Dragging and dropping the languages should work correctly, and
         changes should be reflected in language menus.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dae703cb792d031562f5c4a75eacd6a86c1f9087
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 15 14:40:34 2019 +0000

    Bug 22349: Remove overzealous database deletions from test
    
    For no apparent reason a whole lot of data was being deleted inside a
    transaction for each of the subtests in Koha/Acquisitions/Booksellers.t
    
    This patch simply remove the deletions. To test, run the test before and
    after applying the patch and they should all continue to pass.. If you
    have a large number of booksellers, baskets, orders or subscriptions in
    your database you may also see an decrease in the time it takes to run
    the test.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ab1f9af117fa8e2d2ff143126b82b88a43ff6bf8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Feb 27 07:47:00 2019 -0500

    Bug 21241: (RM follow-up) Fix error in update description
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6533f32c3a7acdaaa6769e6039472045add847e2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Feb 26 11:04:08 2019 -0500

    Revert "Bug 22026: Removed 'use Modern::Perl;' from Koha::REST::classes"
    
    This causes test failures in D8 and would require packaging our own perlcritic
    Reverting until future date when consequences do not outweigh benefits
    
    This reverts commit ecc94da6b258e423799e58558a5b02c8f2fcefec.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bee15e627f4d68c177fbe9f4e6774d679df6c346
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jun 27 17:01:02 2018 +0000

    Bug 21870: Convert browser alerts to modals: OPAC user summary
    
    This patch updates the user summary page in the OPAC so that JavaScript
    alerts are replaced with Bootstrap modals. This provides us the ability
    to more carefully control the content of confirmation dialogs and their
    control buttons.
    
    A global function for defining a modal confirmation boxes has been
    added, to which one can pass:
    
     - The modal title
     - Body
     - Text for submit and cancel buttons
     - A callback function to trigger on submit
    
    To test, apply the patch and clear your browser cache if necessary.
    
     - Log in to the OPAC as a user who has holds and article requests.
     - Test the following interactions, both the confirmation and cancel
       options for each:
         - Cancel a hold
         - Suspend all holds
         - Resume all holds
         - Cancel an article request
    
    Signed-off-by: Jose-Mario Monteiro-Santos <jose-mario.monteiro-santos@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e34a4b97ce4b48463fb6e640bfd6872c30fbe162
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Feb 26 09:34:11 2019 -0500

    Bug 22300: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0375414c04e97ce21270c114311a3d96403f8da5
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Feb 11 15:09:36 2019 +0000

    Bug 22300: Staff search results: Opt groups in 'sort' pull down are not well formatted
    
    This patch adds some CSS to style the staff client search results sort
    menu headings. Formerly these were <optgroup> tags with a default
    browser style.
    
    To test, apply the patch and regenerate the staff client CSS.
    
     - Perform a catalog search in the staff client.
     - On the search results page, test the "Sort" menu. Confirm that the
       menu headers more clearly indicate the sections.
     - Test the "Add to list" button menu too, where the same style will be
       in use.
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8bbfd0c027861764ec0e256e0f43b020da8f8af9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 15 10:38:14 2019 -0300

    Bug 21206: Fix SwitchOnSiteCheckouts.t
    
    Fix conflict with
      commit f8544ba5799c457057d42aefc63c88e15a08b096
      Bug 21999: Move attributes to a variable to not dup them
    
    Thanks tests!
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2a58e32f7d506ee87a20d50a53f497e18fb7cf13
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jan 15 16:32:57 2019 -0300

    Bug 21206: (QA follow-up) Rebase problem and leftover mocked GetItem
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ee9f4aed8b830bc2960fcc9a4f5d4c2487d2124f
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue Dec 4 11:40:17 2018 +0000

    Bug 21206: (follow-up) Fix Circulation.t
    
    Test plan:
    prove t/db_dependent/Circulation.t
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c63e73e237b93dbbe19f9ad1607f6d5d4d1b739c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Aug 7 12:55:52 2018 -0300

    Bug 21206: Fix Returns.t
    
    we are calling several times effective_itemtype
    Must be fixed later
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c72961082417447bb4bdc335512554bf3da1f0a6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Aug 7 12:52:28 2018 -0300

    Bug 21206: Remove GetItem
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 31c29fd31f557306233e6a2936148a5bb10b89a1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 6 19:50:41 2018 -0300

    Bug 21206: Replace C4::Items::GetItem
    
    Note: This is here for information purpose, feel free to test it if you
    wan to play with it.
    
    TODO: C4::Reserves::_get_itype is not longer in use
    
    No more GetItem must be returned by:
    git grep GetItem|grep -v GetItemsAvailableToFillHoldRequestsForBib|grep
    -v GetItemsForInventory|grep -v GetItemsInfo|grep -v
    GetItemsLocationInfo|grep -v GetItemsInCollection|grep -v
    GetItemCourseReservesInfo|grep -v GetItemnumbersFromOrder|grep -v
    GetItemSearchField|grep -v GetItemTypesCategorized|grep -v
    GetItemNumbersFromImportBatch|cut -d':' -f1|sort|uniq
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e47fa012f6e1ecf94712e0cb759625f136703c03
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Feb 22 11:31:52 2019 -0300

    Bug 22397: Wrong message in koha-sip --start
    
    This patch makes koha-sip --start calls mention 'SIP server' instead of
    the wrong 'Zebra daemon'.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7c99f79dda9c8ea3fcea053d191e9da5d3f6af78
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Feb 20 19:55:36 2019 +0000

    Bug 18251: (follow-up) fix rebase error
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0b61c8e5d05dcdb3acd4b6772b7fc51e66653a0a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 28 14:21:29 2017 -0400

    Bug 18251: (QA follow-up) Add 'renew' operation and check renewal vs checkout
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit eb62686630ec89d61fea048d645d333e6049ca98
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 20 10:48:21 2017 -0400

    Bug 18251: (QA follow-up) Add alerts for all SCO actions
    
    To test:
    
    Add sound alerts for sco-alert-warning
    Test various actions (return,renew) and verify success/failure notices
    and sounds
    Note additional classes (return,renew,issue) to allow for more
    specificity of sounds alerts
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b46fff6ce0c09a3d076273fd74af93e50b78b725
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 20 06:50:40 2017 -0400

    Bug 18251: (QA follow-up) Add alert box to checkout message
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 677fd902f377ef81b6623545f0e67bb10af64e93
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 13 14:30:42 2017 +0000

    Bug 18251: SCO alerts - need a trigger for successful checkouts
    
    This patch adds simple text and a div to allow for sounds to be
    configured upon successful SCO checkout
    
    To test:
    1 - Enable sco module
    2 - Enable AudioAlerts
    3 - Define alert with
         Selector: .sco-alert-success
         Sound:http://localhost:8081/intranet-tmpl/prog/sound/opening.ogg
    4 - Checkout to patron using SCO
    5 - Note only feedback is a addition of item to checkouts list
    6 - Apply patch
    7 - Checkout ot patron via SCO
    8 - You should hear the sound specified above
    9 - You should also see a note: Item checked out
    
    Followed test plan, works as expected.
    (Works with external sound only, see Bug 16732)
    Signed-off-by: Marc Véron <veron@veron.ch>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fb4707b97cec006e0e6f5c4b4dd430146e97f16a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Feb 20 20:00:01 2019 +0000

    Bug 22378: Fix audio alerts on SCO
    
    Note: The SCO only supports sounds with a full URL, not KOha built in sounds
    
    To test:
    1 - Enable audio alerts
    2 -  Enable SCO
    3 - Note JS error on loading the alerts
    4 - Apply patch
    5 - No more error
    6 - Test with bug 18251
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dd8749661ce7e48e86fc4eeba3c7c42e0321184e
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Feb 25 18:21:26 2019 +0000

    Bug 22411: Date and time in log viewer should respect
    
    Test plan:
    Go to log viewer and show some log
    -- without patch the date ant time in first column is formatted as
    yyyy-mm-dd hh:mm
    -- with patch the date is formatted according to your dateformat system
    preference
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e3212c8a969ff17783e50d564aaa412bd01a99b1
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Feb 21 17:21:58 2019 +0100

    Bug 15149: Serial test prediction pattern does not consider end date
    
    To reproduce:
    
    1) add a serial.
    2) set first issue = today
    3) set frequency = 1/month
    4) dont set subscription length
    5) set subscription start date = today
    6) set subscription start date = today + 1 year
    7) set numbering pattern = Number
    8) test prediction pattern.
    => Without patch : you will get a list of 1000 issues, going well beyond subscripton end date.
    => With patch : shows only the issues within the date range.
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    Signed-off-by: zhihui <zhihui@inlibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4585228ea9b5cc407dcec8e4bae499d59007ea96
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 22 11:06:46 2019 -0300

    Bug 18957: Record the time part of the last renewed date
    
    issues.lastreneweddate is a datetime and we could record the time part
    of the date.
    
    Test plan:
    Renew an issue
    note that the time part of the last renewed date is set correctly
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 54fd0718da1bd27531c7f3ac4ea16d04fb15e634
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 22 11:01:38 2019 -0300

    Bug 18957: Add tests
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e99a6de09335fdbe227292835b5231b13d9c1f18
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Feb 25 09:18:50 2019 +0000

    Bug 14850: (QA follow-up) Remove debugging code
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 831531d3bbd0e440693595d0b4fadc704b020d68
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Feb 22 07:12:10 2019 -0500

    Bug 14850: Funds from inactive budgets appear in 'Funds' dropdown on acqui/invoice.pl
    
    Test Plan:
    1) Create some inactive and active budgets
    2) View an invoice in acquisitions
    4) Note the shipping fund dropdown behaves like acqui/parcels.pl
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7128db531c18d3c75a4bad3424bd77732c0d4687
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Feb 22 12:00:35 2019 -0300

    Bug 22396: Make koha-sip set KOHA_HOME and KOHA_CONF correctly
    
    This patch corrects a typo, and exports KOHA_CONF as other scripts do.
    
    To test:
    - Apply this patch
    - Run:
      $ # in kohadevbox
      $ perl misc4dev/cp_debian_files.pl
    - Try the new script
      $ sudo koha-sip --start kohadev
    => SUCCESS: tail -f /var/log/koha/kohadev/sip* doesn't show fatal errors
    anymore
    - Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f0aa1c06a100108b66cd58cb3614915fc589f13e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 21 18:03:21 2019 -0300

    Bug 22049: Do not pass Koha::Patron to AddIssue
    
    The tests are not supposed to pass with such obvious mistake (?)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 986d551ac49488216f51773172bf6a2c7d041e40
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Feb 22 14:53:41 2019 +0000

    Bug 20639: DBRev 18.12.00.016
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9c1a87b8b1351d1659773729e39079328fc59e83
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Mon Feb 11 11:08:52 2019 +0000

    Bug 20581: (follow-up) Fix status_alias -1 bug
    
    Stupid bug, we need to pass NULL not -1 when unsetting status_alias
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7c14483010b22099b07512399889b8dab182e423
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu Feb 7 10:43:51 2019 +0000

    Bug 20581: (follow-up) Passed value to status_alias
    
    Now we have overloaded status_alias, we can no longer pass it undef (as
    it uses that to determine if it's being used as a getter or setter). So
    we now pass it -1 to indicate it should actually be setting undef (a
    hack, I know, but what are you going to do...)
    
    This patch makes sure ill-request.pl conforms to that. It also fixes the
    testing of the passed parameter, which was wrong.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9f9b809b606a486f94eb1feaa05ce87e71eb5476
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Wed Feb 6 14:18:59 2019 +0000

    Bug 20581: (follow-up) Fix unit test
    
    Since we're now storing the authorised_value column as the foreign key,
    rather than the id, we need to account for this in the test
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a2ced89ab486d4cc46f66553ff8fe7dff1022b78
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Wed Feb 6 14:17:01 2019 +0000

    Bug 20581: (follow-up) Fix status_alias comparison
    
    status_alias will arrive in the Koha object as a string, so when we
    special case it, we should also pass a string
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cee652af6b49aeef5aa50eb5f3888cb67f8c40f0
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Wed Feb 6 12:54:30 2019 +0000

    Bug 20581: (follow-up) Overload status_alias
    
    We need Koha::Illrequest->status_alias to return the correct authorised value.
    Since the foreign key uses a non-unique column, we need to take into
    account the authorised value category too.
    
    This patch overloads status_alias with some additional logic that
    considers the request's branch and the authorised value category to
    attempt to return the correct value.
    
    The same logic is applied to the custom statusalias method, which
    returns the entire AuthorisedValue object
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fb0bc2d18cc58a66df77a8779204f07c5dccae12
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Feb 5 15:19:12 2019 +0000

    Bug 20581: (follow-up) Fix typo in DB upgrade
    
    IN -> ON
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 39471ea91255b11cf238009f0a0576514d8774e9
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Feb 5 14:10:36 2019 +0000

    Bug 20581: (follow-up) Do not use PK for AV FK
    
    As per:
    https://bugs.koha-community.org/bugzilla3/show_bug.cgi?id=20581#c133
    
    We switch from using authorised_values.id when creating the foreign key
    illrequests.status_alias, we now use authorised_values.authorised_value
    
    I have added a migration from using id -> authorised_value, so when
    existing users of this bug get this version, their DB migrates nicely
    instead of just breaking.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c6f98aab5b0f8e3e09704e8513b6741cf0dd4e02
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Jan 25 11:55:47 2019 +0000

    Bug 20581: (follow-up) Fix dependency requirement
    
    Since this bug is now dependent on Bug 20600 (Provide the ability for
    users to filter ILL requests) we need to make the status filtering aware
    of the custom statuses. This patch does that.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bc05a8a6058625f939c6d31d046752ac570a7eec
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Jan 18 15:31:25 2019 +0000

    Bug 20581: (follow-up) Fix QA errors
    
    This patch fixes the "missing_filter" errors on ill-requests.tt
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4758c2e234341342c1ff5e9fe07ad2a85db3b0c7
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu Nov 29 12:05:46 2018 +0000

    Bug 20581: (follow-up) Fix typo in kohastructure
    
    Fix the missing comma
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3921636e5a9b2689234310cb24e71dd1b1329fd6
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Mon Oct 15 14:23:02 2018 +0100

    Bug 20581: (follow-up) Modify POD
    
    As per:
    https://bugs.koha-community.org/bugzilla3/show_bug.cgi?id=20581#c69
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5e0e8246be0f6dfcfb4870231bbdcfed4de0dbfa
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Mon Oct 15 14:46:21 2018 +0100

    Bug 20581: (follow-up) Fix AV population
    
    As per:
    https://bugs.koha-community.org/bugzilla3/show_bug.cgi?id=20581#c72
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 06415f962cc463217f289805e8f4c57ac4980d58
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Mon Oct 15 14:17:30 2018 +0100

    Bug 20581: (follow-up) Fix fallback status_alias
    
    As per:
    https://bugs.koha-community.org/bugzilla3/show_bug.cgi?id=20581#c68
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit de532ac80a31db83c2dabf45a65b9561733fceec
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Oct 12 14:31:45 2018 +0100

    Bug 20581: (follow-up) Fix statusalias return
    
    As per
    https://bugs.koha-community.org/bugzilla3/show_bug.cgi?id=20581#c57
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1e98932b401110a0af1876ba29917285eae1fdd3
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Oct 12 15:07:47 2018 +0100

    Bug 20581: (follow-up) Allow for undefined lib
    
    As per:
    https://bugs.koha-community.org/bugzilla3/show_bug.cgi?id=20581#c59
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit aea77a61da806d1e221a2db7c525479d8c3f3409
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Jun 5 12:19:06 2018 +0100

    Bug 20581: (follow-up) Display status name
    
    Rather than display the status code for custom statuses, we should be
    displaying the name
    
    Signed-off-by: Niamh.Walker-Headon@it-tallaght.ie
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 790b365831c0c883853a4f4c2b7755f03d1d9dd6
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Apr 17 17:00:32 2018 +0100

    Bug 20581: Unit tests for status_alias
    
    This patch adds unit tests for the specific status_alias functionality
    added in this bug
    
    - Creation of the ILLSTATUS authorised value
    - Illrequest->statusalias accessor
    - Illrequest->status overloading to reset status_alias
    
    To test:
    1) Apply this patch
    2) prove t/db_dependent/Illrequests.t
    
    Signed-off-by: Niamh.Walker-Headon@it-tallaght.ie
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cc9c773c02c93e55447076a5d286d63f00204834
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Mon Sep 3 14:14:31 2018 +0100

    Bug 20581: Fix display of status alias in OPAC
    
    Fix for status alias display in OPAC, we should be displaying the status
    name, not the status code.
    
    Signed-off-by: Niamh.Walker-Headon@it-tallaght.ie
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 85c9b7fb3a3802a892e011437fada866383c71e1
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Apr 17 12:03:07 2018 +0100

    Bug 20581: Add display of status_alias to staff vw
    
    - This patch adds display of the new status_alias value, when set, in
    favour of the request's status value.
    - It also allows the user to set a status_alias for an existing request.
    When set, this value will be displayed in preference to the status.
    
    Signed-off-by: Niamh.Walker-Headon@it-tallaght.ie
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d8fd680d0ce034dbe1517c8e9a0642c967519a3c
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Apr 17 12:00:15 2018 +0100

    Bug 20581: API provide status_alias embed
    
    - This patch provides the illrequests API route with an additional embed,
    called 'status_alias'. Requesting this embed returns an object for the
    request's status_alias authorised value, or null if one is not set.
    - This patch also adds the new status_alias as a default embed on the API
    call made by the illlist view
    
    Signed-off-by: Niamh.Walker-Headon@it-tallaght.ie
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f808923e67a5b79150f39a0b6c5d92a5ff73277c
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Apr 17 12:02:18 2018 +0100

    Bug 20581: Provide status_alias on IllRequest
    
    This patch provides status_alias support for the Koha::Illrequest
    object.
    
    - New 'statusalias' getter method, returns the request's status_alias
    authorised value object if set, otherwise undef
    - Overloads existing 'status' method, getter/setter accessors intact,
    but setting the request's status now implicitly removes any status_alias
    that has been set
    
    Signed-off-by: Niamh.Walker-Headon@it-tallaght.ie
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e631207eaa7df02601353d34ade406ec9c8a5bc3
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Apr 17 11:57:09 2018 +0100

    Bug 20581: Modifications to database schema
    
    - This patch provides an illrequests.status_alias column that is a foreign key to
    authorised_values.id. This provides the ability for an ILL request to
    have an optional status alias that is defined as an authorised valued.
    - A new ILLSTATUS authorised value category is also made available during install.
    
    Signed-off-by: Niamh.Walker-Headon@it-tallaght.ie
    
    Following commit was squashed into this one:
    
    Bug 20581: (follow-up) Modify DB updgrade
    
    As per
    https://bugs.koha-community.org/bugzilla3/show_bug.cgi?id=20581#c56
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a54eb7fd5cba95f6ef350fa50b7713c8c096a204
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Sun Jan 27 00:53:05 2019 +0000

    Bug 22261: Revise style of DataTables menus
    
    This patch revises our custom DataTables CSS to give a more colorful
    style to the columns configuration and export menus. The primary goal of
    this change is to make it easier to tell which columns are visible and
    which are hidden.
    
    To test, apply the patch and clear your browser cache if necessary.
    
    View a table with columns configuration and export options, e.e. Tools
    -> Notices & slip. Test the DataTables menus and confirm that they work
    as expected.
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    This is a nice update to the styles.
    
    Signed-off-by: Jose-Mario Monteiro-Santos <jose-mario.monteiro-santos@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 90b43c6e5fceda3d6bcc4fb24c99934331df1acc
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Feb 5 21:44:58 2019 +0000

    Bug 22170: Improve display of add/edit library group modal
    
    Tries to bring the emodal for adding/editing library root
    and sub groups more in line with the rest of Koha.
    
    To test:
     - Go to Administration > Library groups
     - With and without patch test following actions:
       - Add a new root group
       - Edit root group
       - Add sub-group entry
       - Edit sub-group entry
    - Verify that with the patch the display of the labels
      is more standard (bold and aligned to the right) and
      the input fields are a bit longer to allow for
      easier data entry.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Mikaël Olangcay Brisebois <mikael.olangcay-brisebois@inLibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit abb1b4a75053aa026740e16cc0197d86f417818e
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue Feb 12 21:33:50 2019 +0000

    Bug 22130: (follow-up) Show not for loan authorised values in batch checkout
    
    TEST PLAN
    1) In Koha administration, search "BatchCheckouts".
    2) Make sure "BatchCheckouts" is set at "Allow".
    3) Make sure "BatchCheckoutsValidCategories" contains at least one
    patron category.
    5) Copy the barcode of an item and change the status document so it
    cannot be loaned.
    4) Choose a patron which belongs to the patron category at 3).
    (their account should not be expired and they should not have active
     fees preferably)
    5) Go to the patron details page.
    6) Click on "Batch check out".
    7) Enter the item barcode.
    8) Notice a number is in brackets under the column "Information".
    9) Apply patch.
    10) Notice the status description has replaced the number.
    11) Try it with both: AllowNotForLoanOverride on and off
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9d69a4238269073fd03961e091b5099b85fea6e6
Author: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
Date:   Mon Jan 14 14:02:49 2019 -0500

    Bug 22130: Correct parameter to get authorized value description.
    
    This patch corrects the error that shows an authorized value instead of the obvious description of the document status.
    
    TEST PLAN
    1) In Koha administration, search "BatchCheckouts".
    2) Make sure "BatchCheckouts" is set at "Allow".
    3) Make sure "BatchCheckoutsValidCategories" contains at least one patron category.
    5) Copy the barcode of an item and change the status document so it cannot be loaned.
    4) Choose a patron which belongs to the patron category at 3).
    (their account should not be expired and they should not have active fees preferably)
    5) Go to the patron details page.
    6) Click on "Batch check out".
    7) Enter the item barcode.
    8) Notice a number is in brackets under the column "Information".
    9) Apply patch.
    10) Notice the status description has replaced the number.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d90d7a6ce7187016698c280adedf1cb892d320cb
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Feb 21 07:16:24 2019 -0500

    Bug 22080: (QA follow-up) Add filters
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit da85289767975938e9e0778a8f64e6ef1eca8d97
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Jan 11 14:28:07 2019 +0100

    Bug 22080: Easier translation of ElasticSearch mappings page
    
    Actual translation of ElasticSearch mappings page contains a huge block with a lot of %s.
    It makes translation hard.
    
    This patch uses new method from Bug 15395 to split into several translation blocks.
    
    Test plan :
    1) Apply patch "Bug 22080: [DO NOT PUSH] test code"
    2) Apply this patch
    3) Enable ElasticSearch in SearchEngine preference
    4) Go to Administration > Search engine configuration
    5) Check page is OK
    6) Update the PO files of a language : perl translate update xx-YY
    7) Write translation strings in misc/translator/po/xx-YY-messages.po
    8) Install translation : perl translate install xx-YY
    9) Check translated page
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cdd14f05ae8672786e5306c41ff0f15ec9fed26f
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Feb 6 04:31:28 2019 +0000

    Bug 21335: Remove redundant includes of right-to-left.css
    
    Fixes redundant includes of the right-to-left.css file.
    There is no need to include it in the .tt files as it's part
    of the doc-head-close.inc.
    
    Note:
      Make sure your *BaseURL preferences are correctly set as
      this will make the switching between languages work
      correctly and throw you back to the start page otherwise
      every time you switch
    
    Test:
    - Install an RTL language like Arabic (ar-Arab)
    - Test various pages with English and RTL language:
      - Authorities home page
      - Adding a new bibliographic record
      - Adding a new item or editing items
      - Advanced cataloguing (Rancor) editor
      - Labels start page
      - OPAC detail page
    - Verify display is correct and right-to-left.css is available
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fe0a2474c9b6702e7d452032f7657da9b990e81a
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Feb 6 12:13:12 2019 +0000

    Bug 18166: Show internal and vendor notes for receivied orders
    
    This copies the logic for showing, adding and editing vendor
    and internal notes from the pending orders to the received
    orders.
    
    To test:
    - In acquisitions create a basket with orders
    - Make your you have some internal and vendor notes
    - Close the basket and receive shipment
    - Create or reuse an invoice
    - Receive some of your orders
    - Verify that the notes don't show for received orders
    - Apply patch
    - Verify that the edit/change vendor/internal note links
      work the same on pending and received orders
    
    Signed-off-by: Jose-Mario Monteiro-Santos <jose-mario.monteiro-santos@inLibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 55332977bf4d70de9d78c324ad88b302d2174c10
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Feb 22 13:28:50 2019 +0000

    Bug 16276: (RM follow-up) Fix update statement output
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8211aad8c7ad772685b5e3624b3b55b738fe18a2
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Feb 6 12:27:53 2019 +0000

    Bug 17236: Add minute and hours to last checked out item on circulation for hourly loans
    
    This is a simple fix using the right TT filter:
    [% issue.date_due | $KohaDates as_due_date => 1 %]
    
    The time part of the due date will only display if it's an hourly loan (!=23:59)
    
    To test:
    - Check out 2 items
      - One with a loan period in days
      - One with a loan period in hours
    - Verify the the due date only shows the date part
    - Apply patch
    - Return items and repeat
    - Verify that now the time part will show for the hourly loan
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Mikaël Olangcay Brisebois <mikael.olangcay-brisebois@inLibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 569c64252eba27607deb9eccefe7d72678c7bbb9
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Feb 19 19:34:04 2019 +0000

    Bug 21692: (QA follow-up) Enhance test for new
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 34c36a32a057c3a9be062e4ea8b6ec46c41859a0
Author: Jasmine Amohia <jasmineamohia.student@wegc.school.nz>
Date:   Thu Jan 17 03:33:49 2019 +0000

    Bug 21692: created a test for Koha::Account->new
    
    Test plan:
    1) Run test for /Koha/Account.t and confirm that all tests were
    successful
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8083bc2ff0629dce8301330e144a61fee35d9836
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jan 29 11:07:06 2019 -0300

    Bug 22216: Make GET /patrons/{patron_id} staff only
    
    This patch removes the possibility to access the patron object
    identified by patron_id by the patron itself, or a guarantor.
    
    It does so by removing the permissions from the spec. The tests are
    adjusted to remove that use case.
    
    To test:
    - Apply this patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/api/v1/patrons.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fac2c172143b31255767684e4b22c0ba1ae0aaaf
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Dec 13 14:56:22 2018 -0500

    Bug 21997: SIP patron information requests can lock patron out of account
    
    Many SIP services send an empty password field (AD). Even if allow_empty_passwords is enabled for the given SIP account, this empty password is run though Koha's password checker which increments the number of login attempts for a patron. Thus repeated patron information requests can lock a patron out! Empty password fields in SIP should not call for a password check if allow_empty_passwords is enabled.
    
    Test Plan:
    1) Enable a patron password attempt with a limit of 3
    2) Send 4 patron information requests with an empty AD field
    3) Note the patron's account is now locked
    4) Apply this patch
    5) Repeat step 2 with a different patron
    6) Note the patron's account does not get locked!
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d0a6469ad58ccd6067bdfbb6cfb0e28dabc5862a
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Feb 11 13:16:10 2019 -0500

    Bug 21997: Unit tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2d904a55e7f0d5da23d61e5272e36a75e4b68af2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 19 12:18:19 2018 -0300

    Bug 21622: Adjust incorrect GROUP BY clauses in acqui script
    
    acqui/ordered.pl:    GROUP BY aqorders.ordernumber
    acqui/spent.pl:    GROUP BY aqorders.ordernumbe
    
    'koha_kohadev.aqorders.biblionumber' isn't in GROUP BY
    
    Test plan:
    - Create orders for different basket and using different funds
    - Receive some of them
    - Hit the ordered and spent pages (from the acqui home page)
    => The tables must contain the same data with and without this patch
    
    Signed-off-by: Jasmine Amohia <jasmineamohia.student@wegc.school.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 25006c04da500078b2af1b14824b67076f2f9df5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 21 13:25:22 2019 -0300

    Bug 22386: Remove debug statements
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8a9c82c3ec42fb5c2937fa523170b3710288d7fd
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Feb 21 14:30:22 2019 +0000

    Bug 22386: Define patron variable when matchign on extended attributes
    
    For all other methods we define a patron object and check the userid,
    we just need to define the $patron here
    
    To test:
    0 - Apply unit test patch alone
    1 - prove t/db_dependent/Koha/Patrons/Import.t
    2 - It dies
    3 - Apply this patch
    4 - repeat tests
    5 - It passes!
    
    Signed-off-by: Devlyn Courtier <dcourtier@hccc.edu>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9f27a63b9ad770ac56e32a3e79d1ecb657534482
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Feb 21 14:29:59 2019 +0000

    Bug 22386: Unit tests
    
    Signed-off-by: Devlyn Courtier <dcourtier@hccc.edu>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 63c5a813c994a4893eaef2cb87fcd26bc594c3e4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 21 13:42:30 2019 -0300

    Bug 22389: (bug 15836 follow-up) Add Delete regex links on creating splitting source
    
    The "Delete" link does not exist when the form is empty.
    
    Test plan:
    Create a new classification splitting source
    Select "Regex" for routine
    => The delete link does not appear (you cannot remove if there is only
    one input)
    => It a regex
    => The 2 delete links appear
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ba7c3f51ccf72565fb721403e1b24c6a56284b49
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Feb 21 16:48:22 2019 +0000

    Bug 22391: Remove group by clause in ajax-getauthvaluedropbox.pl
    
    To test:
    1 - Enable strict sql modes
    2 - Tail the error log
    3 - Add an item to a basket - note that when fund selected you get an error
    4 - Apply patch
    5 - Repeat, no error
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e429c4b84d662fcc9466a5ed4ee38ba704881507
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 21 12:23:05 2019 -0300

    Bug 22388: Add missing +x flag to split_callnumbers
    
    The following commit added this svc script but did not set the correct
    permissions, +x was missing
      commit 328046e59cbf7c858b9218ac2adf27bb42784776
      Bug 15836: Add missing svc script
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6c7c97f67cdcd6dc90e3fa34aa7bd289b80a9c4b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Dec 17 17:51:12 2018 +0000

    Bug 22015: Move DataTables CSS to global include
    
    DataTables are used on enough pages in the staff client that it
    doesn't make sense to put inclusion of the CSS into each template
    where it is needed. This patch moves includes of datatables.css from
    individual templates into the global header file.
    
    To test, apply the patch and view various pages which have DataTables.
    View various styles of DataTables, e.g.
    
     - Full pagination, like item search results
     - Four-button, like Saved SQL reports
    
    Everything should look the same as it was.
    
    Signed-off-by: Jose-Mario Monteiro-Santos <jose-mario.monteiro-santos@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 431ee03534825bfe589a2c1640478edabd713474
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Feb 4 03:57:12 2019 +0000

    Bug 20600: (QA follow-up) Fix terminology and capitalization
    
    - Subject Line > Subject line
    - Patron barcode > Cardnumber
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 71384d32766e54b530310c7a64dabf4d7e504d08
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jan 14 13:14:46 2019 +0000

    Bug 20600: (follow-up) Fix critic error
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 91be82a63d8b9eb1ad25c19af9a4b205ada5de29
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Mon Jan 14 10:41:34 2019 +0000

    Bug 20600: (follow-up) Fix tests
    
    Some silly variable name typos in the tests
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 69672b818571da9e7ff798e39f66293dab5b1740
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Nov 9 14:36:48 2018 +0000

    Bug 20600: (follow-up) Fix unit tests
    
    The unit tests now need to be aware of the calculated placed_formatted
    and updated_formatted properties in the API response object
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4e4d77d70238e3cb3ef9c4ae4b051ad423366a27
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Nov 9 14:36:13 2018 +0000

    Bug 20600: (follow-up) Fix API spec
    
    We now return placed_formatted and updated_formatted, the API spec
    should reflect this
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 43f1aa77a13d1de0826b3b7541cc552eeb804081
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu Nov 8 11:03:37 2018 +0000

    Bug 20600: (follow-up) Restore patron name fix
    
    The fix for patron name display when no first name is specified was lost
    in the rebase. This patch restores it.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6e03043314e6241d8bb1ec23558f492d62b8b084
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Mon Nov 19 11:25:24 2018 +0000

    Bug 20600: (follow-up) Rebase on current master
    
    Significant things have changed in master due to ILL enhancement patches
    being pushed. This patch rebases this bug on top of them
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7ab87c2dcdb1dccb11e9a745e70fa1ee8b6d6bbf
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 5 14:24:00 2018 +0000

    Bug 20600: (follow-up) Move template JavaScript to the footer
    
    This patch moves the ILL requests template's JavaScript to the footer.
    
    Also changed:
     - Removed unused jQuery checkboxes plugin
     - Some <input> tags have been corrected to be self-closing.
     - Title tag has been corrected
     - Table row limit of 10 has been removed in favor of accepting default
       used elsewhere.
    
    To test, apply the patch and follow the original test plan for this bug.
    Everything should work as expected.
    
    Signed-off-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 07ab5ab1f7b6386c53eea61be669eaae49975668
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Wed Jun 6 10:52:44 2018 +0100

    Bug 20600: (follow-up) Remove console.log!
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2153b8c8cf60acd19271b581093aa0d2f7281e6b
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Wed Jun 6 10:45:44 2018 +0100

    Bug 20600: (follow-up) Fix filtering
    
    There was a bug whereby filtering by date would fail if the selected
    date syspref was set to dmydot or metric. Rather than use the display
    date value, We now use the non-display date value that is always in
    a predictable ISO8601 format to construct the Date objects used
    for comparison.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit acffc1c195f71053871d9f8bf3ecce6fc4d6a7c0
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Mon Jun 4 12:43:37 2018 +0100

    Bug 20600: (follow-up) Add date range filtering
    
    It makes more sense to be able to filter placed and updated dates by
    range. This patch adds that.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 216f68bc1e0d93fa8d54b48452371508853c47c9
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Jun 1 12:00:55 2018 +0100

    Bug 20600: (follow-up) Remove date formatting
    
    It is not required
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit eb1aaf7713ffaed156721abe6f19886ba29c1960
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Jun 1 11:59:35 2018 +0100

    Bug 20600: (follow-up) Do not use $_ in loop
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 450f08e932a5b6d47a188c737920b84e00df8c08
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Apr 20 14:25:49 2018 +0100

    Bug 20600: Add filtering of ILL requests in list
    
    This patch adds the ability for the ILL request list in the staff
    interface to be filtered by a number of criteria:
    
    - Status
    - Date placed
    - Date modified
    - Pickup branch
    - Borrower card number
    
    To test:
    1) Apply patch
    2) Ensure you have a reasonable range of ILL requests created
    3) Navigate to the "View ILL requests" page
    4) Choose one or more filtering criteria
    5) Click "Search"
    6) Observe the results are filtered to match the selected criteria
    7) Click "Clear"
    8) Observe your results are returned to their initial state
    9) Repeat steps 4 -> 6 until you are happy.
    
    Dates supplied by the /api/v1/illrequests API route were not conforming
    to the preference specified by the dateformat syspref. This patch
    addresses that.
    
    It has been addressed as part of this bug since we are adding filtering
    of requests by some date fields and, therefore, needed dates in a
    predictable format.
    
    To test:
    1) Apply the patch
    2) Ensure you have at least one ILL request created
    3) Make a request to the /api/v1/illrequests endpoint
    4) Observe that dates supplied for "placed_formatted" & "updated_formatted" conform to your
    dateformat syspref.
    5) Change your date format syspref, repeat steps 3 & 4
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Works as advertised. Nice enh!
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 296f9eae3cbe122cf0a3d426334c9796880ff13c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Feb 19 16:34:41 2019 +0000

    Bug 3820: DBRev 18.12.015
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e3ca2675a2a1a2bc14c043e500cec45c470c7b67
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Feb 19 12:37:14 2019 +0000

    Bug 3820: (follow-up) Address lastseen log spamming
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d6867ef1c877bd0293a2607de5bc3f0b6615c985
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Sun Feb 17 21:31:14 2019 +0000

    Bug 3820: (QA follow-up) Change REGEXP_REPLACE to REPLACE for wider compatibility
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 15d4b4fd8bde25e4c31a76d81783c4509f5db623
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Feb 18 13:33:53 2019 +0000

    Bug 3820: (follow-up) Update tests to reflect the change of behaviour
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6ce317dd5cc454fd62a14bc26f678051b869c768
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Feb 18 13:33:12 2019 +0000

    Bug 3820: (follow-up) Update cardnumber logs match the new format
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 441493950b481c8cef5733134d28e164d1289386
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Feb 14 12:28:30 2019 +0000

    Bug 3820: (follow-up) Clean up warnings
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ee6fc112d5f99b3f70c9a50ea187220143e25d50
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Feb 14 10:45:26 2019 +0000

    Bug 3820: Add changes to MEMBERS MODIFY logaction
    
    This patch attemps to add a more refined and detailed info structure
    detailing what fields were changed and what they were changed from and
    to.
    
    Test Plan: Enable BorrowersLog in the system preferences and undertake a
    series of borrower detail changes.  Go to view the actionlogs and note
    that MEMBER MODIFY logs now detail what fields you have changed using
    the following form:
    
      { FIELD1: { before: BEFORE_VALUE, after: AFTER_VALUE } }
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9ce71f34ee1e106a3d1b36533e9a86b1d2c7ad01
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Feb 11 17:45:51 2019 +0000

    Bug 19164: (QA follow-up) Minor whitespace cleanup
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1513c97b59a9faafeca2c5147b5cc65c4d2fd37c
Author: Jon Knight <J.P.Knight@lboro.ac.uk>
Date:   Mon Feb 11 15:50:30 2019 +0000

    Bug 19164: Add MARC modification template support to misc/stage-file.pl.
    
    https://bugs.koha-community.org/show_bug.cgi?id=19164
    
    Bug 19164 - Allow MARC modification templates to be used in staged MARC imports
    
    Patch checks for duplicate MARC modificiation templates and if only one is
    found that matches the name given on the command line, submits the batch
    staging of the input files using that template.
    
    Test plan:
    
    1) In the staff web client got to "Home › Tools › MARC modification templates" and create a MARC Modification Template called "Test Bug 19164". Set the action to be "Copy field 999$l to 998$l using RegEx s/NASH/FLASH/ if 999$l matches NASH"
    
    2) Download the test MARC record from this bug into a file called marc1.mrc into your koha dev user's home directory.
    
    3) Run misc/stage_file.pl with the command line:
    
       misc/stage_file.pl --file ~/marc1.mrc --add-items --marcmodtemplate "Test Bug 19164" --item-action replace --comment "testing MARC mod templates on batch staging"
    
    4) In the staff client, go to Home › Tools › Manage staged MARC records and check that the file is visible and in status "Staged"
    
    5) Click on the filename to bring up details of the staged batch, and then click on "Basic Christianity. Stott, John R. W. (0802811892)". Note that there is a 998$l field with the value "FLASH" that has been created using the MARC Modification Template.
    
    Signed-off-by: Mackey Johnstone <mackeyfj@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5b0eb51c8066abbd645731593572277ca5b46715
Author: Mark Tompsett <mtompset@hotmail.com>
Date:   Sat Feb 18 19:50:32 2017 -0500

    Bug 18143: Silence ods MARC framework export flood
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 719153455c8c58fb8b1a8e9123acef5052dbd462
Author: Mark Tompsett <mtompset@hotmail.com>
Date:   Sat Feb 18 19:21:59 2017 -0500

    Bug 18143: Silence XML MARC Framework export flood
    
    TEST PLAN
    ---------
    1) Log in to staff client
    2) Click Koha administration
    3) Click MARC bibliographic framework
    4) export default as xml
    5) Read the error log
       -- it's floody and export is default framework
    6) export another framework as xml
    7) Read the error log
       -- it's floody and export is the correct framework
    8) apply the patch
    9) repeat steps 4-7
       -- expected frameworks exported, and no flooding.
    10) run koha qa test tools
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e55d16f0da01dc474dc2f4541926c1daf609aff0
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 29 17:53:37 2018 +0000

    Bug 20102: Remove attribute "text/css" for <style> element used in staff client templates
    
    This patch modifies staff client templates to remove the "type"
    attribute from <style> tags. The attribute is no longer valid.
    
    To test, apply the patch and confirm the changes to the templates. The
    appearance of the staff client should be unchanged.
    
    Validating pages from the staff client should not return any errors
    related to the <style> "type" attribute.
    
    Signed-off-by: Jose-Mario Monteiro-Santos <jose-mario.monteiro-santos@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d220725694302f187b3ff92c0eedda583919b735
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 8 16:54:37 2019 +0000

    Bug 21427: (QA follow-up) Fix for tabs
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 209570f89d050f22fa90eed6a8a70ad9eb56e8a2
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Jan 11 22:55:35 2019 +0100

    Bug 21427: Format prices on ordered/spent lists consistently
    
    Some price information on the spent and ordered list already
    used the $Price filter. With this patch all amounts should be
    formatted according to the CurrencyFormat system preference.
    
    Signed-off-by: Jack Kelliher <jke0429@stacmail.net>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 83dc5896e5afe0509d2732bba08f8e3f9d69f69d
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Dec 20 21:44:02 2018 +0100

    Bug 12759: Add missing html filters
    
    Add some missing html filters to fix QA script
    complaints.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1ce4730d374c57e5e6f9abffe1bff112a8485cc5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Nov 12 14:50:31 2018 -0300

    Bug 12759: Pass records from selected tab
    
    To remove ambiguity we should not process the records from other tabs.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 89c9df6ad5869b709e45947f29ff4588d893f05c
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Jul 10 04:10:40 2018 +0000

    Bug 12759: (follow-up) Using tabs for diff ways of adding records
    
    This patch includes the changes for both batch record modification and
    deletion.
    Checks that all public lists are included and only private lists created
    by the logged in user.
    Hides the virtualshelves option if authorities are selected.
    Doesn't show shelf option at all if none exist
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 408062a2bd0158d99690222c3be9963599858042
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Feb 15 22:52:45 2017 +0000

    Bug 12759: Use a list (shelf) for batch record modification and deletion
    
    To test:
    1) Create a list, add a record to it by its barcode that you don't mind
    deleting
    2) Go to Tools -> Batch record modification
    3) Select the record type 'Authorities'. Confirm the dropdown to select
    a list disappears. Confirm selecting 'Biblios' makes the dropdown show
    again.
    4) Select the list from the dropdown, select a modification template,
    Continue
    5) Confirm all of the records in that list show on the page. Click
    Modify selected records. Confirm this is successful.
    6) Go to Batch record deletion
    7) Select the record type 'Authorities'. Confirm the dropdown to select
    a list disappears. Confirm selecting 'Biblios' makes the dropdown
    show again.
    8) Select the list from the dropdown and click Continue
    9) Confirm all of the records in that list show on the page. Click
    Delete selected records. Confirm this is successful.
    10) Go back to your lists. The list should still exist but it will now be
    empty.
    
    Sponsored-by: Catalyst IT
    NOTE: Rebased to work -- Mark Tompsett
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5fbe1d71050cec607056b6c1916f65b837937c56
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 8 14:44:30 2019 +0000

    Bug 14272: (QA follow-up) Remove superflous filter
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fc9b78277aacd20ce7a4f305ab0faeed8139c633
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Nov 28 22:01:41 2018 +0000

    Bug 14272: (follow-up) Show single display of 'all' news
    
    This patch ensures that news items with location set to 'all' can be
    clicked on and shown individually also.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4b8dfad8a6a7667a06658461ce8764eff56ef838
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Oct 30 20:08:30 2018 +0100

    Bug 14272: Fix missing TT filters
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b04a3e4b5df97018436c72b68fe50014f6fcee5a
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Aug 28 22:32:28 2018 +0000

    Bug 14272: (follow-up) Fixing layout issues and expiration date hint
    
    Misunderstood the first time.
    
    I've added the hint to the news form on staff side.
    I've fixed the layout on OPAC.
    The RSS feed shows on the main page, but is hidden if there is no news
    and if viewing one news item.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 473a2d90d6eb1b814e66de0fc3a59882fed04c83
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Jul 4 01:08:17 2018 +0000

    Bug 14272: (follow-up) Fixing template error and layout
    
    To test, confirm that OpacMainUserBlock and Quote of the Day do not show
    if viewing a single news item, but do show otherwise. Confirm user
    dashboard shows where expected
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    UPDATE 24/Aug: Add expiration date text
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e7a1a3444b2d9a1c616766aeb38f34009f2e9527
Author: Charles Farmer <charles.farmer@inLibro.com>
Date:   Fri Jun 29 14:27:00 2018 -0400

    Bug 14272: (follow-up) only display news available for a particular opac lang [alternative patch]
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit acb455f151ac737613857c58e64a600d760a59e0
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Jun 13 02:27:13 2018 +0000

    Bug 14272: Show single news item [alternative patch]
    
    This is a new patch for this bug that shows a single news item on the
    OPAC using Koha Objects (Koha::News).
    
    To test:
    1) Go to Tools -> News on staff interface, make a news item to show on
    the OPAC
    2) Go to OPAC
    3) Notice news item shows and title cannot be clicked
    4) Apply patch, refresh page
    5) Notice title is now a link. Click title
    6) Confirm breadcrumbs shows title of news item
    7) Confirm RSS feed and OpacMainUserBlock are not visible
    8) In the URL, change the news_id param to an ID that does not exist
    9) Confirm that an appropriate error message shows
    
    Sponsored-by: Catalyst IT
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5ea9fb91632d712a6f70f4a3382ba96b4db74f69
Author: Jasmine Amohia <jasmineamohia.student@wegc.school.nz>
Date:   Wed Jan 16 21:26:10 2019 +0000

    Bug 22147: Hidden 'Batch modify' button on report print layout
    
    Test plan:
    1) Create or run a report that has an itemnumber column
    2) Notice the Batch modify button under the itemnumber heading
    3) Print the page
    4) Notice the button no longer shows on the printed page
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 940c5c0add3065d35f776a3a19ba87d936e84a0f
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Dec 6 15:17:37 2018 +0100

    Bug 21966: Fix descriptions of acquisition permissions to be more clear (again)
    
    This was already done and pushed on bug 3849, but some of it got
    undone accidentally by a later patch.
    
    To test:
    - Check the acquisition permissions
    - The *budget* permissions should clearly describe their
      use for 'funds'.
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 02aa348f653a46cae671f5949a27a205bd5cb4fa
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Feb 5 08:24:31 2019 -0300

    Bug 16497: Refactor tests using BASIC authentication
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 562eaa154b9efa20431133db04823c4d36be742d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jan 18 12:02:38 2019 -0300

    Bug 16497: (follow-up) GET operations require staff access
    
    With the introduction of the /public namespace all other endpoints, the
    rest of the endpoints are restricted to privileged users.
    
    This patch makes the GET /libraries and GET /libraries/:library_id
    endpoints require 'catalogue' permissions.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0718416ff1ca70a25bc12fa3b677fdeafd7854c8
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jan 11 13:23:14 2019 -0300

    Bug 16497: (follow-up) Adapt to existing guidelines and RFC
    
    This patch makes the original implementation match what is specified on
    the RFC [1].
    
    The controller is updated, and so the tests.
    
    To test:
    - Apply this patches:
    - Run:
      $ kshell
     k$ prove t/db_dependent/api/v1/libraries.t
    => SUCCESS: Tests pass!
    
    [1] https://wiki.koha-community.org/wiki/Libraries_endpoint_RFC
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 311f5f38c328267244481c8e5419be01e7d0aa12
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Tue Dec 5 14:56:34 2017 +0000

    Bug 16497: Add POD in Koha/REST/V1/Library.pm
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 145f578d267427fd7b0936918d988be1febe658c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 27 12:07:50 2017 -0300

    Bug 16497: (follow-up) New column marcorgcode added
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 99ad829f991a30cd044995f3e93d52fc9b87dc1d
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Fri May 5 10:49:37 2017 +0000

    Bug 16497: Add missing field in definitions due to bug 18066
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Benjamin Rokseth <benjamin.rokseth@kul.oslo.kommune.no>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 96456cadc28e7e4b442da76adb2c9b1ece5a68f1
Author: Jiří Kozlovský <mail@jkozlovsky.cz>
Date:   Sun Jul 31 11:46:57 2016 +0200

    Bug 16497: Add /api/v1/libraries
    
    CRUD for libraries via REST API.
    
    GET    /api/v1/libraries              - List all libraries
    GET    /api/v1/libraries/{branchcode} - Get one Library
    POST   /api/v1/libraries              - Add new Library
    DELETE /api/v1/libraries/{branchcode} - Delete Library
    
    Test plan:
      - apply patch
      - run tests: t/db_dependent/api/v1/libraries.t
      - test API with some API tool or simple curl
    
    e.g.:
    curl http://host:port/api/v1/libraries
    curl http://host:port/api/v1/libraries/cpl
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Benjamin Rokseth <benjamin.rokseth@kul.oslo.kommune.no>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 47839084fb788d2d5339842dfb5c6029984f2928
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 15 09:44:52 2019 -0300

    Bug 7143: (follow-up) Update about page for new devs (Academy)
    
    It's now 2019!
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fd9ff6a4f012399fc8408aa25ab1185d8308ea45
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jan 24 16:13:47 2019 +0000

    Bug 21845: Sort of issues in OPAC subscription table
    
    This patch adds a default sort option to the table of subscriptions on
    the OPAC detail page. This sorting option matches the sort of data
    passed from GetLatestSerials.
    
    To test, apply the patch and locate a subscription in the OPAC which has
    multiple issues. They should be sorted by default on publication date.
    
    Signed-off-by: mikael <mikael.Olangcay-Brisebois@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8a2d5fab95ae2db5adf8cca16524b7a231680dd3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jan 17 16:39:52 2019 +0000

    Bug 22156: Subscription result list sorts on "checkbox" by default
    
    This patch adds default sorting by title to the subscription search
    results list. Previously no default sort was defined, so it defaulted to
    sorting by the first column in the table.
    
    To test, apply the patch and go to Serials.
    
    - Perform a search of subscriptions which will return multiple results.
    - Confirm that the table of open subscriptions is sorted by default by
      title ascending.
    - Confirm the same for the table of closed subscriptions.
    
    Signed-off-by: Jose-Mario Monteiro-Santos <jose-mario.monteiro-santos@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 112286ead4b3b2ba3f49b50b8ef4270d9dd7824c
Author: David Gustafsson <glasklas@gmail.com>
Date:   Tue Feb 19 12:08:10 2019 +0000

    Bug 22351: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d000b4202fc7d8d1e80467c8c9890bd71d96cef0
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 15 16:12:22 2019 +0000

    Bug 22351: SCSS conversion broke style on last checked out information
    
    This patch makes a minor change to the staff client SCSS to correct an
    error which happened in the SCSS conversion.
    
    To test, apply the patch and regenerate the staff client CSS. Check out
    an item to a patron. The box showing information about the item you just
    checked out should be flush with the checkout form box.
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a27a6e6d729cd3b6be0251c1c6bda5a763fea6bc
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jan 30 19:58:25 2019 +0000

    Bug 22239: JavaScript error on subscription detail page when there are no orders
    
    This page modifies the subscription detail page so that a JavaScript
    error isn't triggered when a subscription has no acquisition details.
    
    To test, apply the patch and go to Serials.
    
     - Locate a subscription which isn't tied to acquisitions. In the
       browser console there should be no errors.
     - Locate a subscription which is part of an order. There should be an
       'Acquisitions details' tab and the order information on that tab
       should be displayed as a collapsible tree.
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 83fe95d0c5d404a2ffc6ed35e822ff0f5ee8b6e6
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Feb 13 13:25:20 2019 +0100

    Bug 22323: cronjob runreport.pl CSV add encoding
    
    Cronjob runreport.pl runs SQL reports and can export as CSV.
    This export needs to be UTF-8 encoded.
    
    This pathes replaces use of Text::CSV_XS by Text::CSV::Encoded like in other places like tools/viewlog.pl.
    It adds a decode of headers bcause they will be encoded lika other lines.
    
    Test plan:
    1) Create a new item with itemnotes 'accentué'
    2) Create a SQL report with :
    SELECT barcode,itemnotes AS itè FROM items WHERE itemnotes LIKE 'accenté'
    3) Run this report
    4) You see well encoded header and content
    5) Run from command line (replace X by report number) :
    misc/cronjobs/runreport.pl X --format=csv --csv-header --store-results
    6) You well encoded header and content
    7) Go to saved reports table
    8) Look at saved results of report
    9) You well encoded header and content
    
    Signed-off-by: Mikaël Olangcay Brisebois <mikael.olangcay-brisebois@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fcc17549bee1d1f9d85815a5bab24ba4ffaac7b3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sun Feb 17 10:54:24 2019 -0300

    Bug 21904: Add missing PROCESS stt
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b225ffc559d22e7a373b92bf25a3a4162dc21be2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Dec 6 13:58:44 2018 -0300

    Bug 21904: Hide libraries outside of the group in the header
    
    Fix typo
    
    To test:
    1 - Create a library group with two libraries
    2 - Enable hiding patron info for that group
    3 - Find or create a patron at one of those libraries without
    view_borrower_infos_from_any_libraries permission (but with staff side
    permission)
    4 - Sign in as that staff person
    5 - Click 'Patrons'
    6 - Click the [+] to expand search options
    7 - Set the 'Library' dropdown to a library outside of the group
    8 - Search
    
    Signed-off-by: Nazlı Çetin <nazli@devinim.com.tr>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ae85590a323c468e1ffbe566fe1f916a2901b56b
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Feb 5 21:29:13 2019 +0000

    Bug 22171: Fix shipping cost display on invoice
    
    When not 0 the shipping cost on the invoice would display with
    a lot of numbers after the comma. This fixed it to display with
    only 2.
    
    To test:
    - Make sure you have an invoice with shipping cost set (example: 5.00)
    - Open the invoice for editing (invoice.pl)
    - Verify the shipping cost displays with too many decimals (5.000000)
    - Apply patch
    - Verify now the shipping cost displays correctly (5.00)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a5ceb74102ef664dfa5cde20b049c924b1600c0b
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Feb 5 22:10:01 2019 +0000

    Bug 21710: Fix typo in atributes in installer
    
    Adds the missing t to some atributes in the web installer
    files.
    
    To test:
    Easiest to verify by looking at the patches, changes
    appear in comments and the text shown by the nb-NO and
    English web installer.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2cf573ab347da9e0f570dbf05961c38d3b0f7aaa
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Feb 5 22:12:03 2019 +0000

    Bug 22299: Fix typo in option of import_patrons.pl
    
    Fix typo in 'p|preserve-extended-atributes' option of
    the import_patrons.pl script.
    
    To test:
    - Use the script to import patron data.
    - Verify behaviour is the same with and without the patch
      concerning the preserve-extended_at(t)tributes option
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 60347dcc0724ad354cfabb89ca024dfa269e62e5
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Feb 10 01:36:20 2019 +0100

    Bug 20544: Wrong comment database documentation on itemnotes
    
    Fixes the comments in kohastructure.sql to state the right
    MARC21 fields for itemnotes (public and internal).
    
    To test:
    - Create a new Koha database and make sure it still installs
    - Read the patch and check comments are correct
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit daf47da8cd9c94829ff49ec2041d39b1510ae6da
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Feb 10 01:48:46 2019 +0100

    Bug 20174: Remove xml_sax.pl target from Makefile.pl
    
    There appears to be no xml_sax.pl in Koha, so the
    reference should be removed.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1fe43199b642fa575fd93131e1390c55d4631e52
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Feb 4 06:30:51 2019 +0000

    Bug 8387: Hide headings in tools when user has no permissions for any listed below
    
    The headings for each column on the tools page will show, even if the
    user has no permission for any tool below it. This patch tries to
    correct this.
    
    To test:
    - Try various combinations of tool permissions
    - On the tools module start page and for the tools sidebar
      visible on the left on a tool's page:
      - Make sure headings don't show when you have no permissions
        for any of the tools listed below
      - Make sure headings show correctly if you have one or
        many of the tools permissions needed
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    The qa tool gives some warnings but I think they can be considered false
    positives.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f2746dd8fb1c4557ae56db4769a07fe663576ddc
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Feb 6 11:43:52 2019 +0000

    Bug 18939: Acquisition statistics - Fix wrong template variable name for collection filter
    
    The template variable was wrong, so the filter never submitted the
    collection code for the query.
    
    Before:
    <option value="">Fiction</option>
    <option value="">Non-fiction</option>
    
    After:
    <option value="FIC">Fiction</option>
    <option value="NFIC">Non-fiction</option>
    
    To test:
    - Go to Reports > Statistics wizards > Acquisitions
    - Pick a row and column
    - Compare results with and without collection filter
    - Verify the table is always the same
    - Apply patch
    - Repeat comparison, verify the filter works now
    
    https://bugs.koha-community.org/show_bug.cgi?id=18393
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4e139a237b874df5fcd2169abba75eb3745239f5
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jan 4 11:42:08 2019 +0000

    Bug 10676: Add unit tests - GetItemsInfo
    
    To test:
      prove t/db_dependent/Items.t
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 39d2885d1330afe825e1881f5fc8033d459f6006
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jan 4 10:11:03 2019 +0000

    Bug 10676: Fix behaviour of OpacHiddenItems for items.restricted
    
    The numerical restricted value was overwritten in GetItemsInfo
    with the description. So OpacHiddenItems would only work for
    restricted using the description, not the numerical value
    of the authorised value like for other similar status fields.
    
    This changes GetItemsInfo to use a separate variable for
    the description, as it's already done for notforloan and
    changes the template files where the variable is used
    accordingly.
    
    To test
    - Before applying patch
    - Configure OpacHiddenItems with:
      restricted: [1]
    - Find a record with more than one item and mark one of the items
      as "Restricted Access"
      (assume standard sample data - check authorised value if status doesn't exist)
    - Verify the item is still shown in OPAC.
    - Apply patch
    - Verify that the item is now hidden
    - Verify that the status still displays nicely in the staff detail page
    - Delete OpacHiddenItems
    - Verify that the status is showing nicely in the OPAC detail page
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 040c5439c020c34702d1161f12bdc3792d5172f4
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Feb 7 13:11:35 2019 +0000

    Bug 22287: Correct new charts CSS
    
    This patch reverts some changes to reports CSS from Bug 22168 which were
    unnecessary and which adversely affected the report add/edit form
    styling.
    
    To test, apply the patch and clear your browser cache if necessary.
    
    Go to Reports -> Saved reports and repeat the test plan for Bug 22168:
    
    - Run a report which returns more than one column.
    - On the report results page, click the "Create chart" button. The chart
      settings form should appear in a modal window.
    - Click the "Draw" button. The modal should disappear and the chart
      should be shown.
    
    Then test the process for adding or editing an SQL report. The form
    should be styled in a way consistent with other forms in the staff
    client.
    
    Signed-off-by: Mikaël Olangcay Brisebois <mikael.olangcay-brisebois@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c5bba9f00230baf333647c32d17c9135a6560caa
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Feb 15 16:02:43 2019 +0000

    Bug 10659: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b379bba255e32d6fcd7f8b053e58c2bc23491926
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Feb 11 13:35:12 2019 +0000

    Bug 10659: (follow-up) Ensure zero rating shows correctly
    
    This patch makes a minor markup addition to ensure that a title with no
    rating shows no stars.
    
    Also changed: Minor addition to search results JS to prevent unwanted
    scrolling if the user clicks a star in a star rating.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ef248b82d7de8be112b312351f09cfb4baa3199f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 28 16:58:48 2018 +0000

    Bug 10659: Upgrade jQuery star ratings plugin
    
    This patch replaces our current jQuery star ratings plugin with a newer
    plugin which will be compatible with newer versions of jQuery:
    
    http://antenna.io/demo/jquery-bar-rating/examples/
    
    To test you should have one or more records in your catalog with star
    ratings.
    
    - Apply the patch and set the OpacStarRatings system preference
      to "results and details"
    - Perform a search in the catalog which will return one or more titles
      which have ratings.
      - Confirm that the ratings appear correctly and the ratings are
        read-only.
    - Open the "normal" detail page for that record.
      - Confirm that the star rating appears correctly.
      - Test setting and re-setting your star rating. Confirm that it is
        saved.
      - Confirm that the "cancel rating" link appears when you have a rating
        set, and that it disappears after you click it.
    - Test that the "only details" and disabled options of the
      OpacStarRatings preference work as they should.
    - Confirm that information about the plugin appears on the About page in
      the staff client, replacing the old star ratings plugin information.
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6aadbcc4be65185a56a79980bea54bc4d74fe356
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jan 29 11:29:06 2019 -0300

    Bug 22227: Make GET /cities staff only
    
    This patch removes the possibility to access the city objects without
    privileged access (minimum permissions == catalogue).
    
    It does so by adding the required permissions to the spec. The tests are
    adjusted.
    
    To test:
    - Apply this patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/api/v1/cities.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b7b4694666657f57aaf61d091ed34c9f754a11e3
Author: Magnus Enger <magnus@libriotech.no>
Date:   Mon Feb 11 11:07:21 2019 +0100

    Bug 12488: Make bulkmarcimport.pl -d use DELETE instead of TRUNCATE
    
    On MySQL >= 5.5 bulkmarcimport.pl with the -d (delete) switch gives
    an error like "Cannot truncate a table referenced in a foreign
    key constraint". This patch proposes to replace the offending
    TRUNCATE with DELETE. Auto incerement counters are reset to 1 to
    preserve the functionality from TRUNCATE.
    
    To test:
    - Make sure you havae a test database with some records and items
    - Run bulkmarcimport.pl with the -d switch
    - Observe the error described above
    - Apply this patch
    - Run bulkmarcimport.pl with the -d switch again
    - Observe the lack of an error
    - Verify that the newly imported records and items have biblionumber
      and itemnumbers starting with 1
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 012200fbc0e3684be312cad055dc583c30a1131d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 15 10:06:33 2019 +0000

    Bug 19832: (QA follow-up) Remove obsolete pending_queue call
    
    Only use of $pending was removed in the former patch.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c3b41cb12465249cc87ed8866855e06e61842872
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 16 13:19:45 2019 +0000

    Bug 19832: Don't fill holds in SIP/Transaction/Checkout.pm
    
    AddIssue already checks for holds in the item being issued and deals with them
    
    The sip code, additionally, does not consider that multiple holds per bib
    is allowed
    
    To test:
     0 - Apply only first patch (unit tests)
     1 - Place two holds for a patron on a bib
     2 - Checkout that item via sip_cli_emulator
     3 - Note all holds are cancelled/filled
     4 - prove -v t/db_dependent/SIP/Transaction.t
     5 - it fails
     6 - Apply second patch
     7 - prove tests, all green
     8 - Place two holds on a single bib for one patron again
     9 - Checkout the item via sip_cli_emulator
    10 - Only one holds is filled
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 50fd86d42fa76b3840c61ea004d026d4810bc4dc
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 16 13:19:31 2019 +0000

    Bug 19832: Unit tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Amended: maxissueqty      => 10.
    Replaced dot by comma.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5324268e099ead7a6864d16bae0f051444a1d34e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jan 3 20:52:15 2019 +0000

    Bug 22067: Return if no patron passed to can_see_patron_infos
    
    To test:
    1 - Find an adult patron
    2 - Add a child to their account
    3 - Delete the parent from the db
    4 - Attempt to edit the child record
    5 - Apply patch
    6 - Repeat
    7 - Note you can edit the child account
    8 - Note guarantor id is not a link
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    No blocker for me, but we are a bit hiding that guarantorid probably should
    be a foreign key cleared to NULL at deletion time.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0da1090d3a21f9ee596500477504be476bed8af7
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Feb 6 16:10:07 2019 +0100

    Bug 22140: Larger unit test for get_hostitemnumbers_of
    
    Add syspref EasyAnalyticalRecords impact in unit test for get_hostitemnumbers_of
    
    Test plan :
    Run t/db_dependent/Items.t
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 12fe392d26fda1559f5690a71330a93ffc72a6b7
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Feb 6 15:03:01 2019 +0100

    Bug 22140: Use of EasyAnalyticalRecords pref is get_hostitemnumbers_of
    
    Like Bug 20702 defined GetHostItemsInfo does nothing if EasyAnalyticalRecords pref is disabled, get_hostitemnumbers_of must be dependant on this pref too.
    
    Test plan :
    1) Build an analytical record with 773$0 and $9
    2) Enable EasyAnalyticalRecords
    4) Place an hold on the record
    5) => You see the linked item
    6) Disable EasyAnalyticalRecords
    7) Place an hold on the record
    8) => You dont see the linked item
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7266d50dd2725c87acf889aa7d6a211999ca1c47
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Jan 16 13:32:35 2019 +0100

    Bug 22140: Use of EasyAnalyticalRecords pref in search
    
    Like Bug 20702 defined GetHostItemsInfo does nothing if EasyAnalyticalRecords pref is disabled, there are other places where code must be dependant on this pref.
    
    Test plan :
    1) Build an analitical record with 773$0 and $9
    2) Enable EasyAnalyticalRecords
    3) Don't apply patch
    4) Go to OPAC
    5) Perform a search that displays the record, check there is the linked item
    6) Open record detail page, check there is the linked item
    7) Apply patch and redo 5) and 6)
    8) Disable EasyAnalyticalRecords
    9) redo 5) and 6), you should not see the linked item
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2c6d39452af2364463b509d7d18526714bc17b3f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Feb 15 13:17:45 2019 +0000

    Bug 13515: DBRev 18.12.00.014
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1f23384475214cf291afe081aaa2ef6d18767ed8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 14 17:19:08 2019 -0300

    Bug 13515: Fix constraint name before deleting it
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 11b9bb3da9b250ca6fa23792775685037330599e
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Wed Dec 26 17:44:39 2018 +0100

    Bug 13515: Add unit tests
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0daa02a961be828d5c38b6933c91ee79853f95c5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Dec 18 12:43:00 2018 -0300

    Bug 13515: Add a foreign key constraint to messages.borrowernumber
    
    This patch adds a missing foreign key constraint to
    mesages.borrowernumber.
    To create it sucessfully the entries from the messages table that are
    not linked with an existing patron will be removed.
    
    Test plan:
    0/ Do not apply the patch
    1/ Add messages to different patrons
    2/ Delete one of the patron's record
    3/ Have a look at the messages table and notice that the messages for
    the deleted patron's record still appear
    4/ Apply the patch and execute the update DB entry
    5/ Have a look again at the messages table and notice that the messages
    for the deleted patron's record have been removed
    6/ Delete a patron that have messages
    7/ Notice that now the messages are deleted when the patron's record is
    deleted
    
    Signed-off-by: Nazlı Çetin <nazli@devinim.com.tr>
    Signed-off-by: Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c2bec690b593511df82f3fd70537174afe8fa5f6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 14 15:00:30 2019 -0300

    Bug 22301: (bug 11373 follow-up) Do not format amounts in inputs
    
    on_edition flag must be set when the Price plugin is used on inputs.
    
    Prices currently need to all be displayed with decimal dot in input
    fields.
    
    Test plan:
    Trying to pay 9,55. Go into the input field and change 9 to
    5.
    
    Without this patch Koha will turn it into 555.00.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 66f3a72a01ba5238a9bba39a3b9cb659dbb47a42
Author: David Gustafsson <glasklas@gmail.com>
Date:   Tue Feb 12 12:25:12 2019 +0000

    Revert "Bug 22121: Display 'Price paid' on ILL requests according to CurrencyFormat pref"
    
    Reverted while 20600 is being pushed through community to avoid rebase issues
    
    This reverts commit a628dab3b60d64e383ef2ffa20e5ea1c80f9b9d9.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3f965b3e37f4f5969d26b079d7e72454f7997fb2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Feb 11 20:49:00 2019 +0000

    Bug 17047: (RM follow-up) Fix tests for Ubuntu
    
    In Ubuntu the message returned is:
    An error occurred, mana server returned: Can't connect to foo.bar:443 (Name or service not known)
    
    Checking for 'Can't connect' and not enforcing end of string should be sufficient and fixes the test
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 89ae6cc3bfea81dea8d6995965a44b92c34764aa
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jan 5 06:45:05 2019 +0000

    Bug 22116: Add price formatting to rental charge and replacement price on items tab in staff
    
    Adds formatting to replacement price and rental charge on items
    tab.
    
    To test:
    - Add a rental charge to one or more of your item types
    - Edit a record with some items, add replacement cost to some
    - Find or create a record with your rental charged itemtype (MARC21:942$c)
    - Go to the staff detail page of those records
    - Check "Items" tab for
      - Rental charge on top
      - Replacement price for items
    - Verify information is displayed correctly when toggling CurrencyFormat
      system preference
    
    Signed-off-by: Jack Kelliher <jke0429@stacmail.net>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cfea47cb064362bbb1fc93769be4b7df3a8e2fae
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Feb 5 00:42:34 2019 +0100

    Bug 21441: Fix wrong reference to a 'holds' table on system information tab
    
    It looks like a typo snuck in on the about page, listing a holds
    table instead of reserves.
    
    To test:
    - Manually create the same PK (reserve_id) in reserves and old_reserves
    - Verify that the message on about > system information now
      correctly lists those tables (not holds and old_reserves)
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7a58d0215907c05b0b82944141f6f4d4595c3979
Author: Jasmine Amohia <jasmineamohia.student@wegc.school.nz>
Date:   Wed Jan 16 01:37:22 2019 +0000

    Bug 21840: Fixed some typos in the templates
    
    intranet-tmpl/prog/en/modules/ill/ill-requests.tt:13
    Bibliograpic record ID --> Bibliographic record ID
    
    intranet-tmpl/prog/en/modules/acqui/basket.tt:547
    Can't cancel order, ([% books_loo.holds_on_order | html %]) holds are linked with this order cancel holds first -->  ... with this order. Cancel holds first
    
    intranet-tmpl/prog/en/modules/acqui/parcel.tt
    Can't cancel order, ([% loop_order.holds_on_order | html %]) holds are linked with this order cancel holds first --> ... with this order. Cancel holds first
    
    intranet-tmpl/prog/en/modules/labels/spinelabel-print.tt:32
    Print this slabel --> Print this label
    
    Test plan:
    1. Check that the fixes in the patch are correct
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f3f5b98fd909f9e13aa4e45a16dc275ef4ee8489
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Feb 11 07:15:11 2019 -0500

    Bug 21829: (QA follow-up) - Update the number of unit tests
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5b160af2a051dc3693f04dabf320d0995cf26160
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 14 09:38:01 2018 -0300

    Bug 21829: Correctly format dateexpiry in notices (date only)
    
    dateexpiry is a date, we should not display the time
    part in notice.
    
    Test plan:
    Create a notice with borrowers.dateexpiry, generate this notice.
    The value should be displayed without the time part
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 04e121a741a442f5b557e11864eb69be9d0c3ded
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 14 09:37:58 2018 -0300

    Bug 21829: Add tests for dateexpiry format in notices
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 558742577d3902cd5e2abf5c3f165c6425e163da
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Dec 20 23:37:02 2018 +0000

    Bug 22009: Fix error messages for filing rules and splitting rules.
    
    Some error messages were doubled up with different error codes.
    
    To test:
    I am not sure how to trigger those from the GUI, might
    require a code review/code changes.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dc6be66e2b2ec5917d7bec020d4e94c40baa9f6c
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Jan 13 10:06:22 2019 +0100

    Bug 22119: Add price formatting in more places in circulation
    
    This adds some missing Price filters to some places in circulation.
    To check verify the amount are displayed according to setting
    of CurrencyFormat (use FR or CH for seeing a change)
    
    Use a patron account with no pending fines at the beginning
    for all tests.
    
    1)
    - Switch RentalFeesCheckoutConfirmation to "Ask"
    - Check out an item with a rental charge
    - Verify message is formatted correctly:
      Rental charge for this item: ...
    
    2)
    - Switch RentalsInNoissuesCharge to "Don't include"
    - Make sure patron has only Rental fines on their account
    - Check out another item
    - Verify message is formatted correctly:
      The patron has unpaid charges for holds, rentals etc ...
    
    3)
    - Switch BatchCheckouts to "Allow"
    - Add the patron category of your test patron to BatchCheckoutsValidCategories
    - Checkout any item
    - Verify the message in the information column is formatted correctly:
      The patron has unpaid charges for holds, rentals etc of ...
    
    Signed-off-by: Jasmine Amohia <jasmineamohia.student@wegc.school.nz>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a628dab3b60d64e383ef2ffa20e5ea1c80f9b9d9
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jan 5 17:39:42 2019 +0000

    Bug 22121: Display 'Price paid' on ILL requests according to CurrencyFormat pref
    
    To test:
    - Install BLDSS backend
      see: https://wiki.koha-community.org/wiki/ILL_backends
    - Add a new BLDSS ILL request
    - Edit ILL request
    - Fill in Price paid field
    - Verify Price paid is formatted correctly on 'Manage ILL request'
      page
    
    Signed-off-by: Ethan Amohia <ethan.amohia@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3c2cc8da26f7a907c0b51f928ffb100eefbfa692
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Jan 13 11:15:27 2019 +0100

    Bug 22120: Add price formattig to patron summary print
    
    The patron summary print lists the replacement prices
    and rental charges of items and totals them. With this
    patch they will be formatted according to the
    CurrencyFormat system preference.
    
    To test:
    - Find or create a patron with some checkouts
    - Make sure some items have replacement price set
      and some have a rental charge
    - "Print summary" from the account in staff
    - Verify that charges and prices in the checkouts
      table are formatted correctly
    - Toggle CurrencyFormat to different settings
    
    Signed-off-by: helene hickey <hickeyhe@wgc.school.nz>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0e220869f5a3327eee8f9426d648fbcaaa0fd7fa
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Jan 14 05:41:48 2019 +0000

    Bug 17347: Ignore whitespace before and after on renewing
    
    When an item is checked out, Koha ignores whitespace
    at the beginning and the end of the entered barcode.
    This makes life easier, if a barcode is C&P from another
    page. This patch makes the renewal page behave the same.
    
    To test:
    - Checkout an item
    - Renew the item from the renew tab or renewal page
      entering the barcode with leading and trailing
      whitespace
    - "Barcode not found"
    - Apply patch
    - Try again
    - Barcode should be found now
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Devinim <kohadevinim@devinim.com.tr>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0939d44c22cda569faf4c0c60fd67de04097b34d
Author: Pasi Kallinen <pasi.kallinen@joensuu.fi>
Date:   Tue Nov 27 11:53:32 2018 +0200

    Bug 21885: Calendar to-date starts before end-date
    
    When adding new holidays to the calendar, you pick the start date,
    and then the end date, but the end date calendar will start from
    current date, not from the picked start date. Sometimes this means
    many extra clicks to pick an end date.
    
    Make the end date calendar start from the beginning date by default.
    
    Test plan:
    
    1) Go to the tools -> calendar
    2) Pick a start date somewhere in the future, and then open the
       end date calendar. Notice how it starts before the start date
       of the date range.
    3) Apply patch.
    4) Pick a start date in the future. The end date calendar should
       automatically default to the same date.
    5) Change the start date a day backwards, note how the end date
       does not change.
    6) Change the start date after the end date, note how the end date
       adjusts, so it is not in the past.
    
    Signed-off-by: Pasi Kallinen <pasi.kallinen@joensuu.fi>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3cfc8ae24c99647fcf5f55ce0e6c6521a3f3ff83
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jan 30 15:31:43 2019 -0300

    Bug 22238: Remove koha-*-sip scripts in favor of koha-sip
    
    This patch removes traces from the (deprecated) koha-*-sip scripts.
    
    To test:
    - Apply the patch
    - Verify no traces of koha-*-sip remain on the codebase (besides
      Release Notes, koha-common.links and the koha-sip script):
      $ cd kohaclone
      $ git grep koha-start-sip
      $ git grep koha-stop-sip
      $ git grep koha-enable-sip
    => SUCCESS: No traces!
    - Create the following symlinks:
      $ sudo ln -s /usr/sbin/koha-sip  /usr/sbin/koha-start-sip
      $ sudo ln -s /usr/sbin/koha-sip  /usr/sbin/koha-stop-sip
      $ sudo ln -s /usr/sbin/koha-sip  /usr/sbin/koha-enable-sip
    - Try the koha-*-zebra commands:
      $ sudo koha-stop-sip kohadev
      $ sudo koha-start-sip kohadev
      $ sudo koha-restart-sip kohadev
    => SUCCESS: They all work as expected!
    
    - Sign off :-D!
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5bb04247477dce80fbacf9993be3164518c03df6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jan 30 09:44:21 2019 -0300

    Bug 22235: (follow-up) Make koha-remove stop SIP server if required
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c0e6051ac5bd0190a6491ecc853614a156014d88
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jan 30 09:37:47 2019 -0300

    Bug 22235: Make maintenance scripts use koha-sip instead of koha-*-sip
    
    This patch makes all maintenance scripts use **koha-sip** instead of
    the old **koha-*-sip** scripts.
    
    To test:
    - Run:
      $ perl misc4dev/cp_debian_files.pl
      $ sudo service koha-common stop
    => SUCCESS: No errors and the SIP-related sevices are stopped
      $ sudo service koha-common start
    => SUCCESS: No errors and the SIP-related services are started
      $ sudo service koha-common restart
    => SUCCESS: No erros and SIP-related services are running
      $ sudo koha-create --create-db test
      $ sudo koha-sip --enable test
      $ sudo koha-sip --start test
      $ sudo koha-disable test
    => SUCCESS: No errors, instance disabled, no SIP running for test
    - Sign off :-D
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 74b6a659e5ec831e99beaad2f9ce6dad6409a3a0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jan 30 09:12:36 2019 -0300

    Bug 18562: Tab completion in bash
    
    This patch adds the fancy tab completion in bash.
    
    To test:
    - Run:
      $ source debian/koha-common.bash-completion
      $ sudo koha-sip <tab>
    - Play with all the options
    => SUCCESS: The combinations make sense (e.g. only SIP-enabled instances
      are completed for --start, --stop, --restart, -v and --verbose are not
      offered if the other one is already in there, --enable only applies to
      SIP-disabled instances, etc).
    - Sign off :-D
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 713f873626404e7904bebd0b97dee1d9f67745fc
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jan 30 09:12:25 2019 -0300

    Bug 18562: Add manpage for koha-sip
    
    This patch adds the manpage for koha-sip.
    
    To test:
    - Apply this patch
    - Run:
      $ kshell
     k$ prove xt/verify-debian-docbook.t
    => SUCCESS: Tests pass!
    - Run:
      $ misc4dev/cp_debian_files.pl
      $ man koha-sip
    => SUCCESS: The man page shows correctly.
    - Sign off :-D
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6ec979057b2b4f10fe469d2655fa0fcb47af1cb7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jan 30 08:42:53 2019 -0300

    Bug 18562: Add koha-sip maintenance script
    
    This patch introduces a single script to handle all actions on SIP
    servers for Koha instances. It is intended to be a replacement for:
    
    - koha-start-sip
    - koha-stop-sip
    - koha-enable-sip
    
    It adds a function called is_sip_running to koha-functions.sh.
    
    To test:
    - Apply this patch
    - Run:
      $ misc4dev/cp_debian_files.pl
      $ sudo koha-sip --enable kohadev
      $ sudo koha-sip --start kohadev
      $ sudo koha-sip --status kohadev
    => SUCCESS: The SIP server is running for kohadev
    - Run:
      $ sudo koha-sip --restart --verbose kohadev
      $ sudo koha-sip --status kohadev
    => SUCCESS: The SIP server is running for kohadev
    - Run:
      $ sudo koha-sip --stop kohadev
      $ sudo koha-sip --status kohadev
    => SUCCESS: The SIP server is not running for kohadev
    - Play with other combinations like enabling an already enabled
    instance, etc. Remember you need to remove the
    /etc/koha/sites/kohadev/SIPconfig.xml file so it is considered disabled.
    - Sign off :-D
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ae258098d9cfbc6d6ea211f8bcbb6c50c15b0ecd
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 8 12:52:48 2019 +0000

    Bug 22293: Sticky toolbar making vendor form uneditable
    
    The new floating toolbar plugin doesn't like a particular combination of
    markup: A toolbar inside a form which is styled "display:inline." The
    staff client CSS styles forms that way globally, so it must be
    explicitly overridden in these situations.
    
    Changing the default will have broad consequences, so I propose an
    inline style to fix this.
    
    To test, apply the patch and go to Acquisitions. Add or edit a vendor
    and confirm that after scrolling down the page the form is still
    editable.
    
    Signed-off-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    Signed-off-by: Mikaël Olangcay Brisebois <mikael.olangcay-brisebois@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0844f2c174c83ce3da11be07511730b0c220e5ad
Author: Liz Rea <liz@catalyst.net.nz>
Date:   Thu Jan 31 22:41:29 2019 +0000

    Bug 22282: Fix PDF issue when exporting PDF in French format.
    
    Fixing up QA comments, keeping 1st instance and removing the 2nd.
    Original test plan by Christophe Croullebois.
    
    To test :
    Without the patch :
    
    1° select in Acquisitions preferences/OrderPdfFormat French 3-page
    2° restart plack if needed
    3° In acqui/basketgroup.pl select closed tab
    4° Click on "Export as PDF" button
    5° You should see a blank page saying "Internal Server Error"
    
    With the patch :
    
    Do the same
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 619d97b91d075bd7d48c95102029a8d89269be6f
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Jan 14 12:47:25 2019 +0000

    Bug 22110: Fix editing of adjustments for CurrencyFormat != US
    
    When using CurrencyFormat FR or CH the editing an amount behave
    badly. Example: changing displayed 1,00 to 1,11 would save as 1,00.
    
    At the moment Koha only understands decimal dot, not comma.
    So every time data is entered, we use decimal dot.
    
    1) Add an adjustment to an invoice
    2) Change system preference CurrencyFormat to FR or CH
    3) Verify the amount displays with a decimal comma
    4) Try changing the amount to something like 1,11
    5) Save the amount
    6) Verify it shows 1.00
    7) Apply patch
    8) Refresh the invoice page if necessary
    9) Verify amount is now shown as 1.00
    10) Repeat test, use 1.11
    11) Verify it will be stored correctly.
    
    Signed-off-by: Mackey Johnstone <mackeyfj@gmail.com>
    Signed-off-by: mikael <mikael.Olangcay-Brisebois@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ea36265697c85cfb1f7de0b2344ef8647dc31387
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Feb 6 12:49:58 2019 +0000

    Bug 22278: Clear cache when creating new report groups or subgroups
    
    When a user adds a new group we create it, then fetch the groups from the cache. However, we aren't clearing the cache on creation. This patch fixes that
    
    To test:
     0) Start a new report
     1) Pick create for the group
     2) Enter code and value
     3) Save
     4) You remain on the page and value and code are now empty (ok)
     5) BUT: The pull down for the group remains "None" instead of reflecting
        the new group
     6) Open a new tab and browse to reports - note the group exists and the report is in it
     7) On original tab save report again, the group was not selected so is lost
     8) Apply patch
     9) Retest with a new report
    10) Group is created, saved, and selected upon save
    11) Subsequent edits include the new group
    12) Test with subgroups as well
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 556877ccd518dd32fb3604c39ecd5c6fcd0811fe
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Thu Feb 7 17:22:17 2019 +0100

    Bug 21738: unit tests for HoldTitle
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 102b1ca4bf3b1721f496417473643ff951c13833
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Fri Jan 4 16:33:39 2019 +0100

    Bug 21738: make call of CanBookBeReserved more safe
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 870191d40611e3e7414388d4dd911446a2059225
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Tue Nov 13 09:44:51 2018 +0100

    Bug 21738: check items count in C4:ILSDI::HoldTitle
    
    Test plan:
      - Try holding a title without items via ILS-DI
        (cgi-bin/koha/ilsdi.pl?service=HoldTitle&patron_id=1&bib_id=1),
      - you get an error,
      - apply this patch,
      - try again,
      - you should get the code "Notitems"Bug 21738: check items count in
        C4:ILSDI::HoldTitle
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c7f47ea36a8992356c6c055a22891ea168cbdc9c
Author: Jose-Mario Monteiro-Santos <jose-mario.monteiro-santos@inLibro.com>
Date:   Thu Jan 17 16:41:58 2019 -0500

    Bug 18723: Change dot into comma
    
    This fixes the regression that multiplies the amount entered by 100
    when CurrencyFormat is set to FR. It replaces the last dot with a
    comma before dealing with the value of ActualCost and ReplacementCost.
    
    Test Plan:
    a)Replicate the issue:
        0- Set CurrencyFormat to FR
        1- Go to Acquisitions
        2- Search for a Vendor
        3- Click on "New basket"
        4- Give basket a name and click "Save"
        5- Click on "Add to basket"
        6- Add an order through preferred method
        7- In Accounting details, enter a vendor price with dot decimal (i.e. 19.44)
        8- Save your order line
        9- Click on "Close this basket"
        10- Confirm closing of basket by clicking on "Yes, close"
        11- Click on "Receive shipment"
        12- Enter an invoice number and click "Next"
        13- Click on "Receive" to the right of your order
        14- In Accounting details, notice the Actual cost is written with a decimal dot.
        15- Change the Actual cost, using a dot decimal (i.e 20.99)
        16- Receive the order
        17- Click on "Save"
        18- In "Already received" notice the price is multiplied by 100 (i.e. 2099,00)
        19- Click on "Cancel receipt"
        20- Click on "Receive" to the right of your order
        21- In Accounting details, change the Actual cost, using a comma decimal (i.e. 20,99)
        22- Receive the order
        23- Click on "Save"
        24- In "Already received", notice the price is correct.
    b)Apply the patch
    c)Test the patch:
        1- Click on "Cancel receipt"
        2- Click on "Receive to the right of your order
        3- Change the Actual cost/Replacement cost, using a dot decimal (21.99)
        4- Receive the order
        5- Click on "Save"
        6- Notice that the Actual cost and the Replacement cost use commas
        7- Change the Actual cost, using a comma decimal (21,99)
        8- Click on "Save"
        9- In "Already received", notice the price is still correct.
    
    Signed-off-by: Victor Grousset <victor.grousset@biblibre.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit df611b17d12b63bb2f14909969ff8e8f67a332d0
Author: Christopher Brannon <cbrannon@cdalibrary.org>
Date:   Sat Sep 29 19:08:47 2018 +0000

    Bug 21446: Remove fix comment
    
    Fix is not needed.
    
    Signed-off-by: helene hickey <hickeyhe@wgc.school.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 98798a6be8ddcca981c8cc21a2ce381c9a0af49e
Author: Christopher Brannon <cbrannon@cdalibrary.org>
Date:   Sat Sep 29 18:09:03 2018 +0000

    Bug 21446: Improve display of changed values on course reserves and show permanent location instead of cart
    
    TO TEST:
    1) Set ReturnToShelvingCart on.
    2) Create a Course Reserve and make inactive.
    3) Add an item, changing Item type, Collection code, Shelving
       location, and Holding library.
    4) Note these four fields in the item list.
    5) Activate course reserve.
    6) Note subtle/no difference in these fiels in the list.
    7) Check in the item.
    8) Go back to course reserves and note that the cart is listed in the
       field instead of permanent location.
    9) Deactivate course reserve.
    10) Reset permanent location on item manually.
    11) Apply patch.
    12) Repeat steps 4-9 noting that the permanent location is showing
        instead of current location.
        Also, if a change is assigned to the item, the change AND
        the regular state always show.  The active state will be in
        bold.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 20a38ee50e6fe62712e299bcec9e939dc2bbb58e
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Dec 19 20:32:32 2018 +0000

    Bug 20000: Use Modern::Perl in installer scripts
    
    To test:
    
    Check that we are using Modern::Perl when strict *and* warnings were used before,
    and commented lines and FIXMEs have been removed from the rest, out of
    files listed below.
    
    data/mysql/backfill_statistics.pl
    data/mysql/labels_upgrade.pl
    data/mysql/patroncards_upgrade.pl
    data/mysql/update22to30.pl
    data/mysql/updatedatabase.pl
    externalmodules.pl
    html-template-to-template-toolkit.pl
    install.pl
    
    Sponsored-by: Catalyst IT
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b4c9058b871b17a20f08a52875582c617bfd91d9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 11 16:05:12 2019 +0000

    Bug 11373: (follow-up) Add "change calculation" feature to the fine payment forms
    
    This patch provides some follow-ups, including corrections to the
    JavaScript and updates to the text for readability.
    
    - Remove obsolete script "type" attribute
    - Update the use of the obsolete jQuery method "bind"
    - Use Bootstrap's built-in "show" option instead of simulated click
    - Handle preventDoubleFormSubmit function's "waiting" class if modal is
      closed manually
    
    To test, apply the patch and follow the original test plan. Everything
    should work as expected.
    
    Note that when the modal is shown, the cursor changes to the "waiting"
    one when you hover over the body of the page. If you click "No" in the
    modal, the cursor should return to normal.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0c53a07a829299067186cd5c5dfbc74eec9fac8d
Author: Frédérick Capovilla <frederick.capovilla@libeo.com>
Date:   Tue Dec 10 16:51:39 2013 -0500

    Bug 11373: Show the difference between the amount collected and the amount paid of a fine payment.
    
    This patch adds a feature in the fine payment section. It allows to see the change due to patrons when the amount collected is higher than the amount paid.
    
    Test plan :
    - Apply patch.
    - Select a patron with a fine.
    - Go to Fines > Pay fines.
    - Click the button pay.
    - Choose the amount paid equal to the outstanding amount (exemple : 3$).
    - Choose the amount collected to be more than the outstanding amount (exemple : 5$).
    - Confirm that the change is correct (example : 5$ - 3$ = 2$).
    - Click the button confirm.
    - Click on Yes in the dialog box.
    - Confirm that the payment has been made (example : last amount = 3$).
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 85d09997c988c9acc7e00c3a128002c83e044ca0
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 1 14:12:18 2019 +0000

    Bug 22195: (follow-up) Add text labels to buttons if window is wide enough
    
    This patch adds responsive handling of text labels to the columns
    configuration and export buttons.
    
    To test, apply the patch and clear your browser cache if necessary.
    
     - View a page with column configuration, e.g. Administration -> Patron
       categories.
     - At wider browser widths the buttons should have text labels.
     - At narrower browser widths the labels should be hidden.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ee94197482ccd68ba88e3fce33eb3029f4e88f6f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Sat Jan 26 19:20:32 2019 +0000

    Bug 22195: (follow-up) Add tooltip to buttons
    
    This patch adds title attributes and Bootstrap tooltips to the columns
    configuration and export/print butttons.
    
    To test, apply the patch and visit a page with columns configuration
    buttons. Confirm that when you hover over each of the DataTable control
    buttons a tooltip is shown.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ba1f33e6ae69e9e1e499b5fedee299211580469f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jan 23 16:40:44 2019 +0000

    Bug 22195: Change default DataTables configuration to consolidate buttons
    
    This patch changes the default DataTables configuration provided by the
    columns settings include file. It consolidates DataTables buttons into
    to menus: One for column configuration and one for export options.
    
    This change would not affect tables which aren't set up for column
    configuration.
    
    To test, apply the patch and view a page with columns configuration.
    
     Example: Tools -> Notices & slips
      - Confirm that the buttons appear as expected.
      - Confirm that each button menu performs its task correctly (column
        visiblity, export, print).
      - Test other pages with columns configuration. For instance:
        Acquisitions order search, Currencies administration, Holds queue
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Jose-Mario Monteiro-Santos <jose-mario.monteiro-santos@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dd7daf493b50c019cd8b7737e42536567ebdc694
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jan 28 18:46:41 2019 +0000

    Bug 21850: (follow-up) Add query information in title attribute
    
    This follow-up adds back the old machine-friendly search details to a
    title attribute in case it might be useful for debugging purposes.
    
    To test, apply the patch and perform a search in the OPAC. On the search
    results page, hover your mouse over the "Results" link in the
    breadcrumbs. The title attribute value should appear with the search
    details.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit aa3294ae579a49c7279c89aef475b0134426a943
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 4 15:26:05 2019 +0000

    Bug 21850: Remove search request from page title of OPAC result list
    
    This patch modifies the OPAC search results template so that advanced
    search terms are not shown in the page title and breadcrumbs. This
    removes potentially confusing computer-oriented code from the public
    view.
    
    For simple searches the search term is displayed, using the same logic
    that determines whether the search bar should be populated with the last
    search term.
    
    To test:
    
     - Apply the patch
     - Peform a simple keyword search in the OPAC
       - On the results page the title and breadcrumbs should show 'Results
         of search for [your keyword]
     - Perform an advanced search with multiple parameters
       - The page title and breadrumbs should show only 'Search results'
       - The breadcrumbs should also show a link back to Advanced search
         using the returntosearch parameter
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    Signed-off-by: mikael <mikael.Olangcay-Brisebois@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5189a42588209ae3e2d34dfbe5ae6e3a451bdb73
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Feb 4 15:54:59 2019 +0000

    Bug 20809: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 268a1248a39ce2cbf641e9161932e4b060d71225
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Jan 6 00:22:28 2019 +0000

    Bug 20809: (QA follow-up) Fix missing filters
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 12e331d14890569eaca1f0a7a4948641be4bbd18
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Sep 14 17:06:31 2018 +0000

    Bug 20809: (follow-up) Add missing JS to view log page
    
    If the log viewer is being used to track patron-related data the
    patron-related JavaScript file should be included.
    
    To test, apply the patch and open a patron record. In the left-hand
    sidebar choose Modification Log. Test the patron image edit/replace
    process from the patron image in the sidebar and confirm that it works
    correctly.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2578b9469141a4f0c7f24b4fd5743fa2ce4fbca2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Sep 12 16:33:48 2018 +0000

    Bug 20809: (follow-up) Corrections to CSS and JS
    
    This follow-up modifies JavaScript so that the confirmation dialog is
    triggered when deleting a patron image from the modal window.
    
    The CSS is modified to improve the alignment of patron image and edit
    button.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 24ffe470ffbe17318ae16f2beb3a2dd488ef00b5
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Aug 14 13:04:39 2018 +0000

    Bug 20809: Link patron image to patron image add/edit form
    
    This patch modifies an include file so that it is possible with edit a
    patron's image on any patron-related page which uses that include.
    
    To test you must have the patronimages system preference enabled.
    
    Apply the patch and open any patron record for viewing.
    
     - Hover the mouse over the patron image.
    
       - If the patron has a previously-defined patron image, should you see
         an "Edit" button appear. Clicking the button should display a modal
         dialog titled "Edit patron image." Test that the "Upload,"
         "Delete," and "Cancel" buttons work correctly.
    
       - If a patron has no patron image defined, you should see an "Add"
         button appear. Clicking the button should display a modal
         dialog titled "Edit patron image." Test that the "Upload,"
         "Delete," and "Cancel" buttons work correctly.
    
    This process should work from any page which shows the patron sidebar:
    Check out, Details, Fines, Routing lists, Circulation history, etc.
    
    Patch works as described.
    
    Signed-off-by: Dilan Johnpullé <dilan@calyx.net.au>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6179f23dd8b4ed24add2e76c7b8e193372052201
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Nov 12 11:48:23 2018 +0100

    Bug 21808: Field 711 is not handled correctly in showAuthor XSLT for relator term or code
    
    The test should check $4 or $e for fields ne 111,711.
    And should check $4 or $j for 111,711.
    
    Test plan:
    Edit a record, add a meeting in 711 without $4 but with $j.
    Without this patch the term is not visible, with this patch it is.
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b3c25b64b868b56423c50b9df4fac4bb55947679
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jan 10 14:32:22 2019 -0500

    Bug 22097: CataloguingLog should be suppressed for item branch transfers
    
    Bug 18816 missed the fact that a branch transfer triggers ModItem and
    thus generates an action log line. We should not be creating those
    action logs, especially considering the transfers table itself already
    documents the transfer.
    
    Test Plan:
    1) Enable CataloguingLog
    2) Transfer an item to another branch
    3) Note the new action log line created
    4) Apply this patch
    5) Create another item transfer
    6) No new action log line should be created!
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9caede8d3ce67c684afd615b93ae2eb3dd5991bb
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jan 24 13:48:42 2019 +0000

    Bug 22197: Add Mana KB link to administration sidebar menu
    
    This patch adds a link to the Mana KB configuration page to the
    administration sidebar menu.
    
    To test, apply the patch and:
    
     - Log in to the staff client as a user who lacks permission to manage
       Mana KB.
       - Go to an Administration page which shows the sidebar, like
         Libraries or Patron categories. There should be no link to Mana KB
         in the left-hand sidebar.
     - Log in to the staff client as a user who has permission to manage
       Mana KB.
       - Go to Administration -> Mana KB
         - In the sidebar menu you should see a link to Mana KB and it
           should be bold.
       - Navigate to another Administration page which shows the sidebar.
         The Mana KB link should not be highlighted.
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7f918ed8b1deed69609850800675e704da4cbf68
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Feb 4 14:59:37 2019 +0000

    Bug 22198: DBRev 18.12.00.013
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e142e85d65f91a58a7aefbab3560d59f92134c2f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jan 24 13:47:26 2019 +0000

    Bug 22198: Add granular permission setting for Mana KB
    
    This patch adds a separate permission for managing Mana KB.
    
    To test, apply the patch and update the database.
    
     - Open the permissions page for a patron with staff client privileges
       - Confirm that there is a "Manage Mana KB content sharing
         (manage_mana)" permission.
       - Leaving this new permission unchecked, log into the staff client
         with as that patron and go to the Administration home page.
           - The "Using Mana-KB" link should not appear.
           - Navigate directly to /cgi-bin/koha/admin/share_content.pl. You
             should get a "permission denied" message.
       - Modify the patron's permissions to grant them access to Mana KB.
           - Confirm that the link now appears on the Administration home
             page and that the user can access the page.
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1575d339629e68902ad9a92565f4b331e8c04d79
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Jan 28 20:56:40 2019 +0000

    Bug 22196: (QA follow-up) Fix some more typo
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 081bb2d9bc8ba6bf53c57507a2f6e7bdf0b4fa32
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Jan 27 01:07:01 2019 +0000

    Bug 22196: (QA follow-up) Fix some typo
    
    Fixes the typo on the admin main page.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d0a8d0e55a07e07d95474a09b751f23a79fac979
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jan 23 17:56:50 2019 +0000

    Bug 22196: Clean up Mana KB administration template
    
    This patch makes language changes to the Mana KB administration
    template, and corresponding language changes to the Web Services
    preference file.
    
    Some markup errors have been fixed:
    
     - Correct title and breadcrumbs, copied and pasted from another
       template
     - Add ids to form fields to match their label "for" attributes
     - Make <input>s self-closing
     - Correct class names on alert dialogs
     - Wrap text in JavaScript with _() to make it translatable
    
    Also changed: Some language revisions to the Mana dialogs on the
    Administration home page.
    
    To test, apply the patch and go to Administration -> Share content with
    Mana KB.
    
    Test the process for enabling and configuring Mana KB. Check that
    forms work correctly and that the language of instructions and labels
    reads well.
    
    Go to Administration -> System preferences -> Web services, and confirm
    that the language changes to the Mana KB preference look good.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ab9e4ca6a46519ddc69ad76837407c0a4f0ed0cd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Dec 11 10:13:42 2018 -0300

    Bug 21907: Fix article requests count for non-superlibrarians
    
    The query generates "Column 'branchcode' in where clause is ambiguous"
    
    Test plan:
    1 - Enable 'IndependentBranchesPatronModifications' and article requests
    2 - Sign in as non-superlibrarian
    3 - View plack log
    4 - Refresh mainpage, see error in logs
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7520ede89987a7a65301debdda46950a6364ebfd
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 3 16:07:19 2018 +0000

    Bug 16231: Correct permission handling in subscription edit
    
    This patch corrects the way subscription edit menu items are displayed
    according to the user's permissions settings.
    
    To test, apply the patch and log in to the staff client as a user who
    has permission to create, edit, and delete subscriptions.
    
    - Locate an subscription and view the details for it.
    - Confirm that each "Edit" menu item works correctly.
    - Repeat the process when logged in as a user with varying combinations
      of create, edit, and delete permissions.
    - Test as a user limited by IndependentBranches.
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1da0ba48b6fdf38cfd3d3ea63ec076b15995610f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 1 09:55:54 2019 +0000

    Bug 22254: Correction to datehandling in test
    
    Adding 13 months is not always the same as adding 1 month and then
    adding 12 months in DateTime maths.  This patch rectified the test
    to match the correct behaviour in koha.
    
    Test plan.
    
    1) Modify the test (around line 268) to test against the suspect
       leap date of 2019-01-31 and watch the test fail.
    2) Apply the patch (which also adds this modification to test
       for such a leap date) and watch the test now pass.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a32653a66fa02f1fe9002647d337261bf36d62e0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 4 18:37:09 2019 +0000

    Bug 19915: (follow-up) Fix test count from rebase
    
    https://bugs.koha-community.org/show_bug.cgi?id=19905
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9961e2c08f8dba0896ed4f6bfa6a7befebd28d5d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 1 13:11:16 2018 +0000

    Bug 19915: Don't delete in tests
    
    https://bugs.koha-community.org/show_bug.cgi?id=19905
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a8259c38dbe910188ece5126d226166014e001ed
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jun 15 04:10:39 2018 +0000

    Bug 19915: Only show class sources in use
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    https://bugs.koha-community.org/show_bug.cgi?id=19905
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d2ce727e260f6b45266a8147aee7654811a44fa1
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jan 4 15:00:28 2018 +0000

    Bug 19915: Use cn_sort values for getting inventory items
    
    To test:
    1 - Catalog an item under LCC with callnumber GT95
    2 - cn_sort should calculate as GT0095
    3 - Go to inventory tool
    4 - Enter a range that should have your item e.g LC GT90 to GT100
    5 - Item is not returned
    6 - Apply patch
    7 - Item should be returned
    8 - Verify things otherwise work as expected
    
    Signed-off-by: Anne-Claire Bernaudin <anne-claire.bernaudin@univ-rennes1.fr>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    https://bugs.koha-community.org/show_bug.cgi?id=19905
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c345d30cc8284f690f375faa140de49e62358709
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jul 6 11:20:47 2018 +0200

    Bug 19915: (QA follow-up) Tidy up GetItemsForInventory.t
    
    Standard edits like modules, schema, Koha objects instead of DBIC.
    Removing unneeded autoflush.
    Moving initial test to a first subtest.
    No need to clear issues if you clear items.
    Adding a FIXME for OldWay; would be nice to remove that code..
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    https://bugs.koha-community.org/show_bug.cgi?id=19905
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 186209875a4951b15faded3f8c47eba71716c7af
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jan 4 14:53:14 2018 +0000

    Bug 19915: Add unit test to GetItemsForInventory.t
    
    prove -v t/db_dependent/Items/GetItemsForInventory.t
    
    Signed-off-by: Anne-Claire Bernaudin <anne-claire.bernaudin@univ-rennes1.fr>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Moved the betwen typo edit back here.
    
    https://bugs.koha-community.org/show_bug.cgi?id=19905
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fb62e8d1fc8b210a5b23801b7b8faff3280bf638
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Jan 30 15:37:10 2019 +0000

    Bug 22236: Translation should generate tags with consistent attribute order
    
    When running misc/translator/translate, the order of attributes in the translated templates is not consistent and may vary. This is caused by the random order of hash keys in perl.
    
    This causes things like this in run 1:
    <input type="submit" class="btn" value="Plaats aanvraag" />
    And this in run 2:
    <input value="Plaats aanvraag" type="submit" class="btn" />
    As you can see, there is actually no difference apart from the order.
    
    When comparing the result of various translation runs, I would rather get rid of such noise and only see the real changes.
    
    The needed change is not trivial to find, but only requires a simple addition to a sort operation in tmpl_process3.pl. The current sort only makes sure that the '/' comes at the end. We should sort the names of the keys too when this value is 0 (just meaning: no end tag symbol).
    
    Test plan:
    [1] Run a translation without this patch and set a few templates aside.
    [2] Run a translation with this patch.
    [3] Run a compare (diff) on the templates copied in step 1. Verify that the
        only changes are found in the sort order of attributes in html tags.
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e33bdbd9dae74987869b52fd6df748784657b632
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Feb 4 14:28:19 2019 +0000

    Bug 21751: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0904863c7559467ef9a6f5210950c04dcc5ee04e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jan 28 13:28:30 2019 +0000

    Bug 21751: (follow-up) Correction to selectors
    
    This patch makes a couple of corrections to the selectors used by
    hcsticky in targeting the position of the floating toolbar. These
    changes were made necessary by changes made in recently-pushed patches.
    
    To test, confirm that these two pages work correctly:
    
     - Acquisitions -> Vendor -> View basket
     - Patrons -> New patron
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 014baf181cd4b8c74bfeb04d53f418c58e14ebb8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Dec 6 14:54:58 2018 -0300

    Bug 21751: Remove former fixFloat plugin
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4b82ed3549fcea3588b1500574a6715d0fe51702
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Dec 6 17:15:49 2018 +0000

    Bug 21751: Replace fixFloat with HC-sticky to fix Chrome display
    
    This patch replaces the fixFloat jQuery plugin with a new one: HC-sticky
    (https://github.com/somewebmedia/hc-sticky). This plugin provides the
    same functionality without the page-reflow problems fixFloat suffers
    from.
    
    To test, apply the patch and regenerate the staff client CSS. Test the
    behavior of the floating toolbar on these pages:
    
     - Acquisitions -> Vendor -> Vendor details
     - Acquisitions -> Vendor -> View basket
       - On both these pages, test toolbar behavior before and after
         expanding the "Orders search" options at the top of the page.
     - Administration -> System preferences
     - Authorities -> Create or edit an authority
     - Catalog -> Advanced search
       - Search results
     - Catalog -> Item search
     - Cataloging -> Add or edit a record
       - Open the plugin window for the 008 field
     - Tools -> Label creator -> New label batch -> Add items -> Search ->
       Results
     - Patrons -> New patron
       - Test before and after expanding the patron search options at the
         top of the page
       - Test editing a patron too
     - Tools -> Automatic item modifications by age -> Edit
     - Tools -> Notices & slips -> Edit
     - Lists -> View list
    
    Check that the About page has been updated with information about the
    plugin.
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3ca0234d34ac9708a8335cfa97805fb7498201bf
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Jan 31 09:12:13 2019 +0100

    Bug 22242: Javascript error in value builder cased by Select2
    
    Same as Bug 17780 but in value builders.
    
    Select2 (Bug 13501) introduced divs and inputs that broke some
    assumptions about the expected HTML structure. This patch checks if
    input has name attribute, because some inputs in Select2 have not.
    
    It brakes value builders marc21_linking_section.tt and
    unimarc_field_4XX.tt.
    
    Test plan :
    1)  On a MARC21 database
    2)  Define 774$0 as a regular subfield
    3)  Define 774$4 with an authorised value category
    4)  Define 774$t with value builder marc21_linking_section
    5)  Create a new record
    6)  Use value builder in 774$t
    7)  Search for a record and click choose
    8)  Without patch : a popup window does not close and show a blank
        screen
    9)  With patch : popup windows get close and you see in field 774 $0 and
        $t field with values
    10) Same tests with a UNIMARC database on field 461 with value builder
        unimarc_field_4XX.tt
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Tested successfully with MARC21
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b2dce05ddff8a047e7770ea241b1edd9b798212e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jan 24 14:29:09 2019 -0300

    Bug 19816: Implement dateonly for rfc3339 format
    
    This patch implements the dateonly option for the rfc3339. This is
    described in the OpenAPI 2.0 specification [1]. The required output
    format is described on RFC 3339 [2], as 'full-date'.
    
    [1] https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#dataTypeFormat
    [2] https://tools.ietf.org/html/rfc3339#section-5.6
    
    To test:
    - Apply the regression tests patch
    - Run:
     k$ prove t/DateUtils.t
    => FAIL: Tests fail because dateonly is not implemented
    - Apply this patch
    - Run:
     k$ prove t/DateUtils.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7e69ab62a5ef3fbd350c6606d25b5ab6f6bc168e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jan 24 14:27:28 2019 -0300

    Bug 19816: Regression tests
    
    This patch adds tests for the rfc3339 behaviour when dateonly => 1.
    
    To test:
    - Run:
      $ kshell
     k$ prove t/DateUtils.t
    => SUCCESS: Tests pass
    - Apply this patch
    - Run:
     k$ prove t/DateUtils.t
    => FAIL: dateonly is not implemented
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0f83ac98c753efbae7e33619be717327a820f2e1
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jan 31 16:30:25 2019 -0300

    Bug 22253: Check we actually need to update the password
    
    This patch makes memberentry.pl check if password needs to be updated
    before attempting to call set_password. Above this there's a check that
    won't raise any errors if no password is passed, or the default string (****) is received.
    
    So we could reach that line of code with no password, but the code
    wouldn't check that.
    
    To test:
    - In master, edit any patron without changing the password
    => FAIL: It raises an exception
    - Apply this patch
    - Edit the patron withtout changing the password
    => SUCCESS: Edit successful
    - Edit the patron, changing the password
    - Try to login with the new password
    => SUCCESS: The password got changed correctly
    - Sigh off :-D
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 766eaa0df45f04523737a8f04b045122b3e11b18
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 19 08:22:20 2018 -0300

    Bug 21610: Improve default values for dates
    
    This patch fixes failures on t/db_dependent/Koha/Patrons/Import.t
    and keep t/Auth_with_shibboleth.t and t/db_dependent/Koha/Object.t green
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0ee4e9e14fe461e72806491c819f4c033f95f13b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Oct 19 12:14:20 2018 +0200

    Bug 21610: (follow-up) Default value for dates
    
    We have some dates with DEFAULT CURRENT_TIMESTAMP and some dates with
    default and UPDATE clause.
    
    Test plan:
    Run Object.t again.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8625eefc76a9390e28e9136f19b9767814bc27a5
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Oct 19 11:05:50 2018 +0200

    Bug 21610: (QA follow-up) Better use columns_info from DBIx
    
    We should better use the published method than a private hash key.
    And shorter to go via _result than adding a new schema call.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit abb51797d8d5ebb274856e912e207a921ace478b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 18 18:55:44 2018 -0300

    Bug 21610: Fix integers and dates values at Koha::Object->store level
    
    With strict SQL modes, we are facing several issues when objects are stored.
    
    The following errors can be raised by DBIx::Class when an object does not have
    a valid (as defined at DB level) value:
    - Incorrect integer value: '' for column COLUMN
    - Incorrect decimal value: '' for column COLUMN
    - Column 'COLUMN' cannot be null
    - Field 'COLUMN' doesn't have a default value
    - Incorrect date value: '' for column 'COLUMN'
    
    We already handled some of them for Koha::Patron. As we do not want to provide such
    changes for all Koha::* modules we are going to fix this at Koha::Object->store level
    in order to provide a global fix.
    
    This is related to bug 21599 (for item types) and bug 21596 (for patrons)
    
    Test plan:
    - Apply first patch, run the tests
    => Patch fail because of the previous error in Koha::ItemType->store, to make them pass
    you can replace
      $self->notforloan(0) unless $self->notforloan;
    with
      $self->notforloan(undef) unless $self->notforloan;
    - Apply second patch, run the tests
    => They fail because of dates and/or integers values
    - Apply third patch, run the tests
    => They now pass
    
    Deep code review wanted!
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bc30f84e583959a8c9f4b77db5b8a24ef24e04dd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 18 18:46:30 2018 -0300

    Bug 21610: Remove specific changes we made previously
    
    We handled integers and dates for Koha::Patron and Koha::ItemType, we
    want now Koha::Object to deal with.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9330deee558f553c357edf8eb1aa96bd40563087
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 18 18:38:18 2018 -0300

    Bug 21610: Add tests
    
    Adding few tests to Koha/Object.t in order to highlight what we are
    trying to fix.
    
    Note that Koha::ItemType->store was wrong for notforloan, the default
    value should be null
        `notforloan` smallint(6) DEFAULT NULL,
    but the previous fix (bug 21599) made it default to '0'
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 914f448fe1c1d5c01e3188a827a0d18ec3001b45
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jan 31 13:36:04 2019 +0000

    Bug 22132: DBRev 18.12.00.012
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 63f40e519c7fbbba70a2944113830a1d3ed80306
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jan 30 15:46:04 2019 -0300

    Bug 22132: (QA follow-up) set_password now expects a hashref
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8ee08c3922dd892e9432ce243fc7244092fdd18f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jan 24 15:54:08 2019 +0000

    Bug 22132: (QA follow-up) Tests - use Mojo builtin for auth
    
    Mojolicious has built in handling for encoding/decoding of of basic auth
    paramenters. We should use it to simplify our test here.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 26af040c79e548e9388346b247f509f743401c34
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jan 15 13:23:23 2019 -0300

    Bug 22132: Add Basic authentication to the API
    
    This patch implements Basic authentication for the API to aid testers
    and developers with tools like Postman.
    
    To test:
    - Apply this patches
    - Run:
      $ kshell
     k$ prove t/db_dependent/api/v1/auth_basic.t
    => SUCCESS: Tests pass!
    - Open Postman or your favourite tool
    - In Authorization, choose Basic auth.
    - Enter the username and password of a known privileged user.
    - Hit an endpoint with Postman, for example:
      ] GET http://kohadev-intra.myDNSname.org:8081/api/v1/patrons
    => SUCCESS: Basic authentication is great!
    - Sign off :-D
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 103670e726b9938aa1484b7486cba94adf7b69a9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jan 15 13:23:09 2019 -0300

    Bug 22132: Unit tests
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3ffed7d55a1d77df2d3c0748614434866612ed24
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jan 15 13:22:53 2019 -0300

    Bug 22132: Add RESTBasicAuth syspref
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dba6f6de20c81b7621ec6adfb9f0597c85abdd8b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 30 12:49:00 2019 +0000

    Bug 17854: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 05fc684788344911bb8b1b038dae7673154be25a
Author: Christopher Brannon <cbrannon@cdalibrary.org>
Date:   Mon Sep 24 19:51:36 2018 +0000

    Bug 17854: Adds print/close icon in checkout
    
    To Test:
    1) Apply Patch.
    2) Go to a patron checkout screen (circulation.pl).
    3) Note there are no clear screen buttons in the upper right corner of
    the checkout window.
    4) Turn on the DisplayClearScreenButton preference.
    5) Go back to patron checkout.  Note the clear screen button and the new
    printer icon next to it.
    6) Click the printer icon.  This will trigger a print slip function, and
    close the patron screen.
    7) Try to arrow back to the previous screen.  Should go to main menu and
    not the patron screen, just like the orginal close button (X).
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 98b221ca2b0c3b046fa4105a83ce4d60d43e36bc
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Jan 27 05:14:34 2019 +0000

    Bug 21871: (QA follow-up) C4::Biblio qw(GetMarcUrls)
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=21817
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2845e4a20d5de2fb07995b6cb45701de86aa11a6
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Jan 27 05:13:06 2019 +0000

    Bug 21871: (QA follow-up) Use Koha.Preference in template
    
    Use TT plugin to get value for OPACURLOpenInNewWindow.
    
    Works without, but might be a little nicer.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=21817
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1de457c5a5033f044023b24c12bdd7d214a91a14
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jan 15 19:18:47 2019 +0000

    Bug 21871: (follow-up) Remove link tracking
    
    Links to tracklinks.pl were erroneously copied from detail.tt. This
    patch removes them.
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=21817
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9de11a766b69e110d058b7aea5f6c10d434de542
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 21 13:54:45 2018 +0000

    Bug 21871: Show authority 856 links in the OPAC
    
    This patch modifies the authority detail view in the OPAC so that any
    links found in 856 tags are displayed and active.
    
    To test, apply the patch and locate or create an authority record which
    contains one or more URLs in 856 tags.
     - View this record in the OPAC and confirm that the links appear.
     - Test records with and without link text.
     - Test records with and without public notes.
    
    Signed-off-by: Devinim <kohadevinim@devinim.com.tr>
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=21817
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9371bec02e00adc9b26b678e2fdcfc6b003b3ad6
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jan 23 15:23:15 2019 +0000

    Bug 22191: Add column configuration to libraries administration
    
    This patch adds column configuration to the table of libraries
    in administration. No new defaults for the table are defined.
    
    To test, apply the patch and clear your browser cache if necessary.
    
     - Go to Administration -> Libraries
       - Test that the "Column visibility" button works to show and hide
         columns. The "actions" column should be excluded.
       - Test that export options (Excel, CSV, etc) exclude the "actions"
         column.
     - Go to Administration -> Columns settings and edit the default
       configuration of the libraries table. Confirm that these
       changes are reflected in libraries administration.
    
    Signed-off-by: Jose-Mario Monteiro-Santos <jose-mario.monteiro-santos@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f940ee8d8cb16eae0241185af66167f890784a6b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jan 23 14:48:31 2019 +0000

    Bug 22190: Add column configuration to patron category administration
    
    This patch adds column configuration to the table of patron categories
    in administration. No new defaults for the table are defined.
    
    To test, apply the patch and clear your browser cache if necessary.
    
     - Go to Administration -> Patron categoires.
       - Test that the "Column visibility" button works to show and hide
         columns. The "actions" column should be excluded.
       - Test that export options (Excel, CSV, etc) exclude the "actions"
         column.
     - Go to Administration -> Columns settings and edit the default
       configuration of the patron categories table. Confirm that these
       changes are reflected in patron category administration.
    
    Signed-off-by: Jose-Mario Monteiro-Santos <jose-mario.monteiro-santos@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a3e722c70508021a15cc3c0adee5547850779709
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jan 24 19:40:03 2019 +0000

    Bug 21449: Update two-column templates with Bootstrap grid: Circulation part 2
    
    This patch modifies several circulation templates to use the
    Bootstrap grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags and "text/css" attributes from <style> tags in the
    modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths. For each page, test with
    the CircSidebar preference both on and off.
    
     - Catalog -> Search -> Details -> Items -> View item's checkout history
     - Circulation -> Overdues with fines
     - Circulation -> Transfer
     - Circulation -> Patron -> Batch checkout
     - Circulation -> Built-in offline circulation interface
       - Synchronize
       - Pending offline circulation actions
       - Check out
       - Check in
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3b0ffa1ece454ff0d0a646adc543fceab9fea6dd
Author: Helene Hickey <hickeyhe@wgc.school.nz>
Date:   Wed Jan 16 22:36:20 2019 +0000

    Bug 22148: Changed where user is redirected by cancelling payment
    
    To test:
    1) Create a manual invoice and save
    2) Go to Make a payment tab
    3) Click 'Pay amount', then cancel
    4) Notice you are redirected to the Transactions tab, rather than back to
    Make a payment
    5) Also try this with Pay selected and write off selected result when
    cancelling should be the same
    6) Apply patch and try steps 2-6 again
    7) Verify that you are now redirected to the 'make a payment tab'
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Jose-Mario Monteiro-Santos <jose-mario.monteiro-santos@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 453fd0da1ecfbba2ead6ed0e4a7e27934e6b7e00
Author: Olli-Antti Kivilahti <olli-antti.kivilahti@jns.fi>
Date:   Wed Oct 17 19:03:00 2018 +0000

    Bug 12283: Disable autocomplete for patron search inputs
    
    In a production system, you don't usually search for the same
    patron over and over, so there's no sense for the browser
    to save a list of searched patrons in the patron quick
    search. Therefore, should set autocomplete=off for that
    input field.
    
    Signed-off-by: Jose-Mario Monteiro-Santos <jose-mario.monteiro-santos@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7e5a9f93b458391d210a815db19c576376ca5137
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jan 23 13:25:33 2019 -0300

    Bug 22144: (QA follow-up) Prepare the ground for other formats
    
    This patch refactors the original implementation so it is ready for
    supporting other formats. It also adds some error handling.
    
    To test:
    - Apply this patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Biblio/Metadata.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a681830f2ba36496eb7b86d562d1a625b7e04c94
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Jan 16 14:25:07 2019 -0500

    Bug 22144: Add method metadata() to Koha::Biblio
    
    It would be very convenient to be able to retrieve a bib's attached metadata objects directly from the biblio object. This would be very useful for Template Toolkit syntax in slips and notices where a library would like to use arbitrary metadata fields that aren't stored in the database.
    
    Test Plan:
    1) Apply this patch
    2) prove t/db_dependent/Koha/Biblio.t
    
    Signed-off-by: Te Rahui Tunua <terahuitunua@catalyst.net.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 78bba50d462880087a2c9539d3aff8c262267d10
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jan 23 13:10:14 2019 -0300

    Bug 22194: Add Koha::Exceptions::Metadata
    
    This trivial patch adds a basic Koha::Exceptions::Metadata exception and
    Koha::Exceptions::Metadata::Invalid for using when the data cannot be
    decoded (maybe because of incompatibility between format, schema, or
    just bad data).
    
    To test:
    - Apply this patch
    - Run:
      $ kshell
     k$ prove t/Koha/Exceptions.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5a4fcb471840ae17a0ae69fa52bbff6b27555425
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 29 19:56:43 2018 +0000

    Bug 21918: Update buttons on fines to match newer buttons
    
    This patch makes a number of changes to the "Pay fines" template, the
    goal of which is to make the interface look better in general. Changes
    include:
    
     - Styling the "Pay" and "Write off" buttons as Bootstrap buttons.
     - Adding DataTables sorting, searching, and filtering.
     - Adding a column showing the fine date.
     - Hide the "Add note" input, add a link to show it.
     - Add some missing "preventDefault" methods from events.
     - Add "Writeoff selected" to the buttons which are disabled when there
       is no checkbox selection.
     - The <tfoot> tag is now expected by the HTML validator to be after
       <tbody>, so this section has been moved to suppress validator errors.
    
    To test, apply the patch and locate a patron who has multiple
    outstanding fines.
    
     - Go to Fines -> Pay fines
     - Confirm that the table of fines is shown as a DataTable, with sorting
       on columns which have data.
     - Test columns settings in Administration -> Columns settings.
     - Confirm that fine dates are shown, and that sorting by this column
       works correctly.
     - Click an "Add note" link to show a note input field. Focus should be
       in the newly-displayed input.
       - Confirm that notes are still saved correctly when paying or writing
         off single or multiple fines.
       - Confirm that when the "add note" input is hidden, its contents are
         erased.
     - Uncheck all checkboxes by clicking the "Clear all" link at the top.
       The "Pay selected" and "Write off selected" buttons should become
       disabled.
       - Checking any checkbox should re-enable those buttons.
     - Test that the relocated "Apply" button (for outstanding credits)
       still works as expected.
    
    Signed-off-by: Jose-Mario Monteiro-Santos <jose-mario.monteiro-santos@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 67e60bd778ff69ca6529817f8a128069ef072e31
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 30 11:36:11 2019 +0000

    Bug 22155: Schema updates
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ed44c864582f6b1aa6bf8d9a1f4d0b7106095568
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 30 11:35:59 2019 +0000

    Bug 22155: DBRev 18.12.00.011
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fd30cac85ad91b74000e9878f251906bb0821783
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jan 17 23:25:38 2019 -0300

    Bug 22155: Adapt uses of biblio_metadata.marcflavour to schema
    
    This patch makes the code using Koha::Biblio::Metadata->marcflavour use
    ->schema instead for all interactions.
    
    To test:
    - Update the DB structure:
      $ updatedatabase
    - Update the schema files:
      $ dbic
    - Notice all the places in which biblio_metadata is used
      $ cd kohaclone
      $ git grep biblio_metadata
    => SUCCESS: They all use `schema` instead of marcflavour
    - Notice all the places that use Koha::Biblio::Metadata:
      $ git grep Koha::Biblio::Metadata
    => SUCCESS: They all use the schema attribute when they used to use
    marcflavour
    - Run all the modified tests and scripts
    => SUCCESS: We are all good
    - Sign off :-D
    
    Note: while this seems like a minor change, the places in which plain
    SQL is used really require understanding the queries and how they are
    used, because some query results might be passed to some other method
    that in turn uses the marcflavour attribute. I of course took that into
    account but errare humanum est :-D
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 598bdc99241909775d35561a9046423c65d4bc86
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jan 17 22:55:11 2019 -0300

    Bug 22155: DB update
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a3993a75822972e1e013410ab020f5a749248017
Author: Olivia Lu <olivialokm@gmail.com>
Date:   Tue Jan 15 21:24:25 2019 +0000

    Bug 20634: Changing the identical label "Library:" to "Location" in Inventory Home.
    
    To find fix:
    
    1. Go to tools
    2. Go to Inventory
    3. Verify that under Item location filters the label should be "Location"
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 046d5e12e4b5097516f2355f0ccc29da8af277e8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Dec 6 19:51:39 2018 -0300

    Bug 21971: TestBuilder::build_sample_item
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5d7d741dc4043673202cc41e6e710cce81f57278
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jan 28 20:14:27 2019 +0000

    Bug 21798: (RM follow-up) Fix a few added tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 94e64d3558cfaa776f93442d85ab69587e1b9b83
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Dec 13 13:51:20 2018 +0100

    Bug 21798: (QA follow-up) Fix Biblios.t
    
    Global symbol "$bibnum" requires explicit package name
    
    Test plan:
    Run test
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2b765487705fa90298f8e843b660df386bbc1730
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Dec 12 13:17:02 2018 -0300

    Bug 21798: replace gimme_a_biblio with build_sample_biblio
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0ffaea2c271b09139de2cd9002aa9e92bdb77ac3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Dec 6 18:00:09 2018 -0300

    Bug 21798: Replace 2 more occurrences
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit caab154c393db8862b12dd2b568aff261e3bc34a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 13 11:24:14 2018 -0300

    Bug 21798: Fix another test
    
    We should correctly generate the data we need, here we expect 2 records
    with title starting with "Silence in the".
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9a4d9129401433e74b9ef3c99fffde170e789008
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 13 11:22:15 2018 -0300

    Bug 21798: Fix a wrong test
    
    Now biblioitem.itemtype has a value, GetItem should fill itype with this
    value if item-level_itypes it not set
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9ba6125f72fc4dc44421550561a815cb272b98b7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 13 11:20:45 2018 -0300

    Bug 21798: Unify the creation of bibliographic record in tests
    
    Using the newly created subroutine
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ebce48a752a97245b6cdbd12c82d2cb6ea621bd5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 8 17:06:54 2018 -0300

    Bug 21798: We need t::lib::TestBuilder::gimme_a_biblio
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 398704662487a0c8a3f848a2ae23618ee96406ff
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Nov 15 08:35:33 2018 -0500

    Bug 21495: Regression in hold override functionality
    
    The changes caused by the patches for bug 11512 have broken existing
    workflows for many libraries and are widely considered to be a bad move.
    We should revert this behavior.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Rhonda Kuiper <kuiper@roundrocktexas.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e33f125384694dd825965dffae8d2ca31840aecf
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jan 28 12:23:35 2019 -0300

    Bug 21478: (QA follow-up) Make sure tests don't fail randomly
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8e1efe8f10fd5b575b2ceea3b33d1ed9dd91bd96
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 18 17:10:40 2019 +0000

    Bug 22168: Improve styling of new chart settings for reports
    
    This patch updates a number of aspects of the reports chart creation
    interface: Chart creation form is now shown in a modal window, and a
    separate link has been added to show or hide the chart itself.
    
    Also changed: Minor markup and JavaScript cleanup.
    
    To test, apply the patch and go to Reports -> Saved reports.
    
    - Run a report which returns more than one column.
    - On the report results page, click the "Create chart" button. The chart
      settings form should appear in a modal window.
    - Confirm that the form controls work correctly: Each label should give
      focus to the correct input. Changing the chart type should show or
      hide the appropriate form fields.
    - Click the "Draw" button. The modal should disappear and the chart
      should be shown.
    - Above the chart should be a "Hide chart" link which works to hide (and
      then show) the chart.
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 83876957b451445b8d07376467db06952ab33f3b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jan 28 16:04:32 2019 +0000

    Bug 22061: DBRev 18.12.00.010
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bbec5c85106359e91b55fc028c1edb1bea76c1e1
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jan 28 12:45:03 2019 -0300

    Bug 22061: (follow-up) set_password expects a hashref
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 15ca95ca1d9b32bf15656ce34de04d3995be1e4d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jan 18 13:34:55 2019 -0300

    Bug 22061: (QA follow-up) Rename password_2 => password_repeated
    
    As voted when the RFC was discussed, the attribute gets renamed. The
    tests are adjusted accordingly.
    
    To test:
    - Run:
      $ kshell
     k$ prove t/db_dependent/api/v1/patrons_password.t
    => SUCCESS: Tests pass!
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit be1dec7648870b48121eb8e50dd673d10b684c3b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jan 7 08:25:08 2019 -0300

    Bug 22061: Public route to change password
    
    This patch implements a route to change patron's password for
    unprivileged users. It's intended for using in the OPAC (or however
    consumers find it useful).
    
    It is a starting point for the public API, and the bug also implements
    the on/off switch some community members asked for.
    
    To test:
    - Apply this patches
    - Run:
      $ kshell
     k$ prove t/db_dependent/api/v1/patrons_password.t \
              t/db_dependent/api/v1/auth.t
    => SUCCESS: Tests pass! i.e.
            - RESTPublicAPI is honoured
            - The /public/patrons/:patron_id/password endpoint works as
            expected
    - Use your favourite API testing tool to try the endpoint.
    - Sign off :-D
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b65e4bee0ef4533edf6a255b9c58e80eab5623c5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jan 7 08:24:45 2019 -0300

    Bug 22061: OpenAPI spec
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 351252dd9f88d6df9f79c026cb28eeec08f3624a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jan 7 08:24:28 2019 -0300

    Bug 22061: Unit tests
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ee2931a7b09d9c707e93f43ed784ac4e833290bd
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jan 2 15:05:47 2019 -0300

    Bug 22061: Add a /public namespace that can be switched on/off
    
    This patch adds a check in Koha::REST::V1::Auth::under to catch all
    routes that begin with 'public' (inside /api/v1). If they match, and the
    RESTPublicAPI syspref is off, then an exception is thrown, rendering a
    403 error to the consumer.
    
    Otherwise the routes are processed as usual. This is THE on/off switch
    for the public REST API. The target use case: people not wanting an OPAC
    or public interaction with the API besides privileged users.
    
    In order to test, the rest of the patches are needed because the only
    way to test a route is having it in the spec.
    
    To test:
    - Apply the patches
    - Run:
      $ kshell
     k$ prove t/db_dependent/api/v1/auth.t
    => SUCCESS: tests pass!
    - Sign off :-D
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ff7bf419872a9ef394600f46348622244963324f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jan 2 15:05:10 2019 -0300

    Bug 22061: Add RESTPublicAPI syspref
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a7978a9e97e98c5f2322b16b32289bb59bd1f26f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jan 28 12:37:54 2019 -0300

    Bug 17006: (follow-up) set_password expects a hashref
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ae1e6b558c1e5c581fe0652774c97ae18531758a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Aug 16 07:02:17 2018 -0300

    Bug 17006: Add /patrons/{patron_id}/password
    
    This patch introduces an endpoint for changing a patron's password. It
    targets privileged user with the right permissions, changing some
    patron's password.
    
    To test:
    
    - Apply this patchset
    - Run:
      $ kshell
     k$ prove t/db_dependent/api/v1/patrons_password.t
    => SUCCESS: tests pass!
    - Play with the different use cases highlighted by the tests, on your
    favourite REST testing tool (Postman, RESTer on FF, etc).
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d4570947b0ba4f52f03e190b787b2605948a1495
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Aug 16 07:01:21 2018 -0300

    Bug 17006: OpenAPI spec
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fd1e9bf59590a6772a16cd7af4212c91c6b63642
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Aug 16 07:00:38 2018 -0300

    Bug 17006: Unit tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5953ba5a12f32381fc2a4618cd46d2df8052ecf1
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Jan 14 06:21:39 2019 +0000

    Bug 19770: Add cardnumber and CSS classed to patron info on waiting holds
    
    Patch makes use fo patron-string.inc for displaying the patron information
    on the waiting holds report.
    
    It also adds spans with classes for phone and email.
    
    To Test:
    1 - View the holds awaiting pickup report
    2 - Note there is no cardnumber for the patron
    3 - Apply patch
    4 - Cardnumber shows now
    5 - Verify the same works for 'Holds over' tab
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 62c40c42dfcf94764ad31aa57947c87908467991
Author: Te Rauhina Jackson <terauhina.jackson@gmail.com>
Date:   Tue Jan 16 20:49:20 2018 +0000

    Bug 18661: Made "Replace only included patron attributes" default on patron import
    
    Test Plan:
    1) Go to the import patrons page and notice that "Replace all patron attributes" is selected by default in the Patron Attributes section.
    2) Apply this patch
    3) Go back to the import patrons page and notice that "Replace only included patron attributes" is delected by default.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 843c4a4bae760754d96867d2596bc78651910c8e
Author: Jasmine Amohia <jasmineamohia.student@wegc.school.nz>
Date:   Thu Jan 17 00:51:11 2019 +0000

    Bug 19994: Used Modern::Perl in Authorities perl scripts
    
    Test plan:
    1. Review code of the following files and confirm that 'use Modern::Perl;' is used in place of
    'use strict; use warnings;'
    
    auth_finder.pl
    authorities-home.pl
    authorities.pl
    blinddetail-biblio-search.pl
    detail-biblio-search.pl
    detail.pl
    export.pl
    merge.pl
    merge_ajax.pl
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c747c74568850089d2a13b47aecf9987214ff8db
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jun 29 16:27:28 2018 +0000

    Bug 10562: Improve Leader06 Type Labels in MARC21slim2OPACResults.xsl
    
    This patch takes the suggestions in Bug 10562 and implements those
    changes in MARC21slim2OPACResults.xsl. This patch also makes the
    following changes:
    
     - De-duplicate famfamfam icons: Remove the /silk subdirectory and move
       non-duplicates to famfamfam/; Correct paths to these images in
       templates and CSS
     - Improve the granularity of some material type icon choices: Show
       "Film," "Picture," or "Object" instead of "Visual material."
     - Remove unnecessary title attributes from material type images
     - Implement the kind of changes made in Bug 18235, "Add classes to
       material type icons on result lists and detail pages"
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fe2dceba34310c890dd1f06b114de9f3151f59e1
Author: Helene Hickey <hickeyhe@wgc.school.nz>
Date:   Thu Jan 17 02:28:57 2019 +0000

    Bug 15110: Improve decreaseHighHolds system preference description
    
    To test:
    1) Apply patch
    2) Go to Koha admin
    3) Search in system prefernces for 'high demand'
    4) Verify that the system prefernce 'decreaseLoanHighHolds' is in the
    results of the search
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cadb7eaab2c9617551450f84acadff0d48a846b2
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Jan 14 09:16:53 2019 +0000

    Bug 22124: Update cataloguing plugin system to not generate type parameter in script tag
    
    Test plan:
    1) Apply the patch
    2) Have defined some cataloguing plugin which generates javascript - for
    example dateaccessioned.pl
    3) Go to cataloguing/adding item and show source
    -> there should be no type parameter in script tag in code added by
    cataloguing pulgin
    4) prove t/db_dependent/FrameworkPlugin.t
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 273656f84c9dbc49c8a3669c7994b8c0ea7f3522
Author: Ethan Amohia <ethan.amohia@gmail.com>
Date:   Wed Jan 16 04:01:44 2019 +0000

    Bug 22136: Added 'ExtendedPatronAttributes' notes to 'Import Patrons' notes.
    
    Fixed ExtendedPatronAttributes typo.
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0e7b449ca8596fe38ac9c32048c07324e5f5ea13
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 18 13:05:55 2019 +0000

    Bug 22134: (follow-up) Simplify check for expired patron
    
    This patch move the check for "is_expired" to the template and removes
    unnecessary code from the script.
    
    The page now correctly handles messages for patrons who are about to
    expire, as defined in the NotifyBorrowerDeparture preference.
    
    To test, apply the patch and locate a patron record which is expired.
    
     - On the patron detail page (members/moremember.pl) you should see a
       message at the top of the page.
     - In the body of the page, next to the expiration date information, you
       should see similar message and links.
    
    Select a patron who will expire within the period defined in
    NotifyBorrowerDeparture.
    
     - On the patron detail page you should see a message at the top of the page.
     - In the body of the page, next to the expiration date information, you
       should see similar message and links.
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e193254e357e52f87e10f9b03e350781d2613062
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jan 15 14:53:07 2019 +0000

    Bug 22134: Add account expiration information to patron details
    
    This patch modifies the patron detail template in the staff client so
    that when a patron's registration is expired a message shows at the top
    of the page along with the same "Renew" and "Edit" links which appear on
    the checkout page. Links are also shown next the the expiration date in
    the body of the page.
    
    This patch also corrects the capitalization of the "Edit Details" link
    on circulation.tt.
    
    To test, apply the patch and locate a patron record which is expired.
    
     - On the patron detail page (members/moremember.pl) you should see a
       message at the top of the page.
     - In the body of the page, next to the expiration date information, you
       should see similar message and links.
     - On the patron's checkout page the "Edit details" link in the
       expiration message should have correct capitalization.
    
    Signed-off-by: Devinim <kohadevinim@devinim.com.tr>
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a011f4e6444a2a337042cc49ed9f529bb101fde9
Author: Helene Hickey <hickeyhe@wgc.school.nz>
Date:   Thu Jan 17 01:09:04 2019 +0000

    Bug 19818: Add id into tag html from moremember.tt
    
    1) Go to the patron details for a patron
    2) On the right of the screen, right click one of the labels below
       'Library use' etc, and Inspect Element
    3) View <li> tags which should now each have a unique <id> tag for each
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit afc7a991956ba8ebe8b9be79a56bcdef01bf2003
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 11 14:52:28 2019 +0000

    Bug 22102: Markup fixes for OPAC article request page
    
    This patch makes a few improvements to the OPAC article request page:
    
    - Improve the breadcrumbs menu by adding a link to the title
    - Add a header with the record's title
    - Wrap the "no article requests" message in the correct dialog div
    - Remove obsolete CDATA marker
    
    To test, apply the patch and log in to the OPAC
    
     - Peform a search which will return multiple results
     - Click "Request article" on a title for which article requests can be
       submitted.
       - Confirm that the breadcrumbs menu looks and works correctly.
     - Click "Request article" on a title for which article requsts are not
       allowed.
       - Confirm that the message is correctly styled.
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3eb081870aa297ec5e49d7977a2363d9e6bfe27a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Dec 4 16:52:44 2018 +0000

    Bug 21945: Clean up stock rotation template
    
    This patch makes some minor markup upgrades to the stock rotation
    template: Replace some YUI markup with Bootstrap; Add some missing <tr>
    tags; Remove invalid "type" attribute from <script> tag.
    
    To test, apply the patch and go to Tools -> Stock rotation. Confirm that
    the page looks correct and adjusts well at various browser widths. Test
    with various views: New rota, edit rota, manage stages, manage items.
    
    Signed-off-by: Jose-Mario Monteiro-Santos <jose-mario.monteiro-santos@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5ffb5bcce351689d699bfb395f3105311c13fb07
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 11 17:06:45 2019 +0000

    Bug 22104: Clean up patron API keys template
    
    This patch makes two corrections to the patron API key template: Convert
    to Bootstrap grid and correct class on "new key" button.
    
    To test, apply the patch and enable the RESTOAuth2ClientCredentials
    preference.
    
     - Open a patron record in the staff client and choose More -> Manage
       API keys.
     - On the API keys page, confirm that the page adjusts well at various
       page widths.
     - Confirm that the size of the "Generate new client id/key pair" button
       matches the buttons in the toolbar.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ecc94da6b258e423799e58558a5b02c8f2fcefec
Author: Jasmine Amohia <jasmineamohia.student@wegc.school.nz>
Date:   Thu Jan 17 02:55:46 2019 +0000

    Bug 22026: Removed 'use Modern::Perl;' from Koha::REST::classes
    
    Test plan:
    1) Check all Koha/REST files and confirm that 'use Modern::Perl;' has
    been removed.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ddc4c5b8aa75cfe8994ff150a0cae4cc51656852
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Fri Nov 30 10:26:54 2018 +0000

    Bug 21926: Enhance OAI-PMH:archiveID system preference description
    
    Test plan:
    1) Apply the patch
    2) Go to Administration -> System preferences -> Web services, section
    OAI-PMH
    3) See description on OAI-PMH:archiveID and confirm it does make sense
    and have the link to implementation guidelines
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9a5bfee706f85bc5fd53a9c2d0616c2e1186379a
Author: Helene Hickey <hickeyhe@wgc.school.nz>
Date:   Wed Jan 16 23:20:38 2019 +0000

    Bug 21290: Updating documentation for ModItem
    
    To test:
    Review the patch and check it is now updated correctly
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 000de61e269f60dc1ca218b43d75d3d633c03539
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 2 17:56:43 2018 +0000

    Bug 21964: Update two-column templates with Bootstrap grid: Patrons part 2
    
    This patch modifies several patron templates to use the Bootstrap grid
    instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags in the modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Patrons home page
       - New patron
     - Patron -> Fines -> Create manual invoice
     - Patron -> Set permissions
     - Patron -> Change password
     - Patron -> Edit
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 65b64bcafacf983a101f263e554b6d7274567bb9
Author: Jasmine Amohia <jasmineamohia.student@wegc.school.nz>
Date:   Wed Jan 16 20:53:40 2019 +0000

    Bug 20679: Removed 'rows per page' from report print layout
    
    Test plan:
    1. Create a report or view an existing report
    2. Notice that 'Rows per page:' is visible
    3. Print report (Ctrl+P)
    4. Confirm that on printed report, 'Rows per page:' is no longer visible
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9e79de6ef2d1662d04018203d2f9ff48be8a0f0f
Author: Jasmine Amohia <jasmineamohia.student@wegc.school.nz>
Date:   Wed Jan 16 23:10:35 2019 +0000

    Bug 22149: Fixed grammar in the manage_circ_rules_from_any_libraries description
    
    Test plan:
    1. Review patch and confirm that the sentence makes sense
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ae84cf1e7a512ce198e5fe7e0b4dd3930967ba76
Author: Jack Kelliher <jke0429@stacmail.net>
Date:   Tue Jan 15 03:24:17 2019 +0000

    Bug 21930: Reworded message on permissions.inc
    
    1. Go to patrons account, more, Set Permissions.
    2. Dropdown the Parameters section.
    3. Text should display "If not set the logged in user could only edit
    circulation rules for its the own library (please note that
            manage_circ_rules is still required)"
    4. Apply patch and reload page
    5. Text should now display "Edit circulation rules from any library. If
    not set the logged in user could only edit circulation rules for their
    own library (please note that manage_circ_rules is still required)"
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 380e57ed72aa3b11e91b3897501b9966392a3eaf
Author: Helene Hickey <hickeyhe@wgc.school.nz>
Date:   Tue Jan 15 21:08:47 2019 +0000

    Bug 22029: Google plus has been removed from the social links.
    
    For testing:
    1) Make sure SocailNetworks is enabled
    2) Find a book and verify that in the social links, there is a Google
    Plus option
    3) apply patch and verify that the Google Plus option is no longer there
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9b69ceeac64850dce05b56c978856bd5d1c43b06
Author: Jasmine Amohia <jasmineamohia.student@wegc.school.nz>
Date:   Tue Jan 15 21:34:32 2019 +0000

    Bug 20569: Improved description of CheckPrevCheckout system preference
    
    The CheckPrevCheckout preference can be overriden by a setting in the
    patron categories, I've edited the options to reflect this.
    
    Test plan:
    1. Check the CheckPrevCheckout system preferences and confirm that the
    options are clear
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0584d96bc082b5a7ab2b80af69fe2b7cebcbd188
Author: Jasmine Amohia <jasmineamohia.student@wegc.school.nz>
Date:   Wed Jan 16 00:54:52 2019 +0000

    Bug 22138: updated tab names on members/paycollect.pl
    
    Test plan:
    1. Give patron outstanding fees
    2. Search patron and select 'Make payment'
    3. Select either 'Pay' or 'Write off'
    4. Confirm that first tab title remains as 'Transactions'
    5. Confirm that current tab title remains as 'Make a payment'
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 590aa0ddd9c9d9cd0d2ab1d50380e9714baf432a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jan 28 12:51:02 2019 +0000

    Bug 21573: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7dbf36e83f81371588aeb60a61e5619e9ca9c7f2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 15 15:10:28 2018 +0000

    Bug 21573: Move lists barcode and biblionumber entry form to modal
    
    This patch modifies the staff client lists page so that the
    barcode/biblionumber entry form from the left hand sidebar into a modal
    window, triggered by a button in the toolbar.
    
    To test, apply the patch and rebuild the staff client CSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client).
    
     - View the contents of a list in the staff client, logged in as a user
       who has permission to add items.
     - Click the "Add items" button. A modal window should appear with the
       barcode/biblionumber entry form.
     - Submit barcodes and/or biblionumbers and confirm that the correct
       titles are added to the list.
     - Log in again as a user who does not have permission to add to the
       list. Confirm that the button isn't present.
    
    Signed-off-by: Mackey Johnstone <mackeyfj@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit be7592894fc1bdd45406dcfd0a4350fd55596201
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jan 10 20:40:02 2019 +0000

    Bug 17353: (follow-up) Adjust config variable for moremember.tt too
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f6599b2c5480d2e096bac71e4e7ac759686b9fbc
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Sep 26 17:43:20 2016 +0000

    Bug 17353: Add phone number column to checkout search
    
    This patch adds borrowers.phone as 'Primary phone' in the checkout
    search results. It also ads the table to columns configuration
    
    To test:
    1 - Perform a checkout search
    2 - Note phone is not displayed
    3 - Apply patch
    4 - Note phone does not display
    5 - Visit columns configuration
    6 - Unhide the 'phone' column
    7 - Note phone displays
    8 - Ensure page functions as before patch
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 809d5bfbfe95e5a4797898b2381788546cb3a804
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jan 28 12:36:22 2019 +0000

    Bug 20729: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit de52519422f5488ca9697050a44994f04aa41cc7
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 10 18:16:10 2018 +0000

    Bug 20729: Update style of datepickers
    
    This patch updates the styling of form fields which are configured to
    use the jQueryUI datepicker widget. Some CSS has been added, and the
    default datepicker configuration has been changed.
    
    To test, apply the patch, rebuild the staff client CSS file, and clear
    your cache if necessary. Test pages which include a datepicker to
    confirm that they look correct and work correctly. Some examples:
    
     - Circulation -> Check out -> Specify due date
     - Patrons -> Add patron -> Date of birth, registration date, expiry
       date fields
     - Serials -> Search subscriptions -> Search results page sidebar
     - Tools -> News -> Add news item
    
    And confirm that this change hasn't adversely affected the calendar
    tool:
    
     - Tools -> Calendar
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d2ac9d9df825f029d7e6010ab1928d0f547c1aeb
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Nov 27 19:25:09 2018 +0000

    Bug 21399: Sort patron fines in OPAC by date descending as a default
    
    This patch modifies the DataTables configuration of the logged-in user's
    "Fines and charges" table in the OPAC so that the table is sorted by
    date, descending.
    
    To test, apply the patch and log in to the OPAC as a user with multiple
    fines. Go to the "your fines" page and confirm that the table is sorted
    by default on the first column with the newest entries first.
    
    Signed-off-by: Nazlı Çetin <nazli@devinim.com.tr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1169b729ef43fe5109301d2793f8d94e10eaf245
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 24 16:09:12 2018 +0000

    Bug 21913: Clean up payment details page
    
    This patch makes various corrections and improvements to the payment
    details page:
    
     - Grid converted to Bootstrap
     - Correct title tag
     - Add patron toolbar
     - Adding missing patron-related JavaScript
     - Improve some language
    
    To test, apply the patch and locate a patron who has one or more
    payments on their account.
    
     - Open Fines -> Account -> Details of a transaction
     - Confirm that the page looks correct and adjusts well at various
       browser widths.
     - Confirm that patron toolbar items work correctly
    
    Signed-off-by: Jose-Mario <jose-mario.monteiro-santos@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3ee95bd0213943b625ea5a35eb04e45835cf6f65
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Tue Jan 8 09:28:35 2019 -0500

    Bug 22083: Typo in circulation_batch_checkouts.tt
    
    There is a typo in circulation_batch_checkouts.tt that makes Koha skip
    a warning if the user cannot borrow due to circulation rules.
    
    This patch corrects this typo.
    
    To test:
    
    1. In Administration > Global system preferences, 'Allow'
       BatchCheckouts and enter patron categories in
       BatchCheckoutsValidCategories
    2. Go to Administration > Circulation and fines rules
    3. Enter a rule where a certain category of patrons (that is in
       BatchCheckoutsValidCategories) cannot take out a particular item type
    4. Search the catalog for an item of that item type
    5. Copy the barcode
    6. Go into patrons and find a patron of that category
    7. Click on the Batch checkout tab
    8. Paste the barcode in the box and click Check out
    9. It should say 'Too many checked out'
    10. Apply the patch
    11. Try the check out again, it should show both warnings ('Too many
        checked out' and 'This patron can't check out this item per library
        circulation policy')
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fe8c269509f122e0bda48e0d1ac28be2d04dfa01
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jan 11 16:12:24 2019 +0000

    Bug 20640: (follow-up) Always send a backend on migrate
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 85432a1f4cc7d4bcb9e2533ff0c56416dae150a1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jan 11 14:50:47 2019 +0000

    Bug 20640: (follow-up) Make error message translatable
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 14d6a10de992db89b4730c37fc0d0b86f7467378
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jan 11 12:41:29 2019 +0000

    Bug 20640: (follow-up) Redirect to new request at completion
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cdf0d7640f379d67231c183a1fe9d3a6497871bc
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Nov 1 15:29:08 2018 +0000

    Bug 20640: (follow-up) Degrade gracefully on error
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bf48a24277bb65b348a55c2c9214d97b570329c2
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Apr 27 08:48:53 2018 +0100

    Bug 20640: Add backend migration support to ILL
    
    - Add core methods required to support the migration of ILL requests
    between backends.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e7b26fcdf05656f45d3741b9607d616f42d56f70
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Tue Sep 18 13:05:26 2018 +0000

    Bug 19945: Use CanItemBeReserved in ILSDI HoldItem instead of CanBookBeReserved.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 77a99065462b802f7931b21a8e2a6e0a755ad6eb
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Tue Sep 18 12:59:26 2018 +0000

    Bug 19945: Add a test proving that using CanBookBeReserved in ILSDI::HoldItem is wrong.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit abf19383ed3c1e594b75df4cdaf24d6505128a12
Author: Mark Tompsett <mtompset@hotmail.com>
Date:   Tue Mar 27 19:31:36 2018 +0000

    Bug 19945: (follow-up) optimization and test correction
    
    The double call to CanItemBeReserved was pointless in
    the C4/Reserves.pm HoldItem, as CanBookBeReserved calls
    CanItemBeReserved and even returns that code.
    
    Additionally, the tests failed, because there were 5
    tests not 4.
    
    TEST PLAN
    ----------
    prove t/db_dependent/ILSDI_Services.t
    run koha qa test tools
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ac840a846011f8f6f24686ef68f73e7b59f9704e
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Wed Jan 10 15:31:54 2018 +0000

    Bug 19945: ILSDI - Return the reason a reserve is impossible
    
    Currently, the ILDSI services HoldTitle and HoldItem always return a
    "NotHoldable" code is the reserve is impossible. We need to know why
    
    Test plan:
    
     - Apply this patch
     - Place a hold on a non reservable title using ILS-DI web service
       (http://koha-opac.example.org/cgi-bin/koha/ilsdi.pl?service=HoldTitle&patron_id=1&bib_id=1&request_location=)
     - you should get the reason instead of NotHoldable,
     - Place a hold on a non reservable item using ILS-DI web service
       (http://koha-opac.example.org/cgi-bin/koha/ilsdi.pl?service=HoldItem&patron_id=1&bib_id=1&item_id=1)
     - you should get the reason instead of NotHoldable,
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 094a1cb0703b22d18c061cdc4879c1fc3c76ea80
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jan 7 14:06:01 2019 -0300

    Bug 22066: Record library_id for manual credits
    
    On creating manual credits, the (newly introduced) branchcode should be
    set now. This trivial patch makes it work.
    
    To test:
    - Create a manual credit for a known patron
    - Using MySQL check the result:
      $ sudo mysql
      > SELECT * FROM accountlines WHERE borrowernumber=<known_id>;
    => FAIL: The created accountline row has NULL for the branchcode
    - Apply this patch
    - Create a manual credit for the patron
    - Run:
      > SELECT * FROM accountlines WHERE borrowernumber=<known_id>;
    => SUCCESS: branchcode is set correctly
    -Sign off :-D
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 63f897c06eb96f75d26e0d43a9ca0251919c641d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jan 28 11:45:49 2019 +0000

    Bug 21241: DBRev 18.12.00.009
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 89d4b5ea58f2029f13f4cfa2a652fd4cf900faa9
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Mon Dec 24 21:38:24 2018 +0000

    Bug 21241: (follow-up) Made SQL change idempotent
    
    Also added the new pref to sysprefs.sql
    
    Also simplified the conditional statement.
    
    Sponsored-By: Brimbank Library, Australia
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a4b38a18b33c6551629af5261980bbaf0a4059b6
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Nov 7 11:35:36 2018 +0000

    Bug 21241: (follow-up) Code Golf
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3f7b2fa41898f59ce39d1725f8dfe6001095f796
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Wed Oct 31 13:52:29 2018 +0000

    Bug 21241: (follow-up) Syspref to control fallback to SMS when no email is defined
    
    This patch adds a new system preference (FallbackToSMSIfNoEmail)
    which if enabled Koha will send suggestion notices by SMS if a borrower
    has a defined SMSalertnumber and no email.
    
    The use of the syspref prevents automatic fallback to sending suggestion notices as SMS when there's no defined email.
    
    Test plan:
    1. Chose a patron who has no email address set, but does have a
    smsalertnumber set (this value is set in the Patron messaging
    preferences section after the SMSSendDriver syspref is set)
    
    2. Log into the OPAC with that user and submit a suggestion
    
    3. In the staff client go to Acquisitions->Suggestions and tick the
    suggestion and set its status to 'Accepted'
    
    4. In the database query the message_queue and notice the
    message_transport_type of the message is set to 'email' even though the
    patron has no email address set.
    
    5. Apply patches, restart memcached and plack
    
    6. Check the 'FallbackToSMSIfNoEmail' syspref
    is disabled
    
    7. Repeat steps 2,3 and observe in the message_queue
    table the message_transport_type = 'email'
    
        i.e. If the syspref is disabled then the message is still sent by email
        to borrowers with defined smsalertnumber and no email address
    
    8. Enable the 'FallbackToSMSIfNoEmail' syspref
    and repeat steps 2,3 and notice the
    message_transport_type = 'sms'
    
        i.e. If the syspref is enabled then the message is sent by sms to
        borrowers with defined smsalertnumber and no email address
    
    9. Repeat steps 2,3 with a patron with an email
    address and no smsalertnumber trying with the 'FallbackToSMSIfNoEmail' syspref
    enabled and disabled and notice in both cases the
    message_transport_type = email.
    
        i.e. If a borrower has an email address defined the suggestion
        notice will always be sent via email
    
    10. Repeat steps 2,3 with a patron with no email or smsalertnumber trying with the 'FallbackToSMSIfNoEmail' syspref enabled and disabled and notice in both cases the message_transport_type = email
    
        i.e. If the borrower has no smsalertnumber and no email defined then the
        suggestion notice will be sent by 'email'
    
    11. Run t/db_dependent/Suggestions.t
    
    Sponsored-By: Brimbank Libraries, Australia
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Bug 21241: (follow-up) Renamed system preference
    
    Sponsored-By: Brimbank Library, Australia
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dfa883bbd00af6c86397d34f3c202e4d9d20d5bf
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Fri Aug 17 02:06:56 2018 +1200

    Bug 21241: Conditional to choose appropriate message_transport_type for suggestion notices
    
    Introducing a conditional into C4/Suggestions.pm to check if no patron
    email exists but a smsalertnumber does exist then the suggestion notice
    message_transport_type is set to 'sms', otherwise the suggestion
    message_transport_type='email'.
    
    This ensures patrons with no email address still receieve their
    suggestion notices because at present the message_transport_type is
    hardcoded to 'email'.
    
    Test plan:
    1. Chose a patron who has no email address set, but does have a
    smsalertnumber set (this value is set in the Patron messaging
    preferences section after the SMSSendDriver syspref is set)
    
    2. Log into the OPAC with that user and submit a suggestion
    
    3. In the staff client go to Acquisitions->Suggestions and tick the
    suggestion and set its status to 'Accepted'
    
    4. In the database query the message_queue and notice the
    message_transport_type of the message is set to 'email' even though the
    patron has no email address set.
    
    5. Apply this patch, restart memcached and plack
    
    6. Repeat steps 2,3 with the same patron and query the message_queue
    table again and notice this time the message_transport_type = 'sms'
    
    7. Repeat steps 2,3 with a patron with no smsalertnumber or email
    address. Query the database and observe the
    message_transport_type=email.
    
    If no smsalertnumber is set then the message_transport_type is set to
    'email' by default
    
    Sponsored-By: Brimbank Library, Australia
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 358adce2e75bdd317165c86a9b5064bc52d9e2ad
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Jan 25 15:37:21 2019 +0000

    Bug 22207: course reserves page does not have unique <body> id
    
    Test plan: Go to cgi-bin/koha/opac-course-reserves.pl in the OPAC and
    make sure the body id is opac-course-reserves
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Mikaël Olangcay Brisebois <mikael.olangcay-brisebois@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d58a477c56d33df586b60ba9d8ffccf719750468
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jan 28 11:37:47 2019 +0000

    Bug 21089: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5c547ffff2ca04a87695a57e972171cd76cc828c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jan 7 13:48:55 2019 +0000

    Bug 21089: Overlapping elements in ordering information on acqui/supplier.pl
    
    This patch changes the HTML structure of the vendor edit page so that
    the markup is a little simpler. CSS is modified to match. This structure
    should serve as a model for other similar form structures:
    
     <fieldset class="rows">
         <ol>
             <li>
                 <label>General label:</label>
                 <label class="radio">
                     Specific label 1 <input type="radio" />
                 </label>
                 <label class="radio">
                     Specific label 2 <input type="radio" />
                 </label>
             </li>
         </ol>
     </fieldset>
    
    To test, apply the patch and regenerate the staff client CSS.
    
     - Go to Acquisitions -> Vendor search -> Vendor -> Edit vendor
     - In the "Ordering information" section, confirm that the position of
       radio buttons looks correct.
     - Confirm that radio button labels work correctly.
     - Confirm that the adjacent dropdown menus work well.
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1d5934cae52dd96d9c5b8685a5f5531c69e92df8
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jan 25 13:49:37 2019 -0300

    Bug 21478: Make Koha::Hold->suspend reject found holds
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 92db2e74fd3cd761ae67d2f7573ee03d32d0a8ed
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jan 25 13:48:54 2019 -0300

    Bug 21478: Unit tests
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 11ce911915a237047d8168876849de3df2b3b2e0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jan 25 12:48:04 2019 -0300

    Bug 21478: Add Koha::Exceptions::Hold
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5b4cbb1643aa20ada17c3f73df3e59dfc5a3dbd8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jan 28 11:32:55 2019 +0000

    Bug 21877: (RM follow-up) Move space into conditional
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 36df53ad8d4987e938e478d934d553b73e7450f2
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Jan 22 09:45:02 2019 +0100

    Bug 21877: Use AuthorisedValues.GetDescriptionByKohaField for notforloan in checkout
    
    Using only TT plugin for authorised value description is a better code.
    
    Test plan :
    Part 1:
    1.1) On a catalog with items.notforloan defined with authorized values category NOT_LOAN
    1.2) Define in NOT_LOAN an authorized values 1 with description 'at the beach'
    1.3) Define in NOT_LOAN an authorized values 2 with description empty
    Part 2:
    2.1) Set preference 'AllowNotForLoanOverride' to 'Don't allow'
    2.2) Edit an item with notforloan=1
    2.3) Checkout this item => You see 'Item not for loan (at the beach)'
    2.4) Edit an item with notforloan=2
    2.5) Checkout this item => You see 'Item not for loan'
    Part 3:
    3.1) Set preference 'AllowNotForLoanOverride' to 'Allow'
    3.2) Edit an item with notforloan=1
    3.3) Checkout this item => You see 'Item is normally not for loan (at the beach)'
    3.4) Edit an item with notforloan=2
    3.5) Checkout this item => You see 'Item is normally not for loan'
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cfd59672bb09c4766632de4c6f11cf9cf4bea3f9
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Jan 22 09:47:22 2019 +0100

    Bug 21877: Show authorized value description for withdrawn in checkout
    
    During checkout the withdrawn information is displayed in a message :
    "Item has been withdrawn".
    
    Like in other pages and like notforloan, we should display the withdrawn authorized value description.
    
    This patch adds this display.
    Add <span> so that translation does not change.
    Also adds class 'co-withdrawn' (like in checkin 'ci-*' classes) to ease hidding this new information via CSS.
    
    Test plan :
    1) On a catalog with items.withdrawn defined with authorized values category WITHDRAWN
    2) Define in WITHDRAWN an authorized values 1 with description 'dropped in trash'
    3) Define in WITHDRAWN an authorized values 2 with description empty
    4) Edit an item with withdrawn=1
    5) Checkout this item => You see 'Item has been withdrawn (dropped in trash)'
    6) Edit an item with withdrawn=2
    7) Checkout this item => You see 'Item has been withdrawn'
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 258c538e76914e6c2023242b555bb38c6f1970b9
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jan 24 14:57:46 2019 +0000

    Bug 22203: Holds modal does not link to patorn account
    
    To test:
    1 - Place a hold for a patron
    2 - Check the item in at the pickup location
    3 - Note the holds modal does not link to patron
    4 - Apply patch
    5 - Check in item again
    6 - Patron name in modal is a link
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5ab46bc24573165e540a1a287ea3438637c938e3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jan 14 14:17:23 2019 +0000

    Bug 21989: JS error in "Add orders from MARC file" - addorderiso2709.pl
    
    This patch undoes the changes to addorderiso2709.tt introduced by Bug
    19753. The item information tab can include embedded JavaScript for
    cataloging plugins, and these don't currently work with JS in the
    footer.
    
    To test, apply the patch and test the JavaScript driven features of the
    "Add to basket from a staged file" page:
    
      - Acquisitions -> Vendor -> Basket -> Add to basket from a staged file
        - MARC and Card previews, select all/clear all
        - Item information tab: Cataloging plugins for fields like date
          acquired, barcode
        - Default accounting details tab: Show inactive control
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5e1fd6218c8c3ac991d7a04f1c0b6169b8b7743c
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Thu Jan 3 10:05:37 2019 +0000

    Bug 22049: (QA follow-up) update MarkIssueReturned call in process_koc.pl
    
    Test plan:
    Try to upload koc file with some returns
    Success: the file should be correctly processed
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a243104bf77e3a3905b6fc55bc9ee883826fc083
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Dec 31 08:28:03 2018 -0300

    Bug 22049: (follow-up) Remove leftover variable
    
    The $circControlBranch variable was originally set to be used to pick
    the right dropbox branch. It was only used in MarkIssueReturned, to get
    the right Koha::Calendar object. As this responsability was moved top to
    the AddReturn caller, and the fact that _GetCircControlBranch is
    actually used for fines rules, there's no use for it in this context.
    And it was left on the previous patch as a mistake.
    
    To test:
    - Make sure the variable is not actually used:
      $ git grep '$circControlBranch'
    => SUCCESS: removed variable is not actually used.
    - Sign off :-D
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 603e619e0cdbe6ddbf39ed54adc5e2bda168ec6e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Dec 28 15:23:38 2018 -0300

    Bug 22049: Add tests
    
    The current tests only check some failure use cases. This patch makes it cover more use cases
    
    To test:
    - Apply this patchset
    - Run:
      $ kshell
     k$ prove t/db_dependent/Circulation/MarkIssueReturned.t
    => SUCCESS: Tests pass!
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3cd669e527be0b6c32ce826e1c9cbec60bda10a7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Dec 28 14:39:07 2018 -0300

    Bug 22049: Make MarkIssueReturned rely on returndate only
    
    This patch changes the params accepted by
    C4::Circulation::MarkIssueReturned by removing the $dropbox_branch
    param.
    
    This passed branchcode was only used to initialize the Koha::Calendar
    object, but the date arithmetic has already taken place in a couple
    places before we reach this point. This logic needs to be simplified
    (bug 14591), and this is the starting point.
    
    To test:
    - Apply this patch
    - Run:
      $ git grep MarkIssueReturned
    => SUCCESS: Check all the uses of the function either originally passed
    undef, or now pass the same date that would've been calculated anyway,
    in the returndate param.
    - Run:
      $ kshell
     k$ prove t/db_dependent/Circulation/MarkIssueReturned.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 659253eef12bb213058a8aed835ba6789aa3d9f0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Dec 28 12:15:53 2018 -0300

    Bug 22051: Make Koha::Object->store translate incorrect value exceptions
    
    This patch adds a new condition to Koha::Object->store so it catches
    incorrect value-related DBIC exceptions.
    
    This DBIC exceptions get now translated into
    Koha::Exceptions::Object::BadValue exceptions with relevant parameters
    passed.
    
    To test:
    - Apply the exception and unit tests patches
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Object.t
    => FAIL: Tests fail because this exception handling code is not
    implemented
    - Apply this patch
    - Run:
     k$ prove t/db_dependent/Koha/Object.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0ce4ccdceea74fa8b26a2142deecaee3794f7228
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Dec 28 12:15:36 2018 -0300

    Bug 22051: Unit tests
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 58cbba3c93fba35920d3257a31dea9c760b37330
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Dec 28 11:33:13 2018 -0300

    Bug 22051: Add Koha::Exceptions::Object::WrongValue
    
    This patch adds a new exception to be thrown in Koha::Object->store when
    a DBIC exception is thrown regarding bad data format.
    
    To test:
    - Apply this patch
    - Run:
      $ kshell
     k$ prove t/Koha/Exceptions.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bf6abd5750f1028e3d7c07a26e48c1966f36e32b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Dec 12 08:54:01 2018 +0000

    Bug 21002: Add ->add_debit method to Koha::Account
    
    Sponsored-by: PTFS Europe
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a60abd7196dfe801f72628d7839e6549828e6c14
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Dec 12 08:53:37 2018 +0000

    Bug 21002: Add tests for Koha::Account::add_debit
    
    Sponsored-by: PTFS Europe
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b990b953b324dc18c013f94d1828b61bb5118c60
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Dec 12 14:59:54 2018 -0300

    Bug 21993: Display a user-friendly message when the CSRF token is wrong
    
    Instead of dying!
    
    Test plan:
    Assuming you have a patron with borrowernumber=51 and another one that
    can be deleted with borrowernumber=42
    
    - authorities-home.pl
     * Delete an authority record
     * hit /cgi-bin/koha/authorities/authorities-home.pl?op=delete
    
    - basket/sendbasket.pl
     * Send a basket to someone
     * hit /cgi-bin/koha/basket/sendbasket.pl?email_add=1
    
    - members/apikeys.pl
      * Generate and delete an API key for a patron
      * hit /cgi-bin/koha/members/apikeys.pl?patron_id=51&op=delete
    
    - members/deletemem.pl
      * Delete a patron
      * hit /cgi-bin/koha/members/deletemem.pl?member=42&op=delete_confirmed
    
    - members/mancredit.pl
      * Add a manual credit
      * hit /cgi-bin/koha/members/mancredit.pl?borrowernumber=51&add=1
    
    - members/maninvoice.pl
      * Add a manual invoice
      * hit /cgi-bin/koha/members/maninvoice.pl?borrowernumber=51&add=1
    
    - members/member-flags.pl
      * Change permissions for a patron
      * hit /cgi-bin/koha/members/member-flags.pl?member=51&newflags=1
    
    - members/member-password.pl
      * Change the password for a patron (from the staff interface)
      * hit /cgi-bin/koha/members/member-password.pl?member=51&newpassword=aA1
    
    - members/memberentry.pl
      * Edit some patron's info
      * hit /cgi-bin/koha/members/memberentry.pl?borrowernumber=51&op=save
    
    - members/paycollect.pl
      * Pay an individual fine
      * hit something like /cgi-bin/koha/members/paycollect.pl?borrowernumber=51&pay_individual=1&accounttype=L&amount=1.00&amountoutstanding=1.00&accountlines_id=157&paid=1
      You may need to edit some values
    
    - tools/import_borrowers.pl
      * Import some patrons
      * hit /cgi-bin/koha/tools/import_borrowers.pl?uploadborrowers=1
    
    - tools/picture-upload.pl
      * Upload an image for a patron
      * You will need to edit the html content
      hit Home › Tools › Upload patron images
      then locate the csrf_token input and modify its value
    
    Note for QA:
    - Opac is not done as blocking_errors.inc does not exist for this
    interface
    - ill/ill-requests.pl
    I did not manage to replace this occurrence
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c61dc7863d00072c7d438c5b4b504bfbe428b65d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 2 18:13:33 2018 +0000

    Bug 21965: Update two-column templates with Bootstrap grid: Patrons part 3
    
    This patch modifies several patron templates to use the Bootstrap grid
    instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags and "text/css" attributes from <style> tags in the
    modified templates.
    
    Markup has been corrected in paycollect.tt and readingrec.tt where a
    table row lacked <tr>.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Patron -> Notices
     - Patron -> Purchase suggestions
     - Patron -> Circulation history
     - Patron -> Routing lists
     - Patron -> Statistics
     - Patron -> Fines
       -> Pay
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 454619be4023a379d3de848ddd735cb659a8d5be
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 2 18:33:04 2018 +0000

    Bug 21438: Update two-column templates with Bootstrap grid: Patron card creator
    
    This patch modifies the patron card creator templates to use the
    Bootstrap grid instead of YUI.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Tools -> patron card creator
       - Manage -> Card batches
         - Edit card batch
       - Manage -> Layouts
         - Edit layout
       - Manage -> Images
       - Manage -> Card templates
         - Edit template
       - Manage -> Printer profiles
         - Edit profile
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b4e613ac200f6411386693d45c5f7c7e7959cce8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 8 17:10:00 2018 +0000

    Bug 21792: Switch two-column templates to Bootstrap grid: Serials part 3
    
    This patch modifies several serials templates to use the
    Bootstrap grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags and "text/css" attributes from <style> tags in the
    modified templates.
    
    To test, apply the patch and go to Serials.
    
     - Add or edit a new subscription. The "create an item..." and "do not
       create an item..." labels should look correct.
     - Search for subscriptions
       - Select two or more subscriptions to batch edit.
         - The subscription batch edit page should look correct and adjust
           well to various browser widths.
       - View a subscription and click the "Renew" button. The subscription
         renewal pop-up window should look correct.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 03ea0f0b37acdd6eab2374bebc845fcbe1c8eb13
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Dec 26 13:22:55 2018 -0300

    Bug 21992: Remove unused Koha::Patron->update_password method
    
    This patch removes the no longer used method.
    
    To test:
    - Apply this patch
    - Run:
      $ git grep update_password
    => SUCCESS: Only references are in Auth_with_ldap.pm and not related
    - Sign off :-D
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 197a7029f63d1af6c8fbb520e31b946b55df1b9b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Dec 26 13:19:05 2018 -0300

    Bug 22048: Use set_password in Auth_with_ldap.pm
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 72d8a97116c90c1e33fcc7e1f065404fd232895a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Dec 26 10:59:55 2018 -0300

    Bug 22048: Use set_password in tests
    
    To test:
    - Apply this patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/Auth.t \
              t/db_dependent/Koha/Patrons.t \
              t/db_dependent/Search/History.t \
              t/db_dependent/selenium/authentication.t \
              t/db_dependent/selenium/regressions.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f822dee088b86edecd5d5c73718ad9f8a04c0664
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Dec 13 12:56:42 2018 -0300

    Bug 22048: Use set_password opac/opac-password-recovery.pl
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit aefd2bc2f643834a29b387bafbadefb1a5eb253d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Dec 13 12:34:20 2018 -0300

    Bug 22048: Use set_password in create_superlibrarian.pl
    
    Use $patron->set_password instead of update_password. In this case the
    'skip_validation' param needs to be set as no password strength checks
    are expected.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c425a003fdb347ff7e913e1ad310fd6e775df26a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Dec 13 12:21:02 2018 -0300

    Bug 22048: Use set_password in memberentry.pl
    
    To test:
    - Verify that changing the password and userid of a patron by globally
    editing they works,
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit abea0ea9d209805e5a9932265fdd9a3ccdbdd53b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Dec 12 14:43:36 2018 -0300

    Bug 22048: Use set_password in member-password.pl
    
    This patch makes member-password.pl use $patron->set_password instead of
    update_password. The side effect is that setting password and userid
    become separate steps in the code.
    
    For the password all the initial checks are the same, but password
    strength is checked on calling set_password and an exception is thrown.
    So instead of checking the password quality, we just wait for exceptions
    and behave the same as before.
    
    Bonus: you will notice I reused the initially fetched $patron object.
    Things get simpler :-D
    
    To test:
    - Verify that changing the password / userid for a patron works as usual
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 828ab70be705b5bc90d995dabf7787e608bd51e0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Dec 12 13:40:54 2018 -0300

    Bug 22048: Use set_password in onboarding.pl
    
    To test, verify the onboarding process sets the password correctly.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7cb88d24a81f2f265d4f8aa745f20fe93f2384ad
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Thu Nov 22 11:25:20 2018 +0200

    Bug 21826: Remove strict and warning from Heading.pm
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 06be533a5137a2f58a9fcc4fe30c769fe8a0f157
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Thu Nov 22 11:23:57 2018 +0200

    Bug 21826: Move Heading tests to db_dependent since they require database connection
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a0568daeefc5dddcd35294a1e8879bcdacd4c513
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Mon Nov 19 14:26:00 2018 +0200

    Bug 21826: Add tests
    
    Adds tests for new Heading::valid_bib_heading_subfield and ModBiblio with auto-created authorities.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 441040264a74b99b557dbbef6a1714465d708b45
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 13 16:02:40 2018 +0000

    Bug 21826: (QA follow-up) Add UNIMARC support
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b2b7d376d4854394322310f28d2f5aa1560384e0
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Tue Nov 13 16:43:50 2018 +0000

    Bug 21826: Use subfield map in LinkBibHeadingsToAuthorities
    
    Use only allowable subfields when creating authorities from
    bibliographic records.
    
    Sponsored-by: National Library of Finland
    Signed-off-by: Brendan Gallagher <brendan@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d4726c71328c156be519f0f5cf2190a5d6c5c900
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Dec 26 12:42:28 2018 -0300

    Bug 22047: Fix opac/opac-passwd.pl call
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0f0e064a2b232949185a9ee7ef2c911325d15591
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Dec 26 12:37:07 2018 -0300

    Bug 22047: Add 'skip_validation' param to Koha::Patron->set_password
    
    This patch makes Koha::Patron->set_password expect a hashref as param
    and adds support for an 'skip_validation' param to be passed. Its purpose is to
    make the method skip the relevant password strength checks if required.
    
    It targets the Auth_with_ldap.pm usage when the 'update_password' flag
    is set in the configuration.
    
    The tests on this bug cover this use case so, to test:
    
    - Apply the tests patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Patrons.t
    => FAIL: Tests fail, code doesn't work as expected
    - Apply this patch
    - Run:
     k$ prove t/db_dependent/Koha/Patrons.t
    => SUCCESS: Tests pass! Yay!
    - Sign off :-D
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 983c1193fa5a5594f69e88fbbd2b2614a2763bc9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Dec 26 12:37:00 2018 -0300

    Bug 22047: Unit tests
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9a9557a1b9d529a6cdd586d70599a39baf5fa961
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 25 19:02:31 2018 +0000

    Bug 21672: Switch templates to Bootstrap grid: Various
    
    This patch modifies various templates to add or improve coverage of the
    Bootstrap grid.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Administration -> Item circulation alerts
     - Authorities -> Authorities search -> Merge records
     - Catalog -> Bibliographic details -> Rota (StockRotation must be
       enabled)
     - Tools -> News: Main and add/edit view
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c37ded96714409cd572c79f3c9cd69694e0e71de
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jan 5 03:50:36 2019 +0000

    Bug 22111: Format amount shown on place holds when maxoutstanding is reached (staff)
    
    Displays amount outstanding correctly when holds are blocked
    by maxoutstanding.
    
    To test:
    - Check maxoutstanding system preference value
    - Add a fine to a patron account exceeding maxoutstanding
    - Try to place a hold for this patron from staff
    - Verify this message is shown:
    
         Patron has outstanding fines: 6.00
    
    - Toggle CurrencyFormat system preference and verify display
      changes according to setting
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Mikael Olangcay Brisebois <mikael.olangcay-brisebois@inlibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c3fb484fe2922d2a97053b3fde4fb433c5aa0c4f
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jan 5 05:41:48 2019 +0000

    Bug 22113: Add price formatting on item lost report
    
    The item lost report displays the price and replacement
    price for lost items. With the patch they will display
    according to the CurrencyFormat system preference.
    
    To test:
    - Mark 1 or more items lost
    - Make sure that replacement cost and purchase price are set
    - Go to Reports > Items lost
    - Search for your lost items
    - Verify price and replacement price display
    - Apply patch and toggle CurrencyFormat to different settings
    - Refresh lost items report
    - Verify prices are always displayed according to syspref setting
    
    Signed-off-by: Olivia Lu <olivialokm@gmail.com>
    Signed-off-by: Jose-Mario Monteiro-Santos <jose-mario.monteiro-santos@inLibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b93c5dcbfdeafc2758cb880bea02ca91c0ef4e67
Author: Olivia Lu <olivialokm@gmail.com>
Date:   Wed Jan 16 03:54:25 2019 +0000

    Bug 21855: Changed "deprecated delete_unverified_opac_registrations.pl cronjob" to "cleanup_database"
    
    To Find Fix:
    
    1. Go to Koha Administration
    2. Search PatronSelfRegistrationVerifyByEmail
    3. Verify that NOTE now says "system preference requires the
    cleanup_database ..."
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Mikael Olangcay Brisebois <mikael.olangcay-brisebois@inlibro.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8c0c6be7488e0543662e47006ded12e74ae4eb8d
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Tue Mar 6 13:29:22 2018 -0500

    Bug 18909: Enable the maximum zebra records size to be specified per instance
    
    The default for Zebra is to not return results where the record size is
    greater than 1045 KB ( 1 MB ). Some libraries need to increase this
    ceiling, but it may come at a cost with z39.50 compatibility with other
    services. For that reason, we should make this setting configurable on a
    per-instance basis.
    
    Test plan for kohadevbox:
    1) Apply this patch
    2) Run:
       $ reset_all
    3) Restart Zebra:
       $ sudo koha-zebra --restart kohadev
    4) Check how zebrasrv was called:
       $ ps waux | grep zebrasrv
    => SUCCESS: Looks like
     ... /usr/bin/zebrasrv -v none,fatal,warn -k 1024
    5) Edit /etc/koha/sites/kohadev/koha-conf.xml, add:
       <zebra_max_record_size>2048</zebra_max_record_size>
    6) Repeat (3) and (4)
    => SUCCESS: Looks like
     ... /usr/bin/zebrasrv -v none,fatal,warn -k 2048
    7) Sign off :-D
    
    General test plan:
    1) Apply this patch
    2) Build a Debian package
    3) Specify a zebra_max_record_size of 2048 in your koha_conf.xml
    4) Restart zebra
    5) Index a record greater than 1 MB but smaller than 2 MB
    6) Note that it is searchable!
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Hugo Agud <hagud@orex.es>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4f0618a8888dff72b15dfe9193259c1bc5d06b5f
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jan 12 09:21:38 2019 +0100

    Bug 22118: Format hold fee when placing holds in OPAC
    
    When Koha charges for holds, a message with the fee is
    shown before the patron places the hold. The amount needs
    to be formatted according to CurrencyFormat system preference.
    
    To test:
    - Add a hold fee to your patron category
    - Log into the OPAC
    - Search for a record to place a hold on
    - Click Place hold
    - Verify there is a note showing about the hold fee
    - Toggle CurrencyFormat and HoldFeeMode and verify
      that the formatting is always correct
    
    Signed-off-by: Jack Kelliher <jke0429@stacmail.net>
    Signed-off-by: Mikael Olangcay Brisebois <mikael.olangcay-brisebois@inlibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 495619649b329ce52b86998668461ca72827c6ab
Author: Jasmine Amohia <jasmineamohia.student@wegc.school.nz>
Date:   Thu Jan 17 02:32:08 2019 +0000

    Bug 11922: Add SHOW_BCODE patron attribute for Norwegian web installer
    
    Test plan:
    1. Notice that /patron_attributes.sql and /patron_attributes.txt can be
    located in 2-Valgfritt
    2. Confirm that the SHOW_BCODE patron attribute in the English web
    installers .sql and .txt file is also in the Norwegian web installers
    .sql and .txt file
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9f446de79128352fe5138bb22260a49254c65450
Author: Jasmine Amohia <jasmineamohia.student@wegc.school.nz>
Date:   Wed Jan 16 02:11:42 2019 +0000

    Bug 19920: Removed unnecessary code from C4/Members.pm
    
    A seperate bug (Bug 16853) removed the subroutine used in this file. I removed the code as it had become unnecessary.
    
    Test plan:
    1. Confirm that &changepassword can't be found in C4/Members.pm
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6e4e4c9cbc04b42653599b4ddea35cbaa57e42f3
Author: Helene Hickey <hickeyhe@wgc.school.nz>
Date:   Wed Jan 16 22:06:15 2019 +0000

    Bug 20491: Updating the MARC subfield desciption of 952q
    
    Test plan:
    1) Go to admin, then to MARC frameworks, then to default
    frameworks structure, then subfield stucture for 952
    2) Verify that 'q'
    is described as 'checked out'
    3) Go to <intranet>/cgi-bin/koha/cataloguing/additem.pl?biblionumber=x
    4) Verify
    that 'q' is also descirbed as 'Checked out' in
    5) Apply patch and update
    your database
    6) Verify that the description of 'q' has changed to 'Date
    due'
    7) Go to <intranet>/cgi-bin/koha/cataloguing/additem.pl?biblionumber=x
    6) Verify that it has changed to 'Date due'
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Bug 20491: (QA follow-up) Remove atomic update
    
    We should not update existing installations, especially
    since this would not work for translated frameworks.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 90a43b1868a068b54e398c1df2227a6b6cf93875
Author: Helene Hickey <hickeyhe@wgc.school.nz>
Date:   Wed Jan 16 02:16:26 2019 +0000

    Bug 7403: Shorten CataloguingLog preference description
    
    To test:
    
    1) Look at value of CataloguingLog prefernce
    2) Apply the patch and the value should change
    3) Verify that the warning has been removed
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6764bda2a9eaba37c2eeaf635165b5f0c9abd530
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jan 22 13:54:59 2019 -0500

    Bug 7614: (QA follow-up) Remove unused variable
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 874479a474d9a3fe451c22b8d73b5d4995024363
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jan 22 13:50:39 2019 -0500

    Bug 7614: (QA follow-up) Tidy code to remove tab characters
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2c2d0cd6993561d9b3efa8aa5843200f31b29094
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jan 22 13:49:13 2019 -0500

    Bug 7614: (QA follow-up) Fix POD merge missed in rebase
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2cd3a7187175390258572954685f1475a3e12ecd
Author: Kyle M Hall <kyle@bywatersolutiosn.com>
Date:   Mon Aug 20 10:48:07 2018 -0400

    Bug 7614: Don't allow un-usable pickup locations in the opac pickup locations pulldown
    
    Also fully qualifies some subroutine calls that fail for reasons unkown.
    
    Signed-off-by: Bob Bennhoff <bbennhoff@clicweb.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3a69ec5e050cb7a00fa98e360235941ccc3eb4a1
Author: Lari Taskula <lari.taskula@jns.fi>
Date:   Thu Dec 21 16:55:58 2017 +0200

    Bug 7614: (follow-up) If patron's home library is not a pickup library, let them choose another one
    
    This patch fixes an issue where patron is not allowed to place a hold in OPAC
    while their home library is not a pickup library.
    
    Instead, they should be presented with a list of other available pickup locations.
    
    Signed-off-by: Bob Bennhoff <bbennhoff@clicweb.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 07c91b2116ebb991ff064f26a0a700d6bca43362
Author: Olli-Antti Kivilahti <olli-antti.kivilahti@jns.fi>
Date:   Thu Mar 9 13:06:20 2017 +0200

    Bug 7614: Fix my variable earlier declaration bug.
    
    Signed-off-by: Bob Bennhoff <bbennhoff@clicweb.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 68803f3ddb64006b4eadbb4aa9669ad40187d0fb
Author: Lari Taskula <lari.taskula@jns.fi>
Date:   Fri Feb 10 17:10:49 2017 +0200

    Bug 7614: Build a list of pickup locations in OPAC considering transfer limits
    
    This patch enables the checks for transfer limits for given biblionumber in
    OPAC when patron proceeds to place a hold. In case none of the items of that
    biblio can be transferred to a library, that library will not be included in
    the list of pickup locations.
    
    To test:
    1. Make sure you meet the following requirements:
       1.1: You are able to make holds in OPAC
       1.2: System preference UseBranchTransferLimits set to "Enforce"
       1.3: System preference BranchTransferLimitsType set to "item type"
            (for the sake of simplicity of this test plan, but you may also
             set it to "collection code" and deal with ccodes instead)
       1.4: System preference item-level_itypes set to "specific item"
       1.5: You have the default libraries and item types, otherwise replace
            the branchcodes and itemtypes in this test plan with your own
    2. Make sure 'Fairfield' in cgi-bin/koha/admin/branches.pl has not disabled
       its ability to act as a "Pickup location"
    3. Have a biblio with exactly one item of item-level itemtype 'BK'
    4. Set item holdingbranch as 'CPL'
    5. Go to cgi-bin/koha/admin/branch_transfer_limits.pl (keep this page open in
       a second tab for faster testing)
    6. Select library 'Centerville'
    7. Uncheck the checkbox 'FFL - Fairfield' and click Save
    8. Go to OPAC and find your biblio, and start placing a hold on it
    9. Click at the list of "Pick up location"s.
    10. Observe that it is missing 'Fairfield'
    11. Go back to cgi-bin/koha/admin/branch_transfer_limits.pl
    12. Repeat step 6 and this time, check the checkbox 'FFL - Fairfield'
    13. Refresh the page you arrived at step 8
    14. Observe that it now includes 'Fairfield'
    
    Signed-off-by: Bob Bennhoff <bbennhoff@clicweb.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 02d3d4a8f55e5164f7bb2b87fe1cbbb6b607355d
Author: Kyle M Hall <kyle@bywatersolutiosn.com>
Date:   Wed Aug 15 14:27:45 2018 -0400

    Bug 7614: Consider transfer limits in Koha::Template::Plugin::Branches
    
    Consider transfer limits in Koha::Template::Plugin::Branches->pickup_locations.
    
    This patch modified the mentioned method to consider branch transfer limits and
    does not include any library in the returned list of libraries in case a branch
    transfer limit applies for a given book or item.
    
    To be tested in following patches.
    
    Signed-off-by: Bob Bennhoff <bbennhoff@clicweb.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b028a2d1a53a7106a00a7ec6a860e813c0781342
Author: Lari Taskula <lari.taskula@jns.fi>
Date:   Tue Feb 7 17:51:18 2017 +0200

    Bug 7614: Check transfer limit in CanBookBeReserved and CanItemBeReserved
    
    This patch adds $branchcode_to parameter to CanBookBeReserved and
    CanItemBeReserved. It represents the pickup location for the hold. This patch
    checks if the library is configured to be a pickup location (see Bug 7534), and
    also if the item can be transferred into the given library (see Bug 18072).
    
    To test:
    1. prove t/db_dependent/Holds.t
    
    Signed-off-by: Bob Bennhoff <bbennhoff@clicweb.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2101d0af0034bf8278893b4d4ca7d80c29b3bc75
Author: Lari Taskula <lari.taskula@jns.fi>
Date:   Thu Feb 9 19:21:32 2017 +0200

    Bug 7614: Add a new method Koha::Libraries->pickup_locations
    
    This patch adds a new method, Koha::Libraries->pickup_locations. This method
    takes either an item or a biblio as a parameter, and returns the list of
    acceptable pickup locations by considering libraries' configuration to act
    as a pickup location as well as any branch transfer limits that may apply.
    
    To test:
    1. prove t/db_dependent/Koha/Libraries.t
    
    Signed-off-by: Bob Bennhoff <bbennhoff@clicweb.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 09282c9e56216b3be7dcf904ce00fcd8f7766f84
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 23 14:14:05 2019 +0000

    Bug 17047: (QA follow-up) Remove type from script tags
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 54dff5c944ea01b1240e85da292c07b7cd3a6ade
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 23 13:55:13 2019 +0000

    Bug 17047: DBRev 18.12.00.008
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 17575dfccb2688995ae1e4460a7e0f2fa8aa5fe6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 23 13:27:48 2019 +0000

    Bug 17047: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 055e709d447a0c830913ac8319bf6443e179734d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 23 13:10:39 2019 +0000

    Bug 17047: Schema changes
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 688a1f2adc2cdfd228aa9abcdf5155e656e09013
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Wed Jan 23 10:20:06 2019 +0100

    Bug 17047: Add a third option for Mana system preference
    
    This adds the "No, let me think about it" option.
    It is the default option. If the Mana system preference
    is set to "No, let me think about it", the user is warned
    on the admin home page that he has not decided yet to use
    or not Mana knowlegde base.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fe26d42ada25990fb99ac5309de82810e2729deb
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Thu Sep 27 13:15:50 2018 +0000

    Bug 17047: add a dedicated page for Mana setup
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cb01b253308060bad942723413feef1fd70825fd
Author: Baptiste Wojtkowski <baptiste.wojtkowski@biblibre.com>
Date:   Wed Mar 8 15:46:24 2017 +0000

    Bug 17047: SQL reports management with Mana-KB
    
    Includes:
    
    * code factorization
    Some code from subscription & Mana-KB has been factorized in order to speed-up next developments
    
    * SytemPreferences:
    Mana Activation:
        - add a value "no, let me think about it", that is the default value.
        - as long as this value is selected, messages ask if user want to activate it ( in Administration and Add-subscription(page 2) )
    AutoShareWithMana
        - Add the syspref AutoShareWithMana: user can automatically share infos with Mana-KB (not set by default)
    
    * Interface :
        - On mana-search, rows are now sorted by date of last import, then by number of users
        - Windows redesigned to improve the user experience
    
    * New Feature : report a mistake.
        - people can now report an invalid data (wrong, obsolete,...)
        - if a data is reported as invalid many time, it will appear differently
        - Added few tooltip (to explain the fields last import, nb of users, to explain the new feature)
        - When reporting a data as invalid, a comment can also be added. Koha will then display comments related to data in result lists
    
    * API (svc/mana)
        - add svc/mana/addvaluetofield: allows to ask mana incrementing a field of a resource
        - no hardcoding for resources in the code of api (api needs to be called with a ressourcename)
    
    * New feature : SQL report sharing
        - Create Koha::Report.pm and Koha::Reports.pm, objects class for Reports
        - New feature: share reports with Mana-KB
        - New feature: search report in Mana-KB with keywords
        - New feature: load reports from Mana-KB
    
    Test plan:
        1 - Apply Patch + update database
        2 - Copy the three lines about mana config in etc/koha-conf.xml in ../etc/koha-conf.xml (after <backupdir> for example)
            <!-- URL of the mana KB server -->
            <!-- alternative value http://mana-test.koha-community.org to query the test server -->
            <mana_config>https://mana-kb.koha-community.org</mana_config>
        3 - Check Mana syspref and AutoShareWithMana syspref are not activated
        4 - Search the syspref ManaToken and follow the instructions
        5 - subscriptions
          - Try create a new subscription for a first serial  => Mana-KB shouldn't show you anything (except if the base hase been filled)
          - Share this serial with Mana-KB (on the serial individual's page there must be a Share button)
          - Try to create a new subscription for serial nr1 => a message should appear when you click on "next", click on "use", the fields should automaticaly appear
          - Activate AutoShareWithMana => Subscriptions
          - Create a new subscription for a second serial
          - There shouldn't be any Share button
          - Create a second subscription => the message should appear, click again on use
    
        6 - SQL Report
          - Create a new SQL report, without notes.
          - On the table with all report (reports > use saved), there should be the action "Share"
          - If you click on share, you have an error message
          - Create a new report, with a title and notes longer than 20 characters
          - You  can share it with mana => you will have a success message
          - On (report > use saved), there must be a message inviting you to search on Mana-KB for more results, enter a few word from title, notes, type of  the report you shared, it should appear. You can use it, it will load it into your report list.
    
        7 - Report mistakes.
          - On any table containing Mana-KB search results, you can report a mistake and add a comment.
    
        8 - For each previous test, try to send wrong data, to delete the security token, to send nothing: it should show a correct warning message.
    
    Signed-off-by: Brendan A Gallagher <brendan@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Rebased-by: Alex Arnaud <alex.arnaud@biblibre.com> (2018-07-04)
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cffb47ac5d4634c45cdf12f7d2c5972fc7867c26
Author: Morgane Alonso <morgane.alonso@biblibre.com>
Date:   Thu Aug 25 08:22:50 2016 +0000

    Bug 17047: subscriptions management with Mana-KB
    
    - add a class SharedContent.pm to communicate with Mana-KB server
    - add a link in serials-menu.inc to serials_search.pl to open
    a mana-subscription research form
    - modify the research form in serials-search.tt to show the right fields
    for Mana-KB
    - create datatable in mana-subscription-search-result.inc to show
    results from a research on Mana-KB
    - modify serials-search.pl to manage research on Mana-KB
    
    - add a mana_id to subscription table
    - add a share button on serials-toolbar.inc and a modal to ask
    the language of the share and to alert if the subscription is
    already link to a Mana-KB subscription model
    - add function in C4/Serials to get all the info for a subscription
    sharing
    - modify subscription-detail.pl to manage sharing to Mana-KB
    
    - modify subscription-add.tt and subscription.pl to manage a
    import from Mana-KB during a subscription creation
    - add 2 script in svc for ajax calling from subscription-add.tt
    to communicate with Mana-KB server during a asubscription creation
    - add a function in Subscription.pm to have all the info for a Mana-KB research
    from a biblionumber
    - modify functions used by subscription-add.pl in C4/Serials to manage a
    frequency which came from Mana-KB server and not already created on the
    koha database, and modify the tests of the said functions
    
    Signed-off-by: Brendan A Gallagher <brendan@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Rebased-by: Alex Arnaud <alex.arnaud@biblibre.com> (2018-07-04)
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 290fe9ff36f0e17e157f3d4e708da033b6ec8531
Author: Morgane Alonso <morgane.alonso@biblibre.com>
Date:   Thu Aug 25 08:12:16 2016 +0000

    Bug 17047: add Mana-KB syspref
    
    Add the system preference to enable or disable Mana-KB webservice on koha.
    
    Signed-off-by: Brendan A Gallagher <brendan@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Rebased-by: Alex Arnaud <alex.arnaud@biblibre.com> (2018-07-04)
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8ad2c206cba1b737e69393e2e3cd92076fb94e17
Author: Helene Hickey <hickeyhe@wgc.school.nz>
Date:   Tue Jan 15 23:07:34 2019 +0000

    Bug 20274: Itemtypes report gives zero results if item-level_itypes set to bibliographic records
    
    1) Go to reports then catalog by item types
    2) Pick a location and look at table
    3) Change the system prefernce of item-level_itypes
    4) Verify a zero result
    5) Apply patch and retry
    6) Verify that result does not change to zero on either preference
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 03e5ec617070fdc31829f04612c821e4f83facc1
Author: Ethan Amohia <ethan.amohia@gmail.com>
Date:   Wed Jan 16 03:26:36 2019 +0000

    Bug 22122: Rearranged inputs from a patrons basket in Acquisitions.
    
    Test Plan:
    1. From home page, go to "Acquisitions"
    2. Add a test vendor under "New vendor"
    3. Give the vendor any name and click "Save"
    4. Click "New Basket"
    5. Give the basket a name and click "Save"
    6. Click on "Add to basket"
    7. Click on "From an external source"
    8. Note the order of inputs (ISBN, ISSN, Title...)
    9. Go back to the homepage
    10. Go to "Cataloging"
    11. Click on "New from Z39.50/SRU" button. A new window should open
    12. The order of inputs under 'Z39.50/SRU Search' should all match the
    order of inputs from step 8. (Except "Select MARC framework)
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 45deff8b43d32865cfeeb516c8ffc1140f294c22
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 11 16:27:17 2019 +0000

    Bug 22101: Ill Requests missing in menu on advanced search page
    
    This patch adds [% USE Koha %] to header.inc so that Koha.Preference
    calls will work correctly.
    
    To test, apply the patch and log in to the staff client as a user who
    has permission to access the ILL module.
    
    - Go to the catalog's advanced search page
    - Cnfirm there is a header menu item under "More" for
      "ILL requests."
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 95ce61fd3e2c7f41d14e570da3bb8bf05373c65e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jan 14 08:04:51 2019 -0300

    Bug 22125: branches.pickup_location should be flagged as boolean
    
    This trivial patch just marks the mentioned column as a boolean.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    https://bugs.koha-community.org/show_bug.cgi?id=16497
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e0b1f945f9cdb4efd8b4403855cdc995023dc8be
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 13 12:55:55 2018 -0300

    Bug 21192: Do not pick SelfRegistration hidden fields for SelfModification
    
    There was a mix up between "modification" and "edit" for $action in
    opac-memberentry.pl.
    
    If a patron is logged into the OPAC and they attempt to submit changes to their
    personal details without having actually changed anything, the page reloads with
    a message stating 'No changes were made.' However, the fields that now appear
    are those that have been allowed/hidden according to the preferences set for
    patron self registration, even if patron self registration is disabled. This can
    lead to problems if there are discrepancies between the fields allowed for self
    register settings and those allowed for patron self modification settings.
    
    To replicate:
    
    1.) In Administration › System preferences > OPAC, set PatronSelfRegistration to
    'don't allow'
    
    2.) Modify the unwanted fields for PatronSelfModificationBorrowerUnwantedField
    and PatronSelfRegistrationBorrowerUnwantedField so that at least one field is
    different between the two settings and save (for example, specify 'mobile' to be
    hidden in the former, but don't include in the list of fields to be hidden in
    the latter).
    
    3.) Log into the OPAC and navigate to the 'your personal details' tab. Notice
    that the editable fields correspond to those not hidden by
    PatronSelfModificationBorrowerUnwantedField
    
    4.) Without making any changes, click on 'Submit update request'.
    
    5.) Note that on this page the fields correspond to those not hidden by
    PatronSelfRegistrationBorrowerUnwantedField and are now editable (including any
    fields that would otherwise be hidden by the Self Modification settings).
    
    Reported-By: Chris Slone <cslone@camdencountylibrary.org>
    Signed-off-by: Devinim <kohadevinim@devinim.com.tr>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b608f548a894cb433c4218b94a33d6b8a824a4c4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Dec 17 12:55:34 2018 -0300

    Bug 21170: Remove "isn't numeric in numeric eq (==)" warnings in MARCdetail
    
    Easily removed switching the two conditions.
    
    Test plan:
    Hit catalogue/MARCdetail.pl?biblionumber=1
    => Without this patch you will see in the log warnings like
      Argument "ddc" isn't numeric in numeric eq (==) at /home/vagrant/kohaclone/catalogue/MARCdetail.pl line 277.
    => With this patch applied the warnings do no longer appear
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6c8089b40fef1b59ab056bae8817933afdb2fcc3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Dec 14 16:15:24 2018 -0300

    Bug 22006: Handle undefined itemnumber for Koha::Account::Line->item
    
    If there is no item linked to an account line, the ->item method should return undef.
    Without this patch it explodes with:
    Carp::croak('DBIC result _type  isn\'t of the _type Item') called at /home/vagrant/kohaclone/Koha/Object.pm line 102
    
    Exists since the introduction of this method by bug 12001
    
    Reported on bug 19489 comment 18.
    
    Test plan:
      prove t/db_dependent/Koha/Account/Lines.t
    must return green
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 58f04600f084e2bb5306f18bba1b9a0b22e1664b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Dec 14 16:14:42 2018 -0300

    Bug 22006: Add tests
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8d2324e6de6f639904d188cd432e14add4874779
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Jan 8 14:32:19 2019 +0100

    Bug 22082: ambiguous column in patron stats
    
    In Reports > Patrons statistics, the combination of activity and extended attributes generates an invalid SQL query with error :
    ERROR 1052 (23000): Column 'borrowernumber' in IN/ALL/ANY subquery is ambiguous
    
    This is because FROM contains tables borrowers and borrower_attributes both containing borrowernumber column.
    
    Test plan :
    1) Be sure to have a patron extended attribute
    2) Be sure you have some recent circulation activity
    3) Go to Reports > Patrons statistics
    4) Select 'active' in 'Patron activity' and 1 years of activity
    5) Check 'Row' in 'Patron category'
    6) Check 'Columns' in a extended attribute
    7) Submit
    8) Without patch you have no results, with patch you have exepected results
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1bdf69f49b11c67a751796b53bdad1edb8242eda
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Jan 13 21:26:12 2019 +0000

    Bug 22002: (QA follow-up) Remove some debugging code from template
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 99a75aca903eb076d12b46c3546e86d917d1e244
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sun Dec 16 11:02:56 2018 -0300

    Bug 22002: (bug 21621 follow-up) Re-add GROUP BY in letter.pl and fix it
    
    Caused by
      commit 0cffb0f7589aa52d65bda9a8a4934790a141f3a0
      Bug 21621: Remove incorrect GROUP BY from tools/letter.pl
    The test plan was not complete enough.
    
    Test plan:
    1) Go to Home › Tools › Notices & slips
    2) Choose a letter to edit, e.g. PREDUE. Note that there is only a
    single row.
    3) Click the edit button on the notice.
    4) Expand the 'Print' section. Put text into the Message subject and
    Message body text areas.
    5) Click save, this will take you back to the 'Notices & slips' page.
    6) Clone PREDUE for a specific library
    7) The 'all libraries' option must list the templates for all libraries,
    but without duplicate
    8) Select a library in the dropdown list: only the templates for the
    given library is listed, without duplicate
    
    Signed-off-by: Barton Chittenden <barton@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0d9a42b492ca21cc14fab69d0facb80aeb8dcff4
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Wed Dec 5 16:27:43 2018 +0200

    Bug 21084: Fix automatic truncation in authority search
    
    - Makes token splitting work like in biblio search
    - Only adds right hand truncation since that's what Zebra also does
    - Only adds truncation if the token is not a phrase and ends in a word character
    - Adds tests to existing and new QueryBuilder functions
    
    Test plan:
    
    1. Create an authority record for "Duck, Donald"
    2. Try contains type authority searches with the following terms and make sure they find the record:
    Duck, Donald
    donald duck
    don duck
    "Duck, Donald"
    3. Make sure the following search works but does not find anything:
    "Duck, Don"
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9a8828850a23d592275ab4d48fae61b89c0a9868
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Jan 2 06:23:57 2019 +0000

    Bug 22058: Fix display of empty table cells in OPAC MARC view holdings
    
    I compared the template logic to the MARC detail page in staff.
    We use $raw there instead of html, which will also make notes and other
    fields with HTML in them display correctly. I am proposing to use the
    $raw filter in OPAC as well.
    
    To test:
    - Go to the OPAC
    - Search for a record with items
    - Switch to the MARC view
    - Verify empty cells show &nbsp; (html entity for space)
    - Apply patch
    - Repeat test
    - Verify empty table cells now show as empty
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7028cb8aea3f03f120c54269554953ec7475cdd8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Nov 21 13:40:35 2018 +0000

    Bug 21491: Display 'Yes' as selected if no refundlostitemfee rules are set
    
    To test:
    1 - Delete all refund_lost_item_fee_rules form the db
        delete from refund_lost_item_fee_rules;
    2 - View the Standard circ rules - Default lost item fee refund shows as
    'No'
    3 - View circ rules for a single library, shows as 'Default (Yes)'
    4 - Return a lost item, it actually does refund (this is in the
            LostItemFeeRules code, default 1 if not set)
    5 - Apply patch
    6 - Rule shows as 'Yes'
    7 - View a specifc rule, still says Default (Yes)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 76c10a5dcd37666f641fddd43231b32793f55b1b
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Jan 9 15:51:48 2019 +0100

    Bug 22085: fix UNIMARC default XSLT broken by Bug 14716
    
    Bug 14716 added a call to encode-uri() and namespace str.  This
    namespace declaration is sometimes missing in UNIMARC default XSLT
    files.
    
    This patch adds namespace declaration also where encode-uri is not used
    because it may be used in the future. And those files are the base for
    home made custom files.
    
    Test plan :
    1) Use a UNIMARC DB
    2) Use default in all XSLT sysprefs
    3) Apply patch
    4) Perform a search on OPAC
    5) Check display is OK
    6) Click on a record for detail page
    7) Check display is OK
    8) Perform a search on staff interface
    9) Check display is OK
    10) Click on a record for detail page
    11) Check display is OK
    
    Signed-off-by: Frédéric Demians <f.demians@tamil.fr>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 824e9a7c9e3dc2f46043b5a4361d8beb57419d15
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 18 20:12:08 2019 +0000

    Bug 7143: Fix typo in adding new dev
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2bab07458f37de6af078e27b95c4b85bc3422b22
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jan 17 02:20:56 2019 +0000

    Bug 7143: Update about page for new devs (Academy)wq
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8ae738785d353e3e894259b2745c6168979359ca
Author: Jack Kelliher <jke0429@stacmail.net>
Date:   Tue Jan 15 02:56:23 2019 +0000

    Bug 22011: Fixed Typo on batchMod-edit.tt
    
    1. Navigate to tools, then batch item modification.
    2. Input a valid barcode into the barcode list input field, and press
    continue.
    3. Under the Edit items heading, text should display "Checking the box
    right next the subfield ..."
    4. Apply patch and refresh page, text should now display "Checking the
    box right next to the subfield ..."
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7009ef624adb1d611c83690f3aa09bfb10cd9f23
Author: Mackey Johnstone <mackeyfj@gmail.com>
Date:   Tue Jan 15 02:56:25 2019 +0000

    Bug 21637: Fixed upercase letter in EasyAnalyticalRecords syspref
    
    Changed 'Don't Display' to 'Don't display' for the
    EasyAnalyticalRecords options.
    
    To find fix:
    
    1.Be loged in as a user who can access sys prefrences.
    
    2.Go to:
    Koha Administration > Global System Preferences > Cataloging >
    Interface.
    
    3.Confirm that the dropdown option for EasyAnalyticalRecords is now
    'Don't display'
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c29512266dd72991afb6f43e29e37f5db29d0c7b
Author: Jasmine Amohia <jasmineamohia.student@wegc.school.nz>
Date:   Tue Jan 15 03:30:52 2019 +0000

    Bug 22036: Indented code where '^I' was written rather than an indent.
    
    Code was previously written with '^I' where an indent was supposed to
    be. I deleted all '^I's and replaced them with indents.
    
    To find this change:
    Look at the tags/review.pl file and confirm indentation is correct
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3c328b9cf8d36e39b3c7b56226f746fd597362b0
Author: Jasmine Amohia <jasmineamohia.student@wegc.school.nz>
Date:   Tue Jan 15 20:59:16 2019 +0000

    Bug 20865: Removed space before : on order receive filters
    
    I removed space before : on order receive filters
    
    To find this change:
    1. Create a vendor
    2. Create a basket and add an order to basket
    3. Close basket and select 'receive shipment'
    4. Check that filter options found on the left side of the page finish with a colon and that there is no space before the colon
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f1748bda4281403629115635dc724e45964707e1
Author: Olivia Lu <olivialokm@gmail.com>
Date:   Tue Jan 15 03:15:37 2019 +0000

    Bug 20165: Changed uppercase letter to a lowercase letter in the patron search search fields under the plus option.
    
    Changed "Street Address" to "Street address" in the patron search search
    fields under the plus sign to fit Koha's capitalization rules.
    
    To find this change:
    
    1. Go to Patrons and switch in the search to search patrons
    2. Click on the plus sign
    3. Check "Search fields" pull down
    4. "Street Address" should now be "Street address"
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4eab8308353948c81d9a05978584073354cb43e5
Author: Helene Hickey <hickeyhe@wgc.school.nz>
Date:   Tue Jan 15 03:47:58 2019 +0000

    Bug 22054: Updated the error message for attempting to renew an onsite checkout
    
    To test:
    
    1) Enable OnSiteCheckouts system preference
    2) Checkout an item checking the onsite checkout checkbos in more
    options
    3) Go to circulation > pending on-site checkouts
    4) Verify the checkout shows
    5) Go to circulation > renew
    6) Try to renew the on-site checkout using the barcode
    7) Verify display:
    
    onsite_checkout  Continue without renewing
    
    8) apply the patch and reload page with error message
    9) verify display:
    
    Item cannot be renewed because it's an onsite checkout
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dc8e663c9eeb54ebd26ecf9c7d5ef7c953db283c
Author: Ethan Amohia <ethan.amohia@gmail.com>
Date:   Tue Jan 15 21:45:01 2019 +0000

    Bug 22095: Replaced dead links with working links
    
    I have updated the broken link everywhere it occurs.
    
    Confirm that the new link works in the installer.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5e2e101037bb2bfb8579fcee331388e56658db84
Author: Olivia Lu <olivialokm@gmail.com>
Date:   Tue Jan 15 03:52:30 2019 +0000

    Bug 21866: Changed "report" to "plugins" for the warning "This report was written for an older version of Koha. Run at your own risk"
    
    To find this change:
    
    1. Enable use plugins in global system preferences
    2. Go to tools then click tool plugins
    3. Verify that this string now says plugins
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 21676d7b873fa1fdd2438f0972bf9f00f09c3474
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jan 11 15:14:04 2019 -0300

    Bug 22107: patrons.t doesn't need to delete existing data
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 528e09cf15998744918833fb123a1d04d5762606
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jan 11 15:13:27 2019 -0300

    Bug 22107: Make tests use a simpler class, with no FK
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ff99e6451765ff056b17d985c929bdf10b9dcd2b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jan 11 15:19:02 2019 -0300

    Bug 21727: (QA follow-up) Fix POD encoding
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d73b7a3890331076b926434db8fa60ef922e35d9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 7 19:01:16 2018 +0000

    Bug 21785: Add columns configuration to hold ratios report
    
    This patch adds column configuration to the hold ratios report
    DataTable.
    
    This patch also amends some JavaScript and markup related to some
    obsolete jQuery syntax: A hover function was being used to change an
    element's style on hover. It has been removed in favor of using a link
    and CSS>
    
    To test, apply the patch and view the hold ratios report using a ratio
    which will return multiple results. Confirm that DataTables controls
    work correctly: Paging, search, column visibility, export and print.
    
    Click a number in the "hold ratio" column of the table and verify that
    it populates the "hold ratio" field in the "refine results" form in the
    sidebar.
    
    Test setting default column configurations in Administration -> Columns
    settings.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1cf849eee0626ff2de4f193e5fb83a05671f6280
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 2 15:14:03 2018 +0000

    Bug 21442: Update two-column templates with Bootstrap grid: Circulation part 1
    
    This patch modifies several circulation templates to use the
    Bootstrap grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags and "text/css" attributes from <style> tags in the
    modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Circulation -> Pending on-site checkouts (enable OnSiteCheckouts
       preference).
        - Test with the CircSidebar system preference both on and off
     - Circulation -> Overdues
     - Circulation -> Holds to pull
     - Circulation -> Renew
        - Test with the CircSidebar system preference both on and off
     - Circulation -> Bibliographic detail page -> Request article (enable
       ArticleRequests system preferences)
     - Circulation -> Hold ratios
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a4e699be60b1de9d2b7c5b0fda5f4d668fc45517
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 8 19:57:36 2018 +0000

    Bug 21797: Update two-column templates with Bootstrap grid: Acquisitions part 5
    
    This patch adds or corrects Bootstrap grids on three
    acquisitions-related templates.
    
    To test, apply the patch and confirm that these pages look correct and
    adjust well to various browser widths:
    
    - Acquisitions -> Vendor -> Basket -> View
    - Acquisitions -> Vendor -> Details
    - Acquisitions -> Vendor -> Basket -> Add to basket -> From a new
      (empty) record
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f8544ba5799c457057d42aefc63c88e15a08b096
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Dec 17 18:26:47 2018 -0300

    Bug 21999: Move attributes to a variable to not dup them
    
    Avoid c/p as much as possible :)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit eb979680d7600e8c7e71ddd71003692cff95f9c7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Dec 17 18:21:04 2018 -0300

    Bug 21999: FIXMEs are fixed!
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 81430cbcac161db449575b0506d7d7e6852fe9d0
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Dec 14 15:03:46 2018 +0000

    Bug 21999: Update Tests to reflect new return value of AddIssue
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 34677414d1094203a2a692d41feda1751858f890
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Dec 14 12:27:01 2018 +0000

    Bug 21999: Use Koha::Checkout in C4::Circulation::AddIssue
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 09042d0bbffac12c8f37c75b9c1f72590779256d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 18 09:24:21 2016 -0400

    Bug 21803: Redesign authorized values interface
    
    This patch redesigns the authorized values management interface. The
    primary change is that the initial view of authorized values is now a
    table listing all authorized values categories and their descriptions.
    Descriptions have been added or updated according to the text of the
    manual.
    
    To test, apply the patch and go to Administration -> Authorized values.
    
     - You should see a table of authorized values displayed in a
       DataTables-formatted table.
       - Click a category. You should be taken to the list of authorized
         values for that category. If there are none defined you should see
         a message saying so, including a button to add one.
       - Click the "Add" button next to an authorized value category. It
         should take you to the form for adding an authorized value to that
         category.
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8e6c789255a60958ed12eb399b1acd21819fd40c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Dec 26 14:55:53 2018 -0300

    Bug 21912: (QA follow-up) Do not delete existing patrons
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7669697732e3abf3b2c5a32446115d277be7342e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 29 11:59:05 2018 -0300

    Bug 21912: Add tests for Koha::Objects->search
    
    This patch adds simple tests for the current behaviour. Specifically the
    return values in both scalar and list context.
    
    To test:
    - Apply this patch
    - Run:
      $ prove t/db_dependent/Koha/Objects.t
    => SUCCESS: Tests pass
    - Sign off :-D
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cf483fd3758b2402d15245fe8b975cb9ee277e04
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Thu Dec 13 20:01:24 2018 -0300

    Bug 19458: (follow-up) Self-check module highlighting
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fff6777b35195dca489726875039c2bde6b52c2c
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Thu Dec 13 01:51:38 2018 -0300

    Bug 19458: Self-check module highlighting
    
    In SCO Module there is no difference on how new checkouts and renewals are shown from previous ones. This commit is done to address that issue.
    
    How to test:
    1. Go to /cgi-bin/koha/sco/sco-main.pl and login.
    2. Checkout a new item.
    3. In checkout's table new checkouts should be easily identifiable.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f75897a9721ce695661bfabb2a6ae7d1f9c50fc3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 2 16:38:08 2018 +0000

    Bug 21963: Update two-column templates with Bootstrap grid: Patrons part 1
    
    This patch modifies several patron templates to use the
    Bootstrap grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags in the modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Patrons -> View patron
       - Fines
         - Account
         - Create manual credit
       - Delete
         - Try to delete a patron with checkouts
       - Discharges
       - Housebound
       - Files
       - Holds history
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 88cdccf6fcdf3f8d1bd3e570cf6a6c5ae2c12dc1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 2 15:51:21 2018 +0000

    Bug 21569: Update two-column templates with Bootstrap grid: Circulation part 3
    
    This patch modifies several circulation templates to use the
    Bootstrap grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags and "text/css" attributes from <style> tags in the
    modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
    With each of these pages, test with CircSidebar preference both on
    and off
    
     - Circulation -> Returns
     - Circulation -> Set library
     - Circulation -> Transfers to receive
     - Circulation -> Holds queue
     - Circulation -> Holds awaiting pickup
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 472c576513674877b3f4eb57dca2eda948c25d78
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Fri Dec 14 16:50:39 2018 +0000

    Bug 22003: Remove unused subroutines displaylog and GetLogStatus from C4::Log
    
    These two routines are not used
    
    Test plan:
    0) Apply the patch
    1) git grep GetLogStatus should return no occurence
    2) git grep displaylog should return no occurence
    3) prove t/Log.t should return green
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 11c4cd73e19586ea74a7ac5ba7c88989dd8c4f21
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Dec 12 12:09:46 2018 +0000

    Bug 21727: Add handling for cases requireing patron refunds
    
    As it is possible to partially pay off a fine that is still incrementing
    we can end up in a position (when dropbox mode is enabled) where the
    patron may be owed money by the library should they have paid off the
    fine between dropping the item off in dropbox mode and the increment
    that reverts the increase on the dropbox day.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5994296aad5368440c1d901f42fdf3a1b50d62b9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Dec 12 10:49:18 2018 -0300

    Bug 21727: Unit tests for the refund case
    
    This patch introduces tests for the behaviour when the negative adjust
    exceedes the amount that was already paid. In this case, the line amount
    is expected to be set to 0, and a credit with the payed amount created.
    
    To test:
    - Apply this patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Account/Lines.t
    => SUCCESS: tests pass!
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 648808a33f6d482f082530526d2a8776dd88f5bd
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Dec 11 17:45:15 2018 +0000

    Bug 21727: Add clarifications to the POD of adjust
    
    Sponsored-by: PTFS Europe
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cd427190d0138fab9cef8aaf008c9705707da7dc
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Dec 11 12:35:29 2018 -0300

    Bug 21727: (QA follow-up) Test lastincrement changes
    
    'adjust' changes the 'lastincrement column, and this behaviour should be
    tested. This patch just adds tests for that.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7ece45328481988b472cbd9f68bf412a36acd117
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Nov 1 17:12:14 2018 +0000

    Bug 21727: Add ->adjust to Koha::Account::Line
    
    This patch introduces a high-level method for updating existing debits,
    similar to Koha::Account::add_credit and Koha::Account::add_debit.
    
    It updates the Koha::Account::Line object, and adds an offset. It also
    logs if required.
    
    It whitelists the account types that are allowed to be adjusted, just in
    case some others require adjusting, having a single source for truth.
    
    To test:
    - Apply this patches
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Account/Lines.t
    => SUCCESS: Tests pass!
    
    Sponsored-by: PTFS Europe
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 89b8414d3fd8ce8426d9747ec2489f7abf5985a1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 30 11:52:12 2018 +0000

    Bug 21727: Add tests for Koha::Account::Line->adjust
    
    Sponsored-by: PTFS Europe
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4e6d64c16361ec3c00813c291b56ecf5657eff1f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 4 03:08:14 2019 +0000

    Bug 21753: DBRev 18.12.00.007
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 277bd25b45e925f0af13f274ceb52a1af4e739cd
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Nov 29 12:49:50 2018 +0100

    Bug 21753: (QA follow-up) Remove fourth %s in sprintf
    
    Trivial.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1aa9625c5b983d5a7f10b7ed87db848b8c2a654c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 2 10:04:46 2018 +0000

    Bug 21753: Update to remove the field from the database
    
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit aa71519660a43cebc734763e4821818dfc636775
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 2 09:42:53 2018 +0000

    Bug 21753: Remove all reference of chargename from scripts
    
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 28de85db4060604e7cca7dbb74e9da984e2e6451
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Dec 10 12:02:41 2018 +0000

    Bug 21980: Add new exceptions for Koha::Account
    
    He add two new exceptions here; One to be thrown when negative 'amount'
    is passed into verious account methods that always expect positive
    decimals and another to be thrown when a bad 'type' is passed into an
    account method.
    
    Sponsored-by: PTFS Europe
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7185a96ca601905c291ea5b164332486bb4a14af
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri May 4 14:25:16 2018 +0000

    Bug 21436: Update two-column templates with Bootstrap grid: Tools part 4
    
    This patch modifies several tools templates to use the
    Bootstrap grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags and "text/css" attributes from <style> tags in the
    modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Tools -> Task scheduler
     - Tools -> Staged MARC management -> View batch -> View diff of
       imported record which duplicates a record in the catalog
     - Tools -> Stage MARC for import
       - Test each step
     - Tools -> Upload local cover image
       - Test each step
     - Tools -> Upload any file
       - Test each step
     - Tools -> Log viewer
       - Test from the tools menu and from both the bibliographic
         patron details pages ("Modification log").
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 10f78fcb2efec81b3c2024c97dbb55b21a3c14a8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 4 02:51:03 2019 +0000

    Bug 21915: DBRev 18.12.00.006
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 38530140176ddcb2f9d2ded7dea5382f4816e12f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 30 10:28:48 2018 -0300

    Bug 21915: Add a cli script to reconcile balances
    
    This patch adds a CLI script, reconcile_balances.pl that takes care
    of calling the reconcile operation for all patrons that have outstanding
    credits.
    
    A weird situation has been spotted in the wild, in which a debit ends up
    actually being a credit, because amount outstanding is tweaked in
    dropbox-mode returns. Until we figure what to do about that (probably a
    new account type, etc), we catch any exceptions and warn about the
    situation.
    
    To test:
    - Have patrons with outstanding credits and debits
    - Run the script:
      $ kshell
     k$ perl misc/cronjobs/reconcile_balances.pl --verbose
    => SUCCESS: Notice patrons got their balances reconciled, and useful
                information is output.
    - Add new outstanding credits and debits to patrons you con easily
    identify
    - Run:
     k$ perl misc/cronjobs/reconcile_balances.pl
    => SUCCESS: Notice balances are reconciled, but no output
    - Run:
     k$ perl misc/cronjobs/reconcile_balances.pl --help
    => SUCCESS: Usage information is printed.
    - Sign off :-D
    
    Sponsored-by: ByWater Solutions
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0693052bfcd0b4259eb620233550f81eab49eabd
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 30 09:54:56 2018 -0300

    Bug 21915: Call reconcile_balance on manual credit creation
    
    This patch makes the manual credit creation step call
    Koha::Account::reconcile_balance when the AccountAutoReconcile syspref
    is set.
    
    To test:
    - Apply the patch
    - Have some outstanding debits
    - Create a manual credit
    => SUCCESS: Same behaviour as always
    - Set AccountAutoReconcile
    - Create a manual credit
    => SUCCESS: Reconcillation happened
    - Sign off :-D
    
    Sponsored-by: ByWater Solutions
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0c43fa326afa23ef9c98ae2e7b464f6a0e55d880
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 30 09:45:19 2018 -0300

    Bug 21915: Call reconcile_balance on manual invoice creation
    
    This patch makes the manual invoice creation step call
    Koha::Account::reconcile_balance when the AccountAutoReconcile syspref
    is set.
    
    To test:
    - Apply the patch
    - Have some outstanding credit
    - Create a manual invoice
    => SUCCESS: Same behaviour as always
    - Set AccountAutoReconcile
    - Create a manual invoice
    => SUCCESS: Reconcillation happened
    - Sign off :-D
    
    Sponsored-by: ByWater Solutions
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 49c9e93292b2f694857edc66e913b9f65d081e8b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 29 16:46:36 2018 -0300

    Bug 21915: Reconcile balance on _FixAccountForLostAndReturned call
    
    This patch makes _FixAccountForLostAndReturned reconcile the patron's
    account balance, when the AccountAutoReconcile syspref is set.
    
    To test:
    - Apply this patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/Circulation.t
    => SUCCESS: Tests pass, peace \o/
    - Sign off :-D
    
    Sponsored-by: ByWater Solutions
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6d42f6e72c20bad116454b81ee512024179b7387
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 29 14:55:53 2018 -0300

    Bug 21915: Add AccountAutoReconcile syspref
    
    This syspref will be used to call the reconcile_balance routing as
    needed.
    
    Sponsored-by: ByWater Solutions
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 551626ce1e82286414c4a77c83febdcfbc99741a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jan 7 07:38:29 2019 -0300

    Bug 22071: (follow-up) Add POD for validate_query_parameters
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0d5058b7b29d90cc7c8e533ee56388fbb5a96d52
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jan 7 07:31:43 2019 -0300

    Bug 22071: (follow-up) Simplify code
    
    In order to add features to this method, the current code would force us
    to do it for each authentication method.
    
    There's duplicated code that could be simplified. This patch makes the
    authentication code just set $user on each block (oauth and cookie
    authentication) and moves the final permissions check to the end of the
    authenticate_api_request method.
    
    Overall, the behaviour remains unchanged.
    
    To test:
    - Run:
      $ kshell
     k$ prove t/db_dependent/api/v1/auth_authenticate_api_request.t \
              t/db_dependent/api/v1/oauth.t
    => SUCCESS: Tests pass! Nothing changed!
    - Sign off :-D
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 613a0034e08af84af1e2198156bbfc6900ba6551
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jan 4 12:46:37 2019 -0300

    Bug 22071: Make authenticate_api_request stash koha.user in OAuth use case
    
    This patch makes the OAuth code stash the requestion Koha::Patron.
    
    To test:
    - Apply the tests patch:
    - Run:
      $ kshell
     k$ prove t/db_dependent/api/v1/auth_authenticate_api_request.t
    => FAIL: Tests fail :-(
    - Apply this patch
    - Run:
     k$ prove t/db_dependent/api/v1/auth_authenticate_api_request.t
    => SUCCESS: Tests pass :-D
    - Sign off =D
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2067b8e3f8cb363370897ff179bcdbf5c97cbbbb
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jan 4 12:37:27 2019 -0300

    Bug 22071: Regression tests
    
    The authenticate_api_request() behaviour needs more tests. This patch
    adds tests for the stashed Koha::Patron object. It highlights the bug in
    the OAuth authentication case.
    
    To test:
    - Apply this patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/api/v1/auth_authenticate_api_request.t
    => FAIL: Tests fail in the OAuth case, pass in the cookie-based auth
    case.
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8009a8f462b05c2885fa4126dcba2ef0185f54f2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 8 12:34:17 2018 -0300

    Bug 21788: Make ProcessOfflinePayment pass the library_id parameter
    
    To test:
    - Run:
      $ kshell
     k$ prove t/db_dependent/Circulation.t
    => FAIL: branchcode is not set
    - Apply this patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/Circulation.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4ef8bfee3f5da810738607498068ea719d533378
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 8 12:31:59 2018 -0300

    Bug 21788: Unit tests
    
    This patch refactors the tests related to ProcessOfflinePayment and adds
    checks for setting branchcode on the account line.
    
    To test:
    - Run:
      $ kshell
     k$ prove t/db_dependent/Circulation.t
    => FAIL: branchcode is not set
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5c313bc554a857da29f124957d58459c0ed4c03b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 31 12:50:27 2018 +0000

    Bug 22073: Add to diacritics mappings for Ž and ž
    
    To test:
    1 - Find or add a record by author Slavoj Žižek
    2 - Search for 'Zizek'
    3 - No results
    4 - Apply patch
    5 - Reindex
    6 - Search again
    7 - Success!
    
    https://bugs.koha-community.org/show_bug.cgi?id=22073
    
    Signed-off-by: Eric Phetteplace <ephetteplace@cca.edu>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 17a8eb187959625ef67eea9999588fe502443691
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Dec 19 16:00:52 2018 -0300

    Bug 22020: (bug 21777 follow-up) Fix columns visibility for circulation.pl
    
    The table is used by circulation.pl and moremember.pl
    When it is modified we need to take care of the two view.
    
    Test plan:
    Use the columns settings to hide/show the "check in" and other columns
    Confirm the this patch fixes the display for moremember.pl
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 986a52d718d4219f32a79a045d5867a3d70092d5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Dec 27 11:40:12 2018 -0300

    Bug 21786: (QA follow-up) library_id can be null
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 814078ab401900a118558b828a9dc796c9a81c87
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 9 16:29:43 2018 -0300

    Bug 21786: Make balance and credits endpoints handle library_id
    
    This patch:
    - Adds the branchcode <-> library_id mapping in the controller
    - Adds 'library_id' to the credit and account_line definitions
    - Makes add_credit handle the library_id param, passing it to the
      underlying $account->add_credit method.
    
    To test:
    - Run:
      $ kshell
     k$ prove t/db_dependent/api/v1/patrons_accounts.t
    => FAIL: Tests fail, because library_id is not mapped
    (balance) and because it is not handled when adding a credit.
    - Apply this patch
    - Run:
      k$ prove t/db_dependent/api/v1/patrons_accounts.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4c742b59f75cf56a844b0b8eed1b15a0313a7783
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 9 16:29:15 2018 -0300

    Bug 21786: Unit tests
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 55f042762939755537a3b9a4b578d55ff9c517ba
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 9 16:35:31 2018 -0300

    Bug 21786: Add library_id to the spec definitions
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a03eed982bdd28a49f688c742d9e28a780ef12a6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jan 8 14:27:55 2019 +0000

    Bug 21813: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3607fdfe7966b4db8cb69331f097278d09363fd2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Nov 12 17:35:25 2018 +0000

    Bug 21813: In-page JavaScript causes error on patron entry page
    
    This patch removes a block of JavaScript from memberentrygen.tt which
    was being included in the page before jQuery is loaded. This causes a
    JavaScript error.
    
    To test, apply the patch, regenerate CSS, and clear your browser cache
    if necessary.
    
     - In Administration -> Patron categories, confirm that you have two
        patron categories with different default messaging preferences
        defined.
     - Go to Patrons -> New patron
       - Create a new patron using one of the categories with messaging
         preferences.
       - Confirm that when you switch the category selection to the other
         patron category, the patron messaging preference checkboxes are
         changed to the default for that category.
         - A "Loading" indicator should appear above the checkboxes to show
          that an operation is in process. It should disappear when new
          default prefs are loaded.
       - Manually change one or more patron messaging preference checkboxes.
       - Switch the patron category again and confirm that you are prompted
         to confirm resetting the preferences to the default for that
         category.
     - Perform the same set of tests when editing a patron.
       - Defaults should not be loaded during the edit process.
     - Confirm that there are no other JavaScript errors in the console.
     - Test again with EnhancedMessagingPreferences disabled.
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b32756a5d7819e13290c2a145f3f0009280785c4
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Dec 28 18:48:25 2018 +0000

    Bug 22052: Refactor DeleteExpiredOpacReigstrations
    
    This patch changes the sub to use Koha::Objects and updates the tests.
    Previously the sub would die on borrowers with checkouts and would
    delete borrowers if they had fines
    
    To test:
     1 - prove -v t/db_dependent/
     2 - Set your selfreg preferences:
        PatronSelfRegistration: Allow
        PatronSelfRegistrationDefaultCategory: SELFREG (or of your choice)
        PatronSelfRegistrationExpireTemporaryAccountsDelay: 30
     3 - Register a patron into SELFREG or how you set above
     4 - Set their date enrolled to two months ago
     5 - Checkout an item to the patron
     6 - Issue a fine to that patron
     7 - perl misc/cronjobs/cleanup_database.pl --del-exp-selfreg -v
     8 - The job should die with an error
     9 - Check in the item
    10 - run the corn again - patron is deleted, oops
    11 - Apply patch
    12 - Create another patron in the same way
    13 - Checkout and fine the patron
    14 - run the cron
    15 - they are not deleted, and no error
    16 - checkin the item
    17 - run the cron
    18 - they are not deleted and no error
    19 - clear the fine
    20 - run the cron
    21 - patron is deleted, huzzah
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    Signed-off-by: Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f44e37b201d0a8b95b1eee0ac0766bed9c386fc2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Dec 28 18:48:15 2018 +0000

    Bug 22052: Unit tests
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    Signed-off-by: Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 70abd7698f02a7da791490607f43df9f781390d2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jan 8 14:01:45 2019 +0000

    Bug 22030: DBRev 18.12.00.005
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 96adab7af8999da7f351169e1265d4be5e59742f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Dec 19 17:53:08 2018 +0000

    Bug 22030: Use preference to determine username sent to overdrive
    
    Overdrive configuration generally defaults to cardnumber, however, they
    have confirmed that some libraries use usernames. We need to allow for
    both scenarios.
    
    To test:
    1 - Have an OverDrive account setup with SIP authentication
        Note: You can apply for a testing account at developer.overdrive.com
        and setup an environment
    2 - Fill in all your OverDrive system preferences
    3 - Test with a patron whose username is their cardnumber
    4 - Confirm their overdrive account tab on opac loads
    5 - Change the username to be another value like "borked_wont_work"
    6 - Note the overdrive account tab won't load
    7 - Apply patch, update database, not new system preference
    OverDriveUsername (default to 'cardnumber)
    8 - Note the OD account loads successfully
    9 - Change the system preference to 'user name' - the account load fails
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 482b323da1e18324941963359b9a1bd96f297c44
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Dec 13 14:59:38 2018 +0100

    Bug 21605: (follow-up) Simple ternary boolean to number conversion
    
    Imo it is much easier to do just "$a ? 1 : 0" than testing defined($a) etc.
    in the additional loop.
    Less code, more readable?
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c9c3fc4368ee9d37a45c48167d25d5cee511898b
Author: Colin Campbell <colin.campbell@ptfs-europe.com>
Date:   Fri Oct 26 10:42:13 2018 +0100

    Bug 21605: Ensure EDI acct fields set to boolean val
    
    Validate the input to the fields indicating account
    functionality. The only valid values are 1 and 0
    non-integer (or integers other than 0/1) are invalid
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4d671103f420f1c0b80bcbf13be613b69e2aa4f9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jan 2 09:56:52 2019 -0300

    Bug 22059: Fix exception params in Koha::Patron->set_password
    
    This simple patch fixes a wrong call to ->throw. Parameters shouldn't be
    enclosed in curly brackets.
    
    To test:
    - Apply the tests patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Patrons.t
    => FAIL: Tests fail because the throw call is wrong
    - Apply this patch
    - Run:
     k$ prove t/db_dependent/Koha/Patrons.t
    => SUCCESS: Tests pass!
    -Sign off :-D
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3ef3ecfe99e219fda854ca57c652e3c52a7f47d7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jan 2 09:56:21 2019 -0300

    Bug 22059: regression tests
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 224718b3adee28d33999379b0ebab1092ae88169
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jan 3 18:56:14 2019 +0000

    Bug 19066: DBRev 18.12.00.004
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 73aa20afd0ed62c9af9d379bc9c002f13d673098
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jan 3 18:55:50 2019 +0000

    Bug 19066: (RM follow-up) Fix test count and structure error
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d18c992c5af8d4a97baf273798a3de67d4b3fb2a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Dec 17 11:15:50 2018 +0000

    Bug 19066: (QA follow-up) Define foreign key for branchcode
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit faafdb53b7c3614420bae1df1b023ad4cb64db2e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 8 11:15:25 2018 -0300

    Bug 19066: Add tests for Koha::Account->pay
    
    This patch adds tests for Koha::Account->pay, to make sure the
    library_id param is used to set the branchcode attribute. The use of
    userenv to set branchcode if library_id not passed is removed.
    Responsability is left to the callers to pass library_id.
    
    To test:
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Account.t
    => SUCCESS: Tests pass!
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 48dab3c1261870bf23c01eda3b57aa76a9814250
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 7 17:06:26 2018 -0300

    Bug 19066: (QA follow-up) Fix ChargeReserveFee
    
    This patch fixes a bug in ChargeReserveFee:
    
    To test:
    - Run:
      $ kshell
     k$ prove t/db_dependent/Reserves.t
    => FAIL: Tests fail because branchcode is not set
    - Apply this patch
    - Run:
     k$ prove t/db_dependent/Reserves.t
    => SUCCESS: Tests pass!
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 040d5c57e7fb8976588c25d24ba288f52a83af95
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 7 17:05:25 2018 -0300

    Bug 19066: Tests for AddRenewal AddIssuingCharge and ChargeReserveFee
    
    This patch adds some tests that cover functions changed by this
    patchset. A bug in ChargeReserveFee is highlighted.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 485584d2ccb05a25384aa28431b11f01a5ad22b0
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Nov 2 14:38:56 2018 -0400

    Bug 19066: (QA follow-up) Remove bad and unecessary test
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 258720579bff87b4e4b5386261f9a7669068a0fd
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 2 15:10:44 2018 +0000

    Bug 19066: (QA follow-up) Add handling in add_credit
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 897ddc82b34b18576e4a2dd459691111836d6357
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Aug 9 16:55:56 2017 +0000

    Bug 19066: Add branchcode to accountlines
    
    For the purposes of statistics, it appears that it would help many
    libraries to have branchcode recorded in the accountlines table. For
    payments, the field would contain the code for the branch the payment
    was made at. For manual invoices, it would be the code of the library
    that created the invoice.
    
    Test Plan:
    1) Apply this patch set
    2) Create and pay some fees
    3) Note the branchcode for those fees and payments is set
       to your logged in branch
    
    Signed-off-by: Lisette Scheer <lisetteslatah@gmail.com>
    
    Signed-off-by: Lisette Scheer <lisetteslatah@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bf75f243512364a6b83ebe766105bf444bc43097
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Aug 9 09:50:21 2017 -0400

    Bug 19066: Update Database
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Squashing for cleaner history
    
    Bug 19066: (QA follow-up) Move db update to perl
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fb98450172cbd446768375cd9374962447df7cfe
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 2 20:55:54 2019 +0000

    Bug 21802: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0a68a662ee4b7b2aebdb313ee33f9d9ca54e2c22
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sun Dec 16 12:58:14 2018 -0300

    Bug 21802: Align fieldset with accordion headers when editing notice's template
    
    Test plan:
    Regenerate the css using `yarn css`
    Edit a notice's template and confirm that the fieldsets are aligned with
    the accordion headers
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d44a42e417b563f501f038cc5226eda0f5fb3ca5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Dec 12 12:22:47 2018 -0300

    Bug 21990: Replace dialog .error with .alert
    
    <div class="dialog error"> will display a div without background color, the correct class is "dialog alert".
    
    https://wiki.koha-community.org/wiki/Interface_patterns#Error_messages
    
    Test plan:
    Hit /cgi-bin/koha/acqui/parcel.pl
    Notice the background color change with and without this patch
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 54e295e4c14e3d2b3959e3185a54447a9b90d945
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Dec 20 19:55:46 2018 -0300

    Bug 22034: Handle default framework for MARC view with framework
    
    To test:
    
    - Create a record in any framework that is not default
    - Search for the record in your catalog
    - Switch to the MARC tab
    - Change framework pull down to default on top
    - Note the page reloads and the framework stay default
    - Verify it works for other frameworks
    
    Also test the "labeled MARC" view (you will need the pref viewLabeledMARC turned on)
    
    Signed-off-by: Nazlı Çetin <nazli@devinim.com.tr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ad0575ab80ab550ac936ece84e08cdcf458c9159
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Dec 6 16:27:31 2018 -0300

    Bug 21578: Terminology changes in patron's account section (staff)
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 464bf007d60bb647ce3dda183134363962c76209
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Dec 14 17:34:59 2018 -0300

    Bug 22007: Generated with add_missing_filters.pl
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a8fa74ab02d037d059e4bf78b74232aeba219212
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Dec 14 17:34:52 2018 -0300

    Bug 22007: Also handle Price and HtmlTags
    
    Those 2 filters should return safe output as well
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 912fb42458a422248986c74fd8a1fd92df531fb5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Dec 14 17:29:18 2018 -0300

    Bug 22007: Handle safe filtered output (KohaDates)
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5d49ea039c981ee73085c70b326ea47c29bee0ba
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Dec 14 17:20:52 2018 -0300

    Bug 22007: Remove html filters when KohaDates called with a parameter
    
    Bug 13618 took care of the KohaDates output but not if it is called
    with a parameter (eg. [% var | $KohaDates with_hours => 1 %]).
    
    We could avoid unnecessary processing by removing the extra html filter.
    
    Patch generated with the following command:
      % perl -p -i -e 's/KohaDates([^%\|]*)\s?\|\s?html\s?/KohaDates $1/g' **/*.inc **/*.tt
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a440f6a4102f73073c76a31ad2d015be2af8ef48
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Dec 5 18:17:14 2018 -0300

    Bug 21928: (bug 18789 follow-up) Fix CircAutoPrintQuickSlip=clear
    
    caused by commit 105b3e10e8b31b7de6d733e676c3e661a39b1280
    
    bug 18789
    
    To recreate:
    1 - Set CircAutoPrintQuickSlip to 'clear'
    2 - Bring up a patron in circulation
    3 - Click in checkout box and hit enter to submit empty
    4 - Patron is partially loaded
    5 - Apply patch
    6 - Restart all the things
    7 - Test again
    8 - Patron is cleared correctly
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e1ae3036e63db085a0e23d1619c44b0b8e91673a
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Oct 23 00:06:27 2018 +0000

    Bug 16939: (follow-up) Adding missing bracket
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 364c0d6bc56fc1cb5e6721e2ae3e62be98109a60
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue May 29 18:09:44 2018 +0000

    Bug 16939: (follow-up) Correction for orderreceive.tt
    
    This patch makes a change to orderreceive.tt which corresponds to the
    changes made in the previous patch.
    
    To test, apply the patch and set the AcqCreateItem system preference to
    "receiving an order."
    
    - Go to Acquisitions -> Vendor -> Receive shipment.
    - Submit the "Receive a new shipment" form.
    - Click "Receive" for an order line.
    - Fill out the item form and click "Add item."
    - The table of existing items should display correctly, with a single
      "Actions" column containing an "Edit" and "Delete" button.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f3011690fc24dae2c39c2afd4d13afb43ebaecc4
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Jul 19 05:03:45 2016 +0000

    Bug 16939: Making all 'add to basket' actions buttons
    
    Edit: Fixing 'clas' typo in addorderiso2709.tt
    Edit: Adding actions class to td
    Edit: Fixing js error
    Edit: circ/reserveratios.tt updated so that the plus icon doesn't show
          if there is no link
    Edit: fixing logic in circ/reserveratios.tt
    Edit: merge conflicts
    Edit: updating buttons to bootstrap 3, which i believe fixes the problem
          in comment 16
    
    To test:
    
    1) Go to Acqui -> find a vendor -> view a basket
    2) Click add to basket -> fill in 'for an existing record' and hit search
    3) 'View MARC' and 'Order' buttons should show under an Actions column with appropriate icons
    4) Click Order
    5) Click add item when you are redirected to the New order page (no need to fill in any details)
    6) Confirm that 'Edit' and 'Delete' buttons now show under an Actions column with appropriate icons
    7) Go back to your basket and click add to basket -> from a subscription (we are skipping from a suggestion because this already has a button before my patch)
    8) Confirm that 'Order' shows as a button with appropriate icon
    9) Go back to your basket and click add to basket -> from an external source
    10) fill in any fields and click search to bring up results
    11) 'Order' should now show as a button with appropriate icons. MARC and Card preview have been moved into a dropdown menu - confirm this works as expected. Links have not been changed when clicking on a row
    12) Go back to your basket and click add to basket -> from a staged file
    13) 'Add orders' should now show as a button with appropriate icon
    14) Go back to your basket and click add to basket -> from titles with highest hold ratios
    15) 'X to order' should now show as a button with appropriate icon
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: Nicole C Engard <nengard@bywatersolutions.com>
    
    Followed test plan, works as expected.
    Signed-off-by: Marc Véron <veron@veron.ch>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 94bdfc2beee9da1ed3b8159e211272a42d01e4fa
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 29 12:15:33 2018 -0300

    Bug 21909: Add return type explanation to POD
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d3ff671f215398ad51a6ce550c33c0c6ca3aa30a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 29 12:10:21 2018 -0300

    Bug 21909: Make Koha::Account::outstanding_* preserve context
    
    This patch modifies the methods so they preserve the caller's context
    (list and scalar).
    
    To test:
    - Apply the first patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Account.t
    => FAIL: outstanding_credits and outstanding_debits tests fail
    - Apply this patch
    - Run:
     k$ prove t/db_dependent/Koha/Account.t
    => SUCCESS: We are so happy now :-D
    - Sign off :-D
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 85c474e59761e2bb27d9921180752249b5edca9e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 29 12:08:03 2018 -0300

    Bug 21909: Unit tests
    
    This patch introduces regression tests for the behaviour to be
    introduced. Both outstanding_credits and outstanding_debits methods
    should return a Koha::Account::Lines object in scalar context, and a
    list of Koha::Account::Line objects in list context.
    
    To test:
    - Apply this patch
    - Run
      $ kshell
     k$ prove t/db_dependent/Koha/Account.t
    => FAIL: The current behaviour doesn't match the described
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8748d801099e1c4e4f8f845a69d1cdba4a21e7aa
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Dec 11 12:28:53 2018 -0300

    Bug 21817: Fix 2 failing tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ca124b5c14a3f0a34fafe307fec9ade4008eaa41
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Nov 12 18:21:58 2018 -0300

    Bug 21817: Centralize the mock of userenv from tests
    
    This patch adds a new method mock_userenv from t::lib::Mocks in order to
    simplify the mock of the userenv.
    
    Test plan:
    prove all the test files modified by this patch
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3f734900f0a86e5478afc22cb77b493500e998e9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Dec 26 12:25:54 2018 -0300

    Bug 21547: (follow-up) Rely on Koha::Patron->set_password checks
    
    This patch makes the controller just call $patron->set_password and use
    the exceptions it might raise instead of manually checking the passwor
    strength.
    
    No behaviour change should be expected. It also removes some leftovers.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 085cfc6bca30718a6d719d645709097cf86f01db
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Oct 11 12:00:31 2018 +0200

    Bug 21547: Use set_password in opac-passwd and remove sub goodkey
    
    Remove sql statement to change password by calling set_password.
    Remove sub goodkey by calling C4::Auth::checkpw_hash.
    Adding the scalar before param Oldkey (from bug 21036).
    
    Rebased on top of 21178 (using set_password instead of update_password).
    
    Test plan:
    Try to change password in OPAC with good and bad pw.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 66f1605c59763613a4e955fd259a845e4fc06324
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Wed Oct 31 10:27:41 2018 +0000

    Bug 21754: Automatically clean up outstanding transfers on lost items
    
    This is an alternative to bug 21732 as transfers are automatically cancelled on marking an item lost, and the items holding rbanch is set to the transfers source ('from') branch.
    
    When an item is marked as lost, the routine should also clean up any
    outstanding transfers.
    
    Also added tests to t/db_dependent/Circulation.t which check:
    * If transfer is automatically deleted when item is marked as lost
    * If the items holdingbranch automatically changes when item with
    transfers on it is marked as lost.
    
    Test plan:
    1. Find a item which is in transfer, i.e. find an item with the text in
    the 'Status' field of the table in detail.pl that indicates it is in
    transfer
    2. Set the item to 'Lost' either by clicking on Edit->Edit items from
    the detail.pl page
    OR
    clicking on the Items tab on the left side of the detail.pl page
    3. Notice that the transfer is now cancelled for the item and the items
    holdingbranch is the transfers source ('from') branch
    4. Run t/db_dependent/Circulation.t
    
    Sponsored-by: Brimbank Library, Australia
    Signed-off-by: Andreas Hedström Mace <andreas.hedstrom.mace@sub.su.se>
    (fixed the introduction of a whitespace line and removed a double
    declare warning from the new tests as part of QA)
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3c14a0d3526351fde4d785b5f60117f62edea5a9
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Sat Dec 1 10:05:38 2018 +0000

    Bug 21929: Typo in orderreceive.tt
    
    lass -> class
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a200aafd3b181b736dc288e208730a50372fbfd8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 16 11:51:40 2018 -0300

    Bug 21571: Make ACCTDETAILS translatable
    
    This patch makes the notice "ACCTDETAILS" translatable.
    
    Test plan:
    1. Switch on TranslateNotices and AutoEmailOpacUser
    2. Define templates for different languages for ACCTDETAILS
    3. Create a new patron, define an email address, userid and password.
    Also pick a different "preferred language" then the default value
    4. You should receive the email with the correct, translated, email.
    
    Signed-off-by: Hugo Agud <hagud@orex.es>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a5eaa7a37d38f4de623918d498d56a2e7bd2bcec
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 15 18:56:00 2018 +0000

    Bug 21844: Include itemcallnumber in lost fine description
    
    To test:
     1 - Make sure WhenLostChargeReplacementFee is set to charge
     2 - Find an item with a replacement cost (or default) and a call number
     3 - Checkout the item to a patron
     4 - Mark the item lost
     5 - View the fine - the description includes title and barcode
     6 - Apply patch
     7 - Check the item in
     8 - Check it out again
     9 - Mark it lost
    10 - Note the fine includes the callnumber
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2e5e127b085b0cb6c795a31f16b3a36bad0ebca1
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Oct 27 11:49:11 2018 +0000

    Bug 21693: Make page title consistent with other pages
    
    For some reason we use 'Home' in the bread crumbs, but
    'Koha' as starting point in the page title.
    
    Changed to make consistent with other pages in Circulation.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dc7e886379b7035ae9dfc650d995f1e475ca1dff
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Oct 26 16:15:39 2018 +0000

    Bug 21693: Clean up checkout notes template
    
    This patch modifies the checkout notes template to help compliance with
    coding guidelines and interface patterns:
    
     - Convert to Bootstrap grid
     - Improve DataTables configuration
     - Put buttons into a toolbar and move above selection links
    
    Also corrected: Minor markup error in circ-nav.inc
    
    To test, apply the patch and enable the AllowCheckoutNotes system
    preference. Add a few checkout notes via the OPAC.
    
     - Go to Circulation -> Checkout notes.
       - Confirm that the page looks correct at various browser widths.
       - Confirm that the first and last columns of the table of notes are
         not sortable.
       - The table should be sorted by default by title.
       - Title sorting should ignore articles "a," "an," and "the."
       - Test with the CircSidebar preference both on and off.
         - With CircSidebar turn on, the checkout notes menu item in the
           left hand sidebar should show a count of checkout notes.
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d9ca9f699bdf1718e3923c0cbc6b11c67512abc1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Oct 26 18:36:59 2018 +0000

    Bug 21695: Clean up access files template
    
    This patch modifies the access files template to help
    compliance with several coding guidelines:
    
    - Bootstrap grid
    - Improve DataTables configuration
    - Move date formatting from the script to the template
    - Markup corrections
    
    To test you must modify koha-conf.xml to contain something like the
    following:
    
    <access_dirs>
        <access_dir>/tmp/koha-public</access_dir>
    </access_dirs>
    
    Make sure the directory exists and contains multiple files.
    
     - Go to Tools -> Access files
     - Confirm that the page looks correct and the layout adjusts at various
       browser widths.
     - Confirm that DataTables functionality works correctly, including
       correct sorting by date.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d153e728bb8fa677153281b9bdf8325e76358b4b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 8 17:53:51 2018 +0000

    Bug 21795: Switch two-column templates to Bootstrap grid: Notices and slips
    
    This patch updates notices and slips templates to use Bootstrap grids
    instead of YUI.
    
    This patch also removes obsolete "text/css" attributes from <style> tags
    in the modified templates.
    
    To test, apply the patch and go to Tools -> Notices and slips. Test that
    these pages look correct and adujst well to various browser widths.
    
     - The main page listing notices and slips
     - The add/edit form
     - The notice preview modal available when editing CHECKIN, CHECKOUT and
       HOLD_SLIP.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e91393988d15bd2bf0954dd8de209edf8b7f21a1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 8 16:37:19 2018 +0000

    Bug 21790: Switch error page template to Bootstrap grid
    
    This patch updates the error page template to use a Bootstrap grid
    instead of YUI.
    
    To test, apply the patch and disable Plack and restart Apache if
    necessary.
    
    Navigate to a page in Koha which doesn't exist. The error page should
    look correct and adapt well to various browser widths.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 727f33d858e50d26dfb60cec516533d0c4107d2a
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Dec 16 01:25:44 2015 +0100

    Bug 21789: Example usage of I18N Template::Toolkit plugin
    
    Signed-off-by: Marc Véron <veron@veron.ch>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ccbed38e213de6a6b9331fc34d2f872bf5ab5fc7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Dec 20 18:55:34 2018 -0300

    Bug 22033: Remove related_resultset from the list of available methods
    
    It is not covered by tests.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5e17032700790032088fe3f2209c3d173e77d540
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Nov 16 09:41:04 2018 +0100

    Bug 21848: Remove Text::Unaccent from C4::Members
    
    At refactoring time the unac_string call was moved to Koha::Patron.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3e731ce09433cf2121332f5356b27f90ccb34654
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Dec 13 13:07:48 2018 +0100

    Bug 21848: Resolve unac_string warning from Circulation.t
    
    Just add "use utf8".
    
    Test plan:
    Run Circulation.t; verify there are no warnings.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e6cec898e078fc04d87e2faf26badba10fa6f348
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Dec 18 18:30:28 2018 +0000

    Bug 22022: Correct ordering for authorised values
    
    To test:
    1 - Add a shelving location with code "ZZZZ" and lib "Awake"
    2 - Load some items in batch modification
    3 - Note shelving location dropdown is wrong
    4 - Apply patch
    5 - Reload page
    6 - Note order is correct
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f56dd2e829569cf40157347640fdcb203890e757
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Dec 19 16:31:25 2018 +0000

    Bug 22024: DBRev 18.12.00.003
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fe147e9df64fab7cbe1fdbc859b72a4c396fae52
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Dec 19 13:43:32 2018 -0300

    Bug 22024: Fix number of fields in uk-UA
    
    ERROR 1136 (21S01) at line 23: Column count doesn't match value count at row 22
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c904db832ec4ee70bfb58ff918564a2502a53937
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Dec 18 22:43:05 2018 +0100

    Bug 22024: Correct new installations with missing data
    
    For a new installation the data in the class_* will be
    missing as class_sources.sql couldn't be executed. It will
    fail with:
    
    DBD::mysql::st execute failed: Cannot add or update a child row:
    a foreign key constraint fails (`koha_kohadev`.`class_sources`,
    CONSTRAINT `class_source_ibfk_2` FOREIGN KEY (`class_split_rule`)
    REFERENCES `class_split_rules` (`class_split_rule`)) at /usr/share/perl5/DBIx/RunSQL.pm line 273.
    
    As this might have been missed and the web installer can still
    be completed, this patch checks for the tables being empty and
    adds the default data if they are.
    
    To test:
    - Without the patch
    - Run the de-DE or another translated installer
    - Verify the error is shown
    - Complete the installer
    - Verify class_sources table is empty
    - Apply patches
    - Run the database update
    - Verify data classification sources, filing rules, and
      slitting rules are now complete
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3e7fc75f50a46d03983db3763ad37aaf5b49983c
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Dec 18 22:22:12 2018 +0100

    Bug 22024: Update translated web installer files with new class splitting rules
    
    When adding the new splitting rules for classification sources
    with bug 15836, we missed updating the translated installers.
    
    This has the danger of data missing for new installations already
    set up with 18.11.
    
    This patch corrects the installer files.
    
    To test:
    - Verify the class_sources.sql installs correctly for all languages
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 674a34471f6eddfc849c480c557f6576f8572516
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Dec 5 16:23:24 2018 -0300

    Bug 21956: (bug 21775 follow-up) Use set_preference to reset the value
    
    Test plan:
    Set AudioAlerts to 0
    Prove t/db_dependent/selenium/regressions.t
    => Without this patch the value of the pref is not reset to 0
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f28a97034dd06b0f2b0e2e5fc56bea3878ffc717
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Dec 11 15:15:57 2018 +0000

    Bug 21984: Pass param_name in pagination URL
    
    To test:
     1 - Create a report like:
        SELECT <<cat>>,<<dog>>,<<cat>> FROM items
     2 - Run the report, enter 'CATS' and 'DOGS'
     3 - Get results LIKE "CAT | DOG | CAT"
     4 - Try to go to page 2
     5 - FAIL! (last column is blank)
     6 - Apply patch
     7 - Run the repot, enter 'CATS' and 'DOGS'
     8 - Verify first page looks right
     9 - Go to page 2
    10 - Results are correct!
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: “Lucas Gass” <lucas@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5ea668056a6222c88c37a8ba5ee638ad827ec284
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Dec 19 16:12:52 2018 +0000

    Bug 21065: DBRev 18.12.00.002
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6d44f9dac8235dfe0259ea5b935c5a8908d2e441
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Dec 18 13:52:15 2018 +0000

    Bug 19850: (QA follow-up) Make the update idempotent
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    https://bugs.koha-community.org/show_bug.cgi?id=21065
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7f322d7ff87285cd0bc1370a0438f2bc8bb7c084
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Dec 14 12:49:44 2018 -0300

    Bug 21065: Set ON DELETE SET NULL on accountlines.borrowernumber
    
    Note: Why do we have ON UPDATE SET NULL on accountlines.itemnumber?
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 457e560a06e00d861ec88bc7354969aac7ab9099
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Dec 14 12:48:09 2018 -0300

    Bug 21065: Add koha_object(s)_class methods to accountline
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 09ef91653bc8e0349d4e8613482251d7e3c165b5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Dec 14 12:47:11 2018 -0300

    Bug 21065: Add tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 64242cabea21e9ee7673666cad88eb403d1053d6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Dec 7 14:14:06 2018 -0300

    Bug 14334: Remove AutoCommit from tests
    
    And use a DBIx transaction instead.
    
    Test plan:
    prove that the test files modified by this patch are passing
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1e09fefcb05abf6496c89fe8115f0437a26b9490
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Dec 13 15:35:59 2018 +0100

    Bug 21880: (follow-up) Add some uri filters
    
    Theoretically, source needs a filter.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8bf032f512687cfe7ddc3748675c54f18b08c010
Author: Andreas Roussos <arouss1980@gmail.com>
Date:   Fri Nov 23 19:30:23 2018 +0200

    Bug 21880: "Relationship information" disappears when accessing paginated results in authority searches
    
    When linking authorities with authorities, if you perform a
    search that returns >20 results, the "Relationship information"
    section disappears when you click on the pagination hyperlinks.
    
    This patch fixes that.
    
    Test plan:
    1) In the Authorities module, edit an authority (or create a new
       one) and try to link it with another authority (via UNIMARC
       500$a, for example).
    2) When the authority finder comes up, search for something that
       will yield more than 20 results, then click on the pagination
       links -- notice how the "Relationship information" section is
       no longer visible.
    3) Apply the patch (and restart Plack/memcached, if necessary).
    4) Repeat step 2) -- "Relationship information" is now persistent.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d561273ef84f4bc2534ac63d0f8793c9eb2a7fb9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Dec 12 11:05:19 2018 -0300

    Bug 21986: Do not escape quotation marks when cataloguing
    
    In several places we escape quotation marks using
      $value =~ s/"/&quot;/g;
    All the occurrences are wrong and must be removed.
    Most of them are leftover of bug 11638 (Remove HTML from
    addbiblio.pl), which removes the construction of html from pl scripts.
    
    The problem has been highlighted by bug 13618, I did not track down why
    the issue did not exist before (?)
    
    Test plan:
    0/ Use strings with quotation marks, like:
    'Fiddle tune history : "bad" tunes'
    You can also use other html characters to make the tests more complete,
    like 'Fiddle tune history : <"bad" tunes>'
    1/ authorities/authorities.pl
    a. Edit an authority filling different fields with quotation marks
    b. Edit it again
    => The display (inputs' values) is wrong, if you save the escaped quotes
    will be inserted
    2/ cataloguing/addbiblio.pl
    Same editing a bibliographic record
    3/ cataloguing/additem.pl
    Same editing items
    4/ members/memberentry.pl
    Edit a patron's record and fill some fields with quotation marks
    + fields borrowernotes and opacnotes
    => The quotes are inserted directly in DB (escape is done before the
    insert!)
    5/ opac/opac-review.pl
    For QA only: $js_ok_review is never used
    6/ tools/batchMod.pl
    For QA only: $value is always undefined at that point
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cade3103ecd4008ccb0bb82e1fd77497894f68f5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Dec 7 10:26:02 2018 -0300

    Bug 21973: Do not url escape casServerUrl
    
    It is already escaped correctly in
    C4::Auth_with_cas::_url_with_get_params using URI::Escape::uri_escape
    
    Note that shibbolethLoginUrl is not and must be url escaped in template
    ("be consistent, they said")
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e29f0bce403d5d7c1f292d57b105e0a2ab31e01d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Dec 7 16:49:00 2018 -0300

    Bug 21931: Do not reset the ES mapping on 3.23.00.050
    
    This update DB entry uses DBIx schema which does not make it crashes if
    the table structure is changed.
    Which happens on 18.06.00.054, that added search_field.weight
    
    The entry 3.23.00.050 fails with
      Unknown column 'me.weight' in 'field list'
    
    This patch removes the reset of the mapping and display a warning to
    tell the administrator the mapping must be reset/inserted
    
    Test plan:
    Use a 3.22 dump and upgrade it
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 702c727470d332615fb1428c55f503183935f29d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Dec 12 16:16:50 2018 +0000

    Bug 21991: Pass param names to report limit tool
    
    To test:
    1 - Define a report like:
    SELECT barcode, itemnumber
    FROM items
    WHERE (homebranch = <<Branch|branches>> AND 0 ) OR
    <<Branch|branches>>=<<Branch|branches>>
    2 - Run it, you get results
    3 - Select 'Rows to display' 50
    4 - No results
    5 - Apply patch
    6 - Run report
    7 - Change display rows
    8 - Results remain!
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3a7053346c760144a8d7fe595d52806f739ead64
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Dec 6 10:07:18 2018 -0300

    Bug 21950: Remove filtering for query_cgi and limit_cgi
    
    We must not escape query_cgi and limit_cgi template-side, they are already
    escape properly from build_query_compat using uri_escape_utf8.
    
    To fix further problems we should replace all occurrences to make things
    clear (I decided to keep the html filter so far, which did not hurt, but uri or url do)
    
    Same patch as the following commit will be provided
    commit 2fc599c0893620c395ca0492c9d9e3c860c8f951
        Bug 21526: Fix search result pages (url vs uri vs raw)
    
        query_cgi is uri_escaped from the pl, so we should displayed as raw
    
        Test plan:
        Use wide characters ❤
        Search, filter, facets, search history, rss (both interfaces)
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dbff938c7ff7eb277c6b94b56b5f03d3348f0017
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Dec 6 15:59:10 2018 -0300

    Bug 21969: Fix Koha::Account->outstanding_* matching the opposite on pathological cases
    
    This patch makes outstanding_* methods be safe regarding pathological
    account lines that get converted into another type because of the value
    of amountoutstanding
    
    To test:
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Account.t
    => FAIL: Tests fail because pathological account lines are wrongly
    picked.
    - Apply this patch
    - Run:
     k$ prove t/db_dependent/Koha/Account.t
    =>SUCCESS: All green!
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ce160066a2b06742e348011324620c8e58b26f40
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Dec 6 15:37:37 2018 -0300

    Bug 21969: Regression tests
    
    This patch introduces regression tests for Koha::Account::outstanding_*
    methods so they don't pick wrong lines when amountoutstanding matches
    what we are looking for (i.e. negative for credits and positive for
    debits).
    
    To test:
    - Apply this patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Account.t
    => FAIL: Tests fail because pathological account lines are wrongly
    picked.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 30874dea519d379134174cf9c5fd5051588a8629
Author: Mark Tompsett <mtompset@hotmail.com>
Date:   Wed Dec 5 03:44:25 2018 +0000

    Bug 21947: Address other misordered FILTER lines
    
    As per comment #3, this patch changes the order for all
    the filters found with the recommended git grep.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d90d5d2254d55752bf1e524885284ba8e3e86f60
Author: Mark Tompsett <mtompset@hotmail.com>
Date:   Tue Dec 4 18:58:17 2018 +0000

    Bug 21947: Swap the filter order
    
    TEST PLAN
    ----------
    1) start your kohadevbox
    2) cd kohaclone
    3) git checkout -b bug_21947 origin/master
    4) git bz apply 21947
    5) reset_all
    6) log in to staff client and add a 500$a with lots
       of blank lines between strings with some HTML.
    7) look at the opac record Title notes tab.
       -- does it have <br>-mess? Should not.
    8) repeat steps 5-7 on master, and you'll see
       a <br>-mess.
    9) run qa test tools
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e75c869785d09e6a2b1eb8dbe47cca868fb86105
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Dec 10 16:45:00 2018 -0300

    Bug 21759: Avoid manually setting amountoutstanding in _FixAccountForLostAndReturned
    
    This patch changes the behaviour in the _FixAccountForLostAndFound
    method.
    
    The method will now add the amountoutstanding value for the lost item
    fee to the CR credit to be generated. This means that:
    - If there's some remaining debt, the same amount  will be added to the
      CR credit and used to cancel that debt. The final amountoutstanding
      will be the same as before, but an offset will be generated as
      required.
    - If the line was written off, the behaviour remains unchanged, so no
      offset.
    - If the line was payed and/or written off in full only the payments are
      refund, preserving the current behaviour.
    
    To test:
    - Apply the regression tests patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/Circulation.t
    => FAIL: Tests fail because the behaviour is not correct
    - Apply this patch
    - Run:
     k$ prove t/db_dependent/Circulation.t
    => SUCCESS: Tests now pass!
    - Sign off :-D
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1622f0f609fbf7862c481eeec98cd1668b09b145
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Dec 10 16:38:05 2018 -0300

    Bug 21759: Regression tests
    
    This patch tests for a new behaviour in the _FixAccountForLostAndFound
    method.
    
    The method will now add the amountoutstanding value for the lost item
    fee to the CR credit to be generated. This means that:
    - If there's some remaining debt, the same amount  will be added to the
      CR credit and used to cancel that debt. The final amountoutstanding
      will be the same as before, but an offset will be generated as
      required.
    - If the line was written off, the behaviour remains unchanged, so no
      offset.
    - If the line was payed and/or written off in full only the payments are
      refund, preserving the current behaviour.
    
    Only changes to the 'remaining debt' use cases on this tests are
    expected.
    
    To test:
    - Apply this patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/Circulation.t
    => FAIL: Tests fail because the behaviour is not correct.
    
    Note: some tests order changes are introduced to avoid calling
    discard_changes twice
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9a2bd027e5d2380b39776059066d8f06b42d68dd
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 2 19:48:02 2018 +0000

    Bug 21465: Don't throw duplicate userid error if userid belongs to the matched patron
    
    To test:
     1 - Export your patrons
        a - Create a report 'SELECT * FROM borrowers'
        b - Run and save the report as csv (check your delimiter)
        c - Delete the borrowernumebr column
     2 - Use the Patron Import tool to import the csv from above
     3 - Set matching to 'cardnumber'
     4 - Set 'If matching record is already in the borrowers table:' to
    Overwrite
     5 - Import
     6 - None are import because of matchign userid (their own)
     7 - Apply patch
     8 - Repeat
     9 - Patrons are successfully overwritten
    10 - prove -v t/db_dependent/Koha/Patrons/Import.t
    11 - prove -v t/db_dependent/Koha/Patrons.t
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a02b322fe7f6a35c0613a33a2e266bb79a721260
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Dec 11 20:31:19 2018 +0000

    Bug 21961: DBRev 18.12.00.001
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit da5e41f6def8a5cbafc9303b0fff35cb13e50e72
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Dec 6 12:42:12 2018 +0100

    Bug 21961: Fix typo in manage_didyoumean permission
    
    The typo in the installer files will cause problems on new
    installations as the code for the permission is wrong.
    
    This means that on new installations the Did you mean? section
    on the administration page won't show up.
    
    In order to fix this, we need to correct the code in
    permissions, but also the permissions for users who
    this permission has been given to.
    
    To test:
    - Start without the patch
    - Use a new installation with the permission typo
    - Log in as superlibrarian
    - Verify that the "did you mean?" configuration page
      is not visible
    - Create another staff user with permission to access
      staff and manage_didyoumean checked
    - Verify configuration page remains invisible
    - Apply patch and run database update
    - Check both users again, the config page should now sohw
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 875f3162c8008ef288adfcd18ada490cf06ecc15
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Dec 7 10:19:44 2018 +0100

    Bug 21908: (QA follow-up) Remove useless parentheses in query
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a1b08269a7031417312e6265ace9ef5b995933fa
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Nov 29 10:50:06 2018 +0100

    Bug 21908: Add DISTINCT biblionumber to rebuild_zebra.pl
    
    Zebra indexing script misc/migration_tools/rebuild_zebra.pl as a table arg to allow filtering.
    When using table=items we should use DISTINCT(biblionumber) to avoid indexing several times the same biblio record when it has several items.
    This patch adds DISTINCT(biblionumber) in all cases it does not harm if its already unique.
    
    Test plan :
    1) Be sur you have a biblio record with biblionumber 1 with 3 items
    2) Run misc/migration_tools/rebuild_zebra.pl -v -b --table items --where="biblionumber=1"
    3) Without patch you see "Records exported: 3", with patch only one
    4) Check indexing works well
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c36597bc0c72cc31249c02af5aaaf1c1f977ee50
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Nov 29 10:15:00 2018 +0100

    Bug 21908: Add biblio_metadata to rebuild_zebra.pl tables
    
    Zebra indexing script misc/migration_tools/rebuild_zebra.pl as a table arg to allow filtering.
    It is missing biblio_metadata to allow filtering on MARCXML with ExtractValue.
    
    Test plan :
    1) Be sur you have a biblio record with biblionumber 1
    2) Run misc/migration_tools/rebuild_zebra.pl -h
    3) You see : --table specify a table (can be items, biblioitems, biblio, biblio_metadata) to retrieve biblionumber to index.
    4) Run misc/migration_tools/rebuild_zebra.pl -v -b --table biblio_metadata --where="biblio_metadata.biblionumber=1"
    5) Check you dont have SQL errors
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a2b5407ba5c74f826c1665c1a2ef1ff6d52689fd
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Nov 16 07:01:39 2018 -0500

    Bug 21849: Two useless Koha::Account::Offset->new calls need attention
    
    Came across those calls in bug 20598 in _FixOverduesOnReturn
    
            Koha::Account::Offset->new(
                {
                    debit_id => $accountline->id,
                    type => 'Forgiven',
                    amount => $amountoutstanding * -1,
                }
            );
    
    This does nothing if you don't store data.
    
    Test Plan:
    1) Apply this patch
    2) Set up 2 items with overdue fines
    3) Return one with dropbox mode
    4) Note the dropbox account offset is created
    5) Return one with full fine forgiveness
    6) Note the forgiven account offset is created
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2dbaaa300877ff6d96ae84b5a703753d97b6c340
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Nov 16 09:54:39 2018 -0500

    Bug 21849: Add unit tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3adf7708d544338250703165fe7e87f2690d8639
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Dec 6 12:42:45 2018 +0000

    Bug 21962: Fix authority search using 'all'
    
    To test:
    1 - Set search engine to Zebra
    2 - Have some authorities and indexes up to date
    3 - Search authorities with option 'search entire record'
    4 - No results
    5 - Apply patch
    6 - Run unit tests, they pass!
    7 - Repeat search
    8 - Results!
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 39c93e87f648978ec7907220710efaf64e556ea0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Dec 6 12:41:41 2018 +0000

    Bug 21962: Unit tests
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 06e6378899631da162d57d477381782f3764ec89
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Dec 3 13:05:49 2018 +0000

    Bug 21405: Fix authorities pagination for Zebra and ES
    
    Bug 20261 introduced an error because search_auth_compat responded
    differently for ES and Zebra, now bug 19365 fixed the underlying
    difference. This patch restores previous code to fix pagination.
    
    Additionally we add a fix for 10000+ results in ES and remove a double
    import of C4::Auth
    
    To test:
     1 - Perform an authorities search with 1+ pages using Zebra
     2 - Page through results, note you are only offseeting by 1 each time
     3 - Perform an authorities search with 10,000+ results in ES
     4 - Click on the last page and get an error
     5 - Apply patch
     6 - Retry Zebra search
     7 - Results should paginate correctly
     8 - Clicking on last page should return last results
     9 - Retry ES results
    10 - Results should paginate correct
    11 - Clicking on last page should return last results
    
    Signed-off-by: Ere Maijala <ere.maijala@helsinki.fi>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 842a4befd342e46a0abda8300c339bb37f943c09
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Dec 7 09:43:58 2018 +0100

    Bug 21608: (QA follow-up) Rename revert button
    
    The label 'Revert found status' is replaced by 'Revert waiting status'
    or 'Revert transit status' depending on hold.found/hold.intransit.
    Note that hold comes from reserveloop in request.pl. The columns/keys
    found and intransit are just booleans.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0295fc2fc6062d9bb43e70bce5f5504b418f3629
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Nov 26 18:19:03 2018 +0000

    Bug 21608: Add value for 'rank-request' when dropdwn disabled
    
    When a field is disabled no value is submitted in the form - this was
    causing found holds to be reverted
    
    To test:
    1 - Apply all patches except this one
    2 - PLace several holds on one bib
    3 - Set at least one waiting or intransit
    4 - Making no adjustments hit "Update holds"
    5 - Waiting/intransit holds are all reset
    6 - Mark them waiting/intransit again
    7 - Apply this patch
    8 - Click 'update holds'
    9 - Found status is not accidentally reverted
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 65ff39f6a56e3bf252883b484f8892d6efcbeb9e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Nov 13 19:22:48 2018 +0000

    Bug 21608: Add ID and fix filters
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3c50245cfe272dc105033ff2e59f8e2689f7dd26
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Oct 25 11:45:25 2018 +0000

    Bug 21608: Disable dropdown for found holds - add button to revert
    
    This patch disables the dropdown for found holds, and adds a new button
    to revert the waiting status, setting the hold to priority 1
    
    Additionally we remove some changes from 19469 and update the JS to skip
    found holds when updating priority
    
    To test:
    1 - Find a record with multiple items
    2 - Place 4 holds (or more)
    3 - Capture one ohld as waiting, one as in transit
    4 - View the holds on the record - switch the last to priority one
    5 - Waiting and transit statuses get confused
    6 - Apply patch
    7 - Observe dropdown is now disabled for waiting holds
    8 - Confirm other holds operate as expected
    9 - Confirm 'Revert found status' resets hold
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Bug 21608: (follow-up) Use RevertWaitingStatus and do not alter _FixPriority
    
    [EDIT]
    Completely removed the changes to Reserves.pm by adding module prefix in
    the request.pl script.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e5585a10d5f2ee24cad94b2cf17df1ce13e8a01a
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Fri Nov 30 07:09:23 2018 +0000

    Bug 21911: Regression test
    
    This tests usuall cases, but note, that administrator could make a
    branch with code "%%%" or so, which this test does not cover, and some
    functionalities will not work in that case: opac limit override,
                    holdinbranch facet
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4c0682f5598d53992b6966a217b10f71a9cdaebb
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 29 14:17:37 2018 +0000

    Bug 21911: Fix OPAC scoping to work with new group system
    
    To test:
    
    0 - Apply patch
    1 - Create a library group enabled for opac search limits and add some
    libraries
    2 - Check the DB (or advanced search dropdown) to get the id of the
    group (using 7 as example below)
    3 - Add to apache configuration (OPAC virtualhost)
       SetEnv OPAC_SEARCH_LIMIT branch:multibranchlimit-7
       SetEnv OPAC_LIMIT_OVERRIDE 1
       RequestHeader add X-Koha-SetEnv "OPAC_SEARCH_LIMIT
       branch:multibranchlimit-7"
       RequestHeader add X-Koha-SetEnv "OPAC_LIMIT_OVERRIDE 1"
    4 - Ensure OpacAddMastheadLibraryPulldown is disabled
    5 - Restart all the things
    6 - Visit the opac
    7 - Perform a search, confirm it is scoped to the branches in the group
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 21372f78f825c0ec439ea4a7cfe7dff6656467b9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Dec 6 12:53:24 2018 -0300

    Bug 21910: Does not deal with call context, ->search does already
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ee96d18b2cee07aa64d5e68078bc898d36e22146
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Dec 6 12:52:54 2018 -0300

    Bug 21910: Remove duplicated lines in tests
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f3b8c66392098d69bca48bbf04b7e93fa2100280
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 29 14:11:36 2018 +0000

    Bug 21910: Koha::Library::Groups->get_search_groups should return the groups
    
    To test:
     1 - Add a library group (Admin->Library groups)
     2 - Enable use as an opac and staff search limit
     3 - Add some libraries to the group
     4 - Visit advanced search on staff and opac
     5 - Note the dropdown has as many empty rows as there are libraries
      in the group
     6 - Apply patch, restart all the things
     7 - Visit staff and opac advanced search
     8 - Confirm the group dropdowns are correct
     9 - Enable OpacMastheadLibraryPulldown
    10 - Ensure the dropdown on opac shows groups correctly
    11 - Confirm earchign groups works from all three locations
    12 - prove -v t/db_dependent/LibraryGroups.t
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 96b3889390f8efe9851aaa9c2cafa9e20bda3f43
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Nov 7 01:32:26 2018 +0000

    Bug 21778: Sort user list by surname,firstname unless user cannot manage patron lists OR edit patrons
    
    To test:
    1 - Create four users:
        1 superlibrarian (or with both edit patrons and manage patron
                lists)
        1 with only edit patrons and catalogue
        1 with only add to list and catalogue
        1 with catalogue but neither edit patrons or manage patron lists
    2 - Search patrons signed in as each user
    3 - Note different sorting
    4 - Apply patch
    5 - Try searching with each patron
    6 - Results should always be sorted by surname, firstname
    7 - Only in the case of neither extra permission should the checkboxes
    be absent
    
    Signed-off-by: Devinim <kohadevinim@devinim.com.tr>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4bf033c6d6b2a8bf4d5597b3fdf6355fb7060b60
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Dec 5 16:39:02 2018 -0300

    Bug 21955: Remove Cache::Memory as fallback for L2 cache
    
    If Plack is running with several workers we must not use Cache::Memory
    as L2 cache.
    
    If a value is set from a worker, it will not be available from other
    workers as the Cache::Memory instance is not shared (of course!)
    
    Moreover we now have Koha::Cache::Memory::Lite that does the same job,
    so we should not expect performance regressions by removing it.
    
    See also the email sent to koha-devel for more info
    http://lists.koha-community.org/pipermail/koha-devel/2018-December/045004.html
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b4580bff5ba7753f9db2513c3b87ecb9bba5258c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Nov 30 21:27:44 2018 +0000

    Bug 21896: RM follow-up - fix tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a3036b4760d80dd3d2188f5f95c6f4279ecef74b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Nov 27 20:28:29 2018 -0300

    Bug 18805: Add ability to use up account credits
    
    This patch introduces a new button in the 'Pay fines' tab  on the
    patron's account page. This button, labeled 'Normalize account' is only
    displayed when outstanding credits are available, that could be used to
    pay up existing debts.
    
    When clicking the button, the Koha::Account::normalize_balance method
    (bug 21896) is used for the purpose.
    
    To test:
    - Apply this patch (on top of 21896)
    - On a patron's 'Fines' tab, create a 'manual invoice' (maybe more than
      one)
    - Go to the 'Pay fines' tab
    => SUCCESS: No 'Apply credits' button is displayed.
    - On the 'create manual credit' tab, create a couple credits.
    - Go to the 'Pay fines'
    => SUCCESS: 'Apply credits' button is displayed
    - Click on 'Apply credits'
    => SUCCESS: Outstanding credits have been used to pay up debts.
    - Play with different options (credit excedes debts and vice-versa, they
            match, etc)
    => SUCCESS: They all work as expected
    - Sign off :-D
    
    Signed-off-by: Christopher Brannon <cbrannon@cdalibrary.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 99535e0fda491d2e1d704dd80f6613c0a7b8d06b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Nov 29 13:49:27 2018 +0000

    Bug 21896: (QA follow-up) Document and Test for FIFO behaviour
    
    A short dicussion lead to the decision to make it explictly clear that
    this method will implicitly apply credits against debits in a 'First In
    First Out' manor, meaning oldest outstanding debits will be paid off
    first.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4302bdda5c1c348e63003589795af3d37249c167
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 29 10:55:51 2018 -0300

    Bug 21896: (QA follow-up) Add tests for FIFO behaviour
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5fc2ccd7332ca53dfe07bd079cc446d1df923496
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 28 10:24:36 2018 -0300

    Bug 21896: (QA follow-up) normalize_balance -> reconcile_balance rename
    
    This was requested on the QA review and I agree.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1176947b42342ca725020455361fe092255e4d04
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Nov 27 19:34:29 2018 -0300

    Bug 21896: Add Koha::Account::normalize_balance
    
    This patch adds the normalize_balance() method to Koha::Account. Its
    purpose is to apply outstanding credits (i.e. manual ones ore remaining
    amounts like in the case of refunds) to outstanding debts.
    
    To test:
    - Apply this patchset
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Account.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Christopher Brannon <cbrannon@cdalibrary.org>
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 98bfe5d93cb6715b3095309082b241aaafe869da
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Nov 27 17:06:20 2018 -0300

    Bug 21896: Add unit tests for Koha::Account::normalize_balance
    
    Signed-off-by: Christopher Brannon <cbrannon@cdalibrary.org>
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 52b52ab896be2831309a6c3f3401a4118c7b0f33
Author: Nazlı Çetin <nazli@devinim.com.tr>
Date:   Thu Nov 29 14:50:29 2018 +0000

    Bug 7143: Update about page for Nazlı
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d0e72b437332b1ef0b3bcee98616ac8fef3f1e7a
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Nov 28 16:07:57 2018 +0100

    Bug 7143: Update OpenHub link for Fridolin Somers in about page
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5cacb502392aaebaef84339233227eb261d45277
Author: Pasi Kallinen <pasi.kallinen@joensuu.fi>
Date:   Wed Oct 31 14:04:33 2018 +0200

    Bug 21736: Allow translating the localization widget messages
    
    The widget used to translate the item type names to other
    languages has few javascript messages that cannot be translated.
    Add the mechanism to enable their translation.
    
    Test plan:
    
    1) Install and update a language
    2) Check the po-files, there's no msgid for
       "A translation already exists for this language."
    3) Apply the patch
    4) Install and update a language
    5) There should be a msgid for the one in 2, and
       couple other messages from localization.tt
    6) Translate those messages, update the translated templates
    7) Go to Administration -> Item types -> Modify item type ->
       Translate into other languages
       Add a new translation, check that the message given by the widget
       was in correct language.
    
    Signed-off-by: Pasi Kallinen <pasi.kallinen@joensuu.fi>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ed22c5fc0f65cc3736a8dbabb159b6b4b9b2f7c4
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Nov 28 13:41:53 2018 -0500

    Bug 21905: Plugin hook intranet_catalog_biblio_enhancements_toolbar_button incorrectly filtered
    
    The new plugin hook intranet_catalog_biblio_enhancements_toolbar_button is rendered useless due to the outputted html being escaped using the html filter. It should be using the raw filter instead.
    
    Test Plan:
    1) Enable plugins
    2) Download and install the latest version of the Kitchen Sink plugin
       https://github.com/bywatersolutions/koha-plugin-kitchen-sink/releases/download/v2.1.21/koha-plugin-kitchen-sink-v2.1.21.kpz
    3) Browse to catalogue/detail.pl for a record
    4) Note you see the raw html of the plugin output in the toolbar
    5) Apply this patch
    6) Restart all the things
    7) Reload the page
    8) Note the html is now correctly rendered as a button
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f44a4f1d2a13735c52948df29e773728d04ab991
Author: Andreas Roussos <arouss1980@gmail.com>
Date:   Thu Nov 22 15:55:25 2018 +0200

    Bug 21861: (follow-up) replace onchange() with jQuery equivalent
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3e1e1448e9132dce81571a4c3f31eb67816f14f9
Author: Andreas Roussos <arouss1980@gmail.com>
Date:   Sat Nov 17 20:03:36 2018 +0200

    Bug 21861: The MARC modification template actions editor does not always validate user input
    
    The MARC modification template actions editor does not validate
    user input when adding a conditional clause, making it possible
    to save a modification action without filling in all necessary
    fields.
    
    This patch fixes that.
    
    Test plan:
    1) Create a MARC modification template and add a new action,
       e.g. "Copy All field(s) 200$a to field 600$a".
       Add a condition ("if" or "unless") but leave the relevant
       field and subfield textboxes empty.
       Add "matches" or "doesn't match" as a comparison operator.
       Check the "RegEx" checkbox, leave the regex textbox empty.
    2) Click on "Add action" and notice how it accepts your input.
       Also notice the extra space in the Action column RegEx.
    3) Edit your modification action and notice the missing "m/"
       before the conditional RegEx.
    
    4) Apply the patch and hit CTRL-F5 to reload the relevant JS.
    
    5) Edit the modification action you added previously (or add
       a new one). Try leaving the textboxes mentioned above empty
       and then submit your changes. You should get pop-up windows
       informing you about missing fields.
    6) Now try typing a value in the conditional regex textbox and
       Update your action. In the Action column, there should be
       no spaces between the delimiters of the matching operator
       and the value you just entered.
    7) Edit your action: notice how the "m/" before the regular
       expression and the "/" after it are now showing correctly.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f99b9b5b3d88d8ed2eed0f64da0f5ef2a1483f3e
Author: Mirko Tietgen <mirko@abunchofthings.net>
Date:   Wed Nov 28 11:18:09 2018 +0100

    Bug 21897: Typo in postinst
    
    Small typo (missing space)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d8531b8fcbfc8fe09540ddb940149a7d7dbb4fb9
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Nov 28 10:05:19 2018 +0100

    Bug 21895: Fix path to POT file
    
    Signed-off-by: Mirko Tietgen <mirko@abunchofthings.net>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bd81f0418c14af82cdd9f4858c32b18d76a90b49
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Nov 28 00:51:45 2018 +0100

    Bug 21895: Fix translation for package install
    
    The string extraction process was not taking into account the fact that
    standard/package install have a completely different directory structure
    than the dev install
    
    This patch tries to keep the exact same behaviour for dev installs,
    while making it work for standard install by using opachtdocs,
    intrahtdocs, opacdir and intranetdir from $KOHA_CONF
    
    Test plan:
    1. Follow test plan in
    https://gitlab.com/koha-community/Koha/commit/d708255c7a4d981c7c7bdd0644a75202ec43b297
    2. Do a standard install and repeat step 1 on this new install
    3. If you know how to build the Debian package, build it, install it and
    verify that koha-translate works as expected
    4. prove t/LangInstaller.t
    
    Signed-off-by: Mirko Tietgen <mirko@abunchofthings.net>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1277351f1969ce32f06c6e1d5fc6bdc471dd5ac4
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 29 16:09:55 2018 +0000

    Koha 18.12 - ...and Steven!
    
    We are the Koha devs
    We’ll always save the day!
    And if sometimes we can’t
    The community finds a way!
    That’s why the people of this world believe in
    Users, Librarians, and Devs..
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ec0c6ef4145ff438f1d1a6da6da7616011ae2840
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Nov 27 12:04:15 2018 +0000

    Correct release notes encoding issues
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 22f2d9bec1bab5838dc8190e384f9f389260a5e9
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Nov 27 11:43:45 2018 +0000

    Update version in Koha.pm
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b11926cdd1c8729cf51a89f12f06421938f481eb
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Nov 27 02:00:58 2018 +0000

    Update release notes for 18.11.00 release
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 75a7eef8fbeba743f2394d4d603571a14a87f844
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Nov 26 20:39:26 2018 -0500

    Increment version for 18.11.00 release
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6a815c8fdb0f9b6f2004aecea2af753cb2f1f539
Author: Koha translators <>
Date:   Mon Nov 26 22:22:14 2018 -0300

    Translation updates for Koha 18.11.00
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit be78d3177e8b9bbf90c7071dc6b6e3385674d106
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Nov 20 16:45:17 2018 +0100

    Bug 21867: Replace remaining document.element.onchange calls in marc_modification_templates.js
    
    Replace onchange() by jQuery change().
    
    Test plan:
    Go to marc mod templates. Add, edit and delete. Check if works and no js
    errors.
    git grep -l -E "onchange\(" should not have occurrences outside lib.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Andreas Roussos <arouss1980@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 92c7c6339b2510aa55a25e7c6499522199d17b47
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 20 10:06:43 2018 +0000

    Bug 19365: (QA follow-up) Ensure we use a modern enough perl
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 277f9be04b90f1e3c7562f0f0b939f367dfd1840
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 20 10:06:24 2018 +0000

    Bug 19365: Clean up, fix and add new tests.
    
    Moved db_dependent tests to the proper directory in the hierarchy, fixed tests to check correct results now that the authority query builder works better and added several new tests to cover changed functionality.
    
    Sponsored-by: National Library of Finland
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 56769046ed58c175120a753c494f97a239580c0c
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Tue Nov 13 16:53:30 2018 +0200

    Bug 19365: Index authority fields as phrases
    
    Followup change to the mappings syntax from bug 19893. Indexing as phrases allows to properly search for matching headings comprised of multiple subfields (e.g. author name with year of birth).
    
    Sponsored-by: National Library of Finland
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a4c02b53cd0bbc8f646533a8ecb5be34709deffa
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Mon Sep 17 00:10:22 2018 +0300

    Bug 19365: Fix search for duplicate authorities with Elasticsearch
    
    Sponsored-by: National Library of Finland
    Signed-off-by: Brendan Gallagher <brendan@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit be2bdfd5113d00699c581e897d1f764158a860b0
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Fri Sep 14 06:40:24 2018 +0300

    Bug 19365: Fix several issues with the Elasticsearch code
    
    Also optimize it so it's actually usable.
    
    Test plan:
    
    1. To test it properly you need biblio and authority data. You might get away with enabling AutoCreateAuthorities and BiblioAddsAuthorities so that authorities are created in the process. Another option would be to import authorities first e.g. from LoC.
    2. Make sure the authority index has been properly created with "misc/search_tools/rebuild_elastic_search.pl -a -d"
    3. Run "misc/link_bibs_to_authorities.pl -v -l" twice and observe the results.
    
    Sponsored-by: National Library of Finland
    Signed-off-by: Brendan Gallagher <brendan@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 746aa64a2949735ac9878b1fe162f877dc358fb3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Nov 26 13:08:05 2018 +0000

    Bug 21869: Fix incorrect value setting in DB update
    
    To test:
    1 - Set some value for MarkLostAsReturned syspref
    2 - Set your db version to 17.12.00.035 (or load an older db)
    3 - updatedatabase
    4 - Note your values are lost and db is incorrectly set
    5 - Apply patch
    6 - Reset values
    7 - Reset DB version
    8 - Run updatedatabase
    9 - Original values are retained
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6a201192895736ca058460553a627646605d71bb
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Nov 26 10:30:12 2018 +0100

    Bug 21878: (follow-up) Fix a few uri filter in facets
    
    We need to adjust a few query_cgi | uri filters here too.
    Note that sort_by should be filtered by uri, not url.
    
    Similar change on staff side.
    
    Test plan:
    Toggle Show all items/Limit available items.
    Check: git grep -l "query_cgi | uri"
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1b57df12d1d7b7e7939c63ff625b109b4b347ebf
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Nov 26 10:10:37 2018 +0100

    Bug 21878: (follow-up) Fix a few query_cgi filters in opac-search-history
    
    We need to replace the uri filter on query_cgi to make some URLs work.
    
    Test plan:
    Check if the links on user page, search history work for biblio and auth
    in current and previous release.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cce18a0399f651fd98074e76e5cf6238fa194df1
Author: Nazlı Çetin <nazli@devinim.com.tr>
Date:   Fri Nov 23 14:23:07 2018 +0000

    Bug 21878: To fix pagination problem in OPAC
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7b16603b310212cc42d2e06e4b9bcaefa4b066ea
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Oct 24 14:23:02 2018 +0200

    Bug 21644: better UNIMARC XSLT display of 210 in intranet
    
    In intranet default UNIMARC XSLT display of 210 is tricky.
    It tests each subfield with a complex conditional prefix.
    In OPAC default UNIMARC XSLT display 210 is simply displayed with a loop on all subfields.
    
    I propose to use the same code as OPAC in intranet.
    It allows to display $f and removes strange middle-score character.
    
    Test plan:
    1) Doni't apply patch
    2) Use an UNIMARC database
    3) Use default XSLT in all displays
    4) Configure a framework to allow 210 subfields from 'a' to 'h'
    5) Edit a record with this framework
    6) In each 210 subfield enter its letter : $a a, $b b ...
    7) Save record
    8) Look at record in OPAC, you see : "Publication: a, b : c, d, e, f : g, h"
    9) Look at record in intranet
    10) You see : ""Publication: a, b : c, d - e : g, h
    11) Apply patch
    12) Look at record in intranet
    13) You see : "Publication: a, b : c, d, e, f : g, h"
    
    Signed-off-by: Andreas Roussos <arouss1980@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    This patch makes intranet consistent with staff again on this area.
    Note that we loose some punctuation like "- e".
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 38481c253ddfa5af061dfe3646650be0e3a52d58
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Nov 26 12:49:25 2018 +0000

    Bug 21730: DBRev 18.06.00.062
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9cf79bd0382871787d75d1fc97f7011e7b983434
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 31 17:42:43 2018 -0300

    Bug 21730: Add missing PA_CLASS authorized values categories
    
    PA_CLASS is missing from the list of AV category
    
    Test plan:
    Execute the update DB entry
    Confirm that you now have PA_CLASS in the AV category list
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c1ec452e5ce454b99433972a34ec1154e81a19a3
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Nov 23 12:02:51 2018 +0100

    Bug 21874: (QA follow-up) Fix intranet sendshelf
    
    Move encode line below regex line.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e40bb00ab8da87c8c5d6e660de928d24b887df17
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Nov 23 11:30:49 2018 +0100

    Bug 21874: Fix encoding of cart and list email subjects
    
    The subject of the cart and list emails is not correctly
    encoded and displays incorrectly in some email clients.
    
    To test:
    
    Lists:
    - Create a list, name it using umlauts or other diacritics
      Example:  Jugendbücher (books for youths in German)
    - Add some items to your list
    - Email yourself the list
    - Verify that the email subject is broken
    
    Cart:
    - Install another language with non-latin characters like Greek
    - Fill the cart with some titles
    - Send yourself the cart
    - Verify that the email subject is broken
    
    Note: Some email clients display correctly, others not.
          It's known to be incorrect in Outlook and web.de,
          displaying nicely in Thunderbird.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Tested all four scripts by manipulating the cart text too in templates.
    Follow-up handles intranet sendshelf.
    
    Note: I asked Katrin to remove the encode UTF-8 statements, since we
    convert to MIME and the subject line should never be UTF-8.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 449116857e65634295d5f114dc47ff85db702d7d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Nov 19 14:47:04 2018 +0000

    Bug 21649: Pass guarantee info to template when adding child
    
    To test:
    1 - Find an adult patron
    2 - Click 'Add child'
    3 - Note address/phone info does not carry over
    4 - Apply patch
    5 - Repeat
    6 - Note information populates
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Todd <tgoatley@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    It works, but the code is ugly and hard to maintain.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d6d92f9dc40a7c6933d7c80b745095943415ee6b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 21 16:42:03 2018 +0000

    Bug 21758: Navigation in Z39.50 result pages not working in Acquisitions
    
    This patch makes markup corrections to the acquisitions Z39.50 search
    results template so that the navigation form works correctly.
    
    Also changed: Removed invalid type attributes from style and script
    tags.
    
    To test, apply the patch and go to Acquisitions -> Vendor -> Basket.
    
    - Add to basket -> From an external source
    - Perform a Z39.50 search which will return multiple pages of results
    - On the search results page, use the form at the bottom of the page to
      navigate through results. Confirm that both the "Go" form and the
      next/previous buttons work.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5f34dd06ec66b11a914e49eb611714ea4c72771d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Nov 8 14:49:10 2018 +0100

    Bug 21774: Cloned item subfields disappear when editing an item
    
    Bug 10306 changed behavior on cloning item subfields by no longer splitting
    constructions like 'A | B' in item fields like ccode.
    
    If it is really recommended to clone item subfields, I am not so sure
    about. But this patch at least restores the possibility to do so while
    we discuss if we should ;)
    
    Test plan:
    [1] Run Items.t
    [2] Make an item subfield repeatable in framework. And test edit items.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Works as expected. Also fixes the display of collections on the items
    table (on editing items).
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit aeaf74b7cc6608d7b81aaba10defdca6decdaa1d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Nov 20 16:32:46 2018 +0100

    Bug 21819: (QA follow-up) Replace onchange() in touched code
    
    AFAIK we should not call document...onchange() and assume that it works.
    Apparently, it does at least in some browsers. But we are not sure.
    We could easily replace them here by the documented jQuery counterpart.
    
    Note: If you try git grep -l -E "onchange\(" you will find some
    occurrences in two libraries and only in one js file (this one).
    We should replace all occurrences here; will open a new report for that.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Verified that the change event was triggered: span should expand/collapse.
    
    Signed-off-by: Andreas Roussos <arouss1980@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a9fc00db03a8210b3edb69a922209a4e8f6df9a1
Author: Andreas Roussos <arouss1980@gmail.com>
Date:   Sat Nov 17 11:35:00 2018 +0200

    Bug 21819: Marc modification templates action always checks Regexp checkbox
    
    When editing a MARC modification template action, the 'RegEx'
    checkbox to the right of the 'to field' textboxes will always
    appear checked, even if no regular expression has been added.
    
    This patch fixes that.
    
    Test plan (steps 1-5 are copied from the original report -- thanks Pasi!):
    1) Go to Tools > Marc modification templates, and create a new template
    2) Add a new action to the template
    3) Edit the action so it's "Move" field to another field.
       Do not check the RegEx checkbox after the "To" field.
    4) Save the action.
    5) Edit the same action again. The checkbox is now checked.
    6) Apply the patch and hit Ctrl-F5 to do a hard refresh in your browser.
    7) Edit the action you saved in 4): this time the 'RegEx' checkbox
       should be unchecked.
    8) For completeness, add a regular expression to the "Move" action
       created in 3) and click on 'Update action'. When you re-edit this
       action the 'RegEx' checkbox should be checked.
    
    Signed-off-by: Pasi Kallinen <pasi.kallinen@joensuu.fi>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9316001126953c41985eb2853fc25163362591d1
Author: Isobel Graham <isobel.graham09@gmail.com>
Date:   Mon Nov 19 12:08:33 2018 +0000

    Bug 21615: Move stock rotation in the tools menu
    
    Mentored-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Andreas Roussos <arouss1980@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit df68391a5ec2eac05a88373dc10c136c8d057e98
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Nov 16 17:23:14 2018 +0000

    Bug 21854: Use template plugin to display category description
    
    Rather than getting the description in the script and passing, we should
    just use the tmeplate plugin to get the description from the category
    code.
    
    To test:
    1 - Find a patron, note their category
    2 - Visit Tools - Batch patron modification
    3 - Enter barcode of patron above
    4 - Note category does not show in the display of patrons to be modified
    5 - Apply patch
    6 - Reload the page, note the patron category displays
    7 - Modify the patron (anything but category)
    8 - Check that category still diplays correctly in results
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    Signed-off-by: Andreas Roussos <arouss1980@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 81ac96abec1226b6635022c0a3f69697d13c7d62
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Nov 14 19:08:09 2018 +0000

    Bug 21837: Don't set holdingbranch filter using selected homebranch filter
    
    To recreate:
    1 - Open the overdues report (don't worry if you don't have results)
    2 - Choose to filter by homebranch
    3 - Note the holdingbranch filter is set to the selected homebranch
    4 - Apply patch
    5 - Clear filters
    6 - repeat
    7 - only homebranch is set
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b704a1adfc3fcee739194d7d6cb79800ba991e51
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 22 17:52:46 2018 -0300

    Bug 21529: (bug 13618 follow-up) Display print notices with HTML tags
    
    Replace a wrong html filter with raw.
    
    Test plan:
    Define a HOLD or DISCHARGE notice template, with html tags.
    Generate them and confirm that html tags are displayed (which restore
    the existing behaviour prior to bug 13618)
    
    Signed-off-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a1d24a2b61359552942fc2420fe18c093c169191
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Mon Oct 29 14:10:42 2018 +0000

    Bug 21529: (follow-up) USE raw filter
    
    In order to be able to make use of the $raw filter, we need to USE it
    first
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5b62714e47d5acd0a4c371024edacc02cfe6f5b5
Author: Mark Tompsett <mtompset@hotmail.com>
Date:   Sun Nov 18 05:36:44 2018 +0000

    Bug 21853: (follow-up) to solve printpdf error
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Theoretically this follow-up makes no difference. All modules only export
    printpdf and now we are just asking explicitly for printpdf. But if it
    resolves some exception on the rule..
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3c18d4c18fad5a0d470c7bdf1ac746a640f25099
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Sat Nov 17 11:58:02 2018 +0100

    Bug 21853: Fix PDF export of basketgroups
    
    In recent versions of Perl, '.' is not included by default in @INC. This
    breaks PDF export of basketgroups.
    
    This patch moves acqui/pdfformat/*.pm files in Koha namespace so that
    they can be 'require'd without manipulating @INC
    
    Test plan:
    1. Turn off Plack/Starman and test PDF export for every value of
       OrderPdfFormat system preference
    2. Turn on Plack/Starman and test PDF export for every value of
       OrderPdfFormat system preference
    3. Test on a dev install and a standard/package install
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9166ba2bff5898f4b93593a60372e8fb2253d44a
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Nov 13 17:00:23 2018 +0100

    Bug 21823: Force creation of POT file even if there is no messages
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 812ac89812e2a58029a0ab41836c959b8c376004
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 16 15:10:05 2018 +0000

    Bug 21835: (QA follow-up) Fix failing test
    
    The illrequest api response should always be augmented with an id_prefix
    field which is not part of the core illrequest object
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5f7a24fdfe0eb0bc57ddc4714e59b8d7dda76177
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 14 15:11:07 2018 -0300

    Bug 21567: Remove Koha_ExternalContent_RecordedBooks.t
    
    This patch removes this file. The included tests are similar to those in
    the db_dependent section, with the difference that this have some things
    mocked. But the tests still require name resolution and connecting to
    the RB servers. This situation breaks package building without any
    noticeable gain.
    
    The feature could be better tested by mocking WebService::ILS calls (so
    no external world contact), but it belongs to a separate bug report.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Mirko Tietgen <mirko@abunchofthings.net>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4e78070b80a24410de57e7b0c6da4db6bd2e3a7e
Author: Mirko Tietgen <mirko@abunchofthings.net>
Date:   Fri Nov 16 00:07:14 2018 +0100

    Bug 21567: Move Koha_ExternalContent_OverDrive.t to db_dependent
    
    This tests pass on the build step only because they are skipped, due to
    the absense of Test::DBIx::Class library.
    
    It makes sense for them to be in the db_dependent directory, as they are
    not completely mocked (re: external world interactions).
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 43d8946d5934151d38dc95b7162674dc7e95efb4
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Nov 3 08:29:39 2018 +0000

    Bug 21815: Rephrase HidePersonalPatronDetailOnCirculation
    
    Makes it a little easier to translate, also fixes whitespace and capitalization.
    
    Signed-off-by: Devinim <kohadevinim@devinim.com.tr>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d5d94d320c9598e00eacafda730bb6aae0cff506
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Nov 14 22:17:13 2018 +0100

    Bug 21839: Fix capitalization of "Print Label" link
    
    Fixed the spelling to follow Koha's capitalization rules to
    "Print label".
    
    To test:
    - Edit an item in the GUI
    - Look at the Actions pull down in the table above
      the item form
    
    Signed-off-by: Andreas Roussos <arouss1980@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1e675e20e928e57ef1ffa7603e395b093adf0481
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Nov 16 12:57:46 2018 +0000

    Bug 21516: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 93d2c67b4116e72d36d2934c592143cb76aa9f61
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 9 14:34:55 2018 +0000

    Bug 21516: (ALTERNATE) Request notes CSS bug makes them unreadable
    
    This alternate patch makes multiple markup corrections to the ILL
    requests templates. It reformats the request details to use a list,
    making it consistent with similar interfaces (see patron details,
    baskets in acquisitions). The display of notes has been changed so that
    it uses a paragraph tag instead of <pre>.
    
    To test, apply the patch and rebuild the staff client CSS.
    
    - Manage an ILL request which has staff and OPAC notes. Everything
      should look readable.
    - Running validation on the HTML should only return warnings coming from
      global include files (js_includes.inc).
    
    Signed-off-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2517147c301841b00658f2eed97ae1e4a829a892
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 15 13:39:33 2018 +0000

    Bug 21838: Wrong alignment of instructors in course reserves
    
    This patch adds CSS to course reserve pages so that multiple instructors
    on a course are displayed well.
    
    To test, apply the patch and:
    
     - Add or edit a course.
       - Test adding and removing instructors, saving, and adding and removing
         again.
     - View a course with multiple instructors and confirm that they are
       displayed well.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Awesome, Owen :-D
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 119653a3a133d5bb138234d2e45a13f8a7e447fe
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Nov 16 12:51:27 2018 +0000

    Bug 20598: Update number of tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 867f88076eb47c434c3edf6f7903238b5a465cdb
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Nov 16 10:37:55 2018 +0100

    Bug 20598: (QA follow-up) Tiny fixes
    
    [1] Correct POD for _FixOverduesOnReturn
    Is called by AddReturn, AddRenewal and LostItem.
    Also tested in Circulation.t btw
    
    [2] $dbh is not used in _FixOverduesOnReturn
    [3] Moving all parameters to the first line.
    [4] Variable $uquery is not used too.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b9ed7699e3da4966681a21c85bc78d99123d1681
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Nov 5 13:31:40 2018 +0000

    Bug 20598: Unit test
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 461a6f53b85becbefb18c0cb9356384a479aa9f1
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Apr 17 14:11:41 2018 -0400

    Bug 20598: Accruing fines not closed out by longoverdue.pl if WhenLostForgiveFine is not enabled
    
    Test Plan:
    1) Ensure WhenLostForgiveFine is disabled
    2) Create an overdue with a fine
    3) Mark it lost with longoverdue.pl
    4) Note it is still marked as an accruing fine
    5) Apply this patch
    6) Repeat steps 1-3
    7) Note it is no longer an accruing fine!
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    Followed the test plan and it works.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fab9936ddb68e15cae356cb4c52a3be806948f83
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Nov 16 10:04:55 2018 +0100

    Bug 18677: (QA follow-up) Trivial fixes to Chargelostitem.t
    
    Kind of funny that we did not touch this test here. But it passed!
    Trivial fixes:
    [1] Typo precessfee
    [2] Typo the linked
    [3] Add rollback
    
    Test plan:
    Run t/db_dependent/Circulation/Chargelostitem.t
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3475670881e75f47bc6b7e21f0563162e428b831
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 1 11:47:47 2018 -0300

    Bug 18677: Remove new issue_id param from charlostitem
    
    We have the itemnumber no need to pass the issue_id, we can retrieve it
    from chargelostitem
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cd250dae36b8dd03cbfa1b2ab691202a51daa58b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 1 11:47:16 2018 -0300

    Bug 18677: Make the tests pass
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cde7a8e72c04ad31bdda66908e5e0482276bdcb8
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Wed Apr 11 14:08:57 2018 -0400

    Bug 18677: issue_id is not added to accountlines for lost item fees
    
    Test Plan:
    1) Apply this patch
    2) prove t/db_dependent/Accounts.t
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    [EDIT:]
    Patch should have increased the number of tests obviously.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a31068e330a4afe5689381bab3a86a386684a475
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Wed Nov 14 16:08:32 2018 +0000

    Bug 21835: Fix display of request ID
    
    We now populate the id_prefix property in the API response. It turns out
    that explicitly casting to a string wasn't necessary as JS does "the
    right thing" when concatenating a string and an integer
    
    Test plan:
    
    - Before applying the patch view the ILL requests table
    - TEST: Observe that the Request number column displays as NaN
    - Apply the patch
    - Refresh the page
    - TEST: Observe that the request number now displays correctly
    - Add the following block to your koha-conf.xml:
    
    <branch>
        <code>**The code of a branch that has an ILL request attached to
        it**</code>
        <prefix>YAY</prefix>
    </branch>
    
    - Refresh the page
    - TEST: Observe the request made on the branch that you specified in the
    config are now prefixed with "YAY-"
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 99013d6896fc591a7733568bcb7044cad399a7c5
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Nov 1 13:01:48 2018 +0000

    Bug 21796: Don't unlock checkouts if restriction exists but fines are below limit
    
    The checkout form will be removed if various conditions are
    met: Restrictions, a fine above noissuescharge etc.
    
    Bug 19933 changed the conditions, so a restriction will no longer
    block checkouts, if the fines are below the set limit.
    
    To test:
    
    - Add a restriction
    - Confirm the checkouts form is replaced by a message
    - Add a fine below the noissuescharge limit
    - Confirm that the form reappears
    - Apply the patch
    - Check that the checkout form is gone now
    - Remove restriction - form should reappear
    - Add to the fine, so it's above the limit
    - Form should disappear
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f7afe237b13eda1644e2cb4e1137ad8680348a67
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Nov 16 12:33:43 2018 +0000

    Bug 21814: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a353b513cf5bc912f246a25bd4430eec0d1fa118
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 15 17:20:52 2018 +0000

    Bug 21814: (follow-up) System preferences save button can be hidden by language menu
    
    This follow-up implements the same change by defining a variable to be
    used as the minimum height of the language footer navbar. A calculation
    is done on this value to set the bottom margin of the main area of the
    page.
    
    To test, apply the patch and rebuild the staff client CSS. Clear your
    browser cache if necessary. View the system preferences page again and
    confirm that the bug is still fixed.
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f03a4ca852d361f299057cb7dac4e53ef759bff3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Nov 12 19:07:12 2018 +0000

    Bug 21814: System preferences save button can be hidden by language menu
    
    This patch modifies the staff client CSS to give pages enough of a
    bottom margin that the language footer will not obscure controls
    appearing at the bottom of the page.
    
    To test, apply the patch and regenerate the staff client CSS. You must
    have one or more translations installed and enabled.
    StaffLangSelectorMode should be set to display the language menu in the
    footer.
    
    Go to Administration and search for 'opac.' Scroll to the bottom of the
    page and confirm that the last submit button is not hidden by the
    language menu.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9c02633ee7c56cf2c6e5992b98c4342363432d9c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Nov 16 12:31:51 2018 +0000

    Bug 20244: DBRev 18.06.00.061
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6ef2233093df5c82f5fea1ec36bb621be0f4c31a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Nov 16 12:06:31 2018 +0000

    Bug 20244: Pod fixes
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit aece4f62ea6c37b0dafa9584038571d0a2d49e43
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Mon Jul 2 16:04:05 2018 +0300

    Bug 20244: Add alt script indexing and fix sort field indexing
    
    https://bugs.koha-community.org/show_bug.cgi?id=20244
    
    Test plan:
    
    1. Add a record with alternate script fields in 880 (sample attached in the bug).
    2. Make sure the the record can be found e.g. with the alternate script title.
    3. Add a record with multiple authors.
    4. Check that in the index there is only a single author__sort field.
    
    Signed-off-by: Brendan Gallagher <brendan@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5a0f2821a2ff104781c1ff05a80957720ae46c43
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Mon Jul 2 15:55:10 2018 +0300

    Bug 20244: Improve Elasticsearch ISBN indexing
    
    https://bugs.koha-community.org/show_bug.cgi?id=20244
    
    Test plan:
    
    1. Add a record with an ISBN-10 or ISBN-13 that can be converted to ISBN-10 (e.g. 1-56619-909-3).
    2. Verify that the record can be found by searching for "1-56619-909-3", "1566199093", "978-1-56619-909-4" and "9781566199094".
    
    Signed-off-by: Brendan Gallagher <brendan@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 866bbd817e93f94308854987a45d9142c23d2414
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 13 11:23:11 2018 +0000

    Bug 19893: (QA follow-up) Convert atomicupdate to .perl
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit da22f3cc33f747166e8ef13b82c35a2c1dd2be26
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 13 11:11:04 2018 +0000

    Bug 19893: (QA follow-up) Spelling correction in POD
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2f4b141892436f7a51c4b7451b519bb0b8c9229f
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Mon Nov 5 15:00:21 2018 +0100

    Bug 19893: Increase test coverage
    
    Sponsored-by: Gothenburg University Library
    Signed-off-by: Ere Maijala <ere.maijala@helsinki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6d47d82ac9b1a5f2ced19df3008697cc5117f491
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Thu Nov 1 15:47:12 2018 +0100

    Bug 19893: Add code review fixes
    
    Sponsored-by: Gothenburg University Library
    Signed-off-by: Ere Maijala <ere.maijala@helsinki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1d29d0e4497eedfdc0515a636ed65c2be68ba081
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Mon Oct 22 11:30:17 2018 +0200

    Bug 19893: Add pods, remove syspref, add tests for serialization format
    
    Add missing pods, remove obsolete syspref and add test for serialization format for records exceeding max record size
    
    Sponsored-by: Gothenburg University Library
    Signed-off-by: Ere Maijala <ere.maijala@helsinki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cab8a55c28db3f0a9fd52a05d9d18a0fd9ebc115
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Wed Sep 12 16:50:01 2018 +0200

    Bug 19893: Fix tests and add tests for joined subfields
    
    Sponsored-by: Gothenburg University Library
    Signed-off-by: Ere Maijala <ere.maijala@helsinki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d22b6392dee50e8fa6e614b0b190e09f913e6445
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Tue Sep 11 17:56:44 2018 +0200

    Bug 19893: Support for joined subfields in mappings
    
    Sponsored-by: Gothenburg University Library
    Signed-off-by: Ere Maijala <ere.maijala@helsinki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1e1ca322d35d26e7158faeb34be3aaeada25d13a
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Fri Sep 7 15:18:00 2018 +0200

    Bug 19893: Restore and fix removed tests
    
    Sponsored-by: Gothenburg University Library
    Signed-off-by: Ere Maijala <ere.maijala@helsinki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d6139eaad7763505ace3f3c4ee069f70f4e6de7f
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Mon Jul 2 15:23:51 2018 +0300

    Bug 19893: Fix Elasticsearch tests.
    
    https://bugs.koha-community.org/show_bug.cgi?id=19893
    
    Sponsored-by: Gothenburg University Library
    Signed-off-by: Ere Maijala <ere.maijala@helsinki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 53cf97bb2dc213936f8787f907fb79d3dc849b0b
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Tue May 29 17:57:31 2018 +0200

    Bug 19893: Add index status
    
    Add persistent per index "index status" state to provide useful
    user feedback when update of Elasticsearch server mappings fails
    
    Sponsored-by: Gothenburg University Library
    Signed-off-by: Ere Maijala <ere.maijala@helsinki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fc0abee5586beb2d003c2d02842c90ca9bb29bd2
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Mon May 28 16:03:32 2018 +0200

    Bug 19893: Remove serialization format setting
    
    Default to base64 encoded binary MARC with MARCXML
    fallback if record exceeds maximum size
    
    Sponsored-by: Gothenburg University Library
    Signed-off-by: Ere Maijala <ere.maijala@helsinki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5389ffa38ae72548d30cb75598ae11cef2ef10db
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Tue Dec 12 18:26:13 2017 +0100

    Bug 19893: Alternative optimized indexing for Elasticsearch
    
    Implement optimized indexing for Elasticsearch
    
    How to test:
    1) Time a full elasticsearch re-index without this patch by running the
       rebuild_elastic_search.pl with the -d flag:
       `koha-shell <instance_name> -c "time rebuild_elastic_search.pl -d"`.
    2) Apply this patch.
    3) Time a full re-index again, it should be about twice at fast (for a
       couple of thousand biblios, with fewer biblios results may be more
       unpredictable).
    
    Sponsored-by: Gothenburg University Library
    Signed-off-by: Ere Maijala <ere.maijala@helsinki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 505e10585ce8683af0862027aca8177b5facf3df
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 15 12:37:22 2018 +0000

    Bug 7143: Update about page for new dev Thatcher Leoonard
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ecf68132b7e2eafff0d0dc8991b8ebc52534f75e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Nov 12 15:03:34 2018 -0300

    Bug 21749: (QA follow-up) Add more tests for ImportFramework
    
    This patch adds tests for:
    - Output of ImportFramework on fields removal and error conditions (file
      not found)
    - Different file format behaviour (csv, xml and ods are tested).
    
    To test:
    - Run
      $ kshell
     k$ prove t/db_dependent/ImportExportFramework.t
    => SUCCESS: All green :-D
    - Sign off :-D
    
    Note: the biblio_framework* files are based on the original one on the
    patchset, and exported in 17.11 with different formats.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2d1b80d216b2bdf4eefc05f773d85f9cf14823b3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Nov 12 13:14:19 2018 -0300

    Bug 21749: Fix import of CSV biblio framework
    
    Bug 9701 added 2 new columns to the table marc_tag_structure which broke
    the import of biblio frameworks if the CSV file was generated with a
    previous version.
    
    Test plan:
    - Export a biblio framework from 17.11
    - Import it into 18.05+
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    https://bugs.koha-community.org/show_bug.cgi?id=21740
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cbb90000fd21d16aa23077dd061d15954bd1955c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Nov 12 13:11:42 2018 -0300

    Bug 21749: Add tests for ImportFramework
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c6e6b78a5099d34ecfc2b71fa03f154554ddfc6f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Nov 9 19:02:25 2018 +0000

    Bug 21805: Duplicate include file in search results template causes JS error
    
    This patch removes a redundant include file, browser-strings.inc, from
    the top of the staff client search results template. The
    correctly-placed include is in the JavaScript block at the bottom of the
    template. The duplication causes a JavaScript error which can be seen in
    the browser console.
    
    To test, apply the patch and peform a catalog search in the staff
    client. Open the browser console and confirm that there are no errors.
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e3e2afd88d090b68ece1ae7445c10cf58d139b24
Author: Thatcher Leonard <thatcher.f.leonard@gmail.com>
Date:   Tue Nov 6 14:39:28 2018 +0000

    Bug 18584: Our legacy code contains trailing-spaces
    
    This patch removes trailing spaces from acquisitions-search.inc
    
    Mentored-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit af7e9abd2de7bef8ce379d83d5aecafee13e11c6
Author: Nightly Build Bot <nightly@abunchofthings.net>
Date:   Thu Nov 15 00:25:09 2018 +0100

    Bug 17084: Automatic debian/control updates (unstable/master)
    
    Signed-off-by: Mirko Tietgen <mirko@abunchofthings.net>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 15684a0f703735359a0c2aa4b084f6ba43f48d11
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Nov 1 13:38:35 2018 +0000

    Bug 21799: Change wording for quantity input field on order receive page
    
    Changes the label from "Quantity to receive" to "Quantity ordered".
    The label below reads "Quantity received".
    
    To test:
    - Order something in acquisition
    - Add a new shipment and create an invoice
    - Receive an order line
    - On the order receive form, check for the labels mentioned above
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 446142cd2ba6b9ace602d918e5ef83b0b0ccfa6a
Author: Dimitris Antonakis <diman@debian.diman>
Date:   Sat Nov 10 13:24:27 2018 +0200

    Bug 17597: Outdated translation credits
    
    Updated translation credits for the Greek language.
    
    Signed-off-by: Andreas Roussos <arouss1980@gmail.com>
    Works as expected, hyperlink to openhub tested OK.
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 027f7b103b74e4823d018339f9eaa3f5bff0dbed
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Sep 21 11:40:16 2018 +0100

    Bug 9775: Unitprice should be hidden when creating an order
    
    The actual cost box is effectively hidden from the order page.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9d595e36a7844f99fa5d74aad418717d12eeae37
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 29 17:26:14 2018 -0300

    Bug 21282: Sync ordered and spent values with acqui home
    
    The order list for each fund calculates using the ecost tax excl., but
    it should be tax incl.
    At the moment this means that the sum on the start page table and the
    order list don't match up.
    
    Test plan:
    - Create and receive orders
    - Values on acqui home and ordered/spent should be the same
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ea800323b70aceaa55df5b0fa96cdae8ebbc9579
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Nov 13 15:17:09 2018 -0300

    Bug 21777: (QA follow-up) Fix colspan in the footer
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8d4136c7663d351268e8647da7189acacfc1b050
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Nov 7 12:16:08 2018 +0000

    Bug 21777: Fix circulation table alignment
    
    TO test:
    1 - Check out an item to a patron
    2 - Note the columns are misaligned
    3 - Apply patch
    4 - Updatedatabase
    5 - Reload the patron
    6 - Note the table is fixed
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4290426251bc805cdbfbe263ec0e6510d6010bbf
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 7 14:23:27 2018 -0300

    Bug 21777: Add a regression test
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 52111840d3fe28abac6b5eff167f88fe988d0b8c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 1 10:03:18 2018 -0300

    Bug 21467: (follow-up) Display a summary line per parent_ordernumber
    
    Wrong resolution conflict
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 90f915a8b220cc405ab51d006c773964494515a3
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Oct 29 20:54:32 2018 +0000

    Bug 21467: (QA follow-up) Move hint a little bit
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e08980974e9952cb6d80a48fcedb032dada63d7c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 1 09:51:23 2018 -0300

    Bug 21467: Prevent tests to fail
    
    The following error is raised if TestBuilder generates too big numbers:
     Out of range value for column 'tax_value_on_ordering'
    
         UPDATE aqorders
         SET
             tax_value_on_ordering = quantity * ecost_tax_excluded * tax_rate_on_ordering,
             tax_value_on_receiving = quantity * unitprice_tax_excluded * tax_rate_on_receiving
         WHERE ordernumber = ?
     "] at /home/vagrant/kohaclone/C4/Acquisition.pm line 1484.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b5cf4012ff0f208e57942e1fb8d6e713a2f3a98d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Sun Oct 28 15:17:25 2018 +0000

    Bug 21467: (QA follow-up) Fix filter and variable declaration in .t
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 679930c8597680a870f7c9801b6dbd40e1254edf
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 12 15:19:28 2018 -0300

    Bug 21467: Display a summary line per parent_ordernumber
    
    This will help to keep track of the different orders for a given
    subscription.
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ef2c52b4a06172ed168bbee0ae98009a643435e2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 12 14:26:44 2018 -0300

    Bug 21467: Fix default sort
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3a4b6c9142a3a355d6764c2da1fdb9037f9d1277
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 2 13:42:58 2018 -0300

    Bug 21467: Display the quantity and adjust the amounts
    
    On the subscription detail view we should display the amounts depending
    on the quantity (can be different than 0 now!)
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9a011c58e7efa3afa674a6376e75e4a6697083f8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 2 13:31:20 2018 -0300

    Bug 21467: Do not erase the internal note of the first order
    
    For the subscription we would like to keep the original internal note
    (from the first order), to display it unmodified each time we receive
    issues.
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b9149799e36e1b34f8504cd57edf63f27f061d93
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 2 12:39:38 2018 -0300

    Bug 21467: Add subscription's info when ordering
    
    When ordering from a subscription, there is now a "hint" to display the
    number of issues and the frequency. It will be easier to estimate the
    quantity to receive.
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 75d5f496ed78d502be7b8008b798b04b0db38e1c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 1 20:44:29 2018 -0300

    Bug 21467: Add treetable to subscription detail to group orders by parent ordernumber
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 40267be0851309d926932e458317a9f10f5c38a2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 1 19:41:17 2018 -0300

    Bug 21467: Allow several receipts for a given subscription
    
    When a new order is created from a subscription the quantity is set to 1
    and cannot be modified.
    The idea was to order 1 subscription.
    This behavior leads to a limitation: it is not possible to mark a
    receipt as partially received. However it is how it works in real life,
    the vendors send invoices throughout the year. The number of items can
    also be changed.
    
    The idea is be to rethink the "quantity" value for an order created
    from a subscription and use it to track the number of invoices already
    paid.
    
    FIXME: This approach will not cohabit with standing orders.
    This patch is a first draft to get feedback on the idea.
    
    FIXME: What about cancelled orders?
    
    Test plan:
    - Create a new order from a subscription
    - Enter the number of items you think you will receive for this
    subscription (for instance 1 per month: 12)
    - Close the basket
    - Receive 3 items (a trimester) and create a specific invoice for this
    receipt. Note that the price are per unit.
    If you want to receive items with different prices you should make
    split the receipt
    - Receive more items. This time you will notice that the previous order
    will be displayed on the "order receive" under a new block "Receipt
    history for this subscription"
    - Note that the "Quantity to receive" has been decrease by the number of
    items you previously received
    - Also you can notice that this "Quantity to receive" can be modified.
    Indeed it can happen that the number of items to receive changed during
    the year
    - Go to the detail of the subscription and notice that the orders have
    been grouped by "parent ordernumber"
    - Continue to receive items until all have been received
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 414aa0aef643d147a1901b55bfa4479b73652d52
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 13 14:38:27 2018 -0300

    Bug 15836: Remove deprecated subroutines
    
    It will take too much time to fix the failures here, given the
    simplicity of the subroutines I would be in favor of deleting them and
    continue the move on a separate bug report to use Koha::Object-objects
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    I've checked that everything removed is no longer in use.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e9b5863d6f7b7cac3d35fce8b68282888eae8777
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 13 14:32:16 2018 -0300

    Bug 15836: Fix failing tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c28ad651a6b57ed1f39bd91800c55e71e9b9935d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Nov 8 09:47:48 2018 +0100

    Bug 21782: Release team 18.11 in About
    
    [1] Moved the (usual) 18.05 positions to the Dev section.
    [2] Added the 18.11 positions to the Release team section.
    
    Test plan:
    [1] Look at About/Koha team.
    [2] Compare with roles 18.05 and roles 18.11.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f1e5e3670fe7de2fcaeb8ddcd6866c1e12b7f6d9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 29 13:40:20 2018 +0000

    Bug 20966: (follow-up) Add template variable filter; Fix table export
    
    This patch makes to corrections:
    
    1. The "$raw" filter has been added to the column configuration
    2. The columns configuration now specifies which columns are exported in
       Copy, Excel, etc. operations.
    
    To test, apply the patch and test the various table export buttons on a
    both a closed and open basket. Confirm that the 'Modify' and 'Cancel'
    columns are not exported.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    https://bugs.koha-community.org/show_bug.cgi?id=20996
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2874dfb1f1dbac7f0f560c3d3b5abb1ca44494bd
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 19 17:02:14 2018 +0000

    Bug 20966: Add column configuration to table of orders in a basket
    
    This patch adds column configuration to the table of orders in a basket.
    It replaces the "Show all details" checkbox which previously was used to
    show the hidden "tax included" columns. Now those columns are hidden by
    default in the columns configuration file.
    
    To test, apply the patch and view a basket with multiple orders. Test
    all DataTables functionality (paging, sorting, filtering) including
    showing and hiding columns.
    
    Test with both an open and a closed basket.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    https://bugs.koha-community.org/show_bug.cgi?id=20996
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fb5dd4c942f7162808a97cf37f51bd41d38b0d8b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Nov 13 16:21:22 2018 +0000

    Bug 15836: DBRev 18.06.00.060
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fcc5d6e7e49fc37c17240ccab0d7ed9d808b2303
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 13 12:04:22 2018 -0300

    Bug 15836: (follow-up) Fix display input in any situations
    
    Koha::ClassSplitRule->regexs returns an array
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e2114557e2241fb05d837610c92000df1c8cb4b8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 13 11:51:44 2018 -0300

    Bug 15836: Remove debug statement
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 00b837367eb7cd47fa5f90bf28a172a17bb7b66b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 13 11:51:04 2018 -0300

    Bug 15836: Fix deletion of class sources
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7614a5f2eb5b03a1f70d050536310d21232dffcc
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Nov 1 11:58:33 2018 +0000

    Bug 15836: (follow-up) Fix filters
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 369c2339176764937eb7a820988a6d070dbf3204
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 8 16:22:32 2018 -0300

    Bug 15836: Fix DB structure
    
    That was a leftover from the first approach, this table must not be
    modified!
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2682ecb435d0e1e56935402b43447f2274edf83f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sun Sep 16 16:25:24 2018 -0700

    Bug 15836: Fix display input in any situations
    
    Fix when switching an existing rule to RegEx
    
    Sponsored-by: Goethe-Institut
    
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bde9fb59f28fb13fe00250b7b540e51ee9d076cc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 27 09:59:02 2018 -0300

    Bug 15836: Handle non-existent regexs
    
    For other types of split rules
    
    Sponsored-by: Goethe-Institut
    
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 328046e59cbf7c858b9218ac2adf27bb42784776
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 18 12:48:08 2018 -0300

    Bug 15836: Add missing svc script
    
    Sponsored-by: Goethe-Institut
    
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b09c471137a9510ff63ca5d20a7730a3c4547487
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 17 15:55:16 2018 -0300

    Bug 15836: Add tests
    
    Sponsored-by: Goethe-Institut
    
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 02a942767f0f03eb3ba8101399bad34bc9b09390
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 22 12:21:01 2018 -0300

    Bug 15836: Mark C4::ClassSource subs DEPRECATED
    
    These subs are no longer used from scripts and should be removed. It
    should be done on a separate bug report given that additional work is
    needed
    
    Sponsored-by: Goethe-Institut
    
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 65c4d8019e00571a7804aaee4a5952480e6afd16
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 21 18:19:36 2018 -0300

    Bug 15836: Add the ability to defined custom methods to split call number in labels
    
    Currently the call number splitting seems to be mostly implemented for
    DDC and LC classifications.
    Those are both not very common in some countries.
    A lot of libraries use their own custom classification schemes so the call number
    plitting is something that should be individually configurable.
    
    This enhancement adds the ability to define custom splitting rules based
    on regular expressions.
    
    How does it work so far?
    From C4/Labels/Label.pm there are 3 differents splitting methods defined, depending on items.cn_source.
      if cn_source is "lcc' or 'nlm' we split using Library::CallNumber::LC
      if cn_source is 'ddc' we split using a in-house method
    Finally there is a fallback method to split on space
    And nothing else is done for other cn_source
    
    The idea of this patch is to mimick what was done for the "filing rules" and add
    the ability to define "splitting rules" that will be used by the "Classification sources".
    A classification source will then have:
      * a filing rule used to sort items by callnumbers
      * a splitting rule used to print labels
    
    To acchieve this goal this enhancement will do the following
    modifications at DB level:
    * New table class_split_rules
    * New column class_sources.class_split_rule
    
    Test plan:
    * Execute the update database entry to create the new table and
    column.
    I. UI Changes
    a) Create/modify/delete a filing rule
    b) Create/modify/delete a splitting rule
    c) Create/modify/delete a classification source
    => A filing rule or splitting rule cannot be removed if used by a
    classification source
    
    II. Splitting rule using regular expressions
    a) Create a splitting rule using the "Splitting routine" "RegEx"
    b) Define several regular expressions, they will be applied one after
    the other in the same order you define them.
    Something like:
      s/\s/\n/g         # Break on spaces
      s/(\s?=)/\n=/g    # Break on = (unless it's done already)
      s/^(J|K)\n/$1 /   # Remove the first break if callnumber starts with J or K
    c) You can test the regular expressions using filling the textarea with
    a list of callnumbers. Then click "Test" and confirm the callnumbers are
    split how you expected.
    d) Finally create a new classification source that will use this new
    splitting rule.
    
    III. Print the label!
    a) Create a layout. It should have the "Split call numbers" checkbox
    ticked, and display itemcallnumber
    b) Use this layout to export labels, use items with different
    classification source ('lcc', 'ddc', but also the new one you have
    create)
    => The callnumbers should have been split according to the regex you
    defined earlier!
    
    Notes:
    * The update database entry fill the class_sources.class_split_rule
    with the value of class_sources.class_sort_rule
    If default rules exist it will not work, we should add a note in the
    release notes (would be enough?)
    * C4::ClassSplitRoutine::* should be moved to Koha::ClassSplitRule,
    but it sounded better to keep the same pattern as ClassSortRoutines
    * Should not we use a LONGTEXT for class_split_rules.split_regex instead
    of VARCHAR(255)?
    
    * class_sources.sql should be filled for other languages before pushed
    to master!
    
    IMPORTANT NOTES: The regular expressions are stored as it, and eval is
    used to evaluate it (perlcritic raises a warning about it (Expression
    form of "eval"). It can lead to serious security issues (execution of
    arbitrary code on the server), especially if the modifier 'e' is used.
    We could then remedy the situation with one of these following points:
    - Assume that this DB data is safe (We can add a new permission?)
    - Assume that the data is not safe and deal with possible attack
    Cons: how be sure we are exhaustive? Making sure it matches ^s///[^e/]*$
    would be enough?
    - Use Template Toolkit syntax instead (Really safer?)
      [% callnumber.replace('\s', '\n').replace ... %]
    - Cut the regex parts: find, replace, modifiers
    like we already do for Marc modification template. Cons: we are going to
    have escape problems, the "find" and "replace" parts should not be
    handle the same way (think "\n", "\\n", "\1", "\s", etc.)
    I did not manage to implement this one easily.
    
    Sponsored-by: Goethe-Institut
    
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 94a4aaca1e844737f80e628a50eaa236918d7de4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 21 13:43:55 2018 -0300

    Bug 15836: UI changes
    
    The script admin/classsources.pl has been adjusted to follow usual
    patterns used in other Koha scripts.
    $op can be add_source, add_source_validate, etc.
    Deletion steps have been removed (there is a JS confirmation box) to
    simplify both script and template.
    
    Sponsored-by: Goethe-Institut
    
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit df22811f7b1a2150ca1d170031f2c1f3912ec7ed
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 21 12:57:09 2018 -0300

    Bug 15836: DB changes
    
    Sponsored-by: Goethe-Institut
    
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3a0cba67f1387595f570ab9d9efdeabc856345b4
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Nov 13 14:42:43 2018 +0000

    Bug 20356: DBRev 18.06.00.059
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d659649a132f8df2f6c294127f3c39d42bbbcaf8
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Wed Mar 7 16:40:07 2018 +0100

    Bug 20356: Add EmailSMSSendDriverFromAddress system preference
    
    Add EmailSMSSendDriverFromAddress system preference for overriding Email
    SMS send driver from address.
    
    How to test:
    1) Run tests in t/db_dependent/Letters.t
    2) All tests should pass
    
    Sponsored-by: Gothenburg University Library
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7f78d4a1485c0cf68021ed426192d3f1e5cbd80f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Nov 12 17:05:29 2018 -0300

    Bug 21775: Logout before trying to login
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e112c6f117d4b6fd6c6160e8be9cba4186db1279
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 31 11:25:40 2018 -0300

    Bug 21706: (QA follow-up) Fix tabs
    
    Not all href's should have parameters URI encoded. Because sometimes
    they are just where for use by JavaScript libraries which fail in that
    situations. For fixed-lenght fields we use @ as the subfield code and it
    breaks the bootstrap tabs if we URI encode the '@'.
    
    This fixes the tabs issues on fixed-lenght fields in the authority type
    editing pages.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>

commit 50b8e1ca97399330e94ad15f566ef9763c3a3152
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 29 11:25:58 2018 -0300

    Bug 21706: (follow-up) Fix subfield delete button
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>

commit 290f5ea0581ebbcabe38f926a3464f2103775b25
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 29 10:51:39 2018 -0300

    Bug 21706: (follow-up) remove unused template params
    
    The original patch removed the need to add URLs to the template
    variables. This patch removes that in the controller.
    
    Bonus: fixes 'html' filter in URL replacing it by 'uri'.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>

commit bea8edd9724538075299c5a8a8e607fe281cc4da
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 29 10:44:46 2018 -0300

    Bug 21706: Make authority framework subfield links work (TT filter)
    
    This patch removes URL building from the controller
    and does it on the templates, using the
    right 'uri' filter for the query parameters.
    
    To test:
    - Go to Home > Administration > Athority types
    - On any of the listed frameworks, pick the 'MARC structure' action in
    the dropdown
    - On any subfield, hover on the actions dropdown
    => FAIL: The URLs are wrongly formed
    - Click on the links
    => FAIL: You get errors because of the bad URL
    - Apply this patch
    - Reload the 'MARC structure' page
    - On any subfield, hover on the actions dropdown
    => SUCCESS: LInks look correct
    - Click on any of them
    => SUCCESS: They work!
    - Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2fc599c0893620c395ca0492c9d9e3c860c8f951
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 31 13:48:47 2018 -0300

    Bug 21526: Fix search result pages (url vs uri vs raw)
    
    query_cgi is uri_escaped from the pl, so we should displayed as raw
    
    Test plan:
    Use wide characters ❤
    Search, filter, facets, search history, rss (both interfaces)
    
    Please test deeply!
    
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 11622b8a9edba36a77eb26a6630413935f27cf6e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 31 14:31:36 2018 -0300

    Bug 21526: (follow-up) Use the 'url' filter when needed
    
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cd81bdc6a0b0250d97cbb5c49bcb90290d29e34a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 29 16:16:17 2018 -0300

    Bug 21526: Use the 'url' filter when needed
    
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fa7b2ad08befb88866e850f2b7bba34841ff30b7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 8 11:21:59 2018 -0300

    Bug 21787: Remove unecessary test from GetHardDueDate.t
    
    See description on the bug report for more info.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8205305b4fae06c5c7ca4ad3ad7e5e8abf12ade6
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Fri Nov 9 16:54:34 2018 +0000

    Bug 21804: Remove C4::Accounts::getcharges again
    
    Test plan:
    1) git grep getcharges
      -> should return no occurences
    2) prove t/db_dependent/Accounts.t
      -> should pass
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a58549422d6a100f0be4776fa48ebe43fb05e69b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 6 15:12:32 2018 -0300

    Bug 21775: Add selenium tests for audio alerts
    
    To prevent future regressions
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 08fa7014c065e5a5bf3d2e9e6fd50c52f45a068a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 9 10:54:12 2018 -0300

    Bug 21413: (QA follow-up) Fix tests
    
    No assumption on the order in which restults are returned should be made
    (we don't control existing data on the tests). So it should only check
    existence of expected records in the results, and absense.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit edf50215b5e2282568f12f4d1e33dd8e56a467c8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 8 21:05:49 2018 +0000

    Bug 19349: DBRev 18.06.00.058
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 04d137b06d1cc872941aab38ecc41e562c7a5554
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Nov 2 11:17:46 2018 +0100

    Bug 19349: (QA follow-up) Cosmetic changes
    
    [1] Construction with a // b instead of a; unless( a ) b;
    [2] Error checking on subfieldCode
    [3] Add explanation how to fill preference
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 42e9c49934c87f17b3350955e7d5d0860ecbe8bd
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Sep 20 14:58:07 2017 +0200

    Bug 19349: Store record's creator and last modifier in record
    
    Test plan:
    1. Run updatedatabase.pl
    2. Set sysprefs MarcFieldForCreatorId, MarcFieldForCreatorName,
       MarcFieldForModifierId, MarcFieldForModifierName
    3. Create a new biblio
    4. Verify that the fields are correctly filled
    5. Logout and login as another user
    6. Modify the same biblio
    7. Verify that only the fields for last modifier have been modified
    
    Works perfectly.
    
    Signed-off-by: Simon Pouchol <simon.pouchol@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4a61f18f41f7fa4643bd893f525cede496329d3e
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue Aug 21 13:16:02 2018 +0000

    Bug 21205: (follow-up) Fix column name - itemnumbers -> itemnumber
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7d10549ae8632e6640d3a99014268a2a1e46b3c4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 6 18:48:29 2018 -0300

    Bug 21205: Replace C4::Items::GetOrderFromItemnumber calls
    
    This is done to ease the move of C4::Items (bug 18252) to Koha::Items
    
      my @itemnumbers = GetItemnumbersFromOrder($order->{ordernumber});
    will become
      my @itemnumbers = $order_object->items->get_column('itemnumbers');
    
    Test plan:
    - Create an order with several items
    - Receive some items
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9dc5a53daabc0b7a07430bf0f5ba469d2b4c2e6c
Author: Matthias Meusburger <matthias.meusburger@biblibre.com>
Date:   Tue Nov 28 16:01:09 2017 +0000

    Bug 18507: Shibboleth auto-provisioning - Sync
    
    This patch allows to update borrowers informations with Shibboleth attributes
    upon login.
    
    Test plan:
    1. In $KOHA_CONF, check that //shibboleth/sync is set to 1
    2. Find an existing user and change one of the values mapped with a Shibboleth attribute
    3. Log in using Shibboleth
    4. Check that the value has been updated with the Shibboleth attribute.
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Comments posted on Bugzilla.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit de3015dabbc438b89d8b76680efc6d602b55d3a5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 8 16:40:06 2018 -0300

    Bug 21413: Call AddBiblio in list context
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d013562745a9683378f65316c15f955e2b6e25d3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 8 18:00:13 2018 +0000

    Bug 12365: (RM follow-up) Fix schema files
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 92944ae3a4944c61e7c491a9aef23822a8d543d9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 31 11:13:49 2018 -0300

    Bug 15395: Fix QA failure - filter not found
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3bd68dace98a6cf72c862a512b11851299f1b333
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 31 11:02:56 2018 -0300

    Bug 15395: Use POSIX::setlocale
    
    To keep compatibility with jessie (that have Message::Locales 1.23, so
    without setlocale)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ee0c8f319a5cfa9a23d6ac2be0cd2d6ebf70beed
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Oct 25 15:04:46 2018 +0200

    Bug 15395: Do not process template files that do not use i18n.inc
    
    It should make the string extraction process a little faster
    
    For the record, I timed some parts of the process to see why it was so
    slow, and without surprises the most time-consuming task is the Perl
    code analysis by PPI with an average time of 50ms by "template block" on
    my machine.
    Multiply that by the number of template blocks (approximatively 900),
    that gives us 45 seconds just for this task.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d1c6e70b446ff0f099f42e29352c5b718b36b0b1
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Oct 25 14:06:03 2018 +0200

    Bug 15395: Make QA test script happy
    
    It is not totally happy because of the template file used in tests.
    It has line breaks inside TT directives and QA test script complains
    because line breaks in TT directives confuse the current translatable
    strings extractor.
    However this patchset (along with bug 20988) will hopefully make the
    current extractor obsolete and thus make the 'no-line-breaks' rule
    useless
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit eae72c6712d1eec517afb428ca0c013aada4c706
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Oct 25 13:44:43 2018 +0200

    Bug 15395: Add unit tests for extract_messages_from_templates
    
    Because LangInstaller use FindBin to define some paths, the test
    produces warnings about a missing directory. I'm not sure how we can
    avoid that.
    
    Test plan:
      1. prove t/LangInstaller.t
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7ada579ae056537cd8fb87eaaedaabd84ec62689
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Oct 25 11:22:24 2018 +0200

    Bug 15395: Do not use nl_putenv, use $ENV instead
    
    nl_putenv is only useful on Windows systems
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6d6bc705ec4f9697076dbb01ebdafced5fa92492
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Oct 25 10:48:23 2018 +0200

    Bug 15395: Make msgmerge quiet
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d708255c7a4d981c7c7bdd0644a75202ec43b297
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Dec 15 02:31:03 2015 +0100

    Bug 15395: Allow correct handling of plural translation
    
    Locale::Maketext does not allow correct handling of plural translation
    for languages that have more than one plural forms.
    Locale::Messages does.
    
    So Koha::I18N is now a wrapper around Locale::Messages, just like
    Locale::TextDomain, and export the same symbols as Locale::TextDomain.
    You can refer to documentation of Locale::TextDomain to know how to use
    exported subroutines.
    
    Example usage:
      __("Hi")
      __x("Hi {name}", name => 'Bob')
      __n("item", "items", $num_items)
      __nx("one item", "{count} items", $num_items, count => $num_items)
      __p("Bibliographic record", "item")
    
    This patch also brings Koha::I18N power to Template::Toolkit templates
    by adding a TT plugin.
    This plugin can be used like this:
    
    [%# USE the plugin and define some macros %]
    [% PROCESS 'i18n.inc' %]
    
    [%# tn is the equivalent of __n %]
    [%# macro names can't start with underscore, t is for "translate" %]
    [% tn('item', 'items', num_items) %]
    Extraction of strings from templates is a bit complicated and use
    Template::Parser and PPI. Template is compiled into Perl code and then
    analyzed by PPI. It is slow, but should be correct even with complex
    constructions.
    
    Remove dependency to Locale::Maketext and Locale::Maketext::Lexicon
    Add dependency to Locale::Messages and PPI
    
    Test plan for translation in Perl code:
    1. Open a .pl script or .pm module with your favorite text editor
    2. Add 'use Koha::I18N;' in the beginning of file
    3. Use one of the subroutines exported by Koha::I18N and be sure to have
       a way to visualize the result (pass result to the template for
       example, or simply warn and watch the log file)
    4. cd misc/translator && ./translate update fr-FR # try other languages
    5. Open misc/translator/po/fr-FR-messages.po and translate your
       string(s)
       You may need to change the "Plural-Forms" header. See
       https://localization-guide.readthedocs.org/en/latest/l10n/pluralforms.html
    6. ./translate install fr-FR
    7. Use your web browser to go to the page that should display the
       translation, change language and verify the translation is correct
    8. prove t/Koha/I18N.t
    
    Test plan for translation in templates:
    1. Open a template file (.tt or .inc) with your favorite text editor
    2. Add the PROCESS directive mentioned above in the beginning of file
    3. Use one of the t* macros defined in i18n.inc. They are used like
       their "__" equivalent, with one difference: the 'x' variants take a
       hashref instead of a hash as last parameter
    4. cd misc/translator && ./translate update fr-FR
    5. Open misc/translator/po/fr-FR-messages.po and translate your
       string(s)
    6. ./translate install fr-FR
    7. Use your web browser to go to the page that should display the
       translation, change language and verify the translation is
       correct
    
    Signed-off-by: Marc Véron <veron@veron.ch>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 41ebda2d95f6d01c068a7f4ab82c160105050678
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 8 11:03:15 2018 -0300

    Bug 15184: Fix bad merge conflict with created_by
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b844c3c46fac6d35f6bfb08fb18294912ef0dcbb
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Oct 28 16:35:09 2018 +0000

    Bug 15184: Fix TT filter
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4f51ad613699919fae357a3ae8bc1248d0b4fc6f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 15 16:52:41 2018 -0300

    Bug 15184: Add missing html filters
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 222a0efa5e25e27b00e4db55bb4c403296b4a694
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sun Sep 16 09:25:16 2018 -0700

    Bug 15184: Improve styling
    
    - Move "Show inactive" checkbox closer to the "Show inactive" text.
    - Put more space between the "Show inactive" checkbox and the "The
    original..." text
    - Add "Check boxes to duplicate the original values" at the top of the
    fieldset
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5cd4b1cc86766d6c2723422ffb762aeb8c1f0a9f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sat Sep 15 14:00:31 2018 -0700

    Bug 15184: Change permission (+x) on .pl
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bbe179a1d50bba9a7d101b42d05d924335bbff38
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Sep 7 13:46:12 2018 -0300

    Bug 15184: Set created_by to the logged in user
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d658cb6f7ecb18845a78d4708ee63ad1126f220f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Sep 7 13:43:15 2018 -0300

    Bug 15184: Do copy items for not a serial OR if items are created on ordering
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1883508b2ae38216e9481c3356f517231e933738
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 31 13:40:08 2018 -0300

    Bug 15184: Remove the checkboxes on the last step
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9e75d96d62e4ed4ccec911920ed2948c16e6ce1d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 29 15:17:40 2018 -0300

    Bug 15184: add missing filters
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6aa113b28b1bd1aff0ad370a12f50ed25789d8e1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 29 15:06:42 2018 -0300

    Bug 15184: Add POD
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bf5d8115f5db26b43f829932b657bf864dce7a04
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 27 15:48:31 2018 -0300

    Bug 15184: Add the ability to duplicate existing order lines
    
    This patchset adds the ability to duplicate existing order lines to a
    given basket. It will help acquisitions of serials of when the same
    publication is ordered frequently.
    
    The workflow will be:
    - Create a new basket
    - Use the "Add to basket" button
    - Select the new entry "From existing orders (copy)"
    - Search and select the order you want to duplicate
    - Define some default values for these orders
    - Duplicate!
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1c58a309f1bbbc3650924f2520b8b021a9b2a262
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 27 15:48:23 2018 -0300

    Bug 15184: Add the ordernumbers filters to GetHistory
    
    It adds the ability to return the result of GetHistory given a list a
    ordernumbers
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 64f445022b1c1f7bce64ac75e2d76e8447798ec0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 27 15:47:06 2018 -0300

    Bug 15184: Prepare the ground - Move funds and sort fields autoupdate
    
    We are going to reuse the same logic: when a fund is selected the
    statistic values are automatically updated.
    Let move it to make it reusable more easily and isolate the code.
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 32a50dc45ee561056c40e4c032c321ad5ccd5c68
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 27 15:46:32 2018 -0300

    Bug 15184: Prepare the ground - Move order search filters
    
    We are going to reuse these filters so we move it to a separate include
    file.
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 52a851f32d072985a0ed84a17902409e0d4f6b35
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 8 15:42:53 2018 +0000

    Bug 20312: DBRev 18.06.00.057
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1f9aa587311515400ea6579dcb25642cb0512711
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 8 15:51:37 2018 +0000

    Bug 20312: Add missing filters
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3ac989e3c5ca5f5f59870d31cd5284fd064b30d9
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 8 15:41:18 2018 +0000

    Bug 20312: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7426fab45eed5f73e821f29a8e990f3ae6d5b3f1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Oct 31 13:53:16 2018 +0000

    Bug 20312: (QA follow-up) Make display syspref driven
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 587e12100f4c35caa395e27815fcc03e6bfb4e5d
Author: Pierre-Luc Lapointe <pierreluc.lapointe@inLibro.com>
Date:   Fri Aug 17 16:45:23 2018 -0400

    Bug 20312: Add a link to last consulted patron
    
    This new feature adds a link to the last patron consulted
    in the staff site. It uses cookies to save this information.
    When a staff site user accesses a patron record, the ID, name
    and card number of the patron will be saved in the cookie.
    
    To test:
    1- Apply the patch
    2- Go to a patron details' page
    4- Go to another page
    4- Verify that the link "Last patron" appears on the top-right
       corner of the screen
    5- Click on the link
    6- Verify that you are at the patron's checkout page
    7- Click on the "X" button next to the "Last patron" link
    8- The link should be gone
    9- Go to another page
    10- The link shouldn't appear (until the next patron detail's
        page)
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 347cc47fe4609d208715c171ed0612e5ff8e1ee1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 8 11:15:04 2018 -0300

    Bug 12365: Fix GetHardDueDate.t test
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ff2040d9dc51a0efbc0ff2d56f741deb1ed4133a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 8 15:35:50 2018 +0000

    Bug 21079: DBRev 18.06.00.056
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0372a9e95e7baf4e5699c372d1ba5550d351998d
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu Nov 8 14:28:48 2018 +0000

    Bug 21079: (follow-up) Move from Try::Tiny to eval
    
    In line with similar examples already in Koha, we now eval the
    transaction, instead of putting it in a try/catch block.
    
    This patch also addressed the other comments made in
    https://bugs.koha-community.org/bugzilla3/show_bug.cgi?id=21079#c10
    
    - AutoCommit & RaiseError are now reset
    - Don't set the version if the update fails
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fccbdf4daea0a2ecc227f5d32e4f858be3820e65
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Jul 17 14:49:47 2018 +0100

    Bug 21079: Unify metadata schema across backends
    
    This patch contains a database upgrade that takes appropriate metadata
    properties relating to articles in the FreeForm backend and creates
    metadata that corresponds with the metadata being created by the BLDSS
    backend. This enables us to create templates that can display metadata
    equally across any backends that contain this metadata;
    
    To test:
    - Ensure you have at least one article request created with the FreeForm backend
    - Check the metadata for the request:
      => TEST: You should have properties such as 'article_title', 'article_author' populated
      => TEST: You should NOT have properties such as 'container_title' &
      'pages'
    - Run the upgrade
      => TEST: For the same requests you should now have the following
      properties (if their values were originally populated):
        - container_title (this should correspond with what *was* 'title')
        - title (this should correspond with 'article_title')
        - pages (this should correspond with 'article_pages')
        - author (this should correspond with 'article_author')
    
    Signed-off-by: Stephen Graham <s.graham4@herts.ac.uk>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 87b877e492c317ecf6b6e5cfe5c942e11540aef1
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 7 13:43:52 2018 -0300

    Bug 21413: Fix condition to avoid operator bnding isssues
    
    The original WHERE condition wasn't enclosed in parenthesis, and hence
    was subject to binding precedence issues in some situations.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f11a107b5dea8a6d936f8c75458be8e1e972a3ad
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Oct 27 13:08:18 2018 +0000

    Bug 21413: (QA follow-up) Rename new option
    
    Trying to make the terminology a little more consistent
    as we already use items instead of copies directly
    above and leaning on the description of the page it
    refers to.
    
    Old:
    Skip copies marked as waiting holds
    
    New:
    Skip items on hold awaiting pickup
    
    Skip items on hold awaiting pickup
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a74f8eb6343079eef1af1ccdd1f5e059f8712383
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Sep 26 11:41:14 2018 -0300

    Bug 21413: Inventory - Skip items with waiting holds
    
    This patch enables items to be skipped for inventory stocktaking
    if the item is currently a waiting hold. The intention is to skip
    items that should be on the holds waiting shelf in the library.
    
    Test Plan:
    1) Apply this patch
    2) Generate a list of barcodes ordered by callnumber
    3) Select one of those items and place it on hold, then confirm the hold
    4) Remove that barcode from the list of barcodes
    5) Browse to the inventory tool, choose your barcodes file
    6) Run the inventory tool with that barcode file.
    7) Note the tool says that item should have been scanned
    8) Click the browsers back button to return to the previous page
    9) Check the checkbox for "Skip copies marked as waiting holds"
    10) Run the tool again, not it does not flag that item as previously
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 07579849d664a2156282410271a2470ce0ce6fdc
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Sep 26 11:08:59 2018 -0300

    Bug 21413: Unit tests
    
    To test:
    - Apply this patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/Items/GetItemsForInventory.t
    => FAIL: Tests fail!
    - Apply the next patches on the bug
    - Run:
     k$ prove t/db_dependent/Items/GetItemsForInventory.t
    => SUCCESS: Tests pass!
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 09c76aa01020dc68c22136a6549eeb90530d37e4
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 8 12:09:37 2018 +0000

    Bug 12365: DBRev 18.06.00.055
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ccae80f5e87d1b86754d092e74c1af03850bc1b2
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Oct 22 23:31:29 2018 +0000

    Bug 12365: (follow-up) Fixing broken circ rules table
    
    Adding filters to note to satisfy qa test tools
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1fa74499070da0aca19ccc3d4c1e1e97d8f500db
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Thu Oct 18 02:36:35 2018 +0000

    Bug 12365: (follow-up) Putting backticks in atomicupdate
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 63595cce65f54ad46029976786d381b944bfe0ff
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Jul 4 00:12:21 2018 +0000

    Bug 12365: (follow-up) Adding maxlength attribute and popover
    
    Test that you can't add a note of more than 100 characters.
    Test notes with rules, notes are hidden by 'View note' and the
    popover correctly displays note.
    View the note by hovering over the link
    I've moved the Note column so the popover displays nicely and doesn't
    cover the buttons. I've also changed the placement so that it doesn't
    cover information in the row.
    
    Update: Test that you can edit the note when clicking 'Edit' and that
    behaviour is the same for editing all other fields
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 812b3d66b573beabefdb3f66d74d3df3abb3eccd
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Jun 19 19:47:52 2017 +0000

    Bug 12365: Notes for rules
    
    This patch adds a note column to the circ and fine rules to act as a
    description line for the rule.
    
    To test:
    1) Apply patch, update database (may have to also update schema)
    2) Go to Admin -> Circ and fine rules
    3) Scroll to the right, notice new Note column
    4) Confirm it works to create a brand new rule with a Note
    5) Confirm it works to modify an existing rule with a Note
    
    Sponsored-by: Catalyst IT
    
    Lee Jamison <ldjamison@marywood.edu> rescued this patch.
    It is a clean re-build of attachments 61865 and 63902
    to fix the merge conflict introduced during application of both
    attachments.
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: macon  lauren KohaCon17 <caballeromaricon@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6932e104f31bc80e7320fe9f5d48ed16d5fb4d3a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 6 11:03:28 2018 -0300

    Bug 21770: Allow html_entity for href
    
    We certainly should not expect this filter to be used much for href, but
    we have one occurrence that needs it.
    
    Test plan:
    t/template_filters.t and xt/find-missing-filters.t must return green
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f9e83266d1e4c987412a57a77ca7d0a4d653a65b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 6 10:55:50 2018 -0300

    Bug 21770: Add tests for html_entity
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f3c51f99d164a31e10161fdf5d2b80a989735854
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Fri Mar 23 17:32:30 2018 +0100

    Bug 20486: Add --marc_conditions option to export_records.pl
    
    Add --marc_conditions option to export_records.pl script, for
    excluding records based on conditions applied to MARC-record
    data.
    
    How to test:
    1) Run tests in t/db_dependent/Exporter/Record.t
    2) All tests should pass
    
    Sponsored-by: Gothenburg University Library
    
    Signed-off-by: Maksim Sen <maksim.sen@inlibro.com>
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3e20a2aa2229b6f93bf3ddfae3ff323690c75c2c
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Nov 2 09:58:06 2018 +0100

    Bug 21755: Show patron updated date in circ menu
    
    In borrowers table the column updated_on stores the last updated date and time.
    Display this in the circ menu.
    
    Test plan:
    1) Go to a patron details page /cgi-bin/koha/members/moremember.pl
    2) Look at left menu, you see "Updated on" and a date and time
    3) Edit this patron and save
    4) Check that "Updated on" changed
    5) Click on each tab of menu to check this date is displayed
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Devinim <kohadevinim@devinim.com.tr>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9fb827d59d0421b1f3e2de36239cef4c7411c666
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 17 15:47:29 2018 -0300

    Bug 21015: Remove unecessary 'use Koha::Schema' statements in t/
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 83e0765f448c35c6f387d41fe39feb94b9bc64f3
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Fri Jun 29 11:09:41 2018 +0300

    Bug 21015: fix performance issue with C4::Members
    
    loading Koha::Schema ("use Koha::Schema;") takes significantly time as
    it loads almost a couple hundred classes. Koha::Database has done that
    already once and we can use it to get the ResultSet "Borrower" as
    well, so let's use that. This also make the code more unified because
    Koha::Database is used throughout the code instead of Koha::Schema.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a83bc8ca4c15200c7d66a578f37d02095541018f
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Nov 1 13:11:35 2018 +0100

    Bug 12258: (QA follow-up) Add some missing rrrrrrs
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=21158
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 380f1dcbf8d3b8e65a733cc3174b9d0c0a46ab7d
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Fri Aug 3 16:03:10 2018 -0400

    Bug 21158: Add cronjob references to the system preference descriptions if a cronjob is required
    
    This patch adds references to cronjobs in the description of some system preferences.
    
    The following system preference description were modified:
    - StaticHoldsQueueWeight
    - ExpireReservesMaxPickUpDelay
    - AutoResumeSuspendedHolds
    - finesMode
    - DefaultLongOverdueLostValue
    - DefaultLongOverdueChargeValue
    - PatronSelfRegistrationExpireTemporaryAccountsDelay
    - PatronSelfRegistrationVerifyByEmail
    - EnhancedMessagingPreferences
    - NewItemsDefaultLocation
    - InProcessingToShelvingCart
    - ReturnToShelvingCart
    - ReturnToShelvingCart
    - AuthorityMergeLimit
    - OpacBrowser
    - OpacCloud
    - UsageStats
    - PurgeSuggestionsOlderThan
    - MembershipExpiryDaysNotice
    
    To test, check the above mentioned system preferences to make sure the sentence is there and it is correct.
    
    Followed test plan and patch is as described
    Signed-off-by: Alex Buckley <alexbuckley@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=12258
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 70f7d801b7337445aa26c63455813b1990edcc90
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 29 12:32:58 2018 +0000

    Bug 21628: (follow-up) Indentation and filter corrections
    
    This patch modifies the new waiting_holds.inc to fix the indentation. A
    template variable filter has been added to quiet QA tool warnings.
    Buttons are now styled as Bootstrap buttons.
    
    To test, apply the patch and view the holds report. Confirm that
    everything looks correct. Validate the HTML and confirm that there are
    no errors in the HTML of the body of the page.
    
    Followed test plan, everything looked correct and no HTML errors on
    waitingreserves.tt found by HTML validator
    
    Signed-off-by: Alex Buckley <alexbuckley@catalyst.net.nz>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b23e544bd9db0ecaaf07688172e1ebc8da5a49dd
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Oct 22 15:20:45 2018 +0000

    Bug 21628: Simplify holds awating pickup report
    
    To test:
    1 - Place a number of holds
    2 - Check in the items and confirm the holds
    3 - Visit /cgi-bin/koha/circ/waitingreserves.pl
    4 - View the report
    5 - Apply patch
    6 - Confirm that the report looks the same
    7 - Confirm cancelling holds works as before
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Followed test plan, patch worked as described
    Signed-off-by: Alex Buckley <alexbuckley@catalyst.net.nz>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9670becc164475b57f3258a512d88779c1ead6c3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 29 12:15:19 2018 -0300

    Bug 21715: Ease translation of account and account offset type descriptions
    
    This patch moves accounts-related descriptions into a single file to
    ease finding them, and also encloses descriptions inside <span> tags to
    make it easier to translate.
    
    To test:
    - Apply this patch
    - Verify the templates work as expected
    => SUCCESS: No behaviour change
    - Sign off :-D
    
    Bonus: there were two cases in which the INCLUDE line used 'accountline'
    as parameter, making it fail to pick the right account type!
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 543630b3c47322f071875627ea028a187928cdfc
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Oct 29 23:36:11 2018 +0000

    Bug 21719: Fix typos
    
    This patch was generated using codespell
    
    Test plan:
    Read through changes and confirm they make sense
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=21706
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ca1c87c7eee65ca79b52f999213e53f1f0ee32f0
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 3 16:06:37 2018 +0000

    Bug 21433: Update two-column templates with Bootstrap grid: Tools part 1
    
    This patch modifies several tools templates to use the
    Bootstrap grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags in the modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Tools -> Automatic item modifications by age
       - View and edit rules
     - Tools -> Batch item modification start page
     - Tools -> Batch delete records
       - Starting page
       - Confirmation page
       - Completion page
     - Tools -> Batch record modification
       - Starting page
       - Confirmation page
       - Completion page
     - Tools -> Batch patron deletion/anonymization
       - Starting page
       - Confirmation page
       - Completion page
     - Tools -> CSV profiles
       - View and edit CSV profiles
    
    Signed-off-by: “Lucas Gass” <lucas@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a08e72c5e72ebbd17cc088584d097ecfa6b1e4d2
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Oct 26 10:52:45 2018 +1100

    Bug 21666: Replace unsupported use attribute with more widely supported attribute
    
    search.js uses the 1=1004
    author personal attribute which isn't supported by libraries like
    Seattle Public Library.
    
    This patch aligns search.js
    with C4/Breeding.pm which uses the more widely supported 1=1003
    author attribute.
    
    To test:
    1. Set up Seattle Public Library as a Z39.50 target
    2. Try to search author using the Advanced Editor advanced search
    3. Observe failure
    4. Apply the patch
    5. Try to search again
    6. Observe successful retrieval of records
    
    Signed-off-by: Cori Lynn Arnold <carnold@dgiinc.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4abe3a4082c8fc28b99b2d54825442d2328b4eef
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 8 01:50:34 2018 +0000

    Bug 18316: (follow-up) Don't let 'fields' be undef and adjust tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4a060e18f994d98e6212c8578ab358c54820a97b
Author: Alex Arnaud <alex.arnaud@gmail.com>
Date:   Wed Apr 18 14:19:34 2018 +0000

    Bug 20602: Use weighted fields in OPAC simple search
    
    Test plan (having Koha working with Elasticsearch):
      - apply this patch,
      - try searches with and without weight defined on search fields
    
    https://bugs.koha-community.org/show_bug.cgi?id=20262
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 07526d897a566c082860120c721bc1c610a24e48
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Nov 7 23:08:03 2018 +0000

    Bug 18316: DBRev 18.06.00.054
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 529d8cd7307cc34ebd1a9a58256ad9ed00e33c42
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Oct 29 14:40:06 2018 +0000

    Bug 18316: (QA follow-up) Add final missing filter
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 973bc0aceba522301217817239f1a9388ffda145
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Tue Oct 9 14:27:20 2018 +0000

    Bug 18316: (follow-up) remove use_dis_max
    
    It is true by default on ES 5 and has been removed on ES 6
    
    Signed-off-by: Ere Maijala <ere.maijala@helsinki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0bfcac5a079318be7c5d20c6d52af45169eab922
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Sep 4 12:46:30 2018 +0000

    Bug 18316: (follow-up) Fix tests and update statement
    
    Signed-off-by: Ere Maijala <ere.maijala@helsinki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 74198af0fe01035a6fcbf7af75fedcc06f4ae5d8
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Fri Jun 1 11:39:45 2018 +0200

    Bug 18316: Fix field weight validation/deletion bug
    
    Signed-off-by: Ere Maijala <ere.maijala@helsinki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 474b9a1672b3b62d8c24fe72127bdadd1a11ff3f
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Mon May 21 14:24:36 2018 +0200

    Bug 18316: Change search field weight field to decimal
    
    Signed-off-by: Ere Maijala <ere.maijala@helsinki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9380134a026c3927373557d9bb4cb6d7082a8b7c
Author: Alex Arnaud <alex.arnaud@gmail.com>
Date:   Mon Apr 23 10:25:14 2018 +0000

    Bug 18316: (follow-up) Koha::SearchField::search_marc_maps return a result set - code refactoring for gettings weighted fields - Koha::SearchFields::weighted_fields return a result set
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Rebased-by: Alex Arnaud <alex.arnaud@biblibre.com>
    Signed-off-by: Ere Maijala <ere.maijala@helsinki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9db54580a64ecb8aacbcbe8f65abeb244db7275a
Author: Alex Arnaud <alex.arnaud@gmail.com>
Date:   Thu Apr 12 16:13:29 2018 +0000

    Bug 18316: String changes
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Rebased-by: Alex Arnaud <alex.arnaud@biblibre.com>
    Signed-off-by: Ere Maijala <ere.maijala@helsinki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fa853f7d38a5addafe21fb3cabdaaa9cc692bb12
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 21 13:27:12 2018 +0000

    Bug 18316: Add weighting/relevancy options to ES query on simple search
    
    The idea is the following: if some search field(s) are weighted in
    search engine config page, Koha will query ES on all fields plus those with
    the coresponding weights. Else, search is done on the entire record with
    no weighting. The advanced search page is unaffected by these changes
    
    Test plan (having Koha working with Elasticsearch):
      - apply this patch
      - have some weights defined for various fields
      - try searches from the search bar and from the advanced search page
      - confirm weighting affects the relevancy (in expected ways)
          e.g.
          1. search for 'a' from advanced search, note results
          2. give 'title' a weight
          3. search for 'a' using the simple search bar
          4. results with 'a' in the title should now be more relevant
      - confirm search results on advanced search page are unaffected
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Rebased-by: Alex Arnaud <alex.arnaud@biblibre.com>
    Signed-off-by: Ere Maijala <ere.maijala@helsinki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5f0bc6e457f19b889d5f12ee92d6ca5e5effdf42
Author: Alex Arnaud <alex.arnaud@gmail.com>
Date:   Thu Mar 29 14:20:59 2018 +0000

    Bug 18316: Ability to weight search fields
    
    Weight can be defined between 1 and 99.
    only search fields mapped with biblios can be weighted
    
    Test plan:
      - apply this patch,
      - update schema file (perl misc/devel/update_dbix_class_files.pl),
      - go to Administration > Search engine configuration,
      - in search fields tab, define weights for some fields and save,
      - check weights has been saved,
      - reset some weights (empty) and save,
      - check weights has been reset
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Rebased-by: Alex Arnaud <alex.arnaud@biblibre.com>
    Signed-off-by: Ere Maijala <ere.maijala@helsinki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5755f30b1b472b5fbf1d8e8fd031efdcd1ed0518
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Sep 13 08:41:10 2018 +0200

    Bug 21299: (QA follow-up) Rename module and subroutine
    
    See QA request at comment7.
    Removing camelcase from subroutinename.
    Renaming module to Koha::Util::Navigation (after cmty feedback).
    
    Test plan:
    Run t/Koha/Util/Navigation.t.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 07d5f76225a3acd905fecf53ccdc4f52474d7ffc
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Jul 30 12:57:58 2018 +0200

    Bug 21299: Introduce localReferer in [opac-]changelanguage.pl
    
    With the work from the former patch, we now have a nice and easy replace..
    
    NOTE: The additional logic in opac-changelanguage.pl is now also applied
    to the intranet counterpart (changelanguage.pl). This effectively makes
    changelanguage.pl no longer refer to external URLs (as the opac already
    did by testing the referer). Might be just theoretical, but consistent.
    
    Test plan:
    Test changing language from various OPAC and staff locations.
    Include language=[some_language] in the URL before changing language.
    [Bonus] Test calling changelanguage.pl from another server. You should no
    longer be referred back to the calling server. (See below.)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Added link <a href="[mystaffserver]/cgi-bin/koha/changelanguage.pl?language=en">link</a> somewhere on external server.
    Verified that without this patch, it hits the staff server and refers back to the caller. But with this patch, it refers to staff homepage.
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit db539f4dc0b5f7ceb0726c97c95310d5b853de15
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Jul 30 12:18:31 2018 +0200

    Bug 21299: Add localReferer function to Util module, add test
    
    Before implementing the change in [opac-]changelanguage, we define a new
    function (in Koha/Util.pm) and add tests.
    
    Test plan:
    Run t/Koha/Util/localReferer.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dc43a4b4b3d7cb622bb5c91a25dabf4c5e2ccbdb
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Nov 7 21:49:07 2018 +0000

    Bug 15494: DBRev 18.06.00.053
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5594afb9c29a8b6db2a493330652f8766ae1b53a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Sep 24 11:06:47 2018 +0000

    Bug 15494: (follow-up) Update tests to generate their own data (no delete)
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4ed7a533ab437a72524f7b3ef660814999fde951
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 21 20:16:24 2018 +0000

    Bug 15494: (follow-up) Move yaml syspref code to its own sub in SySpref object
    
    To test:
    1 - prove -v t/db_dependent/Koha/Config/SysPrefs.t
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 114c1dfb2c0d8a14ea12e800ab57f1f942d0aa2b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 2 08:11:55 2018 +0100

    Bug 15494: (QA follow-up) Additional polishing
    
    [1] Fix two typos in Circulation.t.
        Although the test does not fail, line 2127 contains two typos.
        Changing INVISILE to INVISIBLE :)
        And type should be itype.
    [2] Remove $yaml as leftover from older code.
    [3] Add a next when the split on /:/ does not give two results. This will
        prevent uninit warnings (although still disabled now in Circulation).
    [4] For the same reason we should switch the lines for NULL and empty
        string. The undefs you insert should trigger a warn.
    [5] The line for empty string should not insert undef, but empty string.
        For the same reason adding the condition defined($_) ...
        And proving it by adding two tests for the opposite values of
        callnumber and itemnotes.
    [6] Adding a strip spaces around the fieldname. User friendly..
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b170f77d10bfc05eb346361c8d61819779fdd798
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 24 09:47:34 2017 -0400

    Bug 15494: Add syspref
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 72750cf3b7001b02237c4145121e1071b2ca65da
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 24 09:31:59 2017 -0400

    Bug 15494: Update display of renewal errors
    
    To test:
    1 - Define a rule to deny renewal
    2 - Checkout an item meeting this rule
    3 - Attempt renew an item via the OPAC
    4 - Attempt renewal via SIP
    5 - Attempt renewal via staff client
    6 - Verify errors are reasonable
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 633a587213ba59b977d8aa1a2f69f6307ceafae2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 24 08:52:27 2017 -0400

    Bug 15494: Add _items_denied_renewal sub to C4:Circulation::CanBookBeRenewed
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f193ce664c2bd32d7ae57656fe8f9e0547098e4a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 24 08:50:16 2017 -0400

    Bug 15494: Unit tests
    
    prove -v t/db_dependent/Circulation.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 036d5dd8db0dba26d5a0c540c11f1e414dc33fc1
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Sep 25 10:54:04 2018 -0300

    Bug 21408: Enable checkbox on file selection
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c0bc29eaf377737663c719dc4ac9fdd25fc608aa
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Sep 25 10:16:53 2018 -0300

    Bug 21408: Inventory - Warn of items possibly scanned out of order
    
    This patch addes the ability to choose to be warned if it's possible
    an item was scanned out of order ( i.e. mis-shelved ).
    
    Test Plan:
    1) Apply this patch
    2) Generate a list of barcodes ordered by callnumber
    3) "Misplace" one callnumber by moving it to another area of the list
    4) Browse to the inventory tool, choose your barcodes file
    5) Check the checkbox for "Check barcodes list for items shelved out of order"
    6) Click "submit", note the item has been flagged as possibly out of order
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e40907a67e6fdcdca6e4eda4c1a74a238275fe1c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Nov 7 14:01:59 2018 +0000

    Bug 14391: (follow-up) check for correct patron categories permission
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 29456ce3d8115a2287fd7c103c9fd9acd9bbee1b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Nov 7 13:04:51 2018 +0000

    Bug 14391: DBRev 18.06.00.052
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d932101fa3ff620cd61994cecec6117ebb8ca2e7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Nov 7 12:54:54 2018 +0000

    Bug 14391: (RM follow-up) Adjust a few template conditions
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a29824970c900706b5fe158379c357516937730c
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Oct 28 19:03:56 2018 +0000

    Bug 14391: (QA follow-up) Correct database update for manage_item_search_fields permission
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 89b16151ca89400f80d7c1a847ffe69cc84b02cb
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Sat Oct 27 14:10:11 2018 +0000

    Bug 14391: Move udpate to perl
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fa611c5b7299c0c2d813d478f2beea95236f5951
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Oct 12 20:21:39 2018 +0200

    Bug 14391: Keep parameters_remaining_permissions for now
    
    Since this patch has been written, new references to this
    permission have been added to the code:
    
    - t/db_dependent/api/v1/stockrotationstage.t
    - t/db_dependent/api/v1/cities.t
    - admin/overdrive.pl
    
    Instead of removing the permission, let's keep it for now
    and do more clean-up later in separate patches if required.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 88753242468cc4c88d916ab9aa57e8473539b9dc
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Sep 28 01:51:05 2018 +0000

    Bug 14391: (QA follow-up) Fix some typos
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 16f475e49358a5a808f34edb301605a480efac2e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Aug 24 09:19:48 2018 +0200

    Bug 14391: (QA follow-up) Resolve POD warn on svc..systempreferences
    
    *** WARNING: No items in =over (at line 48) / =back list at line 54 in file svc/config/systempreferences
    *** WARNING: No items in =over (at line 73) / =back list at line 79 in file svc/config/systempreferences
    
    => If you use 'over', you should add 'item'-s.
    
    Test plan:
    Run perldoc svc/config/systempreferences
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 252f4674a56301c22dda32f2d41985c26f185650
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat May 19 05:32:14 2018 +0000

    Bug 14391: Add granular permissions to the administration module
    
    So far the administration module only allowed for 2 permissions:
    - circulation conditions (manage_circ_rules)
    - everything else (parameters_remaining_permissions)
    
    With this patch almost every section of the administration page
    will have its own granular permission.
    
    To test:
    - Create different staff users:
      1) One with parameters_remaining_permissions
      2) One with parameters
      3) One with catalogue and no parameters
      4) One superlibrarian
    - Apply the patch
    - Run the database update
    - Check the staff users:
      1) All subpermissions, but manage_circ_rules
         should be checked
      2) Nothing should have changed
      3) manage_item_serach_fields shoudl be checked
         (page had catalogue permission before)
      4) Nothing should have changed
    - Try different settings of the permissions and
      verify that
      - Administration page behaves correctly
      - Administration menu behaves correctly
      ! You shoudl only see what you have permission for
    
    https://bugs.koha-community.org/show_bug.cgi?id=14391
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7bd3e6736cf057682ccbd01574d979670e18132b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 2 12:34:25 2018 -0300

    Bug 21474: Add the Koha::Subscription->frequency method
    
    And the 2 modules for the subscriptions' frequencies
    
    Test plan:
      prove t/db_dependent/Koha/Subscription.t
    must return green
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=21475
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dec84e08208b16ea0d6c1423b8d0b724a5c3a777
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 19 12:49:05 2018 +0100

    Bug 21619: Expand tax abreviations in acquisitions form hints
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 702ca8e9a341ea8350bb69596be5ce8c29596b45
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Sep 21 11:42:28 2018 +0100

    Bug 21387: Receive items from - form should include tax hints
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5e3f428ade0a20062df1fd2852cb4cb99ae06f7b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 6 14:25:02 2018 -0300

    Bug 20996: Remove warning 'Un-mocked method'
    
    t/db_dependent/api/v1/illrequests.t .. Un-mocked method 'status_graph()'
    called at /home/vagrant/kohaclone/Koha/Illrequest.pm line 439.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d05a7e4a73066a546d7ebcfc5af215a0549ae1fb
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 6 16:36:03 2018 +0000

    Bug 20996: (RM follow-up) Fix the api tests
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 41a172ac4f3255a57c1285c5b47dadb407a4ef22
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Mar 16 11:59:04 2018 +0100

    Bug 20435: Allow lowercase prefix in inventory value builder
    
    Cataloging value builders for inventory stocknumberAV.pl and stocknumberam123.pl use a regexp to define if entered text is a prefix or not.
    It actually only allows uppercase characters. A library may want to catalog with lowercase characters in inventory number and using those value builders.
    Note that in database the text is not case-sensitive.
    
    Test plan:
    1) Configure stocknumberAV.pl value builder on an item subfield
    2) Create an autorized value category 'INVENTORY'
    3) Create in this category a value with code 'UC' and description '10'
    4) Create in this category a value with code 'lc' and description '20'
    5) Create a new item
    6) Focus on stocknumber subfield
    7) Enter '123' and click on value builder, the entry stays '123'
    8) Enter 'UC' and click on value builder, the entry turn to 'UC 0000000011'
    9) Enter 'lc' and click on value builder, the entry turn to 'lc 0000000021'
    Same for stocknumberam123.pl
    
    To elaborate on step #1:
    
    Go to Administration->MARC Bibliographic framework
    Click on the "Action" button to view the framework
    for the item you will be creating, view MARC structure.
    Search for Tag 952 (LOCATION AND ITEM INFORMATION (KOHA))
    Select Actions->Subfields
    Edit subfield i for "Inventory Number"
    In the "Other options" pane, select the plugin to test.
    
    Signed-off-by: Cori Lynn Arnold <carnold@dgiinc.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1885e6a2146dfab4784e3d9560161d5f097cfcae
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Nov 6 15:02:47 2018 +0100

    Bug 21771: (follow-up) Revert the shift statement
    
    Obviously you should never shift an items from an array if you need that
    item later on :)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Tested with entering userid as well as entering email..
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 143d738dab298dece26e03599c1ec2b129476f98
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 24 15:39:13 2018 +0000

    Bug 21647: Clean up SRU fields mapping templates
    
    This patch makes corrections to the SRU field mapping templates
    (bibliographic and authority):
    
     - Bootstrap grid
     - JavaScript to the footer
     - Other markup corrections
    
    To test, apply the patch and go to Administration -> Z39.50/SRU servers
    
    - Add or edit an SRU server
      - Click "Modify" next to the SRU search fields mapping field.
        - Confirm that the popup window layout is correct.
        - Confirm that adding information to the form is correctly saved to
          the SRU server form.
        - Test this process with SRU server record type set to both
          "Authority" and "Bibliographic."
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1dd40741b58b7c6ea7596aaed0af0a5488d49fbd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 26 15:50:59 2018 -0300

    Bug 21696: Use Koha::Account->lines from Koha::Account
    
    There is now Koha::Account->lines, we should use it instead of
    Koha::Account::Lines->search
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7e5f5ec93f1b25b8db12de923d81473011abf8e4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Oct 27 08:42:52 2018 -0300

    Bug 21673: (QA follow-up) Fix typo and remove unused library
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4d28bc7d3cf2a4e6cb8f384d38b5db984759b9b6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 25 16:55:32 2018 -0300

    Bug 21673: Use Koha::Account::Lines->total_amountoutstanding when needed
    
    There are several times the same pattern to retrieve the sum of
    amountoutstanding columns for Koha::Account::Line set.
    We should use Koha::Account::Lines->total_outstanding instead.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1e5e9f5e808d9e17c704f5bd757bc6d51d43059b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 26 13:01:30 2018 -0300

    Bug 20629: (QA follow-up) Remove actions_col
    
    The actions_col template param requires a DB search, only to display the
    'Actions' column header vs. an empty string. But there will always be
    buttons in there, that were added *after*.
    It made sense when only the 'Reverse' button was displayed, but now both
    'Print' and 'Details' are displayed anyway.
    
    This patch removes it for good :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 146f1ca3a6e8f9f309da8b70fec8d90d9ce32090
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Oct 17 06:12:37 2018 -0400

    Bug 20629: Rename reverse_col to actions_col
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b6c8f9f7ef973f791cf9c422315e7bd125f25acf
Author: Mark Tompsett <mtompset@hotmail.com>
Date:   Mon Oct 15 18:50:09 2018 +0000

    Bug 20629: (follow-up) fix reverse_col value
    
    Before this patch the Void button didn't appear.
    After this patch the Void button appears on payments.
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9f112ff75c2049cb3e5a259e38ad27a7282f53d2
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Oct 15 12:53:27 2018 -0400

    Bug 20629: Pass accountline objects to template instead of hashref
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fb15a9631044cd0191c58feb5b8370e9b846136b
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Oct 15 08:02:31 2018 -0400

    Bug 20629: Remove ability to 'reverse' payments
    
    Test Plan:
    1) Apply this patch
    2) Note all references to reversing payments have been removed
    3) Note ability to void payments remains unchanged
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 88eb4d3e20bd698cf73463e5358150dc7145e878
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Oct 26 16:03:20 2018 +0000

    Bug 20078: (QA follow-up) Correct attribute in PQF.pm
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cfc6c112d30393d83e49e4356fcbd658964fece8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Sep 26 15:00:16 2018 +0000

    Bug 20078: (follow-up) Prevent conflict from attribute duplication
    
    To test:
    1 - Apply first patch
    2 - Attempt searching by arp, no results
    3 - Apply this patch
    4 - Copy bib1.att and ccl.properties to the correct locations
    5 - Restart zebra
    6 - Rebuild indexes
    7 - Search agian, success!
    
    Signed-off-by: Margie Sheppard - Central Kansas Library System CKLS <msheppard@ckls.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4478545368d50030c3a2a63519024410837c0a27
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Feb 12 10:58:35 2018 +0000

    Bug 20078: Add accelerated reading indexes to getIndexes
    
    To test:
    1 - Find a bib with 526$c and 526$d populated, or populate them
     e.g. 526$a 5.5 | 526$d 14
    2 - Try searching for 'arl:5.5' or 'arp:14'
    3 - Your record should be returned in results
    4 - Add the indexes as dropdowns by entering the following in intranetuserjs:
    $(document).ready(function(){
            // Add Accelerated Reading Level to advanced search
        if (window.location.href.indexOf("catalogue/search.pl") > -1) {
            $(".advsearch").append('<option value="arl">Accelerated Reading Level</option>');
        }
    
        // Add Accelerated Reading Point to advanced search
        if (window.location.href.indexOf("catalogue/search.pl") > -1) {
            $(".advsearch").append('<option value="arp">Accelerated Reading Point</option>');
        }
    });
    5 - Search using these in the dropdown, your record will not be found
    6 - Apply patch
    7 - Repeat searches directly and by using dropdown, your record should be returned.
    8 - prove t/db_dependent/Search.t
    
    Signed-off-by: Margie Sheppard - Central Kansas Library System CKLS <msheppard@ckls.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f683c181acdd0e7c285f6930c2067b6f20ff00a4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 24 15:31:02 2018 -0300

    Bug 21650: Remove the subroutine C4::Items::GetLastAcquisitions
    
    C4::Items::GetLastAcquisitions has been added by
      commit 7753bbad4fb4df47c8fb4f959fc68764a71cb623
      Adding Some new functions
    
    (?)
    
    Apparently it has never been used, we should remove it to avoid unnecessary maintenance.
    
    Test plan:
      git grep GetLastAcquisitions
    must not return any results
    
    NOTE: POD Coverage test failure is expected on removal
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fef32fac36800b6033367827ff45905db1d261c7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 25 17:17:50 2018 -0300

    Bug 21645: Fix focus when modal is shown
    
    First the event must be defined in the document.ready block, then, since
    bootstrap 3 the event is 'shown.bs.modal', not 'shown'
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1dc17d8502baa50885871419c0152fedc1977710
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 25 17:09:26 2018 -0300

    Bug 21645: e.preventDefault on click
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f6808f5e554c8608e70865f15bf1cb6b39c1221c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 24 14:01:18 2018 +0000

    Bug 21645: Clean up library groups template
    
    This patch modifies the library groups administration page to help
    compliance with several coding guidelines:
    
     - Move JavaScript to the footer
     - Convert to Bootstrap grid
     - Other markup corrections
    
    To test, apply the patch and go to Administration -> Library groups.
    
     - Confirm that the page how has a "Library groups" heading.
     - Confirm that action buttons in the table of library groups are styled
       correctly.
     - Test both adding and editing groups. The "Required" label on required
       fields should be styled correctly.
     - Test all JavaScript-driven interactions on the page:
       - Adding, editing, and deleting groups
       - Removing libraries from groups
       - Expanding and collapsing group hierarchies
     - Validate the page's HTML and confirm that there are no errors found
       in the main body of the page.
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 368a9b1d5316cc1a7bdb91c6b0a55ddd83b6fc4a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jul 24 13:00:21 2018 +0000

    Bug 21570: Update two-column templates with Bootstrap grid: Various
    
    This patch modifies several assorted templates to use the
    Bootstrap grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags and "text/css" attributes from <style> tags in the
    modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Administration -> Plugins
     - Tools -> Comments
     - Acquisitions -> Suggestions
     - Lists
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9c02784fe5d7c3e66334163fa8068406b8bee5c8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 23 12:08:20 2018 -0300

    Bug 20970: Add preventDefault to avoid trailing # to be added to the url
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c9d3e5470709f1f44e0952d06832a45909046ef1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jun 20 16:12:41 2018 +0000

    Bug 20970: Reformat basket information on acquisitions basket page
    
    This patch reformats the display of information on the acquisitions
    basket page, hiding form controls until they are triggered. Some basket
    information is now in the second column in order to balance the two
    columns better.
    
    The "Library" label has been replaced with the more precise "Managing
    library."
    
    Unrelated change: Removed script type attributes.
    
    To test, apply the patch and view a basket in acquisitions. Test these
    processes:
    
    - Adding and removing managing users
    - Setting and changing managing library
    - Setting and changing basket group
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 433eb16fd30d2b4e1e5e65c6d120600054ad2c1e
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Oct 15 06:36:51 2018 -0400

    Bug 21568: Add more spans with classes around callnumbers in OPAC for additional styling
    
    It would be nice if the callnumber portion of the callnumber + label was in a span,
    and it also makes sense to wrap the entire callnumber string in a span as well.
    This was started on bug 21340 but I have found more callnumbers in the search results that need spans.
    
    Test Plan:
    1) Apply this patch
    2) Search for something in the OAPC with multiple results
    3) View the HTML source
    4) Note the new spans around the callnumbers, like: <span class="CallNumber"
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2e003cd04b8626a054412212fe377077658668f2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Nov 5 13:21:33 2018 +0000

    Bug 8630: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c4ff0eac6039c15ef16ced9f7523b931c674ecac
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Nov 5 13:21:11 2018 +0000

    Bug 8630: DBRev 18.06.00.051
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 458e07928505570affd43bd4c8dbe8e1c170a409
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Nov 5 13:08:52 2018 +0000

    Bug 8630: (RM follow-up) Remove loop.odd reference and fix filters
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 529ed6faa43b6c2543695ec594fe891139cca83f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Oct 5 14:31:05 2018 +0000

    Bug 8630: (follow-up) Template corrections
    
    This patch makes two corrections to templates: One to correct the case
    of a variable, an error which I introduced when adding html filters.
    
    The other removes a redundant image tag from the recent comments
    template.
    
    To test, apply the patch and log in to the OPAC as a user with
    checkouts. Cover images on the "your summar" page should appear
    correctly.
    
    View the "recent comments" page and confirm that images still appear
    correctly.
    
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7f6671587c0b78c22c3696f4a468a48a97af840d
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Jul 11 01:00:52 2018 +0000

    Bug 8630: (follow-up) Make Adlibris cover show on OPAC overdues tab
    
    and fix alignment of cover on Staff detail page.
    
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1ba78e0a21b5ccdeb0c9bfbe690929a8ffe4c9cd
Author: Martin Persson <xarragon@gmail.com>
Date:   Wed Oct 7 16:42:57 2015 +0200

    Bug 8630: Adlibris covers (OPAC SCSS changes)
    
    This patch adds two new CSS classes specific to Adlibris covers.
    
    Sponsored-By: Halland County Library
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6e82493b65092f426cd5d5bdbacedc8d79d13469
Author: Martin Persson <xarragon@gmail.com>
Date:   Thu Oct 8 09:13:00 2015 +0200

    Bug 8630: Adlibris covers (OPAC templates)
    
    Changes to OPAC templates.
    Depends on new CSS clases defined in separate patch.
    
    Test plan:
    
    To test this particular patch (intranet templates) you need:
    * The syspref patch applied
    * The intranet CSS patch applied
    
    To test:
    * Apply this patch
    
    * Enable covers (if not done already)
      * Go to staff interface, log in as a priviliged user.
      * Select "More" -> "Administration" ->
            "Global system preferences" -> "Enhanced content".
      * Set ""AdlibrisCoversEnabled" to "Show" under "Adlibris".
      * Save changes
    
    * Add a book with a known cover/ISBN (if none exists)
      * Set MARC field 020 a,
            "INTERNATIONAL STANDARD BOOK NUMBER" to: 9780451524935
      * Set MARC field 245 a, "Title" to: 1984
      * Save changes
    
    * Test opac-results.tt
      * Search library catalog from OPAC for "1984".
      * You should be sent to:
        http://127.0.1.1/cgi-bin/koha/opac-search.pl?idx=&q=1984
      * Cover image should be shown to the right of each title
        with CSS class: "adlibris-cover"
    
    * Test opac-detail.tt
      (continued from previous test's location)
      * Click on the title with cover (1984, ISBN: 9780451524935)
      * Cover should be displayed to the left in full size.
      * If clicked, should link to the full-size image.
    
    Test opac-results-grouped.tt
      * This template is only used if an external "grouping" server is
        setup and the syspref "OPACGroupResults" is set to "Use".
      * Personally I did not test this, b/c: terminally lazy
    
    * Test opac-showreviews.tt
      * Could not find any links to this location, manually enter it:
        http://127.0.1.1/cgi-bin/koha/opac-showreviews.pl
      * Image should be shown to the right in full size.
      * If clicked it should take you to the detail view with the
        comments tab opened.
    
    * Test opac-showreviews-rss.tt
      * Click on the RSS icon from previous test's start location.
        URL should be:
        http://127.0.1.1/cgi-bin/koha/opac-showreviews.pl?format=rss
      * An image tag linking to the full-size image without any
        styling class should be present.
    
    * Test opac-user.tt
      * Click on your username to open:
        http://127.0.1.1/cgi-bin/koha/opac-user.pl
      * Covers should be shown for checked out items with
        CSS class: adlibris-cover
      * When clicked the destination should be the same as
        clicking the title column entry: opac-details.pl
    
    * Test opac-opensearch.tt
      * Click on "Advanced search" and enter "1984" then press "Search"
      * This search screen uses a different template.
      * Cover image should be shown to the right of each title
        with CSS class: "adlibris-cover"
      * If clicked, should link to the OPAC detail view.
    
    * Test opac-readingrecord.tt
      * Click on your logged-in name to go to your personal page.
      * Click on "Your reading history" tab on the left.
        http://127.0.1.1/cgi-bin/koha/opac-readingrecord.pl
      * Covers should be shown in leftmost column with
        CSS class: adlibris-cover
      * If clicked, should link to the same as the 'Title' link.
    
    Sponsored-By: Halland County Library
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 401b706392cb49d36ba9842d6f9397a5f0d1a686
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Oct 5 13:56:12 2018 +0000

    Bug 8630: Adlibris covers (intranet CSS)
    
    This defined two new CSS classes for use by the intranet templates.
    Apply this patch before doing the testing of "intranet templates".
    
    Sponsored-By: Halland County Library
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4ea7f20ca3c55ac7f0df00207aadb854260bdc13
Author: Martin Persson <xarragon@gmail.com>
Date:   Thu Oct 8 09:12:27 2015 +0200

    Bug 8630: Adlibris covers (intranet templates)
    
    Changes to staff interface (intranet) templates.
    Depends on new CSS clases defined in separate patch.
    
    Test plan:
    
    To test this particular patch (intranet templates) you need:
    * The syspref patch applied
    * The intranet CSS patch applied
    
    To test:
    * Apply this patch
    
    * Enable covers (if not done already)
      * Go to staff interface, log in as a priviliged user.
      * Select "More" -> "Administration" ->
        "Global system preferences" -> "Enhanced content".
      * Set ""AdlibrisCoversEnabled" to "Show" under "Adlibris".
      * Save changes
    
    * Add a book with a known cover/ISBN (if none exists)
      * Set MARC field 020 a,
        "INTERNATIONAL STANDARD BOOK NUMBER" to: 9780451524935
      * Set MARC field 245 a, "Title" to: 1984
      * Save changes
    
    * Test results.tt
      * From the main intranet page, select "Search the catalog" and
        enter the title we added, "1984" and press "Search".
      * You should end up with the url:
        http://127.0.1.1:8080/cgi-bin/koha/catalogue/search.pl?q=1984
      * The cover image should be shown in the leftmost column.
      * If cover is clicked, the full cover image should be shown.
    
    * Test detail.tt
      (continue from the search results used in prev. test)
      * Click on the title text, you should be sent to:
        http://127.0.1.1:8080/cgi-bin/koha/catalogue/detail.pl?biblionumber=2
      * The cover image should be shown on the right.
      * If clicked, the full cover should be shown.
    
    Sponsored-By: Halland County Library
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fd3a378f9a8f43f9ac2b4fae73d881f36cc5f9bf
Author: Martin Persson <xarragon@gmail.com>
Date:   Mon Oct 5 11:13:15 2015 +0200

    Bug 8630: Adlibris covers (syspref files)
    
    This patch adds a system preference for cover images from Swedish
    book retailer Adlibris. Images are retrieved via http or https
    from an external web server. This might leak OPAC and Staff
    interface data to third parties and should thus be used with
    caution.
    
    Sponsored-By: Halland County Library
    
    Test plan:
    
    Test 1: Test upgrade procedure for clean installation.
    
      Start by removing existing sysprefs, if present:
    
      $ mysql -u kohaadmin -p -D koha
      > DELETE FROM `systempreferences` WHERE `variable` LIKE 'Adlibris%';
    
    * Apply this patch which will add a pref file, update the 'syspref'
      structure and add an atomic upgrade file.
    
    * Install the update:
      Koha$ perl installer/data/mysql/updatedatabase.pl
    
    * Once upgraded and logged in, Select 'More', 'Administration',
      'Global Preferences' and finally 'Enhanced content'.
      There should be a new option called 'Adlibris'.
    
      The first option should default to "Don't show", if not the
      patch is broken.
    
      The second options should show the default URL:
      http://www.adlibris.com/se/organisationer/showimagesafe.aspx
    
      If not, the patch is broken.
    
    Test 2: Changing sysprefs
    
    * In the control panel, change the first value from "Don't show"
      to "Show" and save the changes. Use MySQL client to inspect changes:
    
      $ mysql -u kohaadmin -p -D koha
      > SELECT * FROM `systempreferences` WHERE `variable` LIKE 'Adlibris%';
    
      The column 'value' should now have the value '1', if not the patch
      is broken.
    
    Test 3: Apply update to existing data
    
    * Re-execute the installer now that the database has the data already:
      Koha$ perl installer/data/mysql/updatedatabase.pl
    
      If any errors occur the patch is broken.
    
      Examine the database contents:
    
      $ mysql -u kohaadmin -p -D koha
      > SELECT * FROM `systempreferences` WHERE `variable` LIKE 'Adlibris%';
    
      If the values were overwritten by the installer the patch is broken.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 44778ddcc9badc800860cbcf6489065646cb3f15
Author: Marc Véron <veron@veron.ch>
Date:   Sun Apr 17 18:52:06 2016 +0200

    Bug 16280: purge_suggestions.pl: Cron job log should tell number of days used
    
    To test:
    - Apply patch
    - Set syspref CronjobLog to "Log"
    - Set syspref PurgeSuggestionsOlderThan e.g. to 20
    - From console, run misc/cronjobs/purge_suggestions.pl
    - Check entry in cgi-bin/koha/admin/preferences.pl?op=search&searchfield=log
    - Verify that log entry contains number of days (20, same as in syspref)
    - From console, run misc/cronjobs/purge_suggestions.pl -days 100
    - Verify that log entry contains number of days (100, same as in param -days)
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a8b6a5daa56d3b681d1157c29a10caedfda984ad
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 17 13:05:43 2018 +0000

    Bug 19490: (follow-up) Improve tooltip message and some tidying
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 36a2627c399d7f6a59d68d7bc15edbadd528b56f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 23 19:04:02 2018 +0000

    Bug 19490: (follow-up) Add tooltip to each row
    
    To test:
    1 - Run batch modification on some items
    2 - Hover over the holds column
    3 - Note the tool tip
    4 - PLace some holds to verify combinations of item/record level holds
    show appropriately
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e427cf5b3f3ded54dbc6899c149a2de3e8ab13ea
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon May 14 20:57:57 2018 +0000

    Bug 19490: Add a 'Holds' column to the items batchmodification tool
    
    To test:
    1 - Add some items to bathc modification
    2 - Note there is no indication fo holds
    3 - Apply patch
    4 - Reload and note you can see how many holds (or none)
    5 - Note you can hide this column with css:
        #batchMod-edit .holds_count { display: none; }
    6 - Note the column has a tooltip to indicate item vs. record holds
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e520d699109958712212ead8b8935a63402e5b37
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 31 11:50:59 2018 -0300

    Bug 21740: Show @ when editing fixed-length fields on bibliographic frameworks
    
    This is a consistency issue: we store '@' as the subfield for
    fixed-lenght fields, yet on editing '_' is displayed (on the form and
    the tab). This was probably done to avoid URI encoding problems in the
    past.
    
    This patch restores the '@' everywhere.
    
    To test:
    - Open the MARC structure for any bibliographic MARC framework
    - Choose Actions > Subfields on any fixed-length field
    => ERROR: Notice the tab has an underscore (_) and the subfield code is '_' as well.
    - Cancel
    => SUCCESS: '@' is displayed on the list
    - Apply this patch
    - Restart all the things:
      $ restart_all
    - Choose Actions > Subfields on any fixed-length field
    => SUCCESS: '@' is displayed in the tab title, and on the 'Subfield
    code' form field.
    - Save some changes
    => SUCCESS: Things work correctly.
    - Sign off :-D
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Devinim <kohadevinim@devinim.com.tr>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5b807fd3d75e059ad8ea48c126b3aaf2b68a26e9
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Nov 5 08:51:32 2018 +0000

    Bug 20996: (follow-up) Fix test
    
    - Fixes the t/db_dependent/Illrequest/Config.t
    - Adds tests for Koha::Illrequest::Config->has_branch
    
    0) Do not apply the path
    1) Run test t/db_dependent/Illrequest/Config.t
    2) It fails - it is because the Koha/Illrequest/Config.pm prefixes
    handling changed
    3) Apply the patch
    4) Run test again, it should pass now
    5) Read through the test code and confirm it makes sense
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1a0172a253e5432e5eef862768aaacb3463501f2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Nov 2 10:41:15 2018 +0000

    Bug 20968: (RM follow-up) Add missing filter
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 84857caaef467b7c3dfa82404143de8dc41fc858
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Oct 5 15:18:59 2018 +0200

    Bug 21501: Remove dead code from course reserves module
    
    search_on parameter is not used in any templates so course-reserves.pl
    can be simplified a bit
    
    Test plan:
    1. Go to course reserves module and verify that it is still working
    2. `git grep search_on` should return nothing
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9783773ada4dec115342a4f8f16b29eb5b98cc2f
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Jun 29 09:23:38 2018 +0100

    Bug 20968: (follow-up) Replace tabs with spaces
    
    Signed-off-by: Stephen Graham <s.graham4@herts.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e87fa069dc3d10284a2bd31b7c7913132fed5d06
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Wed Jun 27 13:21:53 2018 -0400

    Bug 20968: Rename method get_intranet_catalog_toolbar_button to intranet_catalog_biblio_enhancements_toolbar_button
    
    Signed-off-by: Stephen Graham <s.graham4@herts.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 60ca17c616e6026fbd271fb3f99473f3ef7edf00
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Jun 27 17:13:37 2018 +0000

    Bug 20968: Add unit tests
    
    Signed-off-by: Stephen Graham <s.graham4@herts.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7910a530b85b6ee42307d41cba57b95ced2aca27
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Wed Jun 27 17:13:27 2018 +0100

    Bug 20968: (follow-up) Respond to feedback
    
    This patch:
    
    - Removes the unecessary testing for
    intranet_catalog_biblio_enhancements method in detail.pl
    - Renames get_toolbar_button to get_intranet_catalog_toolbar_button
    
    Signed-off-by: Stephen Graham <s.graham4@herts.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 741f17e916a3f64d71b55fd87065136307e3bae7
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Wed Jun 20 12:47:10 2018 +0100

    Bug 20968: Add hooks into cat-toolbar.inc to display buttons
    
    This commit adds hooks into cat-toolbar.inc to allow the display of
    arbitrary buttons as supplied by plugins within the
    intranet_catalog_biblio_enhancements class that provide the method
    get_toolbar_button
    
    To test:
    
    1) Download the plugin from
    https://github.com/PTFS-Europe/cla-permissions-check-plugin
    2) Follow the installation instructions from:
    https://github.com/PTFS-Europe/cla-permissions-check-plugin
    3) TEST: Observe that the "CLA Check Permissions" button takes the user
    to the Check Permissions page and a modal displays containing the
    results of the query
    4) Remove the API key from the plugin "Configuration" page
    5) TEST: Ensure that the "CLA Check Permissions" button takes the user
    to the Check Permissions page and message displays informing the user
    that "Did not receive required request parameters"
    
    https://bugs.koha-community.org/show_bug.cgi?id=20968
    
    Signed-off-by: Stephen Graham <s.graham4@herts.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7a1641cd41bf51a992cb07dff58d320c49f15b68
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Nov 2 10:31:47 2018 +0000

    Bug 14385: DBRev 18.06.00.050
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 70651422a7517338a68e22321d9918757746ef33
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Oct 12 07:54:24 2018 +0200

    Bug 14385: (QA follow-up) Additional changes and fixes
    
    [1] searchResults: second my $interface can be removed: unused
    [2] call of getitemtypeimagelocation on L2119 needs interface key
    [3] ISBDdetail: No need to find patron again (line 182 vs 84)
    [4] opac-search: No need to find patron twice (657 and 631)
    [5] tabs on line 2220 of C4/Search.pm (qa tools warn)
    [6] Ugly hack to overcome "Undefined subroutine &C4::Items::ModZebra"
        by loading C4::Items before C4::Biblio when running tests
        Koha/BiblioUtils/Iterator.t and Labels/t_Label.t.
        This is a more general problem that needs attention somewhere else.
        It seems that Biblio.pm is one of the suspects.
    [7] This patch set makes Search.t crash/fail with me. Note that without
        these patches Search.t still passed! Why o why..
        A little debugging pointed me to a missing MPL branch (aarg).
        Adding the simple test on the result of Libraries->find in
        C4::Biblio::GetAuthorisedValueDesc made the test continue.
    [8] Resolve: Variable "$borcat" is not available at opac-detail.pl line 246
        Lexical $borcat cannot be used in sub searchAgain in opac-detail.pl
        under Plack. Must be defined with our (or passed as argument).
    [9] Resolve crash on TWO serious typos in opac-basket on ONE line:
            Koha::Patron->find({ borrowernumber -> $borrowernumber })
        Yeah: find is in Koha::Patrons and we need => !!
        No need to pass a hash to find method btw for a pk value.
    [10] Serious bugfixing here. Add List::Util to opac-basket.
        Can't locate object method "none" via package "1".
        You can't test everything :)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    After this longer list I renamed Final to Additional in the patch title :)
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e1b5fa657de843a177fb4bf57947a1376152d021
Author: Mark Tompsett <mtompset@hotmail.com>
Date:   Mon Mar 5 20:11:52 2018 +0000

    Bug 14385: Squash of a lot of patches rebased
    
    - Added missing GetHiddenItems parameter change case
         Without this prove t had a failure.
    
    - Always use mocks, not set_preference
    
    - Tweaks so t/db_dependent/00-strict.t passes
         There was a typo botcat vs borcat and borrowernumber was never
         defined. Grabbing from userenv, like other code does.
    
    - Tweak t/db_dependent/Items.t to fully test changes
         This will test all the if structures fully in GetHiddenItemnumbers.
             prove t/db_dependent/Items.t
    
    - Tweak borrower category code
         $borrower->{categorycode} on a Koha::Patron is not the
         same as $borrower->categorycode. Fixed error.
    
    - Search was returning URLS for wrong interface
         There was one search context place wrong. Changed it to $is_opac
         as the logic for setting $is_opac was modified correctly.
    
    - Corrected issues with category code.
         When a user isn't logged in, $borrower is undef and causes error
         when determining category code. Added conditional check.
    
    - Properly trigger all changes in C4/Search.pm
    
    - Fix QA Test tool failures
         C4/Search.pm had some tabs.
    
    - Add some commenting to make sense of logic
    
    - Refactor EmbedItemsInMarcBiblio parameters to hashref
    
    - Trigger GetMarcBiblio's EmbedItemsInMarcBiblio call.
         prove t/db_dependent/Items.t
    
    - Add missing test to trigger Koha/BiblioUtils/Iterator change
    
    - Add borrower category overrides
         These files generally add borcat parameter to GetMarcBiblio.
         Others might include correction of filtering of items
         (opac-basket), or a comment as to why no changes were done
         (opac-search).
    
         In the case of opac-search, correcting the first FIXME will
         likely correct the OpacHiddenItems issues on tags. As such,
         that is beyond this bugs scope.
    
         Some code had loop optimizations and fixes made, like a
         'next unless $record' when the biblio shouldn't even be in
         the list.
    
    - Modify opac-ISBDdetail and opac-MARCdetail
         Both files had similar logic. They were rearranged and
         optimized, so that both files would have practically identical
         initial blocks of code.
    
         Optimizations were possible, because GetMarcBiblio
         returns a filtered record, so that there is no double call
         (once in the opac-### file and once in GetMarcBiblio) to
         GetHiddenItemnumbers.
    
    - Fix hiding in opac-tags
         opac/opac-tags.pl was not properly hiding.
    
         There is currently one known bug associated with tags left.
         If you have two biblios tagged by different people with the
         same tag, the opac-search will show the one you tagged that
         is supposed to be hidden, because tag searches work differently
         than regular searches. This is beyond the scope of this bug.
         See the FIXME's in opac/opac-search.pl
    
    - Trigger the C4::ILSDI::Services changes
         prove t/db_dependent/ILSDI_Services.t
    
    - Added missing 'my'
    
    - Test C4/Labels/Label.pm changes
    
    - Improve C4::Record::marcrecord2csv test cases
    
    - Corrected opac-details searchResult call
    
    - Fix breaking issues constraint in ITerator test
    
    - Fix ILSDI_Services test when clubs with branch exist
    
    - Rebased again!
    - Rebased t/db_dependent/Items.t conflict.
    
    The test plan is in comment #112 last I checked.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e31e0e5daa764892dfb7878696cb1159d27c3a1c
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Fri Sep 16 02:42:03 2016 +0000

    Bug 14385: (follow-up) Changes to sysprefs.sql and atomicupdate
    
    Run updatedatabase.pl when testing
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8b7a7a2bb34609c402117933625e06e1b8e2cd69
Author: Mirko Tietgen <mirko@abunchofthings.net>
Date:   Tue Jul 19 17:45:43 2016 +0200

    Bug 14385: (follow-up) C4::Borrowers not found
    
    GetMember is in C4::Members, not C4::Borrowers
    
    Signed-off-by: Claire Gravely <c.gravely@arts.ac.uk>
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5e4e10c4ca558180137bf5a4ff5a68495efa0ec7
Author: Chris Cormack <chrisc@catalyst.net.nz>
Date:   Thu Nov 6 10:34:18 2014 +1300

    Bug 14385: Extend OpacHiddenItems to allow specifying exempt borrower categories
    
    Edit: Fixing merge conflicts in
     - t/db_dependent/Items.t
     - t/db_dependent/Search.t
     - C4/Search.pm
    
    Changes the API for calling GetHiddenItems and all the places in the code that call it. This is to allow borrower categories to be passed in.
    Adds an OpacHiddenItemsExceptions syspref to allow certain borrower categories to be able to see items, even if they are marked hidden by OpacHiddenItems
    
    To test:
    
    1) Make two borrowers, one in a category that should see everything (ie Adult), and another in a category that should only see certain things (ie Adult - exceptions)
    2) Add the borrower that can see everything (the Adult) to OpacHiddenItemsExceptions
    3) To the OpacHiddenItems syspref, add an item type (ensure that you have some records that fall under this type in your library).
    4) Log in as the borrower that should only see certain things (Adult - exception)
    5) Do a search, filtered to show records which are the item type that you specified in the OpacHiddenItems syspref. No records should show for this borrower as this item type is hidden to them.
    6) Log in as the borrower that should see everything (Adult)
    7) Do the same search. There should be results from this search, as this borrower category has been specified as an exception to the hidden items
    
    Signed-off-by: Claire Gravely <c.gravely@arts.ac.uk>
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 12ed04eabb32cb957acd9f88d94ccada0ac09d07
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 24 01:17:51 2018 +0000

    Bug 21640: Enable output to STDOUT for Itiva outbound script
    
    To test:
     1 - Enable the TalkingTechItivaPhoneNotification
     2 - Copy 'HOLD' notice 'email' transport to the phone section
     3 - Enable EnhancedMessagingPreferences
     4 - Find a patron and enable 'phone' for the 'Hold filled' notice
        Note: You might not be able to do this straightaway, bug 21639
        If the phone box has a '-' and not a checkbox:
        sudo koha-mysql kohadev
        INSERT INTO message_transports (message_attribute_id,message_transport_type,is_digest,letter_module,letter_code) VALUES (4,'phone',0,'reserves','HOLD');
     5 - Place a hold for the patron
     6 - Check it in and confirm the hold to set it waiting
     7 - sudo koha-shell kohadev
     8 - perl misc/cronjobs/thirdparty/TalkingTech_itiva_outbound.pl --type=RESERVE -w 0 -v
     9 - Note the Output says it will be on STDOUT, but nothing is output
    10 - Apply patch
    11 - repeat
    12 - Hold info is output to command line
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 32c4dbfd6814f01ae2b430e88f13b89bd374f34f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 18 19:27:21 2018 -0300

    Bug 21606: [sql_modes] Fix matching rules insert
    
    Fix:
    Incorrect integer value: '' for column 'offset'
    Incorrect integer value: '' for column 'score'
    
    Test plan:
    Add/edit matching rules
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ce6a27b0d287f14eb0d515db6b2a5e1f5d278381
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Wed Oct 31 15:26:27 2018 +0000

    Bug 20996: (QA follow-up) Fix pod
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f947655862abc813df685d51edbfbe7b34027178
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Wed Oct 31 15:25:17 2018 +0000

    Bug 20996: (follow-up) Fix merge problems
    
    Merge conflicts resolved
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4ffd2d3b347072f6422adb98608859264ba269d6
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Sep 28 13:44:16 2018 +0100

    Bug 20996: (follow-up) Fix column name expectation
    
    This bug changes how request metadata is obtained. Previously the
    appropriate backend's metadata function would return it. For at least
    the FreeForm backend, the metadata property names we title cased. The
    datatable JS was expecting this and breaks with the new metadata getting
    which is performed in the API controller, which just returns the
    property names as they appear in the DB.
    
    This patch changes the expectation of the JS to match what's coming back
    from the API
    
    Signed-off-by: Magnus Enger <magnus@enger.priv.no>
    Tested by repeatedly loading the API-call
    http://intranet/api/v1/illrequests?embed=metadata,patron,capabilities,library
    in Chromium and watching the reported time to load the URL. There
    is a siginificant decrease in the time with the patches compared to
    the time it takes without the patches. I had some concerns along the
    way, but they have all been fixed.
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Tested by repeatedly loading the API-call
    http://intranet/api/v1/illrequests?embed=metadata,patron,capabilities,library
    in Chromium and watching the reported time to load the URL. There
    is a siginificant decrease in the time with the patches compared to
    the time it takes without the patches. I had some concerns along the
    way, but they have all been fixed.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8e8f26f2cb2195f1e07136898320875dc055aad4
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Sep 25 15:19:53 2018 +0100

    Bug 20996: (follow-up) Add <branch> to conf tpl
    
    Since we now require the <branch> block, we should add it to the config
    templates
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3fb44a8bd63663fb7c4d93e85c30d58d9b2ce08f
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu Jul 5 14:46:16 2018 +0100

    Bug 20996: Further enhance performance
    
    We were immediately unblessing all request objects after retrieval then,
    at a later stage, re-instantiating each one so we could call methods on
    that. This was a very bad idea. We now preserve the objects for as long
    as we can.
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f4f995a4e690b53504561294655e548a53994a81
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Wed Jul 4 13:13:33 2018 +0100

    Bug 20996: Fix unit tests
    
    - Remove unit tests relating to TO_JSON
    - Add tests for new explicit embedding
    - Modify tests relating to now deprecated brw_cat
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1c8952a36b3b810b7bc290a7eb7cc85cc766ed61
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Jul 3 11:36:58 2018 +0100

    Bug 20996: Remove prefix use of borrower category
    
    This patch removes the potential use of borrower category as a ILL
    request ID prefix. It makes no sense. We provide the ability for a site
    to define a request prefix based on branch, there is no use case for
    using the borrower category. Add to this that the borrower for every
    request was being retrieved in order to get the category, it's a huge
    performance hit also.
    
    We also now require the <branch> block in the <interlibrary_loans> block
    and complain if it's not present. The request prefix should be defined
    in this block.
    
    This patch also improves the performance of the API request that returns all
    requests, optionally including additional data.
    
    It also deprecates the overloaded TO_JSON method and moves the request
    augmentation code into the API route's controller. It may be that we
    want to shift it out of there at some point, but it is fine where it is
    for now.
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7085772e8de25fe49b77555e318cc03ab6bcb33b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 18 18:10:19 2018 -0300

    Bug 21604: Fix add/edit fund/budget
    
    [Strict SQL modes context]
    
    For insert aqbudgetperiods:
    Incorrect integer value: '' for column 'budget_period_id'
    
    For insert/update aqbudgets
    Incorrect integer value: '' for column 'budget_owner_id'
    Incorrect decimal value: '' for column 'budget_encumb'
    
    Test plan:
    Add/edit budgets and funds
    
    A good example of why we should use Koha::Object for all our objects
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 433fc3f120cfa08fda1dd55a7db721bdf3bf1e9b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Nov 2 07:44:34 2018 +0100

    Bug 21604: Add two trivial test cases
    
    Adding an id in AddBudgetPeriod and an empty string in AddBudget for
    budget_encumb.
    
    Test plan:
    Run Budgets.t with/without this patch in strict sql mode.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ca3c2b0b639f571981570d4a342c74a1ca026996
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 19 14:37:26 2018 +0100

    Bug 21620: Prevent stockrotation cronjob failures
    
    Superflous use of sprintf combined with rebasing issue left the
    stockrotation cronjob such that a 'No action taken' email report would
    catastrophically fail with the error:
    
    Redundant argument in sprintf at ./stockrotation.pl line 316
    
    This patch both resolves the error and cleans up some additional
    unrequired sprintf usage.
    
    Test Plan
    1) Create a rotation plan
    2) Add some items to the rotation plan
    3) Run the cronjob using `stockrotation.pl --report=email --send-email
    --execute`
    4) Note the lack of errors
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ebf0336059635f2ea13c7f626b794e92e4980f46
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Nov 2 10:01:16 2018 +0000

    Bug 21656: DBRev 18.06.00.049
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8302a5d6ab287e37b9927efad6401c00c1089869
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 25 13:34:44 2018 -0300

    Bug 21656: Update 4 missing sample_notices.sql
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4bd78f7443ac108eab35263b89bb610e6675d8c2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 25 13:32:17 2018 -0300

    Bug 21656: Reduce the risk of possible side-effects
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 966e6351760d08825b79a5b7c96af167cf8d9267
Author: Mark Tompsett <mtompset@hotmail.com>
Date:   Thu Oct 25 15:30:10 2018 +0000

    Bug 21656: (follow-up) Fix atomicupdate
    
    The atomicupdate is going to run as part of an upgrade.
    It needs to UPDATE, not INSERT.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9df62cf1caed793f883122eca332c409eddce710
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Oct 24 11:14:56 2018 +0100

    Bug 21656: Fix for bad TT syntax in default stock rotation notice
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5ea877f6cba299373e0ebb9c59f8797baba98bec
Author: Magnus Enger <magnus@libriotech.no>
Date:   Tue Oct 16 21:25:43 2018 +0200

    Bug 21585: Ignore missing firstname in ILL requests table
    
    To test:
    - Make sure you have a patron with just a surname and no firstname
    - Create an ILL request so that the name of this patron shows up in
      the Patron column of the ILL requests table
    - Before the patch, the name will display as "null Surname"
    - Apply the patch
    - Reload the ILL requests page
    - The name should now display as just "Surname"
    - Sign ye merrily off
    
    Signed-off-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5e2b67d8c5982029c427c75930bfec6a4395dd9f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 29 18:16:19 2018 -0300

    Bug 21717: Fix generation of real's values
    
    With strict SQL modes we now have TestBuilder tests that fail randomly with:
      Out of range value for column 'tax_rate_on_receiving'
      Out of range value for column 'discount'
    
    We are trying to insert a value that is too high for the type defined at DB level.
    
    It happens for discount when a value > 100 is generated. The datatype is float(6,4).
    From the MySQL Doc:
    """
    MySQL permits a nonstandard syntax: FLOAT(M,D) or REAL(M,D) or DOUBLE PRECISION(M,D).
    Here, (M,D) means than values can be stored with up to M digits in total, of which D digits may be after the decimal point.
    """
    
    So float(6,4) does not allow 100.
    
    To recreate easily the issue:
      use t::lib::TestBuilder;
      my $builder = t::lib::TestBuilder->new;
      $builder->build( { source => 'Aqorder', value => { discount => 100 } } )->{discount};
    
    To make sure this patch fixes the issue you can use this script:
      use Modern::Perl;
      use t::lib::TestBuilder;
      my $builder = t::lib::TestBuilder->new;
      my ( $real, $i ) = ( 0, 0 );
      while ( $real < 100 ) {
          $real = $builder->_gen_real( { info => { size => [ 6, 4 ] } } );
          warn $i++;
      }
      warn "$i - $real";
    
    Test plan:
    0/ Does not apply this patch
    1/ Run the snippet above
    2/ Confirm that it fails quite quickly (constantly before 500 for me)
    3/ Apply this patch
    4/ Run again the script
    5/ Confirm that it is stuck in an infinite loop
    6/ CTRL-C :D
    
    QA Note:
    Other _gen_* subroutine may need a fix, but we will wait for them to fail
    TODO:
    1. Add JS check to the interface to prevent the use to enter a value > 100
    2. Allow '100' as a valid value for discount (?)
    
    Followed test plan, patch worked as described
    Signed-off-by: Alex Buckley <alexbuckley@catalyst.net.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 515ed462cff54afd0725471c977d437fbeb54aa4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 16 14:52:25 2018 -0300

    Bug 21556: Do not crash if a biblio is deleted twice
    
    To recreate:
    - Go to a bibliographic detail page
    - Delete it
    - Go back
    - Delete it again
    => Without this patch you will get a 500
     Can't call method "holds" on an undefined value at
     /home/vagrant/kohaclone/C4/Biblio.pm line 406.
    => With this patch applied it will silently redirect you to the search
    form.
    
    Note: We could/should improve the behavior and display a message, but
    DelBiblio will need to be moved to Koha::Biblio->delete and other
    callers adjusted
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9d78af26d96dd356a1ca05199c0fec20cd5077e1
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Oct 12 01:53:22 2018 +0000

    Bug 21556: Deleting same record twice leads to fatal software error
    
    If you delete a record, confirm the deletion, and try to delete the
    record and confirm it again befoe the first deletion completes, you'll
    generate a fatal software error.
    
    This patch unbinds the click handlers for the "Delete record" button
    after the deletion is confirmed and just before the Javascript
    processes the redirect to the next page in the process.
    
    To test:
    1) You will need a bibliographic record that is able to be deleted
    2) Click "Edit", then "Delete record", then "OK"
    3) While the browser is reloading, click "Edit", then "Delete record",
        then "OK
    4) Observe a fatal error such as "Internal server error" or 'Can't call
    method "holds" on an undefined value at
    /home/vagrant/kohaclone/C4/Biblio.pm line 406.'
    5) Apply the patch
    6) Run "restart_all" on kohadevbox (or otherwise restart Plack if
        running Plack)
    7) Navigate to another bibliographic record that is able to be deleted
    8) Click "Edit", then "Delete record", then "OK"
    9) While the browser is reloading, click "Edit", then "Delete record"
    10) Observe that no fatal software error is generated
    11) You are redirected to
    http://localhost:8081/cgi-bin/koha/catalogue/search.pl (on kohadevbox)
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b5c456479da6a1033f9a697ca1bcf4295920aeb1
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 30 11:59:26 2018 +0000

    Bug 21725: Use full statement in HAVING rather than constructed column
    
    To test:
    1 - prove -v t/db_dpendent/Acquisition/GetBasketsInfosByBookseller.t
    2 - Apply patch
    3 - prove -v t/db_dpendent/Acquisition/GetBasketsInfosByBookseller.t
    4 - It passes
    5 - Have some open/closed and some fully and not full received baskets
    6 - View a vendor and confirm baskets are shwn as expected
    7 - Check 'Show all baskets' shows all baskets
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Note sure this is the best thing but it fixes the issue
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2d3ec5e6258232378c7c8dddf3f8bf1ef8471696
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 1 19:03:01 2018 +0000

    Bug 21682: DBRev 18.06.00.048
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ea19eee02ea2b6ecf680d7bcc1db788309d802e5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 31 15:36:21 2018 -0300

    Bug 21682: Add update DB entry for existing installs
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c98c1d73786699322f247b8bd2167bb08014bf52
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 26 11:55:54 2018 +0100

    Bug 21682: Corrections for strict sql in stockrotationrotas
    
    Test Plan:
    1) Ensure you're database is prior to version 18.06.00.040
    2) Ensure 'strict_sql_modes' is enabled
    3) Run updatedatabase
    4) See no errors during upgrade
    5) Run a fresh install
    6) Note no errors during database installation
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7736b5c2e32975502fa6198b5f7ec64feb7b8ffc
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 23 12:30:25 2018 +0000

    Bug 21476: Fix HTML5 media from playing in the OPAC - incorrect filters
    
    This patch makes a correction to a template filter to prevent
    incorrectly-encoded HTML in media source links which were preventing
    media from embedding correctly in the OPAC.
    
    To test, apply the patch and enable the HTML5MediaEnabled and
    HTML5MediaYouTube system preferences.
    
    - Edit a record to include links to videos in 856$u. For example:
      - https://www.youtube.com/watch?v=grTwH6Evdfc
        - https://archive.org/download/POPEYEMeetsSindbadTheSailor1936/POPEYE%20meets%20Sindbad%20The%20Sailor%20%281936%29.ogv
    
        View the record in the OPAC and confirm that the videos display in
        the
        "Play media" tab and that they play correctly.
    
    Tested and works as described, also matches the intranet code.
    
    Signed-off-by: Alex Buckley <alexbuckley@catalyst.net.nz>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8ceba54c8dcfd9b598375b8af432c0111ec63d04
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 31 12:18:58 2018 +0000

    Bug 21742: Fix YouTube variable propagation
    
    The loop to find all media has an $isyoutube variable. This was declared
    outside the loop and never reset. Once a YouTube video was encountered
    all subsequent videos were considered as YouTube. This patch reduces the
    scope of the variable and resets per loop.
    
    To test:
    1 - Enable HTML5Media and HTML5MediaYouTube
    2 - Add 856$u to record for a youtube vido and a pdf (sample record
            attached to bug)
    3 - View the record, the Play media tab has two video boxes
    4 - Play the second, it fails
    5 - Apply patch
    6 - View record, Play media should include only one video link
    
    Signed-off-by: Devinim <kohadevinim@devinim.com.tr>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8f6bd9415096924e2648a1a0a5866733f6839760
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 26 15:19:36 2018 -0300

    Bug 21681: Improve the account lines fetch
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 62613b6cf2861c28862ec9a6d55767eff63d2322
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 26 15:25:09 2018 -0300

    Bug 21681: Add tests for GetPatronInfo
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 655caa61e64af3c1fdb12a3a01f28f8d07752609
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Fri Oct 26 10:05:11 2018 +0000

    Bug 21681: Remove C4::Accounts::getcharges
    
    Test plan:
    0) Do not apply the patch
    1) Enable ILS-DI
    2) Go to
    <opac_url>/cgi-bin/koha/ilsdi.pl?service=GetPatronInfo&patron_id=51&show_fines=1
    use patron with some paid and unpaid fines
    3) Save the page for later usage
    4) Apply the patch
    5) Repeat 2 with same patron and compare the saved result with the new
    one, they should be same
    6) git grep getcharges should return no occurance
    7) prove t/db_dependent/Accounts.t
    
    Co-authored-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8193d3592d815066943cba5807ef6d80c0f7d366
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 26 15:08:51 2018 -0300

    Bug 21694: Keep the context
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 00d5ceac1e56edc4ce893c53b0ea6763e9fca5e2
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 26 18:34:35 2018 +0100

    Bug 21694: Add the Koha::Account->lines method
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 04114d4b835c10bb03b9c092268fc632d5552fed
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Oct 29 19:59:00 2018 +0000

    Bug 21698: (QA follow-up) Fix typo verbosev -> verbose
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b7b6727f92615bcebf2f037202e6647a34c7705a
Author: Magnus Enger <magnus@libriotech.no>
Date:   Fri Oct 26 22:47:16 2018 +0200

    Bug 21698: Fix POD of cancel_unfilled_holds.pl
    
    To test:
    - Run "perldoc misc/cronjobs/holds/cancel_unfilled_holds.pl"
    - Notice some problems:
    -- No description in the NAME section
    -- Descriptions of options in the SYNOPSIS section
    -- A literal head1
    -- Long options are listed with a single leading dash
    -- Options --verbose and --confirm are not listed under OPTIONS)
    - Take a look at the script itself to see that --verbose and
      --confirm should be listed.
    - Also note the typo on line 97: 'v|verbosev' => \$verbose,
    - Apply the patch
    - Look at the script and perldoc again and check that all problems
      described above are now fixed.
    
    Signed-off-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 77ea4686395f88c9678c611a78e6db4fd4c04101
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Jun 5 11:55:12 2017 +0200

    Bug 18720: Use exception instead of die in GetBasketAsCsv
    
    Test plan:
    prove t/db_dependent/Acquisition/GetBasketAsCSV.t
    
    Signed-off-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 74f2a9032475dcfd18141655bd2ef608c4c65801
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Mon Oct 8 13:33:46 2018 +0100

    Bug 20941: (follow-up) Switch 'media' -> 'types'
    
    Clearing up the inconsistency mentioned in comment #35. There is one
    place where we use the term 'media' for a template variable, everywhere
    we refer to material types as 'types'.
    
    NOTE: This is a breaking change for existing backends that still use
    'media'. Of the PTFS Europe backends, only the Koha backend uses it,
    this will be modified as necessary. Generally backends will supply this
    variable themselves, so the breaking-ness of this change should be
    minimal.
    
    No test plan as it's backend dependent.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit efc92a5ea2fc0aed90cc93dae1a0024c886fd80a
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Oct 5 08:56:45 2018 +0100

    Bug 20941: (follow-up) Update N/A handling
    
    Modify the conditional display of N/A in accordance with comment #17
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f7ec3b5ab661cfeb3bdb2a1600ac85baf7c422b7
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu Oct 4 13:38:20 2018 +0100

    Bug 20941: (follow-up) Wrap N/A strings in <span>
    
    All N/A strings in ILL templates wrapped in <span> to aid translation
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit aced7b10de6180da18e1cce86d5d020bd9dd4813
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Thu Oct 4 07:44:53 2018 +0000

    Bug 20941: (QA follow-up) Fix return value of get_type, make templates more consistant
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7cecc27e0152e310a7286ddd9bab96597b91891e
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Wed Oct 3 12:05:40 2018 +0100

    Bug 20941: (follow-up) Carry out comment #4 advice
    
    - Switch getType -> get_type
    - get_type now returns a type or undef
    - Ternary now performed in template
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 676fbe12ea52e2d3552b7d5300ba278de4ac3437
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Oct 2 15:50:51 2018 +0100

    Bug 20941: Add unit tests
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cc12509c1e61c0648b57fc39b3428bb2169e303c
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu Jun 14 14:26:02 2018 +0100

    Bug 20941: Add Illrequest->getType method
    
    This patch adds a method to the Illrequest object enabling it to return
    its type, which is stored as an Illrequestattribute object
    
    To observe broken state:
    
    - Do not apply patch
    - Ensure you have at least one Interlibrary loan created
    - In OPAC view, go to "your interlibrary loan requests"
      - => TEST: Observe that the "Request type" column is not populated
      - Click on "View" for one of the requests
      - => TEST: Observer that the "Request type" row is not populated
    - In Staff view, go to "ILL requests"
    - Click on "Manage request" on a request
      - => TEST: Observer that the "Request type" row is not populated
    
    To Test:
    
    - Apply patch
    - In OPAC view, go to "your interlibrary loan requests"
      - => TEST: Observe that the "Request type" column IS populated
      - Click on "View" for one of the requests
      - => TEST: Observer that the "Request type" row IS populated
    - In Staff view, go to "ILL requests"
    - Click on "Manage request" on a request
      - => TEST: Observer that the "Request type" row IS populated
    
    Signed-off-by: Niamh.Walker-Headon@it-tallaght.ie
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9f65d3422ee2fe7df556e422b9d1ed3cddc5be38
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 31 13:34:43 2018 +0000

    Bug 10442: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 52028d9932ce1d10ad690261d8f6983b074b2909
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Aug 13 13:39:42 2018 +0000

    Bug 10442: Remove references to non-standard "error" class
    
    The CSS for <div class="error"> is obsolete and should not be used. This
    patch removes the definition from the main CSS file and corrects
    instances of its use in the templates to the standard <div class="dialog
    alert">.
    
    To test:
    
    - In Acquisitions -> Late orders, locate an order from a vendor which
      doesn't have an email address. Selecting that order and clicking
      "Claim" should trigger an error dialog, "This vendor has no email." It
      should be styled correctly.
    
    - With  AcqCreateItem set to "when placing an order," add to an existing
      order using the "From a new (empty) record" option. Add two items with
      identical barcodes and submit the form. A error should show at
      the top of the page.
    
    - With AcqCreateItem set to "when receiving an order," receive an order
      and add two items with identical barcodes. Submitting the form should
      trigger an error message at the top of the page.
    
    With the remaining cases I don't know how to trigger the errors in
    question, so a visual check of the changes may be required:
    
    - Administration -> Funds -> "You are not authorized to modify this
      fund"
    - Administration -> Search engine configuration
      (/admin/searchengine/elasticsearch/mappgings.pl) -> Various
      modification errors.
    - With the  AutoEmailOpacUser preference set to "send," adding a patron
      without an email address can trigger an error, "This member has no
      email."
    - With plugins enabled, and installed, there are error messages
      displayed under various circumstances.
    
    Signed-off-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 559e051bb9eecbc92f63aa2941caea6ee373fe0e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 29 19:23:53 2018 -0300

    Bug 21080: Fix patron's attributes display when PA_CLASS is used
    
    When a patron attribute class (AV PA_CLASS) is created, the patron's
    edit view is broken:
    https://screenshots.firefox.com/62uNhoUtH6rPXm9l/pro.kohadev.org
    
    To recreate:
    1. Create 1+ authorised values PA_CLASS
    2. Create patron's attributes using it
    3. Edit a patron
    
    it depends on the order of the fieldset and the ol elements
    
    This is certainly not the best fix but the display does not look broken!
    
    Signed-off-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bffd0d8f11fd68e7706e57c571c9b29d15d800ea
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Fri Oct 26 18:13:10 2018 +0300

    Bug 14716: Fix more unencoded url parameters.
    
    Fixes issues found during QA and unifies the SubfieldSelect function across the utils xsl's.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a140843721de52477c6460ccca0c1bf0d0aafcfd
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Sat Sep 15 01:32:07 2018 +0300

    Bug 14716: URI-encode URLs in NORMARC xsl templates.
    
    https://bugs.koha-community.org/show_bug.cgi?id=14716
    
    Test plan:
    
    1. Catalog a record with series name "Series & more"
    2. Find the record
    3. Make sure clicking the "Series & more" link works and the ampersand is properly encoded in the URL.
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Works as advertised.
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8bdde434657121e884103048d64cfde86a57bf8b
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Thu Feb 22 15:37:25 2018 +0200

    Bug 14716: URI-encode URLs in UNIMARC xsl templates.
    
    https://bugs.koha-community.org/show_bug.cgi?id=14716
    
    Test plan:
    
    1. Catalog a record with series name "Series & more"
    2. Find the record
    3. Make sure clicking the "Series & more" link works and the ampersand is properly encoded in the URL.
    4. Also try the attached test records and make sure their links work.
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 217c8a656f8ba46aa12e5e21f3d0d86132950788
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Thu Feb 22 15:37:25 2018 +0200

    Bug 14716: URI-encode URLs in MARC21 xsl templates.
    
    https://bugs.koha-community.org/show_bug.cgi?id=14716
    
    Test plan:
    
    1. Catalog a record with series name "Series & more"
    2. Find the record
    3. Make sure clicking the "Series & more" link works and the ampersand is properly encoded in the URL.
    4. Also try the attached test records and make sure their links work.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 541a90765ccb4ab29ac43eefbc5e17de9764bc84
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Oct 29 22:35:57 2018 +0000

    Bug 21581: (QA follow-up) Update comment according to code in SearchAuthorities
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6093e08443b393a3983778b4f92d0df56d419cd9
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 16 15:09:32 2018 +0000

    Bug 21581: Pass through authorities indexes
    
    To test:
     1 - Define a rule:
      Matching rule code: LCAUTH
      Match threshold: 100
      Record type: Authority record
      MATCH POINTS
      Search index: LC-card-number
      Score: 100
      Tag: 010
      Subfield: a
     2 - Have a record with an LC number in 010
     3 - Export it
     4 - Edit the record in Koha, move the value from 010 to another field
     5 - Import the original record
     6 - Use the matching rule above, you expect it won't match (nothing in 010 anymore)
     7 - It matches?!?!?!
     8 - Enable zebra logging in koha-conf.xml
      <zebra_loglevels>none,fatal,warn,request,info</zebra_loglevels>
     9 - tail -f /var/log/koha/kohadev/zebra-output.log
    10 - On manage marc apply matchign with no rule, then reapply with rule
    11 - View the output in the log - the index searched is 'Any'
    12 - Apply patch
    13 - Reapply matching
    14 - Note we search the expected index and no match is found
    
    NOTE: By applying bug 21579, I was able to view the difference, and
          see that it didn't match identically, because I had moved the
          value from 010 to 155. No log checking needed. clean/delete batch.
          Apply patch, no match. clean/delete batch.
          Edit authority back, matches.
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit da2a8c7b18811e67d78a5e6e81fd93039ae3af5e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 24 11:53:07 2018 +0000

    Bug 21581: Unit tests and updated data
    
    To test:
    1 - Apply this patch only
    2 - prove -v t/db_dependent/Search.t
    3 - It fails
    4 - Apply second patch
    5 - prove -v t/db_dependent/Search.t
    6 - It passes!
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a90502043f12055b7e6b61f9c23d924d2e02b999
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Oct 27 09:22:00 2018 -0300

    Bug 21702: (follow-up) Simplify checks and use standard fallback behaviour
    
    This patch acknowledges the fact that some checks here are done in a way
    that is not standard these days. This checks are originally done
    multiple times in different ways. output_and_exit_if_error should be
    used.
    
    This implies a minor behaviour change: if the passed (in the URL)
    borrowernumber doesn't exist, it sends the user to a 'Patron doesn't
    exist page' instead of the circulation page for the borrowernumber.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 466e29263910c85ce6417f322dc505558eeaa8a3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Oct 27 09:11:33 2018 -0300

    Bug 21702: Make mancredit.pl use the patron id for the staff user
    
    I think unsafe SQL modes and the fact that manager_id has no FK allowed this to go unnoticed. But now we catch it!
    
    To test:
    - On a patron, try adding a new manual credit of any type
    => FAIL: It fails telling the userid of the logged user is not a valid integer!
    - Apply this patch
    - Try adding a manual credit of any type
    => SUCCESS: Manual credit added!
    - Sign off!
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e1b73ad7cb970a52a6191aa5c73b7491db537327
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Oct 27 08:34:39 2018 -0300

    Bug 13098: Fix POD for Koha::Account::Offsets::total
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5c90aae36a36cabae004b03f0b71f30883ac2e8c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 25 16:13:27 2018 -0300

    Bug 13098: Sum at DBMS level
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3db4926db3ba6c49d29d36d450b7c689d207e091
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 25 16:06:14 2018 -0300

    Bug 13098: Do not compare with precision
    
    Formating will be done TT side
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7dd4d60c8a9118e13b02b4dc60612df4cbc95f91
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 18 13:08:42 2018 -0300

    Bug 13098: Make _FixAccountForLostAndReturned refund the right thing
    
    This patch changes the logic inside the method, to make it match the
    behaviour described on the tests.
    
    It uses the existing offsets on the account_offsets table to gather
    information about the right things to refund.
    
    To test:
    - Run:
      $ kshell
     k$ prove t/db_dependent/Circulation.t
    => FAIL: Tests don't pass!
    - Apply this patch
    - Run
     k$ prove t/db_dependent/Circulation.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Followed test plan, patch works as described. All three patches pass QA
    test tool
    Signed-off-by: Alex Buckley <alexbuckley@catalyst.net.nz>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0fb422d8f9dba77edde17d18eeac6471c7245730
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 12 10:27:06 2018 -0300

    Bug 13098: Tests for all _FixAccountForLostAndReturned use cases
    
    This patch introduces tests for all the use cases for
    _FixAccountForLostAndReturned. This includes the following scenarios
    before _FixAccountForLostAndReturned is called:
    
    - Full write off (the original issue)
    - Full payment
    - No payment or write off
    - Partial payment and partial write off
    
    Written off debts (L lines) are just skipped, any kind of payment is
    added and then refund as a single credit (CR). Amount outstanding is set
    to 0. Offsets need to be generated for paper trail of this decisions.
    
    To test:
    - Run:
      $ kshell
     k$ prove t/db_dependent/Circulation.t
    => FAIL: Tests fail because _FixAccountForLostAndReturned is not doing
    the right thing :-D
    
    Followed test plan, patch works as described
    Signed-off-by: Alex Buckley <alexbuckley@catalyst.net.nz>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9acfe172574d91da9b6724c1b9e61a00a0017271
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 18 12:57:33 2018 -0300

    Bug 13098: Add Koha::Account::Offsets->total
    
    This patch introduces this trivial method for returning the sum0 result
    of the amount columns of a Koha::Account::Offsets set.
    
    To test:
    - Apply this patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Account/Offsets.t
    - Sign off :-D
    
    Followed test plan, patch worked as described
    Signed-off-by: Alex Buckley <alexbuckley@catalyst.net.nz>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0275c36d962a284453c36b0472a3a5ef87329fc6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 29 17:27:52 2018 -0300

    Bug 21596: (follow-up) Handle updated_on part 2
    
    It seems that I have over complicated things here, now
    t/db_dependent/Koha/Object.t is failing
    
    Apparently everything is ok with this change.
    Test plan:
    prove -r prove -r t/db_dependent/Koha/Object.t t/Auth_with_shibboleth.t
    t/db_dependent/Patrons.t t/db_dependent/Koha/Patron*
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3a150b5d7519c2969de6d966193af242e1e787e0
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Oct 28 05:43:30 2018 +0000

    Bug 20720: (QA follow-up) Some minor corrections
    
    Made some corrections to countries, spelling and
    changed OPUS entry.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5367bfcabd395c926be1c8e215d0e8c2eb76898f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Sat Oct 20 13:49:51 2018 +0100

    Bug 20720: Found some more sponsors to add to 'about'
    
    git log|grep -i "sponsored-by"|sort -n | uniq
    git log|grep -i "sponsored by"|sort -n | uniq
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cde4bb0d2337add26de87dcb68ca5da371283099
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 19 17:17:41 2018 +0100

    Bug 20720: Using git Sponsored-by lines to update 'about'
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 411e78864918c909feffeadb341db37cea0a4393
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 17 12:22:50 2018 +0000

    Bug 21242: If not searching for patron, move to log viewer
    
    To test:
    1 - Bring up a patron
    2 - Click 'Modification log'
    3 - Note you get borrower info
    4 - Move the object field into info field
    5 - Submit
    6 - You are now on the 'Log viewer' page with admin options, not
    borrower circ options
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ad56b39888f1422606b16375b903fffa19bc59ba
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 23 10:15:11 2018 -0300

    Bug 21634: Keep "circulation" module selected when viewing patron's logs
    
    To recreate:
    - View a patron detail page
    - Click "Modification log"
    - Notice that the url has "modules=MEMBERS&amp;modules=circulation", but
    the "Circulation" option is not selected in the "Modules" dropdown list.
    This is because of uppercase vs lowercase.
    
    The bug:
    - Right after you click "Modification log" you will see all the
    "members" and "circulation" logs
    - Submit the form without changing any input/select from the form
    => Now you only see the "members" logs.
    
    Test plan:
    - Apply the patch
    - Click "Modification log"
    - Notice that the url now contains "modules=MEMBERS&amp;modules=CIRCULATION"
    - Submit the form without changing any input/select from the form
    => Now you have the "members" and "circulation" modules selected.
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b3661a5caeb634cbb6ca012998048d18d2f782b2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 19 11:36:16 2018 -0300

    Bug 21613: (QA follow-up) Resolve warning on $ENV{_} - avoid autovivification
    
    See C4::Circulation::SendCirculationAlert
    3355     my $do_not_lock = ( exists $ENV{_} && $ENV{_} =~ m|prove| ) || $ENV{KOHA_NO_TABLE_LOCKS};
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8c45ed8601ce8ebe6c4b2c6ccc452865921a7ae9
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Oct 19 10:15:56 2018 +0200

    Bug 21613: (QA follow-up) Resolve warning on $ENV{_}
    
    Some shells may not pass the program name in underscore, and cron also
    does not like it here:
    Use of uninitialized value $ENV{"_"} in pattern match (m//) at Koha/Database.pm line 79.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bab5ff0645768a1283f28d651687bd1cc6d3dfbe
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 18 20:06:07 2018 -0300

    Bug 21613: Turn strict SQL modes on for tests
    
    This patch will turn the strict SQL modes on When tests are ran with prove.
    
    Test plan:
    - Apply the first patch
    - prove t/db_dependent/Koha/Database.t
    => Will pass if you have <strict_sql_modes>1</strict_sql_modes> in your
    koha-conf.xml
    => Will fail otherwise
    - Apply the second patch
    - prove t/db_dependent/Koha/Database.t
    => Will pass whatever the value of strict_sql_modes in your
    koha-conf.xml
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5a979fd0c4c34f5ccd2da744dd2847faf72aef2b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 18 20:06:03 2018 -0300

    Bug 21613: Add a test
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2ca766f39245e1c3bd9b4acc9ce01a9eeaec8a56
Author: Mark Tompsett <mtompset@hotmail.com>
Date:   Fri Sep 14 16:06:49 2018 -0700

    Bug 21349: Instructors with special characters in cardnumber cannot be removed from course reserves
    
    The cardnumber can contain strange non-javascript-friendly
    characters. This patch converts all the internal references
    to borrowernumber, but displays the cardnumber when showing
    list of matching users.
    
    TEST PLAN
    ---------
    1) Make sure Course Reserves is being used. Check system preferences.
    2) Make sure there is a Course entered.
    3) Make sure there is a patron with an cardnumber which breaks
       the existing javascript (eg. Ka-boom:Ka-boom!KABOOM@#$!)
    4) Go into the course list.
    5) Click the course name link
    6) In the "Instructor Search" box enter the patron name.
    7) Select the patron which has the ugly cardnumber.
    8) Click Save
       -- The course listing should have the new teacher listed.
    9) Click the course name link again.
    10) Click 'Remove' beside the instructor's name.
        -- nothing happens, and inspecting the error console gives
           you the ugly error described in comment #0
    11) apply this patch
    12) restart_all
    13) sudo service apache2 restart
    14) refresh the page.
    15) click 'Remove' beside the instructor's name.
        -- name is removed.
    16) Click Save
        -- the course listing no longer lists the new teacher.
    17) Actually confirm that adding and removing others normally
        works as expected.
    18) run koha qa test tools.
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b94399131614a304b3a0282ec8a85194cc72b3cf
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 25 15:24:29 2018 +0000

    Bug 21186: (follow-up) Incorrect Bootstrap modal event name in multiple templates
    
    This patch addresses a few more instances of this problem which I didn't
    catch in my first pass.
    
    To test, apply the patch and clear your browser cache if necessary.
    
    - Go to Circulation -> Check in and check in an item which has a hold.
      - When the 'Hold found' modal appears the checkin barcode field
        behind it should be disabled.
      - When the modal is dismissed the checkin field should be enabled
        again and focus should be on that field.
    
    - Go to Administration -> Library groups.
      - Click the "Add group" button. The cursor focus should be on the
        title field.
    
    - Go to Tools -> MARC modification templates.
      - Click the "New template" button. The cursor focus should be on the
        name field.
    
    Signed-off-by: Cori Lynn Arnold <carnold@dgiinc.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7b6107beaf06d3e3956dc69145d966a35de1a59d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Aug 8 19:03:38 2018 +0000

    Bug 21186: Incorrect Bootstrap modal event name in multiple templates
    
    Modals in the staff client which load data via AJAX require an "on
    close" action in order to clear the modal of the loaded data. The
    problem presents itself the second time the modal is opened: The
    "loading" message doesn't appear, and the data from the previous link
    is shown until the new data loads.
    
    To test, apply the patch and test the following pages. In each case,
    click multiple instances of the modal trigger link/button to confirm
    that the "loading" message always appears between re-displays of the
    modal.
    
    - Acquisitions -> Vendor -> Add to basket -> From a staged file -> Add orders
      - Test the "MARC" and "Card" links
    - Acquisitions -> EDIFACT messages
      - Test the "View message" button
    - Acquisitions -> Vendor -> Add to basket -> From an existing record
      - Test "View MARC" link
    - Acquisitions -> Vendor -> Invoices -> Invoice -> Receipt page
      - Test the "Order," "MARC," and "Card" links.
    - Catalog -> Bibliographic record details
      - Test the MARC Preview link.
    - Cataloging -> Cataloging search results
      - Test the Actions -> MARC preview and Actions -> Card preview menu
        items
    - Cataloging -> Cataloging search results -> Merge
      - Test the "View MARC" linkscataloguing/merge.tt
    - Tools -> Patron lists -> Actions -> Print patron cards
    - Tools -> Batch record modification -> Results -> Show MARC
    - Tools -> Staged MARC record management -> View batch
      - Test MARC preview shown when you click a staged title
    
    Signed-off-by: Cori Lynn Arnold <carnold@dgiinc.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0cffb0f7589aa52d65bda9a8a4934790a141f3a0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 19 12:06:43 2018 -0300

    Bug 21621: Remove incorrect GROUP BY from tools/letter.pl
    
    Fix:
      'koha_kohadev.letter.name' isn't in GROUP BY
    
    DBD::mysql::db selectall_arrayref failed: 'koha_kohadev.letter.name' isn't in GROUP BY [for Statement "SELECT branchcode, module, code, name, branchname
                FROM letter
                LEFT OUTER JOIN branches USING (branchcode)
         GROUP BY branchcode,module,code ORDER BY module, code, branchcode"] at /home/vagrant/kohaclone/tools/letter.pl line 383.
    
    Test plan:
    - Copy some default notice templates for specific libraries
    - List the different notice templates
    - Confirm that notices appear only one, with "all libraries" you will see all
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5256f25d24b114a5186a9ed612e845e114bebb7e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sun Oct 28 08:59:51 2018 -0300

    Bug 21703: Fix filter on dataurl variable to allow placing holds in staff again
    
    We must not encode & again and use the url filter, instead of uri.
    
    To test:
    - Search for a record in staff
    - Go to holds
    - Search for patrons, multiple should be displayed
    - Pick a patron by clicking on the name
    - Verify an error is shown and the URL is incorrect
    - Apply patch
    - Repeat test above, placing a hold should now work.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e64650216f568e7d7ad26e25ae59493202d871a3
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Oct 25 11:37:42 2018 +0200

    Bug 21311: (follow-up) Adjust wording of failed login message
    
    Based on the feedback of Jonathan, Katrin, Mark and Martin (thx), adding
    the general remark that if lockout is enabled, an account may be locked
    out after x attempts. This does not say that the account on hand is
    locked or not.
    
    Adding a <p> tag between 'Log in'-button and 'Forgot your password' for
    presentation.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 716301d6f5bb149e963c5547d69d4019c20953db
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Oct 10 16:04:38 2018 +0200

    Bug 21311: Remove locked message from opac-auth.tt
    
    We should not expose more information than needed when someone tries
    to login with invalid credentials. Saying that an account is locked
    reveals that the account exists (or perhaps an email address).
    
    Trivial fix. Keeping the var too_many_login_attempts for staff.
    Note: We do not remove this distinction for the staff client here (in the
    assumption that a library may well have additional security measures in
    place for staff client). But it could be done too (on another report).
    
    Test plan:
    Enable lockout feature.
    Enter invalid credentials until account locks out (on OPAC !!)
    Note that message does no longer change to 'Account is locked'.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4858c4f736d366701fa6a3f1def2727dd85c70ce
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu Oct 25 14:17:59 2018 +0100

    Bug 21641: (follow-up) Address wrong call method
    
    This patch substitutes C4::Accounts->getnextacctno for
    C4::Accounts::getnextacctno since getnextacctno is only expecting to be
    passed a borrowernumber
    
    Signed-off-by: Alex Buckley <alexbuckley@catalyst.net.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6fba062d291e065b4a6d7ffebdf82db9d6935971
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu Oct 25 13:23:31 2018 +0100

    Bug 21641: (follow-up) Address additional call
    
    This patch makes the same change as the main patch, just for an
    additional occurance of getnextacctno
    
    Signed-off-by: Alex Buckley <alexbuckley@catalyst.net.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 344dba2fb84a743603c1c51294be4e378e6e5dc7
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Wed Oct 24 03:37:57 2018 +0000

    Bug 21641: Added C4::Accounts to getnextacctno() call
    
    Test plan:
    1. Fetch and checkout the master branch
    2. Checkout an item with a rental charge associated with it to a user
    and notice an error is thrown
    3. Apply patch
    4. Restart memcached and plack
    5. Repeat steps 1 and 2 and notice the checkout happens successfully
    
    Sponsored-By: Catalyst IT
    
    Signed-off-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit de40a681625b544efdb697ab25b960bff08cb200
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Oct 25 11:29:28 2018 +0000

    Bug 21611: Fix priority dropdown for holds
    
    To Test:
     1 - Find a record
     2 - Place several holds some with differing pickup locations
     3 - Check in one hold to confirm as waiting
     4 - Check another in to set a hold in transit
     5 - View the holds queue for the record:
        /cgi-bin/koha/reserve/request.pl?biblionumber=##
     6 - Confirm found holds are incorrect
     7 - Apply patch
     8 - Reload
     9 - Confirm holds look correct
    10 - Alter the values of HoldsSplitQueue and HoldsSplitQueueNumbering
    11 - Confirm things still look right
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c579b9c8f4dbffd0a521198d530d7012eb5d2402
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Oct 28 16:10:52 2018 +0000

    Bug 21704: (QA follow-up) Fix evil tabs
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit edf99afa63e2c57fcda3f39ef36a651ac109d643
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sun Oct 28 09:56:17 2018 -0300

    Bug 21704: (follow-up) Remove unused 'frameworkcode' template param
    
    This patch removes the 'frameworkcode' template parameter. Now the
    'framework' object is passed, and everytime the frameworkcode is needed
    on the template, framework.frameworkcode is called.
    
    To test:
    - Apply this patch
    - Run:
      $ grep ' frameworkcode ' koha-tmpl/intranet-tmpl/prog/en/modules/admin/marctagstructure.tt
    => SUCCESS: There's no use of 'frameworkcode' in the template
    - Sign off :-D
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e7c049fea753232a51d78e07a9f15354cd71a469
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sun Oct 28 09:36:32 2018 -0300

    Bug 21704: Edit framework subfield link is broken (TT filter)
    
    This patch removes URL building from the controller
    (admin/marctagstructure.pl) and does it on the templates, using the
    right 'uri' filter for the query parameters.
    
    It also removes:
    - No longer used attributes that are passed to the template
    - Duplicated code in the templates
    
    To test:
    - Go to Home > Administration > MARC bibliographic framework
    - On any of the listed frameworks, pick the 'MARC structure' action in
    the dropdown
    - On any subfield, hover on the actions dropdown
    => FAIL: The URLs are wrongly formed
    - Click on the links
    => FAIL: You get errors because of the bad URL
    - Apply this patch
    - Reload the 'MARC structure' page
    - On any subfield, hover on the actions dropdown
    => SUCCESS: LInks look correct
    - Click on any of them
    => SUCCESS: They work!
    - Use the 'Display only used tags/subfields' checkbox
    => SUCCESS: No behaviour change!
    - Sign off :-D
    
    Sponsored-by: Theke Solutions
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5c5ecedb3f1cfed8d97ba837bfa98427d4a6ec5e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Sat Oct 27 15:53:34 2018 +0000

    Bug 18591: Fix pluralization of type
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cda457c6f23e27828db7e493ac80d8e845438b6d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Sat Oct 27 15:03:03 2018 +0000

    Bug 18591: Add missing schema file
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 98d9df517c43654eb3e6011f49694e52f25da96f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 3 17:06:54 2018 +0000

    Bug 21435: Update two-column templates with Bootstrap grid: Tools part 3
    
    This patch modifies several tools templates to use the
    Bootstrap grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags and "text/css" attributes from <style> tags in the
    modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Tools -> MARC modification templates
       - View and edit templates
     - Tools -> Batch patron modification
       - Test each step of the process
     - Tools -> Overdue notice/status triggers
     - Tools -> Upload patron images
       - Test each step of the upload process
     - Tools -> Quote editor
       -> Quote uploader
         - Import quotes
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 769fe38642b5d5ec99866aaacd911047ec799023
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Oct 12 14:23:49 2018 +0000

    Bug 21434: (follow-up) Switch two-column templates to Bootstrap grid: Tools part 2
    
    This follow-up corrects CSS which was dependent on YUI-specific markup
    context.
    
    To test, apply the patch, regenerate the staff client CSS, go to Tools
    -> Calendar.
    
    - Click any date on the calendar
    - In the entry form the checkbox and radio button options should be
      styled correctly.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 36c09b6e616d96b210c21ff7512ca1679ef4bdfc
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 3 16:48:34 2018 +0000

    Bug 21434: Update two-column templates with Bootstrap grid: Tools part 2
    
    This patch modifies several tools templates to use the
    Bootstrap grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags and "text/css" attributes from <style> tags in the
    modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Tools -> Export data
     - Tools -> Calendar
     - Tools -> Import patrons
     - Tools -> Inventory
     - Tools -> Staged MARC management
       - View batches and batch details
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c2bb1c2c06698abfd68f6893358a259e87dfa2b8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Sep 27 15:36:28 2018 +0000

    Bug 20450: (follow-up) Add missing template filters
    
    This patch adds two missing template filters as pointed out by the
    template test.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ba116a578b3115be1888bb23bc637b165f818fca
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Aug 9 22:13:32 2018 +0000

    Bug 20450: Add collection to item table when placing a hold on a specific copy (OPAC)
    
    This patch adds a new collection column to the item table when selecting
    a specific item for a hold. The column will only appear if at least
    one item has a collection set.
    
    To test, in OPAC:
    - Place a specific hold on
      - a record with one or more items with collections
      - a record with one or more items without collections
    - Verify the collections display correctly when they exist
    - Verify the table still works as expected
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2953c6c6cde6dfdbc33248cd98178508d465eeec
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Aug 9 21:28:30 2018 +0000

    Bug 20450: Add collection to item table when placing a hold on a specific copy (Intranet)
    
    This patch adds a new collection column to the item table when selecting
    a specific item for a hold. The column will only appear if at least
    one item has a collection set.
    
    To test, in staff:
    - Place a specific hold on
      - a record with one or more items with collections
      - a record with one or more items without collections
    - Verify the collections display correctly when they exist
    - Verify the table still works as expected
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 45f90d9b6dd07aed6f853b18a5ce86d93c9d6a48
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Aug 8 19:52:26 2018 +0000

    Bug 20896: Move serial enumeration after callnumber on intranet detail page
    
    The column with serial enumeration/chronology information is moved
    from the back to the right of itemcallnumber on the intranet detail
    page.
    
    To test:
    - Apply patch
    - Look at different detail pages in staff:
      - 1 or more items have serial enumeration information
      - no item has serial enumeration informatoin
    - Verify
      - itemcallnumber is now followed by serial information, if
        an item with the field filled in exists for the record
      - all other functionality, like sorting, works as expected
    
    https://bugs.koha-community.org/show_bug.cgi?id=20896
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 13c1b6f123d7b9fd294704740903959b8e9e5154
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Sat Oct 27 14:20:37 2018 +0000

    Bug 19263: DBRev 18.06.00.047
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4a70f3a1ca4ce5c33c7efe17ca38d90d3cfbbdf7
Author: Cori Lynn Arnold <carnold@dgiinc.com>
Date:   Fri Oct 12 13:13:12 2018 +0000

    Bug 19263: Rancor - 001 widget - changes to address QA issues
    
    Changes were made to address QA issues from Comment 17
    
    Tests:
    
    1) Verify that a new entry for CONTROL_NUM_SEQUENCE is added to table authorised_value_categories
    2) Edit a bib record using advanced editor and note that the 001 widget isn't there when adding/editing 001 field
    3) Add a new row into authorised_values table with:
         a) CONTROL_NUM_SEQUENCE in category column
         b) authorised_value column has a string ending with a number i.e. sprLib0001
         c) lib column has a short string indicating the type of control number i.e. "Springfield Library"
    4) Edit a bib record using the advanced editor and note that the 001 widget is there when adding / editing 001 field
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6f8fe7e22a59cef7bd1804440cbd7ceaaddf25b7
Author: Cori Lynn Arnold <carnold@dgiinc.com>
Date:   Tue Oct 9 12:48:58 2018 +0000

    Bug 19263: Rancor - 001 widdget only for configured client
    
    Tests:
    
    1) Verify that a new entry for CONTROL_NUM_SEQUENCE is added to table
    authorised_value_categories
    2) Edit a bib record using advanced editor and note that 001 widget
    isn't there when adding/editing 001 field
    3) Add a new row into authorised_values table with:
        a) CONTROL_NUM_SEQUENCE in category column
        b) authorised_value column has a string ending with a number i.e.
        "faw0001"
        c) lib column has a short string indicating type of control number
        i.e. "FAW"
    4) Edit a bib record using the advanced editor and note that the 001
    widget is there when adding / editing 001 field
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6fd74beeababe6741c5d551f8753eee122e9962b
Author: Cori Lynn Arnold <carnold@dgiinc.com>
Date:   Mon Oct 8 16:10:16 2018 +0000

    Bug 19263: Rancor - 001 widget - db update
    
        In advanced editor mode for cataloging, the 001 widget will
        automatically assign the next control number if a format is defined
        in  authorised_values table.
    
        To test you need access to the database.
        1) Verify that a new entry for CONTROL_NUM_SEQUENCE is added to
        table  authorised_value_categories
        2) Enter a new value for authorised_values with the authorised_value
        column ending in a number
        3) Edit a record using the advanced editor, specifically the 001
        field
        4) Note the new widget and option to increment or assign manually.
    
        The buttons fit within the widget now, and there's a database update
        to create the CONTROL_NUM_SEQUENCE.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 36d46cf9972ca906cae0d29cc2cdd2d5b5545316
Author: Jesse Weaver <pianohacker@gmail.com>
Date:   Tue Nov 10 12:04:14 2015 -0700

    Bug 19263: Rancor - Add auto-001 widget
    
    To test:
    
    1 - Define a new authorised valued category "CONTROL_NUM_SEQUENCE"
    2 - Add a value/sequence
        The authorised_value is the starting value - shoudl end in a number
        that can be incremented e.g. "control_sequence_001"
        The description field is the name for the seqeuence
        Opac description is unused
    3 - Edit a record in rancor
    4 - Note the new widget and option to increment or assign manually
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 593b43f9b694a86e4509960b7b3942056b52e7cb
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Sat Oct 27 13:24:30 2018 +0000

    Bug 18591: (RM follow-up) Fix filter
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4d8ac89c0e082f2764d708b991764783d38987e3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Sat Oct 27 13:21:09 2018 +0000

    Bug 18591: DBRev 18.06.00.046
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 98b0a683c4507cc1a96db2a2216d205a8fb76cc2
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Oct 5 14:31:48 2018 +0100

    Bug 18591: (follow-up) Add more POD
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 678e022bbbf039cbafcd55ad3ccd767ee3749544
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Oct 5 14:20:11 2018 +0100

    Bug 18591: (follow-up) Add missing html filters
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2460eb0597b699eb8c4afc19c727091fca1f4200
Author: Magnus Enger <magnus@libriotech.no>
Date:   Mon Nov 20 14:14:30 2017 +0000

    Bug 18591: Allow any number of comments on ILLs
    
    This patch makes it possible to add arbitrary comments to ILL
    requests. Comments are read only and displayed in chronological
    order. Comments can be added by librarians, but also added automatically
    based on comments in the different protocols, so that comments from the
    lending library can also be added.
    
    To test:
    - Enable the ILL module ("ILLModule" syspref + config in koha-conf.xml)
    - Install the Dummy backend from here:
      https://github.com/PTFS-Europe/Dummy
    - Create a Dummy ILL request
    - Add comments to the request, checking that the name and borrowernumber
      of the person that added the comment is displayed ok
    - Check that the displayed date and time the comment was submitted follows
      the "dateformat" syspref
    - On the "List requests" page, check that the correct number of comments
      is displayed in the "Comments" column
    - Check that the tests pass:
      prove t/db_dependent/Illcomments.t
    
    Signed-off-by: andrew.isherwood@ptfs-europe.com
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cf5835fc5286c7e087da2eeec06cf0417a2502d3
Author: Magnus Enger <magnus@libriotech.no>
Date:   Sat Nov 11 14:02:22 2017 +0000

    Bug 18591: Database updates
    
    Signed-off-by: andrew.isherwood@ptfs-europe.com
    
    Bug 18591: (QA follow-up) Fix merge error in kohastructure.sql
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a05c1cb9a60ea40a6b2716a16136ca92488a979f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Oct 26 19:43:20 2018 +0000

    Bug 21526: (RM follow-up) Fix merge markers and a few extra filters
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 89bad1fa460dc75bdaeb40e82ee56639e35fe0c9
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Fri Oct 26 09:28:01 2018 +0000

    Bug 21680: Remove dead code - C4::Accounts::fixaccounts
    
    Test plan:
    
    git grep fixacccounts
    -- without patch there are 3 occurences
    -- with patch - no occurence of fixaccounts
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 51ce2ebfe12e344beec4d73109e885c5c303347c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 24 19:50:02 2018 -0300

    Bug 21654: Remove refund_lost_item_fee_rules.sql from the installer process
    
    This is a follow-up patch for bug 14048 comment 97
    
    Test plan:
      git grep refund_lost_item_fee_rules.sql
    should not return any results
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 826111b11cc30dd1536c943d6875b54b6355eb74
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Oct 26 14:45:28 2018 +0000

    Bug 21526: (QA follow-up) Fix all the tabs
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9c9c68edfd37144b135af33bd656d3808799c25e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 17 11:34:00 2018 -0300

    Bug 21526: Remove duplicated USE raw statement
    
    See patch on bug 21576 comment 14
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 582502644801b44595497caf6bbee449f0347238
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 15 19:44:51 2018 -0300

    Bug 21526: uri escape TT variables when used in 'a href'
    
    This patch has been generated with the script provided on bug 21576.
    It only affects variable used in the href attribute of a link *when*
    href it the first attribute of the node (grep "a href")
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ddef9376f2e26375d51c58aa83689780b94c61df
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 17 11:29:16 2018 -0300

    Bug 21576: Preserve chomp chars for USE raw
    
    See bug 21526 comments 5-7
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1dbea5dd2c5c98b53dbc88493b97d6e0c419c244
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 15 19:44:06 2018 -0300

    Bug 21576: Handle complex uri
    
    Only the first TT params in a href was taken into account.
    This also takes care to replace into href attributes only (for instance not
    title, etc.)
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2e9252584842fcf90aa4774eff326c631475852e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 15 17:29:35 2018 -0300

    Bug 21576: Keep compatibility with QA script
    
    The QA script call 'missing_filters', it sounds better to keep it in
    order to avoid fixing it and have a weird condition (if
    module->can('subroutine_name')) to maintain
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c933244fe60614a6a9d0f14efec4f175966c1704
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 12 13:57:49 2018 -0300

    Bug 21576: Add a developer script to fix missing TT filters
    
    See bug 13618 and bug 21526.
    
    We need a script to add missing filters, or replace wrong ones.
    
    Test plan:
    - Add unescaped variables to .tt files
    - prove xt/find-missing-filters.t
    will warn about them
    - perl misc/devel/add_missing_filters.pl
    will add the missing/wrong filters
    - prove xt/find-missing-filters.t
    will now be happy
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f32ee27deb7abe531ad5e5db5242f7243e3baa8d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 22 16:51:25 2018 -0300

    Bug 21562: Fix sort by checkout date in the circulation table
    
    The sort is done in SQL but resort by DataTables when displaying the
    results.
    iDataSort should be used to mimick date_due sort behavior.
    
    Test plan:
    - Check some items out
    - Modify the checkout and due dates, like:
        2018-10-22
        2018-01-23
        2018-05-27
    - Sort by checkout date, then due date. The sort should be correct for
    all values of the DateFormat syspref
    
    Followed test plan, patch works as described and passes QA test tool
    
    Signed-off-by: Alex Buckley <alexbuckley@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 20cba0d2956de5b1ff38b4a5f4b0f620204930e0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 22 17:02:51 2018 -0300

    Bug 21629: Use cn_sort instead of itemcallnumber when displaying a list
    
    DBMS can sort callnumbers correctly using cn_sort. We should use it
    showing a list's content.
    
    Test plan:
    - Add items with callnumber to a list
    - Display the list
    - List the content by callnumbers
    => Confirm that the records are correctly sorted by callnumber
    
    Signed-off-by: Myka Kennedy Stephens <mkstephens@lancasterseminary.edu>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 22d817ddc863354b0a6316c6ddb91e2cc86cf603
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Oct 26 17:09:18 2018 +0000

    Bug 21639: DBRev 18.06.00.045
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f106c3a13aa0ee69d744c683e99d9d6ec3c10ffa
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 25 12:00:35 2018 -0300

    Bug 21639: (follow-up) Adjust the other languages
    
    uk-UA was wrong.
    We should use the same file for all languages
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7c25be79a00b6b7b8b2f4b38eb2dd9f3f6cb502e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 24 19:43:18 2018 +0000

    Bug 21639: Adjust the other languages
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 71fdba0ff014017287ca7b1f524850fadad81af1
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 24 01:33:42 2018 +0000

    Bug 21639: Add phone transports to new and existing installs
    
    To test:
    1 - Confirm if you do or do not have 'phone' transports defined in the
    message_transports table
    2 - Apply patch
    3 - Run updatedatabase
    4 - If you didn't have them you should now
    5 - Run updatedatabase again, confirm it doesn't error
    6 - sudo koha-mysql kohadev
    7 - DELETE from message_transports WHERE message_transport_type =
    'phone'
    8 - Run updatedatabase again
    9 - Confirm the message transports table is restored
    10 - Drop your DB (or reset_all in kohadevbox)
    11 - Ensure the table is fully populated including phone notices
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bf8b4e773c089a4094b18c62af91711b8af99f82
Author: Victor Grousset <victor.grousset@biblibre.com>
Date:   Thu Oct 18 11:54:58 2018 +0200

    Bug 21587: don't drop patrons to notify in order creation
    
    It only worked on modification.
    
    == Test plan ==
    1. have/create a active budget
    2. have/create a fund
    3. have/create a vendor with minimal info
    4. create a basket with minimal info
    5. add an order line to the basket
         Add a user in "To notify on receiving"
    6. Modify the order
    7. The patrons isn't here. This is the bug
    8. Add a user in "To notify on receiving"
    9. Save
    10. Modify the order
    11. The patron is here now
    12. Apply this patch
    13. Retry step 5 to 11 and patron should be saved on order creation
    14. Celebrate! :D
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 59757c1f5b7de423241f91ef8c95822183786d00
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 25 12:55:43 2018 -0300

    Bug 21669: Do not html filter TT assignement statements
    
    Why? Because we must filter the variables when we display them.
    If we escape them on assignement, they will be double escaped:
      [% XXX = "<span>pouet</span>" | html %]
      [% XXX | html %]
      => &lt;span&gt;pouet&lt;/span&gt;
    
    Also it will bring trouble if we are assigning a structure (see bug
    21663 for instance).
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 75ee8420ed655c17ad69f9bfdd2b4e0d26d5c9d7
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 25 13:30:34 2018 +0000

    Bug 21663: Incorrect filter prevents predefined notes from being added to patron acccounts
    
    This patch removes an "html" filter from the template include which
    allows one to add predefined nots to a patron's account.
    
    To test, apply the patch and open a patron record for viewing or
    checkout. Click the "Add message" button. The "predefined notes"
    dropdown should contain the authorised_values you have with the
    'BOR_NOTES' category.
    
    Signed-off-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 41397c855397aee9847943c2f124e0bdc8ba7eb7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 18 18:00:15 2018 -0300

    Bug 21603: Remove incorrect GROUP BY from C4::CourseReserves
    
    'koha_kohadev.c.department' isn't in GROUP BY
    
    Test plan:
    Prove that the test fail without this patch and pass with this patch
    applied (switch on the SQL modes)
    
    Signed-off-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b106ddb96b21a78559d7a60057e94024e7db4a16
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 18 17:37:35 2018 -0300

    Bug 21612: Remove incorrect GROUP BY's from Koha::VirtualShelves
    
    'koha_kohadev.me.shelfname' isn't in GROUP BY
    
    Same as
      commit 7e220e0d8f107cce63f32bfaa1919c04b4dea6e2
      Bug 20179: [sql_modes] Remove GROUP BY in get_shelves_containing_record
    
    Test plan:
    - Add public and privates shelves
    - Shares some of them
    - List them
    => The correct numbers of shelves must be displayed
    
    Signed-off-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dab4426457578094eb5aac6531d1a1db631d05c7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 23 10:35:24 2018 -0300

    Bug 21635: [sql_modes] Remove GROUP BY clause in batchMod.pl
    
    batchMod.pl: DBD::mysql::st execute failed: 'koha_kohadev.authorised_values.authorised_val
    ue' isn't in GROUP BY [for Statement "SELECT authorised_value, lib FROM authorised_values LEFT JOIN authorised_values_branches ON ( id = av_id )  WHERE category = ? AND ( branchcode = ? OR branchcode IS NULL )
    GROUP BY lib ORDER BY lib, lib_opac" with ParamValues: 0='WITHDRAWN', 1="CPL"] at /home/vagrant/kohaclone/tools/batchMod.pl line 396.
    
    We must use Koha::AuthorisedValues->search instead of a raw SQL query.
    
    Test plan:
    Edit some items in a batch
    Confirm that the dropdown list (AV) are correctly filled
    
    We will lose speed efficiency here, but better to be consistent, then cache AV in Koha::AuthorisedValues
    
    Signed-off-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d71fb84f6fb40f7eb59a9f86f1a07d57f58f3c0a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Oct 26 16:25:02 2018 +0000

    Bug 7143: Update about page for new devs Margaret Hade and Isobel Graham
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d8edb017e4107802e55b5887a1454651565a2e49
Author: Isobel Graham <isobel.graham09@gmail.com>
Date:   Sat Oct 20 09:12:19 2018 +0100

    Bug 20758: Fix for BrowseResultSelection typo
    
    To test:
    1) The  BrowseResultSelection description should no longer contain
    "fromt"
    
    Mentored-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8ae6242d08e1611a2ede2f5cd3356fdbbf488aa1
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Oct 25 14:25:10 2018 +0200

    Bug 21337: (QA follow-up) Rename exception code
    
    Patron::Delete becomes Patron::FailedDelete.
    Trivial replace.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 91d168200e2283fc8f250c5103e4736afa0f520a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 25 12:56:38 2018 -0300

    Bug 13618: Remove html filter for LAST
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cf44757391be03237725572821d79bd135a1335c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 2 08:46:58 2018 -0300

    Bug 13618: remove wrong html filter in 'Item search fields' admin
    
    The dropdown list contain the arrayref: ARRAY(0x...)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d76fde9467d7bbe1270cf652a601d71de09b1d56
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 25 10:24:46 2018 -0300

    Bug 21596: (follow-up) Handle updated_on
    
    Default value should only used if not exist.
    We got a failing test with the previous patch:
     #   Failed test 'borrowers.updated_on should have been kept to what we set on creating'
     #   at t/db_dependent/Patrons.t line 78.
     #          got: '1'
     #     expected: '0'
    
    Test plan:
    prove -r t/Auth_with_shibboleth.t t/db_dependent/Patrons.t t/db_dependent/Koha/Patron*
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1ce984ea1dd12391d39507cd21c4d3813eab9754
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 24 17:08:05 2018 -0300

    Bug 15486: Fix failing test in GetHardDueDate.t
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a7c3ba04365b91aaefe2365fc1275a8c6eed9122
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 24 19:28:44 2018 +0000

    Bug 15766: Update tests
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2206fe7cd80ad61055758a9c8072895fa360eaa4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 24 14:35:16 2018 -0300

    Bug 21596: Handle updated_on
    
    This has been picked from the solution proposed on bug 21610. It may not
    be pushed soon and so we need a fix for the failing tests
    (t/Auth_with_shibboleth.t)
    
    Test plan:
     prove -r t/Auth_with_shibboleth.t t/db_dependent/Koha/Patrons*
    must return green
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2e3eb44319db63f33ac05a51782c0692aa9a95d8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 24 17:35:18 2018 +0000

    Bug 15766: (RM follow-up) Schema updates
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 679cb3999f01dda76c168bde4e37c5d203348518
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 23 13:17:06 2018 +0000

    Bug 21511: (RM follow-up) Use orders.count instead of new variable
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 777e29e420b96ed7e6d63aff7c6b69ecc9c1d2ee
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 9 17:19:09 2018 +0000

    Bug 21511: Don't show acquisition details on subscription detail when there is no acq data
    
    This patch modifies the subscription detail page so that acquisitions
    details section is not shown when there is no acquisitions data.
    
    The acquisitions details are moved into a new tab similar to how it
    appears on the bibliographic details page. A count of orders is now
    passed to the template so that the check for existing acquisitions data
    will work correctly.
    
    To test, apply the patch and view the detail page for subscriptions.
    
    - When viewing a subscription for which there are orders you should see
      an "Acquisitions details" tab containing the acquisitions data.
    - When viewing a subscription with no orders the tab should not appear.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 008112025520ba05c162493a55f2f88e70db74d5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 24 17:19:19 2018 +0000

    Bug 15766: DBRev 18.06.00.044
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 85da34c94a5a92df78e03a505054a241dc797877
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 24 11:51:12 2018 -0300

    Bug 15766: Fix incorrect GROUP BY
    
    'koha_kohadev.creator_batches.description' isn't in GROUP BY
    
    Fix t/db_dependent/Creators/Lib.t if strict sql modes is on
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 461e7375cd9841f6d43e11c273998c3006f04abf
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Jun 6 01:48:33 2018 +0000

    Bug 15766: (follow-up) Fixing layout of description button
    
    This patch moves the 'Save' button to the toolbar as suggested. The
    description textbox and 'Save' button are hidden if the batch is new and
    appears when items are added.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f4b7e470e774c43d9b9771f103cefc53d5ecc71f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 31 16:54:43 2018 +0000

    Bug 15766: (follow-up) Correct merge errors
    
    This patch corrects some problems applying this on current master and
    removes an old merge conflict marker.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ba8ec9bfe2c538f4b586f30426e2dffb10b814ae
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Oct 18 22:40:13 2017 +0000

    Bug 15766: (follow-up) Hide description field if the batch is empty
    
    Because if it's empty, it hasn't actually been created yet. Hiding the
    field prevents a lot of errors
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 39772eca518512ce631ccc22c11d377df82901c4
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Oct 10 03:21:33 2017 +0000

    Bug 15766: (follow-up) Save description link as button on patroncard side
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4a34d9ec0611bb48373809f5c88863a952a62fb0
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Fri Sep 22 02:29:54 2017 +0000

    Bug 15766: (follow-up) Making 'Save description' link a button
    
    For consistency's sake in response to Comment 17.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5a4f7c6c0e0d4a6e518415a673abd3c406c89b36
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Sun Aug 27 21:48:06 2017 +0000

    Bug 15766: Adding descriptions to patron card batches
    
    This patch adds a 'description' column to the creator_batches table. The
    description for a batch can be added and updated using ajax.
    
    To test:
    1) Apply patch and update database (you will have to restart memcached)
    2) Go to Tools -> Patron card creator -> Manage batches
    3) There should now be a Description column next to Batch ID. This
    will be empty (as none of the batches have descriptions yet)
    4) Click Edit for any batch
    5) Notice new Batch description text field. Enter a description for
    the batch in here and click Save description. Some text should show
    saying the description was saved.
    6) If you go back to the manage batches page, the description should
    now show under the Description column.
    7) Go to Tools -> Label Creator -> Manage labels
    8) Repeat steps 3 to 6
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 023ab5845ac53c9f80ee69562d6c26f85b8b00f4
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Sep 24 13:37:16 2018 +0000

    Bug 21216: (follow-up) Exclude some columns from export
    
    This patch adds a custom buttons configuration to the Notices table so
    that columns with form controls are not included in copy/print/export
    operations.
    
    The DataTables columns settings include file has been modified
    to check for an existing buttons export columns configuration before
    applying the default.
    
    To test, apply the patch and clear your browser cache if necessary.
    
    Go to Tools -> Notices & slips. The table of notices should have a
    DataTables toolbar with a filter form, column visibility, and export
    buttons. Test the functionality of all these tools. Only the first four
    columns of the table should be included in printouts and exported files.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8960cee9abc3f6a7bd2ffce89a204f273d508926
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Sun Aug 19 15:19:49 2018 -0400

    Bug 21216: Add filter/search options to notices table
    
    This patch adds a DataTables toolbar to the Notices & slips table,
    including a filter field, column visibility, and data export options.
    
    To test, apply the patch and clear your browser cache if necessary.
    
     - Go to Tools -> Notices & slips
     - Confirm that there is a table toolbar with a filter, a "Column
       visibility" button, and "Excel," "CSV," "Copy," and "Print" buttons.
     - Confirm that showing and hiding columns via the button is working
       correctly.
     - Confirm that only the first four columns are sortable.
    
    Go to Administration -> Columns settings.
    
    - Expand the "Tools" section.
    - Find "id=lettert."
    - Make some selections to configure default settings of the reports
      table.
    - Return to reports and confirm that these defaults are applied.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 95917f384175008aa67bd87c378f7d469d61219e
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Oct 24 15:09:07 2018 +0200

    Bug 20554: (follow-up) KOHA_VERSION is not needed in opaclayoutstylesheet
    
    SET opaclayoutstylesheet does not need KOHA_VERSION, its defined by Asset.css()
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Fix a bad resolution conflict
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0c4ed27244323f970b8b1e2411844ed85511f01b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 24 13:22:46 2018 +0000

    Bug 15486: DBRev 18.06.00.043
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c5641af82a0ac943bea6439a87c5b9b619bf45cf
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Sep 24 12:56:07 2018 -0300

    Bug 15486: (follow-up) Default to unlimited
    
    While it doesn't have a practical effect (the variable is reset several
    lines below) I agree this should be explicitly set to its default.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e530107595e1c64a2073ff36a7fc94e07dcc8779
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Feb 7 16:10:28 2018 -0300

    Bug 15486: Make circ rules UI handle holds_per_day
    
    This patch makes the staff UI correctly handle the holds_per_day
    configuration.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1596818ff6433825cd6071fb692bc508773bbd97
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jul 19 19:32:09 2017 -0300

    Bug 15486: Modify request.tt to handle the new error string
    
    This patch makes reserve/request.pl display a convenient error
    description when a hold cannot be placed due to the new daily limit
    configuration.
    
    To test:
    - Apply this patchset
    - Upgrade
    - Configure your circulation rules so there's a daily limit for holds
    - Place holds so the patron reaches the maximum
    - Place one more hold
    - Notice the hold cannot be placed and a convenient error message is
    displayed.
    - Sign off :-D
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fb0ab55fd09457a4d7559d2af9774de9456bb2f2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jul 19 18:14:19 2017 -0300

    Bug 15486: Extend CanItemBeReserved so it handles daily holds limits
    
    This patch implements the required changes in
    C4::Reserves::CanItemBeReserved so it implements a daily limit on holds.
    
    It returns the 'tooManyReservesToday' string if the policy doesn't allow
    placing the hold. It returns 'OK' (current behaviour) otherwise.
    
    To test:
    - Run:
      $ sudo koha-shell kohadev
     k$ cd kohaclone
     k$ prove t/db_dependent/Holds.t
    => FAIL: Tests fail because the error condition is not making
    CanItemBeReserved return the desired error code.
    - Apply this patch
    - Run:
     k$ prove t/db_dependent/Holds.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dad1324b1b25ac018dad84176537c298edffa75d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jul 19 16:30:24 2017 -0300

    Bug 15486: Unit tests
    
    This patch introduces unit tests for the new circulation rules option
    that allows setting a max holds per day limit.
    
    To test:
    - Apply the patch
    - Run:
      $ sudo koha-shell kohadev
     k$ cd kohaclone
     k$ prove t/db_dependent/Holds.t
    => FAIL: CanItemBeReserved doesn't check the amount of holds per day
       and the introduced error code is not returned. OK is returned
       instead.
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0d68871836554cf4eb7dd2c1f44aa136fb041157
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 7 15:13:00 2017 -0300

    Bug 15486: DB structure change
    
    This patch adds a new column __max_holds_per_day__ to the issuingrules table.
    It's going to be used to set a daily limit  for holds.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dd717e81e41da67e64132e51b2100efb65d71e1c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 3 14:37:09 2018 +0000

    Bug 20044: (follow-up) Add min-width to .input_marceditor
    
    This patch adds a min-width property to the first .input_marceditor rule
    in order to prevent <selects> styled by Select2 from collapsing at
    narrower browser widths.
    
    To reproduce the bug, apply all patches on Bug 20044 except this one.
    Open the MARC editor and narrow the browser width to below 768 pixels.
    Reload the page and view a tab which contains a <select> styled by
    Select2 (942c is often an example). The <select> will have narrowed to
    be almost invisible.
    
    Apply the patch and reproduce the steps above. The <select>s should be
    fully visible.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ff0619e4dce087711ebef40e2ea3c9566f37f120
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 1 16:18:04 2018 -0300

    Bug 20044: Fix input_marceditor selectors
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    I can't reproduce the problem this patch is intended to fix, but the
    changes are sensible either way.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8f0de95804f9a7159c5d1d8a7b109ed0bbcf0aaa
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Mar 13 09:02:51 2018 +0000

    Bug 20044: (follow-up) Improve responsive behavior of MARC editor
    
    This patch makes some changes to addbiblio.css in order to improve
    responsive changes to the MARC editor.
    
    Note: This patch does not make changes affecting narrow browser widths.
    The changes are focused on adapting to larger layouts affected by the
    switch to the Bootstrap grid.
    
    To test, apply the patch and clear your cache if necessary. Open an
    existing record for editing in the standard MARC editor. View the page
    at various browser widths and confirm that it looks correct.
    
    Note: Because of the way the floating toolbar is displayed it does not
    dynamically resize when you resize the browser. Reload the page after
    resizing the browser window to confirm that the toolbar adapts at
    different widths.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c300d83edbdc6c232f7d6c51237415e7b3f1a67b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 19 15:10:18 2018 +0000

    Bug 20044: Switch single-column templates to Bootstrap grid: Cataloging
    
    This patch updates several cataloging module templates to use the
    Bootstrap grid.
    
    - cataloguing/addbooks.tt - Cataloging - The main page and the
      cataloging search results page should look correct.
    
    - cataloguing/addbiblio.tt - Cataloging -> New record - The record edit
      page should look correct.
    
    - cataloguing/merge.tt - Cataloging -> Search -> Select two records to
      merge. The merge reference selection page should look correct, as well
      as the source/destination selection page.
    
    - cataloguing/moveitem.tt - Catalog -> Search -> View record -> Edit ->
      Attach item. The barcode submit form and confirmation screens should
      look correct.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 44b4e453095e96d46447ea9c1cf010ab5f567d4d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 10 13:32:29 2018 +0000

    Bug 21492: Show subscriptions count in the sidebar menu
    
    This patch modifies the include file for the sidebar menu of
    bibliographic views so that a count of subscriptions is shown on the
    subscriptions tab.
    
    To test you should have bibliographic record with one or more
    subscriptions. View that bibliographic record and confirm that the
    sidebar menu tab shows the count of subscriptions.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=21291
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9d0fc26c4335fc9be7a01e3069c458e9397fc94f
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Oct 21 02:34:25 2018 +0000

    Bug 21625: Fix wording and typo in SMSSendDriver system preference description
    
    SMSSendDriver was missing an S.
    Koha is sending not receiving messages, so I think switching
    that will be a little more clear.
    
    To test:
    Verify that the system preference description reads correctly.
    
    Signed-off-by: Andreas Roussos <arouss1980@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bcf7fb4a1ee8be03aaa704eec2653e292746df4e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 16 15:15:10 2018 -0300

    Bug 21584: Wrong offset type for Lost Item
    
    Bug 2696 introduced account_offset_type.inc but 'Lost Item Return' doesn't match what is added on the database. Moreover, bug 20978 added references to this wrong value too in Koha::Account
    
    This patch performs a trivial fix for this.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Patch matches what was outlined in test plan, also passes qa test tool
    
    Signed-off-by: Alex Buckley <alexbuckley@catalyst.net.nz>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ac0999433920b9fd00f446604ee51305e4ce12bd
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Oct 19 11:50:06 2018 +0000

    Bug 21614: Search bar on Stock rotation page displays both [-] and [+] simultaneously
    
    This patch modifies the stock rotation template so that it include the
    catalog search bar include instead of the patrons one.
    
    To test, apply the patch and enable the StockRotation system preference.
    
     - Go to Tools -> Stock rotation.
     - Confirm that the search boxes at top are 'Check out,' 'Check in,'
       'Renew,' and 'Search the catalog.' 'Search the catalog' should be
       selected.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 87c2b4644745b0333fc8211ce89899784dfa6a5e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 17 12:32:11 2018 -0300

    Bug 21486: Only fetch the items' barcodes
    
    and avoid unecessary processing
    
    Signed-off-by: Colin Campbell <colin.campbell@ptfs-europe.com>
    
    Tested and found correct AU data is returned, and passes QA test tool
    
    Signed-off-by: Alex Buckley <alexbuckley@catalyst.net.nz>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8746ca21a271daf78cb6f4b5062323885e538801
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 12 12:47:04 2018 -0300

    Bug 21486: Fix 'AU' for SIP
    
    Signed-off-by: Colin Campbell <colin.campbell@ptfs-europe.com>
    Signed-off-by: Alex Buckley <alexbuckley@catalyst.net.nz>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit df91e14135454825d1ffdf504d072973efbeeedc
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 18 11:39:37 2018 -0300

    Bug 21607: Make Koha::Account::Line->apply store credits as negative amounts
    
    This is a trivial patch, that makes offsets have 'amount' stored as
    negative values for applied credits.
    
    The behaviour is changed on the tests and adjusted in the code. To test:
    - Run
      $ kshell
     k$ prove t/db_dependent/Koha/Account/Lines.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 422034aae6e929f3d37f80ec19323cdca4d9ddcd
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Oct 19 17:22:37 2018 +0000

    Bug 20554: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 89a81c7469b07d06adcddf44378bb4bc242eb343
Author: Claire Gravely <claire.gravely@bsz-bw.de>
Date:   Fri Sep 14 21:06:40 2018 +0000

    Bug 20554: (QA follow up) Remove padding in mobile view
    
    This patch removes the padding for mobile screen sizes.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2497ef5f0a619e397ecbf6f267d7dd7b8021812a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Apr 20 17:08:21 2018 +0000

    Bug 20554: (follow-up) Add local font files and add method for loading them
    
    This patch adds local copies of the font files specified in the original
    patch. A new JavaScript file has been added, fontfaceobserver.min.js,
    which helps gracefully load font assets.
    
    https://github.com/bramstein/fontfaceobserver
    
    Information about the new assets has been added to the about page.
    
    When using web fonts, there can be a delay, while the browser loads the
    font files, between the time the page loads and the time the fonts
    render. Font Face Observer allows us to specify a default font for the
    initial page render, and then apply the web font after it has loaded.
    
    To test, apply the patch and regenerate the OPAC css. View any page in
    the OPAC and confirm that the custom font renders properly.
    
    View the About page in the staff client and confirm that the new license
    information looks correct.
    
    Patch applies and OPAC and license look good. Looking forward to this.
    Signed-off-by: Dilan Johnpullé <dilan@calyx.net.au>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 56104cb6c0873f993add85911b89a493fc73480a
Author: Claire Gravely <claire.gravely@bsz-bw.de>
Date:   Tue Apr 10 14:39:07 2018 +0000

    Bug 20554: New OPAC CSS
    
    A suggestion for updating the OPAC CSS
    
    This patch updates the css styling of the OPAC
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit afb484dd5d26ab7b5600300ed6e5497340ea19f2
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Dec 2 15:46:41 2015 +0000

    Bug 15282: Switch default CHECKIN notice to Template Toolkit
    
    Test Plan:
    1) Ensure dependancies are applied
    2) Apply this patch
    3) Update your CHECKIN notice to match the following:
    
    The following items have been checked in:
    ----
    [% biblio.title %]
    ----
    Thank you.
    
    3) Generate a CHECKIN notice for a patron
    4) Note there is no change to the generated notice
    
    Signed-off-by: Mirko Tietgen <mirko@abunchofthings.net>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9eff888cdff0e970be3ca1e719015bc71b984026
Author: Kyle M Hall <kyle@kylehall.info>
Date:   Wed Dec 2 15:21:11 2015 +0000

    Bug 15280: Switch default CHECKOUT notice to Template Toolkit
    
    Test Plan:
    1) Ensure dependancies are applied
    2) Apply this patch
    3) Update your CHECKOUT notice to match the following:
    
    The following items have been checked out:
    ----
    [% biblio.title %]
    ----
    Thank you for visiting [% branch.branchname %].
    
    3) Generate a CHECKOUT notice for a patron
    4) Note there is not change to the generated notice
    
    Signed-off-by: Mirko Tietgen <mirko@abunchofthings.net>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 311fe87b31b9a65974e6020df301408251659e79
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 9 18:05:04 2018 +0000

    Bug 21505: Box around 'Additional fields' does not contain the fields
    
    This patch modifies the subscription detail page markup to eliminate a
    confusing bordered <legend> tag. It is replaced with an <hr> to
    delineate the sections and an <h3> tag to serve as the heading.
    
    To test, apply the patch and regenerate the staff client CSS.
    
     - Configure one or more additional subscription fields.
     - View the detail page for a subscription and confirm that the
       "Additional fields" section is clearly labeled.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bba0044e8ed4cf541d38781950773c1416422b0c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 10 12:10:45 2018 +0000

    Bug 21531: Subscription "New fields" button should read "New field"
    
    This patch changes the label of the "New fields" button on the
    subscription add fields page to read "New field," making it consistent
    with similar buttons in the staff client.
    
    Also changed:
    
    - Add missing id to <select> to make label clickable.
    - Remove custom DataTables configuration in favor of defaults.
    
    To test, apply the patch and go to Serials -> Add subscription fields.
    
    - The button in the toolbar should read "New field."
    - The DataTables' functionality of the table of existing custom fields
      should be correct.
    - Click the "New field" button.
      - Cliking the "Authorised value category" label should put the focus
        on the dropdown.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e8ebdfe95f207eb23d2a50778a9a8d27d13638e4
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 9 16:41:55 2018 +0000

    Bug 21523: Update two-column templates with Bootstrap grid: Serials part 2
    
    This patch modifies several serials templates to use the
    Bootstrap grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags and "text/css" attributes from <style> tags in the
    modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Serials home page
       - Subscription search
         - Subscription details
           - Edit history (under the "Planning" tab. Manual history must be
             enabled for that subscription).
           - Subscribers
     - Serials -> Manage frequencies
     - Serials -> Manage numbering patterns
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9d07bef3cb5e4eec0c5e6c773b1d68822c182706
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 9 13:41:39 2018 +0000

    Bug 21519: Update two-column templates with Bootstrap grid: Serials part 1
    
    This patch modifies several serials templates to use the
    Bootstrap grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags and "text/css" attributes from <style> tags in the
    modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Serials -> Add subscription fields
       - Add or edit subscription fields
     - Serials -> Check expiration
     - Serials -> Claims
     - Serials -> Subscription
       -> Serial collection
          -> Edit serials
       -> Routing list
         - Save and preview routing list
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7c7300b2d93124f2158cc96c4b463f6fb08c3f04
Author: Barton Chittenden <barton@bywatersolutions.com>
Date:   Wed Oct 17 19:29:22 2018 +0000

    Bug 21590: change virtual shelf to list in send list email.
    
    To test
    
    1) Choose a public list from the 'lists' menu in the OPAC.
    2) Click 'Send list'
    3) Log in as necessary
    4) Fill in your own email address
    5) Click 'send'
    6) Check your email, the sent email will contain the text
       "sent you from our online catalog, the virtual shelf called".
    
    Apply patch, re-test. The email will now contain
       "sent you from our online catalog, the list called".
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b2070ef98b74908860556872cc08c0b2ce74b8b1
Author: Mark Tompsett <mtompset@hotmail.com>
Date:   Wed Oct 17 01:39:41 2018 +0000

    Bug 21005: Address QA tool failures on tabs
    
    Only whitespace changes.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6a451360b8fd0a56dd07be050cdecf538d890612
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Aug 10 18:08:13 2018 +1000

    Bug 21005: Missing row/column defaults cause unexpected results in report wizards
    
    Some report wizards are missing row/column defaults, which sometimes return blank
    pages (borrowers_stats.pl) or results always equalling 0, which a non-discerning
    user may interpret incorrectly.
    
    If the DEBUG environmental variable is enabled, missing row/column choices will
    actually cause fatal software errors as well, which is also undesirable for users.
    
    This patch adds default choices for row and column on
    report wizards that had no radio buttons selected, so that a user
    can't submit the form without choosing a row and column. This
    prevents errors.
    
    To test:
    1) Apply patch
    2) Visit /cgi-bin/koha/reports/issues_avg_stats.pl
    3) Visit /cgi-bin/koha/reports/borrowers_stats.pl
    4) Visit /cgi-bin/koha/reports/catalogue_stats.pl
    5) Visit /cgi-bin/koha/reports/issues_stats.pl
    6) Observe that default choices for row/column are there
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1f0064bbddb9d00529d5eac1c096e669732eb551
Author: Mark Tompsett <mtompset@hotmail.com>
Date:   Tue Apr 17 23:59:58 2018 +0000

    Bug 20592: Return early in ModItem if nothing to update
    
    Two lines of code and move them earlier.
    Add a check to make sure there are changes.
    
    Followed the test plan, both the _BEFORE_ and after do as described.
    
    Signed-off-by: Cori Lynn Arnold <carnold@dgiinc.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 619eca1c7aaebf4db6ed170a3cbd14065da79c9d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 24 15:53:02 2018 -0300

    Bug 20592: Add tests
    
    NOTE: It isn't really a test, but it does trigger
          the return line which was added to ModItem.
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 00a6432dec2aa7b7d15d4733b140de7a8dac1143
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Thu Oct 18 20:18:54 2018 -0400

    Bug 21277: (follow-up) fr-CA translation for notices in sample_notices.sql
    
    This follow-up patch adds fr-CA translation for the SR_SLIP notice.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bbd4f5821a9818074d07ade086e7881dc1bba195
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Mon Aug 27 10:46:12 2018 -0400

    Bug 21277: fr-CA translation for notices in sample_notices.sql
    
    This patch adds fr-CA translations for the following sample notices:
    
    - ACCOUNT_PAYMENT
    - ACCOUNT_WRITEOFF
    - ACQORDER
    - AR_CANCELED
    - AR_COMPLETED
    - AR_PENDING
    - AR_PROCESSING
    - AR_SLIP
    - CANCEL_HOLD_ON_LOST
    - CHECKOUT_NOTE
    - MEMBERSHIP_EXPIRY
    - PASSWORD_RESET
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8150058b387b39469b64853a07d512bcc0a3741d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Oct 19 16:50:40 2018 +0000

    Bug 21617: DBRev 18.06.00.042
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ad20a30a831c5f3482f2eed80cc36269ebbef05f
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Oct 19 10:51:05 2018 +0200

    Bug 21617: statistics.ccode is not long enough (see also DBRev 18.06.00.032)
    
    Warn from a test:
    DBD::mysql::st execute failed: Data too long for column 'ccode' at row 1 [for Statement "INSERT INTO statistics
            (datetime,
             branch,          type,        value,
             other,           itemnumber,  itemtype, location,
             borrowernumber,  proccode,    ccode)
             VALUES (now(),?,?,?,?,?,?,?,?,?,?)" with ParamValues: 0="z8LIyIV", 1='issue', 2=undef, 3='', 4='2584', 5='E_QkzaV5Ay', 6='oDnFRZyog2CS2_XoUB_MB2sBxyI3elbFPC_AekxLPrduGTXKnlNoLKEdQrXzpAw5zD1pGbZshV9ydZup', 7='2000005168', 8='', 9='j9ZDn74omZAoZrTOdC4a05SpWRSHPR2apfss7y5V6QJuQnBEk32XWXCfMp7'] at C4/Stats.pm line 138.
    
    The dbrev 18.06.00.032 did not change it from 10 to 80 as in other tables.
    
    We should either truncate to 10 chars in Stats.pm or increase to varchar(80). Since it is varchar and not char, we should not be afraid about size. I choose for the latter here.
    
    Test plan:
    Run db rev.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a2418f743ce1e14d32229b5dd8d05aeb13f9e664
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Oct 5 12:50:26 2018 +0000

    Bug 21497: Correctly format dates for ILL requests in OPAC
    
    This patch updates the opac ILL template to use the $KohaDates plugin
    for displaying dates. Also updated:
    
    - Added "title-string" sorting to allow for correct sorting of dates in
      the table of requests.
    - Corrected capitalization as per our capitalization rules.
    - Added self-closing / to inputs as per coding guidelines.
    
    To test, apply the patch and log in to the OPAC as a user who has
    multiple outstanding ILL requests.
    
     - In the table of ILL requests, the "Request placed" and "Last updated"
       dates should be formatted according to your system's dateformat
       preference.
     - Sorting of those columns should work correctly.
     - View a request and confirm that "Request placed" and "Last updated"
       dates in this view are also formatted correctly.
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ca9a1b76d8d729b1c09dbedbd90bd3f748351c4b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Oct 13 09:17:00 2018 -0300

    Bug 18959: Skip xt/author/Text_CSV_Various.t if Text::CSV::Unicode missing
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit eb3f78f82e8139739a17c11cc89f58865d7536b0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Oct 13 09:15:52 2018 -0300

    Bug 18959: Text::CSV::Unicode missing from dependencies
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5b9cb7086e74e9a6ea7a4eaac7c5053b6727bb3e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 18 16:36:45 2018 -0300

    Bug 21600: Use str param instead of dt for output_pref
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 13b8e95f218924cc1ec41e2570791980bd7bcf17
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 18 15:50:27 2018 -0300

    Bug 21600: /patrons should have timestamp/datetime values converted from rfc3339 into valid MySQL values
    
    Bug 21597 enabled the option so set strict SQL modes in koha-conf.xml to
    be able to improve Koha's comformance to current standards on DB
    engines.
    
    This causes lots of parts of Koha to fail because they rely on MySQL
    fallbacks that are no longer default behaviours.
    
    While we can workaround this by setting SQL modes on runtime, the
    decision has been that this needs fixing.
    
    This patch deals with the /patrons API failing to correctly convert
    datetimes into valid SQL timestamps.
    
    To test:
    - Run:
      $ kshell
     k$ prove t/db_dependent/api/v1/patrons.t
    => SUCCESS: Tests pass
    - Add <strict_sql_modes>1</strict_sql_modes> on your koha-conf.xml
      $ sudo vim /etc/koha/sites/kohadev/koha-conf.xml
    - Restart memcached and Plack:
      $ restart_all
    - Run:
     k$ prove t/db_dependent/api/v1/patrons.t
    => FAIL: Tests fail due to updated_on and/or lastseen fields wrong
    format (MySQL error)
    - Apply this patch
    - Run:
     k$ prove t/db_dependent/api/v1/patrons.t
    => SUCCESS: Tests pass! It all makes sense!
    - Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f0373fbdec152c9d766eb82d6af667d1da5cf042
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 12 11:27:27 2018 -0300

    Bug 21554: Add missing use statement in subscription-batchedit
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8d0e08fdf58b029b619d18a9600b8d6f1410a644
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Oct 15 14:01:14 2018 +0200

    Bug 21475: Fix crash on missing default itemtype
    
    Test plan:
    Enable ArticleRequests.
    Find book without itemtype (942c). Maybe you need this:
      update biblioitems set itemtype=NULL where biblionumber=[...]
    Goto opac detail for that book. No crash anymore?
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 17e5691daaa0f6b73623198eded648c78e40056a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 18 11:07:02 2018 -0300

    Bug 20521: Use a specific config for strict sql modes
    
    To avoid disrupting testers and new developers it will be turned off by default.
    
    We will turn it on for Jenkins so devs will have to take care of the
    regressions they introduce (!)
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b7da4f890b9d9a7b2a919ce8529198ab443115cd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 17 20:24:09 2018 -0300

    Bug 21597: Incorrect decimal value: 't_value_bib639' for column 'price'
    
    Fix t/db_dependent/selenium/basic_workflow.t
    
    We want to send specific values depending on the data type in DB
    For instance integer, or varchar(10)
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 573d9dafc10cb82e0f80f6fbbd8214ec88cfa3b6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 17 19:26:32 2018 -0300

    Bug 21597: Field 'description' doesn't have a default value
    
    Nick proposed another fix, see bug 21594.
    The interface does not explode so I do not think we should make a DB
    update in a rush.
    
    Fix t/db_dependent/Koha/Object.t and t/db_dependent/Koha/ApiKeys.t
    
    api_keys.description and api_keys.secret:
      `secret` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL,
      `description` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
    
        #   Failed test 'Exception is thrown correctly'
        #   at t/db_dependent/Koha/Object.t line 262.
        # expecting: Koha::Exceptions::Object::FKConstraint
        # found: DBIx::Class::Exception (DBIx::Class::Storage::DBI::_dbh_execute(): Field 'description' doesn't have a default value at /home/vagrant/kohaclone/Koha/Object.pm line 125
        # )
        # Looks like you planned 7 tests but ran 1.
        # Looks like you failed 1 test of 1 run.
    
    and later, but not related:
    Can't locate object method "message" via package
    "DBIx::Class::Exception" at t/db_dependent/Koha/Object.t line 264.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 489c636316209d4f4e7d8648cc5832347e792076
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 17 19:21:56 2018 -0300

    Bug 21597: Incorrect date value: '0' for column 'onloan'
    
    Fix t/db_dependent/Holds/DisallowHoldIfItemsAvailable.t
    
    items.onloan
      `onloan` date DEFAULT NULL,
    
    DBIx::Class::Storage::DBI::_dbh_execute(): Incorrect date value: '0' for
    column 'onloan' at row 1 at /home/vagrant/kohaclone/t/lib/TestBuilder.pm
    line 288
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f19a99209528e85003cd56104640effe75e4f126
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 17 19:18:58 2018 -0300

    Bug 21597: Data too long for column 'invitekey'
    
    Fix t/db_dependent/Virtualshelves.t
    
    virtualshelfshares.invitekey
      `invitekey` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
    
    We should not insert a longer string!
    
    DBIx::Class::Storage::DBI::_dbh_execute(): Data too long for column
    'invitekey' at row 1 at /home/vagrant/kohaclone/Koha/Object.pm line 125
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 82884b0bd81a79c9a0c700463f1fcc632314863c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 17 19:11:29 2018 -0300

    Bug 21597: Field 'amount' doesn't have a default value
    
    Fix t/db_dependent/Accounts.t
    
    Default value could be 0, or left as it.
    It seems that the different initialisation we have in the code pass a
    value for 'amount'
    
    account_offsets.amount
      `amount` decimal(26,6) NOT NULL,
    
    DBIx::Class::Storage::DBI::_dbh_execute(): Field 'amount' doesn't
    have a default value at /home/vagrant/kohaclone/Koha/Object.pm line 125
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a40b8ebde788ac4082670e30b03fcbade2cc5544
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 17 19:07:20 2018 -0300

    Bug 21597: Column 'notforloan' cannot be null
    
    Fix t/db_dependent/Circulation.t
    
    items.notforloan:
      `notforloan` tinyint(1) NOT NULL DEFAULT '0',
    
    t/db_dependent/Circulation.t .. 115/119 DBD::mysql::st execute failed: Column 'notforloan' cannot be null [for Statement "UPDATE `items` SET `notforloan` = ? WHERE ( `itemnumber` = ? )" with ParamValues: 0=undef, 1='1046'] at /usr/share/perl5/DBIx/Class/Storage/DBI.pm line 1832.
            # No tests run!
    
        #   Failed test 'No tests run for subtest "item-level_itypes = 0"'
        #   at t/db_dependent/Circulation.t line 2356.
        # Looks like you failed 1 test of 2.
    
     #   Failed test 'CanBookBeIssued | notforloan'
     #   at t/db_dependent/Circulation.t line 2359.
    Can't locate object method "rethrow" via package "DBD::mysql::st execute failed: Column 'notforloan' cannot be null [for Statement "UPDATE `items` SET `notforloan` = ? WHERE ( `itemnumber` = ? )" with ParamValues: 0=undef, 1='1046'] at /usr/share/perl5/DBIx/Class/Storage/DBI.pm line 1832.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 33c142ba3b7cfd37dd90569de2a5802849b09ef5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 18 08:32:59 2018 -0300

    Bug 21599: Fix item type creation by defining default values
    
    Same as what we have in Koha::Patron->new, empty strings should not be
    inserted in integer or date column type
    
    DBD::mysql::st execute failed: Incorrect decimal value: '' for column 'defaultreplacecost' at row 1 [for Statement "INSERT INTO `itemtypes` ( `checkinmsg`, `checkinmsgtype`, `defaultreplacecost`, `description`, `hideinopac`, `imageurl`, `itemtype`, `notforloan`, `processfee`, `rentalcharge`, `searchcategory`, `sip_media_type`, `summary`) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )" with ParamValues: 0="", 1="message", 2="", 3="xx", 4=0, 5='', 6="XX", 7=0, 8="", 9="", 10="", 11=undef, 12=""] at /usr/share/perl5/DBIx/Class/Storage/DBI.pm line 1832.
    
    Test plan:
    Create a new itemtype
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 60e00a332e2a500746f12908042dd61250d1f79a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 17 19:31:14 2018 -0300

    Bug 21598: 'koha_kohadev.aqbudgets.budget_parent_id' isn't in GROUP BY
    
    DBD::mysql::db selectall_hashref failed:
    'koha_kohadev.aqbudgets.budget_parent_id' isn't in GROUP BY [for
    Statement "
    
        at /home/vagrant/kohaclone/C4/Budgets.pm line 558.
    and
        at /home/vagrant/kohaclone/C4/Budgets.pm line 565.
    
    Test plan:
    hit /cgi-bin/koha/admin/aqbudgets.pl
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7eb4d3f8a1537e1c9eea478f0802b30fae7690db
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 17 20:02:12 2018 -0300

    Bug 21596: Handle empty string for lost when storing a patron
    
    lost - should default to 0 at DB level, not null
    But let fix it as it for now
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5024cb3acffdfb9f67dce5587eb062ea3130bdbb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 17 20:01:47 2018 -0300

    Bug 21596: Handle empty string for other attributes when storing a patron
    
    lastseen, updated_on => dates
    gonenoaddress, login_attempts, privacy_guarantor_checkouts => [tiny]int
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f8e7a175575649ab1303c65ae259501dda90f3ff
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 17 19:53:47 2018 -0300

    Bug 21596: Handle empty string for flags when storing a patron
    
    Incorrect integer value: '' for column 'flags'
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9e253d7bced1d10d7e3975871db985debba5a497
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 17 19:51:50 2018 -0300

    Bug 21596: Handle empty string for date_renewed when storing a patron
    
    Incorrect date value: '' for column 'date_renewed'
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 87c7e534f15aff14d6e82cbb67ecbb8e8715c2b7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Oct 18 10:05:38 2018 +0000

    Bug 21593: Remove GROUP BY from GetAuthValueDropbox
    
    With new MYSQL modes we are permitted only full group by.
    
    In this case I don't think we need a GROUP BY at all
    
    To test:
    1 - Try to pay a fine or create a borrower
    2 - Internal server error
    3 - Apply patch
    4 - Page should load
    5 - Test various authorised values ot ensure they work
       e.g. Set bsort1 and bsort2 to have some authorised values with and
       without branch limits
       set PAYMENT_TYPE to have some values with and without branch limits
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit efd2b75b6741f95a79a88e0765bcb0802a7cf1fd
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Jun 26 11:36:33 2018 +0100

    Bug 20995: Add Request ID to table and request view
    
    This patch adds the display of Request ID to the OPAC views of all a
    user's requests and the individual request.
    
    To test:
    
    1) Ensure you have ILL enabled
    2) Log into the OPAC as a user with at least one request
    3) Go to the "your interlibrary loan requests" page
    4) TEST: Ensure that Request ID is displayed as the first column in the
    table
    5) Click the "View" button on a request
    6) TEST: Ensure that Request ID is displayed along with all the other
    request information
    
    Signed-off-by: mmg@interleaf.ie
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Bug 20995: (QA follow-up) Add html filters and fix doubled up columns from merge
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5151b27c5d4fc74ef678eab8b45be7388c310923
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 9 13:38:34 2018 -0300

    Bug 21174: (follow-up) Removed MSG_IN_YOUR_CART and its usage in OPAC JS
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5bd71cc789275572b0fc10be0a8f85ca46b19f8c
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Sun Sep 30 16:22:10 2018 +0000

    Bug 21174: Removed MSG_IN_YOUR_CART and its usage in OPAC JS
    
    The 'Items in your cart' message is obsolete with the cart dropdown
    box being removed.
    
    Therefore the assignment of this text into the
    MSG_IN_YOUR_CART variable (which is done in the opac-bottom.inc), and
    the use of the MSG_IN_YOUR_CART variable in the updateBasket() function
    (in the OPAC's basket.js) has been removed.
    
    Sponsored-By: Toi Ohomai Institute of Technology, New Zealand
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit da604a9006e86bf569f60ac3cd5b60d7e70447c2
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Sat Sep 29 05:24:22 2018 +0000

    Bug 21174: Open the OPAC cart with one click by default
    
    Feedback from the Koha mailing list in Aug 2018 showed there was
    widespread concensus for making the default behaviour of the OPAC cart
    to be to open with one click, rather than clicking on the cart icon then
    on the dropdown box to load the cart popup.
    
    This commit is a combination of Owen Leonard's alternative patch
    (slightly changing the markup in masthead.inc) and my
    work to remove the dropdown elements from the template and basket.js
    
    Test plan:
    1. In Koha OPAC click on the cart icon (making sure to have items in the
       cart and the dropdown box 'Items in your cart:..' appears.
    
    2. Click this dropdown and the cart popup appears.
    
    3. Confirm you can successfully remove items from and empty the
       cart
    
    4. Apply patch
    
    5. Restart memcached, and plack
    
    6. Click on the cart icon (making sure to have items in the cart) and
       notice no 'Items in your: ..' dropdown appears
       instead the cart popup loads straight away.
    
    7. Confirm the items in your cart are displayed by the cart popup
    
    8. Confirm you can remove items from/empty the cart, and that as you do
       this the number of cart items shown by the number to the right of the
       cart icon changes accordingly
    
    Sponsored-By: Toi Ohomai Institute of Technology, New Zealand
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 62285d2de463811380262e4cc65c82937145d477
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 8 14:25:57 2018 -0300

    Bug 20351: Shortcut serials scripts if a blocking error appeared
    
    The idea of output_and_exit_if_error (added by bug 18403) is to make sure
    parameters are valid before executing the script.
    If not (old or broken URLs), we shortcut everything coming next to display a
    generic error ("object does not exist", "you do not have permission to do that", etc.)
    
    This bug report fixes the scripts under serials/*.
    
    Test plan:
    Hit the script under the serials directory with an invalid subscriptionid parameter
    and confirm you get an error instead of the normal view with empty values.
    
    The goal is not to be exhaustive during the first iteration, but at least to fix
    the most common views.
    
    For instance:
    /cgi-bin/koha/serials/subscription-detail.pl?subscriptionid=XXX
    /cgi-bin/koha/serials/serials-collection.pl?subscriptionid=XXX
    /cgi-bin/koha/serials/routing.pl?subscriptionid=XXX&op=new
    /cgi-bin/koha/serials/subscription-add.pl?op=modify&subscriptionid=XXx
    /cgi-bin/koha/serials/subscription-add.pl?op=dup&subscriptionid=XXX
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit aafd0476342ca9691fd8a7c2c754c425ae1cf61f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Apr 4 16:28:53 2018 -0300

    Bug 20521: Enable problematic SQL modes for dev installs
    
    So far we have bug 17258 (omnibus to list the issue we have with the new
    default SQL modes), bug 20144 (which fixed our test suite with these
    modes) and bug 20229.
    This last one forces the SQL modes to avoid to modify the DBMS
    configuration and define the SQL modes we support.
    
    We should let developers catch the issues and report/fix them.
    Also Jenkins must alert us if there is a regression with the test suite.
    
    I suggest to enable the problematic SQL modes on dev installs.
    
    Test plan:
    - Revert commit 0180524bb9b1464c441bb1b858d0d8df37524d72
    - prove t/db_dependent/Koha/Biblios.t
    
    => If you have dev_install defined in your Koha config file, the test
    will fail with "Field 'datecreated' doesn't have a default value"
    => If you do not have dev_install, the tests will pass
    
    NOTE: The commit number was wrong. Using
        git log -- t/db_dependent/Koha/Biblios.t
        This showed bug 20176 which was 524eab678833b2719187e67128ee4f83a2a48ba4
        Also dev_install was in koha_conf.xml already, so I just had to
        toggle 0 and 1.
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2cffe3a574e14d5f35ce7b1d9ffe28a153dcb37e
Author: Andreas Roussos <arouss1980@gmail.com>
Date:   Sun Oct 7 21:00:09 2018 +0300

    Bug 21513: Add a 'Cancel' button to the authority editor and remove duplicate 'Save' button
    
    The authority editor (authorities/authorities.pl) does not have
    a 'Cancel' button. Also, it has two 'Save' buttons.
    
    This patch fixes that by:
    a) adding a 'Cancel' button to the floating toolbar at the top
    b) removing the 'Save' button from the bottom of the page
    
    Test plan:
    1) Go to Home > Authorities and launch the authority editor by
       clicking on 'New authority'. Notice how the editor doesn't
       have a 'Cancel' button. Also notice the two 'Save' buttons.
    2) Apply the patch.
    3) Re-launch the authority editor, and hit cancel; you should
       be taken back to Home > Authorities.
    4) Edit an existing authority, and hit cancel; you should be
       taken back to the details page for the authority you chose.
    5) Edit an authority as new (duplicate), and hit cancel; you
       should be taken back to Home > Authorities (this behaviour
       is mimicking the bibliographic editor: when duplicating a
       biblio the 'Cancel' button will take you back to Home >
       Cataloging).
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 81875ab282c1daa98dec2e0f5f20ba74f411ac32
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Aug 12 17:08:57 2018 +0200

    Bug 14786: Use MARC istead of ISO2709 everywhere
    
    This patch changes the term ISO2709 in the templates to use
    MARC instead.
    
    Test plan:
    - The term was changed on the following pages in staff:
      - Advanced catalouging editor > Save to catalog
      - Patron account > Check out (Activate ExportCircHistory) > Format
      - Patron account > Check out > Help page
      - Lists > Download list
      - Acquisitions > Add order to basket > From a staged file (breadcrumbs)
      - Administration > System preferences > ExportRemoveFields
      - Cart > Download
      - Tools > Export data > Output format
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 796e4e5d2be5ec87970f8b586f940e4abddb687d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Oct 8 15:25:50 2018 +0100

    Bug 21456: (QA follow-up) Catch missed case in authorities merge
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bf7c8303ca7f9e4955f25fc4d1f30d65d8c52dc9
Author: Andreas Roussos <arouss1980@gmail.com>
Date:   Sun Sep 30 13:06:28 2018 +0300

    Bug 21456: The 'New authority' button lists authority types inconsistently
    
    The 'New authority' button does not always list the available
    authority types in A-Z order based on their description.
    
    This patch fixes that.
    
    Test plan:
    1) Go to Home > Authorities in the staff client; notice how the
       'New authority' button lists auth types sorted by description.
    2) Go to an authority's detail page; notice how the same 'New
       authority' button will list auth types sorted by their code.
    3) Apply the patch.
    4) In an authority's detail page, the 'New authority' button will
       now list the available authority types sorted by description.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 074cb8d5b9a2f78fec56df9069253d22c9678084
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 3 12:58:36 2018 +0000

    Bug 21439: Update two-column templates with Bootstrap grid: Rotating collections
    
    This patch modifies rotating collections templates to use the
    Bootstrap grid instead of YUI.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Tools -> Rotating collections
       - View rotating collection
       - Transfer rotating collection
       - Edit rotating collection
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 706d21ee53dd5072eec2234415fc5c8ff4b1ea17
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Thu Oct 4 14:52:53 2018 -0400

    Bug 21490: Disambiguation of 'Order' part 2
    
    This patch changes the 'Order' term in neworderbiblio.tt,
    newordersubscription.tt, newordersuggestion.tt, and
    z3950_search.tt for 'Place order'.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5ca776d6e171de1b093163ab83ba589d5ae4d7cc
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Thu Oct 4 14:38:25 2018 -0400

    Bug 21490: Disambiguation of 'Order'
    
    This patch changes the 'Order' term in marc_modification_template.tt
    for 'Rank'.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 23265158fcab25f8f5188cea6f07af46812d41cc
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jun 16 09:28:01 2016 -0400

    Bug 16754: Use validation plugin in budgets, planning, and contracts
    
    This patch removes the custom javascript form validation from three
    templates: Budgets, budget planning, and contracts. Validation via the
    validation plugin is done instead.
    
    This patch also removes use of event attributes like onclick and
    onchange. Also changed: I added the "Required" text next to required
    fields as necessary.
    
    To test, apply the patch and go to Administration -> Budgets.
    
    - Test the budget creation process for adding, editing, and duplicating
      budgets. In all cases:
      - The start date and end date should be required
      - You should be warned if you enter an end date which falls before the
        start date.
      - The description should be required
      - The budget amount should be required to be a number
    
    To test the budget planning page:
    
    Note that much of the JS removed from this template was unused. It
    looked for inputs by the name 'est_total' which don't exist.
    
    - When viewing the table of funds for a budget, select a choice from the
      'planning' toolbar menu.
      - Verify that after entering a numeric value in any cell, the
        'remaning' value at the end of the row is correctly updated.
      - Verify that after entering non-numeric data an error is displayed.
      - Verify that clicking the 'auto-fill' button at the end of the row
        works to fill any empty or zero-value fields with the remaning funds
        available.
    
    To test the vendor contracts page:
    
    - Go to Acquisitions -> Vendor -> Contracts
    - Add or edit a contract
      - Confirm that name, start date, and end date are required.
      - Confirm that you are warned if you enter an end date which falls
        before the start date.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 55225ba10b824f7e881738a20c751200843d3ec9
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 16 17:09:29 2018 +0000

    Bug 21583: Don't use Asset.js for external script files
    
    To test:
    1 - Enable Novelist in staff client:
        NovelistSelectStaffEnabled: Add
        NovelistSelectStaffProfile: anything
        NovelistSelectPassword: anything
        ( these don't need to be valid, just not blank )
    2 - Pull up a record detail page in staff client
    3 - View page source - search for ns2init.js
    4 - You won't find it
    5 - Apply patch
    6 - Reload details
    7 - Search page source for ns2init.js
    8 - It loaded! Huzzah!
    
    Signed-off-by: George Williams <george@nekls.org>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7f0207d2ad162a86cf5e09e437565b66b91c5004
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 16 14:00:59 2018 +0000

    Bug 21579: Make showdiffmarc.pl work for authorities and biblios
    
    To test:
     1 - Have or make some authority records
     2 - Have or make an authority matching rule
     3 - Export your authrotities
     4 - Import them using the matching rule
     5 - On the 'Manage staged records' page view some diffs
     6 - The import record is correct, but the existing records pull form
     bibs
     7 - Apply patch
     8 - Repeat
     9 - Confirm you see the expected authority matches
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Marjorie Vila <marjorie.barry-vila@collecto.ca>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4e6d9defc180204461f80477be287ade7fcfc11b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 16 10:27:37 2018 -0300

    Bug 21155: Prevent SwitchOnSiteCheckouts.t to fail randomly
    
     #   Failed test 'The date_due should have been set depending on the circ
     rules when the on-site checkout has been switched'
     #   at t/db_dependent/Circulation/SwitchOnSiteCheckouts.t line 126.
     #          got: '2018-10-16T23:59:00'
     #     expected: '2018-10-21T23:59:00'
    
    TestBuilder set date to today, so issuingrules.harduedate will be set to
    today.
    issuingrules.hardduedatecompare will be set to an integer.
    If set to 0, $datedue will be reset to the hard due date
    
    The call stack is: AddIssue > CalcDateDue > GetHardDueDate
    
    In GetHardDueDate:
    3509         if ( $hardduedatecompare == 0 || $hardduedatecompare == $cmp ) {
    3510             $datedue = $hardduedate->clone;
    3511         }
    
    To fix this random failure we need to set issuingrules.harduedate to undef.
    
    Test plan:
    0. Do not apply this patch
    1. Modify the test to set hardduedatecompare to 0 (search 'my $issuingrule = ')
    2. Execute the test and confirm the failure
    3. Apply this patch
    4. Execute the test and confirm the it is no longer failing
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f902041e244cc35ecc99e3ca256ff24c843a8b04
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Oct 9 12:22:35 2018 +0000

    Bug 21552: Use raw filter for displaying RoutingListNote
    
    The RoutingListNote system preference works like other prefs
    allowing you to insert your own content on the routling list
    template using HTML. The default text even uses HTML, so it
    looks broken without this patch.
    
    To test:
    - Add a subscription
    - Add a new routing list to it
    - Add some patrons to it
    - Save
    - preview routing list
    - Verify that the note shows and is formatted correctly.
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 32dc4a7bfaeebcff2be739fdf5f15e0f8bad4faa
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 10 15:53:13 2018 +0000

    Bug 21542: Use modal and password field for overdrive password
    
    To test:
     1 - Enabled Overdrive and fill all preferences
     2 - Make sure OverDrivePasswordRequired is true
     3 - Go to opac account
     4 - Log in to overdrive
     5 - Note the input is shown
     6 - Apply patch
     7 - Repeat
     8 - Note popup is now a modal
     9 - Note password is now hidden
    10 - Confirm overdrive integration works as before
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dc6bea7860aba7933f7e979cbe7c53e9cb15ba05
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 15 14:53:35 2018 -0300

    Bug 21479: "Mock" SearchEngine to use Zebra
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 82ff8138b4bb5bb4fba16a979c75a4673a15e348
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 15 14:38:14 2018 -0300

    Bug 21337: Koha::Objects->delete must return the number of deleted rows
    
    To follow DBIC behaviour
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e7574481b19addd2747baf5917e772d28cd38bc5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 15 11:42:34 2018 -0300

    Bug 21479: Zebra index can return different result
    
    If the zebra index has been rebuilt by previous tests, the order/results
    will be different, and we will not have biblionumber 1, 3, 5
    
    Let make this more flexible
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ed7f9a45453fa88dd2a6d17f07566931b6149678
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Aug 13 13:55:31 2018 +0000

    Bug 18480: Get rid of unwanted / distracting link in patron search for fund owner
    
    This patch modifies templates where a pop-up window is used to display
    patron search results. A link has been added to the patron name which
    triggers a modal window displaying more details about that patron. With
    each page in the test plan, check that clicking linked names in search
    results triggers a modal with the correct data.
    
     - Acquisitions -> Vendor -> View basket -> Add user
     - Acquisitions -> Vendor -> Add to basket -> From a new (empty) record
       -> Add user
     - Acquisitions -> Funds -> Edit fund -> Select owner
     - Tools -> Patron card creator -> Manage -> Card batches -> Edit -> Add
       patrons
     - Serials -> Subscription -> Edit routing list -> Add recipients
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5e2862c6b8eb102f623ccc4d667b4e38895703e4
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Oct 15 14:14:37 2018 +0000

    Bug 21337: (RM follow-up) Adjust number of tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 936198ba6aebaace6d0bfab4f0d4667274872555
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Oct 1 09:52:21 2018 +0200

    Bug 21337: (QA follow-up) Rollback for partial delete
    
    Puts delete loop in a txn_do.
    Raises Koha::Exceptions::Patron::Delete when Patron->delete does not return
    true (like 0 or -1).
    Unit test adjusted accordingly.
    
    Note: A follow-up report for raising exceptions in Object->delete could well
    be considered. Not here please.
    
    Test plan:
    Run t/db_dependent/Koha/Patrons.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 720d6360a0038a943b4554c4180cc0ebb61c2b4d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Sep 13 12:26:57 2018 +0200

    Bug 21337: (follow-up) Add parameter for move_to_deleted action
    
    For consistency, it would be better to make the move optional.
    
    Test plan:
    Run again t/db_dependent/Koha/Patrons.t.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e652f47cedfdf069b054b4f623ec5674640555ec
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Sep 12 15:49:45 2018 +0200

    Bug 21337: Add Koha::Patrons->delete (trivial wrapper)
    
    Adds Koha::Patrons->delete as wrapper around Koha::Patron->delete. We do
    not want to bypass Koha::Patron and let DBIx do the job without further
    housekeeping. A call to move_to_deleted is included now, but could be
    made optional with a parameter if needed.
    
    Test plan:
    Run t/db_dependent/Koha/Patrons.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cea8a72708e68b82eeeaaec2d985ec0a69dd4a11
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Sep 25 18:40:28 2018 +0000

    Bug 21409: Add column configuration to course reserves
    
    This patch adds columns configuration and print/export options to two
    tables: The table listing courses and the table listing titles reserved
    for a course.
    
    To test you should have more than one course and multiple title reserved
    for at least one course.
    
    - Apply the patch and go to Course reserves
      - In the table of courses, confirm that all DataTables controls work
        correctly: paging, filter, column visibility, export, etc.
      - View a course with multiple titles reserved. Test all DataTables
        controls on this table too.
    - Go to Administration -> Columns settings
      - Change the settings for the courses and reserves table and confirm
        that these changes are applied correctly.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a32c92c6013b199cc26efd15d0442e3f3a2eed6b
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Aug 11 18:47:23 2018 +0000

    Bug 15139: Add non-public item notes to overdue report
    
    Sometimes libraries want to see internal notes on the overdue
    reports page, this patch adds the notes.
    
    Additional fixes:
    - Library column was always empty, now library displays
    - Replacement price was not formatted according to CurrencyFormat
    
    To test:
    - Make sure you have some overdue issues in your system
    - Circulation > Overdues report
    - Make sure everything displays as it should
      - Verify internal item note shows
      - Verify price is correctly formatted (syspref CurrencyFormat)
      - Library shows
    - Download list of overdues
      - Verify the new column displays
    
    Signed-off-by: Spencer <ssmith3@mckinneytexas.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Amended patch: remove the branchcode line, added on its own bug report,
    see bug 21463
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d9b922f46f8d551949f337f29edef6985130c8ba
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 11 15:59:13 2018 +0000

    Bug 21550: DataTables four button pagination uses the wrong icon for disabled buttons
    
    This patch modifies the DataTables CSS which styles "full_nubmers"
    controls which are disabled: First and Previous buttons on the first
    page of results, Next and Last buttons on the last page of results.
    These buttons should have gray icons instead of blue.
    
    To test, apply the patch and clear your browser cache if necessary. View
    a page which uses a "full_numbers" DataTables configuration, e.g.
    
    - Administration -> Cities
    - ILL requests -> List requests
    - Circulation -> Holds to pull
    
    Confirm that buttons in their disabled state have a gray icon and text
    instead of blue.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bfbbe52ff7ff0ec93825684e4728db705b4100d1
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Jul 25 14:37:59 2018 +0200

    Bug 21115: Add multi_param call and add divider in cache key in svc/report and opac counterpart
    
    Resolve things like:
    CGI::param called in list context from package CGI::Compile::ROOT::usr_share_koha_prodclone_opac_svc_report line 42, this can lead to vulnerabilities. See the warning in "Fetching the value or values of a single named parameter" at /usr/share/perl5/CGI.pm line 436.
    
    The cache key in both script looks like:
        opac:report:id:602018
    but should for consistency be:
        opac:report:id:60:2018
    Note: The 2018 here is part of the sql_params and should not be
    concatenated to the report id.
    
    Test plan:
    Do not yet apply this patch.
    Make a report public, set cache to 300 secs.
    Check its output with opac/svc/report.
    Check for the warn in your log.
    Apply the patch, restart Plack and flush cache.
    Check opac/svc/report.
    Modify your report; e.g. add a simple string to the SELECT.
    Check opac/svc/report. You should still see cached output.
    Flush the cache.
    Check opac/svc/report. You should now see the added text.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Tested also by clearing individual keys with $cache->clear_from_cache.
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c6c4d82325eb7d11b34a113c69acbff18e283542
Author: Philippe Blouin <philippe.blouin@inlibro.com>
Date:   Thu Oct 4 13:00:08 2018 -0400

    Bug 21291: (follow-up) Pass subscriptionsnumber to all tools in staff detail's sidebar
    
    The subscriptionsnumber is required in biblio-view-menu.inc to display
    the Subscription(s) tab. In detail.pl, if you click any of
    
    Labeled MARC  (you need to set the syspref viewLabeledMARC)
    Hold(s)
    Article requests
    Checkout history
    Modification log
    Rota          (you need to set the syspref StockRotation)
    
    you lose the Subscription(s) tab.
    
    This patch fixes the display by having each feature script generate that
    value to be passed to the UI. I keep this separated from the first patch
    since it's not exactly the same issue, and the solution might not
    please.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ab13b53854e0aa726c8112d8f31cc553484637bd
Author: Philippe Blouin <philippe.blouin@inlibro.com>
Date:   Thu Aug 30 10:33:44 2018 -0400

    Bug 21291: request-article.pl doesn't show MARC, LabeledMARC and ISBD in sidebar
    
    When on a detailed record in the intranet, any click on the sidebar
    will lead you to another page with the same sidebar EXCEPT for "Article
    requests".
    
    When clicking on article requests, you get a new sidebar without
    MARC
    Labeled MARC
    ISBD
    
    This fix adds the required C4::Biblio::enabled_staff_search_views that
    loads the required hash with the permissions.
    
    TEST
    0) login with a user having all rights
    1) go to any detailed notices, notice the sidebar on the left
    2) click on MARC
    3) notice the sidebar is the same in the new page
    4) click on Request articles
    5) notice the missing labels on the sidebar
    6) apply patch, redo steps
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8d9284668c6de2d5fbfc4079a8b0516ba1645876
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Feb 2 14:34:34 2018 +0100

    Bug 20131: Inventory optional filters correct "For loan" addition
    
    In inventory, optional filters are build from authorize values categories used for items.notforloan, items.itemlost, items.withdrawn and items.damaged.
    
    The bug is that description of value 0 is always "For loan".
    This seems to be only for "notforloan".
    
    Second bug is that if a description exists for "notforloan" value 0, it is not used.
    
    This patch corrects by adding "For loan" only for "notforloan" authorized values and if there is no 0 value.
    It changes the description added by code from "ignore" to a more unlikly user defined "__IGNORE__".
    
    Test plan:
    1) Make sure you have authorized values defined on items.notforloan, say "NFL" category, with at least a value and description but no 0 value
    2) Make sure you have authorized values defined on items.itemlost, say "LOST" category, with 0 = "Not lost" and 1 = "Lost"
    3) Go to inventory /cgi-bin/koha/tools/inventory.pl
    4) Without patch you see "For loan" on both items.notforloan and items.itemlost
    5) With patch you see "For loan" only in items.notforloan, you see for items.itemlost : "Not lost" and "Lost"
    6) Create in authorized values category "NFL" a value 0 with description "Available"
    7) Go to inventory /cgi-bin/koha/tools/inventory.pl
    8) Without patch you see "For loan" in items.notforloan for value 0
    9) With patch you see "Available" in items.notforloan for value 0
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9965aa43e15aaa63fd8999daa98618d20698e89b
Author: Baptiste Wojtkowski <baptiste.wojtkowski@biblibre.com>
Date:   Tue May 23 08:54:00 2017 +0000

    Bug 18655: Correct the choose link in unimarc_field_210c value builder
    
    - Link 'choose' is now a button.
    - It doesn't call directly javascript anymore (use of listener).
    - field to load stored in html on the page (less escaping needed).
    
    Test plan :
    1) Use UNIMARC catalog
    2) Define unimarc_field_210c value builder on 210$c
    3) Define an autority type EDITORS with heading on 200$b
    4) Create an autority of this type with a single quote in heading, ie : l'avenir
    5) Index this new autority
    6) Edit a biblio record and launch 210$c value builder
    7) Search for new autority
    8) Click on 'Choose'
    => Heading should be pasted in 210$c
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c6198717c4be56ba99deb57aa6d117d23a032eea
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Oct 8 11:47:15 2018 +0100

    Bug 21113: Corrections to patron merge confirmation prompt
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fd0df2ad55f9a5ff180dc0dfa22fede5f0ad37cd
Author: Margaret Hade <margaret@bywatersolutions.com>
Date:   Fri Sep 21 12:41:52 2018 -0700

    Bug 21351: Rename the Taiwanese language pack to use correct file name
    
    The words "Han (Simplified variant)" is appearing in the language name because the file is titled "zh-Hans-TW" when it should be titled "zh-Hant-TW". The database is set up to use "Hant" but it just incorrectly named.
    
    Test plan
    1. Apply patch.
    2. Install zh-Hant-TW on your Koha server.
    3. Navagate to I18N/L10N preferences and confirm that the english text description states (Traditional variant).
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Files on translate.kc.org have already been fixed by Bernardo.
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 959162b2f3c9689bb56433ee08c300b40822d700
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 10 15:02:14 2018 +0000

    Bug 21537: Fix typo for options_for_item_types
    
    To test:
     0 - Set UseACQFrameworkForBiblioRecords to 'Use'
     1 - Define a subfield in the ACQ framework linked to authorised value
     'itemtypes'
     2 - Make sure that field is visible
     3 - Create a purchase suggestion
     4 - Accept it
     5 - Go to Acquisitions
     6 - Find a vendor with an open basket, or create one
     7 - Add to the basket using a suggestion
     8 - Choose the suggestion
     9 - Internal server error
    10 - Apply patch
    11 - Place order form a suggestion again
    12 - Confirm that the field linked to itemtypes shows correctly
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1a8e1165ca7abf9e2b7e5c7de0cdf26cbd4e30ac
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Mon Sep 17 01:13:55 2018 +0300

    Bug 21365: Call BiblioAutoLink from AddBiblio and ModBiblio
    
    This makes e.g. the advanced MARC editor, and anything that uses AddBiblio or
    ModBiblio honor BiblioAddsAuthorities.
    
    To test:
    1. Make sure BiblioAddsAuthorities and AutoCreateAuthorities preferences are enabled.
    2. Add a new record using advanced editor (enable EnableAdvancedCatalogingEditor to
    use it), include a previously non-existing author.
    3. Save the record and observe the author get an authority number.
    4. Add another author, save the record and make sure it also gets an authority number.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1fddd295b8e83b60f2b838f09f3175c5acfeec28
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Oct 10 13:43:40 2018 +0200

    Bug 21279: Fix &nbsp; in transport cost matrix
    
    Test plan:
    On Home › Administration › Transport cost matrix you should no longer
    see "&nbsp;".
    Fill some values and save, you should see the correct values.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dab70daa55a90f7b50f8c2dc9fefdef0762e5daf
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Oct 15 13:07:11 2018 +0000

    Bug 19687: (RM follow-up) Export correct function name
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3f09e1d73338c86762412546e1a0617df698f422
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Wed Sep 26 17:25:44 2018 +0200

    Bug 19687: Undefined subroutine in bulkmarcimport
    
    Bulkmarcimport produces undefined subroutine error for
    C4::Items::TransformMarcToKoha and C4::Items::GetMarcStructure
    probably caused by mutually recursive modules. Put exports in
    BEGIN clause before all the other imports.
    
    To test:
    1) Run bulkmarcimport.pl before applying patch and verify
    that undefined subroutine error occurs
    2) Apply patch
    3) Run bulkmarcimport.pl again and verify that no errors are
    produced
    
    Sponsored-by: Gothenburg University Library
    
    Signed-off-by: George Veranis <gveranis@gmail.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b23fe0b0b8d468fe80d40aef1a12296421cc1d37
Author: Dobrica Pavlinušić <dpavlin@rot13.org>
Date:   Thu Sep 6 13:21:53 2018 +0200

    Bug 21320: Holds to pull should honor syspref AllowHoldsOnDamagedItems
    
    Test plan:
    
    1. Set syspref AllowHoldsOnDamagedItems to Allow
    2. Create a hold on record with item which is damaged
    3. Verify that it doesn't appear in report
    4. Apply patch and verify that it's now visible
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9c6025ccbfd0c57d45fec444ee57e72c3aad512b
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Wed Feb 21 13:10:50 2018 +0000

    Bug 10382: Course reserves: handle empty values
    
    Test Plan:
    1) Create an item, do not set a collection code
    2) Add the item to a course, and choose to set a collection code
    3) Ensure the course is enabled, and the collection code is now visible
    4) Disable the course, ensure the collection code is no longer visible
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3e6f9b8a1d5b293cfe5a00732e2b6f1371046855
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Thu Mar 9 13:42:04 2017 +0000

    Bug 10382: Add unit tests for course items
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b1bb9f9e6b028dce0109755180100e4033424227
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Jun 5 10:01:17 2013 -0400

    Bug 10382: collection not returning to null when removed from course reserves
    
    Test Plan:
    1) Create an item, do not set a collection code
    2) Add the item to a course, and choose to set a collection code
    3) Ensure the course is enabled, and the collection code is now visible
    4) Disable the course, ensure the collection code is no longer visible
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3950dd4f6c42a865a584bad3fea2d81e0282dcc1
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Oct 5 12:18:11 2018 +0000

    Bug 20797: (QA follow-up) Fix ill requests table
    
    ... by adding a missing comma.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7da41e430d2322b99d61ab0c26a720eeea1a4985
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu Jun 7 11:14:50 2018 +0100

    Bug 20797: (follow-up) Conditionally link
    
    We don't want to display the link to the biblio if the biblio_id is null
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dd91fa17124b4432321ac4f64099a225623521bb
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Wed May 23 12:26:25 2018 +0100

    Bug 20797: Add link to biblio detail view from ILL detail view
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8bacf1935d5100c3616109d11fd03c8025a998a2
Author: Mirko Tietgen <mirko@abunchofthings.net>
Date:   Thu Oct 11 16:21:41 2018 +0200

    Bug 17084: Automatic debian/control updates (unstable/master)
    
    I added libwebservice-ils-perl 0.17 to the repository, so it
    goes into debian/control too.
    
    Signed-off-by: Mirko Tietgen <mirko@abunchofthings.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 511ffe470066a34b8d24ee9f1c6b8238306c2bf0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Oct 13 08:05:34 2018 -0300

    Bug 20772: (QA follow-up) 'readonly' is a boolean
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3516e9a9f85e394e1ed683064823acf473ea2088
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Oct 13 07:47:12 2018 -0300

    Bug 20772: DBRev 18.06.00.041
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 64740898aa346feda1363c9c4b5cb52be0bba7f1
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Mon Oct 8 17:48:39 2018 +0100

    Bug 20772: (follow-up) Add unit test
    
    Add unit test for price_paid
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b097c695221da429b377f780f5a4619ab528ed88
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Oct 5 13:38:26 2018 +0200

    Bug 20772: (QA follow-up) Add a missing html filter
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 925f4ca1da780255163231a9d90cfe2e5424b943
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Oct 5 11:56:31 2018 +0100

    Bug 20772: (follow-up) Fix DB updates and templates
    
    Carry out changes requested in commenbt #27
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e24099cbbce1c41d5d696f6b215ca6286f0fce68
Author: Barry Cannon <bc@interleaf.ie>
Date:   Tue Jul 24 15:56:30 2018 +0100

    Bug 20772: Bug preventing backend JS execution
    
    We should be 'PROCESS'ing any backend JS, not 'INCLUDE'ing it
    
    Signed-off-by: Barry Cannon <bc@interleaf.ie>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a1b4941ab85431c75d916c1cd4d9c6200e25e6f4
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Mon May 21 10:40:59 2018 +0100

    Bug 20772: Display and edit of price_paid
    
    Signed-off-by: Barry Cannon <bc@interleaf.ie>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 00178268cabfc18647a1af3704a451ac7000731d
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu May 17 11:36:50 2018 +0100

    Bug 20772: Return cost & price_paid in API
    
    Signed-off-by: Barry Cannon <bc@interleaf.ie>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 300b12a37d7f392b0307952f9e355baadab47d7d
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu May 17 11:29:49 2018 +0100

    Bug 20772: Fix malformed class name
    
    Supplier metadata elements have a dynamically formed class name, part of
    the name is formed from the metadata key, this breaks if the key has a
    space, so we replace spaces
    
    Signed-off-by: Barry Cannon <bc@interleaf.ie>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 731f83a85e0687c4a11fe38b629990bc4639ae3f
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu May 17 10:58:02 2018 +0100

    Bug 20772: Borrowernumber should be read only
    
    On the Manage Request page, borrowernumber should be read only, we do
    not want users modifying the destination user once a request is placed
    
    Signed-off-by: Barry Cannon <bc@interleaf.ie>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ecc5acf653e160fdda14c1a53877f4015d6aaa6e
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu May 17 10:47:52 2018 +0100

    Bug 20772: Add 'illrequest.price_paid'
    
    This patch adds a 'price_paid' column to 'illrequests'
    
    Signed-off-by: Barry Cannon <bc@interleaf.ie>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit feefbb504f93393855c63be855ec47974744a0a6
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu May 17 09:22:03 2018 +0100

    Bug 20772: Add 'illrequestattributes.readonly'
    
    This patch adds a 'readonly' column to illrequestattributes. On a DB
    upgrade it also populates all existing rows with 1, indicating 'read
    only'
    
    Signed-off-by: Barry Cannon <bc@interleaf.ie>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ec49e7d83bcbfa16dca9f05c36e600ba5c02a2ee
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Oct 5 17:18:57 2018 +0200

    Bug 21178: (QA follow-up) Add a test to verify that the hash is correct
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c7299bc773cdd51950348a32eabeb42930c3c2f5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 14 16:15:13 2018 -0700

    Bug 21178: (QA follow-up) whitespace characters fix
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4a7c6fa10ce19414f2157ca6a1fe4d06a2a14c4c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Aug 16 07:13:56 2018 -0300

    Bug 21178: Add Koha::Patron::set_password
    
    This patch introduces the 'set_password' method for Koha::Patron
    objects. The main point is to make password changing atomic
    (update_password touches the userid on the DB, which should be done
    carefully with better error handling, and it is done there only for
    legacy backwards compatibility).
    
    A follow-up bug will make the codebase use this instead of
    update_password, and use a proper method for changing the userid if
    required.
    
    To test:
    - Apply this patchset
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Patrons.t
    => SUCCESS: Tests pass!
    - Sign off! :-D
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c28d62ce91f3cfdf4384529d11bd896faa6ddbcd
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Aug 16 07:13:36 2018 -0300

    Bug 21178: Unit tests
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0e81b387ca987ee439ca1387df535b2eace6cbcb
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 10 16:30:15 2018 +0000

    Bug 21541: Use raw filter for report results
    
    To test:
     1 - Create new report
     SELECT CONCAT('<a href="/cgi-bin/koha/members/moremember.pl?borrowernumber=',borrowernumber,'">',"",firstname,"",surname,'</a>')
     AS people
     FROM borrowers
     2 - Run this report
     3 - Note the results contain raw text, they are not hyperlinks
     4 - Apply patch
     5 - Reload the results
     6 - They should now be links
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 07fa37abbe325e136cd84f2dd5e1971d64c20d65
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 9 14:01:07 2018 -0300

    Bug 21464: Hide patron's title not biblio's title
    
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8a8c0ae51e2b1128942f6dff5ca022433355314e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 1 17:18:18 2018 -0300

    Bug 21464: Fix overdue list export
    
      commit e09ed656af5f75a82ccfa29318081e217618c32d
      Bug 18403: Only display libraries from group in dropdown lists
    and
      commit 0ab22e1c7c6b6e8d14a4fb7478ab2a3d42da347d
      Bug 18789: Send Koha::Patron object to the templates
    
    broke the overdue list export.
    
    Test plan:
    Create some overdues
    Export them: "Home › Circulation › Overdues" then click the link on top
    of the table.
    All the different columns of the generated CSV file must be filled
    correctly
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 56ab53702013f36c7f174e1a219b7b450098412a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 10 16:44:10 2018 +0000

    Bug 20260: Use CodeMirror for the SQL reports editor
    
    This patch adds CodeMirror syntax highlighting to the SQL reports
    editor. Newly added is a file containing the sql-specific syntax
    highlighting code, in both compressed and uncompressed versions.
    
    Unrelated changes:
    
     - Some JavaScript has been moved from inside the body of the page to
       the footer.
     - Paths to some assets have been corrected to no use relative paths.
    
    To test, apply the patch and go to Reports -> Saved SQL reports
    
    - Edit an existing report and confirm that the SQL is correctly
      highlighted and that there are no display problems when editing.
    - Confirm that changes are saved successfully.
    - Perform the same test when creating a new SQL report.
    - View an existing report and confirm that the SQL is syntax-highlighted
      but is read-only.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit be4f22f5a0745ef64c6bf20b89bd9f4fcbe40403
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 12 15:37:44 2018 -0300

    Bug 21479: Remove the trace if the node does not exist
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 45fbd36e1f2e1aa622eec1ba588424cc50243fb3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 9 13:30:54 2018 -0300

    Bug 21479: Add regression tests
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2cd49034c43a16c7497f05e94c18396532fceddc
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 3 14:13:49 2018 +0000

    Bug 21479: Fix remove from cart links at the OPAC (should remove only 1)
    
    This patch changes the way biblionumbers are passed to the cart script
    for adding and removing single items. The title's biblionumber is now
    stored in a data-attribute on the links for adding and removing. This
    should be a more robust, unified way to handle these single-item
    operations.
    
    To test, apply the patch and enable the opacbookbag system preference.
    
    Test adding and removing items from the cart from various pages using
    various methods:
    
     - By clicking an "Add to your cart" / "Remove" link in search results
     - By clicking an "Add to your cart" / "Remove" link on a detail page
     - By checking boxes in search results and adding via the dropdown
    
    Each operation should work correctly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3c210589f8e72bcd2241e348226e8d608061e1f3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 12 11:18:17 2018 -0300

    Bug 21553: Remove JS error on the Rota view
    
    JS error was:
     ReferenceError: _ is not defined
    
    The strings after staff-global.js (for the function _)
    
    Test plan:
    Turn on StockRotation system preference
    
    1) Go to a staff detail page
    2) Switch to rota page
    3) Check web developer tools
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ef769ea33276313a47d5b343edc748f538927671
Author: Mirko Tietgen <mirko@abunchofthings.net>
Date:   Wed Oct 10 16:17:17 2018 +0200

    Bug 21536: t/Koha_ExternalContent_RecordedBooks.t skips more tests than scheduled
    
    t/Koha_ExternalContent_RecordedBooks.t skips more tests than scheduled
    if WebService::ILS is not available.
    
    Test plan:
    - have a system without Webservice::ILS available
    - in koha-shell, do
      prove t/Koha_ExternalContent_RecordedBooks.t
    - tests should be skipped and tests count as "passed"
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f11cb49a3682221b5e72de03a8627e14d879d1c0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 9 14:11:28 2018 -0300

    Bug 11897: Add mising semi-colon to user*.sql
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 216a8f1d0301093d7bd90c1a13d10ebd03d23d6b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 9 14:08:33 2018 -0300

    Bug 11897: (follow-up) Add Stock Rotation atomic update schema
    
    Remove the duplicate entry for RoutingListAddReserves
    I guess it has been caused by a bad merge resolution conflict
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 01646f974355f48a97ca61936cf3a787f6077af2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 9 16:12:59 2018 +0000

    Bug 7143: (follow-up) remove trailing apostrophe
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 06e4af6ba8baf412e6adca5ef386255e31f2ead3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Sep 4 14:34:14 2018 +0100

    Bug 11897: Add Boolean handling to dbic classes.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d87bffa0911e21def994018977e667e028e0c4aa
Author: Alex Sassmannshausen <alex.sassmannshausen@ptfs-europe.com>
Date:   Fri Dec 9 09:47:02 2016 +0100

    Bug 11897: DBIX::Class::Ordered in Stockrotationstage.
    
    * Koha/Schema/Result/Stockrotationstage.pm: Load `Ordered`, add
      grouping_column.
    
    Signed-off-by: Kathleen Milne <kathleen.milne@cne-siar.gov.uk>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2f2e40ca4674449c598799b1a47d156e50b91fa0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 9 15:51:34 2018 +0000

    Bug 11897: DBRev 18.06.00.040
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 97acf28fef5f95f0e32c4319f7d9781c5522b79b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 9 15:03:23 2018 +0100

    Bug 11897: (QA follow-up) Convert atomic update to perl
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7ce34d94caf3a0e64eafe0aedbedd5baaa255124
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 5 11:34:42 2018 -0300

    Bug 11897: Translatability and wrong escaping fix
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f72002d9979771fd9913e5f3c0f89ecb2a4311f4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 5 15:15:25 2018 +0100

    Bug 11897: (QA follow-up) Move menu to 'Catalog'
    
    Originally this menu item was placed under the 'Patrons' section of the
    tools page, this patch moves it to the more appropriate 'Catalog'
    section.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fac27bc029245aaf08b377ab86c9d23227135014
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 5 15:05:22 2018 +0100

    Bug 11897: (QA follow-up) Update of tools-menu.js
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 513aa79a5bf1f3db49288ebaafe372fc8ff7b7ab
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 5 14:43:41 2018 +0100

    Bug 11897: (QA follow-up) Fixes for JS12
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b2ff7223b795f138d74606becc8ccb6b7c1e305d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 5 09:44:15 2018 -0300

    Bug 11897: 'superlibrarian' has 'stockrotation' perms
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 732ff4b1c6c46dfcd9c71943f62f33a1e6484608
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 4 16:44:50 2018 -0300

    Bug 11897: (QA follow-up) Template filter fixes
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2bcaa4004c2a1e06dc02a342d2950ad7df75ada3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 4 16:44:06 2018 -0300

    Bug 11897: Add sample notices for all languages
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a9248f237d9de916e504d59e6490c7f84e9eb763
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 4 14:24:16 2018 -0300

    Bug 11897: Use 'stockrotation' permission for the endpoint
    
    This patch makes the tests for 'authorized' session use the
    'stockrotation' permission instead of 'superlibrarian'.
    
    The path x-koha-permission is fixed accordingly.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b8d425ac35eca05a5a3217b1678dfccc25aa3c26
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 4 14:08:05 2018 -0300

    Bug 11897: (QA follow-up) Fix tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a21025b7d9c7b2aa09ad6e4851f10c7c41d8d8bd
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 4 13:45:15 2018 -0300

    Bug 11897: (QA follow-up) Remove rebase leftover
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 85be5a81883b9b8d7d071ec39e63021d504a75de
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Oct 1 17:46:40 2018 +0100

    Bug 11897: Stockrotation
    
    The stock rotation feature adds a batch process to automate rotation of
    catalgue items with a staff client page under tools to manage rotas/schedules.
    
    Once a rota is configured, and your staff user has the right permissions
    to allocate items, then an additional tab will appear on biblio records
    allowing the management of of which rota, if any, individual items belong to.
    
    It also includes a cron script to process the items on a daily basis.
    
    Signed-off-by: Kathleen Milne <kathleen.milne@cne-siar.gov.uk>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Edit: I removed a temporary file
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5088e3084dad6c66cb3f3a2e6127e98974dc81b6
Author: Alex Sassmannshausen <alex.sassmannshausen@ptfs-europe.com>
Date:   Mon Oct 17 18:20:44 2016 +0200

    Bug 11897: Add Stock Rotation atomic update schema.
    
    * installer/data/mysql/atomicupdate/stockrot_tables.sql: New file.
    * installer/data/mysql/kohastructure.sql (stockrotationrotas)
      (stockrotationstages, stockrotationitems): New tables.
    * installer/data/mysql/sysprefs.sql: Add Stockrotation sysprefs.
    * installer/data/mysql/userflags.sql: Add Stockrotaiton userflag.
    * installer/data/mysql/userpermissions.sql: Add Stockrotation
      userpermissions.
    * koha-tmpl/intranet-tmpl/prog/en/modules/admin/preferences/circulation.pref:
      Add Stockrotation menu.
    
    Signed-off-by: Kathleen Milne <kathleen.milne@cne-siar.gov.uk>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 58314233f70fd9fd2f2830250ff0362e369b6ff1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 9 10:47:11 2018 -0300

    Bug 15734: Use To.json to filter audio alerts
    
    Test Plan:
    1) Enable audio alerts
    2) Note audio alerts don't work
    3) Apply this patch
    4) Note audio alerts now work
    
    Use complex selectors to test:
      #circ_returns p.problem:contains('Not checked out.')
      #doc3 > #bd
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8a2c5344d7910d60e0f04ca531e17250753755a7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 9 12:55:05 2018 +0000

    Bug 15520: DBRev 18.06.00.039
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 63fdde7a9fd627c4692080e5bccd0cfe6d905c29
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Oct 1 20:15:21 2018 +0000

    Bug 15520: (QA follow-up) Fix renaming of circ rules permission
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7e6a24b98a8775543df0f59d3e128ec22be2ac81
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 23 19:11:59 2018 -0300

    Bug 15520: Rename permission to manage_circ_rules_from_any_libraries
    
    Signed-off-by: Lisette Scheer <lisetteslatah@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 82db1e1589f2d3f3f92dcab2fba7fce1fc26f2d9
Author: Jesse Weaver <jweaver@bywatersolutions.com>
Date:   Thu Aug 31 17:02:42 2017 -0600

    Bug 15520: Add permission to restrict circ rules editing to own library
    
    Test plan:
    
    1) Ensure that you have four users:
     a) A superlibrarian
     b) A user with all `parameters` permissions (the toplevel `parameters`
        box is checked).
     c) A user with the `manage_circ_rules` permission (and, of course,
        `catalogue`).
     d) A user with the `manage_circ_rules`, `manage_circ_rules_restricted`
        and `catalogue` permissions.
    2) As all four users, load the "Circulation and fine rules"
       administration page (admin/smart-rules.pl).
    3) The page should be unchanged for the first three users. It should be
       possible to view and edit the circ rules for all libraries.
    4) The last (restricted) user should only be able to view and edit the
       circ rules for their own library.
    
    Amended by JD: In a second version of this patch
    manage_circ_rules_restricted has been replaced by
    manage_circ_rules_from_any_libraries and 'no_inherit' related code has
    been removed
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b3d0bef13650d830b2a3d832a404c2847e727166
Author: Matthias Meusburger <matthias.meusburger@biblibre.com>
Date:   Wed Nov 15 10:50:27 2017 +0000

    Bug 19625: Enable Shibboleth auto-provisioning for Plack
    
    Test plan:
    1. In $KOHA_CONF, check that //shibboleth/autocreate is set to 1
    2. Find a user in Shibboleth that is not in Koha (or remove it from
       Koha)
    3. Login with that user
    4. Verify that the userid is not set correctly in Koha database
    5. Apply the patch (restart starman)
    6. Repeat steps 2 and 3
    7. Verify that the userid is set correctly and the other
    mapped fields if there are some
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4febf0656c202affa6aecba0241bfd13f89f19fd
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Oct 5 10:19:14 2018 +0200

    Bug 17776: (QA follow-up) Remove shibboleth package variables
    
    This is about $shib and $shib_login.
    We move in the right direction by calling get_login_shib in
    get_template_and_user and checkauth. In the same line we can do the
    shib_ok check at that time (just checking cached values). This paves
    the way for the third subroutine using the two package vars: checkpw.
    Note that checkpw is also called outside Auth.pm. So I would be more
    comfortable if we do the same calls like in checkauth and remove both
    variables from the package level (especially under Plack of course).
    
    The former changes actually justify a 'use C4::Auth_with_shibboleth'
    instead of the current require and import.
    
    Note: When calling checkpw from checkauth, we are calling get_login_shib
    twice now. But the time involved for doing so is around zero (cache), so
    not really an argument for extra parameters and complexer code.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7ce770ddc5d4caed4abd7c3026ea18a1dfdfbbdd
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Oct 5 10:25:43 2018 +0200

    Bug 17776: (QA follow-up) Consistent regex for Plack detection
    
    Synchronizing:
    C4/Auth_with_shibboleth.pm:    if ( any { /(^psgi|^plack)/i } keys %ENV ) {
    Koha/AuthUtils.pm:    if ( ( any { /(^psgi\.|^plack\.)/i } keys %ENV ) && $ENV{SCRIPT_NAME} =~ m,^/(intranet|opac)(.*), ) {
    about.pl:if ( any { /(^psgi\.|^plack\.)/i } keys %ENV ) {
    
    Actually we should move it to a subroutine. New report please.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 897711bd473a2949cea3456d04f7c8d5302d9ad4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Sep 28 13:31:13 2018 +0100

    Bug 17776: (follow-up) Add note about NativeSPSpoofChecking
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Amended the text a bit:
    Hopefully, an uppercase important attracts slightly more attention :)
    Added the bug number too.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ea74ed57660219caeb3fb5512b03fc2109b292de
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 2 16:40:11 2017 +0000

    Bug 17776: Enable Shibboleth for Plack
    
    https://bugs.koha-community.org/show_bug.cgi?id=17776
    
    Signed-off-by: Matthias Meusburger <matthias.meusburger@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ffca9decadf539018e447237e56bce76c81bdd64
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sat Sep 29 15:16:46 2018 -0300

    Bug 21426: Handle USE_MEMCACHED=no in koha-create
    
    Signed-off-by: Andreas Roussos <arouss1980@gmail.com>
    
    Works as intended. I've set USE_MEMCACHED to "no" and created a new
    Koha instance. Home > About now reports this information: Memcached:
    Servers: undefined | Namespace: undefined | Status: unknown | Config
    read from: Nowhere [...] | Effective caching method: Cache::Memory
    
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 967e20570026f4208bbc2894cf770ec3fa94287f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 9 12:38:28 2018 +0000

    Bug 21493: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dc2d6ed056405deb444559d2071ff1e2637caee7
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 4 18:45:39 2018 +0000

    Bug 21493: Remove incomplete icon style from serial issues tabs
    
    This patch adds CSS to exclude serial issues history links from having
    an icon background. There is no part of the icon sprite which is
    designed for that purpose.
    
    This patch also tweaks the positioning of a couple of icons and makes
    other minor corrections to related CSS.
    
    To test, apply the patch and regenerate the OPAC CSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client).
    
    - Open the detail page for a bibliographic record in the OPAC which has
      subscriptions.
    - Click the "More details" link.
    - Confirm that the "Brief history" and "Full history" links have no
      icon.
    - Click the "Full history" link and do the same.
    - On the normal, MARC, and ISBD views, confirm that the icons for those
      links look correct.
    - View the purchase suggestions page as a logged-in user. Confirm that
      the "new purchase suggestion" link looks correct.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 78a692dee4523d04986ec394442c3a6d80ea0771
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Feb 7 15:06:56 2018 +0100

    Bug 20151: always use current language for stemming
    
    When stemming is enabled, in catalog searching "C4::Search::_build_stemmed_operand" will transform query operand into stemmed operand using stemmer Lingua::Stem::Snowball with a specified language.
    This stemmer returns undef stemmed operand if no language is defined.
    
    In main catalog search (catalogue/search.pl) current language is used.
    But in other pages "acqui/neworderbiblio.pl" and "cataloguing/addbooks.pl" no language is defined so stemmed operand is empty and so stemming is not applied.
    
    This patch corrects by returning in "C4::Search::_build_stemmed_operand" operand without change if no langage is defined.
    And uses current langage in pages "acqui/neworderbiblio.pl" and "cataloguing/addbooks.pl" so all catalog search uses stemming.
    
    Test plan :
    1) Enable system preferences QueryStemming and QueryWeightFields
    2) Disable system preferences QueryAutoTruncate, QueryFuzzy and UseQueryParser
    3) Go to intranet main page and click on "Search the catalog" tab
    4) Perform a search (without index) that uses the stemming, for example searching for "years" will also match "year"
    5) Note how many results you get, for example "year" gets 24 results and "years" gets 24 results
    6) Go to "Cataloging" module
    7) Perform a search on same word in "Cataloging search" tab
    8) Note how many results you get
    9) Without patch you get fewer results than first search (step 5) because stemming is not applied, for example "year" gets 11 results and "years" gets 15 results
    10) With patch you get the same results as first search (step 5) because stemming is applied, for example "year" and "years" gets 24 results
    11) Same tests in aquisition module
    12) On a basket, click "Add to basket" and perform a search in "From an existing record"
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b27db0fbfc0b715df1b63c57228a9945d4834f29
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Sep 21 11:17:25 2018 +0200

    Bug 21389: Correct Javascript error on article requests page
    
    Bug 21076 fixed a Javascript error on article requests page when patron is found.
    
    There is also an error when patron is not found, with message :
      Patron not found
      No patron with this name, please, try another
    
    This patch fixes by replacing TT condition by a JS condition testing the existance of the patron input.
    
    Test plan:
    1 - Do not apply patch
    2 - Enable article requests
    3 - Search on staff client and click 'Request article'
    4 - Search for a patron that does not exist
    5 - You get a yellow message "Patron not found"
    6 - View error in console
    7 - Apply patch
    8 - Reload
    9 - Not error is gone
    10 - Search for a patron that does exist
    11 - Check there is no error in console
    12 - Check that autocompletion works
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e6bf76b9c712913e549f43a30830ea612c73befa
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Wed Sep 26 14:04:00 2018 +0100

    Bug 20548: (follow-up) Fix unit tests
    
    Removed the "Backend create: copyright clearance" unit test since we no
    longer have a "copyrightclearance" stage, hence we don't have a block in
    the template handling it, hence the test failure!
    
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ad35c9702eb1da9bec331312701e71ce6ab5cf91
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Mon Apr 9 15:04:35 2018 +0100

    Bug 20548: Remove copyright clearance for staff
    
    This patch removes the erroneously added workflow that requires staff
    users to agree to the copyright clearance declaration defined in the
    ILLModuleCopyrightClearance preference. Only OPAC users should be
    required to accept the declaration.
    
    To test:
    1) Ensure you have at least one ILL backend available:
      https://wiki.koha-community.org/wiki/ILL_backends
    2) Ensure you have the "ILLModule" preference enabled
    3) Add some text to the "ILLModuleCopyrightClearance" preference
    4) As an OPAC user make an ILL request:
      a) Navigate to a search results page in the catalog
      b) Click the "Make an Interlibrary Loan request" link at the bottom
      c) Choose "Create a new request", then select a backend
      d) Observe the text you added earlier is displayed with buttons for
      agreeing or disagreeing
    5) As a staff user, select the "ILL requests" button on the front page of
    the intranet site
      a) Choose "Create a new request", then select a backend
      b) Observe that you are NOT prompted to agree to the text you added
      earlier
    
    Assigned-to: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    Signed-off-by: Barry Cannon <bc@interleaf.ie>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 96c2df5804ce3ac84e5963d6b9764553a97a6978
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Oct 5 17:05:19 2018 +0000

    Bug 16420: Buttons inconsistent between "Hold found" and "Hold found (waiting)" dialogs in checkin
    
    This patch makes minor changes to the text of hold confirmation buttons
    in the checkin process in order to make them more consistent.
    
    Also changed: Removed the "danger" class from the "Ignore" button for
    readability and consistency's sake.
    
    To test, apply the patch and check in an item which is on hold for a
    patron at your logged-in library. The hold confirmation dialog's buttons
    should read "Confirm hold," "Print slip and confirm," and "Ignore."
    
    Confirm the hold, then check in the same item again.
    
    In the dialog, the buttons should read "Confirm hold," "Print slip and
    confirm," and "Cancel hold."
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 40803d30359f347417999429b612fcece9fc96f9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 4 14:08:32 2018 -0300

    Bug 21500: Remove warnings in rotating collections
    
    To test:
    - Go to Tools > Rotating collections
    => FAIL: Some warinings on the logs
    - Apply this patch
    - Reload page
    => SUCCESS: No warinings
    - Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 074c329774adb7b23f85293a7f6d146c0d989f99
Author: Andreas Roussos <arouss1980@gmail.com>
Date:   Sat Oct 6 10:15:26 2018 +0300

    Bug 21506: DataTables four button pagination uses the wrong icon for First and Last buttons
    
    Pages with DataTables' four button pagination use the wrong
    icon for 'First' and 'Last'. Also, the icons for all four
    buttons are truncated at the bottom.
    
    This patch fixes that.
    
    Test plan:
    1) Go to a page that uses four button pagination (e.g. Home >
       Administration > MARC frameworks) and notice how the
       pagination icons for First/Previous and Next/Last are the
       same. Also notice all four icons are clipped at the bottom.
    2) Apply the patch.
    3) Refresh the page; the First and Last buttons' icons now
       include a vertical bar, and there is no clipping visible.
    4) For completeness, check other affected pages as well.
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cf8890465d32d780e4177438d9b6ae807b1df36d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 9 11:30:23 2018 +0000

    Bug 21417: DBRev 18.06.00.038
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d70daacebae50fde8449f4cec2bb4578747610fc
Author: Colin Campbell <colin.campbell@ptfs-europe.com>
Date:   Thu Sep 27 16:07:37 2018 +0100

    Bug 21417: (QA follow-up) Display default EAN as such in admin display
    
    A branch value of null is interpreted as the default
    Add text 'All libraries' to this case in the display
    rather than blank so that its function is clear to the
    user
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 18674cfde322c52fafb3114b397bb1ebe7941b97
Author: Kyle M Hall <kyle@bywatersolutiosn.com>
Date:   Thu Sep 27 06:51:27 2018 -0400

    Bug 21417: EDI ordering fails when basket and EAN libraries do not match
    
    When clicking Create EDIFACT Order on /acqui/basket.pl, an EDIFACT message will not be generated if aqbasket.branch does not match edifact_ean.branchcode. This failure does not generate any sort of error message, it just fails to produce a message.
    
    We should allow ean's to not require a branch to be set, then if we don't find a branch specific each, we can look for the default version of the ean.
    
    Test Plan:
    1) Apply this patch set
    2) Run updatedatabase
    3) Verify you can create a Library EAN without setting a branchcode for it
    4) Verify you can use this EAN to send an EDI order where the basket has a branchcode set
    
    Signed-off-by: Colin Campbell <colin.campbell@ptfs-europe.com>
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6cee98c04fce2129de21c65c9e0c407a508df9bd
Author: Andreas Roussos <arouss1980@gmail.com>
Date:   Sat Sep 29 19:51:45 2018 +0300

    Bug 21455: Authority search options get shuffled around when you click on 'Search'
    
    In the staff client, when you perform an authority search the
    selected values for the 'Search all headings:' and 'Search
    entire record:' options get shuffled around when you click on
    the 'Search' button.
    
    This patch fixes that.
    
    Test plan:
    1) Perform an authority search and set the 'Search all headings:'
       option to 'starts with'.
    2) Click on the 'Search' button.
    3) Notice how the 'Search all headings:' option is now 'contains',
       and 'starts with' has moved down to the 'Search entire record:'
       option.
    4) Apply the patch.
    5) Hit 'Search' again. This time the selected search options do
       not move around.
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6152bad79504f28bc1eaffdffa549c4633c922ff
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 9 11:13:46 2018 +0000

    Bug 21470: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4915fc68b754fb7beb52a0bf740a838237e6b9ff
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 2 13:50:28 2018 +0000

    Bug 21470: Due date no longer shown in red when viewing checkouts for a patron
    
    This patch corrects an error in the staff client CSS which was causing
    overdue items on the checkout screen to not be highlighted.
    
    To test, apply the patch and regenerate the staff client CSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client).
    
    Check out to a patron who has overdues. The overdue items should have
    due dates styled bold and red.
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fb6fb4ad53702e51b678e43c9bcf695041845610
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jun 11 12:05:27 2018 -0300

    Bug 20910: Tidy 773 handling XSLT code
    
    There's happiness too. You know.
    
    Sponsored-by: Escuela de Orientacion Lacaniana
    Signed-off-by: Jesse Maseto <jesse@bywatersolutions.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f161d4e823aa84d7c602089eacacbdf2bfc502ce
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jun 11 11:34:22 2018 -0300

    Bug 20910: Display 773$g when $0 is present too
    
    This patch makes the XSLT logic add the $g subfield in the 773 display
    in both the OPAC and staff interface MARC21 record detail pages.
    
    The XSLT chooses between different ways to create the link for the
    related content, but then it only adds the $g in two of the cases.
    There's no obvious reason for a different display.
    
    To test:
    - Have  a record with:
    
    =773   $tHost title $gp4.
    
    => SUCCESS: Notice the Detail view shows:
      In: Host title p4.
    
    - Have another record with:
    
    =773   $tHost title $gp4. $w100
    - Enable UseControlNumber (only to cover the case):
    => SUCCESS: Notice the detail view shows
      In: Host title p4.
    
    - Have another record with:
    
    =773   $tHost title $gp4. $0456
    
    => FAIL: The Detail view doesn't show p4.
    - Apply this patch
    - Reload
    => SUCCESS: The Detail view displays p4.!
    - Sign off :-D
    
    Sponsored-by: Escuela de Orientacion Lacaniana
    Signed-off-by: Jesse Maseto <jesse@bywatersolutions.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 88c29de46558f974ae10a6d25096cf531f7ee0a0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Feb 5 18:13:06 2018 -0300

    Bug 20177: [sql_modes] Fix GROUP BY clause in GetCourses
    
    Fix for:
    'koha_kohadev.courses.department' isn't in GROUP BY
    
    t/db_dependent/CourseReserves.t
    
    A better fix would be to remove the joins and only return values from
    the courses table. But more work is needed to acchieve that goal.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Test passes and the behavior of Course reserves appears to be unchanged
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 09a7d37d53a87e35f2151e00200995ab3dfa3896
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed May 16 01:05:07 2018 +0000

    Bug 9968: Fix wrong index for Standard number in advanced and label search
    
    'Standard number' indicates that you can search ISBN, ISSN and other
    standard numbers, but we are using the wrong index and only get a
    very limited search for biblionumber instead.
    
    This patch changes the index from sn to ident.
    
    To test:
    - Check both staff and OPAC advanced search:
      - Search for Standard number = ISBN
      - Search for Standard number = ISSN
      Both should work.
      Toggle [Intranet|OPAC]NumbersPreferPhrase system preferences
    - Check the label creator
      - Add a new batch
      - Use 'add items' option and search for Standard number
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d83d5ec5a4edfc4927a5f8e5ca3d1cde2942f5fe
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 9 10:56:43 2018 +0000

    Bug 21082: (RM follow-up) address QA issues
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 91790fdd90c8dc59b70f6defd63b088febf5b39d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 9 10:41:03 2018 +0000

    Bug 21082: DBRev 18.06.00.037
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e762bdb9b2243070fd33e9aeb1bdfb88f2af2193
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jul 17 14:16:33 2018 +0000

    Bug 21082: Update OverDrive authentication method
    
    Testing will require an OverDrive account, you should be able to obtain a
    developer account here:
    https://developer.overdrive.com/
    
    You will need to register a SIP connection for patron authentication
    
    To test authentication:
     1 - Set authname default in OD prefs
     2 - Sign in as a patron whose branch matches authname
     3 - Verify the patron can sign into OverDrive
     4 - Set the patrons branch authname to be incorrect
     5 - Verify branch specific authname is used and patron cannot sign in
     6 - Set the default authname to be incorrect and patron's branch
     authname to be correct
     7 - Verofy patron can sign in
    
    To test circulation:
     1 - Fill out all OD prefs and enable circulation
     2 - Sign in to opac
     3 - Verify you have an OverDrive tab
     4 - Click 'Login to Overdrive'
     5 - If password required you shoudl be prompted, otherwise you should be
    signed in and see account info
     6 - Test logging out and in
     7 - Log-in, perform a search on the opac - you should see hold/checkout
    buttons
     8 - Test the buttons
     9 - After holding/checking out items, check your account page
    10 - Verify info is correct
    11 - Log out of overdrive
    12 - Search catalog click overdrive results
    13 - Test "Login to Overdrive" link on OD results
    14 - Verify page is reloaded, buttons show and work
    
    Signed-off-by: Sandy Allgood <sandy.allgood@citruslibraries.org>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit df339d0372c633635bc63d87d7caa7807a540aed
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jul 17 14:08:13 2018 +0000

    Bug 21082: Add new admin page for overdrive
    
    The 'authname' field required for OverDrive can differ per branch.
    This patch adds Koha Objects for dealing with OD info and submitting
    authnames per branch. The description is left open so future branch info
    can be added.
    
    To test:
    1 - prove -v t/db_dependent/Koha/Library/OverDriveInfos.t
    2 - visit cgi-bin/koha/admin/overdrive.pl
    3 - Add some authnames for various branches
    4 - Verify data saves correctly
    
    Signed-off-by: Sandy Allgood <sandy.allgood@citruslibraries.org>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 67d13dc5867e813efad430c6352657e459259bab
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jul 17 13:50:43 2018 +0000

    Bug 21082: Database updates
    
    Signed-off-by: Sandy Allgood <sandy.allgood@citruslibraries.org>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f27787d364ae080ce6a815ba07e8813fce48b2da
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 1 13:42:07 2018 -0300

    Bug 21463: (bug 18789 follow-up) Fix library display on the overdue list view
    
    branchcode is no longer retrieved from the SQL query, we should use the
    Koha::Patron object instead.
    
    Test plan:
    Create some overdues and list them on Home › Circulation › Overdues
    => With this patch applied you should see that the "Library" column is
    correctly filled with the patron's library name
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f12dabe6ccd9400a4ae744a5d74bbddcd9f7ac95
Author: Andreas Roussos <arouss1980@gmail.com>
Date:   Thu Sep 27 19:05:48 2018 +0300

    Bug 21440: koha-create expects the file passed by $DEFAULTSQL to be in gzip format
    
    koha-create contains a call to `zcat` which fails if the file passed
    as an argument is not in gzip format.
    
    This patch fixes the issue by adding the -f flag to the zcat call in
    koha-create, as per the top-voted answers in the following SE URLs:
    https://unix.stackexchange.com/a/77309
    https://unix.stackexchange.com/a/131944
    
    Test plan:
    1) in /etc/koha/koha-sites.conf, set the DEFAULTSQL variable to point
       to an _uncompressed_ SQL database dump
    2) run `koha-create --create-db instance` and notice how it fails with:
       gzip: /path/to/dump.sql: not in gzip format
    3) apply the patch
    4) notice the extra line of information "The SQL file can be optionally
       compressed with gzip" in koha-sites.conf
    5) run the `koha-create` command again, this time it should work
    6) repeat with DEFAULTSQL pointing to a gzip'd dump, it should work too
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cc52094f208d78fd06d888975f4710de0886c7a7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Oct 8 13:46:15 2018 +0100

    Bug 21352: (QA follow-up) - correction to testplan
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e78af533df94b155570116f6f7c4b5a2e5e4e2f2
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Oct 5 14:25:34 2018 +0200

    Bug 21481: (QA follow-up) Remove last reference to text-extract2
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7feca40ba1ce8e57fadd78dc643cb7e3d5da5942
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Oct 3 10:42:44 2018 +0000

    Bug 21481: Remove reference of *-staff-help.po from koha-translate
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6e499dd5672e5b22ecbfe202146041d3715fc584
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Oct 3 10:39:58 2018 +0000

    Bug 21481: Remove obsolete files from translation toolkit
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Conflicts:
            misc/translator/text-extract.pl
            misc/translator/text-extract2.pl
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 27130dbf9923cbf97f01810ec6dc230f96770170
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Oct 3 10:20:29 2018 +0000

    Bug 21481: Remove *-staf-help.po files
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a0de8cf1680caae6545ed8fdf371c6cd8b5d36b2
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Oct 3 10:19:40 2018 +0000

    Bug 21481: Remove references to help from LangInstaller
    
    Test plan:
    1) Aply the patches
    2) cd misc/translator
    3) Run these command one by one:
        ./translate install <lang-code>
        ./translate update <lang-code>
        ./translate create <lang-code>
    4) All should not end with error and must do what is documented (see
        ./translate --help)
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2cb8e9755af0fdfd25bebc465f9a415d485ceea0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Oct 5 14:49:13 2018 +0000

    Bug 18887: DBRev 18.06.00.036
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4e76fa419d699c988eba92767c435dac01fc7c06
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 3 11:04:45 2018 -0300

    Bug 18887: Make DB update idempotent
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3fb069f8eca1674a10cb2e502ea76ae9d4a90e2d
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Oct 1 19:14:41 2018 +0000

    Bug 18887: (QA follow-up) Remove last occurences of old max_holds
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a30b6b893824a8fece31e453e23125101338f84b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sat Sep 29 18:18:03 2018 -0300

    Bug 18887: Add tests
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5e41933470849377d0dec2c93a71c9b8d1ddd5d8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sat Sep 29 18:17:52 2018 -0300

    Bug 18887: Replace croak with exceptions
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ac5e04b85d0ac05053e338f400a31dce3b0edb1e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sat Sep 29 17:41:08 2018 -0300

    Bug 18887: Fix POD c/p issues
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3b489bc24e2b9c39110ed0ec7dc4f9ff28f12966
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sat Sep 29 17:29:44 2018 -0300

    Bug 18887: Add foreign keys
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4f598764064e499fe0fee23b9873c388f41e6692
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sat Sep 15 13:08:16 2018 -0700

    Bug 18887: Add 2 missing html filters
    
    Signed-off-by: Lisette Scheer <lisetteslatah@gmail.com>
    
    Signed-off-by: Jesse Maseto <jesse@bywatersolution.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit da9bd7521996c464c6488e9914b76847ba51a49e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 24 12:25:09 2018 -0300

    Bug 18887: Use get_effective_rule instead of search
    
    Signed-off-by: Lisette Scheer <lisetteslatah@gmail.com>
    
    Signed-off-by: Jesse Maseto <jesse@bywatersolution.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f185785b8cb02a5882cb45219b7af39f99025ef0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 24 11:04:35 2018 -0300

    Bug 18887: Insert undef instead of '*'
    
    Koha::CirculationRules->get_effective_rule will become the method to
    call to retrieve a specific rule, we should start using it when
    possible.
    
    Moreover undef could replace '*' to mean 'any', that way we will be able
    to add FK on circulation_rules
    
    TODO: Add more tests
    
    Signed-off-by: Lisette Scheer <lisetteslatah@gmail.com>
    
    Signed-off-by: Jesse Maseto <jesse@bywatersolution.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2eeee4c5253d8e30e51b4890849fcbee9c17ee67
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 24 09:01:33 2018 -0300

    Bug 18887: Fix DB structure issues
    
    - Make atomic update idempotent
    - Correct COLLAT (atomic update)
    - Add index on rule_name (kohastructure.sql)
    - Add rule_name to the unique constraint (kohastructure.sql)
    - Remove max_holds columns (kohastructure.sql)
    
    Signed-off-by: Lisette Scheer <lisetteslatah@gmail.com>
    
    Signed-off-by: Jesse Maseto <jesse@bywatersolution.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5c31b9c75e3beeeb26ab9f96c568e73ec932874f
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Jul 18 13:55:19 2018 -0400

    Bug 18887: Fix issues caused by rebase
    
    Signed-off-by: Lisette Scheer <lisetteslatah@gmail.com>
    
    Signed-off-by: Jesse Maseto <jesse@bywatersolution.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b9727d20582164da578d125db80576e72e050d2a
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Jul 18 17:35:46 2018 +0000

    Bug 18887: (follow-up) Fix null/empty behavior
    
    Signed-off-by: Lisette Scheer <lisetteslatah@gmail.com>
    
    Signed-off-by: Jesse Maseto <jesse@bywatersolution.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5a931e4e93cf706602551423e03b8702166bb41c
Author: Jesse Weaver <pianohacker@gmail.com>
Date:   Wed Oct 4 16:50:26 2017 -0600

    Bug 18887: (follow-up) Fix behavior for default branch/category
    
    Also, fix a couple small QA issues.
    
    Signed-off-by: Lisette Scheer <lisetteslatah@gmail.com>
    
    Signed-off-by: Jesse Maseto <jesse@bywatersolution.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 35265c0a9bbdb20f40fa49f592aa9a772d27f253
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jun 30 14:23:55 2017 -0400

    Bug 18887: Port max_holds rules to new CirculationRules system
    
    This is the first step in the circulation rules revamp as detailed
    in the RFF https://wiki.koha-community.org/wiki/Circulation_Rules_Interface_and_Backend_Revamp_RFC
    
    This patch moves the recent max_holds rule to the new circulation_rules table.
    
    Test Plan:
    1) Apply this patch
    2) Run updatedatabase.pl
    3) Go to the circ rules editor, note the new max holds rules
       by patron category in the "Checkout limit by patron category".
       ( Should we rename this section? )
    4) Create find a patron that is allowed to place a hold, count the
       number of holds that patron has. Lets make that number 'X'.
    5) Set the new max holds rule to X for "All libraries"
    6) Note the patron can no longer place another hold
    7) Set the new max holds rule to X + 1 for the patron's home library
    8) Note the patron can again place another hold
    9) Set the new max holds rule to X for the patron's home library
    10) Note the patron can no longer place another hold
    
    Signed-off-by: Lisette Scheer <lisetteslatah@gmail.com>
    
    Signed-off-by: Jesse Maseto <jesse@bywatersolution.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f576fb9c3ea88fad65ad83076e59f4f728e908ce
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Mar 6 18:20:03 2017 +0000

    Bug 18887: Add Koha::CirculationRule(s)
    
    Signed-off-by: Lisette Scheer <lisetteslatah@gmail.com>
    
    Signed-off-by: Jesse Maseto <jesse@bywatersolution.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9b0902928872d81e97627bee6c7adf9e563614c5
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Mar 6 17:35:40 2017 +0000

    Bug 18887: Update database
    
    Signed-off-by: Lisette Scheer <lisetteslatah@gmail.com>
    
    Signed-off-by: Jesse Maseto <jesse@bywatersolution.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9de145077abb76b944f277e80a34a81a8a2a0df8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 3 17:56:17 2018 +0000

    Bug 7143: Update about page for new dev - Cori Lynn Arnold`
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e0ca753a2fb4c0509d727ec1d6b5c47d3bf14df7
Author: Cori Lynn Arnold <carnold@dgiinc.com>
Date:   Mon Oct 1 14:36:26 2018 +0000

    Bug 18584: Removed white space in C4/Matcher.pm
    
    Test Plan:
        1-go to C4/Matcher.pm
        2-verify there is no whitespace at line 25
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1e856e7e7316749f59cb4e721e352b0a60237def
Author: Mark Tompsett <mtompset@hotmail.com>
Date:   Wed Apr 25 16:44:03 2018 +0000

    Bug 17237: Remove CREATE USER 'user'@'%' line
    
    Having a 'user'@'%' line decreases database security.
    Bug 16690 closes the need for such a line, and this
    bug removes the use of it.
    
    TEST PLAN
    ---------
    While this depends on 16690, it is not required for testing.
    
    On a kohadev box:
    sudo koha-create --create-db test_17237_a
    git bz apply 17237
    sudo perl ~/misc4dev/cp_debian_files.pl
    restart_all
    sudo systemctl daemon-reload
    sudo koha-create --create_db test_17237_b
    sudo mysql -u root
    SELECT user,host from mysql.user;
    -- test_17237_a will have two entries, one being '%'
    -- test_17237_b will only have one entry, not '%'
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ff1b0ba7cae7ee72d1fc4ab0c2d1a1e1b40ac7fe
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Oct 1 14:05:40 2018 -0400

    Bug 21352: Add missing USE statements
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 47c7f7c64c723ee2944d4c77a71d2f2d0ab0851c
Author: Kyle M Hall <kyle@bywatersolutiosn.com>
Date:   Thu Sep 20 15:30:49 2018 -0400

    Bug 21352: Use the raw filter for plugin hooks, both opac and staff side
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a37637e30357258885e9d0c1c7a30366869dcb08
Author: Kyle M Hall <kyle@bywatersolutiosn.com>
Date:   Sat Sep 15 09:48:49 2018 -0700

    Bug 21352: Allow plugins to add CSS and Javascript to Staff interface
    
    We should have plugin hooks for the staff interface just like we have for the OPAC as detailed on bug 20181.
    
    Test Plan:
    1) Apply this patch
    2) Download and install the Kitchen Sink plugin ( v2.1.19 or later )
       https://github.com/bywatersolutions/koha-plugin-kitchen-sink/releases/download/v2.1.19/koha-plugin-kitchen-sink-v2.1.19.kpz
    3) Install the plugin
    4) Restart all the things if you can ( restart_all if you are using kohadevbox )
       This will ensure the plugin takes effect right away, it should be
       necessary but it won't hurt anything!
    5) Load the staff intranet, notice you get an console error log message and the background
       for your staff intranet is now orange ( assuming you've not customized the
       staff intranet in any way )
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d74a05d4fe81a599c030024f7944d2bdcca43d12
Author: Magnus Enger <magnus@libriotech.no>
Date:   Thu Sep 6 13:23:17 2018 +0000

    Bug 21322: process_message_queue.pl --type should take an argument
    
    The help for this script says:
    -t --type: If supplied, only processes this type of message ( email, sms )
    
    Currently, the type argument is set up wrong, so it does not look
    for an argument. This patch fixes that.
    
    To test, run this command (should work in kohadevbox) or something
    similar:
    
    $ sudo koha-shell -c "perl \
    /home/vagrant/kohaclone/misc/cronjobs/process_message_queue.pl -v \
    --type=sms" kohadev
    
    This should give the following error: "Option type does not take an argument".
    Apply the patch and run the same command again. This should not give an
    error.
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8aa86cdf2d5e0dbda7d21394e52f37ba17a8064c
Author: Olli-Antti Kivilahti <olli-antti.kivilahti@helsinki.fi>
Date:   Wed Oct 3 11:24:38 2018 +0300

    Bug 21480: misc/translator/translate does not work with perl 5.26
    
    Perl 5.26 (or earlier) introduced a security feature, where implicitly
    including the program directory as a Perl library directory no longer
    happens (perl -I. ).
    
    This causes translate to fail because it cannot find the *.pm -files in
    it's own directory.
    
    This patch adds the familiar mantra
        use lib $FindBin::Bin;
    to the relevant scripts.
    
    To test:
    
    1. Install Ubuntu18.04 or something else with Perl 5.26
    2. Install Koha (we use the dev-install)
    3. cd $KOHA_PATH/misc/translator/
    4. perl translate create fi-FI
    5. Observe problems with missing modules.
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Cannot recreate the issue right now but the changes make sense.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b4d8d13f14a7022e603ac30dd8cee0605e9d269d
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Tue Oct 2 13:37:26 2018 +0200

    Bug 21471: (bug 21184 follow-up) Misspelled variable in _get_outstanding_holds
    
    Misspelled variable causes _get_outstanding_holds to crash
    if patron is queued on biblio level
    
    Caused by
      commit 62a075987af70ec5ed3665fe662adb31a17fdde4
        Bug 21184: Replace C4::Items::GetBarcodeFromItemnumber calls
    
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 16fe5d7f30ede8147cb946095da9d529d057c789
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sat Sep 29 11:26:25 2018 -0300

    Bug 21418: Remove shelfoff which is not used
    
    No need to add a new line to escape this variable that is never used,
    better to remove it
    
    `git grep shelfoff` will prove that it is not used anywhere else.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6b053546add6fa9d002d757e5b493e68506e5290
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sat Sep 29 11:24:19 2018 -0300

    Bug 21418: Html escape the 2 variables
    
    We should be on the safe side without this patch because shelfnumber and
    type comes from the DB and are integer or varchar. It may be better to
    show good examples to start, and escape everything anyway.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b313d7c98f6d753caa18cc572ec355f16c4367b1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Sep 26 17:54:28 2018 +0000

    Bug 21418: Incorrectly filtered markup in staff client lists
    
    This patch removes the "|html" filter from some variable declarations in
    the template used to display the list of lists in the staff client.
    
    To test you should have at least one list. Apply the patch and go to
    Lists.
    
    In the table of lists, the "Edit" and "Delete" buttons should look
    correct and work correctly.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7fbd50e3aa07e46f0558d4f52231896937c998bc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 1 18:05:44 2018 -0300

    Bug 21432: (bug 20899 follow-up) Fix patron's name display for deleted patrons
    
    Template process failed: undef error - DBIC result _type  isn't of the
    _type Borrower at
    /home/vagrant/kohaclone/koha-tmpl/intranet-tmpl/prog/en/modules/catalogue/issuehistory.tt
    line 54.
    
    Koha::Old::Checkout->patron should return undef if the patron record has
    been removed.
    
    Test plan:
    - Check 2 items out on the same bibliographic record
    - Check them in
    - Delete the patron's record of one of the issuer (Is this word really
    exist?)
    - View the checkout history for this bib record (Home › Catalog ›
    Checkout history)
    => Without this patch you get the error
    => With this patch applied one of the "Patron" cells will be empty
    
    Signed-off-by: Claudio <costalc@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 051eef767ab3723a63e1bfff50864ab441e05f23
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 2 00:09:12 2018 +0000

    Bug 18639: (follow-up) Remove debugging code
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4859e49539e37f08689df3ba001739711f1332a4
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 2 00:05:22 2018 +0000

    Bug 21403: DBRev 18.06.00.035
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c6e44c9c6bb78bfb3edeacf877c5edb114aab558
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 1 12:14:17 2018 -0300

    Bug 21403: Do not overwrite the options if modified locally
    
    Just in case...
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d1bf2238c49bad5471b467aae4a5f680639cee97
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Sep 25 13:16:09 2018 +0000

    Bug 21403: Add Indian Amazon Affiliate option to AmazonLocale setting
    
    This patch adds an "IN" option to the AmazonLocale setting, allowing
    Indian libraries to use their Amazon Affiliate ID in Koha's links to
    Amazon.
    
    To test, apply the patch and run updatedatabase.
    
    - Go to Administration -> System preferences -> Enhanced content.
    - Enable the OPACAmazonCoverImages preference.
    - Enter a dummy ID in the AmazonAssocTag preference.
    - Confirm that you can select "Indian" for the AmazonLocale preference.
    - Select "Indian" and save.
    - Open a record in the OPAC and confirm that the cover image links to
      Amazon.in and includes the ID you entered in AmazonAssocTag.
    - Do the same with a record in the staff client.
    
    Signed-off-by: Pierre-Marc Thibault <pierre-marc.thibault@inLibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 15670cd590e4a1efc01bb9bd1648162781486f5b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Sep 27 12:59:01 2018 +0000

    Bug 21430: Update two-column templates with Bootstrap grid: Reports part 3
    
    This patch modifies several reports templates to use the
    Bootstrap grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags and "text/css" attributes from <style> tags in the
    modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Reports -> Items with no checkouts
     - Reports -> Catalog statistics wizard
     - Reports -> Guided reports dictionary
     - Reports -> Guided reports, saved SQL reports
     - Reports -> Average loan time
     - Reports -> Circulation statistics wizard
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8b1c37929509ea880eafdd0f0650f301d314b034
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 3 12:49:35 2018 +0000

    Bug 21429: Update two-column templates with Bootstrap grid: Reports part 2
    
    This patch modifies several reports templates to use the
    Bootstrap grid instead of YUI.
    
    A couple of markup errors have been fixed in reports/itemslost.tt.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags and "text/css" attributes from <style> tags in the
    modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Reports -> Lost items
     - Reports -> Catalog by item type
     - Reports -> Orders by fund
     - Reports -> Holds statistics wizard
     - Reports -> Serials statistics wizard
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7858cae1bf5fbdfa07a2d03fee534d1613553146
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 3 11:58:10 2018 +0000

    Bug 21428: Update two-column templates with Bootstrap grid: Reports part 1
    
    This patch modifies several administration templates to use the
    Bootstrap grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags and "text/css" attributes from <style> tags in the
    modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Reports -> Acquisitions statistics wizard
     - Reports -> Patrons with the most checkouts
     - Reports -> Patrons who haven't checked out
     - Reports -> Patrons statistics wizard
     - Reports -> Cash register statistics wizard
     - Reports -> Most-circulated items
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b3dee0daf29c4593aee2781307853845a6cd3735
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 1 11:38:04 2018 -0300

    Bug 21385: Define the Koha object class for orders
    
    It fixes the following issue:
    t/db_dependent/Acquisition/GetBasketsInfosByBookseller.t .. 1/40 Can't
    locate object method "_new_from_dbic" via package "Koha::Aqorder"
    (perhaps you forgot to load "Koha::Aqorder"?) at
    /home/vagrant/kohaclone/Koha/Object.pm line 230.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5e6f4f1f4fb346351dcfc6c580888022641d4b6a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Sep 24 13:33:59 2018 +0100

    Bug 21385: (follow-up) make query consistent
    
    The expected items query wasn't consistent with other queries in this
    module with regards to identifying cancelled orders
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3f20c8c65172c1a32e7d2b20ed2506199423f103
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Sep 24 13:23:25 2018 +0100

    Bug 21385: Add Unit Tests
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 17db3ab05cb25d08f0790cff9eed5f0f75ca8107
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Sep 21 15:10:15 2018 +0100

    Bug 21385: Correctly count all items in basket for booksellers list
    
    To reproduce:
    
    1) Create a basket with 2 biblios, one with 2 items and one with 1 item
    2) Search for vendors and note the basket above should contain 'Item
    count 3', 'Biblio count 2', 'Items expected 3'
    3) Receive shipment, and only receive 1 of the items on the biblio with
    2 items above.
    4) Search for vendors and note that the 'Item count' for the basket
    above is now '2'.
    
    The item count for a closed basket should remain the same and should
    differ from the 'items expected' count some items have been recieved.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Amended patch:
    FAIL   C4/Acquisition.pm
       FAIL   spelling
         RECIEVED  ==> RECEIVED
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 08386cd3f05c5bc4dc6306e3a1d6c4878cce7c86
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sat Sep 29 16:04:56 2018 -0300

    Bug 21448: Fix copy repeated subfields when linking an authority with 6xx
    
    The reported issue was:
    On field 606, if I use an Authority with multiple "x" subfields, it will
    add just the first "x"
    
    Error in the logs:
    Odd number of elements in anonymous hash at /home/vagrant/kohaclone/authorities/blinddetail-biblio-search.pl line 97.
    
    We should pass a ref (!), caused by
      commit a7df1f9f8eb9ed16246964d94dd8a69b756b6551
      Bug 18904: (follow-up) Retrieve subfield in the order they are stored
    
    Test plan:
    Edit an authority and add several $x to 600
    Link this authority to a bibliographic record
    => Without this patch only the first subfield is copied
    => With this patch applied they are all copied
    
    Signed-off-by: José Anjos <joseanjos@gmail.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 11885e75c04fa53cd88daae1ec0dc4a2a8ecd1f7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 13 13:23:00 2018 -0300

    Bug 21176: Fix due date calculation when high holds and TimeFormat is 12hr
    
    What we were doing was wrong and is still wrong. The output_pref should not be done
    in modules or script, only template side.
    Much more work would be needed to clean the situation. This patch provides less changes
    as possible to, hopefully, not introduce side-effects.
    
    To recreate:
    1 - Enable decreaseLoanHighHolds, set to 1 day and more than 0 holds
    2 - Set TimeFormat to 12 hour
    3 - Find or create a record with two items
    4 - Place a hold on one of them
    5 - Checkout the other to a different patron
    6 - Note the warning message display correct time
    7 - Confirm the checkout
    8 - Note the item is due at 11:59AM
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fca98de0e8663c4e7049e55ac2cc2600c9b659a5
Author: Johan Larsson <johan.larsson@ub.gu.se>
Date:   Mon Oct 1 14:48:54 2018 +0200

    Bug 21462: (bug 15136 follow-up) Shift column numbering
    
    Wrong column was selected for filtering the table.
    This was caused by changing the hmtl-structure of the table
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b04df7d606afa7ec7a43c788dcfcd06e595ccabd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 1 14:18:15 2018 -0300

    Bug 17602: Add missing html filters
    
    RM update: Remove accidental tabs from updatedatabase.pl
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ccc40975e3cda7966b67be297dd16891aa8dc314
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Oct 1 16:29:20 2018 +0000

    Bug 17602: DBRev 18.06.00.034
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c80074077dc7d1ff2652cf810160497e05ec426f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Oct 1 16:10:06 2018 +0000

    Bug 17602: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 903cf19f9ca5cc9a8effa776efd51321681dc583
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Oct 1 14:24:27 2018 +0000

    Bug 17602: (RM follow-up) QA tool issues
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 28a1a90b3dace9207fd26a753ab222ba298bcb99
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 21 19:00:28 2018 +0000

    Bug 17602: Move spinner location to include file
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c90fa4182e6fb78c2c09958d9671c2b61943412f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Sep 12 21:10:13 2018 +0000

    Bug 17602: (QA follow-up) Fix tests
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a33826454bf01d7de1e5b5a57467cef14f96d419
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jun 19 15:04:03 2018 -0300

    Bug 17602: Use Asset TT plugin and fix indentation
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 441af54fc629e40157d050aa027c601c10e3f67d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 5 16:49:58 2018 +0000

    Bug 17602: (follow-up) Adjust js paths to use version add spinner
    
    Also included recompiled version of opac.css that we forgot.
    
    Signed-off-by: Srdjan <srdjan@catalyst.net.nz>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1dcb6f28ee91fe7661b546150279c7388286ff2f
Author: Srdjan Janković <srdjan@catalyst.net.nz>
Date:   Mon Nov 27 17:38:58 2017 +1300

    Bug 17602: Removed unused param to RecordedBooks API
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fc3bc961095280ba60db72b466762339f9d05905
Author: Srdjan Janković <srdjan@catalyst.net.nz>
Date:   Mon Nov 27 17:38:02 2017 +1300

    Bug 17602: fix RecordedBooks results pagination
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 34058bb6d0497079e7957933b364e76ad88ba765
Author: Srdjan Janković <srdjan@catalyst.net.nz>
Date:   Mon Nov 13 14:25:33 2017 +1300

    Bug 17602: Translations rework
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 82ec758f18ba5b2600c065245fb68a3f177dcba8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 8 10:18:53 2017 -0300

    Bug 17602: Fix few minor QA issues
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fa8cda129ef5c71042334083ee13aecb56ed7ab6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 8 10:13:35 2017 -0300

    Bug 17602: Adapt test plan to make the tests pass
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 48c0e8952a46a5a3eef6cae138c88b1ae22b0986
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 8 10:06:49 2017 -0300

    Bug 17602: Handle '60+' if there are more than 60 results
    
    The service returns "60+" if there are more than 60 results.
    Without this patch the "Found %s results in RecordedBooks collection"
    line is removed.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7ff2b8d5e22e5333f51426c481bbfe83ae1ddc47
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 8 10:06:30 2017 -0300

    Bug 17602: Ease translation
    
    Use String.format() to make translation easier
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8cb8223e12d5e311e59813c1ba03835c0b50670e
Author: Srdjan Janković <srdjan@catalyst.net.nz>
Date:   Tue Oct 10 14:26:22 2017 +1300

    Bug 17602: (follow-up) t/Koha_ExternalContent_RecordedBooks.t
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit eb4be268d8d66ae0b7ca803ecf270a688fc6aea1
Author: Srdjan Janković <srdjan@catalyst.net.nz>
Date:   Fri Sep 23 18:13:10 2016 +1200

    Bug 17602: OPAC integration of RecordedBooks
    
    Add RecordedBooks to the users page in the public interface
    
    To Test:
    1/ Apply all 3 patches
    2/ Set the sysprefs to valid values (you will need a test account with RecordedBooks)
    3/ Try a search
    4/ Login to the OPAC, try to place a hold, or check an item out
    5/ Check the opac-user page, see if your items are showing on the oneclickdigital tab
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7825ff69c2acd2a390b18402e2813fdd9d0b4774
Author: Srdjan Janković <srdjan@catalyst.net.nz>
Date:   Fri Sep 23 18:08:30 2016 +1200

    Bug 17602: RecordedBooks Integration to Koha
    
    This patch introduces the required sysprefs and Koha::ExternalContent::RecordedBooks
    
    Koha::ExternalContent::RecordedBooks - a wrapper around
    WebService::ILS::RecordedBooks::PartnerPatron
    
    RecordedBooks* sysprefs
    
    Nothing functional to test with this patch yet.
    But you can run the tests that come with it
    
     t/db_dependent/Koha_ExternalContent_RecordedBooks.t
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2f1cba8b31063ea81862abd37aae009072b1fb15
Author: Srdjan Janković <srdjan@catalyst.net.nz>
Date:   Tue Apr 18 14:33:38 2017 +1200

    Bug 17602: Koha::ExternalContent->koha_patron() will retutn undef rather than die if user not logged in
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 311b9dccbc60f05421416f402627b78e5efb5542
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 2 18:37:11 2018 +0000

    Bug 21437: Update two-column templates with Bootstrap grid: Patron lists
    
    This patch modifies the patron lists templates to use the Bootstrap grid
    instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags and "text/css" attributes from <style> tags in the
    modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Tools -> Patron lists
       -> View patron list
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 36a52382227aecca98f8b57314d4374a60a99227
Author: Mark Tompsett <mtompset@hotmail.com>
Date:   Wed Jun 7 15:28:11 2017 -0400

    Bug 9188: Remove 'debug' information from patron statistics
    
    TEST PLAN
    ---------
    run patron statistics without filtering
    -- notice lots of text at top.
    run patron statistics with filtering
    -- notice lots of text at top.
    apply patch
    run it without and without filtering
    -- amount of text should be small or none and be related to the filtering selected.
    run koha qa test tools
    
    Signed-off-by: Andreas Roussos <arouss1980@gmail.com>
    Works as expected, i.e. only filtering information is displayed.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f0988e414edfde2d7155eedb532b32d43c32109f
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Sep 24 10:13:53 2018 +0000

    Bug 21376: Add date accessioned to items table on catalogue detail page
    
    Changes in this patch (page catalogue/detail):
        - added date accesioned to items table
    
    Signed-off-by:  Michal Denar <black23@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c9b0570864ae7e1a510f918e931d8de85d8309a3
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Sep 19 06:05:12 2018 +0000

    Bug 21376: Add ability to date sorting in items table on catalogue detail
    
    Changes in this patch (page catalogue/detail):
    - enable sorting by date in items table
    
    Signed-off-by:  Michal Denar <black23@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4c7246d6768178b558678e2bdf7c5174508532c6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Oct 1 13:39:40 2018 +0000

    Bug 17282: (follow-up) Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1814ae1769ead4d16e0fe26e871483339f2715cb
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Mon Sep 24 12:22:09 2018 +0000

    Bug 17282: add template's variable filters
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit edb627bcf275c037879622ec07d807d2186c98e0
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Mon Sep 24 13:09:35 2018 +0000

    Bug 17282: Ability to create charts for SQL reports
    
    Add a form under report's result that allow to configure and draw a
    chart (pie, bar, line and combination).
    
    Pie: Usefull only for a two-column report's result
    
    bar: Horizontal: Can be horizontal or vertical (check/uncheck
    horizontal checkbox),
         Group: allows to group columns (stacked bar chart),
         Line: show some columns as line in a bar chart (combination)
    
    line: line chart :)
    
    This patch adds 2 new js libraries: d3js and c3js:
      - c3.min.css
      - c3.min.js
      - d3.min.js
    
    Test plan:
    - Apply this patch,
    - execute a report,
    - click on show chart settings button (in the tool bar),
    - draw chart (click on draw button),
    - check the chart
    
    Features:
    - Include all rows (ignore pagination),
    - Download the chart (svg),
    - Choose x column and y columns,
    - Exclude last line (Rollup)
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8b1bda9ed8507745b4002199d9aae95c2cbb31fb
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Sep 27 12:29:08 2018 +0100

    Bug 19271: Show vendor name on ordered/spent lists
    
     Improvements to the display of lists of ordered and received orders:
     - Show the vendor's name instead of the internal number
    
     To test:
     - Make sure you have some pending and received orders
     - Access the Spent and Ordered pages by clicking on the
       amount ordered or spent on the acq start page
       - Verify that
         - Vendor name shows
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a002d12888c1e56910a32f28514a59d9a1d9363d
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Aug 10 05:21:56 2018 +0200

    Bug 15971: Add biblioitems to available fields for serial claim notices and fix notices editor display
    
    This fixes 2 related problems:
    
    1) The editor only offered 3 entries from biblio for adding to the notice:
    title, author, serial
    It was not clear that actually all fields from biblio can be used.
    
    2) It was not possible to use fields from biblioitems in the notices
    which left out important fields like the ISSN.
    
    The patch adds the biblioitems table and changes the editor to show
    all entries from biblio and biblioitems table are shown on the left.
    
    To test:
    - Create a subscription
    - Generate next issue a few times to get late issues
    - Create a new notice in the "Claim serial issue" module
      - Use fields from different/all tables
    - Make sure an email address is set for
      - the vendor (also check for 'receives claims for late issues')
      - your staff user
    - Go to serials > claims
    - Claim multiple issues
    - Verify the email is generated and contains the correct information
    
    Example notice:
    
    Title: <<biblio.title>>
    Author: <<biblio.author>>
    ISSN: <<biblioitems.issn>>
    ISBN: <<biblioitems.isbn>>
    Issue: <<serial.serialseq>>
    --
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 448dd50cf59b96e5abbb84f7717ca43f593c05e5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sat Sep 29 13:12:38 2018 -0300

    Bug 21454: Remove html filter for Price filtered variables
    
    Generated with:
    perl -p -i -e 's/\|\s?\$Price\s?\|\s?html\s%]/| \$Price %]/g' **/*.tt **/*.inc
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d68d8f4f3672256fbd233310d1d4aa5857c28a8c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sat Sep 29 13:10:19 2018 -0300

    Bug 21454: Do not require html filter on Price
    
    Test plan:
    - Apply first patch
    - Confirm that tests is failing (t/template_filters.t)
    - Apply second patch
    - Confirm that tests return green
    - Apply last patch
    - Confirm that prices are displayed correctly
    
    QA step:
    Edit a template and add the following 2 lines:
    [% SET p = '<script>alert("foo");</script>' %]
    [% x | $Price %]
    => Display '0.00'
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d98ee2ad8bafebd877ccb85180f37e0b54d79e4c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sat Sep 29 13:09:59 2018 -0300

    Bug 21454: Update the tests
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7d56a5fe00c3804d6f0a7709fd6deef1a6bcf9e3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Sep 21 12:33:19 2018 -0300

    Bug 21393: Add line nubmers to ease fixing
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3ad96419a760c4519e38d685b906f013e9932fee
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Sep 21 12:03:05 2018 -0300

    Bug 21393: Add tests
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 54e2f2b5b282c6e4a5c2f04107b274fa075b862d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Sep 21 10:26:03 2018 -0300

    Bug 21393: Move missing filters code to a module
    
    To make it reusable easily from QA test tools
    https://gitlab.com/koha-community/qa-test-tools/issues/3
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4bf594c9de4e06d79413459f2146a2d1e448fb11
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Oct 1 12:57:47 2018 +0000

    Bug 12027: (follow-up) Add missing filter
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cee35f3a7881d6cde4184ac4045e1c221eb03108
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Sep 26 16:18:25 2018 +0200

    Bug 12027: (QA follow-up) Fix spelling and tab characters
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 142230bdde0b67bfdc7c6bd4ec0c2f224c9ebacd
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Apr 28 15:23:18 2017 +0100

    Bug 12027: (QA follow-up) Update tests
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0aa69ea795a7e19b19e9124ff99a6be19e77e5dc
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jan 27 13:34:14 2015 +0000

    Bug 12027: (follow-up) Added missing documentation
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9df099dc114d0101ef1091c30662a537e53e9826
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jul 31 06:21:55 2014 +0000

    Bug 12027: Added shibboleth authentication to the staff client
    
    - This patch adds shibboleth authentication to the staff client.
    - Depending upon how your url structure works, you may or may not need a
      second native shibboleth service provider profile configured for this
      to work.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0862f7776942ebf64615d57f94982586d00c34ee
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Sep 19 19:54:35 2018 -0300

    Bug 17877: Add the order's notes to the table
    
    This patch adds the vendor and internal note from the acquisition order
    to the subscription detail page
    
    Test plan:
    - Create an order from a subscription, fill the internal and vendor
    notes
    - Go to the subscription's detail page
    - Confirm that the columns are displayed in the "Acquisition details"
    table and contain the correct values
    - Make sure the "Home › Administration › Columns settings" admin page
    let you hide them by default (for those who will not need them).
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4fe0b3501851a6f5a05645ca76ce9d4287667cc5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Sep 19 19:45:12 2018 -0300

    Bug 17877: Add columns settings to the orders table on subscription-detail
    
    Test plan:
    - Apply this patch and make sure to restart memcached (to re-read the yaml
    file that is cached)
    - Go to Home › Administration › Columns settings
    - Confirm that a new "Serials" tab contain the different columns of the
    "Acquisition details" table displayed on the subscription detail page
    (if an order exist for this subscription)
    - Play with it
    - Go to Home › Serials › Details for subscription #ID
    - Confirm that the "Column visibility" button is now displayed on top of
    the table that it works correctly.
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0bd485947f7554657e61f050cd5204ebb40d04c0
Author: Kyle M Hall <kyle@bywatersolutiosn.com>
Date:   Wed Sep 12 09:38:42 2018 -0700

    Bug 21340: Add spans with classes around callnumbers in OPAC for additional styling
    
    It would be nice if the callnumber portion of the callnumber + label was in a span, and it also makes sense to wrap the entire callnumber string in a span as well.
    
    Signed-off-by: Petter <petter@libriotech.no>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2c57361533f21218d326832ca0a2134b358d31b7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sat Jul 28 12:42:31 2018 -0300

    Bug 21166: Add column settings to the acquisition table on bib detail
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 658638a48f20128ebe8cabae92c33af2a50abb16
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Oct 1 12:04:23 2018 +0000

    Bug 12747: DBRev 18.06.00.033
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d1d5c48deb58085b4d4b49997675bab35d5ff44b
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Sep 24 20:55:39 2018 +0000

    Bug 12747: (QA follow-up) Rephrase system preference description
    
    Just a suggestion for a little change to the pref description.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d37da4d24fc07c5caf04960238a77c81fb95eabc
Author: Charles Farmer <charles.farmer@inLibro.com>
Date:   Wed Aug 29 11:43:49 2018 -0400

    Bug 12747: (QA follow-up) Treat 010 according to marcflavour
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f6e86dc0cab2bcd4e8477f639fd600d27d387180
Author: David Bourgault <dav.bour@gmail.com>
Date:   Fri May 4 15:38:11 2018 -0400

    Bug 12747: Add extra column in Z3950 search
    
    This patch makes it possible to add an extra column to Z3950 search results.
    The system preference AdditionalFieldsInZ3950ResultSearch decides which MARC field/subfields are displayed in the column.
    
    Testing:
    
    I Apply the patch
    II Run updatedatabase.pl
    
    ACQUISITIONS
    0) Enter a field/subfield in the AdditionalFieldsInZ3950ResultSearch
    1) Create a new basket or use an existing one
    2) In -Add order to basket-, click "From an external source"
    3) Select some search targets and enter a subject heading ex. house
    4) Click Search bouton
    5) Validate "Additional fields" column with the field/subfield value.
    
    CATALOGUING
    0) Shares same syspref as above
    1) Go to cataloguing, click New from z3950
    2) Fill to result in a successful search
    3) Validate column Addition Fields
    
    prove t/db_dependent/Breeding.t
    
    Sponsored-by: CCSR (https://ccsr.qc.ca)
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e81756b317da848a6e6346a7c0db8f3b986f7058
Author: Colin Campbell <colin.campbell@ptfs-europe.com>
Date:   Thu Sep 27 12:25:28 2018 +0100

    Bug 21425: Display basketno correctly in Order error msg
    
    carp will display the hash value instead of the desired basketno
    in the error message unless we change its behaviour
    
    Use the simpler but effective option of concatenating
    the errormessage with the basketno. Error is shown if no
    sender or receipient ean is passed in instantiating
    an Koha::Edifact::Order object
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 623f1db90ac8d0361a879813c66a4bccbf0ea23e
Author: Mark Tompsett <mtompset@hotmail.com>
Date:   Wed Sep 26 22:57:32 2018 +0000

    Bug 13272: (follow-up) add missing type="text"
    
    This addresses comment #13.
    This also applies cleanly.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5edd363a1f2e3b1ea34f3f2aa7ace86cbf467df8
Author: Mark Tompsett <mtompset@hotmail.com>
Date:   Wed Sep 19 18:49:02 2018 +0000

    Bug 13272: (follow-up) Replace tabs with spaces
    
    Cleaned up whitespace issues tab vs. space in template.
    After applying all patches:
        git diff -w origin/master
    For the koha-tmpl/intranet-tmpl/prog/en/modules/circ/returns.tt
    only the changed type="text" lines will show, but without the
    -w, there will be more whitespace changes.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 77871b408c9a8e120f8415cc0b32683ee8f57e7d
Author: Mark Tompsett <mtompset@hotmail.com>
Date:   Wed Sep 19 16:48:13 2018 +0000

    Bug 13272: (follow-up) fix concerns from comment #5
    
    Correct the two issues I pointed out.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 92a2d74c1c134674b9798981208b9ad5863a6b42
Author: Christopher Brannon <cbrannon@cdalibrary.org>
Date:   Sun Sep 16 22:06:10 2018 +0000

    Bug 13272: Adds type="text" to inputs missing it
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 39f48130416132063dfb7b44bcb8bf2344f1b9ef
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue Sep 25 07:04:03 2018 +0000

    Bug 21404: Refactor _build_query subroutines
    
    Test plan:
    1) Apply the patch
    2) prove t/db_dependent/Breeding.t
    3) Try to search using Z39.50, both, authority and biblio should still
    work
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6d75ae942a7f51cd5ea5191b625df20efadea297
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue Sep 25 06:33:02 2018 +0000

    Bug 21404: Update test
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit de40463a7fa2be0fe090ef64b2bfffe928607adc
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue Sep 25 06:04:30 2018 +0000

    Bug 21404: Remove unused variables in C4::Breeding->_auth_build_query
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f3c2eae74c69fea3dfc0e453a07f2b2461330c49
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Thu Sep 6 09:46:35 2018 +0000

    Bug 21318: Add control number as an option to search authority using Z39.50
    
    1) Apply the patch
    2) Go to administration and set up a z39.50 authority server, which does
    support searching by control number (use attribute 12), you can use czech
    national library server:
    host: aleph.nkp.cz
    port: 9991
    base: aut-utf
    format: MARC21
    encoding: UTF-8
    3) Try to find an authority by control number using z39.50 - if you use the server
    recomended in point 2) there is web access to the base at
    http://aleph.nkp.cz/eng/aut
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Fixed a typo in a code comment and a whitespace issue in the template.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fca5a1cb3dba5d6561eaf5f30dfd4d996a4042cc
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu Aug 30 10:52:43 2018 +0100

    Bug 21289: Fix "isa" bug during partner request
    
    We cannot call 'handle_commit_maybe' inside a 'try' block.
    handle_commit_maybe redirects the client then calls 'exit', this is
    interpreted as an error and the 'catch' block is erroneously called.
    
    This patch moves the calling of 'handle_commit_maybe' outside the try
    block, it will only be reached if everything inside the try block
    suceeds.
    
    To test:
    1) Enable ILL and have the FreeForm backend available
    2) Create a patron category to hold ILL "partners" to whom requests can
    be sent. The category can be called anything, you should note the code
    you assign
    3) Create a patron that belongs to your new category, the patron must
    have a primary email defined.
    4) In your <interlibrary_loans> block in koha-conf.xml, ensure you have
    a <partner_code> element, it should contain the code you assigned in
    step 2
    5) Create an ILL request using the FreeForm backend
    6) Once the request is created, select the "Place request with partners"
    button
    7) Select your "partner" from the "Select partner libraries" box
    8) Click "Send email"
    9) TEST: Observe no errors are displayed in the UI
    
    Signed-off-by: Barry Cannon <bc@interleaf.ie>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 013c116d59b14681bff1c18c9225ea4e31627a28
Author: Mark Tompsett <mtompset@hotmail.com>
Date:   Tue Jun 7 22:48:57 2016 -0400

    Bug 16690: Simplify SHOW GRANTS to work when connected
    
    If the DB is on a remote machine, the web server and the
    db server are different, but the SHOW GRANTS code in
    installer/install.pl is trying to use the SAME machine.
    And even if the permissions were allowed accessing from
    both the web and db servers, MySQL won't return the
    SHOW GRANTS without access to the mysql.user table. To
    install *.* permissions became easiest to get working.
    Unless the DB is set up with 'user'@'%', which is also a
    potential security issue.
    
    MySQL / MariaDB allow the current connected user to
    check their own grants with CURRENT_USER.
    There is no need for the installer to know the
    IP address of the webserver.
    
    This also removes the need to have permissions for
    'koha_kohadev'@'%', because the only process to be
    accessing the koha DB is from a known host/ip.
    This tightens security too.
    
    TEST PLAN
    ---------
    Install 2 fresh VMs from a Debian ISO.
    Make sure they are on the same network (192.168.50.x) as
    the kohadevbox. You will need to remember one as DB_IPADDRESS.
    
    On the DB VM & Third VM:
    sudo apt-get install mariadb-server mariadb-client net-tools
    -- the third vm just needs to be able to run mysql to access
       the DB VM.
    
    On DB VM:
    sudo vi /etc/mysql/mariadb.conf.d/50-server.cnf
    -- make sure the bind-address line is commented out with a #
    sudo service mariadb restart
    -- congratulations, your DB server is listening to remote
       calls now.
    
    sudo mysql -u root
    CREATE DATABASE koha_kohadev;
    GRANT ALL PRIVILEGES ON `koha_kohadev`.* TO 'koha_kohadev'@'localhost' IDENTIFIED BY 'password';
    FLUSH PRIVILEGES;
    -- now you have an empty DB ready to run a web install on.
       However, because only koha_kohadev from localhost is
       allowed, we expect failure when we try to run the web
       installation step when we get there.
    
    Let's confirm that everything is working as expected
    before trying.  It will also demonstrate the reason why
    this patch is superior to the existing code.
    
    On a kohadevbox:
    mysql -u koha_kohadev -h DB_IPADDRESS -p
    -- this should be denied
    
    On DB VM:
    DROP USER 'koha_kohadev'@'localhost';
    GRANT ALL PRIVILEGES ON `koha_kohadev`.* TO 'koha_kohadev'@'%' IDENTIFIED BY 'password';
    FLUSH PRIVILEGES;
    
    On a kohadevbox:
    mysql -u koha_kohadev -h DB_IPADDRESS -p
    -- this should give you a SQL prompt
    SHOW GRANTS FOR CURRENT_USER;
    -- this should show two lines based on 'koha_kohadev'@'%';
    SHOW GRANTS FOR 'koha_kohadev'@'192.168.50.10';
    -- this should give an access denied error.
    SHOW GRANTS FOR 'koha_kohadev'@'%';
    -- this should show two lines based on 'koha_kohadev'@'%';
    QUIT
    -- This case requires the unless code currently in place,
       because we aren't checking CURRENT_USER.
    
    On DB VM:
    DROP USER 'koha_kohadev'@'%';
    GRANT ALL PRIVILEGES ON `koha_kohadev`.* TO 'koha_kohadev'@'192.168.50.10' IDENTIFIED BY 'password';
    FLUSH PRIVILEGES;
    
    On a kohadevbox:
    mysql -u koha_kohadev -h DB_IPADDRESS -p
    -- this should give you a SQL prompt
    SHOW GRANTS FOR CURRENT_USER;
    -- this should show two lines based on 'koha_kohadev'@'%';
    SHOW GRANTS FOR 'koha_kohadev'@'192.168.50.10';
    -- this should show two lines based on 'koha_kohadev'@'192.168.50.10';
    SHOW GRANTS FOR 'koha_kohadev'@'%';
    -- this should give an access denied error.
    QUIT
    -- This case demonstrates that we have two failure points:
           1) The GRANT command by the DB Admin and
           2) The koha-conf.xml setting.
       This is why CURRENT_USER is superior: only (2) is the
       failure point.
    
    On DB VM:
    GRANT ALL PRIVILEGES ON `koha_kohadev`.* TO 'koha_kohadev'@'%' IDENTIFIED BY 'password';
    FLUSH PRIVILEGES;
    SELECT host,user FROM mysql.user;
    -- Should see both koha_kohadev for 192.168.50.10 and %.
    
    On a kohadevbox:
    mysql -u koha_kohadev -h DB_IPADDRESS -p
    -- this should give you a SQL prompt
    SHOW GRANTS FOR CURRENT_USER;
    -- this should show two lines based on 'koha_kohadev'@'192.168.50.10';
    SHOW GRANTS FOR 'koha_kohadev'@'192.168.50.10';
    -- this should show two lines based on 'koha_kohadev'@'192.168.50.10';
    SHOW GRANTS FOR 'koha_kohadev'@'%';
    -- this should give an access denied error.
    QUIT
    -- This case doesn't need the unless. CURRENT_USER still
       just works.
    
    On an third VM on the same network:
    mysql -u koha_kohadev -h DB_IPADDRESS -p
    -- this should give you a SQL prompt
    SHOW GRANTS FOR CURRENT_USER;
    -- this should show two lines based on 'koha_kohadev'@'%';
    SHOW GRANTS FOR 'koha_kohadev'@'192.168.50.10';
    -- this should give an access denied error.
    SHOW GRANTS FOR 'koha_kohadev'@'%';
    -- this should show two lines based on 'koha_kohadev'@'%';
    QUIT
    -- This case demonstrates that it may be more open than a DB
       administrator would prefer. And notice, CURRENT_USER still
       just works.
    
    On DB VM:
    DROP USER 'koha_kohadev'@'192.168.50.10';
    DROP USER 'koha_kohadev'@'%';
    GRANT ALL PRIVILEGES ON *.* TO 'koha_kohadev'@'%' IDENTIFIED BY 'password';
    FLUSH PRIVILEGES;
    -- This basically give koha_kohadev free reign to do pretty
       dangerous stuff.
    
    On an third VM on the same network:
    mysql -u koha_kohadev -h DB_IPADDRESS -p
    -- this should give you a SQL prompt
    SHOW GRANTS FOR CURRENT_USER;
    -- this should show a line based on 'koha_kohadev'@'%';
    SHOW GRANTS FOR 'koha_kohadev'@'192.168.50.10';
    -- this should give a no such grant error.
    SHOW GRANTS FOR 'koha_kohadev'@'%';
    -- this should show two lines based on 'koha_kohadev'@'%';
    QUIT
    -- This case demonstrates that it may be more open than a DB
       administrator would prefer. And notice, CURRENT_USER still
       just works.
    
    In the old code, both cases were literally checked.
    This tweak is an optimization which doesn't require
    setting permissions to the mysql.user table. Without it,
    the code says the user doesn't have permissions to check
    the show grants.  This issue is not visible to the user,
    because both cases are checked.
    
    On DB VM:
    SELECT host,user FROM mysql.user;
    -- for each one do an appropriate DROP USER 'user'@'host';
    GRANT ALL PRIVILEGES ON `koha_kohadev`.* TO 'koha_kohadev'@'192.168.50.10' IDENTIFIED BY 'password';
    
    On kohadevbox:
    -- Make sure the /etc/koha/sites/kohadev/koha-conf.xml
       points to the DB VM.
    -- Make sure a web install runs correctly
    
    On third VM:
    -- Make sure unable to connect as koha_kohadev/password.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    I have not followed the whole test plan but trusting author and SO
    Changes make sense to me
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4a5df8c5ae4b95d17ae2d93f3c35012a483cf836
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Sep 26 10:17:01 2018 +0000

    Bug 13618: (follow-up) Pass opacuser_js from plugins as raw
    
    We expect this field to contain script tags, html processing breaks them
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 705571a2b870fbb652ca210e32ee3e7ca050e75f
Author: Andreas Roussos <arouss1980@gmail.com>
Date:   Thu Sep 27 07:54:27 2018 +0300

    Bug 21416: 'gr' option missing from ZEBRA_LANGUAGE options in koha-sites.conf
    
    'gr' (as in 'Greek') is missing from the ZEBRA_LANGUAGE options
    in debian/templates/koha-sites.conf. This patch fixes that.
    
    Test plan:
    1) view koha-sites.conf and notice how 'gr' is missing from the
       ZEBRA_LANGUAGE options
    2) apply the patch
    3) observe that koha-sites.conf now includes 'gr' as an option
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a6a7516652115ccc49099f045ed8c23a9f29eb26
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Sep 19 08:07:57 2018 +0000

    Bug 21167: (QA follow-up) Use accounttype.inc for generating account description
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c86485f933a0eabdb8af215c5b74c5416d2cb95a
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Sep 19 07:53:32 2018 +0000

    Bug 21167: (QA follow-up) Fix amount formatting on invoice receipt
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 184c44ee31bf54ad179f9fb9fd501114902a0176
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Aug 8 19:26:47 2018 +0000

    Bug 21167: Fix price formatting on printed fee invoice and receipt
    
    The prices were not formatted correctly on the printed receipts
    for fines and payments in the patron account.
    
    This patch introduces the use of the Price TT plugin to those
    templates.
    
    Also:
    - Fixes a few capitalization errors
    - Removes spaces in front of :
    - Updates accounttype-to-description list to the one used
      in other templats as a lot of values were missing (Credit etc.)
    
    To test:
    - Create several fines, use some .00 and some with other values
    - Pay some fines
    - Create a manual credit
    - Use print button for all of those (credit, fee, payment)
    - Verify that:
      - prices ending in .00 are displayed without the decimal part
      - instead of Credit only C is shown in the description
    - Apply patch
    - Print invoices and receipts again
    - Verify that:
      - prices are now formatted according to CurrencyFormat system
        preference, decimal part always included
      - verify that correct description for Credit is shown
    
    Signed-off-by: Brendan Gallagher <brendan@bywatersolutions.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ca839922fd4bf3c455454f6dd9182203b1481831
Author: Pasi Kallinen <pasi.kallinen@joensuu.fi>
Date:   Fri Aug 24 11:05:04 2018 +0300

    Bug 20785: Advanced Editor does not honor MarcFieldDocURL
    
    The advanced MARC editor, Rancor, doesn't obey MarcFieldDocURL.
    Make it do so.
    
    Test plan:
    
    1) Enable EnableAdvancedCatalogingEditor
    2) Set MarcFieldDocURL to eg. http://{MARC}.example.com/{LANG}/{FIELD}
    3) Go to Cataloging -> Advanced editor
    4) Go to any field and press Ctrl-H
    5) Marc field documentation on www.loc.gov or ifla.org should open
    6) Apply patch
    7) Repeat 3 and 4. The Marc field docs should open on the URL you set
    
    Signed-off-by: Pasi Kallinen <pasi.kallinen@joensuu.fi>
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6975a6836a21f42675a9394602246891c19d9522
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Sat Jul 14 14:29:53 2018 +0000

    Bug 21078: overdrive.js Catch error if window.opener is not accessible
    
    To Test:
    0 - Enable overdrive search results on your koha
    1 - From a source develop a link to your koha instance that opens a new
    window:
    <a target="_blank"
    href="http://localhost:8080/cgi-bin/koha/opac-search.pl?q=love">Test</a>
    2 - Click that link
    3 - Note Overdrive results do not load
    4 - Note error in JS console
    5 - Apply patch
    6 - Click the link again
    7 - Note OD results load
    8 - Note no error in console
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8df47bdde678773f028f312b4cd8000a12425281
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Aug 11 23:55:35 2018 +0000

    Bug 20241: Fix display of publication year in subscription record search for MARC21
    
    The old problem: UNIMARC uses biblio.publicationyear, MARC21 uses
    biblio.copyrightdate. Patch adds a fallback, if there is nothing
    in publicationyear, copyrightdate will be displayed.
    
    To test:
      - In a MARC21 database
      - Add a new subscription
      - Search for records
      - Verify the publication year column remains empty
      - Apply patch
      - Repeat search
      - Verify that the year now shows
    
    https://bugs.koha-community.org/show_bug.cgi?id=20421
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 024643f51c4e0ca1803dd5013bb857e98cd924e5
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Fri Oct 13 14:07:21 2017 +0300

    Bug 21362: Advanced editor: Fix tab navigation in fixed fields
    
    Also minor tweaks to how the fields look.
    
    Test plan:
    
    1. Try moving from field to field and inside control fields with tab/shift-tab.
    2. Make sure focus doesn't get stuck in any position.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1b56e446ed64cad9d4dd42a8cb3f1953f424e0aa
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Sep 21 17:55:40 2018 -0300

    Bug 21396: Add 2 missing use statements in Koha::Account
    
    1. require C4::Letters must be use C4::Letters (from bug 19191)
    
    2. There is call to C4::Circulation::ReturnLostItem, but no use of
    C4::Circulation (from bug 20631)
    
    Test plan:
    finger crossed, I ran the tests from t/db_dependent/Koha and they all
    passed
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 121b8105bcb00909b1e8081442148c1939c101a6
Author: Jon Knight <J.P.Knight@lboro.ac.uk>
Date:   Mon May 14 15:30:55 2018 +0000

    Bug 16739: Show note instead of 500 error for 'Generate EDIFACT' when no EDI account is configured
    
    When a book seller (vendor) does not have EDI account information configured
    the basketgroup display still shows a button to generate EDIFACT output which
    results in 500 error when clicked.  This patch fixes two aspects of this:
    
    a) it stops the button being displayed in the first place, replacing it with
    a message that explains there is not EDIFACT configuration for the vendor.
    
    b) if, somehow, an edifact print operation is passed to the basketgroup
    script it detects the lack of an EAN and redirects back to the basket group
    display page with a warning message.
    
    To test:
    1) Create a vendor with no EDI details.
    2) Create a basket with some items in, then close it and add it to a basket
       group for this vendor.
       3) Go to that vendor's basket groups, click on the "Closed" tab and then
          click on the 'generate edifact order' button. You should get a 500 error.
       4) Apply this patch.
       5) Repeat 3, except this time you should find that the 'generate edifact
          order' button has been replaced with a note that there is
          "No EDIFACT configuration for <vendor>".
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bf89e4e124fb38982fa8b9708af1fb67fd16f982
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sat Sep 22 11:08:16 2018 -0300

    Bug 21398: Make search field mandatory when adding to a basket from an existing record
    
    Test plan:
    - Create a basket
    - Click the "Add to basket" button
    - Click "Search" on the first line
    => Without this patch you get an ugly screen: https://snag.gy/U8X3ZK.jpg
    => With this patch applied you will not be able to submit without
    filling the input in
    
    QA note: Yes, we could handle that controller side as well, but much
    more work.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 01470fab9eabd3750746b540389de7a6d85fda05
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Sep 25 13:51:02 2018 +0000

    Bug 21407: Can't enter new macros in the advanced cataloging editor (rancor)
    
    This patch upgrades Codemirror to the latest version (5.40.2). Doing so
    fixes a problem with the advanced cataloging editor's macro editor which
    appears in the latest version of Firefox (62): The first line of the
    macro editor is not visible.
    
    To test, apply the patch and clear your browser cache if necessary.
    EnableAdvancedCatalogingEditor must be set to "Enable."
    
    - Go to Cataloging -> Advanced editor.
    - Click the "Macros" toolbar button.
    - In the main part of this modal window you should see a blank line
      marked "1."
    - Click "New macro..."
    - The editor's line 1 should now be editable. Enter text to confirm that
      it works correctly.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 33010595113b5ec279f93b1127d20b466e1ea023
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Sep 14 15:56:44 2018 -0700

    Bug 21297: Display public lists to existing lists when adding a new item
    
    If there are no private lists the public lists are not displayed.
    
    Test plan:
    1) Add 10 public lists (This is when the 'More lists' menu item becomes
    view-able)
    2) Select an item
    3) Click Add to list
    4) Select 'More Lists' menu item
    5) Note that 'Select an existing list' is an available option
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e5750b27d4272cb7f001647090773197c495b918
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 28 19:17:13 2018 +0000

    Bug 16424: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 35863802eab24bd39a75fcba0d16ac59dca6261e
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Sep 27 13:16:09 2018 +0000

    Bug 16424: (QA follow-up) Use Modern::Perl
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2074421ba3a32979d797479cf124ae6bfb333d36
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Fri Nov 10 08:28:01 2017 +0200

    Bug 16424: Update default values in advanced editor when changing frameworks.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b70d2bc281d70aad2dce0c6021b60e4075641e49
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Mon Sep 17 01:06:12 2018 +0300

    Bug 16424: Handle framework code properly also when adding a new record
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 02a0f3185c4aad3c712346e6bcedd0736725f699
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Sun Sep 16 21:39:54 2018 +0300

    Bug 16424: Make the svc/bib service keep the existing framework code
    
    Previously the framework code would have been reset when the record was saved, but that seems to have been a mistake.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 72e2d729f290201b48e09192f0dc4b7fdd26db6b
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Mon Sep 17 00:41:14 2018 +0300

    Bug 16424: Minor CSS change for the advanced editor Settings menu
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 75b5ce2a317dad5307d2490c2d2f16e3e3bc3e29
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Sun Sep 16 21:37:06 2018 +0300

    Bug 16424: Add framework support to advanced MARC editor
    
    Keeps the selected framework, allows selecting another and validates the record using the correct framework. Contains additional minor tweaks to display proper error messages.
    
    To test:
    1. Add a record with a non-default framework in the basic editor.
    2. Switch to advanced editor and make sure the settings menu displays the correct framework.
    3. Save the record and confirm that the framework code did not change.
    4. Change the framework and save the record again.
    5. Verify that the framework code changed.
    6. Change one framework to make an extra field mandatory.
    7. Make sure that the field is required in the editor when the framework above is selected but not when another framework is selected.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d52c88a233680412fb44dea9f6b5e9c29fe43841
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Wed Sep 19 09:34:21 2018 +0100

    Bug 21377: Remove erroneous "html" filter use
    
    The "html" filter that is being applied to these variable declarations
    is inappropriate and has been removed.
    I've also simplified things by removing two of the extraneous variable
    declarations.
    
    To test:
    
    - Before applying the patch, on master, view the "Manage request" page
    for an ILL request
    - TEST: Observe that, apart from the "Edit request" button, the various
    available action buttons do not display correctly
    - Apply the patch
    - TEST: Refresh the page and observe that the buttons now display
    correctly
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit de434c2398aa0629e6a9119cebb353ba517a20b9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Apr 6 12:53:35 2018 +0000

    Bug 20534: Floating toolbar when editing vendors
    
    This patch moves the Save and Cancel controls on the vendor edit form
    into a toolbar which sticks to the top of the screen as you scroll.
    
    To test, apply the patch and Acquisitions -> New vendor.
    
    - Confirm that as you scroll down the page, the toolbar with the Save
      and Cancel buttons sticks to the top of the screen.
    - Test that the Save and Cancel buttons both work correctly.
    - Perform the same tests when editing an existing vendor.
    
    Signed-off-by: Maksim Sen <maksim.sen@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4bbbd083cf4cc73442bc8911d7e7e240e01cc039
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Sep 12 17:43:15 2018 +0000

    Bug 21341: Style button on acquisitions existing record search with Bootstrap
    
    This patch adds Bootstrap button styles to two links: View MARC and
    Order.
    
    Unrelated: A "modal-wide" class has been added to the View MARC modal to
    give more room for the MARC view.
    
    To test, apply the patch and go to Acquisitions -> Vendor -> Basket ->
    Add to basket -> From an existing record.
    
    In the record search results, confirm that the View MARC and Order links
    are now Bootstrap buttons. Test the View MARC button and confirm that
    the modal preview fills most of the screen.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 616ed6013f590024a795847eab6cc317d37050ec
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Sat Sep 15 22:36:40 2018 +0000

    Bug 21333: (follow-up) Make link a button
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 393b2582349b48f67e5693629bb197aa73df31a1
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Sep 11 16:26:04 2018 +0000

    Bug 21333: Add ability to add to basket from a new file
    
    This patch adds a workflow for adding to a basket from a file. It
    removes the need to stage the file before going to the basket and allows
    you to stage the file and return to the basket
    
    To test:
    1 - Have basket in acquissitions
    2 - Click add to basket
    3 - Note new option to 'Add from new file'
    4 - Click it
    5 - You will be sent to the record import tool
    6 - Stage your file
    7 - There is a link after staging 'Add records to basket'
    8 - Click it
    9 - Your items should be added
    
    Signed-off-by: Sonia <sonia.bouis@univ-lyon3.fr>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 172f2e0e05759baa6c60d86acd9981fef499a162
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Fri Mar 2 11:10:12 2018 -0500

    Bug 19620: Allow skipping of patrons with valid emails for Talking Tech
    
    Some libraries want to be able to skip patrons with valid email addresses when generated outbound files for Talking Tech.
    
    Test Plan:
    1) Apply this patch
    2) Run TalkingTech_itiva_outbound.pl
       Overdue will be easiest to use for testing
    3) Note one or more patrons show up that have email addresses
    4) Run again with -s ( or --skip-patrons-with-email )
    5) Note the new file no longer has patrons with emails!
    
    Signed-off-by: Jesse Maseto <jesse@bywatersolution.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    I did not test but changes make sense
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 90ff0f33430bfc643982c883a8f59150dbeffde2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Sep 26 19:00:16 2018 +0000

    Bug 7143: Update about page for new dev - Alberto Martinez
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3ef81d996909d8bd1cd290b6a9c67df8e2c8e2ef
Author: Alberto Martinez <martinez.alberto@icloud.com>
Date:   Sun Sep 16 15:34:37 2018 -0700

    Bug 21350: Added icon to Pending on-site checkouts and moved
    
    When pending on-site checkouts is enabled, it will display checkout items that are being used in the library
    
    test plan:
    1. Go to Koha administration
    2. Search for "onSiteChekouts"
    3. Enable "onSitecheckout"
    4. Save all Circulation preferences
    5. Go back to home page and click "Circulations"
    6. Please confirm there is an icon and the link is below Fast cataloging
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Amended patch: replace tabs with 4 spaces
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 647422883d56d7512053f4d6cdbecc41a3e80586
Author: Victor Grousset <victor.grousset@biblibre.com>
Date:   Tue Jun 12 14:04:37 2018 +0000

    Bug 20915: Use date --iso-8601 instead of date +%Y-%m-%d
    
    In delete_patrons.pl's POD
    To be more readable and crontab friendly
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 100385196ecadb34669190caa241ed73ea2a5a1c
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Thu Apr 26 15:07:07 2018 -0400

    Bug 20669: Add upgrade method to plugins
    
    It would be nice if plugins had an upgrade method to handle altering tables and such when a new version of a plugin is installed. Right now it must be done in a completely bespoke manner.
    
    Test Plan:
    1) Apply this patch
    2) Download the 2 most recent releases of the Kitchen Sink plugin
       https://github.com/bywatersolutions/koha-plugin-kitchen-sink/releases
    3) Install the earlier release
    4) Look at the configuration page, at the bottom it should say the
       plugin has never been upgraded
    5) Install the newer release
    6) Reload the configuration page, it should now say that the plugin
       was upgraded and give you the date and time of the upgrade
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8577d55d4ee867282c37c8b4a5b4e847fc9f17a7
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Thu Sep 20 11:35:11 2018 +0000

    Bug 21380: (QA follow-up) Use uri filter in link parameters
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9037e661b16006181a2661191f25ac09df862b0a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Sep 19 14:48:08 2018 +0000

    Bug 21380: Circulation history UI improvements - make barcode clickable
    
    This patch modifies the patron circulation history template so that the
    barcode of each item links to the item details page.
    
    To test, apply the patch and view the circulation history for a patron
    with multiple current or past checkouts.
    
    In the table of titles, the barcode for each item should correctly link
    to the item details page for that item.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 270a408949e69b97aff87a208a559c4736e20426
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Sep 21 18:35:06 2018 -0300

    Bug 21397: Mark "Routing list" tab as active when selected
    
    /members/routing-lists.pl?borrowernumber=5 show the different tab of the
    menu but "Routing lists" is not displayed as the selected one (active).
    
    "routinglistview" must be set and passed to the template
    
    Test plan:
    Enable the RoutingSerials pref
    and hit /members/routing-lists.pl?borrowernumber=42
    
    The "Routing lists" tab must be selected/active
    
    Followed test plan and tab now shows as active.
    Signed-off-by: Dilan Johnpullé <dilan@calyx.net.au>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b5becc84f5f2e8f82b765b5ebf3f87a84d89cfd8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Sep 26 16:17:06 2018 +0000

    Bug 5458: DBRev 18.06.00.032
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c59ef0452ccbae17de3b839da4fa2c9f7f6b2e6f
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Sep 4 10:40:29 2018 +0200

    Bug 5458: increase ccode column to varchar 80
    
    Koha allows you to define an authorised value having length 80, but then you
    can't use it.
    
    Here is why:
    The SQL field items.ccode is a varchar(10).
    The SQL field authorised_values.authorised_value is a varchar(80).
    Therefore the authorised value is truncated to length 10 in items.ccode and the mapping from authorised value to description string fails in Koha.
    
    This patch increases ccode column to varchar 80, like location.
    
    Test plan :
    1) Dont apply patches
    2) Check there is on item field a subfield with authorised value category CCODE
    3) Check this subfield is linked with database column items.ccode
    4) Create an authorised values in category CCODE with 'DOCUMENTATION'
    5) Edit an item on ccode and choose 'DOCUMENTATION'
    6) Save item
    7) Look at items.ccode in database or export in MARCXML
    8) The value is troncated to 'DOCUMENTAT'
    9) Apply patches and update database with installer/data/mysql/atomicupdate/bug_5458.sql
    10) Repeate step 5 to 7
    11) The value is not truncated 'DOCUMENTATION'
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit eec74a2cd1847a859b4fab37c42882ba192ee560
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 21 11:38:15 2018 +0200

    Bug 20023: (QA follow-up) Tiny simplification
    
    Remove empty emails from the list rightaway.
    Would be tempted to lc the params->{email} at the start btw..
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cc3bc2920744e35256b45b784c9788a64fe6dd04
Author: Philippe Blouin <philippe.blouin@inlibro.com>
Date:   Mon Sep 17 16:34:19 2018 -0400

    Bug 20023: Password recovery using email should be case insensitive
    
    When entering an email to recover the password, a user should not have to know or remember the casing of the given email.
    
    Test
    0) enable OpacResetPassword
    1) On the OPAC, click "Forgot your password"
    2) Enter your email address as in your user account BUT WITH A DIFFERENT CASING
    3) Submit.  This will fail.
    4) Apply the patch, redo with success.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a62742f4260425af8e69a88822b7affc9cc93c68
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 13 12:40:22 2018 -0300

    Bug 21196: Use replacement cost from the item type if not set at item level
    
    When circ rules are set to cap at item replacement cost, calcfine only
    checks the price in the item record, not the default replacement cost by
    item type.
    
    Note: We do not take '0' into account, what if you do not want to set
    a replacement cost for an item? It is how it is done in chargelostitem
    so keeping the existing behaviour, but that may be considered as a bug (?)
    
    Test plan:
    - Set useDefaultReplacementCost to use
    - Set a default replacement cost for a given item type
    - Create an item of that type with a replacementcost=0
    - Create a circ rule for that item type that accrues fines but caps at
    replacement cost
    - check the item out, forcing a due date in the past
    - check that item in
    => Fines should have been generated
    
    Signed-off-by: Caroline Cyr La rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d415e51180cac0152c2ab0f95e846b196883f42e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 13 12:36:41 2018 -0300

    Bug 21196: Add tests
    
    Signed-off-by: Caroline Cyr La rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bf908a5f07ffbd492c42483aace120dae8316048
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sun Sep 16 10:41:49 2018 -0700

    Bug 21353: (follow-up) same check for select/clear all links
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d60b0a2e4d3359c127f1e801db9e35dd217f8790
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sat Sep 15 11:02:05 2018 -0700

    Bug 21353: Display checkboxes to merge patron even if cannot manage lists
    
    When permission 'manage_patron_lists' is off, there is no checkbox on
    /cgi-bin/koha/members/member.pl to merge patrons.
    
    Test plan:
    Remove permission manage_patron_lists
    Add permission edit_borrowers
    Search for patrons
    => Without this patch you will not be able to select patrons to merge
    (checkboxes are not displayed)
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c6a26d2c9e767623c7bc0698297bbc165301e7ed
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Sep 14 16:10:56 2018 -0700

    Bug 21323: Handle multi params in redirect after login
    
    Multi params are not handle correctly after login
    
    Test plan:
    [0] Use staff interface
    [1] Use advance search and tick itemtype more than one checkbox
    [2] Copy result url
    [3] Logout
    [4] Paste url in browser
    [5] Type username and password
    [6] In search result page, results limit description under breadcrumbs
    will show all limits
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fb5b377ffd13d9931e9e159b23ce6f886b06d57f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jun 29 14:26:17 2018 +0000

    Bug 20223: Merge members-menu and circ-menu inc files
    
    This patch removes members-menu.inc and replaces the last functional use
    of it with a call to circ-menu.inc.
    
    An invalid use of members-menu.inc has been removed from member.tt.
    
    To test, apply the patch and open a patron record for editing. The
    sidebar menu should look correct and all sidebar links should work
    correctly.
    
    View the patrons home page and confirm that nothing has broken.
    
    Search the Koha codebase for references to members-menu.inc. There
    should be none.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit db683b285cfb31deb9dbdafbc5a18e0b471ffa65
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 21 09:15:08 2018 +0200

    Bug 21281: (QA follow-up) Introduce _add_backtics
    
    Added a (initially trivial) test in Creators/Lib.t too.
    Sometimes you start something, but you end somewhere else ;)
    
    The test seems a bit slower now (regex, lookahead, etc). But this should
    not hurt label creators in daily use.
    Advantages: code is even more solid, consolidated in one place and can be
    tested on its own.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 78124100ec6708de99bea3e4e181da3897130d0e
Author: Mark Tompsett <mtompset@hotmail.com>
Date:   Wed Sep 5 18:41:32 2018 +0000

    Bug 21281: Correct t/db_dependent/Creators/Lib.t failures
    
    TEST PLAN
    ---------
    1) apply first patch
    2) kshell kohadev
    3) prove -r -v t/db_dependent/Creators/
       -- failures
    4) apply this patch
    5) repeat 2,3
       -- no failures
    6) run koha qa test tools
    
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7de47202f2876892524c8b68de962c0776f32881
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 29 17:05:50 2018 -0300

    Bug 21281: Surround creator_templates.rows with backquotes
    
    'rows' is a reserved word since MariaDB 10.2.4 and MySQL
    https://mariadb.com/kb/en/library/mariadb-1024-release-notes/
    https://dev.mysql.com/doc/refman/8.0/en/keywords.html
    
    Test plan:
    Do not apply this patch and make sure you recreate the reported issue
    Apply this patch and confirm that it is now fixed.
    
    QA will take care for the changes in installer and test files
    
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8fa1bd72debea6e23020a93d5c30dd99d7ed1822
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 21 08:00:20 2018 +0200

    Bug 20819: (Follow-up) Show more clearly that a user gave no consent
    
    See comment60 on Bugzilla.
    Although I intentionally did not want to show date and time of refusal,
    we can obviously add one line saying that we already have a no.
    
    Test plan:
    Login without consent and see no additional line.
    Agree and verify that you see the registered on xxx line.
    Disagree and verify that you now see "You indicated recently...".
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d5063603f213d843d1848b44b6479ad5c1f2c63b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 21 11:39:30 2018 +0000

    Bug 20743: Remove duplicated line 'See your public page'
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 87dc160555ed106fb09e15d5a0eaf1e7313ff77d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 20 13:35:29 2018 +0000

    Bug 20656: (RM follow-up) Add missing filter
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cdfc1c08c96a06d5fe709777374aded10ff4a7ed
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Sun Sep 16 03:50:13 2018 +0000

    Bug 20656: (follow-up) Don't display title for F or FU fines (it is in description)
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4df6a3ef796c6e8dd002c0cc1cd4d4b2d501be34
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 24 20:58:50 2018 +0000

    Bug 20656: Better formatting for print summary
    
    This patch is a slightly edited c&p from boraccount.tt
    
    1 - Manually add a credit with no notes to patron
    2 - Print summary
    3 - Inspect the line
    4 - Note that td has extra newlines and no words
    5 - Apply patch
    6 - Print summary again
    7 - Note better formatting
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0fd329724b58c34d850a5b5f162ad0c0f2428eb4
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 24 20:57:17 2018 +0000

    Bug 20656: Don't print lines that have no balance on print summary
    
    To test:
    1 - Add at least two fines to a patron
    2 - Pay off one of them
    3 - Print summary - all 3 lines show
    4 - Apply patch
    5 - Print summary - only line with balance shows
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 401f19d56fdfa7133ed60661bb2492ddcbcedc30
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 20 13:34:49 2018 +0000

    Bug 20819: (RM follow-up) Add missing filters
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3dda7d6c7fa683f910aeacdf89658af8ee9755cd
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 20 13:02:20 2018 +0000

    Bug 20819: DBRev 18.06.00.031
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f6eb46151626aba7da3490aac726f17d6a19d866
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu May 31 12:29:59 2018 +0200

    Bug 20819: Add consent to self-registration process
    
    We add a section for the GDPR consent in opac-memberentry (only for the
    self-registration). Not when editing personal details.
    
    Test plan:
    [1] Enable selfregistration (with confirm) and GDPR policy.
    [2] Register a new account in OPAC. Verify that the GDPR checkbox is
        required.
    [3] After you submit, you should see a date in borrower_modifications
        field gdpr_proc_consent.
    [4] When you confirm, verify that the consent is visible on your consents.
    [5] Enable selfregistration without confirmation mail. Register again.
    [6] Check your consents tab again.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6f2a0acc2d614e630deabba872a136de6e6aa349
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon May 28 14:59:31 2018 +0200

    Bug 20819: Add check in get_template_and_user to enforce GDPR
    
    If you choose to enforce GDPR policy, a user needs to give consent for
    data processing before he does something else in the OPAC while being
    logged in.
    
    Test plan:
    [1] Set GDPR_Policy to Disabled or Permissive. Usual behavior.
    [2] Set to Enforced. Save a refusal on your consents. Notice that
        you are logged out when saving. When you login again, all OPAC
        requests are redirected to your consents tab.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dac230963dd69fe7a07b13ab69512728fce9f9fd
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon May 28 09:28:50 2018 +0200

    Bug 20819: Add your consents tab to opac-user
    
    This patch adds a consents tab to the OPAC user account menu. We now
    add a GDPR section here, but it is open for future extensions. Think of
    a newsletter checkbox for instance.
    
    Script opac-patron-consent handles the tab. And now only includes some
    GDPR code but is also written for more general use too.
    
    Test plan:
    [1] Set GDPR_Policy pref to Disabled. Verify that OPAC operates as usual.
    [2] Set pref to Permissive. Try to save a consent or a refusal. Note that
        you are not logged out when saving a refusal.
    [3] Set pref to Enforced. Save a refusal. You should be logged out.
        Log in again and verify that the consents tab shows a No.
        Note: a follow-up patch will add further enforcements.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 429ab60a0916ddda87f18f177361011d7cc2705a
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon May 28 13:05:53 2018 +0200

    Bug 20819: Add Koha object classes for patron consents
    
    Introduces Koha::Patron::Consent[s] for new table.
    Adds basic CRUD test.
    
    Test plan:
    Run t/db_dependent/Koha/Patron/Consents.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 177deef3b0ff5ece0f1ad074b9b9adc078048245
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Jun 4 13:11:58 2018 +0200

    Bug 20819: Db rev for new table patron_consent and sysprefs
    
    [1] We add table patron_consent.
    It allows for future extension. We could e.g. save consent for newsletter etc.
    [2] Add one field to borrower_modifications
    Datetime the patron who self-registered, gave consent.
    [3] Syspref PrivacyPolicyURL
    [4] Syspref GDPR_Policy: enforced, permissive or disabled.
    
    Test plan:
    [1] Run the dbrev or do a new install.
    [2] Look at the description of the new prefs in Administration.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6b77697c31e9a23c85dd430d764d92143f850d76
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue Sep 18 20:17:46 2018 +0000

    Bug 21374: Fix self registration verification
    
    Test plan:
    0) Do not apply the patch
    1) Set PatronSelfRegistration  to Allow
    2) Set PatronSelfRegistrationVerifyByEmail to Require
    3) Try to create a account using self registration and verify it (use link
        in e-mail or take the url from table mesage_queue ;)
        The verificatin url return ISE - DBIx::Class::Row::store_column(): No
        such column 'timestamp' on Koha::Schema::Result::Borrower
    4) Apply the patch
    5) Try to acces the verification url again - now it should work
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a299ae3a84795431eaea96152c5347eb5091ba23
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Sep 19 14:35:41 2018 +0000

    Bug 13406: (RM follow-up) Add missing filter
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 361dd4f499468f5cdbd381dfd9f23484f1c71f7a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sun Sep 16 10:15:10 2018 -0700

    Bug 19833: Bibliographic Record => Bibliographic record
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4681e01884f10ab1a6febfa6e888d9ff79939ae5
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Mar 16 14:24:56 2018 +0000

    Bug 19833: (follow-up) Minor corrections
    
    This patch makes minor corrections to lines modified in the previous
    ones.
    
    On the biblio framework page, I have deleted this line because it didn't
    make much sense before or after the change:
    
    "Framework name, then go to MARC biblio to set MARC editor parameters"
    
    In the web services preferences file, I reverted a change to
    "deletedbiblio" because it refers to a table name.
    
    I've also made corrections to instances of "biblio" in the following
    pages, including changing "biblio number" to "biblionumber," since it
    refers to a specific Koha column name.
    
    - MARC detail page
    - Help files:
      - Record matching rule;s
      - Batch item modification
      - MARC modification templates
    - Export data
    - Staged MARC record management
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b9bbc4b32aa01dcac353faf8f6dcea8aad987bc4
Author: Zoe Bennett <zoebennett1308@gmail.com>
Date:   Wed Jan 17 02:57:27 2018 +0000

    Bug 19833: Changing the "biblios"
    
    To Test:
    Check the following files that all the "biblio" or "biblio record" are
    now written in rull as "bibliographic record".
    
    modules/about.tt
    
    Corrected a single capitalization error during signoff
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d5925f34b0028f563e10494dc2280b6c51a74745
Author: Grace Smyth <gracesmythh@gmail.com>
Date:   Wed Jan 17 02:38:38 2018 +0000

    Bug 19833: Changing the "biblios" acqui
    
    To test:
    Check the following files that all all "biblio" or "biblo record" are
    now writen in full as "bibliographic record".
    
    modules/acqui/addorderiso2709.tt:44
    modules/acqui/booksellers.tt:3
    modules/acqui/invoices.tt:3
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a225cd1e0444014731abe974a686ff7b1ce50b12
Author: Zoe Bennett <zoebennett1308@gmail.com>
Date:   Wed Jan 17 02:27:57 2018 +0000

    Bug 19833: Changing the "biblios" - most of reports
    
    To Test:
    Check the following files that all the "biblio" or "biblio record" are
    now written in full as "bibliographic record".
    
    modules/reports/acquisitions_stats.tt
    modules/reports/cash_register_status.tt
    modules/reports/catalogue_stats.tt
    modules/reports/issues_stats.tt
    modules/reports/reserves_stats.tt
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6b8218ee2f6012975be5974a0b2c8e24a39f1a11
Author: Zoe Bennett <zoebennett1308@gmail.com>
Date:   Wed Jan 17 01:55:34 2018 +0000

    Bug 19833: Changing the "biblios" - most of admin
    
    To Test:
    Check the following files that all all "biblio" or "biblo record" are
    now writen in full as "bibliographic record".
    
    modules/admin/authtypes.tt
    modules/admin/biblio_framework.tt
    modules/admin/preferences/authorities.pref
    modules/admin/preferences/cataloguing.pref
    modules/admin/preferences/circulation.pref
    modules/admin/preferences/opac.pref
    modules/admin/preferences/searching.pref
    modules/admin/preferences/serials.pref
    modules/admin/preferences/web_services.pref
    modules/admin/searchengine/elasticsearch/mappings.tt
    
    Corrected a single capitalization error during signoff
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5cf279aea0d2a2037adb26857119ee209825ef70
Author: Charlotte Cordwell <charlotte.cordwell123@gmail.com>
Date:   Tue Jan 16 22:02:20 2018 +0000

    Bug 19833: Kill the "biblios"
    
    1) Check files modules/about.tt, modules/acqui/booksellers.tt and
    modules/acqui/invoices.tt for typos nad check that there are no "biblio"
    and only "biblographic record".
    
    Fixed one capitalization error during signoff.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f35d22ab60b9020f2a4363e0a9afa4e92d065416
Author: Charlotte Cordwell <charlotte.cordwell123@gmail.com>
Date:   Wed Jan 17 01:55:30 2018 +0000

    Bug 19833: Kill all the "bibilos" - final couple
    
    Check the following files to see that all "biblio" or "biblio record"are changed to "bibliograhic records" and there are no typos.
    
    modules/ill/ill-requests.tt
    modules/installer/step3.tt
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8b806227c130e86712e3e5bda61520447c60671d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jul 10 13:48:07 2018 +0000

    Bug 20564: Don't use system to unzip files
    
    To test:
    1 - Setup a zip file for patron images and cover images
    2 - Test each tool
    3 - Get a '500 error' after upload (note images do upload and attach)
    4 - Apply patch
    5 - Restart all the things
    6 - Test agtain, uploads should complete and results display
    
    Signed-off-by: George Williams <george@nekls.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a389c751cb5bd764bf486200a581f731b6d28cc7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Sep 19 13:40:59 2018 +0000

    Bug 7143: Update about page for new dev - Jane Sandberg
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a302fc8d787b970d89fd1a31c36f9f3d881117ab
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Sep 6 13:58:19 2018 +0100

    Bug 7143: Update history to reflect recent point releases
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 65cbeae78c2ec7449efdaf6841826b7a70dac3c9
Author: Jane Sandberg <sandbej@linnbenton.edu>
Date:   Sun Sep 16 22:38:29 2018 +0000

    Bug 13406: (follow-up) Add styling classes to authority MARC detail display
    
    Signed-off-by: Jane Sandberg <sandbej@linnbenton.edu>
    Amended patch: replace tab characters with spaces
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 05e51e9574884f03034633dfef95e7e95ac0224e
Author: Jane Sandberg <sandbej@linnbenton.edu>
Date:   Sun Sep 16 11:59:40 2018 -0700

    Bug 13406: Add styling classes to authority MARC detail display
    
    When viewing authority MARC records in the staff client (detail view), the
    MARC tags were not displaying with the tag_num, tag_desc, tag_ind1,
    tag_ind2, and desc classes, which made it impossible to add styles
    to these specific parts of a MARC tag.  This commit adds these
    styles (which are the same as the classes in the bibliographic
    MARC detail display).
    
    To test:
    1) Open the staff client, then click Authorities.
    2) Search for an authority record.
    3) Click on Details.
    4) Examine some MARC fields.  Note that the entire tag title line
    is in a single <div>.
    5) Apply this commit.
    6) Repeat steps 1-3.
    7) Notice that the tag title line is now separated into several
    spans, each with their own classes.
    
    Signed-off-by: Jane Sandberg <sandbej@linnbenton.edu>
    
    Signed-off-by: Brendan Gallagher <brendan@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 89d140c6a188a8672b2498481da6cb83802a9699
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 24 16:22:20 2018 -0300

    Bug 21257: (bug 13618 follow-up) Handle undef values in JS before escapeHtml call
    
    To test:
    1 - Find an item with no collection or location defined
    2 - Check it out to a patron
    3 - Note you cannot view the checkouts table
    4 - Check the console: TypeError: oObj.collection is null
    5 - Apply patch
    6 - Restart all the things
    7 - Checkouts table should load
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Christopher Brannon <cbrannon@cdalibrary.org>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 52a44a5cabe5d526c4a721828dd4f9cb9a1f2458
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Sun Sep 16 04:20:40 2018 +0000

    Bug 21317: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8f84ef2483cba072373b80c1941de6244f810f2b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Sep 5 14:13:25 2018 +0000

    Bug 21317: Format long lists under Koha Team tab as columns
    
    This patch adds a couple of new CSS classes for formatting content in
    columns: .columns-3 and .columns-4. The four-column class is applied to
    the dev team and contributing companies lists on the about page.
    
    The patch also modifies the style of H3 on this page to improve
    readability.
    
    Unrelated: "Nelsonville Public Library" corrected to "Athens County
    Public Libraries."
    
    To test, apply the patch and regenerate staff client CSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client).
    
    View the various tabs on the about page and confirm that everything
    looks good. Confirm that the dev team and contributing companies lists
    are formatted as columns.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cf5a92461835725fe44bb726c98bcfbf909dfdc8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 3 15:13:57 2018 +0000

    Bug 13692: series link is taking you to just 800a instead of whole 800
    
    This patch modifies the OPAC and staff client's XSL template for the
    detail page so that series links based on a traced 490 tag use both
    author and series title from the 800 tag.
    
    To test you should have multiple titles in the same series with matching
    490 and 800 tags in each record. Apply the patch and restart Plack if
    necessary.
    
    View the detail page for one of the series' titles. The "Series:" link
    should link to a search which uses both series title and author.
    Clicking the link should return the correct results.
    
    Test both the OPAC and staff client.
    
    Signed-off-by: John Sterbenz <jsterben@umich.edu>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 01ea94979681ab89fc17beac2751be1ef4b394e1
Author: Chris Cormack <chris@bigballofwax.co.nz>
Date:   Fri Sep 14 22:48:23 2018 +0000

    Bug 21347: Escaped fields that should be in addorderiso2709
    
    Test plan
    1/ Stage a MARC file (if you have none staged)
    2/ Create a basket in aquisitions
    3/ Add an order via staged file
    4/ Look at the item information tab, notice there is escaped html
    5/ Apply patch
    6/ Refresh page, notice it is fixed
    
    Signed-off-by: Sonia <sonia.bouis@univ-lyon3.fr>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7fa7e34967aa5fd6c48d4733c9ce5768c14cb735
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Sun Sep 16 00:28:30 2018 +0000

    Bug 20217: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8671ea1195c5bc65217017adcedefaf67b774a4e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 10 13:37:49 2018 +0000

    Bug 20217: Make header's catalog search menu into a split button
    
    This patch modifies the markup for the staff client header's catalog
    search menu so that it mimics the behavior of a Bootstrap split button
    (As seen on the cataloging home page's 'New from Z39.50' button).
    
    To test, apply the patch, run 'yarn build' to regenerate the staff
    client's CSS, and clear your browser cache.
    
    - View any page in the staff client.
    - Hover your mouse over the "Search" link in the header. It should
      trigger a hover affect on the adjacent menu link.
    - Clicking the "Search" link should take you directly to the advanced
      search page.
    - Clicking the adjacent menu link should display a menu containing links
      to advanced search and item search.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f0863d814da48d4eb3d511f888359eae4a6c4906
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sun Sep 16 10:25:37 2018 -0700

    Bug 19817: (follow-up) Remove local help files + edit help feature
    
    I have no idea what happened but RM did not rebase that one correctly
    before pushing it ;)
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cabc16495e4f88dd5611987392818bc808ae42d0
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 2 16:08:29 2018 +0000

    Bug 21305: Update two-column templates with Bootstrap grid: Patron clubs
    
    This patch modifies patron clubs templates to use the Bootstrap grid
    instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags in the modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Tools -> Patron clubs
       - View club enrollments
    
    Signed-off-by: Dilan Johnpullé <dilan@calyx.net.au>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3ddacb0defa459f7c1b4214ff43c2d2333a78879
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon May 7 14:45:25 2018 +0000

    Bug 21306: Update two-column templates with Bootstrap grid: Tags
    
    This patch modifies the tags management templates to use the
    Bootstrap grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags and "text/css" attributes from <style> tags in the
    modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Tools -> Tags
       - View list of tags
       - Click tag to view the list of titles tagged with that term
    
    Signed-off-by: Dilan Johnpullé <dilan@calyx.net.au>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d56c19138c36b79ba7d46c0a65c92469bf6fd12c
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Sat Sep 15 16:10:22 2018 -0400

    Bug 21356: Add Missing space in parcel.tt
    
    This patch adds a space between the user's name and 'On:'
    in parcel.tt.
    
    To test:
    
    1) Go to Acquisitions
    2) Search for a vendor
    3) Create a new basket
    4) Add an order to the basket
    5) Close the basket
    6) Receive the order
    7) In the page title 'Receipt summary' notice there is no space
    between the 'Received by' user name and 'On:'
    8) Apply the patch
    9) Refresh the page, there should now be a space
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7a84297ac4b29f4bdaf1bc4d01def71eb924d4fa
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Aug 23 14:44:31 2018 +0000

    Bug 21262: Do not format numbers for editing if too big
    
    This patch copies the code from bug 15770 to the format_for_editing
    sub.
    
    It also corrects schema issue, listing the purpose for two acq columns
    instead of claing unused
    
    To test:
    1 - Edit a fund
    2 - Set warning at amount to: 100000000000000
    3 - Save budget
    4 - Try to edit - internal server error
    5 - Apply patch
    6 - Should be able to edit budget
    7 - Number should appear unformatted
    
    Signed-off-by: Christopher Brannon <cbrannon@cdalibrary.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    2 quick notes:
    1. Code must be moved to a subroutine if reused later
    2. It would have prefered to have the comment of the 2 DB columns on a separate patch
    (even separate bug report). As it's minor and that the patch will certainly backported
    I will not block it.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 60788555b3d79902ccef9f20cf76d4c764efcba0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sun Sep 16 09:49:46 2018 -0700

    Bug 21360: Prevent IssueSlip.t to fail when run at 23:59
    
    Not sure what happened on bug 15029 (Make the IssueSlip tests pass even if
    launched after 23:00) but we should have tested with 23:59, not 23:50...
    
    koha_1       |     # Looks like you planned 3 tests but ran 2.
    koha_1       |
    koha_1       | #   Failed test 'Issue slip'
    koha_1       | #   at t/db_dependent/Members/IssueSlip.t line 294.
    koha_1       | Label not found for "last SKIP" at /usr/share/perl5/Test/More.pm line 1370.
    koha_1       | # Looks like your test exited with 255 just after 1.
    koha_1       | [23:59:10] t/db_dependent/Members/IssueSlip.t
    koha_1       | Dubious, test returned 255 (wstat 65280, 0xff00)
    koha_1       | Failed 3/3 subtests
    
    Test plan:
    0/ Don't apply this patch
    1/ sudo date -s "2018-09-15 23:59:00";prove t/db_dependent/Members/IssueSlip.t
    => You should get the error
    2/ Apply this patch and repeat 1.
    => Tests should pass now!
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2847ac4b4de239a430e6e9d20f6e895435c56d7b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Sat Sep 15 21:52:47 2018 +0000

    Bug 20777: DBRev 18.06.00.030
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2d94834807851c3325f26572c7a228903034741c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 14 09:10:50 2018 -0700

    Bug 20777: (follow-up) Remove 'dispute' reference in /credits endpoint
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b64f1808f1682c5e132e0ddbc19ae5869a55bd99
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu May 17 10:55:26 2018 -0300

    Bug 20777: DBIC update
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f9359675e2f6a8b89ce471ac5f090eef33be3305
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu May 17 10:53:55 2018 -0300

    Bug 20777: Remove unused accountlines.dispute field
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 11e513f83f0c5fdd0d47de14b7c09635faf58ae4
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Sat Sep 15 21:44:05 2018 +0000

    Bug 21288: DBRev 18.06.00.029
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cb406f72b0266c97ac904754cc9637035000f5ca
Author: Pasi Kallinen <pasi.kallinen@joensuu.fi>
Date:   Thu Aug 30 11:29:54 2018 +0300

    Bug 21288: Slowness in acquisition caused by GetInvoices
    
    The SQL query done by GetInvoices is quite slow on our production server,
    taking about a minute.
    
    In the query, there's this join:
    
      LEFT JOIN subscription ON biblio.biblionumber = subscription.biblionumber
    
    but there's no index on subscription.biblionumber. Adding the index speeds
    up the query so it only takes up about 3 seconds.
    
    Signed-off-by: Pasi Kallinen <pasi.kallinen@joensuu.fi>
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a6f8eac4edb6463d8ff16928d6f2cddcf4dfbfc2
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Mon May 14 16:18:29 2018 +0200

    Bug 20765: Fix search for items by acqdate in label batch
    
    In Tools >  Label creator, when creating a batch you can add items using a search.
    
    This search has filters on acquisition date.
    Actually those filters does not work.
    The create a search using CCL syntaxe to query Zebra search engine.
    
    The cause is that operator "ge" or "le" must be before "st-date-normalized" in CCL query.
    Looks like it is because of "st-date-normalized" uses "r=o" in ccl.properties.
    
    Test plan :
    1) Check in advance search you have indexed acquisition date
    2) Go to Tools > Label creator
    3) Click on New > Label batch
    4) Click on Add item(s)
    5) Enter a relevent date in "Added on or after date" and in "Added on or before date"
    6) Click on "Search"
    => SUCCESS: You get results
    7) Apply the patch
    8) Retry the 'Add item(s)' step
    => SUCCESS: Patch doesn't change behaviour for old Zebra
    9) Get rid of the patch on your working branch
    10) Use the latest Zebra:
    - /etc/apt/sources.list.d/indexdata.list:
    deb http://ftp.indexdata.dk/debian jessie main
    - Add the repo key:
      $ wget http://ftp.indexdata.dk/debian/indexdata.asc -O- | sudo apt-key add -
    - Upgrade:
      $ sudo apt update; sudo apt dist-upgrade
      $ sudo koha-rebuild-zebra -f -a -b -v kohadev
      $ restart_all
    11) Retry the 'Add item(s)' step
    => FAIL: No results!
    9) Apply the patch, retry
    => SUCCESS: Search results!
    - Sign off :-D
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    Followed the test plan and it works.
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    It doesn't break with 2.0.59-1 (stretch/jessie), and fixes the problem
    for 2.1.X.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ca887754ead4d6207811d751229c4a4dbcf4af80
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sat Sep 15 11:24:32 2018 -0700

    Bug 21355: Prevent GetDailyQuote.t to fail when run after 23:00
    
    Tests will fail (Jenkins run #554) if run after 23:00
    
     #   Failed test 'Id is correct'
     #   at t/db_dependent/Koha/GetDailyQuote.t line 72.
     #          got: 6
     #     expected: 8
    
     #   Failed test 'Timestamp 2018-09-15 00:44:46 is correct'
     #   at t/db_dependent/Koha/GetDailyQuote.t line 74.
     #          got: '2018-09-14 23:44:46'
     #     expected: '2018-09-15 00:44:46'
     # Looks like you failed 2 tests of 12.
     [23:44:46] t/db_dependent/Koha/GetDailyQuote.t
     Dubious, test returned 2 (wstat 512, 0x200)
    
    Adding only 1 second will hugely reduce the risk of failure here.
    
    It also updates a useless test (column 'quote' does not exist)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Tested:
    - Run:
      $ sudo date -s 2018-09-15T23:10:00
      $ kshell
     k$ prove t/db_dependent/Koha/GetDailyQuote.t
    => FAIL: Tests fail as patch author mentions
    - Apply the patch
     k$ prove t/db_dependent/Koha/GetDailyQuote.t
    => SUCCESS: Tests pass!
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b29c4e2bf9562c47b525b2b0644fb48db7853df2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 14 16:23:58 2018 -0700

    Bug 21233: (follow-up) POD fix
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b612ec7a0de5c77ca29a07728664fbd1d8cb7812
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Sep 11 10:48:15 2018 -0700

    Bug 21334: Add bibliographic content type definitions
    
    This patch adds the following content type definitions, to be used by
    endpoint authors implementing MARC-related endpoints:
    
    --------------------------------------
    | Content-type             | Alias   |
    |--------------------------|---------|
    | application/marcxml+xml  | marcxml |
    | application/marc-in-json | mij     |
    | application/marc         | marc    |
    --------------------------------------
    
    Code using this aliases will use them like this:
    - Suppose you want to output data in MARCXML format:
    
    my $record = cool_method_that_returns_MARC_RECORD();
    return $c->render( status => 200, format => 'marcxml', text => $record->as_xml_record );
    
    Note: 'text' by defaults encodes output as UTF-8. If the encoding is not
    UTF-8 you should encode the data on your own.
    
    To test:
    - Apply this patches
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/REST/V1.t
    => SUCCESS: Test pass!
    - Sign off :-D
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1442499a0b6d6c22c87b7ef9eea4c7cc540e3fce
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Sep 11 10:43:32 2018 -0700

    Bug 21334: Unit tests
    
    This patch adds unit tests for the new content types being added.
    It also adds tests for the 'json' overloading that already takes place
    in V1.pm.
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b0ef7174fe601bbf39408e455365ea563949b4bb
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 14 11:53:37 2018 +0200

    Bug 19179: (QA follow-up) Replace second E-mail
    
    Better write here exactly what we need to type in the pref text box.
    Since E-mail will not work and Email will :)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2d6cf8bd7a0e290c8bb947ed1880f1e906d0e74c
Author: Charlotte Cordwell <charlotte.cordwell123@gmail.com>
Date:   Fri Sep 7 03:35:36 2018 +0000

    Bug 19179: Email option for SMSSendDriver is not documented
    
    'Email' is not documented as a valid setting.
    
    1) Apply patch.
    2) Go to Administration --> search SMSSendDriver
    3) Check if SMSSendDriver has this message is at the end of the box:
       "If you would prefer to receive SMS via E-mail set SMSSendDriver to Email"
    
    Signed-off-by:  Michal Denar <black23@gmail.coml>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 293e84d38dd25ae5bd08c2cdd5ce064f4201a79c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 31 13:51:18 2018 -0300

    Bug 21293: Remove another misplaced html filter on housebound.tt
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c427952783776bd9e6f79ee3860f968bea5b82a9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Aug 30 16:43:09 2018 +0000

    Bug 21293: Display of housebound delivery information broken by Bug 13618
    
    This patch corrects the patron housebound details template. A stray
    "html" filter broke display of delivery information.
    
    To test, apply the patch and enable the HouseboundModule system
    preference.
    
     - Open a patron record and select the "Housebound" tab in the left-hand
       navigation menu.
     - Click "Add a new deliver" and save some delivery details.
     - Upon saving you should be directed back to the housebound details
       page. All the details of the delivery you saved should appear
       correctly.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cf3dbedae75b19ffd649725dddce212b63738582
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 14 12:27:36 2018 -0700

    Bug 21233: (QA follow-up) It is not only trailing whitespace characters
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4e8d22a51bf707d3e160a87a125bd8d8f9eb04e6
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Aug 24 11:06:14 2018 +0200

    Bug 21233: (QA follow-up) We do not like the plural form of whitespace
    
    The word "whitespace" is usually uncountable.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5d2ef635627fd35f721c086e7b6491a7e82b958a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Aug 16 06:54:53 2018 -0300

    Bug 21233: Unit tests
    
    This patch adds tests for the required password-related exceptions. The
    tests verify the stringified version of the exceptions.
    
    To test:
    - Apply this patch
    - Run:
      $ kshell
     k$ prove t/Koha/Exceptions.t
    => FAIL: Exceptions not implemented, tests fail!
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0c4460c2fbb6fb678381921911d9030419cc9700
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Aug 16 06:56:30 2018 -0300

    Bug 21233: Add Koha::Exceptions::Password
    
    This patch adds some exceptions that we need. To test:
    
    - Apply this patch
    - Run:
      $ kshell
     k$ prove t/Koha/Exceptions.t
    => SUCCESS: Tests pass!
    - Sign off! :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5acdbb1d2dcb0bd2719f88aa6905c2cf91fab1db
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 14 17:46:58 2018 +0000

    Bug 19469: DBRev 18.06.028
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 59b78fd095ecf7db88f339cc2f03d923b095130d
Author: Kyle M Hall <kyle@bywatersolutiosn.com>
Date:   Fri Sep 7 14:28:31 2018 -0400

    Bug 19469: (QA follow-up) Disable priority pulldowns when using split holds queue
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b8104d8882790b45c1d3b65386bd37ed1cc671d7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 7 15:02:25 2018 +0000

    Bug 19469: (RM follow-up) Add filters and fix variable name
    
    https://bugs.koha-community.org/show_bug.cgi?id=19469
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5ef7f04f58dd470b85988b866a2e608256904da8
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Apr 27 09:21:28 2018 +0000

    Bug 19469: (QA follow-up) When altering priorities, use the existing priority numbers of the given table
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 765c28c8e3a7e11afac1a061ebd296f18f3ef8a5
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Apr 17 14:29:27 2018 +0000

    Bug 19469: (QA follow-up) Use hold item's itemtype if available, fix priority changing
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fac3944aa1c6c0c43e5ceac77fe1d163b22bf3e2
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Wed Mar 7 07:05:11 2018 -0500

    Bug 19469: Remove use of Dumper on request.tt
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 51a769bb59efe1b4511805734d2ef73b8fbbac81
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 5 16:10:25 2018 -0300

    Bug 19469: (follow-up) Use patron-title.inc as proposed by bug 18403
    
    This patch makes the new template include file use the patron-title.inc
    include to render the patron name.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 42c94d185ab44c075073dd08762c4bb71df77b16
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Sat Sep 30 08:02:57 2017 -0400

    Bug 19469: Add ability to split view of holds view on record by pickup library and/or itemtype
    
    It is possible to set up circulation rules to limit trapping of holds by pickup library and itemtype.
    To make it easier to understand which holds will be trapped in a given circumstance,
    it would be nice if we could optionally group holds by pickup library and/or itemtype.
    
    Test Plan:
    1) Apply this patch set
    2) Run updatedatabase.pl
    3) Enable AllowHoldItemTypeSelection
    4) Pick a record and create holds with various pickup libraries and itemtype combinations
    5) Enable HoldsSplitQueueNumbering
    6) Try the different combinations of HoldsSplitQueue
    7) Ensure the hold "arrows" move the items correctly
       * Up and down arrows should move hold above or below the adjacent hold within a hold fieldset
       * Top and borrom arrows should move hold to the top or bottom within a hold fieldset
    
    Sponsored-by: Stockholm University Library
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Followed test plan, patch worked as described. Also passed QA test tool
    
    Signed-off-by: Alex Buckley <alexbuckley@catalyst.net.nz>
    Signed-off-by: Andreas Hedström Mace <andreas.hedstrom.mace@sub.su.se>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 18d85cc8d72b55880e88c5364a3819965c8a2831
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Sat Sep 30 08:03:30 2017 -0400

    Bug 19469: Clean up template whitespace
    
    Sponsored-by: Stockholm University Library
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Passed QA test tool
    Signed-off-by: Alex Buckley <alexbuckley@catalyst.net.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 83e515820abb6e2fa8ddf30f61b3f4972a48ed10
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jul 27 12:43:50 2018 +0000

    Bug 21127: Remove jqTransform jQuery plugin from the OPAC
    
    This patch removes the jqTransform jQuery plugin from the OPAC. It was
    added for the CCSR theme, which no longer exists.
    
    http://git.koha-community.org/gitweb/?p=koha.git;a=commit;h=c7c2e9efbde273f2b77786316b7502a8847072bd
    
    There will be no visible changes to the OPAC after applying the patch.
    Search the Koha codebase for references to jqTransform and confirm that
    none exist.
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 030047da428521c248868e3ee5d655afd3bed05b
Author: Pasi Kallinen <pasi.kallinen@joensuu.fi>
Date:   Mon Aug 20 07:30:45 2018 +0300

    Bug 21248: Fix COinS carp in MARC details page on unknown record
    
    Looking up a nonexistent record in the MARC details -page causes
    the COinS to carp. The fix is trivial, just move the COinS call
    couple lines, after the record existence check.
    
    TEST PLAN
    ---------
    1) reset_all for kohadevbox
    2) log in to staff client - admin/admin
    3) search catalogue for green
    4) tweak the top URL to have a bad biblionumber (eg. 9999)
    5) cat /var/log/koha/kohadev/plack-err.log
       -- floody! with errors.
    6) echo | sudo tee /var/log/koha/kohadev/plack-err.log
    7) restart_all
    8) repeat steps 2 through 5.
       -- just nice starting messages, not floody.
    9) run koha qa test tools
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bf7082f854a1db9eb5b7eb77e5f450d018d8e07b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 7 09:50:40 2018 +0200

    Bug 13779: (QA follow-up) Correct checkauth call in offline_circ/download.pl
    
    Script offline_circ/download.pl does not use the return values of
    checkauth. So should not assign them to bad chosen variables that do
    not correspond with checkauth but with get_template_and_user.
    
    Test plan:
    Look for $template, $loggedinuser, $cookie, $flags in the code.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 331af8521b5fba4b5553c182888a4017b2ce9c3a
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Jul 19 16:57:22 2018 +1000

    Bug 13779: sessionID declared twice in C4::Auth::checkauth()
    
    The bug is that $sessionID is declared twice in C4::Auth::checkauth().
    At the moment, this doesn't actually create a problem, because no
    one seems to be using the $sessionID which is returned by checkauth(),
    except in the case of opac/external/overdrive/auth.pl which skips
    the second declartion as it doesn't require auth.
    
    This patch removes the redefining of the $sessionID variable.
    
    In terms of testing, try logging in with a username and password
    and see if it works. The only risk this patch would pose is breaking
    auth I would think, since nothing is actually using the return value
    from checkauth() for $sessionID.
    
    NOTE:
    It was initially defined near the top of the function (~line 791).
    I believe the scoping would mean the correct version of $sessionID
    would be used in the latter lines for the unset'ing.
    I have skimmed code to see if the sessionID return value is used.
    I did not test overdrive, as I do not know how. However, this is
    the only area, I think this could possibly break. This change makes
    sense to me.
    
    QA: Please test overdrive.
    opac/external/overdrive/auth.pl only checks if the value is set, so
       this patch might fix/break something there?
    opac/svc/overdrive same kind of check.
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    This is a (tiny) code improvement. Now we consistently return the session
    id that is also stored in the returned cookie. (Which can be an 'anon'
    session.)
    Fact is that Koha almost everywhere ignores the returned session id and
    sometimes gets the session from the cookie (obviously). The session id is
    also passed to the template by get_template_and_user but never used in
    templates.
    As mentioned, the two overdrive scripts are the exception. But since both
    test on both $user && $sessionID, they will not choke on an anynonomous
    session id without userid. So theoretically fine, but not tested.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 68138b225807a857ddbddef7680c43f2b10de87e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 7 11:33:44 2018 +0000

    Bug 21324: Fix column defs and spans
    
    TO test:
    1 - Open a bastket in acquisitions
    2 - Order some items
    3 - Close the basket
    4 - Receive some items
    5 - Note the columns are out of alingment on parcel.pl
    6 - Note a JS error breaking datatable on 'Already received'
    7 - Apply patch
    8 - Things should be better
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 235654a3cfa5b6e323489408ddc7875281bb1f50
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Aug 29 13:46:39 2018 -0300

    Bug 21285: Add missing select2x2.png file
    
    This file is part of the Select2 jquery plugin, but wasn't added when
    the use of the plugin was introduced in Koha.
    
    To test:
    - On a high DPI screen (retina mac?) on Chrome or Safari
    - Edit an item
    => FAIL: dropdowns using Select2 (like 'Shelving location') don't display the icons (down arrow and cross) and a default value is wrongly selected
    => FAIL: the inspector says the requested select2x2.png file returned a 400 error.
    - Apply this patch
    - Reload the edit page
    => SUCCESS: Things display correctly! Dropdowns without selected values
    by default!
    => SUCCESS: No errors fetching select2x2.png
    - Sign off :-D
    
    Signed-off-by: Jesse Maseto <jesse@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3fedae85f25ef5f587d567b51b86aab776d87311
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 23 11:14:47 2018 -0300

    Bug 21116: Add API routes through plugins
    
    This patch adds plugins the capability of injecting new routes on the
    API.
    
    The plugins should provide the following methods to be considered valid API-generating plugins:
    
    - 'api_routes': returning the 'path' component of the OpenAPI specification corresponding to the routes served by the plugin
    - 'api_namespace': it should return a namespace to be used for grouping the endpoints provided by the plugin
    
    otherwise, they will be just skipped.
    
    All plugin-generated routes will be added the 'contrib' namespace, and
    will end up placed inside /contrib/<namespace>, where <namespace> is what the 'api_namespace' returns.
    
    A sample endpoint will be added to the Kitchen Sink plugin, and tests
    are being written.
    
    To test:
    - Apply this patches
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/REST/Plugin/PluginRoutes.t
    => SUCCESS: Tests pass!
    - Install the (latest) KitchenSink plugin
    - Point your browser to the API like this:
      http://koha-intra.myDNSname.org:8081/api/v1/.html
    => SUCCESS: The /contrib/kitchensink/patrons/:patron_id/bother endpoint
    implemented by the plugin has been merged!
    - Sign off! :-D
    
    Signed-off-by: Benjamin Rokseth <benjamin.rokseth@deichman.no>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 46c992948ea28ae2bebc7f9042df6434319b80bf
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Aug 27 16:24:09 2018 -0300

    Bug 21116: Unit tests
    
    This path implements unit tests for the route-from-plugin development.
    It adds the required methods to the Koha::Plugin::Test plugin
    distributed along with the tests. A second plugin implementing invalid
    OpenAPI specs is added (Koha::Plugin::BadAPIRoute).
    
    Edit: I made terminology changes to make it less rude.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit be0a897648e4ae1ebb429d0829c22a8534a81606
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Sep 10 13:45:32 2018 -0700

    Bug 7534: (QA follow-up) Use Koha.Preference template plugin to fetch the pref's value
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a9e859942c8cf8c4de8e872fb3ed79b5f80fa19a
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Sep 7 17:06:38 2018 +0200

    Bug 19550: (QA follow-up) Add missing [% USE %]
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ec463e80aadbf30144d417e123e884726fff77f2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 6 14:34:03 2018 +0000

    Bug 19550: (RM follow-up) Add filters
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d96e2e71b8ac77e09194d02e72d67ec5c03187ec
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Oct 31 12:25:17 2017 +0000

    Bug 19550: Add links to related authorities for UNIMARC
    
    Links exist in search results for MARC21 but not for UNIMARC.
    This patch fixes that.
    
    Test plan:
    1. Create an authority with a field 550 that links to another authority
       e.g. 550 $a Foo $9 42
    2. Reindex this authority
    3. Search for this authority
    4. See that you now have a link "Foo" to authorities/detail.pl?authid=42
       in the summary
    
    Signed-off-by: delaye <stephane.delaye@biblibre.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c66a2894e1857b403a52d8392d46c343be7d0ed8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 7 15:53:24 2018 +0000

    Bug 21235: DBRev 18.06.00.027
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 96a095f4e1d14721ace2198fb369670ce848c9ef
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Sep 7 16:28:22 2018 +0100

    Bug 21235: (QA follow-up) Remove table services_throttle
    
    Add the missing db update to nuke the services throttle from high orbit
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6a2a80988dd121215284c4458438fdb0fe41b86c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 15 12:01:56 2018 -0300

    Bug 21235: Remove table services_throttle
    
    This table was only used by XISBN, this patch remove the table and the
    related code (cronjobs)
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    https://bugs.koha-community.org/show_bug.cgi?id=21235
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 289e96848a2320e5c8c93f46327143a4b73c267f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Sep 6 11:56:41 2018 +0000

    Bug 21319: Remove highlight and tooltip on Koha Team version
    
    This patch modifies the about page to remove a <span> on the Koha
    version number which explained the version numbering change.
    
    To test, apply the patch and view the "Koha team" tab on the about page.
    The "Koha 18.05 release team" header should not have the number
    highlighted.
    
    Signed-off-by: pierre-marc <pierre-marc.thibault@inLibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 418c65d2e28eb6a2c9e3bb56505918434cf5f04c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu May 17 10:33:32 2018 -0300

    Bug 20776: Add Selenium::Remote::Driver to the dependency list
    
    This dependency is missing from the PerlDependencies.pm file.
    This patch adds it.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 80e8c857e31cf14bb760731715a2f854d7c72441
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 7 13:32:31 2018 +0000

    Bug 17530: DBRev 18.06.00.025
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dfadaa45aa8ce226d9ba111ebad6e44271e39e41
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 7 07:50:13 2018 +0200

    Bug 17530: (QA follow-up) Fix caching error
    
    The fourth patch made this change:
    -    $last_article_requestable_guesses->{$key} = $res;
    +    $cache->set_in_cache(GUESSED_ITEMTYPES_KEY, $res);
    
    This removed the category level in the cached hash. Adding it back here.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Tested by verifying cached values, running opac-search with anonymous
    session as well as user context.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d6424c1999d3563c5243185503dd5a9b5b928f8f
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Sep 3 11:49:08 2018 +0200

    Bug 17530: (QA follow-up) Add pref ArticleRequestsLinkControl
    
    As requested by RM on Bugzilla comment53.
    
    This pref allows you to always display the link on search results.
    Which is the previous behavior ;) It will raise false positives, whereas
    the algorithm may result in false positives or negatives (depending on
    default item type and circulation rules).
    
    When upgrading the pref is set to always (current behavior), new installs
    get the new calc value using the algorithm in may_article_request.
    
    Test plan:
    Run t/db_dependent/Koha/IssuingRules/guess_article_requestable_itemtypes.t
    Run t/db_dependent/ArticleRequests.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e85d6e12ea4dccd8fa08ec600864c2f985dcf886
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Jun 4 10:03:40 2018 +0200

    Bug 17530: (QA follow-up) Move may_article_request to ItemType
    
    As requested by QA, we should move may_article_request out of Biblio.
    
    For reasons of performance removed the wrapper layer of may_article_request
    in opac-search. No need to look up all item types. For readability kept
    the routine in the detail scripts.
    
    Note for running ArticleRequests.t: A possible failure on the subtest
    'search_limited' is addressed on bug 20866. So you can ignore that one.
    As long as the subtest for may_article_request passes.
    
    Test plan:
    See previous patches.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8d53a1508d3fb8c6336839995f61036809ffedd2
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu May 31 09:53:00 2018 +0200

    Bug 17530: (QA follow-up) Replace class_or_self variables
    
    See comment23. Requested by QA.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 70c6266081a566149c7b3b49c95958a31417d435
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Mar 15 12:04:30 2018 +0100

    Bug 17530: (QA follow-up) Replace our variable by cached value
    
    Instead of saving the state locally in a variable during Plack lifetime,
    we move the saved hash to the cache. We clear the key when we enter
    smart-rules.pl. This makes a change in circ rules immediately effective.
    
    Test plan:
    Run the modified tests.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b6813142ddedebf96bb6dfa50d5544d42c30e5e1
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Mar 1 15:38:48 2018 +0100

    Bug 17530: Use can_article_request to control sidebar link
    
    Before this patch, the 'Request article' link is displayed whenever the
    pref is enabled. In many cases this might be useless. Instead of a guess
    as in opac-search, we now call can_article_request to know for sure.
    Note: at least this is the case when a user has logged in.
    
    Update sidebar template with template variable artreqpossible.
    Add code in opac-detail, MARCdetail and ISBDdetail to fill it.
    
    Test plan:
    [1] Look for two biblios with items: one that should allow article requests
        and one that should not (respecting branch, patron, item type).
    [2] Verify on detail, ISBD and MARC that the link is displayed for
        the first biblio and hidden for the second biblio.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Brendan Gallagher <brendan@bywatersolutions.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2b0e73b9e1b7f19a55510521a990fa00411157c5
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Mar 1 15:25:44 2018 +0100

    Bug 17530: Use may_article_request method in opac-search
    
    If you enable pref ArticleRequests, until now all search results got the
    'Request article' link. This patch tries to improve the situation by
    using the new sub with the itemtype of the search result.
    
    In most cases the number of links will drastically decrease. It may still
    be possible sometimes that a link is shown while it effectively is not
    possible, but we do not get the performance burden of determining that and
    going through all items.
    
    Test plan:
    [1] Look for two borrowers P1 and P2 within categories C1 resp. C2.
    [2] Look for two biblios B1 and B2 with default item types I1 resp. I2.
        (See 942c in case of MARC21.)
    [3] Make sure that no circ rules allow article requests. Enable the pref.
    [4] Add/modify circ rule category=C1, itemtype=I1, art_req=yes.
        Log out. Search for B1 and B2, verify that only B1 has AR link.
        Log in as P1. Verify that only B1 has AR link.
        Log in as P2. Verify that no biblio has AR link.
    [5] Add/modify circ rule category=C2, itemtype=I2, art_req=item_only.
        Log out. Search for B1 and B2, verify that both have AR links.
        Log in as P1. Verify that only B1 has AR link.
        Log in as P2. Verify that only B2 has AR link.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Brendan Gallagher <brendan@bywatersolutions.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c1d2363063d1c3eb2d37e45c9a3074cea9c783b4
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Mar 1 14:29:01 2018 +0100

    Bug 17530: Add Koha::IssuingRules->guess_article_requestable_itemtypes
    
    This routine looks at the issuingrules and makes a fast 'intelligent
    guess' if article requests may be allowed for item types while
    branch code and patron category may not be available.
    
    We also add Koha::Biblio->may_article_request using the routine based
    on default item type or parameter. Implemented as both class and instance
    method. Added a few tests.
    
    Test plan:
    [1] Run t/db_dependent/Koha/IssuingRules/guess_article_requestable_itemtypes.t
    [2] Run t/db_dependent/ArticleRequests.t to test Koha::Biblio changes.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Brendan Gallagher <brendan@bywatersolutions.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 86bcc81122f20a096f46ac66de3d95ec21dcbd96
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 6 19:04:45 2018 +0000

    Bug 7534: (RM follow-up) Fix TT syntax
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9dbcbe587db1f50594f17f91ab6643acb7bcc3df
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Sep 4 16:11:15 2018 -0300

    Bug 13618: Do not use html filters with KohaSpan
    
    To recreate the issue:
    Go to Home › Administration › Library groups
    Create a new group
     "Group <span class='name'>xxx</span> created."
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4cd57521c43f4e8c5e37ec61e1112ff2b74453ad
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 7 13:09:42 2018 +0000

    Bug 19817: DBRev 18.06.00.025
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5616e22236e8c263da0629a25b3aa7146e19c866
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Aug 13 02:04:29 2018 +0000

    Bug 19817: (QA follow-up) Add German manual and fix system preference help files
    
    - German language manuals were added since this patch was started
    - The structure of the manual was changed slightly, system
      preferences were moved into their own chapter
    
    To test:
    - Test help files display correctly for system preferences display correctly
      Note: Local use uses a different page than the other tabs
    - Test German shows up as option in KohaManualLanguage and links
      correctly
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 87c2755c04c962dab69ac846ecdff0893d35b9df
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 16 11:59:36 2018 -0300

    Bug 19817: Remove numbering from chapter file names
    
    See commit 8ad495abf1e42c5e73c5cb62ec32e1a54d16f8e8
        Remove numbering from chapter file names
    from koha-manual
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6739346e1b8f542f38852f49277ccfb150a5095c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 10 11:07:03 2018 -0300

    Bug 19817: use https instead of http
    
    the https version was not working when I wrote the first patches
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bfbc6cc941632269582891d63c58cea8b4fe668f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Apr 9 11:30:01 2018 -0300

    Bug 19817: Use the language from the interface if valid
    
    Use the UI language for the manual, if exists. Use the pref as a
    fallback.
    
    With the call to get_template_and_user the value of preferred_language
    switched from 'es' (spanish) to 'en' from one click to another (??)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ac07a5074f3a77f1af691af40ce67facdcd43685
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Apr 4 13:35:35 2018 -0300

    Bug 19817: Open the manual in a new window, not a popup
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5496dc7eeaf6ddbe5503dade970e95ed0f283b55
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Apr 4 13:30:04 2018 -0300

    Bug 19817: Add pref KohaManualLanguage
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3bede9a9d79f2999a7176afad38f75ae283b4a5c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Dec 18 18:23:29 2017 -0300

    Bug 19817: Move code to Koha::Manual to make it testable and reusable
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d9a8ac0489d22fe174ea28af7f90f00a7ca15676
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Dec 18 16:21:25 2017 -0300

    Bug 19817: Make the location of the manual configurable - KohaManualBaseURL
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 206ba82a46eff0d3b29ae6ed65bd3f3b0ef8bbde
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Dec 14 15:11:36 2017 -0300

    Bug 19817: Remove local help files + edit help feature
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2e641b698e2c329f36e06cc8969e749bd13dff1a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Dec 14 15:03:44 2017 -0300

    Bug 19817: Redirect to the online manual
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f190ef3f2e7b7a03c3ca10086ed3a923b7c11bdb
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 6 16:52:59 2018 +0000

    Bug 7534: DBRev 18.06.00.024
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit de629e2a28f14cb3d64fd8a767b1bfe30d3d82de
Author: Kyle M Hall <kyle@bywatersolutiosn.com>
Date:   Thu Sep 6 09:50:04 2018 -0400

    Bug 7534: (QA follow-up) Don't do pickup branch checking for determining holdability in the OPAC
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b40070f4ad58f921f6994b304618bb560d471586
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Sat Aug 25 19:06:21 2018 +0000

    Bug 7534: (RM follow-up) Fix tests and adjust after bug 15524
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3afbe3cf5d544572aa2febc1d745fb77c7f305e3
Author: Kyle M Hall <kyle@bywatersolutiosn.com>
Date:   Wed Aug 15 13:51:10 2018 -0400

    Bug 7534: Disambiguate branchcode parameter, make it match between subroutines
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c556ad49b8a3e0d6112ebcc899a09723709e11de
Author: Kyle M Hall <kyle@bywatersolutiosn.com>
Date:   Wed Aug 15 13:46:14 2018 -0400

    Bug 7534: Fix number of tests for Holds.t
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 69316c7b8b937972477ec0a19475f41baf08f6b6
Author: Lari Taskula <lari.taskula@jns.fi>
Date:   Tue Feb 7 17:53:52 2017 +0200

    Bug 7534: Check hold availability to desired pickup location in opac-reserve.pl
    
    To test:
    -1. Have access to your browser's developer tools in order to modify <select>
        dropdown values
    1. Go to cgi-bin/koha/admin/branches.pl
    2. Configure one of your libraries to "Pickup location" => "No". Remember the
       branchcode of this library!
    3. Go place a hold in OPAC
    4. See the provided "Pick up location" list
    5. Observe the library that you configured is not present in the list
    6. You should see another library selected by default. Right click that and
       in Firefox/Chrome click "Inspect element"
    7. You should see a list of <option value="xxxx">blabla</option> elements
    8. Double click between value (xxxx in above example) and replace the value
       with the branchcode you remember from step 2.
    9. Place the hold
    10. Observe that you are taken to cgi-bin/koha/opac-user.pl but your hold
        was not successful.
    11. Go back to place a hold and this time do not modify any values.
    12. Observe that a hold is now placed.
    
    Signed-off-by: Koha Team AMU <axelle.clarisse@univ-amu.fr>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ce411c186dd2a4e35a3b1855b86283522cc7bfd3
Author: Lari Taskula <lari.taskula@jns.fi>
Date:   Tue Feb 7 17:51:18 2017 +0200

    Bug 7534: Validate pickup location in CanBook/ItemBeReserved
    
    This patch adds $branchcode_to parameter to CanBookBeReserved and
    CanItemBeReserved. It represents the pickup location for the hold.
    
    To test:
    1. prove t/db_dependent/Holds.t
    
    Signed-off-by: Koha Team AMU <axelle.clarisse@univ-amu.fr>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 24fc43b9780260069c7aa1a328209f373d57e1bf
Author: Lari Taskula <lari.taskula@jns.fi>
Date:   Tue Mar 7 17:38:28 2017 +0200

    Bug 7534: (QA follow-up) Default pickup location to Yes when adding a new library
    
    To test:
    1. Apply the patches before this one
    2. Go to /cgi-bin/koha/admin/branches.pl
    3. Press New library button
    4. Scroll down the page and observe Pickup location defaults to No
    5. Apply this patch
    6. Go to /cgi-bin/koha/admin/branches.pl
    7. Press New library button
    8. Scroll down the page and observe Pickup location now defaults to Yes
    
    Signed-off-by: Koha Team AMU <axelle.clarisse@univ-amu.fr>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8d404ec2ccbff96f638baf2746010648de3ed007
Author: Lari Taskula <lari.taskula@jns.fi>
Date:   Tue Feb 7 19:42:22 2017 +0200

    Bug 7534: Display pickup locations instead of all libraries in opac-reserve.pl
    
    This patch sets opac-reserve.tt to use the list of pickup libraries instead
    of every library in the system.
    
    To test:
    1. Go to cgi-bin/koha/admin/branches.pl
    2. Configure one of your libraries to "Pickup location" => "No"
    3. Go to OPAC and place a hold
    4. See the provided Pickup location list
    5. Observe the library that you configured is not present in the list
    
    Signed-off-by: Koha Team AMU <axelle.clarisse@univ-amu.fr>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d9ceb30a4d72cbaf387bba2fc550b7bad1609e8f
Author: Lari Taskula <lari.taskula@jns.fi>
Date:   Wed Feb 8 16:45:23 2017 +0200

    Bug 7534: Display pickup locations instead of all libraries in request.pl
    
    This patch sets request.tt to use the list of pickup libraries instead
    of every library in the system.
    
    To test:
    1. Go to cgi-bin/koha/admin/branches.pl
    2. Configure one of your libraries to "Pickup location" => "No"
    3. Go place a hold in intranet
    4. See the provided "Pickup at" list
    5. Observe the library that you configured is not present in the list
    6. Place the hold
    7. See list of existing holds on that biblio
    8. See "Pickup library" column and observe your configured library is
       not included in the list
    
    Signed-off-by: Koha Team AMU <axelle.clarisse@univ-amu.fr>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d2db67fbcbb77629e79d0eafd5c6ad241b5aa8e0
Author: Lari Taskula <lari.taskula@jns.fi>
Date:   Tue Feb 7 19:52:15 2017 +0200

    Bug 7534: Add configuration to admin/branches.pl
    
    This patch adds a configuration option for pickup locations.
    
    To test:
    1. Apply patch
    2. Go to cgi-bin/koha/admin/branches.pl
    3. Observe there is a new column "Pickup location"
    4. Click "Edit" for any library
    5. Scroll to bottom of the page and select "No"
    6. Click "Submit"
    7. Observe your library in Libraries-table, notice the value of "Pickup location"
       has changed to "No"
    
    Signed-off-by: Koha Team AMU <axelle.clarisse@univ-amu.fr>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9a53a7384a60dbd52de7894ac685648a8108c830
Author: Lari Taskula <lari.taskula@jns.fi>
Date:   Tue Feb 7 19:40:38 2017 +0200

    Bug 7534: Use search parameters for Koha::Template::Plugin::Branches->all
    
    This lets us query libraries with additional search parameters and is useful
    for this particular Bug by allowing us to select pickup locations.
    
    Unit tests included.
    
    To test:
    1. prove t/db_dependent/Template/Plugin/Branches.t
    
    Signed-off-by: Koha Team AMU <axelle.clarisse@univ-amu.fr>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bf8834a1e65235c6e174866a25d76bdcd88be988
Author: Lari Taskula <lari.taskula@jns.fi>
Date:   Tue Feb 7 19:02:57 2017 +0200

    Bug 7534: Add new column "pickup_location" to branches
    
    This patch adds a new column "pickup_location" for each library. This value
    defines whether a library can be used as a pickup location or not.
    
    For extended configurability, this flag could perhaps be considered as a part
    of issuing rules, but as of now, this patch only offers a simple flag into
    each library. This method also allows easy way for REST API to determine valid
    pickup locations by querying the /libraries endpoint.
    
    To test:
    1. perl installer/data/mysql/updatedatabase.pl
    2. Observe
    DEV atomic update: bug_7534.perl
    Upgrade to XXX done (Bug 7534 - Let libraries have configuration for pickup locations)
    
    https://bugs.koha-community.org/show_bug.cgi?id=7354
    
    Signed-off-by: Koha Team AMU <axelle.clarisse@univ-amu.fr>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4577ca53c87d047d25182f88ebefed9583f515df
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 6 16:22:24 2018 +0000

    Bug 15287: Add generated CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e0f58070f2634c3a5bf4ffb08c7d29e9183f2919
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 31 14:47:18 2018 +0000

    Bug 15287: (follow-up) QA fix for position of user icon
    
    This patch corrects the CSS for the user icon which appears when the
    browser width is very narrow.
    
    To test, apply the patch, rebuild CSS, and clear your browser cache if
    necessary. View the OPAC with and without a user logged in and confirm
    that the user icon at the top of the page looks correct at narrow
    browser widths.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 60a2589d3cb44bca3ec65cfe4d551a2d4563e020
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 10 16:09:56 2018 +0000

    Bug 15287: Use font-awesome on the OPAC
    
    This patch replaces Bootstrap's glyphicons with Font Awesome icons.
    
    To test, apply the patch and clear your browser cache and regenerate the
    OPAC CSS from the LESS file if necessary. Check these icons and confirm
    they look correct:
    
    - Cart and Lists icons in the OPAC header
    - User icon in the header when the browser window is narrow
    - Languages menu when multiple languages are installed and
      the OpacLangSelectorMode system preference is "top" or "both top and
      footer."
    - Set the  SuspendHoldsOpac system preference to "allow" and log in to
      the OPAC as a user who has one or more holds.
      - Check the appearance of the "suspend" and "resume" buttons both in
        the table of holds and at the bottom.
    - With one or more clubs defined, log in to the OPAC and check the
      "Clubs" tab on the user summary page. The "Enroll" and "Cancel
      enrollment" buttons should look correct.
    - On the "your messaging" tab in the OPAC, the "Digests only"
      information icon should look correct.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2c000059ef4def47b120ddadfeae37f6a50bfa3a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 6 17:26:47 2018 +0000

    Bug 20898: (RM follow-up) Add missing filters
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9900181cd3943e962901df662f71b1dbba33e22b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 6 16:21:47 2018 +0000

    Bug 20898: Add generated CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 662e64f76652cc4b3708fba8a16fa86a28d248ba
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 31 14:09:01 2018 +0000

    Bug 20898: Replace OPAC detail's results browser with non-JavaScript version
    
    This patch moves generation of the OPAC detail page's results browser
    from JavaScript to the template. This makes the template easier to
    understand and easier to debug. It also makes it possible for the widget
    to be completely non-dependent on JavaScript.
    
    To test, apply the patch and regenerate the OPAC CSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client)
    
     - Enable the OpacBrowseResults system preference and perform a search
       in the OPAC which will return multiple results.
     - Click on any title in the first page of search results.
     - On the bibliographic detail page there should be a "Browse results"
       link in the right-hand sidebar just as before.
       - Test that the "Previous," "Back to results," and "Next" links work
         correctly.
       - Click the "Browse results" link. A list of the first 20 search
         results should appear. An arrow should indicate the title you're
         viewing.
       - Click any title in the results browser. The page should correctly
         load that record.
       - Clicking the numbered links at the top of the results browser
         should do the same.
    
    Signed-off-by: Cab Vinton <bibliwho@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 00606e13002f6253c9bb5329a0876d53ac4638b6
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 2 13:12:33 2018 +0000

    Bug 20743: Update two-column templates with Bootstrap grid: Administration part 7
    
    This patch modifies several administration templates to use the
    Bootstrap grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags and "text/css" attributes from <style> tags in the
    modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Navigate directly to /cgi-bin/koha/admin/printers.pl
       - View and edit printers
     - Administration -> Search engine configuration (or navigate directly
       to /cgi-bin/koha/admin/searchengine/elasticsearch/mappings.pl
     - Administration -> Circulation and fines rules
     - Administration -> SMS cellular providers (enable SMSSendDriver or
       navigate directly to /cgi-bin/koha/admin/sms_providers.pl)
     - Administration -> Z39.50/SRU servers -> New SRU server -> Modify SRU
       search fields mapping
     - Administration -> System preferences -> Local use
       - View and edit local use preferences
     - Administration -> Transport cost matrix
     - With  UsageStats enabled, go to Administration -> Share your usage
       statistics.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 135bf128a3f93da8161362ff174cbde32eed214d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 6 16:53:02 2018 +0000

    Bug 20742: (RM follow-up) Fix menu include
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b8c1198a79fbfbbda367accd23ddec27e0e6399d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 2 12:26:43 2018 +0000

    Bug 20742: Update two-column templates with Bootstrap grid: Administration part 6
    
    This patch modifies several administration templates to use the
    Bootstrap grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags and "text/css" attributes from <style> tags in the
    modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Administration -> MARC frameworks -> MARC structure -> Subfields
       - View and edit subfields
     - Administration -> Record matching rules
       - View and edit record matching rules
     - Administration -> OAI sets configuration
       - View and edit OAI sets
         - Define mappings for an OAI set
     - Administration -> Patron attribute types
       - View and edit patron attribute types
     - Administration -> System preferences
     - Administration -> Z39.50/SRU servers
       - View and edit servers
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a344710aed6b9d6b42301b0382e653380935a73f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 6 12:43:06 2018 +0000

    Bug 20741: (RM follow-up) adjust selenium tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1ce0930ed11792c5af55b43b3ff5fe6aef4cf42f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 2 12:11:44 2018 +0000

    Bug 20741: Update two-column templates with Bootstrap grid: Administration part 5
    
    This patch modifies several administration templates to use the
    Bootstrap grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags in the modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Administration -> Keywords to MARC mapping
     - Administration -> Item circulation alerts
     - Administration -> Item types
       - View and edit item types
       - Edit and item type and translate a description
     - Administration -> Koha to MARC mapping
     - Administration -> MARC frameworks -> MARC structure
       - View and edit tags
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f04cd87e671bdcacacb5c98c3f18e0c5da3aa82a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Aug 30 19:43:48 2018 +0000

    Bug 21295: Update selenium tests for admin bootstrap changes
    
    To test:
    1 - Setup and run selenium server as outlined here:
    https://wiki.koha-community.org/wiki/Using_Selenium_with_Koha
    2 - sudo koha-shell kohadev
    3 - prove -v t/db_dependent/selenium/administration_tasks.t
    4 - All should be green
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    All good!
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1ab7d74a15c038446e294452c7889090404f02c6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Aug 31 11:27:13 2018 -0300

    Bug 20944: Fix perlcritic issues
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d19d8ec049271afb5840af15bc9fee9da7ab4e19
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jul 10 14:54:17 2018 -0300

    Bug 20944: Add route to add credits to a patron's account
    
    This patch adds the /patrons/{patron_id}/account/credits endpoint, that
    can be used to add credits to a patron's account. It is implemented so
    the new credits are used to pay existing debts.
    
    To test:
    - Run:
      $ kshell
    k$ prove t/db_dependent/api/v1/patrons_accounts.t
    => SUCCESS: Tests pass!
    - Make your favourite REST testing tool (RESTer on Firefox?) do:
      POST /api/v1/patrons/{patron_id}/account/credits
    {
      "amount": 100
    }
    - Play with other possible attributes on the credit object.
    - Sign off :-D
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 566badf12ae22cf3748db867dd93b67a91088eff
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jul 10 14:53:47 2018 -0300

    Bug 20944: OpenAPI spec for /patrons/{patron_id}/account/credits
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 302dd7bf8233ebf640bfde82fc050f8b08b2757c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Aug 24 10:45:52 2018 -0300

    Bug 21267: Set X-FORWARDED-PROTO https if required
    
    This patch makes the apache configuration for the reverse proxy
    (required for Plack) so it sets the X-FORWARDED-PROTO header correctly
    for Plack::Middleware::ReverseProxy to use it.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Ulrich Kleiber <ulrich.kleiber@bsz-bw.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Since we actually resolve 19799 now (Changing language on OPAC redirects
    back to homepage), I will move that code to a new enh report.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9582d268af324b33bb6ebc9b9665d5bce994101c
Author: Nightly Build Bot <nightly@abunchofthings.net>
Date:   Fri Aug 31 00:25:45 2018 +0200

    Bug 17084: Automatic debian/control updates (unstable/master)
    
    This is a result of Bug 21068: Remove NorwegianPatronDB related code
    
    Signed-off-by: Mirko Tietgen <mirko@abunchofthings.net>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 092d52d5cf34eb061e893f89b7ea3f9168ec4330
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 31 11:58:49 2018 +0000

    Bug 18639: DBRev 18.06.00.023
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c883ffe6b384b3e7c265f2bce92233c21354f44a
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Aug 28 07:55:37 2018 +0000

    Bug 18639: (QA follow-up) Fix formatting of replacement cost when modifying an order
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit eba00a8c6ff447e9701f8d5aeb67ee2a047f796b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Aug 27 18:21:23 2018 +0000

    Bug 18639: Alter DB update to populate replacementprice from rpp initially
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 87fb5d53a150b649022ad0b37e995074ee013a85
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Aug 27 13:33:50 2018 +0000

    Bug 18639: (follow-up) Populate replacement price from list price during ordering
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c9da416690a193d7f36493f69667538aafa8affe
Author: Colin Campbell <colin.campbell@ptfs-europe.com>
Date:   Mon Jun 11 11:44:39 2018 +0100

    Bug 18639: Use replacementprice when creating order from quote
    
    Updates column name from rrp -> replacementprice when creating
    order from EDI QUOTE message
    Also ensure other rrp_tax* fields populated
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 80ae56cb31fbdcceb7f73dbaa8b4856c8548a04d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Dec 29 16:22:08 2017 +0000

    Bug 18639: Unit tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a3e8e12364bf266e230b80bd4389cdc3a403b649
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Dec 29 16:16:23 2017 +0000

    Bug 18639: Add replacementprice field to acquisitions workflow
    
    To test:
     0 - Apply patches and updatedatabase
     1 - Add an order to a basket
     2 - You should note new 'Retail price field'
     3 - You should have a separate 'Replacement price' field
     4 - Enter values and ensure they are saved as expected
     5 - In the basket you should see the replacement price
     6 - Modify order and ensure value is loaded and saved correctly
     7 - Add and cancle an order and esure replacement price shows/saves
     8 - Close basket
     9 - Receive an order
    10 - You should be able to edit replacement price
    11 - 'retail price' field is not editable
    12 - Check associated item, replacement price in item should be updated
    13 - Cancel receipt, check item. receive again with new replacement
    price, check item
    14 - Price should be correctly updated
    15 - Finish receipt, value should show in table
    16 - Test with receive from file
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 26976dfba92caec0e261630a46f9a5d68b34ccbc
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Dec 29 16:14:07 2017 +0000

    Bug 18639: Add replacementprice field to aqorders
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 87d7ce88f6a0437be360690f6d18915e57add3c6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Aug 24 15:45:16 2018 -0300

    Bug 14302: (follow-up) Remove traces in C4::Search and C4::Context
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8f4c686e7cb4d7a9825963e480b44b9323967343
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Aug 24 15:15:30 2018 -0300

    Bug 14302: (follow-up) Remove traces in koha-create
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 02222d2e9b538358ec59a8f6d4d0679992743782
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Aug 24 14:55:07 2018 -0300

    Bug 14302: (QA follow-up) Remove remaining file
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 699e40250f498c45d3a72501121630358af77924
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Feb 20 16:02:19 2017 +0000

    Bug 14302: Remove grs1 records from test data
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bee097b39b4f87d7708cbc7bebc46902705f2f64
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Feb 20 15:54:59 2017 +0000

    Bug 14302: Remove GRS1 specific code
    
    Remove:
    - BIB_INDEX_MODE and AUTH_INDEX_MODE env var
    - bib_index_mode and auth_index_mode options from scripts
    - Warnings from about page, just kept one if zebra_bib_index_mode or
    zebra_auth_index_mode still exist in config and are set to grs1
    
    Test plan:
    - Install Koha from src
    - Install Koha from pkg
    - Read the code, carefully!
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Rebased
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cc87e0a4583148c13e74376b9ca327cb909414ad
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Feb 20 16:54:34 2017 +0100

    Bug 14302: Remove GRS1 related files
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5cc4865eefc4d70293da63a6d7049566106a21ef
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue May 1 15:49:26 2018 +0000

    Bug 20690: Update two-column templates with Bootstrap grid: Acquisitions part 4
    
    This patch modifies several acquisitions templates to use the Bootstrap
    grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags and "text/css" attributes from <style> tags in the
    modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
    - Acquisitions home page -> Click a "spent" value for a fund.
    - Acquisitions -> Vendor -> Vendor details.
    - Acquisitions -> Vendor -> Uncertain prices
    - Acquisitions -> Vendor -> Receive shipments
      - Click an "Invoice number" link in the table of shipments.
        - Click "Receive" for one of the titles in pending orders.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4f252d611d4996c5b80b222e30a52a7dd02f70c7
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue May 1 15:47:24 2018 +0000

    Bug 20672: Update two-column templates with Bootstrap grid: Acquisitions part 3
    
    This patch modifies several acquisitions templates to use the Bootstrap
    grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags in the modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
    - Acquisitions -> Vendor -> Add to basket -> From an existing record ->
      Search results.
      - Order
    - Acquisitions -> Vendor -> Add to basket -> From a subscription
    - Acquisitions -> Vendor -> Add to basket -> From a suggestion
    - Acquisitions -> Vendor -> Add to basket -> From an external source
      - Search for an title which already exists in your catalog
      - Select a search result which has an ISBN matching the title in your
        catalog.
      - Order. The duplicate warning page is the one modified.
    - Acquisitions home page -> Click an "Ordered" value for a fund.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 604cc208b5cbb82020d874b0faa861b2cf6e3329
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 6 16:40:59 2018 -0300

    Bug 21201: Remove GetItemnumbersForBiblio
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 02633edc7de5f92d1fd69747b1fbe9ae9b38b891
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 6 16:40:44 2018 -0300

    Bug 21201: Replace C4::Items::GetItemnumbersForBiblio calls
    
    Those calls to C4::Items::GetItemnumbersForBiblio can be replaced with
        my @itemnumbers = Koha::Items->search({ biblionumber => $biblionumber})->get_column("itemnumber")
    
    Test plan:
    - Use the GetAvailability service of ILS-DI
    - Try to place a hold on an item that is available and another one
    - Use the batch record deletion tool to remove record with and without items.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a42af283176f652a330db54711c64b97ad8faefc
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Fri Aug 17 05:26:57 2018 +0000

    Bug 21184: (follow-up) Fix adding barcode to waiting hold item in SIP
    
    Test plan:
    1) Set up your SIP: https://wiki.koha-community.org/wiki/Koha_SIP2_server_setup
    2) Run:
    misc/sip_cli_emulator.pl -a localhost -p 6001 -su <login> -sp <passsword> -l <library_code> --patron <borrowernumber> -s "Y         " -m patron_information
    
    the -s parameter says what kind of additional information you want to see
    
    3) Check the response: if the requested patron has waiting hold, there
    is field "AS" with the barcode of waiting item
    
    The right response looks like this:
    64              00120180817
    052434000100000000000000000000AOCPL|AA1|AEKoha Admin|BLY|CC5|AS39999000004410|PCS|PIY|AFGreetings from Koha. |
    
    More reading ;)
    http://multimedia.3m.com/mws/media/355361O/sip2-protocol.pdf
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ff1557fef4fe8d8b458151c1c55a3d23d957b91a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 6 15:59:52 2018 -0300

    Bug 21184: Remove GetBarcodeFromItemnumber
    
    Test plan:
      git grep GetBarcodeFromItemnumber
    should not return anything
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 62a075987af70ec5ed3665fe662adb31a17fdde4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 6 15:59:38 2018 -0300

    Bug 21184: Replace C4::Items::GetBarcodeFromItemnumber calls
    
    Those calls to C4::Items::GetBarcodeFromItemnumber can be replaced with
        my $barcode = Koha::Items->find($itemnumber)->barcode;
    But if we are not sure that the item exists, we should test the return
    of ->find before ->barcode
    
    Test plan:
    - Edit an item
    - Check an item in
    
    - Test SIP - I do not really know how to trigger that code, apparently
    misc/sip_cli_emulator.pl does not deal with holds. Any ideas?
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5d6efd4847cfb81ef9752f58e95ed761b50d13b4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 6 17:56:38 2018 -0300

    Bug 21202: Replace C4::Items::GetItemsByBiblioitemnumber calls
    
    http://lists.koha-community.org/pipermail/koha-devel/2018-August/044757.html
    
    Prior to this patch, GetRecords returned timestampX, cardX and borrowerX for
    the last 3 patrons who checked out the items.
    
    I have no idea if it is a desired effects but, as this code has been
    there for a very long time (2005), I suspect it's not.
    The "doc" (/ilsdi.pl?service=Describe&verb=GetRecords) does not say
    anything about the checkouts info.
    
    Test plan:
    hit /ilsdi.pl?service=GetRecords&id=1
    and confirm the info about items are displayed correctly
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c713e06e700e330db569b518bc426501d155e973
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Aug 30 20:13:37 2018 +0000

    Bug 19383: DBRev 18.06.00.022
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4765db2527059fa80a2e4471faab18f4f6968e0f
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Aug 22 20:49:52 2018 +0200

    Bug 19383: (QA follow-up) Remove unused name variable
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f7fe10c6ff15fb9d980762d5082561ece882421c
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu May 3 08:23:13 2018 -0400

    Bug 19383: Add ability to print hold receipts automatically
    
    Some libraries don't wish to require librarians to confirm each hold during checkin. Instead they would like to only be alerted that a hold was filled.
    
    Test Plan:
    1) Apply this patch
    2) Run updatedatabase.pl
    3) Enable the new syspref HoldsAutoFill
    4) Check in an item that should be trapped for a hold
    5) Note that instead of the modal asking if the hold should be filled,
       instead you get a message box showing the hold was filled, along
       with a button to print the hold slip.
    6) Enable the new syspref HoldsAutoFillPrintSlip
    7) Repeat step 4
    8) Note the same behavior, but this time the print dialog displays
       automatically
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4a2bdc80ab1f73315adddf8d24a84c5ec4a82dfe
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Aug 30 16:10:09 2018 +0000

    Bug 21068: (RM follow-up) Schema updates
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 34827d660cc018e68e09bed16170fbd0abf941cd
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Aug 30 13:40:18 2018 +0000

    Bug 20366: (RM follow-up) Fix typo 'hrml'
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4dec4be0994bb8fd41014c43ce3ae510ece0d37e
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Thu Aug 2 13:15:16 2018 +0000

    Bug 20366: (follow-up) Fix link to subscription
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 43326754b110c62fbb2909eea1595656833f8c02
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 8 13:31:55 2018 -0300

    Bug 20366: Add subscription info to the acq tab on the biblio detail page
    
    On the "Acquisition details" tab of the bibliographic detail page, the
    subscription information are missing.
    This patch replace the call to GetHistory with Koha::Acquisition::Orders
    in order to simplify the code and make use of new Koha::
    packages/methods.
    
    TODO: Add column settings (show/hide columns) to this table (?)
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c267716e6bdbe6858a78380b49cccf5f81e1ed4c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 8 13:32:47 2018 -0300

    Bug 20366: Add new method Koha::Acquisition::Basket->basket_group
    
    Can be moved to a separate bug report.
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7b114c51eb971010ddb20e492e74090b19a24be4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 8 13:30:44 2018 -0300

    Bug 20366: Add new method Koha::Acquisition::Order->subscription
    
    Can be moved to a separate bug report.
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ff16c7d662252162d0f2cd51cfd4c01bd495b8b5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 28 12:53:42 2018 -0300

    Bug 20365: Allow several orders on the same subscriptions
    
    Do we really need this limitation?
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a51681fc7a36b6e6bbf7991876c579a1a1f98b1d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Aug 30 13:46:06 2018 +0000

    Bug 20726: (RM follow-up) Add missing filters
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0757736eaf3bda30042aef5247b3b01a9a3b25bd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 4 17:11:46 2018 -0300

    Bug 20726: Add title to the price column headers
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cd43cf715bdb4e55baf9d5cd1114eec47b0eaeca
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 29 17:10:58 2018 -0300

    Bug 20726: Sort by statuses then ordernumbers
    
    Not received and most recent at the top.
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8302af7b017b7554ef1ceb27966e4c1e39fdfc18
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 29 16:59:05 2018 -0300

    Bug 20726: Add show/hide already received orders links
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f191e2ad678cf660980d0f8619e7e5a91aebf600
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 7 20:07:28 2018 -0300

    Bug 20726: Add DataTables
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 284cf15a255c30fb2a1f6ce0ddbcb5a5ebb6bc80
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 7 20:00:25 2018 -0300

    Bug 20726: Add acquisition history on the subscription detail page
    
    Since bug 20365 is going to add the ability to create several pending orders on
    the same subscription we should display the history of the acquisitions on the
    subscription detail page.
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1756b874a3d0d921ea9e733849e3783a7b172e23
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 7 19:46:05 2018 -0300

    Bug 20726: Add new method Acquisition::Order->invoice
    
    Can be moved to a separate bug report.
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit aa97f13411576d651b1ee95a94da1ca644a24bde
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 7 19:29:19 2018 -0300

    Bug 20726: Add new method Koha::Acquisition::Order->fund
    
    Can be moved to a separate bug report.
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3795141f54991e0a4c95629754ac2759330ed2e6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 6 19:42:20 2018 -0300

    Bug 21207: Remove unused RM C4::Overdues::GetItems sub
    
    Test plan:
      git grep GetItems
      | grep -v GetItemsInCollection
      | grep -v GetItemsForInventory
      | grep -v GetItemsInfo
      | grep -v GetItemsLocationInfo
      | grep -v GetItemsAvailable
      | grep -v GetItemsByBiblioitemnumber
    
    should not return any occurrences of code in perl scripts
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 63ab5dd3e9f6a1ef14e165260eafe0303d0bb735
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Aug 30 13:21:35 2018 +0000

    Bug 21157: Compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 20abe30c7bda8bb9133174132396a7dd958f6845
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Aug 13 14:07:46 2018 +0000

    Bug 21157: Improve style of OPAC login modal
    
    This patch revises the style of the OPAC's login form modal view. The
    goal is simply to make it look nicer.
    
    To test, apply the patch and regenerate the OPAC's CSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client).
    
    In the OPAC, click the "Log in to your account" link at the top of the
    page. It should trigger the login modal. While the modal is displayed,
    resize the browser width to confirm that the form handles different
    widths well.
    
    Sign off if you think this is an improvement.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f36ce76ea8c4c207ea3f9bb215316c196c3b0c6f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 29 14:38:56 2018 -0300

    Bug 13618: (follow-up) Add html filters to all the variables
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 592905a4d2d41a1a7b757c48fbac8fc6f025bf9b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 15 14:21:47 2018 -0300

    Bug 21139: (follow-up) Floating toolbars - Remove unecessary height
    
    Found where QAing bug 20935, we actually want the hidden toolbar to be
    the exact same height as the visible one.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ec257ca25baf19e3895abb2c4061af7592a2b9b4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 16 12:12:11 2018 -0300

    Bug 21183: Fix ->get_column call context
    
    I am not sure to understand what's going on here.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2b1b168ec470da576c0a6c4aa8d458235a76018e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 6 15:53:33 2018 -0300

    Bug 21183: Replace C4::Items::GetItemnumberFromBarcode calls
    
    C4::Items::GetItemnumberFromBarcode calls can be replaced with
      Koha::Items->find({ barcode => $barcode });
    
    We should make sure the barcode existed in DB and so that ->find
    returns an object. Note that most of the time we just wanted to know if
    the barcode existed.
    The changes are very simple, the only one that need attention is
    the one in batchMod.pl. It is basically reusing what we did on
    bug 21141.
    
    Test plan:
    Use the batch item modification/deletion tools to modify/delete items
    from their barcode (using the textarea or a file)
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f52ba648e2c64293966eca820326e33873c54343
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 6 15:53:54 2018 -0300

    Bug 21183: Remove GetItemnumberFromBarcode
    
    Test plan:
      git grep GetItemnumberFromBarcode
    should not return anything
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ac93446a89f76fca2db90137885a72c918066d5a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri May 4 15:18:59 2018 +0000

    Bug 20740: Update two-column templates with Bootstrap grid, Administration part 4
    
    This patch modifies several administration templates to use the
    Bootstrap grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags in the modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Administration -> Currencies and exchange rates
       - View and edit currencies
     - Administration -> Did you mean?
     - Administration -> EDI accounts
       - View and edit accounts
     - Administration -> Library EANs
       - View and edit EANs
     - Administration -> Item search fields
       - View and edit item search fields
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 80ff78413e8de325ec49eb0edd88cfaaf3b4f50b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue May 1 18:46:33 2018 +0000

    Bug 20739: Update two-column templates with Bootstrap grid, Administration part 3
    
    This patch modifies several acquisitions templates to use the Bootstrap
    grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags in the modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Administration -> Columns settings
     - Administration -> Patron categories
       - View and edit patron categories
     - Administration -> Cities and towns
       - View and edit cities
     - Administration -> Classification sources
       - View and edit classification sources
     - Administration -> MARC bibliographic framework test
    
    I'm not sure if this standalone interface is actually in use, but you
    can navigate directly to /cgi-bin/koha/admin/clone-rules.pl to see a
    form which is usually submitted from the circulation and fines rules
    interface. View the page to confirm it looks correct.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit aba0c1ddc7b86104ebc8187e57329e43d2a0ea9f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue May 1 18:31:00 2018 +0000

    Bug 20738: Update two-column templates with Bootstrap grid, Administration part 2
    
    This patch modifies several acquisitions templates to use the Bootstrap
    grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags in the modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Administration -> Authority types
       - View list of and edit authority types
         -> MARC tag structure for an authority type
            - View list of and edit tags
              -> Subfields
                 - View list of and edit subfields
     - Administration -> MARC bibliographic framework
       - View list of and edit frameworks
     - Administration -> Libraries
       - View and edit libraries
     - Administration -> Library transfer limits
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d8ee32e706b1d59d091b03f5728a96f4bf2b413a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue May 1 17:39:51 2018 +0000

    Bug 20736: Update two-column templates with Bootstrap grid, Administration part 1
    
    This patch modifies several acquisitions templates to use the Bootstrap
    grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags in the modified templates.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
     - Administration -> Budgets
       - View budgets list, view and edit budgets
       - View budget -> Planning -> Plan by months
     - Administration -> Funds
       - View funds list, view and edit funds
     - Acquisitions -> Vendor -> Contracts
       - View contracts list, view and edit contracts
     - Administration -> Audio alerts
     - Administration -> Authorized values
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 38428fd71e76fdd7c9a452bc831affa03918994c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 15 15:17:57 2018 -0300

    Bug 19991: Remove warning from opac-user
    
    Use of uninitialized value in split at
    /home/vagrant/kohaclone/opac/opac-user.pl line 78.
    
    Use of uninitialized value $search_query in string ne at
    /home/vagrant/kohaclone/opac/opac-user.pl line 367.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 59d436ee6023985a299f568fab9fd896492b207a
Author: Charlotte Cordwell <charlotte.cordwell123@gmail.com>
Date:   Wed Jan 17 20:46:59 2018 +0000

    Bug 19991: use Modern::Perl in OPAC perl scripts
    
    Test Case:
    Check the following files have been updated from
    use strict;
    use warnings;
    to
    use Modern::Perl;
    
    errors/400.pl
    errors/401.pl
    errors/402.pl
    errors/403.pl
    errors/404.pl
    errors/500.pl
    opac-account-pay-paypal-return.pl
    opac-alert-subscribe.pl
    opac-authorities-home.pl
    opac-authoritiesdetail.pl
    opac-browser.pl
    opac-ics.pl
    opac-image.pl
    opac-imageviewer.pl
    opac-messaging.pl
    opac-modrequest-suspend.pl
    opac-modrequest.pl
    opac-mymessages.pl
    opac-overdrive-search.pl
    opac-passwd.pl
    opac-patron-image.pl
    opac-privacy.pl
    opac-ratings-ajax.pl
    opac-ratings.pl
    opac-readingrecord.pl
    opac-renew.pl
    opac-sendshelf.pl
    opac-serial-issues.pl
    opac-showreviews.pl
    opac-suggestions.pl
    opac-tags_subject.pl
    opac-topissues.pl
    opac-user.pl
    sco/help.pl
    sco/printslip.pl
    sco/sco-patron-image.pl
    svc/overdrive_proxy
    svc/suggestion
    unapi
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit be691d86e35acebace0f1576ea9380f405dd55ce
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 25 12:25:58 2018 -0300

    Bug 21096: Do not display loggedinusername in template
    
    This patch is a little fix for a much bigger hidden issues.
    
    The original issue:
    1. Set the firstname and surname values of a paontr to utf-8 characters
    ("wide characters"), for instance 月月
    2. Use this patron to login at the staff interface
    => In the header the logged in patron's info (concat of firstname and
    surname) are displayed correctly
    3. Hit whatever link
    => In the header the info are now displayed incorrectly
    ("ææ")
    
    What happens?
    After that the user loggin, loggedinusername is set with the value from
    the DB (borrowers.userid)
    On next hits it is picked from the session (which contains the decoded
    utf8 value, see first lines of C4::Context->set_userenv)
    From C4::Auth::checkauth:
    834             $s_userid = $session->param('id') // ''
    
    The quick fix is to use the logged_in_user variable in the template, but
    it seems that issues may occurred if external authentication is used
    (ldap, shib, cas). Could someone test this?
    
    Test plan:
    Make sure the original issue is fixed
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 823c76cdc58b7b80b365a4f313fed3462f0df720
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 10 17:02:38 2018 -0300

    Bug 21168: Handle deleted checked-in items on checking in
    
    circ/returns.pl generates a server error when attempting to checkin an item while
    the list of previously-returned items contains an item that has been deleted.
    Error text: Can't call method "biblio" on an undefined value at /usr/share/koha/intranet/cgi-bin/circ/returns.pl line 606.
    
    Test plan:
    - checkout two items
    - checkin item1
    - on a separate tab, delete item1
    - on the original tab (which still shows item1 in the list of Checked-In Items), attempt to check in item2
    => No error appears
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ca2430480eaa4338b3e4aed766589b1406565d69
Author: Kyle M Hall <kyle@bywatersolutiosn.com>
Date:   Thu Aug 16 07:11:17 2018 -0400

    Bug 21231: BlockReturnofLostItems does not prevent lost items being found
    
    When the syspref BlockReturnOfLostItems is set to Block, the item is blocked from being returned, but is still considered found -- it's set to lost=0 and a refund is applied to the patron (if circ rules allow). The item can then be checked in a second time and returned as it is no longer lost.
    
    Test Plan:
    1) Set an item to lost
    2) Set BlockReturnOfLostItems to Block
    3) Check the lost item in
    4) Checkin  message should say item is lost and cannot be returned
    5) Check lost status of item, it should remain unchanged
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 44d7063209137696d0c844ff82880a973029e534
Author: Kyle M Hall <kyle@bywatersolutiosn.com>
Date:   Thu Aug 16 07:10:43 2018 -0400

    Bug 21231: Add Unit Test
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3f01c8630aeead13ccd054de2eeca7b4eb3c221e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Aug 30 10:59:58 2018 +0000

    Bug 21068: DBRev 18.06.00.021
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7ae0dfa076996cef5644ef8a9a28cb613fc625c2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 24 17:00:31 2018 -0300

    Bug 21068: Remove table borrower_sync if needed
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f0652790df8d711dc69c35be5be97761538ccd1e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 15 12:49:02 2018 -0300

    Bug 21068: DB changes
    
    The update DB entry will not remove the prefs if NorwegianPatronDBEnable
    is set.
    This patch could be reverted locally by people using it.
    
    Signed-off-by: Benjamin Rokseth <benjamin.rokseth@deichman.no>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7c05f4fbe41800a9be4b6d4bdc8d7c7ddeb69ef9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 13 13:49:56 2018 -0300

    Bug 21068: Remove NorwegianPatronDB related code
    
    Bug 11401 introduced code to support Norwegian national library card.
    This code is too specific to be part of Koha as it, it should be a
    plugin instead.
    Moreover nobody uses it, but a modified version (see comment 3).
    
    Test plan:
    Add/edit/delete patron and make sure there are no regressions introduced
    by these patches
    
    Signed-off-by: Benjamin Rokseth <benjamin.rokseth@deichman.no>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 82ec02b53883e2d3e815a77b17d2078931abbb29
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Aug 13 09:54:44 2018 +0100

    Bug 21199: (QA follow-up) Add show_attributes to perldoc
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a3848cb7023946aa6aaa23aae4067f44e3ba4fef
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 9 19:34:58 2018 -0300

    Bug 21199: Hide patron's attributes from ILSDI if required
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 898cd1d91f54735263d696118e1191e46a73b1c5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 24 19:15:18 2018 -0300

    Bug 13618: (follow-up) Manually replace missing .raw
    
    Must be |$raw, not |raw
    
    Error:
    Template process failed: undef error - raw: filter not found at
    /home/vagrant/kohaclone/C4/Templates.pm line 122
    
    To recreate:
    Add a new restriction and visit circulation.pl?borrowernumber=42
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f15e9bfd14183b6bc9f689e375a10bdb304316e3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Sat Aug 25 15:16:47 2018 +0000

    Bug 15524: (RM follow-up) Update schema files
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e001070ee588fa1152b0300641165d772380cd0e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 24 16:03:50 2018 +0000

    Bug 15524: DBRev 18.06.00.020
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5bdf9acf67b5a0ee6c47b047ed722ccab0b3feab
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 24 15:10:45 2018 +0000

    Bug 15524: (RM follow-up) Fix calls and add filter
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5f485e476b2c5521d59bda6d48b56ed36cff3f86
Author: Kyle M Hall <kyle@bywatersolutiosn.com>
Date:   Fri Aug 10 10:36:36 2018 -0400

    Bug 15524: (QA follow-up) Change Can[Book|Item]BeReserved to return hashref, pass limit to template
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 27b2b0bb95053e8a4a5a1a0e7eb3ba2f2c7f9dce
Author: Kyle M Hall <kyle@bywatersolutiosn.com>
Date:   Fri Aug 10 10:36:53 2018 -0400

    Bug 15524: (QA follow-up) Respect ReservesControlBranch
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4eea3585b1e6a183e3fdcd6d163060813356c130
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 16 12:12:12 2018 +0100

    Bug 15524: (QA follow-up) Pass max_holds at the right position in update
    
    When updating max_holds should be before the categorycode in the update
    query.
    Things that can be found by testing :)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 038e86a3951b701619c0b5e338d684c93b2bba5f
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 16 09:02:39 2018 +0100

    Bug 15524: (QA follow-up) Fix meaningless test
    
    The last test claims to allow a hold when branch=5 and patron=5, but look
    at the preceding statements:
        $rule_branch->max_holds(5);
        $rule_branch->update();
        $rule_branch->max_holds(5);
        $rule_branch->insert();
    The last insert will not be done, since the record is already present.
    A create should have triggered an error on the primary key.
    Obviously, we should use $rule_all.
    
    Test plan:
    Run the test again.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cb04cc6242222342c6149b0e6dd866cb657de117
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Tue Jan 9 14:56:46 2018 -0500

    Bug 15524: (QA follow-up) - Change language used
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7e956e85b1ef13abf48b9c60c763a77564abca45
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Jun 28 08:54:03 2017 -0400

    Bug 15524: Set limit on maximum possible holds per patron by category
    
    It's possible to set a limit on the maximum number of holds for a particular branch/category/itemtype, but not on the total number of holds for a given patron (by branch/category).
    This new rule works in conjunction with the existing branch/borrower/item rules in that Koha will use the lower of the two limits. This new rule counts all holds of all types, which prevents bib-level holds from not being counted for the purpose of these limits. This makes the most sense and was also requested by the sponsor.
    
    Test Plan:
    1) Apply this patch
    2) Run updatedatabase.pl
    3) Go to the circ rules editor, note the new max holds rules
       by patron category in the "Checkout limit by patron category".
       ( Should we rename this section? )
    4) Create find a patron that is allowed to place a hold, count the
       number of holds that patron has. Lets make that number 'X'.
    5) Set the new max holds rule to X for "All libraries"
    6) Note the patron can no longer place another hold
    7) Set the new max holds rule to X + 1 for the patron's home library
    8) Note the patron can again place another hold
    9) Set the new max holds rule to X for the patron's home library
    10) Note the patron can no longer place another hold
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6bb02671f89d445bb6101fef5ded68ddc83a8876
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 24 12:00:54 2018 +0000

    Bug 19039: (RM follow-up) Add filters to variables
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d352b3c9c6882c89bfb653213d8a932469d91783
Author: Maryse Simard <maryse.simard@inlibro.com>
Date:   Fri Jul 20 17:20:23 2018 -0400

    Bug 19039: (follow-up) Results of virtual shelves (lists) not sortable by date
    
        In the staff client, when viewing the content of a list, it can be sorted by 'title', 'author' or 'call number' but not by 'date added'.
    
        This patch adds 'date added' as an option for default sorting of lists. It also makes it available as a sorting option while viewing lists.
    
        Test plan:
        In the staff client and the opac:
        1) View a list containing several items
          => Notice that you can't sort by 'date added'
        2) Try to edit the list or create a new one
          => Notice you can't choose date added as the default sort order
        3) Apply the patch
        4) When viewing the list you should now be able to sort by date added
          => Make sure it orders correctly
        5) Edit or create a list and choose date added as default sorting order
          => Make sure it uses date added as default
          => On the staff client: test that the filter for 'sort by' works for date added
          => On the opac: test that, while viewing the contents, choosing 'default sorting' in the dropdown menu sorts correctly
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8713983aaba42ae6bbe3668cb231b58d031f5f71
Author: Maryse Simard <maryse.simard@inlibro.com>
Date:   Tue Jun 12 13:42:23 2018 -0400

    Bug 19039: Results of virtual shelves (lists) not sortable by date
    
    In the staff client, when viewing the content of a list, it can be sorted by 'title', 'author' or 'call number' but not by 'date added'.
    
    Test plan:
    1) In the staff client, view a list containing several items
    2) Notice that you can't sort by 'date added'
    3) Apply the patch
    4) Repeat step 1
    5) The list can now be sorted by 'date added'
    
    Signed-off-by: Dilan Johnpullé <dilan@calyx.net.au>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9874c902ef231dce5a597677699d35af27742a83
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 13 15:07:05 2018 -0300

    Bug 21209: (bug 20828 follow-up) Step 4 of moremember is used for Housebound and additional attributes
    
    Test plan:
    
    1) Make sure the HouseboundModule is enabled in system preferences
    2) Go to a patron file
    3) Next to Housebound roles, click on "Add"
    4) Check "Yes" next to one of the two roles (or both)
    5) Click "Save"
    6) The "Add" button is now "Edit", click on it
    
    The page is the one to edit housebound roles.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 71bb9a0f28834423fb3ae4d9d8d33418bda6bf3f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 24 11:47:29 2018 +0000

    Bug 21239: (RM follow-up) regenerate staff css
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 006a45078ea5991ba15d1cc8aef3152c0de01899
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 17 12:47:52 2018 +0000

    Bug 21239: CSS regressions caused by SCSS move
    
    This patch corrects some mistakes in staff-global.scss made during the
    conversion from CSS.
    
    To test, apply the patch and regenerate your CSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client).
    Clear your browser cache if necessary.
    
    View various forms in the staff client which have hints and required
    fields, including:
    
    - Notices & slips -> Modify notice
    - Administration -> Budgets -> Modify budget
    
    Verify that date format hints are positioned correctly. Try to submit
    the form with empty required fields and verify that the "This field is
    required" message is positioned correctly.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit aa449de6aa6de31f88c638af61606f2801c87a95
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Aug 16 14:25:39 2018 +0000

    Bug 21237: Clean up staff client SCSS
    
    This patch removes a redundant linter configuration, .sass-lint.yml,
    which was added by mistake.
    
    Some linter rules have been modified to better conform to the defacto
    standard set by our existing CSS.
    
    staff-global.scss has been corrected to comply with linter rules
    (https://github.com/brigade/scss-lint/blob/master/lib/scss_lint/linter/README.md):
    
    - Comment, style: silent
    - TrailingSemicolon, true
    - Shorthand
    - ColorKeyword, enabled: true
    - PropertySortOrder
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a122a5333445299da8a01e47a65b25f733e6ce7c
Author: Joy Nelson <joy@bywatersolutions.com>
Date:   Fri Jun 22 13:48:25 2018 -0700

    Bug 20984: Add 300$f to display
    
    Adding Type of Unit (300$f) to the Opac details and staff side searches results and details display
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fe9c6450979b5b7fd05821dd22c523ea6d10d3cd
Author: Joy Nelson <joy@bywatersolutions.com>
Date:   Fri Jun 22 11:56:11 2018 -0700

    Bug 17625: adding subfields f and g to XSLT display
    
    Adding 245$f and 245$g to the Results and Detail pages on OPAC and staff side
    
    Signed-off-by: Joy Nelson <joy@bywatersolutions.com>
    
    Signed-off-by: Cab Vinton <bibliwho@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3f05bda8fd6a3a079c4042dc15f6372a2d62f451
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 6 15:38:58 2018 -0300

    Bug 21182: Remove acqui/check_duplicate_barcode_ajax.pl
    
    It has been added by
      commit 327be442bd6e63e5ff8c0a5e2461ae836e8deffb
      Bug 6963: Corrects a problem when a new order is created with a duplicate barcode.
    
    But its last call removed since:
      commit eefc774e274ce8167f1063be5f9204a0d5cf5650
      Bug 7178: Acquisition item creation improvement
    
    Test plan:
      git grep check_duplicate_barcode
    should not return anything
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a49490a2f4c67e121cd475ee5866e9bef25d134e
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Aug 8 14:33:11 2018 +0200

    Bug 20248: (QA follow-up) Remove unnecessary stuff
    
    - Remove useless 'action' attribute in forms
    - $op should never be equal to 'reset', so remove the test
    - Move 'op' parameter inside <button>s to avoid having different HTML
      tags for elements that have the same kind of behaviour
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 23f78a6c2a6557aac557ae65261bce0e7baced61
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Mon Feb 19 16:54:39 2018 +0200

    Bug 20248: Improve Elasticsearch mappings UI and rebuild_elastic_search.pl.
    
    Improvements:
    1) Mappings UI now has button that allows one to reset the mappings.
    2) Mappings UI displays the items in alphabetical order.
    3) Indexing script drops and recreates the index right away, which
    helps prevent ES from autocreating a bad index if someone does something
    while the first batch of records is being processed.
    4) Indexing script has nicer output.
    
    To test:
    1) Change mappings.yaml file
    2) Reset mappings in UI in mappings.pl
    3) Verify the mappings have been changed in UI
    4) The field order is alphabetical
    5) Rebuild script has clean output
    6) Run test t/db_dependent/Koha_Elasticsearch_Indexer.t
    
    Signed-off-by: Bouzid Fergani <bouzid.fergani@inlibro.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a11b1083bff404b57f3ac959489f0a2b7a94f6e1
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Aug 22 13:57:02 2018 +0000

    Bug 19719: DBRev 18.06.00.019
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 18e122a78cb7f0ac84161cd908b4e03ec6401c48
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Jun 20 00:16:38 2018 +0200

    Bug 19719: (follow-up) Add database update to keep collection column hidden
    
    For existing installations we want to keep the current behaviour.
    This patch adds the column configuration to hide the collection
    column from the details and checkouts tabs until toggled.
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3c143b52acfadc300aa649c25aae34f433a709d6
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Mar 31 10:13:57 2018 +0200

    Bug 19719: (follow-up) Show description instead of code
    
    This follow-up changes the display from collection code
    to description, following the existing pattern for
    location.
    
    To test:
    - Repeat test plan from first patch
    - Verfiy now the collection descrption shows
    - Change column setting in administration
    - Verify they work as expected
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fd4d17ace14052662f78d38eae2084cfefa12b9d
Author: Jesse Maseto <jesse@bywatersolutions.com>
Date:   Fri Mar 2 13:11:44 2018 +0000

    Bug 19719: Add new column for collection in the patron checkouts data tables
    
    This makes the collection visible in the checkouts table
    on the details and issues tab in the patron account in staff.
    
    TEST:
    
    1. Check out a few items to patron.
    2. View check outs on patron account in staff client.
    3. Collection code is not present.
    
    4. Apply patch
    
    5. Notice that not Collection code is visible while viewing check outs.
    
    Signed-off-by: Severine QUEUNE <severine.queune@bulac.fr>
    Signed-off by: Maksim Sen <maksim.sen@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fc55ecbe42a413ca1df54b34ec18597f01465522
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Aug 7 13:37:30 2018 +0000

    Bug 15408: Fix tests to fail without patch
    
    We set all the timestamps to a specified date and ensure the new budgets
    don't have this date
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f4615a2f817dc08e8d89c667646bff8dcc0b1c28
Author: Baptiste Wojtkowski <baptiste.wojtkowski@biblibre.com>
Date:   Fri Feb 3 15:22:36 2017 +0000

    Bug 15408: Remove fund's timestamp when cloning a budget
    
    To duplicate the budget, the function CloneBudgetHierarchy create a new budget
    from the old without the parameter timestamp, so that the database generates a
    new one.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Added unit tests to patch
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Modified to run properly the QA tests
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 76141a352ed5ff8c9541c0d4b1c99e22e5339add
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Aug 7 11:14:54 2018 -0300

    Bug 21150: add the biblionumber to the output
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6fd1a8c11484e8c1cd771aea0c6ac98a2ab18f40
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 3 14:59:33 2018 -0300

    Bug 21150: Search for item types inconsistencies
    
    search_for_data_inconsistencies.pl will now display errors if:
    1.item-level_itypes is set to "specific item" and items.itype is not set
    or not set to an item type defined in the system (itemtypes.itemtype)
    2.item-level_itypes is set to "biblio record" and biblioitems.itemtype is not set
    or not set to an item type defined in the system (itemtypes.itemtype)
    
    Test plan:
    Use the script and the different possible combinations to display the
    errors
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9b73cc22890aadae0fa6afd9d82d5109cc47fd80
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Jul 31 16:23:43 2018 +0000

    Bug 20509: Add to script documentation
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9558a118dacd74b77c27f63fc41611945aeff052
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 27 15:35:57 2018 -0300

    Bug 20509: Search for not defined authority codes
    
    This patch adds a new check in
    misc/maintenance/search_for_data_inconsistencies.pl to search for not
    defined authority codes.
    
    Test plan:
    Set some auth_header.authtypecode to not defined authority codes in Koha
    (UPDATE auth_header SET authtypecode="XXX" WHERE authid=42;)
    Then run `misc/maintenance/search_for_data_inconsistencies.pl`
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5892ab07118b04a8071b49c40b441df326e15f07
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Jun 27 20:27:09 2018 +0000

    Bug 21011: (follow-up) Fix pod, fix missing homebranch condition, change mode to executable
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7d47bb311827298ddc30297bbd388e8f8905db48
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 27 15:32:56 2018 -0300

    Bug 21011: Search for items with not defined homebranch and/or holdingbranch
    
    From bug 5789: scripts can fail if items.homebranch and/or
    items.holdingbranch is not defined
    
    This script will help people catching these migration issues.
    
    Test plan:
    Update your items table to set some homebranch or holdingbranch to NULL
    Run this script
    It will display the different items with not defined values in these
    fields.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9ccfa48f6ee8ec44d1621874383b10f68d939f34
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Aug 8 20:34:32 2018 +0000

    Bug 20631: Remove unused RemoveLostItem from C4::Accounts
    
    RemoveLostItem was 'used' in C4::Accounts, but is not
    actually used there.
    
    Call has been removed by
      commit ed9cf81c3aa8fd82f9347556364e9d2e6cef8a82
      Bug 15896 - Use Koha::Account::pay internally for makepayment
    
    To test:
    - Verify that the routine was actually not used!
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 579e53de7e98f96a9a2bf558a6e859366416fd2c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Aug 22 12:34:45 2018 +0000

    Bug 20487: DBRev 18.06.00.018
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 74cc24d227835ee822707dd808382371f1a6bae8
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu May 31 09:02:12 2018 +0200

    Bug 20487: (QA follow-up) Requested db revision
    
    As requested in comment12, we can update these cases in a dbrev too.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Checked out item, deleted issue record, ran dbrev.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a744a3e2026c52b9270ea248909f71f3744ff1a4
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Mar 28 16:25:07 2018 +0200

    Bug 20487: AddReturn should clear items.onloan for unissued items
    
    If an item is no longer issued but somehow still has a date in the onloan
    column, checking it in should clear that date.
    Adding a ModItem call in the NotIssued section.
    
    Test plan:
    [1] Run t/db_dependent/Circulation.t
    [2] Bonus: Checkout item, delete issue from table, checkin. Verify that
        items.onloan has been cleared.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 56c50a66169f956584050a8630a71cfa7d5984cb
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Aug 9 17:46:09 2018 +0000

    Bug 20504: Fix lang attribute in html tag on systempreferences page
    
    On the system preferences page the lang attribute of the
    html tag is always empty.
    
    To test:
    - Go to systempreferences
    - Check the html source and look at the html tag,
      it should read: <html lang="">
    - Apply patch
    - Check the html source again: <html lang="en">
      Verify the language code shown matches the currently
      selected language in the staff interface
    - Verify the language system preferences work correctly
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    The problem was actually that
      $lang = $template->param( 'lang' );
    should certainly be $lang = $input->param( 'lang' );
    and, as it, it overrides the value of 'lang' passed from C4::Auth
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9e9c9d5aa11b1804a5a2db8159cac76fad9bf1de
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Aug 22 12:06:32 2018 +0000

    Bug 21234: (RM follow-up) regenerate staff css
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7f498085114a6d5fb04e888a6a25870af5e0a1ea
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Aug 16 13:02:34 2018 +0000

    Bug 21234: Remove our .clearfix class in favor of Bootstrap's
    
    This patch removes the ".clearfix" declaration from staff-global.scss so
    that Bootstrap's built-in clearfix class will be used.
    
    To reproduce this issue, see Administration -> Currencies and exchange
    rates. The table of currencies does not appear below the table buttons.
    
    Apply the patch and regenerate CSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client).
    
    Clear the browser cache if necessary and reload the Currencies and
    exchange rates page. The table should appear in the correct position.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3484db7187ca4ca62a617d9362b8c64c37f60cfd
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Aug 20 07:04:37 2018 +0000

    Bug 7996: (QA follow-up) Remove unnecessary permission check view logs template
    
    Permission is checked in the perl file, no need to check again
    in the template.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a750ebdbd994ef2a793e632eea4e35bbc7f1ec6d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 17 11:07:41 2018 +0000

    Bug 7996: Correct wrong permissions for modification log
    
    To test:
     1 - Create a staff patron with catalogue,borrowers,and view_system_logs
         permissions
     2 - Log in using that patron
     3 - Go to tools
     4 - Click 'Log viewer'
     5 - You get a blank page
     6 - View borrower circ screen, note you do not see 'Modification log'
     7 - Edit a borrower, note you do not see 'Modification log'
     8 - Apply patch
     9 - 'Log Viewer' should now load correctly
    10 - You should see 'Modification log' tab during circ
    11 - You should see 'Modification log' tab when editing patron
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 10cd9ac4bdc430d29bc71299e5d9b5d3bc8b1489
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Aug 21 13:38:42 2018 +0000

    Bug 21243: (follow-up) Remove extra '</div>' tag
    
    To test:
    1 - Go to Admin->Z39/SRU servers
    2 - Pick a server or add one
    3 - Click 'Modify' button for mappings
    4 - Copy the HTML of the popup into w3c validator
    https://validator.w3.org/#validate_by_input
    5 - Note extra closing div
    6 - Apply patch
    7 - Repeat
    8 - Success
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 390e39f1d2392e7ae44a4c22bbea5baf896d6cd1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 17 14:19:20 2018 +0000

    Bug 21243: Regression: SRU mapping popup for bibliographic records is unstyled
    
    This patch corrects a regression caused by Bug 21151: The include file
    which adds CSS to the page was removed from the template.
    
    To test, apply the patch and go to Administration -> Z39.50/SRU servers
    -> New SRU server.
    
    - Click the "Modify" button next to "SRU Search fields mapping"
    - Verify that the pop-up window is correctly styled.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d5296743a4b4e6e6004bdb68926a3584e55435e4
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Aug 8 20:28:29 2018 +0000

    Bug 20994: Fix capitaization "Save to Lists"
    
    On the OPAC result list, below each result, there is a link:
    "Save to Lists".
    
    Patch changes this to "Save to lists" following our
    capitalization rules.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit afa51869c39e1a450314a6d13098571566cc241c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jul 26 15:36:24 2018 +0000

    Bug 19511: Local cover images not centered in table column in staff client search results
    
    This patch modifies the JavaScript which embeds local cover images in
    staff client catalog search results. It now adds the "thumbail" class to
    the image, matching Amazon cover images.
    
    To test you should have one or more titles with local cover images
    attached. Apply the patch and clear your browser cache if necessary.
    
    Enable both the AmazonCoverImages and LocalCoverImages system
    preferences and perform a search which will return titles with local
    cover images. Confirm that local covers are styled like Amazon covers.
    
    Tested and confirmed local cover images are appearing quite nicely now.
    Signed-off-by: Dilan Johnpullé <dilan@calyx.net.au>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 717cb3f893e33a1f54299abbd81a5f9bc339a225
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 17 13:20:04 2018 -0300

    Bug 19500: Add missing span for 'other'
    
    To stay consistent in the DOM structure it would make sense to have it
    there as well
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a0d775b9cce90b6a029bd92eb3971383a05f55e2
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Aug 12 19:42:30 2018 +0000

    Bug 19500: (QA follow-up) Add spans to ease translation
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5e9480937ae0a4bb901330138e1760d690d5f548
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Aug 10 22:54:11 2018 +0000

    Bug 19500: Make module names on letters overview page translatable
    
    While the module pull down on adding and editing a letter is
    written out and fully translatable, the overview page showed
    the internal 'module code'.
    
    Patch also renames the "Members" module into the "Patrons" module
    to match Koha's terminology.
    
    To test:
    - Before applying the patch:
      - Add or edit a notice, look at the pull down for module
      - Go back to the overview page
      - Verify the module names don't match
    - Apply the patch:
      - Check again, pull downs should now match
      - Verify that Members is now Patrons everywhere
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3289f6f5bea07e7bec13aebd3db90d4f9e52c53a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Aug 21 11:59:17 2018 +0000

    Bug 21229: (RM follow-up) regenerate staff css
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4d2e8d6c91f31e2aa3db97d75168560c9ace15c0
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Aug 15 13:14:02 2018 +0000

    Bug 21229: Correct nesting and specificity for some button styles
    
    This patch corrects some Bootstrap button-related CSS which was causing
    some buttons to have the wrong color:
    
     - Circulation -> Check out: "Add a new message" link is black
     - Catalog -> Details page: "Print" button is blue
    
    To test, apply the patch and rebuild CSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client).
    
    Clear your browser cache if necessary and view the above pages to
    confirm the problem is fixed.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit df06587b763de2acd2d4e1afa3da8ad1841f7577
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Aug 21 11:49:55 2018 +0000

    Bug 21144: DBRev 18.06.00.017
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 266d7b5fa844b512cf68f4b08d6c07474c2ccc42
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Aug 2 02:19:42 2018 +0200

    Bug 21144: Add ROADTYPE to default authorised values categories
    
    The ROADTYPE category was missing from the default list of
    authorised value categories available.
    
    To test:
    - Verify ROADTYPE is not listed as authorised value category
    - Apply patch and run database update
    - Verify ROADTYPE is now listed
    - Add an entry, for example: AV = Avenue
    - Add or edit a patron, verify a pull down with your entry
      shows on the form.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f5f31679bf260d17e996fbe8e2e77f695ac7ddfc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 17 12:07:55 2018 -0300

    Bug 21142: Open uploaded files in utf-8 - batch mod/del
    
    Batch item/record modification/deletion tools does not open uploaded
    files in utf-8
    
    Test plan:
    Edit and delete records and items using a file which will contain:
    valid and invalid barcodes with and without utf-8 chars (💕)
    
    You should see the warning message:
     "The *** 39999000💕001679 does not exist in the database."
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d1890533c8796873149338831c5de13d5b19cb9e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 17 19:50:31 2018 +0000

    Bug 20014: Preselect item budget based on id not code
    
    To test:
    1 - Have the same fund code in two budgets
    2 - Have budget code defined in MarcItemFieldsToOrder
    3 - Stage a file with some order items as defined above
    4 - Inspect the fuinds drop down in the item, notice two lines are
    marked selected
    5 - Apply patch
    6 - Repeat
    7 - Only one field should be selected, with a preference for active
    budget
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7dab4cd903f9623fb52592e65d57c93b6156d2aa
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Aug 21 11:25:53 2018 +0000

    Bug 20773: DBRev 18.06.00.016
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a4ec768e3787ff3ee426949c0f03188dd4d15e82
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed May 16 15:39:04 2018 +0200

    Bug 20773: (bug 20724 follow-up) Add a simple db revision
    
    We should correct bad data too.
    This is a trivial, pragmatic approach. Instead of doing a complex
    calculation with holidays etc. (as was done on 12063), we just add
    MaxPickupDelay or 7 days to today probably resulting in a little bonus
    time. Only for waiting holds. When the ReservesNeedReturns pref was not
    Automatic, there should be no changes.
    
    == Test plan ==
    1. git checkout c585f1149770ec401f188e061211501897cec0bf~1
         This the commit before bug 20724's patches.
         We need that to be able to generate "corrupted data"
    2. Set ReservesNeedReturns to "Automatically"
    3. Place a hold on a specific item
    4. The hold should have an *empty* expiration date
         record page → Hold → "Expiration" column
    5. Apply this patch
    6. Run updatedatabase.pl
    7. Refresh the page
    8. The hold should have an expiration date (not empty)
    9. Celebrate! 🎉🎊🥳
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Victor Grousset <victor.grousset@biblibre.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Bug 20773: (followup) Remove MySQLism
    
    Signed-off-by: Victor Grousset <victor.grousset@biblibre.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d24d77d495a56e76046907ab19e9474cab28169c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 16 12:29:43 2018 -0300

    Bug 21238: Prevent TemplateToolkit.t to fail on slow servers
    
    It failed 3x in the last 6 runs (on node 1), we should mock
    DateTime->now to prevent it to fail again.
    
    The error is:
    koha_1       |         #   Failed test at
    t/db_dependent/Letters/TemplateToolkit.t line 724.
    
    When comparing <<today>> replacement:
    koha_1       |         # 08/16/2018 14:25<br />
    [...]
    koha_1       |         # 08/16/2018 14:24<br />
    
    Let's mock DateTime->now to prevent it to fail again.
    
    Test plan:
    0. Do not apply this patch
    1. Add "sleep(60);" at line ~715, before "# Add a second checkout"
    2. Run the tests
    => Fail!
    3. Apply this patch
    4. Run the tests again
    => Pass!
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cb5bf46dc7c17446c29273f37559d29a046b11de
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Aug 20 14:49:53 2018 +0000

    Bug 21223: (RM follow-up) Generate css
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cbf75d37144e4a68d241638fe1cc91454106992b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Aug 14 17:26:26 2018 -0300

    Bug 21223: Fix some floating values
    
    See description of the bug for screenshots
    
    I do not really know why we have these issues, but maybe we should
    regenerate the .scss in order to catch the other problems?
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8eed0466381435a0426fe9c2ea75fa295d906533
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Dec 13 13:27:36 2017 +0000

    Bug 18947: LDAP - do not assume anonymous bind if no user or password
    
    To test:
    Ideally tested on a working ldap server with bind by auth and no
    anonymous bind
    1  - Define an LDAP config with bind by auth
    2  - Don't define user/pass
    3  - Define anonymous_bind = 0
    4  - Attempt bind by auth
    5  - Error is something like:
    LDAP search failed to return object : XXXXXXXXX: LdapErr: XXXX-XXXXXX,
         comment: In order to perform this operation a successful bind must
         be completed on the connection., data 0, v2580 at
         /usr/share/koha/lib/C4/Auth_with_ldap.pm line 102.
    6  - Define user/pass
    7  - Now bind by auth should work
    8  - remove user/pass
    9  - Apply patch
    10 - Attempt again
    11 - Bind by auth shoudl succeed
    
    prove -v t/db_dependent/Auth_with_ldap.t
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Brendan A Gallagher <brendan@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 88d3865168a83aa7e69999ab3336b238a2ed14ff
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 10 12:17:45 2018 -0300

    Bug 21203: ILS-DI - Make GetRecords handle non-existent records
    
    Caused by
      commit cb336e633bf7e0cb25051a8ed8157af8486a58d7
      Bug 18255: Koha::Biblio - Replace GetBiblioItemByBiblioNumber with Koha::Biblio->biblioitem
    
    Can't call method "biblioitem" on an undefined value at /home/vagrant/kohaclone/C4/ILSDI/Services.pm line 212
    
    Test plan:
    - Enable ilsdi
    - hit /cgi-bin/koha/ilsdi.pl?service=GetRecords&id=X
    With X an existing biblionumber and a non existing one
    
    Both requests must succeed
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f130ada624a7c48bbd2e082cc77f064a793cda8b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 17 14:58:52 2018 -0300

    Bug 13618: Fix xt/tt_valid.t
    
    We are going to say it quietly but this test does not catch the problem
    when there are no spaces....shhhh
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit facb5cb25a3e81952282b228190870640a383295
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 17 13:50:39 2018 -0300

    Bug 13618: Fix wrong condition in xt tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 22ab4ba524fe1595dbd85e10b6727007133ae2e4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 17 13:51:01 2018 -0300

    Bug 13618: Remove filter when assigning array
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9e895e581288e4299e28d6c542ac3f66f80d6f3d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 17 13:11:28 2018 -0300

    Bug 13618: Add POD to raw.pm
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f59b8461348e0c974c17d970757698b018e00c32
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 16 15:00:32 2018 -0300

    Bug 13618: (follow-up) Add html filters to all the variables
    
    JS block has been re-added to the top whereas it was moved to the
    bottom!
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1981db25cefcb39405835ee5e90b1fb1ca6f4928
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 16 14:58:31 2018 -0300

    Bug 13618: (follow-up) Manually replace missing .raw
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 96e2d28fd5d342b6569ad24d17cedf8ad6415616
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 16 14:55:47 2018 -0300

    Bug 13618: Remove html filter for NEXT
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cc5c66d27b81a5b44238f66d474b6396ad334487
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Aug 14 12:23:08 2018 -0300

    Bug 13618: Remove html filter for STOP and deal with existing USE raw
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4321dbe2212e917ebed5fc5500e108e02dd041c0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Aug 14 15:08:46 2018 -0300

    Bug 13618: Add tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 13d0c46bdcceceace6df38bd4bf283855aff3d42
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Aug 14 14:50:46 2018 -0300

    Bug 13618: Add missing raw filters
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 726a61ac65e4d504aba328c41cdc76ef65210222
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 13 15:17:31 2018 -0300

    Bug 13618: (follow-up) Escape HTML chars in holds.js
    
    For biblio level holds we got:
    TypeError: oObj.itemcallnumber is undefined
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8d61035e8574a89d5dae44a0c4120e657539c3dc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 13 14:31:52 2018 -0300

    Bug 13618: (follow-up) Add html filters to all the variables
    
    IntranetUserJS was missing (?!)
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f580af25e1518d0cac5ccd46a653a98e8b8d2282
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 9 17:31:20 2018 -0300

    Bug 13618: Fix item search
    
    We want to encode HTML characters for the "key => value"'s
    like branchcode => branchname
    But not the whole JSON string
    We could have done it controller-side but it sounds better to do it as
    we do for other places
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 599a4a16ef4e66b7f117502bb94e2eeab399eb57
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 9 13:13:12 2018 -0300

    Bug 13618: Explicitly use raw for itemtype.checkinmsg
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 51b7499d10b0f32eeb59b9debb7cbc99b921eef9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 9 13:04:02 2018 -0300

    Bug 13618: Specific for labels/spinelabel-print.tt
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1c0aad5a1d652c8e7ad0c18bb19214b22b3c554a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 9 12:55:04 2018 -0300

    Bug 13618: Specific for labels
    
    This is definitely wrong, html is generated in C4/Creators/Lib.pm (see
    FIXME).
    We will need to fix it, but let's do that later!
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cef24888bdf188857511136afd3d35ec607a0ca3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 9 12:32:49 2018 -0300

    Bug 13618: Escape HTML chars in checkouts.js
    
    On the way the itemtype is not displaying correctly the description
    instead of the code (in the relative's checkouts table)
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8ee92112e48d52eb5dad5533075f3ab0aed658ba
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 9 12:08:45 2018 -0300

    Bug 13618: Add the escapeHtml JS prototype to String
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a6f9738fd2bda70428ebe49a7be0696ea997406c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 9 10:31:51 2018 -0300

    Bug 13618: Escape HTML chars in holds.js
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5a7ee2db081ea4a71ebe98291faf8a7c70994ae5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 8 16:13:05 2018 -0300

    Bug 13618: Deal with span in patron-title
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 865c385f718c56ea6fc6d718496ee2ff6aa0c667
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 8 16:12:52 2018 -0300

    Bug 13618: Specific for IntranetCirculationHomeHTML
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 62e3b630bfc99f53dd7d40adc17f899ad5942bdc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 19 18:56:26 2018 -0300

    Bug 13618: (follow-up) Manually replace missing .raw
    
    Syntax was wrong:
    Template process failed: file error - parse error - bodytag.inc line 4:
    unexpected token (_)
    
    It's escaped later so sounds ok here
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 917ec3700ee2694333219b21d5f16d7c2b147254
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 19 18:47:46 2018 -0300

    Bug 13618: Manually replace missing .raw
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dd9e978c2c4ba140af5d4586fc9ec3589f356e75
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 19 18:24:10 2018 -0300

    Bug 13618: Fix BLOCKs
    
    perl -p -i -e  's/BLOCK \| html/BLOCK/g' **/*.inc **/*.tt
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 82cede1cc202e8e8e6b8d49357400da3343318ca
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 19 17:56:34 2018 -0300

    Bug 13618: Add the raw TT filter
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 10c154353f78c942647fae4fbadccc555fbea3a3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 19 17:36:29 2018 -0300

    Bug 13618: Remove html filters for HtmlTags
    
    We will have to make sure this filter (HtmlTags) is not used with
    unsafe variables.
    
    Generated by:
    perl -p -i -e 's/HtmlTags tag([^\|]*)\| html -%]/HtmlTags tag\1-%]/g' **/*.tt **/*.inc
    perl -p -i -e 's/HtmlTags tag([^\|]*)\| html %]/HtmlTags tag\1%]/g' **/*.tt **/*.inc
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f8e0d905ff98b951de3826420c0c133f52e237cc
Author: Mark Tompsett <mtompset@hotmail.com>
Date:   Mon Feb 1 14:25:56 2016 -0500

    Bug 15717: Installer: Step 3 has <br /> showing
    
    The step to install optional/mandatory things is broken with
    many <br />'s instead of line breaks.
    
    TEST PLAN
    ---------
    1) Back up database
    2) Drop database
    3) Create empty database
    4) Run web installer
       -- Notice that step 3 has ugly <br />'s at the last
          part of step 3.
    5) Apply patch
    6) Repeat steps 2-4
       -- Notice the <br />'s are now nice line breaks.
       NOTE: No promises of perfect positioning!
    7) Run koha qa test tools.
    
    Joubu: I have no idea if this is still needed. TO TEST
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    https://bugs.koha-community.org/show_bug.cgi?id=13618
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fd9ea323fe1f46ef5c1fd7b93a1cb3f158059133
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 19 17:09:26 2018 -0300

    Bug 13618: Escape patron's attributes - do we want that?
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dcd1f5d48c758aee17b6c6f069c6146b42efe117
Author: Jonathan Druart <jonathan.druart@biblibre.com>
Date:   Fri Jan 23 13:18:54 2015 +0100

    Bug 13618: Add html filters to all the variables
    
    Here we go, next step then.
    As we did not fix the performance issue when autofiltering
    the variables (see bug 20975), the only solution we have is to add the
    filters explicitely.
    
    This patch has been autogenerated (using add_html_filters.pl, see next
    pathces) and add the html filter to all the variables displayed in the
    template.
    Exceptions are made (using the new 'raw' TT filter) to the variable we
    already listed in the previous versions of this patch.
    
    To test:
    - Use t/db_dependent/Koha/Patrons.t to populate your DB with autogenerated
    data which contain <script> tags
    
    - Remove them from borrower_debarments.comments (there are allowed here)
    update  borrower_debarments set comment="html tags possible here";
    
    - From the interface hit page and try to catch alert box.
    If you find one it means you find a possible XSS.
    To know where it comes from:
    * note the exact URL where you found it
    * note the alert box content
    * Dump your DB and search for the string in the dump to identify its
    location (for instance table.field)
    
    Next:
    * Ideally we would like to use the raw filter when it is not necessary
    to HTML escape the variables (in big loop for instance)
    * Provide a QA script to catch missing filters (we want html, uri, url
    or raw, certainly others that I am forgetting now)
    * Replace the html filters with uri when needed (!)
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 610c628def96437c0cc75ec2d2455cd373c5db18
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Aug 16 14:03:28 2018 +0000

    Bug 21226: DBRev 18.06.00.015
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bce549bc4c0f9fefddb34fe614f6bf79aef882ea
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 15 11:58:12 2018 -0300

    Bug 21226: Remove xISBN services
    
    OCLC has decided to retire all xISBN services:
    https://www.oclc.org/developer/news/2018/xid-decommission.en.html
    
    The code for related features has to be removed from Koha.
    
    Test plan:
    You need to be familiar with the different sysprefs (I am not):
    - FRBRizeEditions
    - SyndeticsEnabled
    - SyndeticsEditions
    - ThingISBN
    
    Make sure there are no regressions introduced by this patchset.
    
    QA Note: C4/XISBN.pm should be renammed
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b19090c4505c0f407a7f3cbfe3c14da5cfecc657
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 15 11:36:21 2018 -0300

    Bug 21226: DB Changes
    
    Remove prefs OCLCAffiliateID, XISBN and XISBNDailyLimit
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c957b52ef8bba734043157445470bedc36feae5e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 15 12:21:38 2018 -0300

    Bug 21230: Prevent Reserves.t to fail randomly
    
    The following test can fail if the hold has been generated with found => 'W':
     #   Failed test 'No tests run for subtest "_koha_notify_reserve() tests"'
     #   at t/db_dependent/Reserves.t line 675.
    Can't call method "to_address" on an undefined value at
    t/db_dependent/Reserves.t line 661.
     # Looks like your test exited with 255 just after 56.
    
    We should call AddReserve instead.
    
    Test plan:
    0. Do not apply this patch
    1. Do the following change:
        my $hold = $builder->build({
                source => 'Reserve',
                value => {
                   borrowernumber=>$hold_borrower,
                   found => 'W', # This line is added, do not forget the comma above
                }
            });
    2. Prove it makes the test fail
    3. stash the changes and apply this patch
    4. Make sure the tests pass
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 644de1c4e7616b13ea203f72b661ecb17ffa84a0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Aug 14 16:30:09 2018 -0300

    Bug 21222: (bug 20226 follow-up) Fix patron creation
    
    Since bug 20226 you cannot longer creation a patron, memberentry.pl will
    explode with
    Template process failed: undef error - DBIC result _type  isn't of the
    _type Category at /home/vagrant/kohaclone/koha-tmpl/intranet-tmpl/prog/en/includes/str/members-menu.inc
    line 22.
    
    The problem is that "patron" is actually defined and the test in
    str/members-menu.inc does not work as expected.
    
    It comes from
      commit 7b1d08df0f4f69c52826c80a13158245287f4c00
      Bug 19936: Replace Generate_Userid - Update the occurrences
    where I needed $patron to be defined in order to use Koha::Patron->generate_userid
    on an blessed object.
    But this was actually wrong, as it could have side-effects.
    
    Test plan:
    Create a new patron
    Edit it
    Retest bug 19936 and make sure the userid is generated correctly in the
    different situations
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 51933c7753f04cdc7baa745037919e601ec3d798
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Aug 14 16:26:39 2018 -0300

    Bug 21221: Shortcut memberentry scripts if patron does not exist
    
    If borrowernumber is passed and that it does not refer to a valid patron
    in DB, we should not continue the script and display an error instead.
    
    Test plan:
    Create a patron
    Edit a patron
    => Both should work ok
    You can also test the other action memberentry.pl manage.
    
    Edit it again but modify the borrowernumber parameter
    => You should see a friendly user message saying that the patron does
    not exist.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4ae91ba2633bac7ec607c8519433ba3cacbde1fd
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jul 24 16:10:53 2018 +0000

    Bug 21112: Re-indent staff client cart template
    
    This patch reindents the template for the staff client cart, basket.tt
    
    - Trailing spaces removed
    - Indentation changed to a consistent 4 spaces
    - Markup indentation made more consistent
    
    To test, apply the patch and add multiple items to the cart in the staff
    client.
    
    View the cart and confirm that it looks as it should both in the "brief"
    and "more details" views.
    
    HTML validation before and after the patch should return the same
    results.
    
    Signed-off-by: DEVINIM <kohadevinim@devinim.com.tr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8fc88514c35a9b6cfa9ce93e38ebb7aa2a36ccd1
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Jul 31 19:15:36 2018 +0000

    Bug 21137: Standardize breadcrumbs for tags page
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9d10d076122c4adb6c14b1b86b3bcca0e33ecc4a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 1 10:03:42 2018 -0300

    Bug 21137: Replace BORROWER_INFO with logged_in_user
    
    it also removes 'category_type' and 'description' from a couple of
    opac scripts, they are not needed.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 27bf38f34f03a5bc26abb8f928a8e37c3486b91e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 1 11:08:09 2018 -0300

    Bug 21137: use logged_in_user from opac-user.pl
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 889f148e4ed85abde34e73fba3840a54c9953419
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 1 09:57:29 2018 -0300

    Bug 21137: Replace USER_INFO with logged_in_user
    
    This patch set does several things:
    - it removes USER_INFO and BORROWER_INFO
    These 2 variables contained logged-in patron's info. They must be
    accessed from logged_in_user
    - Use patron-title.inc for the breadcrumb at the OPAC, for consistencies
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 484067b228d5cce461c6199b85b2b87cacd3ae40
Author: Jenny Way <jwayway@hotmail.com>
Date:   Tue Jan 16 20:37:37 2018 +0000

    Bug 18236: MARC21 - Add classes to material type on intranet detail and results pages
    
    Test plan:
    1. Open a list of results
    2. Use fn+f12 to inspect element
    3. Without patch it should show that the image class is 'materialtype'
    4. With patch there will be an additional class
    -Books = mt_icon_BK
    -Kit = mt_icon_MX
    -Article = mt_icon_AR
    -Continuous resource = mt_icon_CR
    -Mixed material = mt_icon_MX
    -Computer files = mt_icon_CF
    -Map = mt_icon_MP
    -Music = mt_icon_MU
    -Sound = mt_icon_MU
    -Score = mt_icon_PR
    -Visual material = mt_icon_VM
    
    OR
    1. Try using the classes in css to change the style
    
    -When viewing the details of a record, the material type img should also have the
    same changes
    -Check that the material type classes in the results page is the same as
    the details page
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    I've squashed the patches to make chanes easier readable.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e97f6ab9be6108cbe4d61ea8dd4b876527bd67ba
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 1 11:22:14 2018 -0300

    Bug 20795: Inform the user about this change, add to pod
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1dfb177d3fff713185bcb0aa86517ef40629fedc
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Sun May 20 14:44:45 2018 +0000

    Bug 20795: Pass incrreased verbosity to zebra rebuild script
    
    To test:
    1 - Run koha-rebuild-zebra with multiple '-v'
    2 - Note no increased verbosity
    3 - Apply patch
    4 - Run the updated koha-rebuild-zebra script with multiple '-v'
    5 - Note increased verbosity
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ed6070a5b43d0f3baaaf07c67faaa92baf00e7aa
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Aug 14 12:33:52 2018 +0000

    Bug 21121: DBRev 18.06.00.014
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 12dd41ed661c6f120e90f93e5f528abb51871d82
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 1 10:51:59 2018 -0300

    Bug 21121: Add the IGNORE clause
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3aef9a158ba866e2ce8a712e87ae9f2ae3b7ed40
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Mon Jul 23 04:34:06 2018 +0000

    Bug 21121: Added new system preference to control hiding of personal patron information in the circulation page
    
    Libraries may want to hide personal patron data from the circulation
    page for privacy reasons this syspref introduces that ability for
    library staff to control the display of this data themselves without
    having to ask support vendors to hide it for them.
    
    Test plan:
    1. View circulation page and input a patrons barcode or name
    2. Notice if the patron has a phone number, email, street address and
       city set then these are displayed in the left hand side of the screen
       under the patrons name. Otherwise if all/any of these fields are not
       set for the patron then the text: "No <datafield> stored." is
       displayed.
    3. Apply this patch
    4. Run ./updatedatabase.pl from the Koha shell to run the atomicupdate
    5. Restart memcached and plack
    6. Notice a new systempreference named
       'HidePersonalPatronDetailOnCirculation' has been added, which has the
       default value 'Dont'
    7. Without changing the default value notice the personal patron
       information is still displayed on the circulation page
    8. Change the value of the syspref to 'Do' and now notice the phone
       number, email address, street address and city are now hidden in the
       circulation page
    
    Sponsored-By: Catalyst IT
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 81431ee28a3ee128aa7fa5bfb40400b17c868786
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 17 16:21:13 2018 -0300

    Bug 20226: Centralize update child code (CATCODE_MULTI)
    
    Code and variables to deal with the update child feature are not
    centralized but copied/pasted in several scripts. Which leads to issues
    obsviously (bug 20805 for instance).
    
    Moreover the strings used by the templates are also in several template
    files (or .inc)
    
    To deal with that this patch introduces the idea to create 1 .inc file
    per .js file
    Here we have members-menu.inc for members-menu.js
    
    Test plan:
    - Remove all your adult categories (categories.category_type='A')
    - Create a patron with a child category
    - Try to update to adult category
    => The entry does no longer appears! (This is a change in the behaviour)
    - Create one adult category
    - Update to adult category
    => There is a JS confirmation message, if you accept the patron will
    be updated to the adult category
    - Create (at least) another adult category
    - Create another child
    - Update to adult category
    => No more confirmation message but a popup to select the adult category
    - Pick one
    => The patron has been updated to the adult category
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8255c8edcf34487a8bfe5fe2a7592097684b2220
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Dec 4 17:43:12 2017 +0000

    Bug 19743: Unit Tests
    
    Signed-off-by: Te Rauhina Jackson <terauhina.jackson@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e8c42c3a94d25d672181b5ad4f023d4aa54288a5
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Dec 4 16:16:52 2017 +0000

    Bug 19743: Update header and footer on each item for checkin / checkout / renewal notices
    
    When generating the checkout notice for a patron we only update the
    section in between the '---' tags
    
    For template toolkit purposes it means we cannot affect the content
    based on more than a single item. For instance, we want to add the total
    cost of all items checked out.
    
    Test Plan:
    1) Add "Thank you for visiting <<branches.branchname>>." to the bottom of the checkout notice. Below the second '----'.
    2) Check out an item to a patron to generate that notice
    3) Note the branch name in the notice
    4) Update the branch name in the branches editor, change it to something else
    5) Check out a 2nd item to that patron
    6) Notice the items list updated, but the branch name did not
    7) Apply this patch
    8) Check out a 3rd item to that patron
    9) Notice the branch name updated this time
    
    Signed-off-by: Te Rauhina Jackson <terauhina.jackson@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2280877fdd9685aecff0b144319ca3bffc39b78a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Aug 6 18:15:10 2018 +0000

    Bug 21164: Fix alignment on new basket form in acquisitions
    
    This patch removes some unnecessary "&nbsp;"'s from the template for
    creating a new basket in acquisitions. This fixes the alignment on the
    form fields.
    
    To test, apply the patch and go to Acquisitions -> Vendor -> New basket.
    All the form fields should be correctly left-aligned with each other.
    
    Signed-off-by: Pierre-Luc Lapointe <pierreluc.lapointe@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ad0f90b797c77b853ff61501310892282f582988
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Aug 8 16:45:28 2018 +0000

    Bug 21185: Incorrect title tag on tags review page
    
    This patch corrects the title tag on the tags review page.
    
    To test, apply the patch and go to Tools -> Tags. The page title
    (probably shown in the browser tab) should start with "Koha ->" instead
    of "Home ->".
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 40577065b60ab87330f1fc0c3e6bbe52f2373e6c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 1 13:18:47 2018 -0300

    Bug 21139: No table in toolbar
    
    We do not need this selector, we will not have a table in the toolbar
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5ecf4da7d49357832b77ee087d968e071ab46b93
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 1 12:34:29 2018 -0300

    Bug 21139: Floating toolbar - Resize toolbar on window resize
    
    Prior to this patch the toolbar was not resized when the window was
    resized
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b5520f3e019f38cbd2ea75be0a13806f68a2f515
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 1 12:31:01 2018 -0300

    Bug 21139: Floating toolbar - Remove horizontal scrollbar on resize
    
    To test:
    - add/edit a patron
    - resize the window
    => Without this patch a horizontal scrollbar appears when resized
    shorter
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2588811ef249f0996527e952e4ef5307c1834a71
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 1 12:28:54 2018 -0300

    Bug 21139: Floating toolbars - Remove unecessary height
    
    This patch remove some pixels under the toolbar, they were used by the
    hidden element.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 77196e91402cdb59242f80e596f1812d238923c2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 1 12:28:37 2018 -0300

    Bug 21139: Floating toolbar - Remove dup id
    
    We should not have twice the same id, we always use fixFloat() on an
    element with an id and then duplicate this element.
    The id must be changed (just in case)
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 880afc9035c752bb6fbea0ad5505d8730462ce2c
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Aug 10 17:18:39 2018 +0000

    Bug 19390: Make jQuery selector more specific, so OPAC view link can open in new tab
    
    The OPAC view link in the staff result list already had a target="_blank",
    but it didn't work, because of the JavaScript for the result list browser
    in staff.
    
    The JavaSript code was looking for the links to the detail page in staff
    and this also selected the link to the detail page in OPAC. By changing
    detail.pl to \detail.pl opac-detail.pl will no longer be selected.
    
    To test:
    - Search in the staff interface
    - Click "OPAC view" links in staff result lists
    - Click "OPAC view' links in detai page
    - Verify both now open in a new tab
    - Click other links and test that navigation (previous, next,
      return to results) works as expected
    - Inside the staff client, you should see something like
      searchid=scs_1533922927978 added to the URLs
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    Followed the test plan and it works.
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cacb57689070315fd1fae176e3761abc6870107f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 10 17:39:09 2018 -0300

    Bug 21208: Fix housebound deliverer/chooser names
    
    When creating a housebound visit, the names of the chooser and deliverer are the
    same as the housebound patron (even though the housebound patron does not have
    chooser and deliverer roles).
    
    It has been caused by:
      commit 5f80977875ff124d411f2cd89de4a944fa9c27af
      Bug 18403: Use patron-title.inc when hidepatronname is used
    patron-title.inc now starts looking for a variable named "patron", which exists in
    members/housebound.
    A better fix could be to renamed this "patron" variable tested by
    patron-title.inc, but at first glance it's the only place this issue
    exists.
    
    Test plan:
    1- Make sure HouseboundModule is enabled in system preferences
    2- Go to a patron file (Patron A)
    3- Edit this patron's housebound roles to Chooser
    4- Go to another patron file (Patron B)
    5- Edit this patron's housebound roles to Deliverer
    6- Go to a third patron's file (Patron C)
    7- Go to the Housebound tab
    8- Fill out the housebound profile for Patron c
    9- Click on "Add a new delivery"
    10- Fill out day and time
    11- Check the Chooser drop down
    12- Check the Deliverer drop down
    13- Save the delivery
    14- Notice the Chooser and Deliverer names are correct
    15- Click on the name of the Chooser, it goes to Patron A's file
    16- Go back and click on the name of the Deliverer, it goes to Patron B's file
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b1a4205cac57a6432ed2471f0d1ac5c3ce3b527a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 13 11:54:36 2018 -0300

    Bug 21213: Add diagnostics to Circulation.t
    
    Jenkins reported failures on a D9 run. No idea why it is failing so
    adding diag and wait for the next failure.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 24a5b9d700fd2d3847e6d7e16502b1c24e8e872e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Aug 9 16:08:31 2018 +0000

    Bug 21195: Ignore files used for SCSS build process
    
    koha_1       | #   Failed test 'All directories should be mapped:
    .sass-lint.yml,.scss-lint.yml,gulpfile.js,package.json,yarn.lock'
    koha_1       | #   at t/Makefile.t line 47.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 112af732e3685bb46b227caa147e6a9aa3e6226c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 10 12:38:34 2018 +0000

    Bug 20997: DBRev 18.06.00.013
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 392e0ca8f151239b600edac9fccccf81ed50f7cb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 31 16:46:23 2018 -0300

    Bug 20997: Replace missing credit_applied with 'Credit Applied'
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ac54e35b20793a8a84a705acb8068589251e3e14
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 27 14:55:14 2018 -0300

    Bug 20997: (QA follow-up) POD fixes and offset type consistency
    
    This patch addresses minor issues highlighted by QA.
    - The POD is enhanced based on the proposal in bug 11983.
    - The introduced offset type value is made consistent with the rest of
    them.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1e3f93aa594ccf673c519573e6c7b4bfc1ba6aac
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 28 15:54:53 2018 -0300

    Bug 20997: (follow-up) Minor POD fixes
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d0e37a483cb8445c7830764eef9603694830b56d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 28 15:52:01 2018 -0300

    Bug 20997: ->apply should be applied to Koha::Account::Lines
    
    This patch makes ->apply get passed an object set class instead of
    single account lines.
    
    The change is fully covered by tests.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 91c1acd6bb99f18dc1f532414621c5554f230527
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 28 15:51:06 2018 -0300

    Bug 20997: Add new offset type
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c659fe807671912e7e5636110e586ea23df65b69
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue Jun 26 00:22:16 2018 +0000

    Bug 20997: (follow-up) Add Koha::Account::Line->is_debit method
    
    Test plan:
    1) Apply this patch
    2) prove t/db_dependent/Koha/Account/Lines.t
    => Test should pass
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6f65887399a4bd276a5f83ed9d945e19e08036fd
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jun 26 11:52:44 2018 -0300

    Bug 20997: Add Koha::Account::Line::apply method
    
    This patch implements the ->apply() method for account lines.
    It will only work on credit lines, and raise an exception otherwise.
    
    It implements ->is_credit() as well.
    
    To test:
    - Apply this patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Account/Lines.t
    => SUCCESS: Tests pass!
    - Check all use cases are covered by the tests
    - Sign off :-D
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 46658a0e21594d1f7d76165d77297d4b5229fcab
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jun 26 11:51:41 2018 -0300

    Bug 20997: Add unit tests for Koha::Account::Line::apply
    
    This patch adds unit tests for the mentioned method.
    
    To test:
    - Apply this patch
    - Run:
      $ khell
     k$ prove t/db_dependent/Koha/Account/Lines.t
    => FAIL: The method is not already implemented!
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 13cc5d3161b2630027a2c04cbc11414e83a4842b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 11 13:35:28 2018 -0300

    Bug 21125: Shortcut moredetail.pl on nonexistent biblionumber
    
    This replaces the solution for 17.11 on bug 20927.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ef58eff737b2fdcb4f97c8667e2f83e7f7aa70c7
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jul 27 08:29:03 2018 +0200

    Bug 20661: (QA follow-up) Add POD for output_and_exit
    
    Resolve:
     FAIL   C4/Output.pm
       FAIL   pod
                    *** ERROR: Apparent command =cut not preceded by blank line  in file C4/Output.pm
       FAIL   pod coverage
                    POD is missing for output_and_exit
    
    Test plan:
    Run QA tools again.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ff21352a4a54a1b61f906aeffe7feef1506d4264
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Apr 25 17:08:42 2018 -0300

    Bug 20661: Shortcut circ scripts if a blocking error appeared
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    No test plan found ;)
    But tested bookcount and request-article.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 985eb929149737571e3830c837a127ab372e42fe
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jun 4 18:16:54 2018 +0000

    Bug 20647: (alternate) When ILL is enabled the hover effect on the ILL requests button is wrong
    
    This alternate patch adds a new icon to the sprite image which gives
    icons to the link on the staff client home page. It modifies the CSS
    positioning for all the links as the new image sprite is somewhat
    different.
    
    The SVG file from which the sprite image was generated is also updated,
    and the about page has been updated to give credit to the creator of the
    icon.
    
    Unrelated change: The cataloging link is moved to the second column.
    Although it's probably rare for all modules to be enabled and available,
    this puts the same number of links in each column.
    
    To test, apply the patch and clear your browser cache if necessary. With
    interlibrary loan enabled, view the staff client home page and confirm
    that all the module links look correct, including when you hover your
    mouse over them.
    
    Confirm that the about page lists the new icon under the "licenses" tab.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1da481f725e65c65e386c3b742d2f1e760f21a28
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri May 11 08:24:06 2018 +0200

    Bug 20683: Update German web installer for 18.05
    
    Adds translations for 2 new notices CANCEL_HOLD_ON_LOST and
    CHECKOUT_NOTE.
    Some small changes to older notices to match them with the
    English templates.
    
    To test:
    - Install German
    - Run the web installer on an empty database
    - Make sure all files install correctly and there are no SQL
      errors
    - Check notices were loaded correctly
    
    Signed-off-by: Mirko Tietgen <mirko@abunchofthings.net>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 12ff3717283098602eb4595d6bd242f9ea888a79
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 10 10:21:00 2018 +0000

    Bug 7143: Update about page for new dev - Vassilis Kanellopoulos
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2acbee523fbb311a63c4e3f9326fe410cf4ff832
Author: Vassilis Kanellopoulos <contact@kanellov.com>
Date:   Mon Nov 9 11:20:21 2015 +0200

    Bug 15136: Add homebranch of borrowed items to patron accounts tab
    
    Test plan:
    1 - View the accounts tab for a patron with fines
    2 - Note there is no homebranch displayed to see where charges came from
    3 - Apply patch
    4 - Reload the page and note that you see the 'Home library' column
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    Followed the test plan and it works.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 15fd90dcbc98cae6febfeab59df679b761111d42
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Feb 22 11:52:14 2018 +0100

    Bug 19633: Use alphanumeric error codes in upload
    
    The error codes 1 to 7 are used in Uploader.pm or tools/upload.pl.
    It would be nice to use alphanumeric codes instead.
    No behavior change expected.
    
    Test plan:
    [1] Run t/db_dependent/Upload.t
    [2] Verify that a regular upload with tools/upload.pl still works.
    [3] Rename upload_path in your koha-conf.xml. Restart Plack, flush the cache
        and try to upload to a category. Correct error message?
    [4] Upload the same file twice to the same category.
        Correct error message the second time?
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Brendan Gallagher <brendan@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Bug 19633: (QA follow-up) Really remove these ugly numbers
    
    See BZ comment5. We now remove the numbers also from the constant names.
    
    Test plan:
    Read the changes.
    Git grep "ERRCODE_"
    Run t/db_dependent/Upload.t (Note: You may see one failure here; it is fixed
    on bug 20727. So depends on who reaches master first.)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6ff01e3543fbe6f39739b01b64d2e0073cec75d5
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Jul 2 14:08:59 2018 +0200

    Bug 20468: (QA follow-up) Deactivate select/clear all for empty tab
    
    This only pertains to the second (Processing) tab.
    
    Test plan:
    [1] Have one entry in Pending and zero in Processing.
    [2] Click on Processing tab.
    [3] Without this patch, you would see Select all/Clear all.
        With this patch, you won't.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit db6fc9f024080d8114564490f75ba177c8ccb640
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Jun 6 13:38:36 2018 +0200

    Bug 20468: (follow-up) Cancel multiple items for same reason
    
    The repeated prompts for cancelling multiple selected items are
    confusing.
    The wording is slightly adjusted. The reason is asked only once per
    group of selected items.
    
    Test plan:
    Create three requests.
    Select two requests and cancel (from top menu) for reason A.
    Cancel third request (from item menu) for reason B.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 436f4b9e0eb19eea491ecc70a2a996a8297f3d33
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jun 1 16:28:29 2018 +0000

    Bug 20468: (follow-up) Changes to checkbox/menu interactions
    
    This patch makes a couple of minor interface changes and updates the way
    checkbox change events are handled:
    
     - jQueryUI tabs initialization sets a variable for "active table" which
       can be re-used by functions which affect only the visible table.
     - The batch "Actions" menu is shown or hidden based on whether there
       are checked items.
     - The item selection tools are shown or hidden based on whether there
       are rows in the table.
    
    To test, apply the patch and test various article request actions:
    
     - Single "process," "complete," and "cancel" operations.
     - Select all/ clear all operations on both tabs.
     - Batch operations with checked requests.
     - Process all pending requests to confirm the selection controls for
       that table are hidden.
     - Complete all processing requests to confirm the selection controls
       for that table are hidden.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0989d37c23d7d9a775d516395dbe69339928aff9
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Mar 22 15:47:45 2018 +0100

    Bug 20468: Add multi-select to staff article request form
    
    Adds a column with a checkbox. Adds buttons under the table for Select,
    Clear and Actions menu.
    An additional javascript function HandleMulti is placed between the form
    and the functions handling individual requests.
    
    Note: The Actions menu below does not contain Print slip. This does not
    work in its current form. This could be handled on a separate report.
    
    Test plan:
    [1] Enable Article Requests. Add a few requests.
    [2] Test the Select all / Clear all functionality on the form.
    [3] Verify that the menu options Process, Complete and Cancel work as
        expected both from the individual Actions menu as from the shared
        Actions menu for selected requests.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Patch applies and functions as described.
    Signed-off-by: Dilan Johnpullé <dilan@calyx.net.au>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d035a140b51be6f2dad8f5f760ac0e626f952be5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Aug 9 13:28:27 2018 +0000

    Bug 21188: Convert return_date to a DateTime object
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d7223370be6a056fea17a77bb397c5a1e89bcfe2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Aug 9 15:21:07 2018 +0000

    Bug 20427: (RM follow-up) Add compiled CSS
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e90b452bdd16b426e13e5108a1702164d5a3bf02
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Aug 9 14:04:51 2018 +0000

    Bug 20427: (follow-up) Bring SCSS up to date with latest LESS changes
    
    This patch catches the SCSS up to the latest changes in master:
    
    Changes to opac.less:
    
    Bug 20756
    Bug 20559
    Bug 7547
    
    Changes to print.less:
    
    Bug 16575
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2df87a94f5bcd538799b8684139525d79d8c0af5
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Mar 15 16:14:09 2018 +0000

    Bug 20427: Convert OPAC LESS to SCSS
    
    This patch converts the OPAC LESS files to SCSS. In the process of
    converting opac.less (and other .less files) to .scss, I have improved
    the completeness of the nesting, reordered properties, and in general
    done cleanup based on rules in .scss-lint.yml. All of these changes
    should have no impact on the style of the OPAC.
    
    This patch modifies the commands used to compile CSS so that OPAC and
    staff assets can be processed separately:
    
    'yarn build' <-- Builds the staff client assets by default
    'yarn build --view opac' <-- Builds OPAC assets
    
    To test, apply the patch and compile the CSS by running the command
    above (or apply the follow-up patch with compiled CSS).
    
    Do a thorough review of the OPAC, taking care to cover as many pages as
    possible and checking responsive behavior at the same time. There should
    be no visual differences in the OPAC before and after applying the
    patch.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 574bc788ab23e554c05742a4f0affabe671993e6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Aug 9 15:16:42 2018 +0000

    Bug 19474: (RM follow-up) Compiled css
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5b6dfd86ace90a5d56e7e9a8d3750ded3dc2a518
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jul 23 16:24:00 2018 +0000

    Bug 19474: (follow-up) Bring scss up to date with latest CSS changes
    
    This patch catches the scss up to the latest changes in master:
    
    Bug 19946
    Bug 20045
    Bug 20343
    Bug 18327
    Bug 20322
    Bug 18799
    Bug 20622
    Bug 20329
    Bug 20744
    Bug 20931
    Bug 20793
    Bug 20651
    Bug 20668
    Bug 16575
    Bug 19166
    Bug 20770
    Bug 21163
    Bug 20779
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 894571c36398dd6e5eb79b237c6686e9a04a7cfc
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Fri Jan 26 09:56:26 2018 +0000

    Bug 19474: (QA follow-up) Fix sass lint yaml configuration
    
    Test plan:
    QA tools should report green on the .sass-lint.yml file now
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5b35c97a841bd2a8a199dc81b70c12d1c1beb0a4
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Mar 13 13:57:36 2018 +0000

    Bug 19474: Convert staff client CSS to SCSS
    
    This patch converts staff-global.css to Sass, using SCSS syntax. This
    changes the build process for Koha to include installation and execution
    of yarn to install npm dependencies and run SCSS -> CSS conversion.
    
    To test, apply the patch and run the following:
    
    $ sudo apt-get install nodejs npm [not necessary in kohadevbox]
    $ sudo npm install -g yarn
    $ yarn install
    $ yarn build
    
    Clear your browser cache if necessary and confirm that CSS styling
    throughout the staff client looks correct.
    
    The "yarn build" command triggers a gulp process which compiles SCSS to
    CSS, adds automatic vendor-prefixing, and minifies the resulting CSS
    file.
    
    There is also a "yarn css" command available which might be used by
    developers who are making changes to SCSS. This command does two things
    differently:
    
    1. Adds .css.map files which aid CSS debugging using in-browser
       inspector tools.
    2. Compiles staff-global.css without minification. It can be useful to
       see unminified CSS during development, especially to see how SCSS
       compiles.
    
    This patch adds a configuration file for sass-lint, .sass-lint.yml.
    Currently this configuration is not used during the build process but
    can be used in a code editor which supports linting.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 537c30984fcd1cf3dc2efef43545fba0803e6b99
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue May 23 12:06:59 2017 +1000

    Bug 18586: Create module to mint RDF subject URIs
    
    Created the Koha::RDF module to mint URIs for RDF documents that
    represent Koha bibliographic records.
    
    _TEST PLAN_
    To test the module, just run 'prove t/Koha/RDF.t'.
    
    You'll get
    some warnings about not being able to find koha-conf.xml, but
    you can safely ignore them or you can point to any koha-conf.xml
    file since it's not used by the test in actuality.
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Works as expected. No warnings when run like:
    sudo koha-shell -c "prove t/Koha/RDF.t" kohadev
    
    Signed-off-by: Brendan A Gallagher <brendan@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5260482a619fa5aa88e83a8c2c3afe1b159ad5fa
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Apr 5 11:53:07 2018 +0000

    Bug 20779: Style refresh for patron detail page
    
    This patch makes style and markup changes to the patron detail page
    template in order to make the display of information somewhat more
    compact and to increase the visibility of the edit controls.
    
    To test you should enable the patronimages system preference. Apply the
    patch and view the detail page for a patron.
    
    - Check that the page looks correct and that sections like "Alternate
      address" and "Alternative contact" are empty when there is no data.
    - Check that the "Manage patron image" tool works correctly.
    
    Signed-off-by: Cab Vinton <director@plaistowlibrary.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1b43cab3dd4fb34e4c3a1509415057448496eb82
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jul 30 17:33:29 2018 +0000

    Bug 21132: Highlight active filters on saved report page
    
    This patch adds a more obvious way of see which search terms have been
    submitted to filter the table of saved reports.
    
    The patch also moves embedded CSS into a separate file.
    
    To test you should have multiple saved reports.
    
    - Apply the patch and go to Reports -> Use saved.
    - Filter the table of reports by submitting one or more terms in the
      sidebar "Filter" form.
    - Confirm that the terms you submit are shown at the top of the table of
      results.
    - Confirm that clicking the "Clear" link clears the search filter.
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    Followed the test plan and it works.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ac0f3b880a4220317ddde107c508c32f75b09aa1
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu May 18 21:07:11 2017 -0400

    Bug 18635: Unit tests
    
    I also adjust a few tests that assume value of $nb_of_patrons to not
    rely on existing datas
    
    To test:
    1 - Apply this patch only
    2 - Prove t/db_dependent/Koha/Patrons.t
    3 - Tests fail
    4 - Apply other patch
    5 - Tests pass
    
    Signed-off-by: Marc Véron <veron@veron.ch>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fe6cb85c5580b582a0047769d88be23757df0ef5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu May 18 21:08:22 2017 -0400

    Bug 18635: Koha::Patron->guarantees() should return results alphabetically
    
    To test:
    1 - Add the same guarantor to a number of patrons, ensuring random order
    alphabetically
    2 - View the guarantors record, note unordered list of guarantees
    3 - Apply patch
    4 - Guarantees are alphabetical
    
    Signed-off-by: Marc Véron <veron@veron.ch>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit af82a1d59709d02b767613539146b59fa10c3ab3
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Jul 3 15:52:05 2018 +0200

    Bug 21033: Remove few warns in acqui/basket.pl
    
    Resolve (line numbers based on 16.11.x):
    Use of uninitialized value in hash element at acqui/basket.pl line 337.
    Use of uninitialized value in hash element at acqui/basket.pl line 338.
    Use of uninitialized value in hash element at acqui/basket.pl line 340.
    Use of uninitialized value in hash element at acqui/basket.pl line 342.
    Use of uninitialized value in hash element at acqui/basket.pl line 344.
    
    Argument "" isn't numeric in multiplication (*) at koha-tmpl/intranet-tmpl/prog/en/modules/acqui/basket.tt line 486.
    Argument "" isn't numeric in multiplication (*) at koha-tmpl/intranet-tmpl/prog/en/modules/acqui/basket.tt line 591.
    
    Test plan:
    If you have older acq data, you may have records in aqorders with field
    tax_rate_on_ordering is NULL. These orders will trigger the above warns.
    If you do not have, you could simulate by setting this field to NULL.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9d4c7350612dfb941a84a0e62ffe3efe19ccc4f8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jul 19 15:13:55 2018 +0000

    Bug 20828: Step 4 of moremember is used for Housebound and additional attributes
    
    This patch modifies the patron edit process so that "Housebound roles"
    can be edited as a separate step.
    
    To test, apply the patch and open an existing patron's detail page
    (moremember.tt). Test the "edit" links for 'Housebound roles' and
    'Additional attributes and identifiers' and confirm that each opens its
    own edit page, and saving changes works correctly.
    
    Signed-off-by: Cab Vinton <bibliwho@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bf9527457fb31012b65514a36f8f4001157771b4
Author: David Bourgault <dav.bour@gmail.com>
Date:   Tue May 1 14:03:52 2018 -0400

    Bug 20660: Return date override affects debarments in AddReturn
    
    Re-did the patch to follow best practices.
    
    TEST PLAN:
    0. Apply first patch only
    1. prove t/db_dependent/Circulation.t
    2. Apply second patch
    3. prove t/db_dependent/Circulation.t
    
    prove should fail the first time and pass the second time.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8d9eb9734f2584c7b5f92689ecbd9a3adba173fd
Author: David Bourgault <dav.bour@gmail.com>
Date:   Tue May 1 14:01:50 2018 -0400

    Bug 20660: Test AddReturn with $return_date override
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f16fb888f132703063f0591e329d72d065f4b1d9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 4 15:05:25 2018 -0300

    Bug 21035: Handle new lines when running reports
    
    See https://metacpan.org/pod/Text::CSV_XS#Embedded-newlines
    
    Test plan:
    
    1) Choose two items, say barcode '123' and '456'
    2) Change the public note on 123 to read
    
    Line1
    Line2
    
    (I.e. type 'Line1', then press Enter, type 'Line2' and click update).
    3) Change the public note on 456 to read
    
    Public note has one and only one line.
    
    Click update.
    4) Create a report with the followng query:
    
    select barcode, itemnotes from items where barcode in ( '123', '456' )
    
    Let's say that this is report number 10.
    
    5) run ./misc/cronjobs/runreport.pl --format=csv REPORT_ID:
    
    => You should see both lines
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    Followed the test plan and it works.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f4cf075fbea353a5cbf11aaead37c92eac8179b2
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon Jul 30 14:35:40 2018 +1000

    Bug 21131: Remove the TinyMCE.isDirty() check that caused unexpected behaviour
    
    When using the WYSIWYG editor for system preferences, the editor only
    updates the textarea element if the content is different from the
    original content. This means if you change a system preference and
    then change it back to the original content, the textarea will have
    the 2nd last change you made.
    
    This patch removes the TinyMCE.isDirty() check, which was responsible
    for comparing the original and changed content. Every input/keydown/dragend
    or TinyMCE command will cause the textarea element to be updated and
    trigger the input event which causes the "modified" class to be added
    to the element, so that the system preference can be saved.
    
    __TEST PLAN__
    
    _Before applying_
    0. Change "UseWYSIWYGinSystemPreferences" to "Show"
    1. Change "opaccredits" to "123a"
    2. Click "Save all OPAC preferences"
    3. Reload the page
    4. Change "opaccredits" to "123"
    5. Change "opaccredits" to "123a"
    6. Click "Save all OPAC preferences"
    7. Reload the page
    8. Note that "opaccredits" says "123"
    
    _Apply the patch_
    
    _After applying_
    1. Change "opaccredits" to "123a"
    2. Change "opaccredits" to "123"
    3. Click "Save all OPAC preferences"
    4. Reload the page
    5. Note that "opaccredits" says "123" (and not "123a")
    6. Change "opaccredits" to "1234"
    7. Click "Save all OPAC preferences"
    8. Reload the page
    9. Note that "opaccredits" says "1234"
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ff3987c023a658e63e46ea8601666916287c8ec5
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jul 27 17:22:54 2018 +0000

    Bug 19291: Make breadcrumbs for OPAC search history consistent with other patron account pages
    
    This patch adds the logged-in patron's name to the search history page's
    breadcrumb navigation.
    
    To test, apply the patch and view the OPAC search history page with no
    user logged in. The breadcrumbs should read:
    
    - Home ->  Search history
    
    Log in and return to the search history page. The breadcrumbs should
    read:
    
    - Home -> Owen Leonard -> Your search history
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    Followed the test plan and it works.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=21137
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5abcd3312adc02a14465a0781f735b8494d60f42
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 31 12:14:54 2018 -0300

    Bug 21056: Add another flush later
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 76a06a7050643add32f4cbccbdc2fb00f66f5485
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Jul 9 14:05:29 2018 -0400

    Bug 21056: Changing the logged in library can fail sporadically
    
    We are getting reports that sometimes changing the logged in library via selectbranchprinter.pl sometimes appears to fail. Flushing the session after updating the branch appears to fix this.
    
    Test Plan:
    1) Change your logged in library repeatedly. Hopefully ( sort of ) it will fail to change.
       You may want to try various browsers.
    2) Apply this patch
    3) Note the change no longer fails
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e8e29d3140007b9b92d97ed2f1df7445c6eeb4f9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 6 15:26:49 2018 -0300

    Bug 21141: Handle non-existent itemnumbers in batch item modification/deletion
    
    The itemnumber list passed from a file in the batch item
    modification/deletion tools is not tested.
    Like barcodes we should make sure they refer to a valid items in the DB.
    
    Test plan:
    - Create a file with barcodes, itemnumbers and random lines
    - Use the batch item modification and deletion tools with this file
    You should see a table with a list of invalid barcodes and itemnumbers.
    
    Without this patch you got the following error:
    Can't call method "title" on an undefined value at
    /home/vagrant/kohaclone/tools/batchMod.pl line 580
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6e7fd122147bafcd2b66c1ecfde2e9be1cdcccef
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 16 11:21:48 2018 -0300

    Bug 21050: Fix datepickers on LabelItemSearch
    
    calendar.inc must be in the jsinclude block when jsfooter is set
    
    Test plan:
    - Open or create a label batch.
    - Click "Add items" to trigger the pop-up search window.
    - Date picker should work now
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 62aacb5865719e27224bf8f1963de1888d2ca05d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Aug 2 13:46:31 2018 +0000

    Bug 21148: Dropdowns styled by the Select2 plugin do not highlight missing required fields
    
    This patch adds some CSS to target mandatory fields on the add item
    screen which are styled by the Select2 plugin.
    
    To test you must have at least one item field marked mandatory and
    linked to an authorized value.
    
    Open the add item form for an existing record. Try to submit the form
    without making a selection in the mandatory dropdown. You should get an
    alert warning you that you have empty mandatory fields, and the field
    should be highlighted in yellow.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 948566e7f36a75a186f96b5ee07b5120a5413ca5
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Thu Aug 2 16:11:07 2018 +0000

    Bug 21154: Remove unused subs from C4::Serials
    
    Test plan:
    Run these commands, grep should not return any occurences, prove should
    return green:
    
    git grep GetSerialStatusFromSerialId
    git grep GetDistributedTo
    git grep SetDistributedTo
    git grep SetDistributedto
    git grep in_array
    git grep is_barcode_in_use
    
    kshell
    prove t/db_dependent/Serials.t
    
    Signed-off-by: Pierre-Luc Lapointe <pierreluc.lapointe@inLibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 70bfac5ce5ee8e806015861d6cb473dfe1ee80b6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Aug 8 21:24:56 2018 +0000

    Bug 7143: Update timeline (2 new devs)
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c0eb67a5572294c33e3f82c928e1cad709cb1c3a
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Thu Aug 2 06:45:26 2018 +0000

    Bug 21145: Do not show buttons for datatables on opac detail page
    
    Test plan:
    0) Do not apply the patch
    1) Go to opac detail page
    2) There are up to three datatables
        - items
        - items from other branches (only if there are any and the OpacSeparateHoldings preference is set)
        - subscriptions
    3) try to find record with all three tables and confirm, there is button
    "Columns visibility" above the table
    4) Apply the patch
    5) Repeat 1-3 and confirm the button is no more here
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6e5865ee4feaca3ca5575ce45d11fc88d88dc43d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jul 13 15:13:31 2018 +0000

    Bug 21075: Unit tests
    
    prove -v t/db_dependent/Reserves/AutoUnsuspendReserves.t
    
    Signed-off-by: Pierre-Luc Lapointe <pierreluc.lapointe@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c0f7aed84d663029b2f1b37ce0391b5a40b10b97
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jul 13 14:45:55 2018 +0000

    Bug 21075: AutoUnsuspendHolds should unsuspend holds <= today
    
    To recreate:
     1 - Place a hold in your system
     2 - Set that hold (or all holds) to expire today
        update reserves set suspend_until=CONCAT( CURDATE()," 00:00:00");
     3 - Run misc/cronjobs/holds/auto_unsuspend_holds.p
     4 - Note the hold is sitll suspended
     5 - Visit /cgi-bin/koha/reserve/request.pl for the book with the hold
     6 - Note the suspend date is tomorrow (and cannot be set to today]
     7 - Click update holds - the date in db is now set to tomorrow
     8 - Reset to today
     9 - Apply patch
    10 - Run the cron again
    11 - Visit the page and note hold is unsuspended
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 68e735b10151d7b70187fa7f9d4ecb2b94b34e6a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 20 12:59:16 2018 -0300

    Bug 21099: Reposition floating toolbars earlier
    
    To recreate:
    - Go to the advanced search form
    - scrolldown to position the toolbar on top of the window
    - scrollup
    
    https://screenshots.firefox.com/NnkFg3iOXqLPxfkd/pro.kohadev.org
    
    The toolbar should have been repositioned earlier
    
    Test plan:
    Edit a patron
    - scrolldown
    - scrollup
    - unfold the form in the header (tab "Search patrons", link "[+]")
    - scrolldown
    - scrollup
    Advanced search
    scrolldown
    scrollup
    
    You should notice the difference with and without this patch
    
    Signed-off-by: Pierre-Luc Lapointe <pierreluc.lapointe@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b1e8193a84a8df6d70ad8de16dadb8c4301a706b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jul 27 09:42:06 2018 +0200

    Bug 21048: (QA follow-up) Fix authorized value statuses in filter
    
    If you select an authorized value status in the filter, you want to keep
    it too just like normal statuses as CHECKED.
    The variable selected_status was not filled. The minimal fix is adding that
    template variable in the script. Note that suggestion.STATUS is out of scope
    within a loop using suggestion as loop var.
    
    Note: Adding a regular status like CHECKED as an authorized value with
    same code but another description works, but is kind of confusing ;) Not
    in the scope of this report though.
    
    Test plan:
    Select an authval status in the filter. Apply the filter and verify again
    that it is still selected under Suggestion information.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b25c063f950076234cf7bb4a496921983a7cc23f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 11 18:23:49 2018 -0300

    Bug 21048: Fix display of suggestion's status (SUGGEST_STATUS)
    
    When a suggestion's status is set to a customized value (AV
    SUGGEST_STATUS), the description is not always displayed correctly.
    
    Test plan:
    - Create different values for the AV SUGGEST_STATUS
    - Create several suggestions
    - Change the status using the SUGGEST_STATUS values
    - Edit the suggestion and change again the status
    - View the suggestions for a given patron
    (members/purchase-suggestions.pl?borrowernumber=XX), the statuses must
    displayed correctly
    
    Signed-off-by: Lisette Scheer <lisetteslatah@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4b9021895a46bda5234cd6c852f339ba7cd4d882
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jul 16 17:24:04 2018 +0000

    Bug 21041: "Merge patrons" button remains disabled with "Select all" option
    
    This patch modifies the JavaScript functions for the select all/clear
    all links so that each action triggers the "change" event, required to
    enable or disabled the "merge selected patrons" button.
    
    To test, apply the patch and perform a patron search which will return
    multiple results.
    
     - Test the "select all" and "clear all" links, and confirm that the
       "Merge selected patrons" button is enabled and disabled.
     - Test that checking and unchecking multiple checkboxes still works
       correctly to enable and disable the button.
    
    Signed-off-by: Pierre-Luc Lapointe <pierreluc.lapointe@inLibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 039d10044ce16f5a45ab35b79ea69d0526a1a519
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Aug 1 15:51:22 2018 +0000

    Bug 21151: Fix SRU search fields mapping pop-up
    
    The SRU search fields mapping pop-up comes up as a blank white
    page.
    
    To test:
    - Go to Administration > Z39.50/SRU servers
    - Modify or create an SRU server
    - Click on the 'Modify' button to change mappings
    - Verify the new window that opens is blank
    - Apply patch
    - Verify the pop-up now is no longer blank but works
      correctly.
    
    Bonus: Spottd some HTML errors while looking for the
           problem. Also fixed in the patch.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 838c8ea5ff3c6ae399c4e23018aaf83fb10f96ab
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Mar 16 11:36:46 2018 +0100

    Bug 19436: (QA follow-up) see 19608 Fix use of intranet-bottom in template
    
    Bug 19608 incorrectly replaced intranet-bottom by popup-bottom.
    Adjusting the new template in the same way.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 15088c67d6c1960e98c216321985d667ccf26706
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Mar 16 09:52:19 2018 +0100

    Bug 19436: (QA follow-up) Revert change in _handle_one_result
    
    See Bugzilla comment 7. This change does not belong here and is
    dubious on its own. Needs further attention on another report.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Amended: In consultation with the author the same change is applied to the
    corresponding lines in Z3950SearchAuth.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7baa452a6a1609fae801802889dffe9ece32c20d
Author: Matthias Meusburger <matthias.meusburger@biblibre.com>
Date:   Wed Feb 7 16:02:35 2018 +0100

    Bug 19436: Add SRU support for authorities
    
    Test plan:
     - Apply the patch
     - Add an SRU authority server in admininistration -> Z39.50/SRU servers
       You can try with the French national library, configured as such:
       Hostname: catalogue.bnf.fr
       Port: 80
       Database: api/SRU
       Syntax: Unimarc
       Record type: authority
       Additional SRU options: version=1.2,sru=get
       SRU Search fields mapping example:
            Keyword (any): aut.anywhere
            Name (any): aut.anywhere
            Author (any): (aut.type any "pep org") and aut.accesspoint
            Author (personal): aut.type=pep and aut.accesspoint
            Author (corporate): aut.type=org and aut.accesspoint
            Author (meeting/conference): aut.type=org and aut.accesspoint
            Subject heading: (aut.type any "geo ram_nc ram_ge ram_pe ram_co") and aut.accesspoint
            Subject sub-division: aut.type=ram_pe and aut.accesspoint
            Title (any): (aut.type any "tic tut tum ram_tp ram_tu") and aut.accesspoint
            Title (uniform):(aut.type any "tut tum ram_tu") and aut.accesspoint
    
     - Try a search from Authorities -> New from Z39.50/SRU
     - Check that the authority is correctly displayed in "Show Marc"
     - Check that the authority is correclty added to koha in "Import"
     - prove t/db_dependent/Breeding.t
    
    Signed-off-by: François Pichenot <fpichenot@ville-roubaix.fr>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 76603cc6b077cc9bc45bdc3688a94d290680777b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Aug 6 14:34:12 2018 +0000

    Bug 21163: Basket group detail page layout is broken
    
    This fixes a problem with layout of the page when viewing a closed
    basket group. Changed the grid options for basket information when a
    basket group is closed.
    
    To test, apply the patch and go to Acquisitions -> Vendor -> Basket
    groups. You should have multiple baskets and basket groups to test with.
    
    - Edit an open basket group. The layout should look correct, with basket
      group information in the form in the left column and ungrouped basket
      in the right column. Grouping and ungrouping baskets should work
      correctly.
    - View a closed basket group. The basket group information should
      display in a single column that spans the main part of the page.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1d888c8d0e9ee2eda9c793cf75fd73a7afeaef16
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 11 11:29:15 2018 -0300

    Bug 21018: Allow uris defined in the item
    
    We need to search for uri defined for the itemnumber we passed in
    parameter.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d14ed73744fa23d4ed649da6d847f4b37cdfce92
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 29 10:29:30 2018 -0300

    Bug 21018: Fix TrackClicks for 952$u
    
    Caused by
      commit 51b6cf2aafbfb45b9fcb072403b986fe3c2add53
      Bug 19847: Track links within the records and 404 for others
    
    We should also accept uri stored in items.uri (952$u)
    
    Test plan:
    - Turn on TrackClicks
    - Defined uri for some items
    - At the OPAC click on the link (from opac-detail.pl)
    => Without this patch you will get 404 (redirected from tracklinks.pl)
    => With this patch applied you will be redirected correctly and the
    linktracker will be filled correctly
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 038e4011d4e4c1270592d476479062467a7a9be8
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Aug 2 15:56:11 2018 +0200

    Bug 14662: Add empty entries to pull downs in cataloguing form for mandatory subfields
    
    First patch deals with the problem on the item form, this
    patch fixes the same problem on catalouging form for the
    bibliographic record.
    
    To test:
    - Adapt your frameworks:
      - Make sure 942$c is mandatory
      - Link another field to an authorised value, for example: 942$n to YESNO
    - Add a new record
      - Verify that the first value of each pull down is preselected,
        there is no way to trigger the 'required' error
    - Apply patch
      - Add a record
        - Verify that classification source is preselected according to the
          DefaultClassificationSource system preference
        - Verify that 942$c now defaults to empty
        - Verify all your other mandatory subfields can be set to empty
        - Verify that you can't save before correctly setting them
      - Chane your frameworks
        - Add a default value for 942$c, for example: CF
      - Add another record
        - Verify the itemtype is now preset to your default itemtype
      - Edit an existing record, verify all values show correctly
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 003a4439802bc4053ed9e5db7719434256788b29
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Jul 31 23:58:33 2018 +0000

    Bug 14662: Add empty entries to pull downs on item form for mandatory subfields
    
    The code assumed that if a subfield is marked as mandatory, there should be no
    empty entry in the pull downs.
    
    This assumption is not correct, as it leads to the first entry of the
    pull down being preselected if there is no default set. Which means you
    will never be alerted of any cataloguing errors and errors will be very
    hard to find later on.
    
    Correct behaviour would be to preselect the empty value when there is
    no default. This means on saving the item an error message is triggered
    and the cataloger is forced to set the value.
    
    To test:
    - Adapt your frameworks:
      - Make 942$c non-mandatory
      - In 952 make itemtype, classification source and some other pull downs
        like location or collection mandatory
    - Add a new item
      - Verify that the first value of each pull down is preselected,
        there is no way to trigger the 'required' error
    - Apply patch
      - Add a new item
        - Verify that classification source is preselected according to the
          DefaultClassificationSource system preference
        - Verify that the itemtype is preselected according to 942$c in
          the bibliographic record
        - Verify all mandatory fields can be set to empty
        - Verify that you can't save before correctly setting them
      - Change the 942$c in the record to empty
      - Add another item
        - Verify the itemtype is now empty
      - Change your frameworks and set a default for itemtype (Ex: BK)
      - Repeat default check with another pull down like collection or location
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    We do not want empty values for branches (holdingbranch and homebranch
    must be mandatory, see bug 21011)
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d463a1b3473106a0b501d6247afdc0f7f84a4ff4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 2 11:47:24 2018 -0300

    Bug 21149: Fix superlibrarian creation in onboarding
    
    See bug 21087 for more details.
    
    Test plan:
    Drop your DB
    Start the installation process
    Use the onboarding process to install missing data
    The superlibrarian created during this process should be created
    sucessfully and allowed to login
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c6b50f0bac092779f93033c8a3f002cb8722d7d4
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue Jul 3 19:04:50 2018 +1000

    Bug 21031: Apache Rewrite rules don't work for API when using anything but Debian package Plack configuration
    
    The Rewrite rules for Apache don't work unless you're using
    debian/templates/apache-shared-opac-plack.conf or
    debian/templates/apache-shared-intranet-plack.conf.
    
    This patch fixes the Rewrite rules for the non-Plack Debian
    Apache configuration templates as well as the standard
    Apache configuration file that comes with Koha.
    
    __BEFORE APPLYING__
    1. Visit /api/v1/app.pl/api/v1/spec on your git dev install
    2. This should display a large page of JSON
    3. Visit /api/v1/spec on your git dev install
    4. This should generate a 404 error
    
    __APPLY PATCH__
    
    __AFTER APPLYING__
    5. Visit /api/v1/app.pl/api/v1/spec on your git dev install
    6. This should display a large page of JSON
    7. Visit /api/v1/spec on your git dev install
    8. This should display a large page of JSON (identical to
    the one from earlier steps)
    
    Signed-off-by: Ere Maijala <ere.maijala@helsinki.fi>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Passed QA with few notes posted separately to Bugzilla.
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 552873f7d466abee6919414b8d2f5e6c99f9a44f
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue May 15 16:00:02 2018 +0100

    Bug 20770: ILL loans OPAC form notes field allow arbitrary input
    
    This patch addresses the lack of sanitization of the "notes" field on
    the OPAC "View Interlibrary loan request" page.
    
    To test:
    
    - Apply the patch
    - As an OPAC user, create an ILL request
    - Navigate to the request's "View Interlibrary loan request" page
    - Add the following note:
    
      Hello
      <h1>TESTING</h1>
      <script>alert('pwned');</script>
    
    - Click "Submit modifications"
    - TEST: Observe, when the page reloads, only the following is preserved in the
    "Notes" textarea:
    
        Hello
        TESTING
    
    - As a staff user, naviate to the ILL requests table
    - Select "Manage request" for the request you created
    - TEST: Observe that the Notes field only contains:
    
        Hello
        TESTING
    
    - TEST: Observe that no Javascript alert is displayed
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 10720d2a5c50b82d565cab9ad70c8498164d81b2
Author: Liz Rea <liz@catalyst.net.nz>
Date:   Thu Jul 26 16:26:15 2018 +1200

    Bug 21122: Fix check-url-quick when utf8 characters in URL's
    
    To test:
    
    Make a record with a URL that has a UTF8 character, such as:
    http://some.nonexistent.tld/MāoriWomenAotearoa.pdf
    Run the check-url-quick.pl job, notice it dies at that URL
    Apply this patch
    Test again, it should work.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6e0548cc1a7a924731bd414fec2f7917f044040a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jul 19 16:57:42 2018 +0000

    Bug 21094: Syndetics: always use https instead of http
    
    This patch removes the 'using_https' check in OPAC templates in calls to
    Syndetics resources. Instead, https is always used.
    
    To test, apply the patch and enable Syndetics-related preferences. View
    the following pages in the OPAC:
    
    - Bibliographic detail page
      - Browse shelf section of the bibliographic detail page
    - Search results
    - List contents
    - Recent comments
      - Recent comments RSS
    - User summary page
      - Circulation history
    
    NOTE: I tested with made-up Syndetics credentials. This means my changes
    didn't make the template explode, but it doesn't confirm conclusively
    that the resources work.
    
    Signed-off-by: John Doe <you@example.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0b89cbf6a473e71597bc051d88c2152531648ad8
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Jul 15 19:27:03 2018 +0200

    Bug 21077: Fix database documentation for statistics.type
    
    There's a typo for 'locause', this should be 'localuse'.
    Also, 'Credit*' is never used.
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b7fa3b9b43bce1bae3d7fcdc76775cc84b83433d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 1 09:59:01 2018 -0300

    Bug 21136: Fix add/edit patron when cities are defined
    
    Same as bug 21085.
    
    When cities are defined, there is a select with name="select_city" added
    to the DOM and its value will be passed to memberentry.pl
    We must remove it from the attribute list before creating the
    Koha::Patron object
    
    No property select_city for Koha::Patron at
    /usr/share/perl5/Exception/Class/Base.pm line 73
    
    Test plan:
    Define cities
    Add or edit a patron, save
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d65ab39699c0406f7438e2c7f1d0d36e233f2d7b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 31 10:09:40 2018 -0300

    Bug 21129: Fix typo created vs created_by
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 336c54860531253d860165dc9a6d406892b1600a
Author: Philippe Blouin <philippe.blouin@inlibro.com>
Date:   Fri Jul 27 11:41:16 2018 -0400

    Bug 21129: New ALTER IGNORE TABLE entries need correction in updatedatabase.pl
    
    Bug 17234 made an effort to remove the ALTER IGNORE from updatedatabase.pl so that it could work with Mysql 5.7.  But new entries have since been added to it:
    
    Bug 12395 - 18.06.00.005
    Bug 19524 - 18.06.00.006
    Bug 13560 - 18.06.00.008
    
    This is corrected using column_exists to validate the existence of the new columns before ALTER
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ce96080f3005be5a63c9f2cab8d4b6c81e9b5b27
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 31 15:24:10 2018 -0300

    Bug 21133: Fix use statements order
    
    Basically the idea is:
    1. Undefined subroutine &C4::Items::ModZebra called at /home/vagrant/kohaclone/C4/Items.pm line 302.
    
    => Then use C4::Items before C4::Biblio
    
    2. Undefined subroutine &C4::Circulation::GetItem called at /home/vagrant/kohaclone/C4/Circulation.pm line 1290
    
    => Then use C4::Circulation before C4::Items
    
    And sometimes these 2 rules do not work...
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 96f253d5ed2f1770b42f06554ebb4c4e14b3afdf
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Tue Jul 3 13:57:00 2018 +0000

    Bug 21032: Fix using facet for searches made on specific index
    
    Test plan:
    
      - Try a simple search (OPAC or staff) like "title:foo",
      - click on a facet: badaboum!
      - apply this patch,
      - retry
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c8996047684d70fcd8dafa9176f6dc409c934459
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 31 12:36:35 2018 -0300

    Bug 21133: Add missing use C4::Accounts statement in Koha/Patron.pm
    
    It's a follow-up of
      commit 9c6f634469de4364d71bc0eb7520d04ead61fd00
      Bug 16912: Koha::Patrons - Move AddEnrolmentFeeIfNeeded to->add_enrolment_fee_if_needed
    
    One of the known issue:
    > update categories set enrolmentfee=2;
    The use misc/devel/create_superlibrarian.pl to create a new
    superlibrarian patron
    
    Signed-off-by: Victor Grousset <victor.grousset@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6e99cfbca7e904b7664163838a334c487c94e462
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 31 12:43:54 2018 -0300

    Bug 21134: Correctly throw the exception in Koha::Patron::Modification->approve
    
    koha_1       |     # Looks like you planned 20 tests but ran 9.
    koha_1       |
    koha_1       | #   Failed test 'approve tests'
    koha_1       | #   at t/db_dependent/Koha/Patron/Modifications.t line
    259.
    koha_1       | [Something went wrong]# Looks like your test exited with
    255 just after 5.
    koha_1       | [21:13:47] t/db_dependent/Koha/Patron/Modifications.t
    .....................
    
    "Something went wrong" should never been thrown,
    Koha::Patron::Modification->approve raises $@, but it's not defined, it
    should raise $_ instead
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a5492ce96bf4cbf93b91014b8b1b0fbb839a5084
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 31 08:30:53 2018 -0300

    Bug 19166: Remove 'IF NOT EXISTS' in kohastructure
    
    The table is removed just before, this clause is useless.
    
    It also fixes a test:
    t/db_dependent/Creators/Lib.t .. 1/645
      #   Failed test 'get_table_names return all tables matching'
      #   at t/db_dependent/Creators/Lib.t line 1258.
      #     Structures begin differing at:
      #          $got->[10] = 'aqinvoice_adjustments'
      #     $expected->[10] = 'aqinvoices'
      # Looks like you failed 1 test of 645.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4d45bd575569880676a212655d3d747f368697e4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 31 08:21:00 2018 -0300

    Bug 19604: Fix perlcritic "Loop iterator is not lexical"
    
    Loop iterator is not lexical at line 318, column 13.  See page 108 of
    PBP.  (Severity: 5)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dec983ec1b12de0e95aa0d64fc6e32a9d5b3fece
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 30 22:51:32 2018 -0300

    Bug 21087: (QA follow-up) Fix usage in create_superlibrarian.pl
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9add683d82b1a6db3cf62be5dca8d16c4d328207
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 25 19:09:01 2018 -0300

    Bug 21087: Fix create_superlibrarian.pl script
    
    Signed-off-by: John Doe <you@example.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 135cb68db39d1eed8db6fe2ad31d1e62f8579dab
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 25 10:38:48 2018 -0300

    Bug 21087: Do not store the password in ->store for existing patrons
    
    When ->store is called on an existing patron we must not save the
    password, but keep the one in DB instead.
    There is a dedicated method (update_password) to call when the password
    need to be updated
    
    Signed-off-by: John Doe <you@example.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ce1f9033fbdccb883673577868fa6d74e357cf60
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 25 10:37:57 2018 -0300

    Bug 21087: Fix one wrong call
    
    Signed-off-by: John Doe <you@example.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2e6fb40ef8296ba474e8338c4a55cc2804aa73be
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 18 19:54:34 2018 -0300

    Bug 21087: Hash passwords in ->update_password
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: John Doe <you@example.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3d41d947d2760e0502607ddad20e13f2dd8677d0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 18 19:14:40 2018 -0300

    Bug 21087: Test to describe the issue
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: John Doe <you@example.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7248191cee3a7981416253d4035533a39f07cbab
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jul 24 14:48:27 2018 +0000

    Bug 20287: (RM follow-up) Restore use C4::Members
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ba8155f7d011a3829d2d736d79c9036362191bd5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jul 23 14:58:05 2018 +0000

    Bug 11911: DBRev 18.06.00.012
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2f94da74c5f48ca3f7253b3de3a4a5ee8fa70b5e
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon May 28 23:56:51 2018 +0200

    Bug 11911: (follow-up) Hide suggestion box on acq start page if no permission
    
    When the user is not superlibrarian or has the manage_suggestions
    permission, the suggestion box on the left of the acq start page
    needs to be hidden.
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b8a2365a3455a70ef8bdcb99e74b419bc4572b96
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri May 18 10:40:21 2018 +0000

    Bug 11911: Add a separate permission for managing suggestions
    
    Without this patch only catalogue permission was required
    for managing suggestions. This patch adds a new permission
    in the acquisition module do manage suggestions and updates
    staff user permissions accordingly.
    
    To test:
    - Make sure there is a pending suggestion
    - Create a few users with different permission sets:
      - User 1: only catalogue
      - User 2: any acquisition permission
      - User 3: cataloguing permission
    - Check all of them can access: /cgi-bin/koha/suggestion/suggestion.pl
    - Apply the patch
    - Verify all of them now have the suggestions_manage permission
    - Verify everything displays correctly on:
      - intranet start page
      - patron account in staff
      - acquisition start page
      - suggestion page (try to access by URL too)
    - Remove suggestions_manage for a staff user
    - Repeat tests above, access should be denied/links not visible
    
    Bonus:
    - Fixes the link on the acquisition start page for late orders
      to mage the permissions of the page itself: order_receive
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1ea7d9790d31ecf52dcf6d9070650b4cab77b17b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jul 23 15:18:01 2018 +0000

    Bug 17698: DBRev 18.06.00.011
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d90ff21454ed1d2f9682cbbfa7e07c87381a3257
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 13 10:52:33 2018 -0300

    Bug 17698: Do not send pending_checkout_notes from all circ scripts
    
    It's safer to send what we need from C4::Auth it's needed from a whole
    module.
    The SELECT COUNT(*) query will only be done when needed (so not made
    from scripts outside of circ)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 419470d3cd9513e7e210dd893d69ec5bb9c45f94
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 13 10:18:17 2018 -0300

    Bug 17698: (QA follow-up) few more things
    
    1. body tag was missing
    2. make "Date" column sortable correctly
    3. remove CDATA and type="text/javascript"
    4. Handle server-side errors
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ac00c7a30d7a741184440938081902af170dca14
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Jun 12 23:10:24 2018 +0000

    Bug 17698: (follow-up) Fixing things in Comment 57
    
    3. In the JS console: "ReferenceError: $ is not defined", I did not
    investigate it.
    
    Where do you see this in the console? I cannot recreate on opac-user.pl
    or on circ/checkout-notes.pl.
    
    5. The alert id=error is displayed then hide in JS, but it's then
    displayed half a second. We should hide it by default (css)
    
    Fixed in this patch
    
    6. I would move the "mark seen" and "mark not seen" buttons at the
    top of the table
    
    Fixed in this patch
    
    8. Cursor on "Select all" and "Clear all" links must be adjusted
    
    Fixed in this patch
    
    9. $(".btn-xs").click(function(event){
    The selector should be $("button.seen, button.notseen"), you
    do not want to apply this function to all other btn-xs on
    the page (maybe there are only two for now, but who knows
    later?)
    
    Fixed in this patch
    
    12. Important: When a note is updated, it's still marked as
    seen. Is it the expected behavior?
    
    I don't see this behaviour. When a note is updated it is
    marked as not seen.
    opav/svc/checkout_notes:79: $issue->set({ notedate =>
    dt_from_string(), note => $clean_note, noteseen => 0
    })->store;
    
    13. What will happen when hundred of notes will be on this
    table? Not blocker but we will need a "hide seen" buttons to
    filters the already seen notes.
    
    Added in this patch
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1434d0aad0b41ff6cf7d931a5310698468ef1f85
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jun 12 17:02:30 2018 -0300

    Bug 17698: (QA follow-up) Fix minors design issues
    
    This patch includes some changes required on comment 57:
    
    1. Bad resolution conflict, permission self_checkout is re-add
    
    2. The IGNORE modifier is missing in the INSERT statement
    
    4. When I hit /circ/checkout-notes.pl from the side bar, the page displays "Checkout notes", nothing else. We should add "There is no checkout notes".
    
    7. I would display the table on the confirmation screen as well
    
    10. html filters are missing
    
    11. span element should surround translatable string, to help translators
    
    14. patron-title.inc must be used to display patron's info
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit de56e9d68af748f5038da79656863bab28219a76
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jul 23 13:50:33 2018 +0000

    Bug 17698: (follow-up) Rebase
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9789477e7560c49c73fb9e56a46960286130f984
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Apr 15 13:51:55 2018 +0200

    Bug 17698: (QA follow-up) Changes to use Asset TT plugin (bug 20538)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ac4014d21b102fdc45bcca53330b87668fd31770
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Thu Apr 12 04:04:48 2018 +0000

    Bug 17698: (follow-up) Fixing some small issues
    
    Fixing the comments in Comment 42
    
    Ready to test
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cd4d46882ffd728264d3345eed36b7a03db855fe
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Thu Jul 6 01:28:06 2017 +0000

    Bug 17698: (follow-up) Koha Objects, access borrower through patron sub
    
    See Comment 27
    This is ready to be tested.
    
    Signed-off-by: Brendan Gallagher <brendan@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4e722eda4597acdcfe766bc01206d8b3080cc19a
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Jun 26 23:31:17 2017 +0000

    Bug 17698: (follow-up) Changing to Koha Objects style, adding circ sidebar
    
    Marcel, can you please have a look at this patch. I tried to implement
    the change
    my @notes = $schema->resultset('Issue')->search({ 'me.note' => { '!=', undef } }, { prefetch => [ 'borrower', { item => 'biblionumber' } ] });
    to
    my @notes = Koha::Checkouts->search({ 'me.note' => { '!=', undef } }, { prefetch => [ 'borrower', { item => 'biblionumber' } ] });
    but am having problems on the template side. I can access the item and
    biblio information about the issue, but not the borrower information,
    even though the query is definitely pulling it correctly. Any
    suggestions or ideas as to why this breaks?
    
    This patch also adds the implementation of the circSidebar.
    
    Signed-off-by: Brendan Gallagher <brendan@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4a3eaf02e2be743536681a0151b86296ff299026
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Thu Dec 1 00:54:07 2016 +0000

    Bug 17698: Make patron notes show up on staff dashboard
    
    This patch adds a user permission for managing issue notes, and a 'noteseen'
    column to the issues table.
    
    To test:
    1) Apply Bug 14224 first
    2) Apply this patch, update database, rebuild schema.
    3) Restart koha-common and memcached
    4) Turn on AllowCheckoutNotes syspref if haven't already
    5) Issue two items to two different users (one item each)
    6) Log into the OPAC as one of the users and add an issue note to their
    issue
    7) Log out and log back into the OPAC as the other user
    8) Disable Javascript
    9) Refresh opac-user.pl
    10) Leave a checkout note on their issue
    11) Enable javascript and log into the Staff Client as a superlibrarian
    user
    12) Go to your user's account and edit their permissions to have
    everything ticked EXCEPT circulate->manage checkout notes.
    13) Go to main intranet page. There should be no message saying
    'checkout notes pending'.
    14) Go to circulation home page. There should be no link to Checkout notes.
    15) Go back to user's permissions and tick circulate->manage checkout notes.
    16) Go back to main intranet page. There should now be a message at the
    bottom saying 'Checkout notes pending: 2'
    17) Go to circulation home page. There should be a link to Checkout notes
    with a 2 next to it. Click this link
    18) Attempt to mark an checkout note as seen. This should update the status
    of the checkout note to 'seen' and disable to 'mark as seen' button while
    enabling the 'mark as not seen' button.
    19) Test both buttons with both issues.
    20) Test select all and clear all buttons
    21) Confirm that buttons at the bottom are only enabled if a checkbox is
    checked
    22) Try selecting both issues and using the buttons at the bottom to
    mark multiple issue notes at once.
    23) Confirm the barcode link to the item works as expected.
    24) Confirm the cardnumber link to the user works as expected.
    25) Confirm all table details show correctly.
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Followed test plan, works as expected
    Signed-off-by: Marc Véron <veron@veron.ch>
    
    Signed-off-by: Brendan Gallagher <brendan@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Amended patch: Remove self-checkout permissions
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9eec98d31853737cbb755636c0acb2888e2b2f74
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 23 11:02:02 2018 -0300

    Bug 20757: Add pod for ->capture
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2898b580891e271c102d592c5040122007ee7a73
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri May 11 16:58:07 2018 -0300

    Bug 20757: Capture and upload screenshot on selenium errors
    
    It is a real pain to debug selenium errors, especially when it is
    not reproducible locally.
    
    This patch capture a screenshot when an error occurred and upload it
    using the excellent lut.im service provided by framasoft
    (We could host our own later).
    
    Test plan:
    Modify a selenium script to make it fails (search for find_element)
    You will see a stack trace followed by a link to framapic.org
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 601b49e88fdb7079cf24113b99fa66929fd988c2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jul 23 13:28:13 2018 +0000

    Bug 19191: DBRev 18.06.00.010
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a503abb3db48bb60a87ee0e24fc80a3aecbc71a6
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Fri May 4 15:17:51 2018 -0400

    Bug 19191: (QA follow-up) Remove double fetches from database
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a495ba861d8aa37f273a4f94f3a3e36fca30d2c3
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Apr 20 12:42:15 2018 +0000

    Bug 19191: Add syspref to control use of email receipts, defaulting to disabled
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9e2e965936492a6068c4451a2d4848dc1856e822
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Wed Apr 18 07:23:05 2018 -0400

    Bug 19191: Add non-english notices
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 16ddb155f17d72b0145665361015acdb44020ba1
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Wed Apr 18 07:14:09 2018 -0400

    Bug 19191: Fix capitalization of notice titles
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit db4beb014b17a1097d2e642dc913ce2046c53e00
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Apr 12 14:12:29 2018 +0000

    Bug 19191: Add correct unit tests
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fb6da950a73a1cb03f1df4f10843b0d708d60391
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Mar 2 15:04:10 2018 +0000

    Bug 19191: Remove need for bug 19966
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 49772c96129cc07b3c38287657448a2619fe2292
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Fri Jan 12 10:46:24 2018 -0500

    Bug 19191: Add ability to email receipts for account payments and write-offs
    
    Some libraries are paperless and require all payment receipts to be emailed. Koha should give libraries the option to send email receipts if a patron has an email address. If a notice for the type of "credit" exists ( payment or writeoff ), then an email receipt will be sent.
    
    These notices only support Template Toolkit syntax.
    
    Test Plan:
    1) Apply this patch and dependencies
    2) Add the two new notices, you can find them in installer/data/mysql/en/mandatory/sample_notices.sql
    3) Note two new notices exist in the notices editor, ACCOUNT_PAYMENT and ACCOUNT_WRITEOFF
    4) Find or create a patron with an email address that owes some amount of money
    5) Make a payment for one or more fees
    6) Note a new email is queued for the patron
    7) Make a writeoff for one or more fees
    8) Note a new new email is queued for the patron
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b5e60f15478a998f945ebc59b2c13ce9d37b8818
Author: Chris Nighswonger <cnighswonger@foundations.edu>
Date:   Wed Jul 4 11:23:11 2018 -0400

    Bug 8604: Patron cards made for patrons which don't have patron images use preceding card's image
    
    This patch corrects referential problems which caused the script to
    "re-use" images as well as other sorts of bad image behaviour.
    
    To test:
    
    1. Ensure that you can reproduce the original bug or some variation thereof
    using the steps described in either of these two comments:
    
        https://bugs.koha-community.org/bugzilla3/show_bug.cgi?id=8604#c0
    
        https://bugs.koha-community.org/bugzilla3/show_bug.cgi?id=8604#c6
    
        NOTE: This is not an easy bug to reproduce.
    
    2. Once you can reproduce the bug, apply this patch and follow the same steps
    used to reproduce the bug.
    
    3. Observe that the symptoms are corrected.
    
    Signed-off-by: Chris Nighswonger <cnighswonger@foundations.edu>
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Reproduced the bug and resolved it with this patch.
    Code is hard to read; exact cause of the problem was not fully uncovered.
    
    Fixed spelling 'Destory' => 'Destroy'
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 516e8e80675c8a9cfbfebaf1c7c96d892fbf54ae
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jul 20 02:06:24 2018 +0000

    Bug 21095: Add ccode facets info to tests
    
    To test:
    1 - prove -v t/db_dependent/Search.t
    2 - Koha asks "Why am I getting these crazy facets!?!"
    3 - Apply patch
    4 - prove -v t/db_dependent/Search.t
    5 - Koha purrs (tests pass)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 12e18f91be2a26501fba502d5f1106d66b06caee
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Jul 20 18:13:49 2018 +1000

    Bug 21097: Missing optgroup closing tag in orderreceive.tt
    
    There is a missing optgroup closing tag in orderreceive.tt. It doesn't
    actually cause any display issues (at least in modern browsers), but
    it's invalid markup, so this patch fixes it.
    
    _TEST PLAN_
    0. Add a budget and add a fund
    1. Add a vendor
    2. Add a basket
    3. Add an order to a basket
    4. Close the basket
    5. Receive the order
    6. Make sure the budget and fund both display when selecting the fund
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 12b505f2b797d77e800a17830f71a9c054cd076b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jul 23 12:23:07 2018 +0000

    Bug 20811: (RM follow-up) fix check for matching
    
    Notice should only be triggered if both settings are false
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 15b865c6ee558ef278f911ba3693c38c024c7f11
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jul 20 11:46:58 2018 +0200

    Bug 20811: (QA follow-up) Prevent calling AddItemBatchFromMarc and ModBiblioMarc without biblionumber
    
    If you use -update but do not find matches (or did not want to match), you
    should not call those routines. We should warn and skip this record.
    
    Adding a warn at the start that the choice of options may not be smart.
    Note that this needs further attention somewhere else. You could mix
    -update with -insert for instance and still see some problems. (May depend
    on items with unique barcode etc.)
    
    Test plan:
    Run -update without match or isbn.
    Or run -update -isbn with a non-matching ISBN.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a49a7f08d6dbaf992d70420dae744c75c2ad8aae
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jul 20 11:21:11 2018 +0200

    Bug 20811: (QA follow-up) Make the isbn check work
    
    The following code was never reached, since $isbn was not filled.
        if (!$biblionumber && $isbn_check && $isbn) {
            $sth_isbn->execute($isbn);
            ($biblionumber,$biblioitemnumber) = $sth_isbn->fetchrow;
        }
    Solution: Fix the code with two $isbn declarations. Move the checkisbn
    condition a level deeper.
    
    Test plan:
    Run misc/migration_tools/bulkmarcimport.pl -file bib726.utf8 --update -isbn
    Since you do not match on biblionumber, the ISBN should match.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d15185025a146656a1ad0d7d5a8eb261581c0f1e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 28 15:19:09 2018 -0300

    Bug 20811: Fix wrong usage of ModBiblio
    
    Since
      commit cefa7c21e28b88351ee8ae0dfefb80a515323df9
      Bug 5635: bulkmarcimport new parameters & features
    
    AddBiblio call has been replaced with ModBiblio, but the return values
    are different. We should not replace the value of $biblionumber with
    what returns this subroutine.
    
    Test plan:
    If you are familiar with bulkmarcimport.pl you should know what to test,
    I am not.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 574cc2f787d0456ddd035dc5911be9192b09f758
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jul 19 17:33:55 2018 +0000

    Bug 19166: DBRev 18.06.00.009
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7d7cd25f4c2f0077c18a1904cb77f1479bff8e2b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jul 16 14:08:17 2018 +0000

    Bug 19166: (follow-up) Adjust table and files and QA issues
    
    Move to aqinvoice_adjustment
    Move to Koha::Acquisition::Invoice::Adjustments
    Test if variable exists before count
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5bd7acfbb096a63df1d806c41a6af7b51954beb6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jul 16 13:06:27 2018 +0000

    Bug 19166: (follow-up) Reformat the new adjustments markup
    
    This follow-up makes some changes to the way invoice adjustments are
    displayed and added:
    
     - Move this section into a <fieldset> to set it off visually from the
       other sections of the page.
     - Take the "add adjustment" fields out of the table and display them in
       a standard way.
     - Hide the "add adjustment" fields by default, shown via "add an
       adjustment" link.
     - Add deletion confirmation to adjustment deletions.
    
    To test, add, delete, and change invoice adjustments as instructed in
    the original test plan.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8a7b35de6c18b52ed8056cb2553fff947eeeb1b2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Apr 25 09:55:48 2018 -0300

    Bug 19166: Correct charset collate
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0766610f86417cf4a08cec7dad0f2e09376cb13a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 30 13:35:12 2018 +0000

    Bug 19166: (follow-up) Add ADJ_REASON auhtorised value category and minor fixes
    
    This patch adds the ADJ_REASON authorised value category tot he atomic
    update, and fixes code to display a hint of no reasons are defined
    
    other minor updates to remove warns in logs
    
    To test:
    Apply patches
    Run updates
    Check authorised value categories to see ADJ_REASON exists
    Add an adjustment, not you have no reaosn drop down
    Note there is a hint if you hover
    Add a value to ADJ_REASON
    add another adjustment, note you can now add reasons (or not)
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d6006b0b99b64f1e0859adcafeb375e0e1049031
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Mar 15 16:21:42 2018 +0000

    Bug 19166: (follow-up) Shipment cost is always added to 'spent'
    
    Two koha professionals agreed, also it is current behvaiour so this
    patch removes a change
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7465acb98b76db04a7058ccc3fe48b96e3ceb1a8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 13 09:17:24 2018 +0000

    Bug 19166: Get correct value for encumbering when open for new lines
    
    https://bugs.koha-community.org/show_bug.cgi?id=19166
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 92db008d0e040c1a0f0229c028ce105b8808dcc3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 4 13:22:21 2017 +0000

    Bug 19166: Unit tests for GetBudgetSpent and GetBudget ordered
    
    To test:
    1. prove -v t/db_dependent/Budgets.t
    2. Should return green
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2d99b467159c8d1c28c7d6300bcf6698dec2e76b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Aug 23 16:13:39 2017 +0000

    Bug 19166: Add the ability to add adjustments to an invoice
    
    This patchset adds the ability to add adjustments to an invoice, one can
    provide a reason, an adjustment amount, select a budget, and choose
    whether to encumber the funds before the invoice is closed or not
    
    To test:
    
    1 - Create a new invoice with or without a shipping cost
    2 - Note there are no existing adjustments
    3 - Add an adjustment
    4 - Submit the form withno changes, nothing happens
    5 - Update the adjustment you created, ensure changes are saved but no
    extra adjustment created
    6 - Add another invoice prodiving only reason or amount (you can have 0
            value adjustments)
    7 - Verify the adjustment total at bottom is correct
    8 - Recieve some orders
    9 - Verify totals are correct
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 26bf5e3f8799165aaca550c571a60b51fbeca171
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Aug 23 16:12:25 2017 +0000

    Bug 19166: Database changes
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1abee30bb8bd786d9523bf75594f3aae9a37d3d5
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Thu May 3 09:38:19 2018 +0000

    Bug 20273: (follow-up) Autocomplete use start instead of contains
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 96e768eb43a1555ae2f03b098edddbd051e8ae80
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Thu Feb 22 15:35:11 2018 +0000

    Bug 20273: Use compat routines for autocomplete in auth_finder.pl
    
    Test plan:
      - Context: Koha working with elasticsearch,
      - Apply BZ 19582 (that make auth_finder.pl works again),
      - apply this patch,
      - go to cgi-bin/koha/authorities/auth_finder.pl,
      - type at least 3 chararcters in a search field and
        check that the autocomplete returns results
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7eceade7daf2943f6112291a8bfd6aa754ffaa5c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Nov 17 14:07:41 2017 +0000

    Bug 19604: Unit tests
    
    1 - Apply previous patches
    2 - prove t/db_dependent/Koha/SearchEngine/Elasticsearch/QueryBuilder.t
    3 - Should be green
    4 - high fives!
    
    Signed-off-by: Nicolas Legrand <nicolas.legrand@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f983c1e3f7404c60143d595ba5824f5324829723
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 9 16:23:57 2017 +0000

    Bug 19604: Elasticsearch Fixes for build_authorities_query for auth searching
    
    To test:
    1 - Do some authority searches in Zebra
    2 - Switch to ES and repeat, results will vary and some may fail
    3 - Apply patch and dependencies
    4 - Reindex ES
    5 - Repeat searches, they should suceed and results should be similar to
    Zebra
    6 - Slight differences are okay, but results should (mostly) meet
    expectations
    
    A few notes:
    We add a 'normalizer' to ensure we get a single token from the heading
    indexes, this makes 'starts with' work as expcted
    We switch to 'AND' for fields searched from cataloging editor - this
    matches Zebra results
    We force the '__sort' fields for sorting - if sorting looks wrong try
    reducing the heading field to a single subfield - this will need to be
    addressed on a future bug (multiple subfields create an array, ES sorts
            those randomly)
    
    Signed-off-by: Nicolas Legrand <nicolas.legrand@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3286bead8e60fbcf8b2a76685b03c7cf6712da5e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jul 19 17:19:38 2018 +0000

    Bug 13560: DBRev 18.06.00.008
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 284226a4966520eb0f1e784310bbc87ed3e59334
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jan 16 16:16:40 2018 +0000

    Bug 13560: Add an 'Add' option for marc modification templates
    
    Add/Update would update a field or create new if it existed, but didn't
    allow for creating new if the field existed.
    
    This patchset splits the options to 'Add & Update' so that 'Add' will always
    add a field and 'Update' will operate as it always has
    
    To test:
    1 - Have a record with a known existing field (make a copy)
    2 - Define a marc modification template that 'Add/update' on that field
    3 - Define an 'Add/Update' on a field that doesn't exist
    4 - Batch modify the copy of record using the above template
    5 - Verify the existing field was updated
    6 - Verify the non-existing field was updated
    7 - Apply patch and update database
    8 - Make another copy
    9 - Modify the copy with the same template as above
    10 - Should match initial modification
    11 - Add a new rule to add a new field
    12 - Modify using the updated template
    13 - Ensure your new field is created
    14 - Test various options in the modification tool
    15 - prove t/db_dependent/MarcModificationTemplates.t
    
    Signed-off-by: Victor Grousset <victor.grousset@biblibre.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c20fbda4611e68d3935d078be0be5254563ee077
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jan 16 16:15:26 2018 +0000

    Bug 13560: Unit tests
    
    To test:
    1 - apply all patches
    2 - update database
    3 - prove t/db_dependent/MarcModificationTemplates.t
    
    Signed-off-by: Victor Grousset <victor.grousset@biblibre.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 715bc0f96dd1749c7a417c8d091f6c5326b3089d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jan 16 16:14:49 2018 +0000

    Bug 13560: Database changes
    
    Signed-off-by: Victor Grousset <victor.grousset@biblibre.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ad34ef74cdee0f204c03cdf88b1db775768a44fe
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jun 21 13:37:35 2018 +0000

    Bug 20974: Remove files left behind after removing Solr
    
    Some files were left behind when Bug 12538 removed support for Solr.
    This patch removes them.
    
    To test, apply the patch and fail to observe the existence of these
    files:
    
    koha-tmpl/opac-tmpl/bootstrap/en/includes/search/facets.inc
    koha-tmpl/opac-tmpl/bootstrap/en/includes/search/page-numbers.inc
    koha-tmpl/opac-tmpl/bootstrap/en/includes/search/resort_form.inc
    
    Perform a search in the OPAC to confirm that nothing broke.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3c034dcc3afef792e89935a7854304d82d15c022
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 18 18:12:17 2018 -0300

    Bug 21086: Fix wrong mock of DateTime->now
    
    prove t/db_dependent/DecreaseLoanHighHolds.t
    t/db_dependent/DecreaseLoanHighHolds.t .. 1/17 Can't locate object method
     "truncate" via package "80" (perhaps you forgot to load "80"?) at /home/vagrant/kohaclone/C4/Circulation.pm line 3497.
    
    What is happening:
    We mock DateTime->now in the script to avoid the date comparaisons to fail on
    slow servers (see bug 19705).
    
      my $now_value       = DateTime->now();
      my $mocked_datetime = Test::MockModule->new('DateTime');
      $mocked_datetime->mock( 'now', sub { return $now_value; } );
    
    Since bug 20287, we have the following calls:
    Koha::Patron->store => Koha::Patron::Category->get_expiry_date
    
    which does:
    221         return $date->add( months => $self->enrolmentperiod, end_of_month => 'limit' );
    
    as enrolmentperiod is generated by t::lib::TestBuilder, it can be quite big, and so
    the date change from one call to the others.
    
    The failure is actually coming from the date becoming > 9999, which is not handled correctly,
    on purpose, by Koha::DateUtils (infinite)
    
    On the way this patch fixes the other occurrence, in Sitemapper.t (just in case)
    
    Test plan:
    Make sure the tests pass now.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 367f47c416fa9164ccb8d9e5f50772e5a516d6b7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jul 12 10:18:10 2018 +0000

    Bug 21064: Use undefined instead of undef
    
    To test:
    1 - Load the advanced cataloging editor
    2 - Refresh the page several times
    3 - Check the JS console, you shoudl see an error:
        'undef is not defined'
    4 - Apply patch
    5 - Try again, should be no error
    
    Signed-off-by: Pierre-Luc Lapointe <pierreluc.lapointe@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bfdf896111849454ade806bf49f48f1de5f626be
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 11 18:55:06 2018 -0300

    Bug 21053: Encode URI characters in plugin 008
    
    A # (or &) at any position in 008 field of a bib record causes
    all subsequent data in field to be overwritten with default values when
    record is saved.
    
    These characters need to be correctly encoded before being passed as
    parameters of the url
    
    To reproduce:
    1. Find and edit a bib record which has an 008 which differs from the
    default values for the MARC framework
    2. Choose 008 helper
    3. Add # in any position before the end of the field noting the current
    values of the data
    4. Save record
    5. Edit record and select 008 helper
    6. Review characters after #
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    Followed the test plan and it works.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5a9bad787458411c790d26b3b115fe3e7e2e0ab2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jul 13 17:49:14 2018 +0000

    Bug 21076: Don't call autocomplete code after patron found
    
    To test:
    1 - Enable article requests
    2 - Search on staff client
    3 - Click 'Request article'
    4 - Find a patron
    5 - View error in console
    6 - Apply patch
    7 - Reload
    8 - Not error is gone
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    Followed the test plan and it works.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c02543baaab99841405ba9a47d894e54e7a8a27a
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Jul 15 20:00:44 2018 +0200

    Bug 16575: (follow-up) Compiled CSS
    
    This patch contains the compiled CSS for the OPAC print stylesheet.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a9836864dcbe4c11d370c245511ee4b9d6bd33f3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 30 14:15:19 2018 +0000

    Bug 16575: Irregular behaviour using window.print() followed by window.location.href
    
    This patch updates the OPAC and staff client carts to use CSS to
    control print output, removing a print parameter which was passed to the
    script.
    
    Currently, when you click "Print" on the OPAC basket, it navigates to
    a new page and initiates window.print() followed by a
    window.location.href change again. Unfortunately, due to differences in
    IE, Chrome, and FF, it will either show the print options, navigate away
    without showing them, or refuse to navigate away after printing. By
    changing to using print CSS, we don't navigate away from the basket in
    the first place, so we prevent this irregular behavior.
    
    TEST PLAN
    
    1) Apply the patch
    2) Create an OPAC basket by clicking "Add to cart" on multiple items
    3) Using Chrome, IE, and Firefox (of any version), click the "Print"
       button
    4) You should see the relevant print menu without the OPAC basket
       re-loading in any way.
    5) After printing is complete, you should still be on the OPAC basket
       pop-up
    6) Perform the same tests in the staff client
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c95f5c17a6b1e41be28819f79ebb0e6fa8f015e8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 18 18:24:50 2018 -0300

    Bug 21085: Fix add/edit of patrons when HouseboundModule is set
    
    This script takes all the parameters then set it to create/edit the
    patron. We must list housebound_chooser and housebound_deliverer as not
    part of patron's attributes
    
    Test plan:
    - Enable HouseboundModule
    - Create a patron
    => When you save, if the patch is not applied, you will get:
    No property housebound_deliverer for Koha::Patron
    
    - Edit a patron
    => When you save, if the patch is not applied, you will get:
    Patron creation failed! - DBIx::Class::Row::store_column(): No such column 'housebound_chooser' on Koha::Schema::Result::Borrower at /home/vagrant/kohaclone/Koha/Object.pm line 75
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 090677333353268ed48c4d474b20e38a2a296f2e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 23 17:59:28 2018 +0000

    Bug 20807: Lost items report: Improve the display of CSV profile errors
    
    This patch modifies the template for the lost items report to change the
    way it handles a missing CSV profile. Now, if there is a missing CSV
    profile, a message is displayed with details about the profile
    requirements. If the logged-in user has the right permission there is a
    link to the CSV profiles page.
    
    Since item selection is used only in conjunction with exporting results,
    item selection controls are all hidden when there is no valid CSV
    profile.
    
    To test, apply the patch go to Reports -> Lost items.
    
     - Run the report with parameters which will return results.
     - If your system has no CSV profile for exporting lost items:
       - If you are logged in as a user with manage_csv_profiles permission:
         - You should see a message dialog instructing you to create a CSV
           profile with a link to the CSV profiles page.
       - If you are not logged in as a user with manage_csv_profiles
         permission:
         - You should see a similar message but without a link to the CSV
           profiles page.
       - In both cases, with no CSV profile defined there should be no
         checkboxes in the table of results and no "select all/clear all"
         controls.
     - If your system has a valid CSV profile for exporting lost items:
       - Checking the checkbox for one or more items in the table should
         trigger the display of an "Export selected items" link.
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 90977aef1e097da42695bc6944834a81496f0dbb
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jul 18 18:07:00 2018 +0000

    Bug 7651: DBRev 18.06.00.007
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cb93ae3c565611336ccf45461efec9af0e1c00e3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jun 5 14:53:47 2018 -0300

    Bug 7651: put TT directive on a single line to help translation
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1fa2bd185de991f1e32671257ec7da9bae827c32
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Jun 4 21:19:42 2018 +0200

    Bug 7651: (QA follow-up) Fix warning about undefined active currency
    
    If no active currency is defined we show a warning. This fixes
    the link shown below to check the correct permission.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 15974afb1a59f5bf99e8c97462f767507340520b
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu May 24 08:17:09 2018 +0200

    Bug 7651: (follow-up) Correct visibility on admin sidebar
    
    This patch corrects visibility of links to the different
    acquisition pages from the admin sidebar.
    
    It also makes a correction to the links on the acq start
    page:
    - Budgets = period_manage
    - Funds = budget_manage
    
    To test:
    - Follow the test plan of the first patch
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ff83c7acdcb4e7f5004941024397aca48e327414
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun May 20 23:47:53 2018 +0200

    Bug 7651: Add a new permission for managing currencies and exchange rates
    
    At the moment staff users need parameters or parameters_remaining_permissions
    in order to be able to change exchange rates for acquisition orders.
    
    This patch adds a new separate permission currencies_manage and
    updates staff users currently having those permissions to get the
    new permission as well.
    
    To test:
    - Create some staff users with different permission sets
      1) superlibrarian
      2) parameters
      3) parameters_remaining_permissions
      4) manage_circ_rules, but not parmeters_remaining_permissions
      5) all acquisition permissions
    - Apply patch and run database update
    - Verify new permission has been added and staff users updated
      1) remains the same
      2) + 3) will have currencies_manage
      4) remains unchanged, doesn't have new permission
      5) remains the same, will have access now because of having
         the top level acquisition permission
    - Verify the changed pages work correctly:
      - navigation on admin home page
        NOTE: the acquisition parameters section will now honor all
        different related permissions (edi_manage, budget_manage,...)
      - navigation on acquisition home page
      - try to access currencies page directly
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 583d1c69c6e0ebd08bebbc25e5368f6f7a39381f
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Jun 8 08:53:51 2018 +0200

    Bug 20393: (QA follow-up) Remove only occurence of misc/plack/koha.psgi
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 68d722232f22bff111882bf21a1184ddb167e42a
Author: Mason James <mtj@kohaaloha.com>
Date:   Wed Mar 14 14:12:12 2018 +1300

    Bug 20393: Remove redundant 'koha.psgi' and 'plackup.sh' files
    
    Signed-off-by: David Bourgault <david.bourgault@inlibro.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d7fb53f6fcad614e7941d498165b510391f59957
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jun 13 10:29:54 2018 +0100

    Bug 18322: (follow-up) Use authorized value labels
    
    Rather than using the raw ccode's use the labels as defined in the
    authorized values.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 14166c4a8cbfe366653d66fd7fd6ec1d016b93ce
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jun 12 14:47:30 2018 -0300

    Bug 18322: Update xslt for NORMARC and UNIMARC
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f37cac60e0cdcde78e1178825131c8cd9b07844c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jun 12 15:37:33 2018 +0100

    Bug 18322: (follow-up) Add generated xsl
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 17a354f5e8724942b53589ade4e468a39ddc1014
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 23 10:49:09 2017 +0000

    Bug 18322: Add a facet for ccode fields to Zebra
    
    This patch adds the index definitions for zebra faceting of ccode in
    koha for marc21, normarc and unimarc.
    
    We also add lines to the templates to expose the new facet and enable
    non-zebra faceting for ccode too.
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 904d9d54c9e976d41172bc2387eebf0c73e71a40
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Sep 19 10:29:25 2017 -0300

    Bug 18072: Only accept Koha::Library in parameters
    
    I do not think we should allowed branchode and Koha::Library objects, it
    adds confusion in callers (we never know if we have a branchcode of a
    library object).
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6db48e9d21be112880c5ae74640800e30ad42947
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Sep 11 15:22:49 2017 -0300

    Bug 18072: (QA follow-up) Remove warning from tests
    
    This patch removes a warning from Items.t due to bad parameters. It also
    makes the tests use Test::Exception.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bd87407798bb9edd61be8400873d2f4641784445
Author: Lari Taskula <lari.taskula@jns.fi>
Date:   Fri Feb 10 15:11:17 2017 +0200

    Bug 18072: Add Koha::Biblio->can_be_transferred
    
    This patch adds a new method Koha::Biblio->can_be_transferred. The method checks
    if at least one of the item of that biblio can be transferred to desired location.
    
    This method will be useful for building a smarter pickup location list for holds,
    because we will be able to hide those libraries to which none of the items of
    this biblio can be transferred to due to branch transfer limits (see Bug 7614).
    
    To test:
    1. prove t/db_dependent/Koha/Biblios.t
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 118a714c1d8bfe646fac9aa37f4a38a02e2035be
Author: Lari Taskula <lari.taskula@jns.fi>
Date:   Fri Feb 10 15:08:47 2017 +0200

    Bug 18072: (QA follow-up) let Koha::Item->can_be_transferred take HASHref as param
    
    This patch changes Koha::Item->can_be_transferred to accept a HASHref as follows:
    $item->can_be_transferred({ to => $library, from => $library2 })
    
    To test:
    1. prove t/db_dependent/Koha/Items.t
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d8e562a218d2c8acaae865890face7ea06ee062d
Author: Lari Taskula <lari.taskula@jns.fi>
Date:   Tue Feb 7 13:52:29 2017 +0200

    Bug 18072: Add Koha::Item->can_be_transferred
    
    This patch adds a new method Koha::Item->can_be_transferred.
    
    Includes unit test.
    
    To test:
    1. prove t/db_dependent/Koha/Items.t
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7816d09e718319f3fb01ac1c793d8b32f7532db5
Author: Lari Taskula <lari.taskula@jns.fi>
Date:   Tue Feb 7 16:33:40 2017 +0200

    Bug 18072: Add deprecation warning to C4::Circulation Branch Transfer Limit functions
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 97ce8360932a3149905410818d196da369c40ead
Author: Lari Taskula <lari.taskula@jns.fi>
Date:   Tue Feb 7 13:16:30 2017 +0200

    Bug 18072: Add Koha objects for Branch Transfer Limit
    
    This patch also fixes documentation in Koha/Item/Transfer.pm and
    Koha/Item/Transfers.pm.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d6b1b653e0c3c6332024dea971d9d799d9f4aad0
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Jun 25 11:27:03 2018 +0000

    Bug 19902: (follow-up) Deal with patron column regarding on intranetreadinghistory setting
    
    Test plan:
    Try it with intranetreadinghistory allowed and not allowed and it should
    still work in both cases
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c5954d5e946a53661e330514358db566b6e69022
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue Jan 2 06:35:47 2018 +0000

    Bug 19902: Add column settings to bibliographic record checkouts history table
    
    Test plan:
    0) Apply the patch
    1) Go to administration -> Configure columns, note there is new
    checkoutshistory-table in Catalogue section
    2) Make some configuration in this table settings
    3) Go to detail of any record -> Checkout history
    4) The columns should be visible according to your configuration from
    step 2
    5) Play with Column visibility, to ensure it does work as it should
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Fixed a minor typo during signoff.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit eac802b712bd60c8307da7b6f709d347ffa4ffe3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 29 17:36:51 2018 -0300

    Bug 20806: Surround string by span tag to help translation
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2a369663fd37c41fb3ac810a8f42d84d69fa6f02
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 29 17:30:39 2018 -0300

    Bug 20806: Do not rely on column position
    
    It is not the first time we have this splice call, it seems safer to
    rely on the column's name instead of the column's position
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0c1490ec7111fb6160458463d98ccda333f347b3
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue May 29 09:15:09 2018 +0000

    Bug 20806: Add item type description holds history page
    
    Test plan:
    
    0) Do not apply the patch
    1) Set AllowHoldItemTypeSelection to Allow
    2) Place some hold for a patron, some with specific item type and some
    without item type
    3) On holds history page you should see blank or item type code in item
    type column
    4) Apply the patch
    5) Now you should see description in item type column
    6) Set AllowHoldItemTypeSelection to Don't Allow
    7) You shold not see the item type column, but column visibility
    settings should continue working ;)
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    Followed the test plan and it works.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8520d508a3154c6b30f1e710e518fe3b697a3194
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 23 15:54:41 2018 -0300

    Bug 20079: Display stack trace for development installations
    
    """The default value is development, which causes plackup to
    load the middleware components: AccessLog, StackTrace, and Lint unless
    --no-default-middleware is set."""
    
    Test plan:
    Confirm that the stack trace is displayed when something is wrong (die somewhere to test)
    for dev installations (inside a devbox)
    The -E flag must remain deployment for non-dev installs
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dcf207170bab05861f1a17ffc450851511c19fa2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jul 18 16:55:56 2018 +0000

    Bug 19524: DBRev 18.06.006
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9b1316ffeee76127e891785536d4bb38e0186247
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Jul 16 07:54:49 2018 -0400

    Bug 19524: Use existing logged_in_user variable
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e2e0c327019d43554bc6ec8a69ee5835c94f2e0e
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jun 7 12:16:18 2018 +0000

    Bug 19524: Share patron lists between staff
    
    Some libraries would like to allow arbitrary lists to be used by all
    librarians with the 'manage_patron_lists' permission.
    
    Test Plan:
    1) Apply this patch
    2) Run updatedatabase.pl
    3) Create or find two patrons with the manage_patron_lists permission
    4) Using the first patron, create two new lists, mark one of them as
       shared
    5) Log in as the second patron, browse to the patron lists page
    6) Note the second patron can view, add and remove patrons from
       the shared list owned by the first patron
    
    Signed-off-by: George Williams <george@nekls.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2e610a370bcc63dba27ec94d77996fd7dc4204d6
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jun 7 10:48:30 2018 +0000

    Bug 19524: Update database
    
    Signed-off-by: George Williams <george@nekls.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8202f95ad7001a5046f9f40e6322406b253ba3ed
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jul 16 18:41:13 2018 +0000

    Bug 21038: Reserves should be holds
    
    This patch corrects the text of the warning about discharges cancelling
    holds.
    
    To test, apply the patch and view the discharge for a patron who has
    holds:
    
     - "Borrower" is changed to "patron"
     - "reserves" is changed to "holds"
     - "canceled" (18 instances in the templates) is changed to "cancelled"
       (51 instances).
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6672b26d16065d877d6d7300830fc3d619b09898
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 2 16:18:33 2018 -0300

    Bug 20942: (QA follow-up) Use $lines->total_outstanding
    
    This patch makes the controller code use $lines->total_outstanding
    instead of expecting ->outstanding_debits and ->outstanding_credits
    return the total.
    
    Tests should pass as before. No behaviour change is expected.
    
    To test:
    - Run:
      $ kshell
     k$ prove t/db_dependent/api/v1/patrons_accounts.t
    => SUCCESS: Tests still pass, no behaviour change.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bb7c908dc06697a4ebbf8633897d24e26798cb6d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jun 25 14:55:30 2018 -0300

    Bug 20942: Split debit and credit lines
    
    This patch splits the balance to match this object schema:
    
    {
        balance             => #,
        outstanding_credits => {
            total => #,
            lines => [ credit_line_1, ..., credit_line_n ]
        },
        outstanding_debits  => {
            total => #,
            lines => [ debit_line_1, ..., debit_line_m ]
        }
    }
    
    This change is made to ease usage from the UI. Also because the
    outstanding credits need to be applied to outstanding debits in order to
    the balance value to make sense. So we still need to have each total.
    
    Tests are added for this change, and the schema files are adjusted as
    well.
    
    To test:
    - Apply this patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/api/v1/patrons_accounts.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    staff_id is changed into user_id as voted on the dev meeting the RFC got
    approved.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d079c80b05b36a177c80d8f585ae1515092e6ddb
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jun 13 14:02:44 2018 -0300

    Bug 20942: Add route to get patron's account balance
    
    This patch implements the /patrons/{patron_id}/account endpoint. It can
    be used to get the patron's balance information, including outstanding
    lines.
    
    To test:
    - Apply this patchset
    - Run:
      $ kshell
     k$ prove t/db_dependent/api/v1/patrons_accounts.t
    => SUCCESS: tests pass!
    - Make your favourite REST testing tool (RESTer on Firefox?) do:
      GET /api/v1/patrons/{patron_id}/account
    to a valid patron_id. Play with Koha's UI to add credits/payments and
    notice the endpoint returns the right info following the voted RFC. [1]
    - Sign off :-D
    
    [1] https://wiki.koha-community.org/wiki/Patrons_account_lines_endpoint_RFC
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7cbff1bce1608016e8b8ceded7633678189b75cc
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jun 13 14:02:30 2018 -0300

    Bug 20942: Unit tests for /patrons/{patron_id}/account
    
    This patch adds tests for the /patrons/{patron_id}/account endpoint.
    To test:
    
    - Run:
      $ kshell
     k$ prove t/db_dependent/api/v1/patrons_accounts.t
    => FAIL: Tests should fail because the endpoint is not implemented.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d383b49987b8e5471cb9f30ed879e1311e762b26
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jun 1 16:04:35 2018 -0300

    Bug 20942: OpenAPI spec for /patrons/{patron_id}/account
    
    This patch adds the OpenAPI spec for the following paths:
    - /patrons/{patron_id}/account
    
    It also adds object definitions for:
    - balance
    - account line
    
    Account line is to be used on both /account/lines (when implemented)
    and for embeding the outstanding lines in the balance endpoint
    (/patrons/{patron_id}/account).
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9c7b6416c75df136de1cd45be72ee49951aedc1f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jul 18 16:34:50 2018 +0000

    Bug 20287: (RM follow-up) Add POD
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cfb92e40d92aaa1a6c04bd99afb166a7b4ceb3a4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 12 16:34:06 2018 -0300

    Bug 20287: (follow-up) Test exception DuplicateID for Koha::Patron->store
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c0e0768d579be42c5ee77b5ad737f534723c84a8
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jun 29 10:54:52 2018 -0300

    Bug 20287: (QA follow-up) Fix warning on undefined
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5b5e146457433ebfd5d3030c3473125985ec630b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 25 13:14:05 2018 -0300

    Bug 20287: Test exception DuplicateID for Koha::Patron->store
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 51728ba084401b5f3df7c26453a9d762e178368e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 25 12:53:19 2018 -0300

    Bug 20287: Use more simple object for Object.t
    
    We initially use Koha::Patron to test Object.t, but now it overwrites
    ->store and so it is better to use a more simple object.
    ApiKey has foreign keys and unique key.
    We lost one test: there is only one unique key whereas we had 2 on
    borrowers (I did not find a better option)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d2fdf1a69540154db60106db7cd1ca9ec63b7154
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Mar 29 13:34:25 2018 -0300

    Bug 20287: Fix tests expecting a warning
    
    The new Koha::Patron-based implementation encapsulates some error
    conditions that raised warnings and the tests expected that warning.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3ca21c87479b066f5094a343cab09664c06e91b1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 29 12:59:18 2018 -0300

    Bug 20287: Replace occurrences of ModMember in REST API
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d9180269a6ea53f1b1aa2c3f45cad13d5ec1d53e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 29 12:53:01 2018 -0300

    Bug 20287: Replace occurrences of AddMember in REST API
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4a25b95e14e1e0116c3f3015a814037148719ef0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 23 15:03:57 2018 -0300

    Bug 20287: generate_userid now set the userid
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1bb6cec902088d07c7a43addc4b4adb5b0bf3d4f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 23 13:12:36 2018 -0300

    Bug 20287: Fix update of patrons, clean the data before ->store
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cf9cb12edf27b1ae44ffad4882aa0756fdf761b4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 23 13:02:29 2018 -0300

    Bug 20287: Replace ModMember in patrons import
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ccbf74881ca92da2a33515d74132c7f1eb734fb1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 23 12:55:48 2018 -0300

    Bug 20287: There is a warning, we just want to unset the value here
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 84acee417630ed778025d38a8b606476387fee47
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 23 12:55:33 2018 -0300

    Bug 20287: Fix test t/db_dependent/Members.t and prevent regressions
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a6f8b23035a49110c759b5dc91656411cdb209c3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 23 12:42:46 2018 -0300

    Bug 20287: ->store new deal with enrolment fee
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d2a2d973cebda372c97d3820bc046970d030b1cf
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 23 12:42:15 2018 -0300

    Bug 20287: Move ModMember to Koha::Patron
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cfbc53bb22e6f4a851a2a7cd6ede891012951410
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 22 17:13:22 2018 -0300

    Bug 20287: Add plain_text_password (& Remove AddMember_Opac)
    
    But actually we could remove it if it does not make sense for other use.
    Callers could deal with it since the password is not generated here
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dc6b6e030c0e219f84350cea706910a7433ca0a4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 22 16:55:00 2018 -0300

    Bug 20287: Remove AddMember_Auto
    
    I am not sure I understood the point of this subroutine.
    Did I miss something here?
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cc2534403a7025efa0acedd0b45114eaca88e297
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 22 16:25:52 2018 -0300

    Bug 20287: Use DBIC transaction instead of AutoCommit=0
    
    Remove error "Already in a transaction"
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit beaad59cb58d93eb4b6d0d6eec86cadfd411cca3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 22 15:47:21 2018 -0300

    Bug 20287: New warning in t/db_dependent/Koha/Object.t (?)
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2ea147db47626a4e2ff82c4ca5b7ba92827ce36e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 22 15:37:27 2018 -0300

    Bug 20287: Remove warning
    
    If there are no patrons in DB:
    Use of uninitialized value  in addition (+)
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b4d9be74fc935c4c9c2d4dfff4df39dae713a4af
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 22 14:41:24 2018 -0300

    Bug 20287: Fix export issues in tests
    
    t/db_dependent/Holds/RevertWaitingStatus.t ..
    Undefined subroutine &C4::Circulation::MoveReserve called at /home/vagrant/kohaclone/C4/Circulation.pm line 1316.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ef410fd62f279a10687636a4f26babb2c91ecadc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 22 13:06:59 2018 -0300

    Bug 20287: Replace occurrences of AddMember with Koha::Patron->new->store->borrowernumber
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ae927390ffabdc26d66b254a17abbe81e6683279
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 22 12:28:02 2018 -0300

    Bug 20287: Move AddMember to Koha::Patron->store
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1144ee4b819e01ebad890f562d2754cda8d4e3ad
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 22 11:19:50 2018 -0300

    Bug 20287: Koha::Object->get_from_storage
    
    May be part of a separate bug report if needed
    
    TODO - add POD + tests
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a6059c4d2d43e43aa021069ce97d6424a76c4f41
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 21 17:32:00 2018 -0300

    Bug 20287: Move trim values to a method
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1b13c453e20e47c5e25bd946b50dd3838e29c3ce
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 21 17:19:05 2018 -0300

    Bug 20287: Move fixup_cardnumber
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b77739ebc739b3c4fba169ac8e05eb263495f7ec
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jun 29 11:15:22 2018 -0300

    Bug 21022: (follow-up) Move overloaded full_message method to subclass
    
    We shouldn't have it overloaded on the base class, as it could get huge
    and difficult to find things, and read.
    
    This patch moves things to Koha::Exceptions::Object. We should overload
    the full_message method on each exceptions class, as needed.
    
    To test:
    - Run:
      $ kshell
     k$ prove t/Koha/Exceptions.t
    => SUCCESS: Tests still pass!
    - Sign off :-D
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 07c6699a7bd4204d002f135bfeddf33fcc831b54
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jun 29 11:02:57 2018 -0300

    Bug 21022: Use passed message if present
    
    This patch makes 'full_message' use the passed exception message instead
    of trying to build it from the parameters. This is particularly useful
    for some situations in which we don't have all the information but would
    like to keep using the same exception.
    
    To test:
    - Apply this patchset
    - Run:
      $ kshell
     k$ prove t/Koha/Exceptions.t
    => SUCCESS: Tests pass!
    - Sign off
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3dd378fa18230f7a428a309b53e465205b2a235e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jun 29 11:02:40 2018 -0300

    Bug 21022: Unit tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5995275b74777432c5ac3b26bf5016e6a27cfcf5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 28 11:00:57 2018 -0300

    Bug 21008: Use Koha::Patron->is_child
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Edit: I removed the category parameter as it is not really used.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 14f818edf6a0690a39793b2e6cad0204171be375
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 28 10:31:30 2018 -0300

    Bug 21008: Use patron object to get category_type
    
    This patch makes borrower_add_additional_fields() in both pay.pl and
    paycollect.pl use the right object to pick the category_type.
    
    It also populates the extendedattributes template variable in pay.pl
    which was missed by a change.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 301c36b8292b6c40390dff79393ac0fd79c7960f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 24 18:51:03 2018 +0000

    Bug 20814: Display issue with 'Saved reports' tabs when memcached is off
    
    This patch changes the configuration of the saved reports table so that
    columns which were previously excluded from the table altogether are now
    hidden. This prevents a JavaScript error when DataTables tries to
    reference a missing column.
    
    To test, apply the patch and go to Reports -> Use saved. You should have
    at least one report category configured and assigned to reports in order
    for the tabs display to be visible.
    
    Test the table of saved reports under a variety of these circumstances:
    
     - memcached disabled or enabled
     - reports exist or don't exist which require update from the old
       marcxml syntax
     - cache_expiry and/or update columns are configured in Administration
       -> Columns settings to be shown or hidden
    
    The report category tabs and the table should render correctly under all
    circumstances.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 94b2b6c4f946f4f43e6255cb582fc272c85d8872
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 23 12:43:55 2018 +0000

    Bug 20805: Update child to adult patron process broken on several patron-related pages
    
    This patch fixes a problem with several patron-related pages, where the
    "Update child to adult patron" menu item doesn't work. With some pages,
    the right category information wasn't being passed from the script to
    the template. With some, the right JavaScript variable weren't being
    passed from the template to the included JavaScript file.
    
    To test, apply the patch locate some patrons with "child" type patron
    categories. With each patron, go to one of the following pages and test
    the "update child" process in the toolbar's "More" menu.
    
     - Circulation ->
       - Batch check out
       - Notices
       - Statistics
       - Files
       - Housebound
       - Delete (test from the deletion confirmation screen).
    
    All test should be performed on a system with multiple adult patron
    categories configured AND on a system with only a single adult patron
    category.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1563ec38132ec687c714a5b64489d79e8c02476a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 25 09:32:58 2018 +0000

    Bug 18822: Check if we have MARC::Record and convert if not when using ES
    
    The new_record_from_zebra subroutine assumes that when using ES we
    always get MARC::Record objects when using ES, but sometimes we get them as xml via Z39 or
    internally. This adds a test to new_from_zebra to confirm we have a
    record object and to convert it if not
    
    To test:
    1 - Perform an advanced search from the advanced editor, make sure to
    select 'Local catalog' and a remote source
    2 - Error 'Internal search error [Object object]'
    3 - Apply patch
    4 - Repeat search, success!
    5 - Select and deselect various servers, search should still work
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cfca339d03777d4404153224a312012a6b89392d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jun 19 11:21:41 2017 -0400

    Bug 18822: Better error response
    
    Apply this patch first to see a change in the error feedback - instead
    of [Object object] you should get a text readable error
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 24dd595e0d4e168f6ac26f21e6d961dabff6f3e9
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Jul 2 10:41:24 2018 +0200

    Bug 20900: Add CPL branch in t_Batch.t too
    
    Same fix as previous patch.
    
    Test plan:
    Run t/db_dependent/Labels/t_Batch.t (without CPL branch)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7d45e88dde1e67bedf02a42daed9d7e7662df353
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jun 8 10:56:10 2018 +0200

    Bug 20900: Add CPL test branch in rollingloans.t
    
    Trivial fix.
    
    Test plan:
    Without this patch and a CPL library, run rollingsloans.t. See warns.
    With this patch, no warns.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d8d54d874a0c0764d42793a2f71d346c9c563d5a
Author: Charles Farmer <charles.farmer@inLibro.com>
Date:   Fri Jun 29 16:12:59 2018 -0400

    Bug 21025: Add GetPreparedLetter to Koha::Patron::Discharge
    
    Test plan (shamelessly ripped from Bug20953):
    
    1) Set system preference 'useDischarge' to 'Allow'
    2) Choose a patron without checkouts nor fines nor restrictions
    3) Log at OPAC and go to patron page /cgi-bin/koha/opac-user.pl
    4) Click on 'ask for a discharge' tab
       => You see /cgi-bin/koha/opac-discharge.pl
          with text 'What is a discharge? ...'
    5) Click on 'Ask for a discharge' link
       => You see /cgi-bin/koha/opac-discharge.pl?op=request
          with text 'Your discharge request has been sent ...'
    6) In a new browser tab/page, go to intranet on /cgi-bin/koha/members/discharges.pl
       => You see one discharge requets for the patron
       => Click on 'allow' on patron discharge request
    7) Come back to OPAC and refresh /cgi-bin/koha/opac-discharge.pl
      => You see link 'Get your discharge'
    8) Click on the link to get your generated PDF
      => An error message should appear informing you to contact your website's admin
    9) Apply this patch
    10) Click again on the link to get your generated PDF
      => This time, a download prompt should appear
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 082583327e58e65ac595f998669b5c0262aef644
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jun 18 15:29:37 2018 +0000

    Bug 20698: Remove obsolete template: transfer-slip.tt
    
    This patch removes an unused template file, circ/transfer-slip.tt. Its
    use was removed by Bug 7001:
    
    http://git.koha-community.org/gitweb/?p=koha.git;a=commitdiff;h=a9ded4fa008668df8c485fbbc76efa3cc9cc00d7#patch12
    
    To test, apply the patch and confirm that the file has been removed.
    Confirm that no references to the template exist in the codebase.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ddf6e6f246cacd30e9bfbbb2f7ffd8c061c9ed15
Author: Pasi Kallinen <pasi.kallinen@joensuu.fi>
Date:   Mon Mar 5 12:10:56 2018 +0200

    Bug 20332: Allow translating some grouped opac results texts
    
    The grouped OPAC results page has several untranslatable
    javascript-added texts, including the selection modifiers "Clear all"
    and "Select all" links, and the entries in the shelves/lists dropdown.
    
    Compare to opac-results.tt
    
    Signed-off-by: Pasi Kallinen <pasi.kallinen@joensuu.fi>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1ac0b87674a5770aaf536d2ad8d15e2b7b2a7c80
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jul 13 11:48:42 2018 +0000

    Bug 20090: (RM follow-up) Add missing paren
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5bf6acac7342d32e0229ee573f4a7f156c99259d
Author: David Kuhn <techservspec@gmail.com>
Date:   Thu Jan 25 09:27:19 2018 -0800

    Bug 20090: Missing script statement for Novelist Select on some record displays in OPAC
    
    This patch adds a check for UPCs and well as ISBNs to the Novelist Select conditionals in opac-detail.tt
    
    To test (note that you must subscribe to Novelist Select):
    
    1. If your library does not use the raton ratings feature, activate it for the purposes of this test.
    
    2. Display a record that does not have an ISBN in the 020 field, but has a upc (or other code) in the 024 field. The rating option will
    
    display as 5 radio buttons and a "rate it" button.
    
    3. Apply the patch.
    
    4. Display the same record again. The radio buttons will be replaced with stars. This indicates that the scripts on the page completed.
    
    Rather that using the patron ratings as in indicator, you can also use a web page inspector/debugger such as firebug or the built-in
    
    inspectors in most newer browsers to check for script errors.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    I couldn't check with Novelist Select, but read and checked changed made carefully.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ff8e46c42c9949d05a87745cdb36baec2048b864
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jun 29 11:52:16 2018 -0300

    Bug 21023: Remove warning in t/db_dependent/Circulation/Chargelostitem.t
    
    To test:
    - Run:
      $ kshell
     k$ prove t/db_dependent/Circulation/Chargelostitem.t
    => FAIL: Warning is displayed
    - Apply this patch
    - Run:
     k$ prove t/db_dependent/Circulation/Chargelostitem.t
    => SUCCESS: Tests pass! No warning!
    - Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit dbdd85ee1ebd99e4c8084664b4a7a9bb9ef34d74
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Jul 4 16:03:33 2018 +0200

    Bug 14446: Workaround to resolve uninitialized value in goto warning
    
    Forcing both GetTab calls to list context resolves the warning.
    A workaround, not a real fix.
    
    Test plan:
    Search for something in the syspref text bar.
    Without this patch, you will have a warn: Use of uninitialized value in goto
    With this patch, you won't.
    
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9bfb3bc3782dd6b516d0144074b57e55cbefae2e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 2 15:59:54 2018 -0300

    Bug 20990: (QA follow-up) make outstanding_credits return the account lines only
    
    This patch was discussed with Jonathan on a QA conversation. It is
    better to keep this simpler and more reusable. And is the right approach
    in this case.
    
    This patch makes Koha::Account::outstanding_credits return the account
    lines, code that used the $total value, will just use
    
        $lines->total_outstanding;
    
    Tests are adjusted accordingly.
    
    To test:
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Account.t
    => SUCCESS: Test pass.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3e0aa0f3191a570dceb834e4036932d9af3c820e
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jun 26 14:31:40 2018 +0000

    Bug 20990: Make same changes that were made to outstanding_debits
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9d596553369b2500d0e629aec1b085aa3836190a
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Jun 25 18:57:20 2018 +0000

    Bug 20990: (follow-up) Fix test description
    
    Test plan:
    prove -v t/db_dependent/Koha/Account.t
    --> Test message of first test of subtest outtanding_credits correctly says
    "Outstanding credits total..."
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4ee390cbb7ce0726c4d80c4581ef1a387abb47ce
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jun 25 11:15:14 2018 -0300

    Bug 20990: Add Koha::Account->outstanding_credits
    
    This patch adds a method that retrieves (for a patron's account) the
    outstanding credits (i.e. those that haven't been applied to any debit.
    
    To test:
    - Apply this patches
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Account.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0fb5019b7142396f0cd2cec1132dba767b0c64b2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jun 25 11:15:08 2018 -0300

    Bug 20990: Unit tests for Koha::Account->outstanding_credits
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1d54746cb2635a7cdec07a37e7ebacfa422d6365
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jun 6 14:54:58 2018 +0000

    Bug 6647: Label item search should use standard pagination routine
    
    This patch doesn't fix how pagination links are generated for the label
    item search results, but it does modify the template so that the
    pagination links are styled like they are on catalog search results.
    
    To test, apply the patch and go to Tools -> Labels.
    
     - Open or create a label batch.
     - Click "Add items" to trigger the pop-up search window.
     - Perform a search which would return multiple results.
     - Confirm that the style of the pagination bar matches the one on the
       catalog search results page.
     - Confirm that current-page number highlighting works correctly.
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 19227359a197ae19a6d013c3e0f07a54173d1a46
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 14 11:31:02 2018 -0300

    Bug 20919: Remove unecessary search calls on the biblio detail page
    
    There is a countanalytics flag that is set for items used in analytical
    biblio records. This flag is only used in the template when 'analyze'
    has been passed to the script.
    In order to avoid unecessary search calls (1 per item), $analyse must be
    tested.
    
    Test plan:
    0. Do not apply the patch
    1. tail -f /var/log/koha/kohadev/zebra-output.log
    2. Hit a bibliographic record detail page with several items
    3. Notice that the log has 1 line per item:
      11:30:36-14/06 zebrasrv(32) [warn] ir_session (exception)
    4. Apply the patch
    5. Hit the page again
    6. There is nothing in the zebra log file
    
    If you are familiar with analytic records, confirm that you are not
    allowed to remove an item that is used in analytical biblio records.
    
    Signed-off-by: Hugo Agud <hagud@orex.es>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d421cfaed55df1404a9242cfbbf9ad95c0a2ccf5
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Mon Jun 18 09:04:19 2018 +0200

    Bug 20953: Prevent several discharge requests on OPAC
    
    On OPAC, a user can requested a discharge even if one is already pending.
    This generates several pending discharges in staff interface that can not be deleted.
    
    This is because request operation leads to page 'opac-discharge.pl?op=request' and user can refresh this page performing a new request.
    
    Perl code must check that operation is allowed.
    
    Patch reoganised the code so that the following FIXME is obsolete :
      'FIXME looks like $available is not needed'
    Patch also replaces 'op' arg test to also check undef : input->param("op") // ''
    
    Test plan :
    1) Set system preference 'useDischarge' to 'Allow'
    2) Choose a patron without checkouts nor fines nor restrictions
    3) Log at OPAC and go to patron page /cgi-bin/koha/opac-user.pl
    4) Click on 'ask for a discharge' tab
       => You see /cgi-bin/koha/opac-discharge.pl
          with text 'What is a discharge? ...'
    5) Click on 'Ask for a discharge' link
       => You see /cgi-bin/koha/opac-discharge.pl?op=request
          with text 'Your discharge request has been sent ...'
    6) In a new browser tab/page, go to intranet on /cgi-bin/koha/members/discharges.pl
       => You see one discharge requets for the patron
    7) Come back to OPAC and refresh page
       => You see /cgi-bin/koha/opac-discharge.pl
       with text 'Your discharge will be available on this page within a few days.'
    8) Come back to intranet and refresh /cgi-bin/koha/opac-discharge.pl
       => There is still one requets for the patron
    9) Come back to OPAC and enter URL /cgi-bin/koha/opac-discharge.pl?op=get
       => You see /cgi-bin/koha/opac-discharge.pl
          with text 'Your discharge will be available on this page within a few days.'
    10) Come back to intranet and refresh /cgi-bin/koha/opac-discharge.pl
       => There is still one requets for the patron
    11) Click on 'allow' on patron discharge request
    12) Come back to OPAC and refresh /cgi-bin/koha/opac-discharge.pl
        => You see link 'Get your discharge'
    13) enter URL /cgi-bin/koha/opac-discharge.pl?op=request
        => You see same page and no new discharge requets is created
    14) Come back to intranet on patron details page
    15) Remove the discharge restriction
    16) Come back to OPAC and refresh /cgi-bin/koha/opac-discharge.pl
        => You see text 'What is a discharge?...'
    17) enter URL /cgi-bin/koha/opac-discharge.pl?op=get
        => You see same page and no new discharge requets is created
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1debd8bf81f2db8c5e222083ed5104539972db89
Author: Mirko Tietgen <mirko@abunchofthings.net>
Date:   Fri Jun 15 12:34:51 2018 +0200

    Bug 20949: (follow-up) debian/control
    
    Signed-off-by: Mirko Tietgen <mirko@abunchofthings.net>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4b8bcd9be9e820f3d63d36f787eec30b439cb977
Author: Mirko Tietgen <mirko@abunchofthings.net>
Date:   Fri Jun 15 12:10:19 2018 +0200

    Bug 20949: Koha depends on Clone
    
    Clone was not declared a dependency before. It used to be a dependency
    of Hash::Merge but isn't in the recent version.
    
    Signed-off-by: Mirko Tietgen <mirko@abunchofthings.net>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e41387016e3673c1358fd1c99efde28d03d1883c
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Mar 13 14:13:10 2017 +0100

    Bug 18250: Force startup order in postinst script
    
    This is a workaround meant to correct upgrading installs.
    We force the order by disable/enable.
    
    Test plan:
    [1] When upgrading an existing install, check that the startup order
        after the upgrade has been corrected in /etc/rcX.d (say X=5).
    
    Signed-off-by: Mirko Tietgen <mirko@abunchofthings.net>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7d6cdf9c2a6c7920769d7a8e8d4d355a8d393413
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Mar 13 13:53:49 2017 +0100

    Bug 18250: Update LSB block of koha-common init script
    
    Currently koha-common may start before memcached. We should prevent that.
    If we add memcached to the LSB section of the koha-common init script,
    Debian's insserv will know about this requirement.
    
    Note: This patch is only a step in resolving the issue.
    
    Test plan:
    [1] Copy the updated koha-common script to /etc/init.d
    [2] Look for S..koha-common and S..memcached in /etc/rcX.d (say X=5)
    [3] Run sudo update-rc.d koha-common disable
    [4] Run sudo update-rc.d koha-common enable
    [5] Look again for S..koha-common in /etc/rcX.d (say X=5).
        The number for koha-common should now be higher than for memcached.
    
    Signed-off-by: Mirko Tietgen <mirko@abunchofthings.net>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ea184236a493fdc1267253662838ed64f72139ef
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Mon Jun 25 14:14:43 2018 +0200

    Bug 19502: Add POD for max_result_window
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d38a0404811427e333014ebae9e9df83736dc540
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Mon Jun 25 14:14:32 2018 +0200

    Bug 19502: Remove debug warn
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 95b1983a25dcca14700e7251f94fde43f78f6911
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Jun 5 15:11:34 2018 +0200

    Bug 19502: Retrieve index.max_result_window from ES
    
    This avoid hardcoding '10000' in two different places and allow users to
    adjust this setting.
    
    Also, this patch fixes a bug when the search return less than 10000
    results
    
    Test plan:
    1. Do a search that returns 10000+ records.
    2. Note the warning above the pagination buttons
    3. Go to the last page, no error
    4. Change the ES setting:
       curl -XPUT http://elasticsearch/koha_master_biblios/_settings -d \
         '{"index": {"max_result_window": 20000}}'
    5. Do another search that returns more than 10000 but less than 20000
    6. Note that the warning does not show up
    7. Go to the last page, still no error
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 78b9a3e4509b3b8dcc4d76cffd3ed3f7f4952543
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 19 23:13:49 2018 +0000

    Bug 19502: (follow-up) Pass parameters to avoid making templates depend on search engine
    
    https://bugs.koha-community.org/show_bug.cgi?id=19502
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cc131475eda2871afa2e5a4cf8f6f7191af06b31
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 16 11:10:37 2018 +0000

    Bug 19502: Limit pagination to first 10000 results when using ES
    
    This patch is to avoid hitting an error page. We should eventually make the
    max number returned configurable for ES.
    
    To test:
    1 - Have Koha running ES with 10,000+ records
    2 - Search for '*'
    3 - Click 'Last' to view last page of results
    4 - 'Cannot perform search' error
    5 - Apply patch
    6 - Search again
    7 - View 'Last' page
    8 - No error, you go to the last of 10000
    9 - Note the warning above the pagination buttons
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Alex Arnaud <alex.arnaud@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2414a4e7056656843696aca19a75acebb577745a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 29 14:09:07 2018 -0300

    Bug 21009: Fix max length of inputs on editing/adding items
    
    There is a "max length" value you can define at framework level to
    limit the size of the input. But it is not taken into account on the
    add/edit item form.
    
    It is a regression that has been introduced by
      commit 47d2de9c024bfb93d56184f298f334b20685cd86
      Bug 12176: Remove HTML from additem.pl
    
    max_length vs maxlength
    
    Test plan:
    - Define a maximum length for an item subfield
    - Add or edit an item
    => Without this patch the maxlength attribute of the inputs are not
    defined (maxlength="")
    => With this fix you will see the maxlength attributes correctly set
    with the value you defined in the framework
    
    Note:
    We could/should set this value to the size of the DB column when mapped
    For instance 952$u is mapped with items.uri, which is a varchar(255).
    This length restriction should done at framework level
    
    Signed-off-by: Pierre-Luc Lapointe <pierreluc.lapointe@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 82e0e97a0081ce75c334ca3073d385e53f21d51c
Author: Victor Grousset <victor.grousset@biblibre.com>
Date:   Thu Jan 25 14:37:56 2018 +0100

    Bug 20084: Fix Industrial2of5 and COOP2of5 patron card layouts
    
    == Test plan ==
    This is an oversimplification of a full patron card setup used in production.
    
    1. Create a batch with 1 patron
    2. Create a layout and set
         the name
         "Print card number as barcode"
         "Barcode type:" to "Code 39"
    3. Create a card template without filling anything
    4. Export the batch using the layout and template
    5. You should have a white page with a barcode
         And no errors in the relevant log file
         This show that this setup isn't completely bogus
         (although Code 39 is the only type working...)
    6. Layout: set "Barcode type:" to Industrial2of5
    7. Export the batch
    8. You should have a white page with no barcode
         And errors in the relevant log file
         "Invalid Characters"
         This is the bug.
    9. Layout: set "Barcode type:" to COOP2of5
    10. Export the batch
    11. You should have a white page with no barcode
          And errors in the relevant log file
          "Invalid Characters"
          This is the bug.
    12. Apply this patch
    13. Retry with both non-working patches
        1. You should have a white page with a barcode
        2. And no errors in the relevant log file
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 27de9a3e5d2ea7b803852649836b9442b10896f7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jul 9 13:24:44 2018 +0000

    Bug 21054: Remove extraneous </body> tag from sco-main.tt
    
    To test:
    1 - Enable sco and setup AutoSelfCheck
    2 - Try to use self checkout and print receipt
    3 - You shoudl be redirected to the login page
    4 - Apply patch and restart all the things
    5 - Try to use self checkout and print a receipt
    6 - Success!
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bcba640f115e07480c502c2bf8522acdb9d8d5df
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 21 18:06:00 2018 -0300

    Bug 20979: Fix confirm deletion popup when deleting a biblio
    
    When deleting an empty bib, error messages pops up "1 order(s) are
    using this record. You need order managing permissions to delete this
    record." even though user has superlibrarian permissions.  Prevents the
    deletion of the bib record.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a6b8fc9b2e29b91cef62def4f8b4fed98efa9aea
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Fri Jul 6 13:40:53 2018 +0000

    Bug 21046: Return the correct borrowernumber when there is empty cardnumber(s)
    
    Test plan:
      - Use a patron with an empty cardnumber to authenticate with ILSDI
        AuthenticatePatron
        (cgi-bin/koha/ilsdi.pl?service=AuthenticatePatron&username=userid&password=pass),
      - make sure you have other patron(s) with empty cardnumber and there
        borrowernumber is
        smaller than the one you authenticate with,
      - you should get a wrong borrowernumber,
      - apply this patch,
      - test again, you should get the right one
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 68ff8702e09be9879d508ea82c0ef7fab53c0ee9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 2 15:30:57 2018 -0300

    Bug 19617: (QA follow-up) Fix typo for type
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3f85c9b16b43a98c75f7344cfa389b38c56be022
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Mon Apr 30 12:47:26 2018 -0400

    Bug 19617: Allow 'writeoff of selected'
    
    This patch adds a writeoff equivilent to 'Pay selected'
    
    Test Plan:
    1) Apply this patch
    2) Find a patron with fines
    3) On the "Pay fines" tab, select one or more fines and use the
       "Write off selected" button.
    4) Note the fine amount you used was written off for those fines.
    
    Signed-off-by: Kyle M Hall <kyle@bywatetsolutions.com>
    
    Signed-off-by: Martha Fuerst <mfuerst@hmcpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit aabb3350cad7873b4d83240f7a07ab410fb3d9f2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jul 6 14:25:20 2018 +0000

    Bug 12395: (RM follow-up) Make updatedatabase statements idempotent
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fba064838403961cffaaaa95bd7c41bd4c98c678
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jul 6 14:19:22 2018 +0000

    Bug 12395: DBRev 18.06.00.005
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 200a468a9c4a75f48ef2fbe77af03c497347c79f
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Jun 8 10:24:19 2018 +0200

    Bug 12395: Add FK constraint and use patron-title.inc
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8e58b0396676ee2690857a00aeb786cf64657a52
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Apr 16 21:10:15 2018 +0000

    Bug 12395: (QA follow-up) Change wording for consistency and fix use CGI;
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4967a3150a65b9b8dbff5352eb837442b951a9bf
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Dec 3 13:01:46 2015 -0500

    Bug 12395: Use standard <fieldset> + <ol> markup for showorder.tt
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6403070e63c80624c17d1e90557b4d0f2c078c6b
Author: Katrin Fischer <Katrin.Fischer.83@web.de>
Date:   Sun Oct 25 12:32:45 2015 +0100

    Bug 12395: (QA follow-up) Add class/id to body tag
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 32fd93ed6f11b371f3d6efa780b4f36644629837
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Tue Jun 16 10:05:16 2015 +0200

    Bug 12395: Make received orders table consistent with pending orders table
    
    (links of More column)
    
    Also change "Created by" with "Ordered by" in receive page.
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e1c9386bd8a7b9e5e124525c7df9612e2cde5adf
Author: Jonathan Druart <jonathan.druart@biblibre.com>
Date:   Fri Feb 20 11:31:52 2015 +0100

    Bug 12395: Display created_by even if firstname is missing on receiving
    
    On receiving orders, "no name" was displayed if the firstname of creator
    was not filled.
    The surname should be displayed.
    
    Signed-off-by: Paola Rossi <paola.rossi@cineca.it>
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit adfdd3b21f821953d4f07145ef3a1e9ab79be0cf
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Feb 10 10:23:25 2015 +0100

    Bug 12395: Add unit test to check created_by is correctly set
    
    Signed-off-by: Paola Rossi <paola.rossi@cineca.it>
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 948704964073dd8dea146d959ad5ed690ccafe67
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Mon Jun 9 16:15:17 2014 +0200

    Bug 12395: Save order line's creator
    
    New MySQL column: aqorders.createdby
    
    Creator's name is displayed on order's receive pages (acqui/orderreceive.pl
    and acqui/parcel.pl)
    
    On acqui/orderreceive.pl it replace the name of basket's creator
    On acqui/parcel.pl, to avoid adding more data in the table of pending
    orders, it is shown in a popup like MARC and Card views
    
    Test plan:
    1/ Run updatedatabase.pl
    2/ Create a new order and go to the receipt page (acqui/parcel.pl)
    3/ Click on "Order" link in column "More" (previously "View record")
    4/ A javascript popup should appear with your name in it. Close the
    popup.
    5/ Click on "Receive" link
    6/ Your name should appear in front of "Created by" label, to the right
    of the page.
    
    Patch updated with use of atomic update.
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 46b09129c0e0df801d0dd6f526911506a0d36f93
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 19 10:02:26 2018 -0300

    Bug 20650: Remove unused virtualshelves/merge.tt
    
    Committed by Jonathan Druart, get out from first patch of this patchset.
    
    It's a follow-up of bug 4019 which removed virtualshelves/merge.pl
    
    Moving this change to its own commit to make it clear in the git log and
    easier to backport if needed.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fcd3965fb5f6a5fb0d8830e884dd0ecf5de75af5
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 19 12:45:07 2018 +0000

    Bug 20650: (follow-up) Add missing include file
    
    This patch adds a missing include of doc-head-open.inc.
    
    To test, apply the patch and export a batch of patron cards. The modal
    view for downloading the card batch PDF should work correctly.
    Validating the iframe's source should show no relevant errors.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 95d8ceef98f5c1242a54dd701c49e7a41bd34721
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Apr 24 13:37:07 2018 +0000

    Bug 20650: Switch single-column templates to Bootstrap grid: Various, part 3
    
    This patch updates various unrelated templates to use the Bootstrap
    grid. In each case, confirm that the indicated page looks correct.
    
    This patch also corrects a couple of capitalization errors and removes
    an unused template: virtualshelves/merge.tt.
    
     - Tools -> Patron card creator -> Manage -> Card batches
       - Export a batch
       - The pages inside the modal window should look correct: Both the "X
         batch(es) to export" screen and the "download exported batch(es)"
         one.
    
     - Tools -> Patron lists -> Edit list
       - The patron list add/edit form should look correct.
    
     - Disable plugins in koha-conf.xml.
       - Tools -> Plugins
       - The "Plugins disabled" page should look correct.
    
     - Enable plugins in koha-conf.xml
       - Tools -> Plugins -> Upload plugins.
         - This page should look correct.
    
     - Tools
       - The tools home page should show three columns: Patrons and
         Circulation, Catalog, Additional tools.
       - At viewport width below 768 pixels content should reflow into one
         column.
    
     - virtualshelves/merge.tt has been removed as it is unused. Search the
       codebase for references to it. There should be none.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cdd956bc5fbabd9fe5bd79aa1d57a9acf1ba3753
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Apr 23 18:26:14 2018 +0000

    Bug 20641: Switch single-column templates to Bootstrap grid: Various, part 2
    
    This patch updates various unrelated templates to use the Bootstrap
    grid. In each case, confirm that the indicated page looks correct.
    
     - Acquisitions -> Vendor -> Add to basket -> From a staged file.
     - Logged-in user menu (in the upper right) -> Search history.
     - With plugins disabled in koha-conf.xml, go to Tools -> Tools plugins.
     - With the EasyAnalyticalRecords system preference set to 'Display,'
       view a bibliographic record.
       - Choose Edit -> Link to host item.
       - Submit a barcode to be linked.
     - Configure a MARC subfield (e.g. 100$a) to use the
       unimarc_field_225a_bis plugin.
       From the MARC edit page, trigger the plugin and confirm that the
       page in the popup window looks correct. Confirm that changes made in
       the popup window are saved to the corresponding field in the editor.
     - Administration -> Funds -> Edit a fund.
       - Click 'Select owner.'
       - Search for a patron.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 175a4037f72186d9b422e2b9ab4b4224df006f7e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Apr 25 18:07:42 2018 +0000

    Bug 20220: Move template JavaScript to the footer: Holds
    
    This patch modifies the holds template so that JavaScript is included in
    the footer.
    
    To test, apply the patch and initiate the process of placing a hold.
    Throughout the process JavaScript-based interactions should work: Patron
    autocomplete, datepickers, DataTables, cancel confirmations, etc.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3c887b4e07acf9459767a7b934aa4f6c16cae534
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue May 8 13:45:37 2018 +0000

    Bug 19709: Move template JavaScript to the footer: Labels
    
    This patch modifies the staff client label creator templates so that
    JavaScript is included in the footer instead of the header.
    
    To test, apply the patch and test the JavaScript-driven features of
    each modified template: All button controls, DataTables functionality,
    form validation, etc.
    
    This patch also modifies the templates to use the Bootstrap grid instead
    of YUI, and removes obsolete "text/javascript" attributes from
    <script> tags and "text/css" attributes from <style> tags in the
    modified templates.
    
    To test, apply the patch and test the following interactions:
    
    - Creating and managing layouts
    - Creating and managing batches
    - Creating and managing templates
    - Creating and managing printer profiles
    - Creating quick spine labels
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 18c0eb1301440c20acb657ef553beed0feaf5d0e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Apr 26 18:54:44 2018 +0000

    Bug 20668: Update two-column templates with Bootstrap grid: Acquisitions part 2
    
    This patch modifies several acquisitions templates to use the Bootstrap
    grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags in the modified templates.
    
    Staff client CSS is modified in this patch so that elements which were
    styled based on the sidebar's "yui-b" class will work with <aside>.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
    - I don't have EDI set up, so to test acqui/edi_ean.tt I navigate
      directly to /cgi-bin/koha/acqui/edi_ean.pl. It's only the page
      structure we're worried about.
    - Acquisitions -> Orders search
    - Acquisitions -> Vendor -> Invoices -> Invoice search
      - View an invoice
      - Manage invoice files (Preference AcqEnableFiles must be enabled).
    - Acquisitions -> Late orders
    
    Patch applies and operates as described.
    Signed-off-by: Dilan Johnpullé <dilan@calyx.net.au>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 60e40ba573b9ea5b7db3fe2a3fed31a2d3991849
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Apr 26 18:34:31 2018 +0000

    Bug 20667: Update two-column templates with Bootstrap grid: Acquisitions part 1
    
    This patch modifies several acquisitions templates to use the Bootstrap
    grid instead of YUI.
    
    This patch also removes obsolete "text/javascript" attributes from
    <script> tags.
    
    To test, apply the patch and view the following pages, confirming that
    they look correct at various browser widths:
    
    - Acquisitions -> Home page
    - Acquisitions -> Vendor search results
    - Acquisitions -> Vendor -> Basket groups
      -> Edit
    - Acquisitions -> EDIFACT messages
      -> View EDIFACT message
    
    Signed-off-by: Dilan Johnpullé <dilan@calyx.net.au>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a943a924edff7db28495b0c92341f5357ad952ce
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jan 3 17:41:09 2018 +0000

    Bug 20731: Move template JavaScript to the footer: Call number browser MARC plugin
    
    This patch modifies the call number browser plugin so that JavaScript is
    in the footer instead of the header.
    
    This patch also makes some unrelated changes: The page title has been
    corrected; DataTables code has been removed as it was unused.
    
    To test, apply the patch and configure a MARC framework to use
    cn_browser.pl as the plugin for tag 952 subfield o.
    
    Open an item for editing. The "Full call number" field should have an
    active "..." link next to it. Clicking this should trigger a popup
    window with the Call number browser. Confirm that submitting a new
    search from this window works correctly.
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 64761e56ccfbf98844d2fc8c7aa68ee608a2b162
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jul 6 12:56:54 2018 +0000

    Bug 20980: DBRev 18.06.00.004
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8a83f1e1a975368c006c698f94357975333fd2d6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 6 09:22:29 2018 -0300

    Bug 20980: (QA follow-up) Do not delete existing data on tests fix
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 65aacc1b1ded569a259f45c3abd5d1a73c3f37e6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Jun 23 07:41:15 2018 -0300

    Bug 20980: (follow-up) Offset name consistency
    
    This patch makes 'credit' account types generate 'Manual Credit' offset.
    The original patch used 'Payment' but I think the code wants to
    distinguish between payments and manually added credits (otherwise they
    would've picked the same accounttype value, and they don't.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7b6c242d972e3edf5b4d75d6023a0ae1dc9d1f9d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jun 22 12:24:33 2018 -0300

    Bug 20980: (follow-up) Only use UpdateStats for 'payment' and 'writeoff'
    
    This patch makes Koha::Account::add_credit record statistics logs
    (through C4::Stats::UpdateStats) only for the 'payment' and 'writeoff'
    credit types.
    
    Both credit types are whitelisted in UpdateStats, so we keep the current
    behaviour. Another option would've been to add new account types to the
    white list, but with the account offsets it seems that using the
    statistics table for account changes won't be useful for too long, as
    offsets contain the same (and more) information.
    
    To test:
    - Apply the patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Account.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cc30dc39bf3c8f627865c1a4891fac534266dc03
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jun 22 12:23:47 2018 -0300

    Bug 20980: Make mancredit.pl use Koha::Account::add_credit
    
    This patch makes creating a manual credit from the UI record the account
    offset as 'Manual Credit', and properly set account_offsets.credit_id
    instead of account_offsets.debit_id.
    
    To test:
    - Create a manual credit (of 'Credit' type) for a known patron (acevedo?)
    - Run:
      $ sudo koha-mysql kohadev
      > SELECT * FROM account_offsets;
    => FAIL: The account offset for the manual credit has type=Manual Debit,
        credit_id=NULL and debit_id=accountlines_id
    - Run the atomic update:
      $ updatedatabase
    - Run:
      $ sudo koha-mysql kohadev
      > SELECT * FROM account_offsets;
    => SUCCESS: The account offset has been corrected and now has
    type=Manual Credit, credit_id=accountlines_id and debit_id=NULL
    - Create a new manual credit (of 'Forgiven' type) for a known patron
    - Run:
      $ sudo koha-mysql kohadev
      > SELECT * FROM account_offsets;
    => SUCCESS: The account offset has been stored correctly as a credit!
    - Sign off :-D
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f7ed22d25372bb7a68dcbf1a744b81aeb8657b0a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 21 14:43:34 2018 -0300

    Bug 20980: Add 'Manual Credit' and fix existing offsets
    
    This patch adds a new offset type 'Manual Credit'. And adds an atomic
    update for fixing existing offsets.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b8cae8e5b85aa0bdef7783e39343eedf5a123e9f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 6 09:11:32 2018 -0300

    Bug 20978: (QA follow-up) Do not delete existing data on tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 59a9e5502dd18db47333fa304ba5c11df32b807f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jun 27 10:37:24 2018 -0300

    Bug 20978: (follow-up) POD completeness
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a13061ee4b1f515bc91b6842773d0d9bae6be461
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 21 13:33:46 2018 -0300

    Bug 20978: (follow-up) Another use case from C4::Circulation
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a66542d67ba2cd6edb582055d38b1d577dd1be32
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 21 13:04:01 2018 -0300

    Bug 20978: Add Koha::Account::add_credit
    
    This patch adds:
    - Koha::Account::add_credit
    - A single source of truth for accounttype and offset_type values
    
    To test:
    - Apply the first patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Account.t
    => FAIL: Tests fail!
    - Apply this patch
    - Run:
     k$ prove t/db_dependent/Koha/Account.t
    => SUCCESS: Tests pass!
    - Sign off :-D
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 04cc45bb520b4621af84d3d13b7933f91222c1e4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 21 13:03:13 2018 -0300

    Bug 20978: Unit tests
    
    This patch adds unit tests for Koha::Account::add_credit.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1a41e5ef14c9b706ddad3afaddcc6a5f5242ba35
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 26 13:40:22 2018 +0000

    Bug 20969: (follow-up) Move focus to textarea whe modal is shown
    
    This follow-up adds code to move the mouse cursor to the modal window's
    textarea when the modal is displayed.
    
    To test, apply the patch and test the process of adding/editing notes on
    an order. Confirm that the focus moves to the textarea when the note
    editor modal window is shown.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f69e62ff9fbe2958fbb9720a8d914df4566244ab
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jun 20 12:39:05 2018 +0000

    Bug 20969: Use modal to add and edit notes from basket
    
    This patch modifies the acquisitions basket page so that links to add or
    edit vendor or internal notes trigger a modal with the notes edit form
    instead of redirecting to a different page. This is a markup change only
    -- The form still submits to modordernotes.pl.
    
    To test, apply the patch and view a basket in acquisitions which has
    multiple orders. Test various note controls:  Add internal note, Add
    vendor note, Edit internal note, edit vendor note.
    
    Confirm that the operations work correctly with multiple orders in the
    basket.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 977c1a73e883b5e9ed1c6fe33eb26f33c439b3b5
Author: Bernardo González Kriegel <gonzalez@di.unc.edu.ar>
Date:   Fri May 4 19:49:07 2018 -0300

    Bug 20710: Update MARC21 frameworks to Update 26 (April 2018)
    
    This bug add update 26 changes.
    
    Update 26
    http://www.loc.gov/marc/bibliographic/bdapndxg.html
    
    New subfields 377$3, 380$3, 381$3, 383$3, 730$4
    
    Codes
        Map 007/04 'x' new
        Map 007/06 'c' renamed
    
    No auth changes
    
    To test:
    1) Apply Bug 19835
    2) Apply this patch
    3) Reload marc21 bibliografic frameworks, check loads ok
    4) Clean your browser cache
    5) Edit a new bib record, fire 007 plugin,
        for Map, 04 position, check new 'x'
        for Map, 06 position, check renamed 'c'
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2c5413f36a353fbacdfdd7ce17f5b294fa026207
Author: Victor Grousset <victor.grousset@biblibre.com>
Date:   Wed Dec 20 17:13:40 2017 +0100

    Bug 19849: Make a string translatable again after a rebase error
    
    Bug 16621 reverted part of bug 12509
    1. Log in the OPAC and staff interface
    2. Restrict the user logged in the OPAC (restricting yourself works)
       Staff interface → Patron page → Restrictions → Add manual restriction
       Put this comment the "OVERDUES_PROCESS Give the books back or we're comming!"
    3. Install the fr_FR locale and switch the interface to it
    4. Go to OPAC: /cgi-bin/koha/opac-user.pl
    5. Then you should see the ugly comment with "OVERDUES_PROCESS"
    6. Apply this patch
    7. Update the translation: ./translate update or equivalent
    8. Open misc/translator/po/fr-FR-opac-bootstrap.po
    9. Find the string containing "Restriction added by overdues process"
    10. Remove the fuzzy flag
    11. Install the language
    12. Refresh the page in the OPAC
    13. Then you should see the translation + the comment instead of "OVERDUES_PROCESS" + the comment
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9864b805f4986b439551d10e45b8673d2e4c487e
Author: Victor Grousset <victor.grousset@biblibre.com>
Date:   Wed Dec 20 15:15:49 2017 +0100

    Bug 19849: Minor fixes & refactor of opac-reserve.tt & opac-user.tt
    
    - make next patch easely reviewable.
    - fix lone quote. (Replace by <strong>
    - add forgotten condition for 9999-12-31
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e9f12b6baac366195a7666bf2d521c61a2851131
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed May 16 02:25:38 2018 +0000

    Bug 7136: Correct description of Grace period for subscriptions
    
    The grace period is used with the serialsUpdate.pl cronjob. It will
    generate the next issue and set the one before to 'Late' with
    an optional note.
    
    There is on trace of a 'waiting' status for serials.
    
    To test:
    - check help file on the subscription edit form for
      the description of the 'Grace period'.
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2479a70a810973ddec2ad67f4638cb9273829912
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 26 13:05:42 2018 +0000

    Bug 20507: Shelf browser does not update image sources when paging
    
    This patch updates the shelfbrowser include so that the system
    preference check for Coce will function correctly.
    
    To test, apply the patch and test the OPAC shelf browser with each of
    the enhanced content options enabled: Coce, Amazon, Google. In each
    case, page through the shelf browser to confirm that covers load
    correctly.
    
    Signed-off-by: Cab Vinton <bibliwho@gmail.com>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8c5fd0dec1a0802c8714cb9ecc966f481fe45d7e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jul 6 11:13:49 2018 +0000

    Bug 20703: (RM follow-up) Remove the word 'Payment' from void
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 455c254ee01095d574ff1a26171ec4cca251b7b5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue May 22 11:46:10 2018 -0300

    Bug 20703: Add confirmation modal when making a credit void
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 462ec9601a43c31ccb12f010b4bddc80dcb71344
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Thu May 3 09:17:06 2018 -0400

    Bug 20703: Add ability to void any credit
    
    At this time, only payments may be voided. There is no reason to have this limitation. There are situations where a librarian may need to void an accidental writeoff, or perhaps void an automatic credit that was created by Koha. For illustration, this is directly from a partner library:
    
    "For example a lost book refund becomes a credit on account.  Presently the credit may be applied to a fine for a different item charged to patron. We perform a write off to clear the remaining credit, then add the fine back to the account and give the patron a refund for the lost/refunded amount. Our accounting system ask that we keep the Lost funds/refunds separate from all fines."
    
    Test Plan:
    1) Create a fine and write it off
    2) Note there is no 'void' button for the writeoff
    3) Apply this patch
    4) Note the buttons now show
    5) Test each button on a writeoff
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 72058d27415a82799d9f6acac693e94dc7bf9309
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 2 12:05:55 2018 -0300

    Bug 20946: (QA follow-up) make outstanding_debits return the account lines only
    
    This patch was discussed with Jonathan on a QA conversation. It is
    better to keep this simpler and more reusable. And is the right approach
    in this case.
    
    This patch makes Koha::Account::outstanding_debits return the account
    lines, and a method is added to Koha::Account::Lines so the outstanding
    amount is calculated on the resultset. This is done the dame way it was
    done before, and the tests got adjusted.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 158e50d0bcf214932fb1ca037049e6515fbbd80c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jun 27 03:53:27 2018 +0000

    Bug 20946: (RM follow-up) Additional tests and fix addition to undef
    
    Added a few tests with credit lines and found we got warnings, adjusted
    the routine to avoid this
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d212eb4026c8543c6f1adc9871d96233618173bf
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jun 26 13:20:26 2018 +0000

    Bug 20946: Additional unit tests for 0 lines edge case
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b3cd3855b912cd7bfc9b10f1163a34d09be4f5e0
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jun 26 13:08:36 2018 +0000

    Bug 20946: Reduce number of db calls
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b0cb7f44ef80d5f6a3d45ce87543a27637c68c6f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Jun 16 09:44:19 2018 -0300

    Bug 20946: Use K::Account->outstanding_debits in pay.pl and paycollect.pl
    
    This patch changes the how account lines are fetched (using
    Koha::Account->outstanding_debits) so credits are not picked.
    
    To test:
    - Add a $5 credit to a patron
    - Add a $1 fine
    - Go to the 'Pay fines' tab
    => FAIL: Credit is displayed
    - Try to pay all fines
    => FAIL: You are told to enter a value less than or equal to -4.00
             (Observe you cannot do that)
    - Apply this patch
    - Reload
    => SUCCESS: Credit is not displayed
    => SUCCESS: You are able to pay all fines
    - Sign off :-D
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0e45263492dbd8123bf2507aad6dc45d95c4902c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Jun 23 05:41:00 2018 -0300

    Bug 20946: Add Koha::Account::outstanding_debits
    
    This patch adds a handy method that returns the total for outstanding
    debits (i.e. those that haven't been canceled with credits), and the
    corresponding Koha::Account::Line objects.
    
    Unit tests are added.
    
    To test:
    - Apply this patch
    - Run:
      $ kshell
     k$ prove t/db_dependent/Koha/Account.t
    => SUCCESS: tests pass!
    - Sign off :-D
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 302224798333eee6a67822f994474a2263a75de9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 4 14:55:14 2018 -0300

    Bug 21029: Make "Suspend until:" translatable
    
    The label was part of the holds.js file. As .js files are never
    translatable it needs to be moved to template level.
    
    Test plan:
    - Place a hold on an item
    - Go to the patron account
    - Click on the Suspend button on the holds tab
    - View the modal, the label before the date field "Suspend until:" is
    now translatable.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 505630ca081c93fa81f1f6b85573374be8ee1009
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 29 10:06:31 2018 -0300

    Bug 21020: Fix return branch on transfer - SIP
    
    Caused by
      commit 546379cc92b733cb29a0b70247a72c770afdad26
      Bug 17680: C4::Circulation - Remove GetItemIssue, simple calls
    
    Since this commit AddReturn return a Koha::Issue object, not a hashref
    with item's info.
    
    Test plan:
    1 - Enable SIP server on your test instance
       For kohadevbox:
       cp /etc/koha/SIPConfig.xml /etc/koha/sites/kohadev/
       create patron with user/pass term1/term1 and grant circulation
       privileges
    2 - enable AutomaticItemReturn
    3 - Checkin an item which will generate a transfer via SIP2:
       perl /home/vagrant/kohaclone/misc/sip_cli_emulator.pl -a localhost -p
       6001 -su term1 -sp term1 -l LPL --item {BARCODE} -m checkin -t
       CR
    4 - Note no CT field
    5 - Apply patch
    6 - Repeate checkin via SIP2
    7 - Transfer destination is correctly returned in CT
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0cf594c3ad0b1e3aae2af14cbfe16bdbd2462318
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 29 15:39:19 2018 -0300

    Revert "Bug 20864: Only set bibs_selected cookie when BrowseResultSelection is activated"
    
    This reverts commit ce6ec1e7faef217950e3450788ea444dad26d7c0.
    
    https://bugs.koha-community.org/show_bug.cgi?id=21024
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1f818e67387488e06a106398994bccca2fadc698
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Apr 24 16:03:40 2018 +0100

    Bug 20651: Improve full supplier metadata display
    
    This patch improves the display of the extra metadata that may be
    returned by an ILL supplier.
    
    The display of the metadata has been moved from the "Toggle full
    supplier metadata" link at the bottom of the page to a button on the
    right of the request toolbar, labelled "Display supplier metadata".
    Clicking this button opens a modal displaying the metadata.
    
    To test:
    1) Ensure ILL is enabled and you have at least one request
    2) From the "View ILL requests" page, click "Manage request" on a
    request
    3) Click the "Display supplier metadata" button on the right of the
    toolbar
    4) Observe that a modal opens containing the metadata
    
    Signed-off-by: Magnus Enger <magnus@enger.priv.no>
    The modal looks good!
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c5f62b9bf898c7e0dc55b9a72a84f63267aac282
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Fri Apr 6 14:50:38 2018 -0400

    Bug 20467: (QA follow-up) Display error if no or invalid course id is passed
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 44445d7ebf978457bbbc30110f837e2639452d07
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 5 13:52:12 2018 -0300

    Bug 20467: Remove useless use statements
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e14748867da3b742f8c9027a8f6546352305c684
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Tue Apr 3 06:35:01 2018 -0400

    Bug 20467: (QA follow-up) Filter barcodes, remove selector code, use template plugins
    
    Removes selector code as batch changes cannot have a previous selection.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 04e2f7e836a707c8e8a14f06f963351ebde149f1
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Thu Mar 29 07:33:16 2018 -0400

    Bug 20467: (QA follow-up) Add Branches plugin to template
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6bbad855deed9bf22976374ee825f39f7fc86f1a
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Mar 23 01:03:00 2018 +0000

    Bug 20467: Add ability to batch add items to a course
    
    Some librarians have requested the ability to batch add items to a
    course using the same settings for all items.
    
    Test Plan:
    1) Apply this patch
    2) Create a new course
    3) Click the new 'Batch add reserves' button
    4) Enter some valid and invalid barcodes in the text box, add some settings
    5) Submit the batch, note the results list added items and invalid barcodes
    6) Note the valid items were added to the course
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    Signed-off-by: Maksim Sen <maksim.sen@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 792bc2a01fb16b542f1ae807b746af79333e911d
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri May 11 07:52:51 2018 +0200

    Bug 20709: (follow-up) Update GERMAN MARC frameworks to Update 26 (April 2018)
    
    A follow-up in line with bug 20710.
    
    Again, the files used here have been generated automatically
    from the po files on translate.koha-community.org.
    
    To test:
    - Make sure the de-DE installer can install all mandatory files cleanly.
    
    Signed-off-by: Bernardo Gonzalez Kriegel <bgkriegel@gmail.com>
    Tested using de-DE installer, all files load Ok
    No errors
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0f40236349fa54f08c31777762a74fad6ff5c347
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu May 3 22:32:26 2018 +0000

    Bug 20709: Update GERMAN MARC frameworks to Updates 23+24+25 (Nov 2016, May and Dec 2017)
    
    Translation of bibliographic and authority frameworks can be done
    using translate.koha-community.org.
    
    Updated and translated files will then be provided for download.
    
    See: http://lists.koha-community.org/pipermail/koha-translate/2018-April/002721.html
    
    To test:
    - Verify SQL is correct and frameworks load without problem
    
    Signed-off-by: Bernardo Gonzalez Kriegel <bgkriegel@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2882bcf3db92a61f4a48f7c37c64ee9ca05d2aad
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Apr 28 20:54:14 2018 +0000

    Bug 19835: (follow-up) Correct formatting in a few places
    
    In some places - was used insted of --, changed for
    consistency with existing descriptions.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit aab05ee6a460d1c9ec7da8b4a116e24e65d54a67
Author: Bernardo González Kriegel <gonzalez@di.unc.edu.ar>
Date:   Thu Apr 26 12:36:35 2018 -0300

    Bug 19835: Fix MARC21 frameworks revision date
    
    This followup updates revison number and date
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fc518a1b56f8cb1ca0e034574275cfd78617d715
Author: Bernardo González Kriegel <gonzalez@di.unc.edu.ar>
Date:   Thu Apr 26 10:52:50 2018 -0300

    Bug 19835: Fix repeatability on MARC21 subfields
    
    This followup fixes all repeatability cases, from
    updates 23+24+25 and a few older ones.
    
    To test:
    0) Apply both patches
    1) Remove all your frameworks
    2) Check mandatory bibliographic and authority files load without problem
    3) Check repeatability...
    
    Bibs and auth frameworks checked against LOC description.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 236a7a71d2bade4cba63fd10662736b2fd721006
Author: Bernardo González Kriegel <gonzalez@di.unc.edu.ar>
Date:   Wed Apr 25 23:57:40 2018 -0300

    Bug 19835: Update MARC frameworks to Updates 23+24+25 (Nov 2016, May and Dec 2017)
    
    There are a bunch of updates, summary below
    
    1) Update 23
    1.a) Bibs
    New fields: 647 885
    New subfields
    e in 752
    0 in 257 377
    3 in 382
    4 in 752
    
    Changes
    028 redefined
    a renamed in 028
    b renamed in 046
    d renamed in 046
    
    1.b) Auth
    New Fields: 075 147 447 547 677 747 885
    New Subfields: 0 in 377
    
    2) Update 24
    2.a) Bibs
    New subfields
    b in 567
    g in 340
    i in 370 386
    0 in many fields
    2 in 567
    3 in 370
    4 in 370 386
    
    Changes
    g renamed in 370
    4 'Relationship code' -> 'Relationship' many fields
    4 'Relator code'      -> 'Relationship' many fields
    
    2.b) Auth
    New subfields
    i in 370 386
    0 in 050 052 053 055 060 065 070 080 087
    3 in 370
    4 in 370 386
    
    Changes
    g in 370
    4 'Relationship code' -> 'Relationship' many fields
    4 'Relator code'      -> 'Relationship' in 371
    
    3) Update 25
    3.a) Bibs
    New fields: 758
    New subfields
    r in 777
    u in 777
    z in 777
    1 in many fields
    
    Changes
    d renamed in 111 611 711 811
    s repeatable in many fields
    
    3.b) Auth
    New subfields
    1 in many fields
    
    Changes
    d in 111 411 511 711
    s repeatable in many fields
    
    For more detail:
    Update 23
    bibs https://www.loc.gov/marc/up23bibliographic/bdapndxg.html
    auth https://www.loc.gov/marc/up23authority/adapndxf.html
    
    Update 24
    bibs https://www.loc.gov/marc/up24bibliographic/bdapndxg.html
    auth https://www.loc.gov/marc/up24authority/adapndxf.html
    
    Update 25
    bibs https://www.loc.gov/marc/bibliographic/bdapndxg.html
    auth https://www.loc.gov/marc/authority/adapndxf.html
    
    To test:
    1) Remove all your frameworks
    2) Check mandatory bibliographic and authority files load without problem
    3) Check new fields/subfields
    
    Repeatability checks on followup
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f253c72bc38482301de4aa4267ddf4d214dce6a1
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Feb 22 15:46:12 2018 +0100

    Bug 20272: Changes for Breeding.pm and Record.pm
    
    In Breeding.pm we let Z3950Search return the xslt handler error codes back
    to the template. They are converted to text messages by using an new include
    file (added for opac and intranet now). The generic xslt_err code is now
    obsoleted.
    
    In Record.pm the errstr call is removed. The croak is done with the new
    error code in err. This seems sufficient.
    
    Test plan:
    [1] Run Breeding.t
    [2] Run Record.t
    [3] Add a nonexisting xslt file to one of your Z3950 targets. Search on that
        target and check if you see a error 'XSLT file not found'.
    
    The bonus is these error messages are now translatable as they are in
    the templates
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Brendan Gallagher <brendan@bywatersolutions.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 295ae33800a322facfdf56795f4c02b2fd53432b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Feb 22 14:52:29 2018 +0100

    Bug 20272: Replace error numbers by codes in XSLT_Handler
    
    We remove the error numbers 1 to 7 by readable codes.
    And remove the errstr attribute (not used widely).
    Make XSLT_Handler a little bit less noisy by defaulting print_warns to
    false unless $ENV{DEBUG} is set. (See also bug 19018).
    
    The unit has been changed accordingly.
    (A few warnings are no longer tested.)
    
    Test plan:
    Run t/db_dependent/XSLT_Handler.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Brendan Gallagher <brendan@bywatersolutions.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cdb6b68488fd33c20db7e35e4caa8a9b9bd8f4d4
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 25 03:01:48 2018 +0000

    Bug 20495: (follow-up) Correct search for report by name
    
    Ultimately we should probably remove name access as it is not a unique
    id, but this should preserve existing behaviour
    
    To test:
    Create a report
    Use the service link to confirm the report runs
    Replace id=# parameter with name=XXXXXX
    Confirm URL works
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Note: We should not remove the param "name", it's a feature, see bug 8256.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4ec5a67c6f989635b14f048c3720bea7a8d86d38
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Mar 29 13:32:19 2018 +0000

    Bug 20495: Remove get_saved_report
    
    To test:
    1 - prove t/db_dependent/Reports/Guided.t
    2 - grep "get_saved_report" - ensure there are no occurences of the
    singular form
    3 - create, save, edit, and convert a report
    4 - access a public report and report json from opac and staff client
    5 - Ensure all function as expected
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a21c57daa63df4214460d138f0618816bfeb89c4
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue May 22 16:29:09 2018 +0000

    Bug 20793: (follow-up) Add style to the non-link hold count on detail page
    
    This small follow-up changes the style on the bibliographic detail page
    of the hold count so that it looks similar whether it's a link to holds
    or not.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 603ad3a094686cb6c345467f994f52282576923c
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun May 20 02:42:28 2018 +0200

    Bug 20793: Don't show a holds link in staff for users without permission
    
    On the results list in staff the 'Holds (x)' link always shows
    independent of the permissions of the staff user.
    
    This patch tightens the permission checks on the result page
    to explicitly check for the place_holds permission.
    
    To test:
    - Create a staff user with place_holds permission
    - Check the result list, you should see 2 links to the
      holds page:
      - 'Place holds' on top of the results list
      - 'Holds (x)' at the bottom of each entry in the results
         list
      - Verify both links work
    - Create a staff user without place_holds_permission
      - Without the patch you'll see the second link,
        but it will lead to a permission error
      - With the patch you'll still see the 'Holds (x)', but
        it will no longer be a link.
    - Go to the detail page of a record with an existing hold.
      - Repeat test with both staff users.
      - One time the Hold information in the bibliographic information
        should show as a link, the other time as a simple text.
    
    Displaying the information about existing holds still make sense
    as this is the current beheviour.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 730bc64ea6854ad64f92381222191c256533dc1a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jul 2 11:51:20 2018 +0000

    Bug 7547: (RM follow-up) Compiled css
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b1391e6e36784c79d2b08fb04652469606fe4890
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Jun 27 13:00:17 2018 +0000

    Bug 7547: (QA follow-up) Make button background transparent for consistency
    
    Test plan:
    Add some records to cart in opac and show the cart, look at the print button/link
    --> without patch it has darker background than other buttons
    --> with this patch it has the same background
    
    Note: tested wir firefox 45, firefox 60 and chromium 66
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 96fda97c09c9ac6ee2fa6efc9cce2a7c5b6b825c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jun 21 17:31:44 2018 +0000

    Bug 7547: printing a sorted cart
    
    This patch adds a DataTables-generated print button to the OPAC cart. To
    make that process easier, the DataTables plugin has been upgraded to the
    latest version (1.10.18) with the Buttons plugin included.
    
    Changes to the OPAC LESS file style the DataTables button to look like
    the static version.
    
    Other templates in the OPAC which use the DataTables plugin have been
    modified to use up-to-date option names.
    
    To test, apply the patch and add several titles to the cart.
    
     - Open the cart
     - Re-sort the cart using something other than the default sort
     - Click the 'Print' button.
       - A print view should open in a separate window, sorted correctly,
         and automatically show the print dialog.
     - Click the cart's 'More details' button and click the print button.
       - This should trigger the print dialog directly.
    
     - Test DataTables sorting on other modified pages:
        - Bibliographic detail page (holdings table)
        - Course reserves (table of courses)
          - Course details (table of titles)
        - Full subscription history
          - Detail page for a subscription -> More details -> Full history
        - Most popular
        - Purchase suggestions
        - Self checkouts
        - Tag cloud
        - Your fines
        - Your interlibrary loan requests
        - Your reading history
        - Your search history
        - Your search IDREF for ppn (I don't know how to test this)
    
    The DataTables plugin is removed from "Your routing lists" and Self
    check-in because it is unused.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f0d9383d8d6588dc55553feea8df3bc00b39c761
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 26 15:17:21 2018 +0000

    Bug 20999: Remove invalid 'style="block"' from OPAC templates
    
    This patch removes an invalid attribute from OPAC template markup. There
    should be no visible change to the OPAC.
    
    To test, apply the patch and confirm that the following pages still look
    correct when using various cover image sources: Coce, Amazon, Google:
    
     - Bibliographic detail page (opac-detail.pl)
       - The shelf browser
     - Catalog search results
     - Recent comments
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 53aab446ebea7e7ef74095407c7a56c8e254396f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 31 13:29:33 2018 +0000

    Bug 15360: Incorrect or mislabeled behavior on Authorities "New from Z39.50" Button
    
    This patch makes a third stab at resolving this issue by reorganizing
    the authorities toolbar buttons to more closely match the bibliographic
    toolbar buttons:
    
     - "New from Z39.50" has been added to the "New authority" dropdown.
     - "Edit" is now a dropdown, like on the bibliographic detail page:
        - Edit record
        - Edit as new (duplicate)
        - Replace record via Z39.50/SRU
        - Delete record
    
    To test, apply the patch and go to the authorities module. Testing with
    existing Z39.50 authority sources configured:
    
      - On the authorities home page and the authorities search results
        page, the "New authority" menu should have a "New from Z39.50" link.
      - View the details for an authority record. The menus should appear as
        described above. Test each option.
    
    Remove all Z39.50 authority servers and test again. The "New from
    Z39.50" link should no longer appear.
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4ff98def40309c535154335ad722a16a1ac439f0
Author: Mirko Tietgen <mirko@abunchofthings.net>
Date:   Fri Jun 29 22:25:33 2018 +0200

    Bug 20920: (follow-up) generated d/control
    
    Signed-off-by: Mirko Tietgen <mirko@abunchofthings.net>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f99a1daf2571a4d695a8701e3f0fb5e115499bb8
Author: Jérôme Charaoui <jcharaoui@cmaisonneuve.qc.ca>
Date:   Wed Jun 20 14:25:20 2018 -0400

    Bug 20920: Add missing dependency on CGI::Compile
    
    Signed-off-by: Mirko Tietgen <mirko@abunchofthings.net>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 982eabb93782e1f6b8cece57545dc57bf10a47fc
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jun 25 15:00:42 2018 +0000

    Bug 20559: Compiled CSS
    
    This patch contains the compiled OPAC CSS.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 26f98dc986e5c99796ff372a6494c4bc400bf6e9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jun 25 14:54:08 2018 +0000

    Bug 20559: Occurrences of loading-small.gif still exist
    
    This patch removes some leftover references to a file which no longer
    exists. In the OPAC, loading-small.gif was included in CSS which was
    never used. In the staff client, loading-small.gif should have been
    corrected to spinner-small.gif.
    
    To test, apply the patch and go to Tools -> Batch record modification.
    
     - Submit a batch of records to modify
     - In the table of titles which will be modified, click the 'Show MARC'
       button.
       - The modal preview window should show "Loading" and an animated
         spinner before the MARC record is loaded.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 0254b4e87df2879d9de97a8651fd1f325fc4495c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jun 20 17:16:16 2018 +0000

    Bug 20931: JS error "ReferenceError: $ is not defined" when CircSidebar is turned on
    
    This patch reorganizes the way sidebar menus get highlighted based on
    the current page. A global function is added to handle most cases.
    Individual menu-handling scripts have been modified to handle only the
    edge cases which aren't covered by the global one.
    
    A new class is added to the global CSS file so that highlighted menu
    links can be custom-styled.
    
    To test, apply the patch and clear your cache if necessary.
    
    View various pages to confirm that current-page-highlighting in the
    sidebar menu is working correctly and that there are no JS errors in the
    browser console. For example:
    
     - Administration -> Currencies and exchange rates.
     - Acquisitions -> Invoices
     - Tools -> Patron lists
     - Tools -> Export
    
    And with CircSidebar turned on test various circulation pages, e.g.
    
     - Circulation -> Set library
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3e3cf93bff75bb4432889345024595e848108df1
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Thu Jun 21 11:11:54 2018 -0400

    Bug 20977: Javascript vars used in confirm_deletion in catalog.js do not match strings in catalog-strings.inc
    
    The naming mismatch can cause javascript errors.
    
    Test Plan:
    1) Confirm the string vars used in catalog.js match the ones in
       catalog-strings.inc
    
    Signed-off-by: Pierre-Luc Lapointe <pierreluc.lapointe@inLibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fa25c45ffcd2a654a258cacc133b51c60cf5ae92
Author: Lee Jamison <ldjamison@marywood.edu>
Date:   Wed May 30 00:26:56 2018 +0000

    Bug 17153: Redirect to search when logging in from search
    
    This patch is a fresh attempt at redirecting back to search
    results after logging in on opac-search.pl
    
    To test:
    - Perform an OPAC search
    - Login on opac-search.pl with the search results displayed
    - The page is redirected to opac-user.pl
    - Log out
    - Apply the patch
    - Perform a new OPAC search
    - Note the URL query string
    - Login on opac-search.pl with the search results displayed
    - The opac-search.pl page should be displayed with the correct
      query string and the page should indicate a logged in status
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    Followed the test plan and the patch works.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 452c962b6e8631119d53ae776446d46b2c584f53
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jun 29 20:46:08 2018 +0000

    Bug 20921: (RM follow-up) Fix QA pod errors
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 19de2dab06f6b8d3cbc142a95af93e130a953fe9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 25 16:48:59 2018 -0300

    Bug 20921: Add selenium tests for .loggedinusername
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit addbff779ca6e5be867c83e9c0d03e5f82ad821c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 25 16:48:21 2018 -0300

    Bug 20921: Fix opac_auth for selenium
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 34d42993415b46b6c6e011e9406f0c50d94a4d81
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jun 12 15:57:56 2018 +0000

    Bug 20921: Add borrowernumber and branchcode as html attributes
    
    To test:
    1 - Apply patch
    2 - Visit the opac
    3 - Sign in
    4 - You should not see any difference
    5 - Inspect the element  'Welcome, {username}'
    6 - Note the attributes for borrowernumber and branchcode
    7 - Add to OPACUserJS:
    $(document).ready(function(){
        console.log( $(".loggedinusername").attr('data-branchcode'));
        console.log( $(".loggedinusername").attr('data-borrowernumber'));
    });
    8 - Check the console and note you can see the info expected
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    Followed the test plan and it works.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 037f4a2f010d8358d20956d4a9e914adb1e19034
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jun 21 18:33:23 2018 +0000

    Bug 20585: Label surname as name for organisation type patrons
    
    This patch modifies the patron edit page so that the label for an
    organization name is "Name" instead of "Surname."
    
    To test, apply the patch and edit both an institutional patron and a
    regular patron. Confirm that the name/surname label is correct in each
    case.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 14f54d4e13bf3f0c51126a8031c5b2b05fb6d61d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Apr 4 17:50:48 2018 +0000

    Bug 20520: Re-indent moremember.tt
    
    This patch reindents the template for the patron detail page,
    moremember.tt:
    
    - Trailing spaces removed
    - Indentation changed to a consistent 4 spaces
    - Markup indentation made more consistent
    
    To test, view the patron detail page. There should be no visible
    difference before and after the applying the patch.
    
    HTML validation before and after the patch should return the same
    results.
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 255c484c9b9b9d92774bd17fa79e9f05dd612858
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jun 25 15:55:03 2018 -0400

    Bug 10348: Show number of items on tab headings in the staff client
    
    This patch uses Template Toolkit's size() method to add a count to
    the bibliographic detail page's holdings and images tabs.
    
    To test, apply the patch and view the detail page for a record in
    the staff client. Check under the following conditions:
    
    - The SeparateHoldings system preference is set to "Don't separate"
      - The holdings tab should show the correct item count.
    - The SeparateHoldings system preference is set to "Separate"
      - The "[Library] holdings" tab and "Other holdings" tabs should
        have the correct item counts.
    - With LocalCoverImages enabled the "Images" tab should show the
      correct count of attached images. Test with zero or more attached
      images.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7f79a9a5f8c8b2fe2c29d270264bdfa48a7056bd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jun 26 13:04:01 2018 -0300

    Bug 20991: Do not lost patron's category when editing a patron
    
    If there is an error in the edit patron form the patron's category is
    lost.
    This seems to be a long standing bug.
    
    Test plan:
    - Edit an existing patron
    - Change the patron category to a category that triggers the error that
    the user is not in the right age range for that new category
    - Save, error is triggered
    => Without this patch the patron category has been reset
    
    You should also test different ways to edit/add a patron (quick add,
    step 1)
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c089df3f3b45782516b63d22c34bc265c667dd35
Author: Caitlin Goodger <caitlingoodger.student@wegc.school.nz>
Date:   Tue May 29 17:32:12 2018 +0000

    Bug 17886: Don't show option to add to existing list if there are no lists
    
    This patch modifies the page for adding a title to a list so that the
    "Add to existing list" option doesn't appear if there are no lists
    defined.
    
    TEST PLAN
    ---------
    1) Make sure no lists exist at all.
    2) Make there is at least one findable biblio record entered
    3) Find that biblio record in the OPAC
    4) Click 'Save to your lists'
       -- Notice that the whole save to list section is there.
    5) Apply this patch
    6) Click 'Cancel'
    7) Click 'Save to your lists'
       -- Notice you can only add now, which makes sense.
    8) Run koha qa test tools.
    
    Perform the same tests in the staff client.
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    Followed the test plan and the patch works.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 87a78e5a92b9a279e2d9c524beafddead82e0ae1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jun 21 14:32:52 2018 +0000

    Bug 14222: Sort holds in OPAC by priority
    
    This patch modifies the markup of the users's holds table in the OPAC so
    that if hold priority is displayed, the table will be sorted by that
    number.
    
    To test, apply the patch and set the OPACShowHoldQueueDetails system
    preference to "Show priority level" or "Show holds and their priority
    level."
    
     - Log in to the OPAC as a user who has multiple holds with various
       priorities. Include priorities which could be sorted incorrectly
       using a text sort, e.g. 1, 10.
     - View the holds tab on the "your summary" page. Confirm that the
       priority column is sorted by default with the lowest priority holds
       first.
     - Set the  OPACShowHoldQueueDetails preference to "Show holds" and
       confirm that the holds table still displays correctly, sorted by
       "Placed on" ascending.
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    Followed the test plan and the patch works.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3c70ac3f9f56ebf31da4151ba713a40a8abeb95b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jun 29 20:09:38 2018 +0000

    Bug 20945: (RM follow-up) Escape param_name too
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 894eb72addc71b1007c816d49bd807dd8983a180
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jun 14 14:20:44 2018 +0000

    Bug 20945: Escape SQL parameters when constructing download links
    
    TO test:
    1 - Create a report that takes a parameter
    2 - Enter a parameter containing '%'
    3 - Attempt to download report, note link is misconstructed
    4 - Apply patch
    5 - Reload
    6 - Note URL is now correct
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a2993e82e90b7bde37a147a3daa868bd441c542a
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu May 3 12:33:19 2018 +0200

    Bug 20697: Bind calling GetAnalyticsCount to pref EasyAnalyticalRecords
    
    If you do not use the EasyAnalyticalRecords feature (introduced with
    bug 5528), you will have a lot of warnings in zebra-output.log like:
    
    zebrasrv(1096) [request] Search biblios ERROR 114 1 1+0 RPN @attrset Bib-1 @attr 1=8911 259186
    
    They come from C4::Items::GetAnalyticsCount called by catalogue/detail.pl.
    This sub starts a Zebra search on index 'hi' (Host-Item-Number).
    If you do not use this field at all (related to 773$9 in MARC21), Zebra
    returns an Unsupported Use attribute error (114).
    
    In making this change, I added one minor change:
    [1] Remove the commented GetAnalyticsCount in additem.pl and correcting
        indentation in that loop (removing tabs). So no change at all there.
    
    NOTE: I will propose to bind the GetHostItemsInfo call in detail.pl and two
    other scripts to this preference too on report 20702.
    
    Test plan:
    [1] If you use EasyAnalytics, verify that there is no change.
    [2] If you do not, check the zebra-output.log. You should no longer see
        searches for Host-Item-Number with 1=8911. (As well as ERROR 114 on
        this index.)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f363de477899a95cb1d7f415013ce2bca8cfb93f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jun 18 18:29:57 2018 +0000

    Bug 17869: Don't show pick-up library for list of holds in OPAC account when there is only one branch
    
    This patch modifies the user summary page in the OPAC so that the
    "pick up location" column isn't shown in the table of holds if there is
    only one library defined.
    
    To test, apply the patch and log into the OPAC as a user with one or
    more holds.
    
     - In a system with more than one library defined the "Holds" tab of
       opac-user.pl should show a "Pick up location" column.
    
     - In a system with only one library defined there should be now "Pick
       up location" column.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b4468f0987475c624142d96bbffd00b489ccfab0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jun 7 14:03:11 2018 +0000

    Bug 20893: batchRebuildItemsTables.pl has incorrect parameter
    
    To test:
    1 - run batchRebuildItemsTables.pl with a valid biblionumber
       perl /usr/share/koha/bin/batchRebuildItemsTables.pl --where biblio.biblionumber=38483  -c
    2 - Note it says 'undefined biblionumber
    3 - Apply patch
    4 - Do it again
    5 - It works!
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1a01c62f9dfca77df084501baa546afaa39dbe0f
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Mon Jun 25 14:58:17 2018 +0200

    Bug 16653: (QA follow-up) Avoid a warning and remove unused variables
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d1587c494ade1718059337f96ec12ae10bd63cf6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 7 11:47:46 2018 -0300

    Bug 16653: Display number of checkouts when exporting 'Most-circulated items' as CSV
    
    reports/cat_issues_top.pl does not export "Count of checkouts" column as CSV
    
    To replicate:
    
    1/ Make sure that test instance has circulation in a given date range
    2/ Go to Home › Reports › Most-circulated items
    3/ Select a date range
    4/ Select 'To screen into the browser' radio button, click submit.
    5/ Note that Columns 'Rank/Biblioitemnumbers', 'Global' and 'Count of checkouts' appear in screen output.
    6/ Click the browser's back button
    7/ Change output to 'To a file', click submit.
    
    Without this patch:
    the columns "100/", "Global" and "Total" are exported to the CSV file.
    "100/" contains the rank, "Global" is still global, and the "Total" column is empty.
    
    With this patch patch applied, the last column is filled and the "Total" line is removed
    
    (This script is really dirty)
    
    Signed-off-by: Pierre-Luc Lapointe <pierreluc.lapointe@inLibro.com>
    
    (Yes it is)
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a09643ca23348009e409ae42057792224e7cbd0c
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Fri Jun 8 09:43:13 2018 +0000

    Bug 20903: Remove unnecessary category code parameters
    
    Test plan:
    0) Do no apply the patch
    1) Have only one adults patrons category defined
    2) Add a fine to child patron and pay it
    3) Try to print the payment receipt (file printfeercpt.pl)
    4) You see only ISE
    5) Apply the patch
    6) Try the printing again
    7) Now you should see right receipt
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 46d288a61caea1541e0074051f5cff9e8d6b4f6e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jun 26 12:37:19 2018 -0300

    Bug 20998: Simplify the conditional statement
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fe9f7cef3be1768ec54acd7934b146d5d9d68927
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jun 26 15:02:02 2018 +0000

    Bug 20998: Only perform quicksearch if patron found with cardnumber
    
    This patch makes sure we have a patron before we try to access their
    branchcode and allows search to work
    
    To recreate:
    1 - Enable 'IndependentBranches'
    2 - Setup a patron with all permissions, but not a superlibrarian
    3 - Login to staff client as that patron
    4 - Click 'Patrons' in the toolbar and try a search
    5 - Internal server error
    6 - Apply patch
    7 - Try the search again
    8 - Success!
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 487e4708b312cd2de645a36cbf0f0bcb31e07d15
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jun 27 04:12:43 2018 +0000

    Bug 20073: (RM follow-up) Update schema files

commit 0d4d3f388a816288034d4bc8393db79549a3cffe
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jun 22 21:59:35 2018 +0000

    Bug 20073: (RM follow-up) Remove atomicupdate
    
    D'oh
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e2506ff73d9d9b0517350605a0e2cd34c1ad607a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 9 12:54:23 2018 +0000

    Bug 20744: Replace staff client header Koha logo gif with transparent png
    
    This patch replaces koha-logo-medium.gif with a fully-transparent png.
    This patch also adds a white version in case someone finds it useful.
    
    To test, apply the patch and clear your cache if necessary.
    
    - View any page in the staff client and confirm that the Koha logo in
      the header area looks correct.
    - Add the following to  IntranetUserCSS:
    
      .gradient {
         background: #46B9EA none;
      }
    
      - Reload the page and confirm that the Koha logo doesn't have a white
        fringe around the edges.
    - Append this to the CSS you added to IntranetUserCSS above:
    
      h1#logo {
          background-image: url("/intranet-tmpl/prog/img/koha-logo-medium-white.png");
      }
      - Reload the page and confirm that the new white logo appears
    
    Signed-off-by: Claire Gravely <claire.gravely@bsz-bw.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit a8f864c590011a249c87bb590bd10532712f1b59
Author: Amit Gupta <amit.gupta@informaticsglobal.com>
Date:   Tue Jun 5 22:21:51 2018 +0530

    Bug 20867: Ability to show membership renewal date on moremember.pl page
    
    Test case:
    1. Create the patron.
    2. Search the patron whose date of membership is about to expire or expired.
    3. Click on More->Renew patron.
    4. Now membership is renewed.
    5. Apply the patch.
    6. Reload the page now you will able to see the Membership renewal date.
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    Followed the test plan and it works.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ac7d5c0d4e50defc1fe2171e7fc22800545e3dd3
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Thu May 24 10:10:05 2018 +0000

    Bug 18521: Fix key binding in the header
    
    Moving the conditional block [% IF (CAN_user_circulate_circulate_remaining_permissions ) %] block up the checkin-search.inc file above the CAN_user_catalogue IF conditional block fixes this bug.
    
    Test plan:
    1. Go to the circ home page and confirm the following
    keyboard shortcuts work:
    
    Alt+q = goes to search catalog
    Alt+w = goes to renew
    
    2. Go to returns.pl and confirm the following  keyboard shortcuts work:
    
    Alt+q = goes to renew
    Alt+w = goes to search catalog
    
    3. Apply patch
    
    4. Restart apache2, memchached and plack
    
    5. Confirm on the returns.pl the following keyboard shortcuts work:
    Alt+q = goes to search catalog
    Alt+w = goes to renew
    
    Sponsored-By: Catalyst IT
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    Followed the test plan and it works.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ce6ec1e7faef217950e3450788ea444dad26d7c0
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jun 4 13:52:28 2018 +0000

    Bug 20864: Only set bibs_selected cookie when BrowseResultSelection is activated
    
    This patch adds a system preference check around the call to the
    JavaScript include which sets the bibs_selected cookie. With
    BrowseResultsSelection disabled, the cookie should never be set.
    
    To test you should be using a browser with a tool for inspecting
    cookies. View the cookies for your Koha domain under each of these
    conditions, clearing cookies between each step:
    
    Without the patch applied:
    
     - With  BrowseResultSelection enabled, search for any item. Your cookie
       tool should report that you have a bibs_selected cookie stored.
     - With BrowseResultSelection disabled, search for any item. You should
       have a bibs_selected cookie.
    
    With the patch applied:
    
     - With the BrowseResultSelection system preference enabled, search for
       any item. Your cookie tool should report that you have a
       bibs_selected cookie stored.
     - With BrowseResultSelection disabled, search for any item. You should
       have no bibs_selected cookie.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6965c58308f384bf895050be692a1d71e091514d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jun 21 08:28:08 2018 +0100

    Bug 20879: Fix regression in shibboleth when ldap enabled
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 047c5f0895606104dc5e3db798cd6b7f70a23dba
Author: Colin Campbell <colin.campbell@ptfs-europe.com>
Date:   Fri Jun 22 15:02:01 2018 +0100

    Bug 20972: Add a testcase for bug 20972
    
    Ensure all 10 characters of ISBN are preserved
    
    And that ISBNs and EANs are correctly identidied in the PIA segment
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 1dee421b18da729c6112c3e36ae2f2fe0766120f
Author: Johan Larsson <johan.larsson@ub.gu.se>
Date:   Thu Jun 21 09:58:55 2018 +0200

    Bug 20972: If ISBN has 10 numbers only the first 9 numbers are used
    
    If ISBN has 10 numbers only the first 9 numbers are being added to the Edifact-message (PIA+5+3540556753:IB')
    
    This is caused by wrong positioning of capturing parentheses in a regular expression.
    
    Sponsored-by: Gothenburg University Library
    Signed-off-by: Colin Campbell <colin.campbell@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit fdab13cc3d66a8d2ad132c66accee4f9d40ac732
Author: Barton Chittenden <barton@bywatersolutions.com>
Date:   Fri Apr 27 22:09:29 2018 +0000

    Bug 20676: svc/barcode should allow barcode to be printed without text
    
    Test plan:
    
    1) Point web browser to
       <staff url>/cgi-bin/koha/svc/barcode?barcode=*12345*&notext=1
    
       This will display a png image of the barcode *12345* with the
       text *12345* printed below the scannable barcode.
    
    2) Apply patch
    3) Refresh the browser. The human readable text no longer appears.
    
    Signed-off-by: Frédéric Demians <f.demians@tamil.fr>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8c9c6a4bf167d62055f6e9c302666c4aaf0b168b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jun 4 14:40:03 2018 +0000

    Bug 20876: The form_serialized_itype cookie is not used and should be removed
    
    This patch removes references to a form_serialized_itype cookie which
    appears in the code as part of the process of storing information used
    in the generation of the "Return to the last advanced search" link.
    
    To test, apply the patch and perform an advanced search in the OPAC
    using several search options including a limit by item type. From the
    search results page, follow the "Return to the last advanced search"
    link. The advanced search form should appear with all the search options
    you submitted before.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6578bca5177b997fc251f195f58ac26e3888820f
Author: Father Vlasie <fv@spots.school>
Date:   Sat Aug 5 22:42:03 2017 -0700

    Bug 18973: Auto focus the ISBN field on Z39.50 search form in cataloguing
    
    Signed-off-by: George <george@nekls.org>
    Signed-off-by: BWS Sandboxes <ByWaterSandboxes@gmail.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ebd5f905ae809b5f3efe4e82fe07dc66405f591d
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Tue Jun 5 14:48:54 2018 -0400

    Bug 20727: Add use line for File::Spec in C4::Context, sort used modules
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3e07c877f92ab076a0a35ff2541ee89eb0f9232a
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Tue Jun 5 14:48:14 2018 -0400

    Bug 20727: Replace use of tmpdir in updatedatabase.pl
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 05812dbbbab4e2955b7ab2ee637034fe7a6e4c3f
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed May 30 16:50:27 2018 +0200

    Bug 20727: (QA follow-up) Remove a few use statements again
    
    We do no longer need "use Koha::UploadedFile" in a few places.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f63bb8b0ca90849e32d40d6191c9160f35d525cc
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed May 30 16:39:25 2018 +0200

    Bug 20727: (QA follow-up) Fix Upload.t and Plugins.t
    
    Trivial changes.
    Adding C4::Context->temporary_directory to subsequent tmpdir call in Plugins.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3ff7c27d9840da14a63b518d96e0fcd44d0f970a
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Tue May 29 08:03:55 2018 -0400

    Bug 20727: Move temporary_directory() to C4::Context
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c2b0c928006de1ceea59f678a8732b9e7e074b63
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Wed May 9 06:44:41 2018 -0400

    Bug 20727: Replace usage of File::Spec->tmpdir with Koha::UploadedFile->temporary_directory
    
    As explained in bug 20428 use tmpdir can cause issues and it just makes sense to standardize our temp directory in a universal way.
    
    Test Plan:
    1) Apply this patch
    2) Verify you can still log in and use Koha
    3) Verify the web installer still works
    4) Verify EDI module can still download files via FTP
    5) Verify fines.pl still runs with -o option
    6) prove t/db_dependent/Plugins.t
    7) prove t/db_dependent/Sitemapper.t
    8) prove t/db_dependent/Templates.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit bf86fdd92d41222aa76be3155de664cc2594787a
Author: Pasi Kallinen <pasi.kallinen@joensuu.fi>
Date:   Tue Mar 6 11:59:28 2018 +0200

    Bug 20339: Unify MARC21 ISBN/ISSN handling in XSL
    
    The code to show the ISBN and ISSN is repeated between the search results
    and the detail view. Create a function to show the ISBN/ISSN, and call
    that instead.
    
    Test plan:
    1) Apply patch
    2) Search for any records, check that the ISBN and ISSN are shown
       correctly
    3) Go to biblio detail pages, check that the ISBN and ISSN are shown
       correctly
    
    Signed-off-by: Pasi Kallinen <pasi.kallinen@joensuu.fi>
    
    Signed-off-by: claude <claude.brayer@cea.fr>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e20238ab988bdf154a6072df194021736bfb67a1
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Fri May 11 06:26:40 2018 +0000

    Bug 19820: (QA follow-up) Fix pod in C4::Biblio
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 13a5ffb7e11f29993931c864eab2d1b5539e814d
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Fri Dec 15 14:19:49 2017 +0100

    Bug 19820: Add unsafe param to GetMarcSubfieldStructure
    
    Add unsafe param to GetMarcSubfieldStructure and use this options
    where it's safe to do so to increase performance
    
    Sponsored-by: Gothenburg University Library
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 61bd8cebf88cc073b6382dba951283761080c390
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Apr 21 01:07:58 2018 +0000

    Bug 20456: (follow-up) Fix number of subscriptions and position display
    
    TT variables needed to be adjusted because of changes from bug 20400.
    Also: while we want logged_in_user in OPAC, we don't want that in staff.
    
    1) Check the right number of subscriptions is displayed on top of the table
    2) check the right position number is display for the routing list
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f6d15dc2486d86596529da5aa1efd204a20430fc
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Mar 16 10:13:19 2018 +0100

    Bug 20456: Remove the C4::Serials::GetSubscriptionsFromBorrower
    
    Bug 20400 added a routing list tab to the patron account in the
    OPAC using Koha::Object. After changing the staff view too,
    we can now safely remove GetSubscriptionsFromBorrower as it
    is no longer used.
    
    To test:
    - Make sure that GetSubscriptionsFromBorrower is no longer used.
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ecc3a559179e041c97c38ae86ec70b4308a2638a
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Mar 16 09:57:06 2018 +0100

    Bug 20456: Switch routling list tab in staff to use Koha::Object
    
    Bug 20400 added a routing list tab to the patron account in the
    OPAC using Koha::Object.
    
    This patch switches the routing list tab in the patron account
    in intranet over to the new code. It also adds an additional
    column showing the position of the patron on the routing list
    and fixes the search.
    
    To test:
    - Create some subscriptions with routing lists
    - Take a look at the patron accounts of several patrons having
      - no entries on routing lists
      - 1 entry on a routing list
      - entries on several routing lists
    - Make sure the display works correctly.
    - Search for a subscription and make sure search works.
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e0f6450ae9887f7282c3813e2c3d1f2c6bb12593
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Apr 23 15:12:20 2018 -0300

    Bug 20073: Remove perlcritic error
    
    "return" statement with explicit "undef" at line 245, column 5.  See
    page 199 of PBP.  (Severity: 5)
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 133df5e912259cdcd938366838dffdb161b4c280
Author: Ere Maijala <ere.maijala@helsinki.fi>
Date:   Tue Jan 23 15:21:31 2018 +0200

    Bug 20073: Move Elasticsearch configs to yaml files and improve the default settings.
    
    Improvements:
    1) Index settings moved from code to etc/searchengine/elasticsearch/index_config.yaml. An alternative can be specified in koha-conf.xml.
    2) Field settings moved from code to etc/searchengine/elasticsearch/field_config.yaml. An alternative can be specified in koha-conf.xml.
    3) mappings.yaml has been moved from admin/searchengine/elasticsearch to etc/searchengine/elasticsearch. An alternative can be specified in koha-conf.xml.
    4) Default settings have been improved to remove punctuation from phrases used for sorting etc.
    5) State variables are used for storing configuration to avoid parsing it multiple times.
    6) A possibility to reset the fields too has been added to the reset operation of mappings administration.
    7) mappings.yaml has been moved from admin/searchengine/elasticsearch to etc/searchengine/elasticsearch.
    8) An stdno field type has been added for standard identifiers.
    
    To test:
    1) Run tests in t/Koha/SearchEngine/Elasticsearch.t
    2) Clear tables search_fields and search_marc_map
    3) Go to admin/searchengine/elasticsearch/mappings.pl?op=reset&i_know_what_i_am_doing=1
    4) Verify that admin/searchengine/elasticsearch/mappings.pl displays the mappings properly, including ISBN and other standard number fields.
    5) Index some records using the -d parameter with misc/search_tools/rebuild_elastic_search.pl to recreate the index
    6) Verify that you can find the records
    7) Put <elasticsearch_index_mappings>non_existent</elasticsearch_index_mappings> to koha-conf.xml
    8) Verify that admin/searchengine/elasticsearch/mappings.pl?op=reset&i_know_what_i_am_doing=1 fails because it can't find non_existent.
    9) Copy etc/searchengine/elasticsearch/mappings.yaml to a new location and make elasticsearch_index_mappings setting in koha-conf.xml point to it.
    10) Make a change in the new mappings.yaml.
    11) Clear table search_fields (mappings reset doesn't do it yet, see bug 20248)
    12) Go to admin/searchengine/elasticsearch/mappings.pl?op=reset&i_know_what_i_am_doing=1
    13) Verify that the changes you made are now visible in the mappings UI
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Bug 20073: Move Elasticsearch yaml files back to admin directory
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8480491cce306272ff443408f5b92eac470a3d63
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu May 3 13:12:19 2018 +0200

    Bug 20702: Bind results of GetHostItemsInfo to the EasyAnalyticalRecords pref
    
    Triggered by the finding on bug 20697.
    The three calls of GetHostItemsInfo should be controlled by the pref. This
    patch makes the sub return an empty list when the pref is disabled.
    
    The patch simplifies the sub by merging the two identical foreach loops
    depending on the field number in MARC21/UNIMARC.
    
    Will add a unit test on a follow-up patch.
    
    Test plan:
    See next patch.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit abc6422355c779440c61bcbc56f727b6848e3d02
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu May 3 14:08:01 2018 +0200

    Bug 20702: Add unit tests for GetHostItemsInfo
    
    Unfortunately, we did not have unit tests yet.
    Adding some simple tests that test basic operation of the sub when the
    pref is enabled/disabled and for MARC21/UNIMARC.
    
    Test plan:
    [1] Run t/db_dependent/Items/GetHostItemsInfo.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9b39b9d20b828adf9504b9681b2bee4ca751cc5d
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Feb 21 11:07:56 2018 +0100

    Bug 20259: Shorter JS and CSS rewrite rule
    
    Bug 20187 has changed the JS and CSS rewrite rules to :
    RewriteRule ^(.*)_[0-9][0-9]\.[0-9][0-9][0-9][0-9][0-9][0-9][0-9].js$ $1.js [L]
    RewriteRule ^(.*)_[0-9][0-9]\.[0-9][0-9][0-9][0-9][0-9][0-9][0-9].css$ $1.css [L]
    
    This patch changes this rules using [0-9]{N} and fusion in one rule.
    And espaces the dot in extension js and css.
    
    Test plan :
    1) Go to intranet and opac
    2) Check CSS and JS are doing well
    3) Apply patch changes on our Apache configuration
    4) Reload intranet and opac pages (Ctrl + F5)
    5) Check CSS and JS are doing well
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2e1ff5e96108af91174d080b49e31d78a8f959fa
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun May 20 04:23:47 2018 +0200

    Bug 20794: Hide holds tab on details when user lacks circulate_remaining_permissions
    
    If a user doesn't have circulate_remaining permissions, but has borrowers:
    - checkouts tab is hidden
    - details tab is visible
    - holds tab on details is visible, but results in an error
    
    The problem is that the svc/holds script requires circulate_remaining_permissions.
    
    To test:
    - Create 2 staff users with and without circulate_remaining_permissions
      Both need borrowers permission
    - Go to the details tab in a patron's account who has holds
    - Verify that you get a datatables error for the staff patron without
      circulate_remaining_permissions
    - Apply patch
    - Verify that now the holds tab is no longer displayed for this patron
    
    Signed-off-by: Amit Gupta <amit.gupta@informaticsglobal.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ac813cf4a124e5c0d3fae587f49b380ea6144e1c
Author: Pasi Kallinen <pasi.kallinen@joensuu.fi>
Date:   Tue Jun 5 13:26:43 2018 +0300

    Bug 20881: Order receiving: Price filter missing on_editing
    
    When the Price-filter is used on editable data, it should have the
    on_editing -tag. Add it to the orderreceive.tt
    
    Signed-off-by: Pasi Kallinen <pasi.kallinen@joensuu.fi>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    To test:
    - Set CurrencyFormat to FR
    - Create a basket with orders in acq
    - Close it
    - Receive shipment and pick order line to receive
    - On this screen verify that the actual cost appears as comma-separated
    - Apply patch
    - Refresh page
    - Verify that the actual cost now appears .-separated
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9e7062a0a6d1bd938675b18c13fc7a521615f44f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 21 17:34:17 2018 -0300

    Bug 20981: Fix organization name when displaying patron's info
    
    Caused by bug 18403.
    From patron-title.inc, we need a IF instead of UNLESS.
    
    Test plan:
    Create organizations
    Search for patrons
    => Without this patch the "Name" column is empty for organizations
    => With this patch applied you will see the surname (and othernames if
    exists)
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 20c927c5d0fd84d34e00bc5042113825ae53869e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 21 12:28:18 2018 -0300

    Bug 13655: Same fix for partial edit
    
    Test plan:
    - Create an organisation with surname='xxx'
    userid will be autogenerated with 'xxx''
    - Edit the surname with 'yyy'
    userid will be unchanged, 'xxx'
    - Parial edit and blank userid
    userid will be autogenerated with 'yyy'
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 320978997be204a0650475dca4db75e0dd36c273
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 12 13:40:59 2018 -0300

    Bug 13655: Allow creation of organisations without entering userid
    
    See comment 1 of the bug report for defails of the issue.
    
    Test plan:
    Good luck (you will need to test all combinations (category type eq and
    ne 'I'), then quick edition and partial edit)
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 91622bba18d33af7699a634a697f432bd63dc25e
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Jun 15 12:56:36 2018 +0200

    Bug 20951: add missing use Koha::Patron::Debarments in Koha::Patron::Discharge
    
    Koha::Patron::Discharge was missing use Koha::Patron::Debarments used in discharge() method.
    
    Test plan :
    1) Enable pref useDischarge
    2) Go to OPAC user page
    3) Go to 'ask for a discharge' tab
    4) Click on 'Ask for a discharge'
    5) Go to staff interface : /cgi-bin/koha/members/discharges.pl
    6) Click on Allow
    => Without patch you get software error
    => With patch the discharge is validated
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b81746e40490f8d631d722e475d5b957ed27e028
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 14 11:43:12 2018 -0300

    Bug 20928: Fix regression - display patron's info on moredetail if item is checked out
    
    This patch is a follow-up of
      commit 5f80977875ff124d411f2cd89de4a944fa9c27af
      Bug 18403: Use patron-title.inc when hidepatronname is used
    
    Test plan:
    - Check an item out
    - Go on the moredetail.pl page of this biblio record
    Home › Catalog › Item details for your biblio
    - Confirm that you see:
    "Checkout status: Checked out to"
    followed by the patron's info
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    Followed the test plan and it works.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b22e58525dc8b3dbe9cd0889a1a1c203b2c602cd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 8 13:06:58 2018 -0300

    Bug 20906: Fix translatable-templates.t
    
    From Jenkins:
    koha_1       | #   Failed test 'staff_prog templates are translatable'
    koha_1       | #   at xt/author/translatable-templates.t line 87.
    koha_1       | # Can't locate TmplTokenizer.pm in @INC (you may need to install the TmplTokenizer module) (@INC contains: /kohadevbox/koha /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.24.1 /usr/local/share/perl/5.24.1 /usr/lib/x86_64-linux-gnu/perl5/5.24 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.24 /usr/share/perl/5.24 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base) at ./tmpl_process3.pl line 20.
    
    On Stretch, '.' is not longer added to @INC, see bug 17717 for more info
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 70ea4d6b0f29dd0f822fef3b45a3cf82adb3b86f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jun 8 15:21:22 2018 +0100

    Bug 20906: Prevent test failures due to precision changes (2)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit ea39ac2b180c576d80eea44d2d2f2ab0bdb2ddde
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jun 8 14:32:02 2018 +0100

    Bug 20906: Prevent test failures due to stricter perl
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 82be39a3891dd2be838ca7a374450aa5fbe6b84b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jun 8 12:50:31 2018 +0100

    Bug 20906: Prevent test failures due to precision changes
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 64c596b13c82a2942792d975363a0d689182d627
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Jun 18 15:48:12 2018 +0000

    Bug 20934: (QA follow-up) Fix showing number of records in checkout history
    
    Test plan:
    0) Do not apply this patch
    1) Go to biblio checkout history page (issuehistory.pl)
    2) You'll see something like "Checked out ARRAY(0xf830378) times"
    3) Apply this patch
    4) Now you should see number of checkout history records
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 97b2bb8e7385c6af4d07666ce51df68b3bda8875
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Mon Jun 18 15:15:31 2018 +0000

    Bug 20934: (QA follow-up) Fix pod in Koha::Old::Checkout
    
    Test plan:
    Run qa tools - it shouldn't complain about pod levels
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 117e3a18f5b7c24e6c9fb7eabb78ab1b5320cd14
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 13 13:26:43 2018 -0300

    Bug 20934: Fix display of old checkouts in the checkout history page
    
    Again a regression caused by
      commit fa54100dffe092e606f79b15692eedaf78f42e45
      Bug 18403: Use patron-title.inc when hidepatronname is used [SPECIFIC for issuehistory]
    
    GetBiblioIssues does a union all with issues and old_issues, so we
    should old_issues as well.
    To make the join on the items table we need to define the item and
    patron methods. For consistency the relationships have been redefined
    (item instead of itemnumber, borrower instead of borrowernumber) in the
    DBIx::Class definition.
    
    This is not perfect but I think the best way to provide an easy to
    backport patch.
    
    It highlights that we need improvements in this area.
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    The patch works as expected.
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit c967e010c0110e562c4cc71bc5d18837a2a956a0
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Fri Feb 23 08:44:45 2018 -0500

    Bug 20285: Lost item refund won't always pay down lost item fee first
    
    Due to a simple typo, the accountline passed to Koha::Account::pay from _FixAccountForLostAndReturned is not used. That means that the credit for the lost item fee may be applied to other fees before it is used on the lost fee itself.
    
    Test Plan:
    1) Find a patron with existing fines
    2) Ensure your settings will charge patrons for lost items
    3) Check out an item to a patron with existing fees that need paid
    4) Mark the item lost, charging the lost item fee
    5) Return the item
    6) Note the fee was refunded, but it paid down earlier fines first,
       and not the lost item fee first
    7) Apply this patch set
    8) Repeat steps 1 - 5
    9) Note the lost item fee is the first fee to be paid off by the lost
       item fee refund
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    Followed the test plan and it works as expected.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2acf4bf510292281db013acb3bda0c1e9a779931
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Fri Feb 23 08:44:24 2018 -0500

    Bug 20285: Unit Test
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 812adec528241ab6977697d5d6f2066b39b5b903
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 31 15:32:29 2018 +0000

    Bug 19970: Revise change of bug 19413 to work better for translations
    
    This patch changes how the submit and cancel buttons appear in the MARC
    008 plugin window. The controls are now displayed as buttons in a
    floating toolbar.
    
    To test you must have MARC tag 008 configured to use the
    marc21_field_008.pl plugin.
    
    - Apply the patch and open an existing or blank record in cataloging.
    - Click the plugin link next to tag 008 to trigger the popup window.
    - Confirm that "Save" and "Cancel" appear correctly in a toolbar.
    - Scroll down the page to confirm that the toolbar "sticks" to the top
      of the window.
    - Confirm that the "Save" and "Cancel" buttons work correctly.
    
    Signed-off-by: Maryse Simard <maryse.simard@inlibro.com>
    Followed the test plan and the patch works.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3495de67d40637462e9b359bee207a38206e0bba
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 4 13:02:33 2018 -0300

    Bug 20760: Fill authorised values in svc framework
    
    To test:
     1 - Map a marc field to an authorised value in the default framework -
    say 300$c -> CCODE
     2 - Open the advanced cataloguing editor
     3 - Create a new field 300$c - note there is no dropdown
     4 - browse to: /cgi-bin/koha/svc/cataloguing/framework?callback=define
     5 - Note the many instance of
    Koha::Schema::ResultSet::AuthorisedValueCategory->HASH...
     6 - Apply patch
     7 - Restart memcached and plack
     8 - reload/recreate record in rancor
     9 - Note that 300$c is now a dropdown as expected
    10 - repeate 4
    11 - note the authorised values look correct in response
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6613f36d5af67e5fcf7e7a6f3e80331805b8eea7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jun 11 15:28:19 2018 +0000

    Bug 20911: Use 'POST' to submit search history forms
    
    To test:
    1 - Enable EnableOpacSearchHistory and EnableSearchHistory
    2 - Do some searches
    3 - View your search history in staff/opac
    4 - Confirm you can delete single or multiple rows
    5 - Confirm other page functionality has not changed
    
    Signed-off-by: Ed Veal <eveal@mckinneytexas.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 812645449684f88c769e04bb1eb1f55923a0e0d9
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Jun 7 15:59:39 2018 +0200

    Bug 20892: Correct basketgroup link in histsearch.pl
    
    When searching an order, histsearch.pl page, you see if exists the backetgroup as a link.
    This link is composed of "basketgroup.pl?booksellerid=xxx", it must also contain "basketgroupid=xxx" and "opa=add".
    
    See Bug 11429 for example.
    
    Test plan :
    1) Create an order in a basket and add it to a basketgroup
    2) Search for this order, you get to page histsearch.pl
    3) Check clicking on basketgroup id leads to basketgroup details page
    
    Signed-off-by: Amit Gupta <amit.gupta@informaticsglobal.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3c65318243de786bdc11d9ad335a253d59754d74
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jun 12 11:13:46 2018 -0300

    Bug 20899: Fix patron's name display
    
    This is a follow-up for
      commit fa54100dffe092e606f79b15692eedaf78f42e45
      Bug 18403: Use patron-title.inc when hidepatronname is used [SPECIFIC for issuehistory]
    
    We should use patron-title.inc to display (or hide) patron's info on the
    checkout history view
    
    Test plan:
    Issue an item, go to the biblio, click the circulation history for this
    tab.
    Note that the patron's name is showing.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d795654ebfe31d8ae3d04cf952d1a24650b86b2c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jun 12 11:26:02 2018 -0300

    Bug 20918: Fix left-side navigation on the checkout history page
    
      commit fa54100dffe092e606f79b15692eedaf78f42e45
      Bug 18403: Use patron-title.inc when hidepatronname is used [SPECIFIC for issuehistory]
    
    Removed:
    -    biblionumber => $biblionumber, # required for left-side navigation
    
    But did not deal with the side-effects.
    
    Test plan:
    When you are on the "Checkout history" page (/cgi-bin/koha/catalogue/issuehistory.pl?biblionumber=42),
    the left-side navigation is broken if this patch is not applied, the biblionumber is not set.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2367760e990ee55e9cfad0c4dc440824d45751d5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jun 12 13:12:25 2018 -0300

    Bug 20922: Remove use of Koha::Number::Price in updatedatabase.pl
    
    Koha::Number::Format->round use Number::Format->round with a precision=2
    We should use it directly instead of Koha::* modules. It will avoid the
    DB entry to fail because schema changes.
    
    From the koha-devel list:
    
    http://lists.koha-community.org/pipermail/koha-devel/2018-June/044608.html
    
    16.06.00.042
    
    Upgrade to 16.06.00.041 done (Bug 14629 - Add aggressive ISSN matching
    feature equivalent to the aggressive ISBN matcher)
    DBD::mysql::st execute failed: Unknown column 'me.p_sep_by_space' in
    'field list' [for Statement "SELECT `me`.`currency`, `me`.`symbol`,
    `me`.`isocode`, `me`.`timestamp`, `me`.`rate`, `me`.`active`,
    `me`.`archived`, `me`.`p_sep_by_space` FROM `currency` `me` WHERE (
    `active` = ? )" with ParamValues: 0=1] at
    /usr/local/share/perl/5.24.1/DBIx/Class/Storage/DBI.pm line 1836.
    DBIx::Class::Storage::DBI::_dbh_execute(): Unknown column
    'me.p_sep_by_space' in 'field list' at
    /inlibro/git/koha-csf-prod-inlibro/Koha/Objects.pm line 209
    
    Basically, the update code uses Koha::Number::Price, which in full
    modern object mode goes for its newly added *p_sep_by_space* _in the
    18.05 code_.  But the DB doesn't have it yet (it comes with 17.12.00.022).
    
    Signed-off-by: Blou <philippe.blouin@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 38d75d28afd485aabdb5d4491a0b8380dc8c409a
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue May 29 11:48:14 2018 +0000

    Bug 20832: Fix opac user profile page when there is overdue fine and no rental charge
    
    Test plan:
    0) Do not apply the patch
    1) Have an overdue fine linked with specific item currently checked out
    to your patron
    2) Do not have any unpaid rental fees
    3) Go to this patron profile in opac - page opac-user.pl
    4) The page crashes with "Can't call method "get_column" on an undefined
    value at
    /usr/share/koha/opac/cgi-bin/opac/opac-user.pl line 217" in log
    5) Apply the patch
    6) Restart plack
    7) The page should working and show the right amounts for fines
    
    Signed-off-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6650c7efb41072a2937bfb6ce90ef08f5c442066
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jun 1 09:21:48 2018 +0200

    Bug 20851: Add module to circ/article-request-slip.pl
    
    See bug 20468, comment7.
    Although the script seems to compile well, we better add the module here.
    Trivial change.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f7176c356de79ef76e9191be4c822ffb5adb622d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon May 14 15:08:13 2018 +0000

    Bug 20756: Compiled CSS
    
    This patch contains the compiled CSS file
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit cbb5207c1cc5f196ad2682a24ae1db7fb9301876
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon May 14 15:07:42 2018 +0000

    Bug 20756: OPAC "Share list" button should be styled with an icon
    
    This patch adds a new "share" icon to the sprite image used to style
    controls in the OPAC. The "share list" links now have a "sharelist"
    class which is used to style the links with the new icon.
    
    Also changed: Fixed the page structure markup of opac-shareshelf.tt.
    
    To test you must have the OpacAllowSharingPrivateLists system preference
    enabled.
    
     - Log in to the OPAC and go to Lists -> Your lists.
     - Create one or more private lists if necessary.
     - In the table of your lists there should be a "Share" link with the
       new icon.
     - View one of these lists and confirm that the "Share" link at the top
       of the table of list items.
     - Click through to the share list page and confirm that the page looks
       correct.
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit eeeb15c8f8db59c36108110a417b132a5d8bab85
Author: Bernardo González Kriegel <gonzalez@di.unc.edu.ar>
Date:   Wed May 2 19:42:22 2018 -0300

    Bug 20700: MARC21 add/update leader/007/008 codes
    
    This add/updates some codes from updates 22 (Apr/16)
    and 23 (Nov/16)
    
    Update 22 https://www.loc.gov/marc/up22bibliographic/bdapndxg.html
    
    Sound Recording 007/03 n (new)
    Sound Recording 007/10 n (new)
    Sound Recording 007/01 r (new)
    Sound Recording 007/01 s (new)
    
    Update 23 https://www.loc.gov/marc/up23bibliographic/bdapndxg.html
    
    Leader/18 n (new)
    Music 008/20 p (new), b (renamed)
    
    To test:
    1) Apply the patch
    2) Clean your browser cache
    3) Go to cataloguing -> new record
    4) Leader plugin: check leader/18, new option 'n'
    5) 007 Plugin:
    a) Sound recording
            check 007/01 new 'r'
            check 007/03 new 'n'
            check 007/10 new 'n'
    b) Electronic resource
            check 007/01 new 's'
    6) 008 Plugin: Music, check 008/20 renamed 'b', new 'p'
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2529a218eef278278bc6bfbfe28267b4acbf9c17
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 6 11:12:24 2018 -0300

    Bug 20886: Do not cast undef to 0 (TO_JSON)
    
    We should not cast undefined values to 0.
    
    Signed-off-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    This was a bug I introduced. I think the fix is right, and if something
    gets broken for this, it means it was making the wrong assumptions on
    the data.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d86ff0f5db72a1291958458e07ac7d9868ac4ac0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 4 12:14:10 2018 -0300

    Bug 20778: (bug 19777 follow-up) Fix subscription deletion
    
    Caused by
      commit 666a1b276097785c2a7c33e718f26f5512b3d972
      Bug 19777: Move template JavaScript to the footer: Serials, part 3
    
    TT vars should not be used in .js files
    
    Test plan:
    Delete a subscription, confirm you see the confirmation popup and that
    the it deletes the subscription correctly after it has been confirmed.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3e91d99a15f5882312378a06af4851cbb4237ef8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue May 1 13:08:18 2018 +0000

    Bug 20053: Drop type attribute "text/javascript" in OPAC templates
    
    This patch is a reimplementation of the original from Indranil Das Gupta
    and the QA follow-up from Julian Maurice. Original test plan:
    
    Conformance rules for HTML5 is generating warnings for <script> element
    with type="text/javascript" attribute when the OPAC page is checked
    with W3C Validator. This patch removes the cause of these warnings.
    
    Test plan
    =========
    
    1/ Paste the URL to your OPAC page (if it is hosted) to W3C Validator
       and watch about 10+ warnings being generated by the validator.
    
    2/ Apply patch and re-submit the page to the Validator. The warnings
       would be gone.
    
    Signed-off-by: Jon Knight <J.P.Knight@lboro.ac.uk>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 564e9ce1ee4fbaa4a52bccd3f087abfafb69d985
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 30 12:10:58 2018 -0300

    Bug 20829: Handle non-existent barcode when linking to host item
    
    Since commit 2c9aeb9b0f4449d1a25274b8fbf8dae4ec11d3bf
      Bug 18277: Remove GetBiblionumberFromItemnumber - linkitem
    
    $item is not defined if the barcode is invalid, we should not call
    method on it in that case.
    
    Test plan:
    - Turn on EasyAnalyticalRecords
    - Go to a detail page
    - Edit > Link to host item
    - Enter an invalid barcode
    => With the patch you get a friendly error message
    => Without this patch it explodes with
    Can't call method "itemnumber" on an undefined value at
    /home/vagrant/kohaclone/cataloguing/linkitem.pl line 86.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3f01fcae9723edf0485f431878a34551e814090a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jun 8 12:20:13 2018 +0000

    Bug 2426: DBRev 18.06.00.002
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 870913b3c3a83568c219d6e22b7110ffd217370c
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed May 16 01:19:53 2018 +0200

    Bug 2426: Remove deprecated management permission
    
    After review of the code it turns out that the management permission
    that has been marked as deprecated a long time ago, does not have
    any function.
    
    The patch removes all remaining code related to it.
    
    To test:
    - Make sure you have a patron with the management permission
    - Apply patch
    - Run database update
    - Check everything still works as expected
    
    Bonus:
    borrowers.flags is recalculated for patrons with management
    permission.
    
    To check:
    - Create some 'permission twins' with and without management
      permission
    - Note the value in borrowers.flags
    - Apply patch, don't run database update
    - Save permissions from GUI for one of the twins
    - Note the newly calculated value
    - Run database update
    - Now both twins should have the same borrowers.flags value
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 20bd2d2bd50e4e8b4f8b40e7d1df521a0e01bc09
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jun 8 12:03:01 2018 +0000

    Bug 20120: (QA follow-up) display correct amount in redirect
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 11223294b6167822708893dbde3ff84d55155b69
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 3 13:26:08 2018 -0300

    Bug 20120: force scalar context for CGI->param
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit d4cf19ac04ce49cc980cdf88dfa351b3c7740130
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Fri Apr 27 06:00:41 2018 -0400

    Bug 20120: (QA follow-up) Pass on_editing parameter for Price plugin
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 515cab0c46467efbdcb7e4cbbac7ccdb38e8845a
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Fri Mar 9 09:20:40 2018 -0500

    Bug 20120: Prevent writeoffs of more than the amount owed for a fee
    
    In short, it is possible to 'over-writeoff' a fee such that the value of the fee is now a credit.
    
    Test Plan:
    1) Attempt to writeoff a single fee, set the amount input to more than
       the amount of the fee.
    2) Note the writeoff makes the fee go negative.
    3) Apply this patch
    4) Attempt to repeat step 1, you should be unable to write-off an
       amount more than the amount outstanding for the fee!
    
    Signed-off-by: George Williams <george@nekls.org>
    
    Signed-off-by: George Williams <george@nekls.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f8ea20344b931bb92e6b48639ae626f604853ffe
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 4 11:23:35 2018 -0300

    Bug 20875: (bug 16735 follow-up) Fix library list for OpacAddMastheadLibraryPulldown
    
    This patch fixes a regression introduced by
      commit 2059f7d8016ab61172830e9b670279d3e28882b7
      Bug 16735: Migrate library search groups into the new hierarchical groups
    
    It re-added code that was removed by bug 15758 (use of var BranchesLoop).
    
    Test plan:
    - Create library search groups
    - Turn OpacAddMastheadLibraryPulldown on
    - At the OPAC confirm that the search box with libraries and library
    groups is displayed and works correctly.
    - Remove the library search group
    - The dropdown list should not have the optgroup tags
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 421746dd6337814f96adc6d79a773a2a23f50556
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 4 15:45:22 2018 -0300

    Bug 20877: Do not consider DB user has permissions
    
    Test plan:
    0/ Do not apply the patch
    1/ Confirm the new test fails
    2/ Apply the patch
    3/ Confirm the new test passes
    4/ Test the installation process
    
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3d68ab447eda3eb5a25444b1ceaeea96b446c64b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jun 1 11:00:57 2018 +0200

    Bug 18821: (QA follow-up) Last tweaks for performance
    
    [1] passing unsafe has no use since it is a scalar, removed it to unconfuse
    [2] remove caching when pref is disabled
    [3] caching userid removes the need for calling Patron->find each time
    [4] subsequent changes in unit test
    [5] cosmetic renames to move from session to daily basis (changed dev angle)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    First call going thru Koha::Patron takes about 0.0150 sec.
    Subsequent calls only use caching and take about 0.0006 sec.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 495512f6eacdc306932290784cca4e5d01a053f9
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Sat May 26 06:40:24 2018 +0000

    Bug 18821: Convert to using cache with date checking
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6491ba0233ac019614487efafef6e35c9ffef6eb
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon May 7 17:29:12 2018 +0000

    Bug 18821: TrackLastPatronActivity is a performance killer
    
    Test Plan:
    1) Apply this patch
    2) Start a new session ( a private browser window works well )
    3) Note the lastseen column in the borrowers table is updated
    4) Browse a few pages, not the lastseen column is not updated again
    5) Close the browser window and repeat steps 2-4
    6) prove t/db_dependent/Auth.t
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6049836023be61771c25fe038f02378ede96fff5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 6 14:25:19 2018 -0300

    Bug 20889: Prevent not for loan items to be checked out
    
    1. Item type defined at item level (item-level_itypes=1)
    2. Mark an item type not for loan (itemtypes.notforloan=1)
    3. Checkout an item using this item type (items.itype="BK" for instance)
    => Checkout is not blocked!
    
    I suspect
      commit 3953fdb921d7f280ffbaca813956357aa67d42ca
      Bug 19943: Remove itemtype vs itype confusion in CanBookBeIssued
    to be the root of this issue.
    One occurrence of $item->{itemtype} has not been replaced.
    In this case it refers to the biblioitem->{itemtype} value whereas we want to use
    $item->{itype}. So this issue does not happen if items.itype==biblioitem.itemtype
    (just in case you are not reproducing the problem).
    
    Test plan:
    Make sure not for loan items cannot be checked out
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 326aa0667d86dc8c0d8a8becf440bfb25d2c76c1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 6 14:24:33 2018 -0300

    Bug 20889: Add tests - not for loan items cannot be checked out
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 50af8d840f0620196b39e27fbf674bab3ae4463b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Jun 5 13:45:06 2018 +0200

    Bug 20866: (QA follow-up) Use build_object and remove two tests
    
    The unique constraint on userid is handled in TestBuilder. So let's use it.
    The two tests if count==$count do not make much sense anymore when we
    call ->count a few lines before. The check with search_limited is enough.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 6123e213e6a4c9353175e0cf2e2a638d03c95b1c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 4 15:28:02 2018 -0300

    Bug 20866: Make ArticleRequests.t pass even if table is not empty
    
    Previous patch from Marcel removed the data from article_requests, I do
    not think it is a good idea to remove existing data, it could hide bugs.
    
    This patch moves the count inside the subtest block in order to have the
    correct value when these tests are executed.
    Previous code was broken: Koha::Patron->store does not generate a
    userid, and ->search_limited did not work correctly
    (Koha::Patron->has_permission returned early because of the non-existing
    userid, 'return unless $self->userid;');
    
    Test plan:
    [1] Create an article request.
    [2] Run t/db_dependent/ArticleRequests.t
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 63673d70cd08b198d3b904b73da82f1e06d64f7b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 30 13:07:39 2018 +0000

    Bug 17561: (follow-up) Pass itemnumber on returns and correct itemnumber param in circulation
    
    To test:
    1 - Place two holds on a bib for a single patron
    2 - Check in both items, confirm the screen message and slip are correct
    3 - Checkout both items to another patron, confirm the screen message
    and slip are correct
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 33f441889958b4bd245fdace0d2c787fcb4152a6
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Fri May 18 08:00:03 2018 -0400

    Bug 17561: (QA follow-up) Update existing unit tests
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 777b24bbb4a768f7895b6d50bdf8dd4bcb067c91
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Fri May 18 07:20:06 2018 -0400

    Bug 17561: (QA follow-up) Simplify new ReserveSlip code
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 2c1f7d22810be37c4220566a675b3620d1ff4002
Author: Benjamin Rokseth <benjamin.rokseth@deichman.no>
Date:   Thu Mar 15 12:57:37 2018 +0100

    Bug 17561: ReserveSlip needs itemnumber for item level holds on same biblio
    
    This patch fixes a regression after bug 14695.
    This patch adds itemnumber and barcode as optional params in ReserveSlip used
    by hold-transfer-slip.pl to generate HOLD_SLIP. This is for ReserveSlip to be
    able to generate correct slips when items in multi-item holds are checked in.
    
    Test plan:
    
    1) activate a circulation rule with multi-item holds
    2) Place two holds on same biblio for patron
    3) for debugging, either use browser console to observe POST request and responses
       or use info from reserves, e.g. reserve_id in the HOLD_SLIP
    4) checkin two items from same biblio on pickup branch
    5) note that both holds are effectuated, but reserve_id is the same on both slips
    6) also note that there is no itemnumber or barcode in the requests from returns.pl
    7) Apply this patch
    8) repeat 2-4
    9) note that reserve_id is now different on the two slips
    
    and/or:
    Run tests:
      t/db_dependent/Reserves/ReserveSlip.t
    
    Signed-off-by: Brendan Gallagher <brendan@bywatersolutions.com>
    Signed-off-by: Maksim Sen <maksim.sen@inlibro.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 4f0c8e3c88cb43f21f70e4d776442b489ee3f5dc
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Jun 3 10:09:23 2018 +0200

    Bug 20861: Correct EDI permissions on EDI messsages
    
    The permission for EDI is edi_manage, but 2 pages asked
    for manage_edi, allowing users not to access those.
    
    To test:
    - Add edi_manage to your permissions
    - Try to access the EDIFACT messages from the
      acq start page
    - Verify it doesn't work
    - Apply patch and try again
    - You should be able to access the page now
    - Try to access the other page directly (if you don't
      have EDI data):
      /cgi-bin/koha/acqui/edimsg.pl
    - Verify you can access the page and don't get a
      permission error
    
    Signed-off-by: Mark Tompsett <mtompset@hotmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9b3f7a001163f8aa230cc6b0e91d48a5593fe56c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 1 11:39:52 2018 -0300

    Bug 20838: Add 2 small tests to check ref
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit de32d9d3e2a3371665365a0a6d8a4343f6978940
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 30 14:53:28 2018 -0300

    Bug 20838: Make Koha::Library::Group->all_libraries return a list of Koha::Libraries
    
    Instead of a list of Koha::Library::Group
    Ideally it should be a Koh::Libraries iterator
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e5896f56837bdea7a98e7f5ac4c278e7d8fe76f3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 30 14:41:14 2018 -0300

    Bug 20838: (bug 16735 follow-up) Fix search by group of libraries
    
    In the last patches of bug 16735, we completely broke the feature!
    
    The limit is using library_groups.id instead of branches.branchcode.
    
    Test plan:
    Create a group of library with the search feature
    Search (OPAC and staff interfaces) using this limit
    
    => Without this patch you will see that the generated search query does
    not contain branchcodes
    => With this patch applied you will see the branchcodes
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 73b0542354a415bfa4c250194f78c145c1088661
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jun 4 15:21:06 2018 +0000

    Bug 3849: DBRev 18.06.00.001
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit b79ce63f65d8b18621e0dd381b7b267b4942ca9b
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon May 28 22:17:46 2018 +0000

    Bug 3849: (follow-up) Add database update to change descriptions
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 819e6216e666b61077d2b9043d25f546708bbfc3
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun May 20 21:06:25 2018 +0200

    Bug 3849: Improve descriptions of granular acquisition permissions
    
    The permissions for acquisitions were not very clearly described.
    This patch changes the descriptions in the include file (GUI) and
    in the default SQL.
    
    To test:
    - Go to any patron account in staff
    - Go to more > permissions
    - Verify that the meaning of each acquisition permission is clear
      from the description
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9bd9d2887495efb472b5fcc7382479588b990473
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Tue May 29 08:49:19 2018 +0000

    Bug 20831: Fix KohaTable calls after bug 9573
    
    Test plan:
    0) Do not apply the patch
    1) Confirm not working datatable on patrons hold history page
    2) Apply the patch
    3) The table should be working now
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 5530ed6b9d4a45bcca93f3a68371381b87c8eed2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 28 16:36:54 2018 -0300

    Bug 20763: Remove unecessary Koha::Patron fetch
    
    If $borrowernumber is not set, there is no userenv.
    So let's pick the library code set in the userenv instead of fetching
    the Koha::Patron->branchcode from DB
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 7b16c9a841fc28a9b994d0a1a9ccce77a7e94868
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Mon May 14 08:45:00 2018 -0400

    Bug 20763: AllowPurchaseSuggestionBranchChoice triggers error opac-suggestions.pl is visited without logging in
    
    Some code executed in the script opac-suggestions.pl if the system preference AllowPurchaseSuggestionBranchChoice is enabled assumes there is a logged in user. If there is not, patrons will see the error "Internal Server Error".
    
    Test Plan:
    1) Enable AllowPurchaseSuggestionBranchChoice
    2) Enable AnonSuggestions
    3) In the OPAC, perform a search that will have no results,
       click the "Make a purchase suggestion" link.
    4) Note the error
    5) Apply this patch
    6) Reload the page
    7) The page should load now!
    
    Signed-off-by: Pierre-Luc Lapointe <pierreluc.lapointe@inLibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit f9d62f158517a444f5147a2282e21b1aee589687
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 1 13:54:53 2018 -0300

    Bug 20840: (bug 2696 follow-up) Fix biblio info fetch
    
    There is no accountlines.biblionumber field, if the account line is
    linked to an item, accountline-details.pl will explode with:
    Template process failed: undef error - The method biblionumber is not
    covered by tests!
    
    Test plan:
    Create a fine for a given item
    Pay the fine
    View the detail of the account line
    
    => Without this patch you get a software error
    => With this patch applied you will see the biblio's title
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
