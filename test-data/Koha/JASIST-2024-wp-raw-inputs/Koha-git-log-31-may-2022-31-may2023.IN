commit 550e4dd8cd141dedd75a8aa54042a8f1948e0cc3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue May 30 16:13:00 2023 -0300

    Bug 33864: Trigger the 'change' event when setting quantity
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Andrew Nugged <nugged@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit ea71533d1eb554945e61d7602b1b5c1f9aae51f7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue May 30 13:58:16 2023 -0300

    Bug 33864: Restore inputmode="numeric" (bug 28283)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Andrew Nugged <nugged@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 0fc69b1df27643dde64702c8516ca67a8358f65a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue May 30 12:07:39 2023 -0300

    Bug 33864: Better handling of confirmation button
    
    This patch corrects the behavior of the 'Confirm' button on the three
    possible scenarios regarding item creation.
    
    Ordering:
    - 'Confirm' disabled, only gets enabled if quantity > 0
    
    Receiving:
    - Quantity gets locked (only changeable when creating items)
    - 'Confirm' disabled, only gets enabled if quantity > 0
    
    Cataloguing:
    - It now defaults to 1
    - 'Confirm' enabled by default (because of 1) if quantity is set to 0,
      it gets disabled.
    
    To test:
    1. Verify the described behavior with the sample orders for the previous
       patch.
    => SUCCESS: It does the job!
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Andrew Nugged <nugged@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 31c86e13afb678325044e1d6d5b9935b92da83de
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue May 30 10:26:55 2023 -0300

    Bug 33864: Set default date in all acqcreateitem scenarios
    
    On b0aab2aeef9a025d3907d0b723b5ea71eaf94542 the flatpickr default to
    'today' was restored, but only for acqcreateitem='ordering'. This patch
    moves the initialization to a different stop for broader reach.
    
    To test:
    1. Have 3 baskets on with each setting:
       - create_item = 'cateloguing'
       - create_item = 'ordering'
       - create_item = 'receiving'
    2. Close those baskets
    3. Go to 'Receive shipments'
    4. Choose things from the 3 baskets and then 'Receive selected'
    5. Navigate through the different orders
    => FAIL: Only the one that has items created on ordering has the date
    filled by default
    6. Apply this patch
    7. Reload the page
    8. Repeat 5
    => SUCCESS: Dates are pre-filled!
    9. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Andrew Nugged <nugged@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 5558b888330fae01d9bd4f45bd268204fcac0cc7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue May 30 14:23:59 2023 -0300

    Bug 33783: Only use ecost if unitprice has not been set on ordering
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit c20921ac1b399448bd0d443a0f0384b875930311
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon May 29 16:14:56 2023 -0300

    Bug 33783: Make sure the value is populated on load time
    
    The original patch makes the form set the right values in the order row
    (before storing it) but misses to load the right value on page load,
    which is still a regression. This patch solves that.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit de31d916388647ca1ba30711a047c8eadf1e744f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 26 12:50:41 2023 +0000

    Bug 33783: (bug 8179 follow-up) Populate actual cost with ecost during receiving if not set
    
    This restores behavior prior to 8179 to use the estimated cost when receiving if the
    actual cost is not set.
    
    We set the unitprice in the table row so that it will be used when editing and will be saved even if not adjusted
    
    To test:
    1 - Add some orders to a basket, do not set actual cost field
    2 - Close basket, receive orders
    3 - Note actual cost field is blank
    4 - Cancel receipt
    5 - Apply patch
    6 - Receive again
    7 - Note actual cost is populated
    8 - Complete receipt and confirm actual cost correctly saved
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 9c565eff1357c2fdf900f006a17fa62fd4f2f9ee
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu May 25 12:57:24 2023 -0400

    Bug 33838: Don't reset the renewal count
    
    I cannot find any justification for this line existing.
    MarkIssueReturned does not do this.
    
    Resetting item's renewal count was introduced in bug 5877 with no explanation.
    
    Test Plan:
    1) Check out item 3999900000001 to a patron
    2) Upload the KOC file attached to this bug report
    3) Navigate the Pending Offline Circ actions, see your return is listed
    4) Click the checkbox to select your return
    5) Click Process once. Nothing appears to happen
    6) In a new tab, pull up the bib for item 3999900000001, see that it has been checked in
    7) Back on your Offline Circ tab, click Process a second time
    8) Koha tells you the item is not checked out
    9) Apply this patch, restart all the things!
    10) Repeat steps 1-4, everything should now work!
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Edit: this line was introduced by bug 30275, by mistake. The
    renewals_count attribute belongs to the `issues` table, and I agree it
    shouldn't be set to 0 at all as it will (with no reason) make us loose
    the value!
    Tests pass with and without this change, so this isn't even tested.
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7ec849f39366e82e8813ee3ca897f3bb97ab9e39
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 26 14:44:05 2023 +0000

    Bug 33788: Limit the number of old issues rows returned
    
    This patch updates the parameter from 'limit' to 'rows'
    
    To test:
    1 - Checkout an item to 5 different people
    2 - View item details on items tab of record
    3 - Note you see last borrower, and three previous borrowers
    4 - Apply patch, restart all
    5 - Refresh page
    6 - You shoulw now only see last borrower and 2 previous borrowers
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bfd31debb52197e9ab1ad667d4782088647d67dd
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed May 24 15:13:12 2023 +0000

    Bug 33821: Allow direct input of dates on the OPAC
    
    To test:
    1. Apply patch
    2. Go to OPAC self registration and try to manually enter the date for date of birth.
    3. You can do so sucessfully
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c84f06ec625a6d11caeb01a27cf8f61ff7430140
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon May 29 10:59:53 2023 -0300

    Bug 33854: Fix typo in ImportBatchProfiles controller
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4ede366268b0f18b321ba4ea6c5dad29d899cc5b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri May 12 06:56:07 2023 +0000

    Bug 33702: (QA follow-up) Do not crash on borrowernumber
    
    Resolve:
    Can't call method "borrowernumber" on an undefined value at /usr/share/koha/opac/opac-illrequests.pl line 66
    
    Test plan:
    Put an unexisting illrequest_id in the URL parameter.
    You should see a 404, not a crash.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b5cae12aef10b667d1c8a29adc85a97addb6a753
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 10 07:37:57 2023 +0200

    Bug 33702: Prevent ILL requests to be modified by somebody else
    
    Same as previous patch, but for 'update' and 'cancreq'.
    We remove the redirect, but here we only want to focus on the security
    fix.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Confirmed. Without this patch a patron can modify and cancel any ILL
    request in the OPAC. With this patch the patron is redirected to the
    404 page if modification or cancellation is attempted.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1ad43fd47fea1c616f2a6c301b97940cd335ce95
Author: Magnus Enger <magnus@libriotech.no>
Date:   Tue May 9 15:37:51 2023 +0200

    Bug 33702: Patrons should only see their own ILLs in the OPAC
    
    To reproduce:
    - Enable the ILL module
    - Install the FreeForm backend as described here:
      https://wiki.koha-community.org/wiki/ILL_backends
    - Go to the ILL module and add two different ILL requests by
      clicking on "New ILL request" and entering the necessary details.
    - Make sure you connect the two requests to two *different* patrons
      in the field marked "Card number, username or surname"
    - Make the two titles different, and make a not of which title is
      connected to which patron
    - Log in as one of the two patrons who now have an ILL request each,
      in the OPAC
    - Go to the "Interlibrary loan requests" tab
    - Click on "View" for the request connected to this patron. The URL
      will look like something like this:
      http://<opac>/cgi-bin/koha/opac-illrequests.pl?method=view&illrequest_id=2
    - Now change the number at the end to correspond to the the ILL request
      connected to the *other* patron
    - Verify you can see the details of an ILL request conncted to another
      patron than the patron you are logged in as
    
    To test:
    - Apply the patch
    - Restart all the things if you are testing with ktd
    - Reload the detail view of the ILL request that belongs to the patron
      you are not logged in as
    - Verify you are redirect to the 404 page and can not see the details
      of the request that belongs to the patron you are not logged in as
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 493819b92b8ecbe917b70cf564e7a0bdbbec9f89
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 25 15:07:25 2023 +0200

    Bug 33829: Fix add patron to patron list if PatronAutoComplete is off
    
    When adding patrons to a patron list we get a JS error about undefined
    variables. We can easily fix this problem by defining them even if the
    pref is not set.
    
    We are enabling the auto complete even if PatronAutoComplete if off.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a69551e32e50376b58852fec7e89deef3c07d55b
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed May 24 15:53:43 2023 +0000

    Bug 33823: Add spacing to action labels
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5da81cde99983768f627417c6c267d51cc0d908d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 24 09:29:30 2023 +0200

    Bug 33815: Do not explode if logged in user modify their own userid
    
    If the logged in librarian modifies their own userid they will get the
    following error when submitting the form:
    Can't call method "password_expired" on an undefined value at /kohadevbox/koha/C4/Auth.pm line 1780
    
    We could handle this situation and flag the session as expired. Better
    would be to deal with this specific user case and update the cookie (?)
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6cd6c7833ea08c216c5b5531ee7cb2ab5f39aaa3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 24 11:52:50 2023 -0300

    Bug 33815: Regression tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1a8903ae850ca268c730e19c1b575e3be942ee2b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu May 25 10:15:08 2023 -0300

    Bug 33834: Fix random failure on api/v1/ill_requests.t
    
    This patch makes the GET request results more deterministic so we avoid
    random failures. It does so by adding a fixed value to each ILL request
    and then sorting by it.
    
    To test:
    1. Run:
       $ DB_IMAGE=mysqli:8.0 ktd up -d
       # wait until it finished:
       $ ktd --logs
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/ill_requests.t
      (repeat a few times)
    => FAIL: It sometimes fails
    3. Apply this patch
    4. Repeat 2
    => SUCCESS: It doesn't fail
    5. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 816bbbe77f47688ee79f6664e60cc72ce5d7dd4a
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu May 11 14:43:39 2023 +0000

    Bug 33362: Allow return claims to be resolved even if the issue has since been delete from the database
    
    Test Plan:
    1) Check out an item
    2) Claim return on it, moving it to the old_issues table
    3) Delete the old_issue via koha-mysql or Use cleanup_database.pl
    4) Attempt to resolve the claim
    5) Note the error
    6) Apply this patch set
    7) Restart all the things!
    8) Attempt to resolve the claim
    9) No errors!
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 33856898fd2f1cd757aeafe3c165300928f9da61
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue May 23 03:32:59 2023 +0000

    Bug 26611: Make authority record matching use required match checks
    
    This patch fixes record matching for authorities to correctly apply required match checks.
    
    To test:
    
    1) Create a record matching rule:
    
    Threshold: 100
    Record type: Authority record
    
    Match point 1
    Search index: subject-topical
    Score: 100
    Tag: 150
    Subfields: a
    
    Match check 1
    Both source and target record check fields:
    Tag: 040
    Subfields: a
    
    This rule says we want to match on the topical term heading, then confirm the match with 040$a.
    
    2) Create two topical term authority records
    
    Authority 1:
    150$a: Test
    040$a: A
    
    Authority 2:
    150$a: Test
    040$a: B
    
    3) Export authority 2 and save
    
    4) Go to Cataloging -> Stage records for import
    
    5) Upload your downloaded authority 2 file. Change the record type to Authority. Choose your new record matching rule.
    
    6) Stage for import.
    
    7) Confirm that with the record matching rule applied, both authorities 1 and 2 show as possible matches, even though only authority 2 has a matching 040$a.
    
    8) Apply the patch and restart services
    
    9) Change the matching rule to "Do not look for matching records" and apply. This is to essentially refresh the page.
    
    10) Change the matching rule to your new matching rule and apply. Confirm only the matching authority 2 shows and is selected.
    
    Sponsored-by: Waikato Institute of Technology
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b982ac91a73b933d5c10eb220ceff350e0a16722
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 24 09:44:49 2023 -0300

    Bug 33784: Make buttons more meaningful
    
    This patch makes dismissing the modal equivalent to cancelling the
    receipt and thus returning to parcel.pl.
    
    The 'Save' button is renamed to 'Confirm' and is disabled when no items
    are selected for receiving.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1017de5a8977406ea99f96958e2ccaab9866a877
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 23 10:02:39 2023 +0200

    Bug 33784: Don't display the multi receive form for single receive
    
    With bug 8179, a new step was added when receiving a single item.
    This extra step is not useful and adds clicks for the staff member who is receiving orders.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 91bd2919533c3a4053f48dac8811d8d3cc64bc1c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon May 22 14:03:05 2023 -0300

    Bug 33797: Remove extra space
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e22b3f06668a181874de2049297e0390d2280cd0
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon May 22 12:35:02 2023 +0000

    Bug 33792: reserves_stats: Undo homebranch and holdingbranch preselect
    
    This preselect cuts off all next available holds that are in reserves,
    as well as holds filled by checkout without confirm (see 33791).
    
    Test plan:
    Go to reporting. Click Hold statistics.
    Verify that Holding library and Home library are not selected.
    Test that you can still filter by one of those.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 63bc731fd409e52b505c684fa5ba5f849128aa36
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 10 10:54:39 2023 +0200

    Bug 33663: Pass 'suggestion' to the OPAC templates only
    
    We don't need it for the staff interface. The previous patch is removing
    the only occurrence using it.
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9b5c92035f429e23d3a899e920e04dccfc309492
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 10 10:53:38 2023 +0200

    Bug 33663: Don't hide Suggestions link in side navigation when suggestion preference is disabled
    
    We don't want to depend on the pref for the staff interface.
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 75b6d4c1f1605578a4f1d1b7694d8595fea89c3d
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu May 18 11:36:46 2023 +0000

    Bug 33762: Fix page-section in ILL
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d0195cef6cfdc6d3d2acf7ba06cdd0a5cfaddbb9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon May 22 11:47:41 2023 -0300

    Bug 33791: (QA follow-up) Stick to 'item_id' for the parameter name
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bd5c5eaa38f75297efde5a096d30ad65eff9a658
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon May 22 11:14:25 2023 +0000

    Bug 33791: Pass itemnumber to $hold->fill
    
    Test plan:
    
    Without this patch:
    Place next available level on some book for patron A.
    Checkout this book directly to patron A.
    Check old_reserves table for this reserve; does not have itemnumber.
    
    With this patch:
    Do the same.
    In old_reserves the itemnumber should be saved.
    Run again t/db_dependent/Koha/Hold.t. Should pass.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 306439b4c6f4d90bc8d46e6f76aac2f5b9f11cd8
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon May 22 11:35:46 2023 +0000

    Bug 33791: Add unit test
    
    Test plan:
    Run t/db_dependent/Koha/Hold.t
    NOTE: This test should fail without following patch, but pass with it.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7b315a31b45c98770a8f14636252a83a67a8e545
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri May 19 17:05:10 2023 +0100

    Bug 33787: Fix for regression caused by bug 32450
    
    This patch fixes the regression cashed by bug 32450 where we
    accidentally introduced the option to archive system debit types.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b4e2e77678801cd59aeafb84d6b13f5d647a99c3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri May 19 11:30:28 2023 +0000

    Bug 33774: Loading club table in every tab in patron details
    
    This patch corrects a minor regression in template markup caused by Bug
    33774. The Bootstrap tab attributes were lost (presumably in a merge)
    causing the whole tab structure to break.
    
    To test, you should have at least one club defined.
    
    Apply the patch and view the patron details page. Each tab should load
    its contents correctly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 63bea881820672a523101f37730a2a365e2d8eb1
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri May 19 15:28:22 2023 +0000

    Bug 33785: Some UI fixes to the orderreceive.tt modal
    
    To test:
    1. Apply patch
    2. Follow the steps in Bug 8179 to generate the modal on orderreceive.tt
    3. Check that the following issues have been corrected:
        -The select2 dropdown for #bookfund is splitting onto multiple lines in the modal.
        -The modal header has a green line extending through it.
        -At smaller screen sizes the modal close button ( upper right corner of modal ) drops down below the h4. It should stay on the same line as the h4.
        -The modal is not centered on the screen.
        -The toogle inactive/active checkbox can become it's own list element.
        -The #current-fund can become a hint
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6cff39ab2ba8105d3f65c6c1eec5626f8f66c4e0
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu May 18 10:27:30 2023 +0000

    Bug 31585: Fix 'acquisition order' and 'acquisition claim'
    
    Added 'ACQUISITION CLAIM' and 'ACQUISITION ORDER' to the log viewer form.
    Please test this well (making sure there are log entries of these types and they show properly upon searching for them)
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4d1d18cd2a145df7fd1e0f8a690da0b3a03ec38c
Author: Mason James <mtj@kohaaloha.com>
Date:   Fri Mar 31 03:32:10 2023 +1300

    Bug 33371: Add 'koha-common.service' systemd service
    
    to test
    
    - install current package
    - note following $message on install
     'Failed to enable unit: Unit /run/systemd/generator.late/koha-common.service is transient or generated.'
    
    - apply patch, build package, install new package
    - note $message is gone! :)
    
    - test koha-common.service
       # systemctl start  koha-common
       # systemctl status koha-common | grep running
         Active: active (running) since Sun 2023-04-02 00:27:31 NZDT <<<
    
       # systemctl stop  koha-common
    
       # systemctl status koha-common | grep dead
         Active: inactive (dead) since Sun 2023-04-02 00:25:34 NZDT <<<
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e9fe95b8f4b71765cb240151cc63da3f30ceee2f
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu May 18 13:55:02 2023 +0000

    Bug 33767: Fix incorrect heading in page-numbers.inc
    
    This patch replaces an h6 with a span to avoid a jump from h2 to h6.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d191f21e5760994575c6954dba88544f06afe4e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 10 10:45:23 2023 -0300

    Bug 33675: Add CSRF protection to OAuth/OIDC authentication
    
    This patch makes the OAuth/OIDC client pass a `state` parameter with a
    CSRF protection token, to be validated back when the flow returns to
    Koha.
    
    Ideally, the Mojolicious::Plugin::OAuth2 library should deal with this
    implicitly, probably making use of JWT. But as of now, this is the best
    way to implement it.
    
    To test:
    1. Have a working SSO solution (ktd --sso)
    2. Click to login using SSO
    => SUCCESS: Notice a 'state' parameter on the URL, looks like a random
    thing
    3. When you login, no error is reported
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f436bc639c9a1eeb1e14eeb38f3ffabc7bdd32f9
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri May 19 06:20:19 2023 +0000

    Bug 33777: Fix Auth_with_shibboleth.t
    
    We need to 'mock' the new pref EmailFieldPrecedence
    
    Test plan:
    Run t/Auth_with_shibboleth.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 48ee69e69c049e8fd64c2023683679b88f7a1917
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 17 12:32:34 2023 -0300

    Bug 8179: (follow-up) Restore funds dropdown and checkbox
    
    This patch reintroduces the dropdown that got lost in some refactoring
    of the patchset. It also introduces a couple minor fixes.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bbf48e70a1bb3cd2019667ad6b2edebec8e2534d
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu May 18 16:10:02 2023 +0000

    Bug 33771: Fix markup errors in orderreceive.tt
    
    This patch fixed the following on orderreceive.tt:
    
    -One of the <th> is closed with a </td>
    -The #jobpanel element div is not properly closed
    -Style tags are in the HTML body and they should be in the HTML head
    -The #modal-order-main needs a class of 'row', this has been added.
    
    Apply the pacth and follow the steps in 8179 until you get to the orderreceive.tt. There should be no visual changes but the markup has been corrected.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e6859b46ec0fc2402e6ae91a11620aece4084168
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu May 18 12:11:37 2023 -0300

    Bug 29046: (QA follow-up) Make sure tests get the right EmailFieldPrimary value mocked
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8a6f4b22919502fb37c42e9f5ed464c08729b683
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 18 14:40:45 2023 +0000

    Bug 33769: Terminology: 'Warning: Item {barcode} is reserved'
    
    This patch corrects an instance of the term "reserved" and replaces it
    with "on hold."
    
    The string is shown when the user tries to add an item which is on
    hold to a bundle.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 278bd72d0ae79abf38eb127a3b4a991216460d63
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu May 18 12:03:26 2023 -0300

    Bug 29046: DBRev 22.12.00.048
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9770cfd6736b4685cca147c8806538b9e587f407
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Apr 23 11:38:12 2023 +0000

    Bug 29046: Fix and amend system preference description
    
    The first line would not show in the system preference editor
    due to missing quotes.
    
    Also added information on the option names, link to the schema
    and an example.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1ca89abd0c42f1c681097a1a8fa36944df76ecfb
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 20 14:23:39 2023 +0100

    Bug 29046: Reword system preference.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2a9c6db3385b025f18b382458f95d72e1c47dd97
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 20 14:18:20 2023 +0100

    Bug 29046: Unit tests
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c731680b5dc6c6507786c0797e75df88b4d93eac
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Mon Mar 13 16:01:30 2023 -0400

    Bug 29046: Change link in EmailFieldPrecedence and add link in EmailFieldPrimary
    
    This patch modifies the link in EmailFieldPrecedence to reflect the new
    name of EmailFieldPrimary. It also adds a note in the latter to set the
    'first valid' order in the former.
    
    To test:
    1. Go to Administration > Global system preferences
    2. Search for EmailFieldPrecedence
    3. Click on the link in the description
       --> It should lead to EmailFieldPrimary
    4. Read the note in EmailFieldPrimary, make sure the grammar and
       spelling are correct.
    5. Click the link to EmailFieldPrecedence
       --> It should lead to EmailFieldPrecedence
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fb7bf8f95e14e8ae02c1a200297077b22a353c54
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 10 10:47:51 2023 +0000

    Bug 29046: Use EmailFieldPrecedence in first_valid_email_address
    
    This patch update the Koha::Patron->first_valid_email_address method to
    use the newly defined EmailFieldPrecedence preference.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ca4283c5853f836d9be4bf7c66e6e3de1b0b33f7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 10 10:46:51 2023 +0000

    Bug 29046: Add 'EmailFieldPrecedence' preference
    
    This patch adds a new EmailFieldPrecidence systempreference to allow
    users to set the precicence in which patron email fields should be used
    for communications.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b51ced92db041d23706bcee845d08c520696f7e7
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Mar 10 21:56:57 2023 +0000

    Bug 33203: Add letter_code to the letter dropdown text
    
    To test:
    1. Add a new notice in the Circulation module with a letter code of 'ABC'. Give the new notice a name of 'Overdue notice'.
    2. Now to go Overdue notice/status triggers and look at the dropdown, notice 2 choices that both read 'Overdue notice'.
    3. Apply patch and try again.
    4. The new notice should now read "Overdue notice (ABC)" and should be easy to distinguish from the original.
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 05190ed1d99e3cca7cbd766a9f41e106f25d26a3
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed May 10 02:43:44 2023 +0000

    Bug 33708: Allow anonymous access to OAuth endpoints
    
    Users needs anonymous access to OAuth endpoints so that they can
    login, and then use authenticated access for other endpoints.
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aae996e6bf1a981c1ab5700021593dac777f63ba
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed May 10 01:35:56 2023 +0000

    Bug 33708: Provide non-public endpoint for OAuth/OIDC for staff interface
    
    This change fixes the definition for the non-public endpoint for the OAuth/OIDC
    implementation.
    
    It also uses the non-public endpoint for the staff interface UI.
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dd512db60b21080a1c1cfeae2a3891edd69fd95e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue May 9 18:03:50 2023 -0300

    Bug 33708: Make staff interface login not require public API (OAuth/OIDC)
    
    This patch makes the URL for staff login not point to the `/public`
    namespace. The behavior is not changed for the protocol, but as
    `/public` requires several settings to be available, it effectively
    requires to enable the OPAC, the public API, etc. This patch
    diferentiates both to solve the problem.
    
    I've tested following the Wiki instructions to set keycloak [1] using
    the *--sso* switch for `ktd` as well [2].
    
    It is important to set the following URLs as allowed redirect in order
    to replicate the issue and verify the fix:
    
    http://localhost:8080/api/v1/public/oauth/login/test/opac
    http://localhost:8081/api/v1/oauth/login/test/staff
    
    To test:
    1. Login into the staff interface using the SSO link:
    => FAIL: Results in a 'Bad redirect URL' error
    2. Apply this patch and repeat 1
    => SUCCESS: You get a permission denied error or you just login,
    depending on your setup.
    
    [1] https://wiki.koha-community.org/wiki/Testing_SSO
    [2] ktd --sso up -d
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ac86c2ab6d3ae3c4d37ea6dc8aa878a9c5d3b486
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Jul 21 11:39:07 2022 +0200

    Bug 23773: Send membership expiry notices by sms too
    
    Test plan:
    1. Verify in "About" page that SMS::Send is installed.
       If not, install it.
    2. Set system preferences:
       - SMSSendDriver = 'Test'
       - MembershipExpiryDaysNotice = 30
    3. In "Notices and Slips" tool, edit the 'MEMBERSHIP_EXPIRY' letter and
       verify that both email and sms parts are filled. Use a different
       title and body for the sms part
    4. Create a new borrower with an email address and an SMS number. Set
       their expiry date to a date next week
    5. Run misc/cronjobs/membership_expiry.pl --confirm
    6. Verify in the patron "Notices" tab that two notices are pending, one
       for email, one for sms
    
    Sponsored-by: Médiathèque de Montauban
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 409891ed508972e06b868ca55cbe0bcddb3e3380
Author: Phil Ringnalda <phil@chetcolibrary.org>
Date:   Sat Mar 4 19:26:22 2023 -0800

    Bug 33138: Don't copy tag 147 to authority MARC frameworks
    
    We shouldn't be including tag 147 in every authority MARC framework we
    install, since like all 1xx authority tags there should only be
    one per record. It only belongs in a NAME_EVENT framework, which we
    don't install.
    
    Test plan:
    
    1. Apply patch, kd && ku or however you like to restart
    2. Administration - Authority types - Actions button for Default
       - MARC structure
    3. In the search box below the text "Select an authority framework"
       enter 147 and click OK
    4. Once you see that it exists in Default, switch the dropdown to
       each of the other frameworks and verify it doesn't appear in
       any.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 47b2b4f15a9f2355ddbb205afd6649eccd04334d
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Feb 14 08:51:13 2023 -0500

    Bug 32959: Don't store results of autobarcode in item editor templates
    
    Test Plan:
    1) Enable autobarcode
    2) Create a new item template, leave the barcode field blank
    3) Apply that item template
    4) Note the template prefills the barcode field
    5) Delete that item template
    6) Apply this patch
    7) Restart all the things!
    8) Repeat steps 2-4
    9) Note the barcode field remains empty!
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 219ad1d5d36ee2164d4c4ecfc4ed869fa59ed19e
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Apr 17 17:41:02 2023 +0000

    Bug 29993: Show Syndetics covers when using shelfbrowser controls
    
    1. Have items that include itemcallnumber.
    2. Enable OPACShelfBrowser.
    3. Enable SyndeticsCoverImages and SyndeticsEnabled.
    4. Go the an OPAC detail page and open the shelf browser.
    5. Use the Next/Previous buttons.
    6. Notice that no Syndetics images populate after using Next/Previous buttons.
    7. Apply patch and try again, cover images for Syndetics should be generating.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Rebased-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cfecda9b50dbe075a0789ad5f8afc51ecf01e13c
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun May 14 11:37:57 2023 +0000

    Bug 33246: Add some space between icon and text when there is only one result
    
    When there is only one result line, the text "Checked out" would
    show directly after the icon at the end of the title. This makes sure
    there will always be a little space between them.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bc905fe22c84c3138bcdf2685ed3cf6688fb8185
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 11 14:03:25 2023 +0200

    Bug 33246: Show the onloan status on the BarcodeFallbackSearch result
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b5f8c526577714e964b7a081b30b0b482f7f3cc5
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Mon Feb 20 10:26:29 2023 +0200

    Bug 33010: Do not filter checkins with logged in patrons branch in printslip.pl
    
    If one tries to print checkin slip for checkins that
    have been checked out from different branch, list
    of checkins is empty. One has to change their branch
    as checkout library to be able to print checkins.
    
    This happens because we filter (or rather search) patrons
    old checkouts with logged in patrons branch. This patch
    removes this search so that checkout are filtered using
    just filter_by_todays_checkins.
    
    To test:
    1. Checkout items for patron from branch A.
    2. Switch to branch B and checkin items.
    3. Print checkin slip.
    => Checkins list is empty.
    4. Switch back to branch A.
    5. Print checkin slip again.
    => Checkins are printed.
    6. Apply this patch, restart services if needed.
    7. Switch back to branch B and print checkin slip.
    => Checkins should now print.
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a40bd8d05d5d0dc5e789788808f05ce1697e6226
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri May 12 18:06:57 2023 +0000

    Bug 33713: Make batch operations from report results open in new tab
    
    To test:
    1. Have some reports that can do the following batch operations:
        -Batch patron mod
        -Batch item deletion
        -Batch add to list
        -Batch item mod
        -Batch record delection
        -Batch record mod
    
    2. Run the report ann click 'Batch operations with X visible records', make sure each batch op opens in a new tab.
    
    These two simple reports should allow you to test each of the batch cases:
    
    select * from items limit 1
    select * from borrowers limit 1
    
    Signed-off-by: Andrew  Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit af505c9117812d2ad4b078b613c666d1f2c9fbaf
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 5 12:51:19 2023 +0000

    Bug 33594: Only sort on title main heading
    
    This patch simply remvoes sort from all elements that are not strictly
    the main title
    
    Note:
    If multiple fields are set as sort, they are collapsed into a single entry in
    the {field}__sort field in the ES index. The order will be determined by the order in
    the marc record
    
    To test:
    1 - Apply patch
    2 - perl misc/search_tools/rebuild_elasticsearch -r -v
    3 - Search the catalog
    4 - Sort by title
    5 - Confirm records are correct
    6 - Add a 240 (before the 245) with subfield a 'AAAAA'
    7 - Confirm sorting is not affected
    8 - View record details, click 'Elasticsearch record: Show'
    9 - Find 'title__sort' and confirm it looks correct (does not include AAAAA)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7f1f0bc5b725f25e133e54478a23d269ebe6ff1a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu May 4 11:34:25 2023 +0000

    Bug 33594: Update mappings and comment
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d56b959fea1b2c267e73248e11953f7c7c2e04cf
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun May 14 11:19:07 2023 +0000

    Bug 33721: Fix display of shipping cost/fund on invoice summary page
    
    When viewing an invoice, the elements in the 'Fund' line were out of order:
    'Fund:' label, followed by 'Show inactive:' label, then the fund drop-down and then the show inactive checkbox.
    
    The order should be:
    'Fund:' label, fund drop-down, 'Show inactive:' label, show inactive checkbox.
    
    This copies the markup that is used when you click on "Receive shipment".
    It also changes 'Fund' to 'Shipping fund' to bring the forms even more in line.
    
    To recreate:
    1. In acquisitions, create an order and close the basket
    2. Click 'Receive shipment' and receive the order
    3. Click 'Finish receiving'
       --> The Fund line in invoice.tt is out of order
    4. Apply patch
    5. Verify the order is now fixed
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ec0ebda77db48e0fbe190df9a3d1969604bc229c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 10 12:19:13 2023 +0200

    Bug 33421: Fix filtering suggestions by status
    
    If the display is by status and a specific status is selected in the
    filter, the filter won't have any effects.
    
    Test plan:
    Create several suggestions, with different status, for different
    libraries.
    Use the "display by status" view and filter on a given status
    => Result must be relevant
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e40bc40c6f64ae6d1f8d9faa9562bef86ec78c80
Author: Thibaud Guillot <thibaud.guillot@biblibre.com>
Date:   Wed May 10 10:13:57 2023 +0200

    Bug 33686: Correction of existing terms related to 'Script of title'
    
    According to https://cdn.ifla.org/wp-content/uploads/U_B_100_update2022_online_final.pdf
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cd7ddd63253cfac1700e7b10d25c6b1b87b03062
Author: Thibaud Guillot <thibaud.guillot@biblibre.com>
Date:   Wed May 10 09:32:44 2023 +0200

    Bug 33686: Update plugin unimarc_field_100.pl with 2022 values
    
    According to https://cdn.ifla.org/wp-content/uploads/U_B_100_update2022_online_final.pdf
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9967e1e220848391c2f4464c962615eadaf3094a
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Apr 23 20:51:04 2023 +0000

    Bug 33314: Fix link into staff catalog and link text
    
    Both fixes concern the TICKET_NOTIFY message.
    
    * biblio-title.inc builds a link with the intention
      of using it inside the Koha GUI. Therefore the baseURL part
      is missing. But we can use it for display and wrap it into
      a link.
    * Changes second link from reading 'page' to 'concern management
      page'. Accessiblity guidelines teach us that you should not link
      general terms, but always be specific.
    
    To test:
    1. Make sure staffClientBaseURL is filled correctly
    2. Enable CatalogConcerns
    3. Enter an email address in CatalogerEmails
    4. Go to a bibliographic record in the staff interface or in the OPAC
    5. Click New > New catalog concern
    6. Fill out the form and click Submit
    7. Check the message_queue table for the message
    8. Verify the first link is not working (incomplete) and the second is 'page'
    9. Apply patch, drop db, create db and run web installer
    10. Repeat setup and testing
    11. Both links should now be updated and working
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 14b79299671341d3afbf9280937302262c09bbc3
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Apr 23 11:57:46 2023 +0000

    Bug 33313: Fix catalog links in TICKET_NOTIFY
    
    This fixes the system preference name from IntranetBaseURL to
    staffClientBaseURL.
    
    As this feature has just been pushed I chose to fix the
    database updates that will be run when installing 23.05.
    
    To test:
    * Verify the wrong link in TICKET_NOTIFY
    * Drop database, create database, run web installer
    * Verify the link is now correct in the notice
    
    Bonus: Test update from 22.11 to 23.05 and verify the
    notices are correct there as well.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d95312328dc83aa98728ac77ef55104ea820adfd
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu May 18 11:09:18 2023 +0000

    Bug 33761: Alter query to remove items with active transfers from available list
    
    Current code removes all items without an active transfer, and any with completed transfers.
    
    This patch moves the conditionals for transfers into the join, then adds a new
    condition to remove items with active transfers.
    
    To test:
    1 - Apply unit test patch only
    2 - prove -v t/db_dependent/HoldsQueue.t
    3 - It fails
    4 - Apply second patch
    5 - prove -v t/db_dependent/HoldsQueue.t
    6 - Success!
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 67e9356deab73d52fd5b3256b8bbbcd92ec61a34
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Aug 15 13:34:02 2022 +0000

    Bug 33761: Unit test
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3962d88139ea063d13397dc6b0c8f39f9a4f8f51
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 17 14:43:07 2023 -0300

    Bug 8179: Add vendor id on breadcrumb link
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 58757c5b9c9028ac343903850a26277671932b59
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 17 14:33:48 2023 -0300

    Bug 11844: Only display 'Additional fields' section if they are defined
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c87b1bba1b4cbf38aa47f77383c777e73e0a1ac0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 11 14:35:23 2023 +0200

    Bug 33624: Hide the "list" tab if authority is selected
    
    The "Select a list of records" should only be available for biblio
    records. But if the page is accessed using the back button of the
    browser it will be displayed for authorities as well.
    
    Test plan:
    - Make sure you have at least one template for MARC Modification
    - Also make sure you have at least one list of biblio records
    - navigate to Cataloging -> Batch record modification
    - Check the "Authorities" radio button
    - Select your template and continue
    - No records were modified -> use your browser's Back button to go back one page
    - The "Authorities" radio button should still be selected
    => Without this patch you see the tab "Select a list of records"
    => With this patch applied it's hidden when the page is loaded
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4ad0e757d8203bdeaaa8a6b084b8e2d7c9bf4efb
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon May 15 17:38:50 2023 +0000

    Bug 33735: Misspelling in SMS provier
    
    Correct spelling error: "provier" -> "provider"
    
    This change is a one-character edit, I think visual inspection of the
    patch is sufficient testing.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c69b7c69ca8adf543577aa0f817b1df8e9ef0648
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 17 09:59:44 2023 -0300

    Bug 33489: (QA follow-up) Add missing index prefix in DBRev
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3da43b850b01155bab0e277ac305241a28e89817
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 17 09:44:12 2023 -0300

    Bug 32450: DBRev 22.12.00.047
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d0c34a4ce3bd3ae92dd587c13b65e53874e5497e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Apr 19 12:21:55 2023 +0000

    Bug 32450: (QA follow-up) Fix SIP/Transaction.t
    
    You forgot this one, Matt. Comment29 :)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit af6ffc29fd1b3c53dd6bb6fe9fe4b0fc94066dde
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Apr 19 10:29:38 2023 +0000

    Bug 32450: (QA follow-up) Change wording in debit types table
    
    This patch changes confusing wording in the debit types table. Column heading No issues charge has been changed to Blocks checkouts? and the column data is now simply Yes/No rather than Included/Not included
    
    Test plan:
    1) Apply patch
    2) Navigate to debit types in administration
    3) The column in the table should exist as described above
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5a7624fe7d96b0647dd77952b56820f3d057b8a8
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Apr 19 10:27:59 2023 +0000

    Bug 32450: (QA follow-up) Fix failing tests
    
    This patch fixes the failing tests in t/db_dependent/SIP/Patron.t
    
    Test plan:
    Run prove -v t/db_dependent/SIP/Patron.t and all tests should pass
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8778974bf6514ec39cf7b55305571ee883569e64
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Apr 14 09:46:00 2023 +0000

    Bug 32450: (QA follow-up) Update UsageStats for removed prefs
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aaf79e3348bb8612587acdc77673c0da1e0cb906
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Apr 14 09:32:35 2023 +0000

    Bug 32450: (QA follow-up) Polishing atomic update
    
    Database comment.
    Variable names.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f8df1953c887bdedd1645a121b420e96e5bf9b67
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Mar 1 14:55:38 2023 +0000

    Bug 32450: (QA follow-up) Fix QA test errors
    
    Exec flag added to atomic update file, trailing whitespaces removed
    Unit tests patched to remove duplicate variable names
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aa1c14742829be92485d6db48d785fbede8182ec
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue Jan 10 16:32:40 2023 +0000

    Bug 32450: Add boolean to DBIC schema
    
    Adding boolean flag to DBIC schema. Test plan as per previous commits
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cb07be78c7d71700498d79b4f9072fd9857b7319
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue Jan 10 16:01:57 2023 +0000

    Bug 32450: Unit tests updated
    
    Unit tests for the non_issues_charges function have been updated to remove the system preferences and test based on the new database flags
    
    Test plan:
    1) Apply all patches
    2) In the kshell, run prove -v t/db_dependent/Accounts.t
    3) All tests should pass
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 355d7de9a58dd315f22accea60dfef19016597c3
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Jan 6 13:51:00 2023 +0000

    Bug 32450: Noissuescharge debit type exclusions
    
    Currently the debit types to be excluded from the noissuescharge syspref are
    hardcoded in non_issues_charges which gives no flexibility for selecting which
    debit types should be included. This patch amends the subroutine to use a
    database flag to identify which debit types should be included. It also adds a
    column to the table in the Debit Types area of System Preferences which shows
    which debit types are included. The ability to edit all debit types has been
    added rather than just the non-system ones and the flag to include/exclude the
    debit type from noissuescharge can be changed by clicking that edit button.
    
    Test plan:
    1) Choose a patron and add some fines to this patron that have different debit_types
    2) Navigate to system preferences and observe that currently you can only amend
       the noissuescharge included debit types using three preferences:
       ManInvInNoissuesCharge, RentalsInNoissuesCharge, HoldsInNoissuesCharge
    3) Apply both commits attached to this bug
    4) Navigate as above and observe that these three system preferences are now gone
    5) Navigate to Debit Types in System Preferences, the table should have a column
       called No issues charge that shows whether a debit_type is Included or Not
       included
    6) Click the edit button and there should be a checkbox for Included in
       noissuescharge
    7) Change some of the debit_types using this option and observe that the patron
       you added fines to will either be blocked from checkouts or able to checkout
       depending on which debit_types you include and the value of these fines.
    
    Mentored-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0866ecc4f9f8086de71225d3ceb945462e998560
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jan 10 14:49:50 2023 +0000

    Bug 32450: DBIC Schema
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8c6da2a2c994aa695b875d557e2628e91491bd7f
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Jan 6 13:52:32 2023 +0000

    Bug 32450: Update db to add noissuescharge flag and remove sysprefs
    
    This commit updates the database to add a new flag to show which debit_types are
    included in noissuescharge. It also deletes the current sysprefs that are
    hardcoded for this as these are now redundant.
    
    Test plan:
    1) Choose a patron and add some fines to this patron that have different debit_types
    2) Navigate to system preferences and observe that currently you can only amend the
       noissuescharge included debit types using three preferences: ManInvInNoissuesCharge,
       RentalsInNoissuesCharge, HoldsInNoissuesCharge
    3) Apply both commits attached to this bug
    4) Navigate as above and observe that these three system preferences are now gone
    5) Navigate to Debit Types in System Preferences, the table should have a column
       called No issues charge that shows whether a debit_type is Included or Not included
    6) Click the edit button and there should be a checkbox for Included in noissuescharge
    7) Change some of the debit_types using this option and observe that the patron you
       added fines to will either be blocked from checkouts or able to checkout depending
       on which debit_types you include and the value of these fines.
    
    Mentored-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f4610959094956f63d9c117715d728f7982ace1d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 17 14:24:00 2023 +0200

    Bug 33625: Tidy remaining cypress test files
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 393de82fc42a2457f6141a9c9dfac8b7996965be
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 17 14:23:13 2023 +0200

    Bug 33625: Adjust test to deal with cypress tests
    
    Cypress test files were ignored.
    This patch also deals with files in git index only.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0985e975894a82c1aa675a21f6bd70d146a11241
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Apr 16 14:01:10 2023 +0000

    Bug 33541: Add document type to list of suggestions when ordering
    
    This adds the document type (suggestions.itemtype) to the list
    of accepted suggestions when creating an order from a suggestion.
    
    To test:
    * Add some suggestions and make sure to pick different document types.
    * Accept those suggestions in the staff interface.
    * Go to acquisitions
    * Create a basket
    * Add an 'order from a suggestion'
    * Verify that the list shows the 'document type' nicely and correctly
    * Order one, all good? sign off.
    
    Signed-off-by: Juliet <jheltibridle@rcplib.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Removed IS_OPAC param from AuthorisedValues.GetByCode
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 30475943d7e329475d24be374da0fdbd44c7eadb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 9 12:04:33 2023 +0200

    Bug 33607: Handle default framework
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 631af0c4056428c7ce0c16340c396720d37cc974
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 25 14:14:19 2023 +0000

    Bug 33607: Add framework display to staff details page
    
    This patch adds a Frameworks pluing to allow fetching the framework text
    and displays this on the intranet details page
    
    To test:
    1 - Apply patch
    2 - View a record details page in staff
    3 - Confirm you see the framework name
    4 - prove -v t/db_dependent/Template/Plugin/Frameworks.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c121cfae71478e91ada582fecf8a63d882c40b1e
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue May 9 21:06:44 2023 +0000

    Bug 33550: (QA follow-up) Switch from double to single quotes in text
    
    As we use single quotes in general and also in breadcrumbs and page
    title on this specific page, we shoudl also use them for the main
    content:
    
    Are you sure you want to delete 'T'?
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=33500
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 76b755be9d1b75fdb298ca5b908a0a5b045051d6
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Thu Apr 27 15:19:21 2023 -0400

    Bug 33550: Remove question mark in breadcrumb
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=33500
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fcc06b55a55a21c5e917d607ecf04865deffd835
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Thu Apr 27 15:15:18 2023 -0400

    Bug 33550: Remove period in patron restriction type description
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=33500
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b7d65f5cdd1410a01a727959129d92feab24b4c3
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Tue Apr 25 17:46:56 2023 -0400

    Bug 33550: (follow-up) Rename Patron restrictions administration page to Patron restriction types)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=33500
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8498c9038bbb35cb94bf97caf9b6ed01cc1bb77a
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Mon Apr 17 16:58:06 2023 -0400

    Bug 33550: Rename Patron restrictions administration page to Patron restriction types
    
    This patch renames 'Patron restriction' to 'Patron restriction type' in the context of custom restriction type administration.
    
    To test:
    0. Apply patch
    1. Enable PatronRestrictionTypes
    2. Go to Administration
    3. Check the name, spelling/grammar of the following elements
       * Section name
       * Section caption
    4. Click 'Patron restriction types'
    5. Check the name, spelling/grammar of the following elements
       * Title of the page (in the browser tab)
       * Breadcrumb
       * Left hand side menu
       * 'New' button
       * Page heading
    6. Click 'New restriction type'
    7. Check the name, spelling/grammar of the following elements
       * Title of the page (in the browser tab)
       * Breadcrumb
       * Page heading
    8. Fill out the form and click 'Save' to create a new restriction type
       * Dialog message ('Restriction type added')
    9. Click 'New restriction type'
    10. Enter the same code as last time
        * Warning ('Restriction type code is already in use')
    11. Click 'Cancel'
    12. Click 'Edit' next to one of the types
    13. Check the name, spelling/grammar of the following elements
        * Title of the page (in the browser tab)
        * Breadcrumb
        * Page heading
    14. Without changing anything, click 'Save'
        * Warning ('Restriction type label is already in use')
    15. Change the label and click 'Save'
        * Dialog message ('Restriction type updated')
    16. Click 'Delete' next to one of the types
    17. Check the name, spelling/grammar of the following elements
        * Title of the page (in the browser tab)
        * Breadcrumb
        * Page heading
        * Delete button
    18. Click 'Delete this restriction type'
        * Dialog message ('Restriction type deleted')
    
    Signed-off-by: Marius Mandrescu <marius.mandrescu@inLibro.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=33500
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 72a2da381fd1361db51d5ae1bea64fd7263184fc
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 10 18:02:35 2023 +0100

    Bug 33223: Fix sendshelf
    
    Two new occurences of first_valid crept in, this patch corrects those to
    also use notice_
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f733910f2662eb6451a0c56672dbc3fa121305b1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Mar 14 15:07:46 2023 +0000

    Bug 33223: Replace 'first_valid' with 'notice' for email addresses
    
    This patch replaces the uses of first_valid_email_address with
    notice_email_address in waiting_holds, transferstoreceive, clubs and
    sendbasket so that we take EmailFieldPrimary into account for these
    notices too.
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 878b0d0e0f08939e8e5a77e07c838bc6cd8c1c6d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon May 15 11:43:04 2023 +0000

    Bug 33553: Remove unecessary GetCategories calls in templates
    
    This patch removes unnecessary references to
    AuthorisedValues.GetCategories:
    
    SET AuthorisedValuesCategories = AuthorisedValues.GetCategories
    
    The AuthorisedValuesCategories variable is not used.
    
    To test, apply the patch and go to Tools -> Patron clubs.
    
    - If necessary, create a club template with "Allow public enrollment"
      enabled.
    - Create a new club. The club creation process should work correctly.
    - Open a patron account for checkout and confirm that you can enroll the
      patron in the new club via the "Clubs" tab.
    - Log in to the OPAC and confirm that you can successfully enroll
      yourself in the new club via the "Clubs" tab on your patron summary
      page.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 50f387876e56f84a85e498cf7d78c8c423d87895
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Apr 24 11:25:21 2023 +0000

    Bug 33599: Use template wrapper for breadcrumbs: Various
    
    This patch updates various templates so that they use the new WRAPPER
    for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - ILL requests
      - New ill request
      - Manage ill request
    - Bibliographic record ->
      - Place hold
      - Place multiple holds
    - Tools ->
      - Comments awaiting moderation
      - Approved comments
    - Suggestions
      - New suggestion
      - View suggestion
      - Edit suggestion
    - Lists
      - Public Lists
      - Private lists
      - New list
      - Edit list
      - Transfer list
      - View list contents
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit baa3f81b8d43d86388232eb4bb1b9c269ed47923
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Apr 25 15:07:29 2023 +0000

    Bug 32914: (follow-up) Improve handling of list tab visibility
    
    This patch makes minor changes to the way this page handles switching
    between authority and bibliographic record batch operation in order to
    ensure that the list tab is correctly shown or hidden and that the list
    tab selection isn't transmitted when an authority batch is submitted.
    
    This patch also changes the labels on the "record type" fields to fix
    the incorrect use of the abbreviated "biblios" in favor of
    "Bibliographic."
    
    To test, apply the patch and go to Cataloging -> Batch record
    modification
    
    - With the "Bibliographic records" selected, click the "Select a list
      of records" tab."
    - Select the "Authority records" radio button.
    - The "Select a list of records" tab should disappear, and the "Upload a
      file" tab should now be selected."
    - Select the "Bibliographic records radio button.
    - The "Select a list of records" tab should reappear, and the "Upload a
      file" tab should be selected.
    - Test all combinations of form submissions to confirm that each works
      correctly:
      - Bibliographic records by upload, list, and biblionumber entry
      - Authory records by upload and authority record number entry
    
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3c2eb1da53dcdb6eeb5f85da2716da9b6ec022e4
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Feb 8 17:46:16 2023 +0000

    Bug 32914: Use template wrapper for batch record deletion and modification templates
    
    This patch updates the batch record modification and batch record
    deletion templates to replace tab markup with the use of WRAPPERs.
    
    This patch adds a "clearfix" snippet of CSS to _mixins.scss copied from
    Bootstrap. Applied to the active tab pane, this helps in situations
    where Bootstrap tabs follow a floated element.
    
    The patch also wraps tab label strings in <span> to ensure they can be
    translated.
    
    Unrelated: The patch removes an extra </option> from the batch record
    modification template.
    
    To test you should have at least one list and at least one MARC
    modification template defined.
    
    - Apply the patch and go to Cataloging -> Batch record modification
    - You should see three tabs, "Upload a file," "Select a list of
      records," and "Enter a list of record numbers."
    - The tabs should look correct and work correctly.
    - Checking the "Authorities" radio button should hide the lists tab.
    - Test that submissions from each form work correctly.
    
    - Go to Cataloging -> Batch record deletion and perform the same tests.
    
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8b1a5e34a7a441ac4783f22a7bfd0655fa302200
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue May 9 16:41:18 2023 +0000

    Bug 33158: (follow-up) Fix for QA test failure
    
    The page seems to work fine without these changes but the QA test script
    is happier with "USE raw" and html_helpers.inc added.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 49c64f3d278030b119106e30c4684d8b0d6c21c1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Mar 6 18:54:22 2023 +0000

    Bug 33158: Use template wrapper for authorized values and item types administration tabs
    
    This patch updates the authorized values and item types administration
    templates so that they use the new WRAPPER directive to build tabbed
    navigation.
    
    Seeing that the markup in itemtypes.tt and authorised_values.tt is
    indential when it comes to icon selection, I have moved that section of
    the template into an include file and updated both templates to use it.
    
    The patch also makes minor SCSS changes, so to test you must rebuild the
    staff interface CSS.
    
    To test, apply the patch and go to Administration -> Item types.
    
    - Edit an item type.
    - On the edit page you should see tabs under "Choose an icon."
    - Confirm that the tabs look correct and work correctly.
    - If you did not previously have any icon selected, the "None" tab
      should be active.
    - If you had an icon selected, that icon set's tab should be active.
    - Confirm that if you specify a remote image
      (e.g.https://via.placeholder.com/50/FF0000/FFFFFF.png) the tab is
      correctly shown after you save and re-edit.
    - Confirm that changing icons works correctly and that the selected
      icon's tab is always active when you return to the edit view.
    
    Perform the same tests in Administration -> Authorized values.
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b43935402632e5c4ec82b154aef146ac944c6bbb
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Mar 14 04:19:31 2023 +0000

    Bug 33220: Fix recalls to pull to not show in transit or allocated items
    
    This patch fixes the Recalls to pull circulation report so that it does
    not show items that are already allocated to another recall.
    
    This requires the UseRecalls system preference to be enabled and recalls
    circulation and fines rules to be configured.
    
    To test:
    1. Cancel any recalls on Item A/Biblio A.
    2. Check out Item A to Patron A. Item A should be the only item on Biblio A (pick a record with only one item, or create a record with one item).
    2. Log into the OPAC as Patron B.
    3. Place a recall on Item A for Patron B. Change the pickup library so
    it isn't your default library.
    4. Log into the OPAC as Patron C.
    5. Place a recall on Item A for Patron C. Item A should now be checked out to Patron A, with two recalls on it for Patrons B and C.
    6. Log back into the staff interface.
    7. Check in Item A. Confirm the recall and transfer for Patron B.
    8. Go to Circulation -> Recalls to pull. Notice the recall for Patron C shows here, even though the one item that could fill this recall has already been allocated to Patron B and is in transit
    9. Apply the patch and restart services
    10. Refresh the Recalls to pull page
    11. Confirm the recall no longer shows on the Recalls to pull page -->
    SUCCESS
    12. Go to Biblio A and add a second item - Item B
    13. Go back to Recalls to pull and refresh the page
    14. Confirm the recall for Patron C now shows and can be filled by Item
    B
    
    Sponsored-by: Auckland University of Technology
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4e7dfa2fbacda38de4814fa3768c9eb6b0d481af
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Mon Mar 27 03:17:16 2023 +0000

    Bug 33340: Correct formatting of English 1-page order PDF when it covers multiple pages
    
    If a basket group contains many ordered items then this patchset will
    ensure:
     - The page number at the bottom of the first page is not obscured
     - The table of ordered items does not start half way down the second
     page
    
    Test plan:
    
    1) Go to Koha Administration -> Libraries. Ensure Library A has an
    address, phone and fax.
    2) Go to Koha Administration -> System preferences. Search for
    OrderPdfFormat. Set this to English 1-page layout option.
    3) Go to Acquisitions. Use an existing vendor or create a new one.
    Ensure the vendor has a postal address, phone, fax and accout number.
    4) Create a basket for this vendor. Add many orders to this basket, for
    example 25 items (this is to make the Order PDF cover multiple pages).
    5) Close the basket and add it to a basket group of the same name.
    6) Edit the basket group. Add an address in the delivery place, and a
    delivery comment. Check the box to close the basket group and Save.
    7) Click the button to Export as PDF.
    8) View the exported PDF. Confirm the PDF is multiple pages long. If it
    is not then re-open the basketgroup and add more orders to the basket
    and repeat steps 5, 6, 7 and 8
    9) If the PDF is multiple pages long then confirm:
    - The page numbers at the bottom of the first page are not obscured by
    the order table.
    - That the order table starts near the top of the second page, and not
    half way down.
    10) Reopen the basketgroup. Edit the details and remove the delivery
    place text. Re-close the basketgroup.
    10) Repeat steps 7 and 8.
    
    Sponsored-by: Pymble Ladies' College
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 50e4ea75697830ae5f553da74807f4779393b5e0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue May 16 14:42:09 2023 -0300

    Bug 30358: DBRev 22.12.00.046
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 39b17d0526081d32d07039d067018ec374614df2
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Fri Mar 25 03:12:31 2022 +0000

    Bug 30358: Strip leading/trailing whitespace characters from input fields when cataloguing
    
    This enhancement adds a system preference StripWhitespaceChars which,
    when enabled, will strip leading and trailing whitespace characters from
    all fields when cataloguing both bibliographic records and authority
    records. Whitespace characters that will be stripped are:
    - spaces
    - newlines
    - carriage returns
    - tabs
    
    To test:
    1. Apply patch and install database updates
    2. Go to Administration, system preferences, find the new
    StripWhitespaceChars preference. It should be "Don't strip" by default.
    Change it to "Strip".
    3. Search for a biblio record and edit it. Put some leading or trailing
    whitespace characters in input fields and textarea fields and save.
    4. Confirm these characters are removed when you save the record.
    5. Repeat steps 3 and 4 for authority records.
    6. Confirm tests pass t/db_dependent/Biblio/ModBiblioMarc.t
    
    Sponsored-by: Educational Services Australia SCIS
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Bug 30358: (follow-up) Also strip inner newlines
    
    This patch amends the StripWhitespaceChars system preference to also
    strip inner newlines (line breaks and carriage returns) when enabled.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Bug 30358: (follow-up) Inner newlines should be replaced with a space
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Bug 30358: (follow-up) Fixing tests and including for inner newlines
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Bug 30358: (follow-up) Clarify syspref wording about fields affected
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Bug 30358: (follow-up) Consider field has multiple subfields of same key
    
    To test:
    
    1) Click the clone subfield button to make multiple subfields with the
    same key, i.e. 500$a$a$a
    2) Save the record and confirm that the fields contain the correct data
    after whitespaces are stripped.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Bug 30358: (follow-up) Put multiple subfields fix on auth side
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Bug 30358: (follow-up) stripWhitespaceChars subroutine and tests
    
    To test:
    
    Confirm test plan above still works as expected and tests pass in
    t/Koha_MetadataRecord.t
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Bug 30358: (follow-up) Fixing ModBiblioMarc.t tests
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Bug 30358: (follow-up) Do not strip whitespace from control fields
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Bug 30358: (follow-up) Simplify regex
    
    The regex does the following:
    1. Replace newlines and carriage returns with a space
    2. Replace leading and trailing whitespace with nothing (strip)
    
    Signed-off-by: Hammat Wele <hammat.wele@inlibro.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9633c0a7ded398e5ee57faa4fe03b3986c91390f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue May 16 14:23:35 2023 -0300

    Bug 33297: DBRev 22.12.00.045
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0fdd8ca72edb3c58953ee5dd63956de184a860d9
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Mar 22 21:09:35 2023 -1000

    Bug 33297: (follow-up) DBRev check wrong preference exists
    
    Better db upgrade messages
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 72d88cab9e4538addd0d7e82b78b17fd2815578c
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Mar 21 22:30:21 2023 -1000

    Bug 33297: (follow-up) DBRev for existing databases
    
    Test plan :
    1.1) Start from a Koha 22.05
    1.2) Upgrade to master
    => Check the upgrade says :
       Wrong system preference 'RetainPatronSearchTerms' renamed 'RetainPatronsSearchTerms'
    2.1) Start from a Koha 22.05
    2.2) Upgrade to 22.11
    2.3) Via interface change system preference 'RetainPatronsSearchTerms' and save
    2.4) Upgrade to master
    => Check the upgrade says :
       Wrong system preference 'RetainPatronSearchTerms' deleted
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c5bf76b19eb0e0264c13f08dc7abe14f02feb41c
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Mar 21 22:04:09 2023 -1000

    Bug 33297: Fix typo system preference RetainPatronSearchTerms in DB revs 220600044.pl
    
    Bug 26247 added system preference RetainPatronsSearchTerms.
    There is a typo in DB revs 220600044.pl : RetainPatronSearchTerms instead of RetainPatronsSearchTerms.
    
    Test plan :
    Upgrade from 22.05 to 22.11 and check there is a system preference named 'RetainPatronsSearchTerms'
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 14455120351276a5b209b8777cec1f7913b84d31
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Apr 22 13:43:29 2023 +0000

    Bug 33365: (QA follow-up) Add check on item-level_itypes
    
    With biblio level itemtypes you won't have any on the
    item type level, so I feel like it will make sense
    to hide the column here like we do in other spots.
    
    To test:
    * pref at specific item = itemtype column shows
    * pref at biblio level = no itemtype column
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fee8373410ad9488b6d818737b0bb571dc37a7f1
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Mar 29 22:58:34 2023 +0000

    Bug 33365: Add item type column to cn_browser results
    
    To test:
    1. Go to MARC bibliographic framework, pick a framework and go to 952, subfield "o". Turn the cn_browser plugin on.
    2. Pick or create an item in that framework, edit that item.
    3. TO the right of the 952$o notice the "...". Click that start the call number browser.
    4. Notice there is no column for item type.
    5. Apply patch, restart_all
    6. Notice there is now a column for item type.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c0511a5af3b3df31fcebb08c49e616f20d22a2e8
Author: Adam Styles <adam.styles@esa.edu.au>
Date:   Tue Mar 14 01:27:32 2023 +0000

    Bug 33190: Add search history button to advance search form if EnableSearchHistory keep
    
    Add 'search history' button to advanced search button groups if 'EnableSearchHistory' sys pref is set to 'keep' via added code block to advsearch.tt
    
    To test:
    1) Login to Koha dev box instance
    2) Select 'Advanced search module' '/cgi-bin/koha/catalogue/search.pl' 'Search history' icon will not be visible in tools groups in form.
    3) Select 'koha administration' module '/cgi-bin/koha/admin/admin-home.pl'
    4) Enter 'EnableSearchHistory' string into top search field
    5) Change ' EnableSearchHistory' value to 'keep'
    6) Press 'Save all Searching preferences' to save pref changes
    7) Navigate back to Koha landing home '/cgi-bin/koha/mainpage.pl'
    8) Select 'Advanced search module' '/cgi-bin/koha/catalogue/search.pl'
    9) 'Search history' icon will now be visible in tools groups in form
    10) SIGN OFF
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8c663b9df37863d3170e89e2309dee3d600d1901
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Mar 1 01:02:01 2023 +0000

    Bug 33098: Revert suggestion status when orders are cancelled
    
    This enhancement will revert the status of a suggestion from ORDERED to
    ACCEPTED when an order made from a suggestion is cancelled.
    
    To test:
    1. Log into the OPAC and go to purchase suggestions
    2. Add a new purchase suggestion
    3. Log into the staff interface. The suggestion will show on the home
    page
    4. Select the suggestion and mark it as Accepted
    5. Go to Acquisitions. Find or create a basket
    6. Add an order to the basket from a suggestion
    7. You'll be redirected to the suggestions page. Click the order button
    next to your suggestion
    8. Fill out the order details as normal and confirm the order.
    9. In a new tab, go to the suggestions management page and confirm the
    suggestion now shows as ORDERED.
    10. In the other tab with your basket, cancel the order you just made
    from the suggestion.
    11. Refresh the suggestions management tab. Confirm the suggestion now
    shows as ACCEPTED.
    12. Confirm tests pass t/db_dependent/Koha/Acquisition/Order.t
    
    Sponsored-by: Waikato Institute of Technology
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dedbbe6a06531b7bce34d7e06997dac59dde4b56
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Mar 30 07:54:51 2023 +0000

    Bug 32970: (follow-up) Move include to specific job file
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 872006005deaf327f698ce33935a5f91bd70b5c9
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Feb 15 15:30:04 2023 +0000

    Bug 32970: Use KohaTable for display of batch item modification results
    
    This patch updates the code to use KohaTables to provide export of the
    batch modification results.
    
    Additionally, searching is added, and the first two columns are made
    searchable
    
    To test:
    1 - Perform a match item modification on several items
    2 - View the results of the background job
    3 - Apply patch
    4 - Reload page
    5 - Note you now have additional controls including 'search' and
      'export'
    6 - Test searching and exporting
    7 - Confirm all work as expected
    
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 52d510b1e6517d0920da6c3b44977d6564154e46
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue May 16 09:17:27 2023 -0300

    Bug 11844: DBRev 22.12.00.044
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 78984024c81b5a2237be2f3031e088f71c7c4b68
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon May 15 20:54:41 2023 +0000

    Bug 11844: (follow-up) Fix tests
    
    Moves the test from 999 which already exists in record to 998
    as the feature only matches on the first field.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit a6238aa8166887a9c73d3228cadb792e3400f2d5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon May 15 14:37:16 2023 -0300

    Bug 11844: DBIC schema
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 95421d06111457c7c28fd16b411e1cbc7e613883
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Mar 29 10:47:24 2023 +0200

    Bug 11844: Add tests
    
    Tests added for:
    
    - Koha::AdditionalField
    - TransferOrder
    - marcfield_mode
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit d880e7d8a149b81dcbd73fa07432c91544b1b038
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Feb 10 16:39:12 2023 +0000

    Bug 11844: (follow-up) Add format hint to the additional fields admin page
    
    The MARC field needs to be added with a $ between field and subfield
    for things to work right. So this adds a hint about the expected format.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 64a943304d4b2f33204d8e3d75079475d12798aa
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Feb 10 16:24:59 2023 +0000

    Bug 11844: (follow-up) Add new option to acq navigation
    
    The navigation on the left in the acq module has links to
    the additional fields for baskets and invoices. This also
    adds a link for the new order lines feature.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 38b38d3a22973f5daf8ec2cce3f7f6dddb4b5d1c
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Feb 10 16:11:54 2023 +0000

    Bug 11844: (follow-up) Add standard note to database update
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 6d81cc6f997ff0c484fb019ff7321ab9665ccbee
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Feb 10 16:10:46 2023 +0000

    Bug 11844: (follow-up) Fix terminology: biblio should be bibliographic record
    
    This is about the note displaying after an additional field
    that is linked to a MARC field.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 108cebeea1597d3dba91553b64f83fa21e4b109b
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Jan 20 17:29:40 2023 +0100

    Bug 11844: Fix QA issues (POD, TT filters, file exec flag)
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 7be92fb26e0b84b8ff07eb6f66ab9f0c1a114f65
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Jan 20 17:12:21 2023 +0100

    Bug 11844: Take into account itemtypes, branches, and cn_source
    
    MARC subfields can be linked to "authorised values" that are not real
    authorised values: itemtypes, branches, and cn_source.
    Those were not taken into account. This patch fixes that
    
    Test plan:
    1. Create additional fields for order lines with a MARC subfield that is
       linked to one of those "fake" authorised values list
    2. Follow the same steps as in the main test plan
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit b997250026b113e7111d11a6b050b6fb0557eda0
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Feb 5 11:12:21 2014 +0100

    Bug 11844: Use additional fields for order lines
    
    This patch allows to create additional fields for order lines.
    Once created, these fields can be filled during order line creation or
    modification.
    
    If additional field is linked to a MARC field, there are two possible
    scenario:
    - MARC field mode = get: The field cannot be modified and its value is
      retrieved from the bibliographic record (current behaviour)
    - MARC field mode = set: The field can be modified and its value is
      saved to the bibliographic record (new behaviour)
    
    If additional field is linked to an authorised value category, then
    authorised values are used. If not directly linked to an authorised
    value category, but linked to a MARC field, a search for an AV category
    is made on MARC default framework.
    
    This patch doesn't display additional fields value anywhere (except in
    order line creation/modification). Future patches will do that.
    
    Test plan:
    1/ Go to Acquisitions home
    2/ In the left menu, click on "Add order line fields"
    3/ Click on "New field" button
    4/ Give the field a name (unique), no AV category and no MARC field.
    5/ Save.
    6/ Create 5 other fields:
       a/ no AV category, a MARC field not linked to AV category, MARC field
          mode = get
       b/ no AV category, a MARC field not linked to AV category, MARC field
          mode = set
       c/ no AV category, a MARC field linked to AV category, MARC field
          mode = get
       d/ no AV category, a MARC field linked to AV category, MARC field
          mode = set
       e/ an AV category, no MARC field
    7/ Create everything you need to be able to create order lines
       (supplier, basket, ...)
    8/ Create an order line. At bottom of the page, you should see your
       additional fields, with authorised values dropdrown list for fields
       (c), (d) and (e). Fields (a) and (c) should be disabled.
    9/ Fill these fields with some data and save order line
    10/ check that data was correctly saved into biblio for fields (b) and
        (d), but not for (a) and (c)
    11/ modify the same order line, check that values you've filled are
        correctly retrieved and that values for (a) and (c) were correctly
        retrieved from the bibliographic record
    12/ modify all values, save, and check biblio once again
    
    Signed-off-by: Harold Dramer <harold.dramer@nyls.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 09c0c2c87669854bdf0735d1e1b73d220d6ecb87
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 16 12:52:22 2023 +0200

    Bug 33743: Make xt/find-missing-filters.t and xt/single_quotes.t check directories in git index only
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit f1b75d49bbd1d2820844c2ddbdae16f478e34766
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu May 11 09:19:41 2023 +0000

    Bug 33719: Silence warnings on ContentWarningField in Search.t
    
    Test plan:
    Run t/db_dependent/Search.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 4eeac8a18dec977fdb66aabb9b580c248408ea73
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon May 15 07:13:06 2023 +0000

    Bug 33733: Move to db_dependent
    
    The subtest is added to the existing db_dependent test.
    
    Test plan:
    Run t/db_dependent/XSLT.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit c136215e58c02ba9eeaf1b38e48b5c5f78e4e7ca
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon May 15 07:05:28 2023 +0000

    Bug 33733: Fix indentation in subtest
    
    Test plan:
    git diff -w HEAD~1.. t/XSLT.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 42e96a8622ac206e903339f5a4c83bddc035cd6d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon May 15 06:58:45 2023 +0000

    Bug 33733: Remove need for Test::DBIx::Class
    
    Test plan:
    Run t/XSLT.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit b28d329d8a403f120757c06818906b3940098b99
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 10 11:54:33 2023 +0000

    Bug 33707: News vs Quote of the day styling on staff interface main page
    
    This patch makes minor adjustments to the global and staff home page CSS
    so that the display of news and quote-of-the-day are more consistent.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    - If necessary, add at least one news item (Tools -> News -> New entry)
      and at least one quote (Tools -> Quote editor -> New quote).
    - View the staff interface home page to confirm that the style of the
      news area and the quotes is consistent.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 50d3c3c0a8328d6cd5529bcaa1444ab93ab1fb7e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu May 11 12:52:23 2023 +0000

    Bug 33718: Fix the mock of Koha::Config->get in mock_config
    
    It should not mock calls for other sections than 'config' in
    koha-conf.xml.
    
    Test plan:
    Without this patch:
    [1] Enable AutoLinkBiblios, CatalogModuleRelink and LinkerRelink.
    This will trigger a SearchAuthorities call when creating a sample biblio.
    Note: SearchAuthorities calls Zconn and gets back information from
    a wrong part of koha-conf.xml.
    [2] Run t/db_dependent/Koha/Pseudonymization.t
    You should see something like:
      {UNKNOWN}: Can't use string ("authorities") as a HASH ref while "strict refs" in use at /usr/share/koha/C4/Context.pm line 587. at /usr/share/koha/C4/Biblio.pm line 302
    
    With this patch:
    [3] Run t/db_dependent/Koha/Pseudonymization.t. Should pass now.
    [4] git grep -l mock_config | xargs -i{} prove {}
        Exclude Mocks.pm.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>

commit 45d99e7a0b5769dcfb763884cf2bbc3302dcf111
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 11 12:05:04 2023 +0200

    Bug 33595: (bug 26628 follow-up) Fix authorization for tools-home.pl
    
    If you log into the OPAC as a user with no flags, you can see a restricted view of
    /cgi-bin/koha/tools/tools-home.pl instead of seeing the login screen.
    
    Test plan:
    Use a patron with catalogue permission only
    Login and access the tools home page
    => redirected to the login screen
    
    Add a club sub permission
    Login and access the tools home page
    => You see the tools home page with the clubs link
    
    Add a tool sub permission, remove club
    Login and access the tools home page
    => You see the tools home page with the relevant link
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>

commit 8eeaa1f714b211d6769b80b2b3096cd417271de4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 10 06:32:55 2023 +0200

    Bug 33705: (bug 33066 follow-up) Fix 'configure' button for kohaTable
    
    The 'configure' button is displayed for any tables, even those that
    cannot be configured.
    
    This is a regression caused by
      commit 765fd1ced3b9efc4ff6fb71e2fee1a7a227d1cae
      Bug 33066: Introduce a KohaTable Vue component
    
    It's adding a default value for table_settings, but then later we are
    testing if table_settings is true:
    699     let table_settings = params.table_settings || {};
    ...
    798     if ( table_settings && CAN_user_parameters_manage_column_config ) {
    
    This patch is reverting the default value, so the test will be
    corrected.
    
    Test plan:
    1. Go to Tools > Quote editor
    2. Click "Configure"
    => Without this patch you are brought to the column settings page, but the quote editor table is not there
    => With this patch the button is not present
    3. Go to the cities page (admin/cities.pl)
    4. Click "Configure"
    => You are brought to the column settings page
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>

commit 1139972748b14e07e6b41539cda888dde20b3159
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 2 10:32:37 2023 +0200

    Bug 33625: Pretty .js files for vue
    
    Test plan:
    = Koha =
    Apply the first patch, prove xt/vue_tidy.t and notice the failure
    Apply this patch, now it passes
    
    = QA test =
    Apply the change to the merge request linked with this qa-test-tools' issue:
    https://gitlab.com/koha-community/qa-test-tools/-/issues/62
    inside your ktd container (at /kohadevbox/qa-test-tools/)
    Edit a .js within koha-tmpl/intranet-tmpl/prog/js/vue and a .ts file
    (cypress test) with something not pretty
    Commit and run the QA script
    => It's failing!
    Pretty the change, commit again, run the QA script
    => It's happy!
    
    = KTD - git hook =
    Go to the merge request linked with this ktd's issue:
    https://gitlab.com/koha-community/koha-testing-docker/-/issues/374
    Copy the modified git hook to .git/hooks/ktd/pre-commit
    Edit a .js within koha-tmpl/intranet-tmpl/prog/js/vue and a .ts file
    (cypress test) with something not pretty
    Commit
    => Notice that the commit content is pretty!
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 0192bb0cb8d749913962cf47e6ade3ecb0b4f6c9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 2 10:32:11 2023 +0200

    Bug 33625: Add test
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 25f8581c0d98706047d282e46122821be738d969
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon May 15 12:07:09 2023 -0300

    Bug 33739: Only trigger indexing on last item modification at ModItemTransfer
    
    This patch makes ModItemTransfer trigger record indexing only on the
    last call (in $transfer->transit). And extra parameter is added to
    ->transit to effectively honour the ModItemTransfer parameter.
    
    I wanted to mention that bug 31212 highlighted an existing issue, not
    catched by the current tests before its inclussion, because of the DT truncation
    taking place.
    
    To test:
    1. Run:
       $ ktd --shell
      k$ prove t/db_dependent/Koha/SearchEngine/Indexer.t
    => FAIL: Indexing is requested twice, should only be once
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: Tests pass! Indexing is requested only once!
    4. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 434a73b0e6f57b06370e56ccdc7999a6d7d951db
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 15 17:16:20 2023 +0200

    Bug 32648: Clear cache in Filter_MARC_ViewPolicy.t
    
    Search.t is failing if run after Filter_MARC_ViewPolicy.t because of a
    missing flush
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit cf5fd245c090ab1d9e5e225e5c8822d14152d01e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 16 09:59:08 2023 +0200

    Bug 8179: Remove ref to select.dataTables.min.css
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 9b0deefe5ee703bb073c731bad3911424a493faa
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 16 09:55:28 2023 +0200

    Bug 30418: Fix t/Koha/Auth/Permissions.t
    
    koha_1       |     #   Failed test 'Expected permissions generated for superlibrarian'
    koha_1       |     #   at t/Koha/Auth/Permissions.t line 283.
    koha_1       |     #     Structures begin differing at:
    koha_1       |     #          $got->{CAN_user_lists_edit_public_list_contents} = '1'
    koha_1       |     #     $expected->{CAN_user_lists_edit_public_list_contents} = Does not exist
    koha_1       |     # Looks like you failed 1 test of 1.
    koha_1       |
    koha_1       | #   Failed test 'superlibrarian tests'
    koha_1       | #   at t/Koha/Auth/Permissions.t line 284.
    koha_1       | # Looks like you failed 1 test of 3.
    koha_1       | [23:34:42] t/Koha/Auth/Permissions.t
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit bb796fcf2e9f5b26d75315d8919b1ebbd43a4664
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Mar 17 09:53:13 2023 +0000

    Bug 32752: Update serial edit form to allow for new status
    
    With this patch the new status Circulating, Out for binding and
    Bound can be set for any issue, if the current status is not "Expected".
    This is to keep the list a little shorter when the issue hasn't even
    arrived in the library yet.
    
    These new status will be especially helpful if the library has
    opted to not create items for all their subscriptions as a lot
    of libraries will only lend bound volumes, but not the singular
    issues.
    
    * Circulating: this will be useful if the library is using
    routing lists and the items are not available at the library
    for a longer time.
    
    * Out for binding: if you send out issues for binding this will
    help to track these.
    
    * Bound: this will help users to know that the issue is now
    available as a bound volume.
    
    To test:
    * If you haven't yet:
      * Create a subscription
      * From the serial collection page:
        * Receive or create several issues and set different status
        * Make sure you have at least 2 late and claim one of them
        * Make sure you have several Arrived issues
      * Edit Arrived serial issues and others
      * Verify that the status pull down no also shows the new status
        if the issue has a different status than "Expected"
      * Set the new status
      * Verify they save and show correctly
      * Edit again and verify the pull downs are pre-set correctly
        to the saved status
      * Verify they show everywhere else (see previous test plans :) )
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 219a4cbe67fc69bebbb45889c1eae36f34300583
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Mar 17 09:52:04 2023 +0000

    Bug 32752: Add new status Circulating, Out for binding, and Bound to includes
    
    To test with the next patch that allows to set the new status.
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b7afb8e8a2124e0e8a7afd079a72e6245c7f43dc
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Mar 17 09:24:22 2023 +0000

    Bug 32752: Use an include to display the serial status in the staff interface
    
    This moves the identical code used to display the serial status
    from the different templates into one common include.
    
    To test:
    * Add a subscription
    * Receive several issues, make sure 2 are late
    * Claim one of the late issues
    * Verify the status displays nicely on these pages:
      * Subscription detail page > issues tab
      * Catalog detail page > subscription tab
      * Serial claims page
      * Serial collection page of your subscription
    
    Note: there was some code for the subscription detail page
    that should have displayed the claim date, but didn't work.
    To keep things simpler and identical to before, I have left
    that bit out for now.
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 129bf4781f834424858be6eef8fac11511a0a42d
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Mar 17 08:59:42 2023 +0000

    Bug 32752: Use an include for displaying the serial status in the OPAC
    
    This moves the existing status in the OPAC into an include.
    
    To test:
    * Add a subscription with issues in different status
    * View the OPAC detail page of the record
    * Verify that in the subscription tab the status display nicely
    * Veriy that More details > Full history displays the status nicely too
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 88989f44a37d54479ea990a3d957370fd903cb4c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon May 15 18:11:08 2023 -0300

    Bug 21330: DBRev 22.12.00.043
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bdc848039bb0da0f4a4f11a623fcfba4a0cb2338
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Apr 9 13:09:07 2023 +0000

    Bug 21330: (QA follow-up) Add 'empty' option to system preference description
    
    This adds another list item to match the preference description
    for the results page:
    
    * Empty. No XSLT will be applied (default)
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit edd6d7d066167d632573d177285f659711113a9c
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Mar 28 21:56:51 2023 -1000

    Bug 21330: (follow-up) Fix new preference text and place
    
    Atomic updated fixed : intranet => OPAC
    Changed to be more like the one adding AuthorityXSLTOpacResultsDisplay
    
    New preference moved to opac.pref
    
    Signed-off-by: Thibault <thibault.keromnes@univ-paris8.fr>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e3ea17782cb5ec1ed6f341f4db10dfdfffc58735
Author: David Nind <david@davidnind.com>
Date:   Sun Sep 11 18:16:25 2022 +0000

    Bug 21330: (follow-up) Update system preference description
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Thibault <thibault.keromnes@univ-paris8.fr>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 287b55f33b71db640e1feb4a8769ce62e736ed3d
Author: Jérémy Breuillard <jeremy.breuillard@biblibre.com>
Date:   Mon Feb 7 12:00:00 2022 +0100

    Bug 21330: Allow XSLT for authority detail view in OPAC
    
    This patch adds a syspref that allow to customize the authority detail
    view in OPAC with XSLT.
    
    Test plan:
    1. Make sure to have at least one or more authorities
    2. OPAC: Home > Authority search(Submit) > Authority search results
    3. Click details on a result and notice the view
    4. Apply patch
    5. INTRA: Home > Administration > System preferences ->find
       "AuthorityXSLTOpacDetailsDisplay"
    6. Write the path where your file is. You can try with the XSLT for
       biblio for instance:
       .../koha/koha-tmpl/opac-tmpl/bootstrap/en/xslt/UNIMARCslim2OPACDetail.xsl
    7. Save changes
    8. Repeat 2-3 and notice the display
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Thibault <thibault.keromnes@univ-paris8.fr>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7f5752d814073cf352f7b386061cb67b0b6dc5e8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 12 18:24:01 2022 +0000

    Bug 28366: Add batch patron modification to patron search results
    
    This patch adds the ability to send selected patrons for batch
    modification. It does this by adding a hidden form which is populated
    from the borrowernumbers stored in the browser's localStorage when
    selections are made.
    
    To test, apply the patch and perform a patron search in the staff client
    which will return multiple pages of results.
    
    - Select a patron on the first page of results.
    - The "Add to patron list" and "Batch patron modification" buttons
      should become active, and the "Patrons selected" box should show "1"
    - After checking another checkbox the "Merge selected patrons" button
      should activate and the "selected" count should increment.
    - Test making selections on other pages of results. The "selected" count
      should continue to increment.
    - Test the "Batch patron modification" button, confirming that all the
      patrons you selected are correctly passed to the batch patron
      modification tool.
    - Test that the "Clear" control works correctly to clear all checkboxes
      and disable all other buttons.
    - Test that the "Select all" and "Clear all" controls work correctly,
      enabling all buttons and correctly incrementing the "selected" count.
    
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cfaf1d834024dd2f68c9c8d64156e884bb9e46f3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon May 15 18:06:41 2023 -0300

    Bug 8179: (QA follow-up) Fix files permissions
    
    Not sure how this happened.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 931233864bfed0cd64faa5ded59666a433dced82
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon May 15 17:58:16 2023 -0300

    Bug 30418: DBRev 22.12.00.042
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 461c0708b08ac00ff39435d712bbb41b35d2d64f
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Mon Feb 13 16:09:04 2023 +0000

    Bug 30418: (follow-up) Fixes for QA test tools
    
    Sponsored-by: Catalyst IT, New Zealand
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f4f5d0d2f724fe58ebbcd32cfc9781c78f041951
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Wed Aug 24 01:01:33 2022 +0000

    Bug 30418: Re-order options of who can edit list contents
    
    The 'Allow changes to contents from' dropdown when creating/edit lists
    should be most locked down to least locked down:
    
    1. Nobody
    2. Owner only
    3. Permitted staff only
    4. Staff only
    5. Anyone seeing this list
    
    Sponsored-by: Catalyst IT, New Zealand
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2b222902562005721ccd20d077f355d0f242a340
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Sat Aug 20 21:16:08 2022 +0000

    Bug 30418: Unit tests
    
    Test plan:
    1. Run unit tests
    sudo koha-shell <instance>
    prove t/db_dependent/Koha/Patron.t
    prove t/db_dependent/Virtualshelves.t
    
    Sponsored-by: Catalyst IT, New Zealand
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 008ed48d66d9e33ac0c1fd17a859cfa1d130da8b
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Fri Aug 19 03:17:47 2022 +0000

    Bug 30418: Add ability for permitted staff to edit list contents
    
    Public lists with 'Allow changes to contents from' = 'Permitted staff only'
    can have their contents managed by Koha patrons with either of the
    permissions below:
    
    - superlibrarian permission
    - catalogue permission + 'edit_public_list_contents' sub-permission
    
    Test plan:
    1. Apply patches, update database, restart services
    2. In the staff client go to: Lists > New List
    3. Create a list, choose 'Allow changes to contents from' => 'Permitted
    staff only'
    
    4. Log into the OPAC as a patron with no permissions.
    5. Confirm you CANNOT add a biblio to the list from the OPAC search result page and
    OPAC biblio detail pages
    
    6. Log into the OPAC as a patron with only the 'catalogue' permissions
    enabled
    7. Confirm you CANNOT add a biblio to the list from OPAC search result
    or biblio detail pages
    
    8. Log into the OPAC as a patron with the 'catalogue' and
    'edit_public_list_contents' permissions enabled
    9. Confirm you CAN add/remove biblios from the OPAC search result and
    biblio detail pages
    
    10. Log into the OPAC as a patron with superlibrarian permissions
    11. Confirm you CAN add a biblio to the list from the OPAC search result
    page and OPAC biblio detail pages
    
    12. Log into the staff client as a patron with only the
    'catalogue' permission and confirm you CANNOT add/remove records from the
    list
    
    13. Log into the staff client as a patron with the 'catalogue' and
    'edit_public_list_contents' sub-permission (found under 'Lists' parent
    permission)
    14. Confirm you CAN add/remove records from the list
    
    15. Login into thestaff client as a patron with 'superlibrarian'
    permissions and confirm you CAN add/remove records from the list
    
    Sponsored-by: Catalyst IT, New Zealand
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fe1f6464cce0fb13cc681d4468fb537bbfbc8f29
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Wed Aug 17 20:20:12 2022 +0000

    Bug 30418: Template and JavaScript changes
    
    Sponsored-by: Catalyst IT, New Zealand
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 19854127eeb447fb4dea010701f3397360cfef26
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Wed Aug 17 20:06:57 2022 +0000

    Bug 30418: Updated schema file
    
    Sponsored-by: Catalyst IT, New Zealand
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit edfba48290812674fca96932f116435346bbcc8f
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Wed Aug 17 20:41:52 2022 +1200

    Bug 30418: Database changes
    
    Sponsored-by: Catalyst IT, New Zealand
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2928c1cf634c97041ea3b1268dcc27a550feb2ca
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Mar 17 16:58:49 2023 -1000

    Bug 32775: (QA follow-up) remove useless empty line
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 27dc268af3853a9c4ea646d3f67625d248cb318f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Feb 2 12:44:44 2023 +0000

    Bug 32775: (QA follow-up) Fix tab and indenting issues
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 36462c0c08637ad2c19652f8945cae804d13885a
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Wed Feb 1 14:51:34 2023 +1300

    Bug 32775: Correctly display language order in sysprefs when you have multiple languages in a group
    
    Test plan:
    1. Apply first patch
    2. Install en-NZ and another language - e.g. mi-NZ - so you have three
    languages showing in your sysprefs en-NZ (selected), en (unselected) and
    mi-NZ (selected)
    3. Tick en-NZ and mi-NZ in language and OPACLanguages sysprefs. Order
    en-NZ above mi-NZ and save
    4. Refresh the syspref page and confirm mi-NZ is displaying above en-NZ,
    even though you ordered en-NZ first
    5. Refresh the syspref page multiple times and observe the order of the
    languages changes
    6. Apply this (second) patch
    7. Restart plack
    8. Refresh syspref page several times confirming that en-NZ is always
    ordered first - as expected.
    
    Sponsored-by: Kinder library, New Zealand
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 565e150d1c272d0987878ae4de49eb6580d97c80
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Wed Feb 1 14:41:22 2023 +1300

    Bug 32775: Do not order language directories based on when they were created
    
    Sponsored-by: Kinder library, New Zealand
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 283cb0fd13a2a63470e5575d8bf62a089f79f289
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Mon Feb 13 01:39:51 2023 +0000

    Bug 32775: (follow-up) Unit tests
    
    Test plan:
    1. Apply this patch and restart services
    2. Run t/db_dependent/Languages.t
    3. Notice tests 16 and 17 sometimes fail
    4. Apply all the other patches and restart services
    5. Run t/db_dependent/Languages.t
    6. Notice all tests consistently pass
    
    Sponsored-by: Kinder library, New Zealand
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d86786401a6baaa8492ff657e3539b16278eb7d7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon May 15 15:43:31 2023 -0300

    Bug 30649: DBRev 22.12.00.041
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b0ae1fa76cc6e97d87eab79fabff40fbeed1ede9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon May 15 15:36:24 2023 -0300

    Bug 30649: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 40b1b61cbf384a2ac101eb12119e3d28a3e45315
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Oct 18 09:26:45 2022 -0400

    Bug 30649: Vendor EDI account passwords should be encrypted in the database
    
    We are storing edi vendor acccount passwords in clear text in the
    database. Now that Koha has the Koha::Encryption module, we should
    use that to encrypt passwords for all existing and new EDI accounts.
    
    Test Plan:
    1) Apply this patch
    2) Create one or more EDI vendor accounts
    3) Run a report to view the account passwords, note they are in clear
       text
    4) Run updatedatabase.pl
    5) Re-run the report, account passwords should be encrypted now
    6) Edit a vendor EDI account, note you can still view and update the
       password for an account
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a18e234ddc314e6b5baeb5df7dffbebd39441832
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Apr 19 13:07:25 2023 +0000

    Bug 32680: (QA follow-up) Fix opac call and remove second fetch
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d0b442b4782ac9da3fb7dc5995b7af9a8e4d5743
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Apr 19 11:23:23 2023 +0000

    Bug 32680: Add classes to template files
    
    This patch adds the classes to the template files so that the plugin hook can identify that cover images are required and where to inject them
    
    Test plan as per first commit
    
    Sponsored-by: PTFS Europe
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 728e6872907ee08c1a5f97874918525e0b5adf53
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Apr 19 11:21:02 2023 +0000

    Bug 32680: Add cover images plugin hook
    
    This patch adds a plugin hook to inject cover images into the templates
    
    Test plan:
    1) Apply all patches
    2) Go to https://github.com/PTFS-Europe/koha-plugin-addBDSCovers
    3) In the releases section, download the .kpz file
    4) Upload this in the plugins section and enable the plugin
    5) In either the OPAC or staff client, search the catalog
    6) The results should have cover art from BDS covers
    7) Click on a result and the detail page should also have the cover art
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9848074b3cfcfa0ce0d580c36c6cf2074b7bc042
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 11 12:27:31 2023 +0200

    Bug 33463: Remove sort for 'Actions' on the plugins table
    
    Test plan:
    Go go the plugin admin page
    upload a plugin
    Notice that the "Actions" column is not longuer sortable
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 230f7cd684b11aa8a69df9a5db159f6b471bcc91
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 10 10:45:48 2023 +0200

    Bug 33658: Fix capitalization 'To Reproduce'
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5e9fe6117695d6e9b825574ac2ffcd4b4680ee54
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Fri May 12 21:09:57 2023 -0300

    Bug 8179: (follow-up) Fix currency change and remove datatables select
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b0aab2aeef9a025d3907d0b723b5ea71eaf94542
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri May 12 15:11:46 2023 +0000

    Bug 8179: (QA follow-up) Date received should default to today
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a8df9f0ba4d0df58c247ee8d477e545f9682d011
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu May 11 15:04:06 2023 -0300

    Bug 8179: Fund required
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bc2d88ced63b087697ffa830ee12d1970f3fa00c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu May 11 14:53:54 2023 -0300

    Bug 8179: Cosmetic changes
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8347611256d67f9988fd1a07af711af74829c9d8
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu May 11 12:11:40 2023 -0300

    Bug 8179: Fix JS indentation in parcel.tt
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b1db26ddd38c368d759fce4bec0f75cff41d06a2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu May 11 12:10:02 2023 -0300

    Bug 8179: Remove leftover/not used embed definitions
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fd15202d6b1372167a60a50e2aa6db21f536cc01
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu May 11 12:07:54 2023 -0300

    Bug 8179: Remove commented code
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b95b4d4c89a2a3aa12a059655f705de84e177944
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu May 11 12:03:55 2023 -0300

    Bug 8179: Make partial receive work correctly
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a551cb47ea69b34f05d8a4417b23adc8ba7d334d
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Fri Oct 9 17:15:31 2020 -0300

    Bug 8179: Receive multiple orders
    
    This patch implements the code to allow a patron to receive multiple
    orders at the same time in /cgi-bin/koha/acqui/orderreceive.pl page
    
    To test:
    1. apply all patches
    2. updatedatabase
    3. Go to system preferences and allow AcqReceiveMultipleOrderLines
    4. In acquisitions module, create a vendor if you don't have one and add
       3 baskets.. one with create items on ordering, one with create items
       on receiving and finally one with create items when cataloguing
    5. Fill baskets with orders (There should be at least 15 orders in total). There should be a mix of orders created by suggestions, others by subscriptions and others by neither of those methods.
    6. Close all baskets and receive shipment.
    CHECK => in /cgi-bin/koha/acqui/parcel.pl page, in top table there is a column with checkboxes, and a button that says "Receive selected"
    7. If all orders from all baskets are shown in the table, set the rows per page to 10, so table has more than one page
    8. Check some of the checkboxes
    CHECK => "Receive selected" button shows how many rows are selected
    9. Go to the next page and select some more rows
    CHECK => Changing page does not modify how many rows where selected
    10. Go back to previous page
    CHECK => Previously selected rows are still selected
    11. Reload the page to deselect all rows
    12. Select only one row and click on "Receive selected" button
    CHECK => the page /cgi-bin/koha/acqui/orderreceive.pl behaves just the same as if the "receive" link in the selected row would have been clicked.
    13. Click on cancel to go back to parcel.pl page
    14. Select all rows (even the ones from the next page of the table) and
        click on "Receive selected"
    CHECH => In orderreceive.pl page there is a table with all selected rows
    15. Ensure table has more than one page, as in step 7
    16. Click on the "edit" link in the last row of the current page
    CHECK => A modal window is displayed with 4 tabs within: Info,
    Accounting, Receipt history and Items
    CHECK => Modal has 4 buttons at the bottom, 'Previous' to go to previos
    order, 'Cancel' to close the modal without keeping modifications, 'Save'
    to close modal keeping modifications and 'Next' to go to the next order
    CHECK => Even that we are at the end of the current page, 'Next' button
    is still available
    17. Click on 'Next' button
    CHECK => The table behind the modal now displays the next page, and the modal was not closed
    18. Click on 'Previous'
    CHECK => The table behind the modal went back to the first page, and the modal was not closed
    19. Click on 'Previous' button till you reach the first row of the first
        page
    CHECK => Only when you reach the first row of the first page 'Previous'
    button gets disabled
    20. Click on 'Next' button till you reach the last row of the last page
    CHECK => Only when you reach the last button of the last page 'Next'
    button gets disabled
    21. Check that behaviour for the different types of order are still the
        same
        a. For orders that where created through suggestion, check that the
    suggestion info is present in Info tab. If when suggestion was accepted
    you set a reason, a dropdown to change the reason shoul display also.
        b. For orders that where created through subscriptions, check that
    the Items tab is disabled, and the Receipt history is enabled. On
    accounting tab you should be able to change quantity ordered. If there
    were less items received than ordered, the next time you receive this
    order the child order generated from this one shoul appear in receipt
    history.
        c. For orders that don't come from subscription and creates there items on ordering, Receipt history
    should be disabled, and a table with prefilled items shold appear in the
    Items tab. You can edit them and the changes should appear in the item's
    row.
        d. For orders that don't come from subscription and creates there
    items on receiving, Receipt history should be disabled, and a form to
    create the items should appear in Items tab. When you add an item a
    table should appear.
        e. For orders that don't come from subscription and creates there
    ites on cataloguing, Receipt history and Items tabs should be disabled.
        f. Any changes made in quantity (received or ordered) or funds in the modal should be
    reflected in the table if you click save from the modal.
    22. Once you've done all you checking and verifications click save
    23. While saving a progress bar should appear
    24. If no error was detected, you should be redirected back to parcel.pl
        page
    25. If an error or warning was detected (like there is an order with 0
        items to receive) the save button should be disabled and warnings
    are dispayed.
    26. prove t/db_dependent/Koha/Acquisition/Fund.t t/db_dependent/Koha/Acquisitoin/Order.t t/db_dependent/Koha/Item.t
    
    Sponsored-by: Virginia Polytechnic Institute and State University
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 27a086b91e2a23a764ca8210b9ac2b8c4ec3457e
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed May 10 14:52:58 2023 -0400

    Bug 33717: Typo in search_for_data_inconsistencies.pl
    
    This patch corrects a typo in the output of
    search_for_data_inconsistencies.pl when a bibliographic record has no
    title.
    
    The patch also replaces biblio to bibliographic record in the same
    sentence for terminology consistency.
    
    To test:
    - Have a bibliographic record without a title
    - Run misc/maintenance/search_for_data_inconsistencies.pl
    - Read output, make sure the sentence is correct
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3a2ae8e3f9e981487d9ded4ec139d90cf3353503
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 15 10:57:02 2023 +0200

    Bug 31212: Adjust item spec for last_seen_date
    
    This bug changed the column to a date-time and the spec gets adjusted as
    well.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1e231653ca10768b019ac616bc115fd5afbdb955
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 2 10:18:59 2023 +0200

    Bug 33491: Do not apply style to agreement list view
    
    We removed the 'scoped' attribute and so the style rules added in the
    previous patch were applied to the agreement list view.
    Why is 'scoped' not working is the main question here (?) but adding a
    more specific selector to aim only the component (AgreementsList) from
    the modal is a quick solution.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Bug 33491: Add a more specific class for the modal
    
    We don't want to apply these CSS rules to other modals
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9d4dc1cf215577de78fb7526a00966ffdce3f4b4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 15 10:50:12 2023 +0200

    Bug 33580: Fix tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 17cd6180cb724631aea105557924d8c81226869c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 12 17:48:32 2023 -0300

    Bug 33488: DBRev 22.12.00.040
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 828a571067baa90d226a83bf46d74ea07ebe4e35
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 12 17:45:16 2023 -0300

    Bug 33488: (QA follow-up) Fix index name
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c2b33e4c56b603c610cb9473faff3ebe0b50c889
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 11 17:46:09 2023 +0000

    Bug 33488: Add fromBranch index to branch_transfer_limits
    
    To test:
    1 - Enable UseBranchTransferLimits by item type
    2 - Set some limits for book
    3 - Place a hold, verify that pikcup dropdown reflects the limits before and after patch
    
    Signed-off-by: Bob Bennhoff <bbennhoff@clicweb.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 020bc275b05ac74bacf52325ac2933d56e78ce32
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri May 12 08:33:32 2023 +0000

    Bug 33335: (QA follow-up) Polishing and comments
    
    Just send the codes and descriptions only to client.
    Adding a few comments to the reduce construction.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 706cd01ba264ded1f0b237c74f90e511acf2de81
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 2 16:26:45 2023 +0200

    Bug 33335: Use To.json to serialize
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 351e380a1468562fe579e53d85389ccc9a53418e
Author: Marius Mandrescu <marius.mandrescu@inLibro.com>
Date:   Tue Mar 28 12:04:49 2023 -0400

    Bug 33335: Fix JavaScript error on the MARC overlay rules page
    
    The "MARC overlay rules" page doesn't display or work correctly
    if a patron category code contains a "-".
    
    This happens because of the JavaScript function in
    "marc-overlay-rules.tt" line 469. This causes an error
    "Uncaught SyntaxError: missing : after property id".
    
    Test plan:
    1. Go to Administration > Patron categories.
    2. Make sure you don't have a patron category code that contains
       a "-".
    3. Go to Administration > Record overlay rules.
    4. The table should display correctly, and you can add, edit
       and delete rules.
    5. Return to Patron categories.
    6. Add a new patron category with a "-" in the patron category code.
    7. Return to Record overlay rules page:
       => The page doesn't display and load correctly (see the attached
          image) - the normal DataTables header and footer aren't
          displayed, and you can't add, edit or delete overlay rules.
      => If you turn on web developer tools, an error is displayed in the
         console: "Uncaught SyntaxError: missing : after property id".
    8. Apply the patch.
    9. Repeat the step 7, the Record overlay rules page should now
       display correctly and you should be able to add, edit and
       delete rules.
    10. Sign off.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8ff7196c26d3bcc4534e071c3b1021fba383036f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 12 17:35:50 2023 -0300

    Bug 32357: DBRev 22.12.00.039
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7ec5d6fef2912bbc6f21a44a6152de1c13490ffa
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 12 17:35:14 2023 -0300

    Bug 32357: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6871dc7b35f5336503c1c605022ca2d8610af64d
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Mon Nov 28 22:01:37 2022 +0000

    Bug 32357: Set borrower_message_preferences.days_in_advance default to NULL
    
    To test:
    1. prove t/db_dependent/cronjobs/advance_notices_digest.t
    2. prove t/db_dependent/Letters/TemplateToolkit.t
    3. prove t/db_dependent/Koha/CurbsidePickups.t
    4. prove t/db_dependent/Koha/Patrons.t
    5. prove t/db_dependent/Patron/Messaging.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6a84d741026bfca8f88ff9789edfb3807f731ddb
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 12 17:19:55 2023 -0300

    Bug 33489: DBRev 22.12.00.038
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1faf3bcf2a59f8e6a48a2b101d78d35843bf41dd
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 11 17:33:55 2023 +0000

    Bug 33489: Add indices to default patron search fields
    
    This patch adds indices to the borrowers table to match the default
    search fields for patrons.
    
    To test:
    1 - Apply patch
    2 - Update database
    3 - Ensure patron searching works as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 62f176d0799a3cf6422eb404646cbb17678f4c2a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 12 15:47:02 2023 -0300

    Bug 32129: (QA follow-up) Avoid duplicate calculation
    
    This patch stores the output from ->check_recall() (a Koha::Recall
    object or undef) and reuses afterwards, on a ternaty operator.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6cf8c901f55efa586a3c8b01cbbe4780c0fb028b
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Nov 8 19:58:22 2022 +0000

    Bug 32129: Use patron category when checking if item can fill recall
    
    This patch uses the patron category of the patron who requested the most
    relevant recall to check for more specific circulation rules relating to
    recalls. This ensures that patrons who are allowed to place recalls are
    able to fill their recalls, especially when recalls are not generally
    available for all patron categories.
    
    To test:
    1) Go to Administration -> System preferences and enable UseRecalls
    2) Go to Administration -> Circulation and fines rules and set a general
    All/All rule and a Category A/Itemtype A rule. All values can be set
    however you like except for these recalls rules:
    
    All/All rule:
    Recalls allowed: 0
    Recalls per record: 0
    On shelf recalls allowed: if any unavailable
    
    Category A/Itemtype A rule:
    Recalls allowed: 5
    Recalls per record: 5
    On shelf recalls allowed: if any unavailable
    
    3) Find an item of Itemtype A. Check it out to Patron A (any category).
    4) Log into the OPAC as Patron B (of Category A). Find the item and
    place a recall on the item.
    5) Back in the staff interface, check in the item. This should trigger
    the recalls process so you can allocate the item to Patron B's recall,
    however the pop-up box to confirm the recall does not show. This is the
    bug.
    
    6) Apply the patch and restart services
    
    7) Check in the item again. Confirm the pop-up box to confirm the recall
    shows and you are able to allocate the item to Patron B's recall.
    8) Confirm tests pass t/db_dependent/Koha/Item.t
    
    Sponsored-by: Auckland University of Technology
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a2da8744efa0a9306dc44c4b8c7e9aed5c6209ef
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 10 12:03:09 2023 +0200

    Bug 33710: Ignore how-to related files
    
    Related to https://gitlab.com/koha-community/koha-testing-docker/-/issues/378
    
    If we merge it we will want to hide how-to.pl and how-to.ptt
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f89912e86493e10f3a559d2bd1ed1d507003e1e6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 12 15:24:44 2023 -0300

    Bug 31212: DBRev 22.12.00.037
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1066751e4be9b99481f61fcbdb52a55504ccaeb3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 12 15:23:08 2023 -0300

    Bug 31212: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1a5f418f7d1fc950e5dd781351170e39b4a204f4
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Apr 28 09:33:29 2023 -0400

    Bug 31212: (QA follow-up) Fix unit test, remove unused imports
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6b58f2628645a4653ecc38353812ef62552a57f3
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Mar 29 17:52:37 2023 +0000

    Bug 31212: (follow-up) Remove unnessesary changes from Items.pm
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2cd45bae3916364e64fde81e1e5f7679a7b01e8c
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Nov 9 21:40:55 2022 +0000

    Bug 31212: (follow-up) Fix datelastseen when returning item
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8b02cfe94b34f38a5d4dd4d5ea1ce52db1547733
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Oct 20 16:29:36 2022 +0000

    Bug 31212: Fix date_from_string and explicitly called output_pref subroutine
    
    Signed-off-by: Ann Flournoy <aflournoy@cityofkeller.com>
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2c193825031bb19e4f186481a802b40adc604791
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Aug 19 17:55:32 2022 +0000

    Bug 31212: Add Database update
    
    Signed-off-by: Ann Flournoy <aflournoy@cityofkeller.com>
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f729d46478fbfbb258262888941a6aa42da04d70
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Feb 7 23:14:43 2023 +0000

    Bug 31212: Change datelastseen from date to datetime field
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f523b0d98b612b8230dabe0b35209bbd6b0aae0b
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Mon Oct 10 17:18:03 2022 +0200

    Bug 31735: Optimize OPAC checkouts view
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ddc2906b7735fda81ec8e267303a81a921b472e6
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Tue Sep 27 18:23:27 2022 +0200

    Bug 31735: Avoid re-fetcing objects from database by passing them directly instead of ids to various subroutines
    
    To test:
    
    1) Run the following test and make sure all pass:
      t/db_dependent/api/v1/biblios.t
      t/db_dependent/api/v1/checkouts.t
      t/db_dependent/api/v1/return_claims.t
      t/db_dependent/Circulation/CalcDateDue.t
      t/db_dependent/Circulation/CheckIfIssuedToPatron.t
      t/db_dependent/Circulation/dateexpiry.t
      t/db_dependent/Circulation/GetPendingOnSiteCheckouts.t
      t/db_dependent/Circulation/GetTopIssues.t
      t/db_dependent/Circulation_holdsqueue.t
      t/db_dependent/Circulation/IsItemIssued.t
      t/db_dependent/Circulation/issue.t
      t/db_dependent/Circulation/MarkIssueReturned.t
      t/db_dependent/Circulation/maxsuspensiondays.t
      t/db_dependent/Circulation/ReturnClaims.t
      t/db_dependent/Circulation/Returns.t
      t/db_dependent/Circulation/SwitchOnSiteCheckouts.t
      t/db_dependent/Circulation.t
      t/db_dependent/Circulation/TooMany.t
      t/db_dependent/Circulation/transferbook.t
      t/db_dependent/DecreaseLoanHighHolds.t
      t/db_dependent/Holds/DisallowHoldIfItemsAvailable.t
      t/db_dependent/HoldsQueue.t
      t/db_dependent/Holds/RevertWaitingStatus.t
      t/db_dependent/Illrequests.t
      t/db_dependent/ILSDI_Services.t
      t/db_dependent/Items.t
      t/db_dependent/Koha/Account/Line.t
      t/db_dependent/Koha/Acquisition/Order.t
      t/db_dependent/Koha/Biblio.t
      t/db_dependent/Koha/Holds.t
      t/db_dependent/Koha/Items.t
      t/db_dependent/Koha/Item.t
      t/db_dependent/Koha/Object.t
      t/db_dependent/Koha/Patrons.t
      t/db_dependent/Koha/Plugins/Circulation_hooks.t
      t/db_dependent/Koha/Pseudonymization.t
      t/db_dependent/Koha/Recalls.t
      t/db_dependent/Koha/Recall.t
      t/db_dependent/Koha/Template/Plugin/CirculationRules.t
      t/db_dependent/Letters/TemplateToolkit.t
      t/db_dependent/Members/GetAllIssues.t
      t/db_dependent/Members/IssueSlip.t
      t/db_dependent/Patron/Borrower_Discharge.t
      t/db_dependent/Patron/Borrower_PrevCheckout.t
      t/db_dependent/Reserves/GetReserveFee.t
      t/db_dependent/Reserves.t
      t/db_dependent/rollingloans.t
      t/db_dependent/selenium/regressions.t
      t/db_dependent/SIP/ILS.t
      t/db_dependent/Holds.t
      t/db_dependent/Holds/LocalHoldsPriority.t
      t/db_dependent/Holds/HoldFulfillmentPolicy.t
      t/db_dependent/Holds/HoldItemtypeLimit.t
      t/db_dependent/Circulation/transferbook.t
    2) Performe one or more checkouts for a patron, making sure
      that the circulation rules allows for renewals (for example by
      setting an earlier due-date).
    3) Log in as this patron in OPAC and make sure the list of
      checkouts is displayed correctly, and that renewing an issue
      still works.
    
    Sponsored-by: Gothenburg University Library
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ab93008da7eb61b697e4586c679b88c2eebaacd0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Dec 23 15:04:26 2022 +0000

    Bug 30687: Allow pickup location to be forced when override is allowed
    
    This is Julian's patch with some extra cleanup to reduce repeated code
    
    If AllowHoldPolicyOverride is enabled and only some pickup locations are
    available, you still have the possibility to force one of the others
    pickup locations.
    But when there are zero pickup locations available, that is not
    possible.
    
    This patch change that by always displaying the list of pickup locations
    when AllowHoldPolicyOverride is enabled.
    
    Test plan:
    1. Apply patch
    2. Disable AllowHoldPolicyOverride
    3. Create a biblio B with an item I at library A.
    4. Configure this library A to not be a pickup location
    5. Add a "Default holds policy by item type" for item I type where "Hold
       pickup library match" is "item's home library"
    6. Try to place a hold on biblio B
       You should not be able to place a hold because there is no valid
       pickup locations
    7. Enable AllowHoldPolicyOverride
    8. Try to place a hold on biblio B
       You should now see all valid pickup locations in a dropdown list
       (with an exclamation mark in front of each option) with none selected
       by default
    9. Verify you can place a title-level hold and an item-level hold
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f97b448661cb2f214fccaa4ae5c3ad21fbfea22f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 12 11:18:27 2023 -0300

    Bug 31557: DBRev 22.12.00.036
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 519844611d9abd92ffad305344657204f013d445
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 12 11:11:44 2023 -0300

    Bug 31557: (QA follow-up) Make tests more robust
    
    Tests had a few problems:
    
    - They weren't wrapped in a transaction explicitly
    - They called Koha::Biblios->delete!
    - They failed if run a couple times
    
    This patch:
    
    - Wraps things in a transaction
    - Removes not-required things ($target_rs variable not used)
    - Preserves the tests logic, but filters the resultset on the
      biblionumber instead of deleting all the database which can fail
      depending on FK constraints.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e84ae9b7208244ac5eb2f5fe8dcf4ccaa4eaa94d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 24 09:22:25 2023 +0000

    Bug 31557: (QA follow-up) Fix number of tests
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9f96f8b3220fd5b8263aba0d9fb64209755727f1
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Oct 18 12:25:35 2022 -0400

    Bug 31557: Add ability for holds queue builder to prioritize either matching a patron's home library to the item's home or holding library
    
    Right now the holds queue builder starts filling bib-level holds with
    items whose patron's home library matches the item's home library.
    
    It would be good and reasonable to have the option to prioritize
    item's whose patron's home library matches the item's holding library
    to minimize transfers.
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fbd4d3a9fe41738f2108ecd885fdab2123448bd2
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Apr 21 07:09:34 2023 -0400

    Bug 33580: Bring back ability to mark item as seen via SIP2 item information request
    
    Prior to Koha 22.05, the SIP2 item information message had a side affect of updating the datelastseen field for items. This bug has been fixed, but was being utilized by inventory tools that used SIP2. We should bring back this affect and formalize it as an optional SIP2 config account setting.
    
    Test Plan:
    1) Apply this patch set
    2) prove t/db_dependent/SIP/Message.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7d9e4cf41515234d8d61c369aab3c3e49be1ac3d
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Apr 28 14:30:19 2023 -0400

    Bug 32993: Holds priority changed incorrectly with dropdown selector
    
    Test Plan:
    1) Find record with at least 3 holds.
    2) Change first holds priority as 2, Priority is changed to 3.
    3) Try to change priority back to 1, Priority is changed to 2.
    4) Apply this patch
    5) Reload the page
    2) Change first holds priority as 2, Priority is changed to 2.
    3) Try to change priority back to 1, Priority is changed to 1.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    Signed-off-by: Hinemoea Viault <hinemoea.viault@inlibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 26b706f4fa3f03772206f41412827980e403c5d8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 11 12:51:46 2023 +0200

    Bug 33320: Add spacing in Patron modification requests
    
    * Go to the OPAC, log into your account
    * Make changes to your personal details and save
    * Go to the staff interface and use the link on the start page to
      moderate the change request
    * At the top of the list you'll see something like:
    
    Without this patch:
      Ignore|Patron details
    With this patch:
      Ignore | Patron details
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8d94235dc419069509ba54458d92d64eae0e49d5
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Apr 22 10:16:59 2023 +0000

    Bug 33167: Fix TT comment for better translatability
    
    We just figured out that multi-line TT comments show up
    weirdly in translations and fixed it on bug 33332. So
    this just follows the newly established pattern.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d650f8c2a6c5ee594a1c03fcab41c34a1cbce5fd
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Mar 9 20:37:28 2023 +0000

    Bug 33167: Cleanup staff detail page
    
    This patch begins reduing some of the extra things we are doing in
    detail.pl that could easily be handled in the templates - fetching
    authorised values and branches etc
    
    It also removes a loop to find items that should be hidden, and instead
    uses a searh parameter
    
    The template changes either use item object rather than passed
    variables, or utilize plugins to fetch authorised valued
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aded9437922c2aea3c1e8abb237bccbaa0fbe8f1
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon May 8 21:36:28 2023 +0000

    Bug 32766: (QA follow-up) Remove stray p from USE statements
    
    +q[% SET footerjs = 1 %]
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f46b3e8f477a0ba28be29d0ba3581298a7e29dea
Author: Thibaud Guillot <thibaud.guillot@biblibre.com>
Date:   Tue Jan 31 15:27:09 2023 +0100

    Bug 32766: (follow-up) Fix translation function
    
    The previous syntax causes a warning during the execution of the translation script
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1ac15616e34df96a610a58b0715f9fcf0a28d811
Author: Thibaud Guillot <thibaud.guillot@biblibre.com>
Date:   Tue Jan 31 11:44:09 2023 +0100

    Bug 32766: Update some labels for better understanding and translation
    
    examples: 'crayon'->'carchoal' or 'camaiu'->'cameo'
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f4f5efddd4501b8a0261d292609bcdc26a1f24df
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 12 10:31:08 2023 -0300

    Bug 33567: DBRev 22.12.00.035
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 17704ae2334b2da16dc9983bf5d45efd4d799e5b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Apr 20 06:52:50 2023 +0000

    Bug 33567: Add a dbrev for installation with empty pref
    
    To keep current behavior, we can copy the removed fallback
    into the syspref value in case someone might have cleared the pref.
    
    Note: We are not restoring deleted prefs here; that is a data problem
    outside the scope of this report. A regular installation should always
    have this pref.
    
    Test plan:
    Run updatedatabase.pl
    Bonus: Clear the pref Reference_NFL_Statuses and run again, verify that
    the pref has changed.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 69bce3a706565878184c70cd5a29dbfa7088dcad
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Apr 20 06:46:57 2023 +0000

    Bug 33567: Remove hardcoded fallback in module
    
    Test plan:
    Run t/db_dependent/XSLT.t again
    Should pass now.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e79e23e8a293809b72306c067ce6b1780c9dc347
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Apr 20 06:41:32 2023 +0000

    Bug 33567: Empty NFL_statuses pref in unit test
    
    This test should fail now, since it would trigger the hardcoded
    fallback in the XSLT module.
    
    Test plan:
    Run t/db_dependent/XSLT.t
    Should fail.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d27a3419cce0da8c90d3f57d54d6cf669001f210
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Feb 17 13:01:02 2023 +0000

    Bug 32995: Pass user agent string for OverDrive fulfillment
    
    This patch simply adds the string Koha/VERSION to the fulfillment
    request
    
    TO test:
    1 - Have OverDrive credentials for testing
    2 - Enable all the overdrive options in system preferences
    3 - Sign in to opac with an overdrive user and verify you can checkout
      and download titles
    4 - Sign off
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Not tested with OverDrive, but change looks harmless enough.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 56f6b6b6fcf5e425d47aa13da09f3f921e0c3253
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 10 13:19:38 2023 +0000

    Bug 33699: Typo in identity_provider_domains.tt (presedence)
    
    This patch corrects the typo "presedence" with "precedence."
    
    The patch also corrects some grammar:
    
    "so if the 'library.com' domain will take presedence over
    '*library.com'"
    
    ...changed to...
    
    "so 'library.com' domain will take presedence over '*library.com'"
    
    I also changed the <div>s inside that block of help text to <p> in order
    to improve legibility.
    
    To test, apply the patch and go to Administration -> Identity providers
    -> Manage domains (on an existing provider) -> Edit, and click the
    "More" button under the "Domain" field.
    
    Confirm that the text is correct.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1bd49fcab8c03ee43aba12cae8661f9488c9bf8d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 10 11:04:13 2023 +0200

    Bug 33677: Remove verbose option from koha-worker man
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    No more mention of verbose.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3ca450dbc97f12f895830e17562a2e118996a439
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 10 10:41:30 2023 +0200

    Bug 33642: Fix 'No log found.' in viewlog
    
    It should ease translatability and remove an extra space.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9446baecf938f7ecc267cc4c216f1c411810a7bf
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon May 1 18:38:30 2023 +0000

    Bug 33445: (follow-up) Allow all search fields to be passed through and returned when trying another search
    
    It seems the form didn't populate all fields form data passed in. This patch
    corrects that
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 42b402a2bdcb5a920092c2d8e75c97cada0115d0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon May 1 18:31:30 2023 +0000

    Bug 33445: (follow-up) Pass form values through when clicking 'Try another search'
    
    We didn't include anything except the authid id in the try again form, this
    patch extends to cover all the fields
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 44e868f464af037410766f97f4036b26e92177a9
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 28 12:39:58 2023 +0000

    Bug 33445: Pass through form info if present and use record values otherwise
    
    This patch updates the form to pass through values formthe form when searching, and
    to use record values if nothing is passed in.
    
    TO test:
     1 - Without the patch, edit a personal name authority record
     2 - Replace 100 subfield a (200 subfield a for UNIMARC) with your own name
     3 - Click "Replace record via Z39.50/SRU search"
     4 - Note that prefilled search field contains the original value, not your name.
     5 - Replace the Author (personal) field with your name in the search form
     6 - choose a search target, and click Search.
     7 - Note that the results of the search are for the original value, not your name
     8 - From the details page of a record, click 'Edit -> Replace record via Z3950'
     9 - Note form is prefilled
    10 - Change value as in 5 and search
    11 - Note original term was searched
    12 - Apply patch, restart all
    13 - Repeat searches as before
    14 - Confirm that form is prefilled with record or the updated value
    15 - Confirm your entered search terms are always searched
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d6f0723ce74996a881dfbdf58066b9a15c09bb3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 10 10:42:13 2023 +0000

    Bug 33655: z39.50 search no longer shows search in progress
    
    This patch adds an id to z39.50 search interface submit buttons so that
    the JavaScript event for changing the cursor can be linked to that
    instead of the obsolete class.
    
    The patch also adds code copied from Bug 33233 in order to make the
    "waiting" cursor revert to the default if the user uses the back button
    to return to the search form.
    
    To test, apply the patch and go to Cataloging -> New from Z39.50
    
    - Fill in a search term and click the submit button
    - Your cursor should change to a "waiting" cursor while the search is
      performed, before you're redirected to the results.
    - From the results page, clicking the back button (or right-clicking the
      page and choosing "Back") should return you to the search form and
      your cursor should be a standard pointer.
    
    Perform the same test from:
    
    - Acquisitions -> Vendor -> Basket -> Add to basket -> From an external
      source
    - Authorities -> New from Z39.50/SRU
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c39d4ea0b26cfb2448902546115efef1cfe2ca6e
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Apr 16 11:57:19 2023 +0000

    Bug 32937: Make Zebra ignore the copyright symbol in searches
    
    It's common to catalog the year with the copyright symbol attached
    to it. This creates some issues with search that we can fix by
    adding the © to the list of characters Zebra ignores in search.
    
    To test:
    * Search for any existing publication year with ©, example: ©1951
    * Verify your record is not found
    * Add the copyright symbol to a record, verify it's now found with ©,
      but not without
    * Apply patch
    * On ktd:
      * sudo cp -i /kohadevbox/koha/etc/zebradb/etc/word-phrase-utf.chr  /etc/koha/zebradb/etc/word-phrase-utf.chr
      * sudo koha-zebra --restart kohadev
      * sudo koha-mysql kohadev
      * DELETE FROM biblio WHERE biblionumber = 369;
      * The reindex woudl fail for me with this broken record present.
      * sudo koha-rebuild-zebra -f kohadev
    * Repeat searches, the records should be found when searching
      with and without ©.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 21bcb6e85520b2963dde71c21ccb5e169c4c5e28
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Wed Apr 5 09:30:30 2023 -0400

    Bug 32627: Calculate expirationdate relative to waitingdate
    
    Hold::set_waiting should calculate the MaxPickupDelay expiration date
    based on waitingdate rather than the current date, to avoid resetting
    the expirationdate on a hold that was already waiting.
    
    To test:
    1. Place a hold and check in the item so the hold will be set to Waiting
    2. Confirm that the expiration date is correct based on the
       ReservesMaxPickupDelay setting
    3. Adjust your system clock to one day later
    4. Check in the item again and confirm the hold
    5. Note that the expiration date has changed
    7. Apply patch and restart_all
    8. Repeat steps 1-4. Confirm that the expiration date is calculated
       correctly, and does not change when the item is checked in again
    9. Reset your system clock to the current date
    10. Set ExcludeHolidaysFromMaxPickupDelay to Use the Calendar
    11. Add an upcoming holiday to the calendar
    12. Repeat steps 1-4. Confirm the expiration date correctly accounts for
        the holiday, and does not change when the item is checked in again
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c1fe7406b9f4a3d253ed282f2cb510258dac732e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu May 11 16:54:26 2023 -0300

    Bug 33053: Handle invalid biblio_id more robustly
    
    This patch addresses the fact the invalid FK error might differ under
    some circumstances. We could try to catch the exception adding another
    case, but I think this pattern is cleaner and the authors didn't provide
    a fix.
    
    We can discuss it later, as this controller class has several things to
    review.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d236f73fbc60c6576b5aa21d84a26334f298214c
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed May 10 13:33:53 2023 +0000

    Bug 29185: (QA follow-up) Quote title search in GetCnumSearchURL
    
    Test plan:
    Disable UseControlNumber
    Change biblio title to something like:
        Hamlet or CHINESE_CHARS
    where you add some nice Chinese chars.
    Create a 765 looking for that title in another biblio record.
    Without this patch, the link at detail page finds both records,
    since it looks for ti-phr:Hamlet OR the Chinese chars.
    With this patch, the link at detail uses quotes and finds only
    one, since the OR is now part of the ti-phr search.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2d004a2e29a14a73d5b4f0e65d3577f7ed2c5f90
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 28 12:14:51 2023 +0000

    Bug 29185: (QA follow-up) Capitalize AND to ensure it is a boolean for ES
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6d43659f7983943b020a041b3a04e768cc496084
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Apr 13 06:59:35 2023 +0000

    Bug 29185: Display MARC tag 765 in OPAC and intranet XSLT
    
    Test plan:
    
    ** For OPAC
    [1] Pick a biblio record A as original entry, fill $001/$003.
    [2] Pick another biblio record B as translation, add 765 with $t,
        $a and $d. Put (orgcode)cnum from A into $w.
    [3] Disable UseControlNumber.
    [4] Goto OPAC detail page of B. Check link; should be title based.
    [5] Enable UseControlNumber.
    [6] Goto OPAC detail page of B. Check link; should incl orgcode and cnum.
    [7] Edit B. Replace $w with cnum of A only.
    [8] Goto OPAC detail page of B. Check link; should incl cnum only.
    
    ** For staff client
    [9] Goto staff detail page of B. Check link again.
    [10] Edit B. Set 765 ind2 to 8, fill $i.
    [11] Goto staff detail page of B. You should see different label.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6afc14bc60b20adc7d70b6a35d802e8a9dddd99f
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Mar 15 15:14:29 2023 +0000

    Bug 29185: Groundwork: add template GetCnumSearchURL in Utils
    
    Note for QA: Opened bug 33515 to see if we can use this same
    function in a few other places too. Would probably reduce code
    and increase consistency.
    
    Test plan:
    See next patch.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0c548e8590fa2072b6a68502eda3b5c54bc05164
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Mar 23 08:02:42 2023 +0000

    Bug 29185: Facilitate searching for cnum
    
    Instead of typing the case sensitive Control-number each time.
    4 strikes instead of 15 on your keyboard. Wow! Gain of 73%.
    
    Test plan:
    Copy ccl.properties to /etc/koha/zebradb, restart Zebra and
    search for cnum=SOME_ID in opac or intranet.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ae3d6f1876c807aed3efb908f538e83bf6376abe
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 9 10:11:19 2023 +0200

    Bug 33684: Make mandatory date fields required when editing a patron
    
    Date fields in BorrowerMandatoryField are not required by the validation
    form when a new patron is added or modified.
    
    This is because the 'required' prop does not exist on the input element
    when the flatpickr instance is created.
    We should either add it in the DOM directly (tt), but it will require to
    do it "manually" for each date fields, or add it when we add it to the
    inputs. This patch implements the second option.
    
    Test plan:
    1. Add "dateofbirth" to syspref BorrowerMandatoryField.
    2. Add patron and leave date of birth input field empty.
    3. Save.
    => Form is not submitted and you are asked to fill in a date of birth
    
    Signed-off-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=33648
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 49803c311bd6359bf5bae40c9ab3bead75947a60
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 10 12:34:08 2023 +0200

    Bug 33403: Fix Letters.t if number pattern with id=1 does not exist
    
    Bad assumption in DB, we should create the data we need
    
    Test plan:
    > delete from subscription_numberpatterns;
    
    prove t/db_dependent/Letters.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e791b3b6a634796afd89c2a378506e0c96c754ea
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 10 15:22:04 2023 -0300

    Bug 33557: DBRev 22.12.00.034
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bf7389d6014eb0bb9a9bfcffe875940177f26a01
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 18 13:13:12 2023 +0000

    Bug 33557: Add LinkerConsiderThesaurus system preference
    
    Bug 30280 added the ability to use multiple thesauri for authorities in Koha.
    This is a large change, and many libraries use authorities in a ess strict manner.
    This patch simply adds a preference, disabled by default, to enable this new feature
    
    To test:
    1 - Find or create a record with a 650 heading, second indicator 0 (LOC)
    2 - Ensure this links to an authority in your system
    3 - Disable AutoCreateAuthorities, enable CatalogModuleRelink
    4 - Edit the heading to second indicator 2
    5 - Save, the heading does not link
    6 - Apply patch, updatedatabase, restart all
    7 - Edit and save record again
    8 - Heading should now link to the LOC authority, despite different second indicator value for source
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 09c92afd25f3fd58a159b0252dd73172e8fea1a3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue May 9 13:51:59 2023 +0000

    Bug 33277: (follow-up) Don't use regex, tidy
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 154f12d67bbd4feb1de94af863cb00a8f20c4c6d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 27 08:53:24 2023 +0000

    Bug 33277: Adjust source file for zebra mappings
    
    The previous patches adjusted the mappings directly - moving this
    change to the correct build file
    
    Not needed for sign off, but QA can test that nothing changes when rebuilding the files:
    xsltproc etc/zebradb/xsl/koha-indexdefs-to-zebra.xsl etc/zebradb/marc_defs/marc21/authorities/authority-koha-indexdefs.xml > etc/zebradb/marc_defs/marc21/authorities/authority-zebra-indexdefs.xsl
    
    Signed-off-by: Frank Hansen <frank.hansen@ub.lu.se>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c78b1a9a667513c6e30f812be79944d14d1f0c95
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 22 00:33:23 2023 +0000

    Bug 33277: (follow-up) Fix notdefined search for Zebra and ES
    
    Signed-off-by: Frank Hansen <frank.hansen@ub.lu.se>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7911eb6666f9b1a9ea310e0d62a647a62101c48c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 21 19:34:50 2023 +0000

    Bug 33277: Search thesaurus for 'notspecified'
    
    Signed-off-by: Frank Hansen <frank.hansen@ub.lu.se>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d0050d84dfbb9a7c02d8e9b166673e4a5cb875e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 21 19:28:10 2023 +0000

    Bug 33277: Add comments and missing thesauri
    
    Signed-off-by: Frank Hansen <frank.hansen@ub.lu.se>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit be0241ea69081d0cb78f8051a88f2e53b091be1d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 21 17:31:31 2023 +0000

    Bug 33277: Support custom thesaurus authority with no 040 specified
    
    Signed-off-by: Frank Hansen <frank.hansen@ub.lu.se>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d73f56736669afb522f58f5e2856a5fad54bfc64
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 20 15:44:17 2023 +0000

    Bug 33277: Do not search using thesaurus when linking non 6XX fields
    
    This patch sets thesaurus as undefined when linking any field except 6XX
    
    This fixes the case where authrotiy records don't have the thesaurus defined
    
    Consequently - this means that Koha does not support multiple thesaurus records
    for authorities outside of subjects
    
    i.e. Using the default linker, and having both an LCSH and Sears record for 'Shakespeare,William'
    A 100 entry will find two results and the heading won't be linked. Previously we always linked to the LCSH
    
    To test:
    1 - Import the attached auths and biblio (from bug 33159 comment 24)
    2 - Set system preferences:
        RequireChoosingExistingAuthority - don't require
        AutoCreateAuthorities - don't generate
        CatalogModuleRelink - Do
        LinkerKeepStale - Don't
        LinkerModule - default
        LinkerRelink - do
    3 - Edit the imported bib
    4 - Save it
    5 - Headings are not linked except 600
    6 - Apply patch
    7 - Restart all
    8 - Edit and save record
    9 - Headings are successfully linked
    
    Signed-off-by: Frank Hansen <frank.hansen@ub.lu.se>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5b3d848b2ea99059ac2c08f1661d338a2f20b672
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue Apr 18 13:18:34 2023 +0000

    Bug 33064: Update cypress tests
    
    This patch amends Searchbar_spec.ts to account for the new licenses option
    
    Test plan:
    1) Run yarn cypress open
    2) Select the Searchbar_spec.ts test
    3) The test should pass
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b17fbf849c74a693a0fa7fb05e6cba7b248043d8
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue Apr 18 13:15:42 2023 +0000

    Bug 33064: Add a licenses option to the searchbar
    
    This patch adds a licenses option to the top searchbar
    
    Test plan:
    1) Apply patch
    2) run yarn build
    3) Navigate to the ERM module
    4) Observe that the top search bar should have an option for licenses
    5) Click on licenses in the left hand menu, the search bar should update to show licenses as the active search option
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 80f8556619e55f64fc37d3cd1a144ad976bdc472
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Aug 29 10:21:59 2022 +1200

    Bug 31479: Option to skip t/00-check-atomic-updates.t when building custom packages
    
    This enhancement adds an option to skip the check for leftover atomic
    updates when building custom packages. This is particularly useful for
    Koha providers or anyone else building Koha packages manually.
    
    In practice, this could be run like: sudo CUSTOM_PACKAGE=1
    ./debian/build-git-snapshot -r ~/debian -v 21.11.01git -d
    
    This test plan should all take place within the shell.
    0. sudo koha-shell kohadev
    1. Run prove t/00-check-atomic-updates.t and confirm the test passes
    2. Add a fake atomic update to installer/data/mysql/atomicupdate/ . You
    can use the example from
    https://wiki.koha-community.org/wiki/Database_updates#How_to_write_an_atomicupdate_file
    3. Run prove t/00-check-atomic-updates.t and notice the test fails
    4. Set the CUSTOM_PACKAGE environment variable so we can test this. You
    can either set on the commandline (using export) or in /etc/environment
    (remember to run source /etc/environment so the changes are accessed)
    5. Run prove t/00-check-atomic-updates.t and the test should now pass.
    
    Sponsored-by: Catalyst IT
    Signed-off-by: Mason James <mtj@kohaaloha.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d6d7d4b876f47e6cf7bf4a7259008d533c8937b6
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu May 14 11:56:23 2020 +0200

    Bug 25503: Add option to export items bundle contents in checkouts table
    
    Test plan:
    1. Enable system preference ExportCircHistory
    2. Create an item bundle (see bug 28854 comment 458)
    3. Check out the item bundle
    4. In the checkouts table, check the box in column "Export",
       choose export format 'MARC with items', check "Export items bundle
       contents" and click on "Export" button
       The exported file should contain the biblio and item created at step
       2, but also the biblio and items that are part of the bundle
    
    Signed-off-by: Marie-Luce <marie-luce.laflamme@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Marie-Luce <marie-luce.laflamme@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    https://bugs.koha-community.org/show_bug.cgi?id=25508
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1d553ca4dad60add52899b6c47afe4135023fc5f
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Nov 4 09:53:51 2022 +0100

    Bug 25503: Make _get_biblio_for_export test pass
    
    Signed-off-by: Marie-Luce <marie-luce.laflamme@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    https://bugs.koha-community.org/show_bug.cgi?id=25508
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 436d9b044e151aeeb343b146861b945e4dfe2327
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Nov 4 09:53:25 2022 +0100

    Bug 25503: Add failing test for _get_biblio_for_export
    
    Signed-off-by: Marie-Luce <marie-luce.laflamme@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    https://bugs.koha-community.org/show_bug.cgi?id=25508
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a87315e682e2225957357cfb1bb14d0049ef2477
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Nov 4 09:41:30 2022 +0100

    Bug 25503: Make Koha::Exporter::Record tests pass with unimarc
    
    Signed-off-by: Marie-Luce <marie-luce.laflamme@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    https://bugs.koha-community.org/show_bug.cgi?id=25508
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a487bb847a34b82ab3f24a19e9c036fd749cd626
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 10 14:49:37 2023 -0300

    Bug 28328: DBRev 22.12.00.033
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4e933cbc1184d4eb67953bd01859f1c31275604f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 3 15:42:15 2023 +0200

    Bug 28328: Adjust tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eb3505c7e8212633c0e37975f2d2ab3f17b37c3c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 3 15:41:51 2023 +0200

    Bug 28328: DBIC schema changes
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a537e57909a71d99f035030c4ab095aa71bedf2b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 3 15:33:11 2023 +0200

    Bug 28328: Extend biblioitems.lccn to longtext
    
    Same sa issn and isbn, we want lccn to allow longer values.
    
    Test plan:
    Run the updatedatabase script to modify the DB structure
    restart_all
    Edit a bibliographic record and enter a long (more than 25 chars) lccn
    Save
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c76533c5a1bc740ded800039ef5843e1345be4e5
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Wed May 10 08:32:26 2023 +0000

    Bug 26403: (QA follow-up) Add missing debit and credit types to includes
    
    This adds the missing debit and credit types to the includes, namely:
    DISCOUNT, PURCHASE, PAYOUT, and VOID.
    
    I sorted them as they appear in the GUI (alphabetically) so it's a little
    easier to spot missing ones.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bd8d019d3232cdef815deef9ee6095c0298baf03
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 10 07:37:55 2023 +0100

    Bug 26403: Use accounts include in account management pages
    
    This patch updates the credit and debit types management pages to use
    the proper includes for handling system type translations.  This is how
    it should have been done in the first place on the original bugs that
    introduced the management of these types but for some reason I think it
    got dropped during the QA process leading to confusion around these
    system types with their fixed descriptions.
    
    To test:
    1. Apply patch
    2. Apply the translations
       ./misc/translator/translate install xx-XX
    3. In the staff interface, go to Administration > Credit types
       --> They should be translated
    4. Go to Administration > Debit types
       --> They should be translated
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0c07407a82f5a1e41f8e5be57475e889da77c3fa
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Mon Apr 3 15:34:11 2023 -0400

    Bug 26403: (follow-up) Deleted old SQL files
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Followed the test plan. Works as advertised.
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 002dbcdc7f52769e150f7ed788e37e9c08ffe02b
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Mon Apr 3 14:35:04 2023 -0400

    Bug 26403: Move credit and debit types into translatable YAML files
    
    This patch moves account debit and credit types, as well as the CASH
    payment type, into YAML files under
    installer/data/en/mandatory. This should make the debit and credit types
    translatable (for new installations only).
    
    To test:
    1. Apply patch
    2. Update po files
       ./misc/translator/translate update xx-XX
    3. View the xx-XX-installer.po file
       -->The default account debit and credit types (and cash payment type)
          should be available to be translated
    4. Translate the strings
    5. Apply the translations
       ./misc/translator/translate install xx-XX
    6. Load the new translated YAML files (with a fresh install, or by deleting
       the values in the db and using ./misc/load_yaml.pl to load the files)
    7. In the staff interface, go to Administration > Credit types
       --> They should be translated
    8. Go to Administration > Debit types
       --> They should be translated
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7f1cc03e3e16c4538126d69e43f5d9ff67ecd0b2
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Apr 24 23:53:50 2023 +0000

    Bug 33512: (follow-up) Check item count before adding add/edit button
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0eec6e9f244f95bf8d6f1bf105f0d706456bb316
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Apr 15 23:14:10 2023 +0000

    Bug 33512: (QA follow-up) Remove 'Click to' from buttons
    
    This is following recommendations from accessibility
    guidelines. It being a link or button already indicates
    that you need to click it. We don't need to spell it out.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f04de4636aaf04582a20e7848da0773d0a045c30
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Apr 12 22:28:06 2023 +0000

    Bug 33512: Change text and add button classes on serial-edit page
    
    To test:
    1. Create a subscription
    2. Make sure that you choose "Create an item record" when receiving the serial and associate it with a record.
    3. Fill out the numbering pattern stuff and save the subscription.
    4. Receive and change the status to arrived. Doing so will make the item subfields appear for editing.
    5. Add some stuff, like a barcode, and Save.
    6. Now, if you have made a mistake, you may want to edit the serial/item. Check the edit box and click 'Edit serials '
    7. For your issue that has already arrived click 'Click to add item'. The item record from before appears.
    8. Apply patch.
    9. Try 6 & 7 again. The existing items should now read 'Click to edit item'
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5eaee314c59a4ed8f3d75c7897f931f57f1577b1
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu May 4 07:06:07 2023 +0000

    Bug 33671: Update POD, remove unneeded check in relationship->guarantor
    
    [1] Update POD for $patron->guarantor_relationships
    [2] Remove check from Patron::Relationship->guarantor
    
    Test plan:
    Run t/db_dependent/Koha/Patron.t
    Run t/db_dependent/Patron/Relationships.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1dee35d412f9aada8ae58d72a7fa1f4ff88dde7c
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu May 4 06:41:19 2023 +0000

    Bug 33671: Fix for 30472 - Remove null-guarantors
    
    These guarantors cannot be added. They are of no use.
    
    NOTE FOR QA/RM: I do not think that it is needed to add a new
    db rev for this change since it happens seldom. But if you think
    that it is, just copy it to atomicupdate/change bugno.
    
    Test plan:
    [1] Check your table definition and modify it:
        alter table borrower_relationships modify column `guarantor_id` int(11) NULL;
    [2] Add an empty guarantor:
        insert into borrower_relationships (guarantee_id,relationship) values (SOME_PATRON_ID,'father');
    [3] Run the dbrev and verify that the inserted record has been removed.
    [4] Check table definition with 'show create table borrower_relationships'.
        You should see NOT NULL with guarantor_id.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6fafe5e05b542a6da3b2338ef071f4ebc31d0810
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 10 14:09:44 2023 -0300

    Bug 30928: DBRev 22.12.00.032
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dc6d0ca254b2d9e02cf40252958d6b399ca907da
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 10 14:08:59 2023 -0300

    Bug 30928: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2f01be170f7c6c4911810b692e1da70e31c6f335
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Sun Apr 30 21:31:44 2023 +0000

    Bug 30928: (QA follow-up) DB updates
    
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 60c46119553f3f05da7a89b4d58c2215b9d9e46e
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Apr 28 14:30:41 2023 +0000

    Bug 30928: Add interface to statistics
    
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ce8911a955f1b7727a6fbb6fb4ae27418d4bc100
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Feb 3 23:22:20 2023 +0000

    Bug 30928: Add tests
    
    prove -v t/db_dependent/Koha/Statistics.t
    prove -v t/db_dependent/Stats.t
    
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f88b2606ba91350c4872576c6f3b54d0edf1829d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 10 14:06:52 2023 -0300

    Bug 33053: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eef03d1436dabb0d3f2cd0e60119f38f002bff8e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue May 9 12:44:58 2023 -0300

    Bug 33673: DBRev 22.12.00.031
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7c6f68f1ec269edfbdd4395317fbae044701c234
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Mar 31 16:53:24 2023 +0000

    Bug 30621: Add author column to opac-readingrecord.tt
    
    To test:
    1. Have a patron with some checkout history.
    2. Go to that patrons OPAC reading history page, notice author is listed in the same column as title. You cannot sort by author.
    3. Apply patch and look again.
    4. Now there should be an author column that allows patrons to sort by it.
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5b7879ebf8a571d26d7d0c859f85684044dc3193
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 28 16:03:07 2023 +0000

    Bug 25379: (QA follow-up) Adjust other occurrences and add line break
    
    This updates the other occurrences and adds html_line_break to all
    except the edit page - it seems html or raw doesn't affect the value of the textarea,
    but moved to raw for consistency
    
    To test:
    1 - Add an HTML note to a patron, make sure to add a line break:
    <h1>Testing</h1>
    <h2>Newline</h2>
    2 - Checkout to patron and return
    3 - Confirm note shows correctly
    4 - Add patron to a list
    5 - Confirm note displays correctly
    6 - Edit patron, confirm note field is correct
    7 - Batch modify borrower
    8 - Confirm note displays correctly in batch list
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2608e405de72d365ef472bc6e8f86d2051f3cda4
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Mar 17 21:36:23 2023 +0000

    Bug 25379: Add raw filter to circulation note on checkin page
    
    This is a consistency patch: we already allow adding HTML tags
    to the patron circulation note and the contents display
    correctly in the patron account and in the patron search results
    in the staff interface. But the HTML tags are printed on the
    checkins page.
    
    To test:
    * Add a circulation note including HTML tags to a patron
      Example: <h1>This patron is great!</h1>
    * Check an item out to this patron
    * Verify that the note displays formatted in patron search results
    * Verify that the note displays formatted in the patron record
    * Return the item
    * Verify the note shows the printed tags
    * Apply patch
    * Check item out again and check it in again
    * Verify the note now displays correctly in list of checkins
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 28738472465a9a78b556e5f462ce8ee39dab1c35
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Apr 16 12:19:40 2023 +0000

    Bug 32917: Fix sample notice for CHANGE_PASSWORD
    
    We've identified 3 issues:
    * Name of patron is not showing up in subject line
    * Name of patron is now showing in notice text
    * Notice is set to be HTML, but has no line breaks and uses no HTML tags
    
    In the database update, these issues don't occur:
    
    $dbh->do( q{
        INSERT IGNORE INTO letter (module, code, name, title, content, message_transport_type) VALUES ('members', 'PASSWORD_CHANGE', 'Notification of password change', 'Library account password change notification',
        "Dear [% borrower.firstname %] [% borrower.surname %],\r\n\r\nWe want to notify you that your password has been changed. If you did not change it yourself (or requested that change), please contact library staff.\r\n\r\nYour library.", 'email');
    });
    
    So this patch will make them match up:
    
    * Remove HTML flag
    * Update patron. to borrower. in message text
    * Remove patron name from subject (it won't work even with the correct variables)
    
    To test:
    * Add an email address to your favourite sample user
    * Make sure NotifyPasswordChange is set to "Notify"
    * Update the sample user's password using the "change password" feature
    * Verify a notice is shown in the notices tabs
      Note: you won't see the line break issue there because of bug 30287
    * Apply patch
    * Recreate your database/run web installer so sample notices are loaded
    * Repeat the test, it should generate a nice lookig notice now
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2496f6373ab7c3be31480e29050b11c0cdb7a964
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Apr 16 10:45:06 2023 +0000

    Bug 33253: Turn off autocompletion for 2FA authentication code
    
    The form for entering your authentication code shoudl not suggest
    previous codes.
    
    To test:
    * Activate TwoFactorAuthentication
    * Go to your patron account in staff
    * More > Manage 2-factor authentication
    * I used "Google authenticator" on my phone, so:
    * Open app on your phone, add new and scan the QR code
    * Enter activation code
    * Log out of staff interface
    * Log back in, you are now also asked for an authentication code
      as second step
    * Look up code in app, enter, get logged in
    * Log out, log back in - the form now suggests the previous code
      when you click on it
    * Apply patch
    * Reload things (restart_all on ktd)
    * Verify that you no longer get the suggestion
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1ba08f87f8bf5fed31c951736e3d941ef1c9e0c8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 31 14:11:55 2023 +0200

    Bug 32548: Replace while with map
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ca37cbf6ca48599ea39444d8360deffbee0750f9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 31 14:11:46 2023 +0200

    Bug 32548: Add tests
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 76cddd74b1519bcf69d1d2d7793cfca9a21eba5b
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Thu Dec 29 16:17:40 2022 +0000

    Bug 32548: Make illrequestattributes available in ILL emails
    
    Without this ILL module only provides very limited data to
    be included in the notices sent about the request itself.
    
    We have the columns illrequests, but not the illrequestattributes,
    that often will contain the more useful information needed.
    
    This patch enables to use values of the illrequestattributs using
    [% illrequestattributes.<attributname> %] in the notices.
    
    To test:
    * Apply patch
    * First you'll need to activate the ILL module and install a
      backend to use it with. FreeForm was used for this test plan,
      BLDSS is usually also good for testing.
      See: https://wiki.koha-community.org/wiki/ILL_backends
    * Also set up an SMTP server to use for notices and make
      sure the email address is set in KohaAdminEmailAddress
      and the user you are using for testing this with.
    * Make sure your user has an email address and will receive
      ILL notices by seleting them in the messaging preferences.
    * Create an ILL request with the FreeForm backend for your user.
    * On the ILL request detail page: "Display supplier metadata"
      Pick some attributes you want to use in the notice
    * Go to Tools > Notices and slips and edit ILL_REQUEST_UNAVAIL
    * Add some of the attributes you picked. Example:
      [% illrequestattributes.type %]
      [% illrequestattributes.title %]
    * Back to the ILL request detail page: Send notice to patron >
      ILL request unavailable
    * Go to your patron's account and check the notices tab
    * The generated notice shoudl show and include the information
      from the illrequestattributes you picked.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c8012d41041969c0ec69afb962ae6795ffa1926b
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Wed Feb 22 12:59:11 2023 +0100

    Bug 33037: Koha does not display difference between enumchron and serialseq in record detail view (OPAC and intranet)
    
    Patch 32555 tries to resolve the issue caused by bug 31313.  But the way it is fixed seems to be
    at least problematic.  With patch 32555 we will never see the difference between
    `serial`.`serialseq` and `items`.`enumchron` which is still intended in opac-detail.tt
    (line ~ 1332) and [intranet] catalogue/detail.tt (line ~ 446).  This is because
    ITEM_RESULT.serialitem (in opac-detail.tt) and item.itemserial.serial (in catalogue/detail.tt)
    refer to non-existing things.  (and therefor the problem described in 32555 no longer emerge).
    The original problem is caused by mixing up serialitem with serial in [opac-]detail.pl
    and passing serialitem instead of serial to both templates.
    
    To test:
    1. Create a serial subscription
       1.1. Go to Serials
       1.2. Click on New subscription
       1.3. Fill out the first form
            - Vendor: leave empty
            - Record: enter a record number
            - Create an item record when receiving this serial
            - When there is an irregular issue: Keep issue number
            - Manual history: leave unchecked
            - Call number: leave empty
            - Library: Centerville
            - Public/nonpublic note: leave empty
            - Patron notification: None
            - Location: None
            - Collection: None
            - Item type: Continuing resources
            - Grace period: leave empty
            - Number of issues to display: leave both empty
       1.4. Click Next (and confirm you are not using a vendor)
       1.5. Fill out the second form
            - First issue publication date: 2023-01-01
            - Frequency: 1/month
            - Subscription length: issues 12
            - Subscription start date: 2023-01-01
            - Subscription end date: 2024-01-01
            - Numbering pattern: Number
            - Locale: leave empty
            - Begins with: 42
            - Inner counter: leave empty
       1.6. Click Test prediction pattern
       1.7. Click Save subscription
    2. Click OPAC view: Open in new window.
    3. Back in the staff interface tab, receive an issue
       3.1. Click Receive
       3.2. In Status, choose Arrived for No. 42
       3.3. IN ITEM DETAILS BELOW CHANGE h - Serial enumeration / chronology
            from No. 42 to some different string
       3.3. Click Save
    4. Check the items in OPAC and Intranet – you will see only the value from the
       item $h subfield (enumchron) instead of desired "enumchron -- serialseq"
       in case of a difference between `serial`.`serialseq` and `items`.`enumchron`.
    5. Apply this patch
    6. Repeat 4
    7. Check the items in OPAC and Intranet – you should now see the desired
       "enumchron -- serialseq" string.
    8. Sign off
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Nick <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit af2792379c33ae82096b70e19810fd5e7fc73662
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu May 4 11:14:29 2023 +0000

    Bug 33672: Don't show item group holds on OPAC if not enabled
    
    This patch adds a check of the syspref 'EnbaleItemGroupHolds' to the
    opac request form
    
    To test:
    1 - Enable 'EnableItemGroups' system preference
    2 - On staff client, view a record details
    3 - Go to 'Item groups' tab, add a enw group
    4 - On holdings tab, select one or more items and add to group
    5 - View record in OPAC
    6 - PLace a hold
    7 - Note group option is visible
    8 - Apply patch
    9 - Refresh, no group option
    10 - Enable 'EnableItemGroupHolds' system preference
    11 - Refresh opac page, note group option is visible
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0d888fc4197d8d70ca3710d448d6a293f34ab4f8
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Apr 16 01:06:53 2023 +0000

    Bug 22375: (follow-up) Format even more due dates consistently
    
    To test:
    Create some checkouts in future and past, make sure to include
    some with a time != 23:59.CirculateILL
    
    Verify that the due date is displayed correctly on:
    * Catalog detail page > Items tab > Checkout status
    * Circulation start page > Renew > Renew one of your checkouts > dialog message
    * ILL request page: requires ILL setup and CirculateILL system preference
    * Patron acccount in staff > Print > Print summary
    * Catalog detail page > Holds > search for patron > due date on checked out items
    * Recalls:
      * Activate UseRecalls system preference, set up circulation rules to allow recalls
      * Checkout an item to another user
      * In the OPAC, place a recall on that record with yor use
      * Check "Recall a specific item"
      * Verify due date in item list
      * Place recall on checked out item
      * Patron account in OPAC > Recalls history (due date might have been changed through recall)
    * OPAC patron account > Summary > Overdue tab
    * Self checkout:
      * Activate WebBasedSelfCheck
      * Go to <opacbaseurl>/cgi-bin/koha/sco/sco-main.pl
      * Log in > Tab checkouts
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    JD amended patch - removed 'fda'
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e80d5fc0d0ae7085bd86d8e9c38d16d5de415e48
Author: Josef Moravec <josef.moravec@gmail.com>
Date:   Wed Feb 20 12:41:04 2019 +0000

    Bug 22375: Format due date consistantly
    
    Test plan:
    Make some daily an hourly checkouts and confirm the right display
    (hourly with hours and minutes, daily only date) of due date on these
    places:
    1) catalogue -> checkout history
    2) circulation -> overdues with fines
    3) <already fixed>
    4) circulation -> pending on site checkouts
    5) patrons circulation history
    6) opac -> account summary ->  relatives checkouts
    
    Note: I suspect the moremember-receipt.tt template is not used anymore
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4e599c790fa0a2e5909916b4f3335d2a7b2a20a9
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Thu May 4 13:59:03 2023 +0000

    Bug 33302: (QA follow-up) Rephrase errors to be more user friendly
    
    These error message will show within the patron account. The goal
    of this patch is to make them a little more user friendly avoiding
    'patron' and 'hold group' terminology :)
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ee318d20f5506e9b4c955633f0e9eddc9c171f29
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 28 11:31:42 2023 +0000

    Bug 33302: Send and display errors when a hold cannot be placed on the OPAC
    
    This patch changes opac-reserve.pl to return the error(s) when placing
    a hold as a pipe delimited list which is then translated to a message for the
    user
    
    To test:
    1 - Find a record with items available on the opac
    2 - Click 'place hold' and set things up, but do not confirm
    3 - In staff client, do something to make hold invalid:
        - Make item damaged
        - Make library not a pickup location
        - Place other holds for patron up to limit
        - etc.
    4 - Confirm hold on OPAC
    5 - You are sent to patron's account, hold is not placed
    6 - There is little or no message to explain why
    7 - Apply patch
    8 - Repeat
    9 - Now errors are clear
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1e5c55176ef4d70b1535040a576ab13d4561c53f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue May 2 17:24:08 2023 +0000

    Bug 33622: Notice content does not show on default tab if TranslateNotices enabled
    
    This patch fixes a conflict between the template-generated markup and
    Bootstrap JS which were both competing to show the correct default tab.
    It's simpler to rely on JavaScript.
    
    To test, apply the patch and enable the TranslateNotices system
    preference if necessary.
    
    - Go to Tools -> Notices & slips
    - Go to edit any notice e.g. DUEDGST
    - The page should load with the "Default" tab selected by default.
    - Enter unique titles and contents under each tab to confirm that the
      data you see under the "Default" or "English (en)" tab is being shown
      in the right place.
    - Save your modified notice and edit it again to confirm that the tabs
      correspond correctly to your data.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 82eb5d7d262a686ad6d3573e3e86a57e051c4f4c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Apr 17 19:24:18 2023 +0000

    Bug 33206: Unit test
    
    Signed-off-by: Nick <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1330bd7c8d2ac256c93e38b95a6040c3fda3db92
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Sat Mar 11 17:03:10 2023 +0100

    Bug 33206: Bad title__sort made of multifield 245
    
    In MARC 21, having title search field defined in mappings.yaml as 245abp
    (more than one subfield), the Koha generated title__sort will have not
    only $a, but also other subfields cut by ind2 characters, i.e.:
    
    245 04 $a Die Renaissance : $b Architektur, Plastik, Malerei, Illustrationen, Zeichnungen
    
    becomes as title__sort:
    
    Renaissance : itektur, Plastik, Malerei, Illustrationen, Zeichnungen
    
    instead of:
    
    Renaissance : Architektur, Plastik, Malerei, Illustrationen, Zeichnungen
    
    This is because copying an array of pointers in Perl causes you to
    point to the same (anonymous) element.  Therefore, the intended
    modification only for subfield "a"
    (Koha/SearchEngine/Elasticsearch.pm, ~line 1157) causes in fact
    modification for all the subfields sharing the same mapping
    definition and introduction of the nonfiling_characters_indicator to
    all subfields 245 when processing 245abp.  And this is obviously not
    what is intended and results (in some cases) with bad sort order
    when sorting by titles.
    
    Test plan
    =========
    1. Have a standard Koha ES installation. In mappings.yaml
       you should have 245abp for title search field.
    
    2. Insert / download / modify a record with 245 $b or $p,
        an article at the beginning of the title, and correctly
        set 2nd indicator. For instance:
    
    245 04 $a Die Renaissance : $b Architektur, Plastik, Malerei, Illustrationen, Zeichnungen
    
    3. In ES, with Kibana or culr, control the content of
       title__sort field for the related document.  It will be:
    
    Renaissance : itektur, Plastik, Malerei, Illustrationen, Zeichnungen
    
    4. Apply the patch, full reindex ES (--rebuild -r -d -a -b)
    
    5. In ES, with Kibana or culr, control the content of
       title__sort field for the related document.  It should
       be now correct, i.e.:
    
    Renaissance : Architektur, Plastik, Malerei, Illustrationen, Zeichnungen
    
    Signed-off-by: Nick <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3bb7ea2dab03863e827fbb21060ac98a16dcbf4f
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Apr 19 20:58:48 2023 -1000

    Bug 33569: Fix sort by relevance in catalog search
    
    When ordering catalog search by relevance from advanced search, this is not visible in sort order combobox in staff interface.
    
    This is because sort by relevance is a special case not using sort
    order.
    This patch add a new method C4::Context->default_catalog_sort_by to use
    in both staff interface and OPAC.
    
    Test plan :
    1.0) On staff interface
    1.1) Define system preferences defaultSortField = 'relevance' and defaultSortOrder = 'descending'
    1.2) Perform a catalog search from main page on any term, ie 'perl'
    => You see in sort combobox 'relevance' selected (with a check icon)
    1.3) Perform an advanced search on any term, ie 'perl', with sort by relevance
    => Without patch : you see in sort combobox 'relevance' not selected (no check icon)
    => With patch : you see in sort combobox 'relevance' selected (with a check icon)
    2.0) On OPAC
    2.1) Define system preferences OPACdefaultSortField = 'relevance' and OPACdefaultSortOrder = 'descending'
    2.2) Perform a catalog search from main page on any term, ie 'perl'
    => You see in sort combobox 'relevance' selected
    3.0) Run prove t/Context.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7323a56823c0b23faddd964206c8fc58431b769d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue May 9 10:36:40 2023 -0300

    Bug 33653: Use filter_by_active instead
    
    This patch makes `filter_by_lates` use the `filter_by_active` method
    instead of an ad-hoc query filter. It has the advantage that it
    considers standing orders too.
    
    No behavior change, tests should still pass.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 64c4f115cde75c48f71cfd0d7bdb220f48212daf
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 3 15:18:13 2023 +0200

    Bug 33653: Never consider received orders as late
    
    We should not list received orders on the late orders page.
    
    Test plan:
    * Create a basket
    * Create a normal order (not from a subscription, no standing order)
    * Leave estimated delivery date empty
    * Close the basket
    * Create a new invoice and receive the order line
    * Go to acq > late orders
    * Verify the order is not in the list
    * Set filter for 'To' date into the future, i.e. 01/01/2025
    => Without this patch the order shows up
    => With this patch applied the received order does not show up
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f7b1c85f736dad33b9e67fce2ac2219716c2b704
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Apr 24 09:27:43 2023 +0000

    Bug 33576: (QA follow-up) Polish comment, typo
    
    No test plan.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9af2f3d12cef6a679763117a0c086468868c79f5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 20 16:02:09 2023 +0000

    Bug 33576: Index records after import transaction is committed
    
    This patch simply moves our indexing call after the transaction is committed so
    that the job will exist in the DB when called.
    
    To test:
     1 - Have Koha using Elasticsearch
     2 - Stage and import a file of records
     3 - View the job in Admin->Manage jobs
     4 - Note it is not finished
     5 - Check log: /var/log/koha/kohadev/es-indexer-output.log
     6 - Note: [WARN] No job found for id=###
     7 - Apply patch
     8 - Stage and import
     9 - Note no error in log
    10 - Note successful completion of indexing job
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ff93ce714b37defe9575601daa25cf7d5e4ee58e
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Apr 25 23:11:17 2023 +0000

    Bug 33613: Use prop() to evaluate checkbox
    
    To test:
    1. Have an item with a replacement cost checked out to a patron
    2. Set the ClaimReturnedChargeFee sys pref to "Ask if a lost fee should be charged"
    3. Make a claim and check the box for charging.
    4. Claim happens but no charge occurs.
    5. Apply patch and try again.
    6. A charge should now occur.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Hinemoea Viault <hinemoea.viault@inlibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4ea2f11718ca7ec8d168cdd63edfe66a3ea5a9fb
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Apr 5 12:27:27 2023 +0000

    Bug 33412: Fix comparison when checking for overlay framework
    
    TO test:
     1 - Cataloging -> Export catalog data
     2 - Export a record fom your catalog
     3 - Cataloging -> Stage record for import
     4 - Import the record, use Record matchign rule: KohaBiblio (999c)
     5 - Stage, view batch
     6 - Record should match the one that was exported
     7 - When replacing record use this framework, choose a different value than current framework of record
     8 - Import this batch
     9 - View and edit record - note framework did not change
    10 - Apply patch
    11 - Restart all
    12 - Repeat 4-8
    13 - View and edit record, confirm framework has changed
    14 - Sign off
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ca784d740d8e5758196c523dbeb205942de7729c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 27 13:02:52 2023 +0000

    Bug 33611: Ensure dt_from_string always returns a new object
    
    This patch alters dt_from_string to pass a cloned object if called
    on an existing date time object
    
    This resolves an issue where a holds reserve date was being altered when
    the default expiration date was set
    
    To test:
    1 - Set DefaultHoldExpiration to Set
    2 - Set DefaultHoldExpirationPeriod to 365
    3 - Set DefaultHoldExpirationunitOfTimeToDays
    4 - Place a hold
    5 - Note reserve date is 1 year in the future, same as expiration
    6 - Apply patch
    7 - Restart all
    8 - Place another hold
    9 - Note reserve date is set to today
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Hinemoea Viault <hinemoea.viault@inlibro.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3551ef41a040c6da91e9b54dd7a030a1d6a6d266
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 27 13:02:24 2023 +0000

    Bug 33611: Unit test
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Hinemoea Viault <hinemoea.viault@inlibro.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b61414697254dee5c2b3539c04cda8133a2b2f50
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 3 16:54:06 2023 +0200

    Bug 33591: Restore auto-select of checkboxes of src record when merging
    
    When merging bib records the first tab (the source record) should have
    all the checkboxes checked by default.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0c1d7fe0fb7dca70cd3dd63a64c92803d35a4bb0
Author: Didier Gautheron <didier.gautheron@biblibre.com>
Date:   Thu Apr 13 08:03:40 2023 +0200

    Bug 33513: Remove whitespace in batch report lists
    
    Bug 32368 added whitespaces, remove them.
    
    To test:
     1 - Create a report like:
        SELECT biblionumber FROM biblio
     2 - Run it
     3 - Try the various options from the 'Batch operations' button
     4 - The operations don't find the biblios
     5 - Create a report like:
        SELECT cardnumber FROM borrowers
     6 - Run it
     7 - Test the batch operations
     8 - They fail
     9 - Apply patch
    10 - Run each report again and test batch operations
    11 - They work!
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2ef95d91424d8c45228a1ffb30ed1388a086ca84
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Apr 21 19:46:19 2023 +0000

    Bug 33586: Fix sequence of fields for memberresultst in table configuration
    
    The sequence of options actually matters, not the name.
    Library and category were switched, this patch fixes it and
    now it should all hide/show as expected:
    
    * Go to administration > table configuration
    * Hide library in memberresultst
    * Go to patron search and search
    * Verify that category was hidden instead
    * Apply patch
    * Verify now label and columns for library and category
      match with configuration.
    
    Signed-off-by: Lisette Scheer <lisette.scheer@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d6b5a7f7dfe581715ea34b71bdd4bab72fedc117
Author: David Nind <david@davidnind.com>
Date:   Thu May 4 20:25:01 2023 +0000

    Bug 33673: Change "global system preferences" to "system preferences"
    
    The Koha Community normally refers to "global system preferences"
    as just "system preferences".
    
    This updates the staff interface and other occurences to refelect
    this, including:
    - Administration > Global system preferences and the description
    - Patrons > [a patron] > More > Set permissions > Manage Koha
      system settings > Manage global system preferences
      (manage_sysprefs)
    - The installer files and the database (permissions table)
    
    Test plan:
    1. Note that in the staff interface "Global system preferences"
       is dispalyed in two places:
       1.1 Administration: Go to Administration. There is a section
           called "Global system preferences" with a description
           and a search box.
       1.2 User permissions: View the details for a patron > More >
           Set permissions > expand 'Manage Koha system settings' >
           scroll down to 'Manage global system preferences
           (manage_sysprefs)'
    2. Apply the patch.
    3. Update the database.
    4. Revisit the pages in step 1 - these should now show as
       "System prefereneces" or "system preferences" as appropriate.
    5. Sign off!
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    I agree with this change, consistency is good. As far as I can see
    this patch cathes all the occurrences of "global".
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 79188de0cda28761db6c23e4989f6b65f6dbfff7
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Apr 9 11:44:21 2023 +0000

    Bug 33356: Add mana-kb hint to reports start page
    
    An alternate placement of the Mana KB hint on the reports start page.
    
    To test:
    * Go to Reports module
    * Verify the hint shows when you haven't decided on Mana KB
    * Once you set yes or no, it will no longer show
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a2b880e57bb1ccd4b8270ec8bfdcdc86e18a2e48
Author: Philip Orr <philip.orr@lmscloud.de>
Date:   Tue Apr 25 10:34:09 2023 +0000

    Bug 28315: Remove duplicate function definition
    
    This patch removes the unnecessary second definition of the JS function PopupMARCFieldDoc from addbiblio.tt.
    To test:
    1. Apply the patch
    2. Check that addbiblio.tt contains only one function definition for PopupMARCFieldDoc
    3. Navigate to "Cataloging" -> "Add MARC record"
    4. Check that after clicking on the question mark symbol next to any MARC field, the loc description of that MARC field is opened in a new tab
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5771e6f463c72e17d42478c9970df1c7fb2286f8
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon Apr 17 00:34:05 2023 +0000

    Bug 32232: Ignore DST when calculating patron age
    
    This change calculates patron age using the floating timezone, so that
    datetimes missing midnight don't cause fatal errors in the comparison.
    
    Test plan:
    0. Apply patch
    1. Change <timezone></timezone> in koha-conf.xml to include Canada/Eastern
    2. koha-plack --restart kohadev
    3. Create a patron, setting the date of birth to one of these three dates
    - 1947-04-27
    - 1948-04-25
    - 1949-04-24
    4. Save the patron
    5. Patron detail page loads instead of producing fatal error
    
    Signed-off-by: Marius Mandrescu <marius.mandrescu@inLibro.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b1f623218a3c4ebcde2a7d8ababfa3b507b833e7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon May 8 09:34:56 2023 -0300

    Bug 33696: Fix doubled up home icon in budgets page
    
    To test:
    1. Go to the Administration > Budgets page
    => FAIL: Breadcrumbs show two little house icons
    2. Apply this patch
    3. Reload page
    => SUCCESS: Only one icon
    4. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eb5cc8d708faf7debcee35ce387329373e0bc40e
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Tue Feb 28 19:18:05 2023 +0100

    Bug 33093: (Bug 27546 follow-up) With ES searching within results does not work for 'Keyword' and 'Keyword as phrase'
    
    The feature of searching within search results in librarian
    interface has some problems with with elastic: 'Keyword' and
    'Keyword as phrase' searches give no results.  This is because
    elastic is unaware of the search field 'kw' and 'kw' is not
    transformed nor removed for limits.
    
    Test plan
    =========
    1. Have a Koha instance with reasonable number of biblio records
    1. Set SearchEngine to Elasticsearch
    3. In librarian interface, perform a search that would give
       you a list of results
    4. With the new search box 'Search within results', having 'Keyword'
       and 'Keyword as phrase' active, try to perform a search within
       search results with a term that should give you some results
    5. You should get no results
    6. Apply the patch
    7. Repeat steps 3 and 4
    8. You should get expected results.  Note the difference between
       'Keyword' and 'Keyword as phrase' in results
    9. Sign off
    
    Signed-off-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    
    Signed-off-by: Nick <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2553dcef237877625643d8f1fd74bf1d8f30056d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Apr 24 11:22:32 2023 +0000

    Bug 33601: Use template wrapper for breadcrumbs: Tools, part 8
    
    This patch updates several templates in the tools directory so that they
    use the new WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Tools ->
      - Tools home page
        - Log viewer
          - Search result
        - Uploads
          - Upload results
    - Cataloging ->
      - Upload local cover image
        - Upload result
        - Test uploading an biblio-level image from the bibliographic detail
          page
        - Test uploading an item-level image from the bibliograhpic detail
          page's holdings table
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit db488358fe8221414ab09d99846185317d77b7a0
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Apr 24 11:24:58 2023 +0000

    Bug 33600: Use template wrapper for breadcrumbs: Tools, part 7
    
    This patch updates several templates in the tools directory so that they
    use the new WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Tools ->
      - Task scheduler
    - Cataloging ->
      - Stage MARC records for import (use a batch of MARC records which
        will match existing records)
        - View batch ->
          - View diff of records with a match
      - Stock rotation (must have StockRotation enabled)
        - New rota
        - Edit rota
        - Manage stages
        - Manage items
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fc9ca425c80d895168a6a8be48f94f16aeb34fce
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon May 1 13:26:55 2023 +0000

    Bug 33643: Add page-section to 'scan index' page in staff interface
    
    This adds the white background. As we do on other pages I have
    chosen to include the h2 heading within the page-section.
    
    To test:
    * Go to advanced search in staff interface
    * Activate 'More options'
    * Check checkbox for scan indexes
    * Switch to author (especially when using Elasticsearch)
    * Search for C
    * On the result list verify there is no white background/page section
    * Apply patch
    * Repeat test - background should be present now
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Nicolas Giraud <nicolas.giraud@inlibro.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b7c1f3cf58fb48c6c96e762822262ce2dd8eeae6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jan 24 19:11:08 2023 +0000

    Bug 31799: (follow-up) Add 409 error to spec
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ead5f5c2f4bebd2baa61a3720664669c7039fc24
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Tue Jan 3 16:09:10 2023 -0300

    Bug 31799: (follow-up) Tidy up and fix duplicate barcode handling
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 51d50810fa39ce1e48835c5fcf1514bc729c7402
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Mon Jan 2 11:44:05 2023 -0300

    Bug 31799: Add REST endpoint to modify a biblio's item
    
    To test:
    1. Apply patch
    2. Set RESTBasicAuth preference to true
    3. Get a biblio with an item
    4. Make a PUT request to /api/v1/biblios/:biblio_id/items/:item_id with a json body that represents an item to replace
    5. Check that the item was modified
    6. Sign off
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c1c3b496689057688be0d1788d1c74d61aca1bef
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed May 3 21:28:30 2023 +0000

    Bug 33069: Fix error in MARC download for OPAC lists
    
    There was a code typo causing an error when you tried
    to download a list in MARC format:
    
    Not a CODE reference at /kohadevbox/koha/opac/opac-downloadshelf.pl line 93
    
    To test:
    * In the OPAC: create a new list, public or private, with some records
    * Open the list
    * Try to download the list as MARC
    * Verify you get an error
    * Apply patch
    * Verify you now get the expected download file
    * Sign off :)
    
    Co-authored-by: Kévin AYRAULT <kevin.ayrault87@gmail.com>
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Nasty error before the patch; nice, tasty MARC download after.
    Signed-off-by: Hinemoea Viault <hinemoea.viault@inlibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a2e93646370c50bc0bc46ae85504598626c5edb6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 5 17:41:20 2023 -0300

    Bug 33104: Add koha_object_class(s) definitions
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5e0c6b397d169e6470f85619844f8682c62e5b07
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 5 16:22:20 2023 -0300

    Bug 22440: (follow-up) Fix existing tests
    
    As we are introducing a FK for illrequests.biblio_id, TestBuilder is
    generating a linked biblio, and so tests expecting undef are failing.
    
    This fixes it by explicitly setting biblio_id => undef on creating the
    request.
    
    The patch also cleans the area a bit, removing a redundant and fragile
    test as well.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d0bcb1ca83acd2de9f8d58c2d4e8c0c79d73fb5c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 5 16:07:41 2023 -0300

    Bug 31798: (QA follow-up) Fix tests permissions
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b22f017a1684948e89b033966585468a16ad8341
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 5 15:53:31 2023 -0300

    Bug 22440: (follow-up) Nothing is forever
    
    This patch picks (yet) another class for testing purposes. The class
    needs to not implement to_api() and to_api_mapping().
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2056b5ecec2d1c861b64005451774dae1ff0f654
Author: Frédéric Demians <f.demians@tamil.fr>
Date:   Wed Mar 1 10:25:04 2023 +0100

    Bug 33102: Display fields from biblioitems in OPAC/staff interface cart
    
    The OPAC/PRO cart only displays biblio fields coming from 'biblio'
    table. Fields from biblioitems table aren't displayed anymore.
    
    TO TEST:
    
    1. Populate a cart in OPAC/staff interface and display it.
    2. You can see that Year column is empty (if you don't have copyright
       field). And other fields.
    3. Apply the patch.
    4. You can see more fields in cart simple/detailed view.
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Tested by having a record with:
    - biblio.copyrightdate = NULL
    - biblioitems.publicationyear = 2025
    Without the patch, no year is shown in the cart. With the patch, 2025 is shown.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f03185edf50fb962a32192b62e736bdfc5630da7
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri May 5 10:58:41 2023 -0400

    Bug 31798: (QA follow-up) Remove use Koha::Item, we already use Koha::Items
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 42c221cf1fe25311e015a1a1751f68964769314a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 3 12:08:46 2023 -0300

    Bug 31798: (follow-up) Handle all values of autoBarcode
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 141c7cdf1a20e3758a76744b0d20283b3cb149f5
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Tue Jan 3 12:12:39 2023 -0300

    Bug 31798: (follow-up) Tidy up and add duplicate barcode test
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a7c5b80d70a5c1d3087557b626e171c1b4ef4a02
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Fri Dec 30 12:18:37 2022 -0300

    Bug 31798: Add REST endpoint to add a biblio's item
    
    To test:
    1. Apply patch
    2. Set RESTBasicAuth preference to true
    3. Get a biblio
    4. Make a POST request to /api/v1/biblios/:biblio_id/items with a json body that represents the new item
    5. Check that the item is created
    6. Sign off
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 98ed8fe352f43a1971ccd4a034885577a843cdf3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 5 14:57:37 2023 -0300

    Bug 33053: DBRev 22.12.00.030
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ba88442f41ebfafb8fd925d4a5dbc4a32d49c3cd
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Fri Apr 28 04:08:13 2023 +0000

    Bug 33053: (QA follow-up) fix syntax error
    
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ec66ac97f065c63bc61b718e2dca204e03cae5f7
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Feb 23 08:31:46 2023 -0500

    Bug 33053: Remove default value for tables item_groups and recalls
    
    These default biblio_ids of 0 are harmless but incorrect. The default values should be removed.
    
    Test Plan:
    1) Apply this patch
    2) prove t/db_dependent/Koha/Biblio.t
    3) prove t/db_dependent/Koha/Recalls.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dea17b85651104196c9f511fc9bc731c68e8a373
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 28 15:56:54 2023 +0000

    Bug 33637: Update tab ids for batch modification form
    
    This patch adjusts the ids in the submit function
    
    To test:
    1 - Browse to tools -> Batch patron modification
    2 - Enter cardnumbers and submit
    3 - No patrons
    4 - Enter borrowernumbers and submit
    5 - No patrons
    6 - Apply patch
    7 - Repeat
    8 - Success, patrons are listed
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3811bb4381e34db7da1fd4593560fef519c4fde4
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Apr 11 20:41:28 2023 +0000

    Bug 33233: Don't allow disabled attribute to remain when using browser's back button
    
    To test:
    1. Go to OPAC advanced search and do a search using only one of the inputs.
    2. Once the search is complete use the browser's back button to return to the advanced search.
    3. Notice the unused inputs are disabled.
    4. Apply patch and try again. Now the inputs should not be disabled.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e4849e750b8e6cbfefa3e3f1177dbc6520e1d681
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Apr 24 10:51:50 2023 +0000

    Bug 33582: Use template wrapper for breadcrumbs: Tools, part 4
    
    This patch updates several templates in the tools directory so that they
    use the new WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Tools ->
      - Notices and slips
        - New notice
        - Edit notice
        - Confirm deletion
      - Batch patron modification
      - Overdue notice/status triggers
    - Cataloging ->
      - Manage staged records
        - Batch details
      - MARC modification templates
        - Edit actions for a template
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e51b9cffa2863619103c1f7f447a676a1fa99edb
Author: David Nind <david@davidnind.com>
Date:   Thu Apr 13 18:40:23 2023 +0000

    Bug 33532: Fix HTML page title for cataloging concerns page
    
    The HTML title of the Catalog concerns management page (which
    appears in the browser tab) says Catalog concerns > Tools >
    Koha. But the page is under Cataloging, not Tools.
    
    Test plan:
    1. Enable the CatalogConcerns system preference.
    2. Go to Cataloging > Catalog concerns:
       => The title of the page in the browser tab says Catalog
          concerns > Tools > Koha
    3. Apply the patch.
    4. Refresh the catalog concerns page.
    5. The title of the page in the browser tab should now say Catalog
       concerns > Cataloging > Koha
    6. Sign off 8-)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e8a187eb7422419592899ea12903f9ff29f96cfd
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue May 2 00:16:30 2023 +0000

    Bug 33645: Make koha-foreach return 0 if it completes successfully
    
    This patch adds an "exit 0" to the end of koha-foreach, so that it
    returns a successful exit code if it reaches the bottom of the script
    without errors.
    
    Test plan:
    0) `koha-foreach echo`
    1) `echo $?`
    2) Note that the exit status is 1
    3) Apply patch
    4) `./debian/scripts/koha-foreach echo`
    5) `echo $?`
    6) Note that the exit status is 0
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9ccc5ccce0bac6076badc5f8186d953e04fdcc6c
Author: Mason James <mtj@kohaaloha.com>
Date:   Thu Apr 27 15:24:07 2023 +1200

    Bug 33615: Date picker icon not visible
    
    to test:
    
     - apply patch, build package
    
     - edit item, observe calendar icon is visible
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1a86b2b1b731015aab9cfbad0fd8331d2ef9e2c9
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Apr 27 21:08:35 2023 +0000

    Bug 33631: Fix misaligned labels
    
    If you look at the results_summary on either the results
    or detail pages you will notice that the label and
    content are slightly misaligned.
    
    To test:
    1. On staff results, detail page, or ISBD details notice
       that slight misaligmnet between label and content.
    2. Apply patch, yarn_build, clear browser cache
    3. Look again, alignment should be fixed
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c2991bd6b0d233c240b9b5177a815ca53b1a08ef
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Apr 24 19:09:00 2023 +0000

    Bug 33596: Merge result page is missing page-section
    
    This patch adds a "page-section" container around the contents of the
    page seen when you complete the process of merging catalog records.
    
    The patch also adds the "merge was successful" message into the standard
    message dialog.
    
    Perform a catalog search which will return more than one record.
    
    - Select two records in your search results and click "Edit" -> "Merge
      records."
    - Complete the process of merging your selected records.
    - On the last page you should see a "merge was successful" message
      styled as the standard information box.
    - The "Report" section should be shown inside a "page-section" div.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 54cdae763365636e71a231432d5afff637796963
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Mar 17 22:42:47 2023 +0000

    Bug 33196: Generalize pseudonymization system preference description
    
    The Pseudonymization system preference description in
    the staff interface is: "Disable/Enable pseudonymization
    to comply with GDPR for personal information. Patrons and
    transactions will be copied to a separate table for
    statistics purpose."
    
    GDPR is a European Union (and, at time of writing, UK) law;
    it makes the system preference look irrelevant for
    libraries outside this area. However, this is not correct:
    pseudonymization may be useful for libraries anywhere.
    
    This generalized the system preference description and
    only uses GDPR as an example instead of the only purpose.
    
    It also updates the fields listed to more closely reflect
    the labels on the patron form.
    
    To test:
    * Search for "Pseudonymization" in the systme preferences
    * Verify that the description of the system preference is
      very GDPR
    * Apply patch
    * Verify the system preference description is improved
    
    https://bugs.koha-community.org/show_bug.cgi?id=33196
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5a5034792c5269ef11f2acddd3d6055886cded06
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Feb 4 23:54:22 2023 +0000

    Bug 31405: Set focus for cursor to setSpec input when adding a new OAI set
    
    Makes sure the focus is in the first form field when adding
    a new OAI set: setSpec
    
    To test:
    * Go to administration > OAI sets
    * Add a new set, verify the focus is still in the search bar on top
    * Apply patch
    * Repeat and verify the focus is now in the first form field
    * Save set
    * Edit set and verify the focus is in the search field at the top
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9a6d10dc312cd6fe5e33a72af6259ac9b05f6db7
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 17 08:33:41 2023 +0000

    Bug 32990: Prevent deadlock in _update_batch_record_counts
    
    Resolves:
    C4::ImportBatch::_update_batch_record_counts(): DBI Exception: DBD::mysql::st execute failed: Deadlock found when trying to get lock; try restarting transaction at /usr/share/koha/C4/ImportBatch.pm line 392
    
    See also bug 32558.
    
    Test plan:
    If you apply 32558 first, run multiple processes that stage a marc import.
    Without this patch, you can trigger the deadlock.
    With this patch, it works.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2504a282b5890168616c1a87206f8762c38a660d
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Feb 5 00:17:01 2023 +0000

    Bug 31410: Set focus for cursor to Server name when adding a new Z39.50/SRU server
    
    This makes sure that the focus is in the first form field when
    adding a new Z39.50 or SRU server.
    
    To test:
    * Administration > Z39.50/SRU servers
    * Add a new server for each
    * Verify the focus is not in the form
    * Apply patch
    * Verify the focus is now in the first form field
    * Edit an existing server
    * Verify the focus is not in the form
    
    Not having the focus when editing is to avoid accidental changes.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ab3ce787a1b32ec4e692c074749bd71e19cafda0
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Mar 29 08:33:30 2023 +0000

    Bug 33355: Add missing counter number to related users in agreements and licenses to be in line with other related content
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 715a3ec6359197a813cd62cddc190c7b989fa21d
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Mar 29 08:27:51 2023 +0000

    Bug 33355: Update forms markup to be in line with interface patterns
    
    https://wiki.koha-community.org/wiki/Interface_patterns
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 43ff73c01dc07846e35681a9c206a238c3dde98e
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Mar 28 14:23:04 2023 +0000

    Bug 33355: Fix is_perpetual radio buttons in AgreementsFormAdd
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d3995bf08a34d2f748db5d460936c00a6c842ce2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 31 10:01:59 2020 +0100

    Bug 23924: Reset the fields to add
    
    We do not want to copy fields from the previous records!
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c04accc95c5d0df4259d73bfab0ca8bd97cd5e71
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 30 09:12:39 2019 +0100

    Bug 23924: Add --date-field to add_date_fields_to_marc_records.pl
    
    The date used in the script will use this parameter, instead of today.
    
    Test plan:
    Use the POD of the script to understand how this flag works. Then use
    the script to create fields with a date contained in a specific MARC
    field.
    
    Signed-off-by: Hugo Agud <hagud@orex.es>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a702f57adf2913541fec8905fdba839aa58eb720
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Mar 1 15:26:30 2023 +0000

    Bug 21043: Handle exceptions and switch to debit response
    
    We were cheating a bit here and expecting a 'debit' to be sent in but a
    'line' to be returned.
    
    We should really be sending a debit and returning a debit.. so I've
    update the paths schema as such and we're now coercing the
    Koha::Account::Line object that's returned by Koha::Account->add_debit
    into a Koha::Account::Debit object. Longer term it would be nice to
    convert returns from the various Koha::Account methods to their correct
    Koha::Account:: objects as apposed to them all being the base ::Line
    
    I've also added some code to catch exceptions that can be thrown by
    Koha::Account->add_debit and added the appropriate 400 errors into the
    path specs again.
    
    Finally.. I added more unit tests to prove the above
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ab10759c5061ccbd957b667ddf345a4bc174769c
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Mon Feb 27 12:51:16 2023 -0300

    Bug 21043: Add debit REST endpoint
    
    This patch adds an endpoint to create a debit for a patron.
    
    Testplan
    
    1. Create a new account debit type (Administration > Debit types)
    2. Add a fee with this debit type to a patron’s account via API
    3. Make sure that this fee is shown in the accounting overview in the patron’s account in the staff interface
    4. Make sure that it is possible to make a payment for this fee
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1ecc49dc7aa2331dacebd9a6a0c5d6a88dacbdbe
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Thu May 4 14:09:10 2023 +0000

    Bug 29453: (follow-up) Add tests and fix minimum amount in credit.yaml definition
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f4c6a5dfd5785f16dc47f05db89dc8d23e74d674
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Nov 10 16:07:00 2021 +0000

    Bug 29453: Add endpoints for fetching patron credits & debits
    
    This patch adds two new API endpoints for fetching a patrons credits and
    a patrons debits.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Agustin Moyano <agustinmoyano@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 020f710e3100b56e30a70d1465e70bd671e3ed17
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Wed May 3 15:31:05 2023 -0300

    Bug 32735: (follow-up) Make Koha::Objects::Record::Collections->print_collection work with Authorities and Biblios
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 67cafa719bac557d15e4447507ff5ef6e4063c17
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Tue Feb 28 11:05:34 2023 -0300

    Bug 32735: Add endpoint to list authorities
    
    This patch adds an endpoint to list authorities
    
    To test:
    1. apply patch
    2. enable basic auth
    3. call to GET /api/v1/authorities with the following Accept headers:
     * application/json
     * application/marcxml+xml
     * application/marc-in-json
     * application/marc
     * text/plain
    4. notice how data changes with each Accept header
    5. prove t/db_dependent/api/v1/authorities.t
    6. sign off
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b2801da206e32e20bc64ef2fa0aa078440e86ba9
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Tue Dec 20 15:28:04 2022 -0300

    Bug 31796: Add REST endpoint to modify an authority
    
    To test:
    1. Apply patch
    2. Set RESTBasicAuth preference to true
    3. Pick an authority to modify, and modify it's marc record
    4. Make a PUT request to /api/v1/authorities/:authid with one of the following content type header
      - application/json
      - application/marcxml+xml
      - application/marc-in-json
      - application/marc
    5. If content type is other than 'application/json' place the following header in the request 'x-authority-type: <auth type>'
    5. Check that the authority was modified
    6. Sign off
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 88000fbccbcfe707ee3d8bf72f549c1ac11be3f3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 3 10:58:22 2023 +0000

    Bug 30367: (follow-up) Same adjustment for gitlab
    
    This adds the same update for gitlab code. I was unable to trigger the error,
    however, I confirm searching for 'PayPal' returns a result after this patch
    as well as before.
    
    JD amended patch: fix indentation
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b12aa543e2e2fe1c46eca4a0e07daa369b033793
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue May 2 16:27:15 2023 +0000

    Bug 30367: Skip processing if we don't get releases
    
    Some repos don't have releases, and this seems to break things as get returns an empty
    response. Calling from_json on this is the error
    
    This simply skips the bad responses to avoid the error:
    
    To test:
    1. Have this on your koha-conf.xml file:
    
     <plugin_repos>
        <repo>
            <name>ByWater Solutions</name>
            <org_name>bywatersolutions</org_name>
            <service>github</service>
        </repo>
        <repo>
            <name>Theke Solutions</name>
            <org_name>thekesolutions</org_name>
            <service>gitlab</service>
        </repo>
        <repo>
            <name>PTFS Europe</name>
            <org_name>ptfs-europe</org_name>
            <service>github</service>
        </repo>
     </plugin_repos>
    
    2. Restart all services:
       $ restart_all
    3. Search for the term 'barclaycard'
    
    The search will give an error:
    
    malformed JSON string, neither tag, array, object, number, string or atom, at character offset 0 (before "(end of string)") at /usr/share/perl5/JSON.pm line 190
    4. Apply patch
    5. Repeat
    6. No error
    
    Note: The barclaycard plugin won't install even though it is returned as of this note - the plugin needs an update I believe, I don't think it's a Koha issue
    Signed-off-by: David Nind <david@davidnind.com>
    
    JD amended patch: fix indentation
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit daa92a937193321c49c97cca5bad8809d7889d21
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 27 11:23:03 2023 +0000

    Bug 33626: Remove invalid params
    
    This patch reformats the params passed to scroll_helper as defined here:
    https://metacpan.org/pod/Search::Elasticsearch::Client::7_0::Scroll
    
    To test:
    1 - perl misc/maintenance/compare_es_to_db.pl
    2 - It dies:
    [Param] ** Unknown param (scroll_in_qs) in (search) request. , called from sub Search::Elasticsearch::Client::7_0::Direct::scroll_helper at misc/maintenance/compare_es_to_db.pl line 55.
    3 - Apply patch
    4 - Repeat
    5 - It succeeds!
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1a99af35f68c7624193069579d3944b4863216f3
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Nov 8 15:10:07 2022 -0500

    Bug 21699: Allow circulation messages to be editable
    
    During a Webinar discussion regarding the new placement of the circulation messages appearing in the Patron Detail page.  It was commented by a librarian that it would be nice to have the circulation messages editable. At times libraries need to keep a specific message on a patrons account with the details such as what branch it was written from and the staff member that wrote it, but it would be nice to be able to edit this message.
    
    Test Plan:
    1) Apply this patch
    2) Restart all the things!
    3) Browser to a patron record
    4) Create a new patron message
    5) Note the patron message now has an "edit" button
    6) Edit the existing message using the edit button and form
    7) Check the action logs for that message, note there is a modification
       logged to that message if BorrowersLog is enabled
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e38df2d6f7fd363193badff2380ebee63a702193
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 5 10:07:10 2023 -0300

    Bug 33197: DBRev 22.12.00.029
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bd75309933a92341a073d06e14bac1c6a6ceb666
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Mar 17 22:06:40 2023 +0000

    Bug 33197: Rename GDPR_Policy system preference
    
    GDPR is a European Union (and, at time of writing, UK) law.
    The GDPR_Policy system preference is about a patron
    giving consent to their personal data being processed in
    line with the library's privacy policy.
    
    The name of the preference is vague: there could be
    many policies implemented by libraries to comply with
    GDPR. It also makes the preference look irrelevant for
    libraries outside the areas where GDPR applies, while
    it may be useful for libraries anywhere.
    
    This renames GDPR_Policy to PrivacyPolicyConsent and
    adjusts the system preference descriptions.
    
    To test:
    * Apply the patch
    * Run database update
    * Search for GDPR_Policy in the system preference
      - you should not find anything.
    * Search for DataPrivacyConsent in the system preferences
      - you should find it and be able to activate it
    * Verify the feature works as expected
      - If the preference is set to "enforced", you will be
        asked to give consent to the data privacy agreement
        in the OPAC when you log in
    * Verify the page is now phrased neutrally using 'privacy policy'
    
    Bonus: Consent date is now formatted according to DateFormat
           system preference.
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 25b5428efd4b3511f6174a11c992c8d31546f965
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 5 10:00:00 2023 -0300

    Bug 33104: DBRev 22.12.00.028
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ca7a6b662c2af642152e02ae68a97eed6f969bb5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 5 09:56:19 2023 -0300

    Bug 33104: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit deda3fdd9ece2d45ace7428c3e17eb15c891342c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 14 08:14:47 2023 +0200

    Bug 33104: Rename interfaces.id with interface_id
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e6369764c75ca42619f20dc59aefa54a33f37975
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 11 12:23:32 2023 +0200

    Bug 33104: Remove fieldset
    
    For consistency with "Contacts"
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e92985359b3d8ee896eb6881fc7f76c94b8c960d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 11 12:03:42 2023 +0200

    Bug 33104: Prevent 'Type' to be cleared
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e5e4279a0469ce489b477a01a5ecfa128682bd6d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 11 11:59:04 2023 +0200

    Bug 33104: Add email validation
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 99e19c60eea301ca6dbc21fd827011584f065a48
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 11 11:45:00 2023 +0200

    Bug 33104: Fix translatability
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 833de7b52d31b0864e83d5341da5706a0378979c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 2 14:15:15 2023 +0100

    Bug 33104: Add tests
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 338bc9e0ef7c9bcf974ad645b82d696b817f4c64
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 2 14:40:42 2023 +0100

    Bug 33104: Display the VENDOR_INTERFACE_TYPE AVs in the dropdown list
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5be64ffebe1472dc8ffe5466d047d8db9a80874e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 2 13:41:16 2023 +0100

    Bug 33104: Encrypt password
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a089e061d29c98822e1270a72a66c1c87c79417e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 2 10:56:42 2023 +0100

    Bug 33104: Make the code reusable
    
    We could then reuse it for the contacts code in this same template, on
    another bug report.
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 06b1ca3bded11129bf6a4ede0d0d0f37a88b38f5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 1 15:53:22 2023 +0100

    Bug 33104: Add the ability to create vendor interfaces
    
    This patchset is adding the ability to create interfaces for vendors.
    An interface is a website, software, or portal that you use to manage orders or
    gather statistics from the vendor/organisation.
    
    It will help librarians to keep track of those different information
    within Koha.
    
    * new DB table aqbookseller_interfaces(id, vendor_id, type, name, uri,
    login, password, account_email, notes)
    * new AV category VENDOR_INTERFACE_TYPE with 3 example values ADMIN,
    ORDERS, REPORTS
    * new pair of Koha classes Koha::Acquisition::Bookseller::Interface[s]
    * new method to retrieve the interfaces from the vendor
    Koha::Acquisition::Bookseller->interfaces
    * Add/Delete interfaces when editing a vendor
    * Display the interfaces on the vendor show view
    
    Test plan:
    - Add a new vendor
    => Notice the new "Interfaces" block
    - Create some interfaces
    => They are display on the vendor show view
    => The password is hashed and can displayed on the demand
    
    QA Note:
    The "contacts" code is not very nice and I didn't want to replicate it,
    so I went another way and tried to make the code reusable, for further
    reutilisation.
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 087f4db2133eef07255bb4d4af8ae8769942d41d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 1 15:27:39 2023 +0100

    Bug 33104: Koha classes
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 177c0f3969a488c2c8d02d2f0d199f646a0da475
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 1 15:18:17 2023 +0100

    Bug 33104: DB changes
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a4b687c3aa992e12f406d37d02a15b4d92c6d6b6
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Aug 24 08:28:12 2022 +0100

    Bug 31448: Replace 'Print' with 'Receipt' dropdown
    
    This patch replaces the 'Print' button with a 'Receipt' menu dropdown
    exposing 'Print' and 'Email' options when `UseEmailReceipts` is enabled
    
    Test plan
    1. Enable `UseEmailReceipts`
    2. Navigate to a patron with paid charges
    3. Note the new dropdown 'Receipt' menu
    4. Confirm 'Print' works as expected
    5. Confirm 'Email' works as expected
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bdc2deba999e8a9b74d53108a66a9cc88732cf9f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Apr 11 12:04:17 2023 -0300

    Bug 31795: (follow-up) Mock call to FindDuplicateAuthority
    
    When running against Zebra, this tests fail because it requires the
    record to be indexed timely. In theory, a 5 seconds delay should be
    enough for the indexer to pick up. But that's not the point of the test,
    and we should better just mock the query in this case.
    
    To test:
    1. Have ktd launch with zebra:
       $ ktd up -d
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/authorities.t
    => FAIL: Tests fail!
    3. Apply this patch
    4. Repeat 2
    => SUCCESS: Tests pass!
    5. Launch ktd with ES:
       $ ktd down
       $ ktd --es7 up -d
    6. Repeat 2
    => SUCCESS: Tests pass!
    7. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 138c370746ce204bd646d11f6599d4b9582f3d2b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 10 14:54:30 2023 -0300

    Bug 31795: Fix required permissions
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 531d03e811811eb9f1afed1d94a40b072ec94b2f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 10 14:14:12 2023 -0300

    Bug 31795: (QA follow-up) Use x-koha-override header
    
    Despite its title, this patch does a couple more things.
    
    1. The tests are rewritten to cover more things, and also to avoid
       deleting all authorities inside the transaction. It is really not
       required.
    2. It makes the endpoint rely on the already generically implemented
       x-koha-override header, which is intended for the same use case as
       x-confirm-not-duplicate is for.
    3. It changes the return codes to match the coding guidelines [1]
    4. Only checks for duplicates if no override passed.
    
    To test:
    1. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/authorities.t
    => SUCCESS: Tests pass!
    2. Apply this follow-up
    3. Repeat 1
    => SUCCESS: Tests pass!
    4. Sign off :-D
    
    [1] https://wiki.koha-community.org/wiki/Coding_Guidelines_-_API#SWAGGER3.2.1_POST
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1cbe4c2e416b88ada7d03035bf0c4466cd867769
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Thu Apr 6 15:55:26 2023 -0300

    Bug 31795: Add REST endpoint to add an authority
    
    To test:
    1. Apply patch
    2. Set RESTBasicAuth preference to true
    3. Make a POST request to /api/v1/authorities with one of the following content type header
      - application/json
      - application/marcxml+xml
      - application/marc-in-json
      - application/marc
    4. If content type is other than application/json, then add the following header to the request: "x-authority-type: <auth type code>"
    5. Check that the authority is created
    6. Sign off
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 13dccaaf055b49473c1cc4a6ac34c0a23eb182a0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 3 11:16:14 2023 +0200

    Bug 32412: Do not reload COCE image for biblio
    
    We do not want to fetch again the new image for the biblio record. We
    only want to fetch those for the shelf browser.
    
    Note that the third parameter 'covernewwindow' was not used.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fec0bd18ae1e982232bf5b5d7d000c2bc6984589
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Apr 4 21:50:39 2023 +0000

    Bug 32412: Empty coce container before appending image
    
    To test:
    1. Apply patch and clear browser cache
    2. Turn on Coce for the OPAC.
    3. OPACShelfBrowser must be on
    4. Find a record that returns a cover image and open it's detail page.
    5. Use the next/previous navigation links in the OPACShelfBrowser
    6. Notice that no extra image is being added to the biblio-cover-slider.
    7. Make sure that Coce images still load correctly in on the OPAC detail page, OPAC results page, and in the shelf browser.
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 74497dbb5a9db2cf9c89a713ffe457370eefa7cf
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed May 3 20:51:49 2023 +0000

    Bug 33551: (QA follow-up) Fix TT filters
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 63f2d76457c75de103f8257761ef5287d78796d5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 3 09:09:25 2023 +0200

    Bug 33551: Remove span from restriction-types.inc
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 81f2ed7e39795ef2e2e2a7cd37af587b3fc72481
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue May 2 22:48:09 2023 +0000

    Bug 33419: (QA follow-up) Remove changes to basic_workflow.t
    
    These are not needed: 942 and 200 have no subfields for
    homebranch and holdingbranch.
    
    The tests pass without these changes.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a6caabfd2b0e2d5ad7c0b55a6273d62ea30807cb
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Tue May 2 18:35:23 2023 +0000

    Bug 33419: Make home library and current library mandatory by default
    
    Items without a home and current library can cause errors in Koha.
    On the bibliographic page, items appear without the "edit" drop-down
    or the selection check box. On a bulk delete page, items without
    a home library create a red error that says "Cannot delete".
    
    Making the home and current library values mandatory
    helps avoid these issues.
    
    Test plan (using koha-testing-docker (KTD)):
    1. Reset KTD so that the web installer is used to setup Koha.[1]
    2. Setup Koha using the web installer
       -> When setting up the default settings, don't add any of the
          optional data.
    3. Once setup and logged in, check the two frameworks (default and ACQ)
        and note that $952$a and $952$b are not mandatory.
    4. Apply the patch.
    5. Repeat steps 1-2.
    6. Once setup and logged in, check the two frameworks (default and ACQ)
       and note that $952$a and $952$b are now mandatory.
    
    [1] How to access the web installer to setup Koha in KTD:
    1. Access the database server:
       mysql -uroot -ppassword -hkoha-db-1
    2. Drop the koha_kohadev database: drop database koha_kohadev;
    3. Create the database: create database koha_kohadev;
    4. Add privileges (for a real installation this would be limited):
       grant all on koha_kohadev.* to koha_kohadev;
    5. Restart everything (there may be some errors listed):
       flush_memcached and then restart_all
    6. Access the web installer: go to 127.0.0.1:8081
    7. Use the database user name and password:
       get from /etc/koha/sites/kohadev/koha-conf.xml
       (default: koha_kohadev, password)
    8. Continue through the installation process.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5121f774604a533560c9a8e08ed357e30a5d1ddd
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Apr 14 17:21:15 2023 -0300

    Bug 33329: Correctly handle UNIMARC encoding for biblios
    
    This patch introduces the same treatment we had for bug 32336, this time
    for Koha::Objects::Record::Collections.
    
    To test:
    1. Apply the regression tests patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/biblios.t
    => FAIL: Tests fail! Encoding is wrong for UNIMARC!
    3. Apply this patch
    4. Repeat 2
    => SUCCESS: Tests pass!
    5. Sign off :-D
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 81fc1ebe71dd22eb9ce434ebc36234fcee26644b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Mar 23 20:46:44 2023 -0300

    Bug 33329: Regression tests
    
    This patch introduces tests for the bug highlighted on bug 32336, but in
    the context of lists of records.
    
    To reproduce:
    1. Run:
       $ prove t/db_dependent/api/v1/biblios.t
    => SUCCESS: Tests pass!
    2. Apply this patch
    3. Repeat 1
    => FAIL: Test fail, encoding is bad!
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 289f0e80517713814fb0752b932fe612ba2d0bc4
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Apr 23 21:16:52 2023 +0000

    Bug 32701: Fix I18N JavaScript libraries on self checkout help page
    
    The help page was missing the fixes from bug 28488. The missing
    libraries are causing a JavaScript error on the page and likely
    other issues.
    
    To test:
    * Make sure WebBasedSelfCheck is activated and configured
      Note: In ktd you don't need to configure anything, it's already set up.
    * In the OPAC, go to:
      /cgi-bin/koha/sco/sco-main.pl
    * Click on the link to the help in the top right corner
    * Verify you see the error in the console:
      jQuery.Deferred exception: __ is not defined
    * Apply patch
    * Restart things
    * Reload the page
    * Veriy the errors are gone
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 48a2952032bafde7041e7bf10d861e7efeff54fc
Author: Magnus Enger <magnus@libriotech.no>
Date:   Wed May 3 08:51:14 2023 +0200

    Bug 33649: Fix use of cronlogaction
    
    C4::Log::cronlogaction() takes a hashref as argument, with "info"
    and possibly "action" as keys. But there are a couple of places
    where it is called with just a string as argument, and that does
    not work. Both places need lock_exec to fail to trigger the error.
    I have seen this on a production server, but not been able to
    reproduce in ktd.
    
    To test:
    - Run this on the Koha repo: grep -r "cronlogaction(" *
    - Verify that fines.pl and process_message_queue.pl are the only
      scripts that call cronlogaction without a hashref as argument,
      but do it like this: cronlogaction( $message );
    - Apply this patch
    - Run the grep again and verify that all calls to cronlogaction
      now take a hashref as argument
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e3c31212df4d1917004a20998f47777ef0aea35d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Sun Apr 9 18:25:41 2023 +0000

    Bug 33470: Don't calculate overridden hold limits
    
    This patch can largely be checked in the code to ensure it makes sense, it
    moves a conditional up one level for the two different checks that could prevent holds
    
    To test:
    1 - Attempt to place a hold via the REST API with an invalid pickup location
        Set pickup location as no in branches to make this easy
    2 - Confirm you get an error
    3 - Attempt again with header (bug 27760):
        x-koha-override: any
    4 - Hold is placed
    5 - Repeat 1-4 above but with an item that cannot be held
    6 - Apply patch
    7 - Repeat 1-4 above
    8 - Results should be the same
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e074ffa6be15c97e6724041b12d930ed70855f1d
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Feb 8 23:28:59 2023 +0000

    Bug 32921: Honor SelfCheckTimeout when modal is open
    
    To test:
    1. Set the 'SelfCheckTimeout' system preference to something low for testing.
    2. Make sure 'SelfCheckReceiptPrompt' is set to 'Show'.
    3. Log in to SCO and press finish but leave the modal open.
    4. Wait until the 'SelfCheckTimeout' time has expired, nothing happens.
    5. Apply patch and try again. You should be logged out when SelfCheckTimeout expires.
    
    Signed-off-by: Marius Mandrescu <marius.mandrescu@inLibro.com>
    
    JD amended patch - fix indentation
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f394bf61cf7e60058afd9856f7ae8dda8afb385b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 4 09:05:17 2023 +0200

    Bug 28267: Simplify things
    
    We don't need:
    * a separate Koha::Installer module when we already have
    C4::Installer
    * the tests as they are actually modifying the DB structure
    without rolling back
    * An unecessary complicated subroutine, just make is simple
    
    WNC amended patch: Remove change to Koha.pm
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b76fb9cf466dd4cc4eb4d382c4bfb9fa78a1fce6
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Jan 18 03:20:29 2023 +0000

    Bug 28267: Add warnings for database row formats
    
    This patch adds a warning on about.pl regarding database row formats
    other than "DYNAMIC". It points to the Koha community wiki for more
    information on how to resolve the problem.
    
    This patch also stops the installer if there are any database tables
    with a row format other than "DYNAMIC". It points to the Koha community
    wiki for more information on how to resolve the problem.
    
    Test plan:
    0a. Apply the patch
    0b. koha-plack --restart kohadev
    1a. koha-mysql kohadev
    1b. ALTER TABLE tags ROW_FORMAT=COMPACT;
    2. Go to http://localhost:8081/cgi-bin/koha/about.pl
    3. Note that there is a warning about database row formats
    4a. koha-mysql kohadev
    4b. ALTER TABLE tags ROW_FORMAT=DYNAMIC;
    5. Go to http://localhost:8081/cgi-bin/koha/about.pl
    6. Note that there is no warning about database row formats
    
    7a. Manually change the version in Koha.pm to a higher version
    7b. koha-plack --restart kohadev
    8a. koha-mysql kohadev
    8b. ALTER TABLE tags ROW_FORMAT=COMPACT;
    9. Go to http://localhost:8081/
    10. Log into the web installer and click through until you reach
    a warning telling you that you have database row formats other
    than 'DYNAMIC'
    11. Note that you can't progress with the installer until
    this problem is resolved
    12a. koha-mysql kohadev
    12b. ALTER TABLE tags ROW_FORMAT=DYNAMIC;
    13. Refresh the page or redo the web installer process
    14. Note that you're no longer blocked from running the installer
    due to database row format
    15. Undo your change to Koha.pm
    16. Profit
    
    Note: Due to bug 32665 you'll see an unrelated warning on
    step 3
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0587d3238692429b704f4e79d62635b6aa86f29a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 5 09:32:48 2023 -0300

    Bug 33262: DBRev 22.12.00.027
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7a779bf9e0d2c2732ad6df050f1f64b4bb69386a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 5 09:31:58 2023 -0300

    Bug 33262: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4ab67c196debf387f2053c3916f4cdac76901db3
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Thu May 4 15:06:45 2023 +0000

    Bug 33262: Add new field to REST API route for orders
    
    Without this patch the API driven list of pending orders
    on the order receive page was broken.
    
    With the patch, all should be well now.
    
    prove -v t/db_dependent/api/v1/acquisitions_orders.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 177b53d79492f7636c5e9e37a6e1f3c3f8fa8707
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Thu May 4 13:08:54 2023 +0000

    Bug 33262: Unit tests
    
    prove t/db_dependent/Biblio.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c8faeac4cd4cfdeab04c25bedb534d3823bbe83c
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Thu May 4 12:15:36 2023 +0000

    Bug 33262: Store the biblionumber of a deleted record in the order line
    
    When a bibliographic record is deleted and linked to an order
    in the acquisition module, the biblionumber in the order line is
    currently deleted as well. This makes it impossible to tell what
    was ordered in the first place. This is a big issue for libraries
    that need to be able to track how money was spent over long periods
    of time.
    
    With this patch the biblionumber of the deleted record will be moved
    to a new column deleted_biblionumber in the order line, keeping the FK
    on biblionumber.
    
    To test:
    * Apply patch, run dataase update
    * Create a order/basket in the acquisitions module
    * Order several things, you can use existing records from the sample data
    * Make sure you order one of the records at least twice
    * Take a look at the aqorders table in your database, using a report:
    
      SELECT biblionumber, deleted_biblionumber, ordernumber from aqorders;
    
    * From the catalog, delete the items on the records and then the records
    
      Note: There is a warning about attached orders warning about consequences
      for acquisitions. I have chosen to keep it at this point in time, as
      there are still visible side effects of deleting the record, like bug 10758.
    
    * Re-run the report and compare results to the first run. deleted_biblionumber
      should now be filled with the biblionumber of the deleted record.
      biblionumber should be NULL/empty.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0cf7687e833986d95ce9fa49bdb33252944fbbea
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Thu May 4 13:23:31 2023 +0000

    Bug 33262: Add deleted_biblionumber column to aqorders table
    
    This adds a new column deleted_biblionumber to the aqorders table.
    This will allow us to store the biblionumber of a deleted record,
    so we will still be able to tell what has been ordered once the
    record is deleted.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 95520f0fb5459244ca10462e2c4c4215311cfea2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 5 09:12:47 2023 -0300

    Bug 22440: DBRev 22.12.00.026
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6a35d9fbedfcc144ec12ac458577e984c8db933c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 5 09:10:31 2023 -0300

    Bug 22440: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 50909d22668486685343df6b3e7b17f68cf7f243
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Apr 27 16:08:56 2023 +0000

    Bug 22440: Move backend statuses api endpoint
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3cfce3b79646657a22a6b5accc87f8e961a8c1f0
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Mar 30 12:07:05 2023 +0200

    Bug 22440: Tests
    
    Updated API tests
    
    Co-authored-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 313ce33b22509b2cdb349f1e4bc2793d8d972050
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Apr 24 15:28:28 2023 +0000

    Bug 22440: ILL API changes
    
    * Add GET /illbackends/{id}/statuses
    * Change API route to ill/requests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 33084fb40c772ec1f76cbbcb06bcbfc5b87a3042
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Mar 30 12:07:17 2023 +0200

    Bug 22440: New ILL requests table
    
    Use kohaTable requesting the REST api instead of the old KohaTable
    
    Co-authored-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e64fd9aafc2b4b554429dcbbffda929c97e46cf8
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Mar 30 11:01:08 2023 +0200

    Bug 22440: Add GET /ill_requests
    
    Co-authored-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4b470e43a2a6d3e7608903f3693e1e7c37853a27
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Mar 30 10:54:51 2023 +0200

    Bug 22440: Add standard accessors for later usage
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6f663221946a9d9ab5bdba586c2696f3302ebd30
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Mar 30 10:49:51 2023 +0200

    Bug 22440: Add missing foreign key
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1a186826e46212ed7a2acbf9e63e0b6eb8e6cc79
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jan 6 12:48:39 2023 -0300

    Bug 22440: Add Koha::Illrequests->filter_by_visible
    
    This patch introduces a method for filtering out requests that match the
    statuses specified on the *ILLHiddenRequestStatuses* system preference.
    
    To test:
    1. Apply this patch
    2. Run:
       $ kshell
      k$ prove t/db_dependent/Koha/Illrequests.t
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f214582bddeaaa5eb6d692e98408751370fb71bc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Apr 19 08:53:03 2023 +0200

    Bug 32931: Fix translatability issues on 'show agreement' view
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1278b9f4fdab6b5863b8147aa9e9dc7d08064798
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Apr 16 11:29:39 2023 +0000

    Bug 32931: Fix translatability issues on 'new agreement' form
    
    This fixes the "Yes" and "No" options and "License info" placeholder.
    
    To get to the options:
    1. Enable the ERMModule system preference
    2. Go to E-resource management
    3. Click "Agreements"
    4. Click "New agreement"
       --> Field "Is perpetual", options are Yes and No
       --> At the bottom of the form "License info" with "License info"
           within the input field
    5. Install (complete) language, verify those are not translated
    6. Apply patch
    7. Update po files
    8. Verify strings exist for this file, translate if necessary
    9. Re-install language
    10. Verify strings are now translated
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 827df32798cd8046d62cb6630fd33395d78fb3ef
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon May 1 22:13:02 2023 +0000

    Bug 32253: Load all CodeMirror lines initially when using advanced editor
    
    To test:
    1. Have advanced editor turned on.
    2. Load a record with many lines and see that not all the lines appear until you click on the visible ones.
    3. Apply patch and try again
    4. All lines should load.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3259fb122c9a035bfdf3613df5317c024a9b0375
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Apr 21 20:13:04 2023 +0000

    Bug 33588: Add page-section to inventory tool items list
    
    The table with items created by the inventory tool was
    missing the page-section class and therefore had no
    white background.
    
    To test:
    * Go to cataloguing > inventory
    * When you don't have a lot of data: just submit the form
    * Look at the result list, confirm missing white background
    * Apply patch
    * Confirm the background is now correct
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8f84bc082b6d71cc14554153bb4c062ae918186c
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:55 2023 +0100

    Bug 32874: Fix cataloguing/value_builder/unimarc_field_700-4.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 80d73b87c45ddcfbb75c38a6e51506330da9ece7
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Apr 21 12:53:15 2023 +0000

    Bug 33490: Add test
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a94026741c771df0ecb1f36bdba0d24c2e43f6f9
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Apr 21 11:48:55 2023 +0000

    Bug 33490: Fix ambiguous query error
    
    Doing actual testing with some agreements with expired periods, this was returning a 500 error
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e52f8625531b65a291bde2bf940da1c8b6c91bd9
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Apr 21 11:42:05 2023 +0000

    Bug 33490: Rollback computed
    
    Use a watch instead
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e3576f67d92f80400b4163bd00e795577254f1ad
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 14 12:05:44 2023 +0200

    Bug 33490: Use computed values
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e3286c4b0b82ef976f75fb3892d609d71ac7b74d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 14 11:09:33 2023 +0200

    Bug 33490: Improve max date handling
    
    It fixes:
    1. /agreements?by_expired=true do no longer explode
    2. Fill date with today's date when we setup the component and when we
    hit "filter"
    
    However there are a couple of things totally wrong:
    1. We should not need is_fp_disabled, we could be able to use
      :disabled="!filters.by_expired"
    in the template, but it does not work
    2. We should not need to deal with filters.max_expiration_date the "old
    JS way", but should use a Vue computed value instead. I've failed at
    that
    
    I think those 2 problems have the same root, the way we deal with
    filters in data() is wrong, and we may be loosing the ref at some point.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f9cb6b823e1e54008a79deb38bdd36c7f2105328
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 13 18:12:13 2023 +0100

    Bug 33490: Make url consistent
    
    This ensures we populate the max_expiration_date param on the browser
    url for consistency with selected dates.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 90ed8a26c5bdf7c67cfeeb517e08f3ed1b0624a7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Apr 12 12:20:43 2023 +0200

    Bug 33490: Prevent 400 on agreements?by_expired=true
    
    We need to update the filter THEN update the current route
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6f68b350ba24acbcd94179b6f005949a2f1f908f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 13 14:38:58 2023 +0100

    Bug 33490: Unit tests
    
    This patch adds cypress tests for the filter by expired functionality in
    the ERM Agreements page.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 358cb91a72e85d6ec0e85b8d88b1793062113bd3
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Apr 12 20:59:34 2023 +0000

    Bug 33505: Improve styling of scan index page
    
    This patch makes some changes to the 'scan index' page.
    
    * Updates second h1 heading "Scan index:" to h2 level heading "Scan index"
    * Removes table from the search form
    * Moves search index pull down and search term into one line
    * Reorders options with search index first and search term after, matching
      the advanced search form
    * Removes the catalog results toolbar from the top, card hold etc. are not needed
      here.
    * Fixes doubled up id attribute: scan-index by turning one into scan-index-term.
    
    To test:
    * Go to advanced search in staff interface
    * Activate 'More options'
    * Check checkbox for scan indexes
    * Switch to author (especially when using Elasticsearch)
    * Search for C
    * Check display, especially search options, options at the top of the page etc.
    * Apply patch
    * Verify changes listed above
    * Regression test the normal search results, all should look the same with and without patch.
    * If you think the scan index page is nicer now - sign off.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 970fe62f785ce06ca57a8bae8936158c632069ea
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Apr 12 20:19:38 2023 +0000

    Bug 33506: Fix false index for series and keep selected index on scan index page
    
    The pull down with search options had the wrong index
    linked to the Series entry: su instead of se
    
    To test:
    * Go to advanced search in staff interface
    * Activate 'More options'
    * Check checkbox for scan indexes
    * Switch to author (especially when using Elasticsearch)
    * Search for C
    * Verify search results link to authors using c
    * Switch to series
    * Verify search results use 'su' for subject
    * Verify that search option pull down always jumps back to first
      entry: Any word
    * Apply patch
    * Verify the search results for series now use correct index se
    * Verify that coming from advanced search, the correct search option is selected
    * Verify that changing the search option also keeps the selection after searching
    
    Note: with Elasticsearch and default configuration author, title and series will
    give you results.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 601c597726e4812c2edf15f39a9d9d3f76b3b543
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 5 09:12:01 2023 -0300

    Bug 32745: DBRev 22.12.00.025
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 15e234e5963c9c426541c76d599e5b561fd542ad
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 24 11:17:58 2023 +0100

    Bug 32745: Adjust context for invalid background jobs
    
    We had some problems recently and it's possible to have
    background_jobs.context=NULL
    But the REST API specs is expecting an object.
    We could either modify the specs, or adjust the incorrect entries in DB,
    which is IMO better.
    
    Test plan:
    0. Don't apply the patch
    1. Create some background jobs
    2. Set context to NULL
    UPDATE background_jobs SET context=NULL;
    3. List the jobs and note the datatable error, and the error in Koha log
      OpenAPI >>> GET api/v1/jobs [{"message":"Expected object - got null.","path":"\/body\/0\/context"},{"message":"Expected object - got null.","path":"\/body\/1\/context"}]
    
    4. Apply the patch
    5. Run `updatedatabase`
    6. Confirm that the list and detail view are not working correctly
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f99bcfb6521835e6d21cad3c83973aefb0f16cf4
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Apr 24 10:51:15 2023 +0000

    Bug 33597: (follow-up) Two other occurrences for holdfor
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7e5e311cb0c88b9223ce98d685668962edc7baee
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Apr 24 10:35:26 2023 +0000

    Bug 33597: Fix deleting cookie for holdfor(club)
    
    Resolve:
    Cookie “holdfor” does not have a proper “SameSite” attribute value. Soon, cookies without the “SameSite” attribute or with an invalid value will be treated as “Lax”. This means that the cookie will no longer be sent in third-party contexts. If your application depends on this cookie being available in such contexts, please add the “SameSite=None“ attribute to it.
    
    Did not see warning for holdforclub. But since it is created with Lax, we should remove it with Lax.
    
    Test plan:
    Similar to previous patch. Check console on logout page.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 95de1f3e92947f157dbbbf789d88beb48645648b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Apr 24 10:23:19 2023 +0000

    Bug 33597: Get rid of warning about intranet_bib_list
    
    Resolve:
    Cookie “intranet_bib_list” does not have a proper “SameSite” attribute value. Soon, cookies without the “SameSite” attribute or with an invalid value will be treated as “Lax”. This means that the cookie will no longer be sent in third-party contexts. If your application depends on this cookie being available in such contexts, please add the “SameSite=None“ attribute to it.
    basket_22.1200022.js:67:65
    
    Test plan:
    Do not apply this patch.
    Logout from staff.
    Check browser console warnings.
    Apply this patch.
    Login and logout again.
    Check warnings again.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 18137030ffe5d2187121e311a4394ff2f1a6e94e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Apr 24 11:21:42 2023 +0000

    Bug 33598: Use template wrapper for breadcrumbs: Tools, part 5
    
    This patch updates several templates in the tools directory so that they
    use the new WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Tools ->
      - Pages ->
        - View a page in the staff interface
      - Upload patron images
        - Upload results
      - Quote editor
        - Quotes upload
      - OPAC problem reports (must have OPACReportProblem enabled)
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 266a3ea00ea21efe74992ae021ea883d2d3eb3b3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Apr 19 19:10:18 2023 +0000

    Bug 33566: Use template wrapper for breadcrumbs: Tools, part 1
    
    This patch updates several templates in the tools directory so that they
    use the new WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Tools ->
      - Batch extend due dates
      - Access files (it is not necessary to have file access configured to
        test, there are no variations to the breadcrumbs)
      - News, HTML customizations, and Pages: For each category check each
        variation:
        - List of entries
        - New entry
        - Edit entry
    - Cataloging ->
      - Batch record deletion
      - Item modifications by age
        - Edit rules
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9d683d4e32f9c490868fa83a03ce308209e75059
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Apr 19 18:17:46 2023 +0000

    Bug 33564: Use template wrapper for breadcrumbs: Serials part 3
    
    This patch updates several serials templates so that they use the new
    WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Serials ->
     - Manage frequencies
       - New frequency
       - Edit frequency
     - Manage numbering patterns
       - New numbering pattern
       - Edit numbering pattern
     - Search subscriptions -> View subscription details
       - If necessary, edit the subscription to enable "Manual
         history"
         - Under the "Planning" tab of the detail page, click
           "Edit history"
       - If necessary, edit the subscription and select a notice under
         "Patron notification."
         - Under the "Information" tab of the subscription detail page,
           click "subscribers"
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3e742755ab1f7b59aea7d8e257c1590fc487ca75
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Apr 18 16:18:24 2023 +0000

    Bug 33559: Use template wrapper for breadcrumbs: Serials part 2
    
    This patch updates several serials templates so that they use the new
    WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Serials ->
      - Serials home page
        - New subscription
        - Serials search results
          - Subscription details -> Edit subscription
          - Subscription details -> Serial collection -> Edit serials
          - Select one or more seach results and click the "Edit selected
            serials" to test the batch edit page
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fb940cf8c4ad9537e7c7c5ca47124b852ab3703d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Apr 17 17:14:05 2023 +0000

    Bug 33437: Use template wrapper for breadcrumbs: Reports part 2
    
    This patch updates several reports templates so that they use the new
    WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Reports ->
      - Most circulated items
        - Report results
      - Items with no checkouts
        - Report results
      - Catalog statistics wizard
        - Report results
      - View dictionary
        - New definition (steps 1-5)
      - Saved reports
        - View report
        - New report
        - Edit report
      - Guided reports
        - Build a report
          - Steps 1 through 6
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0d1278aa14bf2a161df87c9d73f105b2c96c5022
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Apr 28 15:53:19 2023 +0000

    Bug 33634: Correct anchors in system preference submenu
    
    To test:
    1. Go to Koha Administration -> Global system preferences
    2. Go to a tab with a few headings like Circulation
    3. Click on a heading in the sidebar navigation under Circulation that takes you a bit down the page, like Recalls
    4. Notice this anchor link does not work, you are not taken to the recalls preferences
    5. Apply patch
    6. Try again, the links should take you to the proper place.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 28dc7f1f02b0515648b76abd71eaa142f5f52396
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 3 16:15:28 2023 +0200

    Bug 19249: Fix date inputs on patron quick add form
    
    This patch create a "apply_flatpickr" JS function to make the code
    reusable from the template, where we loop over the date inputs to
    reinstantiate flatpickr.
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e40135a219e85f91f134bb8c3edc3593d060e8a5
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Apr 28 09:58:19 2023 +0000

    Bug 33621: (QA follow-up) Typo formated_date
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9060282c3b47db28c2c5202c27ba7d277fdfc6c7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 27 06:49:03 2023 +0200

    Bug 33621: Fix claim return
    
    To test:
    
    1. Set the CaimReturnedLostValue system preference to one of your LOST authorised values
    2. Check out an item
    3. In the checkouts table, claim return
    4. Notice the processing icon keeps spinning
    5. Apply the patch
    6. Check in the item and resolve the return claim to clear it
    7. Check out an item
    8. In the checkouts table, claim return
    9. Confirm the checkouts table reloads and the return is claimed as expected
    
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 00629fe94f728fda4d24a64855ed2768a88e0357
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Mar 23 19:46:48 2023 -0300

    Bug 33328: Rename x-marc-schema => x-record-schema
    
    This patch renames the header on the biblio API so it is not entirely
    tied to MARC, trying to follow the biblio_metadata table generic
    approach.
    
    To test:
    1. Apply this patch
    2. Run:
       $ prove t/db_dependent/api/v1/biblios.t
    => SUCCESS: Tests pass
    3. You agree with the change?
    4. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Change sounds reasonable. Tests pass before and after patch.
    "grep -r "x-marc-schema" *" confirms no occurrences after patch.
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a3a58b93c3d1c78153dec8a3e5849561f7cf6607
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Apr 26 12:50:03 2023 +0000

    Bug 32250: (follow-up) Remove use of AutoCommit=0
    
    This patch moves to using txn_begin and txn_commit
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Bug 32250: (follow-up) Remove one more dbh commit and don't start a new transaction when done
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bfc1e3c226932df939b616603076120498cf74a5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 20 15:53:10 2023 +0000

    Bug 32250: (follow-up) Commit background job to the DB
    
    We can't run a background job if it isn't in the database, however,
    this script runs with AutoCommit disabled. We need to enable it while
    generating the background job, then disable for the updates.
    
    I don't nkow if using a transaction would be preferable.
    
    I tried to solve this independently, but it requires consolidating the
    index requests to make this work easily
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cacc16c659ba64ea75602c5122e87c8337a11bbe
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 13 20:07:01 2023 +0000

    Bug 32250: Only reindex records when commiting
    
    This patch adds an array to catch updated bibs, and defers indexing until a
    batch of changes is committed
    
    To test:
    1 - Set LinkerModule system preference to either first or last match
        Alternate this between runs of the linker to ensure changes are made
    2 - Set SearchEngine to Elasticsearch and reindex (to ensure index is built)
    3 - perl  misc/link_bibs_to_authorities.pl -v
    4 - Check Admin->Jobs and see that many ES index jobs are queued
    5 - Apply patch
    6 - perl  misc/link_bibs_to_authorities.pl -v
    7 - Check Admin->Jobs and see that 1 index per commit from is enqueued
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d29e5c6e0f3e43b8598cfce6b06f45605fc7a84e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 13 19:42:53 2023 +0000

    Bug 32250: Linking authorities does not change holdability
    
    If the only change is a linked heading, we don't need to rebuild
    the holds queue
    
    To test:
    1 - Set preference RealTimeHoldsQueue to enable
    2 - Run link_bibs_to_authorities
    3 - Note holds queue jobs generated
    4 - Apply patch
    5 - repeat
    6 - No holds queue updates
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b7feb64619e9b78cfc1f4f739790d7d264e4af2f
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Apr 28 10:23:35 2023 +0000

    Bug 33623: Move ULSearchParams into http-client.js
    
    Remove unused getAll methods in erm-api-client.js
    Make use of new getAll query in AgreementRelationships
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2ec95963f6079fa9ab27bec070518527953f885e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 27 08:43:26 2023 +0200

    Bug 33623: Encode URL params for getAll
    
    We must encode properly URL parameters when building the REST API routes
    
    Can be tested easily using
    const client = APIClient.erm
    client.licenses.getAll({ "me.name:%ff%" })
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 744ac4825ba9a346e2ad1c8e413d3d9423658512
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Apr 12 11:49:51 2023 +0100

    Bug 33504: Update patron_to_html to deal with null
    
    In the patron_to_html function we were dealing explicitly with the case
    where patron may be passed undefined, but forgetting that it may be
    returned as 'null' from the api too.  Changing from `( patron ===
    undefined )` to `( patron == null )` is the recommended approach for
    detecting 'undefined or null' in javascript.
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Works as advertised. Martin's test plan from Bugzilla:
    
    To test.
    1) Use ILS-DI to renew an checkout
    2) View the circulation history for the item
    3) Click the 'View' button next to the count of renewals
    4) Note that the modal just stalls at 'Retrieving renewals'
    5) Apply the patch
    6) Now the 'retrieving renewals' message should list the renewals instead.
    
    Note that step 2 should be something like "Go to the "Circulation
    history" of the patron.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 17be09b903e64a0894abbb6584f4917842d846c6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 22 12:39:59 2023 +0100

    Bug 32782: Koha to KBart mapping for UNIMARC
    
    Used when creating eholdings from Koha items.
    
    Test plan:
    Add some items to a list, then use this list to create eholdings
    /cgi-bin/koha/erm/eholdings/local/titles/import
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 07e37c541404b102dce4242db6b09b4a93d6931f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 1 14:06:30 2023 +0100

    Bug 32782: ERM UNIMARC support
    
    Create the biblio record when a resource is created
    
    Test plan:
    Create a new local title and confirm that the Koha bibliographic record
    is created correctly.
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit af34d97928215c10b97c7c86d72da2b9ebde085f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 11 13:46:51 2023 +0200

    Bug 33482: Propagate errors from EBSCO's ws to the UI
    
    When adding or removing eholdings from EBSCO, if an error happens it is
    lost and not propagated to the UI.
    
    We were missing a return in the logic, and always returning 200
    
    Test plan:
    Do not apply (or revert) bug 33481
    Configure EBSCO for ERM and add a package to your holdings
    With this patch applied you will get a 500 that is propagated to the UI
    Without this patch nothing happens and the user is not aware that
    something bad happened
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7ca83d4b8c5581646af50d8378003b4233ad5fa2
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Mar 19 22:06:12 2023 +0000

    Bug 33156: Fix JS error on batch patron modification
    
    The error currently breaks some of the functionality for
    updating patron attributes linked to AV values. With the
    bug, the input field will not change to the AV list when selected
    from the pull down of patron attributes.
    
    It was probably bug 29648 that changed the data structure
    without adapting for the additional data that is pushed
    to the object for the patron attribute columns.
    
    To test:
    * Create several extended patron attributes
      * Make sure at least one is linked to an AV
      * Repeatable and unique patron attributes can't be
      updated in batch patron modification, so you need some
      that can be modified.
    * Go to tools > batch patron modification
    * Enter one or more cardnumbers to update
    * Verify the table is missing columns, export and configure
    * Verify when selecting the AV tied patron attribute, the input
      remains a text one
    * Apply patch
    * Both should work now as expected
    
    Note: I believe there are some more errors on this page,
    but they should better be handled separately. So with this
    patch we push configuration again for each column to table
    columns, but the very last column keeps missing from the
    columns settings.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a104722b9d4150c48eb4793c123d10e66144a7c7
Author: Slava Shishkin <slavashishkin@gmail.com>
Date:   Fri Apr 28 16:36:23 2023 +0300

    Bug 33590: Fix DOM id name for tabs after WRAPPER code added to export.tt
    
    The list of CSV profiles was not displayed if the CSV format was selected in the output format settings.
    
    To test:
    1. Go to /cgi-bin/koha/tools/export.pl
    2. At the bottom of the page in the Output format, select CSV format.
      *If CSV format is not active in the drop-down File format menu, create
       any profile to Usage export records on the link /cgi-bin/koha/tools/csv-profiles.pl
    3. Note that the list of CSV profiles is not displayed.
    4. Apply the patch.
    5. Restart the page and repeat steps 2.
    6. Verify that when you select the CSV format, the list of CSV profiles appears.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3915c1c331d0b9a5f254967be7787918e6663022
Author: Slava Shishkin <slavashishkin@gmail.com>
Date:   Thu Apr 27 16:23:42 2023 +0300

    Bug 33590: Fix DOM id name for tabs after WRAPPER code added to modborrowers.tt
    
    The submitted numbers were not processed by the search query.
    
    To test:
    1. Go to /cgi-bin/koha/circ/modborrowers.pl
    2. On the relevant tab, enter the card number or the borrower number in the text area, or upload a text file with a relevant list of numbers.
    3. Click "Continue" and verify that a message appears stating "No patron card numbers or borrowernumbers given".
    4. Apply the patch.
    5. Restart the page and repeat steps 2 and 3. Make sure you receive the correct response -- a list of borrowers or a message indicating that the specified numbers were not found.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f3794a869674062ea6e37fd8777ac62607dbd9ec
Author: Slava Shishkin <slavashishkin@gmail.com>
Date:   Wed Apr 26 20:35:00 2023 +0300

    Bug 33590: Fix DOM id name for tabs after WRAPPER code added to serials-collection.tt
    
    To test:
    * Add a subscription
    * From the subscription detail page, click on serial collection link in left hand navigation
    * Create some additional issues
    * "Clear all" link for selecting issues to edit won't work, "Select all" link neither
    * Apply the patch *
    * "Clear all" link for selecting issues to edit works now, "Select all" link works too.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6ebe303e14e0c5ca542c6d3da5df1369ab3b6c18
Author: Slava Shishkin <slavashishkin@gmail.com>
Date:   Wed Apr 26 19:59:14 2023 +0300

    Bug 33590: Fix DOM id name for tabs after WRAPPER code added to article-requests.tt
    
    This commit fixed two cases:
    1. Fixing "Select all" and "Clear all" links on the page.
    2. Fixing the interaction with selected entries when switching between the "New" and "Pending" tabs.
    
    To test:
    (Create article requests if they don't exist)
    
    Case 1:
    1. Go to /cgi-bin/koha/circ/article-requests.pl and don't switch between tabs.
    2. Click on "Select all" and verify that it's not working -- the checkboxes are not selected.
    3. Activate any checkbox and click "Clear all" -- the checkbox is not cleared.
    4. Apply the patch.
    5. Restart the page and, without switching between tabs, repeat steps 2 and 3. Verify that it works now.
    
    Case 2:
    1. Go to /cgi-bin/koha/circ/article-requests.pl.
    2. Switch between tabs and leave "New" active.
    3. Select any entry and delete or move it to another tab.
    4. Verify that the entry remains in the table until the page reloads.
    5. Apply the patch.
    6. Restart the page and repeat steps 2 and 3. Make sure that everything works now.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0a0c6554d72ea5acec1a6c4fe63b77e9383e2e56
Author: Mason James <mtj@kohaaloha.com>
Date:   Fri Apr 28 02:15:05 2023 +1200

    Bug 33629: allow pbuilder to use network via build-git-snapshot
    
    to test...
    
    - build master packages, observe failure :(
    
       debian/build-git-snapshot -d -v 22.12.00-24~git1 -D dev -b base_22.12.00+deb10 --noautoversion
         "/usr/bin/perl" build-resources.PL
        yarn install v1.22.19
        warning You don't appear to have an internet connection. Try the --offline flag to use the  cache for registry queries.
    
    - apply patch
    
    - build master packages, observe success :)
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cc1695ba96b79d85fe778af1c60b092b149dd449
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Mon Apr 24 20:05:50 2023 -1000

    Bug 33603: Fix misc/maintenance/search_for_data_inconsistencies.pl when biblio.biblionumber on control field
    
    Since bug 29486, misc/maintenance/search_for_data_inconsistencies.pl search for biblio.biblionumber in MARC record with $record->subfield().
    This fails when field is a control field (< 10).
    Idem for biblioitems.biblioitemnumber
    
    Test plan :
    1.0) On a UNIMARC database (biblio.biblionumber is on 001)
    1.1) Run misc/maintenance/search_for_data_inconsistencies.pl
    => Without patch you get error : Control fields (generally, just tags below 010) do not have subfields, use data()
    => With patch no error
    2.0) On a MARC21 database (biblio.biblionumber is on 999c)
    2.1) Run misc/maintenance/search_for_data_inconsistencies.pl
    => Check you see no error
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit edbc81199798aa084365a1845188aa24e6ad010b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Apr 24 12:28:46 2023 +0000

    Bug 33584: (follow-up) Remove DEFAULT_GENERATED from column info
    
    MySQL 8 returns this additional information for a timestamp such
    as the timestamp2 in the Commenter test.
    Which results in the following alter:
        ALTER TABLE koha_myclone.database_commenter_1 MODIFY COLUMN `timestamp2` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP DEFAULT_GENERATED COMMENT 'Column_5'
    And that statement fails again on that keyword.
    For now, it seems sufficient to ignore this keyword when building the alter statement.
    
    Test plan:
    Run t/db_dependent/Koha/Database/Commenter.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Did test it now under MySQL 8.
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 726004a8c14e7e511201eb871e718d21b3a4c35e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Apr 21 17:09:08 2023 +0000

    Bug 33584: Fix failures for Commenter.t on MySQL8
    
    The column names from information_schema are uppercase now in MySQL8.
    In the arrayref with sliced hashes, we expected lowercase.
    
    See e.g. https://stackoverflow.com/questions/54538448/what-are-the-changes-in-mysql-8-result-rowset-case
    
    Test plan:
    Run t/db_dependent/Koha/Database/Commenter.t
    Do it again if possible with a MySQL 8 db server.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7e55cadc04851e885ac4ce692a2b018691f854b4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 24 10:43:00 2023 -0300

    Bug 33128: DBRev 22.12.00.024
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0b4e73cd7b5a456f2e994937f96244fc0b19be0c
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Fri Mar 3 16:26:52 2023 +0100

    Bug 33128: Add Polish translations for language descriptions
    
    This adds the Polish translations for the different languages to
    subtag_registry.sql that is used by all languages during installation.
    
    * Apply patch
    * Run database update
    * Install pl-PL and activate it for the OPAC
    * Go to advanced search
    * Look at the language pull down - it shows the languages in their
      language and then translated to English
    * Switch to Polish - verify the Polish translations are used now
      There are 2-3 cases where the translation = name, so only name is shown.
    * Drop your database, create your database
    * Run the web installer
    * Everything should complete without error and the language pull down
      should look exactly the same and be translated
    
    Signed-off-by: Nick <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9e26828a62ffcdbbdda5a62cfa4a61e2ce503485
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Apr 18 16:51:04 2023 +0000

    Bug 33560: Batch edit link broken if subscriptions are selected using "select all" link
    
    This patch revises the process by which the serials search results page
    redirects to the batch edit page based on which checkboxes are checked.
    
    To test, apply the patch and go to serials. You should have some
    subscriptions which are open and some which are closed.
    
    - Perform a search which will return at least one result under each tab
      (Open and Closed).
      - Checking one or more checkboxes should activate the "Edit selected
        serials" link, which should work correctly to redirect you to the
        batch edit page.
      - Unchecking all the checkboxes should make the edit link disappear.
      - Check that the "Select all" and "Clear all" links work the same way
        manually checking checkboxes does.
      - Confirm that controls under each tab work correctly just for the
        results under that tab.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c652ed4b1dcc204d36921d55120d91c758803632
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Apr 19 14:59:15 2023 +0000

    Bug 30352: Add a comment to the substatus translation
    
    The tric of combining the XPath union operator (|) with the
    value-of instruction works as a sort of ternary operation.
    The value-of only picks the string value of the first node
    from the union in document order.
    
    So, if there is a translation, it will be the first node. If there
    is no translation, the original substatus will be used. Note that
    there will be no translation for authorised values like Staff
    collection, etc.
    
    Test plan:
    None. Just comments.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8d7e3cec32dffa5f96de696f8707bf8e015c49d2
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Apr 19 13:52:16 2023 +0000

    Bug 30352: Allow translation of Not for loan in OPAC XSLT results
    
    Note: Test plan below can be followed in English. If you would like
    to see the vernacular results, you need to update PO files and
    translate 'Not for loan', and update templates (xslt files) accordingly.
    The bootstrap PO does not yet include that string without %s suffix
    in the current codebase.
    
    Test plan:
    [1] Apply this patch and make the following change in
    MARC21slim2OPACResults.xsl, line 1207.
    Change:
      <status english="Not for loan">Not for loan</status>
    to:
      <status english="Not for loan">NOT for loan</status>
    Important: Change text inside, not the attribute!
    Restart all.
    
    [2] Pick a biblio, add some items with different statuses: Checked out,
    Damaged, Not for loan, Staff collection.
    [3] Make it appear in a OPAC results display (not detail).
    [4] You should see the different statuses, including NOT for loan. The
    uppercase NOT serves to prove that the string has been translated. Also
    verify that you see Staff collection as-is.
    [5] Bonus: Toggle with values in Reference_NFL_Statuses to move results
    from Reference section to Not available section v.v.
    [6] Revert the change from step 1. Sign off :)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 286fc75f017a0a5e81cb45712c0b08c718d15ed1
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Apr 20 21:07:11 2023 +0000

    Bug 33549: Improve wording of dialog messages
    
    In terms of translations type can be a lot of things.
    Usually translations are easier with more context, so
    I've added restriction to the type :)
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 28735b8ff31536febee4315407ce46a3ff063268
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Apr 18 17:07:03 2023 +0000

    Bug 33549: Fix dialog box in patron restrictions
    
    To test:
    1. Enable PatronRestrictionTypes
    2. Go to Administration > Patron restrictions
    3. Click 'New restriction'
    4. Enter a code and label
    5. Click 'Save'
       --> 'Type added' at the top of the page is not styled
    6. Apply patch
    7. Try again, dialog is styled correctly
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit daac367f300cea09688aa184c6ead1cd9a978f15
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Apr 10 15:12:05 2023 +0000

    Bug 32041: Enforce SyndeticsCoverImageSize everywhere
    
    This patch add the SyndeticsCoverImageSize to the folling pages:
    
            koha-tmpl/intranet-tmpl/prog/en/modules/catalogue/results.tt
            koha-tmpl/opac-tmpl/bootstrap/en/includes/shelfbrowser.inc
            koha-tmpl/opac-tmpl/bootstrap/en/modules/opac-detail.tt
            koha-tmpl/opac-tmpl/bootstrap/en/modules/opac-readingrecord.tt
            koha-tmpl/opac-tmpl/bootstrap/en/modules/opac-results.tt
            koha-tmpl/opac-tmpl/bootstrap/en/modules/opac-shelves.tt
            koha-tmpl/opac-tmpl/bootstrap/en/modules/opac-user.tt
    
    To test:
    1. Turn on SyndeticsCoverImages and SyndeticsEnabled.
    2. Check the staff results page and make sure you can change the image size via SyndeticsCoverImageSize.
    3. Check the OPAC results page.
    4. Turn on 'OPACShelfBrowser' and make sure you change the image sizes within the shelf browser.
    5. Test the OPAC checkout history page. ( opac-readingrecord.tt )
    6. Have a checkout and an overdue to test the 2 tables on the OPAC summary pahe. ( opac-user.tt )
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 08964203dab9b45dfb83b5d5b5585f509f7ef361
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Apr 20 16:42:10 2023 +0000

    Bug 33577: Add btn class to cancel hold button on /reserve/request.pl
    
    To test:
    1. Place a hold on a record and look at the /reserve/request.pl page.
    2. Notice the two buttons 'Update hold(s)' and 'Cancel selected' buttons are not quite the same size.
    3. Apply patch and look again, the buttons should line up.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 69407deca36b954b1145a3e18525aa95e4aa52af
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Apr 21 11:50:48 2023 +0000

    Bug 33572: Use template wrapper for breadcrumbs: Tools, part 3
    
    This patch updates several templates in the tools directory so that they
    use the new WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Tools ->
      - CSV profiles
        - New CSV profile
        - Edit CSV profile
      - Calendar
      - Import patrons
        - Results
    - Cataloging ->
      - Export catalog data
      - Inventory
        - Results
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 750279f47963a06d616135268536d0d223803468
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Apr 20 13:15:29 2023 +0000

    Bug 33571: Use template wrapper for breadcrumbs: Tools, part 2
    
    This patch updates several templates in the tools directory so that they
    use the new WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Tools ->
      - Batch patron deletion and anonymization
        - Confirmation
        - Results
    - Cataloging ->
      - Batch item modification
      - Batch item deletion
      - Batch record modification
        - Results
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 180de413c92e6bee5ac0e65e6ac255d780dab72d
Author: Magnus Enger <magnus@libriotech.no>
Date:   Fri Apr 21 08:39:56 2023 +0200

    Bug 33579: Typo: record record
    
    To reproduce:
    - Search for records
    - Select two or more records
    - Select "Edit" > "Batch delete records"
    - Click "Delete selcted records"
    - Click "View detail of the enqueued job"
    - Verify the page says "Type: Batch bibliographic record record deletion"
    
    To test:
    - Repeat the steps above
    - The page should now say "Type: Batch bibliographic record deletion"
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0d4ef0467c7909289b013a1f86a644ebd04a3d33
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Apr 19 18:45:33 2023 +0000

    Bug 33565: Use template wrapper for breadcrumbs: Tags
    
    This patch updates two tags templates so that they use the new
    WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Tools ->
      - Tags
        - Click a tag to see titles with that tag
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f1a27df97ec96dc6c6484a91268b1eae9c049f39
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:54 2023 +0100

    Bug 32865: Fix cataloguing/value_builder/unimarc_field_146a.pl
    
    Remove unnecessary call to event.preventDefault()
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aab0da10d8fcc0c269758c4df30386cafe5e938d
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:55 2023 +0100

    Bug 32870: Fix cataloguing/value_builder/unimarc_field_225a_bis.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d0d4ce0e6bebfca5fbe1673e2165527b89841db8
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:54 2023 +0100

    Bug 32869: Fix cataloguing/value_builder/unimarc_field_210c.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9030a637e25d1c06fff86b1793fbd067c0472b42
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:55 2023 +0100

    Bug 32873: Fix cataloguing/value_builder/unimarc_field_686a.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 166f13b88ec18b4ffe4cb9de5d35ecb708ad4ddd
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:55 2023 +0100

    Bug 32868: Fix cataloguing/value_builder/unimarc_field_210c_bis.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c9ddf4207595ec32d2c40b07d29cdfb506158b72
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:55 2023 +0100

    Bug 32871: Fix cataloguing/value_builder/unimarc_field_225a.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f7beb484eb75b91f9b30249108fbfdfd5846b7dc
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:54 2023 +0100

    Bug 32866: Fix cataloguing/value_builder/unimarc_field_146h.pl
    
    Remove unnecessary call to event.preventDefault()
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bffb4fb0f4293c60fc1d1453c8306d3a690ca53f
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:54 2023 +0100

    Bug 32867: Fix cataloguing/value_builder/unimarc_field_146i.pl
    
    Remove unnecessary call to event.preventDefault()
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8047afde1318c46e0572f7686fa18ac5f9b50584
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:51 2023 +0100

    Bug 32817: Fix cataloguing/value_builder/dateaccessioned.pl
    
    Remove unnecessary call to event.preventDefault()
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6454da4eda16400cf8b8986e6a00350fbcdcb5ce
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:51 2023 +0100

    Bug 32818: Fix cataloguing/value_builder/marc21_field_005.pl
    
    Remove unnecessary return statement
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0e85a35164e89287ee74e5ea99113a543a7c1dfc
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:55 2023 +0100

    Bug 32872: Fix cataloguing/value_builder/unimarc_field_4XX.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 634c23f69977976a03043f5fd1b3e8422151f6b3
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:55 2023 +0100

    Bug 32875: Fix cataloguing/value_builder/unimarc_leader_authorities.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 16bd0d658ef3297c46f942552354c42120b53b69
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:55 2023 +0100

    Bug 32876: Fix cataloguing/value_builder/unimarc_leader.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b3d239bca6eeab261e7325c61dd4e4a527e4aa9c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 24 10:35:03 2023 -0300

    Bug 33300: DBRev 22.12.00.023
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eec4921552411817acba4588694ed7511c604e0d
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Mar 21 22:54:17 2023 -1000

    Bug 33300: Wrong system preference name AutomaticWrongTransfer
    
    Bug 29792 added a DBRev with new system preference 'AutomaticConfirmTransfer'.
    
    But name in installer/data/mysql/mandatory/sysprefs.sql is wrong 'AutomaticWrongTransfer'
    
    Test plan :
    Create a new database and check there is in table systempreferences an
    entry with variable='AutomaticConfirmTransfer'
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Bug 33300: (follow-up) DBRev for existing databases
    
    Test plan :
    1.1) Start from a Koha 22.05
    1.2) Upgrade to master
    => Check the upgrade says :
       Wrong system preference 'AutomaticWrongTransfer' renamed 'AutomaticConfirmTransfer'
    2.1) Start from a Koha 22.05
    2.2) Upgrade to 22.11
    2.3) Via interface change system preference 'AutomaticConfirmTransfer' and save
    2.4) Upgrade to master
    => Check the upgrade says :
       Wrong system preference 'AutomaticWrongTransfer' deleted
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 201d7f9ac6519fc5003beaf0b756a9ec5e2884cd
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Apr 18 12:36:17 2023 +0000

    Bug 32484: (QA follow-up) Few typos
    
    Test plan:
    Run git grep "specifique key"
    Run git grep "the fonction"
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bc5a6e8d55780f909ef455b55e549077c9cf9688
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Apr 18 12:33:47 2023 +0000

    Bug 32484: (QA follow-up) Polishing unit test
    
    Test plan, removed done_testing.
    License.
    Since we are in t/db, good to add transaction, although we currently
    do not change anything here. But who knows?
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f5af35a0851d5cba817ceb9adf4795412f3bf915
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Apr 18 12:32:46 2023 +0000

    Bug 32484: (QA follow-up) Fixes to POD
    
    Resolve:
     FAIL   Koha/UI/Form/Builder/Biblio.pm
       FAIL   pod coverage
                    POD is missing for build_authorized_values_list
                    POD is missing for create_key
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 689632256f411a9fd965edbb09e0320628bbb4fd
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 24 13:00:47 2023 +0100

    Bug 32484: Replace DateTime->now by Koha::DateUtils::dt_from_string
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit edcabe372878316a21046e001e4b274a206f771e
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Sep 22 09:53:46 2022 +0200

    Bug 32484: Enable plugins when UseACQFrameworkForBiblioRecords is set
    
    Test plan:
    1. Do not apply the patch yet
    2. Make sure you have an ACQ biblio framework with some framework
       plugins enabled. Create it if you don't.
    3. Enable UseACQFrameworkForBiblioRecords system preference
    4. Create a new acquisition basket.
    5. On this new basket, click on "+ Add to basket", then "From a new
       (empty) record"
    6. You should see a simplified MARC editor based on ACQ framework.
       Confirm that the plugins are not enabled (no visible buttons, nothing
       happening on focus/blur)
    7. Apply patch
    8. Repeat step 5
    9. You should now see the plugins' buttons (only if you enabled plugins
       that use the 'click' event)
    10. Confirm that the enabled plugins work correctly
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 340880253042d36e429ee0805039fa2589241180
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Feb 18 11:53:49 2023 +0000

    Bug 31432: Make 245$n$p visible by default in frameworks
    
    $n (part_number) and $p (part_name) now have their own
    columns in the database, but we are still hiding them
    by default. It woudl ease testing and cataloguig if
    we changed them to be visible by default in new installations.
    
    To test:
    * Check that in your current frameworks when adding a new
      record, 245 n and p are hidden
    * Apply the patch and start over: drop your db and run the
      web installer
    * Verify that the fields are now visible
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e4b94e4d82d5f96a0b1125f41fc8e41a47826627
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Mon Mar 13 15:06:52 2023 +0100

    Bug 33210: (Bug 31963 follow-up) No hold fee message on OPAC should be displayed when there is no fee
    
    After resolving Bug 31963 everything works as expected when there is
    hold fee defined (!= 0).  But in case when the fee for given patron
    category is set to 0.00, the user will always see the message "You will
    be charged a hold fee of 0,00 ...", which is obviously not intended.
    
    This is because categories.reservefee is returned from database as
    '0.000000' and as such, without type casting, is interpreted as string
    in Perl. Prior to Bug 31963 the result was compared to 0 before sending
    anything to the template, so the casting was done, now it is not.
    
    To test:
    ========
    1. Go to Administration -> Patron categories
    2. Edit your patron category and give a hold fee of 0.
    3. HoldFeeMode does not matter - you can set it to any value.
    4. In another tab, open the OPAC.
    5. Search the OPAC for any record with an item.
    6. Go to place a hold on this record.  You will see "You will be
       charged a hold fee of 0,00" --> This is a bug.
    7. Apply patch and restart services.
    6. Repeat step 6.
    8. You should NOT see the hold fee message.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Nick <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 203646418a75efb86f513e33a0f3d4e13675c50d
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Fri Mar 24 17:17:20 2023 +0100

    Bug 33210: Add unit test
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Nick <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dbd0117a494e516265a2598a8f6b60f896f57c79
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 28 09:51:20 2023 +0100

    Bug 26967: Correctly format patron address in autocomplete
    
    We should use the JS function to format patron's address in the
    autocomplete result
    
    Test plan:
    Search for patron using the autocomplete feature, using the different values
    of addressformat.
    The address should be formatted correctly, like other places in Koha.
    You should also notice that the street number is now displayed.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1bd4f53e9015f9dc764d51618acbaaec8ad275ff
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Apr 21 08:58:50 2023 +0000

    Bug 32642: (QA follow-up) Activate spinner early
    
    See comment on former patch too. We need to activate the spinner
    early and we can simplify the code to remove it.
    
    Note: unfortunately this is kind of a workaround, since using
    load would be nicer but currently hard to implement since the cover
    image code is scattered/widespread.
    
    This code still checks the complete attribute, we could argue that
    it should just remove the spinner. Note too that the spinner belongs
    to a div where multiple img may be part of. If we do not remove the
    spinner now, something went wrong at load time, but if you can
    actually see the spinner is another thing.
    
    Test plan:
    See former patch.
    Check few cover images on detail page, enable various providers.
    Bonus: I tested with a sleep statement in opac-image.pl.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 408e676fd29188ce40c6dbf94b47845df9ba1984
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Thu Apr 6 23:38:22 2023 +0000

    Bug 32642: Loading spinner always visible when cover image is short (OPAC)
    
    We noticed that if the cover image is somewhat short (i.e. the height is under 80-90 px), the loading spinner indicating that the image is currently loading still appears after the image is loaded.
    
    this patch remove the spinner when the image is loaded,.
    
    To test:
    1. Make sure the OPACLocalCoverImages system preference is enabled
       1.1. Go to Administration > Global system preferences
       1.2. Search for Coverimages
       1.3. Set OPACLocalCoverImages to 'Show'
       1.4. Click 'Save all Enhanced content preferences'
    2. Add a short local cover image to a record (I added one which is just a grey rectangle with the size printed on it, to facilitate the test)
       2.1. Download the attached image
       2.2. Find a record without an image
       2.3. Click the 'Images' tab
       2.4. Click 'Upload'
       2.5. Click 'Drop files here or click to select a file' and choose the downloaded image
       2.6. Click 'Process images'
    3. View the record in the OPAC
       3.1. From the image upload page, click on the title of the record in the page heading to access the detailed record in the staff interface
       3.2. Click on 'OPAC view: Open in new window.'
       --> Note that the image is displayed normally, but the spinner is also displayed
    4. Apply the patch
    5. View the record in the OPAC
        --> Note that the spinner is no more displayed
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    This needs a follow-up; the code in this template activates the spinner
    actually when the job has been done already and did not remove it.
    And we did not see that but only with a short image like above.
    The construction with .one, .each is not needed given the execution
    context.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b81bcaba9d40aadd4790b2a87f06b97ddde0825a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jan 9 11:56:17 2023 +0000

    Bug 33127: Use template wrapper for breadcrumbs: Administration part 5
    
    This patch updates several administration templates so that they
    use the new WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    Administration ->
     - Record overlay rules
     - Search filters (must have SavedSearchFilters enabled)
     - System preferences
       -> OverDriveAuthName -> OverDrive library authnames table
     - MARC bibliographic framework -> MARC structure (list, new, edit,
       delete confirm).
     - Record matching rules (list, new, edit, delete confirm)
     - OAI sets configuration (list, new, edit)
       -> Define mappings
     - Patron attribute types (list, new, edit, delete confirm)
     - Patron restrictions (list, new, edit, delete confirm)
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e18e32744f4e76ef107cb305432be11c2beda062
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Apr 13 16:56:07 2023 +0000

    Bug 33310: Use template wrapper for tabs: Suggestions
    
    This patch updates the suggestions template so that it uses the new
    WRAPPER directive to build tabbed navigation.
    
    To test, apply the patch and go to the suggestions page in the staff
    interface.
    
    - By default you suggestions should be organized by status, with a
      separate tab for each status (pending, accepted, etc).
    - Use the "Organize by" form in the sidebar to change how suggestions
      are listed. In each case confirm that the tabs are redisplayed
      correctly.
    
    Works as advertised. 3/3
    
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit da5715135265b3653d0359bb3bc9ee233ca9c3ff
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Apr 4 11:51:22 2023 +0000

    Bug 33388: Use template wrapper for breadcrumbs: Patrons part 4
    
    This patch updates several patron templates so that they use the
    new WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Patrons ->
      - Patron details
        - Notices
        - Accounting
      - Edit patron
      - Add patron
      - Patrons requesting modification (submit patron update via the OPAC)
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f371c081272f2f0110779cd7fef22c3363f2ec0d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Apr 17 18:58:18 2023 +0000

    Bug 33439: Use template wrapper for breadcrumbs: Reports part 4
    
    This patch updates several reports templates so that they use the new
    WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Reports ->
      - Reports home
        - Orders by fund
          - Results
        - Holds statistics wizard
          - Results
        - Serials statistics wizard
          - Results
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1107d8dfe9e3fbdae731f31b7d7eafa0c94c246a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Apr 17 17:57:20 2023 +0000

    Bug 33438: Use template wrapper for breadcrumbs: Reports part 3
    
    This patch updates several reports templates so that they use the new
    WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Reports ->
      - Average loan time
        - Results
      - Circulation statistics
        - Results
      - Lost items
        - Results
      - Catalog by item type
        - Results
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 29387c09aa57073f035e7728a5146ce3fa8b370f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Apr 18 12:31:37 2023 +0000

    Bug 33555: Use template wrapper for breadcrumbs: Rotating collections
    
    This patch updates rotating collections templates so that they use the
    new WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Tools ->
      - Rotating collections
        - New rotating collection
        - Edit collection
        - Delete collection
        - Manage items
        - Transfer collection
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 75f30ebd51d77955572dcc0636bdc5eb3ab10177
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Apr 18 13:16:26 2023 +0000

    Bug 33558: Use template wrapper for breadcrumbs: Serials part 1
    
    This patch updates several serials templates so that they use the new
    WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Serials ->
      - Claims
        - Claims for a vendor
      - Check expiration
      - Subscription details ->
        - Serial collection
        - Create routing list
        - Edit routing list
        - Preview routing list
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 449c51b08cfb30e47be076e7b1045ad600c44f95
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Apr 20 15:38:55 2023 -0300

    Bug 12029: DBRev 22.12.00.022
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3040b1bf390f06033cffc7e8d45353f1082ac6e5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Apr 20 15:36:51 2023 -0300

    Bug 12029: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 806cbf8d8c302f8d2cf5926b2330abab28c03cf2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 23 12:28:31 2023 +0100

    Bug 12029: Remove 'params' from filter_by_unread
    
    It's not used and not needed, you can chain methods.
    
    Also remove unused C4::Koha module and useless statement in tests.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 368dfdc7d0e43db6c31bc3bc8d6a294b00d585e3
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Feb 15 21:57:08 2023 +1300

    Bug 12029: Ability for patrons to dismiss OPAC messages
    
    This enhancement adds the ability for patrons to dismiss an OPAC
    message, marking it as read to remove it from their summary page.
    
    To test:
    1) Update database and restart services
    2) Log into the staff interface and go to your patron account
    3) Click the Add message button
    4) Add a message for the OPAC and Save
    5) Log into the OPAC. Note there is a message on the homepage saying you
    have a message. Go to your user summary and confirm the message
    displays.
    6) Click the button to dismiss the message. A confirmation box should
    pop up - hitting Cancel should stop the action.
    7) Dismiss the message again and this time Confirm. Make sure the
    message is gone from the OPAC user summary and from the homepage.
    8) Confirm tests pass t/db_dependent/Koha/Patron/Messages.t
    9) Create a few more messages for the OPAC
    10) Log into the OPAC and dismiss one of the messages
    11) Confirm the count of unread messages on the OPAC home page is
    correct
    
    Sponsored-by: Koha-US
    Signed-off-by: Christopher Brannon <cbrannon@cdalibrary.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 52f228c02a43c4f0492fc59643525bf79dcc09ad
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Feb 15 21:56:35 2023 +1300

    Bug 12029: Tests
    
    Signed-off-by: Christopher Brannon <cbrannon@cdalibrary.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 56f16da47b942f7f9d1b6293462e876f6ed76d08
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Feb 15 18:10:29 2023 +1300

    Bug 12029: Adding messages.patron_read_date column
    
    Signed-off-by: Christopher Brannon <cbrannon@cdalibrary.org>
    
    JD Amended patch: Fix QA failure "File must have the exec flag"
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 165c6b311875c78dd1dcd29f532b468204e15a91
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Apr 20 15:27:59 2023 -0300

    Bug 33103: DBRev 22.12.00.021
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b3fb8a7a1586008b91dcc8a03375c7ab972faff4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Apr 20 15:20:52 2023 -0300

    Bug 33574: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a79c81b92609fe141f8fc8af4d2dced6fa981f61
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 11 11:44:16 2023 +0200

    Bug 33103: Prevent vendors to be displayed several times in the search result
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 268a0442226d2843c653333380512684d5ea217e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 11 09:53:15 2023 +0200

    Bug 33103: Fix accessibility issues
    
    * Add spaces
    * Add 'Add' and 'Remove' in addition of the icons
    * Do not submit the form when enter is hit
    * Fix translatability
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0e666d6c2a6888d2ee9fda010ff09a55b76d48ca
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 7 12:54:31 2023 +0100

    Bug 33103: Deal with html tags
    
    HTML tags won't be interpreted. However <script> will still break the
    display, but it's by nature, JS will execute it even if it's in a
    string.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1077514901fc161921724d08270f30002288de97
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 1 14:03:38 2023 +0100

    Bug 33103: Display the aliases in the dropdown list in ERM
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7c38f5811b14ce744c655b9b4fb865a9e8720f19
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 2 14:08:29 2023 +0100

    Bug 33103: Add REST API tests
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 14e5e175fcb88176aed3181c12037fc2335e3501
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 1 12:43:44 2023 +0100

    Bug 33103: Embed aliases in GET /vendors
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 359780886ea0b4211ffd18bbc5608dae8c9d1fd1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 1 12:31:17 2023 +0100

    Bug 33103: Make vendors searchable by aliases
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5e3980502b10b6faebe93c2ff2a7ba95c736f836
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 1 11:57:23 2023 +0100

    Bug 33103: Add the ability to create vendor aliases
    
    This patchset is adding the ability to create aliases for vendors. It
    will then be easier to search for vendors.
    
    * new DB table aqbookseller_aliases(id, vendor_id, alias)
    * new pair of Koha classes Koha::Acquisition::Bookseller::Alias[es]
    * new method to retrieve the aliases from the vendor
    Koha::Acquisition::Bookseller->aliases
    * The api spec changes to allow aliases to be embeded on
    GET /acquisitions/vendors
    * Add/Delete alias when editing a vendor
    * Display the aliases on the vendor show view
    * Search vendors by aliases
    * Display the aliases in the dropdown list of the vendors in the ERM
    module
    
    Test plan:
    - Create a vendor, add it some aliases
    - Edit the vendor, remove some aliases
    => Behaviour must be consistent
    - Search the vendor in the acquisition module by its aliases
    => The vendor must be returned in the result
    - Go to the ERM module, add a new agreement or license
    => Notice that the dropdown list of the vendors is displaying the
    aliases, that make vendors searchable by their aliases
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a387b37c1c4d1a6e6138899691a32be42f5e382b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 2 13:54:37 2023 +0100

    Bug 33103: Add tests for Aliases Koha classes
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 07576588fff20919f4fcc9c0305f69eb77cced4c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 1 15:17:56 2023 +0100

    Bug 33103: Koha classes
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5e3e75f1231cbe8bea5e97869e0d83505a168951
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 1 11:06:46 2023 +0100

    Bug 33103: DB changes
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d1879136a2e85f756a19a79fe86e10e22bac9b16
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 20 17:09:50 2023 +0100

    Bug 33574: Correct pointer for restrict_type.code
    
    Somehow this was missed during QA of bug 31095.. likely during a rebase.
    
    Test plan:
    1) Check that manual restriction types are now saved.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 981eeff7ef1a014b848a52ee9e6e20de106048e3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Apr 20 15:04:29 2023 -0300

    Bug 33447: Make *->pickup_locations methods throw an exception on missing parameter
    
    This patch fixes the FIXME for making the methods throw an exception.
    
    Tests are added, and POD is adapted as well.
    
    To test:
    1. Apply this patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/patrons* \
               t/db_dependent/api/v1/holds.t \
               t/db_dependent/Reserves* \
               t/db_dependent/Hold* \
               t/db_dependent/Koha/Hold* \
               t/db_dependent/Items*
    
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ef8adf34fde2352680934ba6a36de89e3f905a36
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 20 15:44:53 2023 +0000

    Bug 33447: (follow-up) Fix tests and make assumption explicit
    
    The patches made an assumption that patron would always be passed. It is
    within Koha, but not in the Biblios tests.
    
    There is no scenario where we can determine pickup locations that are not in
    reference to a patron (who is picking it up?) so we should always have
    this parameter
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5a39823dbcf63101519413f3a47f4ffa39758155
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Apr 19 09:19:29 2023 -0300

    Bug 33416: Fix Searchbar_spec.ts
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 216702802567adf67b0768beb6b43ad6b2c62bd8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Apr 5 10:29:01 2023 +0200

    Bug 33416: Fix Agreements.ts
    
    <failure message="Timed out retrying after 10000ms: Expected to find element: `#agreements_list table tbody tr:first`, but never found it." type="AssertionError"><![CDATA[AssertionError: Timed out retrying a
    fter 10000ms: Expected to find element: `#agreements_list table tbody tr:first`, but never found it.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 360963c95975ff50f4d84239f2e0360236106bd4
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Thu Apr 13 14:55:25 2023 -0400

    Bug 33533: Translatability: Do not separate "Patron" or "Organization" and "identity" in memberentrygen.tt
    
    This patch corrects the HTML markup in order to reunite "Patron
    identity" or "Organization identity" for translatability.
    
    To test:
    1. Apply patch
    2. Update translation files
    ./misc/translator/translate update xx-XX
    3. Check the xx-XX-staff-prog.po file, the line for memberentrygen.tt:275
       should look like
    
    \#: koha-tmpl/intranet-tmpl/prog/en/modules/members/memberentrygen.tt:275
    \#, c-format
    msgid "Organization %sPatron %sidentity"
    msgstr "Identité de l'organisme %sIdentité de l'utilisateur %s"
    
    4. Optionally, translate the string, install translation and check the
       page (Patrons > New patron), trying a institutional patron and a
       regular patron
    ./misc/translator/translate install xx-XX
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1518569eaa0de0eaaf5e92d74dbd3acddc841cfc
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Apr 18 11:28:45 2023 +0000

    Bug 33447: (QA follow-up) Add comment for flushing cache
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 89fb8f31aba8ee43ed42b8963eb6ec843130f8d2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 7 21:46:24 2023 +0000

    Bug 33447: Adjust tests
    
    Signed-off-by: emlam <emily.lamancusa@montgomerycountymd.gov>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 55dc8573c709493f52bf7a2c87f82900fa926d1a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 7 21:08:30 2023 +0000

    Bug 33447: Add Cache to Biblio->pickup_locations
    
    This is going to have the most effect on records with large numbers of items
    held by the same library, serial records and the like
    
    To test:
    1 - Add 500 items to a biblio by select myltiple copies on the add item page
    2 - Place a hold via the API and note response time, I found ~3-5 seconds
    3 - Apply patch
    4 - Restart all
    5 - Place hold using api again
    6 - Note improved response time, less than 1/2 a second in my tests
    
    Signed-off-by: emlam <emily.lamancusa@montgomerycountymd.gov>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a0ec93d84f8b00e7b8b583d9fcbe7a564cba2a42
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 11 21:39:02 2023 +0200

    Bug 33491: Fix UI issues in EHoldingsEBSCOPackageAgreements
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 98adcf957b9f20de9a51373c181c65f55a7ff794
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Mar 29 15:11:43 2023 +0000

    Bug 33354: Show all form error messages in the warning dialog
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 816b1a3e3f36cb110f14dfcd5fcd7f17ebf0b71e
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Mar 29 15:09:37 2023 +0000

    Bug 33354: Add error if related user open but user is missing
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 823fa8517d095257e603f4293477e601b834d323
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Mar 29 15:07:25 2023 +0000

    Bug 33354: Add 'required' UI elements
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0411bf0573708327a9c0271f4d01c2996641bb3f
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Mar 14 07:06:21 2023 -0400

    Bug 33216: Catch and handle RegisterRequired exceptions for SIP fee paid messages
    
    If registers are being used in Koha, they are required. If a SIP account has no register and a fee paid message is sent, the SIP server crashes and the client never gets a response. It would be much better if Koha would response with 38 response where "payment accepted" is N, and an AF field stating that the SIP account needs to be associated with a register.
    
    Test Plan:
    1) Enable UseCashRegisters, set RequireCashRegister to "always require a
       cash register". Do *not* set a cash register for the SIP account you
       will be testing with.
    2) Using the SIP cli tester, send a fee paid message for a patron owing
       fees.
    3) Note the lack of a SIP response
    4) Apply this patch
    5) Restart the SIP server
    6) Repeat step 2, you should now get a SIP response with the error
       message in it!
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bb30aab206e218946fa3fe5104850a1d79553ac6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Apr 12 16:59:29 2023 +0200

    Bug 33483: Prevent 400 when more than 1 agreement is linked
    
    We were passing package_agreements.agreement and the server returned
    Object { message: "Properties not allowed: agreement.", path: "/body/package_agreements/0" }
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2e7ac09fe26a0fba6fa26ba7d0a4646a627594a7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 11 21:19:46 2023 +0200

    Bug 33483: (follow-up) Update the way we distinguish if AgreementsList is called from EHoldingsEBSCOPackageAgreements or not
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d4204cb9c685f59e213986914594b3dbd4792159
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 11 21:14:25 2023 +0200

    Bug 33483: Restore 'select'
    
    We are not supposed to see edit and delete buttons, but select instead,
    to pick an agreement.
    
    Regression introduced by
      commit 809f90d394fdef8142fdf8f4a6e825dc14a132d4
      Bug 33066: Remove build_datatable
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9d1fe4591c5271bbce6d72169cb47ef17f332e10
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 11 21:11:48 2023 +0200

    Bug 33483: Make KohaTable accept customizable actions button
    
    We have hardcoded some buttons: edit, delete
    But we could need specific buttons.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e4d9246a6c358b82a5be2f9a029b238d4d309787
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Apr 11 16:33:39 2023 +0000

    Bug 33483: Update the way we distinguish if AgreementsList is called from EHoldingsEBSCOPackageAgreements or not
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c0b189ff0a0f3493c5767122746b619b80d07620
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 11 14:13:35 2023 +0200

    Bug 33483: Fix link EBSCO package with local agreements
    
    Bug 33066 broke that, we need to set 'initialized'.
    
    Test plan:
    Turn on EBSCO provider, search for a package and click "Add new
    agreement". The modal must open with the list of agreements.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cf83ec866c5abc7ec9ff2752a24cf9cfb38e1523
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Apr 17 12:52:34 2023 +0000

    Bug 33229: (follow-up) Adjust tests to set anonymous patron before setting patron privacy to 2
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2ea5163970fad485d3dd37c715966fe5d73bf3cc
Author: Magnus Enger <magnus@libriotech.no>
Date:   Sat Apr 1 11:27:26 2023 +0200

    Bug 23824: Add a "Save and run" button to reports
    
    This will save one click every time you want to save and then run
    a report.
    
    To test:
    - Apply this patch
    - Create a new report
    - Click the new "Update and run SQL" button
    - Verify the report was saved and the results are displayed
    
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7fd06b8c3a5b134f02bc94b5a07c1c6c1c5092a3
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Feb 22 15:00:19 2023 +0000

    Bug 33038: Add classes to patroncategorycode for easier customization
    
    To test:
    1. Pull up a patron and look at the patroncategory inside the patronbriefinfo. Description and code are together in one HTML element, they are hard to seperate.
    2. Apply patch.
    3. Look again and notice the new classes.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 68b2f29d483290d5dfd859dce9b9fe7a387f3ab1
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Wed Mar 15 20:25:53 2023 +0100

    Bug 33238: Fix bad suggestions query (Bug 29886 follow-up)
    
    With IndependentBranches Koha explodes with Error 500 when a non
    superlibrarian tries to add to basket from suggestions.  In errorlog you
    would find "DBIx::Class::Storage::DBI::_dbh_execute(): DBI Exception:
    DBD::mysql::st execute failed: Column 'branchcode' in where clause is
    ambiguous".
    
    Test plan:
    ==========
    1. Have a Koha instance with IndependentBranches, some accepted
       suggestions, and a vendor defined.
    2. Be a non superlibrarian librarian with permissions to
       manage acquisitions.
    3. Create a new basket and try to add an item to the basket
       "From a suggestion".
    4. Koha would generate error 500.
    5. Apply the patch.
    6. Try to add an item to the basket "From a suggestion".
    7. You should succeed.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1344050ab4d2136b06902f1b84a59cc030aa5476
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 17 08:24:12 2023 -0300

    Bug 18829: (QA follow-up) Replace forbidden indirect syntax
    
    This pattern is forbidden and was overlooked by QA.
    
    To test:
    1. Run:
       $ ktd --shell
      k$ prove t/00-testcritic.t
    => FAIL: Tests fail with 'Subroutine "new" called using indirect
    syntax...'
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: Tests pass
    4. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d95f31dcc6c6500301527ea3e0dc95edfde3d8a2
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Apr 10 17:00:21 2023 +0000

    Bug 18829: (QA follow-up) I18N, test character and breadcrumbs
    
    * Removes a 'heart' character from the file, probably added for testing
    * Corrects breadbrumbs to make QA test tool happy
    * Makes JS message translatable (test by manipulating the link to an invalid record number in DOM)
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 768f587c7bac0c04a9bff7672e55daa107a882b9
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 27 12:04:56 2023 +0000

    Bug 18829: (follow-up) Don't messup record encoding
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a730a76069290be962e35fe034d713a77c662083
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 27 11:53:45 2023 +0000

    Bug 18829: (follow-up) Return 404 when record cannot be loaded
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b630f66288b55e7486cd092a17e6b496dfd91cdb
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Aug 22 10:05:19 2020 +0000

    Bug 18829: (QA follow-up) Fix punctuation, capitalization and page title
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 372aa0fb8a7710c5ec5ae92a67dbd1bf5611ff22
Author: Axel Amghar <axel.amghar@biblibre.com>
Date:   Mon Apr 29 11:27:49 2019 +0200

    Bug 18829: Elasticsearch - Put a better display for the view of ES indexed record
    
    To test:
    - apply the patch
    - go to global sysPref
    - make sure that SearchEngine have "ElasticSearch" as value
    - Search whatever you want in Search the catalog and select a record
    - Search the link (Ctrl f) : "Elasticsearch Record :" , click on the link
    - make sure that the pop-up open and you should see the elasticsearch result in JSON (the pop-up look the same as MARC preview)
    - note fields are alphabetized
    - from the command line delete the es record:
        curl -XDELETE es:9200/koha_kohadev_biblios/data/5
    - click the preview link, it syas record not found
    - check the logs - you see the error on missing record
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 942b07a0cecc9f63d956beafe55027b02d7b9aa3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 22 14:34:28 2023 +0100

    Bug 33229: Remove unecessary txn
    
    We don't need a transaction here.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7c45fc8bdfefb27a1d6f214c2906190bca1d628a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 14 20:02:10 2023 +0000

    Bug 33229: Clear patron reading history when privacy is set to never
    
    This patch adds a check to patron store routine. When privacy is changed
    to 'Never' we should immediately clear their history
    
    To test:
    1 - Set system preferences:
       AnonymousPatron - to a valid borrowernumber
       OPACPrivacy - Allow
    2 - Checkout some items to a patron with priacy set to default, return them
    3 - Log in to opac as patron
    4 - Confirm you can see your history
    5 - Change history to Never
    6 - Confirm history still viewable
    7 - Apply patch, restart all
    8 - Set privacy to Default
    9 - Confirm you can still see history, not deleted when not set as Never
    10 - Set privacy to 'Never'
    11 - Confirm history is anonymized
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f46948ad6387c2d960cb39ed8903a654faf57072
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Mar 9 15:43:24 2023 +0000

    Bug 33181: Use template wrapper for tabs on record merge pages
    
    This patch updates the include file which is used by both the
    bibliographic and authority recrd merge pages. The markup is updated to
    use the new tab WRAPPER directives.
    
    To test, apply the patch and perform a catalog search which will return
    more than one record.
    
     - Select two or more records and choose "Merge records" from the edit
       menu at the top of the search results.
     - On the following page you should see one tab for each record you
       selected from the search results.
     - Clicking each tab should show you the correct bibliographic details.
    
    Perform the same tests from the authority search results page.
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8a4e971ad311662033ba7386bc0048040b4db26a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Mar 9 19:28:47 2023 +0000

    Bug 33187: Use template wrapper for tabs article requests and holds awaiting pickup pages
    
    This patch updates the article requests management and holds awaiting
    pickup templates in the staff interface so that they use the new WRAPPER
    directive for building tabs.
    
    To test, apply the patch and make sure the ArticleRequests system
    preference is enabled.
    
    - Go to Circulation -> Article requests
    - You should see three tabs, "New," "Pending," and "Processing."
    - The tabs should look correct and work correctly.
    - Go to Circulation -> Holds awaiting pickup
    - You should see three tabs, "Holds waiting", "Holds waiting over X
      days," and "Holds with cancellation requests." ("X" is the value in
      the ReservesMaxPickUpDelay system preference)
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 99db0a904d32bb0a6acea6b214f7050184d94e06
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Mar 3 16:01:41 2023 +0000

    Bug 33129: Use template wrapper for breadcrumbs: Administration part 6
    
    This patch updates several administration templates so that they
    use the new WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    Administration ->
     - Search engine configuration (Elasticsearch)
     - Share content with Mana KB
     - Circulation and fine rules
     - SMS cellular providers (SMSSendDriver preference must be set)
     - System preferences -> Local use (list, add, edit, confirm delete)
     - Library transfer limits (Advanced editor)
     - Transport cost matrix
     - Usage statistics
     - Z39.50/SRU servers administration (list, add, edit, both Z39.50 and
       SRU servers)
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0c2c765243a796f4f1921a1dcca150972de360dc
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Mon Mar 13 15:32:38 2023 -0400

    Bug 33191: AutoEmailPrimaryAddress options don't match labels in memberentry
    
    This patch changes the wording for the EmailFieldPrimary system
    preference to make it clearer.
    
    To test:
    1. Go to Administration > Global system preferences
    2. Search for EmailFieldPrimary
    3. Read the sentence and choices, make sure it makes sense, grammar and
       spelling are correct
    4. Optionally, try the different options, they should work as before
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 31b7e12d72497bfcb6daf0864c04febf364825f6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Apr 14 11:31:04 2023 -0300

    Bug 33192: DBRev 22.12.00.020
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e799ba790a807771014ddf5b6c0e4c079523f66b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Apr 14 11:29:22 2023 -0300

    Bug 33192: (QA follow-up) Add execution bit
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d5e45c54b12b50ae01fd50118c396353e29e508f
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Apr 10 14:40:56 2023 +0000

    Bug 33192: (QA follow-up) Fix it-IT sample data and unit tests
    
    To test:
    * prove t/db_dependent/Message.t
    * Run the it-IT web installer and make sure 'email' is set.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 101ce893747cf3f9da5fdce40c071513a125e220
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Mar 13 14:05:51 2023 +0000

    Bug 33192: Update all occurrences of AutoEmailPrimaryAddress
    
    This patch updates all references to AutoEmailPrimaryAddress to refer to
    EmailFieldPrimary instead.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 375bd6831226a29b0972b7ad752ddb596fa6214c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Mar 13 14:04:45 2023 +0000

    Bug 33192: Update AutoEmailPrimaryAddress to EmailFieldPrimary
    
    This patch updates the database to reflect the new name for the
    AutoEmailPrimaryAddress system preferences
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2ce97da0e77812300bbfaa7fe579732da80364dd
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Apr 12 19:58:03 2023 +0000

    Bug 33509: Don't show Other holdings when there are no alternate holdings
    
    With bug 33509 alternate holdings defined in AlternateHoldingsField
    are shown in the staff interface result list. This works greatly
    when there are items or when there is are alternate holdings (the
    configured field/subfields exist in the record), but not when there
    are no items and no alternate holdings.
    
    To test:
    * Add 100a to AlternateHoldingsField
    * Make a search with some records without items
      Sample data: perl
    * Make sure the alternate holdings show when there are no items
      and 100a exists
    * Change to 100z
    * Verify the result list now shows "Other holdings:" with nothing below
    * Apply patch
    * Repeat
      * Alternate holdings should still show nicely
      * Without alternate holdings 'no items' is displayed
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f08d5b53256f5e5db309657a7c3c48b274e379e2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 13 16:27:57 2023 +0000

    Bug 33231: (QA follow-up) Simplify conditional for date display
    
    This patch simply checks if we have a value for copyrighydate and
    displays publicationyear if not. Even if copyrightdate is requested (MARC21)
    but isn't populated, the publicatoinyear won't replace it because we
    haven't transformed that field.
    
    I think this read a bit easier, but RM can weigh in
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7849a7e75f3df51b362f84e083899c99781feb58
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Tue Mar 14 22:30:31 2023 +0100

    Bug 33231: (Bug 30813 follow-up) No publication date nor edition statements in Z39.50 biblio search results
    
    After executing Z39.50 search, the result table is not populated
    with publication dates.  This is the result of code refactoring
    made by Bug 30813.  The removed function _add_rowdata treated
    in special way the publication date putting it in $row in under
    special, non MARC variant dependent key 'date'--since
    the z3950_search.tt looks under breeding_loo.date.
    
    Same effect (no data in the result table) with edition statement.
    Reason: editionstatement coming from TransformMarcToKoha vs edition
    expected by z3950_search.tt.
    
    Test plan:
    ==========
    1. Have a Koha instance with some Z39.50 servers defined.
    2. In Cataloging, perform a Z39.50 search for any term.
    3. In the result table you would not get the publication dates nor
       edition statement (if present in the record).
    4. Apply the patch.
    5. Repeat the search.
    6. You should see the publication dates (according to the current
       mapping, i.e. for MARC 21 coming from 260 $c or 264 $c subfield)
       and edition statements from the records found.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 106adb320ca0c3dbee3b43cf0afff7b41bb67a96
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Oct 5 10:21:14 2022 -1000

    Bug 31695: Type standard number is missing field ci_raw in field_config.yaml
    
    In Elasticsearch fields config field_config.yaml, default type as a field 'ci_raw'. This is used for exact search.
    This field is missing for type  standard number 'stdno'.
    
    Test plan :
    1) In the staff interface, go to Administration, and search for SearchEngine
    2) Make sure that the SearchEngine preference is set to Elasticsearch and save
    3) Return to Administration and select "Search engine configuration"
    4) Change the type of "Heading-Main" to "Std. Number" and save
    5) Rebuild the index (e.g. "koha-elasticsearch --rebuild -d kohadev")
    6) Go to the main staff page and select Authorities
    7) Search for a heading (e.g. "A Dual-language book")
    => Result is found with or without patch
    8) Click on the sliders and select "is exactly" for the operator and search
    => Result is found only with patch
    9) Apply the patch
    10) Rebuild the index (e.g. "koha-elasticsearch --rebuild -d kohadev")
    11) Click on the sliders and select "is exactly" for the operator and search
    => Result is found only with patch
    
    Signed-off-by: Kevin Carnes <kevin.carnes@ub.lu.se>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 22ddda55a0413a8d77a3c6278a1d347e66404d07
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Apr 12 13:17:11 2023 +0000

    Bug 33360: (follow-up) Adjust wording in verbose mode
    
    Koha reports 'sending mail' while we actually are still
    processing mail. It could still be delayed, fail, etc.
    
    Test plan:
    Run process_message_queue in verbose mode. If a message
    get processed, you should see:
        Processing email message to patron: 51 at /usr/share/koha/C4/Letters.pm line 1008.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d314d53724cc2e35148d726835bf7d0f0086b092
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Apr 12 11:59:45 2023 +0000

    Bug 33360: Update koha-conf.xml
    
    Test plan:
    We already tested it. Just look at changes in this patch.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cb898443216889cfa2eb0af5629c3fef70023f04
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Apr 4 16:10:21 2023 +0200

    Bug 33360: Adjust Letters.t for limit parameter and domain limits
    
    Includes:
    [1] Add a counter in the send_or_die mock.
    [2] Correct from processed count to sent count.
    [3] More extensive testing for limit parameter and domain limits.
    
    Test plan:
    Run t/db_dependent/Letters.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5c3286e24cd20a4f9fb9e0213d2f00c7816ed7b4
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Apr 3 16:29:22 2023 +0200

    Bug 33360: Improving limit behavior in SendQueuedMessages
    
    Includes:
    [1] Do no longer use the limit in the sql selection, but apply the
    limit as a maximum for the number of sent messages. This is more
    practical in terms of not flooding your mail server (and the
    receiving ones).
    
    [2] Replace call of _get_unsent_messages by Koha objects search.
    
    [3] Do no longer report the number of messages seen, but report the
    number actually 'sent'.
    
    [4] If we lookup the to_address but we need to delay a message, save
    the email address for the next run. Also optimizing patron lookup
    in _send_message_by_email.
    
    [5} Add support for $where parameter in SendQueuedMessages. Used by
    process_message_queue.pl.
    
    [6] Handle scalar/array for letter_code and type parameter too.
    
    Test plan:
    [1] Adjust your domain limit settings in koha-conf.
        Use notices to three domains. Group A and B.
        <message_domain_limits>
        <domain><name>A</name><limit>1</limit><unit>1h</unit></domain>
        <domain><name>B/name><belongs_to>A</belongs_to></domain>
        <domain><name>C</name><limit>1</limit><unit>1h</unit></domain>
        </message_domain_limits>
        Replace A, B and C with your choice. Do not forget the belongs_to.
        Restart all.
    [2] Disable cron job for message queue.
    [3] Generate two notices for each domain A, B and C (in that order).
        Make sure that borrowers involved have correct address.
    [4] Run process_message_queue.pl -limit 1
    [5] Check that one is sent for A, 5 pending.
    [6] Run process_message_queue.pl -limit 2
    [7] Check that one is sent for C, 4 pending.
    [8] Run process_message_queue.pl (without limit).
    [9] Check that nothing is sent, 4 pending.
    [10] Check that message_queue.to_address is filled for those 4.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9a1c17509fa32bad2c03c1da8b3d2c0aff8f52b4
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Mar 30 08:58:10 2023 +0200

    Bug 33360: Incorporate Koha::Notice::Util in Letters:SendQueuedMessages
    
    Minimal adjustment to get the feature working.
    Will still be improved in follow-up.
    
    Test plan:
    [1] Add a domain limit to your koha-conf:
        <message_domain_limits>
        <domain><name>gmail.com</name><limit>1</limit> <unit>1h</unit></domain>
        </message_domain_limits>
        Replace gmail.com by the domain you want to send to.
        Restart all.
    [2] Disable cron job for message queue.
    [3] Generate two pending notices in the queue.
    [4] Run process_message_queue.pl
    [5] Check that one is sent, one is still pending.
    [6] Run again.
    [7] Check: nothing is sent, last one still pending.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f27a43c54a64a9d10b34ae699b61414c40544fc7
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Apr 3 16:29:22 2023 +0200

    Bug 33360: Extend Koha::Notice::Util with domain groups
    
    The functionality is extended a bit here by:
    [1] Allowing to combine domains in a shared count.
    [2] Only counting sent messages for the specified
        domains when it is really needed.
    
    Test plan:
    Run t/db_dependent/Koha/Notice_Util.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0cbbd1b3d2cc92092fb2d87b285b4c75233faa59
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Mar 30 14:56:55 2023 +0200

    Bug 33360: Add Koha::Notice::Util for mail domain limits
    
    Ground work in new module.
    Includes unit test.
    
    Test plan:
    Run t/db_dependent/Koha/Notice_Util.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fc44f6e8ecd7decacb44bc3b18ba749a14503e53
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Feb 8 17:46:48 2023 +0000

    Bug 32956: Use template wrapper for HTML customizations tabs
    
    This patch updates the HTML customizations template to replace tab
    markup with the use of WRAPPERs.
    
    - Apply the patch and go to Tools -> HTML customizations.
    - Create or edit an entry.
    - You should see tabs for each available language, for example
      Default, English, French.
    - Test adding content to each language to confirm that the correct
      information is saved under the correct tab.
    
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 790ac29bd37e108a732fc6273a98ff24e2015e68
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Feb 1 11:59:09 2023 +0000

    Bug 32955: Standardize structure around action fieldsets in various templates
    
    This patch updates various templates so that fieldsets with the
    "action" class are placed outside the form's main fieldset.
    
    To test, apply the patch and check the following pages to confirm that
    changes to form structure look correct:
    
    - Cataloging -> Quick spine label creator
    - Patrons -> Patron details -> Files
    - Patrons -> Patron details -> Housebound
    - Circulation -> Upload offline circulation file
    - Tools -> Patron card creator -> Manage -> Images
    - Point of sale -> Transaction history -> "Older transactions" form
    
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2626d8a07ff4a39c2e47b88b1ab853c68d114f10
Author: Philip Orr <philip.orr@lmscloud.de>
Date:   Thu Mar 30 10:09:32 2023 +0000

    Bug 31722: Fixed EDIFACT message to only display if EDIFACT is turned on
    
    This patch makes a small change to the display of the note
    "No EDIFACT configuration for..." on the basket group page to
    only display if the system preference EDIFACT is set to "Enable".
    
    To Test:
    1. apply patch
    2. navigate to a vendor over Acquisitions -> Vendor e.g. My Vendor
    3. create a basket group (doesn't have to have any baskets, an empty one will do)
    4. close the basket group
    5. set system preference "EDIFACT" to "Enable"
    6. navigate to Administration -> EDI Accounts and make sure the vendor doesn't have
       an EDI account configured
    7. navigate to your vendor's closed basket groups
       over Acquisitions -> Vendor -> Basket groups (left panel) -> Tab "Closed"
    8. you should see a message "No EDIFACT configuration for (name of vendor)" in the
       Action column
    9. set system preference "EDIFACT" to "Disable"
    10. go back to your vendor's closed basket groups
    11. you shouldn't see the message "No EDIFACT configuration for (name of vendor)"
    
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 99f8273673b7e2189fff5846bdeacff70e0a48ed
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Mar 31 00:55:56 2023 +0000

    Bug 33375: Quote reserved keyword 'rank' in advanced editor
    
    This change quotes the 'rank' keyword in the advanced editor,
    so that it doesn't cause fatal crashes when using MySQL 8
    
    Test plan:
    0. Apply patch and koha-plack --restart kohadev
    1. Enable advanced editor
    http://localhost:8081/cgi-bin/koha/admin/preferences.pl?op=search&searchfield=EnableAdvancedCatalogingEditor
    2. Go to http://localhost:8081/cgi-bin/koha/cataloguing/editor.pl#new/
    3. Click on "Advanced" on the left nav
    4. Note that "LIBRARY OF CONGRESS" is ordered before "NATIONAL LIBRARY OF FRANCE"
    5. Rejoice!
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 668252503d3893391d0399537fd6f787cce507c4
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Mar 17 17:08:56 2023 -1000

    Bug 33088: Remove background-job-progressbar.js in batch_record_modification.tt
    
    It must be removed, we don't need it since bug 22417
    
    Test plan :
    Play with batch record modification and check there is no JS error
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c101afb0a036a460b1a585574151de80e2afd43a
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Mar 28 22:52:08 2023 -1000

    Bug 32127: Add unit test
    
    Run prove t/db_dependent/Template/Plugin/Categories.t
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4f37c5bc7710619f297c356a7b19aa1767de7071
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Mon Nov 7 11:42:49 2022 -1000

    Bug 32127: Sort by description in Koha::Template::Plugin::Categories
    
    Like in Koha::Template::Plugin::Branches, methods in
    Koha::Template::Plugin::Categories must return categories sorted by
    description.
    
    Test plan :
    1) Create a new patron category with code ZZZ and description AAAAAA
    2) Go to patron search /cgi-bin/koha/members/members-home.pl
    3) Look at filter by category :
    => Without patch the value AAAAAA is last
    => With patch the value AAAAAA is first
    4) Click on 'New patron'
    => Without patch the value AAAAAA is last
    => With patch the value AAAAAA is first
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dae97fd2b70da860cced08e572a402ce477b5285
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Mon Mar 27 11:29:01 2023 -1000

    Bug 33345: On-site checkout checkbox does not work since issue date using flatpickr
    
    Since Bug 30718, date due uses flatpickr.
    The JavaScript code setting due date via on-site checkout checkbox needs to be adapted.
    Sort of like Bug 30717.
    
    This patch renames the variable sent to template
    'today_due_date_and_time' to avoid confusion with variable 'todaysdate'
    used in other templates.
    
    Test plan :
    1) Enable system preference 'OnSiteCheckouts'
    2) Go to a patron circulation page /cgi-bin/koha/circ/circulation.pl
    3) Click on settings icon inside barcode input
    => Check due date input is empty
    4) Click on 'On-site checkout'
    => Check due date input is filled with today date at 23:59
    5) Fill barcode input and do check-out
    6) Check due date is correct
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 74dd4dc28157c4848539ae2a334af1f89d33a43d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 14 08:24:07 2023 +0200

    Bug 32418: Remove useless statement
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 40d014ec45a581e432fae6a30c9d048b342c987e
Author: Paul Derscheid <paul.derscheid@lmscloud.de>
Date:   Thu Apr 13 09:27:31 2023 +0000

    Bug 32418: (follow-up) Remove jQuery, Fix typos in url, add biblio as template param
    
    To test:
    1. Go to any record
    2. Hit the edit button on an item in the holdings table
    3. Modify the URL so that the query param for the itemnumber is either
        3.1 empty: /cgi-bin/koha/cataloguing/additem.pl?op=edititem&biblionumber=384&itemnumber=
        3.2 an itemnumber that doesn't exist:
          /cgi-bin/koha/cataloguing/additem.pl?op=edititem&biblionumber=384&itemnumber=9999999999
        3.3 whatever else you come up with..
    4. Check the same thing for the dupe option (op=dupeitem)
    5. Sign off
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ef803755f5892ab811a65a55fbb77d7d3d66f551
Author: Paul Derscheid <paul.derscheid@lmscloud.de>
Date:   Mon Feb 20 11:06:32 2023 +0100

    Bug 32418: Can't call method 'unblessed' on an undefined value at cataloguing/additem.pl
    
    Check whether the current op is edititem or dupeitem and if so check
    whether the itemnumber supplied as a query param actually exists.
    
    If it doesn't, redirect to the additem op and hide all UI elements except
    for a dialog that gives options to add a new item to the record or to
    view the records holdings.
    
    This behaviour was adapted from the addbiblio view, as suggested by
    Fridolin.
    
    To test:
    1. Go to any record
    2. Hit the edit button on an item in the holdings table
    3. Modify the URL so that the query param for the itemnumber is either
        3.1 empty: /cgi-bin/koha/cataloguing/additem.pl?op=edititem&biblionumber=384&itemnumber=
        3.2 an itemnumber that doesn't exist:
          /cgi-bin/koha/cataloguing/additem.pl?op=edititem&biblionumber=384&itemnumber=9999999999
        3.3 whatever else you come up with..
    4. Check the same thing for the dupe option (op=dupeitem)
    5. Sign off
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a509d341826f9057edc29480ee425c9230b10081
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 11 14:57:47 2023 +0200

    Bug 33485: (bug 32939 follow-up) Fix title endpoint
    
    The change is obvious, we shoulf call the title endpoint, not package.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a29964778a44ef6f7f4a8400df4ef12ab80f5ed6
Author: Galen Charlton <gmc@equinoxOLI.org>
Date:   Tue Jan 24 14:10:32 2023 -0500

    Bug 32716: larger proxy_buffer_size in NGINX example config
    
    This patch updates the example NGINX config to increase the
    proxy_buffer_size to 16k. The default value of 4k (on some platforms)
    has empirically been shown to be a bit too small for the Link
    headers emitted by the REST API when pagination is requested.
    
    To test
    -------
    [1] Set up a Koha system with NGINX as a reverse proxy in
        front of it (either in front of Apache or in front of
        of Starman).
    [2] Perform a patron search that returns at least two pages
        of results and navigate to the second page.
    [3] Note that the navigation can fail with a 502 HTTP error
        and an "upstream sent too big header while reading response
        header from upstream" error in the NGINX log.
    
        The problem is most likely when the pagesize of the server
        running NGINX is 4096 bytes.
    [4] Update the NGINX configuration per this patch and restart
        NGINX.
    [5] This time, repeating step 2 should work.
    
    Signed-off-by: Galen Charlton <gmc@equinoxOLI.org>
    Signed-off-by: Brendan Gallagher <brendan@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d1b4481fe474053df47d6779727f95a553631856
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 11 13:37:14 2023 +0200

    Bug 33481: Pass content-type when requesting EBSCO's webservice
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4a52bc9a7a600e60b69405c59fb912fc9c74c83e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Mar 9 18:14:04 2023 +0000

    Bug 33307: Use template wrapper for tabs: Lists
    
    This patch updates the lists template so that it uses the new WRAPPER
    directive to build tabbed navigation.
    
    To test, apply the patch and go to the lists page in the staff
    interface.
    
    - Confirm that the two tabs, "Your lists" and "Public lists" look
      correct and work correctly.
    - Test that the correct tab is selected when you add the "public" or
      "private" parameter to the url:
    
      /cgi-bin/koha/virtualshelves/shelves.pl?op=list&public=1
      /cgi-bin/koha/virtualshelves/shelves.pl?op=list&public=0
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 84cdc74ba72163495d431ba93682f8fc8c024f1f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Mar 21 16:43:06 2023 +0000

    Bug 33294: Use template wrapper for tabs: Checkout history
    
    This patch updates the checkout history template so that it uses the new
    WRAPPER directive to build tabbed navigation.
    
    In order to make the template logic a little easier to parse I moved the
    table of checkouts into its own BLOCK to be used when on-site checkouts
    are enabled or disabled.
    
    To test, apply the patch and locate a patron who has a checkout history.
    
    - If you have on-site checkouts enabled you will see three tabs: All,
      Checkouts, and On-site checkouts.
    - Each tab should work correctly: The checkouts tab showing only regular
      checkouts, the on-site checkouts tab showing only on-site checkouts.
    - If you have on-site checkouts disabled there should be no tabs, the
      table of checkouts should be displayed inside a "page-section" div
      instead.
    
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d289cc0a3d7ec640513d2749fff255f0567f2631
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Mar 21 16:25:48 2023 +0000

    Bug 33293: Use template wrapper for tabs: Holds
    
    This patch updates the holds template so that it uses the new WRAPPER
    directive to build tabbed navigation.
    
    Note: this patch includes indentation changes, so check the diff
    accordingly.
    
    To test, apply the patch and locate a bibliographic record which
    can be placed on hold.
    
    - Start the process of placing a hold.
    - If you have any patron clubs defined, there should be two tabs:
      Patrons and Clubs. Both should look correct and work correctly.
    - If you have no patron clubs you should see only the Patrons tab.
    
    Works as advertised.
    
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 78f037382ddb111e707b42d0c1b2c125fff81c1e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Mar 9 18:47:04 2023 +0000

    Bug 33186: Use template wrapper for tabs on search history and advanced search
    
    This patch updates the search history and advanced search templates in
    the staff interface so that they use the new WRAPPER directive for
    building tabs.
    
    The patch also makes a minor change to CSS in order to accommodate the
    different markup.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    - Go to the catalog's advanced search page. You should see tabs for each
      of the selections defined in the AdvancedSearchTypes system
      preference.
    - The tabs should look correct and work correctly.
    - If necessary, enable the EnableSearchHistory system preference.
    - Click the logged-in user name in the header menu and choose "Search
      history."
    - On this page you should see two tabs, catalog and authority. Both tabs
      should look correct and work correctly.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b6230b0817e7cf257c515cb320597ac790eca544
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Mar 9 17:47:54 2023 +0000

    Bug 33185: Use template wrapper for tabs on authority and biblio MARC details
    
    This patch updates the MARC detail views of bibliographic and authority
    records so that they use the new WRAPPER directives to build tabs.
    
    To test, apply the patch and locate a bibliographic record in the
    catalog.
    
    - Click the "MARC" menu item in the left-hand sidebar.
    - Confirm that all tabs work correctly.
    
    Perform the same test by going to Authorities and doing a search for
    authorities. Clicking one of the results should take you to a
    tabbed MARC view.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3296cf37f462ee25c855d3f5d59dbd7fbb422121
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Apr 12 16:30:39 2023 +0000

    Bug 33408: Fix template literal
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 741ccb6e44304a32acceb3e68d2fd25c27c6b37f
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Apr 12 09:42:29 2023 +0000

    Bug 33408: Move providers into syspref array
    
    ERMProviders is a sys pref, place it in sysprefs
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1610a1d1633e7c398096e86a98239fd9171b5ea7
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Apr 12 08:36:18 2023 +0000

    Bug 33408: Add storeToRefs to ERMStore
    
    It makes it so that any changes to the local property
    is also reflected in the store and other components are
    made aware of the new value. No need to explicitly
    change both local property and store property values.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a94178217b73b46a6051c7551b0711966e88e045
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 7 10:40:08 2023 +0200

    Bug 33408: Store sysprefs in a new ERM store
    
    We need the sysprefs' values to be shared between the components
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b01094030ac145144eab384a6bba015d1916dfe9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Apr 5 14:27:03 2023 +0200

    Bug 33408: We need only one this.loaded call
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0f01c16ba1cf277a709c0a79aeea0f4b99c12353
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Apr 5 11:43:52 2023 +0000

    Bug 33408: Remove obsolete tests and template sys pref code
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0efb53b3a2e4c9619d3b89af53c67397bad14b0f
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Apr 5 11:45:45 2023 +0000

    Bug 33408: Prevent access to erm module by URL if sys pref is disabled
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c482119a4e6d12063e63b726d40c9ddcef0b787f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Apr 5 10:03:21 2023 +0200

    Bug 33408: Extend defaultCommandTimeout for cypress
    
    Sometimes the initial page load takes more than 4 seconds.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2579b95db9d0477060c91610e54b44d96cc8ea20
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 4 17:02:12 2023 +0200

    Bug 33408: Mock ERM sysprefs from cypress tests
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9be7dab4a1ce4cc13de012c58023a363b21fbcb9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 4 15:51:51 2023 +0200

    Bug 33408: Fetch sysprefs from svc/config/systempreferences
    
    It will be easier to mock/set them from cypress tests.
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e102daaf310de6a64389e33f7c7fd473752c5e33
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Mar 24 15:19:06 2023 -1000

    Bug 33336: Use a dedicated column for plugin status in plugins table
    
    In plugins table plugins/plugins-home.pl the status enable/disable is with the name, styled as a label.
    With new interface ENABLED is yellow, this looks weird.
    Also I bet this is bad for accessibility.
    
    I propose to move this info to a dedicated column.
    I use bootstrap classes bg-success and bg-warning like in about.pl
    
    Test plan:
    1) Install some plugins
    2) Go to Administration > Manage plugins
    3) Check you see table with column status
    4) Disable a plugin
    5) Check you see 'Disabled' in status
    
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 70e80bb4c8cc29a70515eb0ecb7ce358b7bfb51d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 17 17:22:00 2023 +0000

    Bug 32998: Consolidate opac-tmpl/lib and opac-tmpl/bootstrap/lib
    
    This patch moves OPAC third-party assets from opac-tmpl/bootstrap/lib
    to opac-tmpl/lib, eliminating some redundancy and making it simpler
    to understand where such assets should be found.
    
    To test, apply the patch and confirm that there is no longer a lib
    directory under opac-tmpl/bootstrap.
    
    Test various parts of the OPAC to confirm that assets are still loading
    correctly. Everything should look right and work correctly. The
    browser's developer console should be free of errors.
    
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9597b88ed259470f2dc5d0a2be206cad6e0f3605
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 21 09:00:10 2023 +0100

    Bug 33289: Add API client class to interact with svc/config/systempreferences
    
    On bug 30708 we will need to modify sysprefs from the UI (Vue app), it
    could be useful for other developments as well and so it is moved on its
    own bug report.
    
    Test plan:
    It can be tested independently of bug 30708 using the following code:
    
    const client = APIClient.sysprefs
    client.sysprefs
        .update(
            "CardnumberLength",
            "42"
        )
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f92f967626d3f3d8e1a873a5378f3fdaa0724fac
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 11 11:27:08 2023 +0200

    Bug 33466: Link to the vendor from the ERM module
    
    There are 3 tables in the ERM module where we display the vendor name
    but without a link to the acquisition module.
    
    This patch adds the links.
    
    Test plan:
    Create an agreement, a license and a local package.
    Pick a vendor and notice that now there is a link on the list view.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ca80bf67cea41613248d8e932e4dbdb5b232b5ca
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Mar 7 11:15:07 2023 +0000

    Bug 33154: Tab WRAPPER follow-up: label text must be translatable
    
    This patch updates templates which have already been updated to use the
    new tab WRAPPER system for generating tab markup. Templates are changed
    so that tab label strings are wrapped in <span> to make them
    translatable.
    
    The html_helpers include file is also updated so that the example code
    in comments shows the right pattern (the breadcrumb example is similarly
    corrected).
    
    To test apply the patch and run the translation script to update the .po
    files, e.g.
    
    perl misc/translator/translate update fr-FR
    
    Check the updated .po files for some of the lines modified in the patch:
    
     - koha-tmpl/intranet-tmpl/prog/en/modules/about.tt:31
     - koha-tmpl/intranet-tmpl/prog/en/modules/acqui/addorderiso2709.tt:69
     - koha-tmpl/intranet-tmpl/prog/en/modules/acqui/basketgroup.tt:330
     - koha-tmpl/intranet-tmpl/prog/en/modules/acqui/invoices.tt:141
     - koha-tmpl/intranet-tmpl/prog/en/modules/admin/item_circulation_alerts.tt:118
     - koha-tmpl/intranet-tmpl/prog/en/modules/serials/serials-search.tt:259
     - koha-tmpl/intranet-tmpl/prog/en/modules/tools/letter.tt:455
     - koha-tmpl/intranet-tmpl/prog/en/modules/serials/subscription-detail.tt:98
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a80de2dc8379efa2a8fef761738779aaf4396647
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Apr 10 16:38:14 2023 +0000

    Bug 33316: (QA follow-up) Add link to record, fix typo and heading
    
    * h2 h2 directly following each other make no sense. Changed to h2 h3
    * ids changed to IDs
    * Linked the record ID to the catalog entry
      Note: We also have this link in the batch record mod job details
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dad9430b7b062d25aec0cdeb86dd412133621d5f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 22 19:54:48 2023 +0000

    Bug 33316: Improve display of ES indexer jobs
    
    We don't do a lot of processing to the data, but we can still
    make the display a bit nicer, to show how many records were
    done, and show the record ids.
    
    To test:
    1 - Do some batch modifications on a system running ES
    2 - Check background jobs to see ES jobs
    3 - Note display
    4 - Apply patch
    5 - Confirm display is improved
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8fcc61e82eef585ad79220eadcace9c35613580f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Apr 13 11:32:52 2023 -0300

    Bug 33486: POD fix
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 42c1059d1dd2821e61010f3f6ea0d8d52a699d05
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 11 13:43:51 2023 +0000

    Bug 33486: Remove Koha::BackgroundJob::UpdateElasticIndex->process
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 27474b9e9e4d38e5353cfaccc3d363e57005fc0e
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Apr 8 22:46:26 2023 +0000

    Bug 33111: (QA follow-up) Add more context to breadcrumb parts for easier translation
    
    With the new wrappers we will translate every part of the
    breadcrumb as a separate string and only once. So single words
    like 'new' can be problematic in translation.
    
    This changes:
    * New > New identity provider
    * Edit > Edit identity provider
    * (Item search fields) <name of search field> > Edit <name of search field>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0c5261f4f1fce30affc790142aaf9027199a84f0
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 6 16:43:38 2023 +0000

    Bug 33111: Use template wrapper for breadcrumbs: Administration part 4
    
    This patch updates several administration templates so that they
    use the new WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    Administration ->
      - Library EANs (list, new, edit, confirm delete)
      - Identity providers (list, new, edit)
        - Manage domains (list, new, edit)
      - Item circulation alerts
      - Item search fields (list, new, edit)
      - Item types (list, new, edit, delete confirm)
      - Koha to MARC mapping
      - Library groups
      - MARC frameworks ->
        -> Actions -> MARC structure (list, new, edit, delete confirm)
           -> View, edit, and delete confirm
      - Record matching rules (list, new, edit, delete confirm)
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7020b90f305fbdf584b57f61e39d259d3f9e0d22
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Feb 27 11:33:22 2023 +0000

    Bug 33077: Improve ease of translating template title tags
    
    This patch uses the cities administration page as a proof-of-concept for
    using the [% t() %] construction to wrap translatable string in template
    <title> tags. This should result in a significant improvement in
    translatability.
    
    To test, apply the patch and run the translation script to update the
    .po files, e.g.
    
    perl misc/translator/translate update fr-FR
    
    Check the updated .po files:
    
     - In fr-FR-staff-prog.po you should no longer see a reference to
       cities.tt line 6, "#: koha-tmpl/intranet-tmpl/prog/en/modules/admin/cities.tt:6"
     - In fr-FR-messages.po you should see several strings which have been
       pulled individually from the <title> tag:
       - cities.tt:9, msgid "Modify city"
       - cities.tt:11, msgid "New city"
       - cities.tt:15, msgid "Confirm deletion of city"
       - cities.tt:19, msgid "Administration", msgid "Cities", msgid "Koha",
         and msgid "Administration"
    
    Translate the strings in fr-FR-messages.po and install the updated
    translation:
    
    perl misc/translator/translate install fr-FR
    
    Swith to the update language in the staff interface and confirm that the
    Cities page title is translated correctly.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4e2871c2859e2c7453e1175aee7eafc60a5e1937
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Feb 23 22:53:02 2023 +0000

    Bug 33001: (follow-up) Add spans for translatability
    
    This patch finds places in the updated breadcrumbs markup where a
    translatable string is isolated in a way that makes it hard for the
    translation script to find it, and wraps these strings with <span>
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=33005
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4535efa4aaae5c70ac9d75b4749585db51bcd874
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 6 11:49:32 2023 +0000

    Bug 33001: Use template wrapper for breadcrumbs: Acquisitions part 2
    
    This patch updates several acquisitions-related templates so that they
    use the new WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Acquisitions ->
      - Late orders,
        - moddeliverydate.tt
        - modordernotes.tt
        -- These two templates aren't linked to from anywhere, but
           you can navigate directly to:
           http://127.0.0.1:8081/cgi-bin/koha/acqui/modordernotes.pl?ordernumber=X and
           http://127.0.0.1:8081/cgi-bin/koha/acqui/moddeliverydate.pl?ordernumber=1
    
      - Order search, order search results
      - Invoice search,
        - Invoice details,
          - Invoice files
      - Vendor -> Basket -> Add to basket ->
        - From a new (empty) record
        - From existing orders (copy)
        - From a subscription
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=33005
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 51ceac07dff0508932d80d9d582a60bc26e9709a
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Apr 9 00:26:22 2023 +0000

    Bug 33005: (QA follow-up) Update breadcrumb when editing a vendor
    
    When editing a vendor the last part of the breadcrumbs read:
    Update: <vendor>
    
    This is very unusual, so updated to the standard wording:
    Modify <vendor>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 129a01af5ab0ab11bb0afd13d1117ac7510b29be
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 24 12:44:31 2023 +0000

    Bug 33005: (follow-up) Add spans for translatability
    
    This patch finds places in the updated breadcrumbs markup where a
    translatable string is isolated in a way that makes it hard for the
    translation script to find it, and wraps these strings with <span>
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 21e88a1aec58211011c6a8914e3eb2a85dad3c74
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 6 11:50:00 2023 +0000

    Bug 33005: Use template wrapper for breadcrumbs: Acquisitions part 3
    
    This patch updates several acquisitions-related templates so that they
    use the new WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Acquisitions ->
      -> All available funds table
         -> Ordered
         -> Spent
      -> Vendor
         -> Vendor details
         -> Uncertain prices
         -> Receive shipments (must have at least one open basket)
            -> If necessary, receive a new shipment. Or click an
               invoice number to reach the "receive orders" page.
               -> Click "Receive" in the table listing baskets.
         -> Basket -> Add to basket
            -> From a suggestion
            -> From an external source
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 90dfcc7506cbaeaff21692a60dad453454f5ba2c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Mar 31 13:34:54 2023 +0000

    Bug 33382: Use template wrapper for breadcrumbs: Patron clubs
    
    This patch updates patron club templates so that they use the
    new WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Tools ->
      - Patron clubs
        - New club template
        - Edit club template
        - New club
        - Edit club
        - Club enrollments (from the "Actions" menu in the list of clubs)
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1baeb95a32057d29f0a6eb30e2a6332e613c8385
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Mar 30 19:15:10 2023 +0000

    Bug 33373: Use template wrapper for breadcrumbs: Circulation part 3
    
    This patch updates several circulation templates so that they use the
    new WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Circulation ->
      - Article requests -> Article request detail
      - Check in
      - Hold ratios
      - Transfers to send
      - Transfers to receive
      - Holds queue
      - Holds awaiting pickup
      - Set library
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ab467d7c32ef50dc18664f6b1f1bcb76f9d4d4e9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Mar 30 18:34:08 2023 +0000

    Bug 33372: Use template wrapper for breadcrumbs: Circulation part 2
    
    This patch updates several circulation templates so that they use the
    new WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Circulation
      - Check out
        - Check out to patron
      - Curbside pickups
      - Built-in offline circulation
      - Pending on-site checkouts
      - Overdues
      - Holds to pull
      - Renew
    
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c74696b33313097fec9bcee92c8e4f072a9ed611
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Mar 9 15:20:21 2023 +0000

    Bug 33180: Use template wrapper for tabs: Budgets and Search engine configuration
    
    This patch updates two administration templates so that they use the new
    WRAPPER directive to build tabbed navigation: Budgets and Search engine
    configuration.
    
    Note: this patch includes indentation changes, so check the diff
    accordingly.
    
    To test, apply the patch and check the updated pages:
    
     - Administration -> Budgets
     - Administration -> Search engine configuration
    
    On both pages tabs should look correct and work correctly.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a9d736ba74aadbc409597b58608ae33120efb368
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Mar 23 17:42:46 2023 +0000

    Bug 33323: Select button in patron search modal is not translatable
    
    This patch modifies the JS which generates some markup during some kinds
    of patron searches so that the strings labeling submit buttons can be
    translated.
    
    To test, apply the patch and go to Administration -> Funds.
    - Add a fund or edit an existing one.
    - Test the "Select owner" link
      - A popup should appear, and after performing a patron search which
        returns results you should see a "Select" column in the last column
        of the patron search results table.
    - Test the "Add users" link
      - Perform the same test as above. The button in the last column should
        be "Add"
    - The template accommodates two other cases, "Edit" and "Check out" but
      I was unable to find a place where they were used.
    
    - To test translatability, run the translation tool for any language,
      e.g.
    
      perl misc/translator/translate update fr-FR
    
      Search the regenerated po file (in this example
      misc/translator/po/fr-FR-staff-prog.po) to confirm that the
      correct strings are there: "Select", "Add", "Edit, and "Check out"
      should each have entries for line 234, e.g.
    
      koha-tmpl/intranet-tmpl/prog/en/includes/patron-search.inc:234
      c-format
      msgid "Select"
      msgstr "Sélectionner"
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c5f3312eafd5aa02638b812882e249e794271b36
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Mar 17 20:47:09 2023 +0000

    Bug 33265: Clean up serial links on serial edit page
    
    To test:
    1. Reviece a serial
    2. Notice the unstyled links:
        * Serial collection #1
        * Subscription #1
        * Show biblio
    3. Apply pacth
    4. The links should now be styled.
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7574626f2c33fb22f1c2467d364842edf4217195
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Mar 17 14:30:37 2023 +0000

    Bug 33261: Format dates in subscription_issues table
    
    To test:
    * Add a subscription
    * Receive some issues
    * Go to the subscription detail page, issues tab
    * Verify the dates there display as YYYY-MM-DD
    * Change DateFormat system preference setting, nothing changes.
    * Apply patch
    * Date should now be formatted in the way specified in the DateFormat system preference
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bb4e59f888e5c1e292dfa37c65b644b3993736c6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Apr 5 09:11:41 2023 +0200

    Bug 33414: Add the data-order class
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2ea8bf53834e9bfcf5962efe81ebf4e7515965cc
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Apr 4 16:55:49 2023 -1000

    Bug 33414: Fix dates display in orders by fund
    
    Since Bug 30718, dates are displayed in ISO format in orders by fund.
    It removed dates formating in perl, this must be added in template.
    
    Test plan :
    1) Create some fresh orders on a fund F1
    2) Go to Acquisitions > Orders by fund
    3) Select fund F1 and 'To screen into the browser'
    4) Submit
    5) Check you see a formatted date in 'Entry date' column
    6) Recieve some order from fund F1
    Repeat 2 to 4
    7) Check you see formatted date in 'Date received' column
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 95aaf4269601592baf660ecdd3b90ec12590250c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Mar 24 12:52:28 2023 +0000

    Bug 33332: Fix formatting of TT comments to improve translations
    
    This patch reformats some Template::Toolkit multi-line comments in
    html_helpers.inc so that each line is commented separately. This seems
    to prevent the translation tool from putting the comments into the po
    file.
    
    To test, apply the patch and confirm that pages which use the
    breadcrumbs and tabs WRAPPER directives still work correctly:
    
    - Breadcrumbs: staff client home page, about page, error page.
    - Tabs: Administration -> Library transfer limits or circulation alerts.
    - To test translatability, run the translation tool for any language,
      e.g.
    
      perl misc/translator/translate update fr-FR
    
    Search the regenerated po file (in this example
    misc/translator/po/fr-FR-staff-prog.po) to confirm that there is no
    instance of something like "[%%# BOOTSTRAP BREADCRUMBS WRAPPER USAGE"
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ad53b3b538d8763f2a22a76b826e13e893fe7b52
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 6 15:44:55 2023 +0000

    Bug 33007: Use template wrapper for breadcrumbs: Administration part 2
    
    This patch updates several administration templates so that they
    use the new WRAPPER for displaying breadcrumbs.
    
    Note: The patch includes indentation changes, so ignore whitespace
    when viewing the diff.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    Administration ->
      - Authorized values
        - New category
        - View category
          - Add authorized value
          - Edit authorized value
     - Authority types
       - New authority type
       - Edit authority type
       - Confirm deletion of authority type
     - Manage jobs
       - Details of job
     - MARC bibliographic framework
       - New framework
       - Edit framework
       - Confirm deletion of framework
     - Library transfer limits
     - Libraries
       - New library
       - Edit library
       - Confirm deletion of library
     - Cash registers
       - New cash register
       - Edit cash register
     - Patron categories
       - New category
       - Edit category
       - Confirm deletion of category
     - MARC bibliographic framework test
     - Classification configuration
       - Modify classification source
       - Add classification source
       - Modify filing rule
       - Add filing rule
       - Modify splitting rule
       - Add splitting rule
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f24771ad2e8009530cc0273562342265a3a9592c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 24 13:09:56 2023 +0000

    Bug 33006: (follow-up) Add spans for translatability
    
    This patch finds places in the updated breadcrumbs markup where a
    translatable string is isolated in a way that makes it hard for the
    translation script to find it, and wraps these strings with <span>
    
    This patch also modifies some of the templates to simplify
    the logic controlling how different elements of the breadcrumbs are
    shown or not.
    
    This patch also modifies another problematic set of strings in
    auth_tag_structure.tt outside the breadcrumbs.
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 695b0aaa618908fc3017077faf3c6d6d13252156
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Sat Feb 18 15:54:24 2023 +0000

    Bug 33006: Use template wrapper for breadcrumbs: Administration part 1
    
    This patch updates several administration templates so that they
    use the new WRAPPER for displaying breadcrumbs.
    
    Note: The patch includes indentation changes, so ignore whitespace
    when viewing the diff.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    Administration
      -> Administration home page
         - Under "Additional parameters"
           -> Additional fields
              -> View, create, edit
           -> Advanced editor shortcuts
           -> Audio alerts
         - Under "Acquisition parameters"
           -> Budgets
              -> Add fund
              -> Close fund
              -> Budget details
                 -> Planning
              -> Create, edit, duplicate
         - Under "Catalog"
           -> Authority types -> MARC structure
              -> New, edit, delete
              -> "Actions" -> Subfields
                -> Edit, delete
    Acquisitions -> Vendor -> Contracts
      - View, edit, delete
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 61114e032f74a6b688fed2ff49a6140dbeefff75
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Mar 1 20:06:31 2023 +0000

    Bug 33130: Use template wrapper for breadcrumbs: Authorities
    
    This patch updates several administration templates so that they
    use the new WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Authorities home page
      - Authority search results
      - Authority detail
      - Authority add/edit
      - Authority merge
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6faf64eb3b0b2cd78a497614d45f543e1c661a33
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Mar 3 19:13:18 2023 +0000

    Bug 33131: Use template wrapper for breadcrumbs: Catalog part 1
    
    This patch updates several catalog templates so that they use the new
    WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Advanced search
    - Bibliographic detail page
    - Labeled MARC detail page
    - MARC detail page
    - ISBD detail page
    - Item detail page
    - Image detail view (with LocalCoverImages enabled and a custom cover
      added)
    - Checkout history
    - Item search
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2cf9efa3b6a1bf4d830017053bb54d544d3c00ac
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Mar 6 13:23:23 2023 +0000

    Bug 33147: Use template wrapper for breadcrumbs: Catalog part 2
    
    This patch updates several catalog templates so that they use the new
    WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Catalog search results
    - Search history (from the user menu in the header)
    - Bibliographic detail page -> Rota (must have StockRotation enabled).
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aa22e9fb485c5a3c77858f6137afcc8a405db214
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Mar 23 16:12:15 2023 +0000

    Bug 33324: Use template wrapper for tabs: Tools
    
    This patch updates templates in the tools directory so that they use
    the new WRAPPER directive to build tabbed navigation.
    
    To test, apply the patch and test each page to confirm that tabs still
    work as before:
    
    - Cataloging -> Export
      - This page by default will have two tabs, "Export bibliographic
        records" and "Export authority records." You can edit koha-conf.xml
        to enable two additional options: backup_db_via_tools and
        backup_conf_via_tools
    - Tools -> Batch patron modification
      - "By card number" and "By borrowernumber," and "By patron list" if
        you have any patron lists defined.
    - Tools -> Overdue notice/status triggers
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6884b73a71cafbe82f4ee8ba19d978781ff72bf7
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Mar 23 16:45:00 2023 +0000

    Bug 33333: Use template wrapper for tabs: SQL reports
    
    This patch updates the saved SQL reports template so that it uses the
    new WRAPPER directive to build tab markup.
    
    To test, apply the patch and go to Reports -> Use saved. In order to
    properly test the patch you should have multiple reports defined with
    multiple categories ("Accounts", "Acquisitions", "Catalog", etc.).
    
    Clicking each tab should filter the table of reports correctly.
    After navigating away from the page and back to it, your selected tab
    should be remembered.
    
    Signed-off-by: Alexandra Speer <alexandra.speer@bsz-bw.de>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 043822ce8f45e0087c0b5e220471973579e314a3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 7 13:48:29 2023 +0200

    Bug 32334: Fix spelling
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3b4aab475fa84043f8a9b5a1800a1e1d200a770e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Mar 17 07:46:44 2023 +0000

    Bug 32334: (follow-up) Improvement for schema parameter
    
    Essentially only adds a warn, some cosmetic changes too.
    
    Test plan:
    Copy your kohastructure to xx.sql.
    Run sync_db_comments.pl -schema xx.sql. You will see usage.
    Run sync_db_comments.pl -schema xyz.sql. You will see a warn and
    the usage statement.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d7e5fb03442edf555267dda852b0bb432a879713
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Mar 16 12:57:13 2023 +0000

    Bug 32334: (follow-up) Fix for bug 31028, introducing IF NOT EXISTS
    
    We need to expect CREATE TABLE IF NOT EXISTS now in kohastructure.
    
    Test plan:
    Run misc/maintenance/sync_db_comments.pl -reset
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6a706f0e6a3d70627fd98e6537487352015332e7
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Feb 15 15:54:37 2023 +0000

    Bug 32334: (QA follow-up) Improve finding schema file
    
    Adds a schema parameter to the cmdline script now too.
    
    Test plan:
    Run sync_db_comments.pl with -schema file where file does not exist.
    (On dev install) rename kohastructure.sql, try with[out] referring
    to it using -schema. You could also use the standard path
    intranet/cgi-bin/installer/data/mysql.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a59c530786bd228bacd3f8b14da42b653dbc3ff1
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Feb 15 14:47:45 2023 +0000

    Bug 32334: (QA follow-up) Remove fh and verbose parameter in favor of messages
    
    The module returns messages. The script can print them in verbose
    mode. Test script adjusted accordingly.
    
    Test plan:
    Run t/db_dependent/Koha/Database/Commenter.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6767b4e240c85eab7403be342dfb347774d5e3b2
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Feb 15 13:05:55 2023 +0000

    Bug 32334: (QA follow-up) Remove unused modules
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0fc078b05f1d666ac8bde8fdaad15d7cddf39ba7
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Feb 15 12:49:16 2023 +0000

    Bug 32334: (QA follow-up) Invert dry run mode to commit parameter
    
    Note: This is only done (and 'needed') for the command line, not
    for the module subroutines.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7967dab02862cf90f6e5f61dcdcef1532fd5dfa1
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Feb 9 15:29:39 2023 +0000

    Bug 32334: (QA follow-up) Force mutual exclusiveness of cmdline flags
    
    Test plan:
    Run sync_db_comments.pl --clear --renumber
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit be83a522985673b86b69e3a93bab605834a41492
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Nov 23 13:19:35 2022 +0100

    Bug 32334: Add sync_db_comments script
    
    Test plan:
    [1] Backup your database, if not done already.
    [2] Check output of dry_run when clearing a table:
        misc/maintenance/sync_db_comments.pl -clear -table items -dry
    [3] Save output of misc/devel/update_dbix_class_files before changing
        comments in order to compare later. (Commit your changes.)
        You may not have changes after running (at least on a fresh
        database). That's fine.
    [4] Clear all comments:
        misc/maintenance/sync_db_comments.pl -clear
    [5] Renumber all comments:
        misc/maintenance/sync_db_comments.pl -renum
    [6] Reset all comments to schema. Make sure that script finds your
        structure in installer/data/mysql folder.
        misc/maintenance/sync_db_comments.pl -reset
    [7] Run update_dbix_class_files again and inspect changes as compared
        to previous run.
        Can you explain them? You should only see changes related to
        column comments. If you did not have changes in step 3, you
        should not have them here too.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 10dfc7d1ae086f7e097e0bc8fda5f53f248afea1
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Nov 23 13:19:35 2022 +0100

    Bug 32334: Introduce Koha::Database::Commenter
    
    Test plan:
    [1] Make a backup of your database. Just for precaution.
    [2] Run t/db_dependent/Koha/Database/Commenter.t.
    * Note: This test script adds and removes a test table.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d9aaf9f986778cf019bda89c550da7c734291dd8
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Dec 1 13:08:46 2022 +0000

    Bug 32334: Add general exception FileNotFound
    
    No test plan.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dc16d53d57d3038c802dea357723285334d82298
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Dec 1 08:51:53 2022 +0000

    Bug 32334: Exceptions - Add parameter to WrongParameter
    
    Test plan:
    Run t/Koha/Exceptions.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7c8c98379536fe6d18fbf4c0108bdfdf4bebee1e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Apr 12 10:54:10 2023 -0300

    Bug 33402: (follow-up) Move Searchbar_spec.ts
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0fbf5221837d27731bab6c1b821c2a1517f4369a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Mar 31 14:27:17 2023 +0000

    Bug 33383: Use template wrapper for breadcrumbs: Course reserves
    
    This patch updates several course reserves templates so that they use
    the new WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Course reserves
      - New course
      - Edit course
      - Batch remove reserves
      - Course details
        - Add reserves (step one and two)
        - Batch add reserves
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 33f14126a15e6bc4f1c1b1bda93713d494a07fe3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Mar 31 15:33:35 2023 +0000

    Bug 33384: Use template wrapper for breadcrumbs: Labels
    
    This patch updates label creator templates so that they use the
    new WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Cataloging ->
      - Barcode image generator
      - Quick spine label creator
      - Label creator ->
        - Label creator home
          - New ->
            - Label batch
            - Layout
            - Label template
            - Printer profile
            - Barcode range
          - Manage ->
            - Label batches
              - Edit batch
            - Layouts
              - Edit layout
            - Label templates
              - Edit template
            - Printer profiles
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a674c4571614aa3a7cc32fc9cf58d7d66c171f0f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Mar 31 16:38:32 2023 +0000

    Bug 33385: Use template wrapper for breadcrumbs: Patrons part 1
    
    This patch updates several patron templates so that they use the new
    WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Patron details ->
      - Accounting -> Transactions
        - Transaction details
          - Check the details of a debit and a credit
      - More ->
        - Manage API keys (must have RESTOAuth2ClientCredentials preference
          enabled)
        - Delete (with a patron who has checkouts)
        - Discharge
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c2cc62a6b052cb9217eae76d1342b6d365bba436
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Mar 31 18:01:59 2023 +0000

    Bug 33386: Use template wrapper for breadcrumbs: Patrons part 2
    
    This patch updates several patron templates so that they use the
    new WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Patron details ->
      - Files (EnableBorrowerFiles must be enabled)
      - Holds history
      - Housebound (HouseboundModule must be enabled)
      - Ill requests history (ILLModule must be enabled)
    - Staff interface home page -> Discharge requests pending
      - Must have useDischarge preference enabled
      - Must log into the OPAC and request a discharge using a patron
        account which has no checkouts.
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 186690a38dd35ce67e399e089834e9c303dae81b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Apr 3 16:08:56 2023 +0000

    Bug 33387: Use template wrapper for breadcrumbs: Patrons part 3
    
    This patch updates several patron templates so that they use the
    new WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Patrons home page
    - Patron detail page ->
      - Change password
      - Set permissions
      - Accounting ->
        - Create manual invoice
        - Create manual credit
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ab4211d42b5d635f6c8d351402c45369c862291f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Apr 4 14:39:45 2023 +0000

    Bug 33389: Use template wrapper for breadcrumbs: Patrons part 5
    
    This patch updates several patron templates so that they use the
    new WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Patrons ->
      - Patron details ->
        (Patron with charges) ->
          - Accounting ->
            - Pay
        - Circulation history
        - Routing lists
        - Statistics
        - Purchase suggestions
        - More -> Manage two-factor authentication (must have
          TwoFactorAuthentication enabled)
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9cb3bac73772c34061a626a93e68835494fce9d3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Apr 4 15:32:08 2023 +0000

    Bug 33409: Use template wrapper for breadcrumbs: Patrons lists
    
    This patch updates several patron lists templates so that they use the
    new WRAPPER for displaying breadcrumbs.
    
    Unrelated minor change: I added <span> around a few other strings in
    add-modify.tt in order to improve translatability.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Tools ->
      - Patron lists
        - Main page
        - Patron list contents view
        - Add patron list
        - Edit patron list
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4e957afb9aa7449546c73c2335c0a69f6cd2048d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Apr 4 16:39:02 2023 +0000

    Bug 33410: Use template wrapper for breadcrumbs: Patron card creator
    
    This patch updates several patron card creator templates so that they
    use the new WRAPPER for displaying breadcrumbs.
    
    Unrelated minor change: I added <span> around a few other strings in
    edit-profile.tt and edit-template.tt in order to improve
    translatability.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Tools ->
      - Patron card creator
        - New ->
          - Card batch
          - Image
          - Layout
          - Card template
          - Printer profile
        - Manage ->
          - Card batches
          - Images
          - Layouts
          - Card templates
          - Printer profiles
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 783c835dc9e36676e4f53a98fd2b83b532df97d5
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Apr 9 12:04:28 2023 +0000

    Bug 27775: (QA follow-up) Slightly change of wording
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1aa64502aa191f8bfea96d05fbd060a0445e19a5
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Mar 17 17:29:51 2023 -1000

    Bug 27775: Add hint about drag and drop feature on framework subfield edit
    
    Bug 8976 introduced a way to sort subfields on a MARC/Auth framework using drag and drop. But there's no visible hint alerting the user the feature exists.
    
    Test plan :
    1) Go to Admistration > MARC bibliographic framework
    2) Choose a framework and click on Actions > MARC structure
    3) Choose a field and click on Actions > Edit subfields
    4) Check you see the hint
    5) Go to Admistration > Authority types
    6) Choose a type and click on Actions > MARC structure
    7) Choose a field and click on Actions > Subfields
    8) Click on Edit subfields
    9) Check you see the hint
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b7d7a334e367178c52cad4ad6074ce643ffe778b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 7 13:35:39 2023 +0000

    Bug 32013: Adjust unit tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4f51c1801c6e74fa20ae6939069aff5ccc6ca490
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jan 9 14:57:44 2023 +0000

    Bug 32013: (QA follow-up) Move mock to avoid warns from sample data creation
    
    Mentored-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 056b0d96c4ee80b1496731f19b85dedf2e79c456
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Dec 7 11:12:11 2022 +0000

    Bug 32013: (follow-up) Add unit test
    
    A unit test has been added to show the pass-through of skip_record_index from AddRenewal() to the Item->store() method.
    
    Test plan:
    1) In the shell run prove -vv t/db_dependent/Koha/SearchEngine/Indexer.t
    2) Observe Subtest 3: Test AddRenewal indexer call
    3) All four tests should pass
    
    Mentored-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0fe026c6fa46135238f91826778bcbffcb13567b
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue Dec 6 10:39:14 2022 +0000

    Bug 32013: Autorenewal batch indexing
    
    The automatic_renewals.pl cron script currently loops through items for automatic renewal and calls the indexer for each one individually. skip_record_index has now been added as a parameter to the AddRenewal function to skip the indexing process. The item numbers are now added to an array and then the indexer is called once from within automatic_renewals.pl and passed the array to queue one indexing job instead of multiple jobs.
    
    Test plan:
    1) AddRenewal uses Koha::Items->store() to trigger the indexing process. Run prove -vv t/db_dependent/Koha/SearchEngine/Indexer.t and check tests 5,6,29,30. These tests prove whether passing skip_record_index to store() triggers or skips the indexing process. All four tests should pass to show that skip_index_records can prevent the indexing being triggered.
    2) Add multiple renewals that are able to be autorenewed and run the automatic_renewals.pl script. There should be multiple items queued in zebraqueue.
    3) Apply patch and try again
    4) There should now only be one job queued in zebraqueue
    
    Mentored-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 04f172d3442efc9d1bdbd06df8df6d741a617974
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 20 16:53:15 2023 +0000

    Bug 33281: Improve detail auth links and add to marc preview
    
    This patch adds atuh links tot he marc preview, and makes detial auth links open in a
    new tab/window and consolidates some code
    
    To test:
    1 - View a record linked to authorities in staff client
    2 - Note links have no hover text, and open in same window
    3 - Apply patch
    4 - Restart and reload
    5 - Note links now have a hint
    6 - Note they open in new window
    7 -  View marc preview and note there are similar links
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6cc5c0208a553b839807460c944bebe30de23416
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Apr 6 10:40:48 2023 +0000

    Bug 33429: Use template wrapper for breadcrumbs: Plugins
    
    This patch updates plugin management templates so that they use the new
    WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - In koha-conf.xml, look for "enable_plugins"
      - If this is set to 0, plugins are disabled:
        <enable_plugins>0</enable_plugins>
        - Navigate directly to /cgi-bin/koha/plugins/plugins-home.pl, which
          should say "Plugins disabled." Check the breadcrumbs on this page.
      - Enable plugins by changing the settimg in koha-conf.xml to 1 (a
        restart of services is required): <enable_plugins>1</enable_plugins>
      - Go to Administration -> Manage plugins
        - Test this page and the "Upload plugin" page.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eb782f5cc672b1ccdab1355267df12bd019f38aa
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Apr 6 16:04:26 2023 +0000

    Bug 33434: Use template wrapper for breadcrumbs: Point of sale
    
    This patch updates point of sale templates so that they use the new
    WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - If necessary, enable the EnablePointOfSale and UseCashRegisters system
      preferences.
      - If none are configured, define at least one register and at least
        one debit type by going to Administration -> Cash registers and
        Administration -> Debit types.
      - From the staff interface's user menu in the upper right of the
        header, choose "Set library and cash register."
      - Select a cash register.
      - Go to the Point of Sale page, and check the breadcrumbs on that
        page.
        - Check the "Transaction history for [register name]" and "Cash
          summary for [library] pages linked in the left-hand sidebar.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 11712996480a162af4be42f024f3ef38e35a6236
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Apr 6 18:55:50 2023 +0000

    Bug 33436: Use template wrapper for breadcrumbs: Reports part 1
    
    This patch updates several reports templates so that they use the new
    WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Reports ->
      - Acquisitions statistics
        - Results
      - Patrons with the most checkouts
        - Results
      - Patrons who haven't checked out
        - Results
      - Patron statistics wizard
        - Results
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c3a40d3801d8f70fa865e22962f7ae7e9cc18bee
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 30 09:19:40 2023 +0200

    Bug 33367: Remove tmp/modified_authorities/README.txt
    
    This does not seem to be useful anymore.
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3489cdca1fd77272deca0ff6bda90e1cc40dddb1
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 17 11:20:31 2023 +0000

    Bug 32301: Fix default search sorting in advanced search when not editing a search
    
    Bug 22605 changed the sorting to expect the passed parameter from the
    previous search, this broke default when the search page was loaded
    fresh.
    
    We should simply fallback from the edited search to the default if it is
    not set
    
    To test:
    1) Go to staff client
    2) Go to Advanced Search
    3) Notice the default Sort By value is "Relevance"
    4) Go to system preferences
    5) Go to "defaultSortField"
    6) Change the value of the system preference
    7) Go back to Advanced Search and refresh the page
    8) Notice that there are no changes, the default Sort By is still
    "Relevance"
    9) Apply patch
    10) Notice that changing the system preference now changes the default
    Sort By in Advanced Search
    11) Perform a search, change the sorting, then edit the search
    12) Confirm the correct sorting from the search is preserved
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 37bf88d252c7efda0301b8f3624dcf02ebb7e187
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Feb 2 15:58:10 2023 +0000

    Bug 32800: Don't embed items for deleted records
    
    To test:
    1 - Delete a biblio
    2 - perl /kohadevbox/koha/misc/migration_tools/build_oai_sets.pl -v -i -r
    3 - Error:
        Can't call method "items" on an undefined value at /kohadevbox/koha/Koha/Biblio/Metadata.pm line 163.
    4 - Apply patch
    5 - Repeat
    6 - Success!
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Works as advertised.
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3143549403defc64f8f55f6e38e2327be45cc38e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 4 13:27:13 2023 +0200

    Bug 33402: Move ERM Cypress tests to their own directory
    
    We need to move the existing Cypress tests (that are ERM only, t/cypress/integration/*.ts )
    to their own subdirectory, eg t/cypress/integration/ERM
    
    Test plan:
    Confirm that the cypress tests are still passing after this change:
      perl /kohadevbox/misc4dev/run_tests.pl --run-cypress-tests-only
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 307df8f1af4b0577faa4dbcac8072d818bc1ffe4
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Apr 10 16:13:04 2023 +0000

    Bug 29311: (follow-up) Fix t/db_dependent/selenium/regressions.t
    
    The test was checking for the value of an input field.
    But with this patch set, there is no longer an input, but
    a link element with the title. This adjusts the patch to look
    for the correct element.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 2fc06098d2133bfc7c46701e0e90fc384bbb1342
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Apr 10 16:08:32 2023 +0000

    Bug 29311: (follow-up) Add id to span elements
    
    The input fields in the form have ids, these are useful
    for styling, but also for the Selenium tests. This patch
    adds the ids from the former inputs to the now spans.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 32e5fa26e4965a425cd6ed96cb591e1a2164fe6b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jan 18 13:12:08 2023 +0000

    Bug 32634: (follow-up) Restructure page headings
    
    An error in template logic is preventing the page's h1 from displaying.
    Rather than fixing this I have changed the h1 to display a generic
    "Transaction details" h1. The h2 shows the transaction type (credit or
    debit).
    
    The h2 is now inside the .page-section.
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Checked all the places mentioned in the commit message, and they
    all have .page-section now.
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4573e5ff917f4e9df6becb2e7f70514a26ebde95
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 13 20:15:13 2023 +0000

    Bug 32634: Add 'page-section' to various pages
    
    This patch adds a "page-section" container div around the main section
    of various pages which lack it.
    
    This patch contains indentation changes, so please ignore whitespace
    when looking at the diff.
    
    Apply the patch and view the following pages to confirm that the main
    content is contained in a white box:
    
    - Locate a patron who has one or more account transactions.
      - Go to the Accounting tab -> Transactions. Click "Details" on one of
          the lines.
        - The "Details of debit" and "History" sections should be wrapped in
          .page-section.
    - Go to Tools -> Patron card creator -> Manage -> Batches
      - If there is not a list of batches you will need to create at least
        one to see the page-section container.
    - Go to Reports -> View dictionary.
      - If necessary, add a definition.
      - The "Current terms" table should be wrapped in .page-section.
    - Go to Lists and view the contents of a list with one or more titles on
      it. The table of titles should be wrapped in .page-section.
    - Go to Circulation -> Upload offline circulation file (.koc)
      - Upload a .koc file and click the "Add to offline circulation queue."
      - On the confirmation page the "Your file was uploaded" message should
        be wrapped in .page-section.
      - Click "View pending offline circulation actions"
        - The list of pending actions should be wrapped in .page-section
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8a63e6eeccac73c22223ede70039251ae705bedc
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Sun Mar 26 10:53:25 2023 +0000

    Bug 33066: Fix table style
    
    Move table rendering outside <ol> to prevent unintended style in _forms.scss from being applied and causing table to not be full width
    Remove unecessary table styling
    
    JD: following commit has been squashed. Patch from Pedro is fixing the
    FIXME
    """
    Bug 33066: Fix style - FIXME
    
    This is not working, see /cgi-bin/koha/erm/eholdings/local/packages/1
    The table is not taking width: 100%
    I fixed it previously with the display: table in the style block, but
    here it's not applied.
    
    There is also the "green tick" (fa-check-square-o) that is not on the
    same line https://snipboard.io/jma923.jpg
    """
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0a89bf85e0e961819d724171a6a9f201a089da68
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 17 16:20:27 2023 +0100

    Bug 33066: Fix cypress tests
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 674585850e2796792a3530cf3519416e5bc41480
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 17 15:38:06 2023 +0100

    Bug 33066: Remove useless use of useDataTable
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f2b9a44b711760e9bd17c0c62e1f8ebefa97dee2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 17 15:01:44 2023 +0100

    Bug 33066: Use KohaTable for EHoldingsEBSCOTitlesList
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e03cee38ca24265a5befcd7e194af3199093c0f1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 17 14:39:51 2023 +0100

    Bug 33066: Use KohaTable for EHoldingsEBSCOPackageTitlesList
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8bee4a203a293bc17f840e4cab637eb0d1d35fdb
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Mar 8 18:36:24 2023 +0000

    Bug 33066: Restore '(#id)' to lists
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 50b29f6e87638829aab28a1641a5b8ab58d4e73e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 8 15:57:09 2023 +0100

    Bug 33066: Use KohaTable for EHoldingsEBSCOPackagesList
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d62764612273f3dac7907e3ff8e515cd052a7993
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 8 15:02:13 2023 +0100

    Bug 33066: Use KohaTable for EHoldingsLocalTitlesList
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 116bc6d38630c6fb37d9b9fb9cc8a2206cb16fed
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 8 14:20:50 2023 +0100

    Bug 33066: Use KohaTable for EHoldingsLocalPackageTitlesList
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e2fb59d88fa85e5d23966c2d3e3762c6025cdc93
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 7 21:03:39 2023 +0100

    Bug 33066: Use KohaTable for EHoldingsLocalPackagesList
    
    Bug 33066: (follow-up) Use KohaTable for EHoldingsLocalTitlePackagesList
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 83a6aa77e69fdaa209e83d956488109fd5cb0912
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 8 13:24:23 2023 +0100

    Bug 33066: Restore filter by mine
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4e129cd5fee9927a148cd525b429e84e86b94d61
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 7 17:40:20 2023 +0100

    Bug 33066: Restore HTML escaping
    
    And we add a render function that will escape by default
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1c03ff77b272eada4859569389cc37c7e0a0c583
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 7 17:04:01 2023 +0100

    Bug 33066: Use KohaTable for LicensesList
    
    Bug 33066: (follow-up) Use KohaTable for LicensesList
    
    There was a mismatch, we can embed the whole vendor object info.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5df53ba5a5aaa1dabd1a279e575f3218e95b5981
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 7 16:46:48 2023 +0100

    Bug 33066: Fix width after ColVis change
    
    This fixes the width to 100%, otherwise it is not recalculated correctly
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2b7e6e19aec1245f08ca1c38d6bf272d8e4fc967
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 7 16:42:38 2023 +0100

    Bug 33066: Fix ColVis
    
    The filter (header) was not removed alongwith the column
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6638fdfc31ecd67b4956062e953860d42466a5ad
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 7 16:32:20 2023 +0100

    Bug 33066: Fix default_filters
    
    Will need to be tested when EHoldingsEBSCOTitlesList.vue will be
    adjusted
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9725551aca34a66ed689659aee2eee7925e01d7e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 7 16:26:43 2023 +0100

    Bug 33066: Fix default_search
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit de3f1d1f889a6b6e93c2db849731ee5fd9a03d81
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 7 16:13:03 2023 +0100

    Bug 33066: Remove duplicate 'Actions' column
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 922ed2d2830dbfe3f8f2b069eb03b314c5d16a5e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 7 15:42:48 2023 +0100

    Bug 33066: Embed vendor and retrieve vendor name from the request
    
    Bug 33066: (follow-up) Embed vendor and retrieve vendor name from the request
    
    It needs "Bug 32923: Allow to embed user_roles for agreements"
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 809f90d394fdef8142fdf8f4a6e825dc14a132d4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 7 15:37:10 2023 +0100

    Bug 33066: Remove build_datatable
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ea7e7aee26b9b89fd4fba5d3b3a5df5589794d92
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 7 15:36:46 2023 +0100

    Bug 33066: Fix name display
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fe3da95290698a57425c8d54ff05ed91c29b3683
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 7 15:02:25 2023 +0100

    Bug 33066: Reintroduce column filters
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 730aec445e650f9b8b5406617170f0fde74aee78
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 7 15:06:50 2023 +0100

    Bug 33066: Fix "Loading..."
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c28ee17c00ba0347d34ff5da2fee15b4759baa2c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 24 17:08:58 2023 +0100

    Bug 33066: Add colvis
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 75eaa1f5c58d224b48c332fd8eac31108eb9f375
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 24 15:47:41 2023 +0100

    Bug 33066: Fix dt - no need to reselect
    
    Bug 33066: (follow-up) Fix dt - no need to reselect
    
    Patron search result table was not displayed correctly
    Uncaught TypeError: this.on is not a function
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 765fd1ced3b9efc4ff6fb71e2fee1a7a227d1cae
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 24 13:14:19 2023 +0100

    Bug 33066: Introduce a KohaTable Vue component
    
    The way we deal with DataTables in Vue component is not nice, especially when we
    need to add buttons/link in the cell and interact with the rest of the Vue app from
    there.
    
    When I started to work on Vue last year there was no good solution from DataTables,
    now there is a Vue component. It is not perfect, you still cannot add Vue component
    in the DT component, but it brings something to follow. Agustin implemented something
    on theke/import_source_vue, but he went too far, and it will need to rewrite the
    whole ERM module. Additionally he didn't provide a solution that has the same features
    as what we have now.
    
    The goal of this patch is to not duplicate the code in datatables.js, we
    don't want to maintain two version of this code (one is enough already!)
    We split the huge function in datatables.js in small ones to make them
    reusable from the Vue component.
    
    This is quite ugly, and it needs to lot more addition, but it's a first
    start!
    
    Help, ideas, and feedback welcome (and needed!)
    
    Bug 33066: Fix agreement name in delete confirmation dialog
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ba601ca37fe45dacaa1ed34b783a7d239058724e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Apr 6 12:50:40 2023 -0300

    Bug 33368: DBRev 22.12.00.019
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 26120079a5380f13676648fc52f341da798f0804
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Apr 6 12:47:26 2023 -0300

    Bug 33368: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e81612c7191c8136ed72ce9c59e3951ca3c9adbc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 30 09:58:30 2023 +0200

    Bug 33368: Extends borrowers.flags to bigint
    
    it's a int(11) which means its limit is 2^31
    
    We have currently 29 permissions, there is only one remaining, at 31 permissions
    the permission system won't support a case where a patron has all permissions.
    
    Test plan:
    Don't apply this patch
    Add another permission
    INSERT INTO userflags (bit, flag, flagdesc, defaulton) VALUES (30, 'new permission 1', '', 0) ;
    Go to the interface, tick all the boxes
    select flags from borrowers where borrowernumber=5;
    => 2113928830
    Remember:
    2^31  2147483648
    2^32  4294967296
    
    Add another one
    INSERT INTO userflags (bit, flag, flagdesc, defaulton) VALUES (31, 'new permission 2', '', 0) ;
    Repeat the step before
    => boom
    CGI::Compile::ROOT::kohadevbox_koha_members_member_2dflags_2epl::member_2dflags_2epl(): DBI Exception: DBD::mysql::st execute failed: Out of range value for column 'flags' at row 1 at /usr/share/perl5/CGI/Emulate/PSGI.pm line 30
    
    Apply the patch, try again
    
    QA note: That's ofc not the best solution, but the easiest for now
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6b9117df81f7fe4691e0cba54ff4e0f1e0762a26
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Apr 6 11:27:46 2023 -0300

    Bug 30403: (QA follow-up) Add new YAML syspref to about.pl
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 64c3ad594787f3235359972f8c4acdf4a6105788
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Apr 6 10:38:16 2023 -0300

    Bug 30403: (follow-up) Remove useless warning
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f7cb2230040f2ddd65f535c8ea3318089af5e90f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Apr 6 10:25:12 2023 -0300

    Bug 30403: DBRev 22.12.00.018
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 999a890aad79fcc5e407e5d6ba1b5768752a5698
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Dec 16 09:22:41 2022 -0500

    Bug 30403: (QA follow-up) Fix up atomic update
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d320d98a2e826ed5836b76e8b7a65c3c671a160c
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Dec 16 09:21:48 2022 -0500

    Bug 30403: (QA follow-up) Fix warning in unit test
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b1731a54e554fffecf20806701c2d89eb00b20d3
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Tue Mar 29 12:51:01 2022 +0300

    Bug 30403: Add syspref UpdateNotForLoanStatusOnCheckout
    
    We currently have syspref UpdateNotForLoanStatusOnCheckin which updates
    notforloan status when item is checked in. We should also have
    same kind of syspref for check outs. This would be usefull if for
    example library has item in exhibition with status
    "In exhibition, available for loan". When patron check outs the
    item notforloan status can be reseted back to 0, informing staff
    that the item is back on circulation.
    
    This patch adds new syspref Add syspref UpdateNotForLoanStatusOnCheckout.
    
    To test:
    1. Set items notforloan status as e.g -1.
    2. Check out item for a patron.
    => Note that items status doesn't change.
    3. Apply patch and update database if needed.
    4. Add "-1: 0" to syspref UpdateNotForLoanStatusOnCheckout.
    5. Check item in and out again for a patron.
    => Note that items status is changed as 0.
    
    Also prove t/db_dependent/Circulation/issue.t
    
    Sponsored-by: Koha-Suomi Oy
    
    Signed-off-by: Catrina <catrina@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c0392d881b0672c1b97e06df04f26806e48630e3
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Sep 23 10:12:22 2022 +0200

    Bug 31615: Allow checkin of items bundles without verifying their contents
    
    This patch adds a button in the "bundle verification" modal to skip
    this step and do the checkin anyway.
    
    Test plan:
    1. Create an items bundle (see bug 28854 comment 458)
    2. Check out this bundle, then return it. The "bundle verification"
       modal should appear
    3. Leave the textarea empty and click on "Confirm checkin without
       verifying bundle contents"
    4. Confirm that the bundle was correctly returned, and no items were
       marked as lost
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e91b3fb4b01cf303a471abb98c7a9528b59c45f9
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Mon Jan 9 16:38:47 2023 +0000

    Bug 32510: Patrons - 'New list' option is not available when too many patron's lists
    
    It's impossible to add a patron to a new list when Koha has more than 35 patrons’ lists. This behaviour affects the 'add patron to list' drop-down menu in the patron search page (Patrons module > patron search > add to patron list button ). Koha will show a drop-down menu without the 'New list' option being visible, so you can't create more lists.
    
    This patch allows scrolling the drop-down menu when there are too many lists.
    
    To reproduce:
    1. Go to Patron module
    2. Search for patrons
    3. Select few accounts
    4. Click on 'add to patron list',  then choose 'New list'
    If your Koha has a little number of patrons’ lists, add some more until you've reached a total of 35 lists (or more depending on your sreen resolution).
    5. When you've reached 35 lists, try to add a patron to a new list
    --> the 'new list' option is no longer available after 35 lists
    
    6. Apply the patch
    7. compile the .scss file 'yarn build --view'
    8. Clear your navigator caches
    9. repeat step 1, 2, 3, 4
    11. You can now scroll drop-down menu and see The 'New list' option
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 78b999842cecad70c6f1c494c29a152a63e5f5d9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Apr 6 10:16:00 2023 -0300

    Bug 31123: DBRev 22.12.00.017
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fd39dbb3d9c8a17fa3d3a45dc9902574d3197114
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Mar 30 14:14:58 2023 +0000

    Bug 31123: Fix file permission
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1c85b3052863ecb0ce94567b0b04d0705d6a514e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 24 15:42:00 2023 +0000

    Bug 31123: Add all subfields to OPAC stylsheet
    
    This patch updates the OPAC XSLT's to display all subfields, barring the
    'x' field which is often used as a 'private note' in other notes fields.
    
    We also handle converting subfield 'u' to a hyper link if it's found to
    be present and use subfield 'a' for the link text if present.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ae24dcce4ab57d5ba98999b667a2562148c68028
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 24 15:36:00 2023 +0000

    Bug 31123: Update Staff XSLT to include all subfields
    
    This patch updates the XSLT sheets to include all subfields in your
    selected ContentWarningField in display and handles converting the
    subfield u if present to a hyperlink.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4b6124395e7269d0ef9a5bc2906509b72077b863
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Sep 8 15:11:31 2022 +0100

    Bug 31123: Display content warnings in OPAC
    
    This patch adds handling of content warning display to the OPAC for both
    detail and search result views
    
    Test plan
    1) Work through the test plan for the previous patch
    2) Confirm that the same text now also displays on the equivilent OPAC
       pages.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7f5732903339ef443cc6a0017212f9206af312c2
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Sep 8 15:07:57 2022 +0100

    Bug 31123: Display content warnings on the intranet
    
    This patch adds handling to our XSLT processing to pass the new
    `ContentWarningField` preference value to the stylesheets and then uses
    that variable to add content warning notes to both the detail and search
    result displays of the staff client.
    
    Test plan
    1) Run the database update to expose the new system preference
    2) Set `ContentWarningField` to something sensible, like `599`
    3) Add the above select field to one of your frameworks with a subfield
       `a`.
    4) Edit a record with that framework to add a content warning into the
       record
    5) Search for the record and confirm you now see `Content warning: Your
       test text`
    6) Click into the record detail and confirm you see the content warning
       text there too
    7) Bonus points: Assign a new authorized value category to the chosen
       field and subfield and confirm the staff client display text is used
       in the above tests.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b85e966e160bafa2bbc2d7e28da9f073bba60572
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Sep 8 16:38:16 2022 +0100

    Bug 31123: Add `ContentWarningField` preference
    
    This patch adds a new `ContentWarningField` preference allowing the
    library to define which 59X field to use to store harmful content
    warning notes.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8fd51b2a63270272a3211636d7e047057f4e1f24
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Mar 24 12:13:23 2023 -0400

    Bug 30930: (QA follow-up) Tidy code block
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cc61cd6313330777888699ccc7ddd804472a2142
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Mar 15 14:51:25 2021 +1300

    Bug 30930: Ability to change auth type while editing record
    
    This patch adds the ability to change the authority MARC framework/type
    being used while editing an authority record.
    
    To test:
    
    1) Log into the staff client and go to Authorities
    2) Search for an existing authority and edit it
    3) Notice there is no way to change this authority type
    4) Apply patch, restart services, refresh editor in browser
    5) Notice the new Settings dropdown. Click to open
    6) Confirm the correct current authority type is selected
    7) Select another type to change to that. The page should reload
    8) Confirm the page reloads with the correct authority type framework
    loaded and the MARC data is still correct
    
    Sponsored-by: Education Services Australia SCIS
    Signed-off-by: Jacob O'Mara <jacob.omara@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aba00f6cb316dbbf758fc58d7974442a809cda4a
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Dec 16 12:57:19 2022 -0500

    Bug 26598: (QA follow-up) Fix up tab for guarantees' charges
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 54307579ce46cdf6b2f2e3d033c75970a16d07d9
Author: Maryse Simard <maryse.simard@inlibro.com>
Date:   Thu Oct 1 23:53:17 2020 -0400

    Bug 26598: Display guarantee's fines on guarantor's details page
    
    A new tab is added to the details page of a patron to show, in a table, the fines of the patron's guarantees. A warning appears in the "Guarantees" section of the patron to make it obvious that fines exists.
    
    + resolve a git merge conflict
    
    To test:
    1) Apply patch
    2) Choose a patron that has guarantees and navigate to the patron's details page
    3) If the guarantees don't have any fines, the display should be unchanged
    4) Add fines to the guarantee
    5) Go back to the guarantor's details page
        => A warning should appear in the "Guarantees" section with the total due
    6) Clicking on the link accompanying the warning focuses on the new
    "Guarantees' fines" tab containing a table of all guarantee's and their
    fines.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Hammat Wele <hammat.wele@inlibro.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e23d4d0e6adbd1b2c48fa8c235953b8f642ad032
Author: Olivier Hubert <olivier.hubert@inlibro.com>
Date:   Wed Oct 26 12:29:20 2022 -0400

    Bug 31994: DataTable next button does not work when using data in the HTML
    
    This patch resolves the issue that occurs when the next button of a DataTable with data straight from the HTML is clicked.
    
    Test plan:
    1. Run the following SQL query on the database:
       DELETE FROM tables_settings WHERE tablename = 'table_item_type';
    2. Restart plack / memcached if using.
    3. Open itemtypes.pl.
    4. If there are fewer than 11 item types, create additional item types until there are more than 10, so that the next button can be used.
    5. Click on the next button / link.
    6. Notice that nothing happens.
    7. Apply the patch.
    8. Restart plack / memcached if using.
    9. Reload itemtypes.pl.
    10. Click on the next button / link.
    11. Notice that the next page is displayed.
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    I can reproduce the problem on ktd, after a restart_all and a
    hard reload of itemtypes.pl. Patch fixes the problem.
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 69a1c4a53abca3273bf497198348dcc5c406e1ce
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 29 14:03:49 2023 +0000

    Bug 29311: (QA follow-up) Fix filter
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9b231d0d5b1949292d5367c700183f534463672d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 29 14:02:47 2023 +0000

    Bug 29311: (QA follow-up) Fix an existing spelling typo
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d96393a52ab047939c97b5b5b496f2ed85f58893
Author: Jérémy Breuillard <jeremy.breuillard@biblibre.com>
Date:   Mon Mar 21 15:29:57 2022 +0100

    Bug 29311: Forbid editing biblio info when creating suggestion for biblio
    
    When creating a suggestion for an existing biblio, biblio info like
    title or author should not be editable.
    
    Test plan:
    1. Enable system preference 'suggestion'
    2. Log in at OPAC
    3. Go to a biblio record detail page
    4. Click 'suggest for purchase'
    5. Notice that all fields can be modified (title, author, ...)
    6. Apply patch
    7. Repeat steps 2 and 3 or refresh the page
    8. Verify that the biblio fields cannot be modified now. The only fields
       that should be editable are: quantity, item type, library, reason for
       suggestion, and notes
    
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f1ff6c57648ace2b31bca9fb3836d7ac386d2ae6
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Thu Jan 19 01:29:37 2023 +0000

    Bug 32686: Specify action of action_logs to purge
    
    Add --log-action parameter to cleanup_database.pl
    
    Test plan:
    1. Apply patch
    2. Enable cataloguing and borrowers log
    3. Make some changes to borrowers, create some borrowers, and edit some
    biblio records
    4. Change the action_logs.timestamp for all action_logs entries to 367
    days ago
    5. Run cleanup_database.pl with --logs 365 --log-module=MEMBERS
    --log-action=CREATE --confirm
    6. Confirm only the borrowers creation action_logs entries are removed
    7. Run cleanup_database.pl with --logs 365
    8. Confirm all action_logs entries are removed
    
    Sponsored-By: Toi Ohomai Institute of Technology, New Zealand
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit df8aca0252750d8d660007a1d1eeaf1f483a3e84
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Feb 13 19:34:45 2023 +0000

    Bug 32164: Add link to MARC modification templates from batch record modification page
    
    This patch adds a more visible link from the batch record modification
    page in the event that there are no MARC modification templates defined.
    The template checks that the user has permission.
    
    The patch also modifies the same message on the MARC modification
    templates page so that the interfaces are more unified, and tweaks the
    operation of the "New action" button.
    
    To test you should have no MARC modification templates defined.
    
    - Apply the patch and go to Tools -> Batch record modification.
    - If you're logged in as a user with permission you should see a message
      dialog containing a button, "Create a new MARC modification template."
    - Clicking it should take you to the MARC modification templates page,
      where you'll see a similar message and a button, "Create a new
      template." Clicking this button should trigger a modal form, just like
      clicking the "New template" button in the toolbar should.
    - Submit the form to create a new template. You should see message on
      the following page that says "New action." Clicking the button should
      display the entry form, and then clicking "Cancel" should hide the
      form and redisplay the message.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b46220cbc752c30cec8baab72aa6009f470fcfc8
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Feb 9 22:36:13 2023 +0000

    Bug 31057: Add hint to the 'To date' input on the calendar form
    
    Just adding a hint using the 'hint' class didn't work as
    expected here. The hint was immediately hidden. That is
    because of the collapsable hint text for the option at
    the bottom of the form using the [?] link. So I chose to
    use the class of the [$] to make the script a little more
    selective.
    
    To test:
    * Go to the calendar tool
    * Test that the [$] hide/show different help texts
    * Apply patch
    * Verify a hint now shows below the "To date"
    * Verify that the help texts still function as before
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b3b33960dac85015d4f6e73604a8f7d21ed31e5b
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Feb 22 10:55:41 2023 -0500

    Bug 33040: Add "Date published (text)" to serials tab on record view (detail.pl)
    
    Some libraries would like to see the "Date published (text)" in the serials tab on the "Normal" record view ( aka catalogue/detail.pl ).
    
    Test Plan:
    1) View the serials tab on detail.pl for a subscription where the latest
       serial has a "Date published (text)" field populated.
    2) Apply this patch
    3) Restart all the thigns!
    4) Browse to detail.pl for that record
    5) View the Subscriptions tab
    6) Note the "Date published (text)" column exists now!
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fa534d464c63739f4c836a43966802caa09b0ca8
Author: Philip Orr <philip.orr@lmscloud.de>
Date:   Fri Mar 31 07:12:48 2023 +0000

    Bug 27513: Add notes to variables for report parameters template
    
    This patch adds the TT variable 'notes' to the variables
    that guided_reports.pl passes to the template guided_reports_start.tt
    during SQL parameters entry in the phase 'Run this report'.
    
    To test:
    1. apply the patch
    2. navigate to Reports -> Guided Reports -> Create from SQL
    3. create an SQL report that includes at least one parameter, e.g.:
       SELECT barcode FROM items WHERE homebranch=<<Select library|branches>>
       the actual SQL and name of the report doesn't matter much, just make
       sure that you also put a note e.g. "Test text for display" in the
       field "Notes:" before you save the report.
    4. run the report
    5. the note you entered should now be displayed below the heading
       "Enter parameters for report..."
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 153391e85f731c83bdf2ab137562f09d2f36bd6d
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Sat Apr 1 14:51:02 2023 +0000

    Bug 33391: Prevent applying hover style on navmenulist currently active item
    
    * Apply patch
    * Run yarn css:build
    * Do the 2nd example above again and verify
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f5f9a250e0cf4fa230f3c658e450c2d08656c8a5
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Mar 24 09:03:04 2023 +0000

    Bug 33160: (QA follow-up) Adjust condition on biblio object
    
    If it is undefined, there is no biblionumber.
    If it is, we can safely assume that it has a biblionumber. Which
    is the case for most biblio records, lol.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6a6a4a3ec713590baa047c5c8b595255f2fad8c2
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Mar 7 16:49:35 2023 +0000

    Bug 33160: Use hostinfo to display title information when 773$w is empty
    
    When a 773 entry is not linked to another record using 773$w or
    by using Easyanalytics, the title information would not display.
    
    To test:
    1. Activate the UseControlNumber system preference
    2. Search for a record and make sure it has 001 set to some value.
    3. Use Edit > Add child record to create an analytical record from this record.
    4. Make sure 773$w was filled in and finish by adding any mandatory fields, save.
    5. Add this record to your cart. Also add a 773$g with the pages or similar.
    6. Create another record with 773$t and $g, but without $w.
    7. Also add this record to your cart.
    8. Look at the cart brief and full view in staff and OPAC.
    9. Verify the In: source information only displays for the first record.
    10. Apply patch
    11. Veriy the In: source information now displays for both records on all 4 pages.
    
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0d125917a1a8dfe1fddf68de219e09d3c9ad11c3
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon Oct 17 03:45:48 2022 +0000

    Bug 31841: Use location,wrdl when searching Shelving location
    
    The "location" index only has a word index defined, so we need
    to specify the wrdl qualifier when searching it via the staff
    interface dropdown menu
    
    Test plan:
    1) Change QueryAutoTruncate to "only if * is added"
    2) Change IntranetCatalogSearchPulldown to "Show"
    3) Search for "Shelving location" of "GEN" in catalogue
    search bar
    4) Note no results returned
    
    5) Apply patch
    6) koha-plack --restart kohadev
    
    7) Repeat Step #3
    8) Note that results appear for 'location,wrdl: GEN'
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Works as advertised.
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 74007678bfe3c26b4e7bdeafaab5dbf3fa4fcc40
Author: Mark Hofstetter <mark@hofstetter.at>
Date:   Tue Mar 28 15:46:38 2023 +0200

    Bug 33299: Item type column displays translated_description when placing item level holds in OPAC
    
    0. go to detail page of a record->place hold->"show more options"->"specific item"
    1. Item type column is empty when placing item level holds in OPAC
    (or only the image is displayed)
    2. apply patch
    3. now the translated description is also shown
    4. test with another language
    4. please sign off ;-)
    
    Signed-off-by: Amaury Gau <amaury.gau@bulac.fr>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0b16749efb12e74f305ba913174c7753f0f7b519
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Apr 6 09:37:09 2023 +0000

    Bug 33422: Add cypress test
    
    This patch adds a cypress test to check whether the "active" class is correctly updating when navigating
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7cc6ae331dee2fde47c59cc9b718ab8a10384358
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Apr 5 15:30:58 2023 +0000

    Bug 33422: (bug 32728 follow-up) ERM - Update search header depending on navigation
    
    This patch removes reference to a non-existent id ("ui-id-X") and replaces it with new ids specific to agreements, titles and packages.
    
    Test plan:
    1) Apply patch
    2) Navigate between Agreements, Packages, Titles using the sidebar. The search bar should change each time to match the section
    3) Add some agreemens, packages, titles
    4) Perform a search using the different search bar options. Each time it should take you to the correct page with the search activated in the KohaTable. The navbar should also be highlighted to match the correct section and the top search bar should also show the correct section
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    JD Amended commit message: link with 32728
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 90dc36f57e1407a4580f04fb5ac088b348b22aa6
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Mar 21 12:08:04 2023 +0000

    Bug 33272: Color of the "(remove)" link when an item is in the cart (OPAC)
    
    This patch improves the CSS for styling the OPAC cart's "remove" link in
    search results so that the color is consistent within alternating table
    row colors.
    
    To test, apply the patch and rebuild the OPAC CSS.
    
    - Perform a search in the OPAC which will return multiple results.
    - Click the "Add to cart" link next to multiple results.
    - The "remove" link which appears should be the correct red color
      whether the table row background is white or grey.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f44f89462128e8ca91e5958b159c0b631367022d
Author: Philip Orr <philip.orr@lmscloud.de>
Date:   Thu Mar 30 12:16:40 2023 +0000

    Bug 32263: Fix capitalization for "...and on the Libraries page in the OPAC."
    
    Small fix to correct the capitalization in library editing mode to
    display "...and on the libraries page in the OPAC.".
    
    To Test:
    1. apply patch
    2. navigate to Administration -> Libraries
    3. edit any library
    4. confirm that the note underneath the option for "Public" now
       displays with the correct capitalization ("... on the libraries
       page...")
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5fdc436119803a08f7c52f9aedf054a7c59988cd
Author: Kevin Carnes <kevin.carnes@ub.lu.se>
Date:   Wed Sep 28 10:39:30 2022 +0200

    Bug 31640: Fuzzy translations of preferences can cause missing sections and inaccurate translations
    
    This patch ignores fuzzy translations for preferences and warns if there are multiple sections with the same translated name.
    
    Test Plan:
    1)  Install English United Kingdom translations (./misc/translator/translate install en-GB)
    2)  Go to Koha administration in the staff interface
    3)  Click Global system preferences
    4)  Select I18N/L10N preferences
    5)  Enable English United Kingdom in the language preference for staff interface
    6)  Save all I18N/L10N preferences
    7)  Return to Koha administration
    8)  Select English United Kingdom as the language at the bottom of the screen
    9)  Click on Global system preferences
    10) Select Circulation
    11) Observe that there is only SelfCheckInMainUserBlock or StockRotation, but not both
    12) Apply the patch
    13) Install English United Kingdom translations (./misc/translator/translate install en-GB)
    14) Go to Koha administration
    15) Select English United Kingdom as the language at the bottom of the screen
    16) Click on Global system preferences
    17) Select Circulation
    18) Observe that SelfCheckInMainUserBlock and StockRotation are both present
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e244c13e020fc0ea94fcb1adc76b2ff2eae8d14a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Mar 6 16:51:56 2023 +0000

    Bug 33149: Use template wrapper for breadcrumbs: Circulation part 1
    
    This patch updates several circulation templates so that they use the
    new WRAPPER for displaying breadcrumbs.
    
    The patch also makes a minor change to bookcount.pl to allow for correct
    display of the record title using the biblio-title include.
    
    Navigation context for bookcount.tt has been changed to "catalog" from
    "circulation" because the page is linked to from a catalog-related page.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Circulation home page
      - Checkout notes
      - Article requests
      - Transfer
      - Overdues with fines
      - Check out -> Check out to patron ->
        - Batch check out
    - Catalog -> Search -> Bibliographic record -> Items
      - View item's checkout history. The updated page should show this new
        breadcrumb sequence: Home -> Catalog -> [title] -> Items ->
        Circulation statistics
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 98d86424d4f7be0f2a8a83bd33bbe61f469502b7
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Mar 6 14:50:35 2023 +0000

    Bug 33148: Use template wrapper for breadcrumbs: Cataloging
    
    This patch updates several cataloging templates so that they use the new
    WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Cataloging -> Home page
      - Cataloging search results
        - Select two results and 'Merge selected'
      - Basic MARC editor
      - Advanced MARC editor
      - Item edit page
     - Catalog -> Search -> Bibliographic record details
       - Edit -> Attach item
       - Edit -> Link to host record (must have EasyAnalyticalRecords
         preference enabled)
    
    Signed-off-by: Clemens Tubach <clemens.tubach@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6221538b6d54d85b403296191a9d2fb27d34116c
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Mar 31 12:16:43 2023 -1000

    Bug 33285: (QA follow-up) add POD and fix some code style
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bad0d52245ebf7fe73131e3721a99f7ec9a965ce
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 20 20:08:56 2023 +0000

    Bug 33285: Allow specifying the delimeter for runreport.pl
    
    To test:
    1 - Write a report in koha
    2 - perl misc/cronjobs/runreport.pl --format csv 1 (or correct report number)
    3 - Note you get commas
    4 - Apply patch
    5 - Repeat #2 - no change
    6 - perl misc/cronjobs/runreport.pl --format csv --separator "|" 1
    7 - Now it is pipe delimited
    8 - perl misc/cronjobs/runreport.pl --format tsv --separator "|" 1
    9 - Error is reported, you cannot set separator unless csv
    10 - Try other separators
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 92e3793eb87485a5726cd26bd1c567ca574b2760
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Sat Apr 1 17:38:33 2023 +0000

    Bug 33381: Fix sidemenu active and hover styling
    
    Change router link active class match rule. This makes it so that the route erm/agreements/1 will also match the router-link /erm/agreements instead of the previous exact match rule, thus adding the 'current' class
    Update styling router-links to not apply 'current' styling when
    .disabled
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f74a353097710cf33b3b75b9912b2b00d2aa1a30
Author: Mason James <mtj@kohaaloha.com>
Date:   Sat Apr 1 03:21:54 2023 +1300

    Bug 33168: (follow-up) Swap spaces for tabs
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 7d50f85cc6a54f11c4ea0cbf953a8b2016c5cf78
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Apr 3 13:15:24 2023 +0000

    Bug 29234: Further clean Z3950 Tests
    
    We are deleting all authorised values in Session2.t and assuming they don't exist in Sesson.t
    
    This patch ensures the tests will work regardless of data in DB
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b96e61f1eaec6db55461c17e81fbfbe9f5321aff
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Apr 3 12:33:52 2023 +0000

    Bug 29234: Set datesent for transfers in Z3950 Responder tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit be81f156b884a33d501e9f882cf6c47c3642a0a7
Author: Andreas Roussos <a.roussos@dataly.gr>
Date:   Tue Feb 21 12:25:01 2023 +0100

    Bug 32447: Fix DataTable filtering when hidden columns are in place
    
    The bibliographic record's details page in the Staff interface
    includes a 'Holdings' table at the bottom with information for
    each item attached to the record. When activating the filters
    in this table, there is no input field for the barcode column
    but just bold text.
    
    This broke in v22.11.00, the related commit being 018a981b9b
    from Bug 29282 where two new hidden columns were added to that
    table.
    
    We can fix this by taking advantage of the existing code in
    koha-tmpl/intranet-tmpl/prog/en/includes/columns_settings.inc
    (introduced by commit dfb7af91af6 from Bug 23307) which allows
    us to create and hook our own custom columnsInit() function in
    koha-tmpl/intranet-tmpl/prog/en/modules/catalogue/detail.tt
    to redraw the DataTable filters upon page load if a column is
    marked as 'is_hidden: 1' in admin/columns_settings.yml, or if
    a column is added/removed via the "⚙ Columns" button (both
    are handled by the DataTables column-visibility.dt event).
    
    Redrawing the filters via the above method also fixes the
    issue described in Bug 32448.
    
    Test plan:
    
    1) Confirm the erratic DataTable behaviour outlined above
    2) Apply this patch and reload all JS assets (hit CTRL-F5)
    3) Confirm that you now see the correct input text field
       for the 'Barcode' column
    4) Confirm that you can search for barcodes or in any other
       column successfully
    5) Try toggling the visibility of the columns and making as
       many search variations as possible -- it should all now
       work without any glitches!
    
    For extra credit ;-) you can also test the 'Other holdings'
    table by setting the SeparateHoldings SysPref to 'Separate'.
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6cbbfa27cbfdab6bd23b45e7ebeef15d849c4240
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Feb 11 00:48:02 2023 +0000

    Bug 32447: Clean up table configuraton settings for holdings table
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6cd0a7e2828746cc0451c80ca7219a047cd62f53
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Feb 26 11:59:56 2023 +0000

    Bug 25590: Street number is missing from the alternate address in the OPAC
    
    This patch adds the street number field to the alternate address
    section in the OPAC, matching the layout of the address in the
    staff interface.
    
    To test:
    
    1) Check that you are unable to add a street number to the Alternate
    address when logged into the OPAC
    2) Apply the patch
    3) Check that you can now add and edit the streetnumber field.
    4) Check that it also works correctly in patron self-registration.
    5) Make the field mandatory and verify this works as expected
       (PatronSelfRegistrationBorrowerMandatoryField and PatronSelfModificationBorrowerMandatoryField)
    6) Hide the field from the form
       (PatronSelfRegistrationBorrowerUnwantedField and PatronSelfModificationBorrowerUnwantedField)
    7) Change the AddressFormat system preference to German
    8) Verify that the street number field moved after the first address line matching
       the first address in the form.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 600c6d2282363ffcc62c6002e39cdb5a45414e75
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Feb 26 11:20:34 2023 +0000

    Bug 32976: Add permission check on Add/Edit controls for patron images
    
    This adds a check on the batch_upload_patron_images permission
    to the Add/Edit control for patron images in the patron account
    in the staff interface.
    
    To test:
    * Enable patronimages system preference
    * With your 'superlibrarian' account:
    * Add and edit/remove a patron image to an account
    * Create a staff user with batch_upload_patron_images permission
    * Log in with this user and verify everything works the same
      as before
    * Remove the batch_upload_patron_images permission
    * Verify the Add/Edit controls are on longer visible to this
      patron
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Christopher Brannon <cbrannon@cdalibrary.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2d0eca8a0df0e34535d12e40c4247ec99a493619
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Nov 18 17:36:47 2022 -1000

    Bug 32279: Add GetAuthorizedHeading method export C4::AuthoritiesMarc
    
    C4::AuthoritiesMarc method GetAuthorizedHeading is not exported thus it is called in other modules :
     > git grep GetAuthorizedHeading
    C4/AuthoritiesMarc.pm:=head2 GetAuthorizedHeading
    C4/AuthoritiesMarc.pm:  $heading = &GetAuthorizedHeading({ record => $record, authid => $authid })
    C4/AuthoritiesMarc.pm:sub GetAuthorizedHeading {
    C4/Breeding.pm:                            $heading = C4::AuthoritiesMarc::GetAuthorizedHeading({ record => $marcrecord });
    C4/ImportBatch.pm:            $row->{'authorized_heading'} = C4::AuthoritiesMarc::GetAuthorizedHeading( { authid => $row->{'candidate_match_id'} } );
    C4/ImportBatch.pm:    my $authorized_heading = C4::AuthoritiesMarc::GetAuthorizedHeading({ record => $marc_record });
    
    This patch adds it to be exported.
    For example for use in Koha plugins.
    
    Test plan :
    Check import of authorities from a file is OK
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f19a3bf91a310b45141620df8b95116bd1fb5272
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 29 14:32:21 2023 +0000

    Bug 33322: (QA follow-up) Add comment to clarify selector context
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2f1dffe1d5bbbb3deb6c92d881e2a8025ee8b672
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Mar 23 17:15:48 2023 +0000

    Bug 33322: Refine click handler for suggestion batch operations
    
    The handler for suggestion batch operations looks for clicks on
    "button[type='submit']" which is not very specific. With the new staff
    interface this ends up including the header search form.
    
    This patch modifies the markup of the batch operations section of
    the template and makes the click handler more specific so that only the
    right buttons are affected.
    
    To test, apply the patch and go to Suggestions.
    
    - In the header search form, perform a catalog search. You should be
      able to click the submit button to successfully initiate the search.
    - Without checking a checkbox associated with any open suggestion, test
      the batch operation buttons at the bottom:
      - Change status
      - Change item type
      - Update manager
      - Delete
      - Archive
      All should trigger a JS alert, "Please select at least one suggestion"
    - Test each batch operation with one or more suggestions selected and
      confirm that the operation completes successfully.
    
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 97a100d19ded4c1297b44c65587b419ca8710cfc
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Nov 18 17:54:32 2022 -1000

    Bug 32280: Export method ImportBreedingAuth from C4::Breeding
    
    In C4::Breeding method ImportBreedingAuth() should be exported to be used for example by plugins.
    
    No test plan needed i bet.
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Looks like a harmless and useful enhancement.
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6ab19f01b8a6ee800b75781f761949c6c44ce634
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Mar 31 18:30:14 2023 +0200

    Bug 29234: (QA follow-up) Fix test that expects wrong defaults
    
    This patch changes the get_items_that_can_fill tests so they explicitly
    set a 'datearrived' as the new defaults for fresh transfer objects from
    TestBuilder is more sane and has this field undef. Tests *should always*
    create their required scenarios explicitly.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a18f65cdcc51571bc9eae1e903a6b7b676e6a89e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jan 23 12:51:48 2023 +0000

    Bug 31259: Escape infinite loop when lime cannot wrap enough
    
    It seems the wrapping here works with words, not characters. If a line is too long,
    or too far over, we can't trim it enough. We need to escape if successive loops are
    not changing the line
    
    To test:
     1 - Using sample data, edit the layout to match picture in comment 9
     2 - Add some borrowers to a batch
     3 - Attempt to export batch and save PDF
     4 - Staff client waits
     5 - ps aux | grep card
     6 - Note the job keeps running
     7 - Kill it
     8 - Apply patch
     9 - Restart_all
    10 - Export batch again
    11 - Success, you get a badly formatted PDF, rather than nothing
    12 - Note the PDF does not show "Yakama Nation Library"
    13 - Edit layout, male "Lower left X" 20 instead of 220
    14 - Export again and note text field 1 shows correctly
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3db7173dde0c8221c3628a0624c45f08d3f256fe
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 31 10:44:45 2023 +0000

    Bug 32648: Avoid skipping record or hiding item
    
    It seems that depending on other tests, the item could be hidden from the record, or
    the entire record hidden because of the way we count hidden items.
    
    I add a mock for the two HIddenItems prefs and hardcode an xml record
    to avoid problematic data from test builder
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 320a4b4d74f5b4d76adb58e45865e54000a3bb4b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Mar 31 12:59:46 2023 +0200

    Bug 32437: (QA follow-up) Add missing methods in schema file
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 488e67656ffa3016a32f39eb68c5a3aa7fb8a68e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Mar 28 12:35:05 2023 +0100

    Bug 18398: (follow-up) Update POD & Unit tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f7cfe3a705b4c594e1e9b70c1e7e1ffa0b39a073
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 10 10:02:19 2023 +0000

    Bug 18398: Update C4::Message enqueue to use $patron->notice_email_address
    
    This patch updates the enque method in C4::Message to expect a
    Koha::Patron object in the parameters and then uses that patron object
    to select the correct email address for notices as defined by
    AutoEmailPrimaryAddress.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 92fbb49af7e37f2274bc4f26edb95d57d3819d41
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Mar 31 12:51:12 2023 +0200

    Bug 32437: DBRev 22.12.00.016
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 82c552e8765c4c617bcfa9792d74d8b3a4b94b67
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Mar 31 12:49:42 2023 +0200

    Bug 32437: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 88cf3c76e93a96662687634b30f605b8d2ac6165
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Mar 16 15:14:13 2023 +0000

    Bug 32437: (QA follow-up) Prevent upgrade if wrong PRIMARY KEY key present
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 23b34d1be9351a99e51aa61f2e01a367843d7206
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Mar 3 07:27:04 2023 +0000

    Bug 32437: (QA follow-up) Change to replace POD
    
    Making it more visible that this also applies to authority
    records.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3bc8259e4ffab99507f2c9d3781b6294f5af50f5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Dec 12 18:41:28 2022 +0000

    Bug 32437: Honor overlay setting in staged batch when adding to a basket
    
    This patch uses the replace method added in last patch to ensure
    records are overlayed when added to a basket
    
    To test:
     1 - Stage the sample file on this report using the options below
         (If not using sample database simply save a record as marc from the details page, then change the title in the interface and import the saved version)
     2 - Make sure to match using KohaBiblio (999c)
     3 - Set option "Replace existing record" if match found
     4 - Once record is staged go to Acquisitions
     5 - Find a vendor and select/create an open basket
     6 - Add to basket from the staged file
     7 - Add order info and save
     8 - Check the record, title is unchanged -  Sample file should add 'New and improved!'
     9 - Check the staged records batch - note the diff shows that new record should have overwritten
    10 - Apply patch
    11 - Stage file, match on KohaBiblio, set action if matching record found to 'Ignore incoming record'
    12 - Add to basket from the staged file and save
    13 - Confirm record not overlayed when not reuqested
    14 - Stage file, match on KohaBiblio, set action if mathc record found to  'Replace existing...'
    15 - Add to basket from staged file and save
    16 - Confirm the record is updated to 'New and improved!'
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ecc92f92ca1569f20abbc4aa0cea3944d1cb4973
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Dec 12 18:13:25 2022 +0000

    Bug 32437: Add replace method to Koha::Import::Record objects
    
    This patch adds a replace routine to Koha::Import::Record - largely
    copying and updating code from C4::ImportBatch
    
    To test:
    prove t/db_dependent/Koha/Import/Records.t
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f41f272ff087d65ed11d760e6c7c58818c3a24d4
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Dec 12 13:59:56 2022 +0000

    Bug 32437: Add Objects for ImportAuths
    
    This patch:
    1 - Adds an atomic update to add a primary key to import_auths table
    2 - Adds objects for Koha::Import::Records::Auths
    3 - Adds tests for import auth and biblio objects
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b68a6b32974cb1891fa61c7b52680880e5695a27
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Dec 9 16:18:40 2022 +0000

    Bug 32437: Cleanup script
    
    This patch:
    - fixes some indentation
    - flips unless-else to if-else for readability
    - expands some comments for clarity
    - removes unused biblioitemnum variable
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 45cea7c7ba548ffc24976c1b574de295792d0793
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Nov 21 19:12:46 2022 +0000

    Bug 13976: Sort popularity numerically in Zebra
    
    To test:
    1 - Create a new template at Tools->Marc modification template
    2 - Add action: Copy 999$c to 942$0
    3 - Create a report:
        SELECT biblionuber FROM biblios
    4 - Run report, show all, do a batch modification to all records using template above
    5 - Search for 'a' (make sure you are using Zebra)
    6 - Sort by popularity
    7 - Note records are sorted wrong
    8 - Apply patch
    9 - Restart all
    10 - Reload search results
    11 - Success! Sorted correctly
    
    Signed-off-by: Anke <anke.bruns@gwdg.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 561dac93358d74f188f18937daefe7813405b644
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Feb 15 15:48:34 2023 +0000

    Bug 32373: Show patron restriction date
    
    This is a rebased submission following bug 31095 which removed the use of GetDebarments. This patch now uses $patron->restrictions to find the date and pass it to the template
    
    Test plan:
    1) Create a restriction on a patron and navigate to that patron in Checkouts or the patron details page
    2) There should be a message with details about the restriction but the creation date of the restriction won't be included in the message
    3) Apply patch
    4) The message should now say "Restricted since DATE" as in the screenshot attached.
    5) Change the 'dateformat' syspref and refresh, the date should change to reflect the syspref
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 508ad15cb789b4b190f8172fcf58265b8a957a66
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Feb 1 11:59:53 2023 +0000

    Bug 32954: Standardize action fieldsets in rotating collections, suggestions, tools
    
    As per Bug 32744: Fieldsets with the class "action" should be placed
    outside of the fieldset containing the main body of the form. This
    report covers a few templates in rotating collections, suggestions, and
    tools.
    
    To test, apply the patch and check the following pages to confirm that
    changes to form structure look correct:
    
    - Tools -> Rotating collections. Create a collection if necessary, then
      click "Action" -> "Manage items." Check the form on the manage items
      page.
    - Suggestions -> Sidebar filter. Check that different sets of filters
      expand and collapse correctly.
    - Tools -> Batch item modification (initial form)
    - Tools -> Inventory (initial form)
    - Cataloging -> Stage records for import (initial form)
    - Tools -> Upload (upload and search forms)
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ab76971ec44ead2baae42075b79436c7810ca672
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jan 30 16:06:01 2023 +0000

    Bug 32771: Standardize structure around action fieldsets in serials
    
    This patch updates serials templates so that fieldsets with the
    "action" class are placed outside the form's main fieldset.
    
    To test, apply the patch and rebuild the staff interface CSS. Go to
    serials and check the following pages to confirm that changes to
    form structure look correct:
    
    - Navigate directly to /cgi-bin/koha/serials/serials-search.pl
      - Check the form on this page.
      - Perform a subscription search. On the search results page, check
        the sidebar form.
    - Click "Manage numbering patterns" in the left-hand sidebar menu.
      - Click "New numbering pattern" and check the forms on that page.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6d743dd63efec548f5a6a97ef9b1a65b037452eb
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Feb 5 00:06:40 2023 +0000

    Bug 31409: Set focus for cursor to Fund code when adding a new fund
    
    This makes sure that the focus is on the first input field
    of the form when adding or editing a fund.
    
    To test:
    * Go to administration > funds
    * Add a new fund to the budget
    * Verify the focus is not inside the form
    * Apply patch
    * Verify the focus is now in the first form field "Fund code"
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aaa5bcd16bc5c4e50986961ad79d29801e67c889
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Feb 2 17:55:10 2023 +0000

    Bug 28641: ILLHiddenRequestStatuses does not consider custom statuses
    
    This patch adds the status_alias column to the ILLHiddenRequestStatuses sys pref check.
    Because requests will have status_alias NULL by default, we also check for that.
    
    Test plan:
    Create multiple ILL requests of different backends and place them in different status (NEW, COMP, REQ, etc)
    Create multiple ILLSTATUS entries
    Add and remove a mix of both status and status_alias codes in ILLHiddenRequestStatuses and refresh the ILL requests page to confirm the result is according to expectation.
    
    Sponsored-by: PTFS Europe
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b0a570796cac5aadee22bcaeb1ab321c9bfc38da
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jul 19 11:56:56 2022 +0100

    Bug 33146: Add public items lookup route
    
    This patch adds a /public equivilent to the item listing endpoint.
    
    This allows us to search for an item by it's external_id (barcode).
    
    Test plan
    1. Apply patch
    2. Perform a GET on /api/v1/public/items?external_id=some_barcode
    3. Confirm that the above endpoint correctly returns items that should
       be visible in the OPAC
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Bug 33146: (QA follow-up) Do not delete all items in test
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Bug 33146: Allow embedding expanded coded values
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Bug 33146: (QA follow-up) Consistency with /biblios/:biblio_id/items
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Bug 33146: (QA follow-up) Make sure public API enabled for tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bb5d95749bd597953fad17ba4cc3f5262d538ff2
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Mar 6 14:23:54 2023 +0000

    Bug 33146: Unit tests
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4642bdc7f8d5970c59d11b6ef8f7fc4517232258
Author: Pasi Kallinen <pasi.kallinen@koha-suomi.fi>
Date:   Tue Mar 28 09:23:50 2023 +0300

    Bug 33349: Patron Attributes don't have identifying information in intranet
    
    Patron Attributes have no identifying info in the template page, no stable ID to
    style or effect with javascript, so when new patron attributes are added or
    removed, their order may change, requiring extra work to make sure CSS and
    javascript don't change the wrong patron attributes.
    
    Test plan:
    
    0) in intranet:
    1) create patron attribute types with different codes:
       "TESTPA", "test2 PA", and "At%tr:X"
    2) add those patron attributes to a patron, with some values
    3) in a browser, go to a patron information page, and inspect
       the page source where the patron attributes are
    4) note how the PA entries have no identifying information usable
       to css or javascript
    5) apply patch
    6) inspect the page source, note how the patron attributes have
       data-pa_code -value with the following values:
       "TESTPA", "test2PA", and "AttrX"
       (The attribute codes are sanitized to remove possibly problematic
       characters; those shouldn't be used in PA codes anyway)
    7) Go to the page where you edit the patron's Additional attributes
       and identifiers, and repeat 6 for that page.
    
    Signed-off-by: Pasi Kallinen <pasi.kallinen@koha-suomi.fi>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2799cac081c08a260f67e643cbc8e0d640d25d4c
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Feb 7 14:48:02 2023 +0000

    Bug 21548: ILLLIBS patron category / partner_code seems extraneous
    
    This patch updates the default partner category used by the partner_code config to be in line with sample data in sample_patrons.yml
    
    Preparation:
    Apply patch
    Enable ILLModule sys pref
    Install an ILL backend (e.g. FreeForm)
    Add this change to your koha-conf.xml
    Flush, restart.
    Search for patron of category inter-library loan and assign a primary e-mail address to it
    
    Test plan:
    Create an ILL request and click 'place request with partners'
    Verify that the 'select partner libraries' has the correct patron of IL category
    
    Run tests and ensure they pass:
    prove t/db_dependent/Illrequest/Config.t
    prove t/Koha/Config.t
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b6f9241d66b8a857dba51d747cb8fb67d2115433
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue Mar 21 23:09:20 2023 +0000

    Bug 33168: Prevent debhelper from renaming history.txt to changelog
    
    This change prevents debhelper from renaming history.txt to changelog,
    since that renaming was breaking the Timeline feature in Koha.
    
    Another option would've been to rename history.txt to something else
    but that filename is already embedded in Koha and the Koha release
    tools, so this seems the safer option.
    
    Test plan:
    0. Apply patch
    1. Build Debian package
    2. Confirm that /usr/share/doc/koha-common/history.txt is created
    and /usr/share/doc/koha-common/changelog.gz is not created
    
    Signed-off-by: Mason James <mtj@kohaaloha.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5c65913eac6b7e1b387efb9642a04d7ae737c495
Author: Magnus Enger <magnus@libriotech.no>
Date:   Thu Feb 23 08:46:13 2023 +0000

    Bug 29449: Show userid on "Personal details" tab
    
    To reproduce:
    - Login to the OPAC
    - Go to the "Personal details" tab
    - Verify the Username/userid of the logged in user is not
      shown anywhere
    
    To test:
    - Apply this patch
    - Reload the "Personal details" tab
    - Verify that "Username:" and the userid is now shown below the
      "Library card number"
    - Try adding "userid" to PatronSelfModificationBorrowerUnwantedField
      and verify the field is hidden as expected
    - Log out
    - Go to "Don't have an account? Register here."
    - Verify "Username:" is *not* shown
    - Sign off
    
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 84a2d06b48de2b0a3a0e6a1a6f9ee77c5531adba
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Mar 28 09:47:36 2023 +0000

    Bug 33346: Add missing class and id to link
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9d4c4b1cd717d314ddb6727d6354c431c8e91d15
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 28 10:11:01 2023 +0200

    Bug 33346: Add Help link to Koha manual in ERM module
    
    The 'Help' is missing in the ERM module, this patch is adding it.
    
    Test plan:
    Confirm that the Help link is displayed on the different pages of the
    ERM module and that it leads to the correct page of the manual.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c15f1d65b7a41105f6509ae000ac12b6d5dbc2be
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Mar 22 15:50:45 2023 +0000

    Bug 32794: (follow-up) Replace code by new function (template)
    
    Test plan:
    Same as first patch.
    Bonus:
    Remove protocol from $u. Set first ind1 to 7.
    Put mailto in $2. Check link.
    Change $2 to tel. Check link.
    Change $2 to https. Check link.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit db2a8a416a36d2eee3ecf6040f81037e06ab28cb
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Mar 22 15:17:06 2023 +0000

    Bug 32794: (follow-up) Consolidate shared code into one function (:template)
    
    Few extra lines for the $2 exception as noted on Bugzilla.
    
    Note: We should probably check why the utils xslt on opac and intranet
    have so much differences currently.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 353a0a85a3b1669d35df5d7cb4e320c8d378d91b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Feb 2 13:29:04 2023 +0000

    Bug 32794: Expand tests for access method in XLST files
    
    This patch expands the checks for 856u to check for mailto, and adds a few conditiona
    checks of the first indicator to cover more methods
    
    Reference: https://www.oclc.org/bibformats/en/8xx/856.html
    
    To test:
    1 - Edit a record and add a few 856 fields:
        856 0 0 $umailto:test@example.org
        856 0 0 $utest@example.org
        856 2 0 $utelnet://pucc.princeton.edu
        856 2 0 $upucc.princeton.edu
        856 3 0 $u8885555555
    2 - View staff details and results and opac details and results
    3 - Note all links have been prepended with http://
    4 - Apply patch
    5 - Refresh all views, ensure links are correctly formed
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 557a0285cad2e7827b990a0aeaa5ce78ffa65a37
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 18 15:11:34 2023 +0000

    Bug 26433: Add Control number to SRU field configuration
    
    This simply adds a row to the config page for configuring a mapping for Control
    number, without this patch you cannot configure the feild, and the default is 'any'
    
    I used the first record here for testing:
    http://lx2.loc.gov:210/NAF?operation=searchRetrieve&version=1.1&query=query=bath.personalName=%22butler%20octavia%22&maximumRecords=20&recordSchema=marcxml
    
    Enter SRU server using settings here:
    https://www.loc.gov/z3950/lcserver.html#serv
           host: lx2.loc.gov
           port: 210
             db: NAF
         userid:
       password:
     servername: LOC SRU
        checked: NULL
           rank: NULL
         syntax: USMARC
        timeout: 0
     servertype: sru
       encoding: utf8
     recordtype: authority
    
    To test:
    1 - Setup SRU server using settings above
    2 - In the server config click 'Modify' under 'SRU search fields mapping'
    3 - Note you don't have an option for 'Control number'
    4 - Go to Authorities
    5 - New from Z39.50/SRU
    6 - Search 'Control number' field with: PS3552.U827
    7 - You get the record noted above as all fields are searched
    8 - Search 'Control number' field with: 79056654
    9 - You get the record noted above as all fields are searched
    10 - Apply patch
    11 - In the server config click 'Modify' under 'SRU search fields mapping'
    12 - Note you now have a config for 'Control number'
    13 - Enter 'bath.lccn'
    14 - Save
    15 - Repeat search from #6 - no result
    16 - Repeat search from #8 - correct result as only lccn fields are search
    17 - Modify server config ans set 'Control number' to 'bath.lcCallNumber'
    18 - Repeat search from #6 - correct results as call number field is now search
    19 - Repeast search from #8 - no result
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b0767f5eb60f087cfd9fbaabb4454fc786e18438
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 8 18:03:05 2023 +0000

    Bug 33159: Simplify ES handling and fix zebra handling
    
    Before this patch we used two indexes for the thesaurus values, we can
    simply index both needed fields into a single index and just form the
    search correctly.
    
    This patch also ensures we pass the 'thesaurus' vlaue for the heading
    directly to the query builder - for zebra it goes through, and for ES
    we convert it to the expected code.
    
    This patch also moves the necessary mappings out of the user definable
    mappings and hardcodes them. There is precedent for this with
    'match-heading', it ensures matching works as expected
    
    To test:
    1 - Follow previous test plan in Zebra and ES
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Frank Hansen <frank.hansen@ub.lu.se>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 297a07f5f876f819336cbed2f15cf53c573b2444
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 7 19:23:44 2023 +0000

    Bug 33159: Correctly form thesaurus term for non-subject headings
    
    Bug 30280 fixed things for subject heading, but didn't take into account
    that all non-subject headings are considered LCSH - this means we can't
    really handle different thesauri for controlled headings outside of
    subjects - maybe a topic for a new bug, but we should fix matching for
    them now
    
    To test:
     1 - Set sysprefs:
        RequireChoosingExistingAuthority - don't require
        AutoCreateAuthorities - generate
        CatalogModuleRelink - Do
        AutoLinkBiblio - Do
        LinkerModule - first match
     2 - Find a record with an author attached to an authority, I used
      biblionumber 3 "Introduction to Attic Greek"
     3 - Edit in advanced editor
     4 - Delete the $9 link
     5 - Save the record
     6 - It generates a new number
     7 - Repeat 4-5, it does it again
     8 - Apply patch and restart all
     9 - Repeat 4-5
    10 - It links to the original authority
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Frank Hansen <frank.hansen@ub.lu.se>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ee60af86c62b9ed8583af130a9d48752cc18a74c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 7 19:23:22 2023 +0000

    Bug 33159: Unit tests
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Frank Hansen <frank.hansen@ub.lu.se>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit be8a3ee8304d305a3f684a435a366d5b9ea69b27
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Oct 14 12:05:08 2021 +0100

    Bug 29234: Transit on checking
    
    Signed-off-by: Lisette Scheer <lisetteslatah@gmail.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 80f5b3351123225b93ab9b85a30b0428790234bf
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 27 10:58:43 2023 +0000

    Bug 29234: Unit test
    
    This patch adds a test that a pending stock rotation transfer is initiated on
    checkin, as well as updating the defaults for creating transfer objects
    
    To test:
    prove -v t/db_dependent/Circulation.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 075ef09f48b66df7766c22e1c9ecf1d3cf7a039a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Mar 23 20:16:37 2023 -0300

    Bug 32336: (QA follow-up) Use $metadata->schema
    
    When we worked on Koha::Biblio::Metadata, we agreed
    biblio_metadata.schema would be the sourceof truth when it comes to the
    record schema.
    
    This patch acknowledges that, while retaining the fallback to the
    syspref.
    
    To test:
    1. Apply this patch
    2. Run:
       $ prove t/db_dependent/api/v1/biblios.t
    => SUCCESS: Tests pass, behavior is unchanged.
    3. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1a02ba56f177fe6d05ad9ae1518d583c6a3ea8ac
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Nov 23 15:43:06 2022 +0100

    Bug 32336: Fix encoding of MARCXML output for REST API (UNIMARC)
    
    Test plan:
    1. Be sure to test on a UNIMARC instance
    2. Enable system preferences RESTPublicAPI and RESTPublicAnonymousRequests
    3. Create a biblio with some diacritics
    4. Restart koha and do not interact with OPAC or the staff interface
       (this may change $MARC::File::XML::RecordFormat)
    5. Query the public API to retrieve the created biblio in MARCXML. For
       instance with cURL:
    
       curl -H 'Accept: application/marcxml+xml' \
        http://koha.local/api/v1/public/biblios/<biblionumber>
    
       You should see encoding issues.
    6. Apply the patch and restart Koha.
    7. Repeat step 5.
       You should see no encoding issues.
    8. You should also test /api/v1/biblios/<biblionumber> (this one
       requires authentication, so cURL might not be the most practical
       tool; use your favorite tool for this)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8bfb09b68b33a09d4da28b9dcc7b61d98a49801d
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Jan 20 15:33:39 2023 +0100

    Bug 32336: Add unit test for UNIMARC encoding problems in REST API
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4e6bc5385cc262d4a9148e2e5cd2ef2a04032348
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 31 10:33:02 2023 +0200

    Bug 32710: Try to prevent UI/Form/Builder/Item.t to fail randomly
    
    See the FIXME, and commit 77a34e099a9f3bcef2076a4170e8c8d843c403eb
    Actually we are doing the trick (of removing _) before we are creating
    another itemtype, we need to do it right before we are comparing.
    
    Test plan:
    Run in a loop, be patient, it failed for me (without the patch) at run
    245
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 532d4d0ac646970f3740f9f4867aded2d70ccef3
Author: Clemens Tubach <clemens.tubach@kit.edu>
Date:   Thu Mar 30 12:24:22 2023 +0000

    Bug 33136: Added class "page-section" to the result page table of serial record search
    
    Added class "page-section" to the result page table of serial record search to fit into the new staff design.
    
    To test:
    - Go to serials
    - Create a new subscription
    - Click o nzthe "Search for Record" link
    - Search for something (example: e)
    - Verify the result table
    - Apply the patch
    - Repeat the steps
    - The result table should have the correct background
    
    Signed-off-by: Jan Kissig <bibliothek@th-wildau.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit be54d835cb3c2801193d574c0b38ca4d3e7503b4
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:54 2023 +0100

    Bug 32864: Fix cataloguing/value_builder/unimarc_field_141.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c66589555a270b1be5c51dfa9faae77b0a26c60e
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:54 2023 +0100

    Bug 32863: Fix cataloguing/value_builder/unimarc_field_140.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d2677a4ac5c32a10be9fc955f406b22949fecec
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:54 2023 +0100

    Bug 32862: Fix cataloguing/value_builder/unimarc_field_135a.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a81e94844fd70df50ea96058793c7f383ef9c4d1
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:54 2023 +0100

    Bug 32861: Fix cataloguing/value_builder/unimarc_field_130.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 848ff6cf9511467413c440bfb4cd9c8e21654090
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:54 2023 +0100

    Bug 32860: Fix cataloguing/value_builder/unimarc_field_128c.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b37a45717e5173d78ee6a8e8050b50a4605ebbbe
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:54 2023 +0100

    Bug 32859: Fix cataloguing/value_builder/unimarc_field_128b.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 28c9f9e1aa526229159480944035b24665016e9a
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:54 2023 +0100

    Bug 32858: Fix cataloguing/value_builder/unimarc_field_128a.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2b5784c5cbb9a0a1db7ce14d120b6ff5efe19324
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:54 2023 +0100

    Bug 32857: Fix cataloguing/value_builder/unimarc_field_127.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 487b67c3efdacb206a58ab6a8573707a1068e918
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Mar 28 12:57:10 2023 +0000

    Bug 32964: (follow-up) Additional rewording for XSLT item display
    
    Test plan:
    Check OPAC preferences, OPACResultsMaxItems and siblings.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8f85d85d9c768dab783c9fd15a3566bf0d3216c3
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:54 2023 +0100

    Bug 32855: Fix cataloguing/value_builder/unimarc_field_126b.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 898dceff486bce544ee5a0a4f9f902207410ec59
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:54 2023 +0100

    Bug 32854: Fix cataloguing/value_builder/unimarc_field_126a.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 55c89d871558b430399c6911894448b2d2264b6d
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Feb 14 09:36:45 2023 +0000

    Bug 30162: Fix staff interface link in OPAC XSLT files for 830$w
    
    All the links in the Utils files shoudl be built using the $searchurl
    variable to adapt the link to either staff or OPAC.
    
    To test:
    * Enable UseControlNumber system preference
    * Create a record with the following fields:
    
    490 1 _ ‡aEffective software development series
    830 _ 0 ‡aEffective software development series.‡w13736978
    
      $w can be anything for this use case or another $w from your catalog.
      Easiest might be to enable the Advanced cataloguing editor to be
      able to insert these lines easily. If you are using the sample data,
      the example shoudl work as is.
    
    * Save the record and open it in the staff interface and the OPAC
    * The link in the OPAC should be broken, staff should work
    * Apply patch
    * Now both links should work
    
    Co-authored-by: Anke Bruns <Anke.Bruns@gwdg.de>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bd3e65b5badcc593b41acabdb4c84533056134b3
Author: Philip Orr <philip.orr@lmscloud.de>
Date:   Thu Mar 30 08:28:54 2023 +0000

    Bug 32217: Fixed typo in error message for authentication providers
    
    Changed the error message for authentication providers to use
    "in" instead of "with".
    
    To Test:
    Review the patch file closely and verify changes.
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ad7d3e5099bf97ede706d496e33d817a618d74e3
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:53 2023 +0100

    Bug 32852: Fix cataloguing/value_builder/unimarc_field_125b.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b1fa6e27b02c3468901e739c2363751a43cbc137
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:53 2023 +0100

    Bug 32851: Fix cataloguing/value_builder/unimarc_field_125a.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d79ec626fc10ba03b26759c759d1a0aa23d970d1
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:53 2023 +0100

    Bug 32850: Fix cataloguing/value_builder/unimarc_field_124.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit de5bda34459a3c52655f6792e72476d6f3c94a0d
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:53 2023 +0100

    Bug 32849: Fix cataloguing/value_builder/unimarc_field_124g.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2e05a69b256c29089ae5e454f520d0dfafd6eaa7
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:53 2023 +0100

    Bug 32848: Fix cataloguing/value_builder/unimarc_field_124f.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c2de3c97c022ecfa1ce93ec7dff99994fc97361e
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:53 2023 +0100

    Bug 32847: Fix cataloguing/value_builder/unimarc_field_124e.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1807cbc0e27e38356ba760b338125e020fb338cf
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:53 2023 +0100

    Bug 32846: Fix cataloguing/value_builder/unimarc_field_124d.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 830ea1a099005bd7ca4ae795a319469a804a8bb6
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:53 2023 +0100

    Bug 32845: Fix cataloguing/value_builder/unimarc_field_124c.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6b0ff0c745a1cf91b0d402f09f65dfbbdc3d3740
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:53 2023 +0100

    Bug 32844: Fix cataloguing/value_builder/unimarc_field_124b.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 17e20f4ec4a1674a2faac9df9ad5231ffd9ddaf1
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:53 2023 +0100

    Bug 32843: Fix cataloguing/value_builder/unimarc_field_124a.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b6964253fb4b166d0a7ad703a42953ff6444f543
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:53 2023 +0100

    Bug 32842: Fix cataloguing/value_builder/unimarc_field_123j.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0bc83b3673659f347979ad998dfc9d9400d4c024
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:53 2023 +0100

    Bug 32841: Fix cataloguing/value_builder/unimarc_field_123i.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1f152facf7cc44a97cd2670c8ef4ca17a78528fd
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:53 2023 +0100

    Bug 32840: Fix cataloguing/value_builder/unimarc_field_123g.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3fc800d91a34e36de84611ef3f092eb51f552966
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:52 2023 +0100

    Bug 32839: Fix cataloguing/value_builder/unimarc_field_123f.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ff97b1fe439fe3b0a4e521d4c65165137e366f4c
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:52 2023 +0100

    Bug 32838: Fix cataloguing/value_builder/unimarc_field_123e.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e4ff5f2704843b23853d33f2e99ffd56a5dcec00
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:52 2023 +0100

    Bug 32837: Fix cataloguing/value_builder/unimarc_field_123d.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d183715d758735fab4079a25a2fe1d73901a3ae9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 29 09:38:50 2023 +0200

    Bug 32807: Fix cypress tests
    
    Cypress tests were failing, not sure I understand why exactly as I don't
    recreate the failure when using the interface. We could simplify the if
    logic anyway.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 577a237a3f15a5a3c2e27761a900994e439affcf
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:52 2023 +0100

    Bug 32834: Fix cataloguing/value_builder/unimarc_field_121b.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9a8b5003dc7dd2208fcd7ef0e2ae01f4232db17d
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:52 2023 +0100

    Bug 32836: Fix cataloguing/value_builder/unimarc_field_123a.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e96f32b29c64c635cfdc4c23192b279fa6e5c9d3
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Mar 28 06:41:59 2023 +0000

    Bug 32426: (follow-up) Fix api/v1/patrons.t
    
    We use another exception now.
    
    Test plan:
    Run t/db_dependent/api/v1/patrons.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0d3e26d32c7e6db9cb95dbf8d4505ec5356a6a7d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Mar 27 14:35:28 2023 +0000

    Bug 32426: (follow-up) Fix for Members.t / Patrons.t
    
    Moving and adjusting test in Member.t.
    
    Test plan:
    Run both tests.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 10d12f999f9b8bff228c9c20f1ca4f0c7144201f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 27 14:17:31 2023 +0200

    Bug 33341: Address some perlcritic errors in 5.36
    
    Some old-style code is making our tests fail when run in Debian Testing.
    
    This patch addresses this.
    
    To test:
    1. Launch bookworm KTD:
       $ KOHA_IMAGE=master-bookworm ktd up -d
    2. Run:
       $ ktd --shell
      k$ prove t/00-testcritic.t
    => FAIL: It fails!
    3. Apply the patch
    4. Repeat 2
    => SUCCESS: Tests now pass!
    5. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d8721bbc3687b13cd95abdcb73b3b7f9576e8190
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 17 14:22:24 2023 +0000

    Bug 32594: Mark jobs as started and finished
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cb2fd4c00a17ed9817372730005f8694e3b6a05a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 27 12:49:34 2023 +0200

    Bug 33021: (QA follow-up) Fix QA errors
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 909dedd3f648dfc1a2d4c09be5daeb46d8b26c83
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 14 13:36:14 2023 +0000

    Bug 33133: Move fast cataloging to first column
    
    This move the link and adds its own heading
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 85cfdb1f5bdee7c235516a161770a44e27ff8f62
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 3 20:23:31 2023 +0000

    Bug 33133: Add fast cataloging to 'Cataloging' page
    
    This patch adds a check for the existence of the Fast Add framework to
    the Koha mainpage and the cataloging home page
    
    If it exists, and the user has fast cataloging permission then there
    will be a link to Cataloging on the home page, and to Fast add on the
    cataloging page
    
    To test:
    1 - Have two patrons, one with superlibrarian and one with only
      catalogue + fast_cataloging
    2 - Make sure you have a fast add framework (code:FA)
    3 - Have two windows/tabs one with each patron (one private/incognito or
      use two browsers)
    4 - View mainpage.pl for both
    5 - Superlibrarian has Catalogue link, other does not
    6 - Browse to http://localhost:8081/cgi-bin/koha/cataloguing/cataloging-home.pl
    7 - Superlibrarian sees stuff, other can access page, but has no buttons
    8 - Apply patch
    9 - Repeat 4 - both have a link
    10 - Repeat 7 - both have a link to fast add
    11 - Confirm fast add link works
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cf89db353d49b2a7959bb0fab9c909bd0a743c07
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Mar 24 10:42:08 2023 -0400

    Bug 33021: (QA follow-up) Add unit test
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6561cd84b6036ce1e648bd57fa6d025d3b920868
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Feb 21 11:14:06 2023 +0100

    Bug 33021: Show an alert when adding a reserved item to an item bundle
    
    Test plan:
    1. Create an item bundle (see bug 28854 comment 458)
    2. Create a biblio with one item and place a hold for this item.
    3. Try to add the reserved item to the bundle
       You should see a message saying that the item is reserved. Next to
       this message should be a button "Ignore holds and add to bundle".
    4. Click on the button. There should be a message saying that the item
       was added to the bundle.
    5. Close the modal window and verify that the item was correctly
       added to the bundle
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutiosn.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a2a55e284b8f928dfaf2c898e9276164cccd65aa
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Mar 24 10:31:22 2023 -0400

    Bug 32121: (QA follow-up): Fix unit tests count
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f04dd671aff9c753676eb96b14bff470d942c0e8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Feb 2 16:17:06 2023 +0000

    Bug 32121: (QA follow-up) Use error_code rather than key
    
    We semi-recently introduced error_code into our error object to allow
    for translation and code paths for different errors without having to
    rely on long description string matches.
    
    This QA follow-up converts the existing match and new 'key' fields
    introduced in this patchset to use the updated 'error_code' key.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit de362442661cc5c2e66bd090a2eda474c19b2efb
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Mon Nov 7 14:30:34 2022 +0100

    Bug 32121: Show an alert when adding a checked out item to an item bundle
    
    When trying to add a checked out item to an item bundle, an alert
    message will show up, giving the user a chance to return the item
    immediately before adding it to the bundle
    
    Test plan:
    1. Create an item bundle (see bug 28854 comment 458)
    2. Create a biblio with one item and check out this item.
    3. Try to add the checked out item to the bundle
       You should see a message saying that the item is checked out. Next to
       this message should be a button "Check in and add to bundle".
    4. Click on the button. There should be a message saying that the item
       was added to the bundle.
    5. Close the modal window and verify that the item was correctly
       returned and added to the bundle
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f781fdb4a231e074b36099d0a724fad576518921
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 22 08:48:48 2023 +0100

    Bug 32807: Fetch count instead of all entries for agreements and licenses
    
    To list agreements and licenses we are retrieving the whole list to
    simply know if at least one exists (and display the table that will
    fetch the X first elements to display).
    
    We should call count instead.
    
    Test plan:
    List agreements and licenses.
    If none exists, the table is not displayed but a "There are no...
    defined" message instead.
    If at least one exists the table must be there
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7b2644bf2b0faf22375979bdf0fa8f4f0335425c
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Jan 2 22:50:48 2023 +0000

    Bug 32003: Add page-section to order search results and fix heading hierarchy
    
    This adds a page-section to the order search results and moves
    the former second h1 heading 'search results' to a h2 heading
    below 'Order search', so we have a proper hierarchy
    
    In acquisitions:
    * Make sure you have an order with at least one order line
    * Do an empty orders search
    * Verify there are 2 h1 headings on the page and the results table doesn't
      have a white background
    * Apply patch
    * Verify the results list now has a white background and the second
      now smaller heading has been moved into this area
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f3fb1747752b664dea3df5824c73863f11aacbf8
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Tue Feb 14 17:01:40 2023 -0500

    Bug 32964: OPACResultsMaxItemsUnavailable description is misleading
    
    This patch rephrases the last part of the description of the
    OPACResultsMaxItemsUnavailable system preference to clarify the link
    to the OPACResultsUnavailableGroupingBy option.
    
    It also changes some terminology to follow the guidelines
    (capitalization, library instead of branch).
    
    To test:
    1. Apply patch
    2. Go to Administration > Global system preferences
    3. Search for OPACResultsMaxItems
    4. Read the sentence for OPACResultsMaxItemsUnavailable, make sure it
    makes sense, the grammar and spelling are ok, respects terminology
    and capitalization guidelines
    5. Try the link in the description, make sure it goes to the correct
    syspref
    6. Read the sentence and options for OPACResultsUnavailableGroupingBy,
    make sure it makes sense, the grammar and spelling are ok, respects
    terminology and capitalization guidelines
    7. Optionally, try the various options, they should still work as
    intended
    
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 52709755b7b8b884320cc836584782ab9316996d
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Mar 3 16:03:05 2023 +0000

    Bug 32426: (follow-up) Use more acurate term 'internal' instead of 'legacy'
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 83a24bdde9ec1576842223c00dba26eb879e2e94
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jan 26 13:38:48 2023 +0000

    Bug 32426: Fix qatools issues
    
    [1] opac-registration-verify.pl forbidden pattern: Script permissions is authnotrequired => 1, it is correct for an OPAC script, not intranet (bug 24663)
        => Do not go back to authrequired => 1. Use a check on OpacPublic.
    [2] opac-registration-invalid.tt missing_filter at line 41 (<p>Error [% error_type %]: [% error_info %]</p>)
    [3] opac-memberentry.tt missing_filter at line 131 (<p>Error [% error_type %]: [% error_info %]</p>)
    
    Test plan:
    Verify that qatools passes.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ac6a6b99cd79cd238d706cb620383dcb1e672aec
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jan 26 11:14:54 2023 +0100

    Bug 32426: Adjust error message of ERROR_login_exist
    
    The reference to password might be confusing. You could have the
    same password as another user.
    The addition of 'could not create unique one' especially applies to
    plugins that return an existing userid, like the very simple plugin
    example on the Bugzilla report that just returns borrowers.email.
    
    Test plan:
    Covered by previous patch. Just a string change here.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9d250efae9d499b7b9f0c9fa69b90de77b5b95f4
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Jan 24 15:34:51 2023 +0100

    Bug 32426: Changes for members/memberentry.pl
    
    Test plan:
    Note: We will address this again when installing a plugin, but
    first we test with the legacy userid code.
    
    Add a new user with members/memberentry in staff.
    Edit this user, change userid in staff. Try full form and partial
    one.
    If you remove userid or replace by a space (when mandatory), Koha
    should regenerate a legacy userid.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 79fa6025e87d5cf7dcbf2a16edcc2a619136e04e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jan 19 12:01:42 2023 +0100

    Bug 32426: Changes for opac-registration-verify
    
    Similar to changes in opac-memberentry.
    
    Test plan:
    Now also enable  PatronSelfRegistrationVerifyByEmail.
    Make the same change in Patron again with return $self.
    Restart all. Self register. Check your email.
    Follow the link. Verify that you have a similar alert.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5fd51573a5dea1422b6c8fe2857541c8d59d1b0c
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Dec 15 16:03:47 2022 +0100

    Bug 32426: Changes for opac-memberentry
    
    Test plan:
    Enable self registration, pick a default category too for it.
    The changes will be tested later with a plugin, but now change
    Koha/Patron.pm as follows:
     sub _generate_userid_legacy { # as we always did
         my ($self) = @_;
    +return $self;
    So, add the return $self line only.
    Restart all. Try to register an account on OPAC.
    You should see an alert about problems processing your registration.
    Undo the change in Patron.pm and restart all.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6b2e92e576a502876e9de5ffbd418b1d48603c76
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Dec 8 16:02:35 2022 +0100

    Bug 32426: Throw InvalidUserid exception in Patron->store
    
    When creating we still call generate_userid and verify the result.
    When modifying we do not accept an invalid userid. When needed,
    we recreate the userid; this should be very exceptional.
    
    Test plan:
    Run t/db_dependent/Koha/Patrons.t
    Go to staff interface. Try changing userid of a patron to an
    existing one.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c0260e4501c74739da14599d510e4f6cc71dd2b4
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Dec 5 15:17:37 2022 +0100

    Bug 32426: Patron::generate_userid - add plugin hook
    
    The hook is called patron_generate_userid. How suitable.
    The existing generate_userid tests and new tests with mocked
    plugins are merged into a new test script.
    
    Test plan:
    Run t/db_dependent/Koha/Patron_generate_userid.t
    Run t/db_dependent/Koha/Patrons.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ba1d1ee5c9746d8889b6141916e452a0981b7ccb
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 27 12:29:55 2023 +0200

    Bug 3150: DBRev 22.12.00.015
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 423c0b364090ea3685dbec67a7ec236903550590
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 27 12:28:19 2023 +0200

    Bug 3150: Adapt reporting to skeleton.pl
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 326c4e23ced56669c9435fadc0f3ff1bb659dc5f
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Mar 14 13:04:14 2023 -0400

    Bug 3150: (QA follow-up) Tidy scripts
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a426134fe33728d96fef911bc0e937d58f0951cb
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Mar 14 17:01:50 2023 +0000

    Bug 3150: (QA follow-up) Don't load unused and deleted tt files
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 128517fe66bd09f72ade74e81fcab3e71873fde8
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Mar 14 12:32:22 2023 -0400

    Bug 3150: (QA follow-up) Remove unused variables
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d123287b18e063e50e5cb5a8e90122f67b2b07b2
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Mar 7 17:51:09 2023 +0000

    Bug 3150: (follow-up) Make sure host information displays for unlinked records
    
    When the 773 entry is not linked to a record using $w or
    Easyanalytics we still want to display the information
    about the source/host item in the emails.
    
    To test:
    1. Activate the UseControlNumber system preference
    2. Search for a record and make sure it has 001 set to some value.
    3. Use Edit > Add child record to create an analytical record from this record.
    4. Make sure 773$w was filled in and finish by adding any mandatory fields, save.
    5. Add this record to your cart. Also add a 773$g with the pages or similar.
    6. Create another record with 773$t and $g, but without $w.
    7. Also add this record to your cart.
    8. Add a few other records to the cart.
    9. Host item information (In: ) should display for all entries with 773 in the record.
    
    This also makes use of the biblio-title include to display the
    different parts of the title (245$abnp), if the record is linked.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2896077b193de63c5ddb0e2a9334939677b3fe34
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Feb 27 00:26:09 2023 +0000

    Bug 3150: (follow-up) Make subs to get host/related parts for notices
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cca354d0cea7a7b8ff1026a5882a0d7505186716
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Feb 20 23:17:56 2023 +0000

    Bug 3150: Include host item entries in LIST and CART notices
    
    Incorporating fixes from Bug 16522
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b37f898efd1493946fb992723e11a2eda8283caf
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Feb 17 15:55:53 2023 +0000

    Bug 3150: (follow-up) Improve and fix new notice templates
    
    This fixes several issues found and improves formatting:
    
    * Add missing line breaks <br> where required as we are now using HTML
    * Add missing USE statements to show
      * library
      * location
      * Link to the OPAC (Preference was not resolved)
    * Make sure there is a comma between library and location
    * Make sure Author(s): only displays when there is content after
    * The comment field allows multi-line comments, formatting is now preserved
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a184a88cb8148817d05f83c415e00b08844fb1c4
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Feb 17 15:52:58 2023 +0000

    Bug 3150: (follow-up) Send list and cart emails immediately again
    
    With this patch set the cart and list emails are sent via
    the message_queue instead of bypassing it and being sent
    immediately. This patch keeps them in message_queue, but
    also sends them immediately, restoring the previous behavior.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fc5f56f7b6fca4bc88e7ade4000682aa36e8d1d4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Sep 7 08:08:07 2022 +0100

    Bug 3150: (QA follow-up) Remove borrowernumber from EnqueueLetter
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a611c6d4db00643d2a667ef30b4f912bfd4954df
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Sep 22 09:30:32 2020 +1200

    Bug 3150: Move emails for sending cart and list contents to notices
    
    This patch creates notices using Template Toolkit syntax for sending
    emails containing cart and list contents.
    
    To test:
    1. Apply Bug 27266
    2. Run update database and restart services
    3. In the staff client, add multiple items to your cart and to a list
    4. Go to your cart and click Send to email the contents
    5. Add an email and a comment and click Send
    6. Confirm the information shown in the success message is correct
    7. In your terminal, log into the database. View the message queue ( i.e. select * from message_queue; ). Confirm that your email has been queued and the content is all correct. Confirm the cart contents has been included as an attachment.
    8. Go to your list and click Send list to email the contents
    9. Repeat steps 5-7
    10. Log into the OPAC
    11. Add multiple items to your cart and to a list
    12. Repeat steps 4-9
    13. By the end, you should have four emails in your message queue. All
    of the data about the items should be correct, they should all have
    attachments, and be addressed to the correct email address.
    
    Sponsored-by: Bibliotheksservice-Zentrum Baden-Württemberg (BSZ)
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d2f2fc24988b69361dbe3ab1d17a7f97120638cc
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Dec 28 11:18:26 2022 -0300

    Bug 14251: Add weasyprint dependency
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d792225e91585386e821f933b04e6a1836557ade
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Feb 3 15:18:13 2023 -0300

    Bug 14251: Add warning in about.pl for missing weasyprint
    
    To test:
    1. Have weasyprint installed
    2. Go to the About > System information page
    => SUCCESS: No warning about weasyprint
    3. Uninstall weasyprint
    4. Repeat 2
    => SUCCESS: A warning is displayed and makes sense
    5. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9d9ecdc49b4cb71aba99a7d7ca8bc89d426f7ca1
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Dec 28 10:43:16 2022 -0300

    Bug 14251: Allow use of CSS in discharge letter
    
    The discharge feature relies PDF::FromHTML which explicitly doesn't
    handle CSS [1].
    
    This patch makes it use the `weasyprint` command-line tool to generate
    the PDF. This tool handles CSS correctly.
    
    To test:
    1. Install weasyprint:
       $ apt install weasyprint
    2. Add some style to your DISCHARGE letter. I used:
    <<today>>
    <h1>Discharge confirmation</h1>
    <p style="background-color: yellow;"><<branches.branchname>> certifies that the following borrower:<br>
    <<borrowers.firstname>> <<borrowers.surname>> (cardnumber: <<borrowers.cardnumber>>)<br>
    has returned all items.</p>
    3. Have some non-latin chars on the patron name. I picked 'Henry
       Acevedo' and added 'Δοκιμή' as picked from bug 23589. Only to check no
       regressions.
    4. Enable the 'UseDischarge' syspref
    5. Go to Henry's detail page
    6. Choose More > Discharge and Generate the discharge
    => SUCCESS:
       - Style is applied to the PDF
       - Greek characters are displayed correctly
    7. Run the tests:
       $ kshell
      k$ prove -v t/db_dependent/Patron/Borrower_Discharge.t
    => SUCCESS: The rewritten tests pass!
    8. Remove weasyprint:
       $ apt remove weasyprint
    9. Repeat 7
    => SUCCESS: Tests pass, relevant test is skipped because of missing
                weasyprint
    10. Sign off :-D
    
    [1] https://metacpan.org/pod/PDF::FromHTML#CAVEATS
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d22f885b064f599d753afc94ac7caf0a4ead5ce7
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Feb 23 22:31:09 2023 +0000

    Bug 32945: (QA follow-up) Fix capitalization of id in even more places
    
    This fixes additional strings pointed out by QA.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 956c8fb49117744a56b39a24800e58fed2ba1d7c
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Feb 10 21:49:19 2023 +0100

    Bug 32945: Fix capitalization of id in more places
    
    id should be spelled ID, ids should be IDs as it's
    an abbreviation according to:
    
    https://www.oxfordlearnersdictionaries.com/definition/english/identification
    
    To test:
    * Some of these are hard to make happen or require specific
      data, easiest will be to review the patch itself closely.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 82859c8568d86c2c9e443d9731b68646b5d20332
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Feb 23 20:36:38 2023 +0000

    Bug 32969: (follow-up) Remove obsolete inline CSS
    
    A couple of templates have some inline CSS intended to style jQueryUI
    tabs. These instances can be removed:
    
    - opac-readingrecord.tt: Tabs have been replaced with Bootstrap.
    - opac-idref.tt: There doens't appear to be any tab-related markup in
      the template at all.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6f383fe586de0b8bd6a9978953c0279d254c31dd
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Feb 15 15:36:23 2023 +0000

    Bug 32969: Remove references to jQueryUI assets and style in the OPAC
    
    This patch removes the jQueryUI assets from Bootstrap OPAC files and
    removes the links to those assets from the templates. References in CSS
    to jQueryUI-related elements are also removed.
    
    To test, apply the patch and rebuild the OPAC CSS.
    
    Test various pages in the OPAC to confirm that there are no visible
    changes. The browser console should not warn of missing files.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit df6432fcc833f00bb6e45894004a0ad26d5ced28
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Mar 20 15:43:39 2023 +0000

    Bug 33278: Correct JS for activating default tab on various pages
    
    The conversion of the header search tabs to Bootstrap resulted in a bug
    on several staff interface pages: The first tab isn't selected by
    default. The jQuery selector isn't specific enough.
    
    The patch also corrects a template error which was introduced to
    merge-record.inc by Bug 32683.
    
    To test, apply the patch and test the following pages to confirm that
    the first tab on each page is selected by default:
    
    - Catalog -> Advanced search
    - Catalog -> MARC details
    - Catalog -> Search results -> Merge
    - Administration -> Authorized values -> Edit
    - Administratoin -> Library transfer limits
    - Administration -> Item types -> Edit
    - Authorities -> Authority details
    - Authorities -> Search -> Merge
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 63772a9cb25e58ff221540c2a76a7f447bbdeecc
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 10 18:44:21 2023 +0000

    Bug 33198: Don't calculate pickup locations per bib unless placing multiple holds
    
    For single bibs we use an ajax select2 dropdown, and we don't use this
    value
    
    To test:
    1 - Place some holds on single bibs
    2 - Confirm dropdowns for pickup location work as expected
    3 - Do the same for multiple bibs selected from search results
    4 - Apply patch
    5 - Confirm there is no change after the patch
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 017694fd9547ef2e2c909b9de2246ab38c40d5c7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 14 13:04:35 2023 +0000

    Bug 32883: (QA follow-up) Adjust ordering for pickups
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4943f060712422f4f5dcf8065b1f2593e18a1a6d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Feb 6 16:48:54 2023 +0100

    Bug 32883: Correct cubside pickups ordering
    
    They are displayed by date of creation, it's not what we want for "to be
    staged" for instance, where it needs to be ordered by date/time of
    scheduled pickup.
    
    Test plan:
    Create several curbside pickups, to have some in the different tabs
    Confirm that the order is the one you expect.
    => to be staged ordered by pickup date/time
    => stage and ready ordered by pickup date/time
    => patron is outside ordered by arrival date/time
    => delivered today ordered by *desc* delivered date/time
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0970eef56df1ac8fee1f3c5f0216a164be5048ec
Author: Johanna Raisa <johanna.raisa@gmail.com>
Date:   Fri Jul 29 08:37:50 2022 +0300

    Bug 30966: Record Overlay Rules - can't use Z39.50 filter
    
    This patch fixes overlay rules on z39.50 import
    
    Test plan:
    1) Create protection overlay rule to some fields for z39.50.
    2) Import a record via z39.50.
    3) See that the protected fields are replaced on the editor.
    4) Apply the patch.
    5) Import a record again.
    6) See that the protected fields are in place on the editor.
    
    Sponsored-by: Koha-Suomi Oy
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a63b0d00306d639241a400cecbe3b0125ee8d303
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 22 19:12:01 2023 +0000

    Bug 33309: Index items after renewal transaction completes
    
    This patch ensures a record is indexed only after the renewal transaction
    has completed successfully. Otherwise the job cannot be found by the background process
    worker, becaue it was not yet in the DB
    
    To test:
    1 - Make sure you are using ES, and the es indexer is running
    2 - tail -f /var/log/koha/kohadev/*.log
    3 - Issue an item to a patron and renew it
    4 - Note error in es-indexer-output.log like:
        [2023/03/21 12:22:36] [WARN] No job found for id=157 main:: /kohadevbox/koha/misc/workers/es_indexer_daemon.pl (129)
    5 - Apply patch
    6 - Renew again
    7  There should be no error
    8 - Search for the record and confirm items info displays correctly
    9 - View the background jobs in admin, confirm the most recent job has completed
    
    Signed-off-by: Janusz Kaczmarek <januszop@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2792007245f2dfda600b6d2e2fa97a1f634b7a26
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Mar 9 13:17:05 2023 +0000

    Bug 33137: Make column names match
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e657c3d5a9ec142113eba19bf106eb662796f6f0
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Mar 8 16:40:24 2023 +0000

    Bug 33137: Add call number to pay-fines-table and table settings
    
    To test:
    1. Apply patch and restart_all
    2. From a patron's Accounting tab add some invoices that are related to an item.
    3. From the 'Make a payemnt' notice the new Call number column.
    4. Using Table settings, make sure you can properly hide the column.
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eae0a7e065f867b9ba729281ba83b2568045ad50
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Mar 8 16:24:26 2023 +0000

    Bug 33137: Add Home library to pay-fines-table and table settings
    
    To test:
    1. Apply patch and restart_All
    2. From a patron's Accounting tab add some invoices that are related to an item.
    3. From the 'Make a payemnt' notice the new Home library column. Make sure it displays correctly and is the same as what you see on the 'Transactions' tab.
    4. Using Table settings, make sure you can properly hide the column.
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 48b1f230e8ea517450a02359e6f7fd530eda8b67
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Feb 15 23:50:33 2023 +1300

    Bug 33019: Make sure ES records are indexed the first time
    
    This patch ensures records are indexed when they are created.
    Previously, we were launching the indexer inside of of a transaction.
    This meant that the job was being enqueued, but not being found by the
    worker, becaue it was not yet in the DB
    
    This patch skips record indexing in the transaction, and moves the indexing
    command after
    
    To test:
    1 - Make sure you are using ES, and the es indexer is running
    2 - tail -f /var/log/koha/kohadev/*.log
    3 - Create a new record
    4 - Note error in es-indexer-output.log like:
        [2023/03/21 12:22:36] [WARN] No job found for id=157 main:: /kohadevbox/koha/misc/workers/es_indexer_daemon.pl (129)
    5 - Apply patch
    6 - Create another record
    7  There should be no error
    8 - Search for the record and confirm it can be found
    9 - View the background jobs in admin, confirm the most recent job has completed
    
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 17de3a6feeed8237108c76ac2bf8e1cfddffc127
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 21 08:52:42 2023 +0100

    Bug 33290: Fix incorrect variable in http-client.js
    
    Silly error from
      commit 821808ec31176d662e518418c9ff8a71948e1a4b
      Bug 32939: Use APIClient to replace PATCH requests
    
    +        const body = params.body
    +            ? typeof str === "string"
    +                ? params.body
    +                : JSON.stringify(params.body)
    +            : undefined;
    
      typeof str === "string"
    must be
      typeof params.body === "string"
    
    Test plan:
    With this patch, bug 33289 is not working properly. The body contains
      "pref_var=value"
    instead of
      pref_var=value
    and the syspref `var` contains `value"`
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 299903c0d3b51ea83b3c724a689609182c417b2b
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:52 2023 +0100

    Bug 32833: Fix cataloguing/value_builder/unimarc_field_121a.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f690f59e0e5e67eca5da6f5079d922abd9225702
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:52 2023 +0100

    Bug 32832: Fix cataloguing/value_builder/unimarc_field_120.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5800082f7ffa4d85ce9c2ba5da2a23c9021934c3
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:52 2023 +0100

    Bug 32831: Fix cataloguing/value_builder/unimarc_field_117.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4d196b176d6cfb258e9c729116db377cf5e17fd1
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:52 2023 +0100

    Bug 32830: Fix cataloguing/value_builder/unimarc_field_116.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    https://bugs.koha-community.org/show_bug.cgi?id=32831

commit b88d3640181c51b8d366313c4ac7044644f627d9
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Mar 20 17:21:06 2023 -0100

    Bug 33282: Feed an array of titles so that no dialog message appears
    
    Including but not limited to the one we're testing for
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit f718fe6a0aac993c08e911739e324c409ea93230
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Mar 20 17:19:53 2023 -0100

    Bug 33282: Move get_title to index.js to be invoked by different specs
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit a56cbc6d47ab11e7d4f599e2eec3a03a7c7f4690
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Mar 20 17:07:27 2023 -0100

    Bug 33282: Remove useless intercept
    
    JD amended patch: replace "redundant" with "useless". It's not the same
    intercept, but we don't need the one removed by this patch.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 7c5d0a208d473e409cc8f1e633816e5e63a74c6d
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Mar 20 17:05:52 2023 -0100

    Bug 33282: Rename Dialog.spec.ts to Dialog_spec.ts
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 479d8719c548c11ae8fd26343324f085ee92b536
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 22 10:25:56 2023 +0100

    Bug 32923: Allow to embed user_roles for agreements
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 0fb86ccdc5696fb15bf057469a5c962f8c228211
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Mar 20 13:25:19 2023 +0000

    Bug 32923: Fix licenses spec
    
    Bug 32713 is now validating embed and brought this flaw to light.
    Before this patch, listing licenses on ERM would result in a 400 bad request
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 58c98317d37eef23ff8234e7ff87cd26b458aa35
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 20 09:37:44 2023 -0300

    Bug 30555: (follow-up) Add messages about the introduced changes
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 711429fbf1d9b815cae2a39f25328fedf9d092b7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 20 09:37:10 2023 -0300

    Bug 30555: DBRev 22.12.00.014
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6536dd214f5f84e74c95d2caea47f481874a5323
Author: Shi Yao Wang <shiyao@inlibro.com>
Date:   Fri Apr 15 11:42:29 2022 -0400

    Bug 30555: Add more sample notice for sms messages
    
    Adds sms sample notice for due, hold, checkin and checkout
    
    Test plan:
    1. Check that there are no SMS messages for these notices (Tools > Notices & slips):
       . CHECKIN - Item check-in (digest)
       . CHECKOUT - Item check-out (digest)
       . DUE - Item due reminder
       . DUEDGST - Item due reminder (digest)
       . PREDUE - Advance notice of item due
       . PREDUEDGST - Advance notice of item due (digest)
       . HOLD - Hold available for pickup
    2. Apply the patch.
    3. Update the database (./installer/data/mysql/updatedatabase.pl)
    4. Refresh page
    5. Check that there are now SMS notices for the notices listed in step 1.
    6. Sign-off!
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c123b414800a9a7f20d1a7948baa6ea43025eec6
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Mar 17 17:43:18 2023 +0000

    Bug 19361: (QA follow-up) Make sure "Not an authorised value" appears in the pull down
    
    This is to make sure that the small icon with the additional tooltip
    style explanation is not as easily missed.
    
    Also updates text slightly:
    * Pull downs: "X (Not an authorised value)"
    * Tooltip: "The current value X is not configured for the authorised value category controlling this subfield"
    
    Switches from exclamation triangle to the more "alerting" exclamation-triangle :)
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e0880ed3c93a07a999efab85ff18d305a158a893
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Mar 17 16:10:26 2023 +0000

    Bug 19361: (QA follow-up) Make sure translatable string is wrapped in double quotes
    
    This fixes the QA script complaint:
    
     FAIL   koha-tmpl/intranet-tmpl/prog/en/includes/cateditor-ui.inc
       FAIL   forbidden patterns
                    forbidden pattern: simple-quote string (line 125)
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fdc82e6c6dc0d9853e5950c0c07805fcc2a1e2ac
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 19 14:37:34 2022 +0000

    Bug 19361: Fix advanced cataloging editor dropdowns
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1dc022513cea57afb39e49273ffc3043d0094cd5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 19 13:56:51 2022 +0000

    Bug 19361: Display unauthorized values when cataloging and add a warning
    
    This patch adds a warning and tool tip when an unauthorised vlaue is encountered during item
    or biblio editing, and adds the value to the list to allow preserving the value (in case the
    librarian is only editing another part of the record, or there is some reason to retain)
    
    To test:
    1 - Edit a record in advanced cataloging editor
    2 - Under settings click 'Show fields verbatim'
    3 - Edit 942$c to 'HAM' or some other invalid itemtype
    4 - Save record
    5 - sudo koha-mysql kohadev
        UPDATE items SET location = 'HAM' WHERE biblionumber = {biblionumber from above}
    6 - Edit the biblio and items, confirm the HAM value shows in dropdowns
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit faf4ad9edf34779aa4af1e5be4e79ddb9f5aa7dd
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Mar 17 17:48:22 2023 +0000

    Bug 33266: Fix missing space in patron title
    
    This patch fixes the missing space in patron-title.inc
    
    Test plan:
    1) Visit a patron's detail page and observe that there should be a
       missing space between the first name and the surname
    2) Apply patch
    3) The name should now be correctly formatted
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d11abd548bc879aa01216f9c2b472cc8621dcda8
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Feb 23 22:16:56 2023 +0000

    Bug 33060: Fix yes/no setting to 1/0 in system preference YAML files
    
    Boolean system preferences need to use 1 and 0 for true and false,
    not yes and no now. This fixes a few occurences that have
    been added in the last release:
    
    * EnableItemGroups
    * EnableItemGroupHolds
    * ArticleRequestsOpacHostRedirection
    * UseLocationAsAQInSIP
    
    To test:
    * Make sure these preferences save to the db as 0/1 as expected.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8ba4aabf079d23680a7e40b004b1914864963659
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 20 08:48:22 2023 -0300

    Bug 33227: (follow-up) Improve docs
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 185b431ebfc869dde06ab87efcd562fc786388ae
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Mar 16 10:50:33 2023 -0300

    Bug 33227: Remove invalid spec and adjust the code accordingly
    
    The spec contains a non-standard definition for the body param. Removing
    it from the spec makes us need to handle the 'body' manually in the case
    of JSON data.
    
    This patch basically does that. It also changes the uses of
    $c->validation, which are discouraged by the
    Mojolicious::Plugin::OpenAPI dev/maintainer. I do it to highlight what
    we must do in other places and the fact that there's no behavior change.
    
    To test:
    1. Apply this patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/biblios.t \
               xt/api.t
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 502e34e9b0f709d0ab9260da107c1c1e5c7e11d8
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Mar 15 11:14:19 2023 -0300

    Bug 33227: Unit tests
    
    This patch adds a unit test that launches the swagger-cli validator
    against our spec.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 02392b0c2ba2a43036ee1ecefe08692a76cbf267
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 3 15:31:21 2023 +0000

    Bug 33108: (follow-up) Don't let restart die if ES indexer not running
    
    This fixes the restart action in koha-common to continue with starting
    services even if the last service cannot be stopped (because it may not
    be running)
    
    This needs a larger fix, to ensure all stopped services return a
    warning, for now 'do_stop' simply returns the last success/failure
    
    To test:
    1 - Apply patch
    2 - reset_all
    3 - sudo koha-es-indexer --stop kohadev
    4 - restart_all
    5 - You are notified that ES indexer was not running
    6 - You are notified that soem services could not be stopped
    7 - The services are started
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8e0074609543a46110bbaf786aa760c20531840f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Mar 2 13:44:34 2023 +0000

    Bug 33108: (follow-up) Don't die, only warn if not using ES
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 84460798f0b064086cf805549eaca1007c656128
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Mar 1 16:04:25 2023 -0300

    Bug 33108: Make init handle koha-es-indexer
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Bug 33108: (follow-up) Fix typo
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a4b88d556848585afada1885bda04221792490c6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Mar 1 15:46:26 2023 -0300

    Bug 33108: Teach koha-list filter elasticsearch
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 37d832da31356c057a98aaab649f02b7bdce3f85
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Mar 1 10:22:22 2023 -0300

    Bug 33108: koha-es-indexer added
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 73edf936ae9be2a704389896e5ad316eb8cf96ec
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Mar 17 21:46:21 2023 +0000

    Bug 33076: (QA follow-up) Update context hint to "EDIFACT message QUOTE"
    
    As discussed on the bug, this updates the hint to make it
    easier for translators to decide on the correct translation.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit afdc1690e01daef72e6e2304bcdf7dec18fe653c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Mar 17 18:27:09 2023 -0300

    Bug 32713: (QA follow-up) Tests now require more complex structures
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 70fcbce07f2e44d40853e4b423aa1b13cfb713de
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 17 15:07:37 2023 +0100

    Bug 32923: (follow-up) Fix x-koha-embed from EHoldings/*/*
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 289400379213dea3169ba30196ff4ef8f87a4b03
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Mar 6 18:02:28 2023 +0000

    Bug 33151: Improve translation of string in cities.tt and desks.tt
    
    This patch adds a <span> tag around a string in both cities.tt and
    desks.tt in order to improve translatability.
    
    To test apply the patch and run the translation script to update the .po
    files, e.g.
    
    perl misc/translator/translate update fr-FR
    
    Check the updated .po files:
     - Before the patch you would have found 'msgid "%s Searching: %s %s %s'
     - After the patch you should find 'msgid "Searching: %s'
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bf8e0a394fb1704345e8cc4cae45d86c31e596ef
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Mar 17 08:43:32 2023 +0000

    Bug 32804: (QA follow-up) Typo ahs and fix ImportBatch.t
    
    Resolve:
        #   Failed test 'Item's biblioitemnumber has not changed'
        #   at t/db_dependent/ImportBatch.t line 407.
        #
        #          got: '4261'
        #     expected: '2371'
    
    Do not compare $item1->biblionumber with $original_biblioitemnumber :)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 520db70bf1cdedf658527887957fc25ed921da5f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 3 12:18:40 2023 +0000

    Bug 32804: (follow-up) Test that id's have not changed
    
    Rather than assuming biblionumber and biblioitemnumber are the same, we
    should test that they have not changed form their original values
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eeb115440a22ed035d8720ac53b7fbd0e5fd8afe
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Feb 2 20:16:49 2023 +0000

    Bug 32804: Do not adjust biblionumber when replacing items during import
    
    This patch adjust the item matching at import to confirm that for a duplicate itemnumber or barcode
    matches an existing item in the DB and uses the original biblionumber when updating the item.
    
    When ordering in a consortium the items may be moved around, duplicate biblios added, and various matches found.
    We should not allow importing of items to move them from 1 biblio to another, but  we should allow the imports
    to succeed and assume itemnumber or barcode matches are authoritative. The responsibility for correct matching of items to biblio should fall on the creator of the files
    
    To test:
     1 - Be using the sample data in koha testing docker
     2 - Stage the sample file on this report
     3 - Match on KohaBiblio(999$c) / Item processing: replace
     4 - Note the biblio match is "The complete novels / Austen, Jane"
     5 - View the staged marc, note the barcode 39999000004090 in an item
     6 - Search for that barcode
     7 - You find biblio "Five novels : complete and unabridged / Gustave Flaubert"
     8 - Import the file
     9 - Check the db:
         SELECT * FROM items WHERE biblionumber != biblioitemnumber;
    10 - Note the mismatch
    11 - Fix the item and set it as 'Music' type
         UPDATE items SET biblionumber = biblioitemnumber, itype='MU' WHERE biblionumber != biblioitemnumber;
    12 - Apply patch, restart all
    13 - Stage and import the file with the same settings
    14 - Confirm the item is modified on its original biblio (99) and that item type is Book again
    15 - Change itemnumber to avoid itemnumber match and reset type
         UPDATE items SET itype='MU', itemnumber=999 WHERE itemnumber=212;
    16 - Stage and import with the same setttings
    17 - Confirm the marcode match worked and item is updated to book on original record
    18 - Delete the original item
    19 - Stage and import the file with the same settings
    20 - The item is successfully created
    21 - Stage and import, but item processing option is 'add'
    22 - Confirm 1 item ignored
    23 - Check the db
         SELECT * FROM import_items WHERE barcode=39999000004090
    24 - Confirm there is a line with 'error' and duplicate_barcode
    
    JD amended patch
    -        # We assume that when replaicing tiems we do not want to move them - the onus is on the importer to
    +        # We assume that when replacing items we do not want to move them - the onus is on the importer to
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8f5d3612ee74e48293667af90a03f714d87e062a
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Feb 6 11:55:48 2023 -0500

    Bug 32804: Add unit tests
    
    JD amended patch
    -    is( $item1->homebranch, $library->branchcode, "Item was overlayed succesfully" );
    +    is( $item1->homebranch, $library->branchcode, "Item was overlaid successfully" );
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8e4d5279703be5f8e9313f2e497bfa98b58e422c
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Feb 23 21:21:02 2023 +0000

    Bug 33059: Fix capitalizatoin of AV sample category descriptions
    
    * Fixes capitalization
    * Standardizes on e-book (see https://www.oxfordlearnersdictionaries.com/definition/english/e-book)
    * Standardizes on audiobook (see https://www.oxfordlearnersdictionaries.com/definition/english/audiobook)
    
    To test:
    * This is a little difficult to test. What you'd need to do:
    * Apply the patch
    * Drop your database, recreate it, run the web installer
    * Make sure to select the optional AV along with the mandatory to install
    * Log into Koha after finishing the installer and go to administration >
      authorised values
    * Review the existing sample values for incorrect capitalization in
      the different categories
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 057e6c2bc8f7d88ff2e86f1abab97a705e2917a3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Mar 17 09:51:09 2023 -0300

    Bug 33100: (QA follow-up) Trivial QA fixes
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 928a4cb465d7891157b1b061d144db6a808ada14
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 7 20:05:36 2023 +0000

    Bug 33100: Remove all punctuation at end of record
    
    This could potentially be overkill - if you have two records that only
    differ in ending punctuation, you might get a false result - I don't
    know how likely that is ( as I have mentioned before '!!!' is a band )
    
    This seems a reasonable fix
    
    To test:
    1 - Set sysprefs as in bug 33159
    2 - Edit a record, biblionumebr 3 is fine
    3 - Add a comma to end of author subfield a
    4 - Save and note relinked
    5 - Apply patch, restart all
    6 - Save again
    7 - Linked to original record
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 749045366310fe4269bb1c39a93adc5eb20a4f22
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 7 20:05:28 2023 +0000

    Bug 33100: Unit test
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 16e6d937632301e233d5b90b6588940eb2226636
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Mar 15 14:23:37 2023 -0100

    Bug 33235: Fix cypress tests
    
    Some inconsistencies leftovers from 32495 and 32997 were causing cypress tests to fail, this fixes them.
    
    * Apply patch
    * Run cypress tests and verify all pass
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f1a274c79cb827737a57686a51a8fef72c1eff75
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Feb 27 21:44:09 2023 +0000

    Bug 33082: Add yellow buttons and page sections to 'copy order' pages
    
    When creating a new order from an existing order (copy),
    there was no page section on the search results and the
    submit buttons were not yellow (primary).
    
    To test:
    1. Make sure you have budgets, funds and vendors
    2. In Acquisitions, search for a vendor
    3. Create a basket
    4. Add an order to that basket (Order from new (empty) record is easiest)
    5. Add to the basket again, choosing the "From existing orders (copy)" option
    6. Search for you previous order
    7. The table of ordres has no white background (missing page-section) and
       the "Next" button is not yellow
    8. Check the order and click Next
    9. The "Duplicate orders" button is not yellow
    10. Apply patch
    11. Verify buttons are now yellow and the table has a white background
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0a387bbd021bf3520e30bbc32fe774e78885c708
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Mar 16 18:02:53 2023 +0000

    Bug 25856: Add suspend class to tr's of suspended holds
    
    To test:
    1. Apply patch.
    2. Place multiple holds on a record and then go suspend some of them.
    3. Those suspended holds should now have a class of 'suspended'
    4. Now you can add any kind of CSS you want to make those rows stand out. You can try adding this to IntranetUSerCSS:
    .suspend > td {
            color: red;
    }
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e81e2c9ed552cc5fa07d474a6a9d44ba0e751390
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 17 11:57:22 2023 +0100

    Bug 33263: Fix random failure in patrons_search.t
    
    There is a missing wait_for_ajax. After we click "next", we need to make
    sure we are using the correct response.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6a2564a369427bc30f71e534dcedd60f7666fb8a
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Feb 23 07:52:02 2023 -0500

    Bug 33070: Remove use of can_edit_items
    
    Test Plan:
    1) Apply this patch
    2) prove t/db_dependent/Koha/Acquisition/Order.t
    3) git grep "can_edit_item("
       should return no results
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5c3693bbd2109a780c5fdb5af31d36841ea6c1fc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 8 15:53:15 2023 +0100

    Bug 32983: Fix dropdown list when search for EBSCO's packages
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3f848e4d244ce4fa5f9f8a6d507c79de704592b5
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Feb 23 20:26:23 2023 +0000

    Bug 33058: Update "fines" to "charges" for viewing a guarantees charges
    
    Charges includes fines and fees, while fines are mostly
    negative. Changing this according to our terminology
    guidelines.
    
    To test:
    * Make sure the patron category of your patron is set
      to be 'can be guarantee' in administration
    * Set  AllowStaffToSetFinesVisibilityForGuarantor and
       AllowPatronToSetFinesVisibilityForGuarantor to allow
    * Set OpacPrivacy to allow
    * Edit your patron, give it a guarantor and
      look at the "Show fines to guarantors setting" and hint
    * Save and look at the label of the field on the details tab
    * Go to the OPAC and log in
    * Check the Privavy tab for the option to allow the guarantee
      to see your charges
    * Apply patch. Verify:
      * System preference descriptions changes
      * Option and label names have changed in all steps above
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2dd0a14571e59b9e4740f323e038decfef0919e2
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Mar 15 20:39:27 2023 +0000

    Bug 32180: Add required class to labels in ERM
    
    To test:
    1. Apply patch, yarn build
    2. Add/edit Agreemnets, make sure all required fields have a red 'required' label
    3. Check 'Add new period', 'Add new user', 'Add new license', 'Add new related agreement'.
    4. Add/edit Licenses, make sure all required fields have a red 'required' label.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6d6f763182ef11e8c36a348371925f643a78f686
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Feb 23 20:42:54 2023 +0000

    Bug 33056: Terminology: change 'fine' to 'charge'when making a payment or writeoff
    
    In the development meeting of Feb 22, 2023, we decided to change 'fine' to 'charge' when referring to various types of fees ('fine' should be limited to overdue fines).
    
    To test:
    0. Go to patron's account accounting tab, Make a payment section
       --> It will read: X has no outstanding fines.
       0.1 Create a manual invoice
       --> Use "Write off all" button, verify confirmation message says 'fines'
    1. Add a manual fee to a patron's account
       1.1. Go to a patron's account > Accounting tab
       1.2. Click 'Create manual invoice'
       1.3. Enter an amount
       1.4. Click 'Save'
    2. Pay an individual charge
       2.1. Click 'Make a payment'
       2.2. Click the 'Pay' button next to an individual charge
       --> In the browser tab title, it says 'Collect fine payment for ...'
       --> In the breadcrumbs, the last section is 'Pay an individual fine'
       --> The heading of the page is 'Pay an individual fine'
       --> The heading inside the payment tab is 'Pay an individual fine'
       2.3. Click 'Cancel' and go back to the 'Make a payment' tab
    3. Pay an amount toward all charges
       3.1. Click 'Pay amount'
       --> In the browser tab title, it says 'Collect fine payment for ...'
       --> In the breadcrumbs, the last section is 'Pay an amount toward all fines'
       --> The heading of the page is 'Pay an amount toward all fines'
       --> The heading inside the payment tab is 'Pay an amount toward all fines'
       3.2. Click 'Cancel' and go back to the 'Make a payment' tab
    4. Pay an amount toward selected charges
       4.1. Click 'Pay selected'
       --> In the browser tab title, it says 'Collect fine payment for ...'
       --> In the breadcrumbs, the last section is 'Pay an amount toward selected fines'
       --> The heading of the page is 'Pay an amount toward selected fines'
       --> The heading inside the payment tab is 'Pay an amount toward selected fines'
       4.2. Click 'Cancel' and go back to the 'Make a payment' tab
    5. Write off an individual charge
       5.1. Click the 'Write off' button next to an individual charge
       --> In the browser tab title, it says 'Collect fine payment for ...'
       --> In the breadcrumbs, the last section is 'Write off an individual fine'
       --> The heading of the page is 'Write off an individual fine'
       --> The heading inside the payment tab is 'Write off an individual fine'
       5.2. Click 'Cancel' and go back to the 'Make a payment' tab
    6. Write off selected charges
       6.1. Click 'Writeoff selected'
       --> In the browser tab title, it says 'Write off an amount for ...'
       --> In the breadcrumbs, the last section is 'Write off an amount toward selected fines'
       --> The heading of the page is 'Write off an amount toward selected fines'
       --> The heading inside the payment tab is 'Write off an amount toward selected fines'
       6.2. Click 'Cancel' and go back to the 'Make a payment' tab
    7. Apply patch and repeat
       --> All fines should now be charges.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2413ab7e7986c39d5469e8f16d7be9d62bd775d8
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Feb 27 22:13:01 2023 +0000

    Bug 33076: Add context to "Quotes"
    
    A quote as a part of quoted text and a quote as
    part of the acquisition process need to be
    translated differently at least in German.
    This patch adds context to the terms, so we can
    do that.
    
    To test:
    * Go to Tools > Quote editor
    * Verify the heading of the page reads "Quotes"
    * Enable EDIFACT system preference
    * Go to Administration > EDI accounts
    * Add a new account save
    * Verify the table heading reads "Quotes"
    * Apply patch - nothing should change
    
    Verify the translation process:
    * Run: gulp po:update --lang de-DE
    * Verify the "Quotes" appear now separated by
      different context in
      misc/translator/po/de-DE-messages.po
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c07ada6c851d492ad696250840cb16ed28dc9362
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Mar 3 13:40:03 2023 +0000

    Bug 33126: Markup error in staff interface tab wrapper
    
    This patch makes a minor correction to the tab WRAPPER directives: a
    <li> which should be </li>.
    
    The patch also modifies the example WRAPPER markup to correct an error
    and clarify usage.
    
    To test, apply the patch and test a page which has been updated to use
    tab wrappers: The about page, basket groups, library transfer limits.
    Tabs should continue to work as expected.
    
    Before the patch, the about page source will include this:
    
    <li role="presentation" class="active">
        <a href="about_panel" aria-controls="about_panel" role="tab" data-toggle="tab">
           Server information
        </a>
    <li>
    
    After the patch the closing </li> will be correct.
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4628d2e81cf97951e978ae1e18a6939767ad2b09
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Mar 9 11:35:42 2023 -0500

    Bug 33183: Error inserting matchpoint_components when creating record matching rules with MariaDB 10.6
    
    The word "offset" is now a keyword. At the very least we need to escape the fieldname with backticks.
    It would be nice to switch to Koha::Objects for this module eventually.
    
    C4::Matcher::_store_matchpoint(): DBI Exception: DBD::mysql::st execute failed: You have an error in
    your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax
    to use near 'offset, length) VALUES ('27', '1', '999'...' at line 2 at /usr/share/koha/lib/C4/Matcher.pm
    line 314
    
    Test Plan:
    1) Set up Koha with MariaDB 10.6
    2) Attempt to create a matching rule
    3) Note the error screen
    4) Apply this patch
    5) Restart all the things!
    6) Attempt to create another matching rule
    7) No errors this time
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 33de3ef9dcc8d2c0b021b2da80a2c6673cd06e82
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Mar 1 16:42:30 2023 +0000

    Bug 32713: Throw exception on unexpected x-koha-embed header
    
    This patch adds an exception to stash_embed that is thrown when we
    find an x-koha-embed header that we're not expecting.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2202f7f2c29444b5cc587e09729cbf770323d96b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 2 09:37:14 2023 +0000

    Bug 32713: Unit tests
    
    This patch adds unit tests to prove we return a 400 and an appropriate
    error message when calling an endpoint that is not defined to support
    x-koha-embed whilst passing an x-koha-embed header.
    
    Test plan:
    1) Run test prior to applying second patch and confirm it fails
    2) Run test after applying second patch and confirm it passes
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 042cba5db1ee7752304e2e03c9a7b239ffe88735
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Mar 15 15:24:32 2023 +0000

    Bug 32878: (follow-up) Exclude non_priority holds
    
    This patch filters out non_priorty holds in the on_reserve condition.
    
    Test plan
    1) Run t/db_dependant/Holds.t
    2) Note it fails without this patch
    3) Apply patch
    4) Re-run the above test, note it now passes
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 788363e4160d9d7fb7c13dd5c9822b4740573e68
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Mar 14 12:30:32 2023 +0000

    Bug 32057: (follow-up) Add INSERT IGNORE in dbrev
    
    Preventing:
    ERROR - {UNKNOWN}: DBI Exception: DBD::mysql::db do failed: Duplicate entry 'ActionLogsTraceDepth' for key 'PRIMARY' at /usr/share/koha/C4/Installer.pm line 739
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 12939c7583d4091dda639e630bb9080d008af2f1
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Feb 16 16:11:23 2023 +0000

    Bug 32878: (QA follow-up) Correct unit test
    
    After the patch we fail on renewing a not for loan item with an item
    level hold.
    
    I don't find justification for why this should be renewable, so I just
    change the test expectation
    
    This needs another QA eye
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 32c15887d89af6663d83b231af480ff36af15921
Author: Petro Vashchuk <stalkernoid@gmail.com>
Date:   Fri Feb 3 16:22:30 2023 +0200

    Bug 32878: Make it impossible to renew the item if it has active item level hold
    
    introduced in:
    73c3c5d2f10751c23156372300239d42e5957c66
    Bug 31112: (QA follow-up) Reduce database queries
    
    started from:
    8ba1a9a5345310c54d9225049d470544b56eeb11
    Bug 31112: Remove unnecessary if-clause
    
    Currently, you can renew the item even if someone already made an item level
    hold on that item. This patch changes that, making it not possible to do so.
    
    To reproduce:
    1. Checkout an item, and make another item level hold on that specific item.
    2. Renew it using the "Renew" checkbox, it should get renewed without any problems.
    3. Apply the patch.
    4. Checkbox should be gone and replaced with "On Hold" link that leads to the hold that doesn't allow you to renew the item again.
    5. "Renew all" button should not work either.
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a11621673212b0f6861eef20aa1483b99e78392f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Feb 16 15:26:07 2023 +0000

    Bug 32878: (QA follow-up) Unit test
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 375fbd1704d9f5d7d6bc729c7d2c514ccc94bb3b
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Dec 7 18:41:26 2022 +0000

    Bug 32421: Add collection column to holds to pull
    
    To test:
    
    1. Place some holds
    2. Go to Circulation > Holds to pull
    3. Notice there is not column to indicate collection ( CCODE )
    4. Apply patch and restart services
    5. Step 2 again, this time you should see a column for holds to pull
    6. Using both the Columns button and via 'Table setting' attempt to hide the column and other columns. Ensure everything is being heiiden correctly.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Bug 32421: (follow-up) Correct table settings
    
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ea4ba857d98a95b58fb075fe6b9bd74730c7c282
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Mar 14 08:58:37 2023 -0300

    Bug 32057: DBRev 22.12.00.013
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3061258f0f41c573e108c31f2b71ec14e4c0233d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Mar 14 08:48:06 2023 -0300

    Bug 32057: (QA follow-up) Add missing messages (from skeleton.pl)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 99dd9d16f0f2d5c27984cb7aaebe249ab665ce3d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Mar 14 08:43:46 2023 -0300

    Bug 32057: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1aec933e36ff6326d05a0bc69e97f013faff859b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Feb 22 13:53:35 2023 +0000

    Bug 32057: (QA follow-up) Add a simple test
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 557c09b466308afceff8e196643a0acb08286102
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Feb 22 13:50:10 2023 +0000

    Bug 32057: (QA follow-up) Remove pretty flag
    
    Not needed for storage. You can always display pretty in the
    interface (on a follow-up report).
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cf1a43e2a12fd6816799072b1edaba03095ec3fc
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Dec 20 09:21:34 2022 -0500

    Bug 32057: Replace insert query with use of Koha::ActionLogs
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1942dbe881401cce80533a5bfacba701738dcdc7
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Nov 1 06:47:35 2022 -0400

    Bug 32057: Add optional stack trace to action logs
    
    It can be useful to know where in Koha a particular logged action was generated from, and how. We should add the ability to attach a syspref controlled basic stack trace with the caller depth controlled via the syspref. We can the call caller() until the specified depth has been reached.
    
    Test Plan:
    1) Apply this patch
    2) Run updatedatabase.pl
    4) Restart all the things!
    5) Set the new syspref ActionLogsTraceDepth to a number ( e.g. 3 )
    6) Update a syspref or trigger another enabled log action
    7) Query the database: SELECT * FROM action_logs WHERE trace IS NOT NULL
    8) Note the stack trace was created!
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6d1890fc8e09be2c16677c9a0f4f71e70b3696b4
Author: Magnus Enger <magnus@libriotech.no>
Date:   Mon Dec 12 13:41:20 2022 +0000

    Bug 29354: Make overdue_notices.pl send .html
    
    If you have EmailOverduesNoEmail = Send and specify "--html somedir",
    overdue_notices.pl will send a file by email that contains partial
    HTML, as a file called attachment.txt. This patch fixes that.
    
    To reproduce in koha-testing-docker:
    - EmailOverduesNoEmail = Send
    - Make sure you have a loan that was due yesterday, by backdating the
      due date
    - Set up an overdue action to send "Overdue Notice" (ODUE) to the
      category you made the loan to above, when a loan is one day overdue
    - Run this command:
      $ sudo koha-shell -c "perl misc/cronjobs/overdue_notices.pl -v -t -html /tmp/" kohadev
    - Look at the file /tmp/notices-<DATE>.html and make sure it is a full
      HTML document, with <html>, <head>, <body> etc.
    - Create a report like this:
      SELECT message_id, letter_id, borrowernumber, subject, CONCAT( '<pre>', content, '</pre>' ) AS content,
        metadata, letter_code, message_transport_type, time_queued, updated_on, to_address, content_type, failure_code
      FROM message_queue
      WHERE subject = 'Overdue Notices'
      ORDER BY message_id DESC
    - Run the report and verify there is a line like this in the "content"
      of the newest message:
      Content-Type: text/plain; name=attachment.txt
    - A part of the "content" will be a block of several lines of gibberish
      (base64) that look something like "RGVhciAga29oYSwNCg0KQWN...". Copy
      this block of text to somewhere like base64decode.org and decode the
      text. You should see a fragment of HTML, without <html>, <head>,
      <body> etc.
    
    To test:
    - Apply the patch
    - Run overdue_notices.pl again, with the same arguments as above
    - Make sure /tmp/notices-<DATE>.html is still a full HTML document
    - Re-run the report, and make sure you now have this in the "content":
      Content-Type: text/html; name=attachment.html
    - Decode the base64 and make sure it is now a full HTML document, with
      <html>, <head>, <body> etc.
    - Re-run overdue_notices.pl as above, but replace "-html /tmp/" with
      "-csv /tmp/test.csv"
    - Make sure /tmp/test.csv and the decoded base64 from the report
      contains CSV data
    - Re-run overdue_notices.pl as above, but replace "-html /tmp/" with
      "-text /tmp/"
    - Make sure /tmp/notices-<DATE>.txt and the decoded base64 from the
      report contains no HTML
    
    Note:
    - The actual text from the different messages will be enclosed in
      <pre>-tags
    - If you have HTML in your ODUE message template and run with -v, you
      will have warnings saying "The following terms were not matched and
      replaced"
    These are due to Bug 14347, and are not adressed by the current patch.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7f3a35a917412da6fd5eb3211a0ac6ab7c869e4c
Author: Andreas Jonsson <andreas.jonsson@kreablo.se>
Date:   Mon Mar 6 16:42:05 2023 +0100

    Bug 33150: Add specific message for informing about too_soon for renewal.
    
    The message "No renewals allowed" is incorrect when it is too soon for renewal,
    this patch adds a specific error message.
    
    To test:
    - Make sure the system preference  SCOAllowCheckin is set to "allow"
    - Go to Koha administration -> Circulation and fine rules
    - Edit the rule for all items and change "No renewal before" to 1 and save.
    - Check out an item to a borrower (for instance barcode 39999000000719 to the user koha with cardnumber 42).
    - Go to self checkout (http://localhost:8080/cgi-bin/koha/sco/sco-main.pl)
    - Log in as the user (koha/koha)
    - Verify that the error message in the Renew column is "This item cannot yet be renewed."
    
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e630624e5e0d6a1c1e14e2715b152be9aa139fe6
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Mar 8 12:45:53 2023 +0000

    Bug 32684: (QA follow-up) Move too_many_lost to Patron
    
    Alternative implementation outside sub new.
    
    Test plan:
    Run t/db_dependent/SIP/Message.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 877f8ed89890d5666608749781b7ac0958900fe8
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jan 19 13:45:07 2023 -0500

    Bug 32684: Implement SIP patron status field "too many items lost"
    
    The SIP patron status and information responses always return false foe "too many items lost". It would be reasonable to check the count of lost items still checked out to the patron and compare that to a threshold set in the sip config file. Though not all libraries operate in this way, it seems like a good and reasonable implementation as long is it is properly documented.
    
    This patch adds the ability to set the SIP "too many items lost" flag
    for a patron based on the number of lost checkouts the patron has where
    the lost flag on those items is greater than the given flag value.
    
    For example, one could specify that the flag be set if the patron has
    more than 2 items checked out where itemlost is greater than 3.
    
    By default the feature is disabled to retain the existing functionality.
    If enabled, the default itemlost minimum flag value is 1 unless
    specified.
    
    Test Plan:
    1) Apply this patch
    2) prove t/db_dependent/SIP/Message.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e171d5fdd319ec9d955992c9340bb9a1530e3aaf
Author: Phil Ringnalda <phil@chetcolibrary.org>
Date:   Sun Mar 5 21:24:56 2023 -0800

    Bug 33144: Unescape text from authority lookup for advanced editor
    
    While the basic editor is happy with an array of subfields it can
    stuff into separate fields, the advanced editor needs to get a JS
    string back from the authority lookup plugin, because it is going
    to just add the whole thing as text. The string has to be HTML
    entity encoded, both to not allow XSS and just to not break the
    window, but it needs to then be unencoded before being inserted
    into the editor.
    
    Test plan:
    1. Set the system preference EnableAdvancedCatalogingEditor to
       Enable
    2. Edit any Topical Term authority, and at the end of tag 150
       subfield a, add & </script>
    3. Cataloging - Advanced editor
    4. Press return in the editor to get a new blank line, type 650
       and press tab three times, then type Ctrl-Shift-L
    5. Search for your modified authority, and click Choose
    6. Verify that the tiny popup opened by the search window finished
       its job and closed itself
    7. Verify that your 650 now shows as "‡aAbduction &
       </script>‡vDrama" rather than "‡aAbduction  &amp;
       &lt;/script&gt;‡vDrama."
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 64d3498da4c62f8a2fa3d28c7cfe8b0a9e251288
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Nov 3 11:02:21 2022 +0000

    Bug 32118: Add optional support for `:` as the modifier
    
    This patch adds optional support for using `:` as the modifier for
    invoking the 'count' method for relations as discussed.
    
    We retain support for `+` for backward compatability to prevent a
    breaking change.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 12e3e91c134d9900a9712433618ae891197500e6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 13 16:53:25 2023 -0300

    Bug 33214: (follow-up) Make tests less fragile
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 52315d60f38165195b86b49c771d1861084dc9dd
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 13 16:42:26 2023 -0300

    Bug 33214: (follow-up) Consistency on key names
    
    This patch makes GetAuthorisedValueDesc used cache keys match what we
    discussed on the bug, which seems to have been lost on some rebase and
    highlighted by failing tests.
    
    I also add some more cache flushes.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 71bf715596769577766cbf8c21972826e766e97f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 1 16:23:59 2023 +0100

    Bug 32781: Prevent import from list to fail if package does not exist
    
    This is theorical (caught when writting tests) but we need to deal with
    it.
    
    Can't call method "resources" on an undefined value at /kohadevbox/koha/Koha/BackgroundJob/CreateEHoldingsFromBiblios.pm line 94.
    
    Test plan:
      prove t/db_dependent/Koha/BackgroundJob/CreateEHoldingsFromBiblios.t
    must return green
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c3325f815fadf6ad547d23c7ca3cf54884a016ad
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 1 16:17:57 2023 +0100

    Bug 30943: Fix test
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7076e4f08757359207bf155f2480ede8af85aed6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 1 16:15:11 2023 +0100

    Bug 30943: Adjust CreateEHoldingsFromBiblios
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 632a43362f454030a1157c4fb2ed832c8331629c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Sep 7 17:35:09 2022 -0700

    Bug 30943: Simplify background jobs code using helpers
    
    This patch makes the current background jobs classes use the added
    helpers in order to simplify them.
    
    No behavior change is expected.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Rebased-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 186e21dc744cbf37c1a0266d8bd0371c6ebb4c29
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 13 15:40:32 2023 -0300

    Bug 30624: DBRev 22.12.00.012
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 790df84a135be986124e7491789146f36d00e70f
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Mar 13 12:17:32 2023 +0000

    Bug 30624: Make DB update idempotent
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 28b629b502d2ea0c617c3051dc7091d016a720a2
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Feb 28 17:04:52 2023 +0000

    Bug 30624: (QA follow-up) Use C4:Context to get permissions
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1b6cd0c703857ffcdb9bf5ff670fff0d61c5bb15
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Jan 24 16:50:39 2023 +0000

    Bug 30624: Adjust number of tests
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b120dffdcb2bae32e1c4fe029f68ba917a229e95
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Dec 14 21:53:18 2022 +0000

    Bug 30624: Unit tests
    
    Signed-off by: Bob Bennhoff/AspenCat Team
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e6c49d642ff8489e7e60e74fba993d48dd79498a
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Dec 13 20:59:50 2022 +0000

    Bug 30624: Add loggedinlibrary permission and DB update
    
    To test:
    1. Apply patch, updatedatabase, restart_all
    2. Have a user with superlibrarian privileges ( User1 )
    3. Have a user who has staff access and circulate privileges but is not a super librarian. ( User2 ) Make note of this users home library
    4. Turn on the system preference 'CircSidebar'.
    
    -MAIN log in ( auth.tt )
    5. As User1, go to the main login screen and try logging in. You should be able to log in AND you should be able to properly chnage your branch BEFORE logging in.
    6. As User2, to to the main login screnn amd try logging in. You should be able to but if you try and switch your libraray to anything beside the user's home branch it will not work. You will be logged in at your home branch.
    7. For User2, set the new top level permission 'Allow staff to change logged in library (loggedinlibrary).
    8. Now you should be able to successfully switch libraries before log in.
    9. Turn the 'loggedinlibrary' permission back off for User2.
    
    -AFTER log in-
    10. With User1, click on your name/branch in the top right, you should see the the link 'Set library' at the top. If you turn on 'UseCirculationDesks' the link will be 'Set library and desk'.
    11. With User2, click on your name/branch in the top right. If you have 'UseCirculationDesks' on, you should see 'Set desk', otherwise you should see nothing.
    12. Repeat step 7.
    13. NOw if you click on your name/branch in the top right, you should see the the link 'Set library' at the top. If you turn on 'UseCirculationDesks' the link will be 'Set library and desk'.
    14. Repeat Step 9.
    
    -CircSideBar-
    15. With 'CircSideBar' turned on, go to any ciculation page (Holds queue, Holds to pull, Holds awaiting pickup) with User1. You will see the 'Set library' link. If 'UseCirculationDesks' is on you will see a 'Set library and desk'.
    16. Try with User2 and you will not see a 'Set library' link. If 'UseCirculationDesks' is on you will see a 'Set desk' link.
    17. Repeat step 7.
    18. For with User2 you go to any ciculation page (Holds queue, Holds to pull, Holds awaiting pickup). You will see the 'Set library' link. If 'UseCirculationDesks' is on you will see a 'Set library and desk'.
    19. Repeat step 9.
    
    -Set library page-
    20. Go to the set library page (http://localhost:8081/cgi-bin/koha/circ/set-library.pl) with User1. You will see a dropdown for 'Set library'. Make sure you can change your library successfully.
    21. Go to the set library page (http://localhost:8081/cgi-bin/koha/circ/set-library.pl) with User2. You should NOT see see a dropdown for 'Set library'.
    22. Repeat step 7.
    23. Go to the set library page (http://localhost:8081/cgi-bin/koha/circ/set-library.pl) with User2. Now you should see a dropdown for 'Set library'.
    
    Signed-off by: Bob Bennhoff/AspenCat Team
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit db8261ef5e921de51e6fce0bb3a93f5c3349d040
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 13 14:29:18 2023 -0300

    Bug 33214: Make tests use random data and clear the cache
    
    This trivial patch removes some wrongly hardcoded bits, and makes the
    tests also clear the cache before and after being run.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a8daacac2c0e80c70d3665a2016cbb20b16bcf5e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 13 15:06:44 2023 -0300

    Bug 32734: (QA follow-up) Make use of $c->objects->to_api
    
    This is using plain `$biblios->to_api` but as of bug 33080, the new
    helper should be used instead. This patch fixes that.
    
    To test:
    1. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/biblios.t
    => SUCCESS: Tests pass!
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: Tests pass!
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 79e3fd1640dd2dc96f9157745224a84c4e0cf632
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 13 14:58:21 2023 -0300

    Bug 32734: (QA follow-up) Remove stray method
    
    On bug 33083 we introduce a better way to implement a reusable method
    for the same functionality.
    
    This patch just removes the one in `Koha::Biblios` and the result should
    be the same as the one inherited from  `Koha::Objects::Record::Collections` will be picked instead.
    
    To test:
    1. Run:
       $ prove t/db_dependent/Koha/Biblios.t \
               t/db_dependent/api/v1/biblios.t
    => SUCCESS: Tests pass!
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: Tests pass!
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a4fb1ca3d147dfe2757bba10225088db4236d430
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Thu Feb 16 22:17:43 2023 -0300

    Bug 32734: Add REST endpoint to list biblios
    
    This patch adds an endpoint to list biblios
    
    To test:
    1. apply patch
    2. enable basic auth
    3. call to GET /api/v1/biblios with the following Accept headers:
     * application/json
     * application/marcxml+xml
     * application/marc-in-json
     * application/marc
     * text/plain
    4. notice how data changes with each Accept header
    5. prove t/db_dependent/Koha/Biblios.t t/db_dependent/api/v1/biblios.t
    6. sign off
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Hammat Wele <hammat.wele@inlibro.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2055c84a9583cc53fc71f054ccaa7eea1d559aae
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Mon Feb 27 19:10:31 2023 -0300

    Bug 33083: Add a generic class to handle methods for collections of records
    
    To test:
    1. Apply patch
    2. prove t/db_dependent/Koha/Objects/Record/Collections.t
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b4c9a6cfe23a47cd9a3cb5c6a74c51b36dc15855
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 10 16:34:26 2023 +0000

    Bug 30920: (follow-up) Manually flush caches in tests
    
    We can't rely on our cache flushing in either 'store' or 'delete'
    triggers as t/lib/TestBuilder::build_object skips the Koha::Object store
    and uses direct DB inserts in preference.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4e8d76d6f98d0f28d6f1804a1435da2f4c229441
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 10 16:33:44 2023 +0000

    Bug 30920: (follow-up) Cleanup warning from C4::Biblio::GetAuthorisedValueDesc
    
    We simply return early and empty if $value is not passed
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f7164385559002216810656fb51f89a3b2892a2b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 10 15:26:45 2023 +0000

    Bug 30920: (follow-up) Flush on delete
    
    We missed the flush on delete triggers for the various caches introduced
    here.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7d9d79566991dadfaca1a058989d03358a1df6ce
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 10 15:11:51 2023 +0000

    Bug 30920: (follow-up) Cache key fixes
    
    We missed a few places, namely the flushes, when renaming the cache
    keys.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a44f03c7156cce4ff1ae55da3772f98e7b5e89b6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Mar 10 09:07:26 2023 -0300

    Bug 30920: (QA follow-up) Use get_dirty_columns to avoid DB query
    
    We can rely on DBIC's get_dirty_columns to check if the descriptions
    have changed, and set things for flushing without an extra DB query.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dde86f08fcc359d57dc94ca5b218ddfb791c342c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jun 17 13:36:13 2022 +0000

    Bug 30920: (follow-up) Add missing use
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ab866f040dc72da28ed59f3bf16505bfba47ed21
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu May 26 16:31:30 2022 +0100

    Bug 30920: Add caching to GetAuthorizedValueDesc
    
    This patch adds caching to C4::Biblio::GetAuthorisedValueDesc for performance.
    
    We cache each hash involved in the method use for description lookup and
    we're careful to clear said caches appropraitely on changes.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4438c4da2e742c9383f30ea9850b8f0a1a3b5712
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Fri Dec 23 18:38:04 2022 -0300

    Bug 31801: Add REST endpoint to modify a biblio
    
    To test:
    1. Apply patch
    2. Set RESTBasicAuth preference to true
    3. Pick a biblio to modify, and modify it's marc record
    4. Make a PUT request to /api/v1/biblios/:biblionumber with one of the following content type header
      - application/marcxml+xml
      - application/marc-in-json
      - application/marc
    5. Add the following header in the request 'x-framework-id: <framework id>'
    5. Check that the biblio was modified
    6. Sign off
    
    Signed-off-by: Hammat Wele <hammat.wele@inlibro.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 587615fd9f63e74fdb42f7832845fe52e3f17a74
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 13 14:39:03 2023 +0000

    Bug 33211: Fix failing test
    
    This patch updates the selector to use the full class and find the text
    type as well
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 14a2cc60a404709edc97f6daed8ad8e00dd884e8
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Dec 22 20:15:09 2022 -1000

    Bug 32519: In Elasticsearch mappings table use of search field name and label
    
    In Elasticsearch mappings table, in tabs for mappings we should add search field name in addition to label ; in order to find them when searching using DataTable search field. This is very useful when debugging.
    
    Also the lines are sorting alphabetically by search field name.
    So I propose to display name and label between parenthesis.
    And also add label to the form in last line.
    
    By default label equals name so I display label only if different from name.
    
    Test plan :
    1) Go to : Administration > Search engine configuration (Elasticsearch)
    2) In first tabe edit a line to change label, for example : author => Auteur
    3) Save
    4) Go to second tab
    5) Check you see a line with 'author (Auteur)' and lines with only name when label equals name
    6) Look at last line (addition form)
    7) Check you see in combobox : 'author (Auteur)' and lines with only name when label equals name
    
    Signed-off-by: Solene Ngamga <solene.ngamga@inLibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b27dd883ca19eb1594507271aa7b8d1bd7caf328
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Feb 1 11:58:04 2023 +0000

    Bug 32952: Standardize action fieldsets in authorities, cataloging, and circulation
    
    This patch updates some templates in authorities, cataloging, and
    circulation so that fieldsets with the "action" class are placed outside
    the form's main fieldset.
    
    To test, apply the patch and check the following pages to confirm that
    changes to form structure look correct:
    
    - Authorities -> Authority search -> Merge
    - Catalog -> Search -> Merge records
    - Catalog -> Bibliographic record details -> Edit -> Attach item
    - Circulation -> Check out to patron -> Batch check out
    - Circulation -> Overdues -> Sidebar filter
    - Circulation -> Holds to pull -> Sidebar filter
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5e6992b600f0b1ee655429e35c6be49416ccfaca
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jan 19 19:04:53 2023 +0000

    Bug 32683: Convert header search tabs to Bootstrap
    
    This patch updates all search header include files so that they have
    Bootstrap tab markup instead of jQueryUI. jQueryUI-related JavaScript is
    updated to work with Bootstrap.
    
    To test, apply the patch and rebuild the staff interface CSS. Clear your
    browser cache if necessary.
    
    Test that keyboard shortcuts work correctly: Alt-U for circulation,
    Alt-R for returns, Alt-W for renewals, and Alt-Q for search. Each
    shortcut should either activate the correct search tab (if present on
    the page) or redirect you to that page.
    
    Cursor focus should be automatically placed in expanded header search
    form, whether it be on page load or when switching tabs.
    
    Test search header forms with additional search options work correctly:
    Clicking the "settings" icon should expand the panel with additional
    fields.
    
    Test at least one page which uses each include file:
    
    - acquisitions-search.inc
      - Acquisitions and related pages
    - adv-search.inc
      - Advanced catalog search
    - authorities-search.inc
      - Authorities and related pages
      - Check that the right tab is preselected after each kind of search,
    e.g. a search by "Main heading" should return a search results page
    where the "Main heading" tab is preselected.
    - budgets-admin-search.inc
      - Administration -> Budgets
    - cat-search.inc
      - Catalog search results, bibliographic details, etc.
    - cataloging-search.inc
      - Cataloging home page and cataloging search results
    - checkin-search.inc
      - Circulation -> Check in
    - circ-search.inc
      - Circulation -> Check out
    - cities-admin-search.inc
      - Administration -> Cities and towns
    - contracts-admin-search.inc
      - Acquisitions -> Vendor -> Contracts
    - currencies-admin-search.inc
      - Administration -> Currencies
    - desks-admin-search.inc
      - Administration -> Desks (must have UseCirculationDesks enabled)
    - erm-search.inc
      - ERM (must have ERMModule enabled)
    - home-search.inc
      - Staff interface home page
    - letters-search.inc
      - Tools -> Notices
    - patron-search-header.inc
      - Patron details, patron accounting, etc.
    - patrons-admin-search.inc
      - Administratoin -> Patron categories
    - prefs-admin-search.inc
      - Administration home page and system preferences
    - serials-search.inc
      - Serials and related pages
    - suggestions-add-search.inc
      - Not used
    - z3950-admin-search.inc
      - Administration -> Z39.50 servers
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 347d8787dc9aa69d6a3265ef61d42014290720f2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Mar 7 08:26:51 2023 -0300

    Bug 33080: Adapt other use-cases
    
    This patch adapts the other controllers that rely on
    add_pagination_headers outside of `objects.search`.
    
    To test:
    1. Apply this patchset
    2. Run:
       $ ktd --shell
       $ prove t/db_dependent/api/v1/* \
               t/db_dependent/Koha/REST/Plugin/Objects.t \
               t/db_dependent/Koha/REST/Plugin/Pagination.t
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ad83d2e07d3c2c28e962b1a2e8d04b6f25a4a868
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Mar 3 09:28:14 2023 -0300

    Bug 33080: Allow pagination to be built from stashed values
    
    The way the old `objects.search` was build implied several totals were
    calculated there, and passed to the `$c->add_pagination_headers` helper.
    
    With the introduction of `objects.search_rs` and the ability of doing
    things to the resultset afterwards, it felt like out of place to have
    the pagination headers be implicitly set inside `objects.search_rs`.
    
    This patch makes the search_rs stash some required values (from the original request) and
    makes `add_pagination_headers` accept those values. This way other
    callers can still build their own pagination values, while allowing this
    simplified implementation.
    
    Full-stack tests still pass, and the helper tests are moved to the
    `db_dependent` section and are now more meaningful as well
    
    To test:
    1. Apply this patch
    2. Run:
       $ ktd --shell
       $ prove t/db_dependent/Koha/REST/Plugin/Pagination.t \
               t/db_dependent/api/v1/
    => SUCCESS: Tests pass! Nothing broken!
    3. Sign off :-D
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 67a81d1328ad5f8720b3bf350ac494a0cd26f516
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jan 6 12:49:14 2023 -0300

    Bug 33080: Introduce objects.search_rs, objects.find_rs and objects.to_api
    
    This patch introduces the mentioned helpers, and reimplements
    objects.search and objects.find in terms of them.
    
    To test:
    1. Apply patch
    2. restart_all
    3. Check that any API that uses objects.search helper is still running
       (GET /api/v1/items, GET /api/v1/holds, etc)
    4. prove t/db_dependent/Koha/REST/Plugin/Objects.t
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit faf66db7b15148b8576fd9bb4e85e1fce30bb3c1
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Feb 15 14:58:33 2023 +1300

    Bug 32021: Don't show 'appear in position' for Pages
    
    The 'Appear in position' option isn't relevant for Pages, so we should
    hide it when not adding or modifying a Page.
    
    To test:
    
    1) Add a new Page
    2) Confirm the 'Appear in position' option does not show
    3) Add a new News item or HTML customisation
    4) Confirm the 'Appear in position' option DOES show
    
    Sponsored-by: Catalyst IT
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b9123af286cd7f6ba11b1aeecd62c00f6d6523ed
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Fri Sep 23 11:16:22 2022 +1200

    Bug 31611: Clearly highlight biblios that cannot be deleted in the Batch record deletion tool
    
    Test plan:
    1. Apply patch
    2. Check out an item
    3. Go to: 'Cataloguing' > 'Batch record deletion'
    4. Into the 'Enter a list of record numbers' area paste in the
    biblionumber belonging to the checked-out item and that of a biblio without checked out items
    5. Submit the form
    6. Observe the row of the biblio with checked-out items is highlighted yellow, with a
    red cross in the first column
    7. Hover over the red cross to see the reason why the biblio cannot be
    deleted
    8. Observe the row of the biblio without checked-out items is not
    highlighted yellow, and does have a checkbox in the first column
    9. Click 'Delete selected records'
    10. Confirm the biblio without checked-out items is successfully deleted
    
    Sponsored-by: Toi Ohomai Institute of Technology, New Zealand
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c004913b524ac37608c218f519389d890392da3b
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Thu Sep 22 19:15:25 2022 +1200

    Bug 31611: Clearly highlight items that cannot be modified/deleted in the Batch item tools
    
    Test plan:
    1. Apply patches
    2. Check out an item with a different home branch than the library
    you're logged in as
    3. Go to: 'Cataloguing' > 'Batch item deletion'
    4. Into the barcode list area paste the checked-out item's barcode and the barcode of a non-checked out item (with the same home library as the branch you're logged in as) and submit the form
    5. Observe in the table that loads the row containing the checked out item is highlighted
    yellow, and it has a red cross in the first column.
    6. Hover over the red cross to see the reason why you cannot delete the
    item appears
    7. Observe the non checked out item has a checkbox and is not
    highlighted yellow
    8. Click 'Select all' and 'Clear all' links and notice the display of
    the checked out item remains unchanged
    
    9. Change 'IndependentBranches' syspref = 'yes'
    10. Log into the staff client as a patron with only the '(catalogue)', '(editcatalogue)', and '(tools)'
    permissions selected
    11. Go to: 'Cataloguing' > 'Batch item modification'
    12. Enter the checked-out item's barcode and a non-checked out item's
    barcode and submit the form
    13. Observe the table row for the checked out item is again highlighted
    yellow, with a red cross.
    14. Hover over the red cross and observe the text 'Cannot edit' is shown
    15. Observe the non-checked out item is not highlighted yellow and does
    have a checkbox
    
    Sponsored-by: Toi Ohomai Institute of Technology, New Zealand
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b5d6ccdf604c82beef627360c45f4cad78739f1b
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Fri Dec 23 17:15:29 2022 -0300

    Bug 31800: Add REST endpoint to add a biblio
    
    To test:
    1. Apply patch
    2. Set RESTBasicAuth preference to true
    3. Make a POST request to /api/v1/biblios with one of the following content type header
      - application/marcxml+xml
      - application/marc-in-json
      - application/marc
    4. Add the following header to the request: "x-framework-id: <framework id>"
    5. Check that the biblio is created
    6. Sign off
    
    Signed-off-by: Jan Kissig <jkissig@th-wildau.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 65711c9daba5c07ffba5f7cfa6085be2116a75f8
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Mar 10 11:33:02 2023 -0300

    Bug 33161: (QA follow-up) Fix api_strings_mapping inconsistency
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 546c47ab3fcd380ee3f7be5902fd969d0ebbc3a8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Feb 7 13:40:29 2023 +0000

    Bug 32886: Set focus for cursor to Code when adding a new restriction
    
    This patch adds the "focus" class to the form for defining a new patron
    restriction so that the cursor focus is automatically added.
    
    To test, apply the patch and go to Administration -> Patron restrictions
    -> New restriction.
    
    The cursor should automatically move to the "Code" input field.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5c86cacfde4f4a4957148e10758ccf0a9b1b244a
Author: Frédéric Demians <f.demians@tamil.fr>
Date:   Sat Dec 24 10:52:05 2022 +0100

    Bug 29935: Archived suggestions filter always visible
    
    In suggestion sidebar menu, make visible 'Include archived' checkbox
    without having to develop a filter.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 89d374600702f1dea792aa8713e86464bae88cf1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 2 11:04:23 2023 +0100

    Bug 32991: Don't display breadcrumb if pref is off
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e4bb554eb5adf30a40dcd54153b4d24618b9164d
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Wed Mar 1 12:56:55 2023 -0300

    Bug 32991: Remove _is_loading warning, and improve 'ERMModule' disabled warning
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dc40b5dd08a60657e4df9f966cf0aa53644ce927
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 28 12:21:54 2023 +0100

    Bug 32991: Add cypress tests for the dialog box
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8cee1f287d81eb1693c1bde564a0a1b6d85affd2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 28 11:48:55 2023 +0100

    Bug 32991: Don't remove all messages when confirm box is closed
    
    If we cancel the confirmation box we should not clear all the messages
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5709727aae2ea1687506752fde2f91d504a91eca
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 28 11:21:48 2023 +0100

    Bug 32991: Flag the deletion messages as displayed already
    
    Or they will be displayed again on the next view
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 48b39533f6855e8966ce8704985fbb01d99ced51
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Feb 24 16:06:31 2023 +0000

    Bug 32991: Fix cypress tests. Added new test for when deleting from show view.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f98c63820f4fdddfc0402f2911c397ba735f57b5
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Feb 27 15:22:48 2023 +0000

    Bug 32991: Agreements: Add delete dialog to show. Removed FormConfirmDelete component and routes
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0e63e366ca0094527699eb4f4b051d0e975e2d1f
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Feb 24 17:01:15 2023 +0000

    Bug 32991: Licenses: Add delete dialog to list and show. Removed FormConfirmDelete component and routes
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dbb606983c9524efb390a100111e8f2214e09fa0
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Feb 24 18:30:54 2023 +0000

    Bug 32991: Local Packages: Add delete dialog to list and show. Removed FormConfirmDelete component and routes.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 70a4d4e0b42e7a1b789565806c292b691fa3481b
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Feb 27 11:08:35 2023 +0000

    Bug 32991: Local titles: Add delete dialog to list and show. Removed FormConfirmDelete component and routes.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a8d6d80ad58f864bab7513d7d6f57275984dba39
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Feb 27 15:09:41 2023 +0000

    Bug 32991: Allow for a confirmation title, message, accept_label and cancel_label in Dialog.vue
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5ceccfe0ad22b7773acf281e769b6b921d8f2610
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Feb 24 17:10:03 2023 +0000

    Bug 32991: accept is a callback, rename accept to accept_callback
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 46a72d54a0a05134c52378d7b4a5d9769162a47b
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Feb 24 11:32:29 2023 +0000

    Bug 32991: Style the dialog to be in line with rest of Koha; Fix duplicate HTML element ID
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 754c9f2862c63bdfc03a432e498b1b68d4c0c856
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 17 11:45:43 2023 +0100

    Bug 32991: Add a confirmation message
    
    Looks easier to have a separate variable for the confirmation box, and
    easier for styling as well.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0b380ecfa3f462f52758ceadb4e4161c7806dc60
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 17 11:26:38 2023 +0100

    Bug 32991: Improve our Dialog component
    
    This is picking some improvements made by Agustin on bug 32607.
    This patch is only a POC and we should apply this change to the
    different delete route.
    
    We will then remove the *FormConfirmDelete components, and the /delete routes
    
    Initially I wanted to have the same behaviour as in other areas of Koha,
    and have a separate view for the deletion step. But it's too much
    overhead for not much gain.
    
    Additionally we will have to remove messages.js, the aim of this file
    was to import the methods to add messages very easily (only 1 import
    line). Now we will need 2 lines (it was more when I added messages.js,
    because I didn't inject the store). Not a big deal.
    
    Finally, there is something weird in Main.vue we need to fix. The
    console is showing a warning
    "[Vue warn]: setup() return property "_is_loading" should not start with "$" or "_" which are reserved prefixes for Vue internals."
    
    I had a hard time to display this "loading" modal when the app is
    loading all the things it needs. Pinia/store is not available as we are
    accessing the methods/actions too earlier. It will be good to fix that
    before we decide to move forward with this approach.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Agustín Moyano <agustinmoyano@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 87ae8b21b4f1772706ec62292d13376eed4b4a87
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Feb 15 23:05:12 2023 +0000

    Bug 32977: Add callnumber column to boraccount.tt
    
    To test:
    1. Apply patch, restart_all
    2. Create a manual invoice for an item that has an item.itemcallnumber
    3. Go to the transaction tab and see that the particualar accountline contains a callnumber in the new callnumber column.
    4. Make sure you can hide the column, and other columns, correctly via Table settings or via the Column  icon.
    
    Signed off by: Michael Perry (Siskiyou County Library)
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1c8c90611967bd667e1e5e86f871541564d66b4b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jan 30 15:45:32 2023 +0000

    Bug 32746: Standardize structure around action fieldsets in acquisitions
    
    This patch updates acquisitions templates so that fieldsets with the
    "action" class are placed outside the form's main fieldset. A couple of
    minor changes have been made to related CSS.
    
    To test, apply the patch and rebuild the staff interface CSS. Go to
    acquisitions and check the following pages to confirm that changes to
    form structure look correct:
    
    - Open the "Late orders" page from the left-hand sidebar menu and check
      the form in the sidebar.
    - Open the "Orders search" form in the search header and submit the form
      without specifying any search criteria. This should bring up a blank
      orders search form.
    - Open the "Invoices" page from the left-hand sidebar menu. Check the
      form in the sidebar.
      - Perform an invoice search which will return results.
      - View one of the invoices returned by your search.
      - On the invoice detail age, the "Save" button associated with the
        invoice details at the top should look correct.
      - There should be a box below that with the heading "Adjustments" and
        a link to add an adjustment.
      - When you click "Add an adjustment," a form should be displayed with
        the correct controls at the bottom. Clicking "Cancel" should hide
        the form.
      - Click the "Manage invoice files" link, and check the form on that
        page.
    - Locate a vendor and view its details.
      - Check the "Uncertain prices" page, linked from the menu in the
        left-hand sidebar.
      - Open the "Baskets" page from the left-hand sidebar. Click the "Add
        to basket" button for one of the existing baskets.
      - Click "From existing orders (copy)". Check that this form looks
        correct.
      - Open the "Basket groups" page from the left-hand sidebar menu.
        - Click "New basket group" and check that form.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a651ff50a6819396cc24c5f6bc47110cdd001873
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Feb 27 23:45:12 2023 +0000

    Bug 33063: Make sure correct subgroup is pre-selected when duplicating reports
    
    When the 'Duplicate' option for reports was used, the all options
    would be copied correctly to the new report, but the report sub group.
    
    In this case the templates were created correctly, but the JavaScript
    to create the correct pull downs for each group, overwrote the
    the selection.
    
    To test:
    * Create a some reports with different groups and subgroups and without
    * 'Duplicate' your reports and verify that the sub group will always stay empty
    * Apply patch
    * Verify the correct sub group is now always selected
    * Edit/Add some reports to make sure the group/subgroup controls still
      work as expected
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 65374826d2c749973c08722e94e7647251bbf4da
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Feb 21 19:52:28 2023 +0000

    Bug 33031: Update OPAC lists page to use Bootstrap markup for tabs
    
    This patch updates the OPAC lists page with Bootstrap markup for the
    static tabs used to link to private and public shelves. These tabs are
    not dependent on JavaScript.
    
    To test, apply the patch and click "Lists" -> "Public lists" in the
    OPAC. The "Your lists" and "Public lists" tabs should look correct, and
    each should link to the correct view.
    
    Signed-off-by: Jacob O'Mara <jacob.omara@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9a960b39787970da5bbe6609ae80dcfda71bde88
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Mar 10 10:56:21 2023 -0300

    Bug 31858: (QA follow-up) Fix number of tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b5e462b5c4631c0fb58aaa40c3f2102bd5fa32e5
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Wed Oct 19 14:36:18 2022 +0000

    Bug 31858: unit tests
    
    Signed-off-by: Marius Mandrescu <marius.mandrescu@inLibro.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 09ceb26b572ac6a0a0f0bc2a5172327d26bc641f
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Wed Oct 19 11:42:19 2022 +0000

    Bug 31858: add TT syntax for ACQORDER notices
    
    Test Plan:
        1) Set your ACQORDER notice content to:
            [%- USE Price -%]
            [% bookseller.name %]
            [% FOREACH order IN orders %]
            Ordernumber [% order.ordernumber %] ([% order.biblio.title %] - [% order.biblio.biblioitem.publicationyear %]) (quantity: [% order.quantity %]) ($[% order.listprice | $Price %] each).
            [% END %]
            Thank you,
            [% branch.branchname %]
        2) Set up a vendor with an email, set contact for email so the "E-mail
            order" button shows on a basket for that vendor
        3) E-mail the basket
        4) Check the content is correct
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0ef8e6aff959c54622897f77eded0c3ae6772bf4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Feb 28 16:40:34 2023 +0000

    Bug 33090: Add page-section to accountline-details
    
    This patch adds page-section containers to the accountlines details
    display page.
    
    Note: This patch contains whitespace changes, so use diff accordingly.
    
    To test, apply the patch and locate a patron with charges on their
    account (lost item fee, account renewal fee, overdue fine, etc).
    
    - From the patron detail page, click the "Accounting" tab in the sidebar
      menu.
    - Click the "Transactions" tab.
    - Click the "Details" button for an individual charge.
    - On the transaction detail page, confirm that the page sections look
      correct.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6f6f7e15f8c391e031a1ec67bbcedfe8d5533d1b
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Mar 8 12:04:57 2023 +0000

    Bug 33152: Add focus to search field
    
    This patch adds focus to the search field for a new SQL report from
    mana.
    
    Test plan:
    1) Navigate to Reports > Create from SQL
    2) Click on the new report dropdown and select "New SQL from Mana"
    3) Observe that there is no focus on the input and the user needs to
       click to start typing
    4) Apply patch
    5) Repeat steps 1-2
    6) There should now be focus on the input and typing can be started
       immediately
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b70ce9dcadd3fdfaad89ea27dc7bdb10acf4880c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 6 17:39:14 2023 -0300

    Bug 31793: (QA follow-up) Require editauthorities flag
    
    This patch makes the route require the right permissions. Tests are
    adjusted to reflect this new situation.
    
    To test:
    1. Apply this patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/authorities.t
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b9d8e6be11dd6404c101ba328c45e141b2f9d37f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 6 17:36:38 2023 -0300

    Bug 31793: (QA follow-up) DelAuthority doesn't return errors
    
    DelAuthority doesn't return an error, so the only possible error
    conditions are exceptions, that are unknown for now. Removing the error
    checking control structure and the 409 error returning, which is
    inherited from DelBiblio's call on the biblios endpoint.
    
    It will now just return a 500 in the event of an unhandled internal
    error.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 36a86d747830cbeba8126b618bb8b6a040c931b4
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Wed Dec 7 12:05:35 2022 -0300

    Bug 31793: Add REST endpoint to delete authorities
    
    To test:
    1. Apply patch
    2. Set RESTBasicAuth preference to true
    3. Get the id of an authority
    4. Make a DELETE request to /api/v1/authorities/{authid}
    5. Check that the authority was deleted
    6. Sign off
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 35dd17735f4e5b39b0a56a3d72d010fd7d176a32
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Mar 9 19:23:03 2023 -0300

    Bug 33161: Unit tests
    
    To test:
    1. Apply this patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/Koha/Item.t
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Edit: added missing test for unmapped attribute
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7bde825a33cbc49a2363909c20adb74c6e8c6931
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Mar 9 11:36:27 2023 -0300

    Bug 33161: (follow-up) Remove stray variables and fix POD
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bbff26575f59e325ba6a3db1d5b986f5356fe2ae
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 9 13:14:04 2023 +0000

    Bug 33161: Clarify method names
    
    The api_strings_mapping method isn't really only about api strings.. we
    deal with database fields in and out.. we just happen to then use those
    in to_api to map in the api.
    
    This patch simply renames the standard method whilst we're still early.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 04736dd0bafbef608e56e8cd4dae63bb4eb93fe6
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 9 12:43:05 2023 +0000

    Bug 33161: (follow-up) Consistent use of db fields throughout
    
    We should stick to DB field names as long as possible to allow re-use
    and only convert to api field names via to_api_mapping at the last
    moment inside the parent to_api function.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dab02607028fadc0e8864102a9a59c7e8fb6c775
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Mar 7 20:51:35 2023 -0300

    Bug 33161: Add +strings support to GET /items and /items/:item_id
    
    This patch introduces the `api_strings_mapping` method to the
    *Koha::Item* class, and makes the API spec for the following routes:
    
    * GET /items
    * GET /items/:item_id
    * GET /acquisitions/orders
    
    accept the new `+strings` parameter that can be passed through the
    `x-koha-embed` header and was introduced by bug 26635. In the case of
    /acquisitions/orders, you will need to use
    
    x-koha-embed: items+strings
    
    I introduce it here to highlight the flebility we introduced with bug
    26635.
    
    The `api_strings_mapping` method has its roots on the cool
    `columns_to_str` method already present. The main differences:
    
    * It is aware of the `public_read_list` for attributes so no hidden
      information is exposed.
    * Attribute names get mapped for consistency with the API (e.g.
      `homebranch` is converted into `home_library_id`, etc).
    * The data structure it returns includes information about the source
      for the descriptions (e.g. it it is an authorised value, then `type`
      will be `av`, and the related category information is returned so
      dropdowns and such can be built. The same goes for other types as
     `library`, `item_type` and `call_number_source`.
    
    To test:
    1. Apply this patch
    2. Reload everything
    3. Play with your favourite REST tool (e.g. Postman)
    4. Try:
    GET http://localhost:8081/api/v1/items
    x-koha-embed: +strings
    => SUCCESS: You get a list of items, they include the new _strings
    structure, and the contents make sense!
    5. Repeat with a specific item:
    GET http://localhost:8081/api/v1/items/14
    x-koha-embed: +strings
    => SUCCESS: It all makes sense!
    6. Sign off :-D
    
    Sponsored-by: Virginia Polytechnic Institute and State University
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a2fa4fcc03583ef3e6a6a299b4c0e0f3145ca32d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 3 20:41:21 2023 +0000

    Bug 3831: Add a warning to about page when there is no FA framework
    
    The feature is effectively disab;ed throughout Koha when this framework
    is deleted. There do not appear to be any other side effects.
    
    We should report this on the about page for informatinal purposes
    
    To test:
    1 - Apply patch
    2 - Check about page, no change
    3 - sudo koha-mysql kohadev
        UPDATE biblio_framework SET frameworkcode = 'FB' WHERE
        frameworkcode = 'FA'
    4 - Refresh about page
    5 - Note new warning
    6 - sudo koha-mysql kohadev
        UPDATE biblio_framework SET frameworkcode = 'FA' WHERE
        frameworkcode = 'FB'
    7 - Refresh about page
    8 - No warning
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bb3fecd0461e91df9a907a85ea58bc5100ad3885
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Mar 10 05:23:24 2023 +0000

    Bug 33189: Make plugin upload look for .kpz files in file picker
    
    This change configures the file picker to look for *.kpz files instead
    of *.* files, which makes it more convenient to locate .kpz files
    for upload when uploading plugins.
    
    Test plan:
    0. Apply patch
    1. Go to http://localhost:8081/cgi-bin/koha/plugins/plugins-upload.pl
    2. Click on "Choose file"
    3. Note that the file type in the box at the bottom right of the screen
    defaults to "KPZ File (*.kpz)
    4. If you navigate to a directory that contains .kpz files (like Downloads),
    you'll now see directory folders and .kpz files.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e4665cc2baabe6bdcd1260492401f07e5f6e3d4f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 22 16:31:54 2023 +0100

    Bug 32675: Fix guarantor selection when simple quote present
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 35e117fb91e794d77b47f8668c0f9e1a1ddd4e63
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 8 18:49:57 2023 +0000

    Bug 33173: Save and continue button in standard cataloging module broken
    
    To test:
    1 - Edit a record in the standard editor
    2 - Click on to tab 2
    3 - Click 'Save and continue'
    4 - Error: tab is not defined
    5 - Apply patch
    6 - Reload page and try again
    7 - Fixed!
    
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fafccfd76f263445205febab0cfa5a1c8bffb934
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Feb 9 15:14:52 2023 +0000

    Bug 32924: (follow-up) Add left margin to 'Show mine only' label
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2adcd3b828c3bb6518933290efe0c0de1d8f61f9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 9 14:00:56 2023 +0100

    Bug 32924: Add the ability to filter agreement by logged in user
    
    This patch adds a new filter checkbox at the top of the agreement list
    "Show only mine" that will display agreements linked with the logged in
    user.
    
    Test plan:
    Create several agreements, add your current logged in user to some of
    them
    On the agreement list view us the new checkbox to filter the agreements
    and see those where you are involved in.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 79e4aabc31c85fc32f2f09599818fd7b4dff117f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 7 13:55:19 2023 +0100

    Bug 33155: Fix category and library filters in patron search header
    
    Caused by
      commit f1925cf89dbc1039fc48abfabad1472289387148
      Bug 7380: Rename filter to avoid confusion
    
         [% IF categorycode %]
    -        $("#categorycode_filter").val("[% categorycode %]");
    +        $("#categorycode_filter").val("[% categorycode_filter %]");
         [% END %]
         [% IF branchcode %]
    -        $("#branchcode_filter").val("[% branchcode %]");
    +        $("#branchcode_filter").val("[% branchcode_filter %]");
         [% END %]
    
    Forgot to rename the vars in the IF statements
    
    Test plan:
    Go to the Koha mainpage
    Click "Search patrons" in the headers
    Open the filters
    Select something for library and category, search
    => The values must be picked for the patron search
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 96f5f80bdd567a306ec342ceee42cfac928144cb
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Mar 7 14:36:18 2023 +0000

    Bug 31028: (follow-up) Remove special:undefined
    
    There's a cleaner way to achieve this now using `additional_filters` and
    passing a function.
    
    This patch removes the `special:undefined` handling, replacing it with a
    single field filter passed as a function via additional_filters.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9f8a1e2c2a126e84badcf005e7d30632998cbf7e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Mar 7 13:30:02 2023 +0000

    Bug 31028: (follow-up) Fix executable bit
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ca3626294b3dfbba5ec90e585fe78705e026740b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Mar 7 13:24:50 2023 +0000

    Bug 31028: (follow-up) Fix missing whitespace on patron-title
    
    This patch restores some missing whitespace in the patron-title include.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8e1556b3fcede038d3a7c38d33d884522d70fc7d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Mar 7 12:12:48 2023 +0000

    Bug 32558: (QA follow-up) Move ForkManager to required
    
    Thx Martin Renvoize for noting this.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit be0056f66e925b3400dcd3fe40e4fa89ad1d52c7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 3 16:43:54 2023 +0000

    Bug 32613: (follow-up) Cache the tables
    
    This shouldn't be expected to change, except maybe after an upgrade,
    seems worth caching.
    
    To test:
    1 - Apply patch
    2 - Confirm the feature still works
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8925a0b7b64daa9dcbe41ba7837e725c091a861b
Author: Jacob O'Mara <jacob.omara@ptfs-europe.com>
Date:   Wed Mar 1 11:02:34 2023 +0000

    Bug 32613: Add database tables to autocomplete
    
    This patch adds a database call to get the table and column names in the
    database and parse them into the autocomplete engine.
    
    Test Plan:
    As previous commit but also check for column/table names in the
    autocomplete popup
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a3b2f42cc7d0d23b2ae9bfdd4825920ae88bf96c
Author: Jacob O'Mara <jacob.omara@ptfs-europe.com>
Date:   Mon Jan 23 16:03:20 2023 +0000

    Bug 32613: Add autocomplete to SQL reports editor
    
    This adds auto-complete for the sql reports editor codemirror instance.
    To prevent a regression in syntax highlighting the overlay mode
    'sqlPlaceholders' has been removed and replaced with a highlighting
    engine that works correctly with the autocomplete engine.
    
    Test Plan:
    1. Navigate to reports and create a new sql report
    2. Write an Sql query and observe that there is no autocomplete options
    3. Apply patch
    4. Write a new Sql query and observe that there are now auto-complete
       options that can be navigated through with the arrow keys and
       accepted with either tab or the enter keys.
    5. Ensure that items bounded in << >> or [[ ]] are still syntax
       highlighted post-patch
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 652743e30d9fd08cf65356257a79211a4b15a905
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Wed Dec 7 15:32:48 2022 -0300

    Bug 31794: (follow-up) Add description to authorities tag
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1e72e59030b1e43b3674e1997cb8d267fe369d92
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Tue Dec 6 17:07:02 2022 -0300

    Bug 31794: Add REST endpoint to get an authority
    
    To test:
    1. Apply patch
    2. Set RESTBasicAuth preference to true
    3. Get the id of an authority
    4. Make a GET request to /api/v1/authorities/{authid} with one of the following content type header
      - application/json
      - application/marcxml+xml
      - application/marc-in-json
      - application/marc
      - text/plain
    5. Check that you get the authority in the corresponding format
    6. Sign off
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 98dd32e82631d8623b0947a23e11b4c22b10b822
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Mar 1 19:03:33 2023 +0000

    Bug 33095: Text is white on white when hovering over pay/writeoff buttons in paycollect
    
    The "Make a payment" page uses unusual navigation for the switch between
    the "Pay" and "Write off" views: Bootstrap nav pills. The style on these
    is a little muddled because a mix of Bootstrap and custom CSS is at
    work.
    
    This patch adds some CSS specific to nav pills and removes some
    ambiguous CSS. Two links in the template get a dummy "#" href attribute
    to make them work better with default styles.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
     - Locate a patron who has outstanding charges (lost item charge,
       account renewal fee, overdue fine, etc.).
     - From the patron checkout or detail page, click the "Accounting" tab
       in the left hand sidebar.
     - Click the "Pay" button on one of the oustanding charges.
     - On the "Pay an individual fine" page, confirm that there is a button
       and a link at the top of tab panel: "Pay" and "Write off." The
       "Pay" button should green with white text, the "Write off" button
       should be white with green text.
     - Click the "Write off" button and the styles of the links should be
       reversed.
     - Confirm that the CSS changes do not affect the appearance of the main
       navigation bar at the top of the page.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1ad64a7720a9a6ab618808c87d29dd5131a2b574
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Mar 1 19:23:09 2023 +0000

    Bug 33071: Show tooltip when hovering on home icon in staff interface breadcrumbs
    
    This patch modifies the breadcrumbs WRAPPER in html_helpers.inc so that
    the default "Home" link has a title attribute set to "Home."
    
    To test, apply the patch and view any page which has been updated to use
    the breadcrumbs WRAPPER. For example, cities administration, the
    staff interface home page, the about page.
    
    Hover your mouse over the house icon in the breadcrumb navigation and
    you should see a "Home" tooltip.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 974563bfeee29eedbd1b1475fd73599959285cb1
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jan 20 13:51:53 2023 +0000

    Bug 32679: Use different CSS classes for titles of article requests in staff interface
    
    The class article-request-title was used for the column with the
    article title as well as for the link with the record title. This could
    cause some confusion when changing the table with CSS. This patch makes
    it so different CSS classes are used for each.
    
    To test:
    * Activate article requests in system preferences
    * Make sure circulation conditions have article requets = yes
    * Create an article request in staff or OPAC
    * View the list of article requests in the patron account in staff
    * Add the following line to IntranetUserCSS:
      .article-request-title { display:none; }
    * Verify the Title column and the title from Record title (first column)
      have vanished.
    * Apply patch: now only the column should vanish, Record title shoudl remain
      visible
    * If you want: Verify that the record title has a differently named
      class now.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6ca181083405d453a0d54eff309d36c0896c6d79
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Feb 13 13:37:32 2023 +0000

    Bug 32492: (follow-up) Add missing HTML filters
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7371ee848ffd12ea92bb5e7c33916b15cb8e54fd
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Feb 10 23:28:40 2023 +0100

    Bug 32492: Add IDs to the rows of the patron messaging table in OPAC and staff interface
    
    Sometimes you want to hide notice from the messaging options
    becaue the library is not using it. With this patch, we'll
    have unique IDs on the <tr> to do so easily.
    
    To test:
    * Look at the messaging preferences
      * in the OPAC messaging tab
      * in the staff interface details tab
      * in the staff interface patron edit form
    * Verify there are no classes or IDs on the rows or other elements
    * Apply patch
    * Verify there are nice IDs now on the table rows (tr elements)
      for each message.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d3312fc1c9ee11b0b13781b9a89625f4e8258dc3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Feb 6 16:21:44 2023 +0000

    Bug 32658: (follow-up) Use more unique variable name to avoid collisions
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 09717bb20d83fee1b3fee2f3fcd1605a9e5c5489
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jan 17 19:28:04 2023 +0000

    Bug 32658: Use template wrapper in order from staged file template
    
    This patch implements the template WRAPPER system (see Bug 32571) for
    building tabs on the page for adding to a basket from a staged
    file.
    
    To test you need an active vendor, at least one basket for that vendor,
    and a staged MARC file.
    
    Apply the patch and go to Acquisitions -> Vendor -> Basket -> Add to
    basket -> From a staged file.
    
    - Click "Add to orders" on one of your staged files.
    - On the "Add orders from..." page you should see three tabs, the first
      one active.
    - Tabs should look correct and work correctly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 95891fe1e80363fb11cbd9a37f6fa5243f37ead9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Feb 23 22:29:16 2023 +0000

    Bug 33000: (follow-up) Add spans for translatability
    
    This patch finds places in the updated breadcrumbs markup where a
    translatable string is isolated in a way that makes it hard for the
    translation script to find it, and wraps these strings with <span>
    
    This follow-up includes a change to admin/cities.tt as well.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3e3b27f87dc5c7be117f117113a75de0dad7fef6
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jan 5 18:40:06 2023 +0000

    Bug 33000: Use template wrapper for breadcrumbs: Acquisitions part 1
    
    This patch updates several acquisitions-related templates so that they
    use the new WRAPPER for displaying breadcrumbs.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    - Acquisitions home
      - Vendor search results
      - Basket details
        - Cancel order
        - Create EDIFACT order
        - Basket edit
        - Basket deletion confirmation
        - Add to basket
          - From a staged MARC file
          - From existing orders (copy)
      - Basket groups (create, edit)
      - EDIFACT messages
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dbb3c88cfcbbcdf9bd2d72139948845571229fd5
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 6 16:09:42 2023 +0000

    Bug 33068: Use template wrapper for breadcrumbs: Administration part 3
    
    This patch updates several administration templates so that they
    use the new WRAPPER for displaying breadcrumbs.
    
    Note: The patch includes indentation changes, so ignore whitespace
    when viewing the diff.
    
    To test, apply the patch and test each page and its variations.
    Breadcrumbs should look correct, and each link should be correct.
    
    Administration ->
     - Circulation and fine rules -> Clone rules
     - Table settings
     - Credit types ->
       - New credit type
       - Edit credit type
     - Curbside pickup
     - Currencies and exchange rates ->
       - New currency
       - Edit currency
       - Confirm deletion
     - Debit types ->
       - New debt type
       - Edit debit type
     - Desks ->
       - New desk
       - Edit desk
       - Confirm deletion
     - Did you mean?
     - EDI accounts
       - New account
       - Edit account
       - Confirm deletion
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4d59e2717d1393719f48f77e19a319d2592165ed
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 15 08:56:22 2023 +0100

    Bug 32705: Display the column if 1 order has an invoice price
    
    On 25655 we added a new patch to store the invoice unitprice and
    currency even if it's the active currency. Here we then want to display
    the column if at least one order has an invoice price in a currency that
    is not the active one.
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7983181fce07fa175229af3818001342a5b8760a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 7 09:19:01 2023 +0100

    Bug 32705: Display invoice price
    
    On bug 25655 we are storing the unit price and currency used for
    invoicing. Here we are displaying them on the invoice page.
    
    Test plan:
    Reuse the test plan from 25655 and go to the invoice page
    Notice that a new 'Invoice price' column is displayed if at least one
    order of the invoice had a price given in a foreign currency
    
    We could discuss the display of the prices here, we've decided to not
    format them.
    We cannot do better for now as we are not storing the format along with
    the currency.
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 170ad86255fec01a9f4628f2eb6623f8d6d3b386
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 6 14:01:15 2023 -0300

    Bug 25655: DBRev 22.12.00.011
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b8f51430d3047a81e094e2d43131b27db9f80cb8
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 6 13:45:51 2023 -0300

    Bug 25655: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7fd9a1ae0b71bccdbad2d3fef62cc12ff3d6ce9b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 15 08:54:36 2023 +0100

    Bug 25655: Store invoice price and currency even if no currency change
    
    We could need these info to be stored even if the currency is the same
    as the active one, for statistic purpose for instance.
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f4b74f6c1ffece52de12c91d6de07e6aeba4d73a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jan 23 22:27:56 2023 +0100

    Bug 25655: Add tests
    
    And fix a bug they caught. We need to undef if a modification is made
    and invoice_currency is removed.
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a5d214bd789a28bbcb354beedac4bc00ad74ca7f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jan 16 22:51:31 2023 +0100

    Bug 25655: Select currency and prefill unitprice with previous receipt
    
    In case of partial order we want to prefill the unit price and the
    currency with the value of the previous receipt.
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fb0e6a20f8590c68d2aea0572d7dad785ad0f9a7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jan 16 22:37:09 2023 +0100

    Bug 25655: Save values from ModOrderReceive
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c9f7b72426b8af225a2dc3c3f94a0fa7a1aa0fbc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jan 16 21:59:38 2023 +0100

    Bug 25655: Store actual cost in foreign currency and currency from the invoice
    
    Bug 24158 allows to calculate the actual cost on time of receive from a foreign currency.
    This new enhancement is storing the price and the currency in database, into two new columns
    invoice_unitprice an invoice_currency
    
    Test plan:
    Create a new order with several items to receive
    Receive one or more items, and tick "change currency" on the order
    receive page
    Select a currency and finish the receiving
    In DB notice that the price and the currency have been stored.
    Receive remaining items and confirm that the form is prefilled with
    previous price and currency
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9855b480b1cd9718608e217ec5f68b3ff2a504f5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jan 16 21:59:11 2023 +0100

    Bug 25655: REST API specs
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ed78a5bc57735374aaf6be0cd94e4d26fa33dd7d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jan 16 21:09:05 2023 +0100

    Bug 25655: DB changes
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3bf4addb2497704877a8caa0d3456afc9b1aa0c8
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 17 07:25:08 2023 +0000

    Bug 32558: (QA follow-up) Leave default to 1, remove extra fork
    
    The default of 1 resembles the old behavior: 1 fork for the job.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 311d68815fa69d66d948c023651c07271a0248c9
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jan 3 15:35:42 2023 +0000

    Bug 32558: Add ability for background_jobs_worker.pl to process multiple jobs simultaneously up to a limit
    
    Right now background_jobs_worker.pl only processes jobs in serial. It would make sense to handle jobs in parallel up to a user definable limit.
    
    Test Plan:
    1) Apply this patch
    2) Stop background_jobs_worker.pl
    3) Generate some background jobs by editing records, placing holds, etc
    4) Watch processes in a new terminal: watch -n 0.1 'ps aux | grep background_jobs_worker.pl'
    5) Run background_jobs_worker.pl with parameter -m 3 or some other
       number of max processes
    6) Note the multiple forked processes in the ps output
    
    Test notes - also tested the following on KTD:
    1. Stop background_jobs_worker.pl
    2. Edit /etc/koha/sites/kohadev/koha-conf.xml - set max_processes to 10
    3. Generate some background jobs
    4. Watch processes in a new terminal: watch -n 0.1 'ps aux | grep background_jobs_worker.pl'
    5. Restart all
    6. Confirm multiple forked processes in the ps output
    
    Both methods work as expected and generate multiple forked processes
    based on the value set for max processes.
    
    Signed-off-by: emlam <emily.lamancusa@montgomerycountymd.gov>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ddd6765074c537df2072dc130dc916008f37ed55
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 6 11:42:56 2023 -0300

    Bug 31028: DBRev 22.12.00.010
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 10c90d08f617cae1ea11c4fb38706eb6e1183f2a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 6 11:24:40 2023 -0300

    Bug 31028: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3adde7ed3bf348317200128cadb207214337ab31
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Feb 17 16:58:12 2023 +0000

    Bug 31028: (QA follow-up) Add koha_object(s)_class methods to TicketUpdate.pm
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ad67b88d2895f2d01429d42e62a691a01641043a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Feb 15 16:38:17 2023 +0000

    Bug 31028: (follow-up) Move html_helpers into notices
    
    This patch removes the addition of html_helpers out of C4::Letters and
    into the relevant notice templates where it belongs.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7a0ccbf5022e3bff637f0917ab0187970b018dde
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Feb 6 10:57:37 2023 +0000

    Bug 31028: (follow-up) Mark public as boolean
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 22bebae9433e28594410dcc402c27278b4f452ec
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Feb 6 09:47:02 2023 +0000

    Bug 31028: Unit tests for ticket update api's
    
    This patch adds the missing unit tests for the ticket updates api
    endpoints.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8f185bd330b9c5f0378ed735eb779bbe98e66c5a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 3 13:23:45 2023 +0000

    Bug 31028: Unit tests for ticket create notice triggers
    
    This patch adds unit tests for the two notices that can be triggered
    upon ticket creation.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dfb658a48fd0e8e674e36308968d1b77afb69c41
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Dec 14 17:16:05 2022 +0000

    Bug 31028: Update patron and biblio includes to remove whitespace
    
    These includes used lots of [% %] blocks instead of [%- -%] and as such
    the produced markup contains superflous spacing.  This is OK in the
    browser, but for some reason does affect rendering in HTML email.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Helen Oliver <HOliver@tavi-port.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9f5e6e3434ffa2584131ee2cc348d7e81cfb4f59
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Nov 9 11:18:08 2022 +0000

    Bug 31028: (follow-up) Fix notices whitespace
    
    We we're using [% %] rather than [%- -%] in our the notice template
    introduced with this patchset.  This leads to some interesting rendering
    results in some email clients.  Using the proper whitespace ignoring
    template markup fixes the situation.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Helen Oliver <HOliver@tavi-port.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 904f8a84cdf0706b6d11620309bb72aaef8636fe
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 4 15:14:14 2022 +0000

    Bug 31028: (follow-up) Add <br> to notices
    
    This should resolve the lack of linebreaks in resulting emails
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Helen Oliver <HOliver@tavi-port.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 370cc2eb1f79a864481bd8b770e0fac28da24530
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 4 12:02:48 2022 +0000

    Bug 31028: (follow-up) Fix permissions names
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Helen Oliver <HOliver@tavi-port.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 992ccebbdb4635854ebada9c02e17846b7e82b90
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Nov 3 15:55:39 2022 +0000

    Bug 31028: Add feedback to the patron on submission
    
    This patch adds a success alert box when a patron submits a concern
    sucessfully.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Helen Oliver <HOliver@tavi-port.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 30ee65e4c35cc4f589ec0029535cea48c8d10c88
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Nov 2 11:37:09 2022 +0000

    Bug 31028: (follow-up) Consistently style help-block
    
    This patch updates the opac and staff modals to set the help-block
    inside a div instead of a paragraph element allowing for the wysiwyg
    edited content to display as prescribed.
    
    We move the scss inside the fieldset definition to ensure we are
    specific enough to catch only the intended elements.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Helen Oliver <HOliver@tavi-port.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 01d03b22425d019ca2ffd32ddaa56dddd3ec9bb8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Nov 2 10:50:28 2022 +0000

    Bug 31028: (follow-up) Update notice module codes
    
    This patch updates the notice codes from 'catalog' to 'catalogue' to be
    consistent with the existing codebase.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Helen Oliver <HOliver@tavi-port.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 39e49eb91dfb157127aa65554600425d47e4513f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Nov 2 08:34:35 2022 +0000

    Bug 31028: (follow-up) Rename TICKET_ACKNOWLEDGE
    
    TICKET_ACKNOWLEDGEMENT was too long for the database field size, drop
    the 'MENT' to ensure it fits.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Helen Oliver <HOliver@tavi-port.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5216c01ba7ab80149e75b6b45bf2f8932977fdc3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 1 15:21:24 2022 +0000

    Bug 31028: Only show pending concerns if there are some
    
    This patch adds logic to catch when pending_biblio_tickets equals zero.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Helen Oliver <HOliver@tavi-port.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3a9590598ae54670d4ca93606fbb9df92add7e9b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 1 15:16:30 2022 +0000

    Bug 31028: (follow-up) System preference terminology
    
    Capitalise NOTE and swap 'client' for 'interface'.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Helen Oliver <HOliver@tavi-port.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 70dc91d274b9e59f04f017466efb0bdf914001af
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 25 16:02:09 2022 +0100

    Bug 31028: Add display to details page
    
    This patch adds the display of biblio specific concerns to the biblio
    detail display page.
    
    Test plan
    1) Enable the feature as in prior patch test plans
    2) Add a concern as per prior patch test plans
    3) Confirm that a new tab appears at the bottom of the catalog record
       details display and all functionality from the concern management
       page is precent.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Helen Oliver <HOliver@tavi-port.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2c8f13fee2de3c345713e151ee419f3353b1e8e4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 25 15:33:04 2022 +0100

    Bug 31028: Add ability to report concerns from the staff interface
    
    This patch brings the CatalogConcerns feature to the staff client
    allowing non-cataloguers to report issues with catalog records from the
    record details page.
    
    Test plan
    1) Enable the new `CatalogConcerns` system preference
    2) Confirm that without the `edit_catalogue` permission your user can
       submit a catalog concern via `New -> New catalog concern` from the
       toolbar on a records detail display.
    3) Confirm that the right user was recorded as the reporter on the
       catalog concern management page (You must have logged in again as a
       user with the `edit_catalogue` permission to see this page.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Helen Oliver <HOliver@tavi-port.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 255a8645a730d460bfba9fe6283d9687124ca518
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 25 15:26:33 2022 +0100

    Bug 31028: Add email notification of cataloguers on submissions
    
    This patch adds an optional cataloger notification to email the
    cataloging team whenever a new catalog concern is reported.
    
    Test plan
    1) Enable `OpacCatalogConcerns`
    2) Add at least one email address to the new `CatalogerEmails`
       prefernce (a comma delimited list is also allowed).
    3) Confirm that a default template has been added to the Notices
       management, `TICKET_NOTIFY`.
    4) Submit a new concern using the OPAC
    5) Confirm that an email is sent to those email addresses listed in
       CatalogerEmails.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Helen Oliver <HOliver@tavi-port.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dcf7688b9456b207f29c47c7d627fdcc2683af4b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 25 14:03:11 2022 +0100

    Bug 31028: Add catalog concern management page to staff
    
    This patch adds a catalog concern management page to the staff client
    accessible via the cataloging home page and a new 'Pending catalog
    concerns' link on the front page.
    
    This includes added the requisit ticket_updates api endpoints and notice
    triggers and templates for notifying patrons of changes to their
    reported concerns.
    
    Test plan
    1) Enable the `OpacCatalogConcerns` system preference
    2) Catalog concern management is tied to your users ability to edit the
       catalog, `editcatalogue`.
    3) Confirm that you can see 'Catalog concerns' listed on the cataloging
       home page if you have the `editcatalogue` permission and not if you
       do not.
    4) Add a new concern as an opac user.
    5) Confirm that once a concern is present in the system you see a count
       of 'catalog concerns pending' on the intranet main page if you have
       the `editcatalogue` permission.
    6) Click through either the cataloging home page or pending concerns
       link on the main page to view the new concerns management page.
    7) Confirm the table displays as one would expect.
    8) Confirm clicking on details or the concern title exposes a 'details'
       modal with the option to add an update or resolve the concern.
    9) Verify that if selecting 'notify' when updateing or resolving a
       concern triggers a notice to be sent to the opac user who first
       reported the issue.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Helen Oliver <HOliver@tavi-port.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bf28d6b1c81bb9b5f38b268a236cd66f25679352
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 25 13:50:58 2022 +0100

    Bug 31028: Add acknowledgement notice
    
    This patch adds an acknowledgement notice that will be sent to the opac
    user upon submission of a catalog concern report.
    
    Test plan
    1) Confirm that a new notice template is added to the notices management
       page.
    2) If using a sandbox, check the 'email log' from the management UI to
       see the resultant notice has been 'sent'
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Helen Oliver <HOliver@tavi-port.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 086f2b01006db5528ad7edfda01f246c2f89e7ef
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 25 13:40:32 2022 +0100

    Bug 31028: Add configurable help text and templates
    
    This patch adds configurable help text and a template option to the
    catalog concern report modal in the OPAC.
    
    Test plan
    1) Enable `OpacCatalogConcerns` preference
    2) Build the CSS for the OPAC
    3) Check that there is a 'CatalogConcernHelp' block listed in the HTML
       Customisations page.
    4) On the OPAC navigate to a record and click the 'Report a concern'
       button.
    5) Confirm that the content of 'CatalogConcernHelp' displays beneath the
       detail entry box and that it displays as expected.
    6) Check that there is a 'CatalogConcernTemplate' block listed in the
       HTML customisations page.
    7) On the OPAC 'Report a concern' modal, you should see the content of
       the 'CatalogConcernTemplate' block pre-filled in the details
    textarea.
    
    Note: There is a caveat to the template.. as textarea can only be used
    to submit plaintext with this patch and as such the template needs to
    not utilise the WYSIWYG editor else you will be faced with raw HTML
    inside your textarea.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Helen Oliver <HOliver@tavi-port.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 015004d41873f338a3c4f83d09c8accdd4e976c5
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 25 13:34:40 2022 +0100

    Bug 31028: Add ability to report catalog concerns from the OPAC
    
    This patch adds the ability for patrons to report catalog concerns via
    the opac.
    
    Test plan
    1) Enable the new `OpacCatalogConcerns` system preference
    2) Navigate to the record details page of a biblio record on the OPAC
    3) You should see a new 'Report a concern' option in the right side
       actions box
    4) If not logged in you should have the login modal displayed and upon a
       successful login you should be redirected back to the details page
       with a new model displayed for entering concern details
    5) Submit your concern with a title and details.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Helen Oliver <HOliver@tavi-port.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 74a19ddb28660d16885c8e3e82bdc4eca95cc5d5
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 25 13:30:57 2022 +0100

    Bug 31028: Add `OpacCatalogConcerns` preference
    
    Enabling this preference should allow catalog concerns to be added by
    logged in patrons on the opac.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Helen Oliver <HOliver@tavi-port.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e87ca2888306ba3e0bf1b4469999772e2ede001a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 25 13:14:19 2022 +0100

    Bug 31028: Add API's for tickets
    
    This patch adds basic CRUD API's for the ticket endpoints.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Helen Oliver <HOliver@tavi-port.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f49861006f1c921dcee62391b638c0f16a000c18
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 25 13:07:44 2022 +0100

    Bug 31028: Add new Koha::Object(s) classes
    
    This patch adds new Koha::Object(s) for the newly introduced tables,
    including updateing existing Koha::Objects adding new relations as
    required.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Helen Oliver <HOliver@tavi-port.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 769a7c1a4fedb4663fdb85222ae0dbe56196c30f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 25 13:04:33 2022 +0100

    Bug 31028: New DBIC Schema files
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Helen Oliver <HOliver@tavi-port.ac.uk>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6cb12854ae93a29e6eb569fb4f595f8b87b18201
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 25 12:59:10 2022 +0100

    Bug 31028: Add `tickets` and `ticket_updates` tables
    
    This patch adds the new `tickets` and `ticket_updates` tables for
    tracking catalog concern tickets.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Helen Oliver <HOliver@tavi-port.ac.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 836f0c77e38c945dd3b221f3d9bd72f408680b2e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Dec 15 10:04:14 2022 +0000

    Bug 32472: Fix wrong POD for bookseller->subscriptions
    
    You should not call this in list context anymore after
    bug 29844.
    
    Test plan:
    Check pod of Bookseller.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 45323886ae4b73007e2ae2f822ae70a0f46435d0
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Jan 18 21:12:48 2023 -1000

    Bug 32678: Add new line in authorized values tests in search_for_data_inconsistencies.pl
    
    In search_for_data_inconsistencies.pl, the test for authorized values is a list in one line :
            * The Framework *VR* is using the authorised value's category *LOC*, but the following items.location do not have a value defined ({itemnumber => value }):
     {94 => AV} {95 => AV} {96 => AV} {97 => AV} {98 => AV} {99 => AV} {100 => AV} {101 => AV} {102 => AV} {103 => AV}
    
    It would be more clear with new lines, especially for scripts (grep, awk ...) :
            * The Framework *VR* is using the authorised value's category *LOC*, but the following items.location do not have a value defined ({itemnumber => value }):
     {94 => AV}
     {95 => AV}
     {96 => AV}
     {97 => AV}
     {98 => AV}
     {99 => AV}
     {100 => AV}
     {101 => AV}
     {102 => AV}
     {103 => AV}
    
    Test plan :
    1) In koha-testing-docker
    2) Delete in authorized values LOC the value AV
    3) Run misc/maintenance/search_for_data_inconsistencies.pl
    => You see the new line in result
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d27d39e4b8acccfbed7296106eadd1499d63e35b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 3 09:55:27 2023 +0000

    Bug 32811: Remove useless lines for indexer.log
    
    See also bug 32612.
    The output option includes the stdout.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 140493faf71b2545a41032b1d0db5d11f1db5f65
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 1 10:47:27 2023 +0100

    Bug 31665: Set today date for date cataloguing plugin
    
    dateaccessioned.pl must pick today's date when the input gets the focus
    on.
    
    Test plan:
    Edit an item, or create a new one.
    Confirm that today's date is prefilled into the date's input when it's
    empty and that it gets the focus on
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Michael Adamyk <madamyk@ckls.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cc59823fa3cc25f79a4b247d6c66a07dfedbf045
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:51 2023 +0100

    Bug 32819: Fix cataloguing/value_builder/stocknumberam123.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aa726e5329cda74f78e97c6ce379cfba93ea26f4
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:51 2023 +0100

    Bug 32815: Fix cataloguing/value_builder/callnumber.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2dafd6f7491f64ad8179d00cbcdb3822be57f11f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Feb 24 14:04:34 2023 +0000

    Bug 31471: Send multiple ISBN with 'OR' for FindDuplicate
    
    When a record has multiple ISBNs the database stores them seperated by a
    pipe
    
    Zebra interprets a string like "isbn:1600213510 | 9781600213519" as an 'OR' search, but for
    Elasticsearch we need to explicitly send "OR" - and Zebra support this
    as well
    
    To test:
    1 - Make sure you are using Elasticsearch
    2 - Cataloging->Add a new record from Z3950
    3 - Choose target: LOC
    4 - Search for: Control number: 14455023
    5 - Import and save
    6 - Search for the record again
    7 - Import and save - duplicate check isn't been triggered
    8 - Apply patch
    9 - restart_all
    10 - repeat 2-7
    11 - this time you should get a duplicate notification
    12 - Sitch SearchEngine syspref to 'Zebra'
    13 - repeat 2-7
    14 - Ensure you still get duplicate notification
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b93b6f3ddebdbcb53b435c1b9d7e64e235688d2f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Feb 22 18:13:35 2023 +0000

    Bug 33044: Return job id if there is no connection to rabbit
    
    This patch simply ensures we return the job id even if we couldn't send
    the job to rabbit.
    
    To test:
    1 - In KTD: sudo service rabbitmq-server stop
    2 - sudo koha-worker --stop kohadev; sudo koha-worker --queue long_tasks --stop kohadev
    3 - In staff client enqueue a batch item modification - note the link to view the enqueued job has no id in the url and takes you to the main background jobs viewer
    4 - Run t/db_dependent/Koha/BackgroundJob.t and notice that it fails.
    5 - Apply patch
    6 - Restart all
    7 - Enqueue a new batch item modification
    8 - Confirm the link works and has the correct id
    9 - Run t/db_dependent/Koha/BackgroundJob.t; it should pass now.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f25893a2ba395e833c135fb590d4354c5ab6763f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 28 09:13:19 2023 +0100

    Bug 32674: Fix placing a hold at the OPAC for serials
    
    Placing a hold at the OPAC explodes with a 500 when the record is a
    serial
    DBIx::Class::Storage::DBI::_dbh_execute(): DBI Exception: DBD::mysql::st execute failed: Column 'biblionumber' in where clause is ambiguous at /usr/share/koha/lib/Koha/Objects.pm line 394
    
    Test plan:
    * Create a serial subscription for an existing bibliographic record
    * Place a hold on this record at the OPAC
    
    Signed-off-by: Janusz Kaczmarek <januszop@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 79f7f44aa1c534ab30145ff3e0d95f30e6e04a67
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Mar 6 10:02:04 2023 +0000

    Bug 33145: Fix ERM swagger specs
    
    This patch adds the missing 'Provider name' parameter definition to the
    various ERM paths that were missing it.
    
    Test plan
    1) Run:
       docker run --rm -v $PWD/api/v1/swagger:/swagger \
              jeanberu/swagger-cli \
              swagger-cli validate swagger/swagger.yaml
    => FAIL: The spec is not valid!
    2) Apply this patch
    3) Repeat 1
    => SUCCESS: Tests pass!
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Edit: tcohen edited the test plan because of the failure to install
    swagger-cli cleanly
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e6e587a821b80403229fbe21742de127e8ba55b8
Author: Victor Grousset <victor@tuxayo.net>
Date:   Mon Feb 27 09:50:27 2023 +0100

    Bug 32518: (QA follow-up) Fix alignment
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 406d61cbb2da5c75adb659ef0f4a42c2734b73ca
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Dec 22 21:02:56 2022 +0000

    Bug 32518: Add reason option to cancel_unfilled_holds cronjob
    
    This adds a reaosn parameter and passes it into the cancellation if supplied
    
    To test:
    1 - Place a hold for a patron in your system
    2 - Run script with --days 0 -v
    3 - verify that it would cancel the reserves (and that you are okay with cancelling the ones it found)
    4 - Make sure you have a notice in the holds module with code 'HOLD_CANCELLATION'
    5 - Set content of the notice like:
    [% IF hold.cancellation_reason=='too_old' %]
    Canceled old
    [% END %]
    6 - Run script with --days 0 -v --reason too_bad -c
    7 - Confirm hold cancelled, no notice sent to patron
    8 - Place another hold
    9 - Run script with --days 0 -v --reason too_old -c
    10 - Confirm hold cancelled, notice sent to patron
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9e19a88f021c1a53ef3324193b88c55b48e19e87
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Jan 18 01:28:38 2023 +0000

    Bug 32663: Limit streetnumber to 10 characters in OPAC
    
    This change harmonizes the patron streetnumber input between
    the staff interface and the OPAC, so that you can only enter 10
    characters into the streetnumber for the OPAC. Without this change,
    a fatal error will be thrown trying to save the too long data.
    
    Test plan:
    0. Apply the patch
    1. Go to http://localhost:8080/cgi-bin/koha/opac-memberentry.pl
    2. Note that you can only enter 10 characters into the "Street number"
    field as a self-registration patron
    3. Log into Koha
    4. Go to http://localhost:8080/cgi-bin/koha/opac-memberentry.pl
    5. Note that you can only enter 10 characters into the "Street number"
    field when editing logged in patron details too
    6. Go to http://localhost:8081/cgi-bin/koha/members/memberentry.pl?op=add&categorycode=S
    7. Note that you can only enter 10 characters into the "Street number"
    field as a staff member
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Solene Ngamga <solene.ngamga@inLibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 09dabdad95473cdd0949cc76cbc5372abd9dcbae
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Feb 23 12:28:18 2023 +0000

    Bug 32983: Use REST API route to retrieve authorised values
    
    Make one API call for all AV categories+values instead of one API call per AV category required
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d8c6a36b8647aa33945e4e6e9b28e511cd433bb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 16 14:38:46 2023 +0100

    Bug 32983: ERM - Retrieve AVs from an endpoint
    
    Bug 32981 let us retrieve the authorised values from a REST API route,
    instead of injecting them from the template. Let us that for the ERM module!
    
    Test plan:
    You will notice a "Loading" screen when refreshing the ERM module
    Then you should not notice any other UI changes. Dropdown list should be
    populated like before this patch.
    
    Some technical notes:
    I am expecting this to be slower than before, but it feels better to use
    a REST API route to retrieve the AV
    Future improvement will be to lazy load the AVs, to speed up the landing
    page. However it needs more changes, and this gets big enough.
    I would like to see a follow-up that move the code from ERM/Main.vue to
    the authorised value store (I've failed at that), but that should
    certainly be done after the lazy loading is implemented anyway)
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 611a77ca515111296a461336ddcfc50e77a25b8e
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Mar 2 07:58:13 2023 -0500

    Bug 30069: (QA follow-up) Use pure DBIC for select and delete with single query
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6b90fa3ec4ca7ec9515a59527fb9ff7f4d823318
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Mar 1 15:13:48 2023 +0000

    Bug 30069: (QA follow-up) Rebase and add filter
    
    This patch now checks the status of messages and ignores any message
    with a status of 'new'. It is also rebased to account for changes made
    to cleanup_database.pl in bug 17350.
    
    Test plan:
    1) Ensure you have some EDI orders or even just some dummy messages in the edifact_messages table with a mixture of statuses including 'new'
    2) Run perl misc/cronjobs/cleanup_database.pl --edifact-messages 100 --verbose (Change the number of days according to the data in your table)
    3) The response should show a number of messages that would have been deleted
    4) Run perl misc/cronjobs/cleanup_database.pl --edifact-messages 100 --verbose --confirm
    5) The response should now show the same number of messages have been deleted
    6) Check your edifact_messages table to confirm that the data has been deleted
    7) Confirm that no messages marked 'new' have been deleted
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ee91389edd76297c2a553a65d7ec5f89ab2e97d0
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Feb 20 21:28:05 2023 +0000

    Bug 30069: (QA follow-up) Fix capitalization for edifact
    
    Changes a few occurrences of edifact in the output messages
    to EDIFACT.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2b085842554607c08d7b5672b129313008cc619b
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Feb 15 14:20:54 2023 +0000

    Bug 30069: Add edifact-messages to cleanup_database.pl
    
    This patch allows users to clear out old edifact_messages using the cleanup_database script. The number of days can either be set in the CLI or the default value of 365 can be used.
    
    Test plan:
    1) Ensure you have some EDI orders or even just some dummy messages in the edifact_messages table
    2) Run perl misc/cronjobs/cleanup_database.pl --edifact-messages 100 --verbose (Change the number of days according to the data in your table)
    3) The response should show a number of messages that would have been deleted
    4) Run perl misc/cronjobs/cleanup_database.pl --edifact-messages 100 --verbose --confirm
    5) The response should now show the same number of messages have been deleted
    6) Check your edifact_messages table to confirm that the data has been deleted
    
    Sponsored-by: PTFS Europe
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 834e3c8e0ea4ad82ab4825e8994164cc85b2836f
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Wed Dec 14 12:39:54 2022 +0000

    Bug 31221: Buttons overflow in OPAC search results in mobile view
    
    To reproduce:
    1- Have at least 10 record of the same type that can be viewed from OPAC
    2- Go to administration > system preferences > OPACnumSearchResults and set it to 1
    3- Go to the OPAC and search for the type from step 1
    4- Notice top and bottom page selections are numbered from 1 to 10 + Next >> + Last >>
    5- Inspect the webpage and switch to mobile view
    6- Reduce display width and notice the buttons (of step 4) on the right are overflowing the screen
    7- Apply the patch
    8- compile the .scss file 'yarn build --view opac'
    9- Clear your navigator caches
    10- repeat step 3,5 and 6
    11- Notice the buttons (of step 4) are no more overflowing the screen
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Bug 31221: (fix) Adding "flex-wrap: wrap" to the pagination links in opac.scss
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0ded2bb2b7302df0c5614cab1ba6c5b8df8d6d23
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Feb 18 11:15:35 2023 +0000

    Bug 32960: Add option "not checked out" to item search
    
    This enhances the availability search option on item search
    to have a third option: ignore, checked out and not checked out.
    I chose 'not checked out' as available could be misleading,
    the item might still be lost or withdrawn and not on the shelf.
    
    To test:
    * Apply patch
    * Make sure some items are checked out
    * Search with 'ignore' - note number of results
    * Search with 'checked out' - note number of results
    * Search with 'not checked out' - number of results should
      match ignore minus checked out
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2d31e83f37d325754ba468f5c05033ec76843988
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Mar 2 11:45:12 2023 -0300

    Bug 32997: (QA follow-up) values => authorised_values
    
    This patch renames that for consistency, and also makes use of the
    ->authorised_values accessor on the category.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 109be55501e8879228366b056af85720c3a29bc7
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Feb 23 14:37:20 2023 +0000

    Bug 32997: Add tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bbc0e8fe32cb5e1b5bf752732428ce2f9ebbb840
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Feb 20 16:17:41 2023 +0000

    Bug 32997: Add REST API endpoint to list authorised values for multiple given categories
    
    This patch adds /api/v1/authorised_value_categories endpoint that
    retrieves authorised value categories for the given names and their
    authorised values if x-koha-embed: authorised_values is also given.
    
    To test:
    Apply patch
    curl -u koha:koha --request GET \"http://localhost:8081/api/v1/authorised_value_categories?q=%7B%22me.category_name%22%3A%5B%22LOC%22%2C%22YES_NO%22%5D%7D\" --header \"x-koha-embed:authorised_values\"
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 23ab22b0da6b2e16feca3b39dd570503c377cafd
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Feb 24 14:47:44 2023 +0000

    Bug 32981: (QA follow-up) Fix POD and file permissions
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7e5c75549fe66eb16eb365ea3a79ee8d7fb6946b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 16 11:45:20 2023 +0100

    Bug 32981: Add endpoint to get AV for given category
    
    For, at least, the ERM module we would like to retrieve the authorised
    values for a given category to build a dropdown list with the different options.
    
    It has been decided on bug 17390 to use
    GET /authorised_value_categories/:authorised_value_category_id/values
    
    Test plan:
    curl -v -s -u koha:koha --request GET  http://kohadev-intra.mydnsname.org:8081/api/v1/authorised_value_categories/LOC/values
    Should display the list of LOC
    
    curl -v -s -u koha:koha --request GET  http://kohadev-intra.mydnsname.org:8081/api/v1/authorised_value_categories/xLOCx/values
    Should return a 404
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fe872b792037ee2f8cce0d25f95c1e4f739ffe49
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Thu Feb 2 12:45:04 2023 -0500

    Bug 32803: EnableItemGroups and EnableItemGroupHolds options are wrong
    
    This patch corrects the options for the EnableItemGroups and
    EnableItemGroupHolds system preferences.
    
    To test:
    1. Enable EnableItemGroups and EnableItemGroupHolds system preferences
       1.1. Go to Administration > Global system preferences
       1.2. Search for EnableItemGroup (no s, to get both)
       1.3. Enable both EnableItemGroups and EnableItemGroupHolds
       1.4. Click Save all Circulation preferences
    2. Go to About Koha > System information
       --> There is a warning message
    3. Go to a bibliographic record with at least one item
       --> The item group tab is displayed
    4. Create an item group
       4.1. Click New item group
       4.2. Enter a name
       4.3. Click Submit
       4.4. In the Holdings tab, select the item
       4.5. Click on Add/move to item group
       4.6. Click Set item group
    5. Place a hold on the item group
       5.1. Click Place hold
       5.2. Search for a patron
       5.3. In the 'Hold next available item from an item group' section, select the item group
       5.4. Click Place hold
       --> Placing a hold is possible
    6. Disable EnableItemGroups and EnableItemGroupHolds system preferences
       1.1. Go to Administration > Global system preferences
       1.2. Search for EnableItemGroup (no s, to get both)
       1.3. Disable both EnableItemGroups and EnableItemGroupHolds
       1.4. Click Save all Circulation preferences
    7. Go to About Koha > System information
       --> There is a warning message
    8. Apply patch
    9. Redo steps 1 and 2
       --> There is no warning
    10. Redo step 3
       --> The item group tab is displayed
    11. Redo steps 4 and 5
       --> Placing a hold is possible
    12. Redo steps 6 and 7
       --> There is no warning
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    JD Amended commit message: * Commit title does not start with 'Bug XXXXX: '
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b3c945dd09027385fe35a5e89dfe36c4ab150a04
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Aug 24 13:54:49 2022 -0400

    Bug 31453: Add ability to filter messages to process using process_message_queue.pl via a command line parameter
    
    It would be very useful to be able to tell process_message_queue.pl to skip processing some messages. This is particularly useful where a plugin handles sending some message using the before_send_messages hook, but while that plugin is processing, more messages meant for the plugin might be queued. At that point, control moves back to the script and SendQueuedMessages is called, and those messages end up being processed there instead of by the plugin.
    
    Test Plan:
    1) Apply this patch
    2) Queue two messages, each with a unique word
    3) Run process_message_queue --where "content NOT LIKE '%WORD%'"
       where WORD is a unique word in one of the two message
    4) Note the message containing "WORD" was not processed
    5) prove t/db_dependent/Letters.t
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 490b9223672914d253c1a5dadc51cab1d941ec39
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jan 6 15:33:29 2023 +0000

    Bug 32576: Replace panels with page-sections
    
    This patch replaces the bootstrap panels with the more modern koha
    page-section cards layout.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit abda545a785005f1b1be65caea7bf23a8dfbae04
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jan 6 15:17:06 2023 +0000

    Bug 32576: Move page-section outside of table include
    
    This patch drops the superflous div from the ill-list-table include and
    instead opts to wrap calls to it with a more appropriately positioned
    div instead.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cf6ac503ad4c6946457c502bb56e658e61309218
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Feb 18 10:25:04 2023 +0000

    Bug 33003: Show the vendor type on vendor detail page
    
    When using an authorised value VENDOR_TYPE for the
    vendor type, we should show the AV description
    everywhere instead of the code. It already works on
    the vendor search, but not on the vendor detail page.
    With this patch it will also work there.
    
    To test:
    1. Add at least one authorized value in VENDOR_TYPE
       1.1. Go to Administration > Authorized values
       1.2. Search for VENDOR_TYPE
       1.3. Click 'Add'
       1.4. Fill out the form
            - Authorized value: BOOK
            - Description: Print books
       1.5. Click 'Save'
    2. Add a new vendor
       2.1. Go to Acquisitions
       2.2. Click 'New vendor'
       2.3. Fill out the form
            - Name: ABC Bookstore
            - Vendor type: Print books
       2.4. Click 'Save'
    3. Go to the vendor page
       3.1. Click on the vendor name
       --> The value in "Type" is BOOK, it should be "Print books"
    4. Apply patch
       4.1. Repeat test, now it should show the description
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2737836e86123155f65cbb358aded2525dcf1add
Author: Frédéric Demians <f.demians@tamil.fr>
Date:   Wed Mar 1 09:22:22 2023 +0100

    Bug 33101: Restore OPAC basket detailed view
    
    The OPAC basket detailed view display is broken since since bug 32445.
    This patch restore the usual operation.
    
    TO TEST:
    
    1. Add a biblio recor into the OPAC basket.
    2. Click on the cart to display its content.
    3. Click on More details
       => error 500
    4. Apply the patch, and repeat 3.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0cf434b7a2654c17e60af1969faf99ca77ef42dc
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon Jan 16 06:03:13 2023 +0000

    Bug 32639: Send opac-search.osdx without doing an empty search
    
    This patch sends out opac-search.osdx without running the entirety
    of opac-search.pl without any search query.
    
    This prevents unnecessary computations and warnings from appearing
    in the logs.
    
    Test plan:
    1. Apply patch
    2. Go to
    http://kohadev.myDNSname.org:8080/cgi-bin/koha/opac-search.pl?format=opensearchdescription
    3. Note that no errors appear in
    /var/log/koha/kohadev/plack-opac-error.log
    4. Verify that opac-search.pl still works as expected when
    doing a search via the web UI
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    JD Amended patch: remove ref to bug number, we use git!
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6c5c35aa32a7ff61e46d9198dee55a0239f55f96
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Feb 23 15:33:00 2023 +0000

    Bug 33055: (bug 32624 follow-up) Don't send a screen message if not blocked
    
    To test:
    0 - Apply first patch
    1 - prove -v t/db_dependent/SIP/Patron.t
    2 - It fails
    3 - Apply second patch
    4 - prove -v t/db_dependent/SIP/Patron.t
    5 - It passes!
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0324aed47056ab17de84849f2178d8a078c53468
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Feb 23 15:32:21 2023 +0000

    Bug 33055: (bug 32624 follow-up) Unit tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0307c1bbff089312618608785414c92fc1549823
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Mar 1 10:46:20 2023 +0000

    Bug 32495: (follow-up) Remove required property
    
    This follow-up removes the required property from the text area as this
    was missed previously.
    
    Test plan:
    1) In the ERM module, add a new agreement and observe that the Description field is required
    2) Apply patch
    3) Repeat step 1 but this time the Required flag will not be visible.
    4) Submit the form with the Description field blank - the submission
       should work
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 87e717406bdbd48340115fe7522a7184359116bb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 28 10:59:53 2023 +0100

    Bug 32728: Fix warning
    
    There is a couple of wrong things from the previous patch:
    
    * There is a warning in the console
    Firefox
    [Vue Router warn]: Unexpected error when starting the router: TypeError: document.getElementById(...) is null
    Chrome
    [Vue Router warn]: Unexpected error when starting the router: TypeError: Cannot read properties of null (reading 'click')
    That's because the tabs are not initialized yet, and so the tab is not
    correctly selected when the app is loaded.
    
    * "Search titles" is selected when on packages, and "Search packages" is
    selected when on titles
    
    This patch remove the warning and fix the second problem.
    
    However the tab is still wrong when the app is loaded. Will see later if
    that can be fixed, but it's not trivial at first glance.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a3087d76bd31f59ac437e63d7031b2202cb64e5c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Mar 1 10:55:03 2023 -0300

    Bug 32594: (QA follow-up) Fix POD
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 66e9bc71e423dea1b54ab397456caf8a3e820cae
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Feb 27 13:11:54 2023 -0300

    Bug 32594: (QA follow-up) Adjust tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d6f4edca00d995301484da0af1d0efd4903181c2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Feb 27 13:01:30 2023 -0300

    Bug 32799: DBRev 22.12.00.009
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 412c0261014dabc0aada39287dc1b7d801c93ad0
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Feb 9 21:08:53 2023 +0000

    Bug 32799: Rename ILLSTATUS authorised value category to ILL_STATUS_ALIAS
    
    To test:
    1) Activate the IllModule system preference
    2) Install a backend (BLDSS or FreeForm) following the wiki instructions:
    3) Configure some authorised values for ILLSTATUS
    4) Apply patch
    5) Run database update
    6) Verify your configured values have been updated to ILL_STATUS_ALIAS
    7) Add another ILL_STATUS_ALIAS: there should now be an explanation in the
       categories list
    8) Go to the ILL module and add a new request
    9) Edit the request, verify that your status alias show in the status list
    10) Set one of your status and save
    11) Verify that the ILL requests list search filters show your status alias
    12) Manage the request again and verify that the ILL request log shows the
        status descriptions correctly
    13) Verify the description of the ILLHiddenRequestStatuses has
        been updated with the new authorised value category
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 83bde3e650ee83aed5419fa99282ae717752c458
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Feb 9 22:52:07 2023 +0100

    Bug 32159: Fix heading hierarchy on uncertain prices page
    
    This makes sure we don't have 2 level 1 headings on the same page.
    
    To test:
    * Create a new order for a basket in the acq module,
      make sure the uncertain price checkbox is checked bevor saving
    * Go to uncertain prices using the link in the toolbar on the
      basket summary page
    * Verify that there are 2 almost identical h1 headings and a "/ Fax:"
      reference at the top of the page
    * Apply patch
    * Verify that we now have one level 1 heading and a level 2 heading
      for each section. The fax reference is also gone.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 10a8203811a979d0a7190b4df1411be33a1b6dd9
Author: Michael Hafen <michael.hafen@washk12.org>
Date:   Fri Jan 6 16:11:01 2023 -0700

    Bug 32585: (bug 32583 follow-up) Fix some variable references
    
    Bug 32583 change the $item variable from a hash to an object.  Trivial patch
    to change some hash references to object method calls.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit da6d7171e313702da0611567f933409d4f157fb2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Feb 27 12:00:37 2023 -0300

    Bug 33004: DBRev 22.12.00.008
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0f3a82f09c530fcb0681fa70edf5168fb396d25e
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Feb 18 11:01:54 2023 +0000

    Bug 33004: Add VENDOR_TYPE to default authorised value categories
    
    To test:
    * Go to administration > authorised values
    * Verify that VENDOR_TYPE doesn't show in the list
    * Apply patch
    * Run database update
    * Verify that VENDOR_TYPE does now appear and has a nice
      description (not added by this patch)
    * Bonus: start over and run the web installer, VENDOR_TYPE
      should now be already there
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 41c439bf41555a9a31282c9bc385fbf75ec40fd9
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jan 27 11:29:49 2023 +0000

    Bug 17350: Add note about how the saved reports data is created in first place
    
    This amends the documentation of the cleanup_database.pl script
    to include a hint for how the saved reports data is created.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fe6a03c43a61100f5df1b273ff671eee4326809c
Author: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
Date:   Mon Nov 21 20:00:57 2022 +0000

    Bug 17350: Purge old saved reports via cleanup_database
    
    To test:
    apply patch
    1 - have or create a report
    2 - run your report via the command line with --store-results. Do this twice.
    3 - update the saved_reports table to set date_run for one of your two saved results set to a datetime more than 5 days ago
    4 - perl misc/cronjobs/cleanup_database.pl --reports 5 --verbose --confirm
    5 - Koha tells you its deleting saved reports data from more than 5 days ago
    6 - confirm in the database and the staff interface that it's done so
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bcc1c6c3fd19fe25d00b0fae4862a6b90b215ca5
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Feb 7 22:00:18 2023 +0000

    Bug 32904: Check if responseJSON is defined for dataTable error
    
    This patch checks if responseJSON is defined before checking if
    responseJSON.errors is defined.
    
    Sponsored-by: Education Services Australia SCIS
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a2314dc0ce6d0202451162cf11708ac73d4ba95e
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Feb 9 23:57:12 2023 +0100

    Bug 31056: Restore closeandprint function on basketgroups page
    
    Bug 13614 removed the basketgroup.js asset from the basket group
    page. This file includes the closeandprint function used for
    closing and printing the PDF from the open basket groups tab.
    The patch restores just this function directly in the file where
    it's needed as this is the only spot and it's only a few lines.
    The rest of basketgroup.js appears unused.
    
    To test:
    * Create a basket with one or more oder lines
    * Close the basket and check the checkbox to add it to a
      basket group
    * Reopen the basket group from the basket groups page
    * Verify the close and print only leads to a JS error and
      nothing happens
    * Apply patch
    * Repeat and verify you can now 'Close and print' from the
      open basket group tab
    * Verify all other buttons work as expected as well
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    JD Amended patch: fix indentation and spacing
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 23c69dbfc2fbd6d393468fdadb5c0f28e9896a92
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Feb 23 17:10:32 2023 +0000

    Bug 32611: Not for loan items don't show the specific not for loan value in OPAC detail page
    
    This patch corrects what appear to be some copy-paste errors which
    resulted in the "not for loan" authorized value description not
    displaying, instead the generic "Not for loan" is shown.
    
    The patch also adds another case for displaying the item restricted
    status. Previously items.restricted would only display if the item
    *also* had a notforloan value.
    
    To test it's probably easiest to find a record with multiple items and
    set various item statuses (damaged, notforloan, lost, restricted) and
    confirm that the right description is shown.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1a200cc25e8ed977425b6045c2e85231e0fca781
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jan 5 17:16:30 2023 +0000

    Bug 32973: Use template wrapper for breadcrumbs: about, main, and error page
    
    This patch updates the staff interface home page, the about page, and
    the error page template so that they use the new template WRAPPER for
    breadcrumbs.
    
    To test, apply the patch and view each page to confirm that the
    breadcrumbs are correct:
    
    - Staff interface home page
    - About page
    - Error page (the easiest example is a 404 error)
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9cad3324637f739b689ec065bcb84504a217af3b
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Feb 5 01:49:21 2023 +0000

    Bug 32293: Fix terminology in warning when creating orders from staged file
    
    When you are ordering from a staged file and the
    fund is missing, there is a warning:
    
    Some budgets are not defined in item records
    
    Budgets shoudl be funds here.
    
    To test:
    * Add a new basket
    * Add an order from a staged file or from a file
    * Leave the fund values of some selected items empty
    * Make sure default fund entry is also empty
    * Warning message should be triggered on saving
    * Apply patch, repeat, verify it is correct now.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 60e7c991650c42b0533ec9d2983e6920e32324ac
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue Nov 15 01:25:42 2022 +0000

    Bug 32205: Remove unnecessary syspref template params for failed OPAC auth
    
    This patch removes some unnecessary syspref template params for
    failed OPAC auth. The templates handle these syspref using the
    Koha.Preference() TT plugin function, so they're completely redundant
    and just make checkauth() longer than it needs to be.
    
    Test plan:
    1) Apply patch
    2) Enable OpacCloud, OpacBrowser, and OpacTopissue sysprefs
    3) koha-plack --restart kohadev
    4) Log out of Koha if you're logged in
    5) Go to http://localhost:8080/cgi-bin/koha/opac-user.pl
    6) Note that you can see the Cart as well as links for the following:
    Browse by hierarchy, Authority search, Tag cloud, Subject cloud,
    Most popular
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Solene Ngamga <solene.ngamga@inLibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3e53aae4f9451b340d5a808c16295a31809d729d
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Feb 20 22:15:48 2023 +0000

    Bug 33015: Fix some 'Cancel' links to point to cataloging start page
    
    Some 'cancel' links of tools moved to the cataloguing module still
    pointed to the tools start page. This adds some more consistency.
    
    To test:
    * Go to cataloguing
      * Batch item editing
      * Batch record deletion
      * Batch record modification (create a MARC modification template first)
    * Verify the 'cancel' link on each page points to tools
    * Apply patch: cancelling should not take you to the cataloging start page
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    JD Amended patch: indentation + fix typo
    -        <a class="cancel" href="/cgi-bin/koha/catalouging/cataloging-home.pl">Cancel</a>
    +        <a class="cancel" href="/cgi-bin/koha/cataloguing/cataloging-home.pl">Cancel</a>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b593f70b5d0d009ebf5690b66f3bff46f0c04836
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Feb 20 23:08:51 2023 +0000

    Bug 32215: Remove unused "Your searched for" lines from patron restrictions admin page
    
    To test:
    * Go to administration > patron restrictions
    * Search for a specific restrictions
    * Verify you can't make the 'You searched for' above the results table show
    * Apply patch
    * Everything should appear unchanged
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cd9024abe25f0959f946ba9e219bc4ddce0587dc
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Feb 23 00:43:31 2023 +0000

    Bug 33048: Fix email link on error page when opac login not allowed
    
    This change replaces a non-existent variable with the
    KohaAdminEmailAddress syspref.
    
    Test plan:
    0. Apply the patch
    1. Go to http://localhost:8081/cgi-bin/koha/admin/preferences.pl?op=search&searchfield=opacuserlogin
    2. Set to "Don't allow"
    3. In an incognito window, go to http://localhost:8080/cgi-bin/koha/opac-reportproblem.pl
    4. Note that the "mailto" link for "Email" has the value from KohaAdminEmailAddress syspref
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 37530b445fe3abad2861c02cc191bb6095f218c0
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jan 4 10:59:55 2023 +0000

    Bug 32503: Use first cancellation for date ordering
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d76a6cb1049107af77efc4f642f754d98c9821d8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Dec 29 11:33:47 2022 +0000

    Bug 32503: (follow-up) Move data-order attributes
    
    It looks like the data-order attributes were at the wrong level to me,
    i.e. not part of the 'td' but instead part of the cell content.
    
    This patch moves those data-order attributes where possible and drops
    the data-type definitions on the headers.
    
    However, for the cancellation case, this isn't as clear cut as we may
    well display more than one cancellation request date in the same cell.
    For this case I've left Katrins data-type="@data-order" trick.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 208de0c37160c2dc055072b167d901525e7eb94f
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Dec 28 22:39:43 2022 +0000

    Bug 32503: Fix date sorting for holds awaiting pickup tables
    
    This patch is a little experimental, but seems to do the trick.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e36e393c7d05fc6e2af6391b908807655f6841e7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 23 15:46:48 2023 +0100

    Bug 33032: Remove alternateholdings_count
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ae1aeaac0715da95b65b9374ac8eba704e5d2409
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Feb 21 10:03:25 2023 -1000

    Bug 33032: Fix alternate holdings in staff interface search results
    
    If system preference AlternateHoldingsField is used, one can see a display in OPAC search results.
    This display does not appear in staff interface search results anymore.
    
    Test plan :
    1) Enable feature with system preference 'AlternateHoldingsField', ie 852abc
    2) Edit a record to add some datas in field 852
    3) Perform a search in staff interface
    => You see the alternate holdings datas
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9d7cca8b4dcdda09e5134bcd57731346285c9fc2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jan 19 20:47:31 2023 +0000

    Bug 32685: Correct authority match display on import
    
    Bug 22785 updated the import records table, but mixed javascript variables and template toolkit, this means all matches are treated as biblios
    
    To test:
    1 - Export some authority records form Koha
    2 - Create a matching rule based on 'Local-number' and field 001
    3 - Stage the records for import using above rule
    4 - Note the match links point to authorities, but the citations point to biblios
    5 - Apply patch
    6 - Reload the page
    7 - Confirm the links have the correct text
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d599694ef5d9d7a8798d16815d839c9c286d6476
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Feb 24 21:01:43 2023 +0000

    Bug 33020: (QA follow-up) POD and chmod
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 28fd57d78a69a9bb7963597ddc8ec7a70883c7e1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 22 11:02:39 2023 +0100

    Bug 33020: Add missing Koha::Logger->history
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8098dfbe3a9763c96ffdcc0c75417b1f5abb552f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 22 10:20:56 2023 +0100

    Bug 33020: Add test
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 228b9ec2e92c65083c304868286cc9ed4b2c3ba5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 15 14:17:16 2023 +0100

    Bug 32925: Rename isSubmitting with submitting
    
    Asking to do somthing, not asking if it's being done
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b312b6313671852cea3b8e352317a87824f999c4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 15 12:26:39 2023 +0100

    Bug 32925: Add test
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2e9ed49df2babaf18f46806a37ff3d76dbee02d5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 15 12:02:31 2023 +0100

    Bug 32925: Handle submission notification at fetch level
    
    This is done in a single place now!
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit daeccd0b8c2ae9e3d16f32db379a39994433b69d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 9 16:17:09 2023 +0100

    Bug 32925: Use a new state for this message
    
    The previous patch didn't work, there is a validation step that make the
    form non-accessible after it's greyed out.
    
    This patch is using a new state is_submitting, like the other messages.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 35dd04e9cb1d8b881b75504a55a253c5cd74f3cd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 9 14:56:43 2023 +0100

    Bug 32925: Display loading info when a form is submitted
    
    With this new ButtonSubmit component all our submit buttons will look
    and behave identically.
    Here we need a "submitting" information to be displayed, and the form to
    be "deactivated".
    
    This patch is a POC and use the new component on the add agreement and
    delete agreement forms
    
    Test plan:
    It's easier to test if you add a sleep in the relevant place
    (Koha/REST/V1/ERM/Agreements.pm for list and add/update)
    Confirm that you see a "Submitting..." in the middle of the screen
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2540ba19cb26a9d4f288086213891fdfe7561ab5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 24 13:23:32 2023 +0100

    Bug 32939: (follow-up) Use APIClient to fetch vendors
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 821808ec31176d662e518418c9ff8a71948e1a4b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 21 13:09:23 2023 +0100

    Bug 32939: Use APIClient to replace PATCH requests
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7d95acb40280bd5c3cc4f248b14cb138db5393cc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 21 12:50:02 2023 +0100

    Bug 32939: Use APIClient to replace some more fetch calls
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b30a5a21d12e94171e4226b5f06eeb5117993847
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 21 12:42:29 2023 +0100

    Bug 32939: Remove fetch/erm.js
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 50aab456bc37fefa74149e85f2dfa9d6d308ab6c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 21 12:42:15 2023 +0100

    Bug 32939: Use APIClient to fetch EBSCO eHoldings
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7e58b6d74cc7f98d261b58e9a32cc7eb31d2f8f6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 21 11:59:01 2023 +0100

    Bug 32939: Use APIClient to fetch local eHoldings
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2d86a671f2e4ae42bfaba2b69642a5cae3707655
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 21 10:50:02 2023 +0100

    Bug 32939: Use APIClient to fetch vendors
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 66dd767813fb59cfa1d6b976365df9172198e0e0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 21 10:14:55 2023 +0100

    Bug 32939: Use APIClient to fetch patrons
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 23266f7b002f8d99b3201de72766b8c06d5c2844
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 21 10:04:53 2023 +0100

    Bug 32939: Use APIClient to fetch licenses
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b8dac5b1e296a56187990edca2193fba0e0360ef
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 21 09:46:28 2023 +0100

    Bug 32939: Use APIClient to fetch agreements
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 545e568b9f243d3347ee7770f752e23d0af851ac
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 15 11:38:08 2023 +0100

    Bug 32939: Uniformize api calls
    
    We want to make the call easier and without less errors possible.
    Here, no need to async keyword, try-catch, etc.
    Only call the method and use the common then with the 2 success and
    error Promise arguments.
    
    We will certainly want to add later a parameter to prevent the display
    of the error in fetchJSON, in case the failure does not require a message
    for the end user.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 225f2c664b9549e05a9c98a4fd91df08bcc55c65
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 15 12:52:10 2023 +0100

    Bug 32939: Fix delete
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2c34c60951a5d7aaa1862a6a5d667bf17edef0f9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 15 10:43:46 2023 +0100

    Bug 32939: Introduce count
    
    Not used yet, will replace myFetchTotal
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 929f5a2199fc3e5ee84ad71c86d00ed4bfd6a530
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 15 10:36:38 2023 +0100

    Bug 32939: Restore checkError
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5871db79587436bc28eb04f0558f2423ecfcac8c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 15 10:13:58 2023 +0100

    Bug 32939: Set the default header at lower level
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 10322566d40fd31cdf7ee554cbd7f9a0ac33d0a6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 15 09:35:19 2023 +0100

    Bug 32939: Have a generic APIClient object
    
    You always import the same, only once, and you can access other
    resources from the same object.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 866cc641d924496b9d201a3996843eb8787d618f
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Feb 10 11:19:08 2023 -0100

    Bug 32939: Have a generic fetch function for POST and PUT requests in vue modules
    
    Rebase to 32806 and prior to 32925. Squash
    More updates. Ready for review, for now.
    
    JD amended patch:
    * prettier
    * remove changes to AgreementRelationships.vue and EHoldingsLocalPackageAgreements.vue to have less files to update in upcoming patches
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a8847a0d1dfaeb44b838f713f595d8fbb5067423
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 7 20:54:47 2023 +0100

    Bug 32806: Move main-erm.ts to modules/erm.ts
    
    Looks fine.
    
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 710a3198932f89d2e3432e14175cd496f7276603
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 7 16:55:05 2023 +0100

    Bug 32806: (follow-up) Rename main.js to erm.js
    
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4f3ecedfde7698c444aa59d0fa86f8730145ecfe
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 2 21:23:13 2023 +0100

    Bug 32806: Move routes.js to routes/erm.js
    
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 998289850f373a6b83d1ee4387161575fd6d3def
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 2 21:16:58 2023 +0100

    Bug 32806: Rename ERMHome and ERMMain to Home and Main
    
    We don't need to repeat "ERM"
    
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bb3459cabc01acfdb118074fde4fe4ac1ee8e02c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 2 21:13:00 2023 +0100

    Bug 32806: Rename main.js to erm.js
    
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1edd4d45890b06c8c5604ae0e6ba847799b76ad9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 2 20:53:14 2023 +0100

    Bug 32806: Move Vue files for reusability
    
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 855e09163a4f92192756d1f783ab07cb8c00a972
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 14 15:07:46 2023 +0100

    Bug 32923: Fix x-koha-embed from EHoldings/*/*
    
    We were validating twice the input and it broke the x-koha-embed header.
    I don't really know what's happening, but here is how to recreate the
    problem:
    1. Edit Koha/REST/V1/ERM/EHoldings/Packages/EBSCO.pm
    2. Add the following lines in Koha/REST/V1/ERM/EHoldings/Packages/EBSCO.pm, in the list method
        warn $c->req->headers->header('x-koha-embed');
    3. curl -v -s -u koha:koha --request GET http://kohadev-intra.mydnsname.org:8081/api/v1/erm/eholdings/ebsco/packages --header "x-koha-embed: resources+count,vendor"
    
    => There is no vendor in the response
    => The warn displays "resources+count"
    
    If you apply this patch you will notice that "vendor" is part of the
    response and the warn displays "resources+count, vendor"
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b68a9a3596b093167927e8312e4245abff5f413e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 9 17:46:02 2023 +0100

    Bug 32923: Add 'vendor' for local packages
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b7ae86a13486142aa08ad5d141b1610532e4db47
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 9 10:55:56 2023 +0100

    Bug 32923: Some fixes in ERM specs
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 423ea2632776a8b30d727c68c827c35046601e8a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 9 10:38:28 2023 +0100

    Bug 32923: Fix new occurrences of x-koha-embed at top level
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit be8e06ebbda8d508f31014c5e73c1d828bd04f2b
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Feb 24 21:48:11 2023 +0000

    Bug 31563: (follow-up) Add missing TT filters
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a48bce7c3bd26a52b85384d725101929b3981c5c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 23 09:56:03 2023 +0100

    Bug 32935: (bug 13614 follow-up) Remove unused basketgroup.js
    
    Bug 13614 removed it. On bug 31056 we noticed that one function was
    still needed but we copied it in the corresponding .tt
    
    Now this JS file is no longer used and should be removed from the
    codebase
    
    Test plan:
      git grep basketgroup.js
    must not return anything
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f7d9eaa7b0fdcf5b928be9d7ba3b971670c187af
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Feb 10 21:59:40 2023 +0000

    Bug 32452: Link basket group on basket summary to basket groups page
    
    In most places we already link the basket group name to the
    basket group page, but not on the basket summary page.
    
    To test:
    * Create a basket/order with some order lines
    * Close the basket and check the checkbox for creating a basket group
    * Go back to the basket/order page
    * There will be a link 'Manage basket group', but the basket group name
      is only text
    * Apply patch
    * Reload the page, the basket group name should now be linked
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c88f1ba9ddef64881c808c1740a9b8fedc660d25
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Jan 18 04:38:36 2023 +0000

    Bug 32665: Fix typo in template condition
    
    This patch fixes a typo in a template condition so that
    the about.pl warning about RequireChoosingExistingAuthority is
    shown when it's the only warning to display
    
    Test plan:
    0. Don't apply the patch yet
    1. Go to http://localhost:8081/cgi-bin/koha/about.pl
    2. Note that "No warnings" is shown
    3. Apply the patch
    4. Go to http://localhost:8081/cgi-bin/koha/about.pl
    5. Note that there is a heading for "Warnings regarding the
    system configuration" and a specific warning about the
    "RequireChoosingExistingAuthority" system preference
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 908147205b0fb01e76b930b8fd178a23d15658d1
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 26 10:35:02 2021 +0000

    Bug 23656: Add cataloguing search bar to addbiblio
    
    This patch adds the search header to the cataloging editor page. With
    the staff redesign, this takes up very little space, so I think can be
    added and visible by default
    
    To test:
    1 - Apply patch
    2 - Load the basic cataloging editor for a bib
    3 - Note lack of search bar
    4 - Apply patch
    5 - Reload the page
    6 - You have a search bar
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f16baef8794870d12272cf173e5396a86aa7673c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 23 10:05:38 2023 +0100

    Bug 32926: Fix selenium tests
    
    We should not rely on existing data, and we should remove data at the end.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 28a0c039fe9dec3ac97f069f30638ca24bcbf338
Author: Andreas Roussos <a.roussos@dataly.gr>
Date:   Fri Feb 17 16:05:20 2023 +0100

    Bug 32926: Assign unique ids to <h3> elements
    
    If you perform a System preferences search for a common word
    such as "type", you lose the ability to expand or collapse some
    sections. In particular, you cannot expand/collapse the sections
    with names that appear more than once in the results page.
    All sections except the first one in each group of duplicates
    are affected by this. See https://imgur.com/a/NSslIcV for a demo.
    
    This patch fixes that by prepending the <h3> ids with the
    top-level System preference section name to make them unique.
    
    Test plan:
    
    1) Perform a System preferences search for a common word such
       as "type" or "log". In the results page, the "Policy" section
       will appear more than once. Now try to expand/collapse any
       "Policy" section but the first one. It won't work, only the
       first "Policy" section is toggled.
    2) Apply this patch and refresh the page.
    3) This time you should be able to expand or collapse all of
       the available system preference sections.
    4) Clicking on the "View all xxx preferences" links on the
       right hand side should take you to the correct System
       preferences tab *and* automatically scroll the appropriate
       section into view at the top of the page.
    
    Signed-off-by: Fridolin <fridolin.somers@biblibre.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 14d65264afacc69389849a193e82e3694ee11d25
Author: Andreas Roussos <a.roussos@dataly.gr>
Date:   Thu Feb 9 20:11:33 2023 +0100

    Bug 32926: Add Selenium tests
    
    This adds a new Selenium test to automatically test the correct
    behaviour when expanding/collapsing System preferences sections
    after a System preferences search.
    
    Test plan:
    
    1) Apply the other patch from this bug report, then run the
       new Selenium unit test which should pass without failures:
    
       prove -v t/db_dependent/selenium/system_preferences_search.t
    
    Signed-off-by: Fridolin <fridolin.somers@biblibre.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d9d473d3399c85d1705ec18c7c85e17b7f30b366
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jan 20 09:34:57 2023 +0000

    Bug 32687: Get server version in Context::get_versions
    
    Test plan:
    Run t/db_dependent/Context.t
    Check About/Server information/MySQL version.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7c8434553a29b177b879f958c59487cf854c3c13
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Feb 6 13:10:30 2023 +0000

    Bug 31413: Set focus for cursor to Selector when adding a new audio alert
    
    This patch adds a step to the process of displaying the new audio alert
    form so that focus will be set to the first field when the form has
    finished appearing. The typical "focus" class only works on elements
    which are present in the initial DOM when the page is displayed.
    
    To test, apply the patch and go to Administration -> Audio alerts.
    
    Click the "New alert" button. When the form appears cursor focus should
    be on the "Selector" field.
    
    Also test the edit process: When editing an existing alert there should
    not be automatic cursor focus.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3eea589ca10956fb18ec53f32c93cfe5defb9756
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Jan 4 17:43:14 2023 +0000

    Bug 32568: Add page-section to checkedin table
    
    To test:
    1. Apply patch
    2. Checkin some items that are checked out/
    3. Make sure the page-section looks right.
    
    Note: There are some indentation changes.
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3de0da88a0a2555d2c77b20d11e5f0d637cb6f18
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Feb 24 17:28:41 2023 -0300

    Bug 32967: DBRev 22.12.00.007
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f7e05c32633d30da88d590a7ad405ebe97b46443
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Feb 15 15:15:15 2023 +1300

    Bug 32967: Fix PICKUP_RECALLED_ITEM and RECALL_REQUESTER_DET notices
    
    This patch fixes two recalls notices which are referencing old column
    names, so they leave empty fields when the notices are generated.
    
    To test:
    
    1) Apply database updates and restart services
    2) Go to Tools -> Notices
    3) Find the RECALL_REQUESTER_DET notice, open the Print tab
    4) Confirm there are no references to recalls.waitingdate or
    recalls.recallnotes. Confirm the reference is fixed to
    recalls.waiting_date and recalls.notes
    5) Find the PICKUP_RECALLED_ITEM notice, open the Email tab
    6) Confirm there are no references to recalls.branchcode or
    recalls.expirationdate. Confirm the reference is fixed to
    recalls.pickup_library_id and recalls.expiration_date
    
    Sponsored-by: Catalyst IT
    
    https://bugs.koha-community.org/show_bug.cgi?id=32697
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cf06f05ec0a3bc5f965ba09168e3dc8c82e0dbb3
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Jan 13 13:23:17 2023 +0000

    Bug 30869: Add the ability to delete stock rotation rotas
    
    'At the moment, it isn't possible to delete any rotas that have 0 items linked to it. The only way to do it is in MySQL - it would be good if this was possible from the staff client.'
    This patch implements this, and also implements the possibility of deleting a rota with items linked to it, providing a warning that the item(s) currently in rotation will remain at its/their current stage library.
    
    Test plan:
    1) Enable StockRotation system preference
    2) Cataloging > Stock rotation > New rota
    3) Enter Name, save
    4) Verify 'Delete' button shows on the right
    5) Click 'Delete' -> Confirm 'Yes'
    6) Repeat steps 1-3 and click 'Manage'->'Stages'
    7) Add a new stage, enter Library and Duration, click 'Save'
    8) Return to rotas, click 'Manage'->'Items'
    9) Add item, enter barcode, click 'Save' (optional: add more than 1 item)
    10) Optional: Click 'Move to next stage' and verify that item is now in different branch
    11) Click 'return to rotas' and press 'Delete'
    12) Verify the warning now shows, because items are attached, with the attached items count
    13) Click 'Delete' -> Deletion is successful
    14) If you did step 10, verify the item is still in the branch that it was at the time the rota was deleted
    
    Sponsored-by: PTFS-Europe
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    JD Amended patch:
    * Fix QA failures
       FAIL   forbidden patterns
                    forbidden pattern: tab char (line 150)
                    forbidden pattern: tab char (line 151)
    * Adjust commit message to describe what the patch does
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 337ac711679889c01c71772fe438cadfc39231fe
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Feb 24 17:18:37 2023 -0300

    Bug 22428: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5926e7246b1c0d7bd23196a01cb098fa20ce6dfa
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Feb 24 17:17:37 2023 -0300

    Bug 22428: DBRev 22.12.00.006
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cce48fc7d41ee9a0a38ae6b537830de886f86fb4
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue Feb 21 10:31:13 2023 +0000

    Bug 22428: Change datatype of field_value to text
    
    This patch changes the datatype of the field_value column in
    marc_modification_template_actions to "text". This is to stop text
    strings longer than 100 characters from being chopped short and allow
    longer strings up to 65,000 characters.
    
    Test plan:
    1) Follow the same steps outlined by Caroline in the problem statement
    2) Apply patch
    3) Follow the steps again and this time the text should upload with no
       problem
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aba2453ad65f8cb4cc9ea609dbf5bb3ed6f241db
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jan 9 13:43:43 2023 +0000

    Bug 32594: Add a dedicated Elasticsearch biblio indexing background queue
    
    Currently we generate large numebrs if single record reindex for circulation and other
    actions. It can take a long time to process these as we need to load the ES settings for each.
    
    This patch updates the Elasticsearch background jobs to throw records into a new queue
    that can be processed by it's own worker and adds a dedicated worker that batches the jobs
    every 1 second.
    
    To test:
    1 - Apply patches, set SearchEngine system preference to 'Elasticsearch'
    2 - perl misc/search_tools/es_indexer_daemon.pl
    3 - Leave the running in terminal and perform actions in staff interface:
        - Checking out a bib
        - Returning a bib
        - Editing a single bib
        - Editing a single item
        - Batch editing bibs
        - Batch editing items
    4 - Confirm for each action that records are updated in search/search results
    5 - Stop the script
    6 - set SearchEngine system preference to 'Zebra'
    7 - perl misc/search_tools/es_indexer_daemon.pl
    8 - Script dies as Elasticsearch not enabled
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    
    Bug 32594: (follow-up) Adjust logging per bug 32612
    
    JD amended patch: tidy! There were tabs here...
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4c51596a4b3a514adc4b6eccb3fd2c1fa4660a61
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Feb 17 12:00:49 2023 +0000

    Bug 32992: Move background_jobs_worker to misc/workers
    
    On bug 32594 we are adding a new worker, dedicated to Elastic indexing.
    We should have a common place for workers, and we agreed on misc/workers
    
    To test:
    1 - Apply patch
    2 - reset_all in koha testing docker
    3 - ps aux | grep background
    4 - Confirm the workers are running, and running in the new directory
    5 - Perform a batch item modification
    6 - Ensure the job is processed by the worker
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9b35e6e0cea424144d56c3a5fae7911b06ead905
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Feb 23 22:07:09 2023 +0000

    Bug 33014: (QA follow-up) Move filters before navigation in sidebar
    
    This follows the pattern we have on other pages like suggestions,
    tags and invoices by putting the filters on top of the navigation
    in the sidebar on the left.
    
    To test:
    * Search subscriptions
    * Verify that on the left it's navigation - search options
    * Apply patch
    * Verify it's now: search options - navigation
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9e61dc8009b899eb3e6b25c4e303f8bab9b068a3
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Feb 23 16:42:36 2023 +0000

    Bug 33014: Improve serial searches
    
    This patch adds a new include for the serials 'advanced search' and
    uses that include on the serials home and serials search pages. It also
    adds some extra options ( Call number, publisher, vendor ) to the
    search included in the header.
    
    To test:
    1. Apply patch
    2. Go to the serials module and notice the main page now has an
       'advanced search' form. Make sure it works.
    3. After doing a search you'll be taken to serials-search.pl. Make sure
       the search forms in the side bar and in the header look good and work
       right.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b26d2fa578bce10e4060ab625c53bae9debe780f
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Feb 23 14:51:30 2023 +0000

    Bug 32805: Add tests
    
    JD amended patch: tidy
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 14b2c2f0b27a728772920dfe97afae7ddc2fa412
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Feb 2 19:08:08 2023 +0000

    Bug 32805: Update location when recording a localuse in statistics table
    
    To test:
    1. Create a statistical patron and checkout, checkin to them.
    2. Notice in the statistics table that the location is NULL
    3. Apply patch
    4. Try steps 1-2 again
    5. The location should be correctly recorded in statistics.location
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9729621c1d8bf2573e7b7d08a69e6ef572b3388d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Feb 16 15:25:12 2023 +0000

    Bug 32982: Add primary button to libary group modals
    
    This patch updates the New and Edit group modals in the library groups
    admin page to have a primary 'Save'/'Update' button and a default
    'Cancel' button.
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a2edbc0529cece0e0cca0f3f2540132d19a5ebb3
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:52 2023 +0100

    Bug 32829: Fix cataloguing/value_builder/unimarc_field_115b.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0117e26d9e099256567d2e97bbdb5ec7b2f61e77
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:52 2023 +0100

    Bug 32828: Fix cataloguing/value_builder/unimarc_field_115a.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e7ff8277b9bb700a172d769e1912b16dafdb754a
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:52 2023 +0100

    Bug 32827: Fix cataloguing/value_builder/unimarc_field_110.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3df31967a8d05a3c7074a1afd2fed939462050ef
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Feb 24 16:47:46 2023 +0000

    Bug 32826: (QA follow-up) Remove tab
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6c948b933e3991bc8ec17022cf87ad4e37ce1dd2
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:51 2023 +0100

    Bug 32826: Fix cataloguing/value_builder/unimarc_field_106.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 19c26fcc5a5ae72a2d6cd85d6586b82b154cbd08
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:51 2023 +0100

    Bug 32823: Fix cataloguing/value_builder/unimarc_field_100_authorities.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4fe0e47da22aac747014a0743d2edbb5af4a1f4a
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Jan 31 12:38:45 2023 +0000

    Bug 32768: Autocomplete suggestions container should always be on top of other UI elements
    
    This patch moves the z-index setting of .ui-autocomplete from
    addbiblio.css to staff-global.scss for wider use
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2dfafa5b9d3c8440d0f823d34661fbeeb0291b60
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Feb 10 23:57:44 2023 +0100

    Bug 32525: Standardize labels on list of ILL requests and ILL request details page
    
    This changes some labels so they match up between the
    ILL requests list and the detail page of a request:
    
    * 'View biblio details' to 'View bibliographic record'
    * 'View borrower details' to 'View patron details'
    * 'Branch' table heading to 'Library' in list view
    * 'Request number' to 'Request ID' in list view
    * 'Type' to 'Request type' in detail view
    * 'Bibliographic record' to 'Bibliographic record ID"
    
    To test:
    *  Install a backend and activate the ILL module, see:
       https://wiki.koha-community.org/wiki/ILL_backends
    *  Add a new request
    *  Compare the table headings with the labels on the detail page
    *  Apply patch
    *  Verify listed changes from above
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8f1ce6c40e61065d444755dee32e695ad8232ecb
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Feb 20 20:57:43 2023 +0000

    Bug 33011: Fix capitalization for "Show in Staff interface?"
    
    This fixes another previously missed occurence.
    
    To test:
    * Activate SavedSearchFilters system preference
    * Search anything and save your search as a filter from
      the staff interface results page
    * Go to Administration > search filters
    * Click 'Edit search' for your saved filter
    * Confirm you are taken to advanced search page
    * On top of the page, you'll see: Show in Staff interface?
    * Apply patch
    * Verify the string was corrected
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e1b7591effa22f787bbf175aeb170f343ce07498
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Mon Jan 9 15:12:18 2023 +0000

    Bug 32495: Mis-matched required fields in UI and api
    
    The "description" field is marked as required in the UI when creating a new Agreement. This flag has been removed to match the API where it is not a required field. Is Perpetual has not been marked as required as it is a checkbox with a default selection so will always provide a value.
    
    Test plan:
    1) In the ERM module, add a new agreement and observe that the Description field is required
    2) Apply patch
    3) Repeat step 1 but this time the Required flag will not be visible.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ba84c41a88db57773716ffa40fb35a529db26e02
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:51 2023 +0100

    Bug 32822: Fix cataloguing/value_builder/unimarc_field_010.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9a672aed3d45b3741169565b17432e42c962c7d3
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:51 2023 +0100

    Bug 32820: Fix cataloguing/value_builder/stocknumberAV.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 96afaeb36d654e556e16ad8e0265947df789f962
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 20 15:21:21 2023 +0000

    Bug 32912: Use template wrapper for notices tabs
    
    This patch updates the notices template to replace tab markup with
    the use of WRAPPERs.
    
    This patch also makes a minor correction to the color of Bootstrap
    panels.
    
    To test you must have more than one translation installed, and the
    TranslateNotices preference should be enabled.
    
    - Apply the patch and go to Tools -> Notices.
    - Edit a notice.
    - You should see tabs for each available language, for example
      Default, English, French.
    - Test adding content to each language to confirm that the correct
      information is saved under the correct tab.
    - Disable the TranslateNotices preference to confirm that the
      display is still correct without the tabbed interface.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b19128eca15cecfe60fea21dc4bb9f686943c448
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Feb 20 22:22:08 2023 +0000

    Bug 33016: Change breadcrumbs and page title on MARC diff view to cataloging
    
    Some remaining to dos of us moving the staged import tools from
    tools to cataloging.
    
    To test:
    * Export a record from your Koha catalog
    * Import it using the staged MARC import tool, matching on biblionumber
      (the diff view is only visible if the record matched an existing one)
    * View the staged records
    * Click on the 'Diff' link
    * Verify that the page title and breadcrumbs still read 'Tools'
    * Apply patch
    * Not these should read 'Cataloging'
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2d25c2860c4b06a63048834fb99b2968f1fd57b1
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:51 2023 +0100

    Bug 32824: Fix cataloguing/value_builder/unimarc_field_100.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e557357e62b6d8655f40cd576a8de846a687abf1
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:52 2023 +0100

    Bug 32835: Fix cataloguing/value_builder/unimarc_field_122.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    https://bugs.koha-community.org/show_bug.cgi?id=32825
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7ec85d23949b97dd0eea3efbd7acdf4abf3a068e
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:51 2023 +0100

    Bug 32825: Fix cataloguing/value_builder/unimarc_field_105.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f4029d7b71edc6472f330a7f8c8c60005205154b
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Feb 10 00:29:55 2023 +0100

    Bug 31563: Make zero claims show correctly for translations
    
    A tag that only contains 0 is turned into an empty tag by
    the translation scripts. This turns "Claims ( 0 0 )" into
    "Claims (   )" in translated templates.
    
    To test:
    * Install an additional language (fr-FR, es-ES) and activate
      it in the system preferences
    * Look at the checkouts and details tabs in any patron account
      in the staff interface
    * Verify the claims tab shows without the zeros as described above
    * Apply the patch
    * Update the translation so the templates are recreated with the change
    * Verify that the 0 0 now show correctly.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 274d3d45b0eda1b43efa55d76633931b28c25b2e
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Jan 17 22:56:40 2023 +0000

    Bug 31248: (follow-up) Add fix to checkout history page
    
    Signed-off-by: Christopher Brannon <cbrannon@cdalibrary.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 16ce0e420ead91609892de839cae07a661f198c7
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Dec 28 18:42:15 2022 +0000

    Bug 31248: Fix responsiveness of tables on OPAC summary page
    
    This patch adds back the responsive styles of the tables on the OPAC summary page. This includes all of the following tables that may appear:
    
    opac-user-checkouts
    opac-user-relative-issues
    opac-user-overdues
    opac-user-fines
    opac-user-relative-fines
    opac-user-clubs
    opac-user-holds
    opac-user-recalls
    opac-user-article-requests
    opac-user-overdrive
    opac-user-recordedbooks
    
    To test:
    1) Make sure you have checkouts in your account
    2) Log into the OPAC
    --> In 'Your summary' current checkouts are in a table
    3) Go to 'You checkout history'
    --> Current and previous checkouts are in a table
    4) Switch to mobile view (in Firefox, Ctrl + Shift + M)
    --> Checkout history is still in a table and the last column is not entirely visible (depending on the content of the columns, I suppose)
    5) Go to 'Your summary'
    --> Current checkouts are presented in list form instead of a table
    6) Apply patch and rebuild the OPAC CSS ( https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_interface )
    7) Try the tables again, they should appear in a list form when the screen is smaller than 608px.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2c4dbb7c1e0e8837e54ed44f453ac27473cd0c45
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Feb 24 14:43:18 2023 -0300

    Bug 33054: Fix unit tests
    
    This patch fixes the tests by making sure:
    - The branch in userenv matches the home/holding branch so there are no
      circ rules getting in the middle
    - Gives the user superlibrarian permissions for the same reasons above.
    
    To test:
    1. Run:
       $ ktd --shell
      k$ for i in $(seq 1 20 ); do prove t/db_dependent/Koha/Acquisition/Order.t ; done
    => FAIL: Notice it fails quite often. You can ctrl+c to interrupt once
    it has failed at least once.
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: it doesn't fail a single time
    4. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6498c5835c99bfc628ae87bbc43808dfd89f0d87
Author: Jérémy Breuillard <jeremy.breuillard@biblibre.com>
Date:   Mon Apr 25 15:03:32 2022 +0200

    Bug 22490: Some strings in JavaScript files are untranslatable
    
    Javascript function `_` works only if used in template file (.tt or
    .inc).
    In .js files we should use `__`
    
    This patch updates .js files to use `__` instead of `_`
    
    Test Plan:
    1. Do not apply the patch yet
    2. Run `npx gulp po:update --lang fr-FR` (choose another language
       if you prefer)
    3. Open misc/translator/po/fr-FR-messages-js.po and search "Please
       select a CSV (.csv) or ODS (.ods) spreadsheet file"
    4. Notice that the references above only mention biblio_framework.js
    5. If not already translated, translate it
    6. Run misc/translator/translate install fr-FR
    7. Go to staff interface and change language to fr-FR
    8. Go to Administration » Authority types and click on "Actions ->
       Import"
    9. In the modal window, click on "Import" without selecting a file. You
       should see an alert with the non-translated text
    10. Apply the patch
    11. Run `npx gulp po:update --lang fr-FR`
    12. Open misc/translator/po/fr-FR-messages-js.po and search "Please
        select a CSV (.csv) or ODS (.ods) spreadsheet file"
    13. Notice that the references above now also mention authtype.js
    14. If the translation is marked as fuzzy, remove the fuzzy flag
    15. Run misc/translator/translate install fr-FR
    16. Go to staff interface again
    17. Go to Administration » Authority types and click on "Actions ->
        Import"
    18. In the modal window, click on "Import" without selecting a file. You
        should see an alert, this time with the translated text
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c564c8a69614b7f43584d7cdd9f5ffbdfff9a935
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 31 17:20:14 2023 +0100

    Bug 32728: ERM - Update search header depending on navigation
    
    Search header should change to match the section you are in.
    
    Default is "agreement". If you are in "local titles" or "local
    packages", the header will be positionned on the relevant tab.
    
    To replicate:
    
    1. Enable the ERM module: ERMModule system preference.
    2. Go to the ERM module: Home > E-resource management.
    3. Select the options from the sidebar menu (Agreements, Packages and Titles),
       and note that the ERM search header options don't change.
    4. Add a minimal agreement, package and title.
    5. Change the search header to another option, for example 'Search titles',
       then perform a search. Note that:
       - the appropriate sidebar menu option is highlighted, for example: 'Titles'
       - the search header changes back to 'Agreement search'
    6. Apply patch, run yarn build
    7. Verify the search options are now switched when moving between pages
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4a28d4295956e077c833b1bc91a12fb4a1c26ad7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Feb 23 07:56:31 2023 -0300

    Bug 33051: Make 22600075.pl idempotent
    
    As there is no check, this dbrev could cause trouble if run twice. It
    doesn't look like it is going to get backported to 22.05, but just in
    case...
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 77b3e01ca04d41be5b95222c84a223f9751dfe99
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 23 12:09:42 2023 +0100

    Bug 32307: Fix local cover images
    
    We were not calling the function here!
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 040ba93360d70bbdf161cb0e98136272d1ed5fbf
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 23 09:20:25 2023 +0100

    Bug 31051: Generate items correctly in test
    
    There was a misplaced bracket in build_object.
    To generate item you should need build_sample_item anyway.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d74ce48b7490eafd427b0abc378260d58323bf6d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 23 09:12:04 2023 +0100

    Bug 31051: Fix test
    
    When savings ends with a "0"
    
    koha_1       |     #   Failed test 'Savings correctly calculated from current issues'
    koha_1       |     #   at t/db_dependent/Koha/Patron.t line 1380.
    koha_1       |     #          got: '34583.70'
    koha_1       |     #     expected: '34583.7'
    koha_1       |
    koha_1       |     #   Failed test 'Savings correctly calculated from current and old issues'
    koha_1       |     #   at t/db_dependent/Koha/Patron.t line 1385.
    koha_1       |     #          got: '34583.70'
    koha_1       |     #     expected: '34583.7'
    koha_1       |     # Looks like you failed 2 tests of 4.
    koha_1       |
    koha_1       | #   Failed test 'get_savings tests'
    koha_1       | #   at t/db_dependent/Koha/Patron.t line 1388.
    koha_1       | # Looks like you failed 1 test of 20.
    koha_1       | [00:07:57] t/db_dependent/Koha/Patron.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e7d40b7a99c6ad8df8f91307560bb6021143c73f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 23 09:39:42 2023 +0100

    Bug 32353: Fix erm_agreements.t
    
    Agreement.vendor_id has a default value defined in TestBuilder, but here
    we were assuming there was one.
    We should then generate it and pass the value when building the
    agreement objects.
    
    The failure was:
    koha_1       |     #   Failed test '200 OK'
    koha_1       |     #   at t/db_dependent/api/v1/erm_agreements.t line 95.
    koha_1       |     #          got: '400'
    koha_1       |     #     expected: '200'
    koha_1       |
    koha_1       |     #   Failed test 'exact match for JSON Pointer ""'
    koha_1       |     #   at t/db_dependent/api/v1/erm_agreements.t line 95.
    koha_1       |     #     Structures begin differing at:
    koha_1       |     #          $got = HASH(0x55cde781a480)
    koha_1       |     #     $expected = ARRAY(0x55cde75af9c8)
    koha_1       |     # Looks like you failed 2 tests of 32.
    
    400 because we were calling
    http://localhost:8081/api/v1/erm/agreements?vendor_id='
    which returns {"errors":[{"message":"Expected integer - got string.","path":"\/vendor_id"}],"status":400}%
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c500fd3c61f3ef5527c31d1904c3174f784452e2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 22 14:43:02 2023 +0100

    Bug 32770: Restore phone
    
    all_phone vs all_phones
    That was caught by Selenium tests t/db_dependent/selenium/patrons_search.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 18f3b7619bc6b648bb074b2be836e01a35c52b99
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Feb 20 22:59:34 2023 +0000

    Bug 32918: (follow-up) Add new lines for formatting consistency
    
    This adds new lines between each authorised value for better
    readability and to match the formatting of the rest of the file.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ff18e46ca64bc729704668ca231b04fecc55551e
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed Feb 8 17:11:40 2023 -0500

    Bug 32918: ERM authorized values should be in installer/data/mysql/en/mandatory/auth_values.yml
    
    This patch moves the authorized value insertions for ERM categories into
    the language-specific auth_values.yml file.
    
    To test:
    1. Count the number of authorized values in the mandatory categories
    
    select count(*) from authorised_values where category in ('YES_NO', 'PAYMENT_TYPE', 'HSBND_FREQ', 'ERM_AGREEMENT_STATUS', 'ERM_AGREEMENT_CLOSURE_REASON', 'ERM_AGREEMENT_RENEWAL_PRIORITY', 'ERM_USER_ROLES', 'ERM_LICENSE_TYPE', 'ERM_LICENSE_STATUS', 'ERM_AGREEMENT_LICENSE_STATUS', 'ERM_AGREEMENT_LICENSE_LOCATION', 'ERM_PACKAGE_TYPE', 'ERM_PACKAGE_CONTENT_TYPE', 'ERM_TITLE_PUBLICATION_TYPE', 'COUNTRY', 'LANG', 'qualif');
    
    --> There should be 929
    
    2. Delete the authorized values from these categories
    
    delete from authorised_values where category in ('YES_NO', 'PAYMENT_TYPE', 'HSBND_FREQ', 'ERM_AGREEMENT_STATUS', 'ERM_AGREEMENT_CLOSURE_REASON', 'ERM_AGREEMENT_RENEWAL_PRIORITY', 'ERM_USER_ROLES', 'ERM_LICENSE_TYPE', 'ERM_LICENSE_STATUS', 'ERM_AGREEMENT_LICENSE_STATUS', 'ERM_AGREEMENT_LICENSE_LOCATION', 'ERM_PACKAGE_TYPE', 'ERM_PACKAGE_CONTENT_TYPE', 'ERM_TITLE_PUBLICATION_TYPE', 'COUNTRY', 'LANG', 'qualif');
    
    3. Apply patch
    4. Load the mandatory authorized values
    
    ./misc/load_yaml.pl --file installer/data/mysql/en/mandatory/auth_values.yml --load
    
    5. Redo step 1
       --> There should be the same number (929)
    6. Update translations
    
    cd misc/translator
    ./translate update xx-XX
    
    7. Search the po/xx-XX-installer.po file for any of the loaded
       authorized values
    
       For example,
    
       grep "Abstract and index" po/xx-XX-installer.po
    
       --> descriptions should be translatable
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 813bd47b4c6052da7f320096e226ab013a054c5f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 25 13:06:40 2022 +0100

    Bug 32353: Don't generate item group for holds in tests
    
    See bug 31447, we don't want the tests to deal with potential failures
    because of some item groups.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d766992f2b9b077753a285b18f59b74c17b92e53
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 25 13:17:46 2022 +0100

    Bug 32353: Pick the default value for FK
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4bf5bcc940f25a254543332a6ee4359bdb77a404
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Feb 22 10:03:20 2023 -0300

    Bug 32978: Updated yarn.lock
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e5b28d9c40cab651079eadc1b64d2479a34cbbeb
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Feb 15 17:36:57 2023 +0000

    Bug 32978: Replace node-sass with dart-sass
    
    'npm install' fails in ktd on aarch64, giving unsupported architecture error for node-sass.
    
    This patch addresses this by replacing node-sass with dart-sass, updating our gulpfile
    accordingly. Some corrections have been made to SCSS to fix warnings
    raised during the build process.
    
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    Works like a charm. Great work oleonard! Tested on Apple M1, e.g. aarch64.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Edit: I removed some useless formatting changes in the gulpfile, and the
    yarn.lock changes as well.
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 98eca9807f4f1ae6b5e4f162d399cbe305b848ed
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Feb 22 09:22:12 2023 -0300

    Bug 31051: DBRev 22.12.00.005
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8acd67b9af1c8ae8045092d7d5aef3658bccbd90
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Feb 9 11:34:02 2023 -0300

    Bug 31051: (QA follow-up) Fix misplaced syspref
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 39a2763109ba2604b9fa738f302b3666760265c0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Feb 9 11:26:56 2023 -0300

    Bug 31051: (QA follow-up) Use a single query and avoid duplicated sums
    
    This patch makes the `get_savings` method use a single query to
    calculate the sum of the replacement prices. This way we save one query
    per item and just rely on the DB features.
    
    It has a side effect: we are not summing items twice.
    
    Added tests for the 'itenumber is null' pathological but common use
    case (specially in old_issues), as mentioned by Lucas. Handling for this
    is added (grep filtering out undefined ones) and also in the return, for
    the empty case, with // 0.
    
    To test:
    1. Apply this patch
    2. Run:
       qa -c 6 --run-tests
    => SUCCESS: All good
    3. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f177d30ab43c64e9f0f5c06cf041fcfb37e53797
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Aug 29 16:30:01 2022 +1200

    Bug 31051: (follow-up) Tests for get_savings and more
    
    - Added tests in t/db_dependent/Koha/Patron.t
    - Added wording to OPACShowSavings syspref about anonymised checkout
    history
    - Added IDs to the savings messages on the OPAC
    - Prevent explosion if a checked out item has been deleted
    
    Sponsored-by: Horowhenua Libraries Trust
    Signed-off-by: Hammat Wele <hammat.wele@inlibro.com>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4bd0cb39abca3f2a2dbe80fd567e6b956bb9a52a
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Aug 28 13:14:08 2022 +0000

    Bug 31051: (QA follow-up) Simplify savings wording for reading history
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8164949617b20ceaf77330e5fa76bb3726e19c43
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Aug 15 13:38:02 2022 +1200

    Bug 31051: (follow-up) Simplify savings wording for OPAC
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dfa606bcf514c9cdf22642a037e0f53c34e73648
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Jun 28 16:58:03 2022 +1200

    Bug 31051: Show patron savings on the OPAC
    
    This new feature shows a patron how much they have saved by using the
    library rather than purchasing items. Savings are calculated based on
    item replacement prices. The system preference allows you to choose
    where to display the savings - the user page, the summary box on the
    OPAC homepage, or the checkout history page.
    
    To test:
    1. Update database and restart services
    2. Confirm the new OPACShowSavings system preference is found in the
    OPAC tab of Administration -> global system preferences. There should be
    no options selected.
    3. Find a patron with a checkout history, or check out a few items to a
    patron.
    4. Test with different values of OPACShowSavings and confirm that
    savings are shown in the expected places.
    
    Sponsored-by: Horowhenua Libraries Trust
    
    Signed-off-by: Marie-Luce <marie-luce.laflamme@inlibro.com>
    Signed-off-by: Axelle <axelle.clarisse@univ-amu.fr>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6b0ffd4579a916e00cba191b508e467fa94a8d4c
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Jun 27 17:11:23 2022 +1200

    Bug 31051: Add OPACShowSavings system preference
    
    Signed-off-by: Marie-Luce <marie-luce.laflamme@inlibro.com>
    Signed-off-by: Axelle <axelle.clarisse@univ-amu.fr>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 587ab3ddb850398cd1ba26b8ff2b9369651b7a67
Author: Mason James <mtj@kohaaloha.com>
Date:   Tue Feb 21 15:01:21 2023 +1300

    Bug 32994: Remove breaking css/maps/*.map files from Makefile.PL
    
    to test:
     - run makefile, note failure
    
      $ perl Makefile.PL
      $ make
      $ make install
      webpack 5.74.0 compiled with 3 warnings in 20831 ms
      Done in 36.01s.
      make: *** No rule to make target 'koha-tmpl/opac-tmpl/bootstrap/css/maps/opac-rtl.css.map', needed by 'pm_to_blib'.  Stop.
    
     - apply patch
     - run makefile, note success
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0fdc27672a5f2742fbd3a391146885a6c8a90c19
Author: Mason James <mtj@kohaaloha.com>
Date:   Sat Feb 18 01:21:16 2023 +1300

    Bug 32994: Remove compiled files from src (2)
    
    this patch adds 2 files that stops dpkg-source from including ./node_modules dir into koha-common.deb package
    
    to test...
     - build a package, note failure
     - apply patch
     - build a package, note success
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 967c61a190cd0da395e8acf8e8cbf4ee3f12eb37
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Wed Dec 14 13:08:38 2022 +0000

    Bug 32338: OPAC - Mobile - Selection toolbar in search result is shifted and not adjusted
    
    To reproduce:
    1- Go to the OPAC
    2- Inspect the webpage and switch to mobile view
    3- Perform a search
    4- Check the top of the results table
    5- Notice that options are not displayed correctly, there is a blank space between 'Unhighlight' and 'Select All'
    6- Apply the patch
    7- compile the .scss file 'yarn build --view opac'
    8- Clear your navigator caches
    9- repeat step 1, 2, 3, 4
    10- The options are now displayed correctly
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e11646eb618df03528a4f70c560c23ab9b622083
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Feb 10 15:03:11 2023 +0000

    Bug 32941: Sys prefs side menu styling applying where not intended
    
    In bug 32881 I introduced changes to make system preferences sub menu items easier to read. At the time, I couldn't find other instances of ul ul in the templates code, but turns out the ERM module has a <ul> inside a <ul>, and possibly other places.
    The original selector was too loose and was applying where not intended, this patch rolls back 32881 changes and puts the changes in a tighter selector.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0f042b02c72e7f751b07d5a53be94d982119a17e
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Dec 28 21:33:27 2022 +0000

    Bug 32460: Add missing columns to table configuration for patron categories
    
    The table settings were missing the recently added columns, resulting
    in strange behaviour using the column visibility settings:
    
    * patron expiration
    * can be guarantee
    * exclude from local holds priority
    
    To test:
    * Go to administration > patron categories
    * Verify some columns are missing from the Columns selection
    * Apply patch
    * Verify the missing columns are now present and all columns
      can be hidden/unhidden as expected
    * Change settings for the table in administration > table settings
    * Verify the settings have the desired effect
    
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d6433ff71eba75eea9cd7d5e7da8cac62e7ade01
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Feb 2 15:03:39 2023 +0000

    Bug 32798: Update parameter passed to Koha::Biblio::Metadata->record
    
    To test:
    1 - Enable OAI sets, and define a set with mapping 952 y = BK
    2 - perl misc/migration_tools/build_oai_sets.pl -v -i -r
    3 - The script dies:
        Koha::Biblio::Metadata->record must be called on an instantiated object or like a class method with a record passed in parameter
    4 - Apply patch
    5 - Repeat
    6 - Success!
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Edit: tcohen updated indentation

commit 1d3159922070059cf55c71f31a1297dbb9bfe4ed
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Feb 21 10:02:20 2023 -0300

    Bug 32891: (QA follow-up) Fix perlcritic error
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f2f288a8c409ae32fb15e764bfd980d022315ff8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 7 08:48:29 2023 +0100

    Bug 32891: Fix slot selection in last hour
    
    If the curbside pickup module is configured with slot not on the hour
    (minutes=00), the slots in the last (not complete) hour won't be
    selectable.
    
    Test plan:
    Create the following configuration:
    pickup interval: 10
    Opening hours: 08:00 to 11:30
    Create a pickup and select 11:10 or 11:20
    => Without this patch the pickup is not created and the UI displays "Wrong slot selected"
    => With this patch you are able to create the pickup
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 64e14f90b5c180b561bfe9c07e30f1456ef49a2e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 17 17:25:39 2023 +0100

    Bug 32653: Fix curbside pickup if configured on more than 1 branch
    
    If curbside pickup is configured on more than 1 branch, the calendar
    will not display the correct day.
    
    We are always selecting the days for the last branch.
    
    Test plan:
    Configure curbside pickup for
    CPL Monday 8:12
    FPL Tuesday 12:15
    
    Login at the opac, select CPL, notice Tuesday are available
    
    Apply the patch and confirm all is working correctly now.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9863c18cc87e0e49923eeb585319f6e6c46172b0
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Feb 9 16:50:38 2023 +0000

    Bug 32933: Use val() instead of attr("value") when getting field values with jQuery
    
    This patch replaces instances in Koha's templates where "attr('value')" is
    used to get the value of a form field, using "val()" instead. This
    ensures that we get the current value of the field, not just the
    value of the field when the page first loaded.
    
    To test, apply the patch and test the following pages:
    
    - Tools -> Tags. Use the "Check lists" form in the right-hand sidebar
      to test the approval status of some approved and rejected tags. It
      should correctly respond with the tag's status.
    - Cataloging -> Label creator.
      - New -> Printer profile. Each offset and creep field should correctly
        reflect the selected value in the "Units" dropdown. Changing the
        dropdown should make the units change accordingly.
      - New -> Label template. Perform the same tests as above.
    - Tools -> Patron card creator.
      - New -> Layout. If necessary, check the "Field 1" checkbox. The
        units should be displayed correctly and change as you change the
        "Units" dropdown.
      - New -> Printer profile,
      - New -> Card template: Perform the same tests as above.
    - Lists -> List contents.
      - Check that the "Add to" dropdown menu works for adding selected
        titles to a cart or another list.
    - Back record modification. Submit a batch of records for modification
      and go to Administration -> Manage jobs.
      - View the details of the job you just submitted.
      - Confirm that the "Add modified records to the following list"
        dropdown works correctly.
    - Cataloging -> Find a bibliographic record -> Edit items.
      - Confirm that clicking a cell in the table of existing items
        triggers the "Edit item/Delete item" menu, and that these links
        work correctly.
    
    Works as described.
    
    Signed-off-by: Alex Buckley <alexbuckley@catalyst.net.nz>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 956ae915b0619e93ab3513b9ad6a4b53add640a7
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Feb 18 10:04:07 2023 +0000

    Bug 33002: Restore "Archive selected" for archiving multiple suggestions
    
    It looks like this button, added by bug 30599 was later
    accidentally removed again. This is giving it a comeback.
    
    To test:
    1 - Apply patch
    2 - Create some purchase suggestions
    3 - Select several suggestions
    4 - Click 'Archive selected'
    5 - Suggestions are archived
    6 - You can view archived suggestions by selecting 'Suggestion information'->'Include archived'
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 53bebb413aec3796ce66311b0e66c872e01fee19
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Feb 20 11:07:44 2023 -0300

    Bug 32898: Avoid hardcoding user/pass in tests
    
    This patch makes the authentication parameters be configurable through
    env. Before this, it was hardcoded to koha/koha, which only works if the
    ktd defaults haven't been tweaked.
    
    If no env is defined, it fallsback to koha/koha.
    
    In order to pass the ktd configured params, the tests need to be run
    like:
    
    $ yarn cypress run --env KOHA_USER=$KOHA_USER,KOHA_PASS=$KOHA_PASS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a36f3ed7fe60e14129f2b4b66db1b61ebabe1f9a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 14 17:16:34 2023 +0100

    Bug 32898: Remove unecessary async/await
    
    myFetch awaits already
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a294c5e901e56f05dc80b7b5993ffd4394349104
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 8 11:59:11 2023 +0100

    Bug 32898: ERM - Improve fetch
    
    ... and fix cypress tests
    
    The main problem was that there were no more checkError call for fetchLocalTitleCount
    and the error was not displayed on the UI.
    
    This commit is doing several things:
    - Refactor fetch.js to call the same fetch method (myFetch) in order to
    deal with the error in a single place
    - Have a new myFetchTotal JS function to get the X-Total-Count header
    from the response and get the benefit of the previous refactoring
    - Rename fetchCountLocalPackages with fetchLocalPackagesCount to match fetchLocalTitleCount
    - Use fetchLocalPackagesCount on the Package list view
    - Use checkError from components using fetch directly. Ideally the could
    should be moved to fetch.js and myFetch should be used.
    - checkError get a new flag in parameter to ask for the response instead
    of the result (ie. the JSON of the response). That's useful when we need
    the response status or the headers
    - Make checkError throw a proper exception to stop propation. This
    modify the error we display on the UI, it's why we have the following
    changes in cypress tests:
    -            "Something went wrong: Internal Server Error"
    +            "Something went wrong: Error: Internal Server Error"
    That's not ideal, we should have our own JS exception to avoid that
    "Error" (coming from the toString call on the error)
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 61656983f250d8c3275e83e7924951a62bde473f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 7 17:54:21 2023 +0100

    Bug 32898: Fix Cypress tests
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a15f672e86b6a6e2d5d1d7446fe1e14a8969c3b6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Oct 31 10:42:57 2022 +0000

    Bug 32019: (follow-up) Fix terminology and styling
    
    This patch adds periods to description on batch mod form and alters
    language to follow proper terminology
    
    Styling is fixed to align forms
    
    Blank option is removed, No made default
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 78e144a9a0899a92b4650e5b2cecceb0ea0330e5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Oct 27 16:13:31 2022 +0000

    Bug 32019: Add option to mark items returned via batch modification
    
    Ther are options that allow avoiding marking an issue returned when se tot lost.
    Libraries do this to tie a lost item to a patron clearly.
    
    Eventually, after the patron has paid, or after some time, the library may wish
    to delete the item. When doing so, they do not wish to check the item in and affect any statuses
    or fines. This is also true for withdrawn items
    
    It would be helpful to have a way to mark issues returned in bulk, when they have not been marked
    returned in the past
    
    To test:
     1 - Apply patches
     2 - Restart all
     3 - Set 'MarkLostItemsAsReturned' system preferences to 'None'
     4 - Check out some items that have replacement fees set
     5 - Mark them lost
     6 - Check out more items, mark them withdrawn
     7 - Set system preference 'BlockReturnOfWithdrawnItems' to block
     8 - Enter item barcodes into batch modification
     9 - Leave 'Mark items returned as blank
    10 - Verify nothing was checked in
    11 - Repeat but set 'Mark items as returned' to 'No'
    12 - Verify nothing was checked in
    13 - Repeat, but set 'Mark items as returned' to 'Yes'
    14 - Verify items are returned
    15 - Verify no fines have been adjusted
    16 - Verify withdrawn items are sitll withdrawn
    17 - Verify you can now delete the items
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 356eb155bffc0c59e6ee8b6cd53961f420cb4507
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Oct 27 16:13:05 2022 +0000

    Bug 32019: Unit tests
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1e2bb90204d69c0f2e7128b8de95be360af10d21
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Feb 9 21:50:25 2023 +0100

    Bug 32757: Make 'Save changes' button on housebound details yellow
    
    This changes the button to btn-primary to make it appear yellow.
    
    To test:
    * Enable HouseboundModule
    * Search for any patron
    * Go to their patron account
    * Switch to Housebound tab
    * Edit details
    * Verify 'Save changes' is not yellow
    * Apply patch
    * Verify the button has changed
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d534d9186ce5af4b7054fe021c3a1d4afd2c3d55
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 25 07:04:43 2022 +0100

    Bug 32307: (follow-up) Fix gallery when Coce is enabled
    
    Yet another fix, this is porting the following change to the intranet:
      commit 1916c644808577beb3170d642f93b456bfcc5c56
      Bug 28180: Fix bug with first image does not exist
    
    To recreate the problem:
    Enable Coce
    Go to biblionmber=5 detail
    => No image (but one is displayed on the search result)
    Add a local cover image
    => Only the local cover image is displayed
    Apply this patch
    => Both images are displayed
    Remove the local cover image
    => Image from coce is displayed
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fd6cbf2273f71acd39bbc920400da50aed55030c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 22 07:52:49 2022 +0100

    Bug 32307: Fix gallery when Coce is enabled
    
    Bug 28179 added the gallery in the staff interface, and bug 28180 in the
    OPAC.
    
    OPAC and staff have different code, because the cover image providers
    are different.
    On bug 28180 we noticed that the OPAC needed additional code to handle
    OpenLibrary, Google Jacket and Coce, to differ the creation of the
    gallery to prevent Chocolat to be instantiated before the links (img src)
    are effectively in the DOM.
    
    To acchieve that we introduced a wait_for_images function, and added a
    "done" flag to the 3 "JS modules".
    
    However we haven't ported this code for the staff interface, which is
    also using Coce.
    
    Note that there was a bug at the OPAC as well for COCE, the ajax jQuery
    function is async, and so 'done' was set even if the call was not
    finished.
    
    Test plan:
    0. Do not apply this patch
    1. Enable LocalCoverImages and IntranetCoce
    2. Pick a bibliographic record with an image returned from Coce
    3. Add a local cover image
    4. Go to the detail page
    5. Open the gallery
    => Notice that you can notice a JS error and a loading icon on the
    second image. This behaviour is not always broken, it depends on the
    speed of the Coce server. If you don't see the problem reload the page.
    6. Apply the patch and repeat
    => Notice that the cover slider block is longer to display the icon, but
    that the error is gone.
    7. Confirm that there is no regression at the OPAC
    
    We could improve the situation here, and we could display the images
    in the slider, especially if the first image is a local image. But
    that's for another bug...
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5ba3eea4959cc9a89ff21b92fb12c342fed973d7
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 17 16:07:36 2023 +0000

    Bug 32999: Click handler to show QR code in OPAC lacks preventDefault
    
    This patch adds "preventDefault()" to the click handler for showing
    the bibliographic detail QR code. This prevents the page from scrolling
    to the top when the user clicks the link.
    
    To test, apply the patch and make sure the OPACDetailQRCode system
    preference is enabled.
    
    Locate a bibliographic record and view the detail page. If necessary,
    reduce the size of your browser window so that you have to scroll down
    a bit to bring the "Send to device" menu item into view in the sidebar.
    Click the link to confirm that it shows the QR code and that the page
    doesn't jump to the top.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d18772c3c28a339e3f4b59628a477e9c7603e3e0
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:51 2023 +0100

    Bug 32816: Fix cataloguing/value_builder/cn_browser.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 97c050eacb87cc78f8cdfc3a37d240372b164437
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:51 2023 +0100

    Bug 32821: Fix cataloguing/value_builder/stocknumber.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a925b07f7b5c182f2c8050886d58e08ce065eff3
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:51 2023 +0100

    Bug 32814: Fix cataloguing/value_builder/callnumber-KU.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 13e1e55fb872d8a0e79fa8466f9f1276c5517e35
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Dec 19 20:40:57 2022 +0000

    Bug 31890: Add surname to PrefillGuaranteeField system pref
    
    To test:
    1. Apply patch and restart_all
    2. Find the system preference PrefillGuaranteeField
    3. Look for the Surname option and add it
    4. Go to a patron account and add a gaurantee
    5. See that the surname is properly populated for the gaurantor's surname field
    
    Note:
    This patch replaces borrower_data.surname with patron.surname. There seems to be a mismatch here so I filed Bug 32458.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 736805ae5c4e13c8ea8523fbfe5eeea4ae90759f
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Feb 9 23:04:17 2023 +0100

    Bug 31209: Add a span with a class for items.enumchron in the checkouts list
    
    To test:
    * Add or edit an item and add some info to the 'Serial Enumeration /
      chronology' field
    * Check the item out
    * Verify by checking the source code or using the element inspector
      that the title and enumchron have been merged into one string
    * Apply patch
    * Reload and verify that now the enumchron is wrapped in a span
      with class="item_enumeration" matching the class in the list of
      checkins
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7a8a2d7110cd7f2fa5d4218665496b4c4be66ab3
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Feb 17 13:46:58 2023 +0000

    Bug 32979: Skip test if running as root
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2cdc018c810667681e88fbff9a9aca5720b816e6
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jan 26 15:08:24 2023 +0000

    Bug 32979: Add Test::Exception to Logger.t
    
    Test plan:
    Run t/Logger.t
    Note: Run under koha user, not root. Root wont have
    the permission failure which is tested.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 801cace195429b0c682468a4ea29bfd7bcc0a5ec
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 22 16:46:51 2022 -0300

    Bug 23247: Use EmbedItems in opac-MARCdetail.pl
    
    This patch uses the EmbedItems processor to add the items to the MARC
    record.
    
    To test:
    - Find a known record, go to the OPAC MARC page of it.
    - Play with several options in OpacHiddenItems, refreshing it
    - Play with OpacHiddenItemsExceptions as well
    => SUCCESS: Things work as expected
    - Apply this patch
    - Repeate the tests above
    => SUCCESS: Things work as expected!
    - Sign off :-D
    
    Seems to work as advertised.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: LMSCloudPaulD <paul.derscheid@lmscloud.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f1ca05ac77f0d2537967bbf000a09cdb0a74a2d1
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Feb 9 22:38:38 2023 +0100

    Bug 32566: Don't show "ILL request log" when IllLog is disabled
    
    When the IllLog system preference is disabled there will be no
    log to view and the log will always appear empty.
    
    To test:
    1) Activate the IllModule system preference
    2) Install a backend (BLDSS or FreeForm) following the wiki instructions:
       https://wiki.koha-community.org/wiki/ILL_backends
    3) Go to the ILL module and add a new request
    4) The "ILL request log" entry in the toolbar should be visible
    5) Turn off the IllLog system preference
    6) Reload the page - the option should remain visible
    7) Apply patch
    8) Verify the link is now no longer visible after reload
    9) Re-activate the IllLog
    10) Verify the option now appears
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3a8d8f1adcc30ea7cf1bf4e9579e9ab52c077ea7
Author: Mason James <mtj@kohaaloha.com>
Date:   Fri Feb 3 05:09:38 2023 +1300

    Update debian/control file: 22.12.00-3 on deb9 (1b6e9c7b)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    https://bugs.koha-community.org/show_bug.cgi?id=32809
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 71869dea87c6a0323e9b6701573ab8c0e538bc90
Author: Mason James <mtj@kohaaloha.com>
Date:   Fri Feb 3 05:09:39 2023 +1300

    Update debian/changelog file: 22.12.00-3
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    https://bugs.koha-community.org/show_bug.cgi?id=32809
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 96488dfec185af2a46411e944836aafd74940123
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Feb 1 12:26:15 2023 +0000

    Bug 32770: Restore patron search on all emails, phones, and addresses
    
    Prior to bug 30063 we had "Email", "Phone", and "Address" in the search field list
    that allowed a search on all email, phone, or address attributes.
    
    This patron restores these and makes sure the search box and the patron search filters use
    the same block to keep them consistent
    
    The fields are now labelled 'All emails', 'All phones', and 'Full address' to make it clear
    that they search multiple - including any single field in the DefaultPatronSearchFields will
    additionally add that to the dropdowns
    
    To test:
     1 - define 'test@email.pro' as 'Secondary email' for a patron
     2 - Search from 'Search patrons' address bar (visible at top of moremember.pl)
     3 - Nothing is found using 'Standard' or 'Email fields'
     4 - Apply patch
     5 - Refresh page and repeat
     6 - Nothing is found for standard, Patron is found for 'All emails'
     7 - Define a unique value for patron in 'Address 2'
     8 - Confirm 'Full address' search returns the patron
     9 - Test with 'Secondary phone' and 'All phones' as well
    10 - Repeat test from 'Patrons' module using the search on the left
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1aaf68d9e57b0e131d0bc0cc4f0353cab75f2156
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:51 2023 +0100

    Bug 32812: Fix cataloguing/value_builder/barcode_manual.pl
    
    Use event parameter instead of id.
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8327b7d86e35d9b34e815d5aa686dea6d8814cfe
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:50 2023 +0100

    Bug 32813: Fix cataloguing/value_builder/barcode.pl
    
    Use event parameter instead of id.
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f42dcf9c5105a36aa3b4997f3f6973eef0cf02e2
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Feb 15 22:00:59 2023 +0000

    Bug 32946: (QA follow-up) Fix "Send cart" form
    
    The send cart form is almost identical to the list
    'Send list' form and requires the exact same fixes
    to look good. This patch achieves the same look for
    both forms.
    
    To test:
    * Fill your cart in the OPAC
    * Open the cart to view contents
    * Click on "Send"
    * The form shoud look nicely aligned
    * Compary to form for sending lists, they should look the same
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0d7ba6e5201b16f7e7a2332af7204cb6416c289a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Feb 13 16:02:28 2023 +0000

    Bug 32946: 'Send list' form in OPAC is misaligned
    
    This patch tweaks the OPAC CSS and the send list template so that form
    fields are laid out correctly.
    
    To test, apply the patch and rebuild the OPAC CSS.
    
    - Log in to the OPAC and create a list if necessary.
    - In the OPAC's view of the list contents, click the "Send list" button.
    - In the pop-up window the form layout should look correct.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bc43c6e7febd49000696a4e0d3b42580fcb8910e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Feb 15 18:19:14 2023 +0000

    Bug 32975: Error in package.json's definition of css:build vs css:build:prod
    
    The "css:build" command runs "gulp css && gulp css --view opac",
    processes that build CSS in a development context.
    
    The "css:build:prod" currently runs "gulp build && gulp css --view
    opac", which runs the production-oriented command "gulp build" (for the
    staff interface), but runs "gulp css --view opac" which is the same
    devel-environment command as above.
    
    It should be "gulp build && gulp build --view opac"
    
    To test, apply the patch and run the two commands and check these two
    files to confirm the difference:
    
    koha-tmpl/intranet-tmpl/prog/css/staff-global.css
    koha-tmpl/opac-tmpl/bootstra/css/opac.css
    
    "yarn css:build" should create unminimized versions of those files.
    "yarn css:build:prod" should create minimized versions.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a9743888e506ded02200ce2aad842c038810e49f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 10 16:45:35 2023 +0000

    Bug 32922: (follow-up) Fix two additional occurences
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6a0cd4cc5e52489a8dc1cf591447f414c34d5677
Author: Magnus Enger <magnus@libriotech.no>
Date:   Thu Feb 9 08:57:25 2023 +0100

    Bug 32922: Remove space in shebang
    
    Some of our scripts have a space in the "shebang" (first) line:
    
      #! /usr/bin/perl
    
    This is not illegal, and it does work, but it is good to be
    consistent, so this patch removes the space.
    
    To test:
    - Run: grep -rn --include=*.pl '#! /usr/' *
    - See the list of files that have a space in the shebang
    - Apply the patch
    - Run the command again, there should be no output, meaning there
      are no more files with space in the shebang
    - Have a look at the patch and check that it only changes the
      shebangs
    - Sign off
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f6bf78a1073857b6a1e6b76a99b7f26380122d36
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Feb 15 09:32:07 2023 -0300

    Bug 31957: (QA follow-up) Add missing filters
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2697f7884bbb1c68e09f47a5260b4c801f30bfe2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Feb 15 09:27:50 2023 -0300

    Bug 30993: (QA follow-up) Add missing filter
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bf05e0898b17f21e024dfa3df00452bdc59f29f7
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jan 5 18:44:47 2023 +0000

    Bug 32507: (follow-up) Change parameter name to avoid collisions
    
    The variable name "active" is very likely to already be set for other
    reasons, so changing the parameter name to "bc_active" to avoid
    problems.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8a01c095b7ec3ef6947148ad3b7771fd01603bc8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Dec 20 16:20:51 2022 +0000

    Bug 32507: Use template wrapper to build breadcrumb navigation
    
    This patch lays the groundwork for updating the way we build breadcrumb
    navigation on each page, and implements it on the cities administration
    page as a proof of concept.
    
    The page creates two blocks, 'breadcrumbs' and 'breadcrumb_item'
    
    'breadcrumbs' builds the outer structure of the menu, currently:
    
        <nav id="breadcrumbs" aria-label="Breadcrumb" class="breadcrumb">
            <ol class="breadcrumb">
    
    It automatically adds the "Home" link which appears on all pages.
    
    The 'breadcrumb_item' block builds the list item which contains the
    individual link.
    
    To test, apply the patch and go to Administration -> Cities & towns. On
    each variation of the page, check the breadcrumbs menu:
    
     - On the initial summary view it should be:
       Home -> Administration -> Cities
     - Click "New city" and the menu should be:
       Home -> Administration -> Cities -> New city
     - When you edit a city:
       Home -> Administration -> Cities -> Modify city
     - When you delete a city:
       Home -> Administration -> Cities -> Confirm deletion of city
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bc9a37534f10a13ca9513fae31d094e322e5358b
Author: George Veranis <gveranis@dataly.gr>
Date:   Wed Feb 8 13:21:39 2023 +0100

    Bug 32908: Load item type icons from the correct path
    
    In the Staff interface, the details page of a bibliographic
    record should display the icon associated with the item
    type of an item ('Item type' column in the 'Holdings' tab).
    
    This feature broke in v22.11.00 (for Debian package installs):
    instead of the item type icon you get the default 'broken
    image URL' image of your web browser.
    
    This patch fixes that.
    
    Test plan:
    
    1) (if needed) Configure the following System preferences:
       - item-level_itypes => 'specific item'
       - noItemTypeImages  => 'Show'
    
    2) (if needed) In Koha Administration > Item types, create
       an item type and associate it with an icon
    
    3) (if needed) Create a test bibliographic record, and add
       an item to it that has an item type with an icon
    
    4) Visit the bibliographic record's details page in the
       Staff interface. Notice that in the 'Item type' column of
       the 'Holdings' tab instead of seeing the icon associated
       with the item type of each item you get the default
       'broken image URL' image of your web browser [*].
    
       [*] In non-Debian package installs, the 'href' property
           of the item type icon's <img> tag should start with
           '/opac-tmpl/bootstrap/itemtypeimg'
    
    5) Apply this patch, and refresh the page with CTRL-F5.
       The item type icon should now be displayed correctly.
    
       [*] KTD and Koha Sandboxes users: To verify the patch
           has worked, you should right-click on the item type
           icon and click 'Inspect: the 'href' property of the
           <img> tag should now start with:
           '/intranet-tmpl/prog/img/itemtypeimg'
    
    Signed-off-by: Frédéric Demians <f.demians@tamil.fr>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c5abf57f5a2164e118eeac0e021038eb71df2644
Author: Jacob O'Mara <jacob.omara@ptfs-europe.com>
Date:   Mon Jan 9 10:32:23 2023 +0000

    Bug 22693: ILL "Price paid" column does not appear in column configuration
    
    Test Plan:
     - Navigate to ILL requests page from the main menu after setting up your ILL backend.
     - Observe that Price Paid column does not exist either here nor in the column configuration.
     - Apply patch
     - Observe that Price Paid column now appears in ILL requests table and in the column configuration page.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 898aeaad9a095d1ebf5c64cee0ca2d16b57dfade
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 3 18:22:45 2023 +0000

    Bug 32605: (follow-up) Additional fixes
    
    This patch makes some further changes to form CSS in order to improve
    consistency. Some templates have also been modified to improve layout.
    
    - Acquisitions -> New vendor
    - Staff interface home ->  Patrons requesting modifications
    - Reports -> Saved SQL reports
    - Serials -> New subscription
    - Tools -> Import patrons
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0a3eee9e70988625c6d1ce3f044d9a540e2ebe5c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jan 10 15:54:09 2023 +0000

    Bug 32605: Restore some form styling from before the redesign
    
    This patch pulls styles from pre-22.11 staff-global.scss related to the
    styling of fieldset.rows and contents. The old CSS is more verbose but
    it has been better proven to hold up in a variety of situations.
    
    The patch makes only one template change, a minor correction to the
    basket groups form.
    
    To test, apply the patch and rebuild the staff interface SCSS.
    
    Test as many forms as possible to confirm that everything is still
    correct. Forms affected are ones shown in the main body of the page, not
    in sidebars.
    
    Some good examples: Editing patrons, subscriptions, patron categories,
    notices, item types.
    
    This patch should help outstanding bugs 32513, 32543, and 32591
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ed84cfd43b0d7c135d96b712713787cf7fd53834
Author: Andreas Roussos <a.roussos@dataly.gr>
Date:   Wed Feb 8 15:07:52 2023 +0100

    Bug 32909: Load item type icons from the correct path
    
    When placing an item-level hold in the Staff interface,
    the table at the bottom of the screen (under the "Place
    a hold on a specific item" heading) should display the
    icon associated with the item type of each item in the
    'Item type' column.
    
    This feature broke in v22.05.00 (for Debian package installs):
    instead of the item type icon you get the default 'broken
    image URL' image of your web browser.
    
    This patch fixes that.
    
    Test plan:
    
    1) (if needed) Configure the following System preferences:
       - item-level_itypes => 'specific item'
       - noItemTypeImages  => 'Show'
    
    2) (if needed) In Koha Administration > Item types, create
       an item type and associate it with an icon
    
    3) (if needed) Create a test bibliographic record, and add
       an item to it that has an item type with an icon
    
    4) Visit the bibliographic record's details page in the
       Staff interface. Select 'Holds' on the left hand side,
       then pick a patron. The "Place a hold on ..." page should
       load. In the 'Item type' column of the table at the bottom
       of the screen notice that instead of seeing the icon
       associated with the item type of each item you get the
       default 'broken image URL' image of your web browser [*]
    
       [*] In non-Debian package installs, the 'href' property
           of the item type icon's <img> tag should start with
           '/opac-tmpl/bootstrap/itemtypeimg'
    
    5) Apply this patch, restart Plack and refresh the page.
       The item type icon should now be displayed correctly.
    
       KTD and Koha Sandboxes users: To verify the patch has
       worked, you should right-click on the item type icon and
       click 'Inspect': the 'href' property of the <img> tag
       should now start with: '/intranet-tmpl/prog/img/itemtypeimg'
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 453793f714367178a2642bfd3115bfc82556ebd0
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Jan 6 23:06:52 2023 +0000

    Bug 30993: Improve translatabilty of UPLOAD av hint
    
    Improve translatability on the hint for AV UPLOAD
    on the upload tool page.
    
    To test:
    * Go to tools > uploads
    * Verify that the hint below the 'Browse...' displayes nicely
      and the link to the UPLOAD AV works correctly
    * Apply patch
    * Verify the link still works and the sentence reads correctly.
      NOTE: now only UPLOAD will be linked.
    
    If you are familiar with the process, you can also make sure
    the strings now show up on po files as expected:
    https://wiki.koha-community.org/wiki/Translating_Koha#Updating_the_po_files_in_your_installation
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d2a281ad4b80fc74bfeaab8260408bb354f7a9b8
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Jan 9 20:00:53 2023 +0000

    Bug 31957: (follow-up) Further improve translations
    
    With the previous attempt, we ended up with some TT
    constructs in the po files. This will hopefully avoid that.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0e64ead240fd6df47a1a11e4e2439b1c9869da07
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Jan 6 22:33:43 2023 +0000

    Bug 31957: Improve translatability of text containing links on libraries admin page
    
    The libraries administration page has several links to system
    preferences that appear within sentences or with other text
    around it. To make translations easier, we need to make sure that
    those links don't break context.
    
    To test:
    * Activate IllModule (so we can see the ILL staff email setting)
    * Go to administration > libraries
    * Verify that the links for those settings show correctly
      * Reply-to
      * Return-Path
      * Ill staff email
      * MARC organization code
    * Apply patch
    * Verify links still work and show unchanged
    
    If you are familiar with the process, you can also make sure
    the strings now show up on po files as expected:
    https://wiki.koha-community.org/wiki/Translating_Koha#Updating_the_po_files_in_your_installation
    
    https://bugs.koha-community.org/show_bug.cgi?id=31954
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 796b3559e58fa5fe0ff02078f76421198cf89093
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Feb 14 10:27:13 2023 -0300

    Bug 30642: (follow-up) Remove use of deleted file
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a637666d3ec804eca7c9a15a6bcdd7cb387d91c5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Feb 14 09:41:47 2023 -0300

    Bug 30642: Fix dbrev permissions
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 178e40ae9fd7246fa638a64c34fde06f94548ff0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Feb 10 12:47:15 2023 -0300

    Bug 30642: DBRev 22.12.00.004
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c90f60adfcb3aeba3dd81122cce96db2c8d1fc1d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Feb 10 09:35:01 2023 -0300

    Bug 30642: Make renewal_type an enum in spec and add test
    
    This patch makes the renewal_type an enum, to match the change on the
    DB. A test is added to account the fact the API is always setting
    'Manual' request type.
    
    Bonus: small portion of code gets a tidy, should've been asked by QA.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e8c232fcf757659bfb48433e1b8f08fa895e6aaa
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jan 20 14:57:21 2023 +0000

    Bug 30642: (QA follow-up) Do not rely on script names in modules, add unit test
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Edit: Kyle, stop impersonating John Doe
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7fe9e76af85f3f063ac870d17b10c5e18f95c48f
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Dec 8 14:28:49 2022 +0000

    Bug 30642: (follow-up) Change sql and adapt for translations
    
    New column has now been changed to an enum in line with comments and the strings have been amended to be picked up for translation. The file koha-tmpl/intranet-tmpl/prog/en/includes/str/checkout_renewals.inc has been removed as the variables can be included within the javascript file.
    
    Test plan:
    1) In the database shell run "show columns from checkout_renewals;" and observe that there is currently no column for recording the type of renewal
    2) Apply patch
    3) In the shell run "dbic" and "perl installer/data/mysql/updatedatabase.pl" to update the database schema with the new column.
    4) Create some checkouts
    5) Renew some checkouts manually and observe in the database that there is now a column called "renewal_type" that will have recorded these as "Manual"
    6) Create some checkouts that can be automatically renewed
    7) Run the cron script in automatic_renewals.pl and observe that there are now also entries with a renewal_type of "Automatic"
    8) Send a GET request to http://localhost:8081/api/v1/checkouts/1/renewals and observe that the renewal_type is now returned in the response
    9) In the Item Details tab for a record, there is the "Current renewals" option which has a button to view renewals. Click on this and observe that the modal now displays the new information.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5045da59f15a7dfb3da72b5f96e249976a84692b
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue Dec 6 16:48:45 2022 +0000

    Bug 30642: Record renewal type
    
    A requirement has been requested to record whether a renewal was done manually or automatically. A column has been added to the checkout_renewals table in the database to record this and a check is now in place to determine whether the renewal was manual or automatic. The API has also been updated to reflect this new column and return the data when requested. The renewals modal view has also been updated to show what type the renewal was.
    
    Test plan:
    1) In the database shell run "show columns from checkout_renewals;" and observe that there is currently no column for recording the type of renewal
    2) Apply patch
    3) In the shell run "dbic" and "perl installer/data/mysql/updatedatabase.pl" to update the database schema with the new column.
    4) Create some checkouts
    5) Renew some checkouts manually and observe in the database that there is now a column called "renewal_type" that will have recorded these as "Manual"
    6) Create some checkouts that can be automatically renewed
    7) Run the cron script in automatic_renewals.pl and observe that there are now also entries with a renewal_type of "Automatic"
    8) Send a GET request to http://localhost:8081/api/v1/checkouts/1/renewals and observe that the renewal_type is now returned in the response
    9) In the Item Details tab for a record, there is the "Current renewals" option which has a button to view renewals. Click on this and observe that the modal now displays the new information.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 73b20abfb3f340adb4e1ac1880fb70ae6bfd2d77
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 1 08:47:04 2023 +0100

    Bug 32609: Use the current yarn.lock to generate node_modules
    
    See comment 34 and https://tree.taiga.io/project/joubu-koha-erm/us/127
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 550bb87ecb619dedb5d42a82cde46506e141c26f
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue Jan 31 02:31:37 2023 +0000

    Bug 32609: (follow-up) enhance Makefile.PL
    
    This patch adds a new target to the Makefile which gets
    called as the first step of the "all" target. This means
    that CSS and JS files get compiled every time "make" is
    called.
    
    (Note: Since the "install" target depends on "all", it will
     be re-run at install time.)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6cf1a2654ce561bb20871d40d1878fd63c1f1284
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jan 30 16:16:07 2023 +0000

    Bug 32609: (follow-up) Add build-resources.PL
    
    This patch adds a trivial perl wrapper around the yarn build and calls
    it from Makefile.PL.
    
    I 'think' this is all we need to get packaging, dev and standard
    installs happy with the lack of our compiled files in source.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4aaf5aa33a1161b2c7385596dd7d8ea881490c43
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 11 15:42:55 2023 +0100

    Bug 32609: Add warning to the about page
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dcf772cb7026b4ed21caf6b055f8260140dcefdb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 11 15:20:28 2023 +0100

    Bug 32609: Remove CSS and JS compiled files
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 10873a572893f83633cb398d7936a7564c1e5e50
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 11 15:20:28 2023 +0100

    Bug 32609: Remove CSS and JS compiled files
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6a1fccbb29bc3897f3853305b898ebec63237d70
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 11 15:00:52 2023 +0100

    Bug 32609: Add compiled css files to gitignore
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9bdca7f216e525045d3426e67daf1cf815257ad4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 11 13:46:33 2023 +0100

    Bug 32609: Improve yarn build commands
    
    We had:
    yarn css # Build staff css
    yarn css --view opac # Build OPAC css
    yarn build # Nothing, was broken
    yarn watch # Nothing, was broken
    yarn build_js # Build JS/Vue
    yarn watch_js # Watch JS/Vue
    
    This patch is suggesting to have something more consistent:
    yarn css:build      # Build CSS for OPAC and staff (dev)
    yarn css:build:prod # Build CSS for OPAC and staff (prod)
    yarn css:watch      # Watch CSS for OPAC and staff (dev)
    yarn js:build       # Build JS (dev)
    yarn js:build:prod  # Build JS (prod)
    yarn js:watch       # Watch JS (dev)
    yarn build          # Same as css:build and js:build (dev)
    yarn build:prod     # Same as css:build:prod and js:build:prod (prod)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2285b184bb2ba6b97b81862a2dcea3e0b571951d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 11 13:45:56 2023 +0100

    Bug 32609: Remove JS vars from gulpfile
    
    They are not used.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 60c0d42359cb91baac6dc871146671a17380cd4f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Feb 10 11:01:39 2023 -0300

    Bug 28674: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 32258f82b5dd6a2bef3faedf06211eaf674f674c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Nov 7 16:44:29 2022 +0000

    Bug 32125: Select correct tab on return
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 93d563b575d3c0a43702e1bf7dda5afc211c898f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Oct 6 14:41:19 2022 +0100

    Bug 32125: Impliment modal context return on opac-detail.
    
    This patch utilises the generic return option introduced in the previous
    patch to prevent lose of context when clicking to login to add a comment
    to a biblio.
    
    Test plan
    1/ Test that prior to this patch, upon clicking 'Log in to your account
    to post a comment' you are redirected to opac-user.pl and thus loose
    your context.
    2/ Apply the patch
    3/ Confirm that a login using the 'Log in to your account to post a
    comment' link now redirect immediatly back the correct record and thus
    maintains context.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 37ced7df0531accb4f091c78258ff98946d062c9
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Nov 10 00:00:37 2022 +0000

    Bug 31699: (follow-up) Protect more against open redirects
    
    This change checks that the OPACBaseURL exists, and uses its scheme
    and authority to rewrite the URL passed through the "return"
    param.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e0760fd1851abc4a94a924bcf30e775c8e97da2a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Nov 9 08:27:44 2022 +0000

    Bug 31699: (follow-up) Protect against unauthorized redirects
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 507d48413d3d09866a37db81d2a856f9a0a7c6f9
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Oct 6 14:38:42 2022 +0100

    Bug 31699: Add 'return' option to opac modal login
    
    This patch adds the option to trigger a redirect back to the current
    context after successful login using modal logins triggered from various
    places in the OPAC.
    
    To make use of this, simply add 'data-return="true"' to the modal trigger link.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7bb4aeba9f10336d836f31b9e572390dd5bf588a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 9 11:45:02 2023 +0100

    Bug 32539: Add tests
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 23a002112273d2b406af7edd6b85acce0d5d699c
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon Jan 16 04:41:01 2023 +0000

    Bug 32539: Add exception handling to plugin hooks in template plugin
    
    This change wraps Koha plugin hook calls with exception handling
    within the template plugin for Koha plugins.
    
    Test plan:
    0) Apply patch
    1) Install a plugin that provides "opac_head", "opac_js",
    "intranet_head", and "intranet_js" with Perl errors in them
    2) Load an OPAC page
    3) Note that the OPAC page loads correctly
    4) Load a staff interace page
    5) Note that the staff interface page loads correctly
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c6c2fe81a273cbb70af69dfa0b51b2f07b49a76c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 13 19:27:04 2023 +0000

    Bug 32624: Don't include guarantee or guarantor fines in BV (fines amount) in SIP messages
    
    This patch chanegs the code to report only the patron's personal fines, and to report a block
    from other fines in the screen message
    
    This is to prevent overpayment on accounts from SIP machines
    
    To test:
    1 - prove t/db_dependent/SIP/Patron.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6acdfd0493a472232cc265d7b1cac8abcff94add
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Sep 30 18:53:47 2022 -1000

    Bug 31338: (follow-up) add special class and add also to OPAC
    
    In order to easily hide this new text, this patch adds the class "included-see-from-headings-info".
    
    Also uses <div> instead of <p>.
    
    And adds the same feature to OPAC.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8d9de60582a6de64160026b99256187d7f04ea1e
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Aug 10 10:55:55 2022 -1000

    Bug 31338: Show in advanced search when IncludeSeeFromInSearches is used
    
    Test plan :
    1) Apply patch
    2) Set system preference IncludeSeeFromInSearches to "Include"
    3) Go to staff interface advanced search
    4) Check you see tip text in "Search for"
    5) Set system preference IncludeSeeFromInSearches to "Don't include"
    6) Go to staff interface advanced search
    7) Check you don't see tip text in "Search for"
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 622581e5bfd8c42082bba6ee8a54e3249ea78c5d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jan 31 18:29:01 2023 +0000

    Bug 32769: Standardize structure around action fieldsets in administration
    
    This patch updates administration templates so that fieldsets with the
    "action" class are placed outside the form's main fieldset.
    
    To test, apply the patch and check the following pages to confirm that
    the forms look correct:
    
    - Administration
       -> Keyboard shortcuts
       -> Audio alerts
       -> Share content with Mana KB
          - When the ManaToken system preference is empty, the page should
            have two forms with updated fieldsets: the form with the "Use
            Mana KB..." field and a "Configure Mana KB" form.
          - With a ManaToken defined the second form should be one labeled
            "Mana KB token."
       -> Budgets
          - Click on a budget which has existing funds.
          - In the page toolbar click Planning -> Plan by libraries.
          - Check the forms in the sidebar.
       -> System preferences ->  OverDriveAuthName
          - Follow the link to "OverDrive library authnames table" and check
            the form on that page.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d25b7459b4ff4fd9f6acd539ab547fcb57dac6e0
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Feb 8 06:56:20 2023 +0000

    Bug 29173: (QA follow-up) Match pop-over sizes
    
    As suggested by David Nind, this patch updates the call to z3950 search
    on the authority edit page to match the sizing of the one from the
    details page.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 26c26164ba78029cb99fa99662f9e0a8ce9557df
Author: Thibaud Guillot <thibaud.guillot@biblibre.com>
Date:   Tue Mar 29 16:12:48 2022 +0200

    Bug 29173: Fixed pre-filling of the search form from the "Replace record with ZR39.50/SRU" (Authority page detail)
    
    Now this action has the same pre-filling behaviour as the "Edit" -> "Edit Record" -> "Replace Record via Z39.50/SRU Search" action.
    Author Personal - Author Meeting/Conf. - Uniform Title and Subject are filled in if the subfield contains data (like the "Edit->Replace" action).
    Unimarc and Marc21 specificities are supported.
    
    Test Plan :
    
    1) You must have a Z39.50/SRU server for authorities
    2) Go to an authority detail page (Author - Uniform title - Subject)
    3)After go to "Edit"-> "Edit record" -> "Replace record via..." or
    choose "Replace Record.." directly
    4) See that form is also prefilled with data now
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aa3444505f2b47a73f4b281a622b6c1073bb5c8d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 29 10:22:10 2022 +0100

    Bug 32356: Install installer translated files on update
    
    If the installer files exist for a given language, the translate script
    won't update it.
    We should get a confirmation from Bernardo (author of bug 24262), but I
    don't understand why it could be needed (side-effects?)
    
    Test plan:
    Installer several times the same language, drop the DB and run the
    installer+onboarding process.
    Check files installed by the installer (yaml for notice templates,
    biblio frameworks) have inserted the data properly in DB.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5f97fa18cc4dfc133f535815395b34f5cc7bfffa
Author: Matthias Meusburger <matthias.meusburger@biblibre.com>
Date:   Thu Dec 8 10:38:10 2022 +0000

    Bug 32408: Add unit tests to SIP checkout
    
    This patch adds unit tests to show SIP's behavior on checkout according to the
    AllFinesNeedOverride, AllowFineOverride and noissuescharge sysprefs, knowingly:
    
    +----------------------+-------------------+---------+---------+
    | AllFinesNeedOverride | AllowFineOverride |  Under  |  Over   |
    +----------------------+-------------------+---------+---------+
    |                    0 |                 0 | allowed | blocked |
    |                    0 |                 1 | allowed | blocked |
    |                    1 |                 0 | blocked | blocked |
    |                    1 |                 1 | blocked | blocked |
    +----------------------+-------------------+---------+---------+
    
    (the columns Under and Over are referring to "under noissuescharge" and
    "over noissuescharge")
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8939c58a862c819e8af6366c664ec89fbe3f7547
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Feb 1 06:52:01 2023 -0500

    Bug 28672: (QA follow-up) Method calls cannot be interpolated directly
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c89c25d81aa8d6a2500820b84aaf7a5c157ed815
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jul 7 12:43:36 2021 +0100

    Bug 28672: Pass itemnumber instead of item object
    
    The warn call here was passing the full item object which leads to
    HASH() in the logs.. this patch updates it to pass the itemnumber which
    is more helpful.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d81bca827058e04f656ce0bf95187b7b74b2d5c2
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Nov 15 06:57:44 2022 -0500

    Bug 29100: (QA follow-up) Rename issue(s) keys to checkout(s)
    
    Adapted test plan:
    
    1) Apply this patch
    2) For DUE and PREDUE notices, set the message body to the following:
       Title: [% checkout.title %]
    3) For DUEDGST and PREDUEDGST notices, set the message body to the following:
       Titles:
       [% FOREACH c IN checkouts %]
        * [% c.title %][% END %]
    4) Generate PREDUE and DUE notices for patrons including digests
    5) Verify those notices contain the checkout titles
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Edit: tcohen renamed @issues => @checkouts as well
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fd7a612c6ed4dc85049fa2ef6a786d2657501d74
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Sep 23 13:40:48 2021 -0400

    Bug 29100: Remove unnecessary loops
    
    Remove loops that only operate one one result only
    
    Signed-off-by: Felicity Brown <Felicity.Brown@montgomerycountymd.gov>
    Signed-off-by: George Veranis <gveranis@dataly.gr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2114c70d11b077d83db4bdf9f3e85598e96cf2cb
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Sep 23 13:24:42 2021 -0400

    Bug 29100: Add checkouts data loop to predue notices script ( advance_notices.pl )
    
    Predue / due notices are limited to using itemscontent to display checkouts data. It would be nice to make all the checkouts data available for those notices so that libraries could format that data more nicely if they wish.
    
    1) Apply this patch
    2) For DUE and PREDUE notices, set the message body to the following:
    Title: [% issue.title %]
    3) For DUEDGST and PREDUEDGST notices, set the message body to the following:
    Titles:
    [% FOREACH i IN issues %]
    * [% i.title %]
    [% END %]
    4) Generate PREDUE and DUE notices for patrons including digests
    5) Verify those notices contain the checkout titles
    
    Signed-off-by: Felicity Brown <Felicity.Brown@montgomerycountymd.gov>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0481f1d74e7d6175e1eb31b299f01c7cc7ce6090
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Feb 6 17:03:32 2023 +0100

    Bug 32788: Order curbside pickup slots chronologically
    
    We need to order the slots chronologically, not depending on when they
    have been added.
    
    Test plan:
    Create a slot 13 to 17 the another one 8 to 12
    We want to display 8 to 12 before 13 to 17.
    Confirm that this patch fixes that on the 3 following views:
    Curbside pickups admin
    Curbside pickups staff side
    Curbside pickups at the OPAC
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ac1e80400d3ab21001a5c0259a09280a7ab1cbfe
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jan 30 12:28:03 2023 +0000

    Bug 32743: (follow-up) Add markup comments
    
    This patch adds comments to the template to highlight the markup
    structure.
    
    This patch should have no effect on the page's appearance or
    functionality.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bf5806e2ec353d5c873f1d8f08f8eb910f752975
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jan 30 11:55:56 2023 +0000

    Bug 32743: Reindent the invoice details page
    
    This patch reindents the invoice template so that it has consistent
    indentation. These changes should have no visible effect on the page.
    
    To test, apply the patch and go to Acquisitions -> Invoices.
    
    - Perform a search which will return invoice results.
    - Click on an invoice to view the details.
    - Everything should look normal.
    
    Viewing the diff while ignoring whitespace changes should show only
    places where a line break was added.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 09010a248b65c7a47973c208809c1915dac3fe0e
Author: Frédéric Demians <f.demians@tamil.fr>
Date:   Tue Jan 10 09:26:51 2023 +0100

    Bug 32603: Suggester category in Suggestions management
    
    In Suggestions management, in the table displaying all suggestions, add
    a column to display suggester category. This way, it is possible for
    example for the librarian managing suggestions rather to prioritize
    suggestions coming from teachers than those coming from students.
    
    TEST :
    
    1. Apply the patch.
    2. Acquisition > Suggestions.
    3. There is a new column 'Suggester category'. It can be
       displayed/hidden.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 226f83cbb916285b13eaa5b0ec7badb006b83fca
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Feb 5 14:05:32 2023 +0100

    Bug 32567: (QA follow-up) Fix some labelling inconsistencies
    
    This makes sure that the descriptions in the pull-downs always
    match for selected/unselected.
    This is not only for consistency, but will also ease translations
    as simple things like an additional space will create a new
    string to translate.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 343d68d8282bba90b415bdb0342284f1be1af7d0
Author: Thibaud Guillot <thibaud.guillot@biblibre.com>
Date:   Wed Jan 4 15:14:17 2023 +0100

    Bug 32567: Update unimarc_field_110.pl with some values
    
    'Script of title' values =>
    e - b/c/d/e/f/g/h
    i - d/e
    j - f/g
    l - f
    n - b/c
    o - a
    p - a
    
    'Translitteral code' values =>
    'g' and 'h'
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fcb19865e82c6389f64a984ed8ef0dbde5afc2d7
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Feb 4 23:58:05 2023 +0000

    Bug 31407: Set focus for cursor to Currency when adding a new currency
    
    This makes sure that the focus is on the first field of the
    form when adding a new currency.
    
    To test:
    * Go to administration > currencies
    * Add a new currency
    * Verify the focus is not on the form
    * Apply patch
    * Repeat, verify the focus is now on the first input "currency"
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d0abe773e8d9b194e3d0d02c479f5bc2c9bd920a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Feb 7 15:19:47 2023 -0300

    Bug 32612: (QA follow-up) Add POD and fix typo
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d2f3c54261e34882f9134c5c8904cacf1c6fc51e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 20 18:47:11 2023 +0000

    Bug 32698: Use template wrapper for serials pages tabs
    
    This patch updates three serials templates to replace tab markup with
    the use of WRAPPERs.
    
    To test requires more data than will be found in the sample data. You
    need at least one subscription with issues spanning more than one year.
    I suggest creating a new subscription which starts in December, then
    receive one issue from December and one in January.
    
    Apply the patch and go to Serials.
    
    - Perform a subscription search.
      - On the search results page there should be two tabs: "Open" and
        "Closed." These tabs should work correctly.
    - Open the detail view of one of your subscriptions.
      - You should see at least four tabs: "Information," "Planning,"
        "Issues," and "Summary."
      - In some cases an "Acquisition details" tab will also appear. To test
        this you must go to Acquisitions and add an order to a basket by
        choosing "From a subscription" option.
    - Click "Serial collection" in the left-hand sidebar.
      - There should be tabs for each year of subscription issues in your
        collection.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2c968c02edae5283f2ff7a1cc1d397dfa9a100bd
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 20 16:30:02 2023 +0000

    Bug 32661: (follow-up) Use more unique variable name to avoid collisions
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 76f3507e3a2ba514eca8c74e189b53e47ce59515
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jan 17 20:20:30 2023 +0000

    Bug 32661: Use template wrapper for invoices page tabs
    
    This patch implements the template WRAPPER system (see Bug 32571) for
    building tabs on the invoices page.
    
    To test you must have at least one open invoice and one closed invoice.
    
    - Go to Acquisitions -> Invoices.
    - You should see two tabs, "Open invoices" and "Closed invoices."
    - The tabs should look correct and work correctly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 801da163ce8d23e4d94879e343a408d1ff74c364
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 20 16:22:41 2023 +0000

    Bug 32660: (follow-up) Use more unique variable name to avoid collisions
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d4662294120f09b6d9db2c0e6b6dc145e8355f23
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jan 17 19:58:55 2023 +0000

    Bug 32660: Use template wrapper for basket groups tabs
    
    This patch implements the template WRAPPER system (see Bug 32571) for
    building tabs on the basket groups page.
    
    To test you must have at least one active vendor, one or more closed
    baskets under that vendor, and at least one basket group containing a
    closed basket.
    
    Apply the patch and go to Acquisitions -> Vendor -> Basket groups.
    
    You should see two tabs, "Open" and "Closed." The tabs should look
    correct and work correctly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 387ea53db2514bd69bbf00b1189db27a237c008f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 20 16:39:32 2023 +0000

    Bug 32662: Use template wrapper for item circulation alerts page
    
    This patch implements the template WRAPPER system (see Bug 32571)
    for building tabs on the item circulation alerts page.
    
    To test, apply the patch and go to Administration -> Item
    circulation alerts. There should be two tabs, "Checkout" and
    "Check-in" which work correctly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c2ad24a37b02d0f8fac690d17179d7a1e22fa09e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jan 5 13:49:00 2023 +0000

    Bug 32649: Use template wrapper for library transfer limits tabs
    
    This patch implements the template WRAPPER system (see Bug 32571) for
    building tabs on the library transfer limits page.
    
    To test, apply the patch and go to Administration -> Library
    transfer limits. It should look the same as before and all tabs should
    function correctly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d9b28400165830dcdd2d4fb2952e29b138913a87
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 20 15:47:08 2023 +0000

    Bug 32571: (follow-up) Use more unique variable name to avoid collisions
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1398f1180ca6867cbf8a6f2dec4861496eb8a8f1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jan 5 12:59:10 2023 +0000

    Bug 32571: (follow-up) Implement abstracted tabs on About page
    
    This patch implements the proposed system for building tabs on the About
    page.
    
    To test, apply the patch and view the About page. It should look the
    same as before and all tabs should function correctly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9df8e02df06a3a266f8716c19e425ec5b65fa790
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jan 5 12:54:42 2023 +0000

    Bug 32571: Use template wrapper to build tabbed components
    
    This patch adds Template::Toolkit WRAPPER blocks to html_helpers.inc so
    that templates can build tabbed components while keeping tab structural
    markup separate.
    
    Each individual component of a Bootstrap tabbed interface is defined:
    
    - Main tab container
    - Tab links container
    - Individual tab links
    - Tab panel container
    - Individual tab panels
    
    Included is a usage example:
    
      [ WRAPPER tabs id= "tabs container id" ]
          [ WRAPPER tabs_nav ]
            [ WRAPPER tab_item tabname= "tab name 1" ] [ content ] [ END ]
              [ WRAPPER tab_item tabname= "tab name 2" ] [ content ] [ END ]
                ...
            [ END ]
            [ WRAPPER tab_panels ]
              [ WRAPPER tab_panel id="tab name 1"] [ content ] [ END ]
              [ WRAPPER tab_panel id="tab name 2"] [ content ] [ END ]
                ...
          [ END ]
      [ END ]
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d00d07cae751986a220d114ff165cbf5206a0283
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Feb 7 06:49:28 2023 -0500

    Bug 32612: (QA follow-up) Add BINMODE method to C4::SIP::Trapper
    
    The module Log::Log4perl::Appender::Screen is attempting to change
    binmode during unit tests for SIPServer and is failing because of
    our tie in SIPServer.pm for reasons unknown.
    
    This patch implements the perltie method TIEHANDLE which allows the
    binmode to be handled in the C4::SIP::Trapper package.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 44d8d2efffcb38d1d91fbc8acfd1d1b13b854dbe
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Dec 28 21:05:14 2022 +0000

    Bug 32544: Remove flags as option from several patron form related system preferences
    
    Because permissions aren't actually set via the patron edit
    screens, these checkboxes have no real purpose or effect.
    
    This removes flags from the selectable fields of the following
    system preferences:
    
    * PatronSelfModificationMandatoryField
    * PatronSelfRegistrationBorrowerMandatoryField
    * BorrowerMandatoryField
    * PatronSelfModificationBorrowerUnwantedField
    * PatronSelfRegistrationBorrowerUnwantedField
    
    To test:
    * Apply patch
    * Verify that the checkbox for flags can no longer be set for
    these preferences
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>

commit 517b0ae2d469ad8a1c3edc6df82de832dca8eaca
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 27 18:53:39 2023 +0000

    Bug 26765: Make author span a clickable link on OPAC results list
    
    This patch follows the markup of the staff interface catalog results
    XSLT to make authors in OPAC search results clickable.
    
    The patch also makes some minor CSS changes so that title and author
    links are not too crowded together.
    
    To test, apply the patch and rebuild the OPAC CSS.
    
    - Perform a catalog search in the OPAC which will return multiple
      results.
    - In the search results, each author in each search result should be a
      separate clickable link.
    - The margins around the result title and authors should be
      comfortable.
    - Confirm that each link takes you to the correct author search.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bc85b3b9a6817cbe06499a3e9e97fbbbb90d2167
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Dec 8 22:19:20 2022 +0000

    Bug 14911: Add 245 fields to itemsearch title column via biblio-title.inc
    
    To test:
    1. Have some records that have these 245 fields:
    
        -Title 245$a
        -Subtitle 245$b
        -Medium 245$h
        -Part number 245$n
        -Part name 245$p
    
    Note: IN KTD I have to run batchRebuildBiblioTables.pl -c
    
    2. Apply patch and do an item search that will turn up items with the 245 fields lists above
    3. Notice that those subfields are now included in the title column.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ae4c09ed5eeab11938c500bee69f340a3724790c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 18 19:53:54 2023 +0000

    Bug 15869: (QA follow-up) Don't pass placeholder framework '_USE_ORIG'
    
    This param in the dropdown is meant to signify no change, distinct from
    "" when means to set to default. In rebasing this condition was lost, this patch
    restores undef of the variable to avoid setting framework to an invalid value
    
    To test:
    1 - Stage a record with a match (export and import a record)
    2 - Attempt to import and overlay with option 'When replacing records use this framework:' 'Keep original framework'
    3 - It fails, logs note 'value too long for field frameworkcode'
    4 - Apply this patch
    5 - Try again, it succeeds - framework is not changed
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9e3a0ab4126acf67bc3cac3e9d292f8db1697b8c
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jan 13 08:23:27 2023 -0500

    Bug 15869: (QA follow-up) Add some padding around the pulldowns
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ab75204429a412dd232a2083e2116e91e6cfc573
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Nov 2 19:27:38 2022 +0000

    Bug 15869: (follow-up) Don't mock undef return value
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3a3eff3fc45a25afe8b86ef3500fda2dc0875c62
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Sep 21 21:13:17 2022 +0000

    Bug 15869: Unit test
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e5f251a709f3ebfcda57cdf7f32185464a6991d5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Sep 13 15:23:50 2016 +0000

    Bug 15869: Change framework on overlay
    
    This patch allows for selection of framework to use when overlaying
    records - by default it is set to keep the initial framework
    
    To test:
     1 - Create some records using one framework
     2 - Export the records
     3 - Edit the records to add fields not in original framework
     4 - Stage records using a rule that will find matches
     5 - Import
     6 - Note records contain new fields on display, but they are lost on edit
     7 - Apply patch
     8 - Stage records again
     9 - Select a framework that contains the new fields on import
    10 - Import records
    11 - Note records now use selected framework and are displayed/edited
    correctly
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 848022352fb3c80eeb4a03b4dcc89e20fecf5724
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Feb 6 16:39:02 2023 +0100

    Bug 32786: Display admin header on curbside pickup admin
    
    Most other administration pages (those that don't have specific searches)
    are set by default on system preferences search.
    
    Test plan:
    Go to admin > Curbside pickup
    Confirm that the syspref search is displayed in the header
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit abbcf684c272239d3bf891160e2c59f3855c195d
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Feb 6 22:53:56 2023 +0100

    Bug 32027: Fix 'librarian interface' to use 'staff interface' in Pages/HTML customizations/News
    
    This changes all occurences of "librarian interface" to the
    correct term "staff interface"
    
    To test:
    * Create a new Page
    * Verify that the pull down for location has "librarian interface"
    * Save your page
    * Verify that the list of existing pages has "Librarian interface" as
      label for the link
    * Verify that when you hover over on those links the titles read
      "librarian interface" as well
    * Apply patch
    * All those should read correctly now.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2b63498545b41929d26ab9f3fbeecfa33e277cc3
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Feb 6 22:06:32 2023 +0000

    Bug 31768: Add tools toolbar to tags page
    
    The tags tool was missing the toolbar on the left side.
    With the filters, this patch adds the toolbar below, like
    we do on other pages like HTML customizations.
    
    To test:
    * Go to Tools > Tags
    * Verify no toolbar
    * Apply patch
    * Verify toolbar is now present
    * Compare to other tool pages
    * Sign off :)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d7dcd3d1a8fd41bf76e1cf406f9cb92e6f998e52
Author: Jan Kissig <jkissig@th-wildau.de>
Date:   Wed Jan 4 14:04:28 2023 +0100

    Bug 32523: Links to missing fields in MARC editor error
    
    This bug appears after switching to the new staff interface design (from 22.05 to 22.11).
    When adding/editing a biblio in staff interface leaving out mandatory fields and click on save, you get an error dialog with shortcuts/links to these missing fields. Clicking on these links should change section tabs and focus the field.
    This patch fixes that error.
    
    Test plan:
    1) in staff interface go to /cgi-bin/koha/cataloguing/addbiblio.pl?frameworkcode=
    2) click Save
    3) Error dialog appears, informing about missing input in mandatory fields.
    4) Click on tab 0 (section 0) to make sure only marc 0XX fields are visible.
    5) In the error dialog click on a "Go to field" which points f.e. to section 9
    6) The selected / active tab will switch to section 9 and will not focus on the selected field
    7) apply patch
    8) repeat step 1) to 6)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 241ea0834849e445816bfab8d5d52ea9b1e25de6
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Feb 5 00:04:08 2023 +0100

    Bug 28674: Fix typo 'hlpd' in schema comments
    
    Fixes the lines for old_reserves.item_level_hold and
    reserves.item_level_hold comments to read 'hold'
    instead of 'hpld'
    
    To test:
    * The easiest way to verify this change is by looking
    at the patch itself
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 37220779fe06fbf71706930751ebef2db0d6d0a2
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Feb 5 01:37:19 2023 +0000

    Bug 32295: Fix punctuation for "Filters :" on serials claims page
    
    To test:
    * Add a subscription
    * Generate next issue, to have a late one
    * Go to serials > claims
    * Select your vendor
    * Verify one of the sections is labelled "Filters :"
    * Apply patch
    * Verify the section is now labelled "Filters:"
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 59cffea5d0e113b59c93e780a191232d9ad6546e
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Feb 5 03:18:05 2023 +0100

    Bug 32290: Fix terminology on ILL requests page
    
    This makes some fixes for the terminology used in
    the ill-requests.pl page:
    
    This item cannot be issued as it has no biblio record associated with it
    > This item cannot be checked out out as there is no bibliographic
      record associated with it
    
    You must choose a branch
    > You must choose a library
    
    View borrower details
    > View patron details
    
    Test plan:
    * You can set up ILL using the instructions on
      https://wiki.koha-community.org/wiki/ILL_backends
    * All strings will be located on the ILL request management page or
      the ILL requests list
    * Or... you could verify looking at the patch itself
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7b3f3ac2116053ca031be93e3530017e49a541c9
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Feb 5 01:51:12 2023 +0100

    Bug 32222: Fix capitalization in various "id is invalid"
    
    ID is an abbreviation and should be written with capitals.
    
    See: https://www.oxfordlearnersdictionaries.com/definition/english/identification
    
    This fixes all occurences of "id is invalid" to read "ID is invalid"
    
    To test:
    * As some are hard to trigger warnings, the best way here is to review the patch.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9b37c6fd35084b3c51452e2c2d353ed408356d97
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Feb 6 22:44:03 2023 +0100

    Bug 32023: Remove hr in OpacNav for CMS pages
    
    In a page created with the new Pages tool, there is a
    <hr> above the OpacNav block.
    This hr is not present on other OPAC pages and is
    removed by this patch.
    
    To test:
    1. Go to Tools > Pages > New entry
    2. Create a page and save
    3. Copy the OPAC link
    4. Go to Tools > HTML customizations > New entry
    5. Create an OpacNav entry with the link to the page
    6. Go to the OPAC main page
       --> Notice how the left navigation section looks
    7. Click on the link on the left to go to the page
       --> an horizontal line appears above OpacNav
    8. Apply patch
    9. Repeat test - the horizontal line should be gone now
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a4f190d0c2ed53ea7fc6947a23ce76b1d23d7ae1
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Feb 5 01:57:15 2023 +0100

    Bug 32226: Fix capitalization of "Add/Edit html content"
    
    HTML is an abbreviation and as such should always be
    capitalized.
    
    To test:
    * Go to administration > libraries
    * Edit any existing branch
    * The hint for OPAC info reads 'Add html content'
    * Add some content, verify the link changes to 'Edit html content'
    * Apply patch
    * Verify both cases now read 'HTML'
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4dba323ec30980485502ffea8bb90f412b14615a
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Feb 6 22:18:41 2023 +0000

    Bug 31860: Standardize capitalization used for item subfield descriptions
    
    This standardizes "Total Holds" to "Total holds" etc.
    Also changed is UNIMARC
    * "Collection code" to "Collection" like MARC21
    * "Current Location" to "Current library" like MARC21 (holdingbranch)
    * "Permanent Location" to "Home library" like MARC21 (homebranch)
    
    To test:
    * You'll need to apply the patch and then run the web installer to
      create your frameworks
    * Once you got a fresh installation, got to
      Administration > Bibliographic frameworks > Choose any
    * Go to 995 (for UNIMARC) or 952 (for MARC21)
    * Check the descriptions of the subfields for capitalization and
      spelling errors
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c93460e808ea58f4accc0884a0b4ed11ff95def1
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Feb 5 02:14:09 2023 +0100

    Bug 32264: Fix capitalization and terminology: Show in Staff client?
    
    This fixes several occurences of Staff client to read
    staff interface.
    
    To test:
    * Activate the search filter feature via the SavedSearchFilters
      system preference
    * Do a search in the staff catalogue
    * Use the link "save as search filter" on top of the results list
    * Verify it reads "Show in Staff client?" in the form
    * Go to administration > search filters
    * Verify the table has a heading "staff client"
    * Edit the filter
    * Verify there is the "Show in staff client" again
    * Apply patch
    * All those spots should now read 'staff interface'
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8637843bab8d12449fd11cb380c5192678eb6441
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Dec 14 14:20:20 2022 +0000

    Bug 32455: Cleanup and expand ExpireReservesAutoFill.t
    
    The tests here reused data, and deleted the tables before starting,
    with a little shifting we can use specific data and avoid mass deletion
    
    To test:
    prove -v t/db_dependent/Holds/ExpireReservesAutoFill.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 317685e8968d9b5ac023ae77195ac11bcd1e7b99
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Dec 14 13:46:24 2022 +0000

    Bug 32455: Unit tests
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ed30887924896b883b3cba9ddc50543af3f2636e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Dec 13 12:01:04 2022 +0000

    Bug 32455: Use from_email_address for 'from' field for hold notices
    
    This patch updates two occurrences where the inbound library email is
    used as the from address
    
    To test:
     1 - Set a unique 'Email' and 'Reply to' address for a library
     2 - Find a patron of that library, ensure they have an email
     3 - Ensure their messaging preference for holds is 'email'
     4 - Set system preference ReservesMaxPickupDelay to -1
     5 - Set system preference  ExpireReservesMaxPickUpDelay to Allow
     6 - Set system preference ExpireReservesAutoFill to Do
     7 - Place and fill a hold for that patron at that library
     8 - Check the patron's notification tab, confirm the from address is the 'Reply to'
     9 - Place a hold for another patron on the same item
    10 - Run the expired holds cronjob:
         perl misc/cronjobs/holds/cancel_expired_holds.pl --reason=whatever
    11 - Check the message_queue - notice the from address is the 'reply to'
    12 - Apply patch
    13 - Repeat 1-11, confirm the from addresses are correct now
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2e8995343ed5628eb5227dd6a09d1e9263671c11
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jan 7 00:24:11 2023 +0100

    Bug 32580: Fix typo in cancel link on background jobs page
    
    One way to test:
    * Make sure you are using Elasticsearch
    * Edit a record in your catalog
    * Go to: /cgi-bin/koha/admin/background_jobs.pl
    * Uncheck 'Current jobs only'
    * Cancel the job, you'll see a 404 error
    * Apply patch
    * Repeat, now the redirect should work right
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 539efac9aa3f07944f0945c9b5b1cb4824cbb9c0
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Feb 3 14:51:25 2023 +0000

    Bug 24616: (QA follow-up) Remove "This has bug" comment
    
    ... hopefully because there is no more bug now!
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a99f2e65301922c15aa7aa1146ee6f0e6b68aea9
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Tue Nov 1 09:21:57 2022 +0200

    Bug 24616: Do not save form if user press cancel
    
    If one starts to copy a notice but then cancels
    this when pop-up is displayed, changes are still
    saved. This patch fixes this.
    
    To test:
    1. Copy notice to a library where it already exists
    2. Press save and then cancel when pop-up is
    displayed
    => Form and changes are still saved
    3. Apply this patch.
    4. Repeat steps 1. and 2.
    => Form is no longer saved
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: ml-inlibro <marie-luce.laflamme@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7362059bb60222ea5a03b23ae7c621933fa81adc
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Thu Jul 28 15:22:20 2022 +0300

    Bug 24616: Allow copying notice to a branch even if it exists in that branch
    
    If you try to copy notice or slip to a branch which already
    has that notice or slip Koha won't let you save it. Instead
    pop-up saying branch already has that notice is displayed.
    
    This patch allows users to copy and override already existing
    notice or slip.
    
    To test:
    1. Find notice which exists e.g. in all branches and branch A.
    2. Copy that notice, add notice screen is displayed.
    3. Press save.
    => Pop-up informing that notice already exists in branch A
    is displayed.
    4. Apply this patch.
    5. Repeat steps 2. and 3.
    6. Pop-up to confirm overwrite of notice is displayed.
    => Confirm that if you press OK, notice is saved succesfully.
    => Otherwise, changes to notice should not be saved.
    
    Also try to save the notice you tested with as a new (same code)
    to branch A. Confirm that pop-up is displayed as it should be.
    
    Sponsored-by: Koha-Suomi Oy
    
    Signed-off-by: Nick <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 80a61a0f66181d26d8041c886630fd64cbd0e3f1
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jan 31 20:15:09 2023 +0000

    Bug 32772: Make all autocomplete searches 'starts_with'
    
    To test:
    1 - Add patrons with surname Fitzwilliams and Williams
    2 - Enable 'PatronAutocomplete' syspref
    3 - In checkout box type 'Will'
    4 - You see fitwilliams first
    5 - Apply patch
    6 - Type 'Will'
    7 - Autocomplete does not suggest Fitzwilliam, only Williams
    8 - Type '%will'
    9 - Fitzwilliams is suggested
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit adb863b219a1b25dfd6bafbe8344e51a4317381d
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Feb 5 02:07:20 2023 +0100

    Bug 32230: Fix capitalization of "Manage Domains"
    
    To test:
    * Go to administration > Identity providers
    * Add a new identity provider and fill out all required form fields
      Hint: you can use the buttons to add example JSON to the input fields
    * Save
    * Verify the entry in the table now shows a "Manage Domains" button
    * Apply patch
    * Verify the button now reads correctly: "Manage domains"
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 18991c25861e566b38c1565289092f55987a616f
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Feb 3 16:11:02 2023 +0000

    Bug 32881: System preferences sub menu text is hard to read
    
    This patch makes the font-size slightly larger and applies a background color to the selected submenu.
    
    To test:
    Go to system preferences
    Click on any side menu item and check the items in the sub menu under it
    Apply patch
    run yarn build
    Go to system preferences again and check the changes
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 866c39d0371ca417eb83a253c518d6d22de23ed4
Author: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
Date:   Fri Feb 3 17:32:43 2023 +0000

    Bug 32761: Correct typos in CircControl syspref
    
    To test:
    1: look up the CircControl syspref, see that it says "wether" and "libray"
    2: apply patch
    3: reload, see it says "whether" and "library"
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a5f300d9fd78a684ae006aecfe44277ab2858310
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Feb 5 02:24:58 2023 +0100

    Bug 32294: Fix capitalization for user ID in self checkout
    
    Fixes capitalization of "user ID" on the self checkout help
    page.
    
    To test:
    * Enable WebBasedSelfCheck
    * Go to: /cgi-bin/koha/sco/sco-main.pl in the OPAC
    * Log in and open help
    * Verify there is a User ID within a sentence and a User id in the heading
    * Apply patch
    * Both should be corrected
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 312535a9cce93548881a526a130f70772e125780
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Feb 5 01:44:23 2023 +0000

    Bug 32289: Fix punctuation in "Delete desk "X?"
    
    The question mark should be after the quote instead of before.
    
    To test:
    * Enable desks using the UseCirculationDesks system preference
    * Go to administration > circulation desks
    * Add a new desk and save
    * Delete desk
    * Verify the heading reads "Delete desk "X?"
    * Apply patch
    * Verify the punctuation now is fixed now
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 41b67008b8b000c045de77cada3666e779fa61af
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jan 10 19:32:56 2023 +0000

    Bug 32606: Revert Flatpickr style changes made in Bug 31943
    
    This patch removes the CSS controlling the width of a Flatpickr date
    input. The side-effects of this change are worse than the problem the
    change was intended to fix.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    Check pages which are referenced in bugs caused by Bug 31943:
    
    - The holds page (Bug 32259)
    - Checking out when specifying a date due in the past (Bug 32210)
    - Circulation -> Renew (Bug 32157)
    
    Flatpickr inputs should look correct.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 30fcbb44370048f6ad53d71225a0f40c6d27fbb1
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Dec 27 20:32:10 2022 +0000

    Bug 32515: Ignore no-block flag in check-in message
    
    Bug 12225 changed the templates to correctly pass through the no-block flag,
    however, we don't have a no-block routine for checkins
    
    This patch restore previous behaviour of performing a normal checkin when
    no block was requested - it adds a new FIXME
    
    To test:
    1 - See bug 32537
        https://bugs.koha-community.org/bugzilla3/show_bug.cgi?id=32537
    2 - Repeat test plan on that bug, noting that there is no response when no-block = Y
    3 - Apply this patch
    4 - Repeat the tests and confirm no-block = Y has a standard checkin response
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Blou <philippe.blouin@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4563e3e59b3f655a257f21045fc15f1b468f1a80
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Feb 2 14:43:38 2023 +0000

    Bug 32787: Patron restrictions admin page has patron categories search bar
    
    This patch updates the patron restriction administration page to correct
    the markup around the header and breadcrumbs: Using the header WRAPPER,
    using the sub-header WRAPPER, and switching to the system preferences
    search bar.
    
    The patch also corrects the page title to prevent a leading "rsaquo;"
    in some cases.
    
    Note: This patch contains indentation changes, so ignore whitespace when
    viewing the diff.
    
    To test, apply the patch and go to Administration -> Patron
    restrictions. The system preferences search should be preselected in the
    header search bar, and everything should look correct.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 442c6c115e5b7d4b970a6b616269f3489b910b00
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jan 20 14:12:22 2023 +0000

    Bug 32546: Move ILL system preferences into their own tab in administration
    
    Without this patch the interlibrary loan related system preferences
    appeared on the circulation tab, that is already quite long. As ILL
    is a complete module, it deserves its own tab.
    
    To test:
    * Search for interlibrary loan related preferences in Admin, verify their number
      and location
    * Apply patch
    * Verfiy all the previously found preferences now appear on their own tab:
      Interlibrary loans
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 176397d7619abf79969c98b7adc20a1c52da47fd
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Jan 17 18:42:28 2023 +0000

    Bug 32655: Move phone and itiva variables into templates
    
    To test:
    1. Go to a patron record or create a new one.
    2. Toggle the 'Patron messaging preferences' fieldset so it is hidden.
    3. Notice the variables.
    4. Apply patch
    5. Try steps 1 & 2 again, no varibales.
    6. Attempt to toggle on/off options for email/sms. When email/sms are off the digest option next to it should be disabled.
    7. Go to  Administration > Patron categories and try step 6 there as well.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 09bd0268f7d46e50f3ef9152ba4ee4411510fce2
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed Feb 1 14:59:38 2023 -0500

    Bug 32785: Typo: Maximum number of simultaneus pickups per interval (curbside pickups)
    
    This patch corrects a small typo in the curbside pickup administration
    page.
    
    To test:
    1. Apply patch
    2. Enable the CurbsidePickup system preferences
    3. Go to Administration > Curbside pickup
       --> Next to Maximum patrons per interval, the tip should be "Maximum number of simultaneous pickups per interval"
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4734ee5d003353258222b259642f807b9f920640
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Feb 2 10:00:39 2023 +0000

    Bug 32793: import_patrons.pl typo in usage
    
    Typo fix to prevent confusion in CLI usage
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a20dec603be52bc0c3a981445f9360b1c0c08e2d
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Thu Jan 19 15:50:49 2023 +0000

    Bug 28314: Spinning icon is not always going away for local covers in staff
    
    The spinner is always visible with images which are under 80-90 px high
    
    this patch remove the spinner when the image is loaded.
    
    To test:
    1. Make sure the LocalCoverImages system preference is enabled
       1.1. Go to Administration > Global system preferences
       1.2. Search for Coverimages
       1.3. Set LocalCoverImages to 'Show'
       1.4. Click 'Save all Enhanced content preferences'
    2. Add a short local cover image to a record (I added one which is just a grey rectangle with the size printed on it, to facilitate the test)
       2.1. Download the attached image
       2.2. Find a record without an image
       2.3. Click the 'Images' tab
       2.4. Click 'Upload'
       2.5. Click 'Drop files here or click to select a file' and choose the downloaded image
       2.6. Click 'Process images'
       2.7. Click on the title of the record in the page heading to access the detailed record
       --> Note that the image is displayed normally, but the spinner is also displayed
    4. Apply the patch
    5. Search for the previous record with the small image
    6. Click on the title of the record in the page heading to access the detailed record
       --> Note that the spinner is no more displayed
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ba40541038c9046e78d9c24282273cb9db4b10f2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jan 27 14:41:17 2023 -0300

    Bug 30962: (QA follow-up) Rename attribute and simplify tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ac5fbd1eb66874583c305a06353a3c067cd0e5cc
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Jan 4 00:52:25 2023 +0000

    Bug 30962: Add unit tests for /auth/password/validation endpoint
    
    Test plan:
    0. Apply patch
    1. prove -v t/db_dependent/api/v1/password_validation.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a8a356404c197e45eedc6c01847cf1811a1cc037
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Jun 17 04:43:44 2022 +0000

    Bug 30962: REST API: Add endpoint /auth/password/validation
    
    This patch adds an endpoint for /auth/password/validation
    
    This allows a third-party, using an authenticated and authorized Koha
    API user, to check if the username and password given by a user is
    correct in Koha.
    
    For example, a Keycloak extension can be created using its
    User Storage SPI to use Koha as the user database for Keycloak. This
    API allows us to authenticate the user as a particular Koha user - without
    creating a Koha user session for them.
    
    Test plan:
    0. Apply patch and koha-plack --restart kohadev
    1. Go to http://localhost:8081/cgi-bin/koha/admin/preferences.pl?op=search&searchfield=RESTBasicAuth
    2. Enable "RESTBasicAuth"
    3. Run the following commands while substituting correct values for <koha_user> and <koha_password>
    3. curl -XPOST -H "Content-Type: application/json" -u <koha_user>:<koha_password> http://localhost:8081/api/v1/auth/password/validation -d '{ "username": "<koha_username">, "password": "<koha_password>" }' -v
    4. Note "204 No Content" response
    5. curl -XPOST -H "Content-Type: application/json" -u <koha_user>:<koha_password> http://localhost:8081/api/v1/auth/password/validation -d '{ "username": "<koha_username">, "password": "this is definitely not the password" }' -v
    6. Note "400 Bad Request" response and error message {"error":"Validation failed"}
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 410b9ee35f29d9065425036dfd8099ba28911170
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jan 18 15:41:51 2023 +0000

    Bug 32672: Incorrect CSS path to jquery-ui
    
    This patch removes links to jQueryUI assets which are not required in
    the self-checkout and self-checkin pages.
    
    The patch also adds missing JS to the self-checkin page related to
    internationalization. This prevents a JS error related to an undefined
    function, "__".
    
    To test, apply the patch and view the main pages in self-checkout and
    self-checkin, and the help page in self checkout. There should be no
    errors in the browser console related to missing files.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2570062d25621d134700eb4f174b44bd93d43799
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jan 3 08:14:50 2023 -0500

    Bug 32537: (QA follow-up): Tidy code
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b1867f84852c546958a584b93c4d31af954c6e06
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jan 3 08:12:08 2023 -0500

    Bug 32537: (QA follow-up) Don't allow invalid no block values
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0880d809492f4011ef4cfac32129df4a2dd1fa71
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Dec 27 20:21:15 2022 +0000

    Bug 32537: Add no-block option to SIP cli emulator
    
    This patch adds the option to pass a no-block option and use this
    in checkout/checkin/renew messages
    
    To test:
    1 - perl misc/sip_cli_emulator.pl -a localhost -p 6001 -l CPL -su term1 -sp term1 -m checkin --item 39999000010831
    2 - Confirm out like:
        SEND: 09N20221227    20183920221227    201839APCPL|AOCPL|AB39999000010831|ACterm1|BIN|
        (Note the N after 09)
    3 - Apply patch
    4 - Restart SIP, repeat 1
    5 - Confirm still an N
    6 - perl misc/sip_cli_emulator.pl -a localhost -p 6001 -l CPL -su term1 -sp term1 -m checkin --item 39999000010831 -n N
    7 - Confirm still an N
    8 - perl misc/sip_cli_emulator.pl -a localhost -p 6001 -l CPL -su term1 -sp term1 -m checkin --item 39999000010831 -n Y
    9 - Confirm the send has a Y after 09
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6f606e00c597cfdfb30fe969b061a331c8a372db
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Feb 2 14:57:14 2023 +0000

    Bug 32797: Check if fields have a value, not if true
    
    When saving OAI set mappgins we are checking for truth, this prevents
    saving subfield 0. We should check for content
    
    To test:
    1 - Go to Admin->OAI sets
    2 - Create a set
    3 - Define mappings for the set
    4 - Attempt to save a rule on field 952 subfield 0 (withdrawn)
    5 - It does not save
    6 - Apply patch
    7 - Try again
    8 - Success!
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3bf31ae4d4dec818c48b4833e128d0a49c3419f3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 18 14:32:23 2023 +0100

    Bug 32673: Remove misc/load_testing/ scripts
    
    see comment 0 for more info
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 89ff35b0250de99b14f749e6961a73f3ee398768
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 3 09:45:03 2023 +0000

    Bug 32612: (QA follow-up) Add missing interface for Logger
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 94cb6925d409cdd8bf1ff5b59805e6375ef3e874
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 3 09:41:11 2023 +0000

    Bug 32612: (QA follow-up) Remove worker.log
    
    It is not used; overruled by daemon's --output option.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c37c3e874ca5b931017301ff6abcf17913a1b2bc
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 3 08:14:06 2023 +0000

    Bug 32612: (QA follow-up) Remove more unneeded appender lines
    
    To be more consistent ;)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cb1da500ec1d409c836b66e0a0a1836c2d56b1fe
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Feb 2 06:53:53 2023 -0500

    Bug 32612: (QA follow-up) Update package files
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 09e0f8e30db2b99556d32cbf0276fbe4e117ebab
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Feb 1 12:37:44 2023 -0500

    Bug 32612: (QA follow-up) Remove superfluous line
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3b1f2c57eaed978845eef3824c7311da06099bc5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 11 18:46:11 2023 +0000

    Bug 32612: Add worker-error to log4perl conf
    
    To test:
    1 - Apply patch
    2 - vim /etc/koha/sites/kohadev/log4perl.conf, Add lines below:
    log4perl.logger.worker = WARN, WORKER
    log4perl.appender.WORKER=Log::Log4perl::Appender::Screen
    log4perl.appender.WORKER.stderr=1
    log4perl.appender.WORKER.mode=append
    log4perl.appender.WORKER.layout=PatternLayout
    log4perl.appender.WORKER.layout.ConversionPattern=[%d] [%p] %m %l%n
    log4perl.appender.WORKER.utf8=1
    3 - Restart all
    4 - Edit misc/background_jobs_worker.pl
    -        my $job = Koha::BackgroundJobs->find($args->{job_id});
    +        my $job;# = Koha::BackgroundJobs->find($args->{job_id});
    5 - In another terminal: tail -f /var/log/koha/kohadev/koha-worker-error.log
    6 - Force enqueue a job (that won't be found because of #4
      perl -e 'use Koha::BackgroundJob::BatchUpdateItem; my $bg = Koha::BackgroundJob::BatchUpdateItem->new(); $bg->enqueue({ record_ids=>['888888']});'
    7 - Note error in log like:
      [2023/01/11 19:26:10] [WARN] No job found for id=2983 main:: /kohadevbox/koha/misc/background_jobs_worker.pl (111)
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1b6e9c7bd1c6e50ab610c6d15fe2e46af2f666ec
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Feb 2 12:30:06 2023 -0300

    Bug 32712: (QA follow-up) Add missing include
    
    I assumed it wasn't needed because teh .tt files using this already
    includ teh Koha plugin. But we shuoldn't skip, just in case someone
    doesn't notice when reusing this, and debugging will be a pain.
    
    Sorry for that.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a4999a289563281c2b6956edb94fc6e1b20ad54e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jan 27 16:32:16 2023 -0300

    Bug 32741: Fix {biblios|authorities}/bib1.att duplicate codes
    
    This patch fixes a duplicate attribute code for Author-in-order in the
    biblios definition.
    The picked code matches what was already in ccl.properties.
    
    Also Chronological-term for authorities gets fixed.
    
    To test:
    1. Apply the regression tests
    2. Run:
      k$ prove xt/verify_bib1.att.t
    => FAIL: Some failiures
    3. Apply this patch
    4. Repeat 1
    => SUCCESS: Tests now pass!
    5. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 74513307292745add212d39d5564309188159dea
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jan 27 15:59:52 2023 -0300

    Bug 32741: Regression tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d8022865cabf814c6d99882312b8422e3b8326d6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 1 14:06:27 2023 +0100

    Bug 32779: ERM - Fix import from list
    
    There is a typo, '$' is missing, which caused the following error:
    Use of inherited AUTOLOAD for non-method Koha::BackgroundJob::CreateEHoldingsFromBiblios::fix_coverage() is no longer allowed at /kohadevbox/koha/Koha/BackgroundJob/CreateEHoldingsFromBiblios.pm line 126
    
    Test plan:
    Create a list, add an item
    Turn on ERM
    Create a package
    Go to /cgi-bin/koha/erm/eholdings/local/titles
    Click "Import from list"
    Select the package, then your list, and import
    It should succeed
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4288ba2ff8419d40a8a19b360193b2c33c87703a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 1 14:28:23 2023 +0100

    Bug 32779: Add tests
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a4546536298a8c921de434de0ea3fbd58c6dd303
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Dec 6 11:19:31 2022 -0300

    Bug 32401: Remove x-koha-query support
    
    HTTP headers can only contain ASCII characters, and it is thus
    impractical to use a header for passing DB queries that could contain
    non-ascii characters.
    
    We don't need it, and should be removed.
    
    This patch removes traces from the datatables.js files and also from
    detail.tt, which had it set to false anyway.
    
    See bug 32406 and bug 32409 for the cases in which it was being used,
    and problematic.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 96cba5503c896b01bb4eb7eab326d2fa8c4b96dc
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Dec 6 11:02:20 2022 -0300

    Bug 32409: Fix cashup searching with non latin-1 chars
    
    This patch fixes a problem with the way queries are passed to the API so
    cashups are searchable with non-laint1 chars.
    
    To test:
    1. Have two superlibrarian users, one with non-latin1 chars on the name
       (e.g. خمسة)
    2. Setup a debit type that can be sold.
    3. Use the POS module to have some activity, using both your regular
       user and the other one.
    4. Go to the register you used, and choose 'Transaction history'
    5. Perform a couple cashups with each user ('Record cashup').
    6. Look at the 'Cashup history' table
    => SUCCESS: You see cashups for both users
    7. Use the 'Search' filter with latin chars
    => SUCCESS: Your user with only latin1 chars is displayed on the table
    8. Repeat, using some non-latin1 char found on the other user
    => FAIL: Table is not refreshed or filtered!
    9. Apply this patch
    10. Reload the page
    11. Repeat 8
    => SUCCESS: Filtering works now!
    12. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9248a0ef1f49677d52fb47aa5556215793bf218c
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon Dec 5 22:50:23 2022 +0000

    Bug 32406: Switch acq datatable from headers to query param
    
    This patch changes the pending orders datatable from using the
    x-koha-query header to the "q" query parameter, so that it is
    able to support UTF-8 encoded scripts rather than just Latin-1
    scripts.
    
    Test plan:
    
    1. Apply patch
    2. Go to
    http://localhost:8081/cgi-bin/koha/cataloguing/addbiblio.pl?biblionumber=29
    3. Change title from "Gairm" to "五" (alternatively use "cœur" or Arabic title)
    4. Create a basket containing multiple records including bib 29 五
    5. Close the basket
    6. Receive shipment
    7. You should be on a page like the following:
    http://localhost:8081/cgi-bin/koha/acqui/parcel.pl?invoiceid=3
    8. In the search box, type in 五
    9. Note that you see a "Processing..." box and then the
    results are filtered to just show the order for 五
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    tcohen amend: removed the line instead as we are probably phasing out
    that DT configuration option anyway.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f61a24a807224669bdfbf96d3a917431db6d045f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Feb 1 16:03:39 2023 -0300

    Bug 20256: DBRev 22.12.00.003
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 15d1c6910fb6639523d49bdf45e845943fe334eb
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Feb 1 16:03:09 2023 -0300

    Bug 20256: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4315a6144753cef3d9a6ed8ccc00f520c4a079fe
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Feb 1 11:33:56 2023 -0300

    Bug 20256: (QA follow-up) Make atomicupdate idempotent
    
    Without this patch, running the atomicupdate twice crashes on patrons
    with edit_items permissions:
    
    C4::Installer::run_atomic_updates(): DBI Exception: DBD::mysql::db do failed: Duplicate entry '19-9-edit_any_item' for key 'PRIMARY' at /kohadevbox/koha/installer/data/mysql/updatedatabase.pl line 24303
    DEV atomic update /kohadevbox/koha/installer/data/mysql/atomicupdate/bug_20256.perl  [14:26:41]
    ERROR - C4::Installer::run_atomic_updates(): DBI Exception: DBD::mysql::db do failed: Duplicate entry '19-9-edit_any_item' for key 'PRIMARY' at /kohadevbox/koha/installer/data/mysql/updatedatabase.pl line 24303
    
    It also aligns this 3yro script with the new structure we've been using.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8ea0fc43ca2162cb37ae9b3f47dde02cb0e59477
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Mar 29 14:58:00 2019 -0400

    Bug 20256: Add unit tests
    
    Signed-off-by: Bob Bennhoff - CLiC <bbennhoff@clicweb.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e84d5ccb6c6022af71eb1e17b4ee64b4ea2313f9
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Mar 28 11:07:02 2019 -0400

    Bug 20256: Use new methods
    
    Signed-off-by: Bob Bennhoff - CLiC <bbennhoff@clicweb.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit be3d1ac8579513ce910005bbede67f77f80d5904
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Mar 28 07:12:37 2019 -0400

    Bug 20256: Update groups editor
    
    Signed-off-by: Bob Bennhoff - CLiC <bbennhoff@clicweb.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c29f0bc90551da5a44db9a550b263a79034e3d10
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Mar 27 13:31:28 2019 -0400

    Bug 20256: Add new methods for checking item editing permissions
    
    Signed-off-by: Bob Bennhoff - CLiC <bbennhoff@clicweb.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 326536f436c5c379b8dea704e817784720117b2d
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Mar 27 13:06:54 2019 -0400

    Bug 20256: Refactor subs for rights to view patrons to make them generic for general use
    
    Signed-off-by: Bob Bennhoff - CLiC <bbennhoff@clicweb.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c71354d51b61412b6c3aba2dc7e489cd3884d77b
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Mar 27 13:05:24 2019 -0400

    Bug 20256: Add new permission to editor
    
    Signed-off-by: Bob Bennhoff - CLiC <bbennhoff@clicweb.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d0dab5f6ccd760cff9d1c56f4502afc76b2f29d
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Mar 27 13:03:16 2019 -0400

    Bug 20256: Update database
    
    Test Plan:
    1) Apply this patch set
    2) Run updatedatabase.pl
    3) Create two library groups with some libraries in them,
       make sure to enable the new feature to limit editing of items
    4) Test the functionality, if an item is owned by a library in
       your group, you should have full editing abilities. If an item
       is from a different group, you should only be able to make the
       same changes you would be able to if IndependentBranches were.
    
    Signed-off-by: Bob Bennhoff - CLiC <bbennhoff@clicweb.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c2664482e4d82c0a728301dfb57476909c3f609c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jan 31 14:15:53 2023 +0000

    Bug 32633: (QA follow-up) Add handling for authorities merge
    
    When you first click 'actions -> merge' from a result in the authories
    search page you will see a new 'Merging with authority: ' text appear at
    the top of the search results.
    
    Prior to this patch, the text appears outside of the white page-section
    and is almost un-noticable.
    
    After this patch, we add a page-section with bg-info (blue backround)
    around the merge message which makes it stand up more clearly.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 734a1fe63ba52b9ce214bb8129493b8184a6f59d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jan 31 13:39:20 2023 +0000

    Bug 32633: (QA follow-up) Move page-section nesting
    
    This follow-up makes a small change to the page-section nesting on the
    Cataloging and Authorities search results pages.  We move the 'h2'
    outside of the page section but include the paging and number of results
    inside with the results tables themselves.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b88ec7daeb9749d79ceca99277de2d0a1a3f26ae
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 13 12:12:30 2023 +0000

    Bug 32633: Add 'page-section' to cataloging and authority pages
    
    This patch adds a "page-section" container div around the main section
    of cataloging and authority pages which lack it.
    
    This patch contains indentation changes, so please ignore whitespace
    when looking at the diff.
    
    Apply the patch and view the following pages to confirm that the main
    content is contained in a white box:
    
     - Cataloging -> Cataloging search results
     - Cataloging -> Edit items: The table of items and the item edit form
       should each be contained in a page-section.
     - Authorities -> Search results
     - Authorites -> Merge authorities: From the authorities search results
       list, click "Actions -> Merge" for one result, and then "Actions ->
       Merge" for another.
     - Click "Next" after selecting a merge reference.
       - The "Destination record" information should be contained in a
         page-section.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0c1fbffbe4f9af3e023e4a2fb9f26ec9f38507eb
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Jan 9 18:32:39 2023 +0000

    Bug 32239: Remove uneeded CSS from reports.css
    
    To test:
    1. Apply patch.
    2. When adding a new SQL report, the options for adding/creating groups and sub groups should be aligned properly.
    3. Turn on Mana and look at Mana Knowledge Base report search results to make sure everything is still properly aligned there.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 353edc0bba92a53b027389a20765d6b58a0e3a7c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jan 31 11:06:03 2023 -0300

    Bug 32588: (QA follow-up) Add missing filter
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a813de5f85c221974b2187259e25150ca7f44534
Author: Johanna Raisa <johanna.raisa@gmail.com>
Date:   Tue Aug 9 11:58:59 2022 +0300

    Bug 31326: Koha::Biblio->get_components_query fetches too many component parts
    
    This patch adds double quotes to rcn and cni when searching component parts
    with get_components_query.
    
    Test plan:
    1) Apply the patch
    2) prove Koha/t/db_dependent/Koha/Biblio.t
    
    Sponsored-by: Koha-Suomi Oy
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0f5daaa553bc63bd2c08212ee8db3d56c52781e9
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Wed Nov 30 12:33:19 2022 +0200

    Bug 32377: Set param skiptotals on call of GetBudgetHierarchy in acqui/histsearch.pl
    
    Calling GetBudgetHierarchy from acqui/histsearch.pl
    is slow if param skiptotals is not used.
    
    To test:
    1. Open browsers Console -> Network (F12).
    2. Navigate to Order search page and perform search.
    => Take a note how long it takes to load the Search results page.
    3. Apply this patch.
    4. Repeat step 2.
    => Page should now load faster.
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: Frédéric Demians <f.demians@tamil.fr>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5249a0c1f0b9d498b3a2b6fcc55c6ef310b6e156
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Dec 16 13:14:51 2022 +0000

    Bug 20473: Whitespace
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dcd6f549d94717367ff9b2bae22f078810f35785
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Dec 16 13:12:19 2022 +0000

    Bug 20473: Don't display 'Item information' tab when adding to basket from a file and not creating items
    
    This patch adds a conditional, and moves another up one level to remove the tab
    when it will have no content/effect
    
    To test:
    1. Stage a MARC file from Tools > Stage MARC records for import
    2. Go to Acquisitions and create a basket for a vendor
    3. Add to basket from staged file
    4. Note that the "item information" tab is present, if you click on it, not that it is not useful
    5. Cancel adding to basket
    6. Apply patch
    7. Add to basket from the staged file again
    8. Confirm there is no item information tab
    9. Confirm orders are added on 'Save'
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 74f2b832558d575b4d4825518a848fe2ef92f278
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jan 7 02:11:48 2023 +0000

    Bug 32588: Make filters on 'items with no checkouts' report translatable
    
    This makes the filters on top of the 'items with no checkouts' report
    translatable. The descriptions of the filters used the wrong terms and
    were also pulled from the .pl file, making them untranslatable.
    
    To test:
    * Without patch: Run the 'items with no checkouts' report with various
      settigs.
    * Verify, that the display on top doesn't use standard terminology
      Doc type = item type, Branch = library
    * Apply patch
    * Verify display is improved and standard terminology is used
    
    If you know how to, you can also confirm strings show up nicely in
    translations:
    https://wiki.koha-community.org/wiki/Translating_Koha#Updating_the_po_files_in_your_installation
    
    Signed-off-by: Frédéric Demians <f.demians@tamil.fr>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2d724ae68e3fb1bcf7de5dcf825a5b00f85c958f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jan 31 10:55:21 2023 -0300

    Bug 27424: DBRev 22.12.00.002
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7bbd5de3e31c6612cb02f57c9f2e003ecb96d402
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jan 27 06:56:42 2023 -0500

    Bug 27424: (QA follow-up) Add confirmation if (un)checking the default smtp server checkbox
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3623847ca52ac2e95940f917ef9959702f090e30
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jan 27 06:34:31 2023 -0500

    Bug 27424: (QA follow-up) Show current default on the editor for non-default servers
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a735a2895a7a8fe6794d0b77f59f242e55d8eb5f
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jan 26 15:02:13 2023 -0500

    Bug 27424: (QA follow-up) Highlight the default row in the SMTP servers table
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1bfdd545d69c77d67ad0978de541a4546cd9ee87
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Feb 4 14:40:15 2022 -0300

    Bug 27424: Clarify logic
    
    This patch simplifies how Koha::SMTP::Servers->get_default is written,
    to help readability.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 29c263241d122b651e58d6c296eecb4a7e0aa648
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Feb 4 14:24:18 2022 -0300

    Bug 27424: (QA follow-up) Make Koha::SMTP::Server->store deal with defaults
    
    This patch makes the ->store method take care of setting the server as
    the only default one.
    
    To test:
    1. Apply this patch
    2. Run:
       $ kshell
      k$ prove t/db_dependent/Koha/SMTP/Server.t
    => SUCCESS: Tests pass!
    3. The UI keeps working as it should.
    4. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 37fcf837ce221f6bf1bcbf48fb29b09a3fd6a1b9
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jan 25 14:06:41 2022 -0500

    Bug 27424: Update database
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 26d1e6540d9a9b3417fcaaf551d6870fe1c1c081
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jan 20 14:26:13 2022 -0500

    Bug 27424: Add ability to specify an SMTP server in the database as the default server
    
    Bug 22343 adds the ability to defined SMTP servers via the UI; But to then utilise them you have to go to each individual library via the libraries admin area and select the SMTP server.
    
    We should have a way to override the fallback/default SMTP server right from the SMTP servers administration page.. setting one of our defined SMTP Servers as the system default rather than using the hard coded fallback options.
    
    Test Plan:
    1) Apply this patch set
    2) Restart all the things!
    3) Browser to the SMTP servers editor,
       verify only one server can be set as the default server
    4) Set a default server, verify that server was used to send email from
       a cronjob, AND/OR prove t/db_dependent/Koha/SMTP/Server.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 90f1da416edc0eab55b9210b30d084f10060a3d6
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jan 20 14:25:39 2022 -0500

    Bug 27424: Update schema file
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 50927bb9b530f7a9c092dfe99bd2dddc69202432
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Jan 26 21:46:51 2023 +0000

    Bug 26628: Fix access to clubs when user only has clubs permission
    
    If a user only has the clubs and no permission from the tools section,
    they can't access the patron clubs page by navigation. This patch
    extends the permission checks for tools to include the clubs, that
    live on the tools page, but have a top level permission.
    
    To test:
    - create a patron with only the catalogue and clubs permissions
    - log in to the staff client as that patron
    - navigate to a patron record, confirm you can see the Clubs tab in the patron account, can add patrons to and remove patrons from clubs
    - confirm you don't have a link to the Tools module either on the Koha homepage or in the More menu
    - enter the clubs URL manually (/cgi-bin/koha/clubs/clubs.pl), confirm you are allowed to open the page
    - Apply patch
    - The only changes should be:
      - You can now see the Tools entry in the More navigation menu
      - You can now see the Tools module link on the start page
      - Both take you to the tools page, only visible tools is 'Patron clubs'
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 494a63f9e81c2255de162ec5daad1fb2f28dc67b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Dec 14 08:42:03 2022 +0100

    Bug 32442: (bug 28739 follow-up) Ensure txn is rollbacked
    
    If the TT process call is returning false and so the croak is raised,
    then the txn is not rollbacked and the txn is not commited either.
    
    We need to ensure the txn will be correctly rollbacked.
    
    Test plan:
    1. Go to any notice and create some invalid Template Toolkit:
    
    [% IF ( 1 == 1 %]
    test
    [% END %]
    
    2. Save and continue
    
    3. Logout of Koha and attempt to log back in
    => Without this patch you got
    Transaction aborted: DBIx::Class::Storage::DBI::mysql::_exec_svp_release(): DBI Exception: DBD::mysql::db do failed: SAVEPOINT savepoint_4 does not exist at /kohadevbox/koha/Koha/Object.pm line 170
    . Rollback failed: DBIx::Class::Storage::DBI::mysql::_exec_svp_rollback(): DBI Exception: DBD::mysql::db do failed: SAVEPOINT savepoint_3 does not exist at /kohadevbox/koha/Koha/Patron.pm line 363 at /kohadevbox/koha/Koha/Patron.pm line 363
     at /usr/share/perl5/DBIx/Class/Exception.pm line 77
    => With this patch applied the login works successfully
    
    QA Note: The test is not testing that the txn is rolledback, I didn't
    manage to test that.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6d07a1cd8cc3137a4854ac1c2d3524258287f058
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Dec 14 08:31:01 2022 +0100

    Bug 32442: Add tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 37302e71fc7fab6dece6914a5438044bd1e8a14c
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jan 7 01:34:24 2023 +0000

    Bug 32589: Improve headings on result tables for 'Items with no checkouts'
    
    When no filter was selected on the search form, the heading on
    the results table showed as NULL. When library or item type were
    selected the codes instead of the descriptions showed.
    
    To test:
    * Without patch:
    * Run the 'items with no checkouts' report with different settings
      for 'By:'. Verify the headings on the tables are not nice.
    * Apply patch
    * Rerun reports
      * Headings should be "Ungrouped, item type or library descriptions
      * Summary table also shows item type and library descriptions
    
    Signed-off-by: Frédéric Demians <f.demians@tamil.fr>
      → OK. Would be nice to have decoding also in 'Filtered on' top section
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bb9db8fcfa7fb587d16fc0e553f94087c1b2962e
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jan 7 01:31:34 2023 +0000

    Bug 32587: Add page-section to 'items with no checkouts' report
    
    This adds page sections to the summary and result tables
    for the 'items with no checkouts' report.
    
    To test:
    * Run the 'item with no checkouts' report with different settings
    * Confirm result tables are missing the white brackground from
      page-section
    * Apply patch
    * Confirm the result tables now do have the white background
    
    Signed-off-by: Frédéric Demians <f.demians@tamil.fr>
      → Confirm both problem and solution
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a2444c546ea09199b86ad122c4787f1d45b9bf78
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jan 7 00:25:40 2023 +0000

    Bug 32586: Reindent items with no checkouts report template
    
    The indentation in the template was off and also full of tab
    characters, so this does some clean-up prior to doing some
    other small changes on separate bugs.
    
    To test:
    * Run the 'Items with no checkouts' report in the report module
    * Note: If you get an error in this step, you need to turn of
      sql_strict_mode in your koha-conf.xml, but this bug is out
      of scope here.
    * Apply patch
    * Rerun the report, it should appear unchanged
    
    Signed-off-by: Frédéric Demians <f.demians@tamil.fr>
      → Nice to the eyes, and no regression
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3a3afb84abfe715c198fb6e0ad20e8e0ad847626
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jan 31 10:28:20 2023 -0300

    Bug 32292: Tidy and sort keys
    
    This patch does a perltidy on the data structure, but also organizes
    keys alphabetically to ease maintenance.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a638f16d06ceb0e2bf924aa4ea8f16cffa867b70
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Nov 21 22:31:24 2022 +0000

    Bug 32292: Fix POD
    
    POD had a typo in suggestions and was missing the new aqorders.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ea660f0c4b17a6ccce0d4a5b33b43f033ddd8ca9
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Nov 21 22:15:15 2022 +0000

    Bug 32292: Add missing column descriptions to borrowers table
    
    Adds missing column descriptions for new features etc. to the
    existing entry for borrowres columns descriptions.
    
    To test:
    * Go to reports > Guided reports
    * Select patrons module
    * Make sure all entries for the tables items and suggestions show
      up with nice descriptions
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ef7634ba9217707acf1584e6896bf8ed5daa3317
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Nov 21 21:49:43 2022 +0000

    Bug 32292: Add column descriptions to biblio table
    
    This adds nice descriptions to the aqorders database columns.
    
    To test:
    * Go to Guided reports
    * Start a new report for acquisitions module
    * Verify that all aqorders columns show with nice descriptions
          None should be missing.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a07ee68f4318a1ebda6df69e002f22fa378185a2
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Nov 21 21:40:54 2022 +0000

    Bug 32292: Add column descriptions to aqorders table
    
    This adds nice descriptions to the aqorders database columns.
    
    To test:
    * Go to Guided reports
    * Start a new report for acquisitions module
    * Verify that all aqorders columns show with nice descriptions
      None should be missing.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c742247e68817d6cff62e348d291f9c40e5a341a
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Nov 21 21:36:31 2022 +0000

    Bug 32292: Add column descriptions to subscriptions table / complete items table
    
    * Adds proper labels to the database columns for suggestions
    * Adds missing item columns:
      * coded_location_qualifier
      * deleted_on
      * exclude_form_local_holds_priority
    * Fixes spelling of item type, Uniform resource identifier
    
    To test:
    * Go to reports > Guided reports
    * Select acquisition or another module using the items
    * Make sure all entries for the tables items up with nice descriptions
    * Changes to subscriptions: verify reading the patch, these don't seem to show
      up yet in guided reports.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 12ae2c59e7ba322ad2cce47c37138f374507b628
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Jan 6 21:04:54 2023 +0000

    Bug 31962: Add tooltip to 'configure' on datatable controls
    
    This makes sure that the last button on the datatable controls
    also has a tooltip, like the other buttons.
    
    To test:
    * Without the patch:
    * Check out an item and look at the table of checkouts
    * Look at the detail page of a record with at least one item
    * Confirm that the 'configure' button doesn't have a tooltip appear
      as a bubble like the other buttons
    * Apply patch
    * Restart_all and reload pages
    * Make sure the styling of the 'configure' tooltip now matches that
      of the other buttons
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d29057b38262e093d22b47faafeff71da858d408
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jan 20 15:49:09 2023 +0000

    Bug 32689: Add missing space between 773$i label text and content
    
    When 777 Ind. 2 = 8, $i will be used as the label. In this case,
    we were missing a space between the $i and the other subfields.
    This patch makes sure there is a space.
    
    Note: the colon is expected to be part of the data here.
    
    To test:
    * Update default framework to display 773 a t w i by default in the editor,
      OPAC and staff interface.
    * Search for a record in the staff interface
    * Click New > Add child record from the detail page
    * Enter 245 and any mandatory fields
    * Add $i to 773 entry and make the indicators: 0 8
    * On the detail page and the result lists,
      $i will be used a label, but there'll be no space between
      label and content.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c6366c6d6869be719e48e73b40827efd574a13c6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 1 14:32:54 2018 -0300

    Bug 19188: Use the Price template plugin with_symbol => 1
    
    To make it displayed correctly depending on the configuration of the
    currency
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5eab08cc2edd897f9afdfeb46caf5e409476946f
Author: Jenny Way <jwayway@hotmail.com>
Date:   Tue Jan 16 22:05:39 2018 +0000

    Bug 19188: Self checkout missing currency symbol
    
    Test plan:
    1. Under administration and system preferences, enable WebBasedSelfCheck
    2. In OPAC give user fine by going to 'my account' at top right
    3. Then under fines tab 'create manual invoice'
    4. Make sure this amount is more than noissuescharge which can be
       changed under system preferences
    5. Go to the web based self check from the OPAC URL
    6. Log in as your user
    7. Try to check out an item
    7. Error 'Item cannot be checked out' should occur
    8. With the patch, the currency symbol should show for the amount.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 60e6844bf0357d67ac56888578c48de3249572e6
Author: Matthias Meusburger <matthias.meusburger@biblibre.com>
Date:   Wed Sep 25 15:30:51 2019 +0200

    Bug 25812: Fines can be displayed on SIP checkin/checkout
    
    Test plan:
    
     - Enable show_outstanding_amount in SIPconfig.xml
    
     - Check that the total outstanding amout for the patron is displayed on SIP
       checkout (if it exists), for example:
       Patron has fines - You owe $10.00.
    
     - Check that the outstanding amout for a given item is displayed on SIP
       checkin (if it exists), for example:
       "You owe $10.00 for this item."
    
     - Check that it is not displayed when show_outstanding_amount is disabled.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dded614fa1735f35b0ee34869f5e45b87262382b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 3 18:16:24 2023 +0100

    Bug 30310: Fix date_to_rfc3339
    
    We need the customParseFormat plugin to provide a custom date format to
    the dayjs constructor.
    Found while working on bug 32559, don't remove this function, it will be
    used later.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e6af365491f7f5b56f545e3184cc46e0984b9c05
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 3 17:55:02 2023 +0100

    Bug 30310: Replace one more occurrence to moment
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dbfbd4c9837903c1f4b7256ea0e5bcdfed12fda8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 4 10:54:31 2022 +0100

    Bug 30310: Add missing utc plugin
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f847055586ace121cf10801bbd785b8ea1d17edd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 31 15:13:32 2022 +0200

    Bug 30310: Adjust about page
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Edit: I fixed a rebase issue that was being carried
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d8cc4950bf652733f25ad4060551a1472396247c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 31 15:12:11 2022 +0200

    Bug 30310: Remove momentjs
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 63242128a12a455de8c5339318df3ad88607d1bf
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 31 15:09:43 2022 +0200

    Bug 30310: Adjust js-date-format
    
    Test plan:
    Confirm that the test plan from bug 24455 is still passing
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 37c6d4fcccb0e87147e3c6022386eeb5ef0af021
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 31 13:52:51 2022 +0200

    Bug 30310: Add dayjs timezone plugin
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5acc976dec573ddd679219a0e920871a10622ac3
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Jan 4 23:03:42 2023 +0000

    Bug 32570: Display patron.state correctly
    
    To test:
    1. Have a patron with both a city and state in their Main address.
    2. Do a patron search that will return that patron among others.
    3. Notice the patroncity will say something like Centerville, Centerville: repeating the city but no state.
    4. Apply patch
    5. Try step 2 again, this time the city, state should display correctly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 06960c91e4f3359c349d0c694d173d4362956e97
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Dec 16 12:23:10 2022 +0000

    Bug 32482: (follow-up) Add markup comments
    
    This patch adds comments to the template to highlight the markup
    structure.
    
    This patch should have no effect on the page's appearance or
    functionality.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1e49a9fa855503d519c4c9eaa725e9933358b5d4
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Dec 16 11:48:54 2022 +0000

    Bug 32482: Reindent holds awaiting pickup template
    
    This patch reindents the holds awaiting pickup template so that it has
    consistent indentation.
    
    This patch also corrects a markup error that was causing a layout issue.
    Incorrectly closed <div>s caused the circulation sidebar menu to
    disappear.
    
    To test, apply the patch and test all aspects of the page, including:
    
    - Correctly functioning tabs and DataTables
    - Cancel selected holds waiting
    - Cancel selected holds waiting past ReservesMaxPickUpDelay
    - Cancel all holds waiting past ReservesMaxPickUpDelay
    - Cancel individual holds with cancellation requests (Cancellations
      of waiting holds via the OPAC. See "Default waiting hold cancellation
      policy" in Circulation and Fine rules).
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 06ff7cfc206dfc46021149f508e6e69ded417459
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 20 17:08:19 2023 +0000

    Bug 32690: (follow-up) Add markup comments
    
    This patch adds comments to the template to highlight the markup
    structure.
    
    This patch should have no effect on the page's appearance or
    functionality.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bcf4ff277e892595ca96a85c699e51ac08dbab6b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 20 16:59:42 2023 +0000

    Bug 32690: Reindent the serial collection template
    
    This patch reindents the serial collection template so that it has
    consistent indentation. These changes should have no visible effect on
    the page.
    
    To test, apply the patch and go to Serials -> Subscription detail ->
    Serial collection. Everything should look normal. All tabs should work
    correctly.
    
    Viewing the diff while ignoring whitespace changes should show only
    places where a line break was added.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 50f997a4b4376845cd812980e0e667698dd7f0f8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jan 30 17:27:53 2023 +0000

    Bug 31095: (Rebase follow-up) Correct fine rules and AddIssue calls
    
    This patch corrects the errant call to AddIssue that passes a patron
    object instread of a patron hash to AddIssue in the tests and also adds
    lengthunit to squash a pair of warnings.
    
    However, it doesn't resolve the failing test.. still somthing going on
    there.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Bug 31095: Fix Circulation.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ebb3eac6a142d649df7bb900a7dcffed84090f66
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jan 30 12:57:32 2023 -0300

    Bug 31095: DBIC additions and relation name tweak
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f0b37d31315ef24cff11ad101dca7886a0d42ee6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jan 30 12:25:19 2023 -0300

    Bug 31095: (QA follow-up) Fix POD
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 847d50f865c4a8b591163041fd987001ecda2ead
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 16 15:52:13 2022 +0000

    Bug 31095: (follow-up) Iterate debarments in batch mod
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f73bafaf877b53702ca3095dc81406e499b5e0e3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 18 15:01:02 2022 +0100

    Bug 31095: (QA follow-up) Fix after rebase
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7c1ffd2b11501fdcedb8e7dd2e2838283c847ede
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Aug 25 10:22:39 2022 +0100

    Bug 31095: Remove GetDebarments from Koha::Patron::Debarments
    
    This patch finally removes GetDebarments from the codebase.
    
    Test plan
    1. Confirm GetDebarments is no longer mentioned in the codebase. `git
       grep GetDebarments`
    2. Confirm t/db_dependent/Patron/Borrower_Debarments.t continues to pass
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 52c786205e00afb17d0757483c157387dd229445
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Aug 25 10:16:46 2022 +0100

    Bug 31095: Remove GetDebarments from Borrower_Debarments.t
    
    This patch replaces calls to GetDebarments with teh
    $patron->restritions->search() equivilents.
    
    Test plan
    1. Run the test prior to the patch and confirm it passes
    2. Run the test after the patch and confirm it passes
    3. Confirm no tests were removed
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4a3a22f2b43174a61220e651400f9207a1b5d97e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Aug 25 09:23:36 2022 +0100

    Bug 31095: Remove GetDebarments from Restriction/Type.t
    
    This patch replaces GetDebarments with $patron->restrictions in
    t/db_dependent/Koha/Patron/Restriction/Type.t
    
    Test plan
    1. Confirm t/db_dependent/Koha/Patron/Restriction/Type.t passes prior to
       the patch
    2. Confirm t/db_dependent/Koha/Patron/Restriction/Type.t passes after
       the patch
    3. Confirm no tests were removed
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f35fb719774ca1965d9406e86816a318bac893c6
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Aug 25 09:11:13 2022 +0100

    Bug 31095: Remove GetDebarments from MarkIssueReturned.t
    
    This patch removes GetDebarments from Ciculation/MarkIssueReturned.t
    
    Test plan
    1. Confirm t/db_dependent/Circulation/MarkIssueReturned.t passes prior
       to the patch
    2. Confirm t/db_dependent/Circulation/MarkIssueReturned.t passes after
       the patch
    3. Confirm no tests have been removed
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 07d3426ae82335dd64c5f0090ca175f0126d33cd
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Aug 25 09:00:51 2022 +0100

    Bug 31095: Remove GetDebarments from maxsuspensiondays.t
    
    This patch replaces GetDebarments in maxsuspensiondays.t with calls to
    the restrictions accessor.
    
    Test plan
    1. Confirm t/db_dependent/Circulation/maxsuspensiondays.t passes prior
       to this patch
    2. Confirm t/db_dependent/Circulation/maxsuspensiondays.t passes after
       this patch
    3. Confirm no tests have been removed in this patch
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9ea8cf0a8f5a5a827f1f553923a016811d04de9b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Aug 25 08:56:54 2022 +0100

    Bug 31095: Remove GetDebarments from Patron::Import
    
    This patch replaced GetDebarments with $patron->restrictions->search in
    Koha::Patron::Import.
    
    Test plan
    1. Confirm that importing patrons with debarred and debarredcomment
       fields in the import still works as expected
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 445223623378e16c76870acb53d027ac1d41b851
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Aug 25 08:36:37 2022 +0100

    Bug 31095: Remove GetDebarments from Circulation.t
    
    Replace GetDebarments with $patron->restrictions.
    
    Test plan
    1. Run test prior to patch - all should pass
    2. Run test after patch - all should pass
    3. Confirm no tests were removed as part of the patch
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0f15a74853b05ea2372a99fce1500ac1b15b5baf
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Aug 24 16:47:54 2022 +0100

    Bug 31095: Remove GetDebarments from Circulation.pm
    
    This patch removes GetDebarments from Circulation.pm replacing them with
    calls to $patron->restrictions and filtering using a chained search
    call.
    
    Test plan
    1. Confirm that t/db_dependant/Circulation.t continues to pass
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e44c5146d367a6c4b76ef5c03446ba34574642ee
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Aug 24 16:30:43 2022 +0100

    Bug 31095: Remove GetDebarments from tools/modborrowers.pl
    
    This patch removes GetDebarments from the modborrowers tool controller
    and replaces it with $patron->restrictions as appropriate.
    
    Test plan
    1. Confirm that the 'Batch patron modification' tool pages still load
       and perform as expected.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 700bff51e97619ce3b6266b5b590736006814437
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Aug 24 16:20:05 2022 +0100

    Bug 31095: Remove keyed_on_code
    
    We no longer require keyed_on_code from Koha::Patron::Restrictoin::Types
    as we have relation accessors for the relevent use cases and no longer
    reference the method anywhere in the codebase!
    
    Test plan
    1. Confirm 'keyed_on_code' is no longer referenced anywhere in the
       codebase.
       `git grep keyed_on_code`
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6388fbbd7f60dd65cbcf71a16e9cafe88a3c8a87
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Aug 24 16:16:34 2022 +0100

    Bug 31095: Remove borrower_debarments and patron_restrictions includes
    
    This patch removes the aforementioned includes and drops the last
    remaining reference to them.
    
    We have replaces these includes with patron-restrictions-tab.inc and
    restriction-types.inc.
    
    Test plan
    1. Confirm the includes are no longer referenced anywhere in the
       codebase. 'git grep borrower_debarments.inc', 'git grep
       patron_restrictions.inc'
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 401794687626f5333476a0174d2cbe1ab6a8f465
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Aug 24 16:14:59 2022 +0100

    Bug 31095: Remove GetDebarments from members/memberentry.pl
    
    This patch removes the use of GetDebarments from members/memberentry.pl
    and replaces the references in the templates with patron.restrictions.
    
    Test plan
    1. Add a new user and confirm that the patron restrictions section does
       not appear on the form
    2. Edit the user and confirm the patron restrictions section now appears
    3. Add a manual restriction using the patron edit form
    4. Confirm the restriction appears on the patron edit form
    5. Confirm you can remove the restriction usine the patron edit form
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit efd9ed271c703ef104b9ff8da1a06a98b9f4d0bb
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Aug 24 16:13:26 2022 +0100

    Bug 31095: Remove GetDebarments from members/moremember.pl
    
    This patch removes the use of GetDebarments from members/moremember.pl
    and replaces template references with patrons.restrictions and the new
    includes introduced in the prior patch
    
    Test plan
    1. Confirm that the 'Restrictions (x)' tab still appears on the patron
       details page.
    2. Confirm that the 'Restrictions (x)' tab count is correct
    3. Confirm that the 'Restrictions (x)' tab table functions
    4. Confirm that the 'Restrictions (x)' tab 'Add manual restriction' form
       works as expected
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2a9ad2691295ab1d2b70706f380c93e626c48d88
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Aug 24 16:11:43 2022 +0100

    Bug 31095: Remove GetDebarments from circ/circulation.pl
    
    This patch remove the use of GetDebarments from circ/circulation.pl,
    replacing it with a reference to patron.restrictions in the template and
    includes.
    
    Test plan
    1. Confirm that the 'Restrictions (x)' tab still appears on the checkout
       page for a user.
    2. Confirm that the 'Restrictions (x)' tab count is correct
    3. Confirm that the 'Restrictions (x)' tab table functions
    4. Confirm that the 'Restrictions (x)' tab 'Add manual restriction' form
       works as expected
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 55d5e0a40d1d688ddaa734db6ff6a68a977d594f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Aug 24 16:01:27 2022 +0100

    Bug 31095: Add type relation accessor to Koha::Patron::Restriction
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 83b3ccc3c805c1810d362811335a3cc28de3a561
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Aug 24 16:00:52 2022 +0100

    Bug 31095: Add restrictions accessor to Koha::Patron
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 437e752938b7c422676845b8df1619fa2270a887
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Aug 22 14:06:31 2022 -0300

    Bug 31095: Add Koha::Patron::Restriction(s)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 024cdf269ae8527d02c15e442af69a3ccda6e551
Author: Slava Shishkin <slavashishkin@gmail.com>
Date:   Wed Dec 21 14:46:45 2022 +0200

    Bug 32504: Fix misalignment of visibility of basket orders table columns and missing export columns
    
    To reproduce:
    1. Go to /cgi-bin/koha/admin/columns_settings.pl
    2. In the section Acquisition > Basket > Orders uncheck all checkboxes in the table settings
    3. Go to a separate browser window to /cgi-bin/koha/acqui/booksellers.pl and open/create a new basket and add one book to it so the basket table will have rows in the "Order" table which we will configure below:
    4. Click on the ["Columns" settings] for the table.
    5. In the dropdown menu, observe that all Columns are marked as visible and correspond to the current table display.
    6. Also check the export table feature: Click on "Export" and choose print, you will see that Columns up to GST (goods_and_services_tax) are displayed, and Fund and Estimated delivery date are missing.
    7. Go back to table settings (like it was in steps.1-2)
    8. Make the estimated_delivery_date column 'invisible by default' by checking out the appropriate checkbox and saving the changes.
    9. Refresh the basket window/page (like in step 3).
    10. Observe that in the table the whole columns "Estimated delivery date" is visible but "Fund" is gone.
    11. Click on the ["Columns" settings] for the table.
    12. In the dropdown menu observe that the wrong column is disabled ("Fund" instead of "Estimated delivery date").
    13. Apply the patch.
    14. Go through steps 3-12 and make sure that everything mentioned in those steps now works correctly: when you hide any columns in columns_settings.pl they are correctly hidden for the "Order" table, as well when exporting the table, the Fund, and Estimated delivery date columns are now exported.
    
    Note: this patch also respects Koha.Preference('EDIFACT') setting and when it's enabled it also correctly hides/shows and exports the 'supplier_report' column.
    
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9157a7e6db77ba20f7d686a67c4de6e9e27b1567
Author: Slava Shishkin <slavashishkin@gmail.com>
Date:   Tue Dec 20 16:49:57 2022 +0200

    Bug 32504: Fix typo columnname in columns_settings.yml
    
    Trivial fix.
    
    To reproduce:
    1. Go to /cgi-bin/koha/admin/columns_settings.pl
    2. Observe in the section Acquisition > Basket > Orders an empty field in the Column name, the row between fund and supplier_report rows: it was expected estimated_delivery_date value.
    3. Apply the patch.
    4. Restart Memcached (console: service memcached restart)
    5. Reload cgi-bin/koha/admin/columns_settings.pl: that empty row now will have estimated_delivery_date value.
    
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0fe829e5b2a67a8af2b026af02dcb23ec55af195
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Mon Jan 16 15:06:19 2023 -0500

    Bug 32644: Terminology: staff/intranet and biblio in plugins-home page
    
    This patch replaces some incorrect terminology in the plugins-home page.
    The current terminology is available at https://wiki.koha-community.org/wiki/Terminology
    
    To test:
    0. Make sure you have no enhanced content plugins installed
    1. Apply patch
    2. Go to Administration > Manage plugins
    3. Click 'View plugins by class'
       --> Notice that one of the options is 'View bibliographic record enhancement
       plugins for the staff interface'
    4. Make sure this phrase is gramatically correct, makes sense and has no
       typos
    5. Click on that option
       --> Notice that the message says 'No plugins that can enhance the bibliographic
       records in the staff interface are installed'
    6. Make sure this phrase is gramatically correct, makes sense and has no
       typos
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5a0dbb3cd70660e1d66ab60ac732223e3d6c6cdb
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jan 17 12:45:35 2023 +0000

    Bug 32600: Housebound module needs page-section treatment
    
    This patch adds a .page-section container to two areas in the patron
    homebound template.
    
    This patch contains indentation changes, so please ignore whitespace
    when looking at the diff.
    
    To test, apply the patch and make sure the HouseboundModule system
    preference is enabled.
    
    - Locate a patron and edit their record.
    - In the "Housebound roles" section, check both "Chooser" and
      "Deliverer."
    - Locate another patron and click on the "Housebound" menu item in the
      left-hand sidebar.
    - On the "Manage housebound profile" page, set a delivery day and
      frequency and save changes.
    - On the "Housebound details for..." page the details section at the top
      should be correctly styled.
    - Click "Add a new delivery."
    - Fill out some delivery details and click "Save."
    - Now the "Housebound details for..." page should show a "Deliveries"
      section which is correctly styled.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 890231e7e65f0be00e153111b92ac77dbf0f6d16
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 27 15:05:30 2023 +0000

    Bug 32738: Correct upload local cover image title tag
    
    This patch corrects the local cover image template's title tag so that
    it conforms to the changes made in Bug 26703, 'Modify the "title"
    elements to contain unique information first.'
    
    The patch also makes minor corrections to the page's breadcrumbs.
    
    To test you must have the LocalCoverImages system preference enabled.
    
    - Apply the patch and go to Cataloging -> Upload local cover image.
    - The page title should be correct:
      Upload local cover image › Cataloging › Koha
    - The breadcrumbs should be:
      Home -> Cataloging -> Upload cover image
    - Locate a bibliographic record and view its details.
    - Click the "Images" tab, then the "Upload" button.
    - The page title should now be
      Upload local cover image for [title] › Cataloging › Koha
    - The breadcrumbs should now be:
      Home -> Cataloging -> Upload local cover image -> Upload cover for
      [title]
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2addd2879a0dc84775e594c354e2d7d4897b7df1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jan 12 18:00:56 2023 +0000

    Bug 32618: Add 'page-section' to various administration pages
    
    This patch adds a "page-section" container div around the main section
    of administration pages which lack it.
    
    The SMS providers page required a small change to the associated
    JavaScript in order to target the right container, so you may need to
    clear your browser cache to get the correct behavior.
    
    This patch contains indentation changes, so please ignore whitespace
    when looking at the diff.
    
    To test, apply the patch and view the following pages to confirm that
    the main content is contained in a white box:
    
     - Acquisitions -> Vendor -> Contracts
     - Administration -> Budgets -> Budget details -> Planning
     - Administration -> Circulation desks
     - Administration -> OAI sets configuration -> Define mappings
     - Administration -> System preferences -> Search for
       'OverDriveAuthName' -> OverDrive library authnames table
     - Administration -> SMS cellular providers
       - Confirm that the "Edit" buttons work correctly to show and hide the
         right content.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ac1ab8ab451c3dfb76462e7a72273e009aef8be3
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Dec 19 23:50:17 2022 +0000

    Bug 32382: (follow-up) Fix selector
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d66d118b4305f25dea432db490234763330aafc2
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Dec 2 00:18:59 2022 +0000

    Bug 32382: Fix alignment on invoice summary page
    
    To test:
    
    1. Apply patch
    2. Have some funds from budgets that are both active and inactive
    3. Receive a basket and click 'Finish receiving' to get to the invoice page
    4. Look at the Fund/Show inactive line and make sure it is aligned right
    5. With some inactive funds click 'Show inactive' and make sure they appear in this dropdown
    6. Click 'Add an adjustment'. Make sure the Fund/Show inactive line looks correct there as well/
    7. Make an adjustment and click 'Update adjustments' make sure the line also looks right in the table that appears.
    8. Inside that table make sure you can click the 'Show inactive' checkbox and the inactive budgets appears.
    
    Note: Some of the HTML was ouside of the HTML body, so I moved it into the HTML body so it will be valid.
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 320d184bb1e1f0fb66fec45fb035d7049fd6e808
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jan 31 09:34:13 2023 -0300

    Bug 32712: (QA follow-up) Use Koha.Preference
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d74fe69d2c463078ba4c0797cdc3d01fab82bccb
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jan 30 17:08:36 2023 -0300

    Bug 32712: Fix OPAC breakage when OPACShowCheckoutName enabled
    
    Bug 31313 removed GetItemsInfo and proper Koha::Object-based objects are
    passed now. But some automatic search & replace kept patron-related
    attributes incorrectly linked to Koha::Item.
    
    This patch makes the item-status.inc file reuse the checkout object and
    get the linked patron to gather the required information. Some
    simplification is done on hte same patch... should be trivial.
    
    To test:
    1. Have OpacShowCheckoutName enabled
    2. Pick a biblio with items (all of them not checkecd-out)
    3. Open the OPAC detail view for the biblio
    => SUCCESS: You see the biblio and the items
    4. Check one of the items out
    5. Refresh the OPAC page
    => FAIL: The page explodes!
    6. Apply this patch
    7. Refresh the OPAC page
    => SUCCESS: You see the biblio and the items, the patron info is
    correctly displayed.
    8. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8f38f3b74ba8c16d1b6da76714371312f6a8037e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jan 30 15:38:59 2023 -0300

    Bug 32555: Fix serial vs. serialitem typo
    
    To test:
    1. Create a serial subscription
       1.1. Go to Serials
       1.2. Click on New subscription
       1.3. Fill out the first form
            - Vendor: leave empty
            - Record: enter a record number (I used 108)
            - Create an item record when receiving this serial
            - When there is an irregular issue: Keep issue number
            - Manual history: leave unchecked
            - Call number: leave empty
            - Library: Centerville
            - Public/nonpublic note: leave empty
            - Patron notification: None
            - Location: None
            - Collection: None
            - Item type: Continuing resources
            - Grace period: leave empty
            - Number of issues to display: leave both empty
       1.4. Click Next (and confirm you are not using a vendor)
       1.5. Fill out the second form
            - First issue publication date: 2023-01-01
            - Frequency: 1/month
            - Subscription length: issues 12
            - Subscription start date: 2023-01-01
            - Subscription end date: 2024-01-01
            - Numbering pattern: Number
            - Locale: leave empty
            - Begins with: 42
            - Inner counter: leave empty
       1.6. Click Test prediction pattern
       1.7. Click Save subscription
    2. Click OPAC view: Open in new window.
    => SUCCESS: It should open normally in another tab/window and the record displays without problem
    3. Back in the staff interface tab, receive an issue
       3.1. Click Receive
       3.2. In Status, choose Arrived for No. 42
       3.3. Click Save
    4. Go back to the OPAC tab and refresh
    => FAIL: Page explodes
    5. Apply this patch
    6. Repeat 4
    => SUCCESS: Information shows correctly no explosions.
    7. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1b1ab5c870cd8ddf503c518b39a49e8a9de5751d
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Dec 9 03:28:12 2022 +0000

    Bug 32434: Show "Lists" line on lists results
    
    This patch adds a "Lists:" line on the lists results so that the
    output matches the search result output.
    
    This allows users to know which records belong to which lists.
    
    Test plan:
    0. Apply patch and koha-plack --restart kohadev
    1. Go to http://localhost:8080/cgi-bin/koha/opac-search.pl?idx=&q=test
    2. Add all 3 results to a new list called "Test"
    3. Note that "Lists:" appears in the search results
    4. Click on "Test" in the "Lists:" line
    5. Note that it takes you to the list "Test" and that "Lists:"
    still appears in the results
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 909a3f5612340ec8eea7274f8182a7fd4743467f
Author: Matthias Meusburger <matthias.meusburger@biblibre.com>
Date:   Thu Dec 8 14:10:18 2022 +0000

    Bug 32431: Display expiry date on SIP checkout when patron is expired
    
    Test plan:
    
     - Set up an expired patron
     - Do a SIP checkout
     - Check that the message is "Patron expired"
     - Apply the patch
     - Check that the message is "Patron expired on <correctly_formatted_date>"
     - Prove t//db_dependent/SIP/Transaction.t
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4877666fb5fed6fcab03063603a4d00cdbb7d1e0
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 20 11:56:55 2023 +0000

    Bug 32688: Convert recalls awaiting pickup tabs to Bootstrap
    
    This patch updates the recalls awaiting pickup template
    (recalls_waiting.tt) to replace a set of jQueryUI tabs. They are
    converted to Bootstrap in order to complete Bug 29226.
    
    To test, apply the patch and make sure the "UseRecalls" system
    preference is enabled.
    
    - Go to Circulation -> Recalls awaiting pickup.
    - You should see two tabs, "Recalls waiting" and "Recalls waiting over X
      days."
    - The tabs should look correct and work correctly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ebf7b6471fcf9d622d48cf6e3c1999148c2f113e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Dec 26 16:01:42 2022 -0300

    Bug 31797: Add DELETE /items/:item_id endpoint
    
    This patch adds the mentioned endpoint. The controller relies on
    Koha::Item->safe_to_delete for checks and uses `safe_delete` as
    additem.pl does.
    
    The required permissions are edit_catalogue.
    
    To test:
    1. Apply this patch
    2. Run:
       $ kshell
      k$ prove t/db_dependent/api/v1/items.t
    => SUCCESS: Tests pass!
    3. Play with item deletion using a REST tool like Postman
    => SUCCESS: All works as expected
    4. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 64d3612dd9c374a18b6aadbd26dc6e7d4be0309a
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jan 20 16:29:49 2023 +0100

    Bug 16522: Move 773 entries in result lists before 856 entries
    
    This moves the display of 773 In: displays to right before the
    856 Online resource: as suggested by Heather in order to make it
    more consistent with the display in the detail pages.
    
    Everything should be unchanged, but the position of the
    In: line :)
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5e226c1a63f916e0224d9fcbaa6e5beaf8f5b44c
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Oct 17 22:38:44 2022 +0000

    Bug 16522: (follow-up) If no 773$w, try to return host record
    
    Use host biblionumber or host itemnumber to return a host record if
    EasyAnalyticalRecords is enabled, or return an undef record and a string
    of host information when get_marc_host is called in list context.
    
    Confirm tests pass:
    - t/db_dependent/Koha/Biblio/host_record.t
    
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 48aa83a3cabc52804089199d24ea158e2586b129
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Wed Sep 28 14:11:45 2022 +0000

    Bug 16522: (follow-up) Remove HTML links from email
    
    The emails sent for cart and list are plain text and any
    <a> tag will be scrubbed by HtmlToText. So we can remove
    those links.
    
    This also solves an issue with the original patch set,
    where the error below would appear on sending a cart or
    list email from the staff interface:
    
    Template process failed: file error - biblio_a_href: not found at /kohadevbox/koha/C4/Templates.pm line 127
    
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 980682bb9673b4dd2afd50b678c267d9e38774e1
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Wed Sep 28 13:00:25 2022 +0000

    Bug 16522: (follow-up) Fix variable in OPAC cart brief display
    
    Without this change records 773 entries with links in $w would
    not display the title information, but just "No title".
    With the variable fixed, now the host's title displays.
    
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ec48907e23441648233eac2167ad4a1759b4c765
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Wed Sep 28 12:50:45 2022 +0000

    Bug 16522: (follow-up) Rename "Host item entry" to "In"
    
    We already use In: as label for 773 on the result lists and
    detail pages and it's also recommended in the MARC documentation.
    With this patch the label is the same everywhere.
    
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2eeeeeb06a2f457527a9022e2a688e8b08d645c6
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Aug 26 16:57:19 2022 +0000

    Bug 16522: (follow-up) Add missing TT filters
    
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit adad3a9e2244623b40bf07aeb5e95a0cc9b0d58c
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Fri Jul 1 10:28:31 2022 +1200

    Bug 16522: (follow-up) MARC display templates and get_marc_host fixes
    
    Also:
    - Show related parts 773$g
    - Normalise using 'Host item entry' as title
    - Remove 'foreach' because non-xslt views only return first
    - If no $w, use $atg, and related tests in
    t/db_dependent/Koha/Biblio/host_record.t
    
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 62eba64cfee763945d3f44228adbe2194395cebb
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Fri Dec 4 16:00:31 2020 +1300

    Bug 16522: Adding 773 to cart and list displays and emails
    
    This enhancement adds information from a host item entry and a link if
    applicable to the host record in the following places:
    - staff client list
    - staff client cart
    - staff client send list email
    - staff client send cart email
    - staff client search results
    - staff client detail page
    - opac list
    - opac cart
    - opac send list email email
    - opac send cart email
    - opac search results
    - opac detail page
    
    To test:
    
    1. apply patch, restart services
    2. log into the staff client and enable the syspref EasyAnalyticalRecords
    3. find a record with an item. take note of the barcode.
    4. go to another record (biblio 2). click Edit -> Link to host record
    5. enter the barcode in the input and submit.
    6. click the MARC tab and confirm the host record has been linked under
    MARC field 773.
    7. add biblio 2 to your cart, and to a list.
    8. go to your cart. confirm you see the 'host item entry' link.
    9. click on 'more details' and confirm you see the 'host item entries'
    link.
    10. click 'send' to email the cart. confirm the email contains the host
    item entry and the link sends you to the catalogue page for the record
    in the OPAC.
    11. go to the list you added the record to. confirm you see the 'source'
    link for the host item entry.
    12. click 'send list' to email the list. confirm the email contains the
    host item entry and the link sends you to the catalogue page for the
    record in the OPAC.
    13. log into the OPAC. repeat steps 7 to 12 on the OPAC and confirm they
    all pass as expected.
    14. Confirm host item info also shows correctly on the
    OPAC and staff client search results, and the OPAC and staff client
    detail pages (where XSLT is used)
    15. Delete the 773$w and confirm host item info still shows correctly
    but no longer links to biblio
    16. confirm tests pass t/db_dependent/Koha/Biblio/host_record.t
    
    Sponsored-by: Bibliotheksservice-Zentrum Baden-Württemberg (BSZ)
    
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b2c1c0efe12856b99a2ab76bc84468f409235cf8
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jan 27 13:17:42 2023 +0000

    Bug 32694: (QA follow-up) Fix missing TT filters
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9531a82e97661ce7013a8e9a64b8d5c4d2fa3635
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 20 20:18:27 2023 +0000

    Bug 32694: Fix value of 'Keep current' option in receiving
    
    This patch restores missing template toolkit markers around the variable
    
    To test:
    1 - Order an item in a basket
    2 - Close the basket
    3 - Attempt to receive the item, leaving budget as 'Keep current'
    4 - 500 Error:
    C4::Acquisition::ModReceiveOrder(): DBI Exception: DBD::mysql::st execute failed: Cannot add or update a child row: a foreign key constraint fails (koha_cclsny.aqorders, CONSTRAINT aqorders_budget_id_fk FOREIGN KEY (budget_id) REFERENCES aqbudgets (budget_id) ON DELETE CASCADE ON UPDATE CASCADE) at /usr/share/koha/intranet/cgi-bin/acqui/finishreceive.pl line 120
    5 - Apply patch
    6 - Receive order successfully!
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bcaf68b51fe73dfe0b38896c0f241725edbcb01b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jan 30 12:01:41 2023 -0300

    Bug 29021: (QA follow-up) Remove useless warnings
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d1bd38d85319ee4240df24c1e000e2b6362ad924
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jan 27 11:58:45 2023 -0500

    Bug 29021: (QA follow-up) Fix for new parameter, add unit test
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5b87d7a473328cfcf772b7faa31871be068d2a05
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 11 15:47:58 2022 +0100

    Bug 29021: RenewAccruingItemWhenPaid renewals are not seen
    
    This patch updates the call to AddRewewal from Koha::Accounts to makr
    the renewal as unseen.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 40d6a08031a2d9dd3f5c2f06c0d54043e087d742
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 1 10:19:45 2022 +0000

    Bug 30254: (QA follow-up) Remove warn from tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9f569f97d27481d78f3703251cc0583a07bb49f1
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Oct 31 18:38:04 2022 +0000

    Bug 30254: Don't charge overdue fines unless some fine exists
    
    We need to determine if a book was lost by a patron, the clues we have
    are previous charges. If we don't find any, we shouldn't charge a new fine
    
    To test:
     1 - set Lost item fee refund on return policy to "Refund lost item charge and charge new overdue fine", turn on FinesMode, make sure your circ rules charge fines
     2 - have an itemtype / patron combo that charges an overdue fine
     3 - check item out (with a due date in the future) and then right back in again
     4 - confirm patron doesn't have a fine because the item was not late
     5 - set the item to Lost
     6 - in the database, edit the date_due of your checkout to a date in the past
     7 - check the item in, it is marked found
     8 - confirm your patron now has a fine
     9 - Apply patch
    10 - Repeat with a new item and patron
    11 - Confirm no charges
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ba6b380d9180f9a2cfc622bc644b069018196c2b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Oct 31 18:37:18 2022 +0000

    Bug 30254: Unit tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d88e966adadc332b21c30993fd9d5edd5e907c0f
Author: Michael Hafen <michael.hafen@washk12.org>
Date:   Fri Jan 13 10:49:46 2023 -0700

    Bug 32583: Restore display of only one item in catalogue/moredetails
    
    Bug 31315 (Remove GetItemsInfo from moredetail) removed the code that limits
    the items displayed to only one item if the itemnumber was passed as a
    parameter to the page.
    This restores that code.
    
    Test plan:
    
    1. find a title with multple items.
    2. click on an items barcode in the holdings table on the title details page.
    3. observe that all items are shown on the catalogue/moredetails page.
    4. apply patch.
    5. refresh (catalogue/moredetails) page.
    6. observe that only the item for the barcode clicked on is shown.
    
    Signed-off-by: Amaury GAU <amaury.gau@bulac.fr>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0f2cf9f44018cd52a2616a104aa94d02148786c2
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Dec 28 21:26:13 2022 +0000

    Bug 32520: Amend DefaultPatronSearchFields system preference description
    
    Tries to clarify that the preference is not only used for the search
    in the patrons module, but also in circulation.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6898f1f132b5a01eb4c406fa711b3d13324ef538
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Dec 23 11:32:12 2022 +0000

    Bug 32520: Use DefaultPatronSearchFields in patron_autocomplete
    
    This patch updates js_includes.inc to set a new global js variable
    `defaultPatronSearchFields` with the content of the corresponding system
    preference.
    
    We then update the patron_autocomplete function to use this new global
    variable and iterate in the same way as
    koha-tmpl/intranet-tmpl/prog/en/includes/patron-search.inc.
    
    NOTE: This changes the behaviour of the autocomplete from always
    searching using contains on surname or firstname or starts with on
    cardnumber to searching using 'contains' on any of the fields listed in
    the DefaultPatronSearchFields system preference of defaulting to
    'firstname,middle_name,surname,othernames,cardnumber,userid'.
    
    Test plan
    1. Ensure autocomplete still works everywhere
    2. Confirm the system preference fields are being used.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a99d188e78d42b7c2b9f2091a64142ba45909c70
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Nov 18 07:23:25 2022 +0000

    Bug 32251: Add a fallback for when language cookie was removed
    
    Since we remove cookies after logout now, the language cookie
    might not be there yet. It is friendlier to add the template
    language fallback here now too before switching to 'default' in
    the Additional contents (AC)-context.
    
    Note: The cookie will not be removed when you added it to the list
    in koha-conf.xml.
    
    Note2: This only pertains to the use of opac-page with code param.
    
    Test plan:
    [1] Create a CMS page with AC. Add two languages (say en, nl-NL).
        Add different text to default and both languages.
    [2] Remove the KohaOPACLanguage cookie from your browser (via
        dev console).
    [3] Without this patch, copy the Current language URL from the AC
        overview page. (Note that the Default URL always refers you to
        'default'.)
    [4] Go to that page with the selected (Current..) URL. Observe that
        you still see the 'default' text.
    [5] Remove the cookie again if it might be there already.
    [6] With this patch, observe that you get the language of the
        interface now on the CMS page using the same URL.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Pascal <pascal.uphaus@gwdg.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 09874fce6c98f6ec80361da899ba54fac277bd79
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 13 15:00:25 2023 +0000

    Bug 32631: Error when previewing record during batch record modification
    
    This patch corrects an error in the script which outputs MARC data for
    preview during batch record modification.
    
    To test, apply the patch and restart services. You will need at least
    one MARC modification template in your system.
    
    - Go to Cataloging -> Batch record modification
    - Submit a batch of bibliographic records
    - In the table of records that follows, click any "Show MARC" button. A
      modal window should appear with a preview of the modified record.
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 61b1b12dda1c7d60d092ccb2a97a3108b1058b86
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jan 3 20:25:31 2023 +0000

    Bug 32562: (follow-up) Add markup comments
    
    This patch adds comments to the template to highlight the markup
    structure.
    
    This patch should have no effect on the page's appearance or
    functionality.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fc909d3bf42b5f074485ec01892f0e69eb4bd2dc
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jan 3 19:49:44 2023 +0000

    Bug 32562: Reindent the about page template
    
    This patch reindents the about page template so that it has consistent
    indentation. These changes should have no visible effect on the page.
    
    To test, apply the patch and view the about page. Everything should look
    normal. All tabs should work correctly.
    
    Viewing the diff while ignoring whitespace changes should show only
    places where a line break was added.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5e863f93c06e1e67ddbf0c705657ca7d024006f6
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Mon Aug 8 23:59:20 2022 +0000

    Bug 18247: Remove SQL queries from branch_transfer_limit.pl
    
    1. Visit Administration > Patrons and circulation > Limit transfer limits
    
    2. Observe collection codes are displayed as tabs on the Limit transfer
    limits page when the BranchTransferLimitsType syspref = 'Collection
    code'
    
    3. Switch the BranchTransferLimitsType syspref = 'item type'. Refresh
    the Limit transfer limits page and observe the tabs have changed to item
    type codes
    
    4. Apply patchset and restart services
    
    5. Reload the Limit transfer limits page and confirm it displays
    correctly with the  BranchTransferLimitsType = 'collection code' and
    'item type'
    
    6. Confirm you can successfully save transfer policies
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: Jacob Omara <jacob.omara@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e88f31d8a28566cef2275c3d9e62f3432b1f54f2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Dec 7 13:02:33 2022 +0000

    Bug 32416: Add a warning to the file
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e6efa820993c0b04fd848caf84658620b7ef337d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Dec 7 12:56:02 2022 +0000

    Bug 32416: Update attribute number for arp search to 9015
    
    Bug 20078 updated the attribute for arp to 2014 to avoid conflict with 9013 not-on-loan-count
    
    Bug 28830 then added Control-number-identifier as 2014, breaking arp again
    
    This patch updates the number to 9015
    
    To test:
    1 - Apply first patch
    2 - Attempt searching by arp, no results (add a unique 526$d to a record to ease searching)
    3 - Apply this patch
    4 - Copy bib1.att and ccl.properties to the correct locations
        cp etc/zebradb/biblios/etc/bib1.att /etc/koha/zebradb/biblios/etc/bib1.att
        cp etc/zebradb/ccl.properties /etc/koha/zebradb/ccl.properties
    5 - Restart zebra
    6 - Rebuild indexes
    7 - Search again, success!
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1f33d80d789575e353bbe1202b59311b701c9184
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jan 26 12:12:34 2023 +0000

    Bug 32733: (follow-up) Reorganize classification of information
    
    If we're dividing the sections into labeled "Information" and
    "Settings," I propose that we try to put under "Information" lines
    which are just for display, and under "Settings" lines which allow the
    user to change things: Managed by, managing library, basket group, etc.
    
    This patch moves a few lines to accomplish this. The only other change
    is to remove a "float:left" inline style from the "Change library" form
    to make it display better.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 89db73cbcef39d65f5bc838029eb8f4f4be4f62c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jan 26 11:38:53 2023 +0000

    Bug 32733: Add page-section cards to basket summary
    
    This patch adds two new page-section divs to the basket summary page.
    One for each column of details in the top area of the summary page.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bbec1228b62c81c0fa9e4a330cd4b28aed27ca99
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jan 25 16:38:01 2023 +0000

    Bug 31932: (follow-up) Markup comments
    
    This patch adds comments to the template to highlight the markup
    structure.
    
    This patch should have no effect on the page's appearance or
    functionality.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 328984439c438a13cb40adc1ad40833797274414
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jan 23 17:23:36 2023 +0000

    Bug 31932: The basket summary page template needs a cleanup
    
    This patch reindents the Acquisitions basket template so that it has
    consistent indentation. These changes should have no visible effect on
    the page.
    
    To test, apply the patch and go to Acquisitions.
    
    Locate a vendor and add a basket and some orders if necessary.
    
    Test as much of the page's functionality as possible, e.g. toolbar
    controls, in-table controls, managed-by and managing library controls,
    etc. Try adding an internal note, adding a vendor note, and deleting the
    basket.
    
    Everything should look correct and work correctly.
    
    Viewing the diff while ignoring whitespace changes should show only
    places where a line break was added.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5197d63c5593b1e808fcbb10c0124c0ea252bbcb
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Jan 10 18:10:43 2023 +0000

    Bug 32204: Check for hash before setting focus
    
    1. Search the catalog and view a record detail page of a record with items
    2. Click 'Edit items'
    3. Choose one item from the list and click 'Edit'
    4. The URL fragment or in-page anchor (#edititem) is appended to the end of the URL but you are not placed on it. Instead you are placed at the top of the page and must scroll down to edit the particular item.
    5. Apply patch
    6. Try steps 1 - 3 again, now you should be placed in the correct location (#edititem) when editing an item.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2a5e06094bfab455fa05721bde6e9ee7619716c2
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Tue Jan 24 16:55:42 2023 -0500

    Bug 32718: Capitalization: Display Order
    
    This patch corrects the capitalization of the "Display order" column heading
    in the item groups table.
    
    To test:
    0. Apply patch
    1. Enable the EnableItemGroups system preference
       1.1. Go to Administration > Global system preferences
       1.2. Search for EnableItemGroups
       1.3. Change the value to "Enable"
       1.4. Click "Save all Circulation preferences"
    2. Go to any bibliographic record
    3. Click the "Item groups" tab at the bottom
       --> First column should be "Display order"
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 17ff4e3889188a4420ef0d6399b64749ad8e46a5
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed Jan 25 16:19:10 2023 -0500

    Bug 32229: Typo: Items missing from bundle at checking for %s
    
    This patch corrects a typo in the missing items from bundle pop-up
    header.
    
    To test:
    
    I created a MARC21 file of records to use as an example. It assumes
    you have the sample branches and itemtypes that come with Koha. You
    can use any record you have in your database, you need at least three
    records each with at least one item.
    
    0. Apply patch
    1. If using the example records, import the records
       1.1. Download the attached earlyliteracy.mrc file
       1.2. Go to Cataloging > Stage records for import
       1.3. Click the button and select the file on your computer
       1.4. Click 'Upload file'
       1.5. Click 'Stage for import'
       1.6. Click 'View detail of the enqueued job'
       1.7. Click 'View batch'
       1.8. Click 'Import this batch into the catalog'
    2. If using the example records, bundle the books into the 'My first
    books bundle' record
       2.1. Click 'Manage imported batch'
       2.2. Click 'View' next to 'My first books bundle'
       2.3. Click 'Manage bundle' on the right of the item
       2.4. Click 'Add to bundle'
       2.5. Enter the following barcodes, followed by 'Submit' (or press
    enter) after each
            -  001229
            -  001230
            -  001231
            -  001232
            -  001233
       2.6. Click 'Close'
    
    Alternate step 2, if using own records: find a record with an item,
    change the leader/position 7 to c, click 'Manage bundle', then 'Add
    to bundle' and enter a few existing barcodes (at least 2).
    
    3. Check out bundle
       3.1. Go to Patrons
       3.2. Click 'Search' to find a patron
       3.3. Click 'Checkout' next to a patron
       3.4. If using example records, enter the following barcode into the
    checkout box and click 'Checkout' (or press enter)
            -  001234
            Alternate step 3.4, if using own records: checkout the 'main'
    record in which you bundled all the other records
    
    4. Check in bundle, 'losing' at least one item
       4.1. In the bar at the top of the screen, select 'Check in'
       4.2. If using the example records, enter the following barcode and
    click the arrow (or press enter)
            -  001234
            Alternate step 4.2, check in the same barcode you just checked
    out
       4.3. In the 'Barcodes' box, enter the following barcodes, pressing
    enter between each
            -  001229
            -  001230
            -  001231
            Alternate step 4.3, enter only some of the bundled barcodes
       4.4. Click 'Confirm checkin and mark missing items as lost'
       4.5. Click 'View list of missing items'
            --> Items missing from bundle at checkin for (barcode)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a85a6bc4d4a1c15a065dc8b188d6de0c23f99271
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 4 10:08:06 2023 +0100

    Bug 32561: Prevent worker to run with unecessary modules in memory
    
    Regression of bug 28413, bug 30410 added a "use Koha::Plugins" statement at the top of Koha::BackgroundJob, and so all Koha module are loaded by the worker on startup.
    
    See bug 28413 for more info
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7818717f3c69bcaf5953d6139f6a104dfb1c4ee7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Nov 22 14:05:08 2022 +0000

    Bug 32321: Pre-populate material type for 006 in advanced cataloging editor
    
    To test"
    1 - Edit a record in advanced cataloging editor with field helpers enabled
    2 - Choose a material type, not BKS, from dropdown
    3 - Set the first position to something
    4 - Save the record
    5 - 006 shows 'BKS'
    6 - Apply patch
    7 - Reload
    8 - Record should show correct value
    9 - Edit 006 and confirm the first position correctly determines material type
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aa6d1ca0c7959298e9c12f7255148d245aae1937
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 30 08:32:20 2022 +0100

    Bug 32376: Remove creation of selenium_failure_2.png
    
    This was for debugging purpose.
    
    Test plan:
    Run the tests and confirm that the screenshot is not generated when the
    patch is applied
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ab48b53d96bd33a37181b13bbb517500eae61fc2
Author: David Nind <david@davidnind.com>
Date:   Fri Jan 20 18:42:01 2023 +0000

    Bug 32692: Terminology - use staff interface for MARC framework subfield editor
    
    For the visibility options in the advanced constraints section of the
    MARC framework subfield editor, use 'Staff interface' instead
    of 'Intranet'.
    
    This makes it consistent with the terminology list (see
    https://wiki.koha-community.org/wiki/Terminology#I).
    
    Test plan:
    1. Go to Administration > Catalog > MARC bibliographic framework.
    2. Select Actions > MARC structure for any framework.
    3. For any tag select Actions > Edit subfields.
    4. Note that in the advanced constraints section for the visibility
       field that 'Intranet' is used as an option.
    5. Apply the patch.
    6. Refresh the page and note that 'Staff interface' is now used, which
       is consistent with the terminology list (see
       https://wiki.koha-community.org/wiki/Terminology#I).
    7. Sign off D:
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Amaury GAU <amaury.gau@bulac.fr>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 08cc23626c30a61254eddd552f6b23253876d753
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Jan 24 13:38:41 2023 +0000

    Bug 32393: (QA follow-up) Add explicit undef response in two catch blocks
    
    Do not implicitly depend on last statement returning nothing.
    Make it explicit. We want $args to be null here.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 85c330d8f2ca6246cf3619c8075907cce8387be0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 24 09:11:25 2023 +0100

    Bug 32393: Deal with the DB fallback part
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8df96262c145fc0ee26c019601b6a86de9396915
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 11 12:36:42 2023 +0100

    Bug 32393: Split into 2 try catch blocks
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ca9a5981839a444fce109540035f26cac2780611
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Dec 2 14:23:38 2022 +0100

    Bug 32393: Prevent invalid job to block the job queue
    
    I have faced a problem when testing an incorrect version of bug 32370.
    The frame sent to the message broker was not a correct JSON encoded
    string, and its decoding was obviously failing, exploding the worker
    script.
    Additionally, as we don't send a ack for this frame, the next pull will
    result in processing the same message, and so in the same explosion.
    No more messages can be processed!
    
    This patch is logging the error and ack the message to the broker, in
    order to not get stuck.
    
    Test plan:
    0. Dont' apply this patch
    1. Enqueue a bad message
      a. Apply 32370
      b. Comment the following line in Koha::BackgroundJob::enqueue
        $self->set_encoded_json_field( { data => $job_args,    field => 'data' } );
      c. restart_all
      d. Use the batch item modification tool to enqueue a new job
    => Notice the error in the log
    => Note that the status of the job is "new"
    => Inspect rabbitmq queue:
    % rabbitmq-plugins enable rabbitmq_management
    % rabbitmqadmin get queue=koha_kohadev-long_tasks
    You will notice there is a message in the "long_tasks" queue
    2. Enqueue a good message
      a. Remove the change from 1.b
      b. restart_all
      c. Enqueue another job
    => Same error in the log
    => Both jobs are new
    => Inspect rabbitmq, there are 2 messages
    3. Apply this patch
    4. restart_all
    => Second (good) job is finished
    => rabbitmq long_tasks queue is empty
    
    We cannot mark the first job as done, we have no idea which job it was!
    
    QA: Note that this patch is dealing with another problem, not tested in
    this test plan. If an exception is not correctly caught by the ->process
    method of the job, we won't crash the worker. The job will be marked as
    failed.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b3c5bd02e15e5f2e5c0eae3b06f26083b4856f3d
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jan 5 11:35:42 2023 -0500

    Bug 32573: Send ACK message to RabbitMQ before handling the job
    
    Splitting off this functionality from bug 32558. This is the comment that started this discussion: https://bugs.koha-community.org/bugzilla3/show_bug.cgi?id=32558#c15
    
    From the O'Reilly book Mobile and Web Messaging:
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fc650b3e871e1d558ca1ff9f0dcb2f1fa0ad5db2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 13 17:29:22 2023 +0000

    Bug 31893: Use checkauth and do not fetch about.tt template
    
    This patch updates four scripts to use checkauth instead of get_template_and_user
    
    reserve/modrequest.pl
    reserve/modrequest_suspendall.pl
    course_reserves/mod_course.pl
    members/members-update-do.pl
    
    No behvaiour change is expected
    
    To test:
    0 - Apply patch
    1 - Place some holds for a patron
    2 - From patron page, confirm you can suspend all
    3 - confirm you can delete marked holds
    4 - Edit a course in course-reserves
    5 - Make a chaneg to personal details via OPAC
    6 - Confirm change can be approved on staff side
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 9608b16a6ba9d877dddc75beb1e1eef691f7b21a
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Mon Nov 28 14:35:37 2022 +0000

    Bug 32221: Borrowers.password should no longer be an option
    
    When creating a notice template the user has the option to add the borrower's
    password to the template. This should be removed as the password should not be
    an option to be added to a notice.
    
    Test plan:
    1) Navigate to Tools > Notices and slips
    2) Either create a new notice or edit an existing notice
    3) Observe that in the list of fields available to insert into the message body,
       there is the option for "borrowers.password"
    4) Apply patch
    5) Navigate to the same menu
    6) Observe that the "borrowers.password" option is now no longer visible
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 790f00781ab6c98017529ebf226d52c36c36cd68
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jan 17 12:18:00 2023 -0500

    Bug 32656: Script delete_records_via_leader.pl no longer deletes items
    
    Bug 29788 inadvertantly replaced a call to safe_delete() with safe_to_delete()
    such that any time the script should delete an item it only checks to see if
    the item is delectable, after which deletion of the record fails because the
    items were not deleted.
    
    Test Plan:
    1) Mark a record with items to be deleted via the record leader
    2) Run delete_records_via_leader.pl -i -b -v
    3) Note the script says it is deleting the items but then the record
       deletion fails. Note the items remain in the items table of the
       database.
    4) Apply this patch
    5) Repeat step 2
    6) This time the items and record should be deleted!
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 9d950959bfee9304035ccf2789d2904a7c0b49c0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 18 15:45:34 2023 +0100

    Bug 32650: Prevent Koha/Holds.t to fail randomly
    
    22:25:51 koha_1       |     #   Failed test 'Items 1, 2, and 5 are available for filling the holds'
    22:25:51 koha_1       |     #   at t/db_dependent/Koha/Holds.t line 531.
    22:25:51 koha_1       |     #     Structures begin differing at:
    22:25:51 koha_1       |     #          $got->[0] = '1000'
    22:25:51 koha_1       |     #     $expected->[0] = '996'
    22:25:51 koha_1       |     # Looks like you failed 1 test of 6.
    22:25:51 koha_1       |
    22:25:51 koha_1       | #   Failed test 'get_items_that_can_fill'
    22:25:51 koha_1       | #   at t/db_dependent/Koha/Holds.t line 539.
    
    We need to use a numeric sort, or 1000 is before 996...
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit afcf0c95b43011aa1172c24d66b9b95b7662836b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 18 15:55:26 2023 +0100

    Bug 28670: Prevent api/v1/patrons_holds.t to fail randomly
    
    12:01:12 koha_1       |     #   Failed test 'Holds retrieved'
    12:01:12 koha_1       |     #   at t/db_dependent/api/v1/patrons_holds.t line 56.
    12:01:12 koha_1       |     #     Structures begin differing at:
    12:01:12 koha_1       |     #          $got->[0]{hold_id} = '256'
    12:01:12 koha_1       |     #     $expected->[0]{hold_id} = '255'
    12:01:12 koha_1       |     # Looks like you failed 1 test of 9.
    12:01:12 koha_1       |
    12:01:12 koha_1       | #   Failed test 'list() tests'
    12:01:12 koha_1       | #   at t/db_dependent/api/v1/patrons_holds.t line 70.
    
    This is a weird one, and the only solution I see it to force the order
    we want to receive the holds.
    
    I guess we should not rely on an order if no order by clause is passed
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit cb06a5912886bea9dd9d3587536a81a6f45f640c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 3 13:59:07 2023 +0100

    Bug 32550: (bug 28445 follow-up) Fix 'Clear on loan' link on item batch mod
    
    The 'Clear on loan' link displayed at the top of the batch item
    modification tool has been broken by bug 28445.
    
    data-is-onloan attribute is supposed to be 1 or 0, but we passed the
    checkout (Koha::Checkout=HASH)
    
    Test plan:
    1. Enter a checked-out barcode in the 'Batch item modification' page
    2. Click 'Continue'
    3. Notice a table is loaded displaying the on-loan item with a ticked checkbox 4. Click the 'Clear on loan' link above the table
    5. Notice the on-loan item is no longer selected
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 21864739e650f6803a68befbe6d841820221f63e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Oct 31 17:56:23 2022 +0000

    Bug 32054: Add get_import_record_matches object method and use it
    
    Thispatch adds the new method and alters addorderiso2907.pl to use this
    rather than GetRecordImportMatches
    
    To test:
     1 - Import the attached record several times
     2 - Set up a matching rule:
        TitleAuthor threshold: 100
        Matchpoint:
        search index: title, score: 100, tag: 245$a
        search index: author, score: 100, tag:100$a
     3 - Edit one of the imported records to have a different author
     4 - Stage the file again. and match using the matchpoint above
     5 - Note that matches are found and listed on batch management, with the lowest scored match last
     6 - Choose that match
     7 - In acquisitions, add to a basket from the staged file
     8 - Check the box for the record
     9 - Note the match lists the biblionumber for the highest scoring match, not the chosen one
    10 - Add an order and note it is for the wrong biblio
    11 - Appy patch
    12 - Restart_all
    13 - Stage the file again and choose a lower scoring match
    14 - Confirm when adding to basket this match is preserved
    15 - Complete order and verify correct biblio ordered
    16 - Stage again, select no match
    17 - Confirm no match listed when adding to basket, and choose 'Do not look for matching records' while adding
    18 - Confirm order is created on a new biblio
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 2e51b7e5d9876834e6fbea27d766404148b519e4
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Dec 22 15:18:20 2022 +0000

    Bug 32517: lowercase category codes to avoid mismatch
    
    To test:
    1 - sudo koha-mysql kohadev
    2 - UPDATE borrowers SET categorycode = LCASE(categorycode)
    3 - Try to search for patrons:
        Uncaught TypeError: categories_map[data] is undefined
    4 - Apply patch
    5 - Search for patrons
    6 - Success!
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit e6804714140b920b1400d4a985724b6fe99f8132
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Nov 21 10:20:22 2022 +0100

    Bug 32272: Restore last and previous borrowers on moredetail
    
    GetItemsInfo added a card0, card1 and card2 info with the cardnumbers of
    the last 3 borrowers.
    But 31315 forgot to adjust the code when it has been moved to using
    Koha::Items
    
    Test plan:
    Check an item in and out to several patrons
    Go to the moredetail page (items) and confirm that the "last borrowers"
    info is displayed
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit aa1f97c2ea4376f5c3232846038c224c927dddc8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jan 2 17:12:40 2023 +0100

    Bug 32505: Restore patron search by formatted dob
    
    Prior to the rewrite of the patron searches (bug 30063 and friends) it
    was possible to search for a patron using their date of birth, formatted
    following the dateformat syspref.
    
    Now it only works if the date is iso formatted.
    
    This patch is providing a fix to restore the behaviour, but does not
    make it consistent. Only searching patrons by date of birth is fixed
    here, when we actually want to fix the problem for the REST API DT
    wrapper instead.
    
    Test plan:
    Search for patrons given their date of birth. You need to select "date
    of birth" in the "Search field" dropdown, or set it in
    DefaultPatronSearchFields.
    
    Note that the column filtering is still not working, but I guess it was
    the case already in older versions. Ideally we will need to have a
    "datatype" attribute passed to the the 'th' and retrieved from
    datatables.js to add this same trick and build the query appropriately.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 4ed95f95ff617e56138b7e8eff9fc953fc6b53cc
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Dec 28 20:36:33 2022 +0000

    Bug 32535: Exclude flags from BorrowerUnwantedField system preference
    
    The system preference BorrowerUnwantedField includes a checkbox
    for "System permissions (flags)." Checking it has no apparent effect;
    one is still able to edit patron permissions with the box checked.
    This patch excludes the field from the selectable fields.
    
    To test:
    * Search for the BorrowerUnwantedField system prefernce
    * Verify that you can check/uncheck System permissions (flags)
    * Verify it doesn't have any effect, as permissions are not set
      from the patron edit form, but separately
    * Apply patch
    * Verify you no longer can check/uncheck the field in the
      system preference
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit f0e6f25428a997076d29dd3daeb905befed254f8
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Jan 13 19:01:55 2023 +0000

    Bug 31492: Set CSRF token in circulation.pl
    
    To test:
    * Turn on patronimages system preferences
    * Go to any patron account
    * Hover over the 'dummy image' for the Add button
    * Browse and select an image for upload
    * Saving results in the following error:
    
    The form submission failed (Wrong CSRF token). Try to come back, refresh the page, then try again.
    
    Apply patch and try again. You shouldn't need to try twice, it should work on the first attempt now.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 2ad22b26af3a32bf249395831c23d1e87e5db145
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Jan 9 18:12:33 2023 +0000

    Bug 32597: Fix table display of OPAC article requests
    
    To test:
    1. Enable ArticleRequests
    2. Make some requests (two or more) on the OPAC and go to the user
       summary.
    3. The table rows display horizontally.
    4. Apply patch
    5. Try step 2 again, the table should display correctly.
    
    Note: I made some whitespace changes to make the markup look correct.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit e19aa35f3916313bc29215b3fc8fdb2106d82179
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 8 18:52:09 2022 +0000

    Bug 22042: Block all return actions when BlockReturnOfWithdrawn items is set to block
    
    Currently this syspref only bokcs the literal 'return' from a patron, i.e. the checkin
    
    It still processes transfers, refunds lost items, updates NotForLoan status etc.
    
    We should block all of these things
    
    To test:
    1 - Set BlockReturnOfWithdrawn to block
    2 - Set an item as lost and withdrawn
    3 - Check it in
    4 - Item is found
    5 - Apply patch
    6 - Repeat 1-3
    7 - Checkin is blocked, item still lost
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 486d78f544f1fe074d4f474206155c4bcb02ea2a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Dec 14 15:44:28 2022 +0000

    Bug 32465: Add 'queue' to koha-worker help documentation
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit dd5a62b1fcb02e2e743a04325abb35971031dbfe
Author: Shi Yao Wang <shi-yao.wang@inlibro.com>
Date:   Thu Jul 14 10:41:27 2022 -0400

    Bug 14784: (follow-up) Unit tests
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit a05bb1e36dd8af51dd2a2039593a4303879bb62d
Author: Shi Yao Wang <shi-yao.wang@inlibro.com>
Date:   Mon Jun 13 14:05:53 2022 -0400

    Bug 14784: Fix checkin message for restricted patrons
    
    Test plan:
    Before
    
    1) Select a user with active indefinite or definite restrictions (manual restriction works)
    2) Make sure finedays=0 for the user category. See [1]
    3) Checkout and return an item (not overdue)
       A previous restriction reminder will appear
    4) Checkout and return an overdue item (change the date at checkout)
       No previous restriction reminder will appear
    
    After applying patch:
    Same steps, but a reminder should appear for step 4)
    
    [1] The "finedays" setting is called "Suspension in days" in the web interface, if you're searching for it like I did...
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit be569f1aa52ee18dd526b1da37c3baea46143dec
Author: Jacob O'Mara <jacob.omara@ptfs-europe.com>
Date:   Thu Dec 15 19:04:51 2022 +0000

    Bug 31950: Amend page-section width and alignment
    
    Test Plan:
    Navigate to Admin -> Libraries and click on a Library
    Observe that the page-section is too wide and not aligned
    Apply Patch
    Observe that page-section is now the correct width
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit b5f49be55587fd4761537b317233440598bd8c9f
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Jan 6 22:28:14 2023 +0100

    Bug 32582: Fix error in .mailmap
    
    The .mailmap had the addresses in the wrong
    sequence. The .83 address is actually the correct
    one.
    
    How this works is easiest to see in git:
    * Apply one of my patches, like bug 31962
    * Do a git log
    * You'll see the email address without .83 as author
    * Apply this patch
    * You should see the correct email now in both,
      matching the one in the patch file on bugzilla
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 8603f3c6f16f34ab33defcb6f3a0977481479455
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 13 14:07:41 2023 +0000

    Bug 32628: Add 'page-section' to various serials pages
    
    This patch adds a "page-section" container div around the main section
    of serials pages which lack it.
    
    This patch contains indentation changes, so please ignore whitespace
    when looking at the diff.
    
    To test you must have at least one subscription in your system. Apply
    the patch and view the following pages to confirm that the main content
    is contained in a white box:
    
    - Subscription batch edit:
      - Go to Serials -> Search subscriptions -> Results
      - Check the box next to one or more search results and click "Edit
        selected serials."
    - Subscription frequencies:
      - Serials -> Manage frequencies
    - View subscription alerts:
      - Log in to the OPAC and search for a subscription.
        - On the subscription detail page click the "Subscribe to to email
          notification on new issues."
      - In the staff interface, locate that subscription and view its
        details.
        - Click the "subscribers" link under "Patron notification."
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit b05ec80bbf46e039befcc978be3c101c2fd7f21e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jan 12 12:51:44 2023 +0000

    Bug 32616: Add 'page-section' to various acquisitions pages
    
    This patch adds a "page-section" container div around the main section
    of acquisitions page which lack it.
    
    This patch contains indentation changes, so please ignore whitespace
    when looking at the diff.
    
    To test, apply the patch and view the following pages to confirm that
    the main content is contained in a white box:
    
    - Acquisitions -> Vendor -> Basket -> Create EDIFACT order
    - Acquisitions -> EDIFACT messages
    - Acquisitions -> Orders search -> Results
    - Acquisitions -> Late orders
    - Acquisitions -> Vendor -> Add to basket -> From a subscription
    - Acquisitions -> Vendor -> Add to basket -> From a suggestion
    - Acquisitions -> All available funds -> Ordered
    - Acquisitions -> All available funds -> Spent
    - Acquisitions -> Vendor -> Add to basket -> From an external source ->
      Results
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit c8d4fa56d33dc1a07cdbebe19dd9e20d4e623ddd
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 13 15:34:42 2023 +0000

    Bug 32632: Add 'page-section' to some tools pages
    
    This patch adds a "page-section" container div around the main section
    of some tools pages which lack it.
    
    This patch contains indentation changes, so please ignore whitespace
    when looking at the diff.
    
    Apply the patch and view the following pages to confirm that the main
    content is contained in a white box:
    
     - From the cataloging home page: Item modifications by age. If
       necessary, add at least one rule to see the table listing all rules.
     - Go to Tools -> Batch extend due dates, and submit values which will
       return one or more results, keeping the "Preview results" checkbox
       checked. Confirm that the page previewing the results looks
       correct.
     - Go to Tools -> Quote editor. If necessary, add at least one quote in
       order to see the table of quotes.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit d3b4edf009ca7a29341f2dc8a8cebfdc807bad6d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 13 12:15:15 2023 +0100

    Bug 32622: Fix Auth.t on D10
    
    It's caused by a version mismatch of Test::MockModule with D10,
    which does not have this commit: https://github.com/geofffranks/test-mockmodule/commit/fef9e742e45e2437e3449eea9970d70555d44bff
    
    We should remove the chaining here.
    
    Test plan:
    Confirm that Auth.t still pass, and is fixed on D10
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 9b1488f251eedbeafc6c7eb817984a0ce523b6ad
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jan 9 14:09:29 2023 +0000

    Bug 32596: Filter jobs by enqueued on, not started on
    
    To test:
    1 - Do a bunch of stuff in the staff interface the will generate background jobs
    2 - Wait a bit to make sure all the jobs are done
    3 - Visit Admin->Jobs
    4 - Note there is nothing shown
    5 - uncheck 'Current jobs only' and 'Only include jobs started in the last hour'
    6 - Note that nothing is shown, but header says '(filtered from X jobs)'
    7 - Apply patch
    8 - Reload table
    9 - Confirm you can see the finished jobs now
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 855680bb11c23186e5058bc30f0132a2ff05f13d
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jan 7 00:46:20 2023 +0100

    Bug 32400: (follow-up) Add page-section to table of moved orders
    
    To test:
    * Make sure you have at least one open order, basket closed
    * Go to Administration > budgets
    * Clone the budget
    * Close the budget
    * Choose your new budget and save
    * Confirm 'can't undo later...' question
    * Verify the table of moved orders has the white background
      from the added page-section
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c9caffcbbbc06b8132b645750eb65eefae25a132
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Jan 4 18:39:48 2023 +0000

    Bug 32400: Add page-section to aqbudgetperiods table
    
    To test:
    1. Apply patch
    2. Go to Administration -> Budgets
    3. Close a budget
    4. Make sure the page-section looks right.
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c67e94a35608260121719fd78c31b7e1d85c7d64
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 6 10:09:45 2023 +0100

    Bug 32491: Split patron search terms on comma - autocomplete
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f3333da49675daca9fc9d2147d31a446d20ac8ef
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jan 5 09:23:45 2023 +0100

    Bug 32491: Split patron search terms on comma
    
    Previous behaviour allowed search 'surname, firstname'. We should remove
    the comma from the search terms.
    
    Test plan:
    On the main patron search, search for "surname, firstname" and confirm
    that with this patch applied the search returns the expected results.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cc58ca2a3cc71d2af6b2342979ec310e89fec3a6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Dec 26 15:43:16 2022 -0300

    Bug 32528: Make safe_to_delete exit earlier on error conditions
    
    This patch makes the `Koha::Item->safe_to_delete` method return right
    after one of the checked conditions is met. This way we avoid further DB
    queries and processing.
    
    No behavior change is expected
    
    To test:
    1. Run:
       $ kshell
      k$ prove t/db_dependent/Koha/Item.t
    => SUCCESS: Tests pass!
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: Tests STILL pass!
    4. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Bug 32528: Change return logic
    
    Back to 1 return statement
    Prevent the Koha::Result::Boolean instanciation duplication
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cd89c383219eb9355b225b51219007a08b5e339e
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Dec 22 22:17:04 2022 +0000

    Bug 32481: Limit prefetch size for background jobs worker
    
    This patch adds a prefetch size of 1 to the background jobs worker,
    so that it fetches 1 message at a time. Without this change,
    the RabbitMQ connection timeout when too many messages for slow tasks
    are fetched at the same time.
    
    To test:
    0. Apply patch
    1. Run background worker
    2. Rapidly enqueue multiple jobs that in total will take longer
    than 30 minutes to process
    
    Bug 32481: Use correct prefetch syntax for RabbitMQ
    
    According to https://www.rabbitmq.com/stomp.html the header to
    use for managing the prefetch is "prefetch-count".
    
    You can verify the number of delivered and unacknowledged messages
    on a channel on a connection by running "rabbitmqctl list_channels"
    on the RabbitMQ host. This will tell you how many messages have been
    delivered and are awaiting acknowledgement
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 26cce9e1c4e9c0ec6c41ffc60d89b3f75a40d227
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 4 15:33:41 2023 +0100

    Bug 32349: Remove find-nonutf8 tests
    
    We don't run it and it does not seem very useful. Let's remove it.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0adc264edb3172f7d2dca771efbe19d15f240d8f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 25 09:07:34 2022 +0100

    Bug 32349: Remove TEST_QA
    
    There is an env var that we are passing from koha-testing-docker, TEST_QA.
    It's used in Koha from a single test file, t/00-testcritic.t.
    If not set, no test is run.
    
    Do we really need this? libtest-perl-critic-perl is packaged and automatically installed.
    
    Signed-off-by: Mason James <mtj@kohaaloha.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 16ce9086e3c34f381d6d53c96e07145f19bf3ee9
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Nov 15 13:55:18 2022 +0000

    Bug 32208: Adjust Auth.pm for relogin without perms
    
    If a second login on top of a current session fails on
    permissions, we should not grant access without context.
    
    Test plan:
    [1] Run t/db../Auth.t, it should pass now.
    [2] Test interface with/without this patch:
        Pick two users: A has perms, B has not.
        Put two staff login forms in two tabs.
        Login as A in tab1. Login as B in tab2.
        Without this patch, B gets in and crashes.
        With this patch, B does not get in ('no perms').
        Bonus: Go to opac if on same domain. You are still
        logged in as B.
    
    NOTE: I added a FIXME here, since you could argue about filling
    the session info or otoh deleting the session. We present an
    authorization failure; people may not realize that they are
    still logged in (see test plan - bonus).
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8b714dc30c6c9440bbe9564d57fabb255070b64e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Nov 15 13:53:17 2022 +0000

    Bug 32208: Extend Auth.t
    
    Test plan:
    Without follow-up patch, Auth.t should fail:
        not ok 5 - No permission response
        not ok 6 - checkauth returned failure
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 67d239c1ffa1a5aabab3967af7136b07fd4eaf58
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 11 13:08:53 2022 +0100

    Bug 31908: Add selenium tests
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 43c7607fa16d04692f1765acd890a32ca8cfe1ac
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Nov 8 13:40:17 2022 +0000

    Bug 31908: Resolve second login with another userid
    
    Somewhere the line undef $userid got removed.
    We need it to resolve the second login situation.
    
    Test plan:
    Login in staff with user missing privileges.
    On the login form login again with another staff user.
    Note that you do no longer crash.
    
    Run t/db../Auth.t
    Run t/db../Koha/Auth/TwoFactorAuth.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 795b4cb6de385277cdb7626e3171f07fab749f25
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Nov 14 11:07:09 2022 +0000

    Bug 31908: Add a test to show issue
    
    Test plan:
    Without next patch, run Auth.t.
    Should fail now before next patch resolves problem:
        not ok 2 - Login of patron2 approved
        ok 3 - Did not return previous session ID
        not ok 4 - New session ID not empty
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c70977f5fe2b721ed0b00cd7c48ad9c4232273d8
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Nov 14 11:09:43 2022 +0000

    Bug 31908: Replace an exit by a safe_exit in Auth.pm L1314
    
    No change in user experience. But since we can mock safe_exit,
    we can enhance test results.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 569b1d239f5e41d62f4c8712b9febd2160a36969
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jan 6 14:25:26 2023 -0300

    Bug 32422: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a538102d39b7384ade343ffbf6927629942c43a1
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jan 6 14:24:26 2023 -0300

    Bug 32319: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a2e8d7cba23bab561f3ac32d51468410e3506940
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Dec 8 21:13:00 2022 +0000

    Bug 31935: (follow-up) Make form look better
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b754d71ab1703fa77852952fefbfb42c0af0497d
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Oct 24 22:53:24 2022 +0000

    Bug 31935: Fix misaligned form when adding serial subscription
    
    This patch attempts to fix the misaligned form on subscription-add.tt by removing some of the wrapping <p> tags and adding labels where appropriate.
    
    To test:
    1. Add a serial subscription and notice the misaligned form on step 1.
    2. Apply patch
    3. Look again and confirm that the form looks better.
    4. Read through everything and make sure the form still makes sense.
    5. Make sure the form still works properly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cf04403dd88f747c92bc776cc4e130bc6e24e91c
Author: Frédéric Demians <f.demians@tamil.fr>
Date:   Sat Dec 24 09:20:09 2022 +0100

    Bug 32531: Restore behaviour of 'include archived' filter
    
    In Suggestions management, there is a sidebar menu to organize and
    filter suggestions. In the "Suggestion information" filter section,
    there is a checkbox "Include archived". When this box us unchecked, the
    archived suggestions are not displayed. When this box is checked, all
    suggestions are displayed, archived, and not archived. This is not the
    case anymore, only archived suggestions are displayed, supposedly since
    patch for bug 23991.
    
    TO TEST:
    
    1. On a Koha installation remove all suggestions (in the table).
    2. Create two suggestions. Archive one of them.
    3. Check/Uncheck filter 'Include Archived'. Confirm that when the box is
       checked, you don't see anymore the unarchived suggestion.
    4. Apply the patch.
    5. Repeat 3, and confirm that the filter operates properly.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0e8f28b94212da131a2a289c500cd823dbc4a5e7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Dec 26 15:27:02 2022 -0300

    Bug 32529: Make Koha::Item->safe_to_delete consider 'P' holds as found
    
    Currently, the Koha::Item->safe_to_delete method checks (among other things) if there are existing waiting or in-transit holds.
    
    It seems that 'In processing' should block item deletion as well.
    
    This patch implements that.
    
    To test:
    1. Apply up to the regression tests
    2. Run:
       $ kshell
      k$ prove t/db_dependent/Koha/Item.t
    => FAIL: Boo! Tests fail!
    3. Apply this patch
    4. Repeat 2
    => SUCCESS: Tests pass!
    5. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c3d7d72bc3e9cb433cea89657b8f5d110e898a1b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Dec 26 15:26:22 2022 -0300

    Bug 32529: Regression tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f8b7a5a9cd6bbd9ff5f6e58e6e6391178a2588da
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Dec 26 13:02:25 2022 -0300

    Bug 32529: Add Koha::Holds->filter_by_found
    
    This patch adds a method for filtering Koha::Holds resultsets by the
    status belonging to Koha's concept of 'found'.
    
    To test:
    1. Apply this patch
    2. Run:
       $ kshell
      k$ prove t/db_dependent/Koha/Holds.t
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b48ea1b4520700b20ab38e39370d86e4277807cc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 4 11:28:32 2023 +0100

    Bug 32445: Deal with biblio course reserve
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 217ccf2eaebe847937e0961b307382758caf6338
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 4 09:09:06 2023 +0100

    Bug 32445: (follow-up) Fix availability display on opac-course-details
    
    This is reverting a change made by
      commit 52b5cdf79b53eb29173e92a7dfe0f76df135e7d9
      Bug 19532: Recalls on OPAC
    
    Is it correct? I let a comment on bug 19532 comment 928 to ask for
    clarification.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 94a32b3f864ffcdc1d787bd275df1692d016f8df
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 3 11:55:25 2023 +0100

    Bug 32445: include item-status-schema-org.inc
    
    Can be discussed, but it will prevent to fetch several times the same
    related objects
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1c9d1e7cc5bb36d9572d26a8cd6450667031a397
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 3 11:43:28 2023 +0100

    Bug 32445: Remove non-Koha::Item support from item-status.inc
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 31c15ed3ccd74b34070dd560db7302e317e0b474
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 3 11:29:34 2023 +0100

    Bug 32445: Fix notforloan display
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e9b3275376810e8524425b09d2272545262b93dd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 3 11:19:32 2023 +0100

    Bug 32445: Fix availability display on opac-basket
    
    Also fix holding branch
    
    Will display an empty span if no location, big deal?
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dccb727d3ff2232552a737b37cca46d6d4139428
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 3 11:02:37 2023 +0100

    Bug 32445: Fix availability display on opac-course-details
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c346084facaae681bf5092ffcda7eef0c09eac6a
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Mon Dec 12 09:46:18 2022 -1000

    Bug 32445: Fix display of 'not for loan' items in staff
    
    test plan :
    1) Edit any item, item type should be for loan, so not set to reference.
    2) Set Not for loan status to "not for loan".
    3) Go to the staff detail page:
    => Without patch it displays as: Not for loan (Not For Loan) Available
    => With patch it displays as: Not for loan (Not For Loan)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2790faf62ea434f7e47f9742f7bea54dcddcf46b
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Nov 10 21:14:09 2022 +0000

    Bug 32173: Add list count to shelves.tt
    
    To test:
    1. Build a list and look at it in the staff client.
    2. No indication of how many items are in the list.
    3. Apply patch and look again
    4. You should see "This list contains x titles"
    
    Signed-off-by: Barbara Johnson  <barbara.johnson@swbell.net>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 509e828fc7309ac3cb4bba6c56bf2e4ef34b3b4a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Nov 22 11:50:32 2022 +0000

    Bug 32319: Give header search submit button more padding
    
    This patch tweaks the appearance of the header search submit button so
    that it has a little more spacing, making it an easier click target.
    
    The patch also gives the button a slightly different hover state in
    order to make it clearer that it's a button.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    View various pages in the staff interface to confirm that the header
    search bar looks good and works correctly at various screen sizes.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b46c25ef20b3322f1af1b1092a254017a8265a9c
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Nov 30 11:17:21 2022 +0000

    Bug 32095: Remove bullets from inventory tool status
    
    The new design included bullet points in a list where the elements were aligned to the right. The bullets have now been removed using "list-style: none;" to make the styling much cleaner.
    
    Test plan:
    1) Navigate to Cataloging > Inventory
    2) Observe that in the "Optional filters for inventory list or comparing barcodes" section there are bullet points in the listed items
    3) Apply patch
    4) Navigate to the same window and observe that the bullet points are now missing
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bc974ef361926209b417502d86dbbacdb371f35a
Author: Géraud Frappier <geraud.frappier@inlibro.com>
Date:   Thu Nov 17 16:11:11 2022 -0500

    Bug 32255: Resolve "Cannot use file upload in batch record modification"
    
    When using the batch record modification tool with a file of biblionumbers, nothing happens. When we click 'Continue' the file is somehow removed before continuing.
    
    To test:
    1. Get a file of biblionumbers (if you already have a file, proceed to step 2)
       1.1. Go to Reports
       1.2. Click on 'Create from SQL'
       1.3. Enter a report name (e.g. biblionumbers)
       1.4. Enter the following SQL query
    
    SELECT biblionumber FROM biblio LIMIT 100
    
       1.5. Click 'Save report'
       1.6. Click 'Run report'
       1.7. Click 'Download' > 'Tab separated text'
    
    2. Create a MARC modification template (if you already have a MARC modification template, proceed to step 3)
       2.1. Go to Cataloging > MARC modification template
       2.2. Click 'New template'
       2.3. Enter a template name (e.g. Add note)
       2.4. Click 'Submit'
       2.5. Click 'New action'
       2.6. Choose
            - Add new
            - Field 500 a
            - with value Note
       2.7. Click 'Add action'
    
    3. Batch modify records
       3.1. Go to Cataloging > Batch record modification
       3.2. In the 'Upload a file tab', choose the biblionumber file
       --> Note that the name of the file appears next to the Choose button
       3.3. In 'Template', select the MARC modification template
       3.4. Click 'Continue'
       --> The name of the file disappears next to the Choose button and goes back to 'No file chosen'
       --> Message 'No records were modified
    
    4. Apply path
       4.1. Procede step 3.
       4.2. See that we can see the list now
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 66bf284a14a075db0500490c12c03273a39d3e48
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Oct 20 05:26:48 2022 +0000

    Bug 23032: Show MARC21 880 for 264 on detail pages
    
    This patch adds the 880 display for 264 (in addition to 260) on the
    detail pages.
    
    To test:
    0) Apply patch
    1) Create/edit a record
    2) Create 264 $6 880-01 $a Xianggang : $b Tushuguan, $c 2022
    3) Create 880 $6 264-01 $a 香港 : $b 图书馆, $c 2022
    4) View record and see "Publication details" appear with the 880
    script on the detail page on both the staff interface and OPAC
    
    Signed-off-by: Johanna Miettunen <johanna.miettunen@haaga-helia.fi>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2255d42abdb45955e82634a7b6fe1e1af0242361
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Dec 13 14:24:13 2022 +0000

    Bug 32456: Preserve date accessioned if a date is not explicitly passed
    
    To test:
     1 - Edit an item record to have a blank date accessioned
     2 - Save the record as marcxml from the detail page
     3 - Edit the item to have an accession date
     4 - Stage and import the file - matching in KohaBiblio and replacing items
     5 - Import the file
     6 - Confirm the date accessioned is cleared
     7 - Apply patch
     8 - Provide an accession date for the item
     9 - Stage and import the file again
    10 - Confirm the date remained
    11 - Edit the item to remove the date
    12 - Confirm you can manually blank the field
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ac6b7f9b5820b2515e1201568ba8648da935af06
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Dec 16 15:46:48 2022 +0000

    Bug 32456: Unit tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 22865246926bf032cc3aa4a918a68bf467896dd7
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Nov 24 21:57:40 2022 -1000

    Bug 32348: Add library public in columns settings
    
    Bug 27360 added public info on libraries table.
    This should be added to columns settings.
    Currently the column "STMP server" can not be managed in settings.
    
    Test plan :
    Play with columns settings of table Administration > Libraries
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b929d3da028ed5269ef7dd032cebdb5ab13156b5
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Dec 15 09:11:23 2022 -0500

    Bug 32475: Replace "System prefs" with "System preferences" on log viewer tool
    
    Basically, the phrase "System prefs" used on the log viewer page (viewlog.pl) is slang and we should use the correct terminology that we use everywhere else.
    
    Test Plan:
    1) Apply this patch
    2) Browes to Tools > Log viewer
    3) Note under Modules, is shows "System preferences" now instead of
       "System prefs"
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 91fc31c32ba14817d989bcd34854ebc8e41fa936
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Tue Nov 15 09:31:13 2022 +0200

    Bug 30694: Set decreaseloanholds undef when deleting circulation rule
    
    When one tries to delete rule with field "Decreased loan period
    for high holds" filled, delete fails without errors. This happens
    because rule isn't set in code section handling the delete in
    smart-rules.pl.
    
    To test:
    1. Create a new circulation rule and fill all fields.
    2. Try to delete the rule.
    => Rule isn't deleted, all fields except "Decreased loan period
    for high holds" are now empty or have value "Unlimited".
    3. Modify the rule and set field "Decreased loan period for high
    holds" empty.
    4. Delete the rule.
    => Rule is deleted successfully.
    5. Create a new rule, fill all fields expect field "Decreased loan
    period for high holds".
    6. Delete the rule.
    => Rule is deleted successfully.
    7. Apply this patch.
    8. Again create a new rule with field "Decreased loan period for high holds" filled.
    9. Try to delete the rule.
    => Rule is deleted successfully.
    
    Sponsored-by: Koha-Suomi Oy
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aff2be24b76d98b03d731a13b3be4ed75f2f03db
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Nov 19 20:57:55 2022 +0000

    Bug 31233: Amend 'fine grace period' as it's also used for suspensions
    
    The grace period setting in circulation rules is not only used
    for fines, but also for suspensions. So the label 'Fine grace period'
    is a little misleading.
    
    This patch updates it to "Fine/suspension grace period".
    
    To test:
    * Go to Administration > Circulation rules
    * Verify the description is "Fine grace period" in the big table
    * Apply patch
    * Verify the description now changed to "Fine/suspension grace period"
    
    https://bugs.koha-community.org/show_bug.cgi?id=32261
    Signed-off-by: Hammat Wele <hammat.wele@inlibro.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0a934194ca25e2614912f9248f55822aebf38fb8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Dec 15 08:19:57 2022 +0100

    Bug 32468: Remove unecessary fetch titles JS functions
    
    Those JS functions are no longer in use and can be removed.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6b19436f5fd47de229ce2271428424e59966fe25
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Dec 15 08:17:16 2022 +0100

    Bug 32468: Use fetchLocalTitleCount to know if local titles exist
    
    We don't need to fetch 20 titles to know if there is at least one. We
    should call fetchLocalTitleCount.
    
    Note that this should be implemented for all 'List' views.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ccdc90aeeadad2c590460fadcdf8673dc0eabbed
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Dec 15 07:58:36 2022 +0100

    Bug 32468: ERM - Populate dropdown list with all entries
    
    The REST API routes is configured to return the 20 first results if
    _per_page is not provided. Here we want to display all the
    vendors/agreements/licenses/packages in the dropdown lists.
    
    Ideally we should implement an infinite scroll to not load all the data
    at once (https://vue-select.org/guide/infinite-scroll.html)
    
    Test plan:
    Create more than 20 vendors and confirm that, with this patch, all the
    vendors are display in the dropdown list displayed on the add agreement
    form
    Same for agreements, licenses and local packages
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c06c8613cd1f066e8857bd798551e36985062856
Author: Andrew Auld <andrew.auld@ptfs-europe.com>
Date:   Wed Nov 30 11:37:40 2022 +0000

    Bug 32378: Correction to allow_staff form field label
    
    The forms for attributes were mis-copied. This corrects that mistake.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6d6aa25524df8e80c5b3d4ec4d0525c8bd8b80ba
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Dec 19 10:17:26 2022 -0300

    Bug 32330: DBRev 22.12.00.001
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8755f775990bba513480a3b54372d76395ab2fbe
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Nov 22 20:49:02 2022 -1000

    Bug 32330: Add indexes to table background_jobs
    
    Table background_jobs should have indexes to optimize queries.
    
    Query on borrowernumber :
    mainpage.pl:    my $already_ran_jobs = Koha::BackgroundJobs->search(
    mainpage.pl-        { borrowernumber => $logged_in_user->borrowernumber } )->count ? 1 : 0;
    
    Query on status and queue :
    misc/background_jobs_worker.pl:        my $jobs = Koha::BackgroundJobs->search({ status => 'new', queue => \@queues });
    
    Test plan :
    Run updatedatabase and play with background jobs
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3dcdd6db788b2c23320ca24a900d37d0454dbbec
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Dec 16 09:00:45 2022 -0300

    Bug 32394: (follow-up) Add param for Koha::BackgroundJob::StageMARCForImport->enqueue
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 42d60ad8505e5717c277ecfebb850123bd94ec21
Author: Michael Hafen <michael.hafen@washk12.org>
Date:   Wed Dec 14 11:45:47 2022 -0700

    Bug 32470: (Bug 14783 follow-up) Fix mysql error in db_rev for 22.06.000.064
    
    Fix MySQL error:
    ERROR 1093 (HY000): You can't specify target table 'systempreferences' for
     update in FROM clause
    
    introduced by db_rev 064 for bug 14783.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bad638578b6bb3d0913841bd71ab9fba220a529e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Dec 5 09:18:04 2022 +0000

    Bug 32399: Remove FK constraints while changing columns
    
    Some users have reported that the dbrev of bug 30483 fails. This might
    depend on bad data, SQL server version, etc.
    We now remove the constraints temporarily.
    
    Test plan:
    Reset your version in order to pass this dbrev again. So below
    22.06.00.041.
    * update systempreferences set value='22.0600040' where variable = 'Version';
    Run updatedatabase.
    
    Bonus: Create an issues record with invalid itemnumber (set FK check
    off when doing so). Verify that dbrev fails and installer stops.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aa13c1a9d1fe44021f991fc8e78f70e80b2a56ac
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Dec 14 20:31:53 2022 -1000

    Bug 20596: (QA follow-up) perltidy
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 76d676a868be048ec57c8eb178bf813a12823c6e
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Dec 14 05:17:02 2022 +0000

    Bug 20596: Add unit test for multiple values in authority search
    
    This patch adds a unit test which returns 2 authority records
    via an implicit OR when searching for strings from two different
    authority records.
    
    Test plan:
    1. prove t/db_dependent/Search.t
    
    Signed-off-by: Jan Kissig <jan.kissig@th-wildau.de>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b2a23149bdfdd27b1ccf5ec2106e92da4dbe05a4
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Dec 14 04:58:41 2022 +0000

    Bug 20596: Join authority queries together with OR
    
    This patch joins authority queries together with OR like Elasticsearch.
    
    To the best of the author's knowledge, this code only gets triggered
    when using record matching rules, but there may be other situations
    where it's used.
    
    Authority search in cataloguing plugins use a different path, and
    authority search in authority home doesn't allow multiple queries,
    so they'll never trigger this OR joining of queries.
    
    Test plan:
    0. Apply patch and koha-plack --restart kohadev
    1. Create a record matching rule with the following:
    Matching rule code: NID
    Description: NormdatenID
    Match threshold: 100
    Record type: Authority record
    Search index: Any
    Score: 101
    Tag: 035
    Subfields: a
    Offset: 0
    Length: 0
    Normalization rule: None
    
    Click "Remove this match check"
    
    2. Stage gnd.xml (from BZ 20596 attachments)
    - Choose "MARCXML" for "Format"
    - Choose "Authority" for "Record type"
    - Choose "NID" for "Record matching rule"
    - Click "Stage for import"
    3. Note the job gets to "100% Finished"
    (Before this patch, it would say "0% Failed")
    
    4. View the batch
    5. Import the record
    6. Repeat steps 2-4 and note that the record matching rule
    worked
    
    7. Go to http://localhost:8081/cgi-bin/koha/authorities/authorities-home.pl
    8. Search for "e"
    9. Note that the search works
    
    10. Go to http://localhost:8081/cgi-bin/koha/cataloguing/addbiblio.pl?frameworkcode=
    11. Click tab 6
    12. Click on the tag editor next to "a Personal Name"
    13. Type "e" into each box and click "Search"
    14. Note that the search works
    
    Signed-off-by: Jan Kissig <jan.kissig@th-wildau.de>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7502f520a4fbb71fc63e76307d1ad67f059dd213
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 17 13:38:58 2022 +0000

    Bug 32247: Exit holds queue builder if there are no holds on the biblio
    
    update_queue_for_biblio currently
    1 - gets the holds on a bib
    2 - gets the items available to fill any holds
    3 - combines these to build the queue, exiting if there are no holds or items
    
    If there are no holds at step 1, we don't need to do step 2 or 3
    This patch simply deletes the queue for this biblio, then exits if there are no holds
    
    To test:
    prove -v t/db_dependent/Reserves.t t/db_dependent/Koha/Item.t t/db_dependent/Koha/Hold.t t/db_dependent/Koha/BackgroundJobs/BatchDeleteItem.t t/db_dependent/Koha/BackgroundJobs/BatchDeleteBiblio.t t/db_dependent/HoldsQueue.t t/db_dependent/Circulation_holdsqueue.t t/db_dependent/Biblio_holdsqueue.t t/db_dependent/Biblio.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5dff3886b3117205a49badd03ca6f234e4531936
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Nov 16 22:47:35 2022 +0000

    Bug 32061: Remove spans from page titles for adding/editing Z39.50/SRU servers
    
    In another bug we added spans to ease translations in the PROCESS
    block for server types. This PROCESS is used in several places,
    but only creates a problem when used in the title.
    
    The patch removes the spans using the remove TT filter avoiding
    having to change the PROCESS and causing a string change.
    
    To test:
    * Go to administration > Z39.50/SRU servers
    * Add a new Z39.50 and a SRU server or look at the form
    * The page title in the browser tab will show the span
    * Same for editing an existing Z39.50 or SRU server
    * Apply the patch
    * Verify the page titles are now correct
    
    Hint: you can see the full page title when hovering on the tab.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Hammat Wele <hammat@inlibro.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 96804dfb5fb20a61f7734094354d2a1fca85f6bd
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 29 16:26:51 2022 +0000

    Bug 32368: Add page-section to report results
    
    This patch adds the page-section container to the results page after
    running a report
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1c5ec22680a0704fcc30bb9f7a299fa3f3b0a669
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Nov 29 16:56:02 2022 +0000

    Bug 32300: Add page-section to cataloguing plugins (cat)
    
    This patch adds a "page-section" container div around the main section
    of cataloging plugins which lack it. The patch also adds a "btn
    btn-primary" buttons.
    
    This patch contains indentation changes, so please ignore whitespace
    when looking at the diff.
    
    These changes are simple enough that checking the diff is probably
    enough, but if you want to test a plugin in action, you go to
    Administration -> MARC bibliographic framework.
    
     - Choose Actions -> MARC structure on the framework you want to modify
     - Choose Actions -> Edit subfields on the tag you want to modify
     - Select the tab for the subfield you want to change.
       - In the "Other options" section near the bottom, use the "Plugin"
         dropdown to select the plugin you want to associate with that
         subfield.
     - In the basic MARC editor the subfield you updated should now have an
       icon next to it for triggering the plugin. Clicking it should trigger
       a popup window which shows the updated template.
    
    For plugins with "authorities" in the name, configure the Authorities
    structure under Administration -> Authority types.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b9c1af5ef1ae233ec6e848d8700b53551d19bec4
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Nov 17 21:51:59 2022 +0000

    Bug 32200: Add page-section to checkout notes page
    
    To test:
    * Turn on AllowCheckoutNotes system preference
    * Check out an item
    * Go to the OPAC and add a checkout note to your checkout
    * In the staff interface, look at: Circulation > Checkout notes
    * Verify the page section is missing from the notes table
    * Apply patch
    * Verify the table now looks better!
    
    Signed-off-by: David <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b389f9a361cf16c11f3678b8e42aa6eb1e91a930
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Dec 13 14:31:10 2022 +0000

    Bug 32457: Fix CGI vulnerability in addorder.pl
    
    Test plan:
    Go to acqui/addorder.pl.
    Create two items.
    Check if results still match your expectations.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 46cad29c5a57546b594182bd2f86ad50d021b614
Author: Mona Panchaud <m@mpan.ch>
Date:   Sat Nov 5 19:25:43 2022 +0100

    Bug 32115: Add ID to check-out default help message dialog to allow customization
    
    This adds a div with the id attribute selfcheckdefaulthelpmessage to
    the first paragraph of the web based self check help page.
    
    To test:
    * Enable WebBasedSelfCheck
    * Go to: /cgi-bin/koha/sco/sco-main.pl in the OPAC
    * Log in and open help
    * Verify by looking at the source code, that the first paragraph
      starting with "If this is your first time..." now has an id.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b8e4d7d7706fc129985f9a3dc2da550625941dbe
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Dec 14 09:01:33 2022 +0100

    Bug 32394: Add tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9810fc5e0e425b9947589630d2d598eec22262e9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Dec 2 14:43:27 2022 +0100

    Bug 32394: Restore long tasks queue
    
    We are sending "queue" as parameter, but "job_queue" is retrieved in
    Koha::BackgroundJob->enqueue...
    
    Test plan:
    Read code and confirm the above.
    More fun for test plan will be found on bug 32393
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9e025bb7aac56bdf2a2777e2c38674edf326076f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Dec 14 14:30:18 2022 -0300

    Bug 32394: Regression tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0622e118dbdd1687127c0734386e07ca268fd90d
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jul 15 14:10:37 2022 -0400

    Bug 31166: Digest option is not selectable for phone when PhoneNotification is enabled
    
    Digests are not available via Talking Tech, but the artificial limit should not be in place for the non-TT phone notices. If only phone is selected, digest remains disabled.
    
    Test Plan:
    1) Apply this patch
    2) Enable TalkingTechPhoneNotification
    3) Verify behavior hasn't changed
    4) Disable TalkingTechPhoneNotification, Enable PhoneNotification
    5) Note disgest option is now selectable if only phone is selected
    
    Signed-off-by: Evelyn Hartline <evelyn@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Bug 31166: (QA follow-up) Remove debugging lines
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Bug 31166: (QA follow-up) Implement on OPAC side
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Squashed by RM

commit b00c213876b79ac6cf7f94a92239f63628993ae7
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Nov 8 15:19:20 2022 +0100

    Bug 32134: Show the bundle size when checked out
    
    When checking out a bundle, it can be useful to know the number of items
    in this bundle, so that librarians can quickly check if items are
    missing.
    
    Test plan:
    1. Create a bundle (see bug 28854 comment 458)
    2. Check out the bundle.
    3. Verify that you have the bundle size in the message below the barcode
       input ("Checked out: [...]. Bundle of X items. Due on [...]")
    4. Checkout an item that is not a bundle.
    5. Verify that the bundle message does not appear
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9f44dc52950fbdcfe9510038bdc1dcf357058b7a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Nov 22 17:10:23 2022 +0000

    Bug 32323: Correct focus state of some DataTables controls
    
    This patch makes changes to the style of some DataTable controls in
    order to make hover, active, and focus states more consistent.
    
    To test, apply the patch and rebuild the staff interface css.
    
    View a page that has a DataTable showing controls like "Columns,"
    "Export," and "Configure." For example: Saved reports, Libraries,
    Overdues.
    
     - Click the DataTables search form to put cursor focus there.
     - Use the tab key to move through the next buttons.
     - The style should now be more consistent with the appearance of other
       similar buttons in the staff client.
     - Test with and without text in the search filter.
     - Test pages which don't have the full set of controls, e.g. the
       table of of a patron's checkouts.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ecbcc2884c5c7b01aa90ac305da7b7c413ec9500
Author: David Nind <david@davidnind.com>
Date:   Mon Nov 14 21:14:40 2022 +0000

    Bug 32194: Capitalize "No" values for the patron categories "Can be guarantee" column
    
    This fixes the display of the patron categories "Can be guarantee"
    column so that "No" values have a capital "N".
    
    Test plan:
    1. Go to Administration > Patrons and circulation > Patron categories.
    2. Note that for the "Can be guarantee" column, it shows "Yes" values
       with a capital "Y" and "no" values with a lowercase "n".
    3. Apply the patch.
    4. Refresh the page.
    5. Note that any "No" values now have a capital "N".
    6. Sign off D:
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 84f9e308102d432b0154aba89aec5407c2228e83
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Nov 22 12:10:20 2022 +0000

    Bug 32320: Remove text-shadow from header menu links
    
    This patch unsets the text-shadow style on links in the header menu.
    This makes the links look a little crisper. The style is inherited from
    Bootstrap's defaults and is incorrect for our design.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    View any page in the staff interface to confirm that header menu links
    look correct.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 69ddb83f41cfc5c9eb6b4e483bca9316bac98db8
Author: David Nind <david@davidnind.com>
Date:   Wed Nov 30 23:48:25 2022 +0000

    Bug 32302: (follow-up) Hide ISBN label when list sent from the staff interface
    
    This makes the same change to the staff interface. Lists sent
    from the staff interface hide the ISBN label in the email message
    when there are no ISBNs for a record.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 44366c09858364ac56fd37b5434bc77e7e48fe94
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Dec 1 09:52:55 2022 +1100

    Bug 32302: Hide "ISBN" label when no ISBN data when sending list
    
    There is a logic mistake in the opac-sendshelf.tt template where
    we test if the "ISBN" key exists in the "BIBLIO_RESULT" hash when
    we should really be testing if the arrayref returned by "ISBN" is
    empty or not, since that "ISBN" key always exists and contains at least
    an empty arrayref.
    
    Test plan:
    1. Apply patch and restart your Koha Starman
    2. Create a public list containing records with 020 MARC fields and
    records without 020 MARC fields
    3. View the list in the OPAC
    4. Click "Send list" and email it to yourself
    5. Note that only records with 020 MARC fields with show "ISBN:"
    in the email output
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d9186728919a1a41d56c4c8686e0197c746f7fa1
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Dec 7 13:27:02 2022 +0000

    Bug 32417: Allow NULL in biblionumber in $order->store
    
    If we are cancelling an order and call DelBiblio, we should
    clear the biblionumber but not be crashing on it in ->store.
    
    The absence of the clear prevented the crash. One bug sometimes
    solves another one.
    
    Test plan:
    Create basket, order line.
    Delete order with biblio record.
    Verify result and logfile.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d7c1d52051a3cb5f6ae3be9abb0e9e7aa1f9ece5
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Dec 7 13:51:14 2022 +0000

    Bug 32417: Add unit test
    
    Test plan:
    Run t/db_dependent/Koha/Acquisition/Order.t
    This test should fail without the follow-up and pass with it.
    * not ok 53 - No croak on missing biblionumber when cancelling an order
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1d522cc2464ac0d953e93d3f8f178da1a9e06d82
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Nov 24 15:37:51 2022 +0000

    Bug 31160: Required fields in patron api
    
    The Patron API PUT request required the fields "surname","address","city","library_id","category_id". Meanwhile the CSV import page for patrons only requires "surname","library_id","category_id". The fields for "address" and "city" have been removed from the "required" section of the api>v1>swagger>definitions>patron.yaml file to match the CSV import page.
    
    Test Plan:
    1) Send a PUT request to http://localhost:8081/api/v1/patrons/19 with an empty body
    2) Error message should ask for 5 missing fields as listed above
    3) Apply patch
    4) Restart Apache server using "restart_all" in your ktd shell
    5) Resubmit your request
    6) Error message should now only request "surname","library_id","category_id"
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit af794a6cfa85d8f3160ddb4c4f626e85063a844c
Author: Didier Gautheron <didier.gautheron@biblibre.com>
Date:   Mon Nov 28 08:29:47 2022 +0100

    Bug 32355: Add css class url to URL syspref
    
    Add missing css class to URL syspref.
    
    To Test:
    1 - open admin/preferences.pl
    2 - Search for URL
    3 - casServerUrl, UsageStatsLibraryUrl, KohaManualBaseURL,
        PrivacyPolicyURL, LibrisURL input field size are small.
    4 - Apply patch
    5 - all URL fields have the same bigger size.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2fec6d32b8de403b66b0c06b331528c6946025ed
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Dec 1 17:40:30 2022 +0000

    Bug 32389: Fix Syndetics link on staff results page
    
    To test:
    1. Have SyndeticsCoverImages on and Syndetics setup.
    2. Do a search that will return some results with Syndetics images
    3. Click on the image link and you will get a 404
    4. Apply patch
    5. Link works!
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b00c01093a28dc06df279aa899da94a4c5b65209
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Dec 7 16:16:58 2022 -0300

    Bug 32422: Hardcoded paths in _common.scss precent using external node_modules
    
    This patch makes:
    
    - gulpfile.js add the parent dir's node_modules to the sass include path
    - removes hardcoded paths from _common.scss
    
    To test:
    1. Have the latest KTD image (this is not KTD specific, but easier to
       test)
    2. Make sure you don't have any node_modules/ dir in your koha clone
    3. Run:
       $ kshell
      k$ yarn build --view opac
    => FAIL: You get:
    kohadev-koha@kohadevbox:/kohadevbox/koha$ yarn build --view opac
    yarn run v1.22.19
    $ gulp build --view opac
    [18:27:38] Using gulpfile /kohadevbox/koha/gulpfile.js
    [18:27:38] Starting 'build'...
    Error in plugin 'sass'
    Message:
        koha-tmpl/opac-tmpl/bootstrap/css/src/_common.scss
    Error: File to import not found or unreadable: ../../../../../node_modules/bootstrap/scss/functions.
            on line 37 of koha-tmpl/opac-tmpl/bootstrap/css/src/_common.scss
            from line 1 of koha-tmpl/opac-tmpl/bootstrap/css/src/opac.scss
    >> @import "../../../../../node_modules/bootstrap/scss/functions";
    
       ^
    
    4. Apply this patch
    5. Repeat 3
    => SUCCESS: It builds!
    6. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 574bbe85765223697e7a81da19c9733368423cd2
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Dec 7 20:14:36 2022 +0000

    Bug 32257: Fix capitalization - Patron Attribute
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d2ee603a608d8eadd33c8deeaaa2b04868960ab0
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Nov 23 17:12:59 2022 +0000

    Bug 32257: Label for patron attributes misaligned
    
    Label has now been realigned to match the format of the fields above. When clicking to add a new field, the delete button was also misaligned. This has now been reformatted to sit next to the "New" button
    
    Test Plan:
    1) Navigate to Tools > Batch patron modification
    2) Add either card or borrower numbers to bring up the edit patrons fields
    3) "Patron attributes:" is on the far right and above the select box. When adding a new field there is a big gap between the Add and  Delete buttons
    4) Apply patch and navigate to same area
    5) Observe that the Patron attributes option is aligned to match the fields above and the gap between the buttons has been removed
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 72c10b222743247c881b1bb07fdc18d1ae6c715a
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Dec 2 09:18:08 2022 -0500

    Bug 28975: (QA follow-up) Fix indentation, simplify if statement
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fe2e2f9400714341877958853e8165db517fe1fa
Author: The Minh Luong <the-minh.luong@inlibro.com>
Date:   Tue Jan 25 12:20:38 2022 -0500

    Bug 28975: Holds queue lists can show holds from all libraries even with IndependentBranches
    
    When using IndependentBranches, usually all branches are removed from the drop-down menus. But in the Holds Queue page, there is the possibility to choose "All branches". From there, you can see holds from all libraries.
    
    To recreate :
    1) Activate IndependentBranches, IndependentBranchesPatronModifications and IndependentBranchesTransfers
    2) Create a staff user with limited permissions (NOT a superlibrarian), including holds permissions. Here are mine as an example
      - circulate (all)
      - catalogue
      - borrowers
        - delete_borrowers
        - edit_borrowers
      - reserveforothers (all)
      - reports (all)
    3) Create (or make sure you already have) a patron in another branch (we'll call them patron X)
    4) Place a hold for patron X on an available item from their own library
    5) Run misc/cronjobs/holds/build_holds_queue.pl
    6) Go to Circulation > Holds queue and make sure you can see the hold
    7) Log in as your limited staff patron
    8) Go to Circulation > Holds queue
    9) In the drop-down menu, choose "All" and click Submit
    -- Notice you see the hold of the patron from another branch under Patron
    column: "A patron from library <library name>"
    11) Apply the patch.
    12) Notice that the "All" option is no longer available for the limited patron. Limited patrons can't see holds from other libraries anymore.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4f8b742cbe0c41a389290a821c0ca478bb108e26
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 23 10:08:26 2022 +0100

    Bug 32291: (bug 16735 follow-up) Remove ref to library category in branches.tt
    
    On bug 16735 we rewrite the library groups system. Those references in
    branches.tt were part of the previous code, and they can be removed.
    
    Test plan:
    Confirm the above and that those code errors are never sent to the
    template.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit da192133aee11ce11988f9a7210fc869325b016d
Author: David Nind <david@davidnind.com>
Date:   Mon Nov 28 12:28:34 2022 +0000

    Bug 31984: TaxRate preference - add note about vendor updates
    
    If a value for the TaxRates system preference is changed or
    removed, vendors retain the original value recorded in their
    tax rate field.
    
    The vendor tax rate is used to calculate prices for orders
    added to a basket. Where the tax rate doesn't match with the
    system preference, a warning message is displayed on the order
    form "Tax rate not defined in system preference TaxRates!".
    
    This patch adds a note to the system preference description
    about updating vendor tax rate information where required.
    
    Test plan:
    1. Check the values recorded for the TaxRates system preference.
    2. For a vendor (Acquisitions > search for a vendor > Edit vendor),
       check the value recorded in the tax rate field.
    3. Note that the tax rate field is populated from a dropdown list
       using values from the TaxRates system preference.
    4. Change the TaxRates system preferemce to remove a tax
       rate. For example, change 0|0.12|0.1965 to 0|0.12.
    5. Refresh the vendor page.
    6. Note that the vendor tax rate remains as the original value
       until you edit the vendor.
    7. Apply the patch.
    8. Review the description for the TaxRates system preference and
       make sure the new note about updating vendor tax rates where
       required makes sense.
    9. Sign off!
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 945514bd72e46f8fae1a2809beca6b9388060a72
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Sep 21 07:08:44 2021 -0400

    Bug 31675: Remove packages from debian/control that are no longer used
    
    As far as I can tell, we are no longer using CGI::Session::Serialize::YAML or YAML::Syck, but they are still marked dependencies for the Debian package.
    
    Signed-off-by: Danyon Sewell <danyonsewell@catalyst.net.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a4d9f572bcd9bf5464040dadf70ca9ad9e4810b7
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Sun Nov 27 21:24:59 2022 +0000

    Bug 32354: Accept session_state param given by OAuth IdP
    
    This patch ensures Koha doesn't throw an error if the IdP hands back a
    session_state parameter.
    
    To test:
    
    1) Set up an identity provider
    2) On the IdP's configuration, make it hand back a session_state
    3) Confirm authentication using OIDC works with and without the
    session_state
    
    Sponsored-by: Plant & Food Research
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cab41556498a35ba3594240410634db3d59b1fe4
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Dec 2 10:10:09 2022 +0000

    Bug 32074: Edit vendor has two save buttons
    
    When editing a vendor there is a floating toolbar with options to save
    and cancel. There is also an additional save and cancel button set at
    the bottom of the page and this is superfluous. This has now been
    removed to leave the floating toolbar as the only toolbar.
    
    Test plan:
    1) Navigate to Acquisitions and select a Vendor.
    2) Click edit vendor
    3) Scroll down the page and observe that there is a floating
       save/cancel toolbar as well as the buttons to save/cancel at the
       bottom of the page
    4) Apply patch
    5) Observe that the duplicate buttons at the bottom of the page are now
       gone
    
    Signed-off-by: Owen <oleonard@myacpl.org>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 92cdf29a7f87ba69ad3c735efddd953bd1ff4905
Author: David Nind <david@davidnind.com>
Date:   Wed Nov 23 00:05:28 2022 +0000

    Bug 32283: (follow-up) Fix in two other places
    
    Fix two other occurences where the capitalization of OPAC
    is incorrect:
    - Identity provider email domains table column heading
    - 'New email domain' form label
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 747ab78e742393bd5e2f87339632c3843680509a
Author: Andrew Auld <andrew.auld@ptfs-europe.com>
Date:   Tue Nov 22 14:34:51 2022 +0000

    Bug 32283: Correct capitalisation of opac > OPAC
    
    Test plan
    Step 1: Navigate to admin>Identity Providers
    Step 2: Add new domain
    Step 3: For 'Allow opac' setting, verify that opac is lower case in both label and description
    Step 4: Apply patch
    Step 5: Navigate to admin>Identity Providers
    Step 6: Add new domain
    Step 7: For 'Allow OPAC' setting, verify that OPAC is upper case in both label and description
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bc34e8b7f48a93197df311a70e451c2a48c05ab4
Author: Andrew Auld <andrew.auld@ptfs-europe.com>
Date:   Tue Nov 22 14:16:21 2022 +0000

    Bug 32282: Fixed capitalisation of ID in User ID
    
    Test plan
    Step 1: go to admin>identity providers
    Step 2: click 'new identity provider'
    Step 3: check map point drop-down
    Step 4: verify that User id is written 'User id'
    Step 5: apply patch
    Step 6: repeat 1-3
    Step 7: verify that User ID is written 'User ID'
    
    Signed-off-by: Amit Gupta <amit.gupta@informaticsglobal.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b7a311ced96e211174dbe199c830f33bff91387e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Nov 18 14:02:13 2022 +0000

    Bug 28235: Correct CSS governing max width of custom cover images
    
    Images shown in the OPAC and staff interface when the
    OPACCustomCoverImages and  CustomCoverImages preferences are enabled
    should be getting a max-width set in the current CSS, but the order of
    the declarations is preventing the correct specificity.
    
    This patch moves the CSS to the correct place in each file so that the
    max-width is applied.
    
    To test, apply the patch and rebuild both the staff and OPAC CSS. If you
    get an error during the build process you may need to run 'yarn
    install.'
    
    - Go to Administration -> System preferences, and enable the
      OPACCustomCoverImages and  CustomCoverImages preferences.
    - If you're testing with the default test database you can set the
      CustomCoverImagesURL preference to
      https://static.myacpl.org/public/covers/{normalized_isbn}.jpg
    - Perform a catalog search in both OPAC and staff client limiting by
      itemtype = 'Book'.
    - The search results in both interface should show several covers
      supplied from the external URL.
    - In the staff client, these images should be limited to 140px wide even
      if the source image is larger.
    - In the OPAC, view the detail page for one of the results with cover
      images. The image shown on the detail page should be constrained to
      140px wide even if the source image is larger.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f5d77f1c1dd2afe60e8d55ce6d80676a71ed1d76
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 18 09:55:06 2022 +0100

    Bug 32261: Add more UI feedback when selecting patron from autocomplete
    
    There is only a tiny change in the color of the selected item, but it's
    not obvious.
    
    Test plan:
    Regenerate the css files using `yarn build`
    Search for patrons and note that the down/up keys let you select a
    patron and the background color change.
    Note that the background color is not on the container and so is not
    similar as the hover rule (when using the mouse). We could change that,
    but then the behaviour is weird when you have both the mouse and the
    keyboard selecting items in the item list.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3ce2f6e7005ba3d85a7ea51b7c7c5a9f3ab1fb4e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 18 09:52:35 2022 +0100

    Bug 32261: Patron autocomplete - do not empty text field
    
    The jQuery UI autocomplete is supposed to replace the text field with
    the 'value' attribute of the selected item. As it does not exist it's
    emptied. We should not replace what the user typed in.
    
    Test plan:
    Go to the Koha home page
    Select "Search patrons" in the header
    Type 'edn', it will return 1 result
    Use the down key to select the item (it is not obvious but there is a
    little change in the color when you select the item)
    => Without this patch the search field is emptied
    => With this patch applied the search field is not modified
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3411a2c0021da2ff9fe91092c1fa202dfaa04f71
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 30 08:55:13 2022 +0100

    Bug 32366: (bug 30460 follow-up) Add tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 75a3c923c3895e8510910fbe36b234616d58849a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 4 16:33:44 2022 +0100

    Bug 30963: Automatically refresh the curbside pickups list
    
    Librarians would like the page to be automatically refreshed every X minutes.
    
    This patch is suggesting to have a checkbox at the top of the page to
    let the user refresh the page given the delay they want.
    
    We could later improve this by setting this value in a localStorage
    variable.
    
    Test plan:
    Go to the curbside pickup page
    Notice the new checkbox at the top
    Notice that the "Refresh" button has been moved at the top as well
    Play with the checkbox and the input, and confirm that the behaviour is
    consistent
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 58580d2bb476233a2407f3e267e5ed20b07b1729
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Nov 16 21:49:17 2022 +0000

    Bug 32236: Fix alignment of checkbox "Use default values" for item batch modification
    
    This moves the label to the right in front of the checkbox.
    It also shortens the label by adding an additional longer hint text.
    
    To test:
    * Go to cataloguing > item batch modification
    * On the first page of the tool, look at the checkbox at the bottom
    * Apply the patch
    * Verify changes
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7f8156cf5c4236d7f16744baea0775cdaeeec266
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 30 10:51:44 2022 +0100

    Bug 29274: Remove z_reset.t
    
    From the description of commit d25f3e84374ec8d7c85f8ed805102f67c0a73d77
    
    """
        Bug 22709: (RM follow-up) Clean up plugin tests
    
        The plugin tests were failing due to failed rollbacks and run order.
        This patch moves them into their own directory and adds a reset test to
        restore the original state of the plugin system after the tests have
        run.
    """
    
    This is wrong, the tests are run in a random order.
    
    We don't need this file.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8965615f2df32b4df671c09e25dc9261dd2b1067
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Dec 1 10:29:42 2022 +0100

    Vue bundle - Add main.js.LICENSE.txt
    
    There is a reference to it in main.js, it makes sense to include it in
    our codebase
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit a69efaa2a511715ca72cb5170579f17f3e41c67f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 30 15:49:59 2022 -0300

    Bug 32351: Fix t/db_dependent/Koha/Charges/Sales.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3200c18e7dd16305be0abcdace476b44fbe2b46f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 30 15:48:18 2022 -0300

    Bug 32351: Fix  t/db_dependent/Circulation/NoIssuesChargeGuarantees.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8455c0b83d268e9ad695fa55265bf3a0719f8ad7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 30 15:47:22 2022 -0300

    Bug 32351: Fix t/db_dependent/api/v1/patrons.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 11ac81782f20b2a5ad8a9f7b145aad4f766a0f62
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 30 15:45:20 2022 -0300

    Bug 32351: Fix Koha/Patrons.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ca77a59a9b9cb27cd8dee26dda72f6b55781ccc4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 30 15:42:26 2022 -0300

    Bug 32351: Fix TemplateToolkit.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cd49ab5c281fa62d66ab9dbe0b08e529ea174522
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 30 15:41:59 2022 -0300

    Bug 32351: Fix CourseItems.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5f07e7afffe7b1addbd4dd9bf7ae995f46d8470f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 25 12:55:39 2022 +0100

    Bug 32351: Fix Circulation.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4824bbf195603dfcde21d28a385e6f501d7764b9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 25 12:48:34 2022 +0100

    Bug 32351: Fix Reserves.t
    
    itemtypes.notforloan already defaults to 0
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a471e6d5bc9ed4d38728bc46e84762ddd0a3c660
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 25 12:46:27 2022 +0100

    Bug 32351: Fix Members.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ade52182c40473e808b12f4d80c242bcb2b94243
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 25 12:45:26 2022 +0100

    Bug 32351: Fix Illrequests.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d077aa2e7df1124758b5c5fb47d8d814064b1a49
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 25 12:42:18 2022 +0100

    Bug 32351: Fix Budgets.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eecad982eecdb16d3511814d17c61b3ba21932a1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 25 12:35:42 2022 +0100

    Bug 32351: Fix Acquisition.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ad3d34bfd1674d78cb5e45d4bdcb4b0507ee6742
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Nov 25 10:50:01 2022 +0000

    Bug 32351: Holds.t - remove wrong column reference
    
    Found by bug 32350.
    The test does not need this value at all..
    
    Test plan:
    Run test.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f1d2ec4aa86250029fb9189af3bdc52b5fe28ee6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 23 09:30:33 2022 +0100

    Bug 31381: Add tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f6905139472bacd31a86249e4b09cdb44eeed269
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Nov 22 19:21:22 2022 +0000

    Bug 31381: Handle null attributes in list
    
    This patch allows null values to be returned in patron attributes
    to prevent a crash when searching patrons
    
    To test:
    1 - Add a NULL attribute to a borrower, in sample data, Edna Acosta
        sudo koha-mysql kohadev
        INSERT INTO borrower_attributes (borrowernumber,code,attribute) VALUES (5,'SHOW_BCODE',NULL);
    2 - Browse to 'Home->Patrons'
        http://localhost:8081/cgi-bin/koha/members/members-home.pl
    3 - Click 'Browse by last name: A'
    4 - Datatables error:
        Expected string - got null
    5 - Apply patch
    6 - Restart all
    7 - Browse by last name: A
    8 - Success!
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 46aa87c600871bc8556bfe3ab4840d673211a625
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Nov 25 10:09:57 2022 +0000

    Bug 32350: Add subtest for bad columns
    
    Test plan:
    Run t/db_dependent/TestBuilder.t
    And now run the whole test suite :)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9b9b8f19200695df168440d47cecc6b947fcebc5
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Nov 25 10:02:24 2022 +0000

    Bug 32350: Use array_minus and ignore nesting
    
    Note: Test will be extended in follow-up. This fixes the
    module_bit hash to follow the FK path from user_permissions
    to permissions to userflags. One step was missed in the
    existing test, although it did not fail. The change here
    revealed that now.
    
    Test plan:
    Run t/db_dependent/TestBuilder.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3381a6463cad9300bae89384fd47749a9887a0c7
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 17 15:26:48 2022 +0000

    Bug 32213: Reindent item search fields templates
    
    This patch reindents three item search field templates so that they have
    consistent indentation.
    
    To test, apply the patch and go to Administration -> Item search fields.
    
    Test all aspects of viewing, adding, and deleting item search fields.
    Everything should look correct and work correctly.
    
    Signed-off-by: David <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Edit: changed intendation on a tiny bit

commit dd095aa8c44c2f057c2bddb0ecf0f2048be038d9
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Nov 15 16:06:09 2022 +0000

    Bug 32126: Fix missing div breaking the form for adding more search fields
    
    The missing div caused a problem with the JS that controls
    visibility of the list of search fields, the form and the toolbar.
    With the div added, everything should now work as expected.
    
    To test:
    * Add a item search field, everything should work.
    * Add a second item search field - intead of the form, you'll see an empty page.
    * Apply patch.
    * Add second and more search fields, all should work.
    * Edit search fields.
    * Delete search fields.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8c367775470fcecdda54e28270b05d92834cd33f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 25 12:24:26 2022 +0100

    Bug 32352: Make xt/check_makefile.t check directories in git index
    
    It's failing if 'node_modules' exists. We could simply skip it, but it
    seems that it would be better to actually list directories that are part
    of the git index only.
    
    The question is: do we actually support test execution outside of a git
    directory?
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6072492693a9c0cb784224f284733011a2f092f9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Nov 28 15:26:01 2022 -0300

    Koha 22.12 - start of a new dev cycle
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7303285fe53441f26ac24b408786cc8f203f3e59
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 25 15:16:58 2022 -0300

    Koha 22.11.00 Rosalie is here!
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9de934a96ed22dabc33533e6ac238446cf488118
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 25 15:13:55 2022 -0300

    22.11.00: Vue bundle
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 623fb377ad6adfb5258525207acb921864039ffb
Author: Koha translators <>
Date:   Fri Nov 25 13:59:04 2022 -0300

    Translation updates for Koha 22.11.00
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0b6837ea2259891c471cd6306b4c18f4058060a6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 25 14:22:57 2022 -0300

    Add release notes for Koha 22.11.00
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c2d8efe461f76fe33c8ee3df03cf80bee7577aee
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 25 11:15:50 2022 -0300

    22.11.00: Update kohastructure.sql
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2b486782333abe3c17a31a996785a2e80dae1263
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 25 10:48:31 2022 -0300

    22.11.00: Update history.txt
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b0d77a20a204c2d57f07a18f773889d24e007935
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 25 10:47:39 2022 -0300

    22.11.00: Update contributors.yaml
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5dd3dc830ce34338ca940473c32ed72ef22366a7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 25 10:46:58 2022 -0300

    22.11.00: Update .mailmap
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1bf75a009488c386b6834c55b729bc06e81d73fb
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 25 13:11:00 2022 -0300

    Bug 30808: (follow-up) Minor visual glitch
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 12485f6fb8fcae210b87d3bbd03d240f98644881
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 25 15:35:36 2022 +0000

    Bug 30808: Add a dedications tab to the about page
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 88c2430bde2b16d791549b60d13fd2eab1a73fd6
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 25 15:20:58 2022 +0000

    Bug 30808: Add support for version codenames
    
    This patch adds the 'Rosalie' codename to the 22.11 release and adds
    corresponding support to the about page for displaying it.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a2e9fd25d17e75b21edace6c1c090c3f863b470c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 25 14:30:55 2022 +0000

    Bug 30808: Add the 23.05 release team
    
    This patch updates the teams.yaml to include the voted in 23.05 release
    team and also updates the release date of 22.11 to match the actual
    release.
    
    Test plan
    1/ Check against https://wiki.koha-community.org/wiki/Release_Teams
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 404c88fe87b27e4b4578e0bb6df2252a0bad9ed1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 23 09:53:31 2022 +0100

    Bug 31969: Use filter_by_last_update
    
    This script has a pattern to delete rows depending on a given
    date/number of days, we should use the filter_by_last_update
    Koha::Objects method.
    No need for another method and tests, everything is already tested
    there.
    
    This patch also suggests to rename the reference to "background" and
    "bg" with "jobs", which seems more appropriate and not an abbreviation
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 11918dcb72ad18d5bf6b7c95b7ed2976f521a459
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Nov 21 09:53:31 2022 +0000

    Bug 32304: BackgroundJobs.t: Fix subtest purge
    
    Instead of deleting, I added a count :)
    Note that one of the purges eventually deletes my
    older jobs..
    
    Test plan:
    Run t/db_dependent/Koha/BackgroundJobs.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0a1d7aa5207873eea13b6d962d963c983c6be20a
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Nov 25 08:13:04 2022 +0000

    Bug 32304: Fix subtest search_limited
    
    Jenkins reported:
        not ok 1 - No jobs found without userenv
    
    We need to check if there are jobs without borrowernumber.
    
    Test plan:
    Run test again.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 509ff8f05c1a9600d82cf8faf7e8066fe93de91c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 25 07:26:42 2022 +0100

    Bug 32343: Prevent Koha/Patron.t to fail randomly
    
    Highlighted by Bug 32030: fix test builder for boolean
    
    The attribute is named "unique_id", not "unique"
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 78ccd863fc68e806215265a999c335ba5203680b
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Nov 15 13:32:43 2022 +0000

    Bug 15348: (follow-up) Fix modals to pre-set input with stored date
    
    Makes sure that when an estimated delivery day is edited using
    the modals on the basket summary or late order pages, the
    date input is pre-set to the stored estimated delivery date.
    
    To test:
    * Create some order lines with and without estimated delivery date set
    * Make sure that on the basket summary the edit link comes up with an
      empty modal
    * Close the basket
    * Check that on late orders the dates are pre-filled incorrectly as well
    * Apply patch
    * Refresh basket summary and late order pages
    * All edit links now should bring up the modal with the correct date filled in
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bbe63b5c459c7358333893231fbc762f7db1b1d6
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Nov 15 12:22:31 2022 +0000

    Bug 15348: Store estimated delivery date when adding an order
    
    When the estimated delivery date was entered on adding or modifying
    and order, it was not saved to the database.
    
    To test:
    * Add new order, fill in estimated delivery date
    * Save
    * Verify the estimated delivery date is empty
    * Modify order line, date will also not be saved
    * Apply patch
    * The date should now save and update correctly
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dd2548c2cea09fa04eee2e5bc9458a56b33846c2
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Nov 15 11:32:08 2022 +0000

    Bug 15348: (follow-up) Fix filters on input fields
    
    With bug 30718 we on longer need the KohaDates TT filter
    on the inputs. This patch removes them.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 56e944f49bdfe802b034d183f686d2ebc0b26042
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 24 15:35:39 2022 -0300

    Bug 32310: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2568a1c43d1737efb79cd4227ae37a6fe8c3bf04
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Nov 21 18:17:45 2022 +0000

    Bug 32310: Correct CSS in the staff interface which still uses old color scheme
    
    This patch updates staff interface CSS so that it better conforms to the
    color scheme of the updated staff interface.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    - Go to Tools -> Calendar. Corrected are the borders around the calendar
      and around the "Add new holiday" panel which appears when you click a
      date on the calendar.
    - Go to Patrons and perform a search which will return multiple results.
      - Check the checkbox for some patrons. The color of the "Patrons
        selected" box have been updated.
      - Incorrect padding values have also been removed from the adjacent
        patron list and merge buttons.
    - Locate a multi-paged DataTable, e.g. Administration -> Authorized
      values. The style of the "Next" and "Previous" buttons have been
      updated.
    - View a patron record and choose More -> Set permissions from the
      toolbar. In the table of permissions, when you hover your mouse over
      one of the headings ("Check out and check in items," "Edit
      authorities," etc.) the color should be correct.
    - I don't think this is ever visible in the staff interface, but the
      template has markup in it to display a "Log in" link in the header
      menu if the user isn't logged in. I've removed some redundant CSS
      corresponding to this link and corrected some markup just in case
      there is a situation in which is appears.
    
    Signed-off-by: Amit Gupta <amitddng135@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 09c2b96e0424507dd2a7b8636d582985a3998243
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 18 08:00:24 2022 +0100

    Bug 32260: Patron autocomplete - Do not display an alert if request is rejected
    
    Not sure what is going on exactly, neither if this patch is the correct
    way to fix this.
    The request is "rejected" at some point (by the browser?), when we
    search for patrons using the autocomplete and DT "at the same time".
    
    To recreate:
    Don't apply this patch
    Go to /cgi-bin/koha/reserve/request.pl?biblionumber=1&borrowernumber=5
    Search for "edn" then hit enter
    You may see an alert, that will disappear
    If you don't see the alert, repeat
    
    This patch suggests to ignore the alert if the status of the request is
    "rejected".
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4e5776d1ad9a64c02291e50dd7704e6cb2cd99aa
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Nov 22 15:19:52 2022 +0000

    Bug 32303: Remove DT pagination on system preference search result
    
    This patch updates the way we retrieve a DataTable's saved state during
    initialization. The change is to prevent cases where making a duplicate
    call to DataTables() initializes the table again.
    
    To recreate the bug, search system preferences for the term "last."
    Scroll down to the "OPAC preferences" section and observe that there are
    two filter forms displayed above it.
    
    Apply the patch and perform the same search again. The extra forms
    should be gone.
    
    Confirm that DataTables behavior is still the same:
    
     - Test pages which use the "saveState" option in DataTables.
       - Type text in the table's search field
       - Reload the page. The search field should still have the string you
         entered, and the "Clear filter" button should be active.
         - Administration -> Libraries
         - Acquisitions -> Vendor -> Receive shipments -> Receive orders
         - Circulation -> Overdues
    
     - Test pages which don't use the "saveState" option, e.g. the checkout
       screen, patron search results, list of saved reports, etc. The
       behavior of the search form and table operations in general should be
       unchanged.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 270715d9b73e3eef8a46b3152fc4f9a37c720090
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 23 09:35:02 2022 -0300

    Bug 32046: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ff7ad7aaa65ac427a30a0d3dee0310e4a2f683ca
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 16 15:26:29 2022 +0000

    Bug 32046: (follow-up) Accommodate the inclusion of item information
    
    If you have item information configured in the MarcItemFieldsToOrder
    system preference, the "Select to import" tab will display a basic item
    information form which needs to use the same style as other item edit
    forms.
    
    In order to make the CSS in addbiblio.css more generic, I've changed
    some styles to use a class, .item_edit_form, instead of an ID. This lets
    us have multiple <div class="item_edit_form"> in this template without
    duplicating IDs. Other instances of <div
    id="cataloguing_additem_newitem"> have haa the .item_edit_form class
    added.
    
    To test you must have a staged MARC file which includes items and you
    must configure the MarcItemFieldsToOrder preference to map those items
    in the ordering interface.
    
    As you follow the previous patch's test plan you'll find that when you
    click a checkbox or title to expand the information about that title
    you'll see "Item record X" headings following by a properly-styled form.
    
    To confirm that the changes to addbiblio.css are not too far-reaching,
    test the other affected pages:
    
     - Item add/edit
     - Batch item modification
     - Batch item deletion
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 26ca47142410659c5882420753ff8cdb4af48a3e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 16 12:08:56 2022 +0000

    Bug 32046: When adding a new records from a staged files, there are style issues
    
    This patch modifies the template for adding a record from a staged file
    in order to resolve some layout problems introduced by the staff
    redesign.
    
    This patch also corrects an problem with addorderiso2709.js: It included
    some template markup. The template variables are converted to a JS
    variable to prevent a JS error.
    
    Note that the QA tool's js_in_body error is invalid for this template
    which requires that the JS stay inside <head>.
    
    To test you must have at least one MARC file staged for import.
    
    - Apply the patch and go to Acquisitions.
    - Locate a vendor and create a basket if necessary.
    - Add to the basket and choose the option of adding an order from a
      staged file.
    - Click "Add orders" next to one of the staged files.
    - On the Add orders from MARC file page, test that everything looks
      correct and works correctly:
      - In the first tab, expanding and collapsing order details by checking
        the checkbox or clicking the title.
      - Test the "MARC" and "Card" preview buttons.
      - Under the Item information tab, confirm that the layout looks
        correct and that the form works correctly, including plugin
        operations like auto barcode fill.
      - Test that, under the Default accounting details tab, changing the
        fund automatically sets the fund for each title in the first tab.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1672bd3ed21e75a15ed87f5e96bd4205abb3329c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 18 15:31:10 2022 +0100

    Bug 32269: Prevent Circulation.t to fail randomly
    
    Highlighted by Bug 32030: fix test builder for boolean
    
        #   Failed test 'Checkouts with auto-renewal can be renewed earliest on due date if no renewalbefore'
        #   at t/db_dependent/Circulation.t line 343.
        #          got: '2022-11-18T14:16:12'
        #     expected: '2022-12-02T00:00:00'
    
        #   Failed test 'Checkouts with auto-renewal can be renewed earliest on due date if no renewalbefore'
        #   at t/db_dependent/Circulation.t line 349.
        #          got: '2022-11-18T14:16:12'
        #     expected: '2022-12-02T23:59:00'
        # Looks like you failed 2 tests of 5
    
    We were reaching return $now
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6e9903423e4e9e62db1763e18b06c7fbc4e8b7a4
Author: Andrew Auld <andrew.auld@ptfs-europe.com>
Date:   Tue Nov 22 13:56:22 2022 +0000

    Bug 32299: Add page-section to Z39.50 results
    
    Test plan
    Step 1: Navigate to Cataloguing module and click 'New from Z39.50/SRU' to start a search
    Step 2: Carry out a search
    Step 3: Confirm that the white background to the table of results is missing
    Step 4: Apply patch
    Step 6: Repeat search
    Step 7: Confirm that the white background is now showing.
    
    Signed-off-by: Hammat Wele <hammat.wele@inlibro.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c6e5467e5f1cb58bed76b18bc38675a82aad11c9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Nov 22 18:23:07 2022 -0300

    Bug 31378: Tests shouldn't remove all patrons
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 09454079040c970f6761674f97707bbb212096b7
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 17 19:13:33 2022 +0000

    Bug 32241: Add page-section to list of records in batch record modificaton (tool)
    
    This patch modifies the batch record modification page template so that
    the preview of submitted records is contained in a .page-section
    container.
    
    To test, apply the patch and go to Cataloging -> Batch record
    modification.
    
    Submit a batch of bibliographic record numbers and a batch of authority
    record numbers. In both cases the page which previews the list of
    submitted records in a table should be correctly styled.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1e62fea429c10f9730b87c1478665cc3cf2c633d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 17 18:50:07 2022 +0000

    Bug 32198: Add page-section to stock rotation stages list (cat)
    
    This patch adds a .page-section container around relevant areas of the
    stock rotation management interface.
    
    Also changed: Removed a .dialog.message container which was not correct.
    
    To test, apply the patch and go to Cataloging -> Stock rotation.
    
    - If necessary, add a rota.
    - Click Manage -> Stages on your rota.
      - If neccesary, create one or more stages.
      - The display of stages should look correct.
    - From the list of rotas click Manage -> Items.
      - Click "Add items" and use a barcode file to add multiple items at
        once.
      - The page confirming your submission, with a list of items, should
        have a page-section.
      - Return to the view of items in the rota. The display of items should
        look correct.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 212262ef383aada6df4d06c226b861840037f300
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 17 19:28:48 2022 +0000

    Bug 32238: Add page-section to label creator pages
    
    This patch modifies two label creator templates so that a .page-section
    container is used to wrap main content.
    
    To test, apply the patch and go to Cataloging -> Label creator.
    
     - Click Manage -> Label batches.
       - The display of existing batches should look correct.
     - Click "Edit" on one of the label batches.
       - If necessary, submit a set of barcodes or item numbers to add to
         the batch.
       - The display of items in the table of items should look correct.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e6e4a775e45b63c50887e0841d4b73684ad24af5
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Nov 18 16:29:46 2022 +0000

    Bug 32254: (follow-up) Add missing div around "Older transactions"
    
    To test:
    
    - Tools -> Cash summary for <library> and Tools -> Transaction history
      for <register>
      - In the "Older transactions" section, submit start and end dates
        which will return results.
      - The table of results should be styled correctly.
    
    Signed-off-by: David <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b895cf31fcf195f0716aa194f62f0827b80c49d4
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Nov 17 18:45:33 2022 +0000

    Bug 32254: (follow-up) Add page section to Cashup history
    
    Adds one missing page section on the last table of the
    POS transactions page.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: David <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 897b28b44a414ec1561710af815917389eb32490
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 17 17:24:03 2022 +0000

    Bug 32254: Add 'page-section' to various tools pages
    
    This patch adds a .page-section div to various pages in the tools
    section in order to provide a consistent page structure.
    
    Also changed: Corrected a couple of templates which were missing some
    <tr> tags.
    
    This patch includes indentation changes, so please ignore whitespace
    when looking at the diff.
    
    To test, apply the patch and view the following pages to confirm that
    the primary page content is wrapped in a container with a white
    background:
    
    - Tools -> Access files
    - Tools -> HTML customizations
      - Additional contents, news or pages-- all use the same template.
      - Check the list of existing entries.
    - Tools -> Batch extend due dates
      - Choose a set of criteria that will return results and click
       "Continue".
      - Check the list of checkouts to be updated.
    - Tools -> Batch patron modification
      - Submit a batch of patrons for modification.
      - Check the list of patrons to be modified.
    - Tools -> Upload patron images
      - Upload one or more patron images
      - Check the view of results
    - Tools -> Upload
      - Upload a file and view the results, or perform a search and check
        the view of results.
    - Tools -> Patron card creator -> New patron card batch.
      - Submit a set of patrons and check the display of patrons in the
        resulting batch.
    - Tools -> Cash summary for <library> and Tools -> Transaction history
      for <register>
      - Confirm that the table of data looks correct
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: David <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d9fbe646102a6cbefd009955a7dab7924e28ef86
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jul 1 15:02:58 2022 +0100

    Bug 31080: Prevent bundles from being nested
    
    This is a follow-up for bug 28854 to prevent bundle type items from
    being nested in to other bundles.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 158ddef9997cf6e48fdb34a7bdfadd0b164e1b9e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jul 4 11:20:31 2022 +0100

    Bug 31080: Unit tests
    
    Unit tests for add_to_bundle functionality that prevents bundle nesting.
    
    Test plan
    1) Run t/db_dependent/Koha/Item.t
    2) The test should fail
    3) Apply the second patch
    4) Re-run the test and watch it pass.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dc08b5337656acd0d845486d2b038ef012d531cb
Author: Géraud Frappier <geraud.frappier@inlibro.com>
Date:   Wed Nov 16 16:54:41 2022 -0500

    Bug 32237: Fix using a list as base for batch record deletion
    
    When a list was used to select records for batch deletion, the
    record IDs were no longer found.
    
    To test:
    
    1. Go to Lists in the intranet.
    2. Add a list by clicking on "New list". Choose a random name for it and select private or public and save.
    3.Add one or more items into it and save.
    4.Go back to the main page and select "Cataloging".
    5.Go to "Batch record deletion".
    6.In "upload a file" select "Select a list of records" and choose a list and keep the Bibliographic on.
    7.Select continue and see that the list of records is not shown.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 726ad7404c02a3de0f3ecaae788b215d3dcb878f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 10 19:24:25 2022 +0000

    Bug 32167: (bug 14860 follow-up) Populate price fields even if no discount on vendor
    
    On bug 14860 an 'else' was removed, assuming the price fields were set before discount,
    this was incorrect. This patch renames the variable and always set the price, only discounting
    ecost if a discount, but setting the values even if not
    
    To test:
     0 - Have a vendor with a discount of 0% specified (no discount)
     1 - Export a record from your Koha
     2 - Stage the record for import and match on biblionumber
     3 - Add to a basket in acq from the staged file
     4 - Select the title, and set order price to $10 and do not fill the discount field
     5 - Add the order - note $0 order line
     6 - Repeat with another vendor with a 10% discount and confirm that is correct
     7 - Apply patch
     8 - Repeat 2-4
     9 - Add the order and confirm $10 price
    10 - Repeat with discounted vendor, confirm prices are set discounted correctly
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7c7db3eb6be53737af4c06a052b425f2c066575b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Nov 22 15:49:02 2022 +0000

    Bug 24606: (QA follow-up) Fix Template.t
    
    The test cases here still assumed UTF-8 enocding in the middle
    of the process. Can be much simpler.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5e51279ce9ace65057a707cf10a486283bfbf4d4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 16 07:40:59 2022 +0100

    Bug 31891: (bug 27421 follow-up) Remove one additional click
    
    From comment 0
    """
    Moving marc batch import actions to background jobs has introduced some confusing
    clicks to the process. Before this change, after staging a batch one was taken
    to a "MARC staging results" page with details of how the staging went and, most
    importantly, a link straight to the batch you'd just staged
    (at manage-marc-import.pl?import_batch_id).
    
    Now, however, one must click the status bar to get to details of the job
    and then click "View batch" from there. Not only is that an extra click
    and page load, but neither of those links are particularly large or
    obvious.
    """
    
    Test plan:
    - Stage a record for import, notice that the "View batch" link appears
    when the job is finished
    - Add order to basket from a new file, select a file and import
    Notice that the "Add staged files to basket" link is displayed when the
    job is finished
    
    Note for QA: We should have a js_callback in the background_job include
    file instead.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a40532b1ce63150c92be341b6547257320c0b117
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Nov 21 16:30:33 2022 +0000

    Bug 32308: Update Chocolat image viewer CSS to conform to redesign color scheme
    
    This patch makes minor modifications to the Chocolat CSS so that the
    buttons (next, previous, close) are styled with colors that conform to
    the new interface color scheme.
    
    Note: You may encounter Bug 32307 when testing.
    
    To test, apply the patch and enable at least two cover image services in
    the staff interface: Amazon, Local cover images, and/or Coce.
    
    Locate a bibliographic record which has at least two cover images and
    view the detail page. Click on the cover image to trigger the image
    viewer overlay.
    
    Confirm that the controls in this view are colored green, matching the
    current color scheme.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Katrin <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 037e6c7e48f5f499ef89ce181f2e8aca9dff6893
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Nov 15 14:13:53 2022 +0000

    Bug 32045: Use bootstrap tabs to select item tab
    
    When the form to add orders from a staged file is validated, we use
    toptabs functionality to switch to the item tab if there are missing fields.
    
    The display now uses bootstrap tabs, so the JS is throwing an error:
    Uncaught Error: cannot call methods on tabs prior to initialization; attempted to call method 'option'
    
    This patch simply switches the call to switch tabs
    
    To test:
    1 - Stage a file for import
    2 - Either use Marc(Item)FieldsToOrder to populate the orders
        or select a budget on the third tab
    3 - View the second tab, items info, confirm itemtype is required, but don't populate it
    4 - Attempt to save order, nothing happens
    5 - Check the JS console (F12)
    6 - Note the error:
        Uncaught Error: cannot call methods on tabs prior to initialization; attempted to call method 'option'
    7 - Apply patch
    8 - Cancel and add from staged file again
    9 - Select a budget and save
    10 - You now get an error popup: Some required item subfields are not set
    11 - Confirm after the error you are shown the items tab
    12 - Select itemtype
    13 - Save
    14 - Confirm orders added successfully
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6ebd9b99bf0c3a0e6f2455b93b01df3d43f43e1f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 17 09:28:39 2022 +0100

    Bug 30794: Insert blank rule (unlimited) for max_holds
    
    Related to bug 24669, why didn't we use strip_non_numeric for one occurrence?
    
    Note that there is still a problem, if none of the 3 inputs is filled,
    no rule will be created (ie. action ignored)
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1f6adb8dc38ca8d5ab9f1b36562a22beae97cc23
Author: Matt Blenkinsop <matt.blenkinsip@ptfs-europe.com>
Date:   Mon Nov 21 15:20:02 2022 +0000

    Bug 32298: Page section added to cataloguing search
    
    Added div to "Records found in this catalog".
    Added page-section class to "Records found in the reservoir".
    Corrected level two heading and removed horizontal line as it is now superfluous.
    
    Test plan:
    1) Apply patch from bug 32298
    2) Navigate to Cataloging
    3) Enter a search into the search field and run the search
    4) Verify that the white page section identifier is now visible around both sections
    
    Mentored-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Sponsored-by: PTFS Europe
    Signed-off-by: Hammat Wele <hammat.wele@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 527475532f93e52d39b6a9d1fd0e2020161696ba
Author: Jacob O'Mara <jacob.omara@ptfs-europe.com>
Date:   Fri Nov 18 16:13:07 2022 +0000

    Bug 32270: Add page section to label layouts
    
    Test plan:
    1) Navigate to `Cataloguing > Label creator > Manage label layouts`
    2) Observe the missing page section surrounding the table
    3) Apply patch
    4) Observe that missing page section has now appeared
    
    Mentored-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Sponsored-by: PTFS Europe
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 527f8fadcceed3c5373c9d28755ab474061711b2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Nov 21 07:55:52 2022 +0100

    Bug 32010: 2AF selenium tests - Alert can appear when we are waiting for ajax
    
    If we are waiting for ajax (there is a sleep 1s) and the alert pops up
    at the same time, Selenium is raising "unexpected alert open"
    
    We should not wait for the ajax request, but better wait for the
    alert actually.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit afd0bf0678efe2726930ee271403ef43246eda5e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 18 12:29:55 2022 -0300

    Bug 31378: (QA follow-up) Defer store until JSON fields are populated
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 79b93a6bdfe69b0d9ec173c537d1046c4163e402
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 18 12:00:06 2022 -0300

    Bug 32178: (QA follow-up) Correct modules import
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d8d03c8efa31860a30449fe75fd2fafe3dc2879d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 18 11:59:23 2022 -0300

    Bug 32178: Adapt tests to new auth.session params
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5ce2b32ae866ef072e95154b1492bae67c87dadd
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 18 11:45:06 2022 -0300

    Bug 32212: Updated yarn.lock
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cb7b9b37c9908a88d7e1d2bb769c1ae89f36099d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 18 14:41:51 2022 +0100

    Bug 32268: Prevent XSLT.t to fail randomly
    
    Can't call method "itemnumber" on an undefined value at /kohadevbox/koha/Koha/Recall.pm line 343.
    
    We should set item_level and not let TestBuilder pick a value.
    
    This may have been caught (make it more obvious) by the recent change to
    TestBuilder for boolean (Bug 32030: fix test builder for boolean)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3d8ff90a8fd822516886bd0e4b4cc9e8b1e2fdf6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 2 09:08:46 2022 +0100

    Bug 32010: Make sure the alert will be displayed after the ajax call
    
    There is a missing wait_for_ajax call at after we click but wait_for_ajax
    is waiting for the return of success, and the alert is there.
    
    22:01:57 koha_1       | STRACE: /usr/share/perl5/Try/Tiny.pm:123 in Selenium::Remote::Driver::catch {...}
    22:01:57 koha_1       |         /usr/share/perl5/Selenium/Remote/Driver.pm:361 in Try::Tiny::try
    22:01:57 koha_1       |         (eval 541):1 in Selenium::Remote::Driver::__ANON__
    22:01:57 koha_1       |         (eval 543):2 in Selenium::Remote::Driver::__ANON__
    22:01:57 koha_1       |         /usr/share/perl5/Selenium/Remote/Driver.pm:654 in Selenium::Remote::Driver::_execute_command
    22:01:57 koha_1       |         t/db_dependent/selenium/authentication_2fa.t:282 in Selenium::Remote::Driver::get_alert_text
    22:01:57 koha_1       |         /usr/share/perl/5.32/Test/Builder.pm:334 in main::__ANON__
    22:01:57 koha_1       |         /usr/share/perl/5.32/Test/Builder.pm:334 in (eval)
    22:01:57 koha_1       |         /usr/share/perl/5.32/Test/More.pm:809 in Test::Builder::subtest
    22:01:57 koha_1       |         t/db_dependent/selenium/authentication_2fa.t:291 in Test::More::subtest
    22:01:57 koha_1       |
    22:01:57 koha_1       |     # Looks like you planned 7 tests but ran 4.
    22:01:57 koha_1       |
    22:01:57 koha_1       | #   Failed test 'Enforce 2FA setup on first login'
    22:01:57 koha_1       | #   at t/db_dependent/selenium/authentication_2fa.t line 291.
    22:01:57 koha_1       | Error while executing command: no such alert at /usr/share/perl5/Selenium/Remote/Driver.pm line 411.
    22:01:57 koha_1       |  at /usr/share/perl5/Selenium/Remote/Driver.pm line 356.
    22:01:57 koha_1       | # Looks like your test exited with 255 just after 4.
    22:01:57 koha_1       | [20:59:37] t/db_dependent/selenium/authentication_2fa.t
    
    Test plan:
    Confirm that the test pass (execute it in a loop, hundreds of times)
    Confirm that the behaviour of 2FA "enforced" (see bug 30588) is still
    working as expected.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ac041571c3da103b1469065c1fd5c1b9c529c04c
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Nov 17 10:15:30 2022 +0000

    Bug 24606: (QA follow-up) Add test for encoding/decoding
    
    NOTE: I have the impression that this unit test is quite
    rudimentary. I do not see the apply function tested?
    
    Test plan:
    Run t/db_dependent/Koha/Item/Templates.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    tcohen amended: stray deps
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6744cd6612be7a8ac60db45d2fdce6f303bb2122
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Nov 17 10:02:08 2022 +0000

    Bug 24606: (QA follow-up) Fix encoding/decoding
    
    We should use OO interface and leave encoding to database
    layer.
    
    Test plan:
    Add a new item template containing real Unicode chars.
    Save. Apply on new item.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 923609f42e585a990dfef9f23c42f83918969ed8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 18 14:02:06 2022 +0100

    Bug 32267: (bug 32154 follow-up) Fix Agreements.t
    
        #   Failed test at t/db_dependent/Koha/ERM/Agreements.t line 111.
        #     Structures begin differing at:
        #          $got->[0]{user_role_id} = '2'
        #     $expected->[0]{user_role_id} = Does not exist
        # Looks like you failed 1 test of 4.
    
    Another fix may be better, please suggest if you disagree
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c59db1605d584f5acade963b705b9618dc1aa3d4
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Nov 3 22:20:57 2022 +0000

    Bug 32104: Prevent console error on additonal-contents.pl
    
    To test:
    1. Make a new HTML customization, news item, or page with the text editor ( CodeMirror ).
    2. Save the content ( not Save and continue )
    3. Notice the console error:
    4. Apply patch
    5. Try 1 & 2 again.
    6. No error.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ecec606572a19c6d407524ee1c896f0488c25a3c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 11 16:31:40 2022 +0100

    Bug 32181: ERM - Fix 'filter by expired' when adding an agreement to EBSCO's package
    
    We shouldn't change the current route (which will lead to change the
    view) when we are adding an agreement to a EBSCO's package
    
    Test plan:
    Go to E-Resource management / eHoldings / EBSCO / Packages
    Search for a package, select one
    Click "Add new agreement"
    Use the "Filter by expired" filter
    => Without this patch you are redirected to the package list view
    => With this patch applied the table is filtered as expected
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 356e136b0f08acba364a62985909e9dcb3a6a31b
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Nov 15 16:54:47 2022 +0000

    Bug 32093: Make help and code match for bg-days in cleanup_database.pl
    
    There as a mismatch between the parameter name in documentation (bg-days)
    and what was checked in the code (bg-jobs). This makes both match.
    
    To test:
    * Apply patch
    * Make sure you have some background_jobs older than one day
    * Verify the help of the script documents the parameter bg-days
    * Run the cleanup_database.pl job
      Example:  ./misc/cronjobs/cleanup_database.pl --bg-days  --confirm -v
    * Verify there are no errors and the lines have been deleted as expected
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e7d4898d678c213dec7af6083f3e8cc9ed4cd649
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 17 07:48:54 2022 +0100

    Bug 32212: (bug 32030 follow-up) Restore bootstrap 4
    
    During the development of the eRM module I've tried to use bootstrap 5
    (and vue-bootstrap), but I didn't manage to make it work without
    modifying the version used in Koha. This change is actually not needed
    and we can keep version 4.
    See commit 8c32f186d5a62e742621c35cfacff5b22bb42b71
    Bug 32030: ERM - Remove BootstrapVue3
    
    Test plan:
    % yarn install
    % git diff
    you should notice the version change in yarn.lock
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a922c8cc968f41f0cbf5f577adef16312474223a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 17 14:32:49 2022 +0100

    Bug 32242: Add selenium tests
    
    This is not testing the thing at the correct level, but at least we test
    the whole workflow.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 022034a1c7b91adac539c7ed16fc7b48d566912e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Nov 17 09:29:42 2022 +0000

    Bug 32242: Resolve encoding issue when sending to Net::Stomp
    
    This is meant as a quick fix. It should be enhanced later on by
    letting Net::Stomp do the UTF8 conversion.
    
    Test plan:
    Run batch mod items. Add a Unicode char in the notes.
    Check if job runs and results are correct.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2946f92bf0820192cb4eb39b0338b1c7a2db8b16
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 17 08:53:40 2022 +0100

    Bug 32224: Add prettier to yarn commands
    
    xt/vue_tidy.t was failing with:
      error Command "prettier" not found.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 50140c16c23606072d8fea3df0dbdf0ac12ab008
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 16 09:19:12 2022 +0100

    Bug 32224: Add cypress to yarn commands
    
    Either I am missing something obvious, or we need to add cypress to the scripts of package.json
    
    With /kohadevbox/node_modules only (ie. without $SYNC_REPO/node_modules), I cannot run
      yarn run cypress run
    
    `cypress run` is working with an adjusted PATH (see https://gitlab.com/koha-community/koha-testing-docker/-/issues/313#note_1173792905) but I think both should work.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 98aaabee9fc25bcc2c438aea0cd144d0d96b4782
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 17 14:52:25 2022 +0100

    Bug 32248: Remove t/00-checkdatabase-version.t
    
    Since bug 25078 we do no longer use updatedatabase.pl. This test was
    there to make sure the RM(aints) was replacing the XXX correctly.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 25a4757373b0f00df45b99bac76079ccbf20777e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Oct 26 15:00:53 2022 +0000

    Bug 31937: Fix Patrons::search_unsubscribed - sharpen condition
    
    The condition is fine as long as we only have GDPR consents.
    But if you dont, you would have trouble. I know :)
    Lets prevent that here, although the table still has an ENUM. So
    double safety.
    
    Test plan:
    Run t/db_dependent/Koha/Patrons.t
    Bonus: Run cleanup_database.pl and check for unusual number of
    locked accounts:
         misc/cronjobs/cleanup_database.pl --confirm -v --sessions
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a711e153d61f3ed9d9d0d214105e8c173a9486ca
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 16 08:59:13 2022 +0100

    Bug 32131: Make sure we login before we restore original pref's value
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fc48e6117f5df641dae10ef9a5cce05ff20de004
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 16 08:57:40 2022 +0100

    Bug 32131: Move set_ERM_sys_pref_value to before
    
    We cannot (yet) move login to before, but we can set the pref before all
    the tests. We need to login in before anyway to retrieve the value of
    the pref.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d794c99cc513da187b1c6af04239907c0898558
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Sat Nov 12 19:32:21 2022 -0100

    Bug 32131: Cypress tests are failing if ERMModule is off
    
    This patch solves this by enabling the system preference before each test,
    right after login. It also sets the system preference back to its original
    initial value after the tests finish running.
    
    To test:
    1) Disable ERMModule system preference
    2) Run cypess tests: yarn cypress open / yarn cypress run
    3) Verify that tests run successfully
    (Optional): While tests are running, visit the system preferences panel and verify that the system preference is now "Enable".
    4) Wait for the tests to finish and confirm that the system preference is set back to its original "Disable" value.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 32aceb32d43003432f802ecee1991ef27cd7b88f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 17 09:51:42 2022 +0100

    Bug 32240: Prevent erm_users.t to fail if checkout exist
    
    We should not (never) remove all patrons before tests
    
    Test plan:
    0. Don't apply the patch
    1. Check an item out
    2. Run the tests
    => Fail
    3. Apply the patch
    4. Create a patron with the erm permission
    5. Run the tests
    => Must return green
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1d176ae10af52c10a9e4be5b8a6a6b6d741d373a
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Nov 16 19:12:52 2022 +0000

    Bug 31774: Add 'page-section' to list of imported records
    
    To test:
    * Stage a MARC file with a few records
    * Look at the import results
    * The list of imported records doesn't have the white
      page section background
    * Apply patch
    * Refresh page and verify the table now is contained
    
    Signed-off-by: Jacob O'Mara <jacob.omara@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8172050ce6709ee3461c9269d8aa2f4a61ea7a61
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 17 08:44:51 2022 -0300

    Bug 32154: Fix db_rev permissions
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bac06174161c83bdbdb78b3731f93d628561179d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 16 07:53:42 2022 +0100

    Bug 32214: Prevent empty search option block in catalog search header
    
    In the header, if "Search catalog" is selected, there is an "option"
    icon to display some filters.
    Fitlers are displayed if IntranetCatalogSearchPulldown or
    IntranetAddMastheadLibraryPulldown is set. If none are set we should
    hide the icon to avoid and empty div to be displayed
    
    Test plan:
    Confirm that the icon is only displayed if one of the 2 prefs is turned
    on.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 05838349972b98fb12d19d9b5fe3036dbb7eae6c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Nov 16 11:02:29 2022 +0000

    Bug 31543: (follow-up) Use url filter for opac components search
    
    The previous patch switches to using 'query_string' which is returned encoded.
    Using uri we doulbe encode the string - this patch prevents that
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1736fe2335c637db066a536be96467cd4bd1e35e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 26 10:46:12 2022 +0000

    Bug 31543: Use query string, rather than query, to build link
    
    This patch returns the query string from build_query_compat
    Under Zebra, either works for the link, for ES we need the simple string
    
    I expand the test for get_components_query to test both engines
    
    To test:
    1.0) Set search engine to Elasticsearch
    1.1) Go to Tools > Stage MARC records for import
    1.2) Upload the example file
    1.3) In the form, choose the format 'MARCXML'
    1.4) Click 'Stage for import'
    1.5) Click 'Manage staged records'
    1.6) Click 'Import this batch into the catalog'
    
    2) Change MaxComponentRecords to 10
    3) In the staff interface, search the catalog for 'easy piano'
    4) Click on the record 'Easy piano pieces for children'
    5) Click on the 'show all component parts' link at the bottom of the Components tab
    --> it searches for HASH(...) - returns no results
    6) Try the same in OPAC
    --> it searches for HASH(...) - returns no results
    7) Apply patch and restart all
    8) repeat 3-6
    9) Results returned!
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c0d92f9e92d3ed8170bcebc2e5f381bac70efab7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 16 15:55:40 2022 -0300

    Bug 32109: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 783f344a55505fe43d6fee0d37eec88fa4cfb092
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Nov 4 11:42:47 2022 +0000

    Bug 32109: Fix spacing in toolbars containing text links
    
    This patch adds a new class to toolbars in certain contexts: Where the
    toolbar contains only text links (as opposed to Bootstrap-styled
    controls). This lets us set some comfortable padding on the links.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    Test the following pages to confirm that the toolbar of selection links
    ("Select all," "Clear all," etc.) has legible spacing.
    
    - Cataloging -> Batch item modification -> List of submitted barcodes
    - Cataloging -> Batch item deletion -> List of submitted barcodes
    - Cataloging -> Batch record modification -> List of submitted records
    - Cataloging -> Batch record deletion -> List of submitted records
    - Circulation -> Checkout notes
    - Tools -> Batch extend due dates -> Preview results
    - Tools -> Batch patron modification -> List of submitted patrons
    - Tools -> OPAC problem reports
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dec3c88ac4ead52b1c5ed5a3d6376bd93cb8b950
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 10 20:23:17 2022 +0000

    Bug 32171: Store after populating order
    
    This updates the call to store after populating the order
    
    I put this on it's own bug just for sake of dependency, in case it is needed
    seperate from 32166 for backports
    
    To test:
    1 - Apply and test with bug 32166
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7d31f77ae6d1f136c58e55fa06139ac366fc6b85
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 10 20:11:58 2022 +0000

    Bug 32166: Use import record id for retrieving correct inputs
    
    When importing from a staged file we retrieve the records form the DB, skip any that are not selected,
    and process the rest.
    
    When we skip some, we still raise our record count, and use this to retrieve the inputs.
    
    When building the page, we don't increment for skipped reocrds, so there can be a mismatch, i.e.
    Record #1 on the page to add records may be the 3rd record in the import file
    
    Rather than using a counting system, let us use the import record id directly
    
    To test:
     0 - Set system preferences:
    
    MarcFieldsToOrder:
    price: 949$g
    quantity: 949$k
    budget_code: 949$l
    discount: 949$m
    sort1: 949$n
    sort2: 949$q
    
    MarcItemFieldsToOrder:
    homebranch: 949$a
    holdingbranch: 949$b
    itype: 949$y
    nonpublic_note: 949$x
    public_note: 949$z
    loc: 949$c
    ccode: 949$8
    notforloan: 949$7
    uri: 949$u
    copyno: 949$t
    price: 949$g
    replacementprice: 949$v
    itemcallnumber: 949$o
    quantity: 949$k
    budget_code: 949$l
    
     1 - Stage attached sample file, Format:MARCXML, Record matching:Koha biblio 999$c
     2 - Add to a basket from the staged file
     3 - Select 1st record to basket and save
     4 - Record is added with the fields above as expected
     5 - Add to basket again, select 2nd record
     6 - Record is added with price from 020a, ignoring incoming fields
     7 - Repeat with 3rd, same problem
     8 - Apply patch
     9 - Stage file and repeat step 3
    10 - Confirm added with correct values
    11 - Add 2nd record and save, values correct
    12 - Add 3rd record, values correct
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 85791f4abab19d0b1a7f73d8fbec2d0043d5d871
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 10 20:59:28 2022 +0000

    Bug 32172: Remove biblionumber param from Z3950 popup on results
    
    This param is not defined in routine, who knows whereit comes from
    
    To test:
    1 - Enable coce and coce intranet, select all providers:
        https://coce.bywatersolutions.com
    2 - Search on staff client
    3 - Click Z3950 search
    4 - Note url contains a random biblionumber
    5 - Apply patch
    6 - Repeat
    7 - No biblionumber
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c31db4879680805b85e1e73864ed2ed6e1b4d3d0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 16 09:43:58 2022 -0300

    Bug 31751: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c06922e75c749ee23f7cb5605dfd481736c37dc5
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Nov 15 19:23:01 2022 +0000

    Bug 31751: Breadcrumb style
    
    This patch updates the breadcrumb style to use the old caret icon
    instead of a slash.
    
    I've left the italic because I think it works well to set the text off
    from the normal text above, in the search bar, and below in the main
    body of the page.
    
    To test, apply the patch and rebuild the staff interface CSS. Look at
    various pages in the staff interface and check the style of the
    breadcrumbs menu.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ad3744532598cae181567975899200dcf170cba8
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 16 09:36:29 2022 -0300

    Bug 32182: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9a4308481d3439df278c1f11402d626497deb052
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Nov 14 14:47:19 2022 +0000

    Bug 32182: Replace static tabs markup with Bootstrap
    
    This patch reimplements certain tabbed interfaces to use Bootstrap
    markup. Previously these tabs required special CSS because they're
    static, i.e. not JS-driven tabs for switching in-page. The tabs are
    links to separate pages.
    
    Note: This patch includes whitespace changes, so use diff accordingly.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    Test the following pages to confirm that the tabs look correct and still
    link to the correct locations:
    
    - Patron details
        - Accounting
          - Pay amount
        - Transactions
        - Create manual invoice
        - Create manual credit
    - Tools -> Comments
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit acfa184f78facfb7ef6e4f9f25d31fe6f5357589
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Nov 14 21:07:21 2022 +0000

    Bug 32155: Fix alignment of course details page
    
    This patch eliminates some unnessesary CSS and converts the course details div into a fieldset.
    
    To test:
    1. Create or edit an existing course.
    2. Search and add an instructor.
    3. Note that the columns are misaligned: the name of the course instructor is shown first, then the label "Instructors" is shown next.
    4. Add another three instructors.
    5. Note that this pushes the labels for the next few fields to the right.
    6. Apply patch
    7. Try steps 1-4 again and confirm everthing looks and works correctly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 737b4ec006fe6024dabb24f4012ab3c96b5e88d5
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Nov 15 17:38:57 2022 +0100

    Bug 32112: Move 'Delete selected items' to its own line
    
    This moves the checkbox and its label out of the action field set
    which makes it appear above the bottons instead of in front of it.
    
    To test:
    * Go to any record
    * Select items and send to item batch delete
    * Verify checkbox appears in front of button
    * Apply patch
    * Verify the checkbox and the yellow 'delete selected items' button
      are now on separate lines
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 65ef9861d340abaf64cdec479c8a1504d543d209
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Nov 15 11:47:16 2022 +0000

    Bug 32207: Add page-section to some circulation pages
    
    This patch adds a .page-section div to various circ-related pages in
    order to provide a consistent page structure.
    
    To test, apply the patch and view the following pages in Circulation to
    confirm that the primary page content is wrapped in a container with a
    white background:
    
    - Overdues
    - Overdues with fines
    - Transfers to receive: Your system should have items which have been
      transfered from at least two other libraries.
    - Transfers to send: Your system must have one or more items in the
      branchtransfers table with the datesent value = null.
    - On-site checkouts
    - Catalog -> Bibliographic record -> Items -> View item's checkout
      history
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit db78c0d67613b00b51f077356d8d075b75dd04dc
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Nov 14 19:19:21 2022 +0000

    Bug 32199: (follow-up) Add page-section to list of validated discharges
    
    This requires that a discharge is added to the patron account first.
    Then you'll see that the 'Aready validated discharges' appear within
    the white page section.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1fda4eb66c88c2dc50b93e6092c6545b38758ec0
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Nov 14 19:01:45 2022 +0000

    Bug 32199: (follow-up) Add page-section to circulation history
    
    Note: There is a trick here. If OnsiteCheckouts are active,
    the circulation history will be tabbed and not use page-section.
    If the pref is off, you'll see the page-section with this patch.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9def03c85239d9954e24b6d3b7633d2a0d481a40
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Nov 14 18:10:07 2022 +0000

    Bug 32199: Add page-section to various patron pages
    
    This patch adds a .page-section div to various patron-related pages in
    order to provide a consistent page structure.
    
    To test, apply the patch and view the following pages to confirm that
    the primary page content is wrapped in a container with a white
    background:
    
    - Patrons ->
        Patron details ->
          - Files
          - Holds history
          - ILL request history
          - Notices
          - Purchase suggestions
          - Routing lists
          - Statistics
    - Staff interface home page ->
        Discharge requests pending
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c5c9ac8689b471ed186ca4425cbd97478931e6d7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Nov 14 14:47:42 2022 +0000

    Bug 32170: Add page-section to csv-profiles
    
    This patch adds a page-section div around the csv_profiles list.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a419d0845fbb64117308318e86516743590a7dbb
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Nov 14 15:33:45 2022 +0000

    Bug 32169: Add page-section and fieldsets to batch item modification
    
    This patch extends some alert boxes to include the error details tables
    and updates the html_helpers include to add a page-section around the
    item results table
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8d082d1452bf2c9040d2df3c2d9f435d55f291d6
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Nov 14 17:20:50 2022 +0000

    Bug 32197: Add page-section to catalog's stock rotation page
    
    This page wraps the content of the stock rotation page in the catalog
    with a "page-section" div.
    
    Note: This patch includes indentation changes, so use diff accordingly.
    
    To test you  must have the StockRotation system preference enabled.
    Apply the patch and locate a bibliographic record in the catalog.
    
    - Click the "Rota" link in the sidebar.
    - Confirm that the table of items on this page is surrounded by a
      container with a white-background.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f7abff91915afe103e7d7a37fe64dd6721401da2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Nov 14 16:48:22 2022 +0000

    Bug 32042: Add page-section to catalog's item detail view
    
    This patch adds a couple of .page-section divs to the item detail view
    in the catalog. A "clearfix" class is also added in order to make sure
    the sections don't overlap.
    
    To test, apply the patch and locate a bibliographic record in the
    catalog.
    
    - In the sidebar menu of the bibliographic detail view, click "Items."
    - On the item detail page, confirm that the information is displayed
      well.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d256711871cfeeaa07d28e2627d3729b1db56f3f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Nov 14 16:35:26 2022 +0000

    Bug 32193: (follow-up) Add markup comments
    
    This patch adds comments to the template to highlight the markup
    structure.
    
    This patch should have no effect on the page's appearance or
    functionality.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f0e721f441168d674e9872e280153aaace19c08e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Nov 14 16:12:04 2022 +0000

    Bug 32193: Reindent item details template
    
    This patch performs general template cleanup to the lists template:
    Make indentation consistent, replace tabs with spaces, and trim trailing
    whitespace.
    
    To test, apply the patch and confirm that the layout of the page is
    unchanged. Test the various operations on the page:
    
    - Setting lost status
    - Setting damaged status
    - Setting withdrawn status
    - Setting local holds priority status
    - Adding a public or non-public note
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 689446fda0fa665202c9e32c50705ba828337c94
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 16 09:24:09 2022 -0300

    Bug 32154: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6e36b2c107877e3ac48f8d6b3a4f520da0cec71a
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Nov 9 14:36:05 2022 +0100

    Bug 32147: Capitalization: E-Resource management
    
    When e- is used as prefix, the second word should not
    be capitalized. And when e-resource-management is used
    as part of a sentence, the e shouldn't be either.
    See: e-mail, e-commerce. etc.
    
    To test:
    * Best to check the code... but:
    * All E-Resource should now read e-resource or E-resource, as on:
      * Koha start page
      * Breadcrumbs in the ERM module
      * Descriptions of AV categories...
    
    I chose to update the sysprefs.sql and the DB update as well
    as this hasn't been released yet.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Bug 32147: (follow-up) Fix missing space
    
    One of the AV category descriptions was missing a space
    before the (e-resource management).
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ef15517adddc081cfb713cd8bd3710030f45d86f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 16 09:09:21 2022 +0100

    Bug 32223: Remove node_modules/.bin from package.json
    
    We should not specify the node_modules/.bin part if the env is correctly configured.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4907e96ba8ecf85a3b62b6c78729274eb683dea6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 15 09:08:19 2022 +0100

    Bug 31711: (bug 27421 follow-up) Fix add to basket from a new file
    
    We lost the display of the "Add staged files to basket" link when create
    a new order from a new file
    
    Test plan:
    Add order to basket from a new file, select a file and import
    See the detail of the job and notice the "Add staged files to basket",
    click and confirm that it works as expected.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 937b7114d06874f1a9540f35b9011a7e247e5bdc
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Tue Nov 15 09:17:11 2022 -0300

    Bug 32178: (follow-up) Transform 'staff' interface to 'intranet'
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ca57674700d020b539f5da2b05fc31df8a6a6652
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Fri Nov 11 22:22:23 2022 +0000

    Bug 32178: Remove security breach introduced in bug 31378
    
    This patch removes a security breach in C4::Auth::check_api_auth introduced by bug 31378, where when someone called an api with the parameters userid and auth_client_login, check_api_auth would automatically asume the user calling was that userid.
    
    This patch also introduces C4::Auth::create_basic_session(), a function that creates a session and adds the minimum basic parameters.
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7a413f8015c2cc6b5cf8c13788b9a5dab689a81b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Nov 14 12:02:19 2022 -0300

    Bug 32191: Tidy upgrade scripts output
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 87391f3e400365cf237024e73e8319709c6b8158
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Nov 14 12:01:10 2022 -0300

    Bug 32191: Add sample output for copying and pasting to skeleton.pl
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0441b5ce46d66798180610ba115b4d4feef569fb
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Nov 14 11:07:51 2022 -0500

    Bug 32188: Only show template controls above item form if templates have been defined
    
    The new item templates above the item edit form should only show, when at least one template has been defined.
    
    Test Plan:
    1) Browse to the item editor
    2) Delete all templates
    3) Note the template toolbar is displayed
    4) Apply this patch
    5) Reload the page, note the toolbar is not displayed
    6) Create a new template, note the toolbar is now displayed
    7) Delete that template, note the toolbar is no longer displayed
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8bbfe0cc9495610ca9b00afbb156d19b9dfc551e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Nov 14 09:59:04 2022 -0300

    Bug 31378: (QA follow-up) Remove Google OIDC syspref => IdP migration
    
    This migration step was introduced by mistake and overlooked by QA.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 83491a7773857d78cb2d708180cc4f7086a4269f
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Nov 3 22:08:14 2022 +0000

    Bug 32103: Remove flex from tab-content list elements
    
    To test:
    1. Go to HTML customization, News, or Pages and make a new entry using the text editor ( CodeMirror )
    2. It is hard to focus on the Content field because the wrapper width is very small.
    3. Apply patch and try again
    4. The CodeMirror wrapper width should be normal again.
    5. Check the other language tabs.
    6. Also test the WYSIWYG editor, it should also be normal.
    
    Note: I added some CSS to make the labels appear bold.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a5f794b2475d5adebe1b3007ff95e854ea1da0af
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 3 15:32:45 2022 +0000

    Bug 32099: Consistent classes for primary buttons: Assorted templates
    
    This patch makes changes the button markup in various assorted
    templates so that all submit buttons and any buttons that should should
    be styled as primary buttons have the Bootstrap class "btn btn-primary."
    
    To test, apply the patch and view the following pages to confirm that
    everything looks correct. In most cases there are no visible changes.
    
    - Staff interface login
    - Authorities -> Add/edit
    - Authorities -> Merge
    - ILL -> ILL requests
    - Tools -> Patron lists
    - Administration -> Manage plugins -> Upload plugin
    - Point of sale
    - Point of sale -> Transaction history
    - Holds
    - Suggestions
    - Tags
    - Calendar
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2079e11ce336087deb81a753ab231017b6346496
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 3 15:08:37 2022 +0000

    Bug 32098: Consistent classes for primary buttons: Clubs and rotating collections
    
    This patch makes changes the button markup in clubs and rotating
    collections templates so that all submit buttons and any buttons that
    should should be styled as primary buttons have the Bootstrap class "btn
    btn-primary."
    
    To test, apply the patch and view patron clubs and rotating collections
    pages to confirm that everything looks correct. In most cases there are
    no visible changes.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8165aa1d737745df81112467d247dc5dd4075aac
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 3 14:47:34 2022 +0000

    Bug 32096: Consistent classes for primary buttons: Tools
    
    This patch makes changes the button markup in various tool
    templates so that all submit buttons and any buttons that should should
    be styled as primary buttons have the Bootstrap class "btn btn-primary."
    
    To test, apply the patch and view pages in the tools section to confirm
    that everything looks correct. In most cases there are no visible
    changes.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fc08868976d9f79cd01e58be88bedcc86a117941
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 3 14:34:59 2022 +0000

    Bug 32094: Consistent classes for primary buttons: Serials
    
    This patch makes changes the button markup in serials templates so that
    all submit buttons and any buttons that should should be styled as
    primary buttons have the Bootstrap class "btn btn-primary."
    
    To test, apply the patch and view serials pages to confirm that
    everything looks correct. In most cases there are no visible
    changes.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d4aceae4afcc95657f1e71de3903d7fb974e2040
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 3 12:01:22 2022 +0000

    Bug 32086: Consistent classes for primary buttons: Patrons
    
    This patch makes changes the button markup in patron
    module templates so that all submit buttons and any buttons that should
    should be styled as primary buttons have the Bootstrap class "btn
    btn-primary."
    
    To test, apply the patch and view patron module pages to confirm
    that everything looks correct. In most cases there are no visible
    changes.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c7a995d28f7ae3759ec9ad377b5f7f2b5828e06a
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Thu Nov 3 14:40:40 2022 +0200

    Bug 31447: Add unit tests
    
    To test prove t/db_dependent/Circulation.t
    
    Sponsored-by: Koha-Suomi Oy
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a02813fb5b995cae212d6b281ca0c2fe388677a9
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Tue Aug 23 13:48:39 2022 +0300

    Bug 31447: Use holds pick up branch in "Please confirm checkout" message
    
    When one tries to check out item which has hold in it,
    "Please confirm checkout" message uses patrons home library
    instead of holds pick up library. It would be more logical
    to use latter here.
    
    To test:
    1. Find record with holds.
    2. For first priority hold, change it's pick up library to differ from patrons homebranch if needed.
    3. Check out records item for a different patron.
    => Note that notice reads: "Item ... has been on hold for ... at [patrons homebranch] since ...".
    4. Apply this patch.
    5. Repeat steps 2 and 3.
    => Notice should now read: "Item ... has been on hold for ... at [holds pick up branch] since ...".
    
    Sponsored-by: Koha-Suomi Oy
    
    Signed-off-by: Axelle Clarisse <axelle.clarisse@univ-amu.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 499ae7077dda65db317c7b575c49b104928e8915
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Nov 13 14:06:42 2022 +0000

    Bug 20207: Don't show search options when no suggestions show
    
    When you are not logged in and OPACViewOthersSuggestions is
    deactivated, you don't see any suggestions.
    
    When we see no suggestions, we should also not show the option
    to serach in suggestions.
    
    To test:
    * as a logged in user and logged out, try various combinations of:
      * OPACViewOthersSuggestions
      * AnonSuggestions
    * Verify display matches expectations (new button, shown suggestions,
      search input)
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4e7b570fdbafbeddca8f0ee8520a48456eb74607
Author: Mark Hofstetter <mark@hofstetter.at>
Date:   Fri Nov 11 13:38:08 2022 +0100

    Bug 20207: Don't show anyones's suggestions when OPACViewOthersSuggestions is deactivated
    
    When you enable AnonSuggestions and ALLOW patrons that aren't logged
    in to make purchase suggestions, once a suggestion has successfully
    been submitted, anonymous purchase suggestions will show on OPAC even
    when system preference OPACViewOthersSuggestions, is set to Don't show.
    
    The suggestions will show on opac-suggestions.pl. However, if you search
    for the title you suggested, you will get a message saying
    "You are not authorized to see pending purchase suggestions."
    
    This patch fixes the error, ie if OPACViewOthersSuggestions is set to
    false not other suggestions are shown (if you are not logged in and AnonSuggestions)
    OR ONLY your own suggestions if you are logged in
    
    To test:
    1) activate AnonSuggestions
    2) create an anon suggestion
    3) create a suggestion with a logged in user
    4) toggle OPACViewOthersSuggestions Show/Don't show
    5) all suggestions are shown cgi-bin/koha/opac-suggestions.pl in either case
    6) apply patch
    7) OPACViewOthersSuggestions is now respected ie suggestions from other users are only shown if activated
    8) Please sign off
    
    Sponsored-by: Library of the Natural History Museum Vienna
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 36aa2b4e08184d584f652ac762a011abca7bb380
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Nov 13 13:31:44 2022 +0000

    Bug 32185: Fix template typo in opac-reserve.pl
    
    This removes the %] showing for not for loan items disappear.
    
    To test:
    * Create a record with multiple items, mark one 'not for loan'
    * Place an item level request on this record in the OPAC
    * Make sure you 'Show nonholdable items'
    * Verify the %] shows in the column with the not for loan status
    * Apply patch
    * Verify display is now improved
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 20294f52bf17847eebdf8e9a0179776beb6fa5e7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 4 13:03:53 2022 +0100

    Bug 31261: Introduce flatpickr-futureinclusive
    
    That let us use future + today, and it's working perfectly for our use
    case :)
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 614b0a50330b9e110c69b30a83045c99c941ed20
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sun Jul 31 08:29:41 2022 +0200

    Bug 31261: Disable dates in the past for curbside pickups
    
    When creating a new pickup the dates in the past won't display any
    available slots. It would be better to disable them in the date picker.
    
    Test plan:
    Setup curbside pickups for your library (see bug 30650 test plan if
    needed)
    Create a new pickup (staff and OPAC) and confirm that the date picker widget
    has the dates in the past disabled.
    
    QA note: More work would be needed to sync calendar.inc code between
    OPAC and staff. Also note that the "clear date" code wasn't needed
    (please confirm).
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6df74598ebd2f18320540fc32e7249dfe8239f67
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 11 12:17:28 2022 +0100

    Bug 31782: Remove js/autocomplete/patrons.js
    
    On 30578 we replace circ/ysearch.pl with a call to the /api/v1/patrons
    route. A new patron_autocomplete JS function has been written
    (js/patron-autocomplete.js) for that purpose.
    
    However 3 occurrences were using an existing patron_autocomplete
    function, and 30578 didn't take care of adjusting correctly the call to
    the REST API route.
    
    On this patchset I am suggesting to copy/paste the JS functions defined
    in js/autocomplete/patrons.js, because we are very close of the 22.11
    release. But ideally we should improve js/patron-autocomplete.js to add
    a new 'on-select-add-to' option that will take care of add/remove/hide
    behaviour. IMO that must be done on a separate bug, and after 22.11 is
    released (to not need to retest the other occurrences of the patron
    autocomplete)
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9800cfbca282267ebff4db7bb8c8fe737a43f30b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 11 12:16:35 2022 +0100

    Bug 31782: Fix autocomplete when duplicating orders
    
    Test plan:
    Add a new order to a basket from an existing order
    Search for the order to duplicate using the "Basket created by" field
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2360443df6df75ba8b9a8bc2aaf1d124b12c40fe
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 11 12:13:21 2022 +0100

    Bug 31782: Fix patron autocomplete on order search
    
    Test plan:
    Search for order using the "Basket created by" field
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 40c052f20e0b0be2dd6f31f165837bb42c4da68d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 11 12:10:28 2022 +0100

    Bug 31782: Fix patron autocomplete on patron list
    
    Test plan:
    Add new patrons to a patron list
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 950fa218d49ba8c8c6316f0b32ddbed958bcb75e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 11 14:30:18 2022 +0000

    Bug 32179: Add page-sections as appropraite to the ERM module
    
    We missed the page-section addition when ERM was updated for the new UI
    prior to push.
    
    Test plan
    1) Start a koha-testing-docker
    2) Build the ERM module with 'kshell > yarn install > yarn build_js'
    3) Enable the ERM module via the system preferences
    4) Enable both 'EBSCO' and 'Local' as providers
    4) Check the following pages
       * ERM > Agreements
       * ERM > Licenses
       * ERM > eHoldings > Local > Packages
       * ERM > eHoldings > Local > Titles
       * ERM > eHoldings > Local > Titles > Add from a list
       * ERM > eHoldings > EBSCO > Packages
       * ERM > eHoldings > EBSCO > Titles
    5) Apply this patch
    6) Build the app again 'yarn build_js'
    7) Confirm page-sections appear as expected on the pages mentioned in
       step 4.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9749aef9c22d3022042cc241f4ec4b3c277e6534
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 2 12:18:31 2022 +0000

    Bug 32072: Consistent classes for primary buttons: Cataloging
    
    This patch makes changes the button markup in Cataloging templates
    so that all submit buttons and any buttons that should should be styled
    as primary buttons have the Bootstrap class "btn btn-primary."
    
    To test, apply the patch and view pages in Cataloging to confirm
    that everything looks correct. In most cases there are no visible
    changes.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2e7da3ce147e23befa2efcbce174fb6f693961d0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 11 15:47:36 2022 -0300

    Bug 24606: (QA follow-up) Remove duplicate include

commit 8bc4409773b3f955ab3dac80689eeea0bccddc2b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 11 15:26:39 2022 -0300

    Bug 24606: Fix encoding issues on decoded content
    
    This patch makes the `decoded_contents` method UTF-8 encode the data
    before calling the relevant decode_json, as expected by the JSON library
    [1].
    
    To test:
    1. Apply the regression tests patch
    2. Run:
       $ kshell
      k$ prove t/db_dependent/Koha/Item/Template.t
    => FAIL: Tests fail!
    3. Apply this patch
    4. Repeat 2
    => SUCCESS: Tests pass!
    
    [1] `Any decoding or encoding (e.g. to UTF-8 or UTF-16) needs to be done
    yourself, e.g. using the Encode module.` https://metacpan.org/pod/JSON
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1d65a71cf617459eb24d3d024987a73e58180db7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 11 15:14:52 2022 -0300

    Bug 24606: Regression tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cc1502033c20487cc6de0c7d81d31abd23200aa8
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Nov 9 15:12:31 2022 +0000

    Bug 32151: Resolve uninitialized warn in numeric ne in C4::Ris
    
    We should not write:
        if ($kwfield != undef) {
    
    Test plan:
    Pick record with UTF8 chars.
    Download via cart or shelf in RIS format.
    Check your logs.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 90fd906e87f699132cef37b9658f0b4eca55d9ac
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 11 09:01:00 2022 -0300

    Bug 32158: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e0b58ac205f96cfe5ff5ed1b0973880d674ceb7e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 10 19:04:11 2022 +0000

    Bug 32158: Specify due date field is very long now
    
    This patch adds a reasonable width to the "specify due date" date field
    on the circulation page.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    Check out to a patron and click the "setting" icon on the "Enter item
    barcode" field.
    
    In the checkout setting panel, confirm that the date field isn't
    unreasonably wide.
    
    Signed-off-by: Barbara Johnson  <barbara.johnson@swbell.net>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e216df769e05a901d76dc0316dcef3e669e548ee
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 10 08:16:06 2022 +0100

    Bug 32163: (bug 32030 follow-up) Fix koha_object[s]_class for ErmUserRole
    
    Test plan:
    run t/db_dependent/TestBuilder.t and confirm that the error related to
    this module is gone. Another one may still fail however
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8b4ea0beaa733f349be32b95267c4ec907be1188
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 10 07:36:19 2022 +0100

    Bug 32161: (bug 32030 follow-up) Fix koha_object[s]_class for ErmEholdingsPackagesAgreement
    
    Test plan:
    run t/db_dependent/TestBuilder.t and confirm that the error related to
    this module is gone. Another one may still fail however
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9d68cae0d2b97cdbd830875c29c54920365941c4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 11 08:56:05 2022 -0300

    Bug 32154: DBRev 22.06.00.085
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 22e78b5ffa9ddde3186c8a74e5771317d213d601
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Nov 9 16:55:20 2022 -0100

    Bug 32154: Missing primary key on erm_user_roles table
    
    The aforementioned TestBuilder should display "Koha::ERM::UserRole", not be empty.
    
    This patch adds a primary key to the erm_user_roles table and fixes that.
    
    Also includes atomicupdate file to update database schema as well as updates to
    kohastructure.sql provided by Jonathan Druart.
    
    Looked into the vue files but didn't find anywhere or a need to include the new
    primary key in any of the requests as there is no request of users by role_user_id
    being made.
    
    Erm users are being created/updated as a relationship through licenceses/agreements.
    
    Furthermore, when editing a role of an existing user, this new primary key is already
    being supplied embeded in the license/agreement.
    
    Test plan:
    Add users to license and agreement
    Run the cypress tests
    Confirm that the change fix the test that was failing in TestBuilder.t
    (another one may still fail however)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b3be8b13140d67adb1eb18d3744af2daf3e16813
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 11 08:53:43 2022 -0300

    Bug 32162: DBRev 22.06.00.084
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 80813bab1549a52ca171c720295739a733fa3995
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 11 08:52:41 2022 -0300

    Bug 32162: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f9bcee4be87634716203ec45130824a6a8f407ae
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 10 08:06:28 2022 +0100

    Bug 32162: Add primar key to erm_eholdings_packages_agreements
    
    Test plan:
    Confirm that this change fixes the related TestBuilder.t failure
    Confirm that it does not break the eRM app, try to attach an agreement
    to a package.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e16003e19ea9a4d397ac06b76c53e1385f8516c4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 8 07:16:04 2022 +0100

    Bug 32130: Add a test to ensure vue files will be kept tidy
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8174b15494f9744069566d2e74bbe982ec4f950e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 10 14:53:38 2022 -0300

    Bug 31759: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5763d0222792a7816ee200de6fc3739bc7a56f93
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 26 18:29:23 2022 +0000

    Bug 37159: Updated tab style
    
    To test, apply the patch and rebuild the staff interface CSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client).
    
    Test plan
    1) Confirm the styling change for top level tabs on patron details or catalog
       details pages.
    2) Confirm the styling change is ok for a nested set of tabs (catalog
       holds page is a good example).
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    https://bugs.koha-community.org/show_bug.cgi?id=31759
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f43a38940e36a1d50cc23fd1113857db2d4f25da
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Nov 10 16:09:00 2022 +0000

    Bug 31819: (QA follow-up) Add page section to list of items
    
    In order to test, you need to add items on order and add
    at least one to make the list appear above the item section
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 02017fb3ecef053bf4dc0c02a7d8467a7cd25766
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Nov 10 16:01:24 2022 +0000

    Bug 31819: (QA follow-up) Fix alignment of Statistic fields at end of form
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7d5d88aae0b1fc2838301ad7568d6daac18f1c99
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 10 14:40:41 2022 +0000

    Bug 31819: Formatting of item form in acq when ordering is broken
    
    I propose that we add CSS to the page to fix this since it's fairly
    specific to the way this page is broken.
    
    To test, apply the patch and view a basket in Acquisitions.
    
    - Click "Add to basket" and choose "From a new (empty) record."
    - Confirm that the item form layout looks correct.
    - Perform the same test when adding to a basket from an existing record.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 431b49dc86dc9f380381fd59494e462a4e60cd93
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 10 14:49:06 2022 -0300

    Bug 32145: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d6f1ca62555408819541c888f4fb19c3ef93e36d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 10 11:49:33 2022 +0000

    Bug 32145: Fix style of buttons with class .btn-danger
    
    This patch adds style to the staff client's global SCSS which adds
    correct styling to buttons classed with .btn-danger.
    
    This isn't the correct way to fix this, but it's the fast way.
    Rebuilding Bootstrap with custom colors is the correct way, but
    Bootstrap 3.x doesn't use SCSS. I consider this is a FIXME for an
    upgrade of Bootstrap in the staff interface.
    
    To test, apply the patch and rebuild the staff interface CSS. Test
    instances where the .btn-danger class is used. Two examples:
    
    Holds:
    
    - Locate a bibliographic records with holds and view the holds.
    - Click the "trash" icon to delete one of the holds.
    - In the confirmation modal, check that the "Confirm cancellation"
      button looks correct in its default, hover, and active ("clicked")
      state.
    
    Cataloging:
    
    - Open a new blank record in the basic MARC editor.
    - Click "Save" without filling any mandatory fields.
    - You should see a warning about the empty fields.
    - Scroll down until the warning is offscreen. An "Errors" button should
      appear in the toolbar.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d2cbcc205301b3b0d8c43003b891a7535d02a2cc
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Nov 10 15:45:14 2022 +0000

    Bug 32073: (QA follow-up) Fix capitalization: Cancel and Transfer all
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b2d13db5ab15cff4ccfe17c06eec0abf03dbce77
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 2 12:37:16 2022 +0000

    Bug 32073: Consistent classes for primary buttons: Circulation
    
    This patch makes changes the button markup in Circulation templates --
    including offline circulation -- so that all submit buttons and any
    buttons that should should be styled as primary buttons have the
    Bootstrap class "btn btn-primary."
    
    To test, apply the patch and view pages in Circulation to confirm
    that everything looks correct. In most cases there are no visible
    changes.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 81b9e1f466f42b4befeef02fabdcfb1f0aceefb1
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Nov 10 15:31:25 2022 +0000

    Bug 32165: (QA follow-up) Fix tabs in ISBD details
    
    The QA test tools complained about tabs in 2 lines, this is fixed here.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f50214c79a3eb2eaa50bbebf66ec2cdf448f3a93
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Nov 10 10:58:59 2022 +0000

    Bug 32165: Add page-section to issuehistory
    
    Test plan
    1) Confirm the issue history view now uses page-section appropriately
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c745b855fed53b809e92199af2304b82baaf5877
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Nov 10 10:44:29 2022 +0000

    Bug 32165: Add page-section to ISBDdetail
    
    We fix some whitespace and move the toolbar above the H1 too.
    
    Test plan
    1) Confirm the headings and page-sections now look correct on the ISBD
       details view
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cff0b3ed08386ddbacba5157147399c38ac9b8ee
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Nov 10 10:38:31 2022 +0000

    Bug 32165: Add page-section to labeledMARCdetail
    
    Test plan
    1) Confirm that page-sections now appear as expected on the labeled marc
       view.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fe85f9d257a353c1abb6e6b227fce94dad8c1e93
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 10 14:44:59 2022 -0300

    Bug 24606: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit af92782c9747710e0a3aae2aa0f1b4c1cde58d65
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 10 14:41:40 2022 -0300

    Bug 24606: DBRev 22.06.00.083
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2a79e3a00cd3b0bd256ffa5b4bb9cd7c3c1c38c9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 10 14:39:35 2022 -0300

    Bug 24606: (QA follow-up) borrowernumber => patron_id
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f31b4c48fc5b51144c27643b2cfae7ec01f70649
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Nov 2 13:15:17 2022 -0400

    Bug 24606: (QA follow-up) Fix up save form a bit
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2d8723b3de10ef192d8ad806248c03890fa4497e
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Nov 1 14:25:57 2022 +0000

    Bug 24606: (QA follow-up) Remove string variable
    
    This string is no longer needed as the __() is used
    in the .js file directly.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1e0fe4af21daed2c0db27607bdc314d8c777c33f
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Oct 31 12:16:27 2022 -0400

    Bug 24606: (QA follow-up) Disable 'Apply template' button if no template is selected
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 02dd7722903eecb8ea1192c0a17649e23abb40c5
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Oct 31 12:05:02 2022 -0400

    Bug 24606: (QA follow-up) Hide button when using multi-add
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7573d3caf1a7b4aaa7ba86f9b6d168ebc6ac8b90
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Oct 31 11:59:53 2022 -0400

    Bug 24606: (QA follow-up) Fix up interface
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0b58907ba3a748a6992e647c5641f69c92018d4c
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Oct 31 11:48:37 2022 -0400

    Bug 24606: (QA follow-up) Update js message translation style
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9db0d5d9abc5d84e96c58d32afec5d3f64ad7318
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Oct 31 09:05:57 2022 -0400

    Bug 24606: (QA follow-up) Fix QA script issues
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0e1a3efb75dc9ca5e651e3cb86b3ddc9e4579352
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Oct 17 09:35:13 2022 -0400

    Bug 24606: (QA follow-up) Set existing sharing setting when updating existing template
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4037e6ceca90bc4bf3cb2a7fcb90daf084c9abf7
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Oct 6 10:08:45 2022 -0400

    Bug 24606: Add item template editor permission
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 859a9176187694effaf109fb2898a40c15a15ea1
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Sep 29 09:06:28 2022 -0400

    Bug 24606: Implement item templates
    
    This patch set implements item editor templates for community Koha.
    
    Test Plan:
    1) Apply this patch set
    2) Run updatedatabase.pl
    3) Restart all the things!
    4) prove t/db_dependent/Koha/Item/Template*
    5) As a non superlibrarian, enter the item editor
    6) Set some item fields, save as a new template using the buttom and
       form below the editor.
    7) Test loading a template without remembering for the session
    8) Test loading a template while remembering for the session
    9) Test deleting a template
    10) Test updating a template
    11) Create one or more shared templates
    12) Log in as another non superlibrarian without the new permission manage_item_editor_templates,
        verify you cannot edit/delete templates shared to you
    13) Enable the new permission manage_item_editor_templates,
        verify you can now edit and delete templates shared to you
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c5a3b14bf8aa0055ac5cc5a090818b3912ed1d2f
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Sep 29 09:05:07 2022 -0400

    Bug 24606: Add Koha Object(s) with unit tests
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 16f0117e55d6f5bff1ab71fe0472e3c54024e0d6
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Sep 29 09:03:55 2022 -0400

    Bug 24606: Update database, add new schema file
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3fab32632fc16a14b5c86f542d0c8a0e50675a6c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 4 12:24:36 2022 +0100

    Bug 32108: Replace "x" icon with the "search" icon
    
    Change "x" icon to replace patron when scheduling a pickup.
    
    Test plan:
    Schedule a new pickup, select a patron, notice the change.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7c34048bd5da170a02b958f3266c6e84df2a4d20
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 10 11:37:02 2022 +0000

    Bug 8948: (follow-up) Remove 580 display from 787
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b842e55679aec03e09cc0b0e7514c3c75e8770c3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 3 13:09:01 2022 +0000

    Bug 8948: (follow-up) Correct OPAC link
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3dce56d7cc62985534179a74347cf5fcfe1a6a55
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 3 12:05:59 2022 +0000

    Bug 8948: Changes for OPAC
    
    Test with same record, confirm OPAC view is as expected
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 18ad260608f3b53cbd6b1aa8581cdc82b5ba6366
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Oct 28 16:38:22 2022 +0000

    Bug 8948: Display MARC 787 relationship field
    
    This field is defined similar to 775, as a related work:
    https://www.loc.gov/marc/bibliographic/bd787.html
    
    This patch adds a display of this field, linking to the referenced record as the 775 does
    
    It also tests for 580 field, and displays the text there if present, using the 787 a and t subfields otherwise
    
    To test:
    1 - Edit the default framework to make 787atw and 580a visible in editor
    2 - Add a 787 to a record:
        $tThe ideas behind the chess openings
        $aFine, Reuben<
        $w2470231
    3 - Confirm there is no display
    4 - Apply patch / restart all
    5 - 'Other related works' now shows
    6 - Link should be using title of record
    7 - Set system preference UseControlNumber to Use
    8 - Reload details, link should now use control number
    9 - Add a 580 to the record:
        $a This is a friendly work to this one
    10 - Confirm the text of the link now displays before the link
    11 - Add a second 580, confirm it displays as well
       - there is no seperator as each should end with a period or other punctuation according to MARC
       - there is a dpan with a class surrounding each so styling can be added as desired
    12 - Add a second 787
       - confirm seperator present and wrapped in a span with a class
       - confirm each 787 is shown with a span/class for styling
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 36dc3d448c28d4026bb1b5feab174447ea53e1aa
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 3 09:41:31 2022 +0000

    Bug 13600: (follow-up) Add seperator on the OPAC
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e9aad988cb422214346aec5d85a78fefd64eb681
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Oct 24 16:23:12 2022 +0000

    Bug 13600: (follow-up) Add separator between different series fields
    
    This patch checks for an upcoming series tag, and adds a separator if one is found
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 438e0a527ae58a6107354fdcd64277c3b30c0b67
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 16 11:38:15 2022 +0000

    Bug 13600: XSLT - 8xx not showing if there is no 4xx
    
    This patch adjusts XSLT so that series tag displays if any 440,490,800,810,830 is present
    
    It also adjusts 8xx to display even if 490 ind 1 = 1 is not present
    
    To test:
    1 - Check records with multiple series tag
    2 - Confirm display is correct
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ccabd9f3dd49bd8673dc73e273e0f9f10ef3e5b8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 3 14:25:45 2022 +0000

    Bug 32091: Consistent classes for primary buttons: Reports
    
    This patch makes changes the button markup in reports templates so that
    all submit buttons and any buttons that should should be styled as
    primary buttons have the Bootstrap class "btn btn-primary."
    
    To test, apply the patch and view reports pages to confirm that
    everything looks correct. In most cases there are no visible changes.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f7d8717a3387440ecca330fe6b6fd8bbdf899b67
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 3 14:57:32 2022 +0000

    Bug 32097: Consistent classes for primary buttons: Lists
    
    This patch makes changes the button markup in lists templates so that
    all submit buttons and any buttons that should should be styled as
    primary buttons have the Bootstrap class "btn btn-primary."
    
    To test, apply the patch and view lists pages to confirm that everything
    looks correct. In most cases there are no visible changes.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3fa7034bbe722ab16806f23b2cf8be27e9a20b59
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 3 18:20:39 2022 +0000

    Bug 32102: Improve specificity of batch record modification breadcrumbs
    
    This patch makes a minor change to the batch record modification
    template so that there is a link back to the initial view after you have
    submitted a batch for modification.
    
    To test, apply the patch and go to Cataloging -> Batch record
    modification.
    
    - Initially the breadcrumbs menu should show Home -> Cataloging -> Batch
      record modification
    - Submit a batch of bibliographic or authority records for modification
    - The breadcrumbs should now read Home -> Cataloging -> Batch record
      modification -> Results
    - The same menu options should show after you confirm the operation
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9678846480721f94dfcab85240335423f3b24c30
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 10 10:08:46 2022 -0300

    Bug 32043: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a58ffcf17625ae067f379ab6c494d3e3363fe26e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Nov 4 17:24:48 2022 +0000

    Bug 32043: Circulation alerts can overlap other elements on smaller screens
    
    This patch makes a minor change to CSS controlling the appearance of the
    dialog which appears on the checkout page when a confirmation is
    required.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    Open a patron account for checkout, and submit the barcode of an item
    which will require confirmation before the operation can be completed.
    For example:
    
    - Item on hold for another patron
    - Item waiting for another patron
    - Item is checked out to another patron.
    
    The confirmation dialog should have a comfortable margin between it and
    the checkout form.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c164194f41ead0d3a9058d8a6951d0b98d1d97ef
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 4 15:00:54 2022 +0100

    Bug 31262: Curbside pickup - Remove day without slots
    
    We disable dates from the date picker that do not have slots defined in
    the configuration.
    
    Note that dates that have slots configured but none are available will
    still be displayed. To implement that we would need to calculate the
    availability for all the dates displayed on the widget (1 month) and
    that will (certainly) slow down considerabily the UI.
    
    Test plan:
    Configure curbside pickup for a given library. Define slots for several
    days of the week (not all).
    Schedule a pickup and confirm that only the days with slots defined are
    available in the date picker widget
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 789984177242755b0bd0c6f460c333937dba65dd
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 10 10:02:35 2022 -0300

    Bug 31378: DBIC schema
    
    Sponsored-by: a ByWater Solutions partner
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1fad7c1af0790a3ad054516a08c19c81f95f8299
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 8 14:48:21 2022 +0000

    Bug 31752: Move hidden input fields
    
    There didn't appear to be any reason to have the hidden form fields here
    nested in the ordered list and they were causing undesired styling
    issues.
    
    This patch simply moves them to the beggining of the fieldset.
    
    Test plan
    1) Confirm the 'HTML message' label now aligns correctly
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b949b3ec13e1513cff9d21b289eceec1b2dd130a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 10 09:33:06 2022 -0300

    Bug 32071: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f98adbfa3d611b50432dd5cc4715be8ac716c111
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 2 12:02:43 2022 +0000

    Bug 32071: Consistent classes for primary buttons: Catalog
    
    This patch makes changes the button markup in Catalog
    templates -- including the Cart -- so that all submit buttons and any
    buttons that should should be styled as primary buttons have the
    Bootstrap class "btn btn-primary."
    
    Edit: This revised patch changes the button styles on the search history
    page to make them more consistent with buttons in similar interfaces
    (see catalog search results).
    
    The patch also adds Bootstrap size classes to the item detail page and
    removes some global CSS which targeted buttons on that page.
    
    To test, apply the patch and view pages the catalog to confirm
    that everything looks correct. In most cases there are no visible
    changes.
    
    - Advanced search: The main search button at the top
    - Search results: The "Search within results" submit button
    - Bibliographic detail page: This change is to a hidden button. This
      section can be removed in a separate bug.
    - Bibliographic detail page -> Items: Various "Update" and "Set status"
      buttons. Note that the alignment of buttons has not changed in the
      redesign.
    - Item search: The main search button at the top
    - Search history (from the logged-in user's menu in the top right):
      "Delete" buttons in each section
       - Catalog -- Current and previous sessions
       - Authority -- Current and previous sessions
    - In the Cart popup window, click "Send." In the resulting popup, the
      "Send button.
    - The template basket/downloadcart.tt has been modified but I think the
      template might be unused.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0d636e29a737759c87692d7cfcd297eb57dbb7a6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 10 09:31:48 2022 -0300

    Bug 32101: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 848551a1de7f035c85f004e6707e37d052ba7f51
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 27 16:48:29 2022 +0000

    Bug 32101: Add padding to floating toolbars
    
    This patch makes a slight change to the CSS controling the appearance of
    floating toolbars. In some cases the lack of padding around the toolbar
    elements made it look awkward.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    View various pages to confirm that the toolbar looks correct when you
    scroll down and the toolbar "sticks" to the top of the browser viewport.
    For example:
    
    - Patrons -> Search results
    - Patrons -> Add/edit patron
    - Catalog -> Advanced search form
    - Administration -> Preferences
    - Authorities -> Add/edit authority
    - Cataloging -> Add/edit MARC record
    - Catalog -> Item search form
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f5efea51ebeae92ac252a58f1c01aa2cb670789e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 9 14:09:17 2022 +0000

    Bug 32148: Buttons must inherit Bootstrap size classes
    
    This patch removes global font and padding settings which were
    overriding the Bootstrap classes we use to change the size of Bootstrap
    buttons. The font and padding settings are moved to the CSS which covers
    button which are not styled as Bootstrap buttons.
    
    To test, apply the patch and view pages where buttons are styled with
    different Bootstrap size classes:
    
    - Circulation -> Check out:
      - The "Check out" button, the "Show checkouts" button, Renew buttons
        in the footer.
    - Patrons -> Patron details -> Edit buttons in each section.
    - Patrons home -> Buttons in sidebar filter
    - Catalog -> Bibliographic details -> Item details
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eac724b9fc0224e0caf4280fc2eed5d4a5281046
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 9 18:19:51 2022 +0000

    Bug 31928: Add page-section to callnumber browser value builder (cat)
    
    This patch adds a page-section div around the search results shown by
    the call number browser plugin in Cataloging.
    
    The patch also restructures the search form so that the layout is
    correct.
    
    To test you must have an item subfield linked to the call number browser
    plugin:
    
    - Go to MARC frameworks -> Default MARC framework -> MARC structure.
    - Locate the 952 tag and click Actions -> Edit subfields.
    - Open the "o" tab and in the last section, "Other options," choose
      "cn_browser.pl" for the plugin field.
    
    Open an item record for editing:
    
    - Go to Cataloging and search for a bibliographic record.
    - Click Actions -> Add/Edit items for one of the results.
    - In the item edit form, the  "o - Full call number" field should have a
      "..." link at the end.
    - Clicking it should trigger a popup window.
    - The search form at the top should be laid out correctly.
    - Perform a search which will return results.
    - The table of results should be contained within a white box.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 16d54581b275ba75cdc3fff9c821eaa40fc08a56
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 9 15:43:50 2022 +0000

    Bug 32146: Add page-section to course reserves
    
    This patch adds a "page-section" wrapping div to two Course Reserves
    templates.
    
    Note: This patch contains indentation changes.
    
    To test, apply the patch and go to Course Reserves.
    
     - The table of course reserves should appear in a white section.
     - View the details of a course: There should be a white section for the
       list of details at the top and another for the table of reserves.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1e7e457f75b3b467dc2a3f80e183308cbc037327
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 9 16:24:06 2022 +0000

    Bug 31828: Add page-section to list of open invoices on receive shipment page (acq)
    
    This patch adds a "page-section" class to the div wrapping the table
    of shipments on the "Receive shipment" page in Acquisitions.
    
    This patch also modifies the markup around additional fields so that an
    empty fieldset is not displayed when there are no additional fields to
    display.
    
    To test, apply the patch and go to Acquisitions.
    
    - Locate a vendor and view its details.
    - In the toolbar, click "Receive shipments."
    - On the receive page, there should be a section listing shipments and a
      section headed "Receive a new shipment."
    - If you have additional fields defined (in Administration -> Additional
      fields -> Invoices) there should be a third section showing those
      fields.
    - With no additional fields defined you should not see an empty
      fieldset.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 79aacd14374f37c7ee6fc50cd83c42ef56556a4f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 9 17:28:13 2022 +0000

    Bug 31827: Add page-section to list to log viewer
    
    This patch adds a "page-section" container div around the log viewer
    output.
    
    To test, apply the patch and go to Tools -> Logs.
    
    - Perform a log search which will return results.
    - The table of results should appear in a white box.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b62b810790fbe163d945aed2d438be8a78e7b5f7
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 9 17:12:02 2022 +0000

    Bug 31826: Add page-section to item form on order receive page (acq)
    
    This patch adds a "page-section" class to the container div around the
    items table on the order receive page in acquisitions.
    
    To test, apply the patch and go to Acquisitions.
    
    - Locate a vendor and few its details.
    - Click "Receive shipments."
    - Fill out the "Receive shipment" form if you have no existing
      shipments. Otherwise click on the invoice number link to get to the
      "Receive orders" page.
    - In the table of pending orders, click a "Receive" link.
    - On the "Receive items" page there should be three sections: Catalog
      details, Acquisitions details, and Items.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 50df37bfb8eaa2b36f9dba935943971e8cf82e77
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 9 16:42:54 2022 +0000

    Bug 31824: Add page-section to list of pending/received orders (acq)
    
    This patch adds a "page-section" class to the divs wrapping two
    sections on the "Receive orders" page in Acquisitions.
    
    To test, apply the patch and go to Acquisitions.
    
    - Locate a vendor and view its details.
    - In the toolbar, click "Receive shipments."
    - If you have existing shipments listed in the first section, click the
      invoice number link.
      - If not, fill out the "receive a new shipment" form and submit it.
    - On the "Receive orders" page there should be two sections: "Pending
      orders" and "Already received."
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit edf5f72f1b021b0d8557d29cec34d95a89b5b94b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 9 16:14:39 2022 +0000

    Bug 31823: Add page-section to uncertain prices page (acq)
    
    This patch adds a "page-section" wrapping div to the uncertain prices
    page in Acquisitions
    
    Note: This patch contains indentation changes.
    
    To test, apply the patch and go to Acquisitions.
    
    - Locate a vendor and view its details
    - In the left-hand sidebar, click "Uncertain prices."
    - The page should have two sections: Details about the vendor, and a
      list of orders with uncertain prices.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 823b362f51acfb990a9a95118f83b482d1b2c39a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 8 16:30:24 2022 +0000

    Bug 32005: Cleanup indenting
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0810fd81c2a351d41a4733bb260637d822494a87
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 8 16:18:46 2022 +0000

    Bug 32005: Remove stack unordered lists
    
    Not sure why, but we had two unordered list elements stacked on top of
    each other here instead of just one overall list.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2a3b3d3e5b3e9bdf4f8207f30a0b273c47cc5128
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Oct 27 21:33:51 2022 +0000

    Bug 27920: (QA follow-up) Improve alignment of new option on patron form
    
    Switches from ul to ol as used by other options which improves the
    alignment of the options.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 83079a6571ad1261bba501bff4f962f5be5579f3
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Oct 27 21:28:15 2022 +0000

    Bug 27920: (QA follow-up) Remove now obsolete JavaScript lines
    
    There JS lines were left over from the first suggested GUI
    using a checkbox.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a9e0bcff1641c983bee03531823e1c121a899d50
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Oct 19 11:05:38 2022 -0400

    Bug 27920: (QA follow-up) Fix POD in cli tool
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 41fa262a96a5cfff70561a572aafb2b9af1eadf9
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Oct 19 10:59:08 2022 -0400

    Bug 27920: (QA follow-up) Change radios to a single select pulldown
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1afc3b741b01415b006c035864a76d413da64fe1
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Aug 11 07:39:06 2022 -0400

    Bug 27920: (QA follow-up) Fix syntax error
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 46db96137dad9e82501c2143c6c4e4878e27ee0a
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Aug 11 07:38:03 2022 -0400

    Bug 27920: (QA follow-up) Update expiration date Checkbox should be enabled when overwriting existing patrons
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e4e453d5dfbcba3d8ecbeb1585fec5848280b8ba
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Aug 3 07:13:49 2022 -0400

    Bug 27920: Add ability to update patron expiration dates when importing patrons
    
    Some libraries need to recalculate a patron's expiration date any time they are updated via a patron import from file.
    
    Test Plan:
    1) Apply this patch
    2) prove t/db_dependent/Koha/Patrons/Import.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 883b57b0dd7762e617e39670fc1ad2e9b3045d86
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Oct 28 08:45:02 2022 +0000

    Bug 31896: (QA follow-up) Fix rollback
    
    Yes, it should be the last statement.
    Actually the preceding delete is unneeded.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0fb57fa56a98d814406d3bf66970bf0d5dca6f03
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Oct 28 08:43:28 2022 +0000

    Bug 31896: (QA follow-up) Fix modules
    
    Triggered by seeing Koha::Account. Copy and paste ;)
    But a bunch of other modules should (at least formally) be there.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2f6b597b089539986671cf5f6642f2d617819583
Author: Stefan Berndtsson <stefan.berndtsson@gmail.com>
Date:   Mon Oct 17 16:48:30 2022 +0200

    Bug 31896: New after_recall_action hook
    
    Hooks added:
    after_recall_action with new action add
    
    How to test:
    Run tests in t/db_dependent/Koha/Plugins/Recall_hooks.t
    
    Sponsored by: Gothenburg University Library
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT} Adding get_from_storage ;) For current consistency.
    See further bug 32107.
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b61df924bfe7d83cc15fa2a358e4a09d4d54df8d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 9 14:18:07 2022 -0300

    Bug 30250: DBRev 22.06.00.082
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 73865a6072091fdcf70610a7cb99c4a8a14479a7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 9 14:12:50 2022 -0300

    Bug 30250: Fix atomicupdate permissions
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 10e4aa2ee222d1fca07c0406eab412fd378739f1
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Sep 7 14:35:42 2022 +1200

    Bug 30250: (follow-up) Clarify syspref wording around importing
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b837f1356b0c25801bab09f95f1881c831cf4cd3
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Mar 22 21:26:35 2022 +0000

    Bug 30250: Use ApplyFrameworkDefaults when importing a record
    
    This patch adds the case of importing a record to the
    ApplyFrameworkDefaults options.
    
    To test:
    1. Update database
    2. Confirm the ApplyFrameworkDefaults system preference now has the
    'when importing a record via z39.50' option. Do not select it.
    3. Go to Cataloguing. Import a record from z39.50, or replace an
    existing record.
    4. Confirm framework defaults are not applied.
    5. Go back to the system preference and check the 'when importing a
    record via z39.50' option.
    6. Repeat step 3. This time framework defaults should be applied. Only
    fields that are empty in the imported record will be replaced by
    framework defaults.
    7. Repeat for authorities.
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d42de2c657b6432c3223291f663eac5fc25b8706
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Mar 9 01:13:03 2022 +0000

    Bug 30250: Add ApplyFrameworkDefaults system preference
    
    (cherry picked from commit 684a04deb6ec7e94ca60f5cb38811176fbb9c230)
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d42b5ff641397a4fbaeb601e2e00cd71e05e001
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Mar 9 01:13:32 2022 +0000

    Bug 30250: Use ApplyFrameworkDefaults when cataloguing
    
    This patch adds a system preference ApplyFrameworkDefaults to configure
    when to apply framework defaults - when cataloguing a new record, when
    editing a record as new (duplicating), or when changing the framework
    while editing an existing record. This applies to both bibliographic
    records and authority records.
    
    To test:
    1. Update database
    2. Go to Administration -> system preferences. Find the
    ApplyFrameworkDefaults system preference. Confirm "when cataloguing new
    records" is selected by default.
    3. Keep the system preference open in one tab, and open the staff client
    in another tab.
    4. Go to Administration -> bibliographic frameworks. Choose a framework,
    edit the subfields for a tag, and give a subfield a default value. For
    example, set 500$a for the BOOKS framework to have a default value of
    "TEST". This will be Framework A.
    5. Ensure you have another framework that does not have the same default
    value for a subfield as Framework A. This will be Framework B.
    6. Go to Cataloguing. Add a new record using Framework A. Confirm your
    subfield has the default value filled. Cancel and do not save the
    record.
    7. In your System preferences tab, uncheck the option "when cataloguing
    new records" and save. No options should now be selected.
    8. In our other tab, go to cataloguing, add a new record using Framework
    A. Confirm your subfield does NOT have the default value filled. Fill
    the required fields, including the subfield that should have a default
    value, and Save the record.
    9. In your system preferences tab, select all options and save.
    10. In your other tab, click Edit, then "Edit as new (duplicate)".
    Confirm your subfield has maintained the value from the source record.
    Cancel and do not save the record.
    11. Edit your original record and delete the value in your subfield that
    could be filled with a default value by the framework. Save the record
    with no value in the subfield.
    12. Click Edit, then "Edit as new (duplicate)". Confirm your subfield
    has the default value filled. Framework defaults will only apply to
    emplty fields. Save the record.
    13. Do a catalogue search and find a record that uses Framework B.
    14. If you need to, edit the record to make sure there is nothing in your
    subfield that should have a default value if this record were to use
    Framework A, and Save.
    15. Edit the record. Using the settings dropdown, change the framework
    to Framework A. Confirm your subfield has the default value filled.
    16. Repeat steps 4 to 12 with authority types and authority records.
    
    Sponsored-by: Education Services Australia SCIS
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fc655ca979b733208236981a8cd90430a13b30c5
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 8 15:51:15 2022 +0000

    Bug 31902: Next header row inside a thead
    
    This sets the proper markup for table headers in the holds page and thus
    grabs the proper header row underline.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 296c84e0e8ff97bd3bef298ebccc23808a67d6d9
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Nov 7 12:25:33 2022 +0000

    Bug 26635: (follow-up) Rename av_expand to strings
    
    This patch updates the `av_expand` occurences to `strings` to match the
    change of the return structure of `_strings`.
    
    We replace `+av_expand` in the headers with `+strings`, the expected
    object method name from `api_av_mapping` to `api_strings_mapping` and
    the internal hash key from `av_expand` to `strings`.
    
    Test plan
    1) Run the included unit tests.. all should still pass.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2a620f5f63990b4c6ec295d77485210f29019b94
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Nov 4 18:07:28 2022 +0000

    Bug 26635: (QA follow-up) Rename key _str to _strings
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 35f8011088cc5d3790b108b78ec378db56ced172
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Nov 3 11:14:20 2022 +0000

    Bug 26635: (QA follow-up) Remove test for x-koha-av-expand header
    
    This patch updates the last remaining test that mentioned the now defunkt
    x-koha-av-expand header.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7e3ab9fe083c31dabf9bce7ee4bae19817161db8
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 2 12:48:29 2022 -0300

    Bug 26635: Move expand syntax to x-koha-embed
    
    Instead of a global av-expand flag (through a header) this patch
    proposes to allow specifying +av_expand at the x-koha-embed header
    level. This allows a more fine-grained control on what objects get avs
    expanded. e.g.:
    
    GET /patrons/123
    x-koha-expand: +av_expand,checkouts.item+av_expand
    =>
    {
        "_str": {
            "city": { "str": "Córdoba", ... }
        },
        ...
        "checkouts": [
            {
                ...,
                "item": {
                    "_str": {
                        "not_for_loan_status": { "str": "Reference material", ... },
                        ...
                    },
                    ...
                }
            }
        ]
    }
    
    To test:
    1. Run:
       $ kshell
      k$ prove t/db_dependent/Koha/Object.t \
               t/Koha/REST/Plugin/Query.t \
               t/db_dependent/Koha/REST/Plugin/Objects.t
    => SUCCESS: Tests pass!
    2. Sign off :-D
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8dd24dab223375d49592f68b8c6ab01273e4e005
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 28 19:25:46 2022 -0300

    Bug 26635: Refined data structure and methods
    
    This patch makes the returned data structure be simpler:
    
    _str => {
        attribute_1 => {
            category => 'some_category_name',
            str      => 'description',
            type     => 'av'
        },
        ...
    }
    
    The description is sensible to context, so if public => 1 is passed,
    then lib_opac is passed, and lib is returned otherwise. Whenever we add
    language to the combo, we will add it to the implementation.
    
    Tests are adjusted accordingly, also to reflect the public => 1 use
    case.
    
    To test:
    1. Apply this patch
    2. Run:
       $ kshell
      k$ prove t/db_dependent/Koha/Object.t \
               t/db_dependent/Koha/REST/Plugin/Objects.t
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e4be0920543db3a8ded2890464db8792a129ac5b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 28 11:50:13 2022 -0300

    Bug 26635: AV expansion should ackowledge $params->{public}
    
    This patch simplifies the original implementation so it is more
    readable, removing extra loops and methods and just dealing with the
    coded values inline on the existing loops.
    
    It also adds non-public attributes removal from the original list, to
    address the changes introduced by bug 28948.
    
    To test:
    1. Apply this patch
    2. Run:
       $ kshell
      k$ prove t/db_dependent/Koha/Object.t \
               t/db_dependent/Koha/REST/Plugin/Objects.t
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 15ee7885a314fdf0c98f2a10f250b7b1e8c30a52
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Aug 31 10:03:46 2021 +0200

    Bug 26635: Add tests for av-expand => 0
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3f0c8cfc09870f299ccf693831933f8769b501a9
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Fri Oct 9 09:59:41 2020 -0300

    Bug 26635: Expand authorised values in to_api method
    
    This patch adds the posibility to expand authorised values when to_api
    method is called.
    
    The classes where authorised values should expand must implememnt the
    _fetch_authorised_values method, and must return a hash like the
    following
    
    {
      column_name => Koha::AuthorisedValue->unblessed
      ...
    }
    
    This patch will be used in bug 8179, so please test there.
    
    Sponsored-by: Virginia Polytechnic Institute and State University
    Signed-off-by: Andrew Fuerste-Henry <andrew@bywatersolutions.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3ce20d47b0b0e2b006bdbb0a7c1335806ce0500f
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Fri Oct 9 09:59:46 2020 -0300

    Bug 26635: Add tests
    
    Add tests in t/db_dependent/Koha/Object.t and
    t/db_dependent/Koha/REST/Plugin/Objects.t
    
    Sponsored-by: Virginia Polytechnic Institute and State University
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Andrew Fuerste-Henry <andrew@bywatersolutions.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b4e124b58a7e44f4944813e0d3eb39091c72f9c9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 9 13:58:13 2022 -0300

    Bug 32004: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dbb02ab2574f3cdb7fbc3d8c846616ecde5455f8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 9 13:48:26 2022 +0000

    Bug 32004: (follow-up) Increase padding between menu items
    
    I think the increased font size means we need slightly more padding
    between items for good legibility.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d17513869589038b9b66ecec283f56795850168e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 8 16:13:25 2022 +0000

    Bug 32004: Match font size for dropdowns to header
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit da01f3941c328b173753f8e54ccf45a43e6de6ea
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Nov 9 13:57:38 2022 +0000

    Bug 31414: (QA follow-up) Re-add required class
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d2a72dfea4fca112d0117b656477594a360fb2fa
Author: Isobel Graham <isobel.graham09@gmail.com>
Date:   Sun Nov 6 14:28:42 2022 +0000

    Bug 31414: Set focus to name in additional fields.
    
    Focus is set to name on additional fields on
    administation add fields.
    
    Test plan
    1. Go to administation and manange additional
    fields.
    2. If you then add field the focus should
    automatically go to the field name.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 55bc39cb3e7339fb1bf06e7bf2947e643942b1de
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 3 13:01:45 2022 +0000

    Bug 32088: Consistent classes for primary buttons: Patron card creator
    
    This patch makes changes the button markup in patron card creator
    templates so that all submit buttons and any buttons that should should
    be styled as primary buttons have the Bootstrap class "btn btn-primary."
    
    To test, apply the patch and view patron card creator pages to confirm
    that everything looks correct. In most cases there are no visible
    changes.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 89dcd61cad0adb50a64517d7cbeb7549c82b1c58
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 3 12:09:56 2022 +0000

    Bug 32087: Consistent classes for primary buttons: Course reserves
    
    This patch makes changes the button markup in course reserves templates
    so that all submit buttons and any buttons that should should be styled
    as primary buttons have the Bootstrap class "btn btn-primary."
    
    To test, apply the patch and view course reserves pages to confirm
    that everything looks correct. In most cases there are no visible
    changes.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a24f890403b261d2520941da65d1b557f9fb2754
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Nov 9 00:43:53 2022 +0000

    Bug 32138: Fix OIDC default mapping
    
    This patch fixes the OIDC default mapping to have the Koha fields on
    the left (ie key) and the OIDC standard claim fields on the right (ie value).
    
    1. Apply the patch
    2. Go to http://localhost:8081/cgi-bin/koha/admin/identity_providers.pl?op=add_form
    3. Choose "OIDC" for "Protocol"
    4. Click "Add default OIDC mapping"
    5. Note the following is displayed:
    {
      "email": "email",
      "firstname": "given_name",
      "surname": "family_name"
    }
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c53a114857fe90b173d3393f808bbec4198b6baf
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Nov 9 02:10:55 2022 +0000

    Bug 32141: Add missing fieldset legends and titlecase "matchpoint"
    
    This patch adds missing fieldset legends and titlecases "matchpoint",
    so that the "Edit" UI is consistent with the "New" UI for adding
    and modifying Identity Providers.
    
    Test plan:
    1) Apply patches
    2) Go to http://localhost:8081/cgi-bin/koha/admin/identity_providers.pl?op=add_form
    3) Fill out the fields to add an identity provider
    4) Click "Edit" next to the Identity Provider in the list
    5) In a new tab, go to
    http://localhost:8081/cgi-bin/koha/admin/identity_providers.pl?op=add_form
    6) Compare the two screens and note that all the labels, inputs, and help text
    are the same on both screens.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 98d5e21ad0cda3fbcbe189cfff4ef8f33cc02dea
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Nov 9 02:07:03 2022 +0000

    Bug 32141: Fix textbox formatting on edit IdP screen
    
    This patch makes the textbox have the same number of rows and columns
    on the "Edit" page as it does on the "New" page for Identity Providers.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9d3a54f6f64941f27216158685b51a719982379c
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Nov 9 01:59:28 2022 +0000

    Bug 32139: Set "update on login" correctly when creating new IdP
    
    This patches allows "Update on Login" to be set to "Yes" when
    creating a domain as part of a new Identity Provider.
    
    Test plan:
    1) Apply patch
    2) koha-plack --reload kohadev
    3) Go to http://localhost:8081/cgi-bin/koha/admin/identity_providers.pl
    4) Click "New identity provider"
    5) Fill in "Code" and "Description" with "test"
    6) Click "Add default OAuth configuration"
    7) Click "Add default OAUth mapping"
    8) Fill in "Domain" with "*"
    9) Change "Allow OPAC", "Allow staff", "Auto register", and "Update on login"
    to "Yes"
    10) Click "Submit"
    11) Click "Manage Domains" for your new Identity Provider
    12) Note that "Allow opac", "Allow staff", "Auto register", and "Update on login"
    are all set to "Yes"
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2c24682fa09202705fa7b0efe478982bd5e5c009
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Nov 9 13:23:39 2022 +0000

    Bug 32028: (follow-up) Fix headings levels
    
    This patch corrects the headings levels on cash_registers,
    patron-attr-types and restrictions admin pages.
    
    We also move the h2 headings inside the page-section div as appropriate.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6edcd586dfc5c741532c8cc701a7cf176343bfba
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 9 12:25:32 2022 -0300

    Bug 32030: Add missing sponsors
    
    Sponsored-by: ByWater Solutions
    Sponsored-by: BibLibre
    Sponsored-by: PTFS-Europe
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4bdba2bdb611b960a38804c60cbaac75a619dcb7
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Oct 25 14:29:35 2022 +0000

    Bug 31894: (QA follow-up) Move rollbacks to the end
    
    Obvious fix. This test removed my method records.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 116d17d7019867613fe12ab758afa644ba598864
Author: Stefan Berndtsson <stefan.berndtsson@gmail.com>
Date:   Mon Oct 17 16:47:06 2022 +0200

    Bug 31894: Extend after_hold_action hook
    
    Hook actions added:
    after_hold_action adds new actions transfer, waiting and processing
    
    How to test:
    Run tests in t/db_dependent/Koha/Plugins/Holds_hooks.t
    
    Sponsored by: Gothenburg University Library
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0106f3957d54d33cfbfdccdb0420f898e09084a1
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 3 12:29:59 2022 +0000

    Bug 31271: Preselect previous search index
    
    This patch passes the constructed value of the preselect to search_indexes.inc
    
    To test:
    1 - Perform an advanced search, making sure to select different indexes
    2 - Click 'Edit search' on results page
    3 - Confirm index selections are preselected
    4 - Enable  IntranetCatalogSearchPulldown
    5 - Do a search form the top bar using an index
    6 - Confirm 'Edit search' correctly popluates the chosen index
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2621f28376b0c82205f3faf5e06c1f788e6c9b2a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Sat Nov 5 16:02:55 2022 +0000

    Bug 32114: Add missing html_helpers.inc
    
    This patch makes a minor modification to the OPAC
    search results RSS template so that an error isn't
    triggered. The html_helpers include was missing.
    
    To test, apply the patch and perform a catalog
    search in the OPAC which will return results.
    
    At the end of the "Your search results" heading
    you should see an orange RSS icon. Clicking on it
    should take you to an RSS feed instead of an
    error page.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e4079d17f383950ed135e2c43cf8a302bb9cba78
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 3 15:20:34 2022 +0000

    Bug 31818: Enable table elements in keyboard shortcuts popover
    
    This patch updates the whitelist for the popover to ensrue our shortcuts table displays
    
    To test:
    1 - Open the advanced cataloging editor
    2 - Click 'Keyboard shortcuts'
    3 - Is empty, be sad
    4 - Apply patch
    5 - Reload
    6 - Click it again
    7 - Shortcuts!
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 74bef99916e5f1662f147d7115d759e44a0df7d4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 4 13:30:24 2022 +0100

    Bug 32111: Remove disabled from date input for curbside pickup
    
    The date input is always disabled and it's not possible to select or enter a date.
    
    git bisect blames "Bug 30718: Apply flatpickr changes to OPAC" and "altInput: true"
    
    I don't really know what's happening here, but it's impossible to
    interact with the date widget if the input is disabled when it's
    initialized.
    
    The solution I have here is to play with hide/show instead of disabled.
    
    Other suggestions welcome.
    
    Test plan:
    Schedule a curbside pickup from the OPAC and confirm that the date input
    is working as expected.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6fcd9ec2c3e12e4de8913fe36e32ae6221ee902a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Nov 9 12:47:34 2022 +0000

    Bug 32028: (follow-up) Improve smart rules formatting
    
    I correct the indenting here, so remember to diff ignoring whitespace ;)
    
    I remove some of the page-section divs introduced by the previous patch
    and instead replace the 'container' classes with the new 'page-section
    class on existing divs.
    
    This brings the page-sections more in line with elsewhere in the
    codebase.
    
    I also update the 'h3' headings to 'h2' as we were somehow skipping that
    heading level page wide and update the final 'h4' heading to 'h2' to
    match the other section headings appropriately.
    
    Finally, I break up the top section more, using bg-info for the top
    block of instructions.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 517726d69aa694f5682dadd5be792e5ff4ceece1
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Nov 4 14:52:23 2022 +0000

    Bug 32028: Add page-section to smart-rules.tt and fix markup errors
    
    To test:
    1. Apply patch
    2. Go to Adminstration > Circulation and fine rules
    3. Look at the page-section added and make sure each looks good.
    4. Use an HTML validator to check and make sure the HTML looks good.
    
    Note: There are indentation changes and some fixes to bad markup ( stray tags, etc ).
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=32082
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fb6f107b393901a5293d7ccdf518c6d60a34e3db
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Nov 3 17:46:15 2022 +0000

    Bug 32028: Add page-section to various admin pages
    
    This patch adds the page section to div to the following administration pages:
    
    admin/cash_registers.tt
    admin/cities.tt
    admin/credit_types.tt
    admin/debit_types.tt
    admin/patron-attr-types.tt
    admin/restrictions.tt
    plugins/plugins-home.tt
    
    To test go the following pages and make sure everything looks good:
    
    Administration > Cash registers. You must enable the sys pref 'UseCashRegisters'
    Administration > Cities and towns.
    Administration > Credit types
    Administration > Debit types
    Administration > Patron restrictions
    Adminstration > Patron attribute types
    Administration > Manage plugins
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=32082
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c01977158c40cea42e95c9beae752a68c5984e09
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 9 09:58:56 2022 -0300

    Bug 12758: (QA follow-up) Enhance POD
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9ec1fb4fd91cc64cf4207da1a964037076d3d512
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Sep 24 17:01:00 2014 +0200

    Bug 12758: Add new module call in Koha::XSLT::Base
    
    Reviving a report back from 2014. The workaround is now moved to a
    separate helper module from another patch.
    
    Test plan:
    Test OPACXSLTDetailsDisplay with an https reference.
    You may try:
    https://library.rijksmuseum.nl/opac-tmpl/bootstrap/en/xslt/zztest.xsl
    
    If you flush and restart, the opac detail pages will contain the
    text 'This is my MARC record.'.
    
    NOTE: If you point to an xslt file over https that contains includes or
    imports, you will still get the error: Failed to load external entity.
    To address that, we need to extend the _resolve_includes sub.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2d2e93e66ef73bc3424c85a6256c10026eca3a4c
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Jun 29 12:16:46 2022 +0000

    Bug 12758: Introduce Koha::XSLT::HTTPS
    
    This module now fetches a https stylesheet and returns it as a
    string to Base. (As a workaround waiting for a real solution
    in the underlying libraries.)
    
    The module can be extended to resolve includes but this requires
    parsing the xslt code.
    
    Test plan:
    [1] Run t/Koha_XSLT_HTTPS.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1ea56fb0924d6e45525ac07334b257ee39229d53
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Jun 29 11:23:34 2022 +0000

    Bug 12758: Make LWP::Protocol::https required module
    
    Moving from recommends to required in cpanfile.
    
    Reference info: Debian package liblwp-protocol-https-perl is
    available for Buster (6.07-2) and Bullseye (6.10-1).
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 18319c165417cc0a5f99165794195c8b4196a766
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 9 09:12:47 2022 +0100

    Bug 32030: Add missing additionalProperties to /erm/eholdings/local/titles/import
    
    This fixes xt/api.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 263acd5dac0b1a7f0757bf55234f4742faf1d080
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 9 09:04:33 2022 +0100

    Bug 32030: Fix Makefile.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b26427ef125d155c12b1a44764386e170b86eaea
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 9 09:00:47 2022 +0100

    Bug 32030: Fix perlcritic errors
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0232ee9cc496fcd45d8e22591f2bf202323ae325
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 9 08:58:19 2022 +0100

    Bug 32030: Remove maintenance file
    
    This script is actually not used.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 17096d4e00bd0a8fe2dc2ff287f506ec3e797be2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Nov 8 23:40:30 2022 -0300

    Bug 31378: (follow-up) Fix t/Koha/Auth/Permissions.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ce1ed7e02fe571ee10e3667fa38a258b4047c469
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Nov 8 21:18:21 2022 -0300

    Bug 32030: Add erm/ dir to Makefile.PL
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 862de519157ac2aaf5f405503e07a6b0dda62fdc
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Nov 8 21:04:10 2022 -0300

    Bug 32030: Wrong permissions on maintenance script
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9a9b374f6aa130c15bd2db5473fc1d1fe710a6fa
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Nov 8 21:02:18 2022 -0300

    Bug 31378: (follow-up) Wrong permissions on controller script file
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6732b52e797f95a07aa2d887622240dfc05b03e9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Nov 8 19:28:03 2022 -0300

    Bug 31378: (follow-up) MySQL 8 doens't allow default for longtext
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 509d11b66eadb44aa2dee8024cf0172f81d79684
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Nov 8 14:46:17 2022 -0300

    Bug 31378: DBRev 22.06.00.081
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a2f0d33107c1eb5b203de05e80c0aa29a57ac8b3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Nov 8 14:41:43 2022 -0300

    Bug 31378: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f57fb6df4f57f0afbdb86563c7d2d909689c4acf
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Nov 8 11:20:39 2022 -0300

    Bug 31378: Add domain settings to IdP add page
    
    This patch introduces a small form for an initial domain configuration
    to the 'New identity provider' page, to avoid confusion on testers about
    required settings for things to work.
    
    To test:
    1. Apply this patch
    2. Verify you are now offered a configuration section for domain
       settings. Fields like 'Default category' and 'Default library' are
       mandatory.
    3. Choosing some values makes them get stored on 'Submit'
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2dd0cec2e0ecdb17e2e8fd79a5fd34e05dd2e658
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 4 11:20:50 2022 -0300

    Bug 31378: (QA follow-up) Tidy tests
    
    This patch perltidys the tests added lately. It also removes some
    commented debugging lines.
    
    Note: There's an attempt to write tests on the full auth workflow that
    is commented out but left there on purpose for now.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2cf2fba3150ef29dddf79941b11f58a817a2fae0
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Nov 3 09:32:03 2022 -0300

    Bug 31378: (follow-up) catch startup error when missing Oauth provider table
    
    In theory, this shouldn't come up with a package install, but
    it could happen with other installations, so best to let it get to
    the web installer.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9e2cf4d358d8c10298ba0ae6c0e2fcff26fa3e36
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 3 09:25:53 2022 -0300

    Bug 31378: Use base URLs for redirect uri
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9c5f6e8c1772ecb1c2ec8c25d6d32010ce6c263b
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Wed Nov 2 21:44:32 2022 -0300

    Bug 31378: (follow-up) Fix QA concerns
    
    Several FIXME comments added on the report addressed here.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 016105cf8c6af85e5140b9c4f10bc5986a53f4b1
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Wed Oct 26 09:00:09 2022 -0300

    Bug 31378: Rename Auth Provider to Identity Provider and add Client.t tests
    
    Signed-off-by: Lukasz Koszyk <lukasz.koszyk@kit.edu>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c98d2f30091194540fec4d3069a8923fa112216a
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Fri Sep 23 15:02:48 2022 -0300

    Bug 31378: Add an administration interface for authentication sources
    
    Signed-off-by: Lukasz Koszyk <lukasz.koszyk@kit.edu>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f97ba16e44ddea2535792898f9e749b358fc30a4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Aug 30 10:33:14 2022 -0300

    Bug 31378: Add authentication provider endpoints
    
    This patch adds routes for handling authentication providers to the REST
    API.
    
    To test:
    1. Apply this patch
    2. Run:
       $ kshell
      k$ prove t/db_dependent/api/v1/auth_providers.t
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Lukasz Koszyk <lukasz.koszyk@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 58d66c35df0e26ed58b2ca446761490acf82bd25
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Aug 30 10:19:24 2022 -0300

    Bug 31378: Add 'parameter' parameter to Koha::Exceptions::MissingParameter
    
    Signed-off-by: Lukasz Koszyk <lukasz.koszyk@kit.edu>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f3a4e312e2aad5b3d95f09b8e23d806a745f91d4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Aug 30 10:16:44 2022 -0300

    Bug 31378: Add manage_authentication_providers permission
    
    Signed-off-by: Lukasz Koszyk <lukasz.koszyk@kit.edu>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8434183d402542964e1419cbbfec9b9e1aee2365
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Aug 24 12:21:08 2022 -0300

    Bug 31378: Add accessor methods for JSON attributes
    
    Signed-off-by: Lukasz Koszyk <lukasz.koszyk@kit.edu>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 66fdd41bdbdb636b36355eb21bc8afa4d1c9c1f4
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Tue Sep 27 09:20:49 2022 -0300

    Bug 31378: Add STAFF support for authentication providers
    
    Signed-off-by: Lukasz Koszyk <lukasz.koszyk@kit.edu>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1e12281aced367ad96dd30cf6cde9775ce60012f
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Tue Aug 23 12:00:47 2022 -0300

    Bug 31378: Add OPAC support for authentication providers
    
    Signed-off-by: Lukasz Koszyk <lukasz.koszyk@kit.edu>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 208b9b5ba7c36dd7bd5839c517f9525cf9da10bc
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Tue Aug 23 12:00:10 2022 -0300

    Bug 31378: Add the API-based auth mechanism to C4::Auth::check_api_auth
    
    Signed-off-by: Lukasz Koszyk <lukasz.koszyk@kit.edu>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e466ffdec19561c0f39f9f9c48461cb7540021ad
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Tue Aug 23 11:58:58 2022 -0300

    Bug 31378: Add auth providers template plugin
    
    Signed-off-by: Lukasz Koszyk <lukasz.koszyk@kit.edu>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5c8ab4f59083d56661af40c2f5f3a396f0913aa8
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Thu Aug 18 16:42:10 2022 -0300

    Bug 31378: Add API routes
    
    Signed-off-by: Lukasz Koszyk <lukasz.koszyk@kit.edu>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 73769c132adff6a4f24e49793acfecbe277e7ed7
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Thu Aug 18 16:41:03 2022 -0300

    Bug 31378: Add Auth mojo plugin
    
    Signed-off-by: Lukasz Koszyk <lukasz.koszyk@kit.edu>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 653cbeac52d174a327f8422368c6fb3a484027f7
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Thu Aug 18 16:29:19 2022 -0300

    Bug 31378: Add Koha::Auth::Client* modules
    
    Signed-off-by: Lukasz Koszyk <lukasz.koszyk@kit.edu>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5a84778724f461c7550464bf662d1b9a08a193fb
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Thu Aug 18 16:27:06 2022 -0300

    Bug 31378: Add Koha::Auth::Provider(s) class(es)
    
    Signed-off-by: Lukasz Koszyk <lukasz.koszyk@kit.edu>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 855ad02bf8a3c4c287ec357de7b2a8fff40303ef
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Aug 24 11:58:44 2022 -0300

    Bug 31378: Add Koha::Auth::Provider::Domain(s) class(es)
    
    Signed-off-by: Lukasz Koszyk <lukasz.koszyk@kit.edu>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c0316b48c05d0eed47132d1cb88186d5cfbb5858
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Thu Aug 18 16:09:54 2022 -0300

    Bug 31378: Add dependencies
    
    Signed-off-by: Lukasz Koszyk <lukasz.koszyk@kit.edu>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 16ea6b5677cb0278850ef9f8a44aded94cef4f6d
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Thu Aug 18 16:08:20 2022 -0300

    Bug 31378: DB changes
    
    Signed-off-by: Lukasz Koszyk <lukasz.koszyk@kit.edu>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2eff2765ec96152fc9353688fad7189992add184
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Nov 8 11:55:23 2022 -0300

    Bug 32030: (QA follow-up) Enable BasicAuth for ERM tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cf637f7d58d2e64d379143953d32d673258ff199
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Nov 8 10:02:22 2022 -0300

    Bug 30880: DBRev 22.06.00.080
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 89016d23e3c9e1d728c259539968ae7de647288a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 19 11:43:19 2022 +0000

    Bug 30880: (QA follow-up) Add exec flag
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 58a7613c6eee014767df8d34c4223321846dd5fb
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Jun 1 22:35:06 2022 +0000

    Bug 30880: Add 'branchonly' to OPACResultsUnavailableGroupingBy
    
    This patch adds a third option 'branch only' to the
    OPACResultsUnavailableGroupBy system preference. This option will group
    unavailable items by branch in the OPAC search results and NOT show
    individual callnumbers or substatuses.
    
    Note: This assumes OPACXSLTResultsDisplay is set to default.
    
    To test:
    1. Create a biblio record with 3 items with the following home branches:
    Item A: Branch A
    Item B: Branch A
    Item C: Branch B
    2. Check out Item A to yourself
    3. Edit Item B to have a lost status
    4. Go to Administration -> global system preferences. Search for
    OPACResultsUnavailableGroupingBy.
    5. By default, this preference will be set to 'branch'.
    6. Open the OPAC in another tab, and search for your record.
    7. Confirm the search results shows an Availability line with "Not
    available: Branch A: Checked out (1). Branch A: Lost (1)." i.e. showing
    both branch and substatus.
    8. In your staff client tab, set OPACResultsUnavailableGroupingBy to
    'substatus'.
    9. Go back to your OPAC tab and search for your record. Confirm the
    search results shows an Availability line with "Not available: Checked
    out (1). Lost (1)." i.e. showing substatus only.
    10. Apply patch, update database, restart services.
    11. In your staff client tab, refresh the page. Confirm the options for
    OPACResultsUnavailableGroupingBy have now changed to:
    - branch and substatus
    - substatus only
    - branch only
    12. Set OPACResultsUnavailableGroupingBy to 'branch only'.
    13. Go back to your OPAC tab and search for your record. Confirm the
    search results shows an Availability line with "Not available: Branch A
    (2)." i.e. showing branch only.
    14. Confirm the other two options still work as expected.
    
    Sponsored-by: Chartered Accountants Australia and New Zealand
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a76cc41099c6438c34c118e1da44164a20788531
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Nov 8 09:49:57 2022 -0300

    Bug 32030: Add dist dir to .gitignore
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 745edc3263eca2d069840e5072c837b8e7eb9eb4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Nov 8 09:41:13 2022 -0300

    Bug 32030: DBRev 22.06.00.079
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0204f2051872f82fdb8b701808c377d659b2676e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 8 08:33:38 2022 +0100

    Bug 32030: Create erm_user_roles after erm_licenses
    
    Or the update will fail with the following error
    
    ERROR - {UNKNOWN}: DBI Exception: DBD::mysql::db do failed: Can't create table `koha_kohadev`.`erm_user_roles` (errno: 150 "Foreign key constraint is incorrectly formed") at /kohadevbox/koha/C4/Installer.pm line 739
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8456a892fc5e1b167512f60eca06ff18bc2654d2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Nov 7 09:08:35 2022 +0100

    Bug 32030: Add lib for agreement's relationships values
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a5ea44ab992553937813d907bc93ebe83eb0f1c6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 4 17:29:07 2022 +0100

    Bug 32030: Add margin in agreement's filters block
    
    Quick & dirty fix, this is not very nice and can be improved
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4129da4d2695de0763aabdcbd6e6a7617d42976d
Author: Pedro Amorim <pjamorim91@gmail.com>
Date:   Fri Nov 4 10:19:44 2022 -0100

    Bug 32030: Move cypress to t - fix build_js/watch_js
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4f1f8bb4eaaaed2ef0768bfb796133f19f722b32
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 4 10:04:29 2022 +0100

    Bug 32030: Move cypress to t/
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 075544d3f56606e494fd6b52d0bb289a38361983
Author: Pedro Amorim <pjamorim91@gmail.com>
Date:   Wed Nov 2 09:51:47 2022 -0100

    Bug 32030: Fix for vue warning
    
    We were getting the following warning in the console:
    runtime-core.esm-bundler.js:5122 Feature flags VUE_OPTIONS_API, VUE_PROD_DEVTOOLS are not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3941f9528762e46b3cdb384d2835bf17e846dabf
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 4 09:56:16 2022 +0100

    Bug 32030: Fix date input length
    
    Caused by 31943.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8edf973e0788b8cf28d4aefbdc600181acc9e124
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 3 18:00:08 2022 +0100

    Bug 32030: (follow-up) Fix date handling - conflicts with bug 30718
    
    Fix "Filter by expired" returns 400 when no date provided
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 135e229e4b6c5c4aa21bd0dad3187cbf1e0fd20d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 1 16:59:59 2022 +0100

    Bug 32030: Replace this.setError with setError
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 96ea0648cbb3b4fb2f85cd911f8b92486c81a863
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 25 13:59:00 2022 +0200

    Bug 32030: DBIC Specific
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d391d1a422441107ba19a8b3b39ed48e2c0975b1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jun 28 10:10:23 2022 +0200

    Bug 32030: DBIC
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a24e5972171f4c14067942545a71f93ef93484b6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 1 08:57:00 2022 +0100

    Bug 32030: Add users to licenses - fix cypress tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0e36cbb9fb25ebe020f779f32bbb300a2e76150c
Author: Pedro Amorim <pjamorim91@gmail.com>
Date:   Fri Oct 28 22:16:34 2022 +0000

    Bug 32030: Add users to licenses - REST API Spec
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bd5350e11b50eb275d97b13cc65508fc69175a27
Author: Pedro Amorim <pjamorim91@gmail.com>
Date:   Fri Oct 28 22:15:40 2022 +0000

    Bug 32030: Add users to licenses - DB
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4d9ed4b897e8a95cc18bc2dbcc6ccd34bff211e9
Author: Pedro Amorim <pjamorim91@gmail.com>
Date:   Fri Oct 28 22:15:10 2022 +0000

    Bug 32030: Add users to licenses
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 03d23be15db8955df0518567493eb4762e7c8ee4
Author: Pedro Amorim <pjamorim91@gmail.com>
Date:   Fri Oct 28 22:14:16 2022 +0000

    Bug 32030: Add users to licenses - Preparation
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5fbdfa08cc0c5857477b6607ae3b3b16fcab2ab8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 1 08:29:23 2022 +0100

    Bug 32030: Add 'Loading' to EHoldingsLocalPackageAgreements
    
    To prevent the cypress test to fail random, and it also remove a blink
    code/value in the dropdown list, which is nicer for the end-user.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4803c4ff44522043d1eebdd0beb2fd379ae2c8d9
Author: Pedro Amorim <pjamorim91@gmail.com>
Date:   Fri Oct 28 19:08:21 2022 +0000

    Bug 32030: Cypress tests
    
    Agreements: 'add' and 'edit' tests for related documents, agreements, licenses;
    Licenses: 'add' and 'edit' tests for related documents;
    Packages: 'add' and 'edit' tests for related agreements;
    Titles: Regular tests + titles import + resource
    Added file.json to fixtures - empty file to test file upload
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a297b52d6f4ee917f2fc816ecb79db07aa7cb386
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 1 07:58:57 2022 +0100

    Bug 32030: Add missings IDs to a couple of fieldsets
    
    This is needed by the following cypress tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2c147d5cdde5e70043dc2076f4b90bbbff5256a7
Author: Pedro Amorim <pjamorim91@gmail.com>
Date:   Mon Oct 31 16:31:02 2022 -0100

    Bug 32030: Max document file size - server-side validation
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 74236413228fd648116ac0e08c581b3cd0fd7475
Author: Pedro Amorim <pjamorim91@gmail.com>
Date:   Mon Oct 31 16:30:10 2022 -0100

    Bug 32030: Max document file size - REST API spec
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ebeb7e61614d8cf348a83ae187d23281f7521129
Author: Pedro Amorim <pjamorim91@gmail.com>
Date:   Mon Oct 31 16:29:52 2022 -0100

    Bug 32030: Max document file size - client-side validation
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b563544200c7d11fa012a5cd5e81356ad9305a39
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 28 17:43:26 2022 +0200

    Bug 32030: Pretty vue files
    
    The plan was to rewrite the whole history, but it failed
    (see https://tree.taiga.io/project/joubu-koha-erm/us/129)
    
    yarn run prettier --trailing-comma es5 --semi false --arrow-parens avoid --write **/*.vue
    
    TODO - Add a QA check + git pre-commit hook
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4cb736fb7a72af2d217b89faa4a7c0591e35d761
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 28 08:26:40 2022 +0200

    Bug 32030: Remove unnecessary landing pages
    
    We had "home/main page" for eholdings, eholdings/local and
    eholdings/ebsco. They only contains a list for links we can find in the
    navigation menu on the left.
    
    This patch suggests to remove them, and adjust the style of the links to
    make them non-clickable.
    
    In the breadcrumb, on E-Resource managemente / eHoldings / Local / Titles
    => Holdings and Local will be black, without cursor on hover
    
    In the nav menu, eHoldings, EBSCO and Local are not clickable and black.
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dd350b4081d044bd116370c683aaa562e6bd70b3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 28 07:25:28 2022 +0200

    Bug 32030: Add better icons
    
    Agreements - fa fa-check-circle-o
    Licences - fa fa-gavel
    eholdings - fa fa-crosshairs
    EBSCO - fa fa-globe
    Local - fa fa-map-marker
    Packages - fa fa-archive
    Titles - fa fa-sort-alpha-asc
    
    E Resource Management - fa fa-fw fa-external-link-square
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b1a6165ddb1bfc166c18ba82d10831fd49ff8539
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 27 12:13:47 2022 +0200

    Bug 32030: Move 'Selected' checkbox to the right
    
    See https://tree.taiga.io/project/joubu-koha-erm/us/108 for details
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9a5066650ddb5064236de02a27015d011fe6df8d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 27 12:02:11 2022 +0200

    Bug 32030: Add descriptions to authorised value categories
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ca3f2fb24b581c28d78d9d8ab0c104ce2a9564cc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 26 15:04:40 2022 +0200

    Bug 32030: Remove warnings from tests
    
    Use of uninitialized value $provider in string eq
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 46a7434fbf85159f38d2d5508c90881af64add33
Author: Pedro Amorim <pjamorim91@gmail.com>
Date:   Tue Oct 25 18:55:35 2022 +0000

    Bug 32030: ERM - Add more API tests
    
    - Agreements: Added tests for search and filter_expired as well as some missing comments; fix user flags
    - Licenses: Updated tests to be on par with agreements; fix user flags
    - EHoldings Packages: New tests on par with others
    - EHoldings Titles: New tests on par with others plus import titles tests
    - EHoldings Resources: New tests - get and list
    - Documents: New tests; Only has GET endpoint; Tests to better mirror real documents lifecycle through a license;
    - Users: New tests
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 48cf2a24a23f5400a65846a8952f61643211acf4
Author: Pedro Amorim <pjamorim91@gmail.com>
Date:   Tue Oct 25 10:20:31 2022 +0000

    Bug 32030: ERM EHoldings Resources - Remove inexistent 'resources' embed from resources
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 91b1f921058e0d8046af07dab0c9a7cc44f98b3a
Author: Pedro Amorim <pjamorim91@gmail.com>
Date:   Tue Oct 25 10:19:02 2022 +0000

    Bug 32030: ERM Licenses - Make field 'type' not nullable, it isn't nullable in the DB schema or the vuejs frontend form.
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9bc4df19ed5082097401d9be6d694c1da4785d12
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 26 13:56:44 2022 +0200

    Bug 32030: I18N rewrite - Fix html comment for xgettext
    
    Aborted (core dumped)
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d6de5d4370524ad78dc4b2b208095639a133339
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 26 12:28:52 2022 +0200

    Bug 32030: I18N rewrite - replace $t with $__
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit de77f3a719b2d25cef0c504b6d9899128e38a697
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 26 11:58:01 2022 +0200

    Bug 32030: I18N rewrite
    
    The previous implementation was using vue-i18n inject localized strings
    into the Vue app. However it was using json files, and we needed
    additional overhead to convert from/to PO files.
    
    I've also tried vue3-gettext that use PO, but the overhead to work with
    our workflow was existent as well (see branch joubu/vue3-gettext).
    
    vue-i18n-extract was using for extracting, and a specific misc script
    (misc/translate_json.pl) was also used to generate the json file. They
    can be removed.
    
    Here we are simply reusing our existing workflow, and we will improve it
    (ie. make it more vue-ish) later if we need it.
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 07c75f1d24e25aaa1728e48e1c5628baf2a476b1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 26 13:56:25 2022 +0200

    Bug 32030: Fix EBSCO link for packages
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8aa9805a497d9603a027747345fd79206df426ae
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 26 08:39:48 2022 +0200

    Bug 32030: Fix Cypress tests - Mock GET agreements route
    
    Or the test will fail if agreements exist
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f00a268fd13bf92906b15025a955e448c650940b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 26 08:31:27 2022 +0200

    Bug 32030: Fix Cypress tests - documents is an attribute of license
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4691faebdeb0fa3a39a5e7015f1cc39857c8d6f9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 26 08:16:21 2022 +0200

    Bug 32030: Fix Cypress tests - follow-up Add document to license
    
    The id has been modified
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 183e3ea1d22739ed7183e9ac0e381563260e5179
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 26 08:17:48 2022 +0200

    Bug 32030: Fix Cypress tests - flatpickr date format
    
    ...but then we don't have access to the formatted date values, and need
    to compare the ISO dates.
    FIXME - Find a way to compare the displayed/formatted dates
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a5f919d5f916d653a274e48d7400694928df574b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 26 08:41:21 2022 +0200

    Bug 32030: Fix Cypress tests - flatpickr selector
    
    Since bug 30718 the input does no longer the displayed value. Let select
    the input that has the iso date values but...
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 39a47a924f8ee5e432f9eec44ff84cb496c237a7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 26 08:41:15 2022 +0200

    Bug 32030: Fix Cypress tests - Fix '.'
    
    In a previous revision of "Update I18N" we removed the '.' at the end of
    the error/warning/info messages
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 552656ddecc122c403280fb529ef7a94612b2bc1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 24 14:50:43 2022 +0200

    Bug 32030: Add table settings to the yml file
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 95d81d3704dfc5d5ca6aa070dec9e5052486ac3f
Author: Pedro Amorim <pjamorim91@gmail.com>
Date:   Sun Oct 23 20:09:18 2022 +0000

    Bug 32030: Remove inexistent 'agreements' embed from licenses - API spec
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5eb9a5bdf10bb33c03a8af57cdb0a639b7d89c5b
Author: Pedro Amorim <pjamorim91@gmail.com>
Date:   Sat Oct 22 13:21:09 2022 +0000

    Bug 32030: Rebase UI fix - Align documents listing with the rest of the data for ERM licenses and agreements
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f642d5f8590f008cb3a4261f985544698616e1e0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 21 17:12:46 2022 +0200

    Bug 32030: Use vue-select beta.3, beta.5 is buggy
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b59972aad5f7f944338bada3063808d42f50c020
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 21 14:25:39 2022 +0200

    Bug 32030: Rebase UI fix - Fix toolbar
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 60692230398433a593cd414a4539d5a66e62d839
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 21 14:21:59 2022 +0200

    Bug 32030: Rebase UI fix - Fix sidebar
    
    Might be improved a bit more
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2197809353165e0d76f76bca54d55d3c200953fa
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 21 14:11:16 2022 +0200

    Bug 32030: Rebase UI fix - Use page-section for better separation in forms
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 94e854a6926ed642020e03dfd7c668446eaa31df
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 21 12:52:24 2022 +0200

    Bug 32030: Rebase UI fix - Remove width for tables in 'show' views
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b2ae3399e5d4f65db0139d6a675f343443f99675
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 21 11:59:26 2022 +0200

    Bug 32030: Rebase UI fix - Remove padding-left
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 549fbe22cec8eaa46ce529199867908a9d6d7179
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 21 12:44:17 2022 +0200

    Bug 32030: Rebase UI fix - Header search
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8fa88f3e98e7b56fd456557634ca886bb25263b3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 21 12:00:22 2022 +0200

    Bug 32030: Fix date handling - conflicts with bug 30718
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e8222d60744d47170c0db30fbe2f4be6b922fc19
Author: Pedro Amorim <pjamorim91@gmail.com>
Date:   Wed Oct 19 11:32:09 2022 +0000

    Bug 32030: Add documents to license
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5234bc22f4c0d929914c9c0a5bfba90d1134c049
Author: Pedro Amorim <pjamorim91@gmail.com>
Date:   Wed Oct 19 11:31:05 2022 +0000

    Bug 32030: Add document to license - REST API spec
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e24961b09b02292e0f764ca4d5dc14038081d495
Author: Pedro Amorim <pjamorim91@gmail.com>
Date:   Wed Oct 19 11:29:43 2022 +0000

    Bug 32030: Add document to license - DB
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7a81358ad70b58ee4ac5ebda6e3aea63c8ce25db
Author: Pedro Amorim <pjamorim91@gmail.com>
Date:   Wed Oct 19 11:29:19 2022 +0000

    Bug 32030: Add document to license - Preparation step
    
    Typo in fieldset id
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b8e49f13efef8718cbf14e3a9f21440fb21cbe32
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 21 10:54:11 2022 +0200

    Bug 32030: Fix useRouter() is undefined
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f38f00530fef343af87108e7aab2acf0d6bc614e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 21 10:09:15 2022 +0200

    Bug 32030: Fix injectedRoute is undefined
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2db6bd8a0c610ebb7d0c8ec0d845cf67aee33027
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 20 17:29:07 2022 +0200

    Bug 32030: Fix pinia init
    
    Uncaught Error: [🍍]: getActivePinia was called with no active Pinia. Did you forget to install pinia? const pinia = createPinia() app.use(pinia) This will fail in production.
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f62e6ebbaa79ad049eeab6c981dcf1ac87cf6558
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 20 09:39:59 2022 +0200

    Bug 32030: Handle error 401 Unauthorized from EBSCO api - Display all messages
    
    In case there are more than one message.
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ff1fd6231484ed1d2988f7d3b618c6a50b6a87e7
Author: Pedro Amorim <pjamorim91@gmail.com>
Date:   Tue Oct 18 21:11:36 2022 +0000

    Bug 32030: Handle error 401 Unauthorized from EBSCO api
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit afe05d719b4ecd51fde4b1cb0d91d6c84abc01b7
Author: Pedro Amorim <pjamorim91@gmail.com>
Date:   Wed Oct 19 18:08:09 2022 +0000

    Bug 32030: Fix for app undefined error
    
    Solution found at: https://stackoverflow.com/a/65346965/3594153
    
    If we install new version of the packages, we got the following error in
    the console:
      Firefox - Uncaught TypeError: app is undefined
      Chrome - Cannot read properties of undefined (reading 'config')
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 19fc1bdef5f7b4442f4e2961749f899f334a8395
Author: Pedro Amorim <pjamorim91@gmail.com>
Date:   Tue Oct 18 19:18:19 2022 +0000

    Bug 32030: Add Notes field to erm_eholdings_packages table
    
    - Added API specs for new field 'notes' for erm_holdings_package;
    - Added new field 'notes' in DB schema for erm;
    - Added new field 'notes' in Vue.js frontend
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8f51a052ec2b60b36a671ee0925d4379a6b29a6f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 19 11:54:43 2022 +0200

    Bug 32030: Fix vue-select CSS import
    
    Fix the following error:
    
    Module not found: Error: Package path ./dist/vue-select.css?vue&type=style&index=0&lang=css is not exported from package /kohadevbox/koha/node_modules/vue-select (see exports field in /kohadevbox/koha/node_modules/vue-select/package.json)
     @ ./koha-tmpl/intranet-tmpl/prog/js/vue/main-erm.ts 11:20-59
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e5c4b5ec2fe2bc102371541fc6bcfafb1ffdcbfd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 11 11:45:45 2022 +0200

    Bug 32030: Add some cypress tests
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b1a3f666f283ea48845a78cd2dc0ea540f378a49
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 11 09:35:59 2022 +0200

    Bug 32030: Remove 'this' from template
    
    For consistency, it's not needed.
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 877b46ead6cfaaa72bdb432aaa446aab031104b8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 4 15:30:39 2022 +0200

    Bug 32030: Improve label for 'Add to/remove from holdings' buttons
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dc9c871e57e76df9f2a975e9d06c49cf54adccf0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 4 15:03:23 2022 +0200

    Bug 32030: Replace vendor with publisher name on the EBSCO title list view
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4358726df09198006f7eb34683ff3bde85d6554b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 4 15:00:43 2022 +0200

    Bug 32030: Do not embed resources.package for EBSCO's titles
    
    Why has this been added? At first glance we don't need it!
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6f32bf07dda0ad17964863fce0aad26b9b460acf
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 4 14:46:33 2022 +0200

    Bug 32030: Show on the title list view if titles are selected in KB
    
    Same as packages, but for titles here.
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 65cffa9619a319447dfee8ec3f73ab82978696cb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 3 16:25:16 2022 +0200

    Bug 32030: Add/remove packages to/from EBSCO's holdings
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 98ab918470472b5480ab91cc06ce0ac40a097762
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 3 14:19:03 2022 +0200

    Bug 32030: Add/remove resources to/from EBSCO's holdings
    
    Add an "Add to holdings" and "Remove from holdings" buttons on the
    resource page.
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b9a9b1255fd908ff18ee8acfc9395e3a9bf3f27a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 3 12:27:52 2022 +0200

    Bug 32030: Modal - Make warnings sticky at the top
    
    Warning messages are displayed when a form is not submited because
    something is wrong on the form.
    We should notify the user on the visible screen, not at the top of the
    form that could be hidden.
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3dffa3f5274ef4d41455248e23325b7cd8fe02c8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 23 17:49:19 2022 +0200

    Bug 32030: Update I18N
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b9096fe7dfbdf5a483608e5d1169184a6afbeb70
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 3 11:28:12 2022 +0200

    Bug 32030: Filter by expired agreements
    
    This patch adds a checkbox and flatpickr input to filter agreements by
    expiration date.
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6519b13f34f1dc57402ea195961bdc56f83ddf06
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 3 07:18:10 2022 +0200

    Bug 32030: DT - Prevent wrong row to be used
    
    We noticed on "Create eHolding titles from a list" that the wrong row
    could be used: api.row(index) does not return the rows ordered how they
    are on the screen.
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 930381ec64f0204bf31f9d4e3a7ee642c44378ea
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 25 12:00:26 2022 +0200

    Bug 32030: I18N - de-DE, es-ES fr-FR translation
    
    echo "{}" > koha-tmpl/intranet-tmpl/prog/js/vue/locales/de-DE.json
    echo "{}" > koha-tmpl/intranet-tmpl/prog/js/vue/locales/es-ES.json
    echo "{}" > koha-tmpl/intranet-tmpl/prog/js/vue/locales/fr-FR.json
    npx vue-i18n-extract --vueFiles 'koha-tmpl/intranet-tmpl/prog/js/vue/**/*.?(js|vue)' \
                         --exclude koha-tmpl/intranet-tmpl/prog/js/vue/dist/main.js \
                         --languageFiles 'koha-tmpl/intranet-tmpl/prog/js/vue/locales/*.json' \
                         --add --remove
    perl misc/translate_json.pl de-DE | sponge koha-tmpl/intranet-tmpl/prog/js/vue/locales/de-DE.json
    perl misc/translate_json.pl es-ES | sponge koha-tmpl/intranet-tmpl/prog/js/vue/locales/es-ES.json
    perl misc/translate_json.pl fr-FR | sponge koha-tmpl/intranet-tmpl/prog/js/vue/locales/fr-FR.json
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 94c67c439eb89b519a56198df122ee1f6b5ac93d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Aug 2 11:35:51 2022 +0200

    Bug 32030: Create eHolding titles from a list
    
    Add the ability to create new titles and attach them to a package.
    The MARC to KBART2 mapping is the following (based on
    https://github.com/adambuttrick/marc_to_kbart/blob/master/convert.py):
    
    publication_title = biblio.title
    print_identifier  = 020$a||020$z||022$a||022$y
    online_identifier = 020$a||020$z||022$a||022$y
    date_first_issue_online = 866$a (before '-')
    date_last_issue_online  = 866$a (after '-')
    num_first_vol_online    = 863$a (before '-')
    num_last_vol_online     = 863$a (after '-')
    num_first_issue_online  = ?
    num_last_issue_online   = ?
    title_url = 856$u
    first_author = biblio.first_author
    embargo_info = ?
    coverage_depth = title_url ? 'fulltext' : 'print'
    notes = $852$z
    publisher_name = 260$b
    publication_type = ?
    date_monograph_published_print = ?
    date_monograph_published_online = ?
    monograph_volume = ?
    monograph_edition = ?
    first_editor = ?
    parent_publication_title_id = ?
    preceeding_publication_title_id = ?
    access_type = ?
    
    Note that title is not created (and so the resource) if a title from
    this package already has a link to this bibliographic record.
    Is that correct, or should we create another resource?
    
    Should the import screen also have "start date" and "end date" to set for the
    resource?
    
    QA note: Ideally we would like to fetch the list from the REST API but the routes
    are not there yet.
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ca05262604c4a648605c9f47a4d144226f0d6a49
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Aug 2 16:09:04 2022 +0200

    Bug 32030: Increase font-weight for nav menu only
    
    Not the breadcrumb
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cd2884d907373aa5fd338da2c27cd365b5d4e51b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 28 17:26:46 2022 +0200

    Bug 32030: Improve form UI
    
    * Align inputs, textareas and selects
    * Use vue-select for dropdown lists
    
    Note that the only way I found to make the select required is to follow
    what is on their doc https://vue-select.org/guide/validation.html#required
    
    However we need our own vue-select-required component to avoid the
    repetition (the #search slot). I've tried (but failed) on
    https://gitlab.com/joubu/Koha/-/commits/erm-v-select-required
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fccf6acc043b0dd95b992762bdc8182a4d6eae74
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 28 10:30:55 2022 +0200

    Bug 32030: ERM - Add vendor to license
    
    ALTER TABLE erm_agreement_licenses DROP FOREIGN KEY erm_licenses_ibfk_1;
    ALTER TABLE erm_agreement_licenses DROP FOREIGN KEY erm_licenses_ibfk_2;
    ALTER TABLE erm_agreement_licenses ADD CONSTRAINT `erm_agreement_licenses_ibfk_1` FOREIGN KEY (`agreement_id`) REFERENCES `erm_agreements` (`agreement_id`) ON DELETE CASCADE ON UPDATE CASCADE;
    ALTER TABLE erm_agreement_licenses ADD CONSTRAINT `erm_agreement_licenses_ibfk_2` FOREIGN KEY (`license_id`) REFERENCES `erm_licenses` (`license_id`) ON DELETE CASCADE ON UPDATE CASCADE;
    
    ALTER TABLE erm_licenses ADD COLUMN vendor_id INT(11) DEFAULT NULL AFTER license_id;
    ALTER TABLE erm_licenses ADD CONSTRAINT `erm_licenses_ibfk_1` FOREIGN KEY (`vendor_id`) REFERENCES `aqbooksellers` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 646a1ede2beb8905ac134b56f7c50693e4d00c6c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 26 09:14:45 2022 +0200

    Bug 32030: Fix UTF8 issue
    
    GET /api/v1/erm/eholdings/ebsco/titles: unhandled exception (Mojo::Exception)<<Wide character in subroutine entry at /kohadevbox/koha/Koha/ERM/Providers/EBSCO.pm line 123
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6be1de94e0924c7cea4b207fc17c89fe36eb1214
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 25 12:00:09 2022 +0200

    Bug 32030: I18N - Load de-DE, es-ES, fr-FR strings
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit abd80f4c6a049d2421e6bbce0a8afd6f8ba7ffeb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 21 08:48:45 2022 +0200

    Bug 32030: Allow only one controlling license per agreement
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 64a838ce32f8ad6451729a4a7739d3353da8efcb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 20 12:01:05 2022 +0200

    Bug 32030: ERM - Agreement documents (FIXED)
    
    Document - don't send file_content when fetching a document
    
    apt install libmojolicious-plugin-renderfile-perl
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 21610ec5f4310834637a91384a9763d137a9d851
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 20 11:03:35 2022 +0200

    Bug 32030: Unique - DB
    
    alter table erm_agreement_licenses add unique key `erm_agreement_licenses_uniq` (`agreement_id`, `license_id`);
    alter table erm_eholdings_packages_agreements add unique key `erm_eholdings_packages_agreements_uniq` (`package_id`, `agreement_id`);
    alter table erm_eholdings_resources add UNIQUE KEY `erm_eholdings_resources_uniq` (`title_id`, `package_id`);
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 372516b37e3f1148065d580245c989891039f9a8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 3 07:41:06 2022 +0200

    Bug 32030: Unique - Prevent same relationships for agreements
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2950523e0822e3c0e4feff87de9729b1a90e05a1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 20 10:50:47 2022 +0200

    Bug 32030: Unique - Prevent same package for local titles
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 21f38a9f721a490c990e29719a96f8f4615e6837
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 20 10:44:55 2022 +0200

    Bug 32030: Unique - Prevent same agreement for ebsco packages
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aa5d06762c532536eec60f065b8dc22a845c2dc2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 20 10:31:53 2022 +0200

    Bug 32030: Unique - Prevent same agreement for local packages
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 74aed1992ecba20dd801254bafed6a6b6c6c703e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 14 16:09:40 2022 +0200

    Bug 32030: Unique - Prevent agreement to have the same license several times
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b8112bbe6f2cb7ad290768058e484da6346d524c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 14 15:16:51 2022 +0200

    Bug 32030: Add warning to Dialog
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ad466570c1a500b454a88f7f3b9a1a7b7f2e9972
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 14 11:52:49 2022 +0200

    Bug 32030: Simplify JS map for DT filters
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c036f58eebc52aa154298ee3944e67aaa214a399
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 14 10:58:58 2022 +0200

    Bug 32030: Use composable for DT destroy
    
    Use the Composition API to have this destroy code in a single place.
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f0eaee50733f760ed99b12ef610cf4c357026b9d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 14 09:27:04 2022 +0200

    Bug 32030: List local titles - replace 'vendor' with 'first contributors'
    
    First author + first editor
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 00daa3b0eae2281d31010e6488e7618a687e482a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 14 09:18:42 2022 +0200

    Bug 32030: Fix removal of agreement's vendor
    
    It was not possible to select the blank value and submit the form
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 67c3fba7aa07408789fc1046688fdf8bc6385401
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 14 09:09:19 2022 +0200

    Bug 32030: Make Vendor a hypertext field on Agreements page
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3fdc503ca78fd06d0c6dc3477812acc7799351b9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 13 17:29:10 2022 +0200

    Bug 32030: Display the list of packages on the 'show agreement' view
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a596acc28eb7c510f41b1909d3f04835586cb67c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 13 17:11:05 2022 +0200

    Bug 32030: Fix condition for DT destruction
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 715ce3806d404c3493a0dc0ab1dd00665ab62f0b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 13 15:36:23 2022 +0200

    Bug 32030: Redirect to the Koha home page when "Home" is clicked from the breadcrumb
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8452dcc92967f24f29c0ed63c53b1d95af279faa
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 7 09:49:42 2022 +0200

    Bug 32030: Restore destroy of datatables on beforeUnmount
    
    Otherwise the DT's headers where duplicated. We must destroy DT when we
    unmount the component.
    
    Edit: Hum maybe not!
    Looks like the bug still exists if `yarn build_js` is used instead of
    `yarn watch_js`!
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c9fcfcd598c2439bb6b96732d83fed0259856269
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 5 14:52:11 2022 +0200

    Bug 32030: Display the number of local packages and titles matching the search
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8a197e697f72c98b408df30df45edd473c3d7b0b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 5 10:56:06 2022 +0200

    Bug 32030: remove erm-menu.inc
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 521171bef1fa94b7051736e1808ff3ccdd2091fb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 5 10:06:41 2022 +0200

    Bug 32030: Disable the module if the pref is not enabled
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 111622efccfc5eb3e36c0d7efab656a66b64656e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 30 17:14:40 2022 +0200

    Bug 32030: Link external packages with agreements
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 62c8469e80c6ce4a420291e43ad93c2b300ff0b1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 30 15:08:37 2022 +0200

    Bug 32030: WIP - Modal [Does not work, can be dropped]
    
    We need to adjust our DataTable first
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7d6c8cd3f792ba0c10e1b209cece7b1b083cbce4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 30 14:49:08 2022 +0200

    Bug 32030: Display agreements on the package show view
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 46744e1e9b7b4af0e5e2d234ab9c446a01253e53
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 29 17:42:28 2022 +0200

    Bug 32030: Make the ERMProviders syspref multivaluated
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 07331dfe792c95197812259177858da235c8135a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jun 28 10:38:42 2022 +0200

    Bug 32030: Allow syspref to be read from the config
    
    Trick, because of bug 31042
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 87d64ea38436280aef7060e2be1d24f4b037978f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 24 14:32:02 2022 +0200

    Bug 32030: Some refactoring and improvements
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 769a1b34779f0bc92b979475325b78b754c18ae7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 20 14:57:01 2022 +0200

    Bug 32030: Proxy with HoldingsIQ
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 289fd08f5d1f1e5b862c54f2841e4f030552b774
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 20 11:51:31 2022 +0200

    Bug 32030: ERM - Add ERMProvider syspref
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bd8c251459fb750bf0ae70ef33151b417f4c6684
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 20 10:59:07 2022 +0200

    Bug 32030: Create a local bibliographic record for resources
    
    When a new resource is created we create a new bibliographic record in
    Koha that is linked at the title level
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b6c0c6c9d317a00e37526f1fd790e011bcca006c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 30 17:44:49 2022 +0200

    Bug 32030: Improve breadcrumb (again)
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 35ba0baa9c98b89bcdfa68f7d2732d67fc38051a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 30 15:07:54 2022 +0200

    Bug 32030: Add links to vendors
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 98e3f85788109448fe9d5a59a4a5d15420a72556
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 30 14:50:09 2022 +0200

    Bug 32030: Update I18N
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 487470b411e6027a7a0cb0b175b2fbd95c0b15e1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 30 14:46:25 2022 +0200

    Bug 32030: maintenance holdingsIQ
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 15761027f511cc45427f5d87188170d2be9b851f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 30 13:56:52 2022 +0200

    Bug 32030: Add title.external_id
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 42e1e1aac3ebc11d40527e876f741dfcb58470b5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 30 12:04:34 2022 +0200

    Bug 32030: Fix header searches
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cb85d7a00abcc6d2e804065432ed645a7d99c135
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 30 11:35:53 2022 +0200

    Bug 32030: (follow-up) Fix datatable.js order_by
    
    The previous change was not working, we need to define a render function
    to prevent a DT error.
    
    "Requested unknown parameter 'me.agreement_id,me.name' for row 0, column 0"
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a6a2535d1a1044b614c1ce973db106627c933764
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 19 13:43:00 2022 +0200

    Bug 32030: yarn.lock - Update to Node14
    
    Vue 3.2.34 required Node14
    npm install -g n
    sudo n 14
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 151f6f3f0c0b97b80f248395878426fb7d7ac33f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 30 10:34:00 2022 +0200

    Bug 32030: add maintenance script for HoldingsIQ
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 70f5e7913ca5974b403f369878e93593182897c3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 26 11:08:11 2022 +0200

    Bug 32030: Add a route to display a resource
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9a151c5113068d145c04145c798fe8764a17bead
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 26 09:50:54 2022 +0200

    Bug 32030: ERM - Add eHoldings home page
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 74be73121e29898ccdb40ef584a5b3039f17fed6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 26 08:57:29 2022 +0200

    Bug 32030: Update I18N
    
    Note that we are adding an extra space for id and counter, otherwise
    they got removed in favor of the "simple" string.
      { Agreement: Agreement }
    replaced
      { Agreement: { id: ..., counter: ... } }
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 34c9548d5dc69d0237a9300db82bd630c2091dd1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 26 08:27:26 2022 +0200

    Bug 32030: Rename Package|Resource|Title
    
    At this point we renamed eHoldings to Titles and eHoldings-package to
    Resource.
    
    Packages, resources and titles are now under the eholdings namespace.
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fcfc5e768b2fdf69dfd38b46fa30020a2c568695
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 25 16:50:41 2022 +0200

    Bug 32030: vue - display packages for title
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0c763b7dc433194c5aa525d8c96c72b13defb734
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 25 15:32:25 2022 +0200

    Bug 32030: Improve I18N
    
    * Remove ":" from the translation to prevent duplication string
    * Add a script to auto-translate the strings in English
    
    echo "{}" > koha-tmpl/intranet-tmpl/prog/js/vue/locales/en.json
    npx vue-i18n-extract --vueFiles 'koha-tmpl/intranet-tmpl/prog/js/vue/**/*.?(js|vue)' \
                         --exclude koha-tmpl/intranet-tmpl/prog/js/vue/dist/main.js \
                         --languageFiles 'koha-tmpl/intranet-tmpl/prog/js/vue/locales/*.json' \
                         --add --remove
    perl misc/translate_json.pl | sponge koha-tmpl/intranet-tmpl/prog/js/vue/locales/en.json
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b2c2803de20d88a7191bc8646b73cbd76fb3a45f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 25 14:16:18 2022 +0200

    Bug 32030: Add eholdings.vendor_id
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 69ad60d98579e13cadaf1f420b363d83373beb3e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 25 14:15:32 2022 +0200

    Bug 32030: link eholding and package
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7040d7aadd6653fdad5c25ed7e7d3c278b8c7381
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 25 13:41:21 2022 +0200

    Bug 32030: Add eholdings.vendor_id
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bdee83ef937262cfd504edb643f9b32bbcf8ad41
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 25 13:33:35 2022 +0200

    Bug 32030: Link eHolding with packages
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 88b738828b51ae0b084f1983afcd63e3646523de
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 24 12:45:11 2022 +0200

    Bug 32030: eHoldings - Vue
    
     Please enter the commit message for your changes. Lines starting
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c71098457ebfb63b717ab77f199542e33ed3e677
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 24 11:15:16 2022 +0200

    Bug 32030: eHoldings - Koha classes
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit df6ee0f3e6a0bdeb8356ebacc4e7c3afb51a544e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 24 11:14:37 2022 +0200

    Bug 32030: eHolding - API specs
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3b643221697b26c7e638675ff42ab176a7daf8bc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 23 11:47:46 2022 +0200

    Bug 32030: ERM - Update I18N
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8df00b3634a8b702c4a890a9aad1f2c4c30e95ea
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 23 14:29:20 2022 +0200

    Bug 32030: Link agreements to a package
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 52779e4347aaf6481bd318fd80e5ce1ec6d6ffef
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 23 11:31:30 2022 +0200

    Bug 32030: Sort on first column
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 802e9d21d45dcd1c709c0c8ce9ed91b33db59cae
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 23 11:29:29 2022 +0200

    Bug 32030: Fix datatable.js order_by
    
    Getting Uncaught (in promise) TypeError: order_by.split is not a function
    Because data is an array: "data": ["me.package_id", "me.name"],
    
    If we modify it with "data": "me.package_id:me.name",
    (what we are using in other places) we are getting the following warning
    when the table is init:
    "Requested unknown parameter 'me.package_id:me.name' for row 0, column 0. For more information about this error"
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8e0f5fb3fe43b097a003ad54235a46d0987d4a8b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 23 11:19:09 2022 +0200

    Bug 32030: Fix superfluous escapre_str call
    
    '<' was displayed as '&lt;'
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aead1dd59818080c354f205b3b152b670e71a7ee
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri May 20 12:51:37 2022 +0200

    Bug 32030: ERM - Packages - Vue
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1ebe3828956d6002cc6b8a36b86e3b589ba285a8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri May 20 12:11:05 2022 +0200

    Bug 32030: rest api for vendor.external_id
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d9ebb06539dbbd07c34ca78fbf37add62e21818d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri May 20 11:27:25 2022 +0200

    Bug 32030: ERM - Package - Koha classes
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 35dc25897089a6d8633068241cd8b99cf4c7243b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri May 20 11:23:51 2022 +0200

    Bug 32030: ERM - packages - REST API specs
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f45f743ac0d44dd98b82a20d406b3c18631a900b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri May 20 11:08:49 2022 +0200

    Bug 32030: ERM - eHoldings - DB
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 556a3962b06b79fb5d77cc91ff656d8f4d5fd2c1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 19 11:08:09 2022 +0200

    Bug 32030: ERM - I18N
    
    Make the string translatable
    
    To update the json files:
    npx vue-i18n-extract --vueFiles 'koha-tmpl/intranet-tmpl/prog/js/vue/**/*.?(js|vue)' --exclude koha-tmpl/intranet-tmpl/prog/js/vue/dist/main.js --languageFiles 'koha-tmpl/intranet-tmpl/prog/js/vue/locales/*.json' --add --remove
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c6e7fa106dc5c69838d075fd92b164ce6f8a5d34
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 19 10:26:24 2022 +0200

    Bug 32030: Move get_lib_from_av to AVStore
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4b4612599440eb3e5d443441dc680f2c89b44d42
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 17 16:47:26 2022 +0200

    Bug 32030: Use 'E-Resource management' instead of 'Electronic resources management'
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1f8b2561b1c1f4deb0f28f24d0ba5e9a5070c45c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 17 16:43:20 2022 +0200

    Bug 32030: ERM - Add 'edit' and 'delete' shortcuts on the 'show' view
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 94ef7c6865ad7b69c91f308894f7eb653bfa1638
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 16 18:35:20 2022 +0200

    Bug 32030: ERM - Documents - FIXME
    
    This needs to be continued...
    * show view
    * download the documents
    * don't embed the document content
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c03c616bc2d473f2897fcaa551fa6d8c43155a80
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 16 18:30:56 2022 +0200

    Bug 32030: ERM - Agreement documents - REST API
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c29f0ec1fe9ef4f72d1ceee917f27c26220ef262
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 16 18:15:53 2022 +0200

    Bug 32030: ERM - Agreement documents - DB
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 711ee740137382000b4bdbde71bf41e1b15d7db9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 16 18:04:00 2022 +0200

    Bug 32030: Add link to license from agreement show view
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 335feef4232d620983c20a32481e6981b645b08d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 16 17:48:19 2022 +0200

    Bug 32030: Refetch agreement when linking to the same component - beforeRouteUpdate
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8044314bc4ad31cc50b629ef2b7b3d774fa250e4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 16 17:11:50 2022 +0200

    Bug 32030: Remove 'add' buttons if no licenses or no other agreements
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 852d5d51320ad35eba3a9a31d70a9ce4146572ad
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 12 20:01:02 2022 +0200

    Bug 32030: ERM - related agreement - Vue
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0e4afcc28e11642bf83d1729935939ddb35799ca
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 12 18:37:17 2022 +0200

    Bug 32030: ERM - related agreements - Koha classes
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0827e10c39e29e1483941eac5e28ef641052dbe7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 12 18:27:20 2022 +0200

    Bug 32030: ERM - related agreement - REST API
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ce7f24346bdcb14c579b4ac6273b5213b373d28f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 12 18:23:27 2022 +0200

    Bug 32030: ERM - related agreement koha classes
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 54b95355fa5e30306f7c9116dcdbe08512c10787
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 12 18:05:24 2022 +0200

    Bug 32030: ERM - related agreements - DB
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 72b73e0a5b34aa5f4e847f84f45c1cffd6c0b1da
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 11 17:11:50 2022 +0200

    Bug 32030: Fix tests
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 08ce593bd95d00a40ca15f0d1bdcc298bde8b9e5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 11 15:24:20 2022 +0200

    Bug 32030: Use fetch.js, improve messages handling, remove top level modules
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0cdaba2dad4cd684e0b474f97542c24bdbadb6e7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 11 11:07:43 2022 +0200

    Bug 32030: Add 'Loading...' until the data is fetched
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7a1b35c9d00712a303f4b0f78cd34f3c5397f97e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 11 09:57:28 2022 +0200

    Bug 32030: Add Apache RewriteRule
    
    This is going to be awesome!
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8069a89d029eedadafa9c60d2b9f0311e045c9f2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 10 15:59:32 2022 +0200

    Bug 32030: Use router for current view and object_id
    
    And improve breadcrumb
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ae69fca6a3516e2b4346061a408bc9ccf27342d6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri May 6 11:20:55 2022 +0200

    Bug 32030: license DB
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5537c8131122aaf0d7a9de3191d6a19585b693bd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 5 14:59:49 2022 +0200

    Bug 32030: Store current_view and messages
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 00878252a6b86375865a08a5b6306bddc5ed563b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 5 12:10:19 2022 +0200

    Bug 32030: use Pinia for AVs
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a95b659e6845d09ba2fcf595bc0a9ecd5393fd0e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 5 10:13:56 2022 +0200

    Bug 32030: Use Pinia for vendors 🍍
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3754cabab2a52a29975bc74a4e0183f329df5fe1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 4 16:56:59 2022 +0200

    Bug 32030: more fixes
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ccf18550b0cd8b5caaa9e2be6de569c6eebb1411
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 4 16:22:03 2022 +0200

    Bug 32030: 30063 follow-up
    
    In case one option is "0"
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ff2bf0d5a350336b6c11ba149e62e1becdd329d0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 4 16:13:14 2022 +0200

    Bug 32030: ERM - link licenses to an agreement
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ab5d7b5a6313e8ddb7f16f49b2318e7743808491
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 3 18:30:38 2022 +0200

    Bug 32030: ERM - Licenses
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8d573797a90de441a719b3867a61bb4500ea0316
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 3 18:29:49 2022 +0200

    Bug 32030: add breadcrumb
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 36cd32d14cd2f03cb8043a5412456bfd8ce6d41e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 3 15:03:18 2022 +0200

    Bug 32030: ERM - License - DB
    
    fix atomic
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2adaddeea4321ed4c7e7a887dcbc0db4555b1e25
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 3 15:55:22 2022 +0200

    Bug 32030: ERM - Refactoring
    
    We want the whole erm.pl to be a Vue app \o/
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 28e6c5890abf0d4b245eaab2096d677f6e3c7410
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 3 14:17:23 2022 +0200

    Bug 32030: Remove anchor from cancel links
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 15d94d07de2a80c02996df124a1118b8b87afe33
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 3 13:56:55 2022 +0200

    Bug 32030: ERM - Add a "show agreement" view
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 52ef336fd0e11a79e20b070e49d70ffe74b69088
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 3 10:10:06 2022 +0200

    Bug 32030: Make 'Is perpetual' filter a dropdown list
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 47848faa6d0b3a7e7bd6fcc1e15cdadc7433b615
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 3 08:39:09 2022 +0200

    Bug 32030: Add table settings
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f0fc4af561b20bd74d975359b18c14166132c8d1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 3 08:23:03 2022 +0200

    Bug 32030: Disable and blank "Closure reason" if status is not "closed"
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 587a44dbe84ad037180ceb32e5c0213db5d2a1f3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 3 08:15:47 2022 +0200

    Bug 32030: Add ERM to the 'More' menu in the header
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ac861016da9d8b169ece2074645d84b49609167e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 3 08:07:45 2022 +0200

    Bug 32030: Extend Description's textarea to rows=10, cols=50
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 01acc744b2dfc06a435dbe81a64f96558a30c5e1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 3 07:57:46 2022 +0200

    Bug 32030: Merge the agreement and ID columns
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0a3ede141da93eebeeea8678961c5fd1f689bf8e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 30 11:21:04 2022 +0200

    Bug 32030: ERM - Fix Header issue
    
    Object { message: "Expected application/json - got text/plain;charset=UTF-8.", path: "/body" }
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d8ff532551abbe231481852ef026bc8244ab18eb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 30 11:20:49 2022 +0200

    Bug 32030: ERM - FIX swagger specs for bug 30194
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d61bd0c9476aae6d0dfc906d6795587c30d7134f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 24 15:53:40 2022 +0100

    Bug 32030: ERM - Add select to column filters
    
    See also "Bug 30063: Be more flexible for filters"
    
    This is ugly, we must improve that.
    I would want to prevent 1 fetch per column however.
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0ff6c678cdbfc81ac170898e462424e847efdcf0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 3 10:09:29 2022 +0200

    Bug 32030: ERM - Vue - Datatables fix (follow-up 3)
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 45360cd69602a26716b4fa2bacf486542ad97181
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 3 09:39:06 2022 +0200

    Bug 32030: ERM - Vue - Datatables fix (follow-up 2)
    
    The column visibility broke the tr filters
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 97494015cd850e20f69870f31bbe9661a04e00cf
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 23 13:09:10 2022 +0100

    Bug 32030: ERM - Vue - Datatables fix (follow-up)
    
    Do not sort when the filter th is cliqued
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 539866d1924b4c0fc492b4fd515fd3b307be4666
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 23 12:30:32 2022 +0100

    Bug 32030: ERM - Correctly style "Edit" and "Delete"
    
    And add a whitespace between them.
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b0c6ca0e2b5a66f7cc01394f201e7851bcdb0cf2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 15 12:16:45 2022 +0100

    Bug 32030: ERM - Add "integration" tests using Cypress
    
    We are mocking the REST API routes responses here, we could do better,
    but it's a nice first step.
    
    To run the tests:
    From the host (ie. *not* inside ktd): `yarn run cypress open`
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 48c1c031270942e1948274af6d982f9dae67680e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 23 11:26:01 2022 +0100

    Bug 32030: ERM - Switch 'description' and 'license info' to textarea
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8c32f186d5a62e742621c35cfacff5b22bb42b71
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 15 07:46:39 2022 +0100

    Bug 32030: ERM - Remove BootstrapVue3
    
    We are lacking behind, Koha is using Bootstrap 3.5 and BootstrapVue3 is
    using Bootstrap 5. It's a shame, it would be much easier to use
    BootstrapVue!
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5c06b56f221dde57302b023c7a5fa5ca9c77dc7d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 9 14:35:12 2022 +0100

    Bug 32030: ERM - prevent TS2307: Cannot find module
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e5042cc5c1839e5a5a8168336ad1e2705133ffba
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 16 16:49:00 2022 +0100

    Bug 32030: ERM - Vue version
    
    First, `yarn install`.
    Then use `yarn build_js` or `yarn watch_js` to regenerate the dist/main.js file
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1d9a6a8969de9d1e81a1b1bb1ce6a441138d87b0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 8 16:20:06 2022 +0100

    Bug 32030: ERM - Vue - Datatables fix
    
    Same as from bug 30225 and bug 30160
    This really needs to be on its own bug...
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3bf57d92a10546929303aacbed2e13630d88693a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 16 16:49:40 2022 +0100

    Bug 32030: ERM - REST API - GET POST PUT DELETE specs
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 98266bf125a6c0bb2c9bfa25c2f51b19a0be2df5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 16 16:01:58 2022 +0100

    Bug 32030: ERM - Add tests for periods and users
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b8e77881678b840ae1b145deecf72b09a6a29a7b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 8 12:03:14 2022 +0100

    Bug 32030: ERM - Users
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b5465a2b883ed66eac82cec8fa7ada585680b4e5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Mar 7 17:48:04 2022 +0100

    Bug 32030: ERM - Users - DB table erm_agreement_users
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e1224f9b9b10ba19049ffd765e77d860116efba8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 8 12:10:30 2022 +0100

    Bug 32030: rename filter_by_have_subpermission with filter_by_have_permission
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 70938a6f11a938c7048ec93c45cc42796c18ea49
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Mar 7 16:50:16 2022 +0100

    Bug 32030: ERM - Periods
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6f6fcdfdf6677e329b2d9c0d3fb1ed018e5d0a7a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Mar 7 14:31:54 2022 +0100

    Bug 32030: ERM - Periods - DB table erm_agreement_periods
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d3909882c9022675ad582a890302ef0ab93d7387
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 24 16:51:08 2022 +0100

    Bug 32030: ERM - CRUD operations for agreements [old style]
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 20bf65e94673c7e0520ab96d3a7d4f4f205656e5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 24 16:52:30 2022 +0100

    Bug 32030: ERM - Koha::REST::V1::ERM::Agreements
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9cef83726c839c1b508037b5ca7c8dd4bbaf3894
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 24 16:52:22 2022 +0100

    Bug 32030: ERM - Koha::ERM::Agreement[s] objects
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8f82195af247b4dc810d4b867ff07ff14a22f064
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 24 16:51:28 2022 +0100

    Bug 32030: ERM - GET /erm/agreements spec files
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7e0009e96a152603c79f42b4067c3ec5a20a00d4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 24 14:21:33 2022 +0100

    Bug 32030: fix test builder for boolean
    
    assume that tinyint are boolean (not really true but shouldn't hurt)
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2c9c10be8d5789bd8c8ac42eae42edd8c98a36f1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 24 13:39:03 2022 +0100

    Bug 32030: ERM - New permission UI
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8c33eac0a8c1d19dee1547c628f608c7d459b9af
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 23 12:32:09 2022 +0100

    Bug 32030: ERM - Home view
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d808c54daad2fc9ff02e9bc86b02d14722799ba8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 23 12:27:27 2022 +0100

    Bug 32030: ERM - DB
    
    Syspref 'ERMModule'
    Permission 'erm'
    Table 'erm_agreements'
    3 new av categories:
      * ERM_AGREEMENT_STATUS
      * ERM_AGREEMENT_CLOSURE_REASON
      * ERM_AGREEMENT_RENEWAL_PRIORITY
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d60b72bcc0d37146ad346ca3bbbabab807a4601
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Nov 7 13:54:58 2022 +0000

    Bug 32122: Correct permissions check on item circulation alerts
    
    This patch changes the check from 'item_circ_alerts' to 'manage_item_circ_alerts'
    
    To test:
    1 - Give an account catalogue and manage_item_circ_alerts permissions
    2 - Log in to staff client iwht this account
    3 - Browse to Admin->Item circulation alerts
    4 - Error, you do not have permission to view this page
    5 - Apply patch
    6 - Restart all
    7 - Browse to page agian, success!
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ee7234640b04806dd949f40e2a786c1359198837
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Oct 28 07:46:43 2022 +0000

    Bug 31895: (QA follow-up) Rollback change, add comment
    
    Rollback should really be the last statement.
    I am leaving get_from_storage here, but add a comment that it seems
    unneeded at this moment. The Koha::Account::Offset->new and
    C4::Stats::UpdateStats wont change the line.. But since the distance
    in code is becoming a bit larger, I wont complain.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 68f7ea8cdf0d9a3372ba71d090c530c2bff3c061
Author: Stefan Berndtsson <stefan.berndtsson@gmail.com>
Date:   Mon Oct 17 16:46:24 2022 +0200

    Bug 31895: New after_account_action hook
    
    Hooks added:
    after_account_action with new action add_credit
    
    How to test:
    Run tests in t/db_dependent/Koha/Plugins/Account_hooks.t
    
    Sponsored by: Gothenburg University Library
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e49e7d483a3020ca6e55ee06d5972a9d14ff187f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Nov 7 12:38:33 2022 +0000

    Bug 32119: (bug 31422 follow-up) Fix add guarantee
    
    To test:
    1 - go to a patron detail view, click "add guarantee"
    2 - Confirm form loads
    3 - Confirm categories lsited are eligible to have a guarantor
    4 - Fill out required fields and confirm patron saved correctly
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 13efec8a2634bc74831504c2fd7b9423a80e6b86
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Mon Oct 24 20:47:41 2022 -1000

    Bug 31967: Search terms retained in header search when only one result
    
    Bug 26247 added a system preference to manage the Retaining of search terms in header search.
    But this does not work if there is only one match and you go directly to details page.
    
    Test plan :
    1) Set system preference RetainCatalogSearchTerms to "Don't retain"
    2) Perform a search leading to a single result.
       For example in KTD the ISBN 1932100083
    => Without patch search bar is populated with search terms
    => With patch search bar is not populated with search terms
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 499de130067063e2c33339be58fffee1dce17297
Author: Philippe Blouin <blou@inlibro.com>
Date:   Tue Oct 25 14:55:52 2022 -0400

    Bug 32110: Fixup to db_rev for non-english, multilingual Koha
    
    Without this patch, the update process duplicates all the news and
    content entries when they were non-english to start with.
    
    This patch keeps the same process, but new "default" "parent" entries are empty so there'
    no duplication in the OPAC display, while still being editable/deletable
    in the intranet.
    
    We came through that through many iterations.  This was the least
    invasive while still providing satisfying results.
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cf5e73033cdd7c41478320b4b213efd94cae626f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Nov 7 08:29:15 2022 -0300

    Bug 31889: (follow-up) Add test for explicit warning
    
    On bug 29697, an explicit call to 'warn' was added, but no tests were
    added for that behavior.
    
    This patch adds that.
    
    To test:
    
    1. Run:
       $ kshell
      k$ prove t/db_dependent/Koha/Biblio/Metadata.t
    => FAIL: There's a warn, no tests for it :-(
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: A new test was added, no more warns printed
    4. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b1f3042922a21a90eaf504df7a0c5c03fa33845b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Nov 7 09:42:21 2022 +0000

    Bug 31889: (follow-up) Correct item order
    
    MARC::Record::insert_fields_ordered reverses the order of fields
    with the same tag. So we need to reverse the input order here.
    
    This made Exporter/Record.t fail.
    
    Test plan:
    Run t/db_dependent/Koha/Biblio/Metadata.t
    Run t/db_dependent/Exporter/Record.t (should pass now)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fc90a41699060e56ce3ac920d02e8f5f2004ef8c
Author: Thibaud Guillot <thibaud.guillot@biblibre.com>
Date:   Mon Nov 7 09:56:38 2022 +0100

    Bug 32016: Remove debug console.log
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bc7f1c820e0627ff3c20735635118151c7672ea1
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 4 20:17:08 2022 -0300

    Bug 31907: (QA follow-up) Simplify tests
    
    This patch simplipfies the tests, and highlighs the fact the introduced
    method should add filters to the current resultset.
    
    It also aligns the tests with the currently adopted style.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 50031319dbe31c7b125c1217684bf4cd90e6bce8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Nov 2 17:04:55 2022 +0000

    Bug 31907: (QA follow-up) Add POD
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ce4404002d5119f0cbfded906b0b10ec9354f690
Author: Stefan Berndtsson <stefan.berndtsson@gmail.com>
Date:   Fri Oct 21 14:10:42 2022 +0200

    Bug 31907: Show items as On hold when in processing
    
    Test plan:
    1. Make sure syspref "opacbookbag" is set to "Allow".
    2. Make sure syspref "HoldsNeedProcessingSIP" is set to "Don't fulfill".
    3. Place a hold on an item.
    4. Return item via SIP at the pickup library.
    5. View biblio in Opac.
    6. Note that it says "Available" as status.
    7. Add biblio to Cart.
    8. Open Cart.
    9. Note that it says "Available" as status.
    10. Apply patch.
    11. Reload Opac page.
    12. It should now say "On hold".
    13. Reload Card page.
    14. It should also say "On hold".
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c6ddce6b215d8fe36b29579d3a02bfaa0d6641e8
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Oct 17 02:16:58 2022 +0000

    Bug 31840: Consider current cost if modifying order
    
    This patch deducts the current cost of an order if modifying it, so that
    the current cost isn't counted when checking whether the updated cost
    will take the order total amount above the allowed budget.
    
    To test:
    1. Add an active budget of $1,000
    2. Attach a fund of $1,000. Set the fund to warn at 98% and $900.
    3. Add an order to a basket, give it a vendor price of $500 with no
    discount or tax and Save
    4. Modify the order and change the vendor price to $450 and Save
    5. Notice you get a warning that this order total amount will exceed the
    allowed budget - this is incorrect.
    6. Apply the patch and cancel the change so you're redirected back to
    the basket
    7. Modify the order and change the vendor price to $450 and Save
    8. You should be able to Save without requiring confirmation
    9. Add another order to the basket, give it a vendor price of $100 with
    no discount or tax and Save. This should save normally, confirming we
    can add new orders that do not exceed the allowed budget
    10. Add another order to the basket, give it a vendor price of $500 with
    no discount or tax and Save. This should trigger the warning that you
    will exceed the allowed budget, as expected.
    
    Sponsored-by: Waikato Institute of Technology
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 894c6dd0fe3ffffadd23f2b04b3db0130ff161ea
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Oct 13 06:19:27 2022 +0000

    Bug 31743: Change condition for messaging tab
    
    Note for QA:
    The code for SMSnumber is still made dependent on
    EnhancedMessagingPreferencesOPAC in order to not
    disturb current behavior.
    This fixes Enhanced on, EnhancedOPAC off; the case of
    Enhanced off is not considered here.
    
    Test plan:
    Enable EnhancedMessaging, disable EnhancedMessagingOPAC.
    Enable TranslateNotices.
    Check if you can only change notice language on OPAC.
    Enable EnhancedMessagingOPAC.
    Check if you change messaging prefs too.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: marie-luce <marie-luce.laflamme@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 07c5776ed92648e6b1ebb373208009039cd70a64
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Oct 19 22:13:07 2022 -1000

    Bug 31887: Fix search on MARC field in Elasticsearch mappings table
    
    In Elasticsearch mappings table, in tabs with MARC fields, searching using DataTable search field does not work for MARC fields / subfields.
    This is because cell contains an input HTML tag with MARC data in attribute value.
    
    Test plan :
    1) Go to Administration > Search engine configuration (Elasticsearch)
    2) Go to tab 'Bibliographic records'
    3) Enter in search field a used MARC field (like 245)
    => Table gets filtered by rows with mapping on searched field
    4) Enter in search field the field+subfield used for issues (952l in KTD)
    => Table gets filtered by rows with mapping on field+subfield
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d7d2b86136bd073c583c3b3d092992dd1d2d2e13
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 4 19:52:11 2022 -0300

    Bug 24860: DBRev 22.06.00.078
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5157aaa092d313e9e0ede9481fe66937806df8bf
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 4 19:44:59 2022 -0300

    Bug 24860: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 42ff41f95ea4266cdbd3e6416ca730200f9956e7
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Nov 2 09:07:12 2022 -0400

    Bug 24860: (QA follow-up) Ask for any available item of matching group
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 346b3374e1f841851df1bbc8ec6fc90c1e9584c6
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Oct 31 07:20:18 2022 -0400

    Bug 24860: (QA follow-up): Don't assume item group is set for all items
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6be604c4a6f603670ed8901d23d1199d2b976aab
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Oct 21 12:02:08 2022 -0400

    Bug 24860: (QA follow-up) Show group holds on Holds to pull
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2685f7992dcfea91be83154bef6ea04fba49e314
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Oct 21 11:36:10 2022 -0400

    Bug 24860: (QA follow-up) Fix typo in holds queue viewer
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 114bb8b87e5bb18401b5160cf8c54d78a9ef27ea
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Oct 12 13:29:48 2022 -0400

    Bug 24860: (QA follow-up) Add unit tests to cover Koha::REST::V1::Holds::add
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b77084a3f760183e255fc8d2e337eb019daf116d
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Oct 12 13:20:59 2022 -0400

    Bug 24860: (QA follow-up) Add unit tests to cover Koha::Holds::forced_hold_level
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1e19b90e1f5711bf44ecba8d836c07cd0be014fb
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Oct 12 13:10:50 2022 -0400

    Bug 24860: (QA follow-up) Add unit tests to cover Koha::Hold::item_group
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e1b97558080450c958a805a2f7a1ffd86f863c40
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Oct 12 13:04:38 2022 -0400

    Bug 24860: (QA follow-up) Add unit tests to cover changes to Reserves.pm
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bba8c76011b2378a3ee1f1f9c288d4e6ba5e1b43
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Oct 12 12:57:40 2022 -0400

    Bug 24860: (QA follow-up) Add unit tests to cover changes to HoldsQueue.pm
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0c21559fcc12092ee0c06c1165d07ff0bf8f6a97
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Oct 2 21:15:42 2022 +0000

    Bug 24860: (QA follow-up) Terminology and translation fixes
    
    * Fixes a single to a double underscore for translation in holds.js
    * Fixes item_group to item group in API description
    * Fixes volume hold to item group hold in syspref db descrpitions
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d10c2fdb3c9fffa65e998bbf6d56d2c44ea29ad9
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Oct 2 20:55:16 2022 +0000

    Bug 24860: (QA follow-up) Fix number of tests in t/db_dependent/Koha/Holds.t
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d7537b40ab9c9b3fd0cdcb74891179401008e9bc
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Mar 26 09:24:49 2020 -0400

    Bug 24860: Add hold's item group to holds table on circulation.pl and moremember.pl
    
    Signed-off-by: Andrew Fuerste-Henry <andrew@bywatersolutions.com>
    
    Signed-off-by: Rebecca Coert <rcoert@arlingtonva.us>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ef2977fd517ca788d65a6df255795e32f14fc4b8
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Mar 11 06:00:27 2020 -0400

    Bug 24860: Skip non-matching item group holds in HoldsQueue
    
    Signed-off-by: Andrew Fuerste-Henry <andrew@bywatersolutions.com>
    
    Signed-off-by: Rebecca Coert <rcoert@arlingtonva.us>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8cc9c705b1189c9c4083e2f19575221642d3d93c
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Mar 10 09:02:22 2020 -0400

    Bug 24860: Skip non-matching item group holds in CheckReserves
    
    Signed-off-by: Andrew Fuerste-Henry <andrew@bywatersolutions.com>
    
    Signed-off-by: Rebecca Coert <rcoert@arlingtonva.us>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3f812dc4d69029c97fcd44e1ec7e1c5c1f02984a
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jun 9 14:06:45 2022 -0400

    Bug 24860: Add ability to select an item group when placing a hold - OPAC
    
    Signed-off-by: Andrew Fuerste-Henry <andrew@bywatersolutions.com>
    
    Signed-off-by: Rebecca Coert <rcoert@arlingtonva.us>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8efe22b770e3b6d57f137cbe4d84e12297ac1e97
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jun 3 06:33:25 2022 -0400

    Bug 24860: Add ability to select an item group when placing a hold
    
    Signed-off-by: Andrew Fuerste-Henry <andrew@bywatersolutions.com>
    
    Signed-off-by: Rebecca Coert <rcoert@arlingtonva.us>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9670e71b006b862578a23d47a3283f0005bc9f3d
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Feb 28 14:45:44 2020 -0500

    Bug 24860: Implement reserves.item_group_id
    
    Signed-off-by: Andrew Fuerste-Henry <andrew@bywatersolutions.com>
    
    Signed-off-by: Rebecca Coert <rcoert@arlingtonva.us>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5b7410fe2bcdfb7942e23ee31aba9cf28339e6ed
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Feb 28 10:51:47 2020 -0500

    Bug 24860: Add new syspref EnableItemGroupHolds
    
    Signed-off-by: Andrew Fuerste-Henry <andrew@bywatersolutions.com>
    
    Signed-off-by: Rebecca Coert <rcoert@arlingtonva.us>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cfa6e15169b24d7368d29cd6d20d3f207523ea84
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Feb 28 10:37:05 2020 -0500

    Bug 24860: Add reserves.item_group_it
    
    This feature builds upon bug 24857 and allows placing holds that target a specific item group of a record. It is patterned after the feature that allows limiting hold selection by itemtype ( AllowHoldItemTypeSelection ).
    
    Test Plan:
    1) Apply bug 24857 and this bug's patches
    2) Run updatedatabase.pl
    3) Restart all the things!
    4) Enable the sysprefs EnableVolumes and EnableVolumeHolds
    5) Create a record, items and item groups, with each item being assigned to
    an item group
    6) Place a hold for a patron
    7) Note the new selector to choose an item group in addition to record and item level holds
    8) Place an item group level hold
    9) Check in an item from the record that is not part of that item group
    10) Note the hold is not trapped for that item
    11) Check in an item from the record that *is* part of that item group
    12) Note the hold is trapped for that item
    13) Place an item group level hold for another item
    14) Run the holds queue builder
    15) Note the holds queue targets only items from that item group
    16) Check out all the items of that item group to other patrosn
    17) Re-run the holds queue builder
    18) Note the holds queue no longer has a line for that hold,
        as all items that could fill that hold are now unavailable
    
    Signed-off-by: Andrew Fuerste-Henry <andrew@bywatersolutions.com>
    
    Signed-off-by: Rebecca Coert <rcoert@arlingtonva.us>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 30efad72a4f242c268152502e83807dc9dddc067
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Nov 2 22:27:11 2022 +0000

    Bug 31517: (QA follow-up) Fix indentation
    
    Also removes commented out Data::Dumper.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a8fdb3cfc470e0f5a81bcc279e2faf2e3c0a58cf
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Fri Sep 2 23:09:46 2022 +0300

    Bug 31517: Remove unused get_tag function
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e2b0387a2bd341b752654b1ee42787b00e3100eb
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Fri Sep 2 22:56:12 2022 +0300

    Bug 31517: Replace raw SQL queries in C4::Tags with Koha object accesses
    
    To test:
     1) Create a few new tags to any biblio by visiting the biblio's detail
     page on OPAC
     2) The visit http://localhost:8080/cgi-bin/koha/opac-tags.pl and try
     deleting those tags.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 318e4d51d5068f0e4037639a0b572bba9e8bd57a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Nov 3 14:18:12 2022 +0000

    Bug 31654: (follow-up) Update hint
    
    This patch updates the 'public' hint to include the additional
    functionality we now tie to it.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit de0f7c23ff6ea21c481782d78fe5343fc8fe5633
Author: Thomas Klausner <domm@plix.at>
Date:   Wed Oct 5 12:14:31 2022 +0200

    Bug 31654: Hide non-public libraries from MastheadLibraryPulldown (bug_31654_hide_nonpublic_libs)
    
    Do not list library in masthead and advanced search if branches.public is false
    
    Test Plan:
    
    * Set OpacAddMastheadLibraryPulldown to "Add"
    * Go to Administration -> Libraries, edit "Fairfield", set "public" = "no" (at the end of the form)
    * Or connect to DB and run
      update branches set public = 0 where branchcode like 'F%';
      This will set all three libraries starting with F to non-public
    * open OPAC
    * The "All libraries" Pulldown in the Header (between search slot and search button) still shows the non-public libraries
    * Go to OPAC -> Advanced Search, scroll to "Location and availability": The selectbox still shows the non-public libraries
    
    Now apply the patch
    
    * Open OPAC
    * The "All libraries" Pulldown in the Header now should not contain the libraries set to "public = no"
    * And in the Advanced Search "Location and availability" pulldown those libraries should also not be shown.
    
    Sponsored-by: Steiermärkische Landesbibliothek
    Signed-off-by: Claude Demeure <claude.demeure@mailo.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cbc2217e2c132563c501fc3e8dc6ac248b4528df
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Oct 20 14:27:25 2022 +0000

    Bug 31889: Replace append_fields in _embed_items
    
    Test plan:
    Run t/db_dependent/Koha/Biblio/Metadata.t again. Should pass.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2766dd82e7dde1fb9058a3520e7410bdfe0e4655
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Oct 20 14:27:25 2022 +0000

    Bug 31889: Add unit test to show problem
    
    Test plan:
    Run t/db_dependent/Koha/Biblio/Metadata.t
    Fails with:
      not ok 10 - 951-952s-953 in 245,100,942,951,953,999,952,952,952,952,952,952,952,952
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3fb5e43296de013df42d9bb3c178870763f1976e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Oct 20 13:05:00 2022 +0000

    Bug 31889: Remove exported ghost routine from Biblio module
    
    It has been moved to a Koha object.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0f9fcb108705b25ba2d7f7342a8711bf16953f36
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Dec 23 17:16:12 2021 +0000

    Bug 29102: Remove ignore_found_holds
    
    If not counting patrons holds, found or unfound, we no longer need this option
    introduced by bug 28078
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 689958b37bb42d751113940750c81baae0051d30
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Dec 23 16:49:34 2021 +0000

    Bug 29102: Do not count patron's own hold against limits
    
    This patch makes three changes:
    1 - The borrower's own holds are not counted towards HighHolds limit
    2 - We exclude all hold counts from CanItemBeReserved
    3 - Static mode should only decrease hold when over the decreaseLoanHighHoldsValue, not when equal
    
    Previously a patron's hold could put the count over the threshhold, and
    if the patron is only allowed 1 hold per record, and the hold wasn't found before
    the checkout, it would make all items unholdable, thus lowering the theshhold for
    dynamic HighHolds
    
    To test:
     1 - Set sysaprefs:
         decreaseLoanHighHolds  - enable
         decreaseLoanHighHoldsDuration - 1
         decreaseLoanHighHoldsValue - 1
         decreaseLoanHighHoldsControl - "over the number of holdable items on the record" / dynamic
         decreaseLoanHighHoldsIgnoreStatuses - blank
     2 - Set circ rules to allow 1 hold per record and loan period of 5
     3 - Find/create a record with 3 items
     4 - Place a title level hold for two different patrons
     5 - Attempt to checkout item - note warning about high holds
     6 - Cancel checkout
     7 - Set decreaseLoanHighHoldsControl - "on the record" / static
     8 - Attempt checkout - note warning about high holds
     9 - Apply patch
    10 - Checkout item - no warning
    11 - checkin item, replace hold
    12 - Set decreaseLoanHighHoldsControl - "over the number of holdable items on the record" / dynamic
    13 - Checkout item - no warning
    14 - prove t/db_dependent/DecreaseLoanHighHolds.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 03c8725b4e253faf87ca3aeda71ce8b59d4efdb0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Oct 28 14:43:10 2022 +0000

    Bug 32037: Check for existence of object before building link
    
    This patch adds a check on the existence of the object and passes this to the template
    
    I also drop a level of IF by moving to ELSIF
    
    To test:
     1 - Enable ReturnLog amd IssueLog
     2 - Checkout an item to a patron
     3 - Return it
     4 - View 'Modification log' tab of the borrwer
     5 - Note item links, test them, they work
     6 - Delete the item
     7 - Reload and try links again, they do not work
     8 - Apply patch
     9 - Reload, no more links
    10 - Checkout and return another item
    11 - This one has links, and they work as before
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e75213b41c9c037f425a51cffa9e2597cc560bc4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 4 19:17:39 2022 -0300

    Bug 31919: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 07fa7ccf31a8bb7f4da1a5e499851957c93eff53
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 27 13:27:55 2022 +0200

    Bug 31919: Add backgground color to hovered items in header dropdowns
    
    This alternate patch is different in a few ways:
    
    - Add a hover background color only to items in dropdown menus.
    - Use an SCSS variable for the background color
    - Update the specificity of the hover CSS to more fully override
      Bootstrap's default.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    - On any page in the staff interface, test the behavior of links in the
      nav header.
    - The always-visible links (Circulation, Patrons, etc) should keep the
      same style as before: Underline on hover.
    - In dropdown menus like "More" and the user menu in the upper right
      corner, hovered links should have a green background.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d30c6dcb7f245f66f052c27bada39ec6ef5df5ca
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 2 12:43:17 2022 +0000

    Bug 32085: Consistent classes for primary buttons: Labels
    
    This patch makes changes the button markup in label-creation templates
    -- including the barcode image generator -- so that all submit buttons
    and any buttons that should should be styled as primary buttons have the
    Bootstrap class "btn btn-primary."
    
    To test, apply the patch and view label-related pages to confirm
    that everything looks correct. In most cases there are no visible
    changes.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8a63d78c4b12665020be3cbfe4a6b1aec930d811
Author: Joonas Kylmälä <joonas.kylmala@helsinki.fi>
Date:   Thu Dec 17 17:35:07 2020 +0200

    Bug 27259: Add HomeOrHoldingBranch checks where it was missing from
    
    The TooMany() function and fine calculation functions were incorrectly
    hard coded to use homebranch for fetching the circulation rules. Those
    ignored completely the syspref HomeOrHoldingBranch where the user
    might have set it to holdingbranch and therefore the fines and whether
    patron has too many checkouts (TooMany()) were counted using the
    unintended branch's rules. This problem only arises in the cases where
    there are branch specific circulation rules defined.
    
    Test plan:
    1. Make sure following tests pass:
       $ prove t/db_dependent/Circulation/_CalculateAndUpdateFine.t
       $ prove t/db_dependent/Circulation/TooMany.t
    
    Test plan for fines.pl:
    1. Add branch specific fine rules for branches A and B. A having a
       fine of 1 per day and B having a fine of 0 per day.
    2. Set sysprefs:
       CircControl = the library the items is from
       finesMode = Calculate and charge
       HomeOrHoldingBranch = holdingbranch
    3. Create an item with home and holding branch of A
    4. Checkout the item with a due date in the past (the past due date can be
       specified by clicking "Checkout settings" in the checkout page) and
       make sure the branch you are checking from is B.
    5. Run perl /usr/share/koha/bin/cronjobs/fines.pl
    6. Notice that fines have popped up now to the patron incorrectly
    7. Apply patch
    8. Pay fines, Check-in the item and check it out again
    9. Run perl /usr/share/koha/bin/cronjobs/fines.pl
    10. Notice that fine is now 0. This means that the branch
        B (holdingbranch of the checked-out item) specific rule is used.
    
    Test plan for staticfines.pl:
    1. Add branch specific fine rules for branches A and B. A having a
       fine of 1 per day and B having a fine of 0 per day.
    2. Set sysprefs:
       CircControl = the library the items is from
       finesMode = Calculate and charge
       HomeOrHoldingBranch = holdingbranch
    3. Create an item with homebranch A and holding branch of A
    4. Checkout the item with a due date in the past (the past due date can be
       specified by clicking "Checkout settings" in the checkout page) and
       make sure the branch you are checking from is B.
    5. Run perl staticfines.pl --library A --library B --category <PATRONS_CATEGORYCODE>
       and notice that now there is inccorectly fines
    6. Apply patch
    7. Pay fines, Check-in the item and check it out again
    8. Run perl staticfines.pl --library A --library B --category <PATRONS_CATEGORYCODE>
        and notice the fines are now not generated
    
    Rebased-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Petro Vashchuk <stalkernoid@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 41bda7c45f0111ec4bdd0cd6dae0258f88e3c8b5
Author: Joonas Kylmälä <joonas.kylmala@helsinki.fi>
Date:   Fri Dec 18 17:47:40 2020 +0200

    Bug 27259: Test HomeOrHoldingBranch usage in _CalculateAndUpdateFine()
    
    This shows that HomeOrHoldingBranch syspref is incorrectly not used by
    _CalculateAndUpdateFine() when it decides which circ rule to use.
    
    Run "prove t/db_dependent/Circulation/_CalculateAndUpdateFine.t" to
    notice the tests now fail.
    
    Signed-off-by: Petro Vashchuk <stalkernoid@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 15433772d010172cda2517e1c5233eeb381200aa
Author: Joonas Kylmälä <joonas.kylmala@helsinki.fi>
Date:   Fri Dec 18 12:22:46 2020 +0200

    Bug 27259: Test HomeOrHoldingBranch usage in TooMany()
    
    This shows that HomeOrHoldingBranch syspref is incorrectly not used by
    TooMany() when it decides which circ rule to use.
    
    Run "prove t/db_dependent/Circulation/TooMany.t" to notice the tests
    now fail.
    
    Signed-off-by: Petro Vashchuk <stalkernoid@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 535936ea9c23ad022972150fc0f396b450d3cd2f
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Oct 19 14:18:20 2022 -1000

    Bug 31881: Fix search link in MARC view
    
    In framework a subfield can be defined with a link (with a search field).
    This create an hyperlink in MARC view.
    Currently with Elasticsearch the link does not work because search query contains 'field,phr:',
    which is useless since the link contains 'idx=field,phr'.
    With Zebra looks like the idx param is ignored.
    
    Test plan :
    1) Use Elasticsearch search engine
    2) Edit subfield 245$a in default framework
    3) Enter 'title' in 'Link'
    4) Save
    5) Create a record with default framework with 245$a = 'The Fifth Elephant'
    6) Go to MARC view
    7) Click on link in 245$a
    8) You find the record
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 68d5b50c62b1637619fdb6761ac61588d0d69b60
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 3 07:47:24 2022 +0000

    Bug 32066: Check 2FA pref in check_cookie_auth
    
    Test plan:
    
    Without this patch:
    1. Set the syspref TwoFactorAuthentication (enforce or enabled)
    2. Configure 2FA for a patron
    3. Logout
    4. Authenticate but don't enter the 2FA code
    5. Switch off the syspref (disabled) [via another browser or so]
    6. Patron is stuck on the [original] login screen. [Only removing
       the session cookie would resolve it.]
    
    With this patch:
    1. Follow the steps above again. But note that you can refresh
       your browser window to get in now.
    2. Verify that Auth.t passes now too.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0774ec01c6e7c56ebf99327c1d7ff35325a191f0
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Nov 3 08:49:26 2022 +0000

    Bug 32066: Add unit test to Auth.t
    
    Test plan:
    Run without next patch. Should fail.
    Run with next patch. Should pass.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    https://bugs.koha-community.org/show_bug.cgi?id=31881

commit 6d9aa24beb9a740296067fe988e90c19fa558229
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Nov 2 14:11:25 2022 +0000

    Bug 21381: (QA follow-up) Add missing filter
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    https://bugs.koha-community.org/show_bug.cgi?id=31881

commit 230301c2cf0af425029c5e6f2d90951c86aea6d3
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Oct 24 21:38:51 2022 +0000

    Bug 21381: (follow-up) fix typo in columns setting yml
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    https://bugs.koha-community.org/show_bug.cgi?id=31881

commit a363136c5c8d8b25c388364b2ce1c7190c60c9ba
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Oct 17 22:19:17 2022 +0000

    Bug 21381: (follow-up) Fix table configuration for new column
    
    The new column was added to the table settings configuration.
    
    To test:
    * Make sure the column shows up in the columns menu of the table
      in the staff interface.
    * Verify it can be hidden/unhidden correctly using the menu
      or the table setings.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    https://bugs.koha-community.org/show_bug.cgi?id=31881

commit 1a88ff691602adb65ad9f983bfadeaa8cd780f6f
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Oct 17 21:42:24 2022 +0000

    Bug 21381: Add serial enumeration to circulation/checkout history
    
    * Set readinghistory and intranetreadinghistory to Allow
    * Check out some items and return some.
      At least one item should have serial enumeration set to something
    * Go to OPAC > patron account > checkout history
    * Verify the Vol info shows the same as on the detail page.
    * Go to staff interface > patron account > circulation history
    * Verify the Vol info shows correctly there as well.
      Bug 21381: Add serial enumeration to circulation/checkout history
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    https://bugs.koha-community.org/show_bug.cgi?id=31881

commit 53ba78566bc09fea4f713bc412fa2a26b84682b5
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Nov 2 19:16:05 2022 +0000

    Bug 31987: (QA follow-up) Fix indentation and remove trailing spaces
    
    Fix tabs for 4 spaces in file.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    https://bugs.koha-community.org/show_bug.cgi?id=31881

commit 62155ac14c0c05631a923252bd33e26a67c335f9
Author: Thibaud Guillot <thibaud.guillot@biblibre.com>
Date:   Wed Oct 26 14:31:29 2022 +0200

    Bug 31987: Update plugin unimarc_field_110 fields
    
    According to https://www.ifla.org/wp-content/uploads/U_B_110_update2021_ONLINE_FINAL.pdf
    
    Test plan:
    
    1) Be sure to manage unimarc 110 field in your bibliographic framework
    2) Edit a record and click on plugin unimarc_110_field input to see new
    select values
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    https://bugs.koha-community.org/show_bug.cgi?id=31881

commit a054207896610e02ab26a2c6447509d64685094a
Author: Thibaud Guillot <thibaud.guillot@biblibre.com>
Date:   Thu Oct 27 14:15:19 2022 +0200

    Bug 32016: Fix clear filter button behavior
    
    For example, if you filter by global search input a datatable which saves its previous state when you want to return to this datatable, the backup is recovered in a cookie but the "clear filter" button is disabled because for it the input is empty, the verification of the recovery of the cookie not being made.
    
    When loading I therefore added the verification of the cookie and if the search value is not empty then the button can be activated.
    
    Test plan:
    
    1) Be sure to have some orders and baskets which can be received
    2) Go to 'cgi-bin/koha/acqui/booksellers.pl' and click on 'Receive
    shipments'
    3) Enter something in global search
    4) Go to receive and cancel or save to be back on datatable
    5) See that you cannot remove your previous input by the 'clear filter'
    button
    6) Apply this patch
    7) Repeat steps 3) and 4)
    8) See that now you can remove your search
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    https://bugs.koha-community.org/show_bug.cgi?id=31881

commit ca37744455ec7849abeffa7ee549f62208d7c906
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 4 12:13:43 2022 +0100

    Bug 30718: Fix curbside pickups
    
    No slots are displayed without this patch
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ba01d76178f2fce8f90c2e9838346cc986fb2757
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 3 15:42:20 2022 -0300

    Bug 31713: Fix permissions
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b1955adc2b5338a62195bf21d8515bea97522f40
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Nov 2 07:10:13 2022 -0400

    Bug 29672: (QA follow-up) Add POD
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 30efb547c54e4dc4cc506d45a3fefab8384df079
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Nov 2 09:46:45 2022 +0100

    Bug 29672: Fix test t/db_dependent/Koha/Plugins/Plugins.t
    
    Table plugin_data was not always cleared
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1e80e4a7e071dc1a25b6bc624c8b8de5f5efd780
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Mon Jun 6 09:14:59 2022 +0200

    Bug 29672: Clear cache of enabled plugins when a plugin's state change
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 08f24d0adfa88aa2648c8880a00d4d20c85e3099
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Dec 9 14:49:32 2021 +0100

    Bug 29672: Increase performance of Koha::Plugins->call
    
    Make use of Koha::Cache::Memory::Lite to avoid hitting the database and
    creating plugins object for every call to Koha::Plugins->call
    
    Test plan:
    1. Make sure plugins still work by executing
       `prove t/db_dependent/Koha/Plugins/Plugins.t`
    2. Run the test script provided in the following patch to see how it
       affects performances
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 00f72975ed0ee2b7660ff1ae22cbb5f559592e2d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 3 10:36:39 2022 -0300

    Bug 31713: DBRev 22.06.00.077
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 701890504a720a987e84e699458da6bdc57de618
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Nov 2 11:50:42 2022 +0000

    Bug 31713: (QA follow-up) Make credits positive
    
    * This makes amount and amountoutstanding for credits positive
    * Adapts the total line to read credits instead of due when the
      balance is >0
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5469c4a7dc1d82f5930e0a272732cf196f4e128e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 1 14:23:17 2022 +0000

    Bug 31713: (follow-up) Display print option for any outstanding
    
    Prior to this patch we only allowed printing if the balance was owed to
    the library.. This patch exposes the option when the patron is owed too.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8830a743ecf3066ac71b023829783f83f17f3a81
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 1 14:21:58 2022 +0000

    Bug 31713: (follow-up) Fix terminology
    
    This patch fixes the terminology as proposed.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 712937c29aa0824554a948348040fa19e534b2e9
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Oct 21 08:20:33 2022 -0400

    Bug 31713: (QA follow-up) Add current date to slip
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] Reverting the KohaDates.now changes. We can simply use [% today %].
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 21835e0ff2b822ebe0ea1c271583543dada76149
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Oct 10 12:02:43 2022 +0100

    Bug 31713: Add FEE_SUMMARY slip template
    
    This patch adds the new FEE_SUMMARY print slip notice template to the
    database.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 065cfc9c5f8249337c28d3919905b8b560adf904
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 7 16:24:57 2022 +0100

    Bug 31713: Add FEE_SUMMARY print slip link
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 469aff4c16c4d0c794297710c31d9e77f1727cc3
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Nov 2 19:10:30 2022 +0000

    Bug 31854: (QA follow-up) Terminology: loans > checkouts
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e57ed68a027d37b84713cf01f53f523a988dfd1f
Author: Magnus Enger <magnus@libriotech.no>
Date:   Tue Oct 18 14:41:23 2022 +0200

    Bug 31854: Document --not_borrowed_since and anonymization
    
    To test:
    - Run "perldoc misc/cronjobs/delete_patrons.pl"
    - Note the absence of information about the potential conflict
      between --not_borrowed_since and anonymization
    - Apply this patch
    - Re-run the perldoc command and make sure the note about
      anonymization make sense
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7d8a35585b4d2047e404fb4a1ce19596737d68ab
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Oct 19 13:48:18 2022 +0000

    Bug 31873: Check ->find before calling ->safe_delete
    
    When there is no item, you cannot safely delete it :)
    
    Resolve this warning:
      Can't call method "safe_delete" on an undefined value at /usr/share/koha/cataloguing/additem.pl line 379
    (Line numbers may vary across versions.)
    
    Test plan:
    Open item editor.
    Add a new item.
    Add another tab with same form. Delete new item.
    Go back to former tab. Try to delete again.
    You should see an alert now on top of the form.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ecb9932fd3d3c2f2c0fe96aac53f1faa6331f2ab
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Nov 2 18:57:51 2022 +0000

    Bug 32076: Add page-section to basketgroup.tt and clean-up markup
    
    This patch adds the page-section div to the basket group 'Ungrouped baskets'. It also adds the row class to the fieldset to get the list to display properly.
    
    To test:
    1. Apply patch
    2. Make sure the page section div for 'Ungrouped baskets' looks good.
    3. Look at the markup changes and make sure the make sense.
    4. Make sure the form still works as it should.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a4f2e6ae85fc8ed42484c819d6384da4c2a7bc53
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Nov 2 17:00:32 2022 +0000

    Bug 31995: (QA follow-up) Add 'system preference' to help text
    
    We often get asked where something can be found in setting,
    adding the hint that RealTimeHoldsQueue is a system preference
    is hopefully helpful here.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1088e3fb79741a7a0fe70f4191ae3987eee4f389
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Oct 27 13:44:59 2022 -0400

    Bug 31995: build_holds_queue.pl should check to see if the RealTimeHoldsQueue syspref is on
    
    The real time hold queue and the build_holds_queue.pl jobs are not 100% compatible in that we should not be running the cron if the real time queue is enabled, this could lead to double server work. It would be good to have a check in build_holds_queue for the RealTimeHoldsQueue syspref and not run the job if the preference is enabled.
    
    There might be times when we'd want to force a run of this job without changing the syspref. To that end we would also want a flag for this job so that system administrators could force the job from the command line if required, overriding this limitation.
    
    Test Plan:
    1) Apply this patch
    2) Try run misc/cronjobs/holds/build_holds_queue.pl with the -h/--help and -m/--man options
    3) Disable RealTimeHoldsQueue
    4) Run with no options, should succeed
    5) Enable RealTimeHoldsQueue
    6) Run with no options, should display a message and not rebuild the
       holds queue
    7) Run again with the -f/--force option, should succeed
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2672fd0717de663fd4c09435fcba5e851921bfd3
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Nov 2 00:44:25 2022 +0000

    Bug 32064: Add test data for all report subpermissions
    
    This patch adds test data to prove that all authorizations
    for subpermissions are set when only a top level flag is set.
    
    To test:
    0) Apply patch
    1) prove ./t/Koha/Auth/Permissions.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6f3b4be3d35a7b370c03a543c5a01e7e36b471c2
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Nov 2 22:17:33 2022 +0000

    Bug 32006: Add page-section for local use system preferences
    
    To test:
    1. Go to the System preferences > Local use
    2. Notice there is no page section and the table has much more space on the left than other system preference sections
    3. Apply patch
    4. Look again, the extra space on the left should be eliminated and the page-section should be added.
    5. Use an HTML validator to spot errors.
    
    Note: I elimiated the inline style on the table that set the width to 80%. I don't see why that is needed but if it is we should be using CSS to do so.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5060ee3200b61551a14f97ed85e3679d454ad01f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 3 09:51:36 2022 -0300

    Bug 29792: DBRev 22.06.00.076
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2a0c6a32b4c79851cbbd234723973ff0e2bce6cd
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 30 11:01:56 2022 +0000

    Bug 29792: Automatically send wrong transfers
    
    Bug 24434 reinstated the 'updateWrongTransfer' call here, but made the assertion that
    the transfer should not be sent until 'Ok' was clicked.
    
    I see how unsent transfers are useful for rotation, but I believe for wrong transfer we shouldn't require a confirm or print. If a library does want to, the 'transfersblockcirc' system preference will enforce clicking the button
    to continue
    
    This patch also confirms a transfer when item already has a transfer and only options are Confirm/Print because the transfer already exists
    
    To test:
    1 - Disable TransfersBlockCirc system preference
    2 - Manually transfer an item from branch A to branch B
    3 - Check in the item at branch A
    4 - Dismiss modal without confirming
    5 - View item on biblio details page, item not in transit
    6 - Check in item, confirm transfer
    7 - Note item in transit on details page
    8 - Check in the item at branch C
    9 - Dismiss modal without confirm
    10 - View item on biblio detail, not in transit
    11 - Checkin at A, cancel transfer
    12 - Apply patch
    13 - repeat 1 - 4
    14 - Confirm item appears in transit
    15 - Check in at branch C, dismiss modal
    16 - Confirm item in transit
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7b5c671d442f25ea1cd5fe5c0ccfefaec688f5d0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 3 09:48:14 2022 -0300

    Bug 31974: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cf08ae2a6b064ec30ec3acbdacae36d740aa1041
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 27 12:11:54 2022 +0000

    Bug 31974: (follow-up) Correct some other specificity issues
    
    This follow-up makes a couple other minor corrections to label
    alignment. This allows for correct top-alignment of labels in forms but
    lets labels in other contexts, especially checkbox or radio button
    labels, to be aligned "middle."
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0e6af46a315073063da74161d3c15cd8305fc5a3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 25 16:09:46 2022 +0000

    Bug 31974: Regression: Bug 31813 incorrectly affected labels in the header search
    
    This patch adds a specific white-space property to header search labels
    so that they do not wrap. The change made by Bug 31813 overrode the
    white-space property incorrectly.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    - Go to Administration.
    - The header search label "Search system preferences" should appear on
      one line.
    - Check that labels still wrap correctly on pages like the patron edit
      screen and the staged MARC record detail view.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d8484748b4cba155fc15170aceaf1844f00b018
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Nov 2 22:50:58 2022 +0000

    Bug 31422: (QA follow-up) Fix terminology and switch icon
    
    * fa-exclamation-circle looks more like 'info', but I feel this
      should be more of a warning, so switched to fa-exclamation-triangle
    * Changed branches to libraries in message
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3a9d38b3a545888bb54e4d75c15218a05b79e132
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Oct 20 14:53:33 2022 +0000

    Bug 31422: Add patron's current category to dropdown while editing
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 26b5d1735b09a790054bdaf41a658a40012c6517
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 3 09:05:00 2022 -0300

    Bug 31943: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a9b0917179ca397873c2b7fea1e5489bc7561b59
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 27 16:25:05 2022 +0000

    Bug 31943: Date inputs wider than other inputs
    
    This patch sets a width on Flatpickr instances so that they better match
    the typical width of a text input field.
    
    The patch also corrects the "X" ("clear date") link color to return it
    to the original red color. In doing this I've defined a new
    $warning-text-color variable and replaced other instances of #CC0000
    with this variable.
    
    I've also tweaked the appearance of the Flatpickr shortcut links
    ("Today," "Tomorrow," etc) so that they match other links in Koha.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    - Go to patrons and locate a patron record.
    - Edit the patron.
    - In the patron entry form, confirm that the "Date of birth" field
      matches the width of the text fields around it.
    - The "X" should be red.
    - Click the date of birth field to trigger the calendar popup.
    - The "Yesterday" and "Today" links should be colored the default green
      seen elsewhere in the staff interface.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e1a02dde8f7dbb09172071ebaec1338d58c2634f
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Oct 24 23:08:52 2022 +0000

    Bug 31963: Only show hold fee msg on OPAC if patron will be charged
    
    This patch ensures HoldFeeMode is considered when displaying a message
    to patrons on the OPAC that says they'll be charged a hold fee when
    placing or collecting the hold.
    
    When HoldFeeMode is set to not_always or "only if all items are checked
    out and the record has at least one hold already" then the hold fee
    message should only show if all items on the record are checked out, AND
    the record has at least one hold already - both of these conditions must
    be met.
    
    To test:
    1. Go to Administration -> Patron categories
    2. Edit your patron category and give a hold fee of $1.
    3. Go to Administration -> System preferences and search for
    HoldFeeMode. Set to 'only if all items are checked out and the record
    has at least one hold already' if not already set. Keep this tab open.
    4. In another tab, open the OPAC.
    5. Search the OPAC for a record with one item which is NOT checked out.
    6. Go to place a hold on this record. Confirm you see a message saying
    that you will be charged a hold fee, even though not all items are
    checked out and the record does not have a hold --> This is the bug.
    
    7. Apply patch and restart services.
    
    Items available, no holds placed
    
    8. Repeat steps 5-6. This time, you should NOT see the hold fee message.
    
    Items available, holds placed
    
    9. In your staff interface tab, find the same record.
    10. Place a hold for a different patron on this record.
    11. In your OPAC tab, find this record again and go to place a hold. You
    should NOT see the hold fee message.
    
    No items available, no holds placed
    
    12. In your staff interface tab, cancel the hold placed on this record.
    13. Check out the item to a different patron.
    14. In your OPAC tab, find this record again and go to place a hold. You
    should NOT see the hold fee message.
    
    No items available, holds placed
    
    15. In your staff interface tab, keep the item checked out to another
    patron.
    16. Place a hold for a third patron on this record.
    17. In your OPAC tab, find this record again and go to place a hold. You
    SHOULD see the hold fee message.
    
    Multiple holds
    
    18. Search the OPAC for a record. Make sure your search will return more
    than one result, including our test record.
    19. Check the checkbox for our test record, plus another record where
    the item is not checked out.
    20. Click the Place hold button to place holds on all of our selected
    records. You should only see the hold fee message above our test record.
    
    21. In your staff interface tab, test setting HoldFeeMode to the other
    values and confirm the hold message shows on the OPAC as expected.
    22. Confirm tests pass t/db_dependent/Reserves/GetReserveFee.t
    
    Sponsored-by: Horowhenua Libraries Trust
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9c6003621bae0b5387f825d22b4588cf97b777f8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Oct 28 18:40:49 2022 +0000

    Bug 32002: Make submit button yellow on administration > Did you mean?
    
    This patch corrects the class on the "Did you mean?" page's save button
    so that it is consistent with other primary submit buttons.
    
    To test, apply the patch and go to Administration -> Did you mean?
    
    The "Save configuration" button should be yellow.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8da67336f4dd43824e33ba9178dc36fcddaecccd
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Nov 1 12:13:49 2022 +0000

    Bug 31960: (follow-up) Make headings match
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 14205d3b455cf087483e515d5fcba32affbee636
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 25 11:46:12 2022 +0000

    Bug 31960: Information on job detail view is misaligned
    
    This patch updates the structure of the background jobs template so that
    HTML processed in the report includes is well styled. The patch does
    this by breaking the report and detail includes out of the fieldset and
    putting them in a separate section.
    
    This patch also adds the page-section class to the table view of current
    and past background jobs.
    
    Note: The patch includes indentation changes, so please ignore
    whitespace when viewing the diff.
    
    To test, apply the patch and go to Administration -> Manage jobs.
    
    - The table of jobs (even if empty) should be contained in a
      page-section style white box.
    - Test various processes which trigger a backgroud job:
      - Batch item modification
      - Batch item deletion
      - Batch hold deletion
      - Batch record modification
      ... etc.
    - After each process has been started, view the details of the job.
    - The information about the job shold be displayed well, with separate
      sections for "Report" and "Detailed messages."
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit adae1973ab632e9e07401848500c46860df7f03c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 2 11:43:32 2022 +0000

    Bug 32070: Consistent classes for primary buttons: Acquisitions
    
    This patch makes changes the button markup in Acquisitions templates
    so that all submit buttons and any buttons that should should be styled
    as primary buttons have the Bootstrap class "btn btn-primary."
    
    To test, apply the patch and view pages in Acquisitions to confirm
    that everything looks correct. In most cases there are no visible
    changes.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 616eb67d8e40f97baf26256cddb96f7ebf12e0a0
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Nov 1 18:58:30 2022 +0000

    Bug 32068: Consistent classes for primary buttons: Administration
    
    This patch makes changes the button markup in Administration templates
    so that all submit buttons and any buttons that should should be styled
    as primary buttons have the Bootstrap class "btn btn-primary."
    
    To test, apply the patch and view pages in Administration to confirm
    that everything looks correct. In most cases there are no visible
    changes.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8bdf4f8a458ad5cc4eb13f1c80376b42bbc68ff4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 2 19:27:13 2022 -0300

    Bug 32044: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4bef47bba8f56a1ab7da87a07123582ad4055c0d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 31 18:19:03 2022 +0000

    Bug 32044: Improve consistency in primary submit buttons
    
    We currently have a mix of ways to style buttons, including some using
    Bootstrap's btn-primary class and some with CSS targeting
    input[type='submit']. This patch works to make these buttons more
    consistent in their appearance and to improve the modularity of related
    SCSS.
    
    The patch also removes some unused CSS from login.css.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    Test various page to see if main submit buttons look correct in their
    default, hover, and active states:
    
    - The login page
    - Circulation -> Checkouts -> Check out button (btn-primary)
    - Circulation -> Set library (input[type='submit'])
    - Cataloging -> Basic MARC editor (split button)
    
    Also check "default" buttons:
    
    - Patrons -> Sidebar filter (input[type='button'])
    - Circulation -> Checkouts -> Show checkouts (btn-default)
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c13692cc4bff70d8f9a55a90814ad4d728bf6756
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Oct 24 22:44:21 2022 +0200

    Bug 31877: Fix capitalization: "Delete this Tag" and "Repeat this Tag"
    
    To get to the string in the staff interface:
    1. In the staff interface, go to Cataloging
    2. Click "New record"
    3. Hover the mouse cursor over one of the delete tag buttons (rectangle with a small x next to the tag title)
       --> a little popup thing (tooltip?) appears with "Delete this Tag"
    4. Open the developper tools inspector in your browser
    5. Click on the delete tag button
       --> the image alt text is "Delete this Tag"
    6. Repeat the same check in the authorities editor
    7. Apply patch
    8. All tooltips and alt text should read correctly now
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7c9760f82e3584bec6ee5ecc8460cd55997a43f7
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Oct 24 20:32:27 2022 +0000

    Bug 31876: Fix capitalization "Click to Expand Tag"
    
    The string "Click to Expand this Tag" appears in addbiblio.tt a couple of times. It should be "Click to expand this tag".
    
    To get to the string for the staff interface:
    1. In the staff interface, go to Cataloging
    2. Click "New record"
    3. Hover the mouse cursor over one of the tag titles (e.g. CONTROL NUMBER)
       --> a little popup thing (tooltip?) appears with "Click to Expand this Tag"
    4. Go to Administration > Global system preferences
    5. Search for advancedMARCeditor
    6. Change the value to "Don't show"
    7. Click "Save all Cataloging preferences"
    8. Go back to Cataloging > New record
    9. Hover the mouse cursor over the tag number (e.g. 001)
       --> a little popup thing (tooltip?) appears with "<tag title> Click to Expand this Tag"
    10. Go to Authorities > new record
    11. Hover over the desription of a tag which subfields are collapsed
       --> verify the tooltip appears with "Click to Expand this Tag"
    12. Apply patch, all occurrences should be fixed now.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8db16e6e00d9f285ad3ce7a3ac8e5648b71e2ae3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Oct 14 11:00:07 2022 +0000

    Bug 32050: Add 'page-section' to calendar page
    
    This patch adds a "page-section" div to a couple of areas on the
    calendar page.
    
    To test, apply the patch and go to Tools -> Calendar.
    
    The content in the page's two columns should be wrapped in a white box.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3bc628d7c9b3bc83b9fc560a4ea70afb2f4d8176
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 2 19:21:55 2022 -0300

    Bug 32014: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 31c5563ad85a71c855729be373360fa93f44cd68
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 27 11:36:01 2022 +0000

    Bug 32014: Tweak style of checkout settings panel
    
    This patch makes some minor changes to the CSS controlling the way the
    checkout settings panel displays, as well as the panel showing the last
    checked-out item.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    - Go to Circulation and locate a patron to check out to.
    - On the checkout page, click the "settings" icon in the barcode field.
    - The checkout settings panel should display. Confirm that the spacing
      looks good.
    - Check out an item to the patron.
    - Confirm that the panel showing the last checked out item information
      looks correct: A green-bordered box with a white background, no
      rounded corners.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 987e1257a9e0ea12e97754123204fc31b74bee89
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Oct 28 17:24:08 2022 +0000

    Bug 32038: Sidebar and footer style improvements on suggestions page
    
    This patch makes some changes to the suggestions template in order to
    make the sidebar filter form and bulk action table footer forms more
    usable and readable.
    
    Some global changes to <fieldset class="brief"> style are made.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    - Go to Suggestions.
    - Confirm that the sidebar contains two sections: Organize by and Filter
      by.
    - Test that the links under "Filter by" work to expand and collapse the
      different sections (bibliographic, suggestion, and acquisition).
    - Below the table of existing suggestions you should see the section
      "Change selected suggestions."
    - Each form should look good, with labels in bold above each form field,
      with "primary" style submit buttons.
    - Because some global styles have been modified, check that fieldsets
      with the class "brief" are still displayed correctly in other areas:
      - In sidebar forms: Patrons, Acquisitions order and invoice searches,
        overdues and holds to pull in Circulation.
      - In other areas: The Quick spine label creator; the upload plugin
        form; the calendar's add holiday form.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a1edf06869c3bf2e82577a32aee3eefbb7dc9219
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 30 12:01:36 2022 +0000

    Bug 31664: Display pending transfer information on details page
    
    If a transfer is requested, but not sent, we should display this information on biblio details for staff
    
    This patch also removes nocancel parameter that was not used, passes transfer object directly to template
    
    To test
    1 - Manually transfer an item
    2 - Note the item shows in transit on details page
    3 - Remove the datesent to emulate a pending transfer
        UPDATE branchtransfers SET datesent = NULL itemnumber=1;
    4 - View details page - no info on transfer
    5 - Apply patch
    6 - Item shows 'Transit pending'
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 83a79f0297c93935b233247f4256231f481c69ce
Author: David Nind <david@davidnind.com>
Date:   Sat Oct 29 23:30:03 2022 +0000

    Bug 32035: Add "Koha" to the staff interface home page
    
    Currently the staff interface does not include Koha before the version
    number shown on the home page.
    
    Test plan:
    1. Log in and view the staff interface home page.
    2. In the bottom right-hand corner "Version 22.06.00" is shown.
    3. Apply the patch.
    4. Refresh the staff interface home page.
    5. It now shows "Koha 22.06.00" (linked to the Koha website).
    6. Sign off :D (or comment on alternative options).
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Claude Demeure <claude.demeure@mailo.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9aa21276b21693bdc60547ec532ec0595337df08
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Oct 26 23:15:35 2022 -1000

    Bug 32012: runreport.pl should use binmode UTF-8
    
    Like Bug 26832 added binmode UTF-8 to script misc/search_tools/export_elasticsearch_mappings.pl, this should be added to misc/cronjobs/runreport.pl.
    
    Test plan :
    1) Do not apply patch
    2) Create a SQL report with :
       SELECT 'accentué',barcode FROM items limit 3
    3) Note the id of this report, for example 1
    4) Run : misc/cronjobs/runreport.pl 1 --format csv | tee /tmp/without.csv
    => You see output with unknown character instead of é :
    5) Run : file --mime-type /tmp/without.csv
    => You see : /tmp/without.csv: iso-8859-1
    6) Apply patch
    7) Run : misc/cronjobs/runreport.pl 1 --format csv | tee /tmp/with.csv
    => You see correct output with é
    8) Run : file --mime-type /tmp/without.csv
    => You see : /tmp/without.csv: utf-8
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3aa50f045746b913e4dd1b0d6a1f6ea3cfbc8f63
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 28 16:43:15 2022 -0300

    Bug 32022: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c22dac63834a55c9c994f1de0c96b7c1b7bc2461
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 28 08:53:08 2022 +0100

    Bug 32022: (follow-up) Ensure action background takes presidence
    
    The action class sets the background to transparent, but because it's
    often used in conjunction with the fieldset which includes the card
    mixin the background rule was getting overridden to white.
    
    Test plan
    1. Consider the same cases as the original patch
    2. Confirm that the last test now shows the buttons outside of the card
       but nicely spaced to clearly belong to it.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d17775b50173a4e8531b1c738f09e44ca3b533f3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 27 15:28:11 2022 +0000

    Bug 32022: Style tweaks to fieldsets and page-section
    
    This patch makes CSS changes to try to bring some consistency to
    various elements which are similar in the general sense of "white box."
    Fieldsets, page-section, etc.
    
    To test apply the patch and rebuild the staff interface CSS.
    
    Test various pages with page-section, fieldsets, etc.:
    
    - Patron details
    - Patron edit
    - Patron accounting
    - Check Tools -> Patron lists -> New to confirm that there is not a gap
      between the submit button's container and the rest of the form.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 11a7a7d0b5efce7bdc6fa41bcabb522154547a84
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 28 16:36:21 2022 -0300

    Bug 31948: DBRev 22.06.00.075
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b2b7180c8f73740a607431aad898403dd0d598f7
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Oct 28 13:56:10 2022 +0000

    Bug 31948: Add timestamp to tmp_holdsqueue table
    
    With the option to have real time updates to tmp_holdsqueue
    a timestamp will be really helpful to help find the most recently
    added entries.
    
    To test:
    * Place some holds on a record with available items
    * Run build_holds-queue.pl
    * Verify the hold shows up under circulation > holds queue
    * Apply patch
    * Run build_holds_queue.pl again
    * Verify this works without any issues
    * Turn on RealTimeHoldsQueue
    * Update pick-up location, add another hold
    * Make sure these changes are reflected in the holds queue as well
    * Look at the database and verify timestamps are set
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a9ea3650bd09c25539242736b07c9c33041cc090
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 25 19:13:06 2022 +0000

    Bug 31986: Add page-section to various administration pages
    
    This patch adds a page-section div to some administration pages in order
    to provide a consistent structure visual contrast. The following pages
    are modified:
    
    Additional fields
    Funds
    Authority types
    Authority types -> MARC tag structure
    Authority types -> MARC tag structure -> Subfields
    MARC bibliographic framework
    MARC bibliographic framework -> MARC tag structure
    MARC bibliographic framework -> MARC tag structure -> Subfields
    MARC Bibliographic framework test
    Classification configuration
    Currencies and exchange rates
    EDI accounts
    Library EANs
    Item search fields
    Koha to MARC mapping
    Record overlay rules
    Record matching rules
    OAI sets configuration
    SMTP servers
    Z39.50/SRU servers
    
    To test, view each page to confirm that the page-section div visibly
    delineates the main content area.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 259f549487bdaed39afff18010cc2d6c47ec1abb
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 28 16:40:21 2022 -0300

    Bug 31760: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 99a5aefd0f4048581f3482ced889671035e65cdc
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Oct 13 11:49:02 2022 +0100

    Bug 31760: Fix contrast of 'separator'
    
    This patch increases the contrast of the separator pipe visible in the
    staff client upper right corner of the header bar.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cccae533fe95e761f6fa27bf7a10dfd1ff8010cc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 26 17:34:10 2022 +0200

    Bug 31992: Fix t::lib::Mocks::Zebra
    
    This will fix t/db_dependent/www/batch.t and t/db_dependent/www/search_utf8.t
    
    QA - improvement ideas welcome! It's definitely not the best we can do.
    
    Test plan:
      prove t/db_dependent/www/search_utf8.t t/db_dependent/www/batch.t
    must return green
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dfaf5834d15010cab2f76c3f9c9aca93237d6166
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Thu Oct 27 01:13:08 2022 +0000

    Bug 23012: (follow-up) Fix t/db_dependent/Koha/Items.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 44f15e07682c36754ad8b5516e328812ddd8611b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 25 14:56:23 2022 -0300

    Bug 23012: Fix t/db_dependent/Koha/Item.t
    
    With the follow-up changes, the return value is no longer a scalar, but
    a hashref, but the tests weren't updated accordingly.
    
    This patch fixes this situation.
    
    To test:
    1. Run:
       $ kshell
      k$ prove t/db_dependent/Koha/Item.t
    => FAIL: Tests fail
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: Tests pass!
    4. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 60f717bfcf941f04496e09ec48e517fd784d8586
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 27 18:19:27 2022 -0300

    Bug 30036: Fix db_rev permissions
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit edb16022febc4968d172d6e3e96fac295d31579d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 27 10:53:06 2022 +0200

    Bug 32011: 2FA - Prevent qr_code to not be generated
    
    Caught by selenium/authentication_2fa.t
    
     #   Failed test 'Enforce 2FA setup on first login'
     #   at t/db_dependent/selenium/authentication_2fa.t line 291.Error while executing command: unexpected alert open: Dismissed user prompt dialog: [object Object] at /usr/share/perl5/Selenium/Remote/Driver.pm line 411.
     at /usr/share/perl5/Selenium/Remote/Driver.pm line 356.
    
    There is a 500 in the logs:
     "POST /api/v1/app.pl/api/v1/auth/two-factor/registration HTTP/1.1" 500
    
    That is caused by
    [ERROR] POST /api/v1/auth/two-factor/registration: unhandled exception (Mojo::Exception)<<Overflow error. version 8
    total bits: 1268  max bits: 1232>>
    
    It's coming from GD::Barcode, in my understanding we should increase 'Version'.
    
    Test plan:
    Remove all other subtests from the selenium to speed up its exec, then
    run it in a loop. Without this patch the tests fail quite often (1/10),
    now it should not fail with this error (maybe another one, see bug
    32010)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fd7bc8a9b8de5a8fdea36b046e4621760366dbf0
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 26 15:11:08 2022 +0000

    Bug 31993: Improve specificity of authorized values breadcrumbs
    
    This patch adds a link back to the current authorized value category to
    the breadcrumbs. The page title has also been modified to match.
    
    To test apply the patch and go to Administration -> Authorized values.
    
    - Click an authorized value category, e.g. CCODE.
    - Click "New authorized value for CCODE"
    - In the breadcrumbs menu you should see: "Home ->  Administration ->
      Authorized values -> Authorized values for category CCODE -> New
      authorized value.
    - The "Authorized values for category CCODE" link should take you back
      to the correct view.
    - The page title should match.
    - Return to the list of CCODE authorized values and open one for
      editing.
    - The breadcrumbs should include a link back to "Authorized values for
      category CCODE"
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e714213359f8d03ff86f577dd96315b3964d8d30
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Oct 27 14:03:05 2022 -0400

    Bug 27017: (QA follow-up) Don't die if aqorders.biblionumber is null
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c009c3fa81d6c87aede3bd3de1fd119c6516d319
Author: Colin Campbell <colin.campbell@ptfs-europe.com>
Date:   Fri Nov 13 13:46:13 2020 +0000

    Bug 27017: Code more defensively in process_invoice
    
    This patch adds a check for ordernumber precence in the EDI Invoice
    message lines and skips process if one is not found.
    
    We log the failure as a trace log to allow administrators the oportunity
    to track down the issue further.
    
    We also add a trace log to entries to show which bib the invoice line
    is receipting to.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1cc21ca6bd5de7f6e31d8bc580416fa19a965313
Author: Björn Nylén <bjorn.nylen@ub.lu.se>
Date:   Thu Oct 27 10:47:56 2022 +0200

    Bug 31969: (follow-up) Unit tests for Koha::BackgroundJobs->purge
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 78219e72f6131fd5adf3f0fc2b231f3db4b5c8f9
Author: Björn Nylén <bjorn.nylen@ub.lu.se>
Date:   Wed Oct 26 14:45:23 2022 +0200

    Bug 31969: (follow-up) Move deletion code to Koha::BackgroundJobs->purge for reuse.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6565328092d3edf600c66fc0364d15890f3f694e
Author: Björn Nylén <bjorn.nylen@ub.lu.se>
Date:   Mon Oct 24 15:12:03 2022 +0200

    Bug 31969: Add background queue options to cleanup_database
    
    This patch adds background queue options to cleanup_database.pl to allow
    for purging completed background jobs.
    
    --bg-jobs DAYS Purge all finished background jobs this many days old. Defaults to 1 if no DAYS provided.
    --bg-type TYPE What type of background job to purge. Defaults to "update_elastic_index" if omitted
                   Specifying "all" will purge all types. Repeatable.
    
    To test:
     1 - Enable elastic search in Koha
     2 - perl misc/maintenance/touch_all_items.pl
     3 - Generate an number of diffrent types of bg-jobs (eg batch_hold_cancel,
         batch_biblio_record_deletion, batch_item_record_deletion)
     4 - Check db and note there are a bunch of diffrent jobs
     5 - Update to make them old
         UPDATE background_jobs SET ended_on = '2022-10-01 00:00:00', status='finished'
     6 - perl misc/cronjobs/cleanup_database.pl
     7 - Note bg-jobs entry shows in help
     8 - perl misc/cronjobs/cleanup_database.pl --bg-jobs 1 -v
     9 - Note that elasticqueue would have been cleared
    10 - perl misc/cronjobs/cleanup_database.pl --bg-jobs 1 -v --confirm
    11 - Note that number of entries deleted is reported
    12 - Attempt to clear other job types, including "all" eg
         perl misc/cronjobs/cleanup_database.pl --bg-jobs 1 --bg-type batch_item_record_deletion  -v --confirm
         perl misc/cronjobs/cleanup_database.pl --bg-jobs 1 --bg-type all  -v --confirm
    13 - Confirm in staff interface that jobs are gone:
         http://localhost:8081/cgi-bin/koha/admin/background_jobs.pl
         (Uncheck 'Current jobs only')
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e4a13cd098ac89f840dc30c1559721360dd600bf
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 27 14:40:09 2022 -0300

    Bug 30407: Fix sysprefs.sql syntax
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eef3346393ca12a99f7e456ddfe5537d0a3909c9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 27 13:37:23 2022 -0300

    Bug 30407: DBRev 22.06.00.074
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b29451176d26d2ee446667d19432fe72e057df05
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Oct 2 20:32:36 2022 +0000

    Bug 30407: (QA follow-up) Replace message with description
    
    Switches "not for loan message" to "not for loan description" to
    stay closer to the usual terminology for AV values also used
    when managing them.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 690840b428b3a4ee9e102b1fa5a9d01411056779
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Oct 2 20:28:38 2022 +0000

    Bug 30407: (QA follow-up) Fix missing TT filter
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 89e2f5bc22b739689a4bc4a118d5379a39870f88
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Wed Mar 30 11:58:46 2022 +0300

    Bug 30407: Add ability to syspref UpdateNotForLoanStatusOnCheckin to show only the notforloan values description
    
    This can be used to instruct staff how the item should handled when
    it's checked in. For example items notforloan status has been
    changed as "Invoiced item" while item has been on loan. When it's
    checked in staff sees that they should put item aside for further
    processing.
    
    To test:
    1. Apply patch and update database if needed
    2. Set items notforloan status as -1 (or create new one)
    3. Add line "-1: ONLYMESSAGE" to UpdateNotForLoanStatusOnCheckin
    4. Check item out for patron.
    5. Check item in.
    => Description of notforloan status should be displayed.
    => Confirm notforloan status hasn't changed.
    
    Also prove t/db_dependent/Circulation/issue.t
    
    Sponsored-by: Koha-Suomi Oy
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cffb97f1ce8e4fc584ebc91909db1a0ed3bce1b5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 27 13:13:55 2022 -0300

    Bug 30036: (QA follow-up) Add explanation about default value behavior
    
    Devs forgot to mention the default value (empty) is for the current
    behavior. This is particularly important as there's really no shipped
    XSLT so a niche usage enhancement until related bugs are pushed. Those
    only have UNIMARC files, though.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 49551d1f30fdade58e322185f26a60a433a68bbc
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 27 10:03:50 2022 -0300

    Bug 30036: DBRev 22.06.00.073
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8005ad67911840de95e76f8a6d676c8674cc4287
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 27 09:56:14 2022 -0300

    Bug 30036: Fix trivial typo
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit db0e7b0fbec48436b599026e611fde0ac89c007c
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Oct 7 11:12:32 2022 +0000

    Bug 30036: (QA follow-up) Move system preference to OPAC tab
    
    * Moves the AuthorityXSLTOpacResultsDisplay from staff interface to OPAC tab
    * Fixes some capitalization opac in the database pref description
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4dc7293b833ece0aef7ea4bb6a5dd4aa536afd62
Author: David Nind <david@davidnind.com>
Date:   Sun Sep 11 17:58:07 2022 +0000

    Bug 30036: (follow-up) Update system preference description
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c593ffd8fb718bb461d4df1269f6c4487b06d03e
Author: Jérémy Breuillard <jeremy.breuillard@biblibre.com>
Date:   Mon Feb 7 12:34:52 2022 +0100

    Bug 30036: Allow XSLT for authority results view in OPAC
    
    This patch adds a syspref to allow customizing the authority results
    view at OPAC with XSLT
    
    Test plan:
    1. For testing make sure to have at least one or more authorities
       defined
    2. OPAC: Home > Authority search(Submit) > Authority search results
       Notice the normal view of results
    3. Apply patch
    4. INTRA: Home > Administration > System preferences ->find
       "AuthorityXSLTOpacResultsDisplay"
    5. Write the path where your file is. You can use the one for intranet:
       .../koha/koha-tmpl/intranet-tmpl/prog/en/XSLT/UNIMARCauthResults.xsl
    6. Save changes
    7. Repeat step 2 and notice the xslt view of results
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0ec29e5d4ecdf5dd3156b53320eac1250d065e3b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 26 15:52:18 2022 +0000

    Bug 31976: Incorrect default category selected by authorized values page
    
    This patch removes some obsolete code for selecting a default authorized
    value category to be shown when the user first arrives on the authorized
    values page. This has not been necessary since we switched to an
    interface which lists all categories.
    
    NOTE: This bug will not be reproducible if your first authorized value,
    alphabetically, has no values associated with it. For instance, if you
    delete all authorized values in the AR_CANCELLATION category.
    
    To test, apply the patch and go to Administration -> Authorized values.
    
    In the breadcrumbs menu you should see "Home -> Administration ->
    Authorized values."
    
    Clicking any of the authorized value categories in the list should take
    you to a view of that category's values.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f2519aec6fa2a3af0957faa60b7764471fa1305f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 27 12:39:20 2022 +0200

    Bug 31421: Add tests
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1fc56e0e47d07d2eadcdb62c6a5740aa9d51c6b2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Oct 20 14:13:37 2022 +0000

    Bug 31421: Add a limited option to template plugin
    
    This adds a specific 'limited' routine to the Categories plugin, and uses
    it for the new patron dropdowns
    
    To test:
    1 - Limit a patron category to some branches
    2 - Sign in not at one of those
    3 - Confirm the new patron dropdowns don't include the category
    
    Bug 31421: (follow-up) Add POD
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 29754226ea3b6bdaf896e5b8d19f44b1ed551e11
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Oct 6 19:13:10 2022 +0000

    Bug 31421: Do not apply library limits to Categories plugin
    
    This patch simply changes from using 'search_with_library_limits'
    to 'search'
    
    The limits I think are intended to prevent users from setting a patron to the wrong category,
    they are not meant to hide patrons. Or rather, they don't do that, patrons are returned in search
    but cannot be processed. The dropdowns as well won't contain the category, so you can see these
    patrons, but not filter by the category
    
    Bug 31422 and bug 31032 point out further issues with limits.
    
    For now, let's fix searching
    
    To test:
    1 - Edit Patron category 'Patron/PT'
    2 - Try to do a patron search that returns patrons in this category
    3 - See 'Processing' and error in JS console: Uncaught TypeError: categories_map[data] is undefined
    4 - Apply patch
    5 - Restart all and repeate
    6 - It works now!
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4aa8e9bc67925e8feb005dedb17eafd5b78e72dc
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 27 09:42:21 2022 -0300

    Bug 31991: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 34fa2c8ece692550fa769b6ca20dc1ee958545c1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 26 14:17:23 2022 +0000

    Bug 31991: Restore style of sidebar forms
    
    This patch restores the aside{} section of staff-global.scss from before
    the staff redesign and makes some tweaks to make it consisten with the
    redesign. The goal is to make the spacing of the form more compact but
    still readable, and to correct some layout inconsistencies.
    
    The patch also modifies the order filter form to fix the layout of some
    checkboxes.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    Test various pages with sidebar forms to confirm that the form looks
    readable and usable. For example:
    
    - Patrons
    - Acquisitions -> Invoices
    - Tools -> Tags
    - Serials -> Subscription search results
    - Overdues
    - Holds to pull
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a4530e5fa5d8ac073a4587e2c6ed94c9ea3611b2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 27 09:40:35 2022 -0300

    Bug 31996: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5a16db903a540a6e9acac77bed2dd5cc41ae49e5
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 26 17:37:28 2022 +0000

    Bug 31996: Make note-style messages consistent with dialogs
    
    This patch modifies the style of divs with the class "note," making them
    have the same background color as message dialogs as proposed in Bug
    31973.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    Confirm that the updated style looks good. Some pages where you can find
    examples:
    
    - Administration -> Authorized values -> View a categories values.
    - Administration -> Search engine cofiguration (with Elasticsearch
      enabled).
    - Cataloging -> Batch record deletion -> Submit a list of biblionumbers.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 934b2bf1d900012de8a89d567efdbf72002e1cf0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 27 09:39:15 2022 -0300

    Bug 31973: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a60b7f5ed0bfb32b00849e6326efc7bb75f1dbfd
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 25 15:32:50 2022 +0000

    Bug 31973: Restore background color to message-style alerts
    
    This patch restores the background color to message-style alerts, those
    which use the markup <div class="dialog message">. These alerts should
    stand out more to the user.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    - Test areas which use the message-style dialog. Perhaps the easiest
      example is to try to view a bibliographic record which doesn't exist:
    
      /cgi-bin/koha/catalogue/detail.pl?biblionumber=1234567890
    
    - It can also be found as a confirmation when deleting a basket in
      Acquisitions, deleting a patron attribute type in Administration,
      updating a Z39.50 server in Administration, etc.
    
    - Confirm that the alert looks correct and is suitable visible.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 63b98248927ef93008fd7a6a9e9d1705e8e65df9
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Oct 26 22:21:22 2022 +0000

    Bug 31952: (QA follow-up) Fix capitalization: Local Use
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4a87004c1dbea83df418ab7200b4eb1c8e49e149
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Oct 24 21:50:04 2022 +0000

    Bug 31952: Fix broken layout on system pref search
    
    TO test:
    1. Do an empty system pref search
    2. Layout is broken.
    3. Apply patch, restart_all
    4. Do another empty system pref search, the layout should be fixed.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7e4d03cd1dab9892b4c9bbd06f19bc08689d7dd5
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Oct 24 22:17:08 2022 +0000

    Bug 31910: Fix list and add page-section to request-article.tt
    
    To test:
    1. Apply patch
    2. Look at article request form and ensure the fields and labels look good.
    3. Ensure there are no more bullet points on the list.
    4. Make sure the page-section div around the item selection looks good.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d4b6fcc0f3b72a4a07a601dc72f6d651f54654b7
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 26 11:19:07 2022 +0000

    Bug 31905: Fix button spacing on holds page
    
    This patch makes minor modifications to the holds template in order to
    improve the display of the hold buttons related to existing holds.
    
    The patch also adds "display:none" to the hold cancellation fieldset so
    there isn't a flash of content before JavaScript hides it.
    
    To test, apply the patch and locate a record in the catalog.
    
    - Place one or more holds on the record.
    - View the holds for that record.
    - Under the "Existing holds" heading there should be a toolbar of
      buttons which sits above the page-section div. The buttons should be
      well spaced.
    - If you have cancellation reasons defined in authorized values, the
      "Cancel selected" button should correctly trigger a modal with the
      option to specify a cancellation reason.
    - The display should work well for any setting of the HoldsSplitQueue
      system preference.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 40a40752e3631f8a53e131a446ce8d5b76004925
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Oct 26 08:35:38 2022 +0100

    Bug 31162: (follow-up) Fix www/batch.t
    
    This patch updates the t/db_dependent/www/batch.t test for the
    change of navigation.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5f8126aef3cd9e2162053b691b83ada6309d8149
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Oct 26 08:30:55 2022 +0100

    Bug 31162: (follow-up) Fix Mocks/Zebra.pm
    
    This patch updates the t/lib/Mocks/Zebra.pm testing module for the
    change of navigation.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a31a6bb3523d8b67332978bfae8d1a07cca26edc
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 25 14:36:45 2022 -0300

    Revert "Bug 23012: get_lostreturn_policy returns a scalar"
    
    This reverts commit c2fee12cd0f652b16929eb503793e3594e778a23.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fadf26c430de27765f1b3ab9fe9c2f1f26095203
Author: Marion Durand <marion.durand@biblibre.com>
Date:   Fri Oct 8 16:58:36 2021 +0200

    Bug 25387: The order of authority subfield is not sent over to bibliographic record
    
    When creating an authority record there is the possibility to reorder
    the subfield. However this order is not sent back to the bibliographic
    records when using this authority in a bibliographic record.
    
    This patch make the order of subfield be sent back to bibliographic
    record when the autority is used.
    Field that are fill are sent to the begining of the bibliographic record
    in the same order as in the authority record.
    
    Test plan:
    1- Find or create an authority record and reorder some subfield
    2- Use this authority in a bibliographic record
    3- Observe that the order of the subfield is not transferred from the
       authority record to the bibliographic record
    4- Apply the patch
    5- Repeat step 1 and 2 again
    6- Observe that the order of the subfield is now transferred from the
       authority record to the bibliographic record
    
    https://bugs.koha-community.org/show_bug.cgi?id=22666
    
    Signed-off-by: George Veranis <gveranis@dataly.gr>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 93d44d18759d43a09f6c623ffe4fa81dca4dcaa2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 20 09:38:57 2022 +0200

    Bug 31196: Remove 'default_value_for_mod_marc-' clear_from_cache calls
    
    We are seeing the following lines several times in the codebase
      $cache->clear_from_cache("default_value_for_mod_marc-");
    
    But values are never set for this key.
    
    Test plan:
    Ask you, "Is the above correct?"
    Use the correct 'git grep' and 'git log' and confirm the assertion.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1090ebed09459196241284e299496a1e2247eb99
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 25 12:24:22 2022 +0200

    Bug 30952: Fix selenium/basic_workflow.t
    
    Error while executing command: no such element: Unable to locate element: //*[@id="circ_returns_checkin"]/div[2]/div[1]/div[2]/button at /usr/share/perl5/Selenium/Remote/Driver.pm line 411.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0dc43ccf73a0ab5a0be63e291eea111ff46788a0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 25 12:20:58 2022 +0200

    Bug 30952: Fix selenium/administration_tasks.t
    
    Cannot wait more for element '//input[@type="submit"]' to be visible at /kohadevbox/koha/t/lib/Selenium.pm line 189.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 13ad2132737cdfb2ae7c1daeffd733a383610f09
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Sep 23 14:22:37 2022 +0000

    Bug 31609: JavaScript error on Additional contents main page
    
    This patch makes a minor modification to the JavaScript
    on the Additional contents page to prevent an error when
    there are no tabs present on the page.
    
    The JS needs an additional check so that it doesn't run
    when there are no tabs.
    
    To test you should have more than one language installed.
    
    - Before the patch, you would see a JavaScript error in
      the console: "Uncaught TypeError: can't access property
      "hash", firstTab[0] is undefined."
    - Apply the patch and go to Tools -> Additional
      contents.
    - With the patch applied there should be no error on the
      additional contents main page.
    - Try creating or editing additional contents entries to
      confirm that the interface still works correctly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2bc0433b97632e4fa9d625ce60eb761fa89dfc19
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 24 18:52:35 2022 -0300

    Bug 25716: (QA follow-up) Make sure a comment doesn't break tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c2fee12cd0f652b16929eb503793e3594e778a23
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 24 18:36:46 2022 -0300

    Bug 23012: get_lostreturn_policy returns a scalar
    
    On commit 4d994773f83468b561896939f16131d0332d9cfc
    Koha::Item->_set_found_trigger gets the call to get_lostreturn_policy()
    changed so it expects a hashref instead of the scalar it returns. This
    patch adjusts it back.
    
    To test:
    1. Run:
       $ kshell
      k$ prove t/db_dependent/Koha/Item.t
    => FAIL: Tests fail!
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: Tests pass!
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ca37a33e05b6cff96c436392831d2a1c523546e6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 24 17:56:06 2022 -0300

    Bug 24381: DBRev 22.06.00.072
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7f4536c715a2165874a3ef3ae70a2d5baeff2a0f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 24 17:53:46 2022 -0300

    Bug 24381: Update db_rev to new style
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4db22138014f2cf6fbe9a295dd4ca30c6453e68d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 22 21:30:57 2022 +0000

    Bug 24381: (follow-up) Add USE statements
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 36e07f5ce20b14bb1e097db2415b9aacbf0c8ed8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 13 12:28:31 2020 +0100

    Bug 24381: (follow-up) Notice improvements
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 25ed7f9d6291e8e6bae00f7c5a0f4935e83e573c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jul 16 17:01:50 2020 +0100

    Bug 24381: Update notice params
    
    If the update to catch defaults fails, we need to attempt to update
    renamed template variables
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit baec57eb8e1124bd204446d059b0a75930ba4c32
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jul 16 14:35:43 2020 +0100

    Bug 24381: Update notices if defaults used
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5aa07d44c946775737fc9eb55e2612cb8b896fda
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jul 16 12:01:30 2020 +0100

    Bug 24381: Update sample notices
    
    This patch update the sample notices for new installs
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0f94711a10529b17751f2c260627b4dadd5150ae
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 24 17:45:45 2022 -0300

    Bug 23012: DBRev 22.06.00.071
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3ef09e1736af108b8c79906bef284097507d7ad5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Oct 24 11:20:38 2022 +0000

    Bug 23012: (QA follow-up) Add exec flag to db update
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit df604d1102f0d6314e657b6839bd1b227a88b18c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Oct 24 11:17:48 2022 +0000

    Bug 23012: (QA follow-up) No need to create and delete rules for branch
    
    The tests create a new branch to make sure one exists without rules. We then add a rule
    and delete it. We can simply create the new branch and never assign a rule
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4d994773f83468b561896939f16131d0332d9cfc
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Oct 24 11:13:32 2022 +0000

    Bug 23012: (QA follow-up) Combine method to get both values
    
    The code for get_processingreturn_policy was very similar to
    get_lostreturn_policy. Combining the two methods allows for use of
    get_effective_rules which uses get_effective_rule_value which is cached.
    This should reduce lines of code and improve performance
    
    Tests updated and adjusted as well
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d4556b786d12f5a8c70289181024056979707d93
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Oct 12 04:23:42 2022 +0000

    Bug 23012: Apply processing fee return policy when lost item found
    
    This enhancement gives the ability to set a policy for the lost item
    processing fee that may get charged additional to the lost item
    replacement cost. The processing fee can be:
    - refunded
    - refunded if unpaid
    - kept
    
    To test:
    
    Set-up
    
    1. Find an item, Item A. Go to Administration -> Item types and edit the
    item type for Item A. Add a default replacement cost and a processing
    fee and Save.
    2. Go to Administration -> system preferences and set the following:
    - WhenLostChargeReplacementFee: Charge
    - BlockReturnOfLostItems: Don't block
    3. Scroll down to the default lost item fee refund on return policy. Set
    the refund lost item replacement fee policy to 'refund lost item charge'.
    4. Edit Item A and set a replacement cost.
    
    Reproduce
    
    5. Check out Item A to Patron A.
    6. Click the barcode to view Item A's information. Edit Item A and set
    the Lost status to 'lost'.
    7. Go back to Patron A's checkouts. The item should now be checked in
    with two new charges applied - a lost item fee (the item's replacement
    cost) and a lost item processing fee (set in item types).
    8. Check in Item A to mark it as found.
    9. Go back to Patron A's account. Notice the lost item fee has been
    refunded, but the processing fee remains.
    10. Manually pay or write off the processing fee. This enhancement
    removes the need for this manual step.
    
    11. Apply the patch and restart services
    
    Test with lost item - refund
    
    12. Go to Administration -> circulation and fines rules. Scroll down to
    the default lost item fee refund on return policy. Notice there is now a
    refund lost item processing fee policy. Set this to 'refund lost item
    processing charge'.
    13. Repeat steps 6 to 9.
    14. Go back to Patron A's account. Both the lost item fee and processing
    fee should have been refunded.
    
    15. Repeat steps 6 to 8 (do not check it yet).
    16. Go back to Patron A's account. Pay the processing fee.
    17. Repeat step 9.
    18. Go back to Patron A's account. Both the lost item fee and processing
    fee should have been refunded (you'll now be in a credit because the
    paid processing fee was also refunded).
    
    Test with lost item - refund_unpaid
    
    19. Go to Administration -> circulation and fines rules. Scroll down to
    the default lost item fee refund on return policy. Notice there is now a
    refund lost item processing fee policy. Set this to 'refund lost item
    processing charge (only if unpaid)'.
    20. Repeat steps 6 to 9.
    21. Go back to Patron A's account. Both the lost item fee and processing
    fee should have been refunded.
    
    22. Repeat steps 16 to 19.
    23. Go back to Patron A's account. The lost item fee should have been
    refunded but not the processing fee, as this was already paid.
    
    Test with lost item - leave
    
    24. Go to Administration -> circulation and fines rules. Scroll down to
    the default lost item fee refund on return policy. Notice there is now a
    refund lost item processing fee policy. Set this to 'leave lost item
    processing charge'.
    25. Repeat steps 6 to 9.
    26. Go back to Patron A's account. The lost item fee and processing fee
    should have been refunded but not the processing fee.
    
    Other tests
    
    27. Confirm tests pass
    - t/db_dependent/Koha/Item.t
    - t/db_dependent/Koha/CirculationRules.t
    
    Sponsored-by: Auckland University of Technology
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ea8c2959daa98f0a5da2f916a5de08402be1f6cc
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Oct 12 04:22:31 2022 +0000

    Bug 23012: Set policy for lost item processing fee
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 974359ed85db6eac684d68d64f6c6af45a52a716
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Oct 12 04:11:33 2022 +0000

    Bug 23012: Show the PROCESSING_FOUND account credit type
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b213d7937f939f0f9fcdbe537425db8fdc60be70
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Oct 12 04:01:20 2022 +0000

    Bug 23012: Database updates for PROCESSING_FOUND account credit type
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4b0fe5cf0541fb3b565573a8997db8319f7d8585
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Aug 8 22:09:34 2022 +0000

    Bug 22321: (follow-up) Fix number of planned tests in Illrequests.t
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8ac3a5beec444c443cc9af65187f8dfbcfbe4f47
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Tue Feb 22 14:13:58 2022 +0000

    Bug 22321: Fix store() crash when modifying borrowernumber of a new ILL request
    
    To test:
    1. prove t/db_dependent/Illrequests.t
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Tried to change the borrowernumber connected to an ILL request
    and checked that the associated hold was updated to the new
    patron as well.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c99c42d5d43593c8ad12f85f7662a63a2f00f629
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Tue Feb 22 14:08:34 2022 +0000

    Bug 22321: Unit test for new()->borrowernumber()->store()
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d718ac8dbd61c7409665310e162945b09e990ba1
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Mon Feb 14 11:21:11 2022 +0000

    Bug 22321: Allow managing the borrowernumber tied to ILL request
    
    Sometimes an ILL request is connected to the wrong borrower, and it
    would be nice to be able to connect it to the right one.
    
    In Swedish ILL the cardnumber of the patron connected with an ILL
    request is entered into the central Libris system and then propagated
    to Koha through the Libris API. This can lead to errors, and we have
    created a dummy "ILL patron" to catch these. It would then be good
    to be able to connect the ILL to the right patron in Koha.
    
    This commit makes it possible to edit illrequests.borrowernumber.
    
    To test:
    1. Apply patch
    2. Create two patrons, A and B
    3. Create a new ILL request for patron A
    4. Add a hold for patron A where biblionumber is the biblio tied
       to this ILL request
    5. Go to
    cgi-bin/koha/ill/ill-requests.pl?method=edit_action&illrequest_id=161
    6. Observe Patron ID is editable
    7. Change borrowernumber to patron B's borrowernumber
    8. Click save
    9. Observe ILL request is now for patron B
    10. Go to patron B's details at
    cgi-bin/koha/members/moremember.pl?borrowernumber=B_borrowernumber
    11. At the bottom section of the page, click 1 Hold(s)
    12. Observe the hold you placed at step 4 has transferred to
        patron b
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c10aaa9d334c56bb01ca9034fbb6ac86559e1c30
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Mon Feb 14 11:16:31 2022 +0000

    Bug 22321: Update holds borrowernumber when ILL request borrowernumber changes
    
    To test:
    1. prove t/db_dependent/Illrequests.t
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 794b2dd81ca9ca2c786044d8ef07c7d6e926e673
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Mon Feb 14 11:14:36 2022 +0000

    Bug 22321: Add unit tests
    
    To test:
    1. prove t/db_dependent/Illrequests.t
    2. Observe test failure
    
        1..3
        ok 1 - before change, original borrowernumber found
        not ok 2 - after change, changed borrowernumber found in holds
        #   Failed test 'after change, changed borrowernumber found in holds'
        #   at t/db_dependent/Illrequests.t line 167.
        #          got: '3786'
        #     expected: '3787'
        ok 3 - after change, changed borrowernumber found in illrequests
        # Looks like you failed 1 test of 3.
    not ok 4 - store borrowernumber change also updates holds
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 246658a04a04443f595b8b71e310ffd5d9b0aef5
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Tue Sep 13 14:14:22 2022 +1200

    Bug 31553: Ensure news item content field is always editable
    
    Set a padding at the bottom of the news item editor body.
    
    This is a tricky bug to replicate.
    
    Test plan:
    1. Set 'AdditionalContentsEditor' syspref = 'a WYSIWYG editor
    (TinyMCE)'.
    
    2. Select multiple languages in the 'OPACLanguages' system preference.
    
    3. Go to: Tools > News.
    
    4. Create a new news item. Switch between the different language tabs.
    
    5. Confirm you can always input into the content field in all languages.
    
    6. Edit an exiting news item. Switch between different language tabs.
    
    7. Confirm you can always input into the content field in all languages.
    
    Sponsored-by: Toi Ohomai Institute of Technology, New Zealand
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7c4dfc6d6cf24b243eec20495414a0b89d36e2f7
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Oct 15 19:41:03 2022 +0000

    Bug 31730: (QA follow-up) Only link category name
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8e739ab00c092565ce6fe1e3f17b46834717ade2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 10 17:09:27 2022 +0000

    Bug 31730: Link to authorized value interface when an authval is mentioned in preferences
    
    This patch adds links to the authorized value interface anywhere an
    authorized value category is mentioned in a system preference
    description.
    
    To test, apply the patch and go to Administration -> System preferences.
    
    - Check these preferences:
      Circulation -> ILLHiddenRequestStatuses
      Circulation -> BundleLostValue
      Circulation -> BundleNotLoanValue
      Circulation -> ClaimReturnedLostValue
      Accounting -> RequirePaymentType
    - Confirm that the link in the description of each preference takes you
      to the correct authorized value category.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 54d7f8b174c2f50f98115c8ec57f46be73784015
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Aug 31 11:57:16 2022 +0000

    Bug 31495: Allow opac-page when enforcing GDPR policy
    
    Test plan:
    Add some page under Additional contents.
    Enforce GDPR policy.
    Test with user that has no consent (yet or anymore).
    Check if you can reach additional contents with opac-page.pl.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ffe47b2cb0a0b037e982e9e4d4a0f38994a6595a
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Sun Jul 1 23:33:07 2018 +0000

    Bug 7960: Add class to item type descriptions so they can be hidden with CSS
    
    This patch adds the class "itypetext" around item type descriptions so
    they can easily be hidden with CSS.
    
    To test:
    1. Navigate to the pages listed below to confirm that the text
    descriptions do show.
    2. Add
    .itypetext { display:none; }
    to IntranetUserCSS and OPACUserCSS system preferences and save.
    3. Go back to the pages listed below and confirm that the text
    descriptions DO NOT show.
    
    = STAFF CLIENT =
     - catalogue/advsearch.tt
     - catalogue/detail.tt
     - catalogue/results.tt
     - reserve/request.tt
     - virtualshelves/shelves.tt
    = OPAC =
     - opac-advsearch.tt
     - opac-detail.tt
     - opac-readingrecord.tt
     - opac-reserve.tt
     - opac-shelves.tt
     - opac-user.tt
    
    Refer to David Nind's test notes from Comment 23 for a more detailed
    plan for acessing these pages.
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: Charles Farmer <charles.farmer@inLibro.com>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eeead6443ff0ecb73eb6c1a2c61f624e25ded6ca
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Oct 24 12:33:06 2022 +0100

    Bug 31940: Add page-section to library-groups
    
    This patch adds the page-section div around each library-groups table.
    
    Test plan
    1) Check that the 'card' views appear appropriates on the library groups
       maangement page
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1ccf21159bee96b2a50e914beaa4ca20231c8a03
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Fri Oct 21 17:45:59 2022 -0400

    Bug 31923: Add warning sign and span
    
    This patch adds a small warning sign before the sentence and also puts
    the sentence inside a span.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0890413d278af984c727acb157b02aeff36f015e
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Fri Oct 21 17:34:13 2022 -0400

    Bug 31923: 'Ignore' tab description is misleading
    
    This patch modifies the description of the 'Ignore' tab in
    MARC bibliographic and authority framework administration
    to add that not only does the 'ignored' subfield not appear
    in the editor, but the subfield will also be deleted from the
    record.
    
    To test:
    1. Go to Administration > MARC bibliographic framework
    2. Click 'Actions' next to any framework and choose 'MARC structure'
    3. Click 'Actions' next to any field and choose 'Edit subfields'
    4. Check the hint/description under 'Managed in tab' and make sure it
       - makes sense
       - is written in correct english (syntax and spelling)
       - mentions that the subfield's value will be deleted from the record
    5. Go to Administration > Authority types
    6. Redo steps 2-4 for authority frameworks
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d7d33744ba34ef95aa3845ca4160abdece4d0f7a
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Oct 7 08:41:20 2022 +0000

    Bug 19693: (QA follow-up) Replace changed tag test
    
    The test
      $MARCfrom->field('1..', '2..'))[0]->tag ne ($MARCto->field('1..', '2..'))[0]->tag
    is not completely consistent with following code in sub merge.
    I decided to get the authtype code from the old record that comes
    from Koha and should include the type.
    Remaining changes refer to indentation/comments.
    
    Test plan:
    Run t/db_dependent/Authority/Merge.t
    Note: The test actually could be extended a bit for mocking MARC
    flavor, but needs some additional framework support to work.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 03da66ce20ea6b8dd9e46841c3c8df427efbe4e4
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Mon Jul 25 22:46:58 2022 +0200

    Bug 19693: Update of an authority record creates inconsistency when the heading tag is changed
    
    In those rare cases when authorities are updated by an external agency (or
    even internally, by reviewing and correcting an exported authority file)
    when the heading tag will be changed (seems odd but happens:
    
    111 Congress ==> 110 Corporate body.Congress ;
    100 Person ==> 110 Corporate body (a company named with person's name ;
    151 City--object ==> 150 Object (city) etc.)
    
    and then the authority record in Koha database will be updated with
    bulkmarcimport or by calling directly ModAuthority from a custom script,
    the merge function "doesn't know" that the change to the authority type
    has been made and, consequently, doesn't adequately change the tag in
    related fields in biblio records (as it would if two different records
    with different authtypecode were merged with Koha interface).
    
    This is because at the moment when merge function is being called
    by ModAuthority:
    Koha::Authority::Types->find($autfrom->authtypecode)
    Koha::Authority::Types->find($authto->authtypecode)
    both have the same value (because $mergefrom == $mergeto).
    
    Therefore in case when $mergefrom == $mergeto and the heading tag changes,
    $authtypefrom and $authfrom calculated in merge in the ordinar way are
    misleading and should not be taken unto consideration.
    
    Test plan:
    ==========
    
    1. run t/db_dependent/Authority/Merge.t
    2. you should see problems in "Test update A with modified heading tag
       (changing authtype)"
    3. apply the patch
    4. run t/db_dependent/Authority/Merge.t again
    5. the test should pass
    
    Alternatively:
    
    1. have an authority record used in biblio;
       export it to file;
       change 1XX heading tag to a different (but reasonable) value
       and possibly change also the content of the heading
       (one can delete also 942 but it doesn't matter);
       make bulkmarcimport.pl -a -update -file <modified_auth_file> and
       see that the tag in biblio record has not been changed (whereas
       the type of authority record did change);
    
    2. make orders in database (so that the authority type and the tag of
       the field in biblio record correspond); apply the patch;
    
    3. repeat the test from 1.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4d75a9b3b786d75e1afb5f66e51f48e9e503d454
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Mon Jul 25 22:27:32 2022 +0200

    Bug 19693: Add test sub to Merge.t
    
    In those rare cases when authorities are updated by an external agency (or
    even internally, by reviewing and correcting an exported authority file)
    when the heading tag will be changed (seems odd but happens:
    
    111 Congress ==> 110 Corporate body.Congress ;
    100 Person ==> 110 Corporate body (a company named with person's name ;
    151 City--object ==> 150 Object (city) etc.)
    
    and then the authority record in Koha database will be updated with
    bulkmarcimport or by calling directly ModAuthority from a custom script,
    the merge function "doesn't know" that the change to the authority type
    has been made and, consequently, doesn't adequately change the tag in
    related fields in biblio records (as it would if two different records
    with different authtypecode were merged with Koha interface).
    
    This is because at the moment when merge function is being called
    by ModAuthority:
    Koha::Authority::Types->find($autfrom->authtypecode)
    Koha::Authority::Types->find($authto->authtypecode)
    both have the same value (because $mergefrom == $mergeto).
    
    Therefore in case when $mergefrom == $mergeto and the heading tag changes,
    $authtypefrom and $authfrom calculated in merge in the ordinar way are
    misleading and should not be taken unto consideration.
    
    Test plan:
    ==========
    
    1. run t/db_dependent/Authority/Merge.t
    2. you should see problems in "Test update A with modified heading tag
       (changing authtype)"
    3. apply the patch
    4. run t/db_dependent/Authority/Merge.t again
    5. the test should pass
    
    Alternatively:
    
    1. have an authority record used in biblio;
       export it to file;
       change 1XX heading tag to a different (but reasonable) value
       and possibly change also the content of the heading
       (one can delete also 942 but it doesn't matter);
       make bulkmarcimport.pl -a -update -file <modified_auth_file> and
       see that the tag in biblio record has not been changed (whereas
       the type of authority record did change);
    
    2. make orders in database (so that the authority type and the tag of
       the field in biblio record correspond); apply the patch;
    
    3. repeat the test from 1.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fea57940dd2e1568d5b796e67c17d76c4dd195c3
Author: David Nind <david@davidnind.com>
Date:   Sun Oct 23 23:13:03 2022 +0000

    Bug 31931: Terminology for HoldsSplitQueue - use staff interface
    
    Rename "..staff client.." to "..staff interface.." in the description for the
    HoldsSplit Queue system preference, as per the terminology guidelines.
    
    Test plan.
    1. View the description for the HoldsSplitQueue system preference.
    2. Note that the description says "..staff client..".
    3. Apply the patch.
    4. Note that the description now says "..staff interface.." as per the
       terminology guidelines (https://wiki.koha-community.org/wiki/Terminology#S).
    5. Sign off :D
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7d33066caac4060b4a77c44263e690641c8653e4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 24 17:12:05 2022 -0300

    Bug 31906: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 022760461edfd5c85dd80f3c4dbc26c2483dffb1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 24 15:37:22 2022 +0000

    Bug 31906: Fix alignment of managed by button on basket summary page
    
    This patch makes a couple of changes to CSS which affect, globally, the
    alignment of labels in forms. With lables corresponding to text areas or
    other multi-line controls, the label should be aligned with the top of
    the control.
    
    This patch also changes the inline style attribute on the control that
    lets a user add an additional manager to a basket in acquisitions. It
    requires an update to work with the new default form layout.
    
    To test, apply the patch and go to Acquisitions -> Vendor -> Baskets.
    
     - View the details of a basket.
     - You should see a line labeled "Manged by." The label should be
       top-aligned to match the "Add user" link next to it.
     - Test that the link works correctly and that the layout is correct
       after adding additional managers.
    
    View other forms in the staff interface to confirm that the changes
    work correctly and have not broken layout anywhere else. For instance,
    in the patron add/edit form, the "Contact note," "OPAC note," labels etc.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 456448c7d4bc228f04e939e8dbdc1cf765c4e311
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 24 14:08:37 2022 +0000

    Bug 31834: Replace incorrect "table" class from MARC imports table
    
    The table containing staged MARC record batches has a "table" class
    added to the <table> tag, which is inconsistent with other tables in the
    staff interface. The class pulls in default table styles from Bootstrap
    which aren't consistent.
    
    There are a few other non-DataTable tables have the the class
    "dataTable" added in order to make them more consistent. I think this
    table should have that class too. The template is also modified to give
    the table a <thead> and <tbody>, with indentation corrected accordingly.
    
    To test, apply the patch and go to Cataloging -> Manage staged records.
    
    The table of staged records should look correct, with style matching
    DataTables elsewhere in Koha, e.g. Administration -> Libraries.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5bc1b249de8714925acb1485b0aaabe69e4db36b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 24 17:10:18 2022 -0300

    Bug 31927: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a1c7eac903b9df596b98f507445c96b1ec5396c3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 24 12:21:50 2022 +0000

    Bug 31927: Use bigger font-size for bibliographic information on staff details page
    
    This patch removes the adusted font size from the definition of the
    .results_summary spans. The percentage decrease was being multiplied
    with another rule.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    Locate a bibliographic record in the staff client and view the detail
    page. Confirm that the bibliographic information is displayed in a
    comfortable size.
    
    Also test that catalog search results still look correct.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0995d2490cd7b60d2309b93110deee087c4974cb
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Oct 24 14:37:44 2022 +0100

    Bug 31911: (follow-up) Rename second level heading
    
    This patch, as suggested, renames the second level heading to 'Items in
    collection' and move the 'Total items: {count}' into a paragraph.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4a7b64a616ed0f701d0b9d5648c76c7d0ba18e89
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 21 15:14:56 2022 +0100

    Bug 31911: Improve rotating collections item management
    
    This patch renames 'Add/remove items from collection' to just 'Manage
    items' in the button in the rotating collections list table, the page
    heading and the breadcrumbs.
    
    We also move the heading below the toolbar to be consistent with
    elsewhere, remove a superflous second level heading and wrap the content
    table in a page-section too.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dd7722fd18b595653888fb9ce8529979bcf0c332
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Oct 24 15:02:53 2022 +0100

    Bug 31812: Update 'Stage for import' button to be primary
    
    This patch updates the 'Stage for import' input to be of type="submit"
    and classes is a "button".. This gives it the yellow main action
    hinting.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ce6eb5859ae181920b4a178a0c028b04d7a7e038
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 24 15:42:10 2022 -0300

    Bug 31831: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 75959c951dc56326bff04521c57a0871e9f87893
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 24 13:55:11 2022 +0000

    Bug 31831: Make inactive search options font slightly bigger
    
    This patch removes the reduced font size from the "tab" links in the
    header search form (the links for switching between search forms). This
    makes the links the same size as the search form label.
    
    To test, apply the patch and rebuild the staff client CSS.
    
    On any page in the staff interface, test the appearance and behavior
    of the header search form. The controls should be clear and readable.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6a6dc3cb0faf21f677fed089b2bf5578a1ecd44e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Oct 24 15:37:42 2022 +0100

    Bug 31882: Correct titles for pages in new cataloging module
    
    To test:
    1. Apply patch
    2. Set system preference 'StockRotation' to enable.
    3. Be logged in as a superlibrarian
    4. Check the page titles for all pages, accessible from the
       Cataloging module homepage
    
    https://bugs.koha-community.org/show_bug.cgi?id=31882
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9bd1f13de36ad3e67f9500b64ffa58b33c86b183
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 21 16:06:44 2022 +0100

    Bug 31917: Headings fix for preferences search
    
    This patch re-arranges the logic for displaying the search term when
    executing a system preference search.
    
    Test plan
    1) Without the patch, search for something that will get no results
       'boing' and note how it looks
    2) Without the patch, search for something that gets some results
       'block' and note how it looks
    3) Apply the patch
    4) Repeat your searches and comment on whether the look is better of
       worse ;P
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0427aa71fa90a163589f4555e5665aca77c23543
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Oct 24 18:25:21 2022 +0000

    Bug 31929: Radio inputs need to be outside of respective labels
    
    1. Apply patch
    2. Go to Acquisitions and edit or create a vendor.
    3. Look at the radio buttons in the Ordering information section.
    4. They should be properly aligned.
    5. Make sure the form still works and you can save changes.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7b6b7a4a3ab6190d385fceee56e11294ad6f6d58
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Oct 24 17:45:08 2022 +0000

    Bug 31955: Add page-section div to additional-fields.tt
    
    To test:
    1. Apply patch
    2. Look at Administration > Additional fields.
    3. Each of the 4 tables should have a page-section div around it:
    
        Order baskets (aqbasket)
        Subscriptions (subscription)
        Account lines (credit) (accountlines:credit)
        Account lines (debit) (accountlines:debit)
    
    Note: There are some indentation changes.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 89892fa5d843745011248fffdbf70054761abac9
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 22 20:11:08 2022 +0000

    Bug 25763: (follow-up) Fix display and remove 'No fund'
    
    This patch adds a fieldset around the inputs to style them as other places in Koha
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 810c256b591c9df53c0409aefbdad14f4c1a1a6b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jun 15 21:06:38 2020 +0000

    Bug 25763: Allow updating of order fund from invoice
    
    To test:
     1 - Receive some orders via acquisitions
     2 - View the invoice with these orders
     3 - Click 'Modify fund' on the received orders list
     4 - Confirm you can change the fund
     5 - Set some authorised value categories for funds
     6 - Reload the invoice
     7 - Confirm the categories dropdowns change when different funds selected
     8 - Confirm updating the statistic fields saves correctly
     9 - Add an inactive budget with some funds
    10 - Test the 'show inactive' button on shipment fund, adjustments, and modifying order fund
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6cc3a85eb13042c49a9ba1742fce0f0741949fa5
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Oct 17 19:24:32 2022 +0000

    Bug 31459: (QA follow-up) Add missing TT filters
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=31559
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b86e5b542378c19ec8675a9beeb8d856c9b057c8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Oct 17 11:56:57 2022 +0000

    Bug 31459: (follow-up) Return 'Keep current' option
    
    This patch restores the option to keep current budget, in the case that receiver can receive, but cannot order on current budget
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=31559
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2a22c13cf38b45c145fc3ece7d044fefb1dd78e5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 12 14:55:55 2022 +0000

    Bug 31459: (follow-up) Preserve budget period display
    
    This patch adds a level to the budget_loops and displays the budgets
    as optgroups for the funds
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=31559
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 24e7703aef42b2e9e7900dc36eb5c8f1d3f73e4f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Aug 25 11:26:33 2022 +0000

    Bug 31459: Use the same dropdown as when adding orders to a basket
    
    Current order receive code loops over each budget period and gets the hierarchy, this
    is slow when systems have many budgets. Additionally, the list includes inactive items
    by default
    
    We can switch to a single call, and add consistency by adopting the same dropdown as used
    when placing an order
    
    To test:
    1 - Add some budgets with funds - ensure you have at least one inactive budget and fund
    2 - Place an order, observe the fund selection menu
    3 - Close basket, receive order, observe the fund menu
    4 - Apply patch
    5 - Cancel receipt
    6 - Receive again
    7 - Observe fund menu, confirm it matches the order placing menu
    8 - Confirm inactive are not displayed by default, but are when button is checked
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=31559
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b0cf6c087b9e23467b98faecd3eac1ec0d6bc968
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 25 09:23:25 2022 +0200

    Bug 31219: Prevent JS injection in patron extended attributes
    
    We are sanitizing other attributes but "extended patron attributes".
    
    Test plan:
    Make a patron attribute editable at the OPAC
    Edit an existing patron, or register a new one
    Use a script tag in the new value ("<script>alert("booh!")</script>" for
    instance)
    With this patch the value is remove if containing an HTML tag that is
    not br b i em big small strong (see C4::Scrubber)
    
    Signed-off-by: Mark Hofstetter <koha@trust-box.at>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 57ea65e725f4208274023c4cdc63fd90ab6014ed
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jun 23 11:40:44 2022 +0000

    Bug 15048: Index all possible searched subfields for index-term-genre
    
    Currently we only index a - but we can setup the system such that avxyz are searched
    
    To test:
     1 - define both a 655$a *and* 655$x value in a bib, save, reindex
     2 - Set system preferences:
          TraceSubjectSubdivisions: Include
          TraceCompleteSubfields: Force
     3 - View the record edited above in the opac
     4 - Click on the subject heading
     5 - No results found
     6 - Copy zebra files:
      sudo cp ./etc/zebradb/marc_defs/marc21/biblios/biblio-koha-indexdefs.xml \
      /etc/koha/zebradb/marc_defs/marc21/biblios/biblio-koha-indexdefs.xml
      sudo cp etc/zebradb/marc_defs/marc21/biblios/biblio-zebra-indexdefs.xsl \
      /etc/koha/zebradb/marc_defs/marc21/biblios/biblio-zebra-indexdefs.xsl
     7 - restart all and reindex
     8 - Click on the subject heading in OPAC
     9 - Sucess!
    10 - Repeat with other fields (vyz)
    11 - Repeat under ES, reindexing and resetting mappings
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 93301b152c9ab5476d974e05b23b0ed28a83dc44
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Aug 29 12:51:05 2022 +0000

    Bug 22678: (follow-up) Array ref expected in context key
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c8dd361a36e79923d3121044c6ccdf611761fa51
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Aug 29 09:58:38 2022 +0000

    Bug 22678: Replace a few unneeded Koha::Logger calls
    
    We have Koha::Logger via the Mojo app now.
    
    Test plan:
    Run perl t/db_dependent/api/v1/unhandled_exceptions.t
    Your plack-api-error.log should contain something like:
        [2022/08/29 12:15:25] [ERROR] DELETE /api/v1/patrons/1052: unhandled exception (Koha::Exception)<<Exception 'Koha::Exception' thrown 'delete died'>>
    
    Bonus:
    Add one line to Koha/REST/Plugin/PluginRoutes.pm:
        $app->log->error('PluginRoutes L49');
    Before the line with if ( C4::Context->config("enable_plugins") )
    Restart and hit the API once again.
    Your log should contain: [2022/08/29 12:21:55] [ERROR] PluginRoutes L49
    This serves to demonstrate that the $api->log change in PluginRoutes works.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 490a056f59d0aae52fde84e3450f29b3bc09c87d
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Aug 25 23:59:42 2022 +0000

    Bug 22678: Use Koha::Logger for Mojolicious API logger
    
    This patch adds Koha::Logger as the Mojolicious logging object
    for the API Mojolicious app.
    
    Test plan:
    0. Apply the patch and koha-plack --restart kohadev
    1. Add $c->app->log->debug('DEBUG') and
    $c->app->log->warn('WARN') to a API controller like
    Koha::REST::V1::Libraries
    2. koha-plack --restart kohadev
    3. Go to the API route tied to that API controller method
    4. Look at /var/log/koha/kohadev/api-error.log
    5. Note that 'WARN' appears but 'DEBUG' does not
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] Adding a context sub to Koha::Logger to get it working.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c0920724ee7cc9e85b9459f3d7ca8f79e51840a7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 24 14:34:36 2022 -0300

    Bug 31715: Fix dbrev permissions
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7af246900c39f0851fcfbe14add5aad2175aaaa4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 24 14:19:42 2022 -0300

    Bug 31577: DBRev 22.06.00.070
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e982b7d953cbf20b37469770abd261fb47f82650
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Sep 19 21:32:12 2022 +0000

    Bug 31577: Use patron category multi-select for OpacHiddenItemsExceptions system preference
    
    We are now using the patron category selects on almost all system
    preferences, but OpacHiddenItemsExceptions was still missing.
    
    To test:
    - Before applying the patch:
    - Add patron categories to OpacHiddenItemsExceptions using |
    - Add configuration to OpacHiddenItems
    - Verify all works as expected in the OPAC
    - Apply patch, run database update
    - Verify the system preference shows the correct settings from before
    - Verify feature still works as expected
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 043017af13a80ad432c597699f35e50260ed21ca
Author: Björn Nylén <bjorn.nylen@ub.lu.se>
Date:   Wed Oct 12 11:54:11 2022 +0000

    Bug 31739: Password recovery from staff fails if previous expired reset-entry exists.
    
    SendPasswordRecoveryEmail relies on the calling script to tell if there is an
    existing valid recovery already. If there's an expired recovery-entry the
    members/notices.pl script will try to create a new entry resulting in a duplicate
    key error.
    
    This patch fixes the bug by removing the need for the calling script to do the check as
    since SendPasswordRecoveryEmail does the same thing anyway.
    SendPasswordRecoveryEmail will now use DBIx ->update_or_create instead of looking at
    the $update param to determine if it should update an existing entry or create a new.
    
    The update param is removed from all calling scripts and test are updated.
    
    To test:
    1. Generate a password recovery mail for a patron
    2. Let it expire.
    3. Generate a new password recovery from staff to the same patron - Fail!
    4: Apply patch
    5. Generate a new password recovery from staff to the same patron - Success!
    6. Opac password recovery flow should also work.
    7. Tests pass.
    
    Sponsored-by: Lund University Library
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 68212460a1f43f0eac25efa2b922ab4cdfa292ca
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Oct 24 17:02:55 2022 +0000

    Bug 31115: (QA follow-up) Use more specific permission for sidebar link
    
    Moves from any acq permission to edit_invoices.
    
    Manage order baskets uses order_manage, to this is supposed to make
    things a little more consistent.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 11e0d554f6226b516a6c08a95a0d31ca4144207b
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Oct 24 16:53:16 2022 +0000

    Bug 31115: (QA follow-up) Remove hr
    
    The hr created a visible white line with a darker background and
    doesn't make sense here style wise.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c02a1ea2a0b389bc6ce45784ec34ec09ccb23c55
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 20 16:10:25 2022 +0200

    Bug 31115: Add additional field filtering for invoice search
    
    This patch adds support for filtering invoice searches on additional
    fields. To test:
    
    1. Generate additional fields for invoices
    2. Have invoices with additional fields
    3. Use invoice searching and play with filtering by additional fields.
    => SUCCESS: It works!
    4. Sign off :-D
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 77eba5d1b23ba2ddabe8b70ff354bfdce86e6af8
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 19 17:13:13 2022 -0300

    Bug 31115: Add additional_attributes support to GetInvoices
    
    This patch adds support for searching additional_fields when retrieving
    invoices using C4::Acquisition::Invoices.
    
    To test:
    1. Apply this patch
    2. Run:
       $ kshell
      k$ prove t/db_dependent/Acquisition.t
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 45515c021a4bc54900bbc043a0dd1cad2c7d0ef0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 18 18:43:53 2022 -0300

    Bug 31115: Add invoice fields manage link
    
    This patch adds a link on the acquisitions page for reaching the
    additional fields config for invoices in an easy way.
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5c5f8f98069d9993cee6f7f5c80df40f7517e575
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 19 17:12:38 2022 -0300

    Bug 31115: Add support for additional fields for invoices
    
    This patch adds support for additional fields for invoices. A new option
    is added to the 'Additional fields' admin page, for the 'aqinvoices'
    table.
    
    Adding/editing invoices now supports this additional fields.
    
    To test:
    1. Apply this patches
    2. Verify the original test plan works
    => SUCCESS: It does!
    3. Sign off :-D
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cf114525d4594fa14ec7ed9cf8c33fb928f44368
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Oct 24 13:10:08 2022 +0100

    Bug 31945: Add page-section container to patron categories page
    
    This patch adds the page-section container to the patron categories
    administration page
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ae0688f29cb168174889d4706198fc46662bd611
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed Oct 5 11:36:56 2022 -0400

    Bug 31690: Add see from tracings in See-from index (Elasticsearch, MARC21)
    
    This patch adds the following fields to the See-from index
    
    - 450(abvxyz)
    - 451(avxyz)
    - 455(avxyz)
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2c673944ba8a5f2b785836dab562acdbb026ccee
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Sep 8 05:06:38 2022 +0000

    Bug 31532: Add preprocessor to Zebra indexing pipeline to index 880 as linked field
    
    This patch adds a preprocessor XSLT to the Zebra indexing pipeline,
    so that 880 fields get indexed as the fields they're linked to. For example,
    a "880 $6 245" field would be indexed as a "245" field.
    
    However, because the preprocessor only occurs in the indexing part of the pipeline,
    it does not affect the retrieval of MARCXML from Zebra. That MARCXML will be
    the same MARCXML that was sent to Zebra from Koha.
    
    Test plan:
    
    0. Revert bug 15187, and apply patch for 31532
    1. cp ./etc/zebradb/biblios/etc/dom-config.xml /etc/koha/zebradb/biblios/etc/dom-config.xml
    2a. cp etc/zebradb/marc_defs/marc21/biblios/preprocess_marcxml.xsl /etc/koha/zebradb/marc_defs/marc21/biblios/.
    2b. cp etc/zebradb/marc_defs/normarc/biblios/preprocess_marcxml.xsl /etc/koha/zebradb/marc_defs/normarc/biblios/.
    2c. cp etc/zebradb/marc_defs/unimarc/biblios/preprocess_marcxml.xsl /etc/koha/zebradb/marc_defs/unimarc/biblios/.
    3. koha-rebuild-zebra -b -f -v kohadev
    4. Note that in search results the 880$6245$a data appears before the 245$a data
    5. Note that you can do a title index search on the 880$6245$a data
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b35df706560daa070cd87411e1b2019b00819acd
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 24 14:04:07 2022 -0300

    Revert "Bug 15187: (QA follow-up) Add unit test"
    
    This reverts commit 058d411643c4b868553b97896fb065cf9870e456.

commit f81287995b4a603d1c661f626ae04ce77682fecc
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 24 14:03:54 2022 -0300

    Revert "Bug 15187: (QA follow-up) Fix test permissions"
    
    This reverts commit e6947b740883670b48f002bba7a64103016bc4ef.

commit c14951baee89f00b2de5fe898258683d2322ba40
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 24 14:03:44 2022 -0300

    Revert "Bug 15187: Index 880 in Zebra the same as Elasticsearch"
    
    This reverts commit 85690a14f8685a2eb6cb88316bb4a3145c024cc2.

commit 152e771a9befe4799d224307b1f1687b85f77813
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 18 17:53:53 2022 +0000

    Bug 31850: Patron import: welcome email option style as list
    
    This patch corrects the markup around the "Send email to new patrons"
    checkbox on the patron import page. The list should be an ordered list,
    not an unordered list.
    
    To test, apply the patch and go to Tools -> Import patrons.
    
    In the "Welcome email" section, there should be no bullet point before
    the "Send email to new patrons" line.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 117112633a05381c3f5081bafbe03f738f01bbed
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 24 13:19:42 2022 -0300

    Bug 31879: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4a21a36b53c915f2f4bccb8b8401a332d3bcd8d9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 19 18:45:48 2022 +0000

    Bug 31879: Convert mainpage.css to SCSS
    
    This patch creates a new SCSS file to be used to generate mainpage.css,
    the stylesheet used specifically for the staff interface home page.
    
    The patch makes visible changes in only two places: Removing borders
    from two elements to make them consistent with the new staff interface
    design:
     - div.pending-info, where pending actions like patrons requesting
       modifications are shown.
     - div#area-userblock, where the contents of the IntranetmainUserblock
       system preference are displayed.
    
    Otherwise the changes are all for the purpose of properly nesting
    elements according to SCSS rules and other fixes related to stylelint
    rules.
    
    To test, apply the patch and rebuild the staff interface CSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client).
    
    View the main page of the staff interface. Everything should look like
    it did before except for those elements which have had their borders
    removed.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ab48b8060ca6bcc974ab36ad73cf61e398743e75
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 24 13:18:07 2022 -0300

    Bug 31936: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fb4072feca8ba704c9af4e328b26a4305999c5d4
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 24 13:33:45 2022 +0000

    Bug 31936: Restore link to advanced search in acquisitions header
    
    This patch adds back the link to the advanced order search page which
    was previously in the acquisitions header search. Some CSS is tweaked to
    make the form style comfortable.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    - Go to Acquisitions.
    - In the header search form, click "Orders search"
    - Click the icon in the search form to expand the additional options.
    - You should see an "Advanced search" link which is the same style as
      other standard links.
    - The link should take you to the order search form.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8d5cbcadd55f15ee37e58df4e1ebf5522f690db0
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Oct 24 10:58:59 2022 -0400

    Bug 25716: (QA follow-up) Move additional options to etc/z3950/config.xml
    
    This followup moves the configuration to the z3950 etc file, either the
    default and or the custom file is used as per the existing script code.
    
    In addition, the options and be set using an environment variable named Z3950_ADDITIONAL_OPTS.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e8b2a5b7b61bdc4d0c9720e936dca8479987f5e2
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Dec 3 15:37:40 2020 -0500

    Bug 25716: Don't exit if config doesn't exist in Koha conf file
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 005d67063f1a665e993ad8af3ff867bba0983c10
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jun 11 11:17:23 2020 -0400

    Bug 25716: Add ability to specify additional options in koha-conf.xml for z3950_responder.pl when using koha-z3950-responder
    
    The z39.50 responder has a number of command line options that are not
    accessible if using the debian scripts to control it. We should be able
    to set those options in the koha conf file to be passed to the script
    itself.
    
    Test Plan:
    1) Apply this patch
    2) Copy your kohaclone's koha-z3950-responder to /usr/sbin/koha-z3950-responder if necessary
    3) Add "<z3950_responder_options>--add-item-status k</z3950_responder_options>" inside your <config> block in your koha-conf.xml file
    4) Use koha-z3950-responder to start/restart the z39.50 responder, note the item status is now in subfield k!
    
    Signed-off-by: Liz Rea <wizzyrea@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9d1273b35d2caafcc2b3a66dab83297c0ad71b58
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Oct 24 12:50:18 2022 +0100

    Bug 31952: Add page-section to authorized values admin
    
    This patch adds the page-section container to the authorized_values
    administration area.
    
    Test plan
    1) Confirm that the AV admin area looks reasonable for all area's of
       display
    
    https://bugs.koha-community.org/show_bug.cgi?id=31942
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 071311eaad6e9922c8128f55d837eedf9ce71212
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Oct 24 12:39:06 2022 +0100

    Bug 31941: Add page-section container to item types
    
    This patch adds the page-section container to the item types
    adminstration page
    
    Test plan
    1) Confirm the item types administration page uses the card view around
       the main table
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d1d5b51cee91f94dd39ff9edb5686cf9427c6292
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Oct 24 12:19:07 2022 +0100

    Bug 31939: Add page-section to branches template
    
    This patch adds the page-section class to the appropriate blocks in the Libraries administration area.
    
    Test plan
    1) Confirm that Administration > Libraries correctly displays the table
       inside a page-section card
    2) Confirm that Administration > Libraries > 'A library' correctly
       displays a card for the main information at the top and a separate
       card for OPAC Information if added.
    3) Confirm that the 'Add' and 'Edit' library forms still look good.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5f3c28b0efb52ffac1b5cad929b2b712ebbeb513
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 21 10:10:17 2022 +0100

    Bug 31806: Add page-section container to existing holds
    
    This patch adds a page-section container around the existing holds
    content section
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 29f84996b871a19b23bb661ef4f1cf7e5cbb5755
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 21 09:56:08 2022 +0100

    Bug 31806: Add page-section to holds tables
    
    This patch adds the page-section class to each holds view on
    reserve/request.pl
    
    Test plan
    1) Find an biblio to test on and add holds items of different types and
       homebranches.
    2) Work through each setting of the HoldsSplitQueue preference and
       confirm the page-sections appear as expected
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5fc43544b70ea37b70f9e5dca8956cd7e8bc5157
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Oct 19 22:29:48 2022 +0000

    Bug 31864: (follow-up) Fix breadcrumbs in batchMod and batch_record_mod
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2dada3519afaea10c863930905393a9ef4c57035
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Oct 18 23:30:08 2022 +0000

    Bug 31864: Correct breadcrumbs for pages in new cataloging module
    
    To test:
    1. Apply patch
    2. Set system preference 'StockRotation' to enable.
    3. Be logged in as a superlibrarian
    4. Check the breadcrumbs on the following pages, accessible from the Cataloging module homepage:
    
    barcode-print.tt
    label-edit-batch.tt
    label-edit-layout.tt
    label-edit-profile.tt
    label-edit-range.tt
    label-edit-template.tt
    label-home.tt
    label-manage.tt
    spinelabel-home.tt
    automatic_item_modification_by_age.tt
    batchMod-edit.tt
    batchMod.tt
    batch_delete_records.tt
    export.tt
    inventory.tt
    manage-marc-import.tt
    marc_modification_templates.tt
    stage-marc-import.tt
    stockrotation.tt
    upload-images.tt
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4e6b4b4ae7d4cce7405f9811218f8d8116152d95
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Oct 21 09:26:08 2022 +0000

    Bug 31903: Fix missing Edit URL link
    
    We need to pass format too for New tab (see Pending/Processing).
    
    Test plan:
    * Include SCAN format in ArticleRequestSupportedFormats system preferences.
    * Check circ rules to allow article requests.
    * Add a new request for digital copy and another for photocopy.
    * Check Circulation - Article requests - New tab.
    * Verify that the Actions menu for a single row for the digital copy
      does contain the "Edit URL(s)" option now.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Amended test plan.
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 29bf5b8724e252572fd070499529e557587360ba
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Oct 21 07:44:50 2022 +0000

    Bug 31644: (QA follow-up) Add two missing shebang lines
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 74742f52768b22c9e49ba0a8407fdb0ea95f3251
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 29 16:13:10 2022 +0000

    Bug 31644: Add copy test and clarify some functions
    
    This patch adds a tst for copy without subfields. I also clarify what eachstep does
    so the next user/coder understands current behaviour
    
    Update existing or add new: In the case where the field/subfield exists
    we update, if we have two fields - one with the subfield, and one without, we
    add the subfield to the one without
    
    Copy field:
     - If given a subfield - we will add to existing fields in the record
     - If not given a subfield - we create an entirely new field
    
    The logic of all of this is tricky, makes sense in a certain light, any complaints
    are for a new bug :-)
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2f61afa9c502874ed98e9cc67f6b99d6365bbf95
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Sep 28 18:53:28 2022 +0000

    Bug 31644: Check if subfield defined, not for truth
    
    To test:
    1 - Define a new MARC Modification template with actions:
            Copy field 600$a to 942$0
    2 - Define a new record like:
        LDR 00334nam a22001217a 4500
        003 ff
        005 20201102111604.0
        008 201102b        xxu||||| |||| 00| 0 eng d
        040 _ _ ‡cvsd
        100 1 _ ‡012345‡aKnuth, Donal Ervin‡d1938
        245 _ _ ‡012345‡aThe aty of computer programming‡cDonald E. Knuth
        600 _ 0 ‡042‡aComputer programming‡9462
    3 - Modify this record using the template above
    4 - Note that entire  field is copied to 942
    5 - Apply patch
    6 - Now only subfield 0 is copied
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4ab009cc9a9a1d872e55759e4c976b0dff93bc99
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 29 12:36:11 2022 +0000

    Bug 31644: Unit test
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a5d536eafebf1ceae6b11fe033c4be88041195ad
Author: Stefan Berndtsson <stefan.berndtsson@gmail.com>
Date:   Wed Oct 19 14:48:38 2022 +0200

    Bug 31871: Date due not shown on items tab
    
    Changed ITEM_DAT to checkout in moredetail.tt
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 56ca0324ad8e4a21cb1ac5ad2325088f246281c0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 19 11:17:37 2022 +0000

    Bug 31869: Unable to save thesaurus value to frameworks subfields
    
    This patch correct a typo authtypecodes for authtypecode
    
    To test:
    1. Edit e.g. default frameworks subfield 100$a
    2. Add or change fields thesaurus value
    3. Save your changes
       => note that on subfield listing there is no mention that 100$a is linked to any thesaurus
       => if you edit 100$a thesaurus input is empty
    4. Apply patch
    5. Edit subfield 100$a and set a thesaurus value
    6. Confirm it saves and displays correctly
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 33e1558285070be8b9e64c44832dea8f667746ae
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Oct 18 14:14:30 2022 +0000

    Bug 31847: Add page-section class to item search results
    
    To test:
    1. Apply patch
    2. Look at item search results ( itemsearch.tt )
    3. Make sure everthing looks right.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9e111b6b1dcf232ba235a11231f328cfa33a0754
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 24 11:49:42 2022 -0300

    Bug 31715: DBRev 22.06.00.069
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1c2e8d5614e01f9231be9097922b9854998b9134
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Oct 7 19:46:16 2022 +0000

    Bug 31715: Add German translations for language descriptions
    
    This adds the German translations for the different languages to
    subtag_registry.sql that is used by all languages during installation.
    
    * Apply patch
    * Run database update
    * Install de-DE and activate it for the OPAC
    * Go to advanced search
    * Look at the language pull down - it shows the languages in their
      language and then translated to English
    * Switch to German - verify the German translations are used now
      There are 2-3 cases where the translation = name, so only name is shown.
    * Drop your database, create your database
    * Run the web installer
    * Everything should complete without error and the language pull down
      should look exactly the same and be translated
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f78716b8e6d7015de0b94108a29709f02e6e4f76
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Oct 7 15:08:44 2022 -1000

    Bug 31718: Others facilitate translation in frameworks administration
    
    Some other IF/ELSE/END can be changed to facilitate translation
    
    Test plan :
    Always test with default framework and with another framework and
    compare with and without patch
    1) View subfields of field
    => Check the h1 in page
    2) Perform actions on a field (create, modify, delete)
    => Check breadcrumbs and h1 in page
    3) View the framework table
    => Check columns Repeatable, Mandatory, Important
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5e615b76a9681143133e869c8448d332c0cbaa8e
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Fri Oct 7 16:45:02 2022 -0400

    Bug 31718: Change the IF ELSE values in marc_subfields_structure breadcrumbs to facilitate translation
    
    This patch changes the strings in the IF ELSE for the framework
    name in the breadcrumbs on the marc_subfields_structure.pl page.
    
    To test:
    1) Apply patch
    2) In the intranet, go to Administration > MARC bibliographic framework
    3) Click 'Actions' next to the default framework and choose 'MARC
    structure'
    4) Click 'Actions' next to a MARC tag and choose 'View subfields'
    5) Check the breadcrumbs, they should show
    Home > Administration > MARC frameworks > Default framework structure >
    ...
    6) Redo steps 2-5, using a different framework, e.g. ACQ
    The breadcrumbs for ACQ should look like
    Home > Administration > MARC frameworks > ACQ framework structure > ...
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ae5d1f98acd84cd397cd29319525a3674dc9f107
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Sep 14 12:21:44 2022 +0000

    Bug 18556: Clarify lost and gonenoaddress messages
    
    This patch alters the message for the patron flasg slightly, and adds
    a title to provide explicit info when hoevered
    
    To test:
    1 - Edit a patron and set gonenoaddress and lost flags
    2 - Note new info in the flags section
    3 - Go to 'Checkout' or 'Details' tab for patron
    4 - Confirm the messages make sense
    5 - Confirm you see a tool tip when hovering on messages
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9c9b471c6e562d6257b75ff022e563c2d78c32f5
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Oct 19 22:31:29 2022 -1000

    Bug 31888: Define save button as primary in Elasticsearch mappings page
    
    Like Bug 31810, save button in Elasticsearch mappings page is the most important action on this form, it should be yellow.
    
    Test plan :
    Go to Administration > Search engine configuration (Elasticsearch)
    => Check save button has class btn-primary and is yellow
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 40664efb518b2b4c5104da943de544b3229c72d2
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Oct 19 12:05:12 2022 +0000

    Bug 31870: Add license, remove unused modules
    
    Test plan:
    Run test again.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 77bd3d94caaf409e976d5c02f02a08c3afed246a
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Oct 19 12:00:37 2022 +0000

    Bug 31870: Context.t: Reorganize subtests
    
    Move a few tests into separate subtests.
    Replace the BEGIN block.
    
    Test plan:
    Run test again.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3aa5ebab1a0052473f0c4cdcd2b03524c5fa7ca7
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Oct 18 14:34:19 2022 +0000

    Bug 31870: Context.t: Fix indentation, remove old comments
    
    Test plan:
    Run test again.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b16f0cd1c831adefb123cfbc40e2be76d69439ca
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Oct 18 14:32:01 2022 +0000

    Bug 31870: Groundwork for Context.t
    
    Replacing the vars statement.
    Adding a larger subtest.
    Removing TransformVersionToNum.
    
    Test plan:
    Run t/db_dependent/Context.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bb405d277318ad5564589b4476d1d89e1ae9fa48
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed Oct 5 11:27:12 2022 -0400

    Bug 31689: Add see from tracings in Match-heading-see-from index (Elasticsearch, MARC21)
    
    This patch adds the following fields to the Match-heading-see-from index
    
    - 430(adfghklmnoprstvxyz)
    - 448(avxyz)
    - 450(abvxyz)
    - 451(avxyz)
    - 455(avxyz)
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ee1a1a9fd91da6df10f29f6b852251416db598c0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 24 11:19:09 2022 -0300

    Bug 31813: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cb0c51ded40916009baba5a210e8a96ac036a6a5
Author: David Nind <david@davidnind.com>
Date:   Wed Oct 19 17:18:48 2022 +0000

    Bug 31813: (follow-up) Add missing colon for managed staged MARC records
    
    Add colon after "Matching rule applied" when viewing details for a
    batch already imported.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1a4005866b8a691288dbab37048c0b8bb9e3286d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 18 15:51:30 2022 +0000

    Bug 31813: Specify white-space: normal for spans styled as labels
    
    This patch is necessary to override a CSS property being inherited from
    Bootstrap. Allowing a <span> with the "label" class to wrap will keep
    alignment correct when displaying information in the same layout as a
    form.
    
    To test, apply the patch and rebuild the staff interface CSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client).
    
    - If necessary, stage a batch of MARC files (Cataloging -> Stage MARC
      records for import).
    - Go to Cataloging -> Manage staged MARC records and click on one of the
      batches to view the details.
    - In the list of information about the batch, longer labels like
      "Matching rule applied" should wrap so that they stay aligned with
      other labels in the list.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f3273acd67a5c5758084a75b3abf45aafb541ed9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 24 11:15:15 2022 -0300

    Bug 31861: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5ae4d6c19e55fb564ef9b6fb21ff6113bbcf87e0
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 24 12:11:11 2022 +0000

    Bug 31861: (follow-up) Fix disabled clear search button
    
    The disabled clear search button should not have a border and background
    set.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 055e9587e34552960ec4f0950a7a1a03d0c6fdd2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 19 15:36:37 2022 +0000

    Bug 31861: Table controls on checkouts table are buttons
    
    This patch updates the style of DataTables buttons (columns, export, and
    configure), in cases where the buttons are the only control being
    displayed (no page controls, filter, etc).
    
    To test, apply the patch and rebuild the staff interface CSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client).
    
    - Go to Circulation and check an item out to a patron.
    - If necessary, click the "Show checkouts" button to reveal the table of
      checkouts.
    - The "Columns," "Export," and "Configure" controls should look the same
      as they do in other situations, with no button-style border.
    - Go to Circulation -> Check in and check in the item. The table of
      checked-in items should show the same style controls.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 52132849a589f6703d6d0ea5cb2407ebd7bc31a7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 24 11:10:30 2022 -0300

    Bug 31754: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f6750d723b1f3fc9c28e50845995cce83fc0f71b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 19 13:07:01 2022 +0000

    Bug 31754: (follow-up) Correct alignment of buttons
    
    This patch corrects the alignment of the "Columns," "Export," and
    "Configure" buttons. The new design has them aligned to the right.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b8baa5e8cfdec80874bff2c409d17f2b8bb12c9a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 17 17:55:50 2022 +0000

    Bug 31754: Improve appearance of behavior of DataTables controls
    
    This patch makes changes to CSS and to the default DataTables DOM
    configuration in order to make toolbars work better at various screen
    widths.
    
    The patch also makes stylelint corrections to _tables.scss.
    
    To test, apply the patch and rebuild the staff interface CSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client).
    
    - Test pages in the staff interface where tables contain multiple pages
      of results, e.g. a patron search.
    - Confirm that table information (entries) and controls look correct.
    - Confirm that all controls work correctly, including the search field.
    - Resize your browser to check how the controls respond at various
      browser widths.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b5a4d3b6659c854ac059be8e5986601df58baaff
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Tue Oct 4 19:23:28 2022 +0200

    Bug 31676: Fix db_dependent/Circulation.t tests
    
    To test:
    1) Set "RenewalPeriodBase" syspref to "the current date",
       "CircControl" to "the library the item is from." and
       "HomeOrHoldingBranch" to "the item's home library (homebranch)."
    2) Run tests in t/db_dependent/Circulation.t and verify
       that fails (the script should actually crash before all
       can be run).
    3) Apply the patch
    4) Verifiy that all tests now pass
    
    Sponsored-by: Gothenburg University Library
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2b8b02a5870e6d5941077106eae8d13c8b29d05a
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Oct 21 11:31:09 2022 -0400

    Bug 31920: Add transaction to subtest in t/db_dependent/Holds.t
    
    A subest in t/db_dependent/Holds.t leaves behind database cruft.
    
    Test Plan:
    Using koha-testing-docker:
    1) SELECT branchcode FROM branches
    2) prove t/db_dependent/Holds.t
    3) SELECT branchcode FROM branches
       Note cruft
    4) reset_all
    2) prove t/db_dependent/Holds.t
    3) SELECT branchcode FROM branches
       No cruft!
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0d2f1aeaf927aba6dfbdc69b0d14a1699784c864
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Oct 21 14:57:08 2022 +0000

    Bug 31886: Fix no sidebar problem in system pref search
    
    To test:
    1. Go to Adminstration and click on 'Global system preferences'
    2. From the left side bar click 'I18N/L10N' and notice no sidebar.
    3. Also try 'Serials', no sidebar
    4. Apply patch, restart_all
    5. Try 1 & 2 again and the sidebar should be restored
    6. Try clicking through each of the system preference groups (Accounting, Acquisitions, etc ) and make sure the sidebar is always present.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9bee75e107178e4ca907cc3a8c7399f3a128fbe6
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Oct 18 20:53:03 2022 +0000

    Bug 31863: Account for changelanguage element when adjusting editor height
    
    To test:
    1. Turn on 'EnableAdvancedCatalogingEditor'
    2. Go to a record with enough MARC data that it should take up the entire width of your screen,
    3. The CodeMirror editor will only be 300px.
    4. Resize your screen, nothing happens to the editor height
    5. Apply patch
    6. Look at the same record in your editor, the editor should go to the bottom of the page now. Resizing your screen should resize the editor.
    7. Have some additional language packs installed, and change the language system pref so the '#changelanguage' option will appear.
    8. Make sure the editor height is still being properly set.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 56abcd184c55f778b969c3889e6d0669a2cfe17a
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Oct 23 11:51:54 2022 +0000

    Bug 31837: (follow-up) Move page-section to include h2 headings
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 413fdb37eb3033b3ad291aab18c436504731ae40
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Oct 19 23:07:07 2022 +0000

    Bug 31837: Add page-section class to tables on basket.tt
    
    This patch adds the page-section class to the orders and cancelled orders tables.
    
    To test:
    1. Have a vendor, basket, and create an order.
    2. Go look at the table on basket.tt and make sure the orders table looks good.
    3. Cancel some orders and look at the cancelled order table, make sure it also looks good.
    
    Note: I made some indentation changes. I also did NOT add a new wrapper to the cancelled orders table, it already had one so I just added the page-section div to the existing div.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4ae956c55382881c5bdb2c61ccf3be7c692e4236
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 24 10:20:58 2022 -0300

    Bug 31765: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fa780eae43efcc4b1b4b5a38ea6b437a5318ce6c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Sat Oct 22 09:20:20 2022 +0100

    Bug 31765: Add page-section and bg-info classes to 'Notes'
    
    This patch adds the page-section and bg-info classes to the 'Notes'
    section of the patron imports page.
    
    As part of this patch, we update the base 'card' mixin to allow
    background colors to be overwridden with the standard bg-* options
    available in [bootstrap](https://getbootstrap.com/docs/4.0/utilities/colors/)
    
    Test plan
    1) Build your CSS in the usual way
    2) Confirm the Notes block looks OK on the patron imports tool
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 39b6c4e94ebdb56891f7aec490cb3f3051e44b4c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 21 16:33:15 2022 +0100

    Bug 31821: Add page-section class to the vendor search results
    
    This patch adds a page-section class to each supplier block
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3f202ab85f12ca5b421027b3b4806863fe298f23
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 21 17:00:55 2022 +0100

    Bug 31822: Add page-section to vendoer details page
    
    This patch contains whitespace changes which an be safely ignored.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f21324c1ae9a30ce6a555bb6dc48dc1f8fc76ed1
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Oct 24 12:45:33 2022 +0000

    Bug 17170: (follow-up) Hide existing filters section if no filters exist
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 012e0e2fcff032fd222cef90271326752c9cb32e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 24 09:11:55 2022 -0300

    Bug 17170: (QA follow-up) Adjust t/Koha/Auth/Permissions.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b582f7d495fceda68a7972f7eab0d4e5d16bdcdf
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 17 16:00:25 2022 +0200

    Bug 31154: Avoid unecessary loop
    
    We don't need to loop over the subfield and enter this block if there is
    no record.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit edf8640cff4c929196d1768152a705fb350317a0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 17 15:59:52 2022 +0200

    Bug 31154: Add test
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 83d06c60fedfaa73a3b805df18d55b118285732a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 21 11:44:49 2022 -0300

    Bug 30588: DBRev 22.06.00.068
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ad6530b914af64de7fd564c06218ecd940e389c3
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Sep 12 09:02:21 2022 +0000

    Bug 30588: (QA follow-up) Clear waiting-for-2FA-setup in session
    
    If we do not clear this session, the first login directly after setup
    does not really enhances user experience ;)
    
    Test plan:
    Make sure 2FA is enforced.
    Test the above. Disable your 2FA, logout and login.
    Verify that you can access pages with this patch now. Without this
    patch you could not.
    Run these tests to provide more confidence:
    t/db_dependent/Auth.t
    t/db_dependent/api/v1/two_factor_auth.t
    t/db_dependent/Koha/Auth/TwoFactorAuth.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d92b2b4c671001acf7dfd9cd0cf643f797d6f58e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 9 09:46:29 2022 +0000

    Bug 30588: (QA follow-up) Adjust flags for two_factor_auth.pl
    
    Anyone with staff access (catalogue) should be able to go
    to account and enable 2FA.
    
    Test plan:
    Have a staff user with minimum staff permission.
    Access account, manage 2FA.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 316355e8d535514a052964b33defd2c8db252d42
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 9 09:18:10 2022 +0000

    Bug 30588: (QA follow-up) Auth - remove two warns and second logout
    
    Resolves:
    Use of uninitialized value $request_method in string eq at /usr/share/koha/C4/Auth.pm line 1122.
    Use of uninitialized value $return in numeric gt (>) at /usr/share/koha/C4/Auth.pm line 1155.
    
    We also remove the double logout from Auth.t
    
    Test plan:
    Run t/db_dependent/Auth.t
    Check if you do not see the warns anymore.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 17c504f54f65128636cbf2a039afbc93fd7dba0e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 9 09:09:48 2022 +0000

    Bug 30588: (QA follow-up) Remove erroneous FIXME
    
    Comment speaks for itself. Look at surrounding code.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 19f069c0de8c7ad22fdfe545fd4694cd4bc1ebf4
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 9 08:44:31 2022 +0000

    Bug 30588: (QA follow-up) Missing shebang in TwoFactorAuth.t
    
    Test plan:
    Try t/db_dependent/Koha/Auth/TwoFactorAuth.t on cmd line.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0d7f0b8f22a37a0ed792ffe2804888bab828037a
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 9 08:38:33 2022 +0000

    Bug 30588: (QA follow-up) Typos in sysprefs.sql
    
    The codebase uses disabled and enforced which is imo better too.
    So we need to fix this sql file.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4afa50f6d762a97348c13cb074614686cec014b8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 28 10:31:35 2022 +0200

    Bug 30588: Add missing include file
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c98b623313122618e53f9a2c77701d0a602d0c4f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 28 10:05:03 2022 +0200

    Bug 30588: Add missing atomic update
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 76c7f857e5e5f1341c06476fbb0dcd7944e7d9a0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 27 09:52:06 2022 +0200

    Bug 30588: Add tests for C4::checkauth
    
    Sponsored-by: Rijksmuseum, Netherlands
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 84fc9a5c525897ebee6478a1ba79797a84b7751c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 26 14:51:54 2022 +0200

    Bug 30588: Add selenium tests
    
    Sponsored-by: Rijksmuseum, Netherlands
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 762eac89a54f3f98c77e65ccc679df08bce76db3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 26 11:41:14 2022 +0200

    Bug 30588: Add tests for the REST API routes
    
    Sponsored-by: Rijksmuseum, Netherlands
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dfcbcfbc55a493bdc17a0dcb73ab73d1e2852a0a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 26 14:34:56 2022 +0200

    Bug 30588: Adjust existing selenium tests
    
    Sponsored-by: Rijksmuseum, Netherlands
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b93e15c235c77ad557b73f49f93e29b0669ee82b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 25 16:53:02 2022 +0200

    Bug 30588: Add the option to require 2FA setup on first staff login
    
    Bug 28786 added the ability to turn on a two-factor authentication,
    using a One Time Password (OTP).
    Once enabled on the system, librarian had the choice to enable or
    disable it for themselves.
    For security reason an administrator could decide to force the
    librarians to use this second authentication step.
    
    This patch adds a third option to the existing syspref, 'Enforced', for
    that purpose.
    
    QA notes: the code we had in the members/two_factor_auth.pl controller
    has been moved to REST API controller methods (with their tests and
    swagger specs), for reusability reason. Code from template has been
    moved to an include file for the same reason.
    
    Test plan:
    A. Regression tests
    As we modified the code we need first to confirm the existing features
    are still working as expected.
    1. Turn off TwoFactorAuthentication (disabled) and confirm that you are not able to
    enable and access the second authentication step
    2. Turn it on (enabled) and confirm that you are able to enable it in your account
    3. Logout and confirm then that you are able to login into Koha
    
    B. The new option
    1. Set the pref to "enforced"
    2. You are not logged out, logged in users stay logged in
    3. Pick a user that does not have 2FA setup, login
    4. Notice the new screen (UI is a bit ugly, suggestions welcomed)
    5. Try to access Koha without enabling 2FA, you shouldn't be able to
    access any pages
    6. Setup 2FA and confirm that you are redirected to the login screen
    7. Login, send the correct pin code
    => You are fully logged in!
    
    Note that at 6 we could redirect to the mainpage, without the need to
    login again, but I think it's preferable to reduce the change to
    C4::Auth. If it's considered mandatory by QA I could have a look on
    another bug report.
    
    Sponsored-by: Rijksmuseum, Netherlands
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8511750de92e98b53e5bd9c0eaec045deba49016
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 25 15:58:56 2022 +0200

    Bug 30588: Adjust existing occurrences of TwoFactorAuthentication
    
    We need to replace 0 with 'disabled', and 1 with 'enabled'
    
    Sponsored-by: Rijksmuseum, Netherlands
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d873d86a89a279629e6dcb431510eaa399e781f5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 25 15:34:47 2022 +0200

    Bug 30588: Add 'enforced' option to TwoFactorAuthentication
    
    Sponsored-by: Rijksmuseum, Netherlands
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0ff60bf510640119b04e0133f1d7dccf3a40a7a1
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Oct 18 20:25:37 2022 +0000

    Bug 29662: (QA folow-up) Add explanation for empty to system preference description
    
    This amends the system preference description for PrefillItem
    to explain what happens when the pref is left empty.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 06a23aadefc84bc8e7131a83e316ba408b40e4b2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Dec 13 11:50:33 2021 +0100

    Bug 29662: (bug 27526 follow-up) Prefill all subfields if SubfieldsToUseWhenPrefill is empty
    
    Signed-off-by: Thibault Keromnès <thibault.keromnes@univ-paris8.fr>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 63be0aeeb6505fe463e759c69892497c2869a441
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Oct 3 16:48:52 2022 +0000

    Bug 31672: Remove 'Your' from tab descriptions in OPAC patron account
    
    I'll try to keep the test plan simple:
    * Go to patron account in OPAC
    * Verify that the your from the beginning of the tab
      descriptions has been removed
    
    Bonus: This moves the Recalls history tab below the Holds history
    as this is the more logical place for it.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 20557fdfe14f1e45a922273adae2339597878ce0
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed Oct 5 12:20:49 2022 -0400

    Bug 31693: Remove non-existent fields from the See-also-from index (Elasticsearch, MARC21)
    
    This patch removes fields from the See-from index that don't exist in
    MARC21.
    
    The existing fields can be found here: https://www.loc.gov/marc/authority/ad5xx.html
    
    The following fields are removed:
    
    - 511$b
    - 511$m
    - 511$o
    - 511$r
    - 530$b
    - 530$c
    - 530$e
    - 547$b
    - 547$e
    - 547$f
    - 547$h
    - 547$j
    - 547$k
    - 547$l
    - 547$m
    - 547$n
    - 547$o
    - 547$p
    - 547$q
    - 547$r
    - 547$s
    - 547$t
    - 548$b
    - 548$c
    - 548$d
    - 548$e
    - 548$f
    - 548$g
    - 548$h
    - 548$k
    - 548$l
    - 548$m
    - 548$n
    - 548$o
    - 548$p
    - 548$r
    - 548$s
    - 548$t
    - 550$c
    - 550$d
    - 550$e
    - 550$f
    - 550$h
    - 550$j
    - 550$k
    - 550$l
    - 550$m
    - 550$n
    - 550$o
    - 550$p
    - 550$q
    - 550$r
    - 550$s
    - 550$t
    - 551$b
    - 551$c
    - 551$d
    - 551$e
    - 551$f
    - 551$h
    - 551$k
    - 551$l
    - 551$m
    - 551$n
    - 551$o
    - 551$p
    - 551$r
    - 551$s
    - 551$t
    - 555$b
    - 555$c
    - 555$d
    - 555$e
    - 555$f
    - 555$g
    - 555$h
    - 555$j
    - 555$k
    - 555$l
    - 555$m
    - 555$n
    - 555$o
    - 555$p
    - 555$q
    - 555$r
    - 555$s
    - 555$t
    - 562$b
    - 562$c
    - 562$d
    - 562$e
    - 562$f
    - 562$g
    - 562$h
    - 562$k
    - 562$l
    - 562$m
    - 562$n
    - 562$o
    - 562$p
    - 562$r
    - 562$s
    - 562$t
    
    Furthermore, the format of the mapping for 511 has been corrected.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2da1ee6349f3e981dbb0efd246eb44e367440496
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed Oct 5 12:01:46 2022 -0400

    Bug 31691: Remove non-existent fields from the See-from index (Elasticsearch, MARC21)
    
    This patch removes fields from the See-from index that don't exist in
    MARC21.
    
    The existing fields can be found here: https://www.loc.gov/marc/authority/ad4xx.html
    
    The following fields are removed:
    
    - 411$b
    - 411$m
    - 411$o
    - 411$r
    - 430$b
    - 430$c
    - 430$e
    - 440(abcdefghjklmnopqrstvxyz) (all of them, 440 doesn't exist at all)
    - 441(abcdefghklmnoprstvxyz) (all of them, 441 doesn't exist at all)
    - 444(abcdefghjklmnopqrstvxyz) (all of them, 444 doesn't exist at all)
    - 447$b
    - 447$e
    - 447$f
    - 447$h
    - 447$j
    - 447$k
    - 447$l
    - 447$m
    - 447$n
    - 447$o
    - 447$p
    - 447$q
    - 447$r
    - 447$s
    - 447$t
    - 448$b
    - 448$c
    - 448$d
    - 448$e
    - 448$f
    - 448$g
    - 448$h
    - 448$k
    - 448$l
    - 448$m
    - 448$n
    - 448$o
    - 448$p
    - 448$r
    - 448$s
    - 448$t
    - 462$b
    - 462$c
    - 462$d
    - 462$e
    - 462$f
    - 462$g
    - 462$h
    - 462$k
    - 462$l
    - 462$m
    - 462$n
    - 462$o
    - 462$p
    - 462$r
    - 462$s
    - 462$t
    - 462$v
    - 462$x
    - 462$y
    - 462$z
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 384bc416b8853d21b10f5feeeed90dc5c435ff59
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed Oct 5 11:08:11 2022 -0400

    Bug 31687: Add see from and see also from tracings in Match index
    
    This patch adds see from and see also from terms for uniform title,
    chronological term, topical term, geographic name, and genre/form term
    to the Match index in Elasticsearch for MARC21.
    
    Previously, only see from/see also from for personal names,
    corporate names, and meeting names were indexed.
    
    To test:
    
    1. Without patch, import attached authority records
    1.1. Download attached records
    1.2. Go to Tools > Stage MARC records for import
    1.3. Click 'Browse' and choose the downloaded file
    1.4. Click 'Upload file'
    1.5. Choose Record type = Authority
    1.6. Click 'Stage for import'
    1.7. From the job details, click 'View batch'
    1.8. Click 'Import this batch into the catalog'
    
    2. Without patch, search for see from and see also from tracings
    2.1. Go to Authorities
    2.2. In the 'Default' drop-down menu, choose 'Uniform title'
    2.3. Choose the 'Search all headings' tab
    2.4. Enter the search term 'Five hundred'
    2.5. Click 'Submit' or press 'Enter'
     --> No results
    2.6. Redo the search for the following search terms
    
    Authority type          Search term             Should be found in
    Uniform title           five hundred            430
    Uniform title           films préférés          530
    Chronological term      fifteenth               448
    Chronological term      middle ages             548
    Topical term            lalopathie              450
    Topical term            troubles communication  550
    Geographic name cécropia                451
    Geographic name canada francophone      551
    Genre/Form term filmiques               455
    Genre/Form term films                   555
    
    3. Apply patch
    4. Delete index, reset mappings and reindex authorities (with command line, -a -d -r)
    5. Redo the searches from step 2, there should now be results
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 21fe7e151c56e08c5c1ef4cd7e450a61cf9d2bfa
Author: Mason James <mtj@kohaaloha.com>
Date:   Wed Sep 21 04:25:38 2022 +1200

    Bug 31588: Update cpanfile for new OpenAPI versions (master)
    
    Signed-off-by: Mason James <mtj@kohaaloha.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ceb74c89e67cac6b7a3640e06fccb77e9bddfed9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 21 11:19:39 2022 -0300

    Bug 17170: DBRev 22.06.00.067
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d89f9a55f6b450ef417d3327c5cb84304db7dd5c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Oct 21 13:30:39 2022 +0000

    Bug 17170: (follow-up) Adjust for RM follow-ups
    
    Use direct DB names when saving/loading
    Don't escape boolean values as strings
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c8d507aef6dc48dbdfe260ad5840af83e54e3fb2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 6 11:42:54 2022 -0300

    Bug 17170: (follow-up) Use x instead of X
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8f212b060914c738ecf52c2e7917748b6f0e2bfb
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 6 11:41:18 2022 -0300

    Bug 17170: (follow-up) adjust tests for bug 25375
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b60cf7931ab18557b7f507a3c9535ad4bd151c53
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 6 10:58:53 2022 -0300

    Bug 17170: (QA follow-up) Escape things, make them translatable
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 00f0780b7f9f007f55b5cd4858e3b8069dc25ba4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 6 10:44:59 2022 -0300

    Bug 17170: (QA follow-up) Spec cleanup
    
    This patch removes not required (for now) query parameters as we can
    query using q= on those. They can be added back eventually, if needed.
    
    Attributes now match the database as well.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 87260369909a227c5c7a08db57ec1e747267ef56
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 6 10:44:21 2022 -0300

    Bug 17170: (QA follow-up) DB changes
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d138d573d7ea517b0b6356a21457a3ac2624b8aa
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 6 09:21:50 2022 -0300

    Bug 17170: Minor fixes
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b1132fee6470fe87af321262956d6a33f946be24
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 4 16:52:12 2022 +0100

    Bug 17170: (QA follow-up) Improve model structure
    
    This feature is awesome, but it's modals all feel a bit off.. this is an
    improvement to one of them, but far from perfect.
    
    I opt to work with Owen to create a guideline (and template) for modals going
    forward and let this patchset go in as is.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e40c4f643b786b4fe53156c1a03fcae5bb2077e1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 4 16:21:46 2022 +0100

    Bug 17170: (QA follow-up) Relocate 'Save'
    
    Another minor rebase issue I believe.. relocate the 'Save search as
    filter' link back up to sit next to 'Edit this search'.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ce30b5040635156db0e2a7f607d6fc392b377dd7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 4 15:52:29 2022 +0100

    Bug 17170: (QA follow-up) Remove re-introduced file
    
    We reintroduced the definitions api spec file with this patch.. it's not
    required.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f5271d1a743d672cce2bfe04fc237643d1bd093d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Apr 18 14:51:36 2022 +0000

    Bug 17170: Add the ability to create 'saved searches' for use as filters when searching the catalog
    
    This patch alters the code in the ES QueryBuilder. Reflecting
    how things are handled in build_query_compat we clean the query,
    but not the limits. In Zebra we simply recursivly call buildQuery,
    but the ES query structure
    
    This patchset adds a new ability to save searches on the staff client, and display them in the results
    page on staff or opac as a new filter.
    
    New filters can be added from the results page after a search, and there is an admin page for updating
    deleting and renaming filters
    
    There is a new permission to control management of these filters
    
    New filters can be added that are not displayed along with facets, this allows for building custom links
    using these filters to keep URLs shorter
    
    Due to bug 30528 testing in ES is recommended
    
    To test:
     1 - Apply patches and update database and restart all
     2 - Enable new system preference 'SavedSearchFilters'
     3 - As superlibrarian perform a search in staff client, something broad like 'a'
     4 - Note new 'Save search as filter' link on results page
     5 - Click it, save search as new filter, check 'Staff client' visibility
     6 - Perform another search
     7 - Note the filter now appears above facets
     8 - Click to it filter results
     9 - Note results are limited by the new filter, and it is checked in the facets
    10 - Confirm click the [x] removes the filter
    11 - Go to administration->search filters
    12 - Confirm the filter appears
    13 - Edit and mark as OPAC visible
    14 - Test OPAC to ensure it shows and can be applied/removed
    15 - Copy URL with filter applied
    16 - In adminsitration mark filter as not visible on staff or opac
    17 - Confirm link above still works
    18 - Create a new staff with catalogue and search filters permission
    19 - Ensure they can access/save filters
    20 - Remove filter permission and ensure they cannot
    21 - Disable system preference
    22 - Confirm links to search filters page are removed from admin home and admin sidebar
    23 - Confirm filters do not appear on results and cannot be created
    24 - Enable pref
    25 - Create a filter
    26 - From search filters page, click 'Edit search'
    27 - Confirm you are taken to advanced search page letting you know which filter you are editing
    28 - Confirm you can change searhc options and save
    29 - Confirm you can perform the search from this page
    
    Sponsored-by: Sponsored by: Round Rock Public Library [https://www.roundrocktexas.gov/departments/library/]
    
    Signed-off-by: Michal Urban <michalurban177@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2fa8c5e297bd2ee29e26153ea788eef83ee14a47
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 15 16:39:10 2022 +0000

    Bug 17170: (follow-up) Display search filters admin links when appropriate
    
    Sponsored-by: Sponsored by: Round Rock Public Library [https://www.roundrocktexas.gov/departments/library/]
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 05ee5d10a878fb7ffc4149b77642428ea6571946
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Apr 13 12:17:25 2022 +0000

    Bug 17170: Unit tests
    
    Sponsored-by: Sponsored by: Round Rock Public Library [https://www.roundrocktexas.gov/departments/library/]
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fe508be07afe38f6329e18ba80e53b5359436fbf
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 12 18:28:00 2022 +0000

    Bug 17170: Add admin page for filters and ability to edit/save existing filters
    
    This patchset adds a new ability to save searches on the staff client, and display them in the results
    page on staff or opac as a new filter.
    
    New filters can be added from the resuilts page after a search, and there is an admin page for updating
    deleting and renaming filters
    
    There is a new permission to control management of these filters
    
    New filters can be added that are not displayed along with facets, this allows for building custom links
    using these filters to keep URLs shorter
    
    Due to bug 30528 testing in ES is recommended
    
    To test:
     1 - Apply patches and update database and restart all
     2 - Enable new system preference 'SavedSearchFilters'
     3 - As superlibrarian perform a search in staff client, something broad like 'a'
     4 - Note new 'Save search as filter' link on results page
     5 - Click it, save search as new filter, check 'Staff client' visibility
     6 - Perform another search
     7 - Note the filter now appears above facets
     8 - Click to it filter results
     9 - Note results are limited by the new filter, and it is checked in the facets
    10 - Confirm click the [x] removes the filter
    11 - Go to administration->search filters
    12 - Confirm the filter appears
    13 - Edit and mark as OPAC visible
    14 - Test OPAC to ensure it shows and can be applied/removed
    15 - Copy URL with filter applied
    16 - In adminsitration mark filter as not visible on staff or opac
    17 - Confirm link above still works
    18 - Create a new staff with catalogue and search filters permission
    19 - Ensure they can access/save filters
    20 - Remove filter permission and ensure they cannot
    21 - Disable system preference
    22 - Confirm links to search filters page are removed from admin home and admin sidebar
    23 - Confirm filters do not appear on results and cannot be created
    24 - Enable pref
    25 - Create a filter
    26 - From search filters page, click 'Edit search'
    27 - Confirm you are taken to advanced search page letting you know which filter you are editing
    28 - Confirm you can change searhc options and save
    29 - Confirm you can perform the search from this page
    
    Sponsored-by: Sponsored by: Round Rock Public Library [https://www.roundrocktexas.gov/departments/library/]
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a97a6b28d2f4e6d3c91115ebc33f56c811cec894
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Mar 17 10:50:02 2022 +0000

    Bug 17170: Handle search filters in query builders
    
    This patch updates the query building code to expand filters when searching
    and pass them back as part of the cgi and descriptive search strings
    
    Sponsored-by: Sponsored by: Round Rock Public Library [https://www.roundrocktexas.gov/departments/library/]
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8907b6c3a60380f68240cb5a7d754612e2921bed
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 14 14:08:51 2022 +0000

    Bug 17170: Add search filters to staff and opac interfaces
    
    This patch displays the filters on the results pages with the facets
    
    Sponsored-by: Sponsored by: Round Rock Public Library [https://www.roundrocktexas.gov/departments/library/]
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit adf252d96cff7b0125839da63d87ad05e2a52c9b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 16 15:54:19 2021 +0000

    Bug 17170: Add API route for SearchFilters
    
    This adds the API routes and tests
    
    Sponsored-by: Sponsored by: Round Rock Public Library [https://www.roundrocktexas.gov/departments/library/]
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b306b1d4caccef16161cea5b7914628911047de1
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Apr 13 13:29:41 2022 +0000

    Bug 17170: Update schema for boolean
    
    Sponsored-by: Sponsored by: Round Rock Public Library [https://www.roundrocktexas.gov/departments/library/]
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9f1e167f6fe1f28a8195efd3321f9c38d410b813
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 6 09:05:57 2022 -0300

    Bug 17170: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 47228046eecfa138de4c6be63eb9290b2bb2392e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Sep 14 12:58:00 2021 +0000

    Bug 17170: DB Updates
    
    This patch adds the new table, permission, and a syspref to enable the feature
    
    Sponsored-by: Sponsored by: Round Rock Public Library [https://www.roundrocktexas.gov/departments/library/]
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e0d992eb06c489e10ba97df49b519dc2a5b43fe9
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Oct 21 13:40:05 2022 +0000

    Bug 31830: (QA follow-up) include heading in page section
    
    Moves the div up a few levels to the heading for this part of the page
    is included. This also makes it consistent with the page-section for
    "Manage orders" directly above.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4e45bacc48559fdde3bcb22bf2798621baf42408
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Oct 19 22:51:45 2022 +0000

    Bug 31830: Add page-section class to acq home table
    
    To test:
    1. Go to the Acquisitions home page.
    2. Look and the bugdets and funds table and notice the page-section class.
    3. Make sure everything looks good.
    
    Note: I made some indentation changes.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e314375d77106a996f4645d3bf2e6c00bb9bb60d
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Oct 18 22:22:55 2022 +0000

    Bug 31771: Add page-section to stock rotation pages
    
    To test:
    1. Apply patch
    2. Set the system preference 'StockRotation' to enable.
    3. Go to Cataloging / Stock rotation
    4. Add some new rotas
    5. Make sure the page looks good with the new page-section div
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d8deaa86201253205bfbf1c86ec54e4313d5ab52
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Oct 18 22:11:30 2022 +0000

    Bug 31770: Add page-section class to rotating collections page
    
    To test:
    1. Apply patch
    2. Go to the rotating collections page. Tools / Rotating collections
    3. Add some new collections
    4. Note that the page looks good with the new page section div.
    
    Note:
    I made some indentation changes and fixed a small typo where the 'dropdown-toggle' class was not being properly applied.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e9e4ed8c2638b9b980c53db920fab702f08eabf1
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 21 10:22:12 2022 -0300

    Bug 31848:: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6aef35b07e0fba8a2bc33f91578b8ad672fb1e88
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 18 12:07:38 2022 +0000

    Bug 31848: Correct margin and padding on action fieldset in aside
    
    This patch makes a minor modification to the padding and margin of
    <fieldset class="action"> nested in a .brief fieldset. This markup is
    seen most often in sidebar filter form. The change allows the submit
    button to line up better with other form fields.
    
    The patch also corrects and inconsistency by modifying the holds queue
    template so that the .action fieldset is inside the .brief fieldset.
    
    To test, apply the patch and rebuild the staff interface CSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client)
    
    - If necessary, place one or more holds for pickup at your logged-in
      library and rebuild the holds queue
      (misc/cronjobs/holds/build_holds_queue.pl)
    - Go to Circulation -> Holds queue.
    - The form should look correct.
    - Submit the form and check the form in the sidebar. It should look
      correct as well, with the submit button aligned left with the other
      form fields.
    - Check pages with similar sidebar forms, e.g.:
      - Administration -> Budgets -> Funds -> Planning
      - Circulation -> Overdues
      - Circulation -> Holds to pull
      - Acquisitions -> Invoices -> Search results
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 62e2210b829642522bd237e983d8a83554bfa0e3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 21 10:21:01 2022 -0300

    Bug 31753: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 493b90af0ceadab2b605d701eb524fca442a45f4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 21 11:52:43 2022 +0100

    Bug 31753: (follow-up) lighten headers more
    
    OK.. colors are hard!.. This patch increases the 'lighten' parameter a
    little and hopefully improves the headers and footers of modals slighty
    back to being less 'bright' green.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ab92871651febaa10ecb9bdd5c6d1e6c168e4ebf
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 18 18:39:21 2022 +0000

    Bug 31753: Dialog boxes inside of modals don't seem wide enough
    
    This patch makes some tweaks to the style of Bootstrap modals in the
    staff interface, including making a correction to the style of .dialog
    <div>s within modals.
    
    The patch makes a correction to the modal markup generated by the guided
    reports template for SQL previews so that the modal footer displays
    correctly.
    
    The patch also removes CSS which makes links inside headings the same
    color as the heading text. The effect of this was to make links
    invisible in the headings of hold confirmation modals.
    
    To test, apply the patch and rebuild the staff interface CSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client).
    
    - Test the hold confirmation modal in check-in:
      - Place a hold on an available title.
      - Check in an item from that record and confirm that the modal
        looks correct. The "Check in message" box should take up the whole
        width of the modal, and the links in the modal header should be the
        standard green.
    - Test the SQL preview modal in reports:
      - Go to Reports -> Use saved.
      - Click the actions menu associated with one of your saved reports and
        choose "Preview SQL." The modal should look correct.
    - Other modals which might be tested: MARC previews from the
      bibliographic detail page, the cataloging search page, the Z39.50
      search page, etc.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 489676e1185b87b8039a2e1e2a81fe5087a34081
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Oct 21 10:49:32 2022 +0000

    Bug 29987: (QA follow-up) Remove unused cnt attribute missing a filter
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bce51debc65acfb89232a8603abb3e37c4f3b101
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Sep 30 16:06:45 2022 +0100

    Bug 29987: Improve validation
    
    This patch adds hinting to display the required state of the cash
    register fields.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d6262c0f302fb6140a3d0c311305502d667f2022
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Aug 24 11:06:57 2022 +0100

    Bug 29987: Display credit without offsets in transactions
    
    This patch adds a row to the transactions table for credits without
    corresponding offsets
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a0593924906b74f41c8b347469a3eaa558e400a1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Aug 24 11:23:25 2022 +0100

    Bug 29987: (follow-up) Fix missing payment type
    
    The payment type include has changed since the patch was first written,
    we now require a 'type' is passed to properly set the field name.
    
    This should fix the 'bankable' issue raised.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 529341c78bfaf7b8ece43e18cc30a13b64478639
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jun 29 17:19:05 2022 +0100

    Bug 29987: Add register support to manual credits
    
    This patch adds the register and transaction type selection options to
    the manual credit page.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dc86053bd89dcdaec3087d58fe84ef012f552770
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 7 16:24:20 2022 +0100

    Bug 31714: Add Generic way to print patron slips
    
    This patch adds a very simple controller and template to allow patron
    slip printing without all the boilerplate.
    
    See bug 31713 for an example use.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fd51a238c84b8e9ce5b0f276c4e35e287eb059da
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Mar 17 10:44:31 2021 -0400

    Bug 31684: Plugin versions starting with a "v" cause unnecessary warnings
    
    Our code assumes that plugin version will be purely numeric ( e.g. 1.2.3 ) but many plugin authors ( including myself ) use the format "v1.2.3".
    This causes warnings as we use a numeric comparison on the version numbers.
    It could make sense to check for and strip any v's from the beginning of the version.
    
    Test Plan:
    1) Apply the first patch to set the test plugin's version to v1.01
    2) prove t/db_dependent/Koha/Plugins/Plugins.t
    3) Note the warnings and test failures
    4) Apply this patch
    5) prove t/db_dependent/Koha/Plugins/Plugins.t
    6) All tests pass!
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a26cc8a29bb86185a5131a21e4e25166c503323e
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Oct 5 12:47:16 2022 +0000

    Bug 31684: Set Koha::Plugin::Test version to 'v1.01'
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 61b5dfb50b8f7bc16addb43caea0c166816f523d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 21 09:56:21 2022 -0300

    Bug 31803: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3b2d96cef7d587c51b1e604f371255ca43fa5f8b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 20 10:55:06 2022 +0000

    Bug 31803: "remove from cart" button displayed even if not in cart
    
    This patch modifies CSS related to the "Remove from cart" button
    associated with bibligraphic record views. A change in specificity of
    buttons made by Bug 30952 made it so that the button was no longer
    hidden correctly.
    
    To test, apply the patch and rebuild the staff interface CSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client).
    
    - Locate a bibliographic record in the staff interface and view the
      detail page.
    - In the toolbar you should see an "Add to cart" button but not a
      "Remove from cart" button.
    - The buttons should correctly toggle on and off as you add and remove
      the title from the cart.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit af4b05bffb584b71fd1143559623977c7bdfe508
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Oct 19 22:44:45 2022 +0000

    Bug 31829: Fix change password form alignment
    
    This patch gives the fieldset on member-password.tt the class row. It also moves the hints below the list.
    
    To test:
    1. Apply patch
    2. Pull up a patron record and go to 'Change password'.
    3. Make sure the form now looks good.
    4. Also check and make sure the form is still functional.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 980ca17fd83d1a900245c161cbef61b4205da961
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Oct 19 20:29:06 2022 -1000

    Bug 31885: Define submit button as primary in renew page
    
    Submit button in renew page is the most important action on this form, it should be yellow
    
    Test plan :
    1) Go to renew page /cgi-bin/koha/circ/renew.pl
    2) Check submit button 'Submit' as class 'btn-primary' and is yellow
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 80d6cdf1142e235ef151a0cde7d5bf6df175922b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 18 17:34:16 2022 +0000

    Bug 31750: (follow-up) Stylelint fixes
    
    This patch makes no changes which affect the style of the page.
    All changes are corrections to formatting.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dc8afe68d417df7d12e2f6c43111378384013fe4
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 18 17:21:40 2022 +0000

    Bug 31750: Need more padding in cataloguing
    
    This patch makes some minor tweaks to the CSS controlling the appearance
    of the toolbar shown in the basic cataloging editor.
    
    To test, apply the patch and go to Cataloging -> New record.
    
    - Confirm that the page looks correct, with the toolbar the same width
      as the main content of the page.
    - Confirm that the toolbar looks correct when you scroll and the toolbar
      "floats"
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 77f00cafa39da5c46c05f6ea7e6a5f9208ced610
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 20 17:59:19 2022 +0000

    Bug 31811: Add 'page-section' to MARC modification templates pages
    
    This patch adds "page-section" divs to the MARC modification templates
    template so that sections are properly defined and content has adequate
    contrast.
    
    Note: The patch includes indentation changes, so please ignore
    whitespace when checking the diff.
    
    To test, apply the patch and go to Cataloging -> MARC modification
    templates.
    
    The main content should be surrounded by a white box whether you're
    looking at the list of templates, the the action add/edit form.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0e34f555f95580dfe65f76787badbaf148b3377e
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Oct 16 00:04:11 2022 +0200

    Bug 31738: Fix untranslatable string for recalls
    
    To test translation:
    1. Apply patch and update your po files using:
       https://wiki.koha-community.org/wiki/Translating_Koha#Updating_the_po_files_in_your_installation
    2. Verify the string appears in po files now and translate it
    3. Install the language
    
    To test functionality:
    1. Turn on recalls
       1.1. In Administration > Global system preferences, enable UseRecalls
       1.2. Add recalls permissions in your circulation rules
    2. In the OPAC, log in as a patron
    3. Find a record with checked out items and place a recall
    4. In the intranet, go to the patron file of the patron who currently has that item checked out
    --> In the Checkouts table at the bottom of the page, there is a red message next to the recalled title
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2518ba100d670b2c0c0838126275f968e8f0d605
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Oct 19 15:42:50 2022 -1000

    Bug 31810: Define 'Place hold' button as primary
    
    When placing a hold in staff, the 'Place hold' button should be yellow for the most important action on this form.
    
    Patch changes this button from btn-default to btn-primary.
    
    Test plan :
    Play with placing hold, one and several, with cases :
    - normal
    - override required
    - none available
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fa18ae1b4a5c2ca1a8d0588f302768be05e286b6
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Oct 19 20:20:35 2022 -1000

    Bug 31884: Define 'check in' button as primary
    
    Check in button in check in page is the most important action on this form, it should be yellow
    
    Test plan :
    1) Go to check in page /cgi-bin/koha/circ/returns.pl
    2) Check submit button 'Check in' as class 'btn-primary' and is yellow
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 06d8def79cee72ac3657b488bc6df0f64b145415
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Oct 17 11:45:40 2022 +0000

    Bug 28375: (QA follow-up) Remove two remaining interface params
    
    No test plan: parameter is already obsolete.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit de4255e9288db1af7def818247a98e5b7f109a66
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Oct 7 12:00:21 2022 +0000

    Bug 28375: (follow-up) Use C4::Context->interface
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1dc979af7c96562c2fd2f954637f76f4faabca47
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 30 12:06:25 2022 +0000

    Bug 28375: (follow-up) Remove guessed interface parameter - always pass
    
    Previous patch added interface parameter passed on each call. There was an
    existing one that 'guessed' - this patch removes that
    
    Fixes missing comma
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 70325d48a0fa71a0937b40bf76ead2e841e90697
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue May 18 15:59:53 2021 +0000

    Bug 28375: Inefficiencies in fetching COinS
    
    This patchset adds an 'interface' parameter to XSLTParseForDisplay to avoid fetching
    coins when not needed
    
    Additionally we move some logic from the scripts to searchResults to avoid an extra fetch fo the biblio object
    
    To test:
    1 - Enable  COinSinOPACResults syspref
    2 - Also enable  OPACShowOpenURL  and  OPACOpenURLItemTypes  - adding an itemtype that you can find
    3 - Perform a search on the OPAC and confirm coins are included and openurl shown
    4 - Perform a search on staff client and confirm openurls do not show
    5 - Apply patch
    6 - Results should be the same
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 919736afccd4ad3dd34588706d8191d097fca13b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 10 16:22:05 2022 +0000

    Bug 31728: Remove duplicate claims modal template markup
    
    This patch removes some markup which duplicates markup now in a
    separate include file. modal-claims.inc contains the same
    markup for #claims-returned-modal as checkouts.table.inc.
    
    To test, apply the patch and make sure a LOST authorized value code
    is defined in the  ClaimReturnedLostValue system preference.
    
    - Check an item out to a patron, e.g. item 39999000001334 to patron
      23529000179433.
    - In the table showing the patron's checkouts, click the "Claim
      returned" button.
    - A "Claim returned" modal should appear.
    - Click "Make claim."
    - Switch to the "Claims" tab. You should see the item listed there.
    - Check out another item, e.g. 39999000013313, to the patron and test
      the return claim process again from the patron detail page.
    - Check out another item, e.g. 39999000018691, to the patron with a due
      date specified which is in the past.
    - Go to Circulation -> Overdues. You should see the item in the list of
      overdues. Test that the "Claim returned" button works correctly on
      this page too.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a90cfeef734dc3e2bb4280818cd75030ca627fd1
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Oct 17 10:32:47 2022 +0000

    Bug 31842: Fix DT search error on col.data.split
    
    Set searchable to false for opac_info.
    
    Test plan:
    Check if DT search for libraries works again.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] Reverted the data/render function change as requested
    by Jonathan. Considering the fact that dataTables or custom
    extensions do not check col.data.split as a clear bug btw.
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 246efd2e9b843f3a2920fcf0a0414280e6f1a1c2
Author: Mason James <mtj@kohaaloha.com>
Date:   Thu Oct 20 13:26:17 2022 +1300

    Bug 31883: Filter trim causes false warnings
    
    Test plan:
    Run xt/find-missing-filters.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 98f50491bd35e9dbda522cf2b7028e15f7a64d13
Author: Slava Shishkin <slavashishkin@gmail.com>
Date:   Tue Oct 11 18:18:23 2022 +0300

    Bug 29012: Fix undef warnings around unseen_renewals_allowed in smart-rules.pl
    
    Trivial fix.
    
    To reproduce:
    1. Create or edit a rule on /cgi-bin/koha/admin/smart-rules.pl - i.e. submit the form (make POST request)
    2. Notice the mentioned above warning in plack-intranet-error.log
    3. Apply the patch.
    4. Repeat step 1.
    5. That warning in log file should be no more.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 254f72132046aaa89c866784bb572ae42732054f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 11 12:40:51 2022 +0000

    Bug 29012: Fix existing update to prevent inserting incorrect data
    
    Both updates now rely on 'suspension_chargeperiod' as the source of truth
    for existence of a rule. Spot checking some existing production databases this
    seems to be acceptable.
    
    This alters the update to only add rules where a 'suspension_chargeperiod' rule exists
    and a value for the rule is not already set.
    
    NOTE: While the table has a unique key:
    UNIQUE KEY `branchcode` (`branchcode`,`categorycode`,`itemtype`,`rule_name`),
    
    This key doesn't prevent duplicates on NULLs, i.e.:
    
    branchcode  | categorycode  | itemtype  | rule_name                 | rule_value
    NULL        | NULL          | BK        | unseen_renewals_allowed   | 1
    NULL        | NULL          | BK        | unseen_renewals_allowed   | 2
    NULL        | NULL          | BK        | unseen_renewals_allowed   | 3
    
    So we need to both check that any rule is present and that the specific rule is not.
    The 'INSERT IGNORE' won't IGNORE existing values except for the most specific rules
    
    Test plan:
     0 - Edit and save existing default rule in DB (sample data does not include suspension_chargeperiod)
     1 - Set some rules for "Default checkout, hold and return policy" for "Standard rule" and some specific libraries
     2 - cp installer/data/mysql/db_revs/220600024.pl installer/data/mysql/atomicupdate/
     3 - SELECT * FROM circulation rules, note the number of rules that exist
     4 - updatedatabase
     5 - Check the DB again, you should now have rules as described in the bug
         i.e. You will have 5 new rules per 'Default checkout, hold and return policy'
     6 - apply 1st patch on bug
     7 - rm installer/data/mysql/atomicupdate/220600024.pl (so we don't add again)
     8 - updatedatabase
     9 - Check DB, the extra rules have been deleted
    10 - Apply 2nd patch
    11 - cp installer/data/mysql/db_revs/220600024.pl installer/data/mysql/atomicupdate/
    12 - rm installer/data/mysql/atomicupdate/bug_31727.pl (so we can confirm update isn't adding rules)
    13 - updatedatabase
    14 - Confirm no change in rules since step 9
    15 - git reset --hard (get deleted update back)
    16 - rm installer/data/mysql/atomicupdate/220600024.pl
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b2fdd8f745f77a52d00ffffdfea8dd60dc33f462
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Aug 19 12:18:46 2022 +0100

    Bug 31417: Update and reference cat-menu.inc
    
    This patch reinstates the cat-menu.inc include and references it from
    the various 'tools' that are closely tied to cataloging.
    
    We use the new cataloging home page submission as a reference for which
    options should appear in the menu.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7734d0d7a07435532dea66e630adaeae092f396c
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Oct 17 20:18:16 2022 +0000

    Bug 31162: (QA follow-up) Use new WRAPPPERs and fix help link
    
    This migrates the start page to the new page structure using
    WRAPPERs instead of includes. One visible problem before
    was the missing help link.
    
    Also makes sure the help link leads to the correct page :)
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c1b08d24da323b00e12316c0063c22060c50efab
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jul 15 12:37:03 2022 +0100

    Bug 31162: Add a cataloging module home page
    
    This patch adds a new cataloging-home template and controller and
    replaces most cases of links to addbooks.  This serves to provide a new
    cataloging home page for the cataloging module and keeps it distinct
    from the current addbooks page it partially replaces as a starting point
    for cataloging.
    
    We migrate most cataloging related tools from the 'Tools' module whilst
    opting to move 'Rotating collections' to the 'Circulation' section of
    the 'Tools' homepage. We also add links to the cataloging tab of system
    preferences and a the adminstration pages if the user has the correct
    permissions to have access to these areas.
    
    Signed-off-by: KIT <michaela.sieber@kit.edu>
    Signed-off-by: Emmanuel Bétemps <e.betemps@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3efd9e4f9680da5cad9c2eae0063565959c80e15
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 18 09:54:08 2022 -0300

    Bug 31626: DBRev 22.06.00.066
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6417a1f2597932952eefc2e523ad35c09886de26
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 18 09:50:41 2022 -0300

    Bug 31626: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a4409568b39a9fc0d3edd3606e30c40da8c8c4d0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 18 09:48:59 2022 -0300

    Bug 31626: (QA follow-up) Make db_rev robust
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9bc996be91c58b22497bdb258df13306cce31767
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Sep 26 12:05:10 2022 -0400

    Bug 31626: Add letter id to the message queue table
    
    It can be useful to know exactly what template was used to generate a notice. To this end, it would be useful to store the letter id as a foreign key in the message queue table.
    
    Test Plan:
    1) Apply this patch
    2) Run updatedatabase.pl
    3) Restart all the things!
    4) Run an action that will send a notice to a patron
    5) Note the letter id is now in the message_queue table for that notice!
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6fc1ddd1442ee4ef32a7d9b4487fa32a7ac2a205
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 18 09:38:05 2022 -0300

    Bug 25426: DBRev 22.06.00.065
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit afecf632c335c53a0a110dd6cdd7935bd9cbb784
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 18 09:35:17 2022 -0300

    Bug 25426: (QA follow-up) Make subtest stand on its own
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5e09bb142789e5e6276c6755ef428d8ad3558227
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Oct 3 12:14:20 2022 +0200

    Bug 25426: (QA follow-up) Update notes on circulation rules page for new pref
    
    This adds a note to the circulation rules page that already
    explained about ReservesControlBranch to also include information
    about the new CircControlReturnsBranch system preference.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b8b541fd7249006250aac34f37cba15fd3f0f2d6
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Oct 3 11:32:55 2022 +0200

    Bug 25426: (QA follow-up) Rephrase CircControlReturnsBranch system preference description
    
    Rephrased in hope to make its use a little clearer:
    * 'logged in at' replaced with 'checked in at' keeping self checks in mind
    * 'At checkin' rephrased a bit to explain possible options
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0313a44ca71da0a3872fd1f681612aeda628c4fc
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Oct 3 11:31:06 2022 +0200

    Bug 25426: (QA follow-up) Small fixes to POD and INSERT IGNORE or datatabase update
    
    * Makes sure the system preference is added with INSERT IGNORE
    * Some smaller fixes/additions to the POD of get_return_branch_policy
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ef0bf75eed10275b0abf3a134dc392fd77ed507c
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Aug 25 13:05:32 2022 +0000

    Bug 25426: Allow return policy to be selected via syspref and not just home library
    
    1) Apply this patch
    2) Run updatedatabase.pl
    3) Verify CircControlReturnsBranch is set to home library by default
    4) Set a Return policy for Branch A to "Item returns home" ( homebranch )
    5) Set a Return polity for Branch B to "Item returns to issuing library" ( holdingbranch )
    6) Set a Return polity for Branch C to "Item floats" ( noreturn )
    7) Create an item with homebranch of Branch A, holding branch of branch B
    8) Log in as Branch C
    9) Set CircControlReturnsBranch to "the library the item is currently held by"
    10) Check the item in, note it should be returned to the holding library
    11) Set CircControlReturnsBranch to "the library the item is owned by"
    12) Check the item in, note it should be returned to the home library
    13) Set CircControlReturnsBranch to "the library you are logged in at"
    14) Check the item in, note it should float
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ab1e0a5d6ad2eb31e4322ec11a1e971386144f5d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 18 09:02:44 2022 -0300

    Bug 14783: (follow-up) Fix problematic db_rev
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ae986b992dfc2299ec58f4d1c0079fbac1ec4a03
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Oct 17 13:08:33 2022 +0000

    Bug 27265: (QA follow-up) Typo on L99 cron script
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a39ecfd7f766be77d92d0054364ecda65942d2ec
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 30 12:32:25 2022 +0000

    Bug 27265: (follow-up) Use existing parameter
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit da7bcc2252666e31c64d7edaecc3fc59ead79a0d
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Dec 18 08:45:06 2020 -0500

    Bug 27265: Enable message queue cron to accept multiple codes and types
    
    It would be nice to be able to combine several types in a single run,
    but exclude others, without having to have multiple cron lines
    
    Test Plan:
    1) Apply this patch
    2) Run process_message_queue.pl with a single -c parameter
    3) Note behavior is unchanged
    4) Run process_message_queue.pl with multiple -c parameters
    5) Note all the codes specified are processed
    6) Repeat 2-5 with -t for type limits
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 43ecb3c86c8770ae2606dc0f64aa316a35bc8adf
Author: Andreas Roussos <a.roussos@dataly.gr>
Date:   Tue Oct 11 08:41:15 2022 +0200

    Bug 27315: use the namespace-aware docbook stylesheet
    
    When viewing the man page for the `koha-list` command, the output does
    not appear correctly: there appears to be a "staircase"-like effect on
    the text. The same is true for all other man pages.
    
    The source XML files for our man pages have the following namespace
    declaration at the top: xmlns='http://docbook.org/ns/docbook', which
    means they are DocBook V5.0 documents and should be processed by
    namespace-aware DocBook XSL stylesheets.
    
    This patch fixes that by using the DocBook-to-man-page transformation
    stylesheet from the docbook-xsl-ns package (note the "-ns" suffix).
    
    Test plan:
    1) Apply the patch
    2) Build and install new package
    3) Confirm the man pages display correctly
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c184e88464d60e0b1fec70d2b74eb9f206aa9d9a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Oct 17 17:17:25 2022 +0000

    Bug 28555: (follow-up) Add to script documenation
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 125ec8a207333d81e644eb03827db89e395d2b0b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 12 13:11:46 2022 +0000

    Bug 28555: (follow-up) Make verbose count flags passed
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fe376c7d8531279a1b6c0ebb9b0a2ed671b43a00
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jun 11 15:12:32 2021 +0000

    Bug 28555: Improve logging for overdue_notices.pl
    
    Currenlty the output with -v from overdue_notices is a bit overwhelming and hard to parse
    
    I do a few things here:
    1 - Only show SQL if verbose > 1
    2 - Add some separators to make it more readab;e
    3 - Remove some redundant messages with branchcode and borrowernumber
    
    To test:
    1: perl misc/cronjobs/overdue_notices.pl -v
    2: Notice you get a LOT of information all smushed together
    3: Apply patch
    4: perl misc/cronjobs/overdue_notices.pl -v
    5: Less info, and easier to read
    6: perl misc/cronjobs/overdue_notices.pl -v -v
    7: All the info, but nicer to read
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a39ef13ccf76e34fe1c485b40ffcdf13424e786e
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Oct 17 17:24:10 2022 +0000

    Bug 31835: Add page-section to holds queue
    
    To test:
    1. Apply patch
    2. Make some holds and then run build_holds_queue.pl
    3. Look at the holds queue and make sure everything looks right with the new page-section.
    
    Note:
    I made some indentation and whitespace changes.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a0a821be8af54c80324270ae1a0c24f13d9f1a4c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 17 18:00:41 2022 -0300

    Bug 31569: (QA follow-up) Add missing entries in schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 04d187f03931779e1cc398fe8834c5f597afa835
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 17 17:33:34 2022 -0300

    Bug 14783: DBRev 22.06.00.064
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3da8a25253248802e65e6d69af4b2bce4d2d9dee
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 17 15:59:07 2022 -0300

    Bug 14783: Update atomicupdate syntax
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ef37acfb73270f7a9160dd3c3a0d18d799e10373
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 17 15:45:10 2022 -0300

    Bug 14783: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 217da9cf3dd6c10e92397274c61570ef33b50587
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 17 15:43:22 2022 -0300

    Bug 14783: (QA follow-up) Rename method and move tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0e79d16e5eda52b7b0c1473260c92a43cf1ec271
Author: Björn Nylén <bjorn.nylen@ub.lu.se>
Date:   Tue Nov 9 15:40:22 2021 +0100

    Bug 14783: (QA follow-up) Add unit tests.
    
    This commit adds unit tests for Bug 14783.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b9182bb98340e58716e67e4a6514a3eaedd8ac21
Author: Björn Nylén <bjorn.nylen@ub.lu.se>
Date:   Tue Nov 9 16:42:04 2021 +0100

    Bug 14783: (QA follow-up) Change "Pick up location" to "Pickup location" in table.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a3ddbe2407a6a5815df8399d19f1e2d1b54309c5
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jul 28 19:27:34 2021 +0000

    Bug 14783: (follow-up) Move pickup library form into modal
    
    This patch attemps to simplify the list of holds by moving the form for
    changing a hold's pickup library into a modal dialog.
    
    This patch also makes minor tweaks to the CSS for the "X" close button
    shown in modal in windows. Instances where modal markup used "x" have
    been updated to use the Bootstrap 4 standard "&times;"
    
    To test, apply the patch and rebuild the OPAC
    SCSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client)
    
    - Turn on the OPACAllowUserToChangeBranch system preference.
    - Log in to the OPAC as a user with holds.
    - In the view of your holds, confirm that each hold which can be
      modified shows a "Change" link.
    - Clicking the link should show a modal window with the title of the
      item on hold shown in the header.
    - Confirm that changing the pickup location works correctly.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4ef87fe837dfb00cf952450ec366955aa70a1eaa
Author: Björn Nylén <bjorn.nylen@ub.lu.se>
Date:   Fri Oct 7 11:22:19 2022 +0000

    Bug 14783: Change pickup location from opac.
    
    This patch allows users to change the  pickup location for their holds
    from the opac. A syspref (OPACAllowUserToChangeBranch) controls at what
    stage a hold can be changed.
    
    To test:
    1. Set up holds with diffrent statuses for a patron (pending, waiting,
       in transit, suspended)
    2. No pickup locations for any hold should be able to be changed.
    3. Turn on and off the different options under
       OPACAllowUserToChangeBranch. Make sure that only the corresponding
       holds can be changed from the opac. Check eg in the staff client that
       pickup location has changed.
    4. The available pickup locations should respect any transfer
       restrictions. (Same as the
       holds list for a biblio in staff client)
    5. For an in-transit hold: Check in the item at the original pickup
       location.
    6. Note that it will be redirected to the new location.
    
    Sponsored-by: Lunds Universitetsbibliotek
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ace48e891118e862d1cf0a2fcc8b406267bce5f4
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Thu Dec 2 17:58:56 2021 -0500

    Bug 21705: Map copyrightdate to both 260/264c by default for new MARC21 installations
    
    This patch adds a mapping from 264 to biblio.copyrightdate.
    
    To test:
    1) Apply patch
    2) Delete existing frameworks
       -  In the database
          delete from marc_tag_structure;
          delete from marc_subfield_structure;
          delete from biblio_framework;
    3) Load default framework
       - In a terminal, run
         ./misc/load_yaml.pl -f installer/data/mysql/en/marcflavour/marc21/mandatory/marc21_framework_DEFAULT.yml --load
    4) In the staff interface, go to Administration > MARC bibliographic framework
       - Make sure the default framework is there
    5) In Administration > Koha to MARC mapping, check the mappings for biblio.copyrightdate
       - biblioitems.publishercode should be mapped to 260 as well as 264
    6) Create a bibliographic record with a value in 264
       - In the database, check the biblio entry for this record, the value from 264 should be in copyrightdate
    7) Create a bibliographic record with a value un 260
       - In the database, check the biblio entry for this record, the value from 264 should be in copyrightdate
    
    I hope I didn't forget anything! :)
    
    Caroline
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 75b9e35acbdacf4ccc169ad561fb0697f3049bae
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Oct 13 22:18:32 2022 +0000

    Bug 31781: Add page-section to branchtransfers page
    
    This patch adds the page-section div to 2 tables on the branch transfer page.
    
    To test:
    1. Apply patch
    2. Place an item level hold on a few items.
    3. Now go to the branch transfer page and try transferring your items that have holds on them.
    4. This should bring up a 'Reserve found' page. Look at the table and make sure it looks good with the page-section div added.
    5. Now try some transfers that do not have holds. Make sure the table that populates also goods good with the page-section div added.
    
    Note: There are some indentation changes.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e7a647e475999098573f242c6ddf1eec47d21d52
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jul 28 08:35:33 2022 -0400

    Bug 31252: Advanced search in staff interface should call barcodedecode if the search index is a barcode
    
    We should run any inputted barcode through barcodedecode before passing it to any subroutines.
    This was missed during the initial development of bug 26351.
    
    Test Plan:
    1) Set itemBarcodeInputFilter to "Remove spaces from"
    2) Browse to the staff side advanced search
    3) Run a barcode search for "MY TEST"
    4) Note the message returned is:
       No results match your search for 'bc,wrdl: "MY TEST"'.
    5) Apply this patch
    6) Restart all the things!
    7) Repeat your search
    8) Note the message returned is:
       No results match your search for 'bc,wrdl: "MYTEST"'.
    9) Note the lack of the space between MY and TEST!
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a5775a68b92e05eae9dd576ad9dbd2cff698a907
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 17 08:27:56 2022 -0300

    Bug 31808: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit da8bdb4c3b62a600ae1a8528eae538a1254e9e24
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Oct 13 14:12:07 2022 +0000

    Bug 31775: Template cleanup
    
    Removing unused parts.
    
    Test plan:
    See first test plan. Confirm that it still works.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 03129f718f48be24b99d561d1c699977959fab2a
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Oct 13 14:49:31 2022 +0200

    Bug 31775: Show single library
    
    Test plan:
    Check both cases: one library (public accessible) and more
    libraries (public accessible). In the latter case click on
    one of these libraries too.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cf388e346f56c88a5bce4455bbf0a5d7ad884250
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Oct 14 23:21:44 2022 +0000

    Bug 31808: Set fieldset.rows li width to 100%
    
    To test:
    1. Find an item and try placing a hold.
    2. Under 'Hold details' the first list element is the patron name, it displays far to the right in an unusual location.
    3. Apply patch and regenerate CSS ( https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_interface )
    4. Try steps 1 & 2 again.
    5. The name should display correctly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 26c011f972979fce2b99d4eebb9f1bd965a27a20
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 17 08:23:36 2022 -0300

    Bug 31569: DBRev 22.06.00.063
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 09a3d968ae6835ad1f657fcf2314b2ffae6d8389
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 17 08:18:44 2022 -0300

    Bug 31569: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4fbdac34538acb873490a1401016d058490c7796
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Oct 7 14:26:09 2022 +0000

    Bug 31569: (QA follow-up) Remove additional spaces from ISBN/ISSN
    
    Before this change, the ISBN woudl display like: ( isbn )
    This patch removes the additional spaces so the display is
    the same as without this patch set on current master: (isbn)
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1a0a73760060d8244cf255b0a084d13cbf0f6666
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 15 13:54:08 2022 +0000

    Bug 31569: Add filters
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a4d60e2be5fe111926bc497aebf6acea85cd4858
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 15 13:50:35 2022 +0000

    Bug 31569: Remove unecessary imports
    
    By using objects a number of other routines are not needed:
    GetImportRecordMarc SetImportRecordStatus SetMatchedBiblionumber
    
    To test:
    Grep for routines above in addorderiso2709 and confirm they are not used
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c9559e92bd5575c474765b5412627c72fc1f13d5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 15 13:47:07 2022 +0000

    Bug 31569: Remove GetImportRecordsRange from list step
    
    This patch removes the use of GetImportRecordsRange from the step
    of listing import batches to choose. It was only used for a count so is a simple
    replacement
    
    To test:
    1 - Stage a number of files for import
    2 - Import one of the files from tools
    3 - Add to basket form a staged file
    4 - Confirm staged baskets are listed, and imported basket is not
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8072fa45b58ae5f9b32c67e5e8b835128d741123
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 15 13:35:37 2022 +0000

    Bug 31569: Remove GetImportRecordsRange from import stage
    
    This patch removes the use of GetimportRecordsRange from the importing
    step
    
    To test:
     0 - Apply patch
     1 - Stage a marc file for import
     2 - Add to basket from a staged file
     3 - Select titles to import (don't select all)
     4 - Fill out necessary fields, be sure to select itemtype on items tab
     5 - Import
     6 - Confirm titles successfully added to basket
     7 - Confirm staged import not marked as imported
     8 - Add to basket from same file
     9 - Select rest of titles
    10 - Import
    11 - Confirm staged file now marked imported
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b24611936a346a62ef7338145eab8bf153b6fa8c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 15 12:47:37 2022 +0000

    Bug 31569: Remove GetImportRecordsRange from import_biblios_list
    
    This patch changes the way records are loaded for display when adding to
    a basket from a staged file
    
    To test:
    1 - Stage a file of records for import
    2 - Go to Acquisitions, find a vendor, create or find a basket
    3 - Add to basket from staged file
    4 - Choose the file
    5 - Note the display of records
    6 - Cancel
    7 - Apply patch
    8 - Stage from same file
    9 - Note the display is unchanged
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0a2d2f7810d76a39a25cf90aabc442ea5178e768
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 15 12:42:56 2022 +0000

    Bug 31569: DB update and objects
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b04e8185a3e76004b152b877d7109f6534ef7371
Author: Petro Vashchuk <stalkernoid@gmail.com>
Date:   Thu Oct 13 17:37:24 2022 +0300

    Bug 31776: Fix a typo in cleanup_database.pl cronjob's help/usage
    
    cleanup_database.pl cronjob has a typo in it's usage/help:
    "preserve-logs" option should be "preserve-log" as it is everywhere
    in the code.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit be9b1fc60a0fc4a0dbf268e32acaa131169d32bc
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Oct 13 19:56:50 2022 +0000

    Bug 31780: Add page-section class to audio alerts
    
    To test:
    
    1. Apply the patch and go to Administration -> Audio alerts
    2. Confirm that the screen/table look correct with the page-section class added.
    
    Note: There are some indentation changes.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ae9536b61fe8381eb92956bfb3cc698d03bb08c1
Author: The Minh Luong <the-minh.luong@inlibro.com>
Date:   Wed Jan 26 16:22:19 2022 -0500

    Bug 28967: Patrons with no checkouts report shows patrons from other libraries with IndependentBranches
    
    When IndependentBranches is activated and a non-superlibrarian user looks at the "Patrons with no checkouts" report, it shows patrons from other libraries.
    
    To recreate:
    1) Activate IndependentBranches, IndependentBranchesPatronModifications and IndependentBranchesTransfers
    2) Create a staff user with limited permissions (NOT a superlibrarian), including reports permissions. Here are mine as an example
      - circulate (all)
      - catalogue
      - borrowers
        - delete_borrowers
        - edit_borrowers
      - reserveforothers (all)
      - reports (all)
    3) Create (or make sure you already have) a patron in another branch (if using an existing patron, make sure they have no checkouts or checkout history)
    4) Log in as your limited staff patron
    5) Go to Reports > Inactive > Patrons who haven't checked out
    6) Don't put in any limitations and click Submit
    -- The patron from the other library appears in the list
    7) Try to search for that other patron in the patron module
    -- The patron from the other library is inaccessible
    8) Apply the patch
    9) Notice that the limited patron can only see patrons from his own
    library
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 96d50e45d03dd507bd372ff83bf86bb42c07b41f
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Fri Oct 14 16:34:33 2022 -0400

    Bug 31807: Context for translation: Filter (verb) vs. Filter (noun)
    
    This patch add the context 'noun' to the 'Filter' string in
    marc-overlay-rules.tt. This will separate that instance of 'Filter' from
    the other ones, where it is meant as a verb.
    
    To test:
    1. Apply patch
    2. Visit Administration > MARC overlay rules, make sure the page works
    (no errors) and that there is a column called 'Filter'
    3. Update the po files
    
    gulp po:update --lang xx-XX
    
    for example, gulp po:update --lang fr-CA
    
    4. Check the xx-XX-messages.po file (e.g.
    misc/translator/po/fr-CA-messages.po), there should be an entry for
    'Filter', with a line msgctxt that gives the 'noun' context
    5. Update the file with a random word for the 'Filter' translation
    for example, I translated 'Filter' by 'Filter as a noun', just to see
    the difference
    
    \#: koha-tmpl/intranet-tmpl/prog/en/modules/admin/marc-overlay-rules.tt:83
    msgctxt "noun"
    msgid "Filter"
    msgstr "Filter as a noun"
    
    6. Install a new language
    6.1. Run the following commands in the terminal, replacing xx-XX with
    the language code (e.g. fr-CA)
    
    cd misc/translator
    ./translate install xx-XX
    
    6.2. In the Koha staff interface, go to Administration > Global system
    preferences
    6.3. Search for language
    6.4. Check the box next to the new language
    6.5. Save
    
    7. View the MARC overlay rules page in the new language, the 'Filter'
    column heading should be whatever you put in step 5
    
    Optional test
    8. In the staff interface in English, view one or more of these pages,
    the 'Filter' should be unchanged
    - Acquisitions > Late orders (Filter button)
    - Aquisitions > Search for vendor > Receive shipments (Filter heading on
    the left and Filter button)
    - Acquisitions > Search for vendor > Click vendor's name > Uncertain
    prices (Filter button)
    - Administration > Budgets > Click budget's name > Planning > Plan by
    ... (any option) (Filter heading on the left)
    - Reports > Use saved (Filter heading on the left)
    - Reports > Acquisitions statistics wizard (Filter column heading)
    - Reports > Patrons statistics wizard (Filter column heading)
    - Reports > Catalog statistics wizard (Filter column heading)
    - Reports > Circulation statistics wizard (Filter column heading)
    - Reports > Holds statistics wizard (Filter column heading)
    - Reports > Average loan time (Filter column heading)
    - Tools > News (Filter heading on the left)
    
    9. View these same pages in the other language, the Filter should NOT be
    changed to whatever you put in step 5
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 86bf698cf1a0bd13f0bdab27da7693e2d479b188
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 17 08:07:12 2022 -0300

    Bug 30487: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dd75682f7741c7adeb037f1116d4d9aa4bacb824
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Apr 7 10:54:38 2022 +0000

    Bug 30487: Convert checkout and patron details page tabs to Bootstrap
    
    This patch updates the checkout and patron details pages, updating
    jQueryUI tabs to Bootstrap tabs.
    
    To test, apply the patch and rebuild the staff interface CSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client).
    
    Go to Circulation -> Check out and load a patron record for checkout.
    Ideally the patron record should have a variet of data associated with
    it:
    
     - Checkouts
     - Relative's checkouts (if patron is a guarantor or guarantee to
       another patron with checkouts)
     - Holds
     - Article requests
     - Claims
     - Restrictions
     - Clubs
    
    On the patron's checkout page, test the various tabs corresponding to
    the features listed above. Having data to display in those tabs helps
    confirm that any table functionality triggered by the tab activation is
    working correctly.
    
    The checkouts tab should work correctly whether you have "Always show
    checkouts immediately" checked or not.
    
    Test that you can pre-select any tab by appending its anchor to the URL,
    e.g.:
    
    /cgi-bin/koha/circ/circulation.pl?borrowernumber=123#reserves
    
    Perform the same checks on the patron details page.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 094eb94ee2e9b23c28fd67b3dff17662174b6b4e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Oct 13 12:38:09 2022 +0100

    Bug 31762: Flatten page-section
    
    This patch removes the box-shadow from our 'card' mixin and thus makes
    page-section and other similar content area blocks look flat
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 92ecadbe90fa2c7945ef3bdb693c8f1ccc128a4b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 17 08:03:59 2022 -0300

    Bug 31747: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9518ddb3dc35a3ea89639fe4dc1eda59874440f6
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Oct 13 20:23:59 2022 +0000

    Bug 31773: Add page-section class to Manage staged MARC records page
    
    To test:
    1. Apply patch
    2. Have some MARC records and stage them for import. It will be nessesary to add more than 1
    3. Go to the Manage staged MARC records page and make sure the table looks right with the page-section added.
    
    Note: I am also adding the Bootstrap table class to this table becuase I think it makes the table look much nicer.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 62360de77981681637a78b9d3a5ae192be5616be
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Oct 13 15:52:46 2022 +0000

    Bug 31766: Add page-section wrapper to notice table
    
    To test:
    1. Apply patch
    2. Look at the noitce page and notice how the table, and it's tools, now are wrapped with the page-section element.
    3. Is it better than it was before?
    
    Feel free to osboslete these patch and replace it with your own.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8a993d7bf47cf55fa85d719ab86206829a2a68f8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 13 18:09:21 2022 +0000

    Bug 31764: Add 'page-section' to patron clubs page
    
    This patch updates patron clubs template so that the main content of
    the page is wrapped with a "page-section" div. This ensures that content
    has sufficient contrast. See Bug 31757.
    
    Note: This patch contains indentation changes, so use diff accordingly.
    
    To test, apply the patch and go to Tools -> Patron clubs.
    
    - If necessary, add at least one club template and at least one club
      based on that template.
    - Confirm that the display of club templates and clubs looks correct.
    - Locate some patrons and add them to a club.
    - On the patron clubs page, locate a club with enrollments and click
      Actions -> Enrollments. Confirm that the page looks correct.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 51b74d050b19d006cfcc0b7e74c90d64454886c8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 13 18:07:07 2022 +0000

    Bug 31767: Add 'page-section' to tags page
    
    This patch updates tags templates so that the main content of
    the page is wrapped with a "page-section" div. This ensures that content
    has sufficient contrast. See Bug 31757.
    
    Note: This patch contains indentation changes, so use diff accordingly.
    
    To test, apply the patch and go to Tools -> Tags.
    
    - Confirm that the content area of the page looks correct.
    - Click one of the tag terms to view the list of titles tagged with that
      term. Confirm that this page looks correct too.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 48cc24f68c14b589834fde1baebfcc99f41f2a9e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 13 10:51:45 2022 +0000

    Bug 31758: (follow-up) Add padding between adjacent sections
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Edit: changed the subject

commit 9aa63f2f6c4ae9e140f17665f96ad6455ac21972
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Oct 13 09:51:16 2022 +0100

    Bug 31758: Add page-section div around subsections
    
    An alternative that puts adds a new page-section div around each
    preference subsection rather than around the whole tab section.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Edit: changed the title

commit 2cb313b43c3a660cbd3566b765520f10b092e020
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Oct 13 10:50:15 2022 +0100

    Bug 31747: Use page-section class, reduce CSS
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d17e318864a42f9d65843cdecae010580a85d46e
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Oct 12 22:09:22 2022 +0000

    Bug 31747: Give area-news box new staff design look
    
    To test:
    1. Apply patch
    2. Regenerate staff CSS ( https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_interface )
    3. Look at the #area-news element of the mainpage.
    4. There should be no rounded corners and the box-shadow should be the same as seen elsewhere ( i.e. patron details page )
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 40cff1a774a3a9deea2effb375b3e7272003444c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Sep 21 16:10:34 2022 +0000

    Bug 31595: Don't process extended attributes if none are inlcuded in the file
    
    This patch simply adds a check to the import process to only process attrbutes if
    they have been found in the data
    
    To test:
    1 - Import some patrons without extended attributes
    2 - Import patrons including extended attributes
    3 - Confirm both work unchanged
    
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0d974073db9311336ddb6bcdf82eb980953983a8
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Oct 14 09:07:14 2022 +0000

    Bug 31785: (follow-up) Fix modify operation too
    
    Test plan:
    Enable SQL strict mode (koha-conf).
    Modify branch, set Public to No.
    Check.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9c4a557c970705cad8f209f05b1f615940fde0ca
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Oct 14 07:42:26 2022 +0000

    Bug 31785: Fix for adding non-public library
    
    The code in admin/branches.pl changed a 0 to undef which is not
    desirable for booleans.
    A similar fix was already present for pickup_location.
    This may need a bit more thought (somewhere else!).
    
    Test plan:
    Add a new branch with pickup location No, public No.
    Check.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bbaeba596874d9180bd9d915df1744210e4108e2
Author: David Nind <david@davidnind.com>
Date:   Sun Oct 9 21:44:37 2022 +0000

    Bug 31724: Remove 'i' from breadcrumb when deleting a MARC framework subfield
    
    Remove 'i' added to the end of the breadcrumb on the confirmation page
    when deleteing a MARC framework subfield.
    
    Test plan:
    1. Go to Administration > MARC bibliographic frameworks.
    2. View the subfields for a tag for a framework, for example:
       . BKS framework > Actions > MARC structure
       . Search for tag 245
       . Select Actions > View subfields.
    3. Select any subfield to delete and select the Delete button.
    4. Note that there is an 'i' at the end of the breadcrumb, for example:
       . ... > Confirm deletion of subfield bi
    5. Apply the patch.
    6. Refresh the page and note that that 'i' is removed.
    7. Sign off.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6f6c41042e354018a201e98a3ffa6896bf8abde9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 13 17:47:35 2022 +0000

    Bug 31763: Add 'page-section' to patron lists page
    
    This patch updates patron lists templates so that the main content of
    the page is wrapped with a "page-section" div. This ensures that content
    has sufficient contrast. See Bug 31757.
    
    Unrelated change: I wrapped some form controls in a <fieldset> to make
    it consistent with other pages and to work better with the updated
    markup.
    
    Note: This patch contains indentation changes, so use diff accordingly.
    
    To test, apply the patch and go to Tools -> Patron lists.
    
    - If necessary, create one or more patron lists so that the table
      appears. Confirm that the content area looks correct.
    - Click Actions -> Add patrons to confirm that the screen
      looks correct.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6d9c1403fbaf2e9784bd4774d41df4e07249022e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 14 11:04:40 2022 +0200

    Bug 31437: (bug 30718 follow-up) Prevent useless indexation call from ModDateLastSeen
    
    Koha::Object->store is triggering an UPDATE because the datelastseen is
    different than the value in DB (comparing a datetime with a date)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1b7db7e36934f9b72a3599733fcc81502975c075
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 14 10:57:30 2022 +0200

    Revert "Bug 30718: (follow-up) index_records is called more times than we thought"
    
    This reverts commit 35165e5f13ec11a62dea7f6b129f7f07c7ecb7f4.
    
    https://bugs.koha-community.org/show_bug.cgi?id=31437
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2e650fdd0cb48c8120b66a4c5c6318f674d2801b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Nov 22 13:00:57 2021 +0000

    Bug 29554: Do not hide display of itemtypes on neworderempty
    
    Hiding the list may lead to biblioitems.itemtype being NULL.
    We do not want that, since 942$c is mandatory.
    
    Test plan:
    Create basket and set 'create items when' to receiving or
    cataloging.
    Create order from new empty record.
    Check biblioitems.itemtype of created biblio.
    Without this patch, it would have been NULL like this:
        select biblionumber,title from biblio;
        |            7 | Test 3                |
        select biblionumber,itemtype from biblioitems;
        |            7 | NULL     |
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 938a76e62646cae9acc964ad8c8574df27f689d8
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Oct 12 21:56:49 2022 +0000

    Bug 31749: Fix detail display when not display cover images
    
    To test:
    1. Apply patch
    2. Have none of the image services turned on:
    AmazonCoverImages
    LocalCoverImages
    IntranetCoce
    SyndeticsCovers
    3. Look at the detail page, things should look right.
    4. Turn on some of these image services, things should still look right.
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1792382c4ce5e95f851f4dd801c82639373b8d1a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 12 16:16:33 2022 -0300

    Bug 30952: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 68ab7c6157a721e973087983682fde6688b31446
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Sep 28 16:43:53 2022 +0000

    Bug 30952: (follow-up) Restore DataTable sorting icons
    
    Some CSS was removed which controlled the appearance of DataTables
    column sort icons. Without it, DataTables tries to use some default
    images which do not exist.
    
    This patch restores the icons. With it, sorting icons should look like
    they do in master and there should be no related 404 errors in the
    console.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1d4114a3f392c49cbb08cabbd04f347f6b270683
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Sep 28 15:37:36 2022 +0000

    Bug 30952: (follow-up) Avoid nav menu jump between bold and normal
    
    I think styling links with a bold hover state results in a "jumpy" look,
    and I seem to recall making changes in the past to issues like in
    response to bug reports.
    
    I'd like to propose an alternative style for the nav menu which uses
    color changes to indicate the hover state. This menu can be seen in the
    sidebar of patron details, bibliographic details, etc.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a78e33a3ef9651b1a291d32f150a5f8580b3a46d
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Sep 28 16:38:25 2022 +0200

    Bug 30952: Fix style of datatables buttons when not inside a .pager
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8d0339bc89b595a8a84fb1f1eae0eb35a9c95a1c
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Sep 28 16:16:28 2022 +0200

    Bug 30952: Make the top left logo clickable area wider
    
    Issue #35
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b128878294cc76ce4a45f62b1b48ef0c19247ef2
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Sep 28 15:48:20 2022 +0200

    Bug 30952: Fix patroninfo-section alignment
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c3fd729aecfd89c14772747c0f5e57cc570dc13a
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Sep 28 15:45:27 2022 +0200

    Bug 30952: Fix toolbar alignment
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7537548a2bfba865d069dc4ec2ed670ba14522a9
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Sep 28 15:38:39 2022 +0200

    Bug 30952: Fix background of header search "extra-content" toggle
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ad57141cf06bacf569233eb80d483fd1757f9180
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Sep 28 15:23:20 2022 +0200

    Bug 30952: Change default buttons style to look like .btn.btn-default
    
    And do not change the style of these buttons when they are in a table
    If we want to make them look like links, we should use btn-link class
    instead
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 64f419a09bfafdd8e1253df53eca3eb866fd9be8
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Sep 28 14:17:30 2022 +0200

    Bug 30952: Harmonize tabs style
    
    - Reduce border width from 3px to 2px
    - Active tab is white on "primary" green (WCAG AA ✓)
    - Other tabs are black (#111) on "secondary" green (WCAG AA ✓)
    - Font weight is normal
    
    The patch also removes some useless/redundant CSS properties related to
    tabs
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c748a0ccfc0b5f8ea36e7ddbf91b58b462323eae
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Sep 28 11:10:47 2022 +0200

    Bug 30952: Add label style to label class inside fieldset.rows
    
    Issue #51
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 268e9ef438165fed1d80499953f1524d7d02f449
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Sep 27 13:35:23 2022 +0000

    Bug 30952: (follow-up) Fix style of floating toolbars
    
    This patch makes some changes to floating toolbars, both hc-sticky
    toolbars and DataTables floating toolbars. The changes fix some bugs in
    the display (incorrect z-index, unwanted margins) and proposes a
    different style for .searchheader-style toolbars (e.g. patron search
    results).
    
    To test, apply the patch and rebuild the staff interface CSS. Test pages
    with various kinds and combinations of floating toolbars, e.g.:
    
    - Administration -> System preferences
    - Patrons -> Patron search results
    - Administration -> Libraries
    - Catalog search results
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit af0b2fb847d81cd0e34d5772e40ef4c20de5c0d4
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Sep 27 18:08:16 2022 +0000

    Bug 30952: (follow-up) Use variables for primary and secondary greens
    
    _variables.scss currently contains a variable,
    $background-color-primary, which isn't used. I think we should use that
    variable anywhere the color is used, and use SASS color calculation to
    generate the secondary color.
    
    The two colors can be compared in the search header: primary for the
    background, secondary for the submit button color.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    Test various pages in the staff interface to confirm that the colors
    look the same as before: Search header, tab colors, "Last patron"
    button, etc.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7ae2978dcbdd0e3eaa14c78be2f7bb07a3476961
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Sep 28 09:22:44 2022 +0200

    Bug 30952: Fix color contrast so we are at least WCAG AA compliant
    
    Issue #10
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6ea413ed7565f3dc2ca32ab8cbe46db535b43f08
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Sep 27 13:20:33 2022 +0200

    Bug 30952: Fix biblio detail display when covers are enabled
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a195708e97159831184a081dabae007bfe00e14a
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Sep 27 13:09:02 2022 +0200

    Bug 30952: Remove Poppins font, use Bootstrap 5 font stack instead
    
    Issue #20
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit af964aec5a6a720ca70465ef98ac6e301db578b3
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Sep 27 11:27:27 2022 +0200

    Bug 30952: Harmonize tables style
    
    - 2 pixels border below <thead> and above <tfoot>
    - No border above or below table cells (in thead, tbody and tfoot)
    - No border around tables
    
    Issue #22
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b154e8ac5fc79303dcc57ecdde8a87ec47029b64
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Sep 27 09:36:22 2022 +0200

    Bug 30952: Add the "card" style to biblio detail page
    
    Issue #45
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 18a9fed7c6d68a10af65697e11e076ba70e6eecb
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Mon Sep 26 14:06:04 2022 +0200

    Bug 30952: Remove text shadow from buttons so they don't look blurred
    
    Issue #49
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3d0a8d2a8e4e5c7125c0e83ce5eab681c189b6e4
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Sep 15 15:33:35 2022 +0000

    Bug 30952: (follow-up) Proposed reworking of catalog header menu link
    
    Issue #46
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1f4f27ae93d095a98b4e10d1bc9271ddfcadc1b2
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Sep 15 13:56:49 2022 +0200

    Bug 30952: Fix table styling (cell borders, striping)
    
    Issue #22
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8db5e949902de2f090e02db95dacafd2d4c5ee20
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Sep 15 12:05:49 2022 +0200

    Bug 30952: Stop search bar resizing when switching tab
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dc42d6a62d637dd342533b9fd89befa1cf1478df
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Sep 15 11:24:20 2022 +0200

    Bug 30952: Add spacing between itemtypes and subtype limits
    
    Issue #43
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b6112fa62b1a5fcd13a12b27fa4ef6379d157ae1
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Sep 15 11:11:24 2022 +0200

    Bug 30952: Remove useless styles
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 639729776db8ad8e351dee76f7e2f8ce033c5225
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Sep 15 10:51:59 2022 +0200

    Bug 30952: Fix facets block display
    
    Issue #40
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e6ef4ef052e1542962ad111c11f895b69a33bf84
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Sep 15 10:35:22 2022 +0200

    Bug 30952: Fix positioning of fieldset's elements below a legend
    
    Issue #41
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0d950432f7bc47478907f14916a60df59a7cc828
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Sep 15 09:10:37 2022 +0200

    Bug 30952: Fix spacing of nested fieldsets
    
    Issue #42
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ccb42663fac989af3a3621afdf6a04655bc28187
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Sep 14 16:02:52 2022 +0200

    Bug 30952: Better header search bar on smaller screens
    
    - Show only tab icons on screens <= 992px
    - Hide form title on the left on screens <= 768px
    - Move some dropdown lists to the "extra" filters area
    
    Issue #24
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f32ba048c7500b88ac5dced42d10e3d7ed5bfa06
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Sep 14 14:38:41 2022 +0200

    Bug 30952: Fix style of some buttons
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6b137e75b98b7a91c8900322d3fa062d48ff2fe5
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Sep 14 14:37:46 2022 +0200

    Bug 30952: Fix toolbar positioning and spacing
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f896b8e899f3516cfe408e671e82c98b9c515fc7
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Sep 14 12:15:35 2022 +0200

    Bug 30952: Fix color of navbar toggle on small screen
    
    Issue #37
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f3dd750a972ecd95c566d413a7d468ecc01df9fe
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Sep 14 11:51:57 2022 +0200

    Bug 30952: Adjust colors of browse search
    
    Issue #23
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 77a475ad490d32d211ca3b36eeebc962866499aa
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Sep 14 11:39:15 2022 +0200

    Bug 30952: Fix navbar elements ordering for RTL
    
    Issue #38
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c1d246dd53b3a2fea042e401dc48cac915942f59
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Sep 14 11:33:23 2022 +0200

    Bug 30952: Fix header search bar for RTL
    
    Issue #38
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 32068a8b153f242f723ad837601296f68cb07edb
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Sep 14 09:11:32 2022 +0200

    Bug 30952: Header search - move tabs to the right (and other tweaks)
    
    Make the search bar take the whole page width, with inputs at the center
    taking all the available space
    Add a separator between inputs when there are more than one
    
    Issue #24
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 40adf77daaa2b0bdebd5f1141fef3f1be2d6dbd2
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Sep 13 16:37:58 2022 +0200

    Bug 30952: Set preferences save buttons as primary buttons
    
    Issue #32
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f5c7339d02dc8bf48a2b7ec6d0ef06197c97d821
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Sep 13 16:05:17 2022 +0200

    Bug 30952: Fix fieldset legend positioning
    
    Issue #27
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a12c80146e82c71288cefe9fab53201ed4f81581
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Sep 13 15:33:23 2022 +0200

    Bug 30952: Change sidebar menu headers
    
    - Remove the bottom border
    - Increase font size and weight
    - Fix a padding issue
    
    Issue #30
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7dd9554ca59b777e4f8351758df458ae9c348470
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Sep 13 15:04:46 2022 +0200

    Bug 30952: Bring back bullet points for lists
    
    Issue #29
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0e0604132e540f63201d083bbca068b0a03711e6
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Sep 13 14:49:07 2022 +0200

    Bug 30952: Remove messages box on patron detail page when empty
    
    Issue #28
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 07624601af21e148b0da322dc18feb369032d238
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Sep 13 13:25:31 2022 +0200

    Bug 30952: Reintroduce borders in search browse links
    
    Issue #23
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 675e9feda48e14cc8da64ee29c121b442947caec
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Sep 13 13:17:12 2022 +0200

    Bug 30952: Reintroduce placeholder and classes in catalogue search
    
    They were lost in the last rebase
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 657dbc7d6224b1ad49b075ab17c7c0dfec76b60a
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Sep 13 11:49:35 2022 +0200

    Bug 30952: Reintroduce table borders
    
    Issue #22
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 42577464de026868f4b82f4f617870feeeb9546e
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Sep 13 11:14:11 2022 +0200

    Bug 30952: Fix pagination colors
    
    Issue #21
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 11ad11f51aace5e6c1a2c9331784f662672b6bee
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Sep 13 10:08:34 2022 +0200

    Bug 30952: Remove white text shadow from buttons
    
    Issue #20
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit df6fa4424a6767d797768dc492c596526a3bce26
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Sep 13 09:08:50 2022 +0200

    Bug 30952: Fix contrast issue on patron brief view
    
    Issue #19
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b48858e83b76a74a03fc95631093c5a5a2396c4b
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Sep 13 08:47:29 2022 +0200

    Bug 30952: Fix background of "Clear filter" button
    
    Issue #16
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7bd769a135aca37e4d72797524ae1b19805f762f
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Sep 13 08:37:33 2022 +0200

    Bug 30952: Fix remaining header search bars
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 64a29e3b4c6bb94afec56a224259ad822ca5be50
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Sep 13 08:32:14 2022 +0200

    Bug 30952: Fix table headers
    
    Issue #16
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3994a7b52e05463f76c647c9ba157d38f6362f6e
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Mon Sep 12 16:29:51 2022 +0200

    Bug 30952: Change circulation home page links to buttons
    
    Apply the same style to staff home page links
    
    Issue #18
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0fd2a8d19024ff4b8903db16a7befd4a62a2f57c
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Mon Sep 12 15:08:11 2022 +0200

    Bug 30952: Move 'Clear filter' next to filter in table headers
    
    Issue #16
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 85b9bc13dd42984045a064dcdf4e99d9f259631a
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Mon Sep 12 14:30:24 2022 +0200

    Bug 30952: Fix item edit form
    
    Issue #31
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3f80e68b06612cf2928cdebb3d0698a776667c92
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Mon Sep 12 13:44:57 2022 +0200

    Bug 30952: Fix background of search header
    
    Issue #3
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 874e4d4708487ba59b7eca6b7aee7ca035edd398
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Sep 9 12:17:30 2022 +0200

    Bug 30952: Add card layout to patron messages in moremember.pl
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9f81f69391a60fa00d4b50844aeab869a008cb62
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Sep 9 12:09:46 2022 +0200

    Bug 30952: Move search bar below navbar and reduce navbar height
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4ab40c6a8de8c50be51b26bd93950a26e062bd2e
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Sep 9 10:27:03 2022 +0200

    Bug 30952: Add "card" layout to the checkout page
    
    Also fix the label positioning
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e9c256c0e37b734e59cbf429d0084a781724ade5
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Sep 9 10:13:51 2022 +0200

    Bug 30952: Change color of btn-primary and use that for Check out button
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5cfc3e3513be1e2169cc2c15d6c499949c7439df
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Sep 2 14:55:53 2022 +0200

    Bug 30952: Increase contrast between green text and white/grey background
    
    Issue #10
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5cfd9ce73090d988fa841f35ea3f861792e31ce6
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Sep 2 12:10:28 2022 +0200

    Bug 30952: Fix background color of dialogs (message, alert, error)
    
    Issue #9
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 87378e5062ca81eb9362274c166f59eec972aa16
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Sep 2 12:01:34 2022 +0200

    Bug 30952: Fix lists display on patron detail page
    
    Issue #15
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5a7c2fc61423a8dbee42564a0bb359cee975492e
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Sep 2 11:50:36 2022 +0200

    Bug 30952: Fix left padding of sidebar
    
    Issue #14
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f29d82341874bf5fc25897e48c727d94fb703bda
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Sep 2 11:32:40 2022 +0200

    Bug 30952: Fix "browse patrons by last name" display
    
    Issue #13
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5b5d953039a5640b60d403a3d1896942c1e135d7
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Sep 2 11:18:33 2022 +0200

    Bug 30952: Fix alignment of search results
    
    Issue #11
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a26283d524a6ddbb40d3283166fbe7724fabd094
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Sep 2 10:58:13 2022 +0200

    Bug 30952: Move the toolbar back to the left
    
    Issue #8
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2802a4dd91a52c5bcf81c36f169ae65fd3d731a5
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Jul 29 13:44:44 2022 +0200

    Bug 30952: Show the search catalog form by default in cat-search.inc
    
    Issue #1
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 72cf76f29516f9c8fac1a95cecc0aa42aa5e9ed6
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Jul 29 13:29:10 2022 +0200

    Bug 30952: Fix the 'keep_text' feature of the search bar
    
    Text in one form should be copied in other forms when switching tab
    
    Issue #2
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 241c8cc03d02b78de731f5312d53c1641dec0d2a
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Jul 29 12:55:47 2022 +0200

    Bug 30952: Fix position shift when hovering .linktools links
    
    Issue #6
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6fe65b9744bc6389d3d91fc8968b67254738ab1f
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Jul 29 12:29:40 2022 +0200

    Bug 30952: Fix "rows" forms
    
    Issue #7
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d940cc10ac90ab55511d7ca6cc675560f59e7b32
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Jul 29 10:39:52 2022 +0200

    Bug 30952: Replace "Home" by icon in breadcrumbs
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cd21757826651ba896715321d861a756c38d56f9
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Jul 29 10:06:20 2022 +0200

    Bug 30952: Undo change to Home breadcrumb for remaining templates
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b2eb614bd45b784a9b3f3088ded3adddef278544
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jul 26 11:53:39 2022 +0000

    Bug 30952: (follow-up) Undo change to Home breadcrumb
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f82ab0ae74f02f5cd36f1f47419a6921b98b9e71
Author: Solène Desvaux <solene.desvaux@biblibre.com>
Date:   Mon Jul 25 16:37:41 2022 +0200

    Bug 30952: The rest of CSS changes
    
    There is still work to do to split this patch correctly into several
    more logical patches. Consider this patch a WIP.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 96f9d2b9c39dacd32ee03781a33d2cb45c3e3fbf
Author: Solène Desvaux <solene.desvaux@biblibre.com>
Date:   Mon Jul 25 16:37:41 2022 +0200

    Bug 30952: Change tables style
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0f8ccc0a60e1216830521c536862c0ea6668d45c
Author: Solène Desvaux <solene.desvaux@biblibre.com>
Date:   Mon Jul 25 16:37:41 2022 +0200

    Bug 30952: Change default button style
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d0d6ded36bcbb8cdcf25101eead75aadf6c6b3a7
Author: Solène Desvaux <solene.desvaux@biblibre.com>
Date:   Mon Jul 25 16:37:41 2022 +0200

    Bug 30952: Change sysprefs nav menu style
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c11dcd72e211f2dec878ae816c3cd1d92a2fab68
Author: Solène Desvaux <solene.desvaux@biblibre.com>
Date:   Mon Jul 25 16:37:41 2022 +0200

    Bug 30952: Change login page style
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c523c775b2ed3f14f72ea112bebd0bcdcd188049
Author: Solène Desvaux <solene.desvaux@biblibre.com>
Date:   Mon Jul 25 16:37:41 2022 +0200

    Bug 30952: Change MARC tags toolbar style
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 80266c1b488773c03e2ceaac2a22164c70c04a0b
Author: Solène Desvaux <solene.desvaux@biblibre.com>
Date:   Mon Jul 25 16:37:41 2022 +0200

    Bug 30952: Small adjustments in search results page
    
    - Move Z39.50 search button to a toolbar
    - Use btn and btn-link classes for "Select all" and "Clear all" buttons
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b49a163bd7c409459444fb4164a2ba4450350967
Author: Solène Desvaux <solene.desvaux@biblibre.com>
Date:   Mon Jul 25 16:37:41 2022 +0200

    Bug 30952: Staff interface redesign (main page)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6d29372a9b4ea4fe3d1d85baa8454d5417150210
Author: Solène Desvaux <solene.desvaux@biblibre.com>
Date:   Mon Jul 25 16:37:41 2022 +0200

    Bug 30952: Change checkout, checkin and renew forms
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 76c3aca92ff3ceae56728bc56f812e4c3b31a367
Author: Solène Desvaux <solene.desvaux@biblibre.com>
Date:   Mon Jul 25 16:37:41 2022 +0200

    Bug 30952: Staff interface redesign (toolbar)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bd54185a49e4e8a4520d16bc6f6bc991ef9c03d2
Author: Solène Desvaux <solene.desvaux@biblibre.com>
Date:   Mon Jul 25 16:37:41 2022 +0200

    Bug 30952: Move "Go to advanced/item search" link to toolbar
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9d62047e62ed64b3d191bec0a8c4b9b7de12a6ec
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jul 25 16:37:41 2022 +0200

    Bug 30952: Add Poppins font assets
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f43558f53907acad566a05d598d6ebd06999cf3d
Author: Solène Desvaux <solene.desvaux@biblibre.com>
Date:   Mon Jul 25 16:37:41 2022 +0200

    Bug 30952: Staff interface redesign (header)
    
    What this patch does:
    - change the navigation bar style
    - change the breadcrumbs style
    - change the "last borrower" link style
    - move the search bar inside the navigation bar
    - move the help link to the same row as the breadcrumbs
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 42dd6ec34206f0acfe783610d8e9255ed7bf21c4
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Sep 21 20:12:06 2022 +0000

    Bug 28372: Update OPAC results XSLT to use variables for 007
    
    Same test plan as before, but for OPAC
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6fa91c8c18904333036e1509dce7308a4f7121b0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue May 18 14:40:13 2021 +0000

    Bug 28372: Use variables instead of repeated field lookup
    
    This simply replaces repeated lookups of the field with a variable test
    
    To test:
    1 - Perform a search on the staff client
    2 - Note the 'Format' in the  record results
    3 - Apply patch
    4 - Repeat search
    5 - Confirm Formats are unchanged
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ef81785d76115d1591075ed1d04a1dfe4430c5eb
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Sep 29 07:51:33 2022 +0000

    Bug 31469: log4perl.conf: Add %n to conversionpattern for Plack
    
    The PLACKOPAC, PLACKAPI and PLACKINTRANET appenders still need %n
    (i.e. a newline). Note that this patch does not add %l since it
    is a bit confusing because it adds a lot of Plack internal noise like:
        [2022/09/29 08:51:34] [WARN] Test mainpage CGI::Compile::ROOT::usr_share_koha_mainpage_2epl::__ANON__ /usr/share/koha/mainpage.pl (49)
    
    The patch is a result of:
        git grep -l "log4perl.appender.PLACK" | xargs sed -i -e"/ConversionPattern/ s/%m$/%m%n/"
    
    Test plan:
    First run: sed -i -e"/ConversionPattern/ s/%m$/%m%n/" /etc/koha/sites/[YOUR_CLONE]/log4perl.conf
    Edit that file, change PLACKOPAC to debug level like:
        log4perl.logger.plack-opac = DEBUG, PLACKOPAC
    Restart.
    Hit an OPAC page twice.
    Check plack-opac logfile and verify that it contains a newline between last two messages like:
        [2022/09/29 08:04:30] [DEBUG] kohaversion : 22.0600054
        [2022/09/29 08:04:42] [DEBUG] kohaversion : 22.0600054
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 93e418c0b3e6b41aae99e3bd66664bc0ac94b24f
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Sep 12 13:52:23 2022 -0400

    Bug 31552: SIP2 option format_due_date not honored for AH field in item information response
    
    Bug 28730 added the ability to format due dates based on Koha's date format, but missed formatting the due date field in the item information response.
    
    Test Plan:
    1) Apply this patch
    2) prove t/db_dependent/SIP/Message.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a980148fad3879ead1a3186db1da1eb4bd9bd291
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 12 14:54:23 2022 -0300

    Bug 27136: DBRev 22.06.00.062
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fcad83dfd47d7c32328a98cd07f4b2918962b9cf
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Oct 7 21:53:24 2022 +0200

    Bug 27136: (QA follow-up) Fix entries for multiple und undetermined language(s)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1bcaceca0a3a8bfab3d4a16a2209ef21222a622a
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Oct 7 16:58:20 2022 +0000

    Bug 27136: (QA follow-up) Remove reference to facets, add languages to update description
    
    The new languages will also effect other pages in Koha, like the
    language list on the advanced search page.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cb09bb0b78afdd2bf0ec6a70580bfd25fd0715d7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Oct 3 10:34:58 2022 +0000

    Bug 27136: (follow-up) Make update idempotent
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 11d90f153e611b408ca7ab2525246092d80a0549
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Aug 31 10:01:50 2022 +0000

    Bug 27136: Add additional languages for facet display
    
    This patch adds two missing languages, Cree & Afrikaans, as well
    as some necessary linguistic definitions for faceting: Multi language,
    undetermined, no linguistic content
    
    Signed-off-by: Alexis Ripetti <alexis.ripetti@inLibro.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c6fc76f4783391713c69a32c217d51c641f2cc1a
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Oct 3 18:27:21 2022 +0000

    Bug 26648: Add tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Cab Vinton <director@plaistowlibrary.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 971ad5538c3026e126081376520ccb3b13c12d1c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 9 16:13:00 2020 +0100

    Bug 26648: Prevent explosion in notices on missing item
    
    The item accessor in Koha::Old::Checkouts could explode given a checkout
    where the item had been deleted.
    
    To test
    1/ Edit the issueslip notice to output some item details from the
    borrowers old checkouts
    
    [% FOREACH old_checkout IN borrower.old_checkouts %]
      [% IF old_checkout.item %]
        [% old_checkout.item.price %]
      [% END %]
    [% END %]
    
    2/ Delete the item associated with an old checkout for a test patron
    3/ Print the issueslip for the patron
    4/ Note a server side error is triggered
    5/ Apply the patch
    6/ Print the slip again and note the price details for old checkouts are
    now displayed
    7/ Signoff
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fdb5275407c3c89875cbe7856b86a7fe3364e386
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Sep 23 03:21:08 2022 +0000

    Bug 31614: Adds a koha-conf.xml config to set Zebra connection timeout
    
    This patch adds <zebra_connection_timeout>30</zebra_connection_timeout>
    to the koha-conf.xml file.
    
    Sometimes, a Zebra search might take longer than 30 seconds. If it does,
    Koha will say that 0 records have been found. While slow searching
    is not desirable, it's more desirable to get the result set regardless.
    
    Test plan:
    0. Apply patch
    1. Add <zebra_connection_timeout>.1</zebra_connection_timeout> to
    your relevant koha-conf.xml file (e.g. /etc/koha/sites/kohadev/koha-conf.xml)
    2. echo 'flush_all' | nc -q 1 memcached 11211
    3. koha-plack --restart kohadev
    4. Go to http://localhost:8081/cgi-bin/koha/catalogue/search.pl?q=test
    5. Note that no results are returned
    6. Change zebra_connection_timeout to 30
    7. echo 'flush_all' | nc -q 1 memcached 11211
    8. koha-plack --restart kohadev
    9a. Go to http://localhost:8081/cgi-bin/koha/catalogue/search.pl?q=test
    9b. Note that 3 results are returned
    10. Remove zebra_connection_timeout from koha-conf.xml
    11. echo 'flush_all' | nc -q 1 memcached 11211
    12. koha-plack --restart kohadev
    13a. Go to http://localhost:8081/cgi-bin/koha/catalogue/search.pl?q=test
    13b. Note that 3 results are returned
    14. Celebrate
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 744dd370ced6bc336be42baeb8038b8a1ca9d1c8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 4 11:21:33 2022 +0000

    Bug 31635: Fix output of current title in OPAC browse results
    
    This patch makes a correction to the output of OPAC browse results. In
    the numbered result navigation links, a title tag on each
    navigation link should contain the title of the record. The link for the
    current title didn't include the title information in the title tag
    because it used the wrong template variables.
    
    To test, apply the patch and make sure OpacBrowseResults is enabled.
    
    - In OPAC, perform a search that will return multiple results.
    - View one of the results.
    - In the right-hand sidebar, click "Browse results."
    - In the list of numbered links at the top of the panel, hover your
      mouse over each link. They should each display a tooltip with  "View
      record [title]"
    - Confirm that the current title in the list includes the correct
      tooltip.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6017a91c8d59426f443245c8671eea8eabd4de44
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 6 13:38:54 2022 +0000

    Bug 31677: Convert basic MARC editor tabs to Bootstrap
    
    This patch modifies the basic MARC editor template to replace jQueryUI
    tabs with Bootstrap tabs. The changes should have no visible effect,
    with all previous functionality still intact.
    
    To test, apply the patch and go to Cataloging -> New record.
    
    - When the page first displays, the "0" tab should be active.
    - Test that each of the numbered tabs works correctly to activate the
      correct tab content.
    - Confirm that the numbered tag anchors still work correctly.
    - Append a specific tab anchor to the URL, e.g. "#tab4XX" and refresh
      the page (you may need to shift-refresh). When the page reloads the
      correct tab should be active by default.
    - Try appending a query string to the URL, e.g. "?tab=tab4XX" This
      should reload the page and make the correct tab active.
    - Confirm that sortable subfields can still be re-ordered by dragging
      and dropping them via the "stacked lines" icons.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit acea770e18c575384f74e0592ebc22ac242bcebc
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 5 19:08:24 2022 +0000

    Bug 31678: Convert authority editor tabs to Bootstrap
    
    This patch modifies the authorities editor template to replace jQueryUI
    tabs with Bootstrap tabs. The changes should have no visible effect,
    with all previous functionality still intact.
    
    To test, apply the patch and go to Authorities -> New authority.
    
    - When the page first displays, the "0" tab should be active.
    - Test that each of the numbered tabs works correctly to activate the
      correct tab content.
    - Confirm that the numbered tag anchors still work correctly.
    - Append a specific tab anchor to the URL, e.g. "#tab4XX" and refresh
      the page (you may need to shift-refresh). When the page reloads the
      correct tab should be active by default.
    - Confirm that sortable subfields can still be re-ordered by dragging
      and dropping them via the "stacked lines" icons.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d71c20a9976367aeac3f75feb2c0172e68a13cf4
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Oct 5 11:49:56 2022 +0000

    Bug 30571: (follow-up) Additional check at upgrade
    
    Bad data occurs. We are removing null hosts here and update
    empty syntax or encoding, informing the user.
    
    Test plan:
    Remove the NOT NULL condition if needed.
    Copy db_revs/220600056.pl to atomicupdate and test dbrev.
    You might see something like:
        Upgrade to 22.06.00.056  [11:48:22]: Bug 30571 - Table z3950servers: three cols NOT NULL
            Found bad data in table z3950servers: removed 1 records with host undefined
            Corrected empty syntax or encoding for the following hosts. Please check after upgrade.
            Updated hosts: lx2.loc.gov,lx2.loc.gov
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 86a744cbfd916ba0c61d25466a5e8402bb10951b
Author: Johanna Raisa <johanna.raisa@gmail.com>
Date:   Wed Sep 14 09:14:24 2022 +0300

    Bug 31555: change holds GET permission to place_holds
    
    This patch changes holds' GET REST API endpoint permission
    to place_holds to match with request.pl
    
    Test plan:
    1) prove t/db_dependent/api/v1/holds.t
    
    Sponsored-by: Koha-Suomi Oy
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9a428d8ef0b722257dd37bd8ee1f8b2f9cfe1aea
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Oct 8 16:04:36 2022 +0000

    Bug 30168: (QA follow-up) Fix POD
    
    The POD had $issue in the example, but $checkout in
    explanation. Also standardized a bit of other terminology.
    (borrower, issue) = (patron, checkout)
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ce4ad972e52fe45f75589fa13d9820e3ee1e563d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Feb 23 16:25:21 2022 +0000

    Bug 30168: Use checkout object in GetSoonestRenewDate
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2a454055e4db4605a69a2e0f470435529e2ab086
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Oct 8 12:57:05 2022 +0000

    Bug 31257: (QA follow-up) Fix some typos
    
    The QA tools highlighted some typos in the code comments that
    this fixes: measurment and milimeter
    
    Also removes a space befor colon form: Vendor note :
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fd32db552824ff09ea87de00c72564bafbe76265
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Oct 4 03:34:01 2022 +0000

    Bug 31257: (follow-up) Fix display of PDF
    
    This patch rearranges the Qty and Document columns and shifts the
    vendor account number field lower to make room for address fields
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 321e9e93428c54b869390ee6ab36d764c190593f
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Fri Jul 29 10:36:37 2022 +1200

    Bug 31257: Add a new English 1 page layout to export basketgroup
    
    This patch adds a new English 1 page layout to be used when exporting a
    basketgroup as PDF. This has been modelled after an example PDF from
    another library system.
    
    To test:
    1) Go to Koha Administration -> Libraries. Ensure Library A has an
    address, phone and fax.
    2) Go to Koha Administration -> System preferences. Search for
    OrderPdfFormat. Set this to the new English 1-page layout option.
    3) Go to Acquisitions. Use an existing vendor or create a new one.
    Ensure the vendor has a postal address, phone, fax and accout number.
    4) Create a basket for this vendor. Add a few orders to the basket.
    5) Close the basket and add it to a basket group of the same name.
    6) Edit the basket group. Add an address in the delivery place, and a
    delivery comment. Check the box to close the basket group and Save.
    7) Click the button to Export as PDF.
    8) View the exported PDF. Confirm all of the information displayed is
    correct.
    9) Reopen the basketgroup. Edit the details and remove the delivery
    place text. Re-close the basketgroup.
    10) Repeat steps 7 and 8.
    
    Sponsored-by: Pymble Ladies' College
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 80eb5555d6e2a944669046fd1abb7ac91db4ccb9
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Aug 5 13:17:19 2021 +0000

    Bug 28799: Log when item was lost and now found
    
    In the subroutine ModDateLastSeen we unset an item's lost status when
    checked in.
    
    This routine passes a noi log parameter to the store request, this is
    to avoid spamming the cataloguing log on every checkin.
    
    When marking an item unlost we should record this change.
    
    To test:
    1 - Enable cataloguing log
    2 - Mark an item lost
    3 - View the log and confirm this chagne was recorded
    4 - Check the item in
    5 - The message indicates item is now found, but logs have no new entry
    6 - Apply patch, restart all
    7 - Mark the item lost and verify it is logged
    8 - Check the item in, reported found and log entry recorded
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 047489ece0c990bbd6259dd9a59cf3613dd67b5d
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Feb 27 01:09:20 2022 +0100

    Bug 29048: Fix link to linked records from authority search results in OPAC
    
    Without this patch the constructed search link would give wrong
    results with Elasticsearch. If you searched for records linked
    to authority id 3 it would also turn up all other records linked
    to an authority where the id started with 3...
    
    This just copies the more specific link using an,phr used in the
    staff interface and the OPAC detail page to make things consistent
    
    To test:
    - Turn on Elasticsearch
    - Search for authorities in the OPAC
    - Locate a authority with a low ID in your result list
    - Note the number of linked records
    - Click on the link
    - It will give you more results than it said before
    - Verify results don't match your search
    - Apply patch
    - Try again - now it should all match up
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 543454f7655200f12311dd26e824c011cd234813
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu May 19 13:50:59 2022 +0000

    Bug 28950: Mark serial late when past grace period
    
    This script had some oddities:
    - There was a LEFT JOIN to subscription, but no error printed if no subscription
      I changed this to a JOIN as there is a constraint, so this shoudl not happen
    - Publisheddate was checked after the SQL, moved into query
    - We checked for the next issue, and marked late only if that issue was already expected
      This overruled grace period, which should be the mnarker for a serial being late
      The grace period should be extended if you wish to wait for next issue
    - If no next published date, we reported an error on the planneddate
    - Script without confirm had no reporting
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c4161b703e36c21e769e4abb5edc99cfc33af6c2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 22 19:54:07 2022 +0000

    Bug 29561: (follow-up) Don't remove facet '0'
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eeb12f8a521ccc470d2363fb6529a8c3e0cf78d5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Nov 23 14:42:54 2021 +0000

    Bug 29561: Remove blank facets
    
    This patch strips the blank facets from the ES aggregations, this seems
    to only affect language fields currently, but could affect any facetable field
    that can contain blank values
    
    To test:
    1 - Have Koha running Elasticsearch with standard test data,
        or add some records with blank values in the 008/35-37
    2 - Search for 'a'
    3 - Look at the language facets, they should appear normal
    4 - Browse to:
        http://localhost:8081/cgi-bin/koha/catalogue/search.pl?idx=&q=a&sort_by=relevance_dsc&count=20&limit=ln:
    5 - Note there is now an 'x' under the Languages facet - to remove a limit you cannot see
    6 - Apply patch
    7 - Reload
    8 - Note the x is not there
    9 - Inspect HTML, confirm no blank link under language facets
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c473480d4e93d0506f7057db1eef34e66b8ddc73
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 22 19:51:46 2022 +0000

    Bug 29561: Unit test
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 38c4837c2414d7479009ff28e86fbdbe40901ef1
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Oct 4 21:23:57 2022 +0000

    Bug 31682: Silence automatic linker warn
    
    To test:
    1. Open the plack-intranet-error.log in your terminal
    2. When editing or adding a bibliographic record, click the button to
    link authorities automatically.
    3. Notice the warn in the log
    4. Apply the patch, restart services and refresh the page
    5. Click the button again. There should be no warn
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b28a97fbe9007937d7b9052282d56e48886c3105
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Sun Aug 28 23:01:19 2022 +0300

    Bug 31485: Move _item_denied_renewal to Koha::Item
    
    The question whether item is denied renewal doesn't depend on
    circulation rules or the patron, it is only a property of the item and
    only changes to the item's attributes can cause the return value of
    the check to change, thus we should move this to be a method of
    Koha::Item.
    
    To test:
     1) Run unit tests
        $ prove t/db_dependent/Circulation.t
        $ prove t/db_dependent/Koha/Item.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f439537b202cf937616986883d283423211b7bb5
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Sep 30 17:48:25 2022 +0000

    Bug 31646: Add Select2 focus to text search field
    
    To test:
    1. Edit a biblio record
    2. Go to tab 9 to find the item type MARC field 942$c
    3. Click on the field to select an item type
    4. Notice you have to click again on the search field to begin typing to search
       for your item type
    5. Apply patch/clear browser cache
    6. Try steps 2-3 again, the focus should now be on the search text field
    7. Try another select2 dropdown on the same page like the  942$n ( Suppress in
       OPAC ), it should also default to the text search field.
    8. Try other places in Koha that feature this kind of select2, like when
       placing hold.
    
    Note: Using $(document).on here instead of $(".select2").on becuase there are
    several instances where there are more than 1 select2 dropdown on a single page.
    This allows for the text search field to default each time you click on a
    different dropdown.
    
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b3ffd2cc02166f3264376ace1038df4f83bf8118
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 4 12:31:48 2022 +0000

    Bug 31420: Managing funds: Labels of statistic fields overlap with pull downs
    
    This patch removes some very old inline style attributes from the fund
    edit form. The "white-space" attribute prevented label text from
    naturally wrapping.
    
    To test, apply the patch and go to Administration -> Funds.
    
    - In the list of funds, click Actions -> Edit.
    - The the form, confirm that the text of the "Statistic" 1 and 2 labels
      wraps, not getting hidden by the associated select tags.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c89e886b6d99d92347b0da36d190429771a5ab97
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Sep 20 10:21:19 2022 -0400

    Bug 31587: Basket not accessible from ACQORDER notice
    
    The parameter "aqbasket" is passed to GetPreparedLetter, but is always undefined for the notice ACQORDER.
    
    Test Plan:
    1) Set your ACQORDER notice content to:
       ***[% basket %]***
    2) Set up a vendor with an email, set contact for email so the "E-mail
       order" button shows on a basket for that vendor
    3) E-mail the basket
    4) Note the email contents are "******"
    5) Apply this patch
    6) Restart all the things!
    7) Email the basket again
    8) Note the content looks something like:
       ***Koha::Acquisition::Basket=HASH(0x55870acd96e0)***
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fc7cc1467d5115de07e0c3f8a8229f3bdaf81739
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Sep 20 11:46:23 2022 -0300

    Bug 31587: Regression tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 30eb30b3c1b3d71aed4e63f9f230cfb36f52abe2
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Sep 16 10:47:48 2022 -0400

    Bug 31575: Missing warning for holds where AllowHoldPolicyOverride can be used to force a hold to be placed
    
    If some holds are overridable, and AllowHoldPolicyOverride is enabled, Koha
    used to "flag" each holdable item to let librarians know the hold could not
    normally be placed. In 22.05 up to current master as of this writing, no
    warning is displayed.
    
    Test Plan:
    1) Set one circ rule to allow 0 holds
    2) For Library A, set "Hold pickup library match" to "item's hold group"
    3) Enable AllowHoldPolicyOverride
    4) Set ReservesControlBranch to "item's home branch"
    5) Create a record with an item for Library A, one for Library B, and one for Library C
       This should create a scenario where A's item cannot be held, and B and C's items must be overridden
    6) Note you get the "Cannot place hold" but can place those holds anyway without a "warning" sign
    7) Apply this patch
    8) Restart all the things!
    9) Reload the page, you should now see the warning icons!
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7af9c1c109fd191cc638614e32e5aecd5cbb525a
Author: Galen Charlton <gmc@equinoxOLI.org>
Date:   Fri Sep 23 14:49:48 2022 -0400

    Bug 31619: add title back to list of OPACSuggestionMandatoryFields options
    
    This patch fixes a regression introduced by bug 29695 that prevented
    setting the title as a required field when setting the
    OPACSuggestionMandatoryFields to a non-default value.
    
    To test:
    
    [1] Set OPACSuggestionMandatoryFields in the system preferences
        editor and note that 'title' is not listed in the modal
        that is displayed.
    [2] Apply the patch.
    [3] Revist the system preference editor and note that 'title'
        is now displayed as an option.
    
    Signed-off-by: Galen Charlton <gmc@equinoxOLI.org>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1f0419fd4746f3a586064ceab3fbd2866c0fac21
Author: Mason James <mtj@kohaaloha.com>
Date:   Wed Sep 21 23:57:38 2022 +1200

    Bug 17379: Add a man page for koha-passwd (2)
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit be6955e17d1b6d6ce174f00ac8debf6e6884a5b7
Author: Lucio Moraes <lmoraes@catalyst.net.nz>
Date:   Mon Oct 24 08:23:20 2016 +0000

    Bug 17379: Add a man page for koha-passwd
    
    Adding a manpage for the koha-passwd utility.
    
    To test:
    1) Run these commands and look at the formatted man page:
    $xsltproc /usr/share/xml/docbook/stylesheet/docbook-xsl/manpages/docbook.xsl \
     debian/docs/koha-passwd.xml
    2)$man -l koha-passwd.8
    
    3) Make sure this test passes:  $prove -v xt/verify-debian-docbook.t
    
    Signed-off-by: Mika Smith <mikasmith@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2569fd0aee02040047102d8a56b492b52a5e3567
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Sun Sep 4 10:46:16 2022 +0300

    Bug 31519: Move preference fetching directly to be done in the template
    
    Since we are not in a loop or using this multiple times it's simple to
    do it this way, helps with changing the template code in the future
    too since if we want to remove this syspref variable we know it is
    only used in this one particular place.
    
    To test:
     1) Grep for reserve_in_future and make sure there are no matches
        after applying this patch
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 405380ddf51ffe23c00dcf73f9a800122c78d304
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Sun Sep 4 10:45:59 2022 +0300

    Bug 31519: Remove unused SuspendHoldsIntranet and AutoResumeSuspendedHolds variables
    
    If you grep koha-tmpl/intranet-tmpl/prog/en for those you will see
    there are no references for those.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8d933d482ab30efdacb239dfd0af8944f1b6db9f
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Sep 28 20:42:57 2022 -1000

    Bug 31649: Fix acquisition basket group CSV export if biblio does not exist
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 28b56098b548b9b198f5a1527714040eef337297
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Sep 28 20:33:26 2022 -1000

    Bug 31649: Fix acquisition basket CSV export if biblio does not exist
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 193d6c48a45316cce9b5d12fa0708f051917cb76
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Sep 28 20:32:58 2022 -1000

    Bug 31649: Add unit tests
    
    Creates new test file GetBasketGroupAsCSV.t
    
    Test with :
    prove t/db_dependent/Acquisition/GetBasketAsCSV.t
    prove t/db_dependent/Acquisition/GetBasketGroupAsCSV.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1c83bd06387a42554f89a21820297970d1377fb4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 11 09:08:56 2022 -0300

    Bug 31673: (QA follow-up) Check if FK exists before attempt to remove
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0bd87ce0642e873c98b5ca8fe1a0f92aeef7511a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 5 10:16:02 2022 +0000

    Bug 31673: (bug 31086 follow-up) Drop and constraint to allow updating column
    
    It seems that we cannot edit the column while it has a constraint.
    If we remove it, update the oclumn, then re-add it, the update succeeds
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 48054327a10e2ed6327683f2098f4e4f49c5466b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 4 12:01:47 2022 +0100

    Bug 25936: (follow-up) Unit test for store
    
    This unit test confirms that we are not triggering the Password Change
    notification notice upon patron creations.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6b732f91b511433a8c7fdb1387d628fe4a1e4664
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 4 12:00:18 2022 +0100

    Bug 25936: (follow-up) Fix ../api/v1/patrons.t
    
    Disable password change notifications for the api test to negate the
    need for setting up notices.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2f583efa5b399dee241cdb128d0e849b432314b6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 30 12:22:50 2022 +0000

    Bug 31203: (follow-up) Remove stray debug statement
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 906d5b1a853b838706d41d28b5ae103d4bb54aa0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 5 14:11:55 2022 +0000

    Bug 31203: Alter other cronjobs that currenlty use cronlogaction
    
    Added command line ooption logging and completion logging where
    cronlogaction was already imported. We should probably standardize all
    cronjobs, but this is a start
    
    One cron didn't log on confirm, likely we need to update all crons to log
    if confirm, and possibly not log if running in test mode? Another bug as well
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7749e73526740d8288e444709b90edffc2724a57
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jul 21 14:53:23 2022 +0000

    Bug 31203: Add End action to cronjobs and log viewer
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e68d2beaf0a2392d5d00e50a43a7154771f48a94
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jul 21 12:44:40 2022 +0000

    Bug 31203: POC advance_notices
    
    This patch proposes a new standard for cronlogaction
    
    We copy @ARGV into a space separated string, then pass this to
    cronlogaction
    
    At the end of the script we add a call with info "COMPLETED"
    
    To test:
    1 - Apply patch
    2 - perl misc/cronjobs/advance_notices.pl -v -m 4 -n -c
    3 - sudo koha-mysql kohadev
    4 - SELECT * FROM action_logs WHERE interface="CRON";
    5 - Note start and completion logged
    6 - Note command line arguments included in info
    
    If this looks good I will copy this pattern to the other cronjobs
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit df69e140575608f03098d7ccdf73089d355efe65
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jul 21 12:43:34 2022 +0000

    Bug 31203: Alter cronlogaction to take a hash
    
    This patch simply changes the routine to expect a hashref for info
    and to log the PID as object in action logs
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6d82b66a277caa879a5a7b0c8f05a84f795beb4d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Sep 16 12:33:31 2022 +0100

    Bug 31465: (follow-up) Link to preference tabs directly
    
    This patch enhances the mapping system for the help button to allow for
    each tab of preferences to link directly to the relevent section of the
    manual.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 49652f570f887467528ca60880d9de1e4fa0075f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Sep 16 11:42:17 2022 +0100

    Bug 31465: Correct help link for preferences
    
    This patch updates the mapping to reflect the split and rename of the
    preferences section of the manual.
    
    Test plan
    1) Hitting 'Help' on any tab except for 'Local use' should lead you to
       the globalpreferences section of the manual for your Koha version.
    2) Hitting 'Help' on the 'Local use' tab should take you directly to the
       'localusepreferences' manual page.
    
    NOTE: I have now updated the manual build pipeline to remove
    renamed/deleted files so prior to this patch you should now see a 404
    response when clicking Help from these pages.  Before I made that
    change, we had the old file hanging around, so you actually got an
    outdated manual page disguised as a more recent version.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e0370e9975121c45528ff130b3e48b517928549e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 4 15:03:02 2022 +0100

    Bug 31666: (QA follow-up) Remove ES template literals
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit be2f3efe3684ac5f25f645f2f31f2176b23f3395
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 4 14:49:01 2022 +0100

    Bug 31666: (QA follow-up) Add filters
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d2e4a6ec7d4a1bf6add3170dbd015bf4ad6487b2
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Sep 30 12:35:00 2022 -0400

    Bug 31666: Add job progress bar to stage-marc-import.pl
    
    It would be nice if we had progress bars to indicate the progress of background jobs for scripts that utilize them.
    
    This patch implements a reusable bootstrap based progess bar.
    
    Test Plan:
    1) Apply this patch
    2) Stage a marc batch ( preferrably a large one to show the progress updating )
    3) Note the new progess bar, verify it functions correctly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5db216385708d9420a8f8d32bfc35c81cf194d75
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Oct 5 13:45:09 2022 +0000

    Bug 31685: Replace current_article_requests_count in opac-user
    
    Fixing the "( total)" in the caption of the table.
    
    The tt var should be replaced now by current_article_requests.size.
    Note that current_article_requests is an array now (from as_list).
    We cannot use .count since it is no Koha object.
    
    Test plan:
    Submit a few article requests.
    Check OPAC account page, and verify that both totals are fine now.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 50d90ff07e498d37743058711167ca8e00593943
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 5 16:02:04 2022 -0300

    Bug 31333: DBRev 22.06.00.061
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8d2d63f7ae0f1da9e5ccd796a5dc7f0ba90ea93a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 5 15:14:22 2022 -0300

    Bug 31333: (QA follow-up) Simplify code
    
    The new syspref is a deny-list. So not being part of the list means you
    are allowed. This was not that clear reading the code, so this patch
    tries to simplify the logic. Better handling on undef syspref value is
    added as well to avoid useless warnings.
    
    This patch does the following changes:
    - Uses `any` instead of `grep`. This has the effect of just returning a
      boolean on the first match, instead of keep looping until de array
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d08cd5965d592073b671e9011ae060294aec786b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 5 11:53:46 2022 -0300

    Bug 31333: (QA follow-up) Move and improve tests
    
    This patch moves tests to the right file (singular class name). It also
    refactors them a bit, in order to cover more cases, including the
    syspref split one.
    
    To test:
    1. Run:
       $ kshell
      k$ prove t/db_dependent/Koha/Patron/Category.t \
               t/db_dependent/Koha/Patron/Categories.t
    => SUCCESS: All good.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 555c55e8ca70d2cd36049c4b5bd3b79364c2d202
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Sep 7 11:24:35 2022 +0000

    Bug 31333: (QA follow-up) Add hint about AnonSuggestions to new system preference
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9c999293eff5feb7cbee987f445e4e84fe764710
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Fri Aug 26 02:04:51 2022 +0000

    Bug 31333: (follow-up) Handle anonymous patrons making suggestions
    
    Test plan:
    1. Enable suggestion & AnonSuggestions sysprefs and set AnonymousPatron = 1
    2. Visit the OPAC without logging in
    3. Confirm you can successfully create a suggestion from:
    - Item detail page
    - Search result page
    - Masthead under the 'Library catalogue' search box
    4. Disable the AnonSuggestions syspref
    5. Confirm you cannot see links to make purchase suggestions on the
    following pages:
    - Item detail page
    - Search result page
    - Masthead under the 'Library catalogue' search box
    6. Confirm if you try visiting /cgi-bin/koha/opac-suggestions.pl page
    you are re-directed to a login page
    7. Select the category of your user in the suggestionPatronCategoryExceptions syspref
    8. Log into the OPAC
    9. Confirm you cannot see links to make purchase suggestions on the
    following pages:
    - Item detail page
    - Search result page
    - Masthead under the 'Library catalogue' search box
    - opac-user.pl ('Your summary') page
    10. Confirm if you try visiting /cgi-bin/koha/opac-suggestions.pl page
    you are re-directed to a 404 error page
    11. Enable AnonSuggestions syspref
    12. Confirm you can successfully create a suggestion from:
    - Item detail page
    - Search result page
    - Masthead under the 'Library catalogue' search box
    - opac-user.pl ('Your summary') page
    13. Disable AnonSuggestions syspref and un-check your category from
    suggestionPatronCategoryExeptions syspref
    14. Confirm you can create a suggestion from:
    - Item detail page
    - Search result page
    - Masthead under the 'Library catalogue' search box
    - opac-user.pl ('Your summary') page
    
    Sponsored-by: Catalyst IT, New Zealand
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5f769adb34f712b65521479e1acc5bfa24dae72f
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Aug 28 11:14:46 2022 +0200

    Bug 31333: (QA follow-up) Add the new check to OPAC result list
    
    When no result is found and at the bottom of the result list
    the option to make a purchase suggestion is displayed. This
    also needs to use the new check.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8f80ddb22540e4b45b4c710f8f56417ecf3e2d44
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Aug 28 11:14:07 2022 +0200

    Bug 31333: (QA follow-up) Combine and rephrase system preferences
    
    Combines suggestion and suggestionPatronCategoryExceptions so
    they can be easily set together and rephrases slightly.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c0e6f2526e3ea5ab9636e3c4a7c64f19adf03ac1
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Mon Aug 15 06:39:23 2022 +0000

    Bug 31333: Unit tests
    
    Test plan:
    1. Run tests (Categories.t has been updated by me, and I suggest running
    Suggestions.t to confirm it still passes):
    
    sudo koha-shell kohadev
    prove t/db_dependent/Koha/Patron/Categories.t
    prove t/db_dependent/Koha/Suggestions.t
    
    Sponsored-by: Catalyst IT, New Zealand
    
    Signed-off-by: Rhonda Kuiper <rkuiper@roundrocktexas.gov>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 146a8977312c5ccd5bde5c9fe78f3701e424b16c
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Tue Aug 9 14:43:33 2022 +0000

    Bug 31333: Add ability to make purchase suggestions by borrower type
    
    Introduce a suggestionPatronCategoryExceptions system preference.
    
    If the suggestion syspref is enabled then libraries can stop specific
    borrower types from making suggestions by ticking the type in the
    suggestionPatronCategoryExceptions syspref.
    
    Test plan:
    1. Apply patches, update database, re-start services
    
    2. Set 'suggestion' syspref = 'Allow'
    
    3. Confirm you can view the purchase suggestion links on OPAC biblio detail
    page & 'your summary' page. As well as successfully submit a suggestion.
    
    4. Select the patron category you're logged in as in
    suggestionPatronCategoryExceptions syspref
    
    5. Confirm the purchase suggestion links are hidden in the OPAC biblio
    detail page & 'your summary' page
    
    6. In your browser enter the link: <OPAC base URL>/cgi-bin/koha/opac-suggestions.pl
    e.g. http://localhost:8080/cgi-bin/koha/opac-suggestions.pl
    
    7. Confirm a 404 page loads
    
    8. Confirm you can view/moderate suggestions in the staff
    client - even though your patron is selected in the
    suggestionPatronCategoryExceptions syspref
    
    9. Untick your patron category in the suggestionPatronCategoryExceptions syspref
    
    10. Confirm you can view the purchase suggestion links on the OPAC, as
    well as successfully submit a suggestion.
    
    11. Set 'suggestion' syspref = "Don't allow"
    
    12. Confirm the purchase suggestion links are hidden in the OPAC
    
    13. Select all patron categories in suggestPatronCategoryExceptions
    syspref. View the OPAC without logging in and confirm you can perform
    searches and view OPAC biblio detail pages.
    
    Sponsored-by: Catalyst IT, New Zealand
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3b0151d8542c49e75f1705f6e7437ee86d6b7ffa
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Tue Aug 9 02:01:57 2022 +0000

    Bug 31333: Database changes
    
    Sponsored-by: Catalyst IT, New Zealand
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d6bd965a2edb2fa253984695c6e07ce080ec7975
Author: Jérémy Breuillard <jeremy.breuillard@biblibre.com>
Date:   Tue Jun 7 15:40:09 2022 +0200

    Bug 31536: Add UNIMARC framework plugin to fetch PPN from sudoc.fr
    
    This plugin uses sudoc.fr webservices (isbn2ppn, issn2ppn, ean2ppn) to
    search a PPN using ISBN, ISSN or EAN as search criteria.
    The plugin expects than ISBN is in 010$a, ISSN is in 011$a and EAN is in
    073$a.
    
    Test plan:
    1. Configure the default MARC framework so that 009 uses this plugin
       (unimarc_field_009_ppn.pl)
    2. Start creating a new bibliographic record
    3. In the editor, write "0195141156" in the 010$a input, then move the
       focus out of the input (by pressing Tab, or clicking elsewhere on the
       page)
       The 009 field should be automatically filled with "06735209X"
    4. Empty the 010$a input, then empty the 009 input
    5. Write "2262-4694" in the 011$a input, then move the focus out of the
       input
       The 009 field should be automatically filled with "166197947"
    6. Empty the 011$a input, then empty the 009 input
    7. Write "9782070424597" in the 073$a input, then move the focus out of
       the input
       The 009 field should be automatically filled with "151662983"
    8. Empty only the 009 field, keep the same value for 073$a and save the
       bibliographic record.
    9. Edit the same record, you should have an empty 009 field and 073$a =
       "9782070424597".
       Click on the 009 field input, it should be automatically filled with
       "151662983"
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f9f9207841ad5450a1e118bd0ee3e5a76d733e3f
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Oct 3 19:53:42 2022 +0000

    Bug 31371: (QA follow-up) Capitalization fixes
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b48f8a99b36970f2a35aa9ddc380119449c5e403
Author: Jérémy Breuillard <jeremy.breuillard@biblibre.com>
Date:   Mon Aug 1 15:27:22 2022 +0200

    Bug 31371: Value builder for field 283
    
    On page cataloging some plugins were added for subfields $2 and $a from field $283
    
    Test plan:
        1)Go to Home > Cataloging > New record
        2)Section 2 - field 283 : it contains subfields $2, $6, $8 & $a
        3)Inputs are writable but notice that no plugins are suggested
        4)Apply patch and repeat 1) to 3)
        5)Values builders plugins are available for $2 and $a
    
    Signed-off-by: Thibault Keromnès <thibault.keromnes@univ-paris8.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cda4c4c0b7a672c72e1582705eaf3382211489ce
Author: Jérémy Breuillard <jeremy.breuillard@biblibre.com>
Date:   Wed Jul 20 15:45:16 2022 +0200

    Bug 31372: Value builder for field 325
    
    On page cataloging some plugins were added for subfields $h and $h from field $325
    
    Test plan:
        1)Go to Home > Cataloging > New record
        2)Section 3 - field 325 : it contains lots of subfields (g, h, i, j...)
        3)Inputs are writable but notice that no plugins are suggested
        4)Apply patch and repeat 1) to 3)
        5)Values builders plugins are available for $h and $j
    
    Signed-off-by: Thibault Keromnès <thibault.keromnes@univ-paris8.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3b4c6db0d8ee0559b1fbf4b79d5705185b8ca2dd
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Apr 21 07:56:50 2021 +0200

    Bug 28186: Use Koha::Authority in C4::AuthoritiesMarc::AddAuthority
    
    This patch replaces the use of $dbh->do by corresponding use of
    Koha::Authority object
    
    Test plan:
    1. Verify that creating/modifying authority still work
    2. prove t/db_dependent/AuthoritiesMarc.t
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6123c2767d4ad2f1e56e667551a8fbcdcd494249
Author: Kevin Carnes <kevin.carnes@ub.lu.se>
Date:   Fri Sep 30 09:21:25 2022 +0200

    Bug 31660: MARC preview for authority search results has hidden contents
    
    This patch makes the contents of the MARC preview for authority search
    results visible.
    
    To test:
    1)  Go to the Authorities page in the staff interface
    2)  Click Submit to do a search
    3)  Click on Actions to the right of an authority
    4)  Select MARC preview
    5)  Observe that the modal appears empty
    6)  Apply patch
    7)  Hold down the shift key when you reload the page, clear the cache,
        or use another web browser
    8)  Do another authority search and look at a MARC preview
    9)  Observe that the MARC preview contains the MARC record
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 42f203c4fc023887c74828842d330e0cbae105de
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 3 15:05:01 2022 -0300

    Bug 10950: DBRev 22.06.00.060
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 89d1149b216143c6b4711080a05f110b35ca5326
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 3 15:04:06 2022 -0300

    Bug 10950: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7386962012c9f593e09eddc333361a9ea808c469
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Aug 29 22:24:56 2022 +0000

    Bug 10950: (follow-up) Change display of pronoun fields
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f09cd88779d6e95605aacae8838450b4134c93f4
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Aug 28 13:13:37 2022 +0200

    Bug 10950: (QA follow-up) Fix typo in hidden check in OPAC patron form
    
    definded => defined
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bfb7cce602bc83d2d0cd89cede12941dc7458a66
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jun 14 09:36:05 2022 +0100

    Bug 10950: (QA follow-up) Exec
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit feede76f33ea99db950b4bbdc84f7ac28959dc32
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Jun 13 17:28:45 2022 +0000

    Bug 10950: (follow-up) fix typo in kohastructure.sql
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ed7de793c50ccabc4235edd210be440b5fb216f0
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Jun 10 17:40:11 2022 +0000

    Bug 10950: API spec update
    
    Test plan:
    1. Apply patch, restart_all, and updatedatabase
    2. In the staff client go to a patron record or create a new patron.
    3. Notice the pronouns field, make sure you add a value to it.
    4. Now notice that the value should display in parentheses in places where the patron name is displayed.
    5. Go to the details page and you should see the value display in quotes. ( next to othernames )
    
    6. Check to make sure you can hide the pronouns field via BorrowerUnwantedField.
    7. Check to make sure you can make the field required with BorrowerMandatoryField
    
    8. Go to the OPAC to self register. The pronouns field should appear in the form.
    9. Make sure you can make it required ( PatronSelfRegistrationBorrowerMandatoryField ) and that you can hide it ( PatronSelfRegistrationBorrowerUnwantedField ).
    10. Once registered check 'your personal details'. Check that the field can be required (PatronSelfModificationMandatoryField) or hidden ( PatronSelfModificationBorrowerUnwantedField ).
    
    11. Try some notices like ISSUESLIP. You should be able to add either <<borrowers.pronouns>> or [% borrower.pronoun %] to the notice and have it display when you generate the notice.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3d57e7d5840a35e7ab1455d7b1998c949e02ac94
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Jun 9 16:23:49 2022 +0000

    Bug 10950: Display pronouns field
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eeb8cc42ddba8b125b012d6ad8747ced67599aa5
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Jun 9 16:02:42 2022 +0000

    Bug 10950: Add intranet/OPAC form fields
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e2f7db2c2b989343b8f44cfc95c8a066f4732d06
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Jun 9 14:17:03 2022 +0000

    Bug 10950: Database update
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2084810e566e5440ac9bd95687a64e458ab2747f
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Tue Sep 27 11:30:16 2022 -0400

    Bug 31634: Add part_number and part_name in opac result browser
    
    This patch adds the part_number and part_name in the opac results browser.
    
    To test:
    0. Apply patch
    
    1. Download the sample records and import into Koha
    1.1. Download the sample mrc file
    1.2. In Koha staff interface, go to Tools > Stage MARC records for import
    1.3. Click 'Browse' and choose the file
    1.4. Click 'Upload file'
    1.5. Click 'Stage for import'
    1.6. Click 'Manage staged records'
    1.7. Click 'Import this batch into the catalog'
    
    2. Make sure OpacBrowseResults is enabled
    2.1. In Koha staff interface, go to Administration > Global system preferences
    2.2. Search for OpacBrowseResults
    2.3. If necessary, change to 'enable' and click 'Save all OPAC preferences'
    
    3. In OPAC, search for BFF and browse the results
    3.1. In Koha OPAC, search for BFF
    3.2. Click on one of the titles to access the opac-detail page
    3.3. Click 'Browse results'
    --> The browser should show the main title, along with the number and volume title.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 33ba3af45a02c8f080d52933205160d5c85ee20e
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Sep 20 12:47:15 2022 +0000

    Bug 31586: Log basket number as object for action ACQUISITION ORDER
    
    Until now we logged undef as object in action_logs when an email
    order was sent. With this patch the basket number is logged instead,
    which will allow for reporting and also allows us to display a link
    to the basket, if permissions permit (order manage), in the log
    viewer.
    
    To test:
    - Make sure the ClaimsLog system preference is set to Log
    - Create a vendor or make sure an existing vendor has an email set
    - Make sure to add an SMTP server and link it to your library
    - Create a basket in acqisitions and add an order line
    - Click "E-mail order" to send the email
    - Go to the log viewer, limit to module Acquisitions
    - Verify that the entry show with a link to the basket in the
      Object column
      If the user doesn't have order_manage permission, the basket
      number will still show, but isn't linked
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f6ba40b141726dcf66ee540292b5c2cf86b83283
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 3 14:30:39 2022 -0300

    Bug 25936: DBRev 22.06.00.059
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bdb2716616131028b254fc29643b7b693d0be3e7
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 30 07:05:08 2022 +0000

    Bug 25936: (QA follow-up) Enable feature for new installs
    
    It feels safer to enable this rightaway for new installs.
    Since we always love to "keep current behavior", I do not really
    mind to keep it disabled at upgrade time.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 640814c4cfc95ee06e1ffaa394f0f952a1e78056
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 30 06:26:44 2022 +0000

    Bug 25936: (QA follow-up) Spelling and wording
    
    [1] NotifyPassowrdChange => NotifyPasswordChange
    [2] Someone has changed your library user account password.
        Scary? Changed it myself. Reworded it a bit.
    [3] is( $THE_notice->status, 'failed', "The notice was sent immediately");
        Note that THE_notice is imo horrible :) Wont touch it though.
        But I think we should reword 'sent' since it just failed.
        And we actually should mock sending mail here. Adding FIXME.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1cea470b6719c93f7535cbf39f665c86dfc88bfd
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Sep 29 12:42:39 2022 +0100

    Bug 25936: Unit tests
    
    This patch adds a unit test to check that the notice is enqueued and
    sending is attempted immediately.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 00a552d270002db4766bbd2bdddd25e556ce9dcd
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Mar 9 12:23:07 2022 +0000

    Bug 25936: (follow-up) Rename notice and fix indentation
    
    This patch renames the notice from PASSCHANGE to PASSWORD_CHANGE which
    is both clearer and more consistent.  It also fixes the indentation
    issues mentioned in the atomicupdate.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 93fdab7dc56a80c59d8ff5e69f9f339af41e9fbb
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 3 12:03:42 2022 +0000

    Bug 25936: Add option to send password change notices
    
    This patch add a new security notice to allow sending notification of
    password changes to patrons. If enabled, the 'PASSCHANGE' notice will be
    sent to respective patrons whenever their password is updated.
    
    Test plan
    1) Run the database updates
    2) Enable the new feature by setting 'NotifyPasswordChange' to 'Notify'
    3) Change a users password
    4) Check that the notice appears in the patrons notices
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bf6bbc29a0c84581a59624b070cb5747f195ea43
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Mar 25 14:03:16 2019 -0400

    Bug 20457: Overdue and pre-overdue cronjobs not skipping phone notices
    
    The overdue and pre-overdue cron scripts are not skipping the generation of phone notices. This causes many phone notices to be created that will always be left at 'pending' as the Talking Tech outbound script creates its own phone notices and puts them in the message queue.
    
    Test Plan:
    1) Enable Talking Tech
    2) Enable predue and overdue notice phone transports for a patron
    3) Generate overdues and predues, notice phone notices are generated
    4) Apply the patch
    5) Repeat steps 2-3
    6) Note phone notices are not generated
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e024b6fb5282f057aca3e901162fced3715e7724
Author: Christophe Torin <christophe.torin@univ-rennes2.fr>
Date:   Fri Sep 23 15:55:37 2022 -0400

    Bug 29671: Dropbox mode is unchecked after check in confirm on item with Materials specified
    
    Suggested patch
    
    steps to reproduce :
    
    1) Enable System preference CirConfirmItemParts
    2) Go to Circulation > Check in
    3) Enable Dropbox mode (Book drop mode) in the Checkin settings
    4) Enter a barcode of an item having the 'Materials specified' field
       not empty
    5) A Popup is shown, click the confirm button
    6) The Dropbox mode (Book drop mode) is now unchecked, but should stay
       checked.
    
    In the template, the modal window lacks the dropboxmode input, so that
    it stays on the next page. I attached a patch with my suggested correction.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Géraud <geraud.frappier@inlibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 626ad0d2072b937d644a2778265acf5643c9fb95
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 3 14:09:59 2022 -0300

    Bug 31633: (follow-up) Group template params
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 504f418957f45b48aa1e5276c0417131c18d17d7
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Oct 1 20:33:00 2022 +0000

    Bug 31633: (QA follow-up) Add data-attribute for logged-in library
    
    The class has some advantages, but I thought it would be nice to also
    have the complete set of options in data-attributes.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 67910eeb50104eb0e7d77466125260f38af3bde8
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Sep 27 16:44:24 2022 +0000

    Bug 31633: Add holding and home data attributes to spinelabel-print.tt
    
    To test:
    
    1. Apply patch
    2. Have some items with call numbers and different holding/home branches.
    3. Generate some quick spine labels and use your browsers dev tools to inscept the #spinelabel element. It should have 2 new data-attributes, data-homebranch and data-holdingbranch
    4. You can then apply this CSS via IntraNnetUserCSS to make sure you can select these properly now:
    
            background: red;
    }
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 762fa03432926551b3272ad8900fabb14a1f78de
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Sep 30 11:44:39 2022 +0100

    Bug 30646: Unit tests for Auth_with_ldap
    
    This patch adds a unit test to the Auth_with_ldap.t to confirm welcome
    notices are send when replace + welcome are enabled in the
    configuration.
    
    We also add a snippet to hide 'Subroutine redefined' warnings in this
    test as it makes the test output rather challenging to read and the way
    the test is written these warning are expected.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 157bb786c1d3ca29b772e9b7cac23bed3664f6bc
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Sep 30 10:35:51 2022 +0100

    Bug 30646: Unit test for Auth_with_shibboleth
    
    This patch adds a unit test for the Auth_with_shibboleth welcome notice
    addition.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7a21a76a069dd4269a2c0ab755ae9469210beb2c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jun 16 15:23:28 2022 +0100

    Bug 30646: (follow-up) Set to send immediately
    
    Other welcome notices send immediately rather than waiting on the queue
    to be processed.. these one's should too.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a951e6d131536d26f3e00677d9f526001146841c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 28 16:12:47 2022 +0100

    Bug 30646: Add welcome email support to SAML2
    
    This patch adds the ability to enable the welcome email notice for new
    users added via the Shibboleth autocreate option.
    
    Test plan
    1) Configure Shibboleth for authentication
    2) Enable the welcome email by adding '<welcome>1</welcome>' to your
       shibboleth config block
    3) Confirm you have autocreate enabled for your Shibboleth config
    4) Attempt to login with an entirely new user to Koha using the shibboleth
       connection (with a user who has a valid email address mapped to Koha
       borrower fields)
    5) Confirm the email is sent by looking at the notices for the new user.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e9e10c5e72557f8a46fb224a979c01bf90e6935b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 28 15:56:55 2022 +0100

    Bug 30646: Add welcome email support to LDAP
    
    This patch adds the ability to enable the welcome email notice for new
    users added via the LDAP replicate option.
    
    Test plan
    1) Configure LDAP for authentication
    2) Enable the welcome email by adding '<welcome>1</welcome>' to your
       ldap config block
    3) Confirm you have replicate enabled for your LDAP config
    4) Attempt to login with an entirely new user to Koha using the LDAP
       connection (with a user who has a valid email address mapped to Koha
       borrower fields)
    5) Confirm the email is sent by looking at the notices for the new user.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 63119a86860174e668dc68fe559eba8d195e1b02
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Jul 26 10:35:14 2022 -1000

    Bug 31234: SubfieldsToAllowForRestrictedEditing - data from drop-down menu not stored
    
    Problem with items restricted edition, restriced fields with a drop-down
    menu are not stored, since 21.11.
    
    This comes from a change by Bug 28445 in items edition form :
      <select name="field_value"
    change to :
      <select name="[% kohafield | html %]"
    
    This breaks the special JS code :
    https://git.koha-community.org/Koha-community/Koha/src/commit/fc919fc796df42c29e73cd527d3c425377fcc27a/koha-tmpl/intranet-tmpl/prog/js/cataloging_additem.js#L112
    
    I propose we use "select.input_marceditor".
    
    Test plan :
    1. A librarian with 'edit_items_restricted' permission set
    2. Item subfield not authorized for editing (SubfieldsToAllowForRestrictedEditing). In Marc framework, this subfield is linked to an authorized value (= drop-down menu). For exemple homebranch.
    3. When adding/editing item, this subfield has a default value from drop-down menu and is not editable (OK).
    4. Save item
    => Without patch : the subfield is empty, it should have the value from drop-down menu.
    => With patch : the subfield is saved with the value from drop-down menu.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fb1ca3311001b0a7c5b93a54330a9206ff5b41d9
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Sep 28 18:59:41 2022 +0000

    Bug 31643: Require only edit_catalogue, not full cataloging
    
    To test:
    1 - Grant a patron: catalogue, edit_catalogue, and editauthorities permissions
    2 - Log in to staff client
    3 - Browse to: http://localhost:8081/cgi-bin/koha/svc/cataloguing/automatic_linker.pl
    4 - UNAUTHORIZED
    5 - Apply patch, restart all
    6 - Log in and go to link again
    7 - status "OK"
    
    Signed-off-by: Catrina <catrina@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 96a07e84c494ac3328836b0089d46b61970d513e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 3 13:48:42 2022 -0300

    Bug 30944: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c4b5268da5ae14075bc003ad3293dbd094487b4d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 3 13:47:37 2022 -0300

    Bug 30944: DBRev 22.06.00.058
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8abc8c4950ae9452242a1b86a22b86748208014b
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Oct 2 10:08:55 2022 +0000

    Bug 30944: Undo change to ILS-DI documentation
    
    The service not implemented by Koha is CancelRecall
    as specified in:
    https://old.diglib.org/architectures/ilsdi/DLF_ILS_Discovery_1.0.pdf
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ccb4180339544d6700de80b2d9879fdf175b51b9
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Thu Aug 11 17:29:04 2022 +1200

    Bug 30944: Fix cancel recalls actions
    
    This patch fixes the 'cancel selected recalls' button on the biblio
    details Recalls page, and ensures a correct cancellation reason is
    logged when cancelling a recall in transit.
    
    To test:
    1) Ensure UseRecalls is enabled and relevant recalls circulation rules
    are set
    2) Check out Item A to Patron B
    3) Log into OPAC as Patron A
    4) Search for Item A and place a recall
    5) Go back to the staff interface and search for Item A. When viewing
    the biblio record, go to the recalls tab.
    6) Check the checkbox for your recall, and click the button to cancel
    selected recalls.
    7) Confirm your recall is successfully removed and you're redirected to
    the correct recalls page for this biblio.
    8) Go back to the OPAC and place a recall again. This time set the
    pickup location to a different library, one that you're not logged in at
    9) Back in the staff interface, check in Item A and confirm the recall
    and transfer
    10) Go to Circulation -> Recalls to pull. Your recall should show here.
    Click the button to cancel the recall and revert the transfer
    11) Confirm the recall has been cancelled
    12) Go to Reports and create a new SQL report with the following SQL:
    select * from branchtransfers b join items i on
    b.itemnumber=i.itemnumber where i.barcode = <<barcode>>
    13) Run the report and paste the barcode of Item A in the field
    14) Confirm there are two rows returned - the transfer triggered when
    the recall was confirmed, with a reason of 'Recall' and a cancellation
    reason of 'RecallCancellation, and the transfer sending the item back
    home when the recall was cancelled, with a reason of
    'RecallCancellation'.
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7dfa7bcc21dbf3b79e33a957e9afd46dab214494
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Oct 13 12:20:33 2021 -0400

    Bug 29196: (Bug 27068 follow-up) - Remove unnecessary check
    
    The introduction of _checkHoldPolicy has made this check superfluous.
    Test plan stolen/updated from 27068
    
    To test:
     1) In library groups add a root group and check it as hold group.
     2) Add two libraries to the group
     3) In circulation and fines rules, in 'Default checkout, hold and return
     policy', in Hold pickup library match change the value to 'From patron's hold group'
     4) Place a hold from a patron whose home library is from the group
     4.5) perl misc/cronjobs/holds/build_holdsqueue.pl
     5) Go to /cgi-bin/koha/circ/view_holdsqueue.pl
     6) Select the holding branch of the item with a hold
     7) observe no results
     8) Apply Patch
     9) Repeat 5-6
    10) The item should come up on the holds queue results
    11) Place a hold on an item where 1 record has 2 copies, 1 in the hold group, 1 not.
    12) Run the HoldQueue for the library not in the group and make sure the hold isn't showing.
    13) Turn on transportation cost matrix and set costs for the libraries within the group.
    14) Place a hold for a patron where multiple copies are on the bib.
    15) Check both branch's hold queue for the item, it should only show on the lower cost branch's list if both copies are available.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 01f1eb311ebaf379bbaaa14ee4b09e4948e03c1b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Sep 22 14:44:50 2022 +0000

    Bug 31603: Add search option for plugin page
    
    This patch converts the table of plugins to a DataTable so that
    it will have dynamic sorting, export options, and the quick search
    field at the top of the table.
    
    To test you should have more than one plugin installed.
    
    - Apply the patch and go to Administration -> Manage plugins.
    - The table should be styled as a DataTable, with the first column
      sorted by default.
    - At the top of the table you should see the number of entries,
      a quick search form, and an export button.
    - Confirm that the quick search form works to filter plugins by
      name, description, author, etc.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aa49b1bed9d131a6081b17e8217c8e9ed4b849e6
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Sep 23 15:22:34 2022 +0000

    Bug 31566: 'Patrons selected' counter doubles on 'Select all'
    
    This patch refines the JavaScript which is run when the "Select all"
    or "Clear all" controls are clicked. The script now checks to see
    whether the checkbox is checked before triggering the change function.
    
    To test, apply the patch and perform a patron search in the staff
    interface which will return multiple results.
    
    - After the patron search results are displayed, test the "Select
      all" control. The visible search results should all be checked,
      and the "Patrons selected" counter at the top should be
      incremented correctly.
    - Clicking the "Select all" control again should have no effect.
      The "Patrons selected" counter should not increment again.
    - Test the "Clear all" control to confirm that checkboxes are
      unchecked and the counter updates correctly.
    - Test with multiple pages of patron search results to confirm
      that the controls work correctly on any page of results..
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1524afa8c716e0d7bf7379360d865fcb0544fa8d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 3 12:39:35 2022 -0300

    Bug 31559: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cfb6ea48b8240ca3e526fba840c1b40701911329
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Sep 26 14:07:06 2022 +0000

    Bug 31559: Staff results page doesn't always use up full available screen width
    
    This patch adds an explicit "width: 100%" to tables which are contained
    within a #searchresults <div>. The change affects staff interface
    catalog search results and these other pages with the same markup:
    
    - Advanced MARC editor search results
    - Holds to pull
    - Patron search results
    
    To test, apply the patch and rebuild the staff interface CSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client)
    
    - Test the catalog search results and other affected pages to confirm
      that the tables affected take up the full width of the page.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 96eeeb82c9d1c34975f9d9c035de529d9eac84f6
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Sep 9 12:52:15 2022 +0000

    Bug 30309: Convert lists tabs in the staff interface to Bootstrap
    
    This patch updates the staff interface lists page to use Bootstrap tabs
    instead of jQueryUI.
    
    To test, apply the patch and go to Lists.
    
    - Test that the public and private tabs work correctly.
    - Test that other lists functionality still works as expected.
    - Confirm that adding the "public" URL parameter works to trigger the
      "Public lists" tab by default:
    
      /cgi-bin/koha/virtualshelves/shelves.pl?public=1
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0f2ebedcf159930331a3b8be50e73d761997f203
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Sep 26 15:26:51 2022 +0000

    Bug 31402: Update tools sidebar to match tools start page
    
    This patch updates the tools sidebar so that it better matches the tools
    home page:
    
    - Sidebar menu should say Tags instead of Tag moderation
    - Barcode image generator and Quick spine label creator links
      reversed.
    - Upload any file -> Uploads
    - Cash management section is added to sidebar using brief text
    
    This patch does not make changes to the way plugins are displayed in the
    sidebar. In order for the sidebar to correctly display according to the
    presence of tool plugins I think some kind of global variable would need
    to be set.
    
    Signed-off-by: Anke Bruns <anke.bruns@gwdg.de>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c70e82ea4fdbfe0e4acca39ff07986cf35f7406c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Sep 26 15:02:25 2022 +0000

    Bug 31625: (follow-up) Markup comments
    
    This patch adds comments to the templates to highlight the markup
    structure.
    
    This patch should have no effect on the pages' appearance or
    functionality.
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b8450e4e5b2d484d0487a5d1d178a40e96486555
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Sep 26 14:53:56 2022 +0000

    Bug 31625: Reindent tools home and tools sidebar
    
    This patch performs general template cleanup to the tools-home and
    tools-menu templates: Make indentation consistent, replace tabs with
    spaces, fix invalid HTML.
    
    To test, apply the patch and go to Tools. The page should look correct,
    with no visible changes from before the patch.
    
    Go to any tools page which shows the left-hand sidebar, e.g. Patron
    lists, Batch item deletion, Inventory, etc. The menu should look
    correct.
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 69308e76ddd42f172a03f5eb2a01749bdd03cfac
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Sep 8 15:43:23 2022 +0000

    Bug 30304: (follow-up) Add markup comments
    
    This patch adds comments to the template to highlight the markup
    structure.
    
    This patch should have no effect on the page's appearance or
    functionality.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a906cd4a7370577ef00c09addeadca8a5b560f97
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Sep 8 15:32:27 2022 +0000

    Bug 30304: Reindent lists template in the staff interface
    
    This patch performs general template cleanup to the lists template:
    Make indentation consistent, replace tabs with spaces, and trim trailing
    whitespace.
    
    To test, apply the patch and test all aspects of the lists pages,
    including:
    
    - Viewing the list of public and private lists.
    - List of lists DataTable controls: Paging, filtering, sorting.
    - Add, edit and delete lists.
    - View list contents.
    - Remove titles from a list.
    - Place hold from a list.
    - Add items to a list.
    
    Use your preferred method for checking the differences between files
    while ignoring whitespace. I use diff with the  "-w" flag. The only
    changes you see should be split lines.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 76bf4a898e38a76596ee198d893a8fbfa79a0bfb
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Oct 3 08:03:50 2022 +0000

    Bug 23538: (follow-up) Workaround to fix Patron.t
    
    See comment36 and comment37. This needs more attention but
    serves as a quick fix only.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cdfd9ae914d262c1eff1a94af988ba23e090f931
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 30 11:31:25 2022 +0000

    Bug 31663: Item transfers are not correctly displayed on item details page
    
    To test:
    1 - Set an item in transit and confirm the transfer
    2 - View details page for biblio
    3 - Item shows 'Available'
    4 - Apply patch
    5 - Restart_all, reload page
    6 - Item appears in transit
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2eccae54eee0316e6eb6f2edc54edce2cd269ebe
Author: Shi Yao Wang <shi-yao.wang@inlibro.com>
Date:   Tue Apr 19 11:52:42 2022 -0400

    Bug 30517: Translation breaks editing parent type circulation rule fix
    
    Test plan:
    1. Install another language in the staff interface
       1. in commandline: `cd misc/translator/; ./translate install xx-XX`
       2. Check the box of the language in the 'language' system preference
    and save
       3. Refresh and you should be able to choose languages
    2. Create an item type with a parent
       1. Go to Administration > Item types
       2. Create a new item type or modify an existing one, assigning a parent type (I created a 'Children's books' type and assigned 'Books' as its parent)
    3. Create a circulation rule for the parent type (I created All/Books, with 10 checkouts allowed)
    4. Create a circulation rule for All/All (I created All/All with 30 checkouts allowed)
    5. In English, click on "Edit" next to the parent type rule (All/Books)
    --> Note that the item type in the bottom row (the modifiable row) is changed to 'Books (All)'
    6. Modify the number of checkouts allowed (e.g. 99)
    --> The All/Books rule is modified
    7. Switch the interface to the other language
    8. Click on "Edit" next to the parent type rule (All/Books)
    --> Note that the item type in the bottom row stays on 'All'
    9. Modify the number of checkouts allowed (e.g. 88)
    --> The All/All rule is modified
    10. Apply the patch, translate again and refresh the page
    11. Do step 8-9 again and notice it now behaves as it should
    
    Signed-off-by: Emmanuel Bétemps <e.betemps@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 95face066ff1c587be0513038d8e4c93003e5e3e
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Sep 20 20:49:22 2022 +0000

    Bug 23063: Use Price formatting on amounts in item table in cataloguing
    
    Koha can use CurrencyFormat for displaying price amounts and should do
    so consistently everywhere. Without this patch price and replacement cost
    will always display as xx.xx independent of CurrencyFormat setting in
    the table above the edit items form. This patch fixes the table display.
    
    To test:
    * Apply patch
    * Search or create a record with multiple items
    * Fill in some price and replacement costs
    * Try different settings of the CurrencyFormat system preference
    * The display in the item table above the edit/add form should display
      according to the system preference
    * Verify sorting works
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 499562f0b80ca705e94581ccef0eebadce1ed6f9
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Sep 21 13:54:54 2022 +0000

    Bug 31593: Remove Test::DBIx::Class from Context.t
    
    No need to keep it.
    Fixing a test description too.
    
    Test plan:
    Run t/db_dependent/Context.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a4dc5250a25025dfd80f29a11ef6a45059de89ad
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Oct 3 11:38:13 2022 +0000

    Bug 22115: (QA follow-up) prevent wrap on price columns
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b190a293ff30c5b5a456d1523cb1f366247017fe
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Sep 20 21:20:57 2022 +0000

    Bug 22115: Format prices in table of checkouts according to CurrencyFormat setting
    
    In the patron account in the staff interface, all amounts in the
    checkouts table should be formatted according to the CurrencyFormat
    system preference setting.
    
    To test:
    * Edit some items, setting the replacement cost
    * Make sure one of the item type is set to charge a rental charge
    * Check out items
    * Verify the checkouts table displays on both checkouts and details
      tabs correctly
    * Try different settings of CurrencyFormat and verify all amounts
      display correctly
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 28d41896dd9aa72d9b6de55dfec42dfd38125a0d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Nov 2 11:57:21 2021 +0000

    Bug 29389: Add holding branch to the holds queue report
    
    This patch adds the holding branch to the hold queue report.
    It is added as hidden by default, when running per branch it is not needed
    
    To test:
     1 - Place some holds in your system
     2 - perl misc/cronjobs/holds/build_holdsqueue.pl
     3 - View the holds queue
     4 - Note there is no 'Current library' column
     5 - Apply patch
     6 - Reload
     7 - Note the column is not there
     8 - Click column setting gear
     9 - Check the column and confirm it appears
    10 - Confirm the filter works
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 926568a4e25628b2138aafaf62c9f4c3b8d4a8c2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Sep 21 14:14:32 2022 +0000

    Bug 31594: Use count of results for displaying number shown
    
    To test:
    1 - Create a report with a number of results that is not a multiple of 20
        SELECT barcode FROM items
    2 - Run the report
    3 - Go to the final page
    4 - Note report says 20 shown, but there are less
    5 - Apply patch
    6 - Reload and confirm correct number of shown is shown :-)
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 772cadd5959a8bc490de2c31e4edcf62b3dc57a7
Author: Frank Hansen <frank.hansen@ub.lu.se>
Date:   Thu Sep 1 13:57:13 2022 +0000

    Bug 30280: Add Unit tests
    
    Sponsored-by: Lund University Library, Sweden
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 26ec48a196f6403b524fb60456066d7444e2d788
Author: Frank Hansen <frank.hansen@ub.lu.se>
Date:   Wed Mar 16 08:20:40 2022 +0000

    Bug 30280: (follow-up) Removing tab character in Heading.pm
    
    Sponsored-by: Lund University Library, Sweden
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8c7230b8024828edb96838f87cea0101155fdccb
Author: Frank Hansen <frank.hansen@ub.lu.se>
Date:   Tue Mar 15 15:50:18 2022 +0000

    Bug 30280: Add support for subject headings from different thesaurus when using Elasticsearch
    
    This patch allows subject headings from different thesaurus to co-exist in Koha.
    
    Test plan:
    1. Enable Elasticsearch as the search engine (SearchEngine system preference =
    Elasticsearch) and reindex (koha-elasticsearch --rebuild -d -b -a kohadev).
    2. Load sample authority records attached to the bug (in this case the
    authorities.mrc file was saved in the koha directory - adjust file location as
    appropriate):
       misc/migration_tools/bulkmarcimport.pl -v -a -file authorities.mrc -insert
    -c=MARC21
    3. Load the sample bibliographic record attached to the bug:
       misc/migration_tools/bulkmarcimport.pl -v -b -file biblios.mrc -insert
    -c=MARC21
    4. Search for ISBN 0704328623 and verify that the subject terms are not linked
    to any authority records (if you hover over the link terms, all links should
    look like ../cgi-bin/koha/catalogue/search.pl?q=su:"subjectterm" - none should
    have any ?q=an:XXX (where XXX = authority record ids) in the link).
    5. Apply the patches.
    6. Reset the Elasticsearch mappings (Administration > Catalog > Search engine
    configuration (Elasticsearch)).
    7. Reindex: koha-elasticsearch --rebuild -d -b -a kohadev
    8. Link bibliographic records to authority records:
    misc/link_bibs_to_authorities.pl -v -l
    9. Repeat the search in step 4 (or refresh the record details page) and verify
    that the first three Feminism headings[1] are linked to an authority record
    (should have ?q=an:XXX (where XXX = different authority record IDs for the
    various feminism authority records linked to a specific thesaurus)).
    10. Reindex: koha-elasticsearch --rebuild -d -b -a kohadev
    
    [1] Links for subject terms for step 9 in order are (the authority ids may be
    different depending on how ou are testing):
    
        Subject(s:) Feminism | feminism | Feminism | Feminism | Idéhistoria |
    Litteratur
    
        http://127.0.0.1:8081/cgi-bin/koha/catalogue/search.pl?q=an:1709
        http://127.0.0.1:8081/cgi-bin/koha/catalogue/search.pl?q=an:1710
        http://127.0.0.1:8081/cgi-bin/koha/catalogue/search.pl?q=an:1708
        http://127.0.0.1:8081/cgi-bin/koha/catalogue/search.pl?q=su:"Feminism"
        http://127.0.0.1:8081/cgi-bin/koha/catalogue/search.pl?q=su:"Idéhistoria"
        http://127.0.0.1:8081/cgi-bin/koha/catalogue/search.pl?q=su:"Litteratur"
    
        MARC info:
    
        650 #7 - SUBJECT ADDED ENTRY--TOPICAL TERM
          a Topical term or geographic name entry element Feminism
          0 Authority record control number or standard number
    https://id.kb.se/term/sao/Feminism
          2 Source of heading or term sao
        650 #7 - SUBJECT ADDED ENTRY--TOPICAL TERM
          a Topical term or geographic name entry element feminism
          2 Source of heading or term bnb
        650 #0 - SUBJECT ADDED ENTRY--TOPICAL TERM
          a Topical term or geographic name entry element Feminism
        650 #4 - SUBJECT ADDED ENTRY--TOPICAL TERM
          a Topical term or geographic name entry element Feminism
        650 #4 - SUBJECT ADDED ENTRY--TOPICAL TERM
          a Topical term or geographic name entry element Idéhistoria
        650 #4 - SUBJECT ADDED ENTRY--TOPICAL TERM
          a Topical term or geographic name entry element Litteratur
    
       Note: The fourth Feminism term has second indicator 4 which means "Source
    not specified". So this term is only a local term and does not belong to any
    specific thesaurus and thus not linked. To specify a source of a term, the
    second indicator must be set as 7. The source of heading is then specified in
    subfield 2.
    
    Sponsored-by: Lund University Library, Sweden
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aac04da489be44ff3857f78c10ea4399a1d1c435
Author: Frank Hansen <frank.hansen@ub.lu.se>
Date:   Tue Mar 15 15:47:47 2022 +0000

    Bug 30280: Elasticsearch - Add 040f to Subject-heading-thesaurus-conventions (new) authority mapping index field (MARC21)
    
    This patch adds 040 $f to a new field Subject-heading-thesaurus-conventions authority index mapping.
    
    To test:
    1) Apply patch
    2) Reindex using rebuild_elasticsearch.pl -r
    
    If you don't have access to a terminal (in a sandbox for example)
    2a) Go to Administration > Search engine configuration, click "Reset mappings" and confirm
    2b) Then reindex
    
    Sponsored-by: Lund University Library, Sweden
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7a829606a46f5d3c2056ce9da5134ce293d584ad
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Sep 26 21:23:54 2022 +0000

    Bug 31475: Clean new lines and re-add some missing - for separating prefs
    
    Without this patch suggestion and OPACViewOthersSuggestions appeared
    grouped with other preferences. This patch restores them as separate
    entries under the new Suggestions heading.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3f77daf9e6ad0c3f3bdc04e965b290ab9d0e9bd8
Author: Isobel Graham <isobel.graham09@gmail.com>
Date:   Mon Sep 12 17:50:08 2022 +0100

    Bug 31475: Added 'Suggestions' section to preferences
    
    Confirm all suggestion preferences are now grouped.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bfc60fb8c19d26061e188afad0006d7ce830fcc3
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Aug 25 17:15:29 2022 +0000

    Bug 28512: Add branchcode as class to spinelabel element
    
    To test:
    -Apply patch and generate a quick spine label.
    -Inscept the page and notice that the #spinelabel element should contain a new class which corresponds with that the of the logged in branch.
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ba272622c113cf58db0818a9a857a71b92d8e676
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 3 09:54:34 2022 -0300

    Bug 31528: (QA follow-up) Exclude .stylelintrc.json in Makefile.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 18a22f59d33fb5de12e27d4b07614830b2109925
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 3 08:49:22 2022 -0300

    Bug 29071: DBRev 22.06.00.057
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d273baefc469cf7d199b361c52c0265f5ef43dbb
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 3 08:47:47 2022 -0300

    Bug 30571: DBRev 22.06.00.056
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7613c4066d8c68672b0af8074bfb341448a3bdab
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Oct 1 21:43:33 2022 +0000

    Bug 29071: (QA follow-up) Fix typo acual in syspref description
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0f664db0cafcd3ccc8265d62d498b7c4036b18b0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Sep 21 20:26:24 2022 +0000

    Bug 29071: Add HoldsQueueSplitNumbering syspref for any libraries that may not have it
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e27d9deb5685ae30898f20fe9b1a0016fc214051
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Sep 21 10:49:58 2021 +0000

    Bug 29071: Add HoldsSplitQueueNumbering to installer data
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7ddfa8ddd7f558e76c7f6165454453f57dc0a3f9
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Aug 29 09:26:44 2022 -0400

    Bug 31482: Label creator does not call barcodedecode
    
    The label creator can accept a list of either itemnumbers or item barcodes.
    In the case that the list of composed of barcodes, those barcodes should be
    passed though barcodedecode before the lookup is performed.
    
    Test Plan:
    1) Apply this patch
    2) Download and install the Barcode Transformer plugin
       https://github.com/bywatersolutions/koha-plugin-barcode-transformer/releases/
    3) Go to the plugin configuration page, set the configuration to the example configuration from the same page
    4) On the "New label batch" page of the Label creator,,
       type in some valid barcodes, but prefix them with X and postfix them with Y, e.g. X123456Y
    5) Submit the form
    6) Note the items are added to the label batch!
    
    JK: Remove unnecessary if $number check, barcodedecode already does this
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c575f8619838caa6b66ff236864e6f4f151f150e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 30 09:29:58 2022 +0000

    Bug 31463: (QA follow-up) Remove obsolete comment
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5590d09fe7b400711ada4c9abdda37b34589a8ee
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Aug 25 13:12:19 2022 +0000

    Bug 31463: Add order status to opac-detail.pl
    
    This adds a check for the preference OPACAcquisitionDetails and fetches
    the active orders for the item if necessary
    
    Additionally, we simply the check for biblio orders to use object methods
    and remove code that stored order information in the item_info
    
    To test:
    1 - Enable preference: OPACAcquisitionDetails
    2 - Create a basket with items created on order, add an order for a biblio, close the basket
    3 - Create a second basket as above, add an order with multiple copies, leave basket open
    4 - View biblio on opac
    5 - You should see 1 item marked on order, and "1 items on order" below items table
    6 - Close second basket
    7 - Reload opac view, now 3 on order and in message
    8 - Reopen first basket
    9 - Reload opac view, now 2 on order and in message
    
    JK: Remove unused @itemnumbers_on_order variable
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 389b9dfaf43e889612990401ab83cc1f75972333
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Aug 23 13:47:56 2022 +0200

    Bug 31441: Fix Koha::Item::as_marc_field when kohafield = ''
    
    marc_subfield_structure.kohafield can be NULL, but it can also be an
    empty string. But in that case, Koha::Item::as_marc_field ignores them,
    which means the resulting MARC::Field object has missing data.
    This can produce a bug in OPAC ISBD view (and probably other places
    where this method is used)
    
    Test plan:
    1. Edit the default biblio MARC framework for the item field: find or
       create a subfield that is not linked to a DB column.
       Save even if you made no changes to make sure that
       marc_subfield_structure.kohafield is set to an empty string.
       I'll use 995$Z as an example for the following steps.
    2. Add the following to syspref OPACISBD:
        #995|<br>Item:|{995Z}|
    3. Create a biblio with an item and put a value into 995$Z
    4. Go to the ISBD detail page for this record at OPAC. Confirm that the
       value you entered in 995$Z is not visible
    5. Apply patch and restart koha
    6. Refresh the ISBD detail page. Confirm that the 995$Z is now visible.
    7. Run `prove t/db_dependent/Koha/Item.t`
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4c3d18091d821af2d9ac7a6178547cc9c478f9de
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Sep 12 14:35:24 2022 +0000

    Bug 31540: Exclude expired holds from the reminder job
    
    Some libraries don't want to auto-cancel holds, but we should not remind
    a patron about a hold which has expired.
    
    To test:
    1 - Place a hold for a patron
    2 - Set it waiting
    3 - Run the holds reminder script in the future
        perl misc/cronjobs/holds/holds_reminder.pl -day 1 --date '2023-09-12' -v
    4 - Note the holds would be reminded
    5 - Set expirationdate for the hold less than today
        UPDATE reserves SET expirationdate = DATE_SUB(CURDATE(), INTERVAL 1 DAY);
    6 - Run the remidner cron again
    7 - No holds trigger!
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 90c675bae9cd760d85453921b8b15f3a27ac7cf9
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Sep 22 13:14:22 2022 +0000

    Bug 31601: Add ID to materials specified check-in page
    
    TO test:
    1. Apply patch
    2. Find an item and add a materials specified note ( 952$3 ) to it.
    3. Add this CSS to the IntranetUserCSS system preference:
            background: red;
    }
    4. Now check-in the item in. The background of the materials specified note should now be red!
    5. Hooray, sign off!
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Lisette Scheer <lisettePalouse+Koha@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6a3bded6d3597128bcad3477dbf152abe189eb44
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Sep 29 12:20:30 2022 +0000

    Bug 31653: Correct event names passed to jQuery on() function
    
    This patch replaces the obsolete .on("hover") with .on("mouseenter
    mouseleave"). This will allow the code to work again following the last
    jQuery upgrade.
    
    See Bug 20217 for discussion of the original implementation:
    https://bugs.koha-community.org/bugzilla3/show_bug.cgi?id=20217#c14
    
    To test, apply the patch and go to the staff interface. Hover your mouse
    over the "Search" link in the header menu. The adjacent dropdown menu
    button should have its hover state triggered.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a5104a8562448c50e90813085d88da188ec382a7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 3 08:30:37 2022 -0300

    Bug 30571: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9cffbb4f87fb0baf947d9ad4549540f70e41e319
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Oct 3 10:35:00 2022 +0000

    Bug 30571: (QA follow-up) Update marc to MARC in docs
    
    ... don't say it, I know.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6f8088805df2a957d8b8266fb054699451df5170
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Aug 24 12:50:31 2022 +0000

    Bug 30571: Z3950Servers.t - Add another subtest
    
    Subtest for testing nullability of host, syntax and encoding.
    
    Test plan:
    Run prove t/db_dependent/Koha/Z3950Servers.t.
    (Note: you need strict mode to pass this test.)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c24a67a28d5cd10b5dc10e17f20ea575f15339fc
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Aug 24 12:42:33 2022 +0000

    Bug 30571: Z3950Servers.t - Create subtest for existing tests
    
    No real changes, just moving code and indentation.
    Ground work for following patch.
    
    Test plan:
    To let the test pass, disable strict_mode in koha-conf.
    Run perl t/db_dependent/Koha/Z3950Servers.t. Should pass now.
    However, in strict mode or with prove, it should fail.
    Run prove t/db_dependent/Koha/Z3950Servers.t. Failed?
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 31293d711eabc6298d3675b6e9cb54af828ffb83
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Aug 24 12:34:32 2022 +0000

    Bug 30571: Table z3950servers: Make host, syntax and encoding NOT NULL
    
    This is not a sync issue between structure and db revs.
    It just seems a logical move.
    Note that the interface for long does not allow these fields to be empty.
    
    Test plan:
    Run dbrev.
    Add a new Z3950/SRU server. Verify if it works as expected.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 04b16298cb06102f7971691e8c5dd4ec45b38273
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 22 20:20:09 2022 +0000

    Bug 24127: Add 'code' and title to shelving location search
    
    This patch attempts to clarify the 'Shelving location' option in the
    staff side dropdown, as it requires searching the shelving location code, not
    the values. i.e. 'FIC' not 'Fiction'
    
    This patch adds (code) to the option and adds a title, visible on hover
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 066d405437703cd274f136beeb1b12b2f7f2df0a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 3 08:26:33 2022 -0300

    Bug 31528: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6255cef0792128c114de4addc6cb4952063bb4c6
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Sep 8 12:15:35 2022 +0000

    Bug 31529: [OPAC] Fix errors in SCSS files raised by stylelint
    
    This patch corrects errors raised by the new stylelint configuration in
    OPAC SCSS files. Many of the fixes were made automatically by using the
    "--fix" option:
    
    npx stylelint koha-tmpl/opac-tmpl/bootstrap/css/src/*.scss --fix
    
    Some examples of errors found:
    
        - Unexpected empty line before $-variable
        - Expected single space after ":"
        - Expected "#fff" to be "#FFF"
        - Expected modern color-function notation
        - Expected single space after "("
        - Expected single space before ")"
        - Expected empty line before comment
        - Expected no more than 1 empty line
        - Expected a trailing semicolon
        - Expected color.adjust($color, $lightness: -$amount) instead of darken($color, $amount)
        - Unexpected leading zero
        - Expected single space after "," in a single-line function
        - Expected double colon pseudo-element notation
    
    Manual fixes include replacing named colors with hex codes, combining
    duplicate selectors, removing empty blocks, etc.
    
    Some warnings remain: "Unexpected !important" and "Expected a
    placeholder selector (e.g. %placeholder) to be used in @extend" which
    both require more than a quick fix, if we should choose to address them.
    
    To test, apply the patch and rebuild the OPAC SCSS:
    https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client
    
    Browse around the OPAC to confirm that there are no visible changes to
    style.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 503b22548bb67e0699fb2be26e66dcae550e2ba2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Sep 8 12:37:25 2022 +0000

    Bug 31528: (follow-up) A few additional rules
    
    Adding a few more rules which came up during the correction process in
    the follow-up bug.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b90c13912d27b8ad4d0cf1bd5b246f73d21e51a9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Sep 7 12:24:02 2022 +0000

    Bug 31528: Replace scss-lint configuration with one for stylelint
    
    This patch removes the SCSS linting configuration .scss-lint.yml which
    was intended to be used with a now-obsolete tool, scss-lint.
    
    It is replaced with .stylelintrc.json, for use with stylelint. I've
    tried to keep the linting rules the same as before.
    
    To test, run 'yarn install' to install the new dependencies.
    
    You can test stylelint from the command line like so:
    
    npx stylelint koha-tmpl/intranet-tmpl/prog/css/src/staff-global.scss
    
    It should output a list of problems with the file:
    
    koha-tmpl/intranet-tmpl/prog/css/src/staff-global.scss
       30:27   ✖  Expected "#e6f0f2" to be "#E6F0F2" color-hex-case
       81:31   ✖  Expected single space after "("    function-parentheses-space-inside
       ...etc.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 44537c58d1ea689c974bdba216b2ae69eac79e5c
Author: Isobel Graham <isobel.graham09@gmail.com>
Date:   Mon Sep 12 17:33:57 2022 +0100

    Bug 31412: Add focus to 'name' on SMTP Servers
    
    This patch adds the focus class to ensure focus is given to the first form element on the SMTP server entry page.
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 559d01c1470c81c67684a0841f186398c50bfd27
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 3 08:20:41 2022 -0300

    Bug 26368: DBRev 22.06.00.055
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e74e53661319bc4124f5090696b58432c9802e4d
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Oct 1 22:17:45 2022 +0000

    Bug 26368: (QA follow-up) Standardize spaces in option descriptions
    
    Most options are labelles as x- description, but a few had
    additional spaces. This just makes sure they all look the same.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a805beeb4789852d9f136ae76be25678eebe224d
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Oct 1 22:16:41 2022 +0000

    Bug 26368: Rephase system preference to sentence style
    
    The preference was using a yes/no instead of the more common
    display/don't display. This patch switches it to the latter
    and adds a note about position 17.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eda13c6f9091e82182e5ad278bee760228c9fe64
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 3 12:52:28 2020 +0000

    Bug 26368: Add OCLC options to marc21_leader.tt
    
    See documentation at:
    https://www.oclc.org/bibformats/en/fixedfield/elvl.html
    
    To test:
     1 - Apply patch, updatedatabase
     2 - Edit a record in the basic editor
     3 - Edit the leader using the plugin
     4 - Note the options for '17 - Encoding level'
     5 - Find the system preference 'UseOCLCEncodingLevels'
     6 - Edit the record again
     7 - Note new options I,J,K,M
     8 - Set the value of encodign level to one of the new options and save
     9 - Edit again
    10 - Confirm the value is displayed correctly selected
    11 - Repeat tests using advanced cataloging editor
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9408a443c24a5424828f62b48fa1dda04fdf3512
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Aug 29 13:40:28 2022 +0000

    Bug 15545: Remove reqholdnotes from opac-reserve
    
    This never really made it. So let's remove all traces.
    
    Test plan:
    Look at code changes and git grep reqholdnotes.
    Bonus: Place a hold with/without hold notes.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b9815f602d25a93c1a3ad7381ac58e271a9cc037
Author: Isobel Graham <isobel.graham09@gmail.com>
Date:   Thu Sep 1 11:03:31 2022 +0100

    Bug 8305: Added an icon for iOS home screen
    
    1. Bookmark the Koha OPAC on an iOS device
    2. See if an icon is formed on the home screen
       of the device
    
    Signed-off-by: Petro Vashchuk <stalkernoid@gmail.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6d3314354ef86e4577a36fb82e4594a5c88e9b51
Author: Lari Strand <lmstrand@gmail.com>
Date:   Wed Aug 31 15:39:42 2022 +0300

    Bug 31496: Fix branch in printslip.pl to logged in staff user's library
    
    When you print a receipt slip in SCO, the library/branch you are at
    in should be fetched from the logged in staff member's data (staff login
    done before entering SCO view) instead of the patron's own who has signed
    in to the SCO. Printing a slip shows patron's own home branch in the slip
    as the branch they're in. This causes confusion with patrons who want to
    print receipts/slips.
    
    Test plan:
    1) Make sure the staff user's library (used to login into SCO patron
       view) is not the same as the patron's who is logging into SCO
    2) Print a slip in SCO and notice patron's home library printed on the slip
    3) Apply patch
    4) Print a slip in SCO and notice the library is now the staff user's library
       used to sign in to SCO patron view.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 94da0ccf0a2afe61671ecfbf018c6447c9a40443
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 19 10:04:56 2022 +0000

    Bug 31419: Add accesskeys for modals
    
    This patch simply adds accesskey elements to the buttons, and changes an icon to be
    consistent with bug 26626
    
    For tips on how to access the accesskeys:
    https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/accesskey
    
    To test:
    1 - Generate a recall
    2 - Fill it/check in
    3 - Note modal now has hints "Confirm (Y)"
    4 - Test with Y,P,I keys (may need to recreate recalls)
    5 - Confirm the recall and test waiting recall modal too
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 74a1ea73f398a763c69ea409e71a4acaf8eac0c5
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Sep 22 15:48:32 2022 +0000

    Bug 31605: Improve style of OPAC suggestions search form
    
    This patch makes minor modifications to the markup for the
    OPAC suggestions search form so that the different labels and
    form fields display a little more nicely.
    
    The patch also adds standard Bootstrap alert classes to
    several messages which might be displayed on the screen, e.g.
    "You have no pending purchase suggestions."
    
    To test, apply the patch and make sure the "suggestion" system
    preference is enabled.
    
    - With the  OPACViewOthersSuggestions preference disabled, log
      in to the OPAC and view your suggestions.
    - If you have no suggestions you should see a Bootstrap-styled
      message box, "You have no pending purchase suggestions."
    - If necessary, submit a suggestion. With at least one suggestion
      present you should see a search form above the table of
      suggestions. The label, form field, and submit button should
      line up nicely.
    - Test that the search form works correctly to find suggestions
      in your system.
    - If you search for a suggestion which doesn't exist you should
      see a message-style alert, "There are no pending purchase
      suggestions matching your search."
    - Enable the OPACViewOthersSuggestions system preference.
    - Return to the OPAC suggestions page. The form field should
      now include a nicely-styled "Suggested by" filter.
    
    Signed-off-by: George Williams <george@nekls.org>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2e0871fa1bfb6ca9999b050d48912baa5a8e0b5e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Sep 22 16:41:12 2022 +0000

    Bug 31527: Breadcrumbs for anonymous suggestions are not correct
    
    This patch updates the OPAC suggestions template in order to
    omit the patron name breadcrumb if there is not a logged-in
    user.
    
    To test, apply the patch and view the OPAC suggestions page
    with the AnonSuggestions preference both enabled and disabled.
    
    - If you are logged in, the page breadcrumbs will be:
      Home -> [Your name] -> Purchase suggestions.
    - If you are not logged in it should be:
      Home -> Purchase suggestions
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 834c4a00cc1512e55a6fe94791b30fa28eebcdd6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Sep 26 10:32:06 2022 -0300

    Bug 31565: (QA follow-up) Remove support for _ as wildcard in -like queries
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a4f09abd5c16c8a61248bca332313bb08d7970e0
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Mon Sep 26 14:47:52 2022 +0200

    Bug 25375: Fix QueryBuilder.t tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e50948516169fd803159fc902f24e6aea0980bdf
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 23 12:04:54 2022 -0300

    Bug 29744: (QA follow-up) Only consider PLACK_ENV for underscore
    
    When run under certain circumstances (in jenkins, for example) some ENV
    variables are set for convenience, like PLACK_WORKERS and
    PLACK_MAX_REQUESTS and is causing some tests to fail (notably, shib
    ones).
    
    This patch makes the regex only consider PLACK_ENV when testing for the
    underscore case.
    
    Tests are updated accordingly, and they are also rewritten to test for
    boolean values instead of empty string, or zero or one, etc. The
    implementation shouldn't matter as long as the boolean evaluation is
    correct and it is clearer for devs what to expect.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aa4dc15b971e05612b12f17f4996a32be2b65f9c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 23 09:56:46 2022 -0300

    Bug 31105: Regression tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 87e589d79f134f77a12b6422fa6b4942a65bb283
Author: Shi Yao Wang <shi-yao.wang@inlibro.com>
Date:   Tue Jul 5 12:03:52 2022 -0400

    Bug 31105: Holds to pull counts items from other branches when independentbranches is active
    
    Holds to pull should not show items from other branches that shares a
    record when IndependentBranches is active. Except for superlibrarians.
    
    Test plan:
    1- Have IndependentBranches set to Yes
    2- Have a record with an item from the current branch and another item from a different branch. We will call them branch A and branch B respectively
    3- Have a patron from branch A place a hold on that record
    4- Have a staff account on branch A and B with the following permissions:
        - circulate (all)
        - catalogue
    5- Go to circulation > holds to pull
    6- Notice under "Libraries" it displays branch A and B. Also, it shows 2 under "Items available"
    7- Checkout the item from branch A to another patron
    8- Go back to circulation > holds to pull
    9- Notice under "Libraries" it displays branch B even though we are in branch A
    10- Apply the patch
    11- Return the checked out item from step 7
    12- Redo step 5 to 9 with superlibrarian privileges and notice nothing changed
    13- Redo step 11-12 but using accounts from step 4 and notice Holds to
    pull only shows information relevant to their branch
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit da6426ad8b740b2dd445c69beeff62e1b208c3b8
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 23 09:42:05 2022 -0300

    Bug 23538: DBRev 22.06.00.054
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1df1278da05f11f07c7d5305223203ffb3610e12
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jul 30 14:35:27 2022 +0000

    Bug 23538: (QA follow-up) Group system preferences into one entry
    
    This makes the new perferences EmailPatronRegistrations and EmailAddressForPatronRegistrations
    follow a little more closely the pattern set by the very similar
    EmailPurchaseSuggestions and EmailAddressforSuggestions.
    
    * Group both preferences into one entry
    * Add line break between preferences
    * Switch branch for library in pull down
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f5114fbd426e1f9aed4680dbde6bab55fa5ad5c2
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Wed Apr 6 12:40:01 2022 +0000

    Bug 23538: (follow-up) Fix up notices
    
    - Add toolkit template (TT) syntax to notices
    - Add TT conditionals to notices
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3f70c9d6bc8a8ae75e591f8ae016c6e5692a0fdb
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Wed Apr 6 10:38:38 2022 +0000

    Bug 23538: Unit tests
    
    Test plan:
    1. Run unit tests:
    sudo koha-shell <instance>
    cd t/db_dependent/Koha
    prove -v Patron.t
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1c0a187968d961a9ae50955a2baab025fa42ce76
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Wed Apr 6 09:33:12 2022 +1200

    Bug 23538: Email library when new patron self-registers
    
    Test plan:
    1. Apply all patches
    2. Update database
    3. Restart services
    4. Set email addresses in:
    - KohaAdminEmailAddress syspref
    - EmailAddressForPatronRegistrations syspref
    - Email address in the library branch
    5. Enable PatronSelfRegistration syspref
    6. Test the following use cases:
    
    - EmailPatronRegistrations syspref = 'none'.
    Submit OPAC registration.
    = OUTCOME: Confirm no OPAC_REG notice in message_queue table
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 219ae32c41a24c5de71c7b965dce0b05126d6ec3
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Mon Apr 4 07:52:06 2022 +0000

    Bug 23538: Database changes
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6661eacaa6102bc9b96e2e4c03b249a9a5c4e62f
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Aug 26 09:28:14 2022 +0000

    Bug 31468: Change interface in Koha::Logger
    
    Test plan:
    Add a line in mainpage.pl:
      require Koha::Logger; Koha::Logger->get->warn("intranet L51");
    Restart. Hit intranet mainpage. Verify that line is in plack=intranet.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Retested with L49 now ;)
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 87012104bdf5d9de865ab294cd0bea63e4d449f9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 23 09:29:40 2022 -0300

    Bug 30484: (follow-up) Fix tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c5ac1a3ecfca17baa90ba2d4f404c5d7c685abcc
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 23 09:22:36 2022 -0300

    Bug 30484: DBRev 22.06.00.053
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7eccab566e2c54e02621a30a226a6fd1c50f48a6
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Aug 8 22:46:33 2022 +0200

    Bug 30484: (QA follow-up) Fix typo 'Kind Regards'
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3b8a4f21be87c3b23e796b4b8c88eefe3b268c5b
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Wed Apr 13 11:30:40 2022 +0100

    Bug 30484: Add unit tests
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=28909
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 65a2fc2fa33ae68716ae4305ab33f6cf56be619e
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Apr 8 16:09:30 2022 +0100

    Bug 30484: Implement support for ILL request updates
    
    This commit adds support for the concept of ILL request update notices.
    
    - Adds a new Koha::Illrequest::SupplierUpdate class that is used to
    encapsulate an update to a request, this update may come from a
    supplier via a backend or from core ILL via, perhaps, a user action
    - Adds a new Koha::Illrequest::SupplierUpdateProcessor base class that
    can be subclassed in order to create a processor that can be passed an
    update and act accordingly.
    - Updates to Illrequest.pm to support the above classes and allow core
    Koha to offer update processors
    - A shell script to initiate a periodic process to check for updates
    meeting given criteria and run the appropriate processors
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=28909
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit adf0094d66c12c62b15a53637a2e45b33d251101
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Apr 8 16:06:37 2022 +0100

    Bug 30484: Add ILL update notice
    
    Adds a new ILL_REQUEST_UPDATE notice which is to be used for the
    formation of notices informing users of updates to ILL requests.
    
    Commit includes database updates and template changes for messaging
    preferences
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    https://bugs.koha-community.org/show_bug.cgi?id=28909
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7eca36202d27193b720a0778016a1b2997c35b9a
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Sep 13 13:06:53 2022 +0000

    Bug 30802: (QA follow-up) Simplify a ternary
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8d12248e954748a7bb795b988e3bb4dc396bc23a
Author: Shi Yao Wang <shi-yao.wang@inlibro.com>
Date:   Thu May 19 11:05:17 2022 -0400

    Bug 30802: Make numReturnedItemsToShow function properly
    
    Replaced the hardcoded 20 by the value of numReturnedItemsToShow to
    display the right number of items in check in.
    
    Test plan:
    1-  Make lots of checkouts, at least like 40 (I used the batchCheckouts feature)
    2-  Go to Circulation > Check in
    3-  Return 21 items
        The last 20 items returned will be displayed
    4-  Change numReturnedItemsToShow to 50
    5-  Return a couple more items
        Only the last 20 returned items are displayed
    6-  Change numReturnedItemsToShow to 10
    7-  Return a couple more items
        Only the last 10 returned items are displayed
    8-  Apply the patch
    9-  Change numReturnedItemsToShow back to 20
    10- Do steps 1 to 7 again, but this time step 5 returns the right amount
    of items
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 432f058a722cd66cdb2ebde4d8d47222830a7632
Author: Wainui Witika-Park <wainuiwitikapark@catalyst.net.nz>
Date:   Sun Sep 11 22:18:45 2022 +0000

    Bug 31525: display streetnumber with address in patron search
    
    Adds back street number to the address when searching for patrons
    
    To test:
    1) Edit a patron's contact information
    2) Under Main Address put an address, make sure to put something in the
    Street number field
    3) Do a simple patron search that will yield results (i.e. "a")
    4) Confirm the street number does not show, but the rest of the address
    does
    5) Apply this patch
    6) Do another patron search
    5) Confirm the street number now shows
    
    Sponsored-by: Catalyst IT
    
    Testing note:  AddressFormat system preference must be set to "US style"
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a45b105c241ebc845b3c8585622cab53a4dc9a0d
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Sun Sep 4 10:22:22 2022 +0300

    Bug 31518: Fix syntax error on request.tt that prevents showing hidden item count
    
    The variable set by request.pl doesn't have biblio prefix, it is just
    hiddencount.
    
    To test:
     1) Log in with a staff member account that has "Lost items in staff
     interface" setting set to "Hidden by default" in the patron category
     settings
     2) Add a lost item to biblio
     3) Go place a hold on staff interface (request.pl) notice the broken
     link on the request page: "Show all items ( hidden)"
     4) After applying the patch it should read "Show all items (1 hidden)"
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 09bbc5e84543b1f9fe02221105f97859068d5d96
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 23 09:08:38 2022 -0300

    Bug 25375: DBRev 22.06.00.052
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c20993b9453694939eedb1376fd3fccac31fb50b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 23 09:06:11 2022 -0300

    Bug 25375: Spelling fixes
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c86d7f632fdcfb309151e094e5794bd9c09be290
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 23 09:03:50 2022 -0300

    Bug 25375: New atomicupdate syntax
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 471facdf269e7d4a9223f960b8049198e85cf8ad
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Sep 13 13:06:03 2022 +0000

    Bug 25375: Adjust tests and test itemlost, not notforloan
    
    Previous commit correctly lists Zebra availability test, but was a
    bad edit. This fixes the availability test to use itemlost
    
    Additiionally, tests were written before limits were agreed. Adjusted
    for the current settings
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b6ace414f72be24949acb07f1c739bb031cc1faf
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Aug 8 12:15:16 2022 +0000

    Bug 25375: Match current Zebra availability limit
    
    In Zebra the availability limit code states:
    'available' is defined as (items.onloan is NULL) and (items.itemlost = 0)
    
    We should make ES follow the same behaviour so that changing the engine does not
    change this.
    
    To test:
    1 - Find or create several records with two items each
    2 - For those records setup items as:
        a - one checked out, one available
        b - both marked lost
        c - both damaged
        d - both withdrawn
        e - both notforloan
    3 - Enable ES and reindex to confirm everything is set
    4 - Perform an advanced search to return those records and 'limit to available items'
    5 - Confirm you see records b,c,d,e and records say '2 items, none available'
    6 - Apply patch
    7 - Run `misc/search_tools/rebuild_elasticsearch.pl -d -b`
    8 - Perform an advanced search to return those records and 'limit to available items'
    9 - Confirm you see records a,b,c,d and al but a say '2 items, none available'
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f48c5bbb8b10ada5e10c63040a88693079b815f2
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Mar 3 11:18:25 2022 +0100

    Bug 25375: Add tests for the "available" ES field
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d9cb39e57d1e5c979c605e48493ee5f40df3dac4
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 11 15:23:02 2020 +0000

    Bug 25375: (QA follow-up) Count available items rather than iterating
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0ce7293ad52c9f817859e34d8161a847c58f1707
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Sep 4 12:25:17 2020 +0400

    Bug 25375: Get biblionumber from the correct MARC field
    
    Signed-off-by: Andrew Fuerste-Henry <andrew@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d79361c51e9349a5bbbe3212fde40d3ad4d6b946
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Apr 29 16:13:08 2020 +0200

    Bug 25375: Fix 'available' facet in elasticsearch
    
    Add a new boolean ES field named 'available', which is true if at least
    one item is available, which means the item is not on loan, not
    "notforloan", not withdrawn, not lost and not damaged
    
    A full indexation is required
    
    Test plan:
    1. Apply patch and run updatedatabase.pl
    2. Run `misc/search_tools/rebuild_elasticsearch.pl -d -b`
    3. Make sure you have some biblios whose items are all unavailable, some
       biblios whose items are all available, and some biblios with at least
       one item available and at least one item unavailable
    4. Use the 'available' filter on both opac and intranet and make sure it
       works as expected.
    
    Signed-off-by: Andrew Fuerste-Henry <andrew@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6523db73214c57d6a6b8ea2d4c3731445ccddf1f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 26 13:32:50 2022 +0000

    Bug 31367: Add subtotals if budget has children
    
    On bug 29287 we added child funds if a fund had no parent id
    
    It turns out funds can have a parent, and still have children (sub-sub-funds)
    
    This patch simply checks for children, rather than checking for lack of parent.
    
    Totals are already calculated correctly in GetBudgetHierarchy
    
    To test:
    1 - Add a fund "Fund" to a budget - assign 1000 dollars
    2 - Add a sub-fund "SubFund" - assign 100 dollars
    3 - Add a sub-sub-fund "SubSubFund" - assign 10 dollars
    4 - Add to a basket $5 order from SubSubFund
    5 - Add to a basket $50 order from SubFund
    6 - Add to a basket $500 order form Fun
    7 - View acqui home - note 'SubFund' does not include total from 'SubSubFund'
    8 - Apply patch
    9 - Confirm all sub-sub-funds totaled in sub-funds and that fund total correctly adds sub and sub-sub funds
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aac6a2f15569885b56ccc85a1b6405a547dbb912
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 23 09:37:46 2022 +0000

    Bug 30982: (QA follow-up) No userenv, no jobs
    
    +    # Assume permission if context has no user
    +    my $can_manage_background_jobs = 1;
    => This felt a bit unsafe.
    
    Test plan:
    Try interface for jobs. Call API with cookie. Call API with OAuth.
    Run t/db_dependent/Koha/BackgroundJobs.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ddaa92821540cb2384d091cd417e81bf1575751c
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 23 08:48:05 2022 +0000

    Bug 30982: (QA follow-up) Remove redundancy from template
    
    The template now contains two lists for both status and type:
    a TT list and a JS list. The type list already proves that
    redundancy leads to bugs. We miss three types at one side:
        Unknown job type 'stage_marc_for_import'
        Unknown job type 'marc_import_commit_batch'
        Unknown job type 'marc_import_revert_batch'
    
    This patch removes the TT list. And gets the status and type
    via an additional js call. For that reason I hide the fieldset
    until document ready. This can be improved later when needed.
    
    Test plan:
    Look at status and type on both job list and detail view.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b9cab0967e8a0c6216494d3eea63674ab2f9934d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 23 07:05:39 2022 +0000

    Bug 30982: (QA follow-up) Spelling
    
    [1] Correct: BackgrounJob
    [2] If should filter out not current jobs
    => Had a hard time reading that one until I replaced if by it.
    => Decided to rephrase it in a more positive way.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c6b2724c2f20c5c86823eb126d52ea252160e850
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Sep 20 14:47:45 2022 +0000

    Bug 30982: (QA follow-up) Resolve pod warning
    
    Empty section in previous paragraph at line 32 in file Koha/BackgroundJobs.pm
    
    Test plan:
    Run podchecker again on this module.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 87ad83832b85a51258754ce329adbf572494d4a9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Sep 12 15:06:51 2022 -0300

    Bug 30982: Rename 'Background Jobs' => 'Jobs'
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0480f61226ce2d6e3ddcb0e028f26e6d45b30e4d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Sep 12 14:54:08 2022 -0300

    Bug 30982: Adapt table to new API spec
    
    Disclaimer: this patch is highly opinionated :-D
    
    When I started looking at this patch I felt like the two tables
    (current/past jobs) implemented on bug 30462 was the way to go.
    
    In order to make this patches apply after it I had to redo all the
    things. Or most of them.
    
    But I decided to keep the idea of filtering out completed tasks, not
    just having the option to display 'the last hour' tasks. For the task I
    added some required helper methods and the relevant tests as well. So a
    behavior change.
    
    Hope you all agree with it.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 88cc881521178f268c563e305aed8ff75fbcbd7a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Sep 12 13:02:25 2022 -0300

    Bug 30982: API tweaks
    
    This patch makes the following changes to the 'background_jobs' API:
    
    * We now call them 'jobs'
    * Removed deprecated query parameter definitions
    * Added only_current query parameter
    * Controller gets adapted to use $rs->filter_by_current when
      only_current is passed
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c1c9700c63a41f3662235c7bb174360af4b40277
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Sep 12 12:01:45 2022 -0300

    Bug 30982: Add Koha::BackgroundJobs->filter_by_current
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1d0f096eaf987a47a14a9ec737bf76322edff745
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 26 08:44:10 2022 +0200

    Bug 30982: Add 'context' to the REST API specs
    
    context has been added by bug 30889
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f54b171584ff15b58d8c71b574914c8580c3bbc7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jun 29 15:14:41 2022 +0100

    Bug 30982: Make code more re-usable
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b9b3b93d9377f062b7b5b95cb5e10732d852ccec
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 29 11:28:31 2022 +0200

    Bug 30982: Add tests and implement GET /background_jobs/$id
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a1543221bbce79aba64ce4697938b6cb89c8715f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jun 28 08:10:38 2022 +0100

    Bug 30982: (QA follow-up) Double quoting and console.log
    
    This patch fixes the issues highlighted by the QA script; We use double
    quotes for translatable strings in JS and remove an errant console.log
    call.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 17c8c59881114047cc406dd938dfb546ea7626c9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 17 11:13:19 2022 +0200

    Bug 30982: Use the REST API for background job list view
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b702e9b08d2ce39b3f3a96cdbe5fb2eeb62d6317
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 17 09:21:39 2022 +0200

    Bug 30982: REST API specs
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 85030fc38a2eb0b15c8fc800d045dc56f55d9295
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Sep 22 09:39:27 2022 -0300

    Bug 7021: DBRev 22.06.00.051
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 652ddd364d7cff5912bd8c372e5e1d427c05c018
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Sep 22 09:38:04 2022 -0300

    Bug 7021: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d98432d8f261f7fe74be9751df448d5dc19b57fd
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Sep 22 09:37:07 2022 -0300

    Bug 7021: (QA follow-up) Fix typo
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ffd7a6b6b060de9811da9d9162b7f54c71ec76e9
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Sep 2 13:33:38 2022 +0000

    Bug 7021: (QA follow-up) Add comment to new database column
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7f388afb5cf6b014d2d6abd916fb8f4519240810
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Sep 2 11:13:16 2022 +0000

    Bug 7021: Move to new atomic update structure
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a08e946459c99a0b2f415e353b91a104a7a66e02
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Sep 2 07:00:25 2022 -0400

    Bug 7021: (QA follow-up): Minor code cleanup
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7d87128026a63d4d0845aecee9cd833eff52d8fe
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon May 23 15:21:40 2022 +0100

    Bug 7021: Catch new introductions of UpdateStats
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 980871b19f441472bc5e26402d68cadea3fdf035
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon May 23 15:08:27 2022 +0100

    Bug 7021: Remove superflous 'open'
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 791702a363a659a78e06a362ff39da73e4f467e9
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon May 23 14:43:34 2022 +0100

    Bug 7021: Terminology - usercode -> categorycode
    
    Lets stick to standard terminology and use categorycode rather than
    usercode here.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b9158641d4573ff547e1a6df021ca3187aa10da8
Author: Olli-Antti Kivilahti <olli-antti.kivilahti@jns.fi>
Date:   Wed Jul 2 19:54:33 2014 +0300

    Bug 7021: Patron category in the statistics table
    
    This patch populates the koha.statistics.usercode with borrowers.categorycode where it is easily available.
    Currently for statistics.type 'issue' OR 'localuse' OR 'renew'.
    
    Supplied a script to UPDATE the old statistics records.
    
    Have fun!
    
    To test:
    1. Add loan for patron.
    2. Check statistics table
    => 'usercode' column for this issue should now contain patrons categorycode
    
    To test add_statistics_borrowers_categorycode.pl:
    1. Run add_statistics_borrowers_categorycode.pl
    2. Check statistics table
    => all statistics which are type 'issue' OR 'localuse' OR 'renew'
    should now contain patrons categorycode in 'usercode' column
    
    Also prove that tests in t/db_dependent/Circulation.t still pass.
    
    Rebased-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cbed9618c993dbe19e391a9d12136228d5d3f949
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Wed Jun 16 14:40:47 2021 +0300

    Bug 7021: Reintroduce usercode column
    
    This patch reintroduces usercode column to
    statistics table.
    
    To test:
    1. Apply patch and update database
    2. Confirm there's column usercode in statistics
    table
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 15039ab66f623a192b8e0c605cf5a645eaa40127
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Sep 14 11:45:38 2022 +0000

    Bug 31562: Respect mandatory fields pref
    
    To test:
    1 - Set gonenoaddress and lost in BorrowerMandatoryField
    2 - Edit a patron, confirm fields are required
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8c50fe3890aaa20c01afe2f11ed47e5b7912f6fc
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Sep 14 11:35:44 2022 +0000

    Bug 31562: Remove gonenoaddress and lost from OPAC borrower field preferences
    
    These are not shown, so cannot be unwanted or mandatory
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fde33d7a4caffb452fafc3ecb79685aeaeb3711e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Sep 14 11:27:03 2022 +0000

    Bug 31562: Treat flags as other borrower fields
    
    Rather than generate a custom hash for these fields, we should treat them as other borrower data fields
    
    To test:
     1 - Edit a patron, note the 'Lost card' and 'Gone no address' fields
     2 - Edit syspref BorrowerunwantedField
     3 - Set gonenoaddress and lost as unwanted
     4 - Edit patron, the fields remain
     5 - Apply patch
     6 - Edit a patron, fields are hidden
     7 - Unhide one of the fields
     8 - Edit a patron and confirm it shows and saves correctly
     9 - Unhide the other field
    10 - Confirm it can be edited and saved
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3734ae1b2999f2428f8c7a6edcb734738f8aff18
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Sep 22 08:54:12 2022 -0300

    Bug 31389: (QA follow-up) Missing permissions in tests
    
    The following bugs refined permissions a bit, and the change was missing
    on the tests:
    
    * 23681
    * 30335
    
    Bonus: sorted permissions alphabetically for readability.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8687ad6ef1623f6c8810060a578b602f6c6680f5
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Sun Sep 4 12:20:26 2022 +0000

    Bug 31389: (QA follow-up) Correct test message
    
    The test in question concerns non-superlibrarian staff users.
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 897fe2068330db89d0c4ce93e85cc00c889eebca
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Aug 18 03:26:20 2022 +0000

    Bug 31389: Calculate user permissions in separate function
    
    This patch refactors the setting of user permissions for templates into
    a new function, which can be easily unit tested and reduces the amount
    of code in C4::Auth::get_template_and_user(). It also aids in the
    re-usability of permission checking code.
    
    Test plan:
    0) Apply patch and koha-plack --restart kohadev
    1) prove t/Koha/Auth/Permissions.t
    2) As koha superlibrarian, go to
    http://localhost:8081/cgi-bin/koha/tools/tools-home.pl
    3) Go to http://localhost:8081/cgi-bin/koha/members/members-home.pl
    4) Create new test user with "Staff access..." and "Remaining circulation permissions"
    5) Logout of koha superlibrarian
    6) Login as test user
    7) Note you can only see a limited view of the staff interface
    (i.e. no administration, no tools, no reports, etc.)
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 734c8fe70ec5d025f9341bb46339d2d0fe3cc42f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Sep 22 08:38:10 2022 -0300

    Bug 30497: DBRev 22.06.00.050
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 14b9274135f32c92c655fc070eb912c4f39b4eca
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Apr 8 08:23:56 2022 +0000

    Bug 30497: Recreate old_reserves_ibfk_4 when it cascades
    
    Test plan:
    Drop old_reserves_ibfk_4.
    Add back with:
        alter table old_reserves ADD CONSTRAINT `old_reserves_ibfk_4` FOREIGN KEY (`itemtype`) REFERENCES `itemtypes` (`itemtype`) ON DELETE CASCADE ON UPDATE CASCADE;
    Run dbrev. Check that constraint has been replaced by SET NULL.
    Run dbrev again. No changes.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT 23-08-22 Replaced DROP CONSTRAINT]
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4a27800c62a5494284b066405d0543bc7689f7e9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Sep 22 08:33:09 2022 -0300

    Bug 30490: DBRev 22.06.00.049
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c171a5d45eb7f3e539209bed0301289c536c6e0e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Sep 22 08:31:54 2022 -0300

    Bug 30490: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9b018fc6de35a51a1eaeae6868db050630ccc484
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Aug 23 13:00:17 2022 +0000

    Bug 30490: Adjust constraint itemtypes.itemtypes_ibfk_1
    
    Change from CASCADE to restrict.
    In harmony with dbrev 20.06.00.022.
    
    Test plan:
    Run the dbrev.
    Bonus:
    update itemtypes set parent_type='VM' where itemtype='CF';
    delete from itemtypes where itemtype='VM';
    => ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`koha_myclone`.`itemtypes`, CONSTRAINT `itemtypes_ibfk_1` FOREIGN KEY (`parent_type`) REFERENCES `itemtypes` (`itemtype`))
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ca338bae1e751228a1107237574b8f335c12b7bb
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Sep 8 12:20:11 2022 +0200

    Bug 27550: Add unit test for CloneBudgetHierarchy
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ed97960cd7f8105eb5f913770089218cf7dd559d
Author: Jérémy Breuillard <jeremy.breuillard@biblibre.com>
Date:   Wed Nov 24 10:45:46 2021 +0100

    Bug 27550: "Duplicate budget" does not keep users associated with that budget
    
    When a budget is duplicated, Owner is copied but not Users
    
    Test plan :
    Home > Administration > Budgets
    1)Create a budget to allow (active or inactive)
    2)Give it some funds by filling up the form, especially Owner and
    User(s)
    3)Submit then go back to the Budgets dashboard
    4)Duplicate the Budget and click on its name
    5)Edit it and notice that User(s) is empty
    6)Apply the patch
    7)Repeat from 1) to 5)
    
    Signed-off-by: Samu Heiskanen <samu.heiskanen@hypernova.fi>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0c3f50d1575099f254884b0dcb2c97d41851a85b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Sep 14 13:23:58 2022 +0000

    Bug 31564: Pass start label in PDF link
    
    To test:
    1 - Tools->Lbel creator
    2 - Make a new batch
    3 - Add an item
    4 - Click 'export' on the single item
    5 - Enter a starting label position greater than 1
    6 - Click Export
    7 - Click Download as PDF
    8 - Note label in 1st position
    9 - Apply patch
    10 - Repeat and note label position now honored
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 179be45f4aa23f5580475e0387126e4349502941
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 16 07:20:36 2022 +0000

    Bug 29744: (QA follow-up) Call psgi_env in OO style
    
    Result of git grep -l -E "::psgi_env" | xargs sed -i -e's/::psgi_env/->psgi_env/g'
    
    Also resolving this warn from Auth.t:
    Use of uninitialized value $ENV{"SCRIPT_NAME"} in pattern match (m//) at /usr/share/koha/Koha/AuthUtils.pm line 211.
    
    Note that the following warn is resolved on report 30588 (underway).
    Use of uninitialized value $return in numeric gt (>) at /usr/share/koha/C4/Auth.pm line 1154.
    
    Test plan:
    Run t/db_dependent/Auth.t
    Hit some opac, intranet pages. API call.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 097b2afb17da42878c8fffaf7ebdab1ad0cb49fa
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 16 07:07:00 2022 +0000

    Bug 29744: (QA follow-up) Add underscore test, move to OO
    
    The underscore test comes from bug 31468.
    Context methods should actually be OO.
    
    Test plan:
    Run t/Context.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 97b1bd1daec11b5720dc3de3ace65fcc9dd0f65b
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Apr 20 05:27:32 2022 +0000

    Bug 29744: Remove unnecessary condition in C4::Auth::safe_exit
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] Adding David's comments from Bugzilla to safe_exit here.
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0b80172a494e4460881ae12d7c7be704e026357d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Mar 28 10:23:58 2022 +0100

    Bug 29744: Harmonize psgi/plack detection methods
    
    This patch updates and moves the existing psgi_env method out of Auth
    and into Context and then replaces any manual references of the same
    code to use the new method.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b7fa8136b417c92f4a73fb8b03284886a6ed493a
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Thu Sep 22 09:09:50 2022 +0300

    Bug 31597: Add missing semicolon to restriction.pl
    
    In restrictions.pl line 114 is missing a semicolon after try-catch statement.
    This causes error 500 when one tries to delete restriction.
    
    To test:
    1. Navigate to "Patron restrictions".
    2. Find or create patron restriction to be deleted.
    3. Hit "Delete" and confirm deletion.
    => Error 500 is raised.
    4. Apply this patch.
    5. Try to delete again.
    => Success!
    
    Sponsored-by: Koha-Suomi Oy
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8e25fa1dc5267f6fb6148412f0774c6880a2e7c3
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Mon Aug 29 20:39:13 2022 +0000

    Bug 28167: Remove uninitialized variable warnings from circ/set-library.pl
    
    With UseCashRegisters syspref disabled going to the page
    /cgi-bin/koha/circ/set-library.pl in staff interface and setting a
    library gives the following errors in plack-intranet-error.log:
    
    Use of uninitialized value $register_id in string ne at /kohadevbox/koha/circ/set-library.pl line 79.
    Use of uninitialized value $referer in pattern match (m//) at /kohadevbox/koha/circ/set-library.pl line 114.
    
    In the if clause $userenv_register_id appears to be typoed, it should have
    been $register_id as $userenv_register_id is always defined. As for the
    $referer variable, it is undef if there is no referer so let's just initialize
    it to an empty string for the regex so it doesn't give the warning.
    
    To test:
     1) Go directly to /cgi-bin/koha/circ/set-library.pl by typing it in
        the URL bar and set a library
     2) Make sure plack-intranet-error.log doesn't contain the above mentioned errors
        after applying this patch
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 49577829d969fba34bf6655da4e0356f1f0ec5d2
Author: Isobel Graham <isobel.graham09@gmail.com>
Date:   Thu Sep 1 12:06:26 2022 +0100

    Bug 30890: Fixed ILL breadcrumb
    
    Added correct breadrumb depth when managing requests.
    
    1. Viewing a request on a ILL request page
    2. Making sure the breadcrumb has three depths
       and the manage requests has the correct
       request id
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9a92ee31945af6f535e8be81b3410d13affd8b5f
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Sep 22 08:09:41 2022 +0000

    Bug 31598: Fix random failure on Jenkins for Upload.t
    
    At some point the warn is made conditional for permanent
    files. So it failed when TestBuilder picked a zero value
    for permanent. Trivial fix.
    
    Test plan:
    Run t/db_dependent/Upload.t a few times
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f0642e4a1fca066ca48cfade8e8d50c4e7611e63
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 16 11:06:17 2022 +0000

    Bug 31497: (follow-up) Expand ID suffix, fix password2, remove debug
    
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0f599e2a2a8c9f6caed4fe4ae6060b106d2a1004
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Sep 13 12:19:57 2022 +0000

    Bug 31497: Prevent ID clash on quick add fields
    
    The quick add clones the original fields, including ids. This can cause some clash when
    other JS is running on the page.
    
    This patch updates the ids of the fields before adding to the form, which prevents bad
    copying/clearing of fields
    
    To test:
    * Go to patrons module
    * Click on Quick add new patron (I chose Patron as category)
    * On sample database these fields are marked as mandatory:
      * Surname
      * Cardnumber
      * Library
      * Category
    * Fill in Surname, leave cardnumber empty
    * Save - mandatory message is shown
    * Fill in cardnumber - save
    * The patron is saved
    * BUT: cardnumber is empty!
    APPLY PATCH
    * Repeat plan above
    * Cardnumber is correctly saved
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b1e3398e84674f443d1b3c348058e45291f45e8e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Aug 25 11:18:18 2022 +0000

    Bug 30359: Unit tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 35724169c11352d4cc1e22fcd50e91d39b7d8c44
Author: Johanna Raisa <johanna.raisa@gmail.com>
Date:   Fri Mar 25 12:25:56 2022 +0200

    Bug 30359: GetBudgetHierarchy is slow on order receive page
    
    This patch adds skiptotals parameter to GetBudgetHierarchy so calculating
    totals can be skipped from some pages.
    
    Test plan:
    1) Open browser's Inspect -> Network
    2) Go to receive orders
    3) Check the timings for page load
    4) Apply the patch
    5) Refresh the page
    6) Check the timings again
    7) prove t/db_dependent/Budgets.t
    
    Sponsored-by: Koha-Suomi Oy
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 63f88a574299b3831bf523e5bb8ead52f954864a
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Jun 9 16:28:51 2021 +0200

    Bug 31254: Add additional fields for accountlines
    
    Test plan:
    1. Go to Admin » Additional fields
       There are two new categories: "Account lines (credit)" and
       "Account lines (debit)"
    2. Create fields for both categories, with and without an authorized
       value category
    3. Go to a user's accounting page
    4. Create a manual invoice. Verify that all "debit" fields are there,
       put a value in them and save
    5. Create a manual credit. Verify that all "credit" fields are there,
       put a value in them and save
    6. Make a payment. Verify that all "credit" fields are there, put a
       value in them and save
    7. Go to the transactions tab, click on the "Details" button for the
       lines you just created and verify that the additional fields are
       there
    
    Signed-off-by: Emmanuel Bétemps <e.betemps@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 30b5350b048d7801c7422eaf5b00fbcdfb85664a
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Sep 21 12:46:45 2022 +0000

    Bug 31590: Remove Text::CSV::Unicode
    
    This modules is really not needed.
    The wide character test does not make much sense. Just use
    encoding as you should.
    
    Test plan:
    Run xt/author/Text_CSV_Various.t.
    Check about page, perl modules.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d3798e778e3de71297564fafa0a4c28f2b4dc4b0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Sep 19 15:33:56 2022 -0300

    Bug 27421: MARC staging/import are long-running tasks
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5a5536c4362752433f4412dd91f8587c7a6fe253
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Sep 6 12:44:39 2022 +0000

    Bug 27421: (QA follow-up) Add redirection to job details
    
    Low budget implementation. After 5 seconds we jump to jobs.
    Small jobs should already be finished.
    
    Test plan:
    Try staging a file. Wait and see if you got redirected.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d939368ce9fb15f5c050aef5a72aa5a1b614f26f
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Sep 6 12:14:02 2022 +0000

    Bug 27421: (QA follow-up) Template polishing
    
    The completed alert needs a condition on status.
    The record_type variable needs a bit of 'context'.
    
    Test plan:
    Verify if a failed or new job does not have a Completed alert.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5b6d1e99a24f7834d4c3e8469a729a56bd69cf10
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Aug 19 07:54:55 2022 +0000

    Bug 27421: (QA follow-up) Polishing the backgroundjob modules
    
    StageMARCForImport:
    - Rollback in catch
    - Setting progress, size or status after BatchStageMarcRecords
      in both try and catch block
    
    ImportCommitBatch:
    - Move setting size back to enqueue moment
    - Rollback in catch
    - Setting progress, size or status after BatchStageMarcRecords
      in both try and catch block
    
    ImportRevertBatch:
    - Move setting size back to enqueue moment
    - Adding transaction/rollback to module since import routine
      does not support it. Could be moved later.
    - Setting progress, size or status after BatchStageMarcRecords
      in both try and catch block
    
    Test plan:
    Run t/db_dependent/Koha/BackgroundJobs/StageMARCForImport.t
    Test staging file
    Bonus: Put a die statement in BatchStageMarcRecords.
    
    Test importing batch
    Bonus: Include some records with an invalid library code; this will
    trigger an FK exception. (Reduce the progress from 50 to 1. If your
    first record would be fine, check if it is NOT imported when the job
    fails.)
    
    Test reverting batch.
    Bonus: Put a die in BatchRevertRecords.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bdb107bcec6d87649d6c38ac8bee960a321c9ab0
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Sep 5 11:57:52 2022 +0000

    Bug 27421: (QA follow-up) BatchCommitImportRecords needs param for skipping commits
    
    When you submit a background jobs, and it fails, you do not expect
    partial results in the database.
    Note that when the Background feature would support a partially
    completed status, things might change again.
    
    Note that the >0 test was superfluous if you check for ^\d+$.
    
    Test plan:
    Run t/db_dependent/Koha/BackgroundJobs/StageMARCForImport.t
    
    Note: This serves to verify that it still runs as expected.
    The test plan of the following patch covers the new param.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3f79fcd5aa5efed7883045e3ce467ead79727131
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Sep 5 10:33:01 2022 +0000

    Bug 27421: (QA follow-up) Sub finish should respect failed status too
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 52dc337ced743becc00209ab5a1806b891fe2998
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Aug 19 07:34:06 2022 +0000

    Bug 27421: (QA follow-up) Similar changes for revert commit
    
    Test plan:
    Look at job results when reverting imported batch.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7b355ee54b8bcfbfa6b7ea0eecf965c83a82a257
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Aug 19 07:16:22 2022 +0000

    Bug 27421: (QA follow-up) Include manage URL and item counts for import commit
    
    Test plan:
    Run an stage and import.
    Check import commit job.
    Click to managed batch.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 848813bccf7ae01a2abac4550e8a10901035c7dc
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Aug 18 14:01:44 2022 +0000

    Bug 27421: (follow-up) Add exec flag
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 89e4e2906a1c0ecfad675239bb17a7175371644f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Aug 9 09:30:43 2022 +0200

    Bug 27421: Add tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a25feb05c9b07fe2b9535125756e9ffc2ca91214
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 5 11:49:51 2022 +0200

    Bug 27421: Fix job's size for import
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9470cf8c1b1887c8fe4612d4eff2b905e2a4f4bc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 13 16:15:36 2022 +0200

    Bug 27421: Commit and revert
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8497ed67b7238ec751714b8f4d6a11e7eb1cc715
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 13 14:29:45 2022 +0200

    Bug 27421: Use Background job for staging MARC records for import
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a80a96b93381a12740b8548b5d92a55bbec0b085
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Aug 12 06:50:59 2022 -0300

    Bug 31342: Add execution locking to process_message_queue.pl
    
    This patch makes the script use an execution lock as provided by
    Koha::Script. Previous attempt got too complex and contentious, and
    given we have a simple way to achieve the same thing, I decided to
    submit an alternative approach.
    
    To test:
    1. Apply this patch
    2. Add the following content to misc/cronjobs/process_message_queue.pl
       on line 83:
    
      sleep 100;
    
    3. Save the file
    4. Have two terminals open
    5. On the first one, run:
       $ kshell
      k$ misc/cronjobs/process_message_queue.pl
    6. On the second one, run the same
    => SUCCESS: The second one dies telling it had to skip the run
    7. Undo your changes:
       $ git checkout misc/cronjobs/process_message_queue.pl
    8. Sign off :-D
    
    Sponsored-by: ByWater Solutions
    Signed-off-by: Liz Rea <liz@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dca43b8313bc352729b1e30c9cf83af4315e9fde
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Mar 29 14:57:22 2021 +0000

    Bug 27817: Use biblio-title include in some acquisitions pages
    
    This patch adds the use of the biblio-title include in acquisitions
    templates which get the right data from their corresponding scripts.
    
    To test, apply the patch and test these Acquisitions pages to confirm
    that titles with 245$b, 245$h, etc, show all the correct information.
    
    - Acquisitions -> Vendor -> Basket
    - Acquisitions -> Vendor -> Uncertain prices
    - Acquisitions -> Invoices -> Invoice
    - Acquisitions -> Invoices -> Invoice -> View an invoice which has an
      already-received bibliographic record.
      - Go to receipt page -> Already received.
        -- The "Pending orders" table is unmodified because I wasn't sure
           how to use the biblio-title include in an AJAX DataTable.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6744a143b87dc605d3d7b43d8ac48d4667e08d28
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Sep 19 15:12:28 2022 -0300

    Bug 30472: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 95ebfa1f2946046d12dbfc1a13e8171b890f0249
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 2 07:52:15 2022 +0000

    Bug 30755: (follow-up) Add a results hash to automatic renewals
    
    It's slightly debatable whether auto_too_soon is an error or not. I think
    it leans far enough towards error that the other patch is correct. The change, however,
    will affect notices and means we cannot count auto_too_soon anymore
    
    This patch adds a new 'results' hash to the info - this includes a count per error
    (including auto_renew i.e. success) allowing for notices to decide how to display the info.
    
    To test:
    1 - Add to Auto renew digest notice:
    [% IF results %]
    There were [% results.auto_too_soon %] items that were too soon.
    [% END %]
    2 - Check out some items to a patron that will be too soon
    3 - Check out one that is not too soon and will renew
    4 - Ensure patron has auto renew digest selected and that AutoRenewalNotices is set to follow patron preferences
    5 - Run the auto renewals cron
    6 - Confirm the notice for the patron displays 1 successful renewal, no failures, and a correct count of too_soon
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c41fab2292da13f4bf7cac0110216c4f8e4721d7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri May 20 08:08:28 2022 +0100

    Bug 30755: Remove auto_too_soon from error count
    
    This patch prevents auto_too_soon errors being counted towards auto
    renew errors.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 45d19c6c77031c2ca62234ad190066fed3fa48f0
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Fri Sep 16 14:05:15 2022 +0000

    Bug 31565: Escape datatables MySQL special characters only in LIKE queries
    
    Escaping \ yields no results when performing exact search in datatables.
    This patch adds MySQL special character escaping only to LIKE searches.
    
    To test:
    1. Add following categorycode 'TEST\CAT' by SQL
    insert into categories (categorycode,description) values ('TEST\\CAT', 'TEST\\CAT');
    2. Add a patron into TEST\CAT category
    3. Go to patron search
    4. Limit search by category TEST\CAT
    5. Observe no results
    6. Apply patch
    7. Refresh patron search page
    8. Limit search by category TEST\CAT
    9. Observe Koha redirecting you to patron you chose in step 2
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 41d0daaff8ac04d58fd44f3a35c4c7be2197a9fe
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Wed Sep 14 14:34:48 2022 +0000

    Bug 31565: Fix datatables searching escape for exact search
    
    To test:
    1. Add a new patron category with categorycode 'TEST_CAT'
    2. Add a patron to category 'TEST_CAT'
    3. Go to Patrons search view
    4. Under "Search for patron" filters, filter by category you created at step 1
    5. Click Search
    6. Observe no results
    7. Apply this patch and reload
    8. Repeat 3-5
    9. Observe expected result
    
    Double check tests from Bug 30393 still work as expected:
    
    10. Go to the cities page
    11. Add two cities:
       - 'Cordoba %'
       - 'Buenos Aires _'
       - 'London \'
    12. Use the column search on the name, alternating _, \ and % as the query
    => SUCCESS: Filtering works correctly!
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 277e19bd10a1e2f2ae39b50e25f58c9938d1a2c3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 16 17:10:41 2022 -0300

    Bug 15348: Add estimated_delivery_date to object spec
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e86b1b19e65a8e0a8986279b4a91fbdeb8acc78d
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Aug 18 19:55:17 2022 +0000

    Bug 27195: Set focus on first input when adding a new city
    
    When adding a new city, the focus/cursor should be
    in the first input field of the form: City
    
    To test:
    * Add a new city in administration > cities
      - cursur is in no field
    * Apply patch
    * Add another new city
      - cursor is now in the first input field of the form: City
    
    https://bugs.koha-community.org/show_bug.cgi?id=27193
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9be197d567c71bf1937e8e2bdd6c29955f9ce3a2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 16 16:56:44 2022 -0300

    Bug 30472: DBRev 22.06.00.048
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5252dd2065107f1512c7f3d8dd0ce489257c01e7
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Aug 24 11:37:55 2022 +0000

    Bug 30472: Make borrower_relationships.guarantor_id not null
    
    In harmony with dbrev 19.06.00.022.
    
    Test plan:
    Run dbrev.
    Run t/db_dependent/Patron/Relationships.t
    Run t/db_dependent/Koha/Patrons.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6c893f7372b6a080435bd493730530c7f275cd06
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Sep 8 03:06:59 2022 +0000

    Bug 31531: Remove unnecessary use directives on opac-memberentry.pl
    
    This patch just removes two redundant use directives in opac-memberentry.pl
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 244f68b1e0472328896b547beda049d3bbce9750
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 16 16:52:16 2022 -0300

    Bug 30025: DBRev 22.06.00.047
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7eced5a05475f2372cfcf9a8aaf702246f7dd0dd
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Aug 16 11:11:09 2022 +0000

    Bug 30025: Replace AllowManualAuthorityEditing with RequireChoosingExistingAuthority
    
    This flips the pref from an allowance to a requirement, hopefully this makes the logic here clearer
    
    Test as before, but the values for the renamed pref flipped
    
    Signed-off-by: AFHDubCoLib <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d8b15c685c74c8eb18021bb3c7d4c4ecba609569
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu May 26 16:14:40 2022 +0000

    Bug 30025: Split BiblioAddsAuthorities into two sysprefs
    
    This patch adds two new sysprefs:
    AutoLinkBiblios
    AllowManualAuthorityEditing
    
    Both inherit the setting from BiblioAddsAuhtorities which is removed
    
    To test:
    1 -Apply patches
    2 - Update database
    3 - Confirm old setting is transferred to new option
    4 - Confirm you can edit authoriteis manually if AllowManualAuthorityEditing set to allow
    5 - Confirm you cannot edit authorities manually if AllowManualAuthorityEditing set to don't allow
    6 - Confirm a new bib is linked when AutoLinkBiblios is enabled (set AllowManualAuthorityEditing to add unlinked heading)
    7 - Confirm new bib notlinked when AutoLinkBiblios is disabled
    8 - Confim new bib not linked when AutoLinkBiblios is enabled, but heading doesn't match an authority and  AutoCreateAuthorities is disabled
    9 - Confim new bib linked to new authority when AutoLinkBiblios is enabled, but heading doesn't match an authority and  AutoCreateAuthorities is enabled
    
    Signed-off-by: AFHDubCoLib <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5db2d54a0f8f9fe991cb223052a96ea7fa7ebb27
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jun 10 12:10:28 2022 +0000

    Bug 30025: DB update
    
    Signed-off-by: AFHDubCoLib <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3d0015fe6932f2fed3aba79b1fc99ecb6d1d3504
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Aug 5 08:36:50 2022 -1000

    Bug 31299: Fix duplicate output in search_for_data_inconsistencies.pl
    
    In search_for_data_inconsistencies.pl when there are several inconsistencies on same framework, the second output of items contains the first one.
    
    Looks like it is since Bug 21466
    
    Test plan using koha-testing-docker :
    1) Create 2 inconsistencies on the same item via SQL :
       update items set itemlost = 9 where itemnumber=900;
       update items set notforloan = 8 where itemnumber=900;
    2) Without patch
    3) Run ./misc/maintenance/search_for_data_inconsistencies.pl
    => You see duplicate output :
    == Wrong values linked to authorised values ==
            * The Framework *BKS* is using the authorised value's category *NOT_LOAN*, but the following items.notforloan do not have a value defined ({itemnumber => value }):
     {900 => 8}
            * The Framework *BKS* is using the authorised value's category *LOST*, but the following items.itemlost do not have a value defined ({itemnumber => value }):
     {900 => 8} {900 => 9}
    
    4) Apply patch
    5) Run ./misc/maintenance/search_for_data_inconsistencies.pl
    => Fixed :D
    == Wrong values linked to authorised values ==
            * The Framework *BKS* is using the authorised value's category *LOST*, but the following items.itemlost do not have a value defined ({itemnumber => value }):
     {900 => 9}
            * The Framework *BKS* is using the authorised value's category *NOT_LOAN*, but the following items.notforloan do not have a value defined ({itemnumber => value }):
     {900 => 8}
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d0f09eaa6412eb83ebe7e17faa550628fa7e6cab
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Sep 13 10:27:39 2022 -1000

    Bug 31558: Fix image drag and drop in TinyMCE
    
    Bug 26949 upgraded JS lib TinyMCE to 5.9.2
    
    This version has a known issue on images drag and drop :
    https://stackoverflow.com/questions/64782955/tinymce-inline-drag-and-drop-image-upload-not-working
    
    Test plan :
    1) Go to Tools > HTML customizations
    2) Create a new entry (not using text editor)
    3) Drag and drop an image
    => Without patch you see an error message from TinyMCE 'Dropped file type is not supported'
    => With patch : It works !
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d5dc514f9326c42b3fce89d229442295a039b2b1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Aug 18 17:21:31 2022 +0100

    Bug 31373: DRY - Use try/catch around _process_tt
    
    This patch reduces the repetition in the tools/letter.pl controller
    replaceing it with a try/catch block wrapping a call to
    C4::Letters::_process_tt instead.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3df1672eb382b958e8febab1d722a1fc94d5a8c6
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Aug 16 17:08:40 2022 +0100

    Bug 31373: Add INCLUDE_PATH to notice validation
    
    This is a follow-up to bug 31211. It adds the same INCLUDE_PATH
    variables as C4::Templates adds during processing to prevent false
    failures.
    
    Test plan
    1) Add an INCLUDE to any valid notice, for example:
       [% INCLUDE 'patron-title.inc' patron => patron %]
    2) Save and continue
    3) Confirm you are faced with a validation error complaining that
       the include file cannot be found
    4) Apply this patch
    5) Confirm that the reported error has dissapeared
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4b4b8b9d54b02f98cf7b1bc70dada7d501b1d424
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 16 10:59:04 2022 -0300

    Bug 15348: DBRev 22.06.00.046
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f9690267bdd5bc270f22b617ae01e83fdacecf3b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 16 10:56:40 2022 -0300

    Bug 15348: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 04319ef5a0b2462f71bf5f9e6762319b4bbf542c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 16 10:54:54 2022 -0300

    Bug 15348: (QA follow-up) DB update fixes
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d34d245f6cb305d0400da040ebdef72fa48e8ee4
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Wed Aug 17 17:54:52 2022 +0000

    Bug 15348: (follow-up) Fix pre-selected date when editing from late orders page
    
    When editing the estimated delivery date from the late orders page,
    with multiple late orders, the selected date in the edit form would
    always be the same, not matching the edited date.
    
    With this page, the edited date will match what is shown in the form.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d6b9af50a4c72ee1eb6c921ecd329169cf8ee686
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Wed Aug 17 11:31:35 2022 +0000

    Bug 15348: (follow-up) Fix sorting of estimated delivery date on basket summary page
    
    Also removes some unneded variables from the table footers that
    are used to display amount totals.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a1c71ad348547fbd28534d37405301f39724062d
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Wed Aug 17 10:03:22 2022 +0000

    Bug 15348: (follow-up) Move estimated delivery date before supplier report and fix column settings
    
    On the basket summary page the estimated delivery date column was
    moved before the supplier report column, that is only visible
    when EDIFACT has been activated.
    
    It also adds the new column to the table configuration.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1e9bb1f1ad8a99e279cab624e6852758990336f5
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Aug 2 16:57:02 2022 +1200

    Bug 15348: (follow-up) Fix filtering results on estimated delivery date
    
    Adding another clause to the SQL so that the specified estimated
    delivery date is used for filtering first, and the calculated delivery
    date is used if there is no specified estimated delivery date.
    
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit efeef8df7cb4e7285b0499a5e4bb06f88a860ffb
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Jul 26 16:49:39 2022 +1200

    Bug 15348: (follow-up) Fix modal to edit delivery date
    
    This allows you to empty the delivery date and ensures the current date
    shows
    
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fe981989ca05eb022de00478c4175bdc676d36f1
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Fri Jul 15 14:10:47 2022 +1200

    Bug 15348: (follow-up) Fix calendar widget, translateability, etc
    
    Also add functionality to edit the estimated delivery date from a closed
    basket.
    
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 897429e7130a766d215eff0c7005ed3900b1b9ed
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Jul 4 15:35:16 2022 +0000

    Bug 15348: (follow-up) Update calendar widget to flatpickr
    
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b2388ae53d67c2ecd3b025721f7f0c3ea5fa6b27
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Jul 4 15:27:05 2022 +0000

    Bug 15348: (follow-up) Fix imports in moddeliverydate.pl
    
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0a45ffba65e02aad42484845ea7c493fe9d69a2f
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Jul 4 12:41:33 2022 +0000

    Bug 15348: (follow-up) Fix export of dt_from_string
    
     FAIL   acqui/addorder.pl
       FAIL   valid
              " dt_from_string " is not exported by the Koha::DateUtils module
              Can't continue after import errors
    
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7626de7972fea8023b1cb8801215f339b1f6bfeb
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Jul 4 12:24:42 2022 +0000

    Bug 15348: (follow-up) Fix TT filters from html to uri
    
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6562ab40d449a0161bfd424a2d3766ea4cbfa226
Author: Aleisha Amohia <aleisha@catalyst.net.nz>
Date:   Fri May 7 15:02:42 2021 +1200

    Bug 15348: (follow-up) Fix breadcrumbs, title, JS error, permissions
    
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5006b69331047e1ca2de36bc44c3d20e7d30ebb9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Apr 7 16:07:09 2021 +0200

    Bug 15348: trivial code simplification
    
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6e786b5aae6b80e51f40c26926c6fba4c32d9492
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 25 12:22:56 2021 +0000

    Bug 15348: (QA follow-up) Remove superflous filters
    
    The QA script highlighted the addition of some unneeded extra TT
    filters.
    
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2a1d85fc32a8b0df446bc32e92cbc38c3190ce7e
Author: Aleisha Amohia <aleisha@catalyst.net.nz>
Date:   Wed Dec 16 18:57:42 2020 +1300

    Bug 15348: Add estimated delivery date field to individual orders
    
    This patch allows you to specify an estimated delivery date per order.
    The specified estimated delivery date is also considered when searching
    for late orders and exporting late orders. You can also edit the
    estimated delivery date from the late orders page.
    
    Test plan:
    1. Update database, rebuild schema, restart services
    2. Go to Acquisitions, search for a vendor, and create a new basket
    3. Add an order to the basket. When filling in the accounting details,
    notice the new 'estimated delivery date' field, but don't add a date.
    Save the order.
    4. Confirm no date shows in the estimated delivery date column in the
    orders table.
    5. Modify the order. Add a date in the estimated delivery date field and
    save the order.
    6. Confirm the date now shows in the orders table.
    7. Close the basket.
    8. Go to the Late Orders page.
    9. Put estimated delivery date from and to parameters in the search
    filters on the left. Ensure the from and to dates encapsulate the date
    you entered in the estimated delivery date field for the order.
    10. Click Filter and ensure the order shows.
    11. Select the checkbox next to the order. Click the Export as CSV button.
    12. Open the CSV and confirm the estimated delivery date that you
    entered shows as expected in the file.
    13. Click Edit under the estimated delivery date. Confirm the estimated
    delivery date modal pops up with the correct order line number in the
    modal header.
    14. Remove the estimated delivery date and click Save.
    15. Confirm that the estimated delivery date calculated by Koha now
    shows in the late orders table.
    16. Select the checkbox next to the order. Click the Export as CSV button.
    17. Open the CSV and confirm the calculated estimated delivery date
    shows in the CSV.
    18. Confirm tests pass: t/db_dependent/Koha/Acquisition/Order.t
    
    Sponsored-by: Bibliotheksservice-Zentrum Baden-Württemberg (BSZ)
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 88f63e01d29917e9323c57be97aaa91b9e00fd92
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue Sep 13 06:46:46 2022 +0000

    Bug 28553: (QA follow-up) default to auto renew email when cron switched used
    
    This patch defaults to using "email" rather than "sms" notices
    when AutoRenewalNotices is set to use the --send-notices cron switch
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fef29151e0dd6287f8e4e49effc9d9666bf87582
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Jul 18 12:37:48 2022 -0400

    Bug 28553: Patrons can be set to receive auto_renew notices as SMS, but Koha does not generate them
    
    Following bug 18532, one can set a patron's messaging prefs to deliver an auto-renew notice via SMS.
    However, the auto_renewals cron only knows how to generate email notices. We should not allow the selection of non-functional transport types.
    
    Test Plan:
     1 - Set pref AutoRenewalNotices - 'according to patron messaging preferences'
     2 - Set circ rule with:
        Loan period: 5 days
        No renewal before: 5
        AutoRenewal: Yes
        Renewals allowed: 5
     3 - Set SMS Send driver to Email
     4 - Find a patron and set them to receive auto renewal notices via SMS and no other transport
     5 - Provide a proivder and sms number for the patron
     6 - Checkout an item to the patron, set due date to yesterday
     7 - Run auto renewals:
        perl misc/cronjobs/automatic_renewals.pl -v --send-notices -c
     8 - Item renewed, no message sent
     9 - Check in item, checkout again due yesterday
    10 - Apply patch
    11 - Browse to Tools->notices and slips
    12 - Edit AUTO_RENEWALS and AUTO_RENEWALS_DIGEST to copy email template to sms and add a title
    13 - perl misc/cronjobs/automatic_renewals.pl -v --send-notices -c
    14 - Item renewed, confirm patron has a notice in their account
    15 - Check the digest option, check in item, checkout again as due, repeat cronjob and note digest notic
    16 - sign off
    
    https://bugs.koha-community.org/show_bug.cgi?id=30355
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4481817701f0789f407f8bdfdcaeeb49c5239e5e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 16 09:41:59 2022 +0000

    Bug 31239: (QA follow-up) Fixing ternary formatting
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 54711942f1b34fc9d94a61f42734525a03db893a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 10 11:12:06 2022 +0200

    Bug 31239: Fix incorrect AV linked to a mapped biblio column
    
    If an AV is linked to a MARC field mapped with a biblio column, the
    search_for_data_inconsistencies.pl script might explode with
    
    The method Koha::Biblioitem->title is not covered by tests!
    
    Trace begun at /kohadevbox/koha/Koha/Object.pm line 875
    Koha::Object::AUTOLOAD('Koha::Biblioitem=HASH(0x556b67fa7168)') called at misc/maintenance/search_for_data_inconsistencies.pl line 246
    
    Test plan:
    For a given framework, pick a biblio using it
    Link 245$a with an authorised value category
    Run the script
    => Notice that with this script applied you will see the warning
    => Without this patch you got the error
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eb292431401a7ed0782427412eb1208fa7716e4c
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 16 08:58:51 2022 +0000

    Bug 31154: (QA follow-up) Fix UI form builder
    
    The change in batchMod.pl is not needed when we fix the builder.
    But we could at least add a comment there!
    
    Note that passing the biblionumber of the first item does not
    make sense since we are modifying items from several biblio
    records normally. We most probably do not want this MARC
    record's itemcallnumber (via the syspref) in all our items.
    
    Test plan:
    Test batchMod with and without the Populate fields checkbox.
    Fill syspref 'itemcallnumber' with e.g. 084a.
    Check Populate, and try again.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 355ab980cc306a61e5e9e62608c5d9d1bf8e3b37
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Tue Jul 26 13:18:43 2022 +0300

    Bug 31154: Pass biblionumber to Koha::UI::Form::Builder::Item->new from batchMod.pl to prevent error 500
    
    When one tries to batch mod items and has "Use default values"
    checkbox checked on and they have value in syspref "itemcallnumber",
    Koha dies on error 500. In logs it reads:
    
    Can't call method "field" on an undefined value at
    .../Koha/Koha/UI/Form/Builder/Item.pm line 164.
    
    This happens because in batchMod.pl line 269 we don't pass
    biblionumber as parameter to Koha::UI::Form::Builder::Item->new
    and thus Koha fails to fetch biblios marc record.
    
    To test:
    1. Confirm you have/set value to syspref "itemcallnumber" e.g. 084a
    2. Find some item(s) to modify
    3. Provide barcodes of those item(s) and check checkbox "Use default values"
    4. Hit "Continue"
    => error 500 is raised
    5. Apply patch.
    6. Repeat steps 3. and 4.
    => no error is raised
    
    Sponsored-by: Koha-Suomi Oy
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f5b32eb5096858c38cb4104ed6e75f4c7fb3ad5a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Sep 13 11:09:23 2022 +0100

    Bug 31526: Follow-up for bug 29697
    
    There was a typo in bug 29697 which lead to a code reference error.
    
    Test plan
    1) Export a record with ISBN from your catalog (Save as MARC)
    2) Stage it using the ISBN matching rule (make sure it matched)
    3) Manage staged import and click on the Diff link
    
    Prior to this patch an error would be thrown, after the patch you should
    now get the diff view as expected again.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b56a874a16d1dea011dd2c937cd9f424a5e48953
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 16 10:25:07 2022 -0300

    Bug 29144: DBRev 22.06.00.045
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fe9a0e3108dc6db02c3e0739b69b1bf656773901
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 16 10:21:10 2022 -0300

    Bug 29144: (QA follow-up) Make update idempotent
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 504c4f717b003161b818d4781957b68403856cce
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 16 10:10:49 2022 -0300

    Bug 29144: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4ab5714097f2432e0520c9ce6f61182430359bcc
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Aug 16 14:19:46 2022 +0000

    Bug 29144: (follow-up) Fix rebase issue related to bug 31313
    
    Fixing display of holding branch name.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c3b9e5e8417085a9ae3cb1872c6d97982ea95876
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Aug 4 09:33:13 2022 +0000

    Bug 29144: Copy and remove branches.opac_info (dbrev)
    
    Test plan:
    Run dbrev.
    Check api URL: /api/v1/public/libraries (with/without suffix /[branch_code].
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2ed25b744215df445a3debbae24551bc69c65e34
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Aug 4 08:16:47 2022 +0000

    Bug 29144: Remove opac_info from a few tests
    
    Test plan:
    Run t/db_dependent/Circulation/GetHardDueDate.t
    Run t/db_dependent/Circulation/OfflineOperation.t
    Run t/db_dependent/RotatingCollections.t
    Run t/db_dependent/api/v1/libraries.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1a1529d20572c8eb7e65ad7bbd41f688d5f86f07
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Aug 3 14:59:49 2022 +0000

    Bug 29144: Adjust libraries form
    
    Test plan:
    [1] Go to Administration / libraries.
    [2] Check list view.
    [3] Check view on individual library with/without opac info.
    [4] Edit individual library with/without opac info.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f7c7051b9fcb503d98b54e4c5bc1a4813ffa1ef0
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Aug 3 12:13:20 2022 +0000

    Bug 29144: Show html opac_info on opac-detail page
    
    Note: This patch disables the API call (which is not really needed),
    and still needs attention in a following patch.
    
    Test plan:
    Add opac_info for two libraries and a branchurl for one of the two.
    Select a biblio with an item having these two libraries as either
    home or holding branch.
    Toggle OpacLocationBranchToDisplay and check items table on opac
    detail. Click on the library name.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3f6d3b9af641e7212d7999f2cce15123fcb3c65d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Aug 4 06:02:56 2022 +0000

    Bug 29144: Use ->opac_info in opac-library template
    
    The opac_info call uses find_best_match which does not result in
    the All libaries plus specific library response of
    AdditionalContents.get.
    
    Test plan:
    Revisit individual library page on OPAC.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 68a900132e35384ef6447d99b9bb186b16ab2445
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Aug 2 11:54:59 2022 +0000

    Bug 29144: Add $contents->find_best_match, $library->opac_info
    
    Test plan:
    Run t/db_dependent/Koha/AdditionalContents.t
    Run t/db_dependent/Koha/Library.t
    
    Note: You may need to set ListOwnershipUponPatronDeletion to
    delete to fix a pending issue in patron->delete with lists.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ecb61b1aef08dce21545467e7373a1471e2c5eb8
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Aug 2 11:57:18 2022 +0000

    Bug 29144: (follow-up) Terminology: rename to OpacLibraryInfo
    
    git grep -l OpacBranchInfo | xargs sed -i -e's/OpacBranchInfo/OpacLibraryInfo/g'
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8dda2f45fd0fdb348578544af346269920c5abfa
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Aug 1 13:58:50 2022 +0000

    Bug 29144: Add OpacBranchInfo as HTML option, show it on opac
    
    Test plan:
    Add a few OpacBranchInfo for libraries.
    Verify that opac-library shows the correct info per library.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 05b4c2063d1f8c359f09b86b04fb447821a9e6a5
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Aug 1 12:30:30 2022 +0000

    Bug 29144: First sort the HTML options
    
    Test plan:
    Check result while adding a new HTML customization entry.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c4e8f0af70344f263f64eccccf8817ddc18f8585
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Thu Sep 15 18:06:53 2022 +0000

    Bug 31513: (QA follow-up) Keep price formatting on non-editable text fields
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9d02c71166258425f58dc020b9e7a9b95f895bb9
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Sep 11 16:50:56 2022 +0200

    Bug 31513: Remove price formatting form data- attributes
    
    We cannot use data formatted with a decimal comma for
    calculations. So we need to make sure that the data- attributes
    passed to the modals are in 'database format' with decimal .
    
    This will fix the NaN errors on the forms, but might also
    negatively effect formatting in some spots.
    Formatting should be fixed separately as this is for sure the
    right first step, but we need to put in more work for displays.
    
    To test:
    * Set CurrencyFormat system preference to FR
    * Go to any patron account > accounting tab
    * Create a credit
    * On Transactions tab: Payout amount at bottom = Verify NaN in input
    * On Transactions tab: Issue payout on the credit line = Verify NaN in input
    * Create a manual debit and pay it
    * On Transactions tab: Issue refund = Verify NaN in input
    * Apply patch
    * Repeat test plan
    * Now all input fields should be set with the correct amounts
    
    https://bugs.koha-community.org/show_bug.cgi?id=31486
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c4b37e91134aa2c6fdcb4d7df732e47d26842a6f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Sep 13 21:03:20 2022 -0300

    Bug 26247: (follow-up) Fix permissions
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1183ae696104a339cd0c351aea99c539e1e90cc4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Sep 13 13:33:17 2022 -0300

    Bug 26247: DBRev 22.06.00.044
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4ccb34513a11294819a0d5741b8aaa5984aceda0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Sep 12 17:45:52 2022 -0300

    Bug 20058: DBRev 22.06.00.043
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 14cfdfd727cea3dfbc23c2c17c686af5f5ba15ba
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Jul 25 10:56:08 2022 -0400

    Bug 31236: Add ability to send custom item fields via SIP using Template Toolkit
    
    Koha has been able to send arbitrary item fields via the "item_field" parameter in the config. We have partners that need the ability to created custom item fields from templates, as the item_fields feature cannot accomplish what they need. We need to add a templated custom field feature for items, similar to what we have for patrons.
    
    Test Plan:
    1) Apply this patch
    2) Choose a SIP login to use, edit that account and add the following
       *inside* the login section:
       <custom_item_field field="IN" template="[% item.itemnumber %]" />
    3) Restart SIP
    4) Run an item information query
    5) Note the itemnumber is sent in the IN field!
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Edit: fixed tests count

commit 1e9f6e61d59cd7e8815661346bc1d0a3d46300c2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 2 07:00:15 2022 +0000

    Bug 20058: (QA follow-up) Simplify test code
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 845978d45cd2b9cfa8d23e2ac1d1e3008d2b33fd
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 2 06:54:00 2022 +0000

    Bug 20058: (QA follow-up) Add exec flag to install file
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 66d2696b3e8550e6a4e5d7b30387edba1aa7a49b
Author: David Gustafsson <glasklas@gmail.com>
Date:   Mon Sep 27 16:48:25 2021 +0200

    Bug 20058: Add tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e95e18b21be24cd8df990960acf33b4873704a3c
Author: Stefan Berndtsson <stefan.berndtsson@gmail.com>
Date:   Mon Jan 15 14:20:06 2018 +0100

    Bug 20058: Add option to send permanent_location as AQ in SIP response
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 481b3da65b303fca6a026780420748104581e6e0
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Mon Jun 28 11:38:00 2021 +0100

    Bug 28634: Fix notice borrowernumber
    
    This commit fixes the bug described in this bug.
    
    - When a partner is selected, pass their borrowernumber rather than email to the
    receiving script
    - Iterate all selected partners, send a notice to each, using the
    recipient's borrowernumber in the notice, the recipient's email is
    derived from their patron object
    
    TEST PLAN:
    1. DO NOT apply the patch.
    2. Follow the following setup:
    
    *** Setup start ***
    - Create a report using the following SQL in order to verify that
    notices are being generated:
    SELECT borrowernumber, subject, content, message_transport_type,
    to_address, from_address FROM message_queue WHERE letter_code LIKE
    'ILL%' ORDER BY message_id DESC
    
    - Create two "partners". These are patrons that belong to a
    patron category that has a code that matches the <partner_code> value in
    your koha-conf.xml (default is ILLLIBS). Patrons in this category must
    have a primary email defined. Patrons defined in this way are offered as
    request partners within the ILL interface.
    
    - Go to "Koha administration", search for "ILLModule" syspref, ensure it
    is set to "Enable"
    - Go to "Koha administration", search for "IllLog" syspref, ensure it is
    set to "Log"
    
    BRANCH CONFIG
    - Go to "Koha administration" > "Libraries"
    - Choose a library and "Edit" it
    - Ensure the "Email" field for the library is populated
    
    SENDING REQUEST TO PARTNERS
    - Go to the "Manage ILL request" screen for a request, create a request
    if one does not exist
    - Choose "Place request with partners"
    - Select both partners that were defined earlier, then click
    "Send email"
    - Run the report created earlier
    => TEST: Observe that a notice was created and the borrowernumber is
    that of the request creator, not the recipient
    *** Setup end ***
    
    3. Apply the patch
    a. Go to the "Manage ILL request" screen for a request, create a request
    if one does not exist
    b. Choose "Place request with partners"
    c. Select both partners that were defined earlier, then click
    "Send email"
    d. Run the report created earlier
    => TEST: Observe that once notice per partner is created, the
    borrowernumber column for each notice contains the borrower number of
    the recipient, not the request creator
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 118a7e689163b532ae398882e9cf0b3c00c73c6f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Sep 12 17:09:24 2022 +0100

    Bug 26247: (QA follow-up) Merge DB Updates
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8fae3c2069a8d81c458d9f755fbbd442f42d009e
Author: Florian Bontemps <florian.bontemps@biblibre.com>
Date:   Tue Jun 28 13:42:46 2022 +0000

    Bug 26247: Adding 2 Sysprefs for Search Terms
    
    This patch adds two system preferences options : 'RetainCatalogSearchTerms' and 'RetainPatronsSearchTerms'. If enabled, search terms will be retained between searches made from, respectively, the Search Catalog header and the Checkout or Search Patrons headers. If disabled, the searchbars will clear out between page loads.
    
    Attention, this is an alternate solution from the previous patches, ONLY apply this patch when testing and not the previous ones.Changed the syspref wording as well.
    
    To test:
    1 - From the staff client, search some terms using the Check out header search bar.
    2 - Confirm search terms are retained.
    3 - Do Step 1-2 twice again, this time using the Search patrons and Search the catalog.
    4 - Apply patch (again, only this one), update database.
    5 - In the system preferences, look for RetainCatalogSearchTerms and set it to 'don't retain'.
    6 - Use the checkout head search bar again, confirm that search terms aren't retained after page load.
    7 - Do Step 5-6 once again, this time with the RetainPatronsSearchTerms and the Search Patrons and Search the catalog headers.
    8 - Search boxes should be cleared.
    
    Thanks-to: Fridolin Somers and Nick Clemens for the bases I built on.
    Signed-off-by: Florian Bontemps <florian.bontemps@biblibre.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e4455a589372e3205f9a7456478ad4585c90bedb
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Nov 3 16:53:47 2021 +0000

    Bug 29409: Check for data that violates a constraint to avoid update problems
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 012e5bff1c79d8a2cc580a43c832ace5e51bec79
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Nov 3 16:51:09 2021 +0000

    Bug 29409: Check for existence of constraint before deletion
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit af81aaa8a615afff86d32b23c252b561d7e60d78
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Mon Sep 12 16:24:31 2022 +0000

    Bug 30921: (QA follow-up) Remove unnecessary if
    
    The statement is already inside an if block with the same condition.
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit daf2e4b3c236d981871bd349ebe19f3746f799eb
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jun 7 15:24:23 2022 +0100

    Bug 30921: Replace C4::XSLT::transformMARCXML4XSLT with RecordProcessor
    
    This patch removes the last remaining uses of transformMARCXML4XSLT and
    replaced them with the equivilent RecordProcessor usage.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c757abd675c538a55c93bf3e337e16c0911d06e7
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Fri Sep 2 18:51:25 2022 +0000

    Bug 31516: Add error message for viewing enrollments for a non-existent club
    
    To test:
     1) Go to non-existent club's enrollment page, e.g.
        http://localhost:8081/cgi-bin/koha/clubs/club-enrollments.pl?id=1010101001000
     2) Notice the not fully filled header text and empty table
     3) Apply patch and revisit the page to see the proper error message given
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a93d6fa8530aa2b92d7b443e1361e4428c1c4f1b
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Aug 29 21:48:01 2022 +0000

    Bug 31486: Redirect to proper page after message deletion
    
    To test:
    1. Go to a patron account and create some messages
    2. Try deleting some from both the patron details page and the patron checkout page.
    3. Notice that is you are on the patron checkout page and delete a message you are then redirected to the patron details page.
    4. Apply patch
    5. Try deleting messages from both pages and confirm you are redirected back to that same page and the message is properly deleted.
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 62fa4937ceb633b2e4548b6000a90e2c02b58620
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 9 07:35:53 2022 +0000

    Bug 31535: Fix warning - uninitialized value for location
    
    In Koha/Item.pm line 169 (line number has been changed)
    
    Test plan:
    You need location to be NULL when storing.
    Otherwise follow this reasoning:
      What happens when location is undefined? It is autovivified to
      empty string in the string compare (ne), so not equal to CART
      and PROC. The subcondition is true before and after this patch.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8ddec9121143038a7da6735254f9447d24e830a8
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Sep 8 14:13:36 2022 +0000

    Bug 31535: Fix warning - uninitialized value in string ne (MARCdetail.pl)
    
    Spotted at line 183 (older Koha version).
    
    Test plan:
    You need a NULL in the tab column of marc_subfield_structure. Hit this
    page and check the logs.
    This might convince you easier:
      my $tabloop=0; my $x; print "Empty string - True\n" if ( $x // q{} ) ne $tabloop;
      print "Zero - True\n" if ( $x // '0' ) ne $tabloop;
    You should only see: Empty string - True proving that defaulting to '0'
    would be a game changer.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7d32333df31a655acbb09057f2799ed0f81ebb6f
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Sep 8 14:03:51 2022 +0000

    Bug 31535: Fix warning - uninitialized value $mode in string ne (addbiblio.pl)
    
    Line number varies across versions. (Should be L887 now.)
    Resolves:
        Use of uninitialized value $mode in string ne at /usr/share/koha/cataloguing/addbiblio.pl line 845.
    
    No test plan here. This is trivial. Read the patch.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2a3ba5f8253c6bafef17caf03645d70a90a96dea
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Dec 8 13:44:38 2021 +0000

    Bug 29658: Fix crash on cancelling cancelled order
    
    Found this crash in our 20.11 logs:
    Cannot insert order: Mandatory parameter biblionumber is missing at /usr/share/koha/acqui/cancelorder.pl line 60.
     at /usr/share/perl/5.28/Carp.pm line 289
            Carp::croak('Cannot insert order: Mandatory parameter biblionumber is missing') called at /usr/share/koha/Koha/Acquisition/Order.pm line 79
            Koha::Acquisition::Order::store('Koha::Acquisition::Order=HASH(0x55f3760e2860)') called at /usr/share/koha/Koha/Acquisition/Order.pm line 189
            Koha::Acquisition::Order::cancel('Koha::Acquisition::Order=HASH(0x55f3760e2860)', 'HASH(0x55f375a17ec0)') called at /usr/share/koha/acqui/cancelorder.pl line 60
    
    Not sure how to reproduce this one as it happened. But might be related to repeated clicking, backspacing etc.
    
    Test plan:
    Create a new basket and order.
    Open this same basket in two browser tabs.
    Cancel the order line (delete catalog record) in tab 1.
    Go to second tab, try again.
    Without this patch, it will crash. With this patch, an error message.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 97461b7029e1675a5dd08585367c053c81cfa2a8
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Sep 1 18:10:50 2022 +0000

    Bug 31439: Use pseudo element for bullet in results.tt
    
    To test:
    1. Apply patch and regenerate CSS. See:
      https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client
    2. Go to the staff results page and inscept the result_item_details
       class.
    3. It should contain a ::before pseudo element that is the bullet point.
    4. This is easier to remove of alter with the following CSS in
       IntraNetUSerCSS:
    
    .result_item_details::before {
            content: " " !important;
    }
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 613554edc6c308f2bd97e17ceae13b7069b9fcd9
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Sep 7 10:46:18 2022 -1000

    Bug 31530: Remove HTML tags in TT comments in patron-search.inc
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    To test:
    1) Without patch, search for patron-search.inc in misc/translator/po/xx-XX-staff-prog.po
    --> There should be strings with pound signs such as "%%] %s [%%# - branch: "
    2) Apply patch
    3) Update translation files `translate update xx-XX`
    4) Search again for patron-search.inc in
    misc/translator/po/xx-XX-staff-prog.po
    --> The problematic strings are not there anymore
    5) In the staff interface, go to Patrons, the search box and search
    function should be unchanged
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cffd36bcb47439d80401e52091f0d2808bc52cb6
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Aug 18 14:32:46 2022 +0000

    Bug 31250: (QA follow-up) The future will be easier
    
    As requested by Jonathan, we need more flexibility ;)
    Here it comes.
    
    Test plan:
    Run t/CookieManager.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cf8e560e37c24b0cc7fd3e1aeb286de5e370ea37
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jul 28 12:52:56 2022 +0000

    Bug 31250: Add catalogue_editor_ cookie to koha-conf deny list
    
    Test plan:
    Add this change to your koha-conf.xml.
    Flush, restart.
    Test if the cookie is kept now in the interface.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cb036faf2c534a14708b517cea40d98fc6e344c2
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jul 28 12:43:20 2022 +0000

    Bug 31250: Deny clearing cookies with numeric suffix
    
    This change allows us to add catalogue_editor_ to the deny list
    in koha-conf.xml and keep cookies like catalogue_editor_123.
    
    Test plan:
    Run t/CookieManager.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    To test:
    1 - Sign in to staff client
    2 - Search for records and edit one
    3 - Switch to advanced editor
    4 - View cookies (F12/developer panel/storage tab)
    5 - Note cookie like 'catalogue_editor_##' with value 'advanced'
    6 - Log out
    7 - note cookie value deleted
    8 - Log in and search/edit a record
    9 - Basic editor loads
    10 - Apply patch
    11 - Add line to koha-conf as described in second patch
    12 - Restart all
    13 - Switch to advanced editor
    14 - Cookie value updated
    15 - Logout
    16 - Cookie value remains
    17 - Log in and search/edit
    18 - Confirm advanced editor loads
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3affdad4c2e478e9df0ce06306daacc27925f0ce
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Thu Sep 8 11:54:19 2022 -0400

    Bug 31537: Elasticsearch - index mapping for 003 control-number-identifier is twice in mappings.yaml
    
    This patch removes one of the two mappings for the 003 field to the
    control-number-identifier index (for MARC21).
    
    To test:
    1) Apply patch
    2) reindex with mappings reset
    3) try to search for cni:code (for example cni:OSt)
    --> it should return the desired results
    4) try to search for control-number-identifier:code (for example
    control-number-identifier:OSt)
    --> it should return the desired results
    5) Optionally, try the test plan in Bug 11175 to make sure it still
    works
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ca6c132bace1b8e3ef770fb376e0101c8bfd7cd8
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Sep 8 20:17:23 2022 -1000

    Bug 31542: Home page links correct font-family
    
    In koha-tmpl/intranet-tmpl/prog/css/mainpage.css the rule of
    font-family for big links is not complete :
      font-family: verdana, arial;
    It is missing sans-serif in case computer has not those fonts.
    On my computer I dont have them so I see a serif font.
    
    We can remove this rule, inherited rule is serif fonts.
    
    Test plan :
    1) Use a computer without Arial nor Verdana fonts (basically a Linux)
    2) Look at home page big links : Circulation, Patrons ...
       => Without patch they have serif font
       => With patch they have sans-serif font
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 72df307157a274d534fec19ff46c679c507b6e8c
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Fri Sep 9 18:01:18 2022 -0400

    Bug 31545: ComponentSortField description is incorrect
    
    This patch corrects the description of the ComponentSortField system
    preference, as it affects both the staff interface and the OPAC.
    
    To test:
    1) Apply patch
    2) Go to Administration > Global system preferences
    3) Search for ComponentSortField
    4) Read the description, make sure there are no errors
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 223d9d3a99903cff3d8a3078e6921da79099375c
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Thu Sep 1 19:45:25 2022 +0000

    Bug 31455: (QA follow-up) Make table creation O(N)
    
    We can insert the indices before the main loop to a hash,
    this way we don't have to look up during each loop iteration
    the index from an array which in the worst case might take O(N)
    thus making the total time complexity O(N^2).
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5c2b2ac09a0cabbab9333bc0cab90cf1880de17f
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Sep 1 16:55:14 2022 +0000

    Bug 31455: Make batchMod sort by order scanned
    
    To test:
    1. In batch item deletion and batch item modification add some
       barcodes.
    2. Notice they are being sorted by item number, not in the order
       scanned.
    3. Appply patch and restart services.
    4. Try scanning items again in both batch item deletion and batch item
       modification.
    5. The found barcodes should now sort by order scanned.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f60a9c50dca74bf68510f53e144b62f12175b3c4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Sep 12 15:28:08 2022 -0300

    Bug 27981: (QA follow-up) GetMarcBiblio was removed from codebase
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b2cce0d9f5578319cd8dde8b6002234e7f7f682b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Sep 12 15:21:38 2022 -0300

    Bug 27981: DBRev 22.06.00.042
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8de6e538807ab26650c2d31501341c440a43d4dc
Author: Andrew Nugged <nugged@gmail.com>
Date:   Mon Aug 15 01:58:29 2022 +0300

    Bug 27981: (QA follow-up) Unify JavaScript to false/true from 0/1/""
    
    Make remove_control_num var and JS KohaBackend.GetRecord calls to have
    only false/true instead of mixed 0,1, and "" in different places.
    
    Signed-off-by: Andrew Nugged <nugged@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ab358f06dacb1233ec664ee98994963ee2c3fe38
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jun 13 12:22:37 2022 +0000

    Bug 27981: (follow-up) Fix tests
    
    Signed-off-by: Andrew Nugged <nugged@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c19326f35126c67c1c513313c1867e64c432e59e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue May 3 13:44:34 2022 +0000

    Bug 27981: (follow-up) Correct variable
    
    Signed-off-by: Andrew Nugged <nugged@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit efbf8df4f87bb4ad637443a1a880ec4e3d5a949b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Aug 31 12:59:56 2021 +0000

    Bug 27981: Adjust imported records, svc/import_bibs, records from Z3950
    
    Signed-off-by: Thomas Klausner <domm@plix.at>
    
    Signed-off-by: Andrew Nugged <nugged@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 62b2fc31bdaaf10a042762a92c29be5104292231
Author: Nuño López Ansótegui <nunyo@masmedios.com>
Date:   Wed Jun 19 14:35:41 2013 +0200

    Bug 27981: Add option to automatically set 001 to the biblionumber
    
    This patch adds a new system preference:
    autoControlNumber
    
    The option "biblionumber" will set field 001 to the biblionumber when you create a new record
    or edit an existing record and clear the 001 field.
    
    If a value is present in 001 when saving the record it will be preserved.
    
    If set to 'OFF' the 001 field wil not be touched
    
    When duplicating a record the 001 will be removed if autoControlNumber is set
    
    To test:
     1 - Apply patches and updatedatabase
     2 - Create a new record with no 001 field
     3 - Save and view the MAC, confirm there is no 001
     4 - Set the system preference to 'biblionumber'
     5 - Edit the record you created previously
     6 - Note the 001 is prepopulated with the biblionumber
     7 - Delete the field
     8 - Save the record
     9 - View the MARC, the 001 is filled with biblionumber
    10 - Edit the record
    11 - Set the 001 to a different value "Not the biblionumber"
    12 - Save
    13 - View the marc and confirm the value you entered is retained
    14 - Edit a record with an existing 001 that is not the biblionumber
    15 - Save and confirm 001 is not updated
    
    To test duplication:
    1 - Edit a record as duplicate when using the advanced editor
    2 - Confirm the 001 does not load, but record saves correctly
    3 - Edit the record
    4 - Switch to 'basic editor'
    5 - Save, then view record
    6 - Edit as duplicate in basic editor
    7 - Confirm the 001 is removed
    8 - Confirm the 001 is added on save
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Thomas Klausner <domm@plix.at>
    
    Signed-off-by: Andrew Nugged <nugged@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit df597c1aca8cb8e480344bce641be596c64c2603
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jun 24 06:20:23 2021 +0000

    Bug 27981: DB update
    
    Signed-off-by: Thomas Klausner <domm@plix.at>
    
    Signed-off-by: Andrew Nugged <nugged@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ea3795aa73f4b04a0e1ae673d470434b5ded1ca3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Sep 12 08:39:03 2022 -0300

    Bug 30483: DBRev 22.06.00.041
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2245c5fddfbbc93518986aaf016f0e1e774325ab
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Sep 12 08:35:37 2022 -0300

    Bug 30483: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1f44891fd835080133fa1a73634ced0e68b96892
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Apr 7 12:51:42 2022 +0000

    Bug 30483: Make issues.borrowernumber and itemnumber NOT NULL
    
    Note: This change does NOT apply to old_issues, where constraints
    may result in nullifying these columns.
    
    Test plan:
    Run dbrev.
    Try checkout, checkin.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7ffd3fd86d6c69a7adbe1d34704f30bc86245916
Author: Isobel Graham <isobel.graham09@gmail.com>
Date:   Thu Sep 1 09:10:26 2022 +0100

    Bug 31403: Enable CircSidebar by default on new installs
    
    This patch updates sysprefs.sql to enable the CircSidebar preference by
    default on new installs.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e6ae63e6316a5b01607c74b722829851af1167d5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 6 12:48:23 2021 +0000

    Bug 29184: Fix warn about undefined replacecost
    
    This patch simply sets the cost to 0 if undefined
    
    To test:
    1 - Create a new item with no replacement cost set
    2 - Check the item out to a patron
    3 - Mark the item lost
    4 - Note in plack-intranet-error.log:
        [2021/10/06 12:43:26] [WARN] Use of uninitialized value $replacementprice in numeric gt (>) at /kohadevbox/koha/C4/Accounts.pm line 114.
    5 - Apply patch
    6 - Repeat
    7 - No warn
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit df2ebba9c854e9c8370ce7e9e47491c1cb495ba6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Sep 8 10:46:32 2022 -0700

    Bug 30462: (QA follow-up) Tab name change
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e9ac367a052d1a3669f7077f710c809ab75b20b0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 13 11:34:21 2022 +0200

    Bug 30462: Fix display of the complete jobs
    
    We want to display the jobs terminated in the last hour, not today.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e0363127a4469163b3c8461032be13b7e43d0d65
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 13 11:34:08 2022 +0200

    Bug 30462: Remove 'Ended' column for current jobs
    
    This column will always be empty
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit af965277f819b758437fd3540569d185284e4315
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jun 10 15:35:47 2022 +0100

    Bug 30462: (follow-up) Limit completed to 60 minutes
    
    This follow-up reduces the completed jobs list to only those jobs
    completed within the last 60 minutes.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 52e5bc10e1ae0baa7bea9b7511978eda5fd17825
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jun 7 11:08:32 2022 +0100

    Bug 30462: Separate Queued and Complete jobs
    
    This patch updates the background jobs management page to display
    queued and completed jobs in their own tabs on the page.
    
    JD Amended patch:
    Fix QA failures:
     FAIL   koha-tmpl/intranet-tmpl/prog/en/modules/admin/background_jobs.tt
       FAIL   forbidden patterns
                    forbidden pattern: trailing space char (line 158)
                    forbidden pattern: trailing space char (line 256)
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b89b1d6c3dd0024eab217b81dbfe879f6b14827c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Sep 7 17:50:18 2022 -0700

    Bug 30619: DBRev 22.06.00.040
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 12524600d52bce8decef602a6c65514f24c1483a
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Aug 19 15:20:33 2022 +0000

    Bug 30619: (QA follow-up) Add exec flag to bug_30619.pl
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e09654da55a4541e0e07c1ff77b9c1ee9a44ec25
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jul 1 10:02:38 2022 +0100

    Bug 30619: Add sample email notice
    
    This patch adds a default same email type notice for the point of sale
    receipt.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b97ff5d7461e529b7a4e980ce0f2fe41cf6b0288
Author: Isobel Graham <isobel.graham09@gmail.com>
Date:   Thu Jun 30 16:32:26 2022 +0100

    Bug 30619: Add email receipt to POS
    
    This patch adds the ability to use email receipts with the point of sale
    module.
    
    To test:
    1) Configure your Koha to enable the point of sale system.
    2) Add an email template to the 'Point of sale > RECEIPT' notice.
    3) Add some charges on point of sale and pay for them.
    3a) You should now see a new 'Email receipt' button next to the 'Print
    receipt' option.
    3b) Clicking the button will display a modal to enter the anonymous
    users email address
    3c) Enter an email address and confirm to send the email
    
    Sponsored-by: Martin Renvoize <martin.renvoize@gmail.com>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e99e3a95505ccd806bd44e11448a317dfb217e1a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Sep 7 08:49:14 2022 -0700

    Bug 31396: Fix incorrect attribute access in opac-detail.pl
    
    To test:
    1. Have an item with a callnumber defined
    2. Have OPACShelfBrowser enabled
    3. Open the record detailed view in the OPAC
    4. Click on 'Browse shelf'
    => FAIL: It explodes
    5. Apply this patch
    6. Repeat 4
    => SUCCESS: It works!
    7. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 14f52725d362623bd2efc772356f0bc00926eeca
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Sep 7 14:04:41 2022 -0700

    Bug 31351: (QA follow-up) Trivial string fix
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 99b15ee5df0e3c91f74dbb05a6b5424297caf62b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Sep 7 13:51:07 2022 +0000

    Bug 31351: (QA follow-up) Extend the encode/decode test
    
    Adding some Unicode stuff.
    And missing txn couple.
    
    Test plan:
    Run t/db_dependent/Koha/BackgroundJob.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 727193deade2795db350b84bec0ca2e28163124a
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Sep 7 12:29:52 2022 +0000

    Bug 31351: (QA follow-up) Adjust tests accordingly
    
    Test plan:
    Run t/db_dependent/Koha/BackgroundJob.t
    Run t/db_dependent/Koha/BackgroundJobs.t
    Prove t/db_dependent/Koha/BackgroundJobs
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 202db89f83bdc9b6a72ebaa90f00898698856ee8
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Sep 7 12:05:17 2022 +0000

    Bug 31351: (QA follow-up) Use $self->json in Background modules
    
    Making the disabling utf8 flag explicit instead of depending on
    the default of the CPAN module.
    
    Incorporating the change in background_jobs_worker too.
    
    Test plan:
    See next patches when we look at unit tests.
    Restart koha-worker.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d95805c6aacc28490c17b42d22277e966f1292c1
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Tue Sep 6 22:32:11 2022 +0300

    Bug 31351: Koha::BackgroundJob: Let database connection object handle utf8 transcoding
    
    Our database connections have been set up so that they will
    automatically convert perl encoded strings to utf8 encoded strings
    when sending data to database tables and decode the utf8 encoded
    strings from the tables back to internal perl strings. As we can see
    from a call in Koha/BackgroundJob.pm we are encoding the perl internal
    string to utf8 and then decoding it back to perl internal string:
    
    my $data_dump = decode_json encode_utf8 $self->data;
    
    We can skip this unnecessary encode<->decode step (as the database
    object has done the decoding for us) by simply calling the
    JSON->new->decode() method which doesn't perform any string decoding.
    
    Furthermore, the original code was buggy and didn't always remember to
    encode the unencoded strings, in Koha::BackgroundJob::process we can
    see
    
    my $context = decode_json($self->context);
    
    is missing the encode step. Now after this change encoding before
    decoding is not necessary as we are using the methods from the JSON
    module that do not perform any transcoding.
    
    Note to those concerned whether the old data in the database is
    compatible with this new code:
     Luckily our database connection object seems to be smart and
     didn't utf8 encode the utf8 returned data from the old encode_json()
     calls (probably checks the utf8 flag for the string (Encode::is_utf8($str))).
    
    To test whether this fixes the original bug reported of not being able
    to schedule background jobs with koha user having non-ASCII letters in
    their surname:
     1) Change your staff users surname/lastname to "ääää"
     2) Log out and back in.
     3) Go to a biblio record detail page and click "Select all" in the
     items table
     4) Click Delete selected items and proceed with the deletion
     5) Notice the batch item deletion job has failed status
     6) Apply patch and repeat but this time the deletion job should finish.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c5810c360544de96bf3fb2000c135836b6e2ee10
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Sep 2 10:27:39 2022 -0400

    Bug 31401: (QA follow-up) Remove Koha.ArePluginsEnabled, it is no longer needed
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aa90b60ea2979279a5e134eb9cbc7cb3d6075417
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Aug 18 21:26:54 2022 +0000

    Bug 31401: Update administration sidebar to match entries on administration start page
    
    This makes sure that all entries on the administration start page
    have a matching entry in the administration sidebar that shows
    on the left side if you are on any of the administration sub pages.
    
    Changes made:
    * Rename 'Classification sources' to 'Classification configuration'
    * Make Plugins entry show and appear in correct spot
      This relied on the variable plugins_enabled that wasn't available
      in all the different templates. I therefore moved it to Auth.pm
      and cleaned up the code for the admin start page.
    * Move 'MARC overlay rules' and rename to 'Record overlay rules'
    
    To test:
    * Make sure plugins are enabled and visible on admin start page
    * Compare admin start page and sidebar
      * Sequence should be the same
      * All entries should appear on both pages
      * Naming should be the same
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cc66a51e0730bc73c0e8ecfe970b0c52d63d3d62
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 19 09:59:24 2022 +0000

    Bug 26626: (follow-up) Be consistent with icon and accesskeys
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e62b8bde068dcac607f155d8267c2bc41cd4f023
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Aug 4 17:06:07 2021 +0000

    Bug 26626: (follow-up) Update icon selection
    
    This patch changes the "Ignore" button to use an X icon and the "Cancel"
    button to use a "Trash" icon.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5e8da261957e98c5a56e37a910adcb943c8cf67f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Aug 2 12:26:29 2021 +0000

    Bug 26626: Add 'Ignore' option to confirmed holds modal
    
    This patch adds 'Ignore' to the 'Hold already waiting' modal
    
    To test:
    To recreate:
     1 - Place a hold for pickup at library A
     2 - Checkin the item at Library A
     3 - Note the modal has 'Ignore' option
     4 - Click it, nothing happens
     5 - Check in the item again, same modal
     6 - Click 'Confirm'
     7 - Check in the item again
     8 - Now 'Ignore' is replaced by 'Cancel'
     9 - Click 'Confirm' to dismiss modal
    10 - Apply patch
    11 - Check the item in again
    12 - Note 'Ignore' button before 'Cancel' button with '-' icon
    13 - Go to biblio holds page
    14 - Revert waiting status
    15 - Check item in again
    16 - Note ignore now has '-' (minus) icon
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dee864c1edff70f58dfaffcffa102e0663400425
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jul 12 13:46:55 2022 +0000

    Bug 31023: Quote authtypecode in FindDuplicateAuthorities
    
    To test:
    0 - Have Koha using Elasticsearch
    1 - Set  QueryRegexEscapeOptions to 'unescape escaped'
    2 - Attempt to add a new 'GENRE/FORM' authority record
    3 - On save you get a 500 error
    Unable to understand your search query, please rephrase and try again.
     at /kohadevbox/koha/Koha/SearchEngine/Elasticsearch/Search.pm line 102
    4 - Apply patch, restart all
    5 - Attempt to add a new 'GENRE/FORM' authority record
    6 - Success!
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit df184560a5de428ed6eaaff437cb5dd450f45726
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jul 12 13:46:27 2022 +0000

    Bug 31023: Unit tests
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e36e6c55a7854b7f6e5f7c9d90f57f9b5e5c0f0a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 2 06:39:39 2022 +0000

    Bug 28290: (follow-up) Unit test
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eded6edacc5e3bf8dd0be21ed05842c3b78aadce
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue May 4 18:29:05 2021 +0000

    Bug 28290: Don't send subfields to 'as_string' if none to send
    
    This fixes an error where we send a blank string to
    Marc::Field->as_string
    
    The subroutine fails as the regex is marked as incomplete as there is
    nothing between the brackets
    
    Also fixes a missing hidden input for 'item_action' when no items are
    staged during import
    
     1 - Define a new matching rule with no subfields
        Match-threshold: 1000
        Record type: bibliographic record
        Search-index: Other-control-number
        Score: 1000
        Tag: 035
        Subfields:
        Offset:
        Length:
     2 - Attempt to stage a record with an 035 using this rule (i will
         attach example to bug)
     3 - Staging fails
     4 - Stage again with no matching rule
     5 - Manage the staged record, try to apply the matching rule
     6 - It fails, 500 error
     7 - Apply patch
     8 - Restart all the things
     9 - Apply rule again, it works!
    10 - Stage the record again using the rule for matching
    11 - It stages and matches!
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 36d88b135d072f9335db46093c0e440e0cdfb2c3
Author: Isobel Graham <isobel.graham09@gmail.com>
Date:   Thu Sep 1 12:37:06 2022 +0100

    Bug 29608: Made so doesn't require full permission
    
    Made so the numbering sequence does not need to require full
    permission.
    
    1. Edit number patterns a confirm you don't need full permission
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 41b2f087efce7fa79c7d42da69e36a82fafd395c
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Aug 18 20:15:30 2022 +0000

    Bug 27191: Set focus on first input when adding a new patron category
    
    When adding a new patron category, the focus/cursor should be
    in the first input field of the form: Category code
    
    To test:
    * Add a new patron category in administration > patron categories
      - cursur is in no field
    * Apply patch
    * Add another new patron category
      - cursor is now in the first input field of the form: Category code
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4d772a8fe0d38c0e5351397ebec5f7eb9837d376
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Aug 18 19:47:20 2022 +0000

    Bug 27193: Set focus on first input when adding a new patron attribute
    
    When adding a new patron attribute, the focus/cursor should be
    in the first input field of the form: Patron attribute type code
    
    To test:
    * Add a new patron attribute - cursur is in no field
    * Apply patch
    * Add another new patron attribute - cursor is now in
      the first input field: Patron attribute type code
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cc0efad411a762cd7d2af6cf293b8c72b72ce5dc
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Aug 18 22:06:41 2022 +0200

    Bug 27436: Set focus on first input when adding a new SQL report
    
    When adding a new SQL report, the focus/cursor should be
    in the first input field of the form: Report name
    
    To test:
    * Add a new SQL report in reports > new from SQL
      - cursur is in no field
    * Apply patch
    * Add another new SQL report
      - cursor is now in the first input field of the form: Report name
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 392ee0ff81774dcd70fb64dcd0b033b19ec7f9e6
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Aug 18 20:33:42 2022 +0000

    Bug 31398: Set focus on first input when adding a new authority type
    
    When adding a new authority type the focus should be on the
    first field of the input form: Authority type
    
    * Add a new authority type from administration > authority types
    * Verify the focus is not on any of the form fields/inputs
    * Apply patch
    * Add another new authority type
    * Verify the focus/cursor is now in the Authority type field
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4ea1cf6cce114b0bbd55ea5f75d9e67f8a7c63ca
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Aug 18 20:48:44 2022 +0000

    Bug 31399: Set focus on first input when adding a new classification source, filing rule, or splitting rule
    
    This makes sure the cursor/focus is always in the first form
    field when adding an entry on the classification configuration page.
    
    * Got to administration > classification sources
    * Verify for each of the three "New ..." buttons on top that
      the entry form has no focus on any field
    * Apply patch
    * Repeat testing the new forms and the focus now should always
      be in the first input field of the entry form
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit af5e4b7237dae9d23a380949a123ed732758ec9e
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Aug 18 20:56:02 2022 +0000

    Bug 31400: Set focus on first input when adding a new matching rule
    
    When adding a new matching rule the cursor/focus should be in
    the first input field of the form: Matching rule code
    
    * Add a new matching rule form administration > matching rules
    * Verify the cursor is in the search form on top of the page
    * Apply patch
    * Add another new matching rule
    * Verify the cursor is now in the first input field of the form
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a3ad2da8a632df7a48c6ef2b3c49e939f1fd3d78
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Aug 18 20:24:57 2022 +0000

    Bug 31397: Set focus in first input when adding a new bibliographic framework
    
    When adding a new bibliographic framework, the focus/cursor should be
    in the first input field of the form: Framework code
    
    To test:
    * Add a new bibliographic framework from adminsitration > bibliographic
      MARC frameworks
      - cursur is in no field
    * Apply patch
    * Add another new framework
      - cursor is now in the first input field of the form: Framework code
    
    https://bugs.koha-community.org/show_bug.cgi?id=27191
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 11514e6fd265ac62e86ebd42688dd7730812aa8b
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Mon Aug 15 11:01:39 2022 +0000

    Bug 27802: Set cursor focus in first input when adding a cash register
    
    Test plan:
    1. Visit Administration > Accounting > Cash registers and notice the
    cursor is not focussed in the first input field (Name)
    
    2. Apply patch
    
    3. Refresh the new cash registers page and confirm your cursor is
    focussed in the first input field (name)
    
    Sponsored-by: Catalyst IT, New Zealand
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8eccff5b530494a8c5b62dbeffc208b9cf5ce14a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Sep 7 13:40:39 2022 -0700

    Bug 31374: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c47194153b39e312098ac81951b6701c21e39739
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Sep 7 13:36:52 2022 -0700

    Bug 31374: DBRev 22.06.00.039
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7823ca473fb385093d3d4550f5ad0e6ca31f0456
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Aug 27 14:40:13 2022 +0000

    Bug 31374: (QA follow-up) Fix typo collumn in database update
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 264a6e5979b49707106bd0d3f8949fac470861bb
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Aug 22 22:21:22 2022 +0000

    Bug 31374: (follow-up) change private note to staff_note and reorder columns
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aba3c6aafbec813b1e39bd0fd0da0f4198770ab9
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Aug 19 16:18:44 2022 +0000

    Bug 31374: Update Suggestion.pm
    
    To test:
    1. Apply patch and restart services
    2. Go to Acquistions -> Suggestions -> New Purchase suggestion
    3. Notice the new 'Non-public notes:' textarea
    4. Make sure you 'Set a patron' so we can later look at the suggestion from the OPAC
    5. Make a new suggestion and make sure you add some Non-public notes
    6. Back on the 'Suggestions management' page you should see a new column for 'Non-public note'
    7. Go to table settings and make sure you can properly hide the column
    8. Change the status and make sure it shows up on the table with all statuses (pending, accepted, rejected, etc )
    9. Check the API by going to (/api/v1/suggestions). Your suggestion should show up and 'privatenote' should include your non-public note.
    10. Log in to the OPAC as the patron we set the suggestion to earlier. You should not see anything related to the non-public note displaying from the OPAC
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 168da4e49ab76f4e16f768912179366b37e57729
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Aug 16 20:55:54 2022 +0000

    Bug 31374: Update API spec
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f41db516267c4ce0001cea653a9232a5f277b9bd
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Aug 16 20:51:20 2022 +0000

    Bug 31374: Add privatenote column to table settings
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 52b5853f677df7a929a7181724dd86396734c77b
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Aug 16 20:46:46 2022 +0000

    Bug 31374: Add non-public note to template
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 901fdd8891ce9eb542899137ae894dcbb710a272
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Aug 16 20:40:24 2022 +0000

    Bug 31374: Database/Schema update
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e50f521a3c6a08f6d4f3d867c47ccc09bca8271b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 10 16:36:28 2022 +0200

    Bug 27081: Handle first column (checkboxes) in column settings for lost items report
    
    We are adding one column (the one with the checkboxes) at the beginning
    of each row if it's possible to export the report to CSV.
    However the column settings were not modified. We need to append one
    object representing this column.
    
    Test plan:
    To test:
    * Create a CSV profile of type SQL for exporting lost items
    * Make sure you have some lost items
    * Run Reports > Items lost
    => You can hide the notes (last column)
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 605770293d6aa4f759ef94ceb67c8d2b671eb71a
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Sep 7 12:37:39 2022 +0000

    Bug 31404: (QA follow-up) Mostly whitespace fixes
    
    * Removed the leading space from the new entries as this could
      lead to another string to translate and they are not needed
    * Removed some doubled up whitespaces from the <a> tags and
      a stray -
    * Removed title from Article requests since it was the same text
      as the link itself, not adding information
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b15504114f830bc97013f63a54b34628d8064c05
Author: Isobel Graham <isobel.graham09@gmail.com>
Date:   Wed Aug 31 16:09:43 2022 +0100

    Bug 31404: Sync Circulation sidebar with Circulation home
    
    This patch syncs the content of the circulation sidebar navigation with
    the content of the circulation homepage
    
    Test plan
    1. Enable the `CircSidebar` system preference
    2. Compare the sidebar navigation on circulation pages with the content
       of the circulation homepage.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d7ebe75173a982fb8d359a9f7536bafd4037c697
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Tue Aug 30 15:11:27 2022 -0400

    Bug 31490: Terminology: change 'staff client' to 'staff interface' in marc-overlay-rule
    
    This patch corrects the terminology for staff interface in the record overlay rules administration page.
    
    To test:
    1) Apply patch
    2) Enable the MARCOverlayRules system preference
    3) Go to Administration > Record overlay rules
    4) Open the 'Filter' drop-down menu
    => The second option should read 'Staff interface MARC editor'
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7c8e77771236306a13dba6166a08a18669fca4c3
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Aug 31 20:59:31 2022 +0000

    Bug 31483: Close <ol> tag properly on password reset page
    
    To test:
    1) Enable EnableExpiredPasswordReset
    2) Find a patron and change their password so you know what it is supposed to be
    3) In the database, expire the patron's password, e.g.
    UPDATE borrowers SET password_expiration_date = '2022-08-22' where borrowernumber = 21;
    4) Go to the OPAC, try to log in with the patron's credentials
    5) Click Reset your password
    => Note that the form is in the grey breadcrumbs box, you can compare with any other OPAC page, the grey box should only contain the breadcrumbs
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit caebb20cbb9f456750390d6494c568536dc1066c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Feb 8 14:45:11 2022 -0300

    Bug 30042: Remove Date::Calc dependency in batch_anonymize.pl
    
    This patch makes the script use the Koha::DateUtils tools instead.
    
    To test:
    1. Run:
       $ kshell
      k$ perl misc/cronjobs/batch_anonymise.pl --verbose --days 7
    => SUCCESS: You see (the date may vary):
    Checkouts and holds before 2022-02-15 will be anonymised.
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: Same output
    4. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cd13475cf91c420357590e5dc46f8d9dbad74d8d
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Tue Aug 16 16:51:38 2022 -0400

    Bug 28708: fr-CA localization file
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d8e2b90cdc45674ca23c3bcbe2a7e3d4765b6c70
Author: Mason James <mtj@kohaaloha.com>
Date:   Fri Jan 14 20:00:03 2022 +1300

    Bug 29882: remove unrequired package definitions in list-deps script
    
    to test...
    
    - apply patch, rebuild new package
    
    - install new koha-common pkg successfully
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    I did not build packages, just grep'ed the source to check that
    these modules are no longer used. Please set back to "Needs
    signoff" if this is not considered good enough.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2db224427ae41158b41bedb4ee4e3d68b754f197
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Wed Sep 7 18:49:59 2022 +0300

    Bug 31435: (QA follow-up) Don't pass explicitly default parameter values
    
    For kohaTable these are the default values.
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6c7c93675e6a44bce79725bcd56928f23951dfe1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Sep 5 13:59:57 2022 +0100

    Bug 31435: (follow-up) Make kohaTable calls consistent
    
    Our calls to instantiate a kohaTable from JS were inconsistent in how
    they pass table_settings where no table_settings exist.
    
    This patch replaces empty arrays and empty hashrefs with a consistent
    'null' being passed to ake it clear we don't have any settings to pass
    yet.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 37c5cfb258ab5e953d2138c5adba3b4e6af1aead
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Aug 22 08:15:34 2022 +0100

    Bug 31435: Tie 'Configure' to table_settings
    
    This patch adds a check for table_settings to prevent the display of
    'Configure this table' when table settings are not passed to the
    datatable wrapper.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Suggested test plan:
    * Without patch:
    * Go to Administration > SMTP servers
    * Verify the configure button shows, but doesn't work
    * Apply patch
    * Reload the SMTP servers page
    * The configure button will no longer show
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ce1efe7de0d71362f930a8fc5415fda797531a0b
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Sun Sep 4 14:37:46 2022 +0300

    Bug 31364: Check length of the multiple syspref array instead whether it is null
    
    The multiple systempreferences are always defined as an empty array at
    the minimum, so in order to determine whether we need to remove all
    the selections from the systempreference we should check whether the
    array is empty and not whether the array doesn't exist.
    
    To test:
     1) Set at least 1 value for OPACHoldsIfAvailableAtPickupExceptions
     2) Remove all the values for OPACHoldsIfAvailableAtPickupExceptions
     and notice you get the message "Nothing to save"
     3) Apply patch and repeat, removing all the values should work now.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7a90be2ff221df5e7ab575e89063f6e8dcc99c29
Author: Isobel Graham <isobel.graham09@gmail.com>
Date:   Thu Sep 1 10:44:37 2022 +0100

    Bug 31488: Update Max checkout text
    
    This changes text from "you have checked out too many items" to
    "You have reached the maximum limit of items checked out".
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e110534e1ce398e23867608497bc3ff9f784edff
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Sep 7 13:17:53 2022 +0000

    Bug 31170: (QA follow-up) Fix capitalization in database update
    
    As this has not been released yet, we can also fix the database
    update to not introduce the wrong capitalization in the first
    place.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eb96d21dad9ff70dac9304e47b27d60d1991f793
Author: Isobel Graham <isobel.graham09@gmail.com>
Date:   Thu Sep 1 11:45:04 2022 +0100

    Bug 31170: Decapatalized "Overdue Item Fine Description"
    
    I changed "Overdue Item Fine Description" to "Overdue item fine
    description" for both the name and title.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d32a205a69a8def34a1be4e02dfca71c4e0021da
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 3 08:39:39 2022 +0200

    Bug 27272: Remove GetItemsInfo, GetItemsLocationInfo and GetHostItemsInfo
    
    With the different bug reports we removed the calls for those 3
    subroutines. We can remove them now.
    
    Test plan:
    git grep their names and you should not find any occurrences in the code
    base
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3f90b7b43d0ed927ddac92af5be226d1ede6429f
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Fri Mar 4 22:47:11 2022 +0100

    Bug 30231: (bug 5927 follow-up) See (rejected) forms of series entry visible in search result (OPAC and intra)
    
    When using zebra with IncludeSeeFromInSearches on, with traced series, the rejected
    forms (4XX) of series entries are visible in result lists, both in OPAC and intra
    interfaces.
    
    Test plan:
    =========
    1. Have a MARC 21 installation with zebra, and with IncludeSeeFromInSearches on.
       Have an authority records for series (130, or 100/110/111 with
       title) with rejected forms (4XX fields).  So the auth record should
       contain at least:
    
       130 _0 $a Series title
       430 _0 $a Some other title under which the series in known
    
       Use (each) authority record in at least two biblio records (in appropriate
       fields, i.e.  800/810/811/830 or even deprecated 440, if it makes use
       of UNIF_TITLE).
       Don't forget to properly input also 490 (for 8XX). So the biblio record
       shold contain at least:
    
       245 nn $a Work title.
       490 1_ $a Series title
       830 _0 $a Series entry $9 <koha_id>
    
       Reindex.
    2. Perform a simple biblio search (in OPAC and in intra) with the title
       from auth record.
    3. You shold get a list of results.  See the Series information--you
       shold see not only the accepted entry from 1XX in auth but also the
       rejected forms from 4XX.
    4. Apply the patch.
    5. Repeat 3. You shold see only the entry form of series now.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f6a08737c9ad9c85e98887e3a55cf31029c5a8c8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 12 16:19:49 2022 +0000

    Bug 31356: Use hold expiration date instead of adding days to the waiting date
    
    The Talking Tech outbound script currently just adds the
    ReservesMaxPickUpDelay to the waiting date to calculate the
    "expiration date", but it should use the actual hold expiration
    date which may differ from this naive calculation based on
    various system preference values.
    
    Test Plan:
    1) Create a holiday for tomorrow
    2) Set ReservesMaxPickUpDelay to 5
    3) Set "Days mode" to "Same week day"
    4) Enable ExcludeHolidaysFromMaxPickUpDelay
    5) Enable TalkingTechItivaPhoneNotification
    6) Create a hold and fill the hold so it is waiting
    7) Enable "Hold filled" phone notices for that patron
    8) Create a 'phone' version of the HOLD notice
    9) Run ./misc/cronjobs/thirdparty/TalkingTech_itiva_outbound.pl --type RESERVE -w 0
    10) Note the output has the expiration date ( 15th colume ) 5 days from now which is *not* the hold's expiration date
    11) Apply this patch
    12) Repeat the command from step 9
    13) Note the expiration date column now matches the holds actual expiration date!
    
    Signed-off-by: Kyle Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 994ad3bcfd38993fd72e94a1c8f0a7c2041d0414
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Aug 22 08:18:46 2022 +0100

    Bug 31428: 'Configure this table' -> 'Configure'
    
    I agree, the shorter wording should be used.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cb2fd089af2756c91a4839ca23bb6e8c7356a41b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 18 12:47:49 2022 -0300

    Bug 31177: Fix misplaced import in C4::ILSDI::Services
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 486f5af3035228f5ad55175ee6ff0b78a96c64b7
Author: Mason James <mtj@kohaaloha.com>
Date:   Thu Sep 1 04:38:17 2022 +1200

    Bug 31499: Add libhttp-tiny-perl 0.076 dependency for ES7
    
    no testing info provided
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8bd4edebf9df64b3c84163bc0610d33f6a2c327f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Aug 31 12:34:39 2022 -0300

    Bug 29697: (QA follow-up) Remove useless warning
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 73bde2cca346b911aafff2b0011b3f0acdf720ba
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Aug 31 12:31:46 2022 -0300

    Bug 29697: (QA follow-up) Make tests less fragile
    
    This patch makes the tests less fragile to existing data. It does so by
    making sure that when checking if the item would be hidden by
    OpacHiddenItems and lost status, the item is not skipped, and thus the
    notforloan value, as retrieved from the search engine is picked for the
    notforloan_count calculation.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6e127ad8941bf8ec3b39c4b75d2d10d63f144a28
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Aug 31 10:18:23 2022 -0300

    Bug 30335: Fix DBRev permissions
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 02326ebf245e6b2f8c542b39aa111bffa357b64d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Feb 3 13:14:33 2022 +0000

    Bug 30016: Remove GetOpenIssue subroutine
    
    This patch adjusts the code that uses GetOpenIssue to use/find a Koha::Checkout object
    instead
    
    To test:
    1 - Add a course to course reserves
    2 - Create an item with barcode TESTKOC
    3 - Add the item to a course
    4 - Checkout the item
    5 - View course details on stff and opac and confirm item shows as checked out and due date displays
    6 - prove t/db_dependent/Circulation/issue.t t/db_dependent/Circulation.t t/db_dependent/CourseReserves.t
    7 - Browse to Circulation->Upload offline circulation
    8 - Upload a file to return the item: https://wiki.koha-community.org/wiki/Koha_offline_circulation_file_format
    9 - Confirm item is returned
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 839eb02a57c0836ce8182e872306a2d41a9deebe
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Sun Aug 28 15:26:28 2022 +0000

    Bug 31315: (QA follow-up) Show itemtype description instead of database code
    
    This restores the previous definition for itype that displayed the
    description instead of itemtype.
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 695574d81f3067dd6adcd17a673910212217ca26
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 3 08:16:20 2022 +0200

    Bug 31315: Remove GetHostItemsInfo and GetItemsInfo from moredetail
    
    Bug 27272 is going to remove C4::Items::GetItemsInfo in favour of Koha::Items->search.
    
    Here we are going to deal with catalogue/moredetail
    
    Test plan:
    List items on the modified view and confirm that all the info is
    displayed correctly
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 78f122122a0a9d9179f4195a70e90b36a0ed5943
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Sun Aug 28 14:21:06 2022 +0000

    Bug 30847: Remove unused variable
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 469d96d4dd46b344977ff31fe5d0f5a6c1220da1
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 25 14:58:36 2022 +0000

    Bug 30847: Consolidate code to check if patron can place holds and exit if they cannot
    
    This will save us fetching more info if we are denying the holds
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Rebased-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 635c1b6f72179c24f676927895f7929e7407202a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 25 14:44:50 2022 +0000

    Bug 30847: Don't get biblio/item info when placing holds
    
    The only bit we get form the hash is the rank and title
    We can simply fetch the biblio once to calculate
    no need to fetch all the info as we don't display or use it
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Rebased-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f506e771546964e30fc0a014f3b85c4bf1199a52
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 25 14:34:55 2022 +0000

    Bug 30847: Don't declare undef variable for assignment
    
    New holds have found set to undef - we can do this directly
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Rebased-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4a27c81ae743f01a844907bfa40223257012dd2e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 25 14:33:26 2022 +0000

    Bug 30847: Avoid fetching biblio object
    
    Here the items biblionumber is either equal to the biblionumber passed
    in or it is not and should be - we can just assign directly from the
    item in all cases
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Rebased-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit abe3117368e8a8b7b5a42eb645e539743f74cb01
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 25 14:19:32 2022 +0000

    Bug 30847: Don't fetch patron twice
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Rebased-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 14b3e40fb00d2bd8d37b4703f91b9c09dff82afd
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 25 14:02:57 2022 +0000

    Bug 30847: Remove unused OPACShowHoldQueueDetails
    
    Search for the variables, they aren't used!
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Rebased-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d54a7bcad518d928d5887f0d4c198b0037ce1322
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 25 14:00:16 2022 +0000

    Bug 30847: Remove unused noreserve parameter
    
    This is defined but never used
    
    To test:
    1 - git grep noreserve
    2 - only one ocurrence
    3 - Apply patch
    4 - repeat, no ocurrence
    5 - Note the plural has a few uses
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Rebased-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1ff61868b6633bf65a65dc28f581a6ebf645c460
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 25 13:23:26 2022 +0000

    Bug 30847: Cleanup calculation of holds and rank
    
    Currently we loop over all the holds on the record to get a count of the reserves not
    waiting and a rank for the upcoming hold
    
    We can simply count the number of nont waiting holds and add 1
    
    Note: Before this patch the count of holds included the new hold we were going to place
    which meant rank and count were the same. I believe countaing existing holds and our
    upcoming rank is the correct behavior
    
    To test:
     1 - Set OPACShowHoldQueueDetails system preference to 'Show holds and their priorty level'
     2 - Place a few holds on a bib on the staff side
     3 - Mark 1 waiting
     4 - Attempt to place hold on the bib on the opac
     5 - Note 'Your priority' and 'Number of holds' are the same number
     6 - Place another hold, confirm both increase
     7 - Set another hold waiting, confirm both decrease
     8 - Apply patch
     9 - Confirm 'Your priority' is now 1 greater than Number of holds
    10 - Place a hold, set a hold waiting, confirm numbers adjust as appropriate
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Rebased-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5fe49c7db1113026d242ad081c6b100fc8bae76e
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Mar 10 04:02:49 2022 +0000

    Bug 30262: Trim whitespace off tracklinks.pl URLs
    
    This patch trims whitespace off tracklinks.pl URLs so that
    the URL is in the same format as the URLs returned by
    C4::Biblio::GetMarcUrls, which is used by tracklinks.pl internally.
    
    Test plan:
    0. Apply patch and koha-plack --restart kohadev
    1. Go to http://localhost:8081/cgi-bin/koha/cataloguing/addbiblio.pl?biblionumber=29
    2. Add a 856 with $u of 'https://koha-community.org ' (note the space at the end0
    3. Save record
    4. Change 'TrackClicks' syspref to 'Track'
    5. Go to http://localhost:8080/cgi-bin/koha/opac-detail.pl?biblionumber=29
    6. Click on the online resource (eg
    http://localhost:8080/cgi-bin/koha/tracklinks.pl?uri=https%3A%2F%2Fkoha-community.org%20&biblionumber=29
    )
    7. Note you are redirected to https://koha-community.org
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Added the link with a space at the end. Verified that without the
    patch, clickin on "Click here to access online" gives a 404. After
    applying the patch the redirect works as expected.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e574aea6bb1b19e6c1836fc522dca8857272d63e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Aug 31 08:44:14 2022 -0300

    Bug 30335: DBRev 22.06.00.038
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1bbc53f65fba7cb28d7e56edede0e48349f5fff3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jul 15 17:21:13 2022 +0100

    Bug 30335: (follow-up) Ensure existing users remain permitted
    
    This patch updates the database update to ensure users with the
    'remaining_permissions' subpermission of 'updatecharges' continue to be
    able to manually invoice and manually credit borrower accounts after the
    patch is applied.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2954fbc9cc945b79ce4944b12b724bb14c040434
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jul 15 17:05:51 2022 +0100

    Bug 30335: (follow-up) Bind new permissions to pages and tabs
    
    This patch binds the new permissions added in the previous patch to the
    tab display on the borrower account page.
    
    Test plan
    1) Apply the previous patch and run the database update
    2) Configure a user without the new permissions
    3) Confirm the 'Create manual invoice' and 'Create manual credit' tabs
       no longer appear under the 'Accounting' area when logged in as the
       above user.
    4) Confirm that you cannot manually navigate to /members/mancredit.pl or
       /members/maninvoice.pl when logged in as the above user.
    5) Confirm that users with the above permissions are still able to see
       the tabs and take actions on them.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aea63af24a491c516c5ff7dc273ba07987e3ebf0
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jul 15 16:54:03 2022 +0100

    Bug 30335: (follow-up) Add permissions for manual accounts options
    
    This patch adds two new sub-permissions, `manual_credit` and
    `manual_invoice` to allow/prevent staff the ability to add manual
    invoices and credits to a patrons account.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8cac8e5bbe1b7ff00c0e394f05200bc645c742e2
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Mar 22 17:45:40 2022 +0000

    Bug 30335: Add classes to invoice/credit tabs on patron accouting pages
    
    To test:
    1. Apply patch and go to the patron accounting page.
    2. Notice the class names for each list element on the page.
    3. You can use the following CSS to try hiding each of the tabs:
    
    .transactions { display: none; }
    .makepayment { display: none; }
    .manualinvoice { display: none; }
    .manualcredit { display: none; }
    
    Signed-off-by: Rachael Laritz <rachael@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b715ea28b15ae689571cda0535bd3dac467099bd
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Tue Aug 30 12:10:37 2022 -0400

    Bug 31489: Typo in EnableExpiredPasswordReset description
    
    This patch corrects a typo in the EnableExpiredPasswordReset system preference description.
    
    To test:
    1) Apply patch
    2) Go to Administration > Global system preferences
    3) Search for EnableExpiredPasswordReset
    4) Read the description and make sure there are no errors.
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 29ad53a682f339a6d9fea028b1951898c6dff662
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Aug 16 20:09:32 2022 -1000

    Bug 31379: Change results per page text for default
    
    Since Bug 14715, one can change number of results per page.
    The actual text in combobox for default value is : "Library default:
    20"
    
    This text is hard to translate correctly.
    For example french translation use "site par défaut" wrongly meaning
    "default library".
    
    I propose to simply use "20 (defaut)".
    
    Test plan :
    1) Go to system preferences and set both 'numSearchResultsDropdown' and
       'OPACnumSearchResultsDropdown' to 'Show'
    2) Do a catalogue search in the intranet using a search term that will
       bring lots of results
    3) Look at restults per page combobox
    4) Same for OPAC
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3a5fb22ad88790673d6d8fbc483f6e219f25f33d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Aug 26 16:45:10 2022 -0300

    Bug 31473: Fix fragile test about bad OpacHiddenItems conf
    
    There's been a behavior change in recent MariaDB that made some cases
    deal with truncated data in DOUBLE context instead of DECIMAL.
    
    Probably this:
    https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-27380
    
    This made the affected test fail consistently on those versions.
    
    This trick for checking OpacHiddenItems is correct (as introduced on bug
    28125 doesn't really make use of the warning, just prints it in
    about.pl) so one option was to just check for a warning.
    
    I decided to keep the test, but add the optional DECIMAL|DOUBLE check on
    the qr. This way other eventual changes will make it fail and serve as a
    warning in case something more relevant changes.
    
    To test:
    1. Apply this patch
    2. Run:
       $ kshell
      k$ t/db_dependent/Koha/Items.t
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 73c3c5d2f10751c23156372300239d42e5957c66
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Aug 24 17:10:18 2022 +0000

    Bug 31112: (QA follow-up) Reduce database queries
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 507edad61f16d99d4fba4ce343cbaa6eb3950957
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Mon Aug 22 19:02:14 2022 +0000

    Bug 31112: (follow-up) Don't return "on_reserve" when there are 0 possible holds
    
    It's possible that there could be 0 possible reserves, for example
    when the hold has already been filled, thus the check would fail as
    the item count can never be less than 0.
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8ad992630181413d3be9935309b61d50d2e3a951
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Mon Aug 22 19:02:03 2022 +0000

    Bug 31112: (follow-up) Bring back the check for non-priority holds
    
    Before the changes from bug 31112 when CheckReserves returned a
    non-priority hold we didn't return "on_reserve" status but checked in
    addition to that whether there are any priority holds and if there
    were, only then we returned the "on_reserve" error.
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2eb053603d9df3b03f4ee0ec54f84a697aab8716
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 19 13:23:05 2022 +0000

    Bug 31112: (QA follow-up) Fetch patrons with reserves
    
    Previously we fetched all in a single call using biblionumbers
    
    Fetching each individually could be a performance hit on systems
    with large numbers of holds
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4676ce1a03fee089c4aa51a49ecc646afb91450a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 19 13:11:09 2022 +0000

    Bug 31112: (QA follow-up) Restore check to avoid extra processing
    
    We now count all holds for all patrons, we can still eject if we have more
    holds than we do items
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 15f622ecc1b3d425bf460527398975447cbee62e
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Mon Jul 18 16:29:06 2022 +0000

    Bug 31112: CanBookBeRenewed: take into account patrons with more than 1 hold to a biblio
    
    If a single patron had more than 1 hold to a biblio and there was only one
    available item we allowed incorrectly renewing the checkout when
    AllowRenewalIfOtherItemsAvailable was set to "Allow". This
    changes CanBookBeRenewed so that it makes sure all the holds are
    filled and not just one per patron.
    
    To test:
     1) prove t/db_dependent/Circulation.t
     2) (Optional, as unit test is provided)
        - Set AllowRenewalIfOtherItemsAvailable = Allow
        - Create biblio with three items
        - Checkout one item to patron A
        - Add two biblio-level holds for patron B
        - Try to renew patron A's checkout with and without this patch.
        - Notice that without this patch the renewal succeeds even though we
          one unfilled hold left. After applying the patch the renewal should
          fail.
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8ba1a9a5345310c54d9225049d470544b56eeb11
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Mon Jul 18 16:29:06 2022 +0000

    Bug 31112: Remove unnecessary if-clause
    
    To test:
     1) Please check manually that the logic stays the same, use git's -w command line parameter to
        ignore whitespace changes in the diff output.
     2) prove t/db_dependent/Circulation.t
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 07e5f13d90addc87ce9c8fb31692ad58335079f5
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Jun 13 08:05:16 2022 -0400

    Bug 20262: (QA follow-up) Update unit tests for changes to payin_amount
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 11c05e3d8154bacca3cdeb6ccdf9fe7c2b8a7b87
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Jun 13 06:52:28 2022 -0400

    Bug 20262: (QA follow-up) Fix spelling errors
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e166f7612f68e3daeeb05e58c73360d5c32d3e82
Author: Stefan Berndtsson <stefan.berndtsson@ub.gu.se>
Date:   Thu Sep 30 15:11:59 2021 +0200

    Bug 20262: Add ability to refund lost item fees without creating credits
    
    Some libraries handle refunding of paid lost fees at a financial office and not within Koha. To facilitate this, it would be good for Koha to have the option to not generate lost returned credits by skipping fully paid lost items, and only refunding the outstanding balance on partially paid lost fees.
    
    Test Plan:
    1) Apply this patch
    2) Set your lost item refund on return policies to 'Only if unpaid'
    3) Mark an item lost, charging the lost fee
    4) Return the item, a full refund should occur
    5) Mark another item lost, charging the lost fee
    6) Make a partial payment on this lost fee
    7) Return the item
    8) The remaining balance of that fee should be 0, but the patron should
       not recieve a credit for the already paid balance
    8) Mark another item lost, charging the lost fee
    9) Fully pay the lost fee
    10) Return the item. The paid lost fee should be unaffected.
    11) Run tests in t/db_dependent/Circulation.t
    
    Signed-off-by: Lisette Scheer <lisetteslatah@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit af00fbd22b59132b74faccc92b99e9cc8939eb9c
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Aug 12 02:13:10 2022 +0000

    Bug 21366: Add --reload option to koha-plack help/manual
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e0f1110389055b7a2fab960d398c04f895586120
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Aug 11 05:26:36 2022 +0000

    Bug 21366: Add koha-plack --reload to gracefully restart Plack/Starman
    
    This patch adds a "--reload" option to koha-plack, which allows
    a sysadmin to gracefully restart Koha.
    
    This is very useful when installing Koha plugins or deploying a hot fix
    where you need to change code but don't want to interrupt anyone's
    usage of Koha.
    
    0. Apply patch
    1. cp /usr/sbin/koha-plack /usr/sbin/koha-plack.bak
    2. cp debian/scripts/koha-plack /usr/sbin/koha-plack
    3. ps -efww | grep "starman"
    4. Now at roughly the same time do the following two actions:
        4a. Go to http://localhost:8081/cgi-bin/koha/about.pl
        4b. koha-plack --reload kohadev
    5. Note that the web request completes successfully
    6. ps -efww | grep "starman"
    7. Note that the "starman master" process stays alive, but the "starman worker" processes have been restarted
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 89e890e7ce21b872574bf7c14d4a75dd2aebb3a1
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Aug 26 15:48:27 2022 -0300

    Bug 24295: (QA follow-up) Fix rebase issue
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9316c123aa1c8b6bc1c9c296e8278a445b7f9d32
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Apr 19 16:18:58 2021 +0100

    Bug 24295: Finally remove GetTransfers from C4/Circulation
    
    This patch handles the final removal of GetTransfers from
    C4::Circulation.
    
    Test plan
    1/ Check that there is no mention of the GetTransfers method codebase
    wide now
    2/ Run the circulation and transfers tests and check nothing fails..
    perhaps even run the full test suit in k-t-d
    3/ Signoff
    
    Rebased-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e4d5a9e2ad624a10a7c7188d61881f18c7435528
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 9 11:40:56 2021 +0000

    Bug 24295: Remove GetTransfers from circ/transferstoreceive.pl
    
    Just drop the import of GetTransfers from circ/transferstoreceive.pl is
    it's never actually used.
    
    Rebased-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f6c767677f99a8c2adb58c88469e3002cdcb1522
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Apr 19 15:59:57 2021 +0100

    Bug 24295: Remove GetTransfers from C4/Search.pm
    
    This patch removes the final use of GetTransfers from C4::Search.
    
    Test plan
    1/ Perform a search that will include results for some items that have
    transfers of various states assigned to them
    2/ Check the results match expectations (before and after applying the
    patch should look the same)
    3/ Signoff
    
    Rebased-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 68f54437a3e5050474d007434b2acc13bc3494ce
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Mar 16 10:12:39 2021 +0000

    Bug 24295: Remove GetTransfers call from C4/HoldsQueue.pm
    
    This patch removes the GetTransfers call from
    GetItemsAvailableToFillHoldRequestsForBib instead replacing it with an
    inline JOIN in the initial query.
    
    Test plan
    1/ Run the holds queue
    2/ Check the results
    3/ Put one of the items in the holds queue into transit
    4/ Run the holds queue again
    5/ Check that the results do not contain the item that is in transit
    6/ Apply the patch
    7/ Run the holds queue again
    8/ Check that the results still do not contain the item that is in
    transit
    
    Rebased-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aa8a9f660c3148a570882c7f4ef90154734dc75b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Mar 15 16:41:41 2021 +0000

    Bug 24295: Replace mock in t/db_dependent/Circulation/transferbook.t
    
    Replace the call to GetTransfers with the get_transfer method in
    Koha::Item in transferbook.t
    
    Test plan
    1/ Run t/db_dependent/Circulation/transferbook.t
    2/ Confirm it passes
    3/ Apply patch
    4/ Repeat steps 1-2
    
    Rebased-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 02670978f356d18cdbea341c08d7bd5da5ec77fd
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 9 11:38:06 2021 +0000

    Bug 24295: Replace mock in t/db_dependent/Search.t
    
    Replace the mock of GetTransfers in this test with a mock of transfers
    data
    
    Test plan
    1/ Run t/db_dependent/Search.t
    2/ Confirm it passes
    3/ Apply patch
    4/ Repeat steps 1-2
    
    Rebased-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3c6fb4edda1f462f8e16209e5f68b0942cfb35b2
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Mar 15 16:24:03 2021 +0000

    Bug 24295: Remove GetTransfers from svc/holds
    
    This patch replaces the call to C4::GetTransfers in svc/holds with a
    call to the get_transfer method in the Koha::Item object.
    
    Rebased-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8dab736b76fbe7ae2bbbc62a0e5a133076cbd56d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Mar 15 16:18:36 2021 +0000

    Bug 24295: Remove GetTransfers from detail.pl
    
    This patch replaces the call to GetTransfers in detail.pl with the
    get_transfer method available from the Koha::Item object
    
    Test plan
    1/ Trigger the transfer of the item
    2/ Check the detail page for the display of the current transfer
       status
    3/ Apply patch
    4/ Repeat step 2
    
    JK: Remove unneeded string formatting for transfertwhen as it's done
        on the template toolkit side already with $KohaDates
    
    Rebased-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 62512dc5d6e56eea4241ca8887d395b96f4173fd
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Mar 15 16:15:22 2021 +0000

    Bug 24295: Remove GetTransfers from request.pl
    
    This patch replaces the call to GetTransfers in reserve.pl with the
    get_transfer method available from the Koha::Item object
    
    Test plan
    1/ Place a reserve on an item at a different branch
    2/ Trigger the transfer of the item
    3/ Check the reserves page for the display of the current transfer
       status
    4/ Apply patch
    5/ Repeat step 3
    
    Rebased-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e6334cc3608de7c735e49c729951d6642f598cda
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Mar 15 16:09:42 2021 +0000

    Bug 24295: Remove GetTransfers from opac-basket.pl
    
    This patch replaces the call to GetTransfers in opac-basket with the
    get_transfer method available from the Koha::Item object
    
    Test plan
    1/ Trigger the transfer of the item
    2/ Check the opac-basket page for the display of the current transfer
       status
    3/ Apply patch
    4/ Repeat step 2
    
    JK: Remove unneeded string formatting for transfertwhen as it's done
        on the template toolkit side already with $KohaDates. Add missing
        Koha::Items module import.
    
    Rebased-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 245da0f19803f33fd3fd051f0f586e39f63e7eb5
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Mar 15 15:56:20 2021 +0000

    Bug 24295: Remove GetTransfers from opac-reserve.pl
    
    This patch replaces the call to GetTransfers in opac-reserve with the
    get_transfer method available from the Koha::Item object
    
    Test plan
    1/ Place a reserve on an item at a different branch
    2/ Trigger the transfer of the item
    3/ Check the opac-reserves page for the display of the current transfer
    status
    4/ Apply patch
    5/ Repeat step 3
    
    Rebased-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7b31a3582403ab56de1e1a133bf7d9c79d85c7c3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Mar 15 15:42:49 2021 +0000

    Bug 24295: Remove GetTransfer from Z3950Responder
    
    Replace the GetTrasfer call in Z3950Responder/Session.pm with a call to
    the Koha::Item method 'get_transfer'.
    
    Test plan
    1/ Configure your system to use the Z3950 responder
    2/ Trigger an item transfer for an item
    3/ Search for the item via Z3950 and varify the transfer status is set
    4/ Apply the patch
    5/ Repeat step 3
    
    Rebased-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4a6567274d944814c432ab7b3697c545e1459800
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Jun 24 01:42:52 2022 +0000

    Bug 31033: Explicitly define max child processes for SIP server
    
    By default, the SIP server appears to only use 1 child process for
    responding to SIP connections.
    
    This change makes this explicit in the configuration, which should
    make it so that people who need more than 1 simultaneous SIP connection
    can know to just increase the value for the "max_servers" parameter
    in the SIPconfig.xml file.
    
    Test plan:
    1. Add "max_servers='1'" to your SIP configuration file
    2. koha-sip --restart kohadev
    3. Open 3 terminals
    4. Run "telnet localhost 6001" on 2 terminals
    5. On the 3rd terminal, run the following:
    ss -l -n -t
    ps -efww | grep "sip"
    6. Note that there are 2 processes called
    kohadev-koha-sip: perl /kohadevbox/koha/C4/SIP/SIPServer.pm /etc/koha/sites/kohadev/SIPconfig.xml
    One of these processes is the parent of the other
    7. The Recv-Q in the "ss" output should show 1
    (This means that 1 of your telnet connections is in the server's TCP backlog)
    8. Celebrate as the configuration works as expected
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ad080e7e95ab8bbacb3240141dee91f46808e52f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Aug 25 08:49:26 2022 -0300

    Bug 23681: DBRev 22.06.00.037
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d9e30bae83c30ddb9aeff96724449bac6bb46e14
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Aug 25 08:43:50 2022 -0300

    Bug 23681: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6ce4d25bd34c2432cb76fa997f68f18319321a10
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Aug 22 18:09:27 2022 +0100

    Bug 23681: Move to ::Patron::Restriction::Type(s)
    
    This patch moves the new classes under ::Patron::Restriction:: and
    enhances the Unit tests for those classes.
    
    NOTE: We should drop keyed_on_code as part of bug 31095
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cdb0a7160f29200e410b7801e475515f064ee203
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Aug 19 14:59:49 2022 -0300

    Bug 23681: (QA follow-up) New schema files
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a027202717adf27ec99c2f14cddf018970c19ac0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Aug 19 12:42:21 2022 -0300

    Bug 23681: (QA follow-up) debarment_types => restriction_types
    
    The code moved from *debarments* to *restrictions* but the table didn't.
    This patch just renames things accordingly.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 34f5ae59340de8f0dbe08bfc292f15a23c381064
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jul 4 15:13:35 2022 +0100

    Bug 23681: (QA follow-up) Fix memberentry page display
    
    We were missing some changes to the restriction types dropdown handling
    in the memberentry template.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 060f52850125739bc9a8117527cd19a3a2c6c144
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jul 4 12:20:37 2022 +0100

    Bug 23681: (QA follow-up) Remove spacing and add question mark
    
    This patch removes the superflous whitespace around the restriction
    descriptions and also adds the missing question mark into the delete
    question.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3fb2875df20c76ebbaba57682cb8c98540e53377
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jul 4 12:12:47 2022 +0100

    Bug 23681: (QA follow-up) Add patron restrictions to admin menu
    
    This patch adds the patron restrictions page to the admin menu that
    appears to the left on all administration pages.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2218b4469b0a72cf95893b71d7550641205b0d01
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri May 6 08:21:35 2022 +0100

    Bug 23681: (follow-up) Mark fields at booleans
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3b1c271f78bb339800fac3f4c2b11ce4900f8e6a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 4 12:36:17 2022 +0100

    Bug 23681: (QA follow-up) Proper handling of default option
    
    This patch removes the 'can_be_added_manually' flag. Only non-system
    restriction types can be added manually, so we exclude is_system instead
    of having two flags. (And we set the 'Manual' that's added at install
    time to default but not system).
    
    We then add proper handling for setting the default manual restriction
    type in the management page and set the dropdown list to use that value
    by default.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a50553ff15815f878b148585ebca001e9723db94
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 4 10:48:58 2022 +0100

    Bug 23681: (QA follow-up) Merge update files
    
    This patch merges the three atomic update files into one and also
    adds a check for foreing key existance to make the update idempotent.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6d62f77e95f1136be04e037ec12dff95874a7ee3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue May 3 16:38:37 2022 +0100

    Bug 23681: (QA follow-up) Restore customisablity of description
    
    This patch restores the customisability of description for system restriction
    types. Translatability is not affected as you can translate the defaults
    via template translation and assuming the end users leave their
    descriptions at the default, the translations will be picked.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4595a28b2979134fec010ca70f3d2a73eeb5aa34
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue May 3 15:30:04 2022 +0100

    Bug 23681: (QA follow-up) Move preference again
    
    This patch removes the new PatronRestrictionTypes preference from the
    accounting area in preference to creating a new group for 'Patron
    restriction' related preferences in the circulation preferences tab.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7cc2560d2f1833d9b00b4cdc9d2d724813000407
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Tue May 3 13:23:43 2022 +0300

    Bug 23681: DBIC Schema
    
    To be able to delete and pass tests we need to declare
    koha_object[s]_class to DebarmentType.pm. Otherwise
    following error is raised:
    
    "Can't locate object method "_new_from_dbic" via package
    "Koha::DebarmentType" (perhaps you forgot to load "Koha::DebarmentType"?)
    at /kohadevbox/koha/Koha/Object.pm line 237"
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 20349d87379dc6f66290050c0b7c2beaf6763c06
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Mon May 2 15:40:35 2022 +0300

    Bug 23681: Fix QA issues
    
    This patch fixes following QA issues:
    - convert intaller files as .yml
    - change column name readonly as is_system
    - change column name is_system as default_value
    - add column can_be_added_manually (testplan for this below)
    - move syspref "PatronRestrictionTypes" to "Accounting > Features" tab
    - tweak page title
    - tweak tests to apply these changes
    
    Also atomicupdate files have been updated. Issues with delete and tests
    is fixed with adding additional schema change file.
    
    To test:
    1) Add new restriction type and make it manual.
    2) Navigate to patron details page.
    3) Add new restriction to patron.
    => Only selectable restriction should be the one
    you just created.
    
    Also prove t/db_dependent/RestrictionTypes.t.
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eb28de78fe0e05b3496e28ba10f375fc7bacff92
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Mar 28 12:40:55 2022 +0100

    Bug 23681: (QA follow-up) Rename columns
    
    Renames ronly to readonly and dflt to is_system.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 67b03d9374a552ba0f1a6448fe2a13ddcd33b466
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Mar 28 12:47:17 2022 +0100

    Bug 23681: (QA follow-up) Fix preferences
    
    Add the missing `.` and switch from `yes/no` to `1/0`.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 929b52ea58d29cb575c97e29e686f453a22e18e8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Mar 28 11:00:07 2022 +0100

    Bug 23681: (QA follow-up) Fix license, perlcritic & executable
    
    This patch fixes the simple issues mentioned by the QA script.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6e361d7a5e83b140c74158facce5389849fb68fe
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Mar 28 11:24:08 2022 +0100

    Bug 23681: Updates for bug 26703
    
    This patch fixes the title ordering and also replaces the breadcrumbs
    with the modern nav block equivilent
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6d6114d1ec2dd96c25e4cb8b9555e60fbf0ab384
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Feb 9 14:36:24 2022 +0000

    Bug 23681: (QA follow-up) Allow for translations
    
    This patch allows for existing translations to follow through if
    debarment type descriptions are left unaltered for the default types.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3e273b32f21cbf1e1e7a775502bb818bc9da2f6e
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Oct 4 11:38:19 2019 +0100

    Bug 23681: Add unit tests
    
    Sponsored-by: Loughborough University
    Signed-off-by: Benjamin Veasey <B.T.Veasey@lboro.ac.uk>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bcb1931357f38b0147e59c4c08542404a6db37c2
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu Oct 3 15:14:12 2019 +0100

    Bug 23681: Clean up on delete
    
    When a patron restriction type is deleted, any debarments that use that
    type need to revert to the default type, this patch implements this
    behaviour
    
    Sponsored-by: Loughborough University
    Signed-off-by: Benjamin Veasey <B.T.Veasey@lboro.ac.uk>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a8448041ba32ae4a1624a611ea12bf615f851524
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu Oct 3 15:13:27 2019 +0100

    Bug 23681: Allow for selection of restriction type
    
    This patch displays a restriction type select box (when appropriate)
    when adding manual patron restrictions
    
    Sponsored-by: Loughborough University
    Signed-off-by: Benjamin Veasey <B.T.Veasey@lboro.ac.uk>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e0160b905b5c1e9ee5cbc0a2f2dc2060dc7f539e
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Thu Oct 3 12:21:21 2019 +0100

    Bug 23681: Allow for changes to debarments
    
    The structure of debarments has changes slightly in that the displayed
    text is now a product of a call to Koha::RestrictionTypes rather than
    just the debarment's code. This patch allows for that
    
    Sponsored-by: Loughborough University
    Signed-off-by: Benjamin Veasey <B.T.Veasey@lboro.ac.uk>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7a4107bbcb36b35733d7b611c0674711a60a9996
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Wed Oct 2 16:41:07 2019 +0100

    Bug 23681: Add Management UI
    
    This patch adds UI to allow CRUD operations on restriction types
    
    Sponsored-by: Loughborough University
    Signed-off-by: Benjamin Veasey <B.T.Veasey@lboro.ac.uk>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 752006965998e7fe58bc5769ca41ec305c9feca6
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Wed Oct 2 16:39:47 2019 +0100

    Bug 23681: Add Koha Classes
    
    This patch adds the following objects:
    
    Koha::RestrictionType
    Koha::RestrictionTypes
    
    Sponsored-by: Loughborough University
    Signed-off-by: Benjamin Veasey <B.T.Veasey@lboro.ac.uk>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2985aa988339ebe75bff5b328be60047faa01ce1
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Oct 1 16:03:58 2019 +0100

    Bug 23681: Add modify_patron_restrictions permission
    
    This patch adds a new "modify_patron_restrictions" permission
    
    Sponsored-by: Loughborough University
    Signed-off-by: Benjamin Veasey <B.T.Veasey@lboro.ac.uk>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8c07d4938ef7e02e8286974b59723cfa4acf0211
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Oct 1 14:58:22 2019 +0100

    Bug 23681: Add debarment_types table
    
    This patch adds the table debarment_types and changes
    borrower_debarments.type to be a foreign key to it
    
    Sponsored-by: Loughborough University
    Signed-off-by: Benjamin Veasey <B.T.Veasey@lboro.ac.uk>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 03fc845fc52577c24321fcacde4b756ba346dcb6
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Oct 1 11:02:15 2019 +0100

    Bug 23681: Add PatronRestrictionTypes syspref
    
    This patch adds the new syspref "PatronRestrictionTypes"
    
    Sponsored-by: Loughborough University
    Signed-off-by: Benjamin Veasey <B.T.Veasey@lboro.ac.uk>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit df22b78f5363646f87bead92ede4a3e986b94d34
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Aug 23 12:15:09 2022 -0400

    Bug 12225: Add unit tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3b0bc03ad46e82d2d813227f46d6e7420bd6c189
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Jul 13 14:31:09 2022 +0000

    Bug 12225: Use ProcessOfflineIssue
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 51eb6e65540e0440a28c80343319a8a895d509df
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jul 12 07:46:31 2022 -0400

    Bug 12225: Re-implement no block flag for checkouts
    
    Test Plan ( assuming Koha Testing Docker or kohadevbox ):
    1) Check out master
    2) Start the SIP server ( edit the SIP config koha instutution to be
       "CPL" instead of "kohalibrary" )
    3) Telnet to 6001
    4) Send 9300CNkoha|COkoha|CPCPL|
    5) Send 11YY20220711    16350220250711    163502AOCPL|AA23529000035676|AB39999000001396|ACkoha|BON|BIN|
    6) Note the due date for the checkout in Koha is not in the year 2025:
       Henry Acevedo (23529000035676) checked out Philippics. by Cicero, Marcus Tullius. 39999000001396
    7) Apply this patch set
    8) Restart all the things!
    9) Check in the checkout
    10) Repeat steps 3 through 5
    11) Note the due date is now in 2025!
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7a4afce04d36d7452d2065a82ce0899ab0047126
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Jul 11 16:57:06 2022 +0000

    Bug 12225: Fix SIP message templates
    
    If a renewal via SIP would produce an error due to being on reserve, or
    exceeding maximum renewals, Koha's SIP2 implementation will refuse to
    renew the item even if the "no block" flag is set to Y.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1c3c191410e87ae18e45f6402319360d09593a23
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Tue Aug 23 20:10:45 2022 +0000

    Bug 31313: (QA follow-up) Remove unused bundle_host field from item_info
    
    The patch "Bug 31313: Fix availability - OPAC
    opac-detail" (70cb4e22c07) lead to
    koha-tmpl/opac-tmpl/bootstrap/en/includes/item-status.inc
    use the bundle_host method directly through the passed
    Koha::Item object, thus the bundle_host field added by
    this script is unused.
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d1dd80e3adb56738449ef71dad744ecf9e4e5289
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Tue Aug 23 19:51:32 2022 +0000

    Bug 31313: (QA follow-up) Show transfer status correctly if item in transit
    
    The patch "Bug 31313: Fix availability - OPAC
    opac-detail" (70cb4e22c07) caused the OPAC detail page only show
    "Available" status even when the item was in transit.
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c8b3557df1d21f2a6c16d6cbef6e13674ad2357b
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Tue Aug 23 19:51:17 2022 +0000

    Bug 31313: (QA follow-up) Show status "On hold" correctly if there are waiting holds
    
    The patch "Bug 31313: Fix availability - OPAC
    opac-detail" (70cb4e22c07) cause the OPAC detail page only show
    "Available" status even when there were waiting holds.
    
    The onhold item field is removed at the same go as it was confusing
    and unused since "Bug 2655: Fixes availabilty counts if items are on
    hold shelf. Patch (2/2)" (a37545eb1)
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 37002a81c37e759bf80e663d3e75ce7c0700feef
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Aug 17 17:09:44 2022 +0000

    Bug 31387: Fix othernames required label
    
    1. Mark othernames as required via PatronSelfRegistrationBorrowerMandatoryField
    2. Go to the self-reg form, the field is required but the span that makes it look required stays hidden. (<div class="required_label required">Required</div>)
    3. Mark initials as required via PatronSelfRegistrationBorrowerMandatoryField.
    4. Now the label_required field appears for othernames in the self ref form
    5. Apply patch
    6. Try again, the label should now properly show when othernames is marked as required
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5155e43b04a4283bb13eedd39cdcb9e12693630d
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Aug 12 02:27:52 2022 +0000

    Bug 31348: Make koha-plack stop gracefully
    
    0. Apply patch
    1. cp /usr/sbin/koha-plack /usr/sbin/koha-plack.bak
    2. cp debian/scripts/koha-plack /usr/sbin/koha-plack
    3. Now at roughly the same time do the following two actions:
        3a. Go to http://localhost:8081/cgi-bin/koha/about.pl
        3b. koha-plack --stop kohadev
    4. Note that the HTTP request completes
    5. Click on "Home"
    6. Note that the error is "Service Unavailable" rather than "Proxy Error",
    which would've occurred with an interrupted HTTP request/response
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0bd98b1db9cd6e5a269dac02c5ea835db7fdc5d1
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Aug 17 11:18:46 2022 -1000

    Bug 31388: Add select2 to fund selection in new order form
    
    In new order form, when you have a lot of funds,
    would be useful to have autocompletion in funds combobox.
    
    Test plan :
    1) Create an activ and an inactiv budget with at least one fund
    2) Create a new order 'From a new (empty) record'
    3) Check you see autocompletion in 'Fund' combobox
    4) Click on 'Show inactive'
    5) Check you see inactiv funds in combobox
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0820dbc14f5b60f66d85f8b119cbc11796d5cd43
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon Aug 8 02:23:57 2022 +0000

    Bug 6936: Allow multiple itemtypes for bib record export
    
    This patch allows multiple item types to be chosen when exporting
    bib records from the Tools module.
    
    Test plan:
    0. Apply patch and koha-plack --restart kohadev
    1. Go to http://localhost:8081/cgi-bin/koha/tools/export.pl
    2. Select "All" for "Item type" and note 435 bibs are exported
    3. Select "Books" and note 360 bibs are exported
    4. Select "Books" and "Visual Materials" and note 380 bibs are exported
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 368b1462e58f02e9636bb9ce5a5ba70a54b5d353
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Aug 18 01:14:03 2022 +0000

    Bug 31390: Remove noisy warns in C4::Templates
    
    This patch removes two noisy warnings from C4::Templates
    
    0) Apply patch and koha-plack --restart kohadev
    1) Go to http://localhost:8081/
    2) Note no warnings in /var/log/koha/kohadev/plack-intranet-error.log
    3) Go to http://localhost:8080/
    3) Note no warnings in /var/log/koha/kohadev/plack-opac-error.log
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8347ebb09b03904ddbde9287c44b1aff37efd6dc
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Aug 16 22:25:07 2022 +0000

    Bug 31377: Add internal note column to booksellers.tt
    
    To test:
    -Apply patch
    -Add some vendors and give them an internal note
    -Go to /cgi-bin/koha/acqui/booksellers.pl
    -Notice that there is a column which includes the internal note
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b686bd65e19a6688ebda109a156ea31576559e4f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Dec 3 16:43:06 2021 +0100

    Bug 31321: Remove GetItemsInfo from catalogue/detail.pl
    
    Bug 27272 is going to remove C4::Items::GetItemsInfo in favour of Koha::Items->search_ordered.
    
    Here we are going to deal with catalogue/detail
    
    Test plan:
    List items on the modified view and confirm that all the info is
    displayed correctly
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    JK: Amend follow-up fixes from Joubu to this patch
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7fcda17eabba1abedbc4046c9997c5cc8fd6d15b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Aug 22 13:06:14 2022 -0300

    Bug 29955: Fix method import issues
    
    This patch fixes this:
    
    $ prove t/db_dependent/Utils/Datatables_Virtualshelves.t
    t/db_dependent/Utils/Datatables_Virtualshelves.t .. 2/13 Use of inherited AUTOLOAD for non-method Koha::Virtualshelf::haspermission() is no longer allowed at /kohadevbox/koha/Koha/Virtualshelf.pm line 248.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 20108c837e639ce9fa4e2401a61779865bc942d1
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 12 15:51:13 2022 +0000

    Bug 31355: Add paging = false to items table on opac-reserve
    
    Moving to an ajax datatable and paging would be a future fix, this restores
    lost functionality
    
    To test:
    1 - Find or create a title with 20 items
    2 - Place a hold in opac
    3 - Attempt to select a specific item
    4 - Note only 10 show
    5 - Apply patch
    6 - All items show
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7e991d0702dac22e1a578b9544c2029f73a34f17
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Aug 16 12:14:06 2022 +0200

    Bug 29939: Use the REST API for ratings
    
    This patch replaces opac-ratings-ajax.pl with a new REST API route
    POST /public/biblios/42/ratings
    
    Note that we could go further and refactor the 'start_rating' select
    code.
    
    Test plan:
    Test the "star ratings" feature at the OPAC, on the different page
    where it's displayed.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9c11c588c11bf50888796a6d1fe175a2ddc853bd
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 19 18:00:37 2022 +0000

    Bug 31425: Minor correction to patron categories admin title
    
    This patch corrects the patron categories administration template so
    that an extra angle bracket isn't included in the page title on the main
    view.
    
    To test, apply the patch and go to Administration -> Patron categories.
    The page title should read:
    
    Patron categories › Administration › Koha
    
    ...with no extra "›" at the beginning.
    
    Check that other views (new, edit, delete) are unaffected.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d128466dac1711e28f30b556f000f3ae0173bb4b
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Tue Aug 16 13:10:43 2022 +1200

    Bug 31352: Change 'Borrower name' to 'Patron name'
    
    Test plan:
    1. Go to Tools > Patron card creator > New > Card batch
    2. Enter a borrowernumber and click 'Add patron(s)'
    3. Observe a table with the leftmost column name 'Borrower name' loads
    4. Apply patch
    5. Refresh page
    6. Observe the leftmost column name is 'Patron name'
    
    Sponsored-by: Catalyst IT, New Zealand
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 35165e5f13ec11a62dea7f6b129f7f07c7ecb7f4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Aug 22 11:19:27 2022 -0300

    Bug 30718: (follow-up) index_records is called more times than we thought
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a11633379f8d9f6a933da7fa887b2e7966e3765a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jul 1 11:08:57 2022 +0000

    Bug 31076: Handle year limits with equal sign or colon
    
    To test:
    1 - Enable ES and index
    2 - Set expandedSearchOption to 'show'
    3 - Advanced search on staff and opac using Year field on staff and Publication date range on OPAC for:
        2005
        2005-
        -2005
        <2005
        >2005
        2005-2010
    4 - Confirm ranges don't work on staff side, but do on opac
    5 - Apply patch
    6 - Repeat searches - they work on both staff and opac
    7 - prove t/db_dependent/Koha/SearchEngine/Elasticsearch/QueryBuilder.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1611fc4c39ec13b69ac516400bd6e7df4513a5f5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Aug 19 16:26:23 2022 -0300

    Bug 31017: DBRev 22.06.00.036
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 136fae509192d3a92eda2cd0eb60f2b40351c4da
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Aug 19 16:22:13 2022 -0300

    Bug 31017: DBIC update
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 20dbec38f0db2cb9373527bfbc58164b086119ea
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Aug 10 17:24:51 2022 +0000

    Bug 31017: (follow-up) Add type field to api
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 532fde9f45ac834ebfeea327c1f4a556a9d66d7e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Aug 9 19:17:14 2022 +0000

    Bug 31017: Update field name to 'type'
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bfa2a1a148f6ac0c0ace39bebe294d0bcc38aa9a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jun 23 10:58:31 2022 +0000

    Bug 31017: Add new vendor_type field to edit screen and display
    
    This patch adds a new vendor_type field when creating/editing vendors
    and displays the field on search and details for a vendor
    
    To test:
     1 - Apply patch, update database
     2 - Edit/create a vendor in acquisitions
     3 - Note new 'Vendor type' field, free text in editor
     4 - Save a value
     5 - Confirm it displays in vendor search results and vendor main page
     6 - In Authorised values add a new value to 'VENDOR_TYPE' category
     7 - Confirm the description of VENDOR_TYPE shows and makes sense
     8 - Add/Edit a vendor, note the vendor type is now a dropdown selection
     9 - Save with a value
    10 - Confirm the description shows in results and vendor page and vendor details
    
    Signed-off-by: Caroline <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: KIT Library Germany <michaela.sieber@kit.edu>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f0010cb39d400cad6942832f4ccaff1151c98446
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jun 23 10:57:31 2022 +0000

    Bug 31017: DB Updates
    
    Signed-off-by: KIT Library Germany <michaela.sieber@kit.edu>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7b645b0208182520d91ff370b6a4e5b79549d2e0
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Jun 23 21:38:11 2022 -1000

    Bug 28327: (follow-up) Comma as default CSV delimiter
    
    Looks like most of existing code wants comma as default value.
    
    Also impact installer/data/mysql/mandatory/sysprefs.sql.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 381b79593e2a86c4d856242a1f6e955d95ae1f24
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed May 12 12:00:31 2021 +0200

    Bug 28327: Unify CSV delimiter special behavior for tabulation
    
    System preference 'CSVdelimiter' has a special case for tabulation.
    Preference value contains string 'tabulation' but string '\t' must be used in CSV file.
    
    This is OK in many places, for exemple Bug 17590.
    
    This patch adds C4::Context->csv_delimiter to add a uniq metod dealing
    with this behavior.
    Also create Koha::Template::Plugin::Koha->CSVDelimiter for calls from
    Toolkit Templates.
    
    Test plan :
    1) Set system preference 'CSVdelimiter' = 'tabs'.
    2) Create CSV export in impacted pages
    3) Check columns are separated by tabulation character and not string 'tabulation'
    4) Check with another delimiter
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a2e9b440742bb3e207d1906d3c478b936eb277f2
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Mon Mar 21 21:48:50 2022 -1000

    Bug 28327: Add unit tests
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2b963d3683a639b27e90d0a9bf31d45e9eaae36f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Aug 19 15:51:21 2022 -0300

    Bug 29955: (QA follow-up) Tidy code block
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b760eb47256c3a4284df2d01bd042c164d7e94b0
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Jan 26 15:58:26 2022 +0100

    Bug 29955: Move populate_order_with_prices to Koha namespace
    
    and split the subroutine into 2 smaller subroutines (one for ordering,
    the other for receiving)
    
    Test plan:
    1. Create a vendor and an acquisition basket
    2. In this basket, create new orders using all the different methods
       (from an existing record, from a suggestion, from a new record, ...)
       then close the basket and receive these orders.
       Make sure it works the same with and without the patch
    3. Run tests in t/Prices.t,
       t/db_dependent/Acquisition/populate_order_with_prices.t, and
       t/db_dependent/Budgets.t
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 39df2a2a3d81d7dc5bc2e04ef69129c4d8647110
Author: Thomas Klausner <domm@plix.at>
Date:   Thu Mar 3 15:39:20 2022 +0100

    Bug 30218: Add subfield g to field 150 in C4::Heading::MARC21 mappings
    
    When creating authorities via SRU or linking exising authorities
    (via cgi-bin/koha/authorities/auth_finder.pl) the search results are
    generated using the hardcoded mappings $bib_heading_fields /
    $auth_heading_field from C4::Heading::MARC21. For TOPIC_TERM / field 150
    these mappings currently include the subfield `abvxyz68`.
    
    But: We are using the GND provided by Deutsche Nationalbibliothek.
    We imported some authorities from there, for example:
    
    http://d-nb.info/gnd/4114171-4 "Kind <0-3 Jahre>" (kid 0-3 years)
    http://d-nb.info/gnd/4196417-2 "Kind <0-4 Jahre>" (kid 0-4 years)
    
    When searching for these terms, Koha only displays "Kind", which is not
    very helpful, as there are a lot of different authorities for different
    age bands.
    
    GND stores "Kind" in 150a, and "0-3 Jahre" in 150g.
    
    But in the hardcoded mappings used by Koha, subfield g is not included.
    
    This patch adds subfield g to these mappings, thus making it possible to
    easily select the correct authority.
    
    Test plan:
    * Create an authority (or edit an existing one) and set 150g to "foo"
    * Create a new biblio (or edit an existing one), go to field 650 and click
      on the search-icon on the right.
    * A popup should open, where you can search for "Authority type: TOPIC_TERM",
      enter the name of the authority (150a!) in the search box
    * In the resulting list, you will only see the value of 150a.
    * Apply the patch
    * Search again, now you should see "foo" in the result list
    
    Sponsored-by: Steiermärkische Landesbibliothek
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 85f997744afec8cf1eedfc6d7cfd04e61f988e5f
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Aug 18 08:44:44 2022 +0000

    Bug 31385: (follow-up) Add code based URL on the staff CMS view
    
    Test plan:
    Create a page with contents in two languages.
    Verify that the Default URL shows the default content and the
    Current language URL shows content based on active language.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f72b721858d2775d1374cfddfae7df71d7713f37
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Aug 18 07:29:35 2022 +0000

    Bug 31385: (follow-up) Same change at intranet side
    
    Test plan:
    Try at staff side: tools/page.pl?code=CODE
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 136c752ab1050e350c19fb1756e494559d81f91c
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Aug 17 13:41:53 2022 +0000

    Bug 31385: Allow searching a CMS page by code
    
    Test plan:
    Add a CMS page with two languages for it.
    Look at the code column in the DB.
    Try opac/opac-page.pl?code=[CODE]&lang=[LANG]. Test leaving lang
    empty and passing various languages.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Edit: I squashed the lang => language patch

commit 0b9a82541b5f77c5aa91050566af45422bbc0918
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 12 15:19:10 2022 +0200

    Bug 31343: Prevent two nodes #holdscr on waiting reserves
    
    Two nodes with id="holdscr" existed on this patch. I guess the table
    was not initiated properly before 31138 neither.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e722a538695281bf67d984d5d9bfb41397fb5a77
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 12 15:17:45 2022 +0200

    Bug 31343: (bug 31138 follow-up) Don't hide error
    
    Some errors are not passing settings and so the error is hidden
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5ea78fe9f348cd1c63537169945799ad45fd4a22
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Aug 19 11:00:42 2022 -0300

    Bug 30941: (QA follow-up) Only export what is needed
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b30d2363b69b69dee28f8e27cae968b20f1be199
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Aug 19 10:12:06 2022 -0300

    Bug 30718: Fix imports
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1eb2c4337b736cc53a72b76a4b2f6700c410b915
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Aug 18 14:00:54 2022 -0300

    Bug 31395: Only try to cancel holds if item found
    
    This patch makes the code dealing with waiting holds with cancellation
    requests be dependent on the fact an item has been found.
    
    The returns.pl controller is a bit messy as the real return takes place
    outside the main `if ($item)` block. This should be refactored and
    probably run inside a transaction...
    
    In the meantime this patch will make the job.
    
    To test:
    1. Try to return an invalid barcode (e.g. ASDQWE)
    => FAIL: Things explode
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: Doesn't explode!
    4. Verify that returning an item with a waiting hold with cancellation
       requests still cancells the hold.
    => SUCCESS: It does!
    5. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9afbe872b7e63ce1d88cf6896df3b1046529212b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Aug 2 09:24:57 2022 -0300

    Bug 31282: Fix broken characters in patron_emailer.pl verbose mode
    
    To test:
    1. Have a report containing:
       SELECT tomascohen@theke.io;
    2. Have a members notice containing ¡ and other non-ASCII characters.
    3. Run (changing the report number and notice code accordingly):
       $ kshell
      k$ perl misc/cronjobs/patron_emailer.pl --report 4 \
               --notice BIRTHDAY --from tomascohen@theke.io --module members
    => FAIL: non-ASCII characters are broken
    4. Apply this patch
    5. Repeat 3
    => SUCCESS: Things print correctly!
    6. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 038a66f113ebb06277744f6770bf5fd4c1380622
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Aug 19 09:06:57 2022 -0300

    Bug 30941: (QA follow-up) Import methods explicitly
    
    By explicitly importing the Koha::I18N methods, I get rid of this error:
    
    kohadev-koha@kohadevbox:/kohadevbox/koha$ qa -c 2 --run-tests
    testing 2 commit(s) (applied to 9b2bf04 '09 Bug 30507: Value builder for field')
    
    Processing files before patches
    |========================>| 12 / 12 (100.00%)
    
    An error occurred : Inconsistent hierarchy during C3 merge of class 'Koha::I18N':
            current merge results [
                    Koha::I18N,
            ]
            merging failed on 'Exporter' at /kohadevbox/qa-test-tools/koha-qa.pl line 112.
    
    This happens because the Koha::I18N library is exporting all its methods
    explicitly and, by design, the __ methods used in value builders cannot
    determine which of the imported methods to use i.e. if Koha::I118N::__
    or Koha::CodeList::Unimarc::MediumOfPerformance:__
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 42b4778bd0fee3c8b054c6cbed93bcdd68d0c99a
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Aug 19 11:22:17 2022 +0000

    Bug 30941: (QA follow-up) Add exec flag to scripts
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 66dbdf5da88e1c5956794d72393e4fec00f90b86
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Jan 19 16:09:28 2022 +0100

    Bug 30941: Add cataloguing plugins for 146$bcdef (UNIMARC)
    
    Test plan:
    1. Configure the default MARC framework to use those value builders:
       - unimarc_field_146b for 146$b
       - unimarc_field_146c for 146$c
       - unimarc_field_146d for 146$d
       - unimarc_field_146e for 146$e
       - unimarc_field_146f for 146$f
    2. Verify that they all work correctly according to
    https://www.ifla.org/files/assets/uca/unimarc_updates/BIBLIOGRAPHIC/u-b_146.pdf
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9b2bf04e09fe60391976069fa54312b4a5028a79
Author: Jérémy Breuillard <jeremy.breuillard@biblibre.com>
Date:   Fri Mar 4 14:16:33 2022 +0100

    Bug 30507: Value builder for field 183
    
    This patch provides values builders for the subfields $a and $2. Those are unimarc official codes who help to
    identify the kind of items
    Test plan:
    1)Go to Home > Cataloging > New record
    2)Section 1 - field 183 : it contains subfields $a & $2
    3)Inputs are writable but notice that no plugins are suggested
    4)Apply patch and repeat 1) to 3)
    5)Values builders plugins are available for $a and $2
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 94423e6d631bed3292fd05a1ad8eaf7f011b9285
Author: Jérémy Breuillard <jeremy.breuillard@biblibre.com>
Date:   Fri Mar 4 14:16:33 2022 +0100

    Bug 30506: Value builder for field 182
    
    This patch provides values builders for the subfields $a, $c and $2. Those are unimarc official codes who help to
    identify the kind of items
    Test plan:
    1)Go to Home > Cataloging > New record
    2)Section 1 - field 182 : it contains subfields $a, $c & $2
    3)Inputs are writable but notice that no plugins are suggested
    4)Apply patch and repeat 1) to 3)
    5)Values builders plugins are available for $a, $c and $2
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c3ae151d93bfed5ec019d1811843c1e683d1db35
Author: Jérémy Breuillard <jeremy.breuillard@biblibre.com>
Date:   Thu Mar 3 10:32:04 2022 +0100

    Bug 30504: Value builder for field 181
    
    This patch provides values builders for the subfields $a, $b, $c and $2. Those are unimarc official codes who help to identify the kind of items
    
    Test plan:
    1)Go to Home > Cataloging > New record
    2)Section 1 - field 181 : it contains subfields $a, $b, $c & $2
    3)Inputs are writable but notice that no plugins are suggested
    4)Apply patch and repeat 1) to 3)
    5)Values builders plugins are available for $a, $b, $c and $2
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e94665bba5c5a43c8a57b1700fe1d38c67b7ce26
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Aug 19 09:37:40 2022 +0000

    Bug 30718: (QA follow-up) Remove double use KohaDates
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1b96a5f58882298535bf2ea45a4996a9de8d2ad5
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Aug 19 09:04:49 2022 +0000

    Bug 30718: (QA follow-up) KohaDates filter on inputs
    
    Found another one on a visible input. Replaced with html filter.
    koha-tmpl/intranet-tmpl/prog/en/modules/onboarding/onboardingstep2.tt:                                            <input type="text" class="enrolmentperioddate" name="enrolmentperioddate" id="enrolmentperioddate" value="[% category.enrolmentperioddate | $KohaDates %]" />
    
    But we also have a few hidden ones. First verified that cleanborrowers did not work anymore with expirydate.
    Fixed it with passing iso dateformat to resolve.
    intranet-tmpl/prog/en/modules/acqui/parcels.tt:            <input type="hidden" name="shipmentdate" value="[% shipmentdate | $KohaDates %]" />
    intranet-tmpl/prog/en/modules/serials/subscription-add.tt:                                          <input type="hidden" id="acqui_date" name="firstacquidate" value="[% firstacquidate | $KohaDates %]"/>
    intranet-tmpl/prog/en/modules/tools/batch_extend_due_dates.tt:                                    <input type="hidden" name="new_hard_due_date" value="[% new_hard_due_date | $KohaDates %]" />
    intranet-tmpl/prog/en/modules/tools/cleanborrowers.tt:            <input type="hidden" name="not_borrowed_since" value="[% not_borrowed_since | $KohaDates %]" />
    intranet-tmpl/prog/en/modules/tools/cleanborrowers.tt:            <input type="hidden" name="last_issue_date" value="[% last_issue_date | $KohaDates %]" />
    intranet-tmpl/prog/en/modules/tools/cleanborrowers.tt:            <input type="hidden" name="borrower_dateexpiry" value="[% borrower_dateexpiry | $KohaDates %]" />
    intranet-tmpl/prog/en/modules/tools/cleanborrowers.tt:                <input type="hidden" name="borrower_lastseen" value="[% borrower_lastseen | $KohaDates %]" />
    
    Test plan:
    Try cleanborrowers with expiry date.
    cd koha-tmpl; git grep "<input.*\$KohaDates" | grep -v iso
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3a85da0db66f534418bbd37c141ef105605b3fd2
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Aug 19 08:35:14 2022 +0000

    Bug 30718: (QA follow-up) Apply prevent duplication on OPAC too
    
    See former intranet side patch.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7b0567a3ab0bbf3788deeeff41f1cd85796b3fab
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 10 10:28:32 2022 +0200

    Bug 30718: Fix serial claims filters
    
    https://bugs.koha-community.org/show_bug.cgi?id=30718
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5f471308ad74d2a26e226cf99bc7fa708025159a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Aug 9 08:41:37 2022 +0200

    Bug 30718: Fix renewal with due date
    
    This was a test added by the following commit:
    
    commit 99eccc18ed4a21fa416a3d61fed3f70825dc2203
    Date:   Thu Jun 16 10:10:09 2011 +0100
        Bug 5549 : Handle datetimes on return
    
    It's no longer needed now, we can pass a DateTime or an ISO-formatted
    date
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 55c5f1fd470496a86fda536e699ae39622668f13
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 5 11:13:30 2022 +0200

    Bug 30718: Fix dates display at the OPAC
    
    Found dateofbirth so far, do we have others?
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c59bb7874c99afd3969ba02c5a84c14a98849be4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 5 11:10:42 2022 +0200

    Bug 30718: Apply flatpickr changes to OPAC
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 97a4b3c61da522f35628f80382d21bbff56b76ba
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 19 14:33:24 2022 +0200

    Bug 30718: Prevent 'reset' icon to appear twice
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 41a1806143665a82930e8c83bd05f5e695514748
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 19 14:23:10 2022 +0200

    Bug 30718: Fix time display
    
    Especifically when timeformat=12h
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 71da0083631b70d740c42de2cd56ca09c0704111
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 18 15:27:22 2022 +0200

    Bug 30718: Fix scheduler
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9f50ac9963dcb72310474029a792d120128ed2bb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 18 15:13:17 2022 +0200

    Bug 30718: Fix holidays
    
    Template process failed: undef error - The given date (07/18/2022) does not match the date format (iso)
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 11a76929d71f7cdab0a2412f15671fb212c26c77
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 18 15:10:59 2022 +0200

    Bug 30718: Add missing USE KohaDates
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bd71767fcc0df1776092102c1a159d609b8d5efb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 18 15:10:02 2022 +0200

    Bug 30718: Fix serials/showpredictionpattern.pl
    
    Can't locate object method "ymd" via package "2022-02-01" (perhaps you forgot to load "2022-02-01"?) at /kohadevbox/koha/serials/showpredictionpattern.pl line 100
    eval {...} at /kohadevbox/koha/serials/showpredictionpattern.pl line 2
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8352a4ebd66adf8841f42120e9bd890046e1fd0f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 18 15:09:42 2022 +0200

    Bug 30718: Fix today's date on overdue
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c07ce1a1bfbf6c1eef8000c9470356893e9f8ff7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 14 15:24:19 2022 +0200

    Bug 30718: Pass DT to filter_by_lates
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 48bf9b1d91dbbc336f859ac1a83d7d25b0e6a3c1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 11 16:14:38 2022 +0200

    Bug 30718: Use flatpickr's altInput
    
    The idea rely on the KohaDates TT plugin for the date formatting. We
    should not have any output_pref calls in pl or pm (there are some
    exceptions, for ILSDI for instance).
    
    Also flatpickr will deal with the places where dates are inputed. We
    will pass the raw SQL value (what we call 'iso' in Koha::DateUtils), and
    the controller will receive the same value, no need to additional
    conversion.
    Note that DBIC has the capability to auto-deflate DateTime objects,
    which makes things way easier. We can either pass the value we receive
    from the controller, or pass a DT object to our methods.
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b02b66acf5ddac1af00215fbcc1d842777b67c3b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Aug 17 11:56:37 2022 +0000

    Bug 30779: Remove _update_import_record_marc and update tests
    
    This patch removes the now unused: _update_import_record_marc
    
    Additionally, as items are already present in import biblio we no longer need to embed
    them, so that parameter is removed and the option removed from the sub and pod and everywhere
    it was used
    
    In all cases, we were embedding, so we don't need a way to get without
    
    Tests updated
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b1ec071866de33ef0eb37cc74b62c8ed77d6afad
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon May 16 19:57:23 2022 +0000

    Bug 30779: Do not update import marc after importing items
    
    We are stripping the marc item tags at import - we save them when not importing items, but
    strip when importing items
    
    I think we can save on writes by leaving them in the record. This also allows comparison to what was staged
    versus items created
    
    To test:
     1 - Stage a marc record with items, but do not look for items
     2 - Confirm the item tags remain in staged marc
     3 - Import the record
     4 - Confirm items are nto in imported marc record
     5 - Stage the record again, but look for items
     6 - Confirm the item tags are stipped from imported record
     7 - Import and confirm imported record has no item tags
     8 - Apply patch and repeat 1-5
     9 - Confirm item tags remain in record
    10 - Import and confirm item tags not in imported marc
    
    Signed-off-by: Andrew <andrewfh@dubcolib.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c88120688f00dda5c8938fe0265c3e045c039ac0
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Wed Aug 17 13:50:01 2022 +0000

    Bug 30684: (follow-up) Use log_warning_msg for the "not running" warning
    
    Also, return 0 rather than return 1 in else clause of koha-zebra
    
    Sponsored-by: Catalyst IT, New Zealand
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3227b6136d0bc19eb551878e4487004bdd550a04
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Tue Jun 7 05:42:20 2022 +0000

    Bug 30684: When a service isn't running koha-* scripts --restart should start it
    
    Test plan:
    1. Stop plack, indexer, sip, worker, z3950 and zebra.
    
    Note: To test Z39.50 restarting you will need to setup the server: https://wiki.koha-community.org/wiki/Setting_up_the_Z39.50_and_SRU_Server#Setting_up_the_Z39.50_and_SRU_Server
    
    2. Run restart command for each service:
    - [Plack] sudo koha-plack --restart {instance}
    - [Indexer] sudo koha-indexer --restart {instance}
    - [SIP] sudo koha-sip --restart {instance}
    - [Worker] sudo koha-worker --restart {instance}
    - [z3950] sudo koha-z3950-responder --restart {instance}
    - [Zebra] sudo koha-zebra --restart {instance}
    
    3. Observe the services do not get restarted.
    Instead you get an error saying the service is not running
    
    4. Apply patch
    
    5. If you are using kohadevbox you must copy koha-* scripts to /usr/sbin/:
    sudo cp debian/scripts/koha-plack /usr/sbin/koha-plack
    sudo cp debian/scripts/koha-indexer /usr/sbin/koha-indexer
    sudo cp debian/scripts/koha-sip /usr/sbin/koha-sip
    sudo cp debian/scripts/koha-worker /usr/sbin/koha-worker
    sudo cp debian/scripts/koha-z3950-responder /usr/sbin/koha-z3950-responder
    sudo cp debian/scripts/koha-zebra /usr/sbin/koha-zebra
    
    6. Repeat step 2
    
    7. This time confirm that each service is restarted
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cbe50d798a42b65d4439d30df6bbf2ab6623bbcd
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Tue Jul 26 16:38:29 2022 +1200

    Bug 31217: OPAC coce.js is not hiding the coce-coverimg div for single-pixel images
    
    This is because opac-detail.tt has coce-coverimg as an ID, but OPAC
    coce.js targets coce-coverimg as a class.
    
    opac-detail.tt should be changed to have coce-coverimg as a class.
    
    Test plan:
    1. Set your system preferences:
    - CoceHost = https://coce.mykoha.co.nz
    - CoceProviders = Select all
    - OpacCoce = Enable
    
    2. Add the ISBN of '9780262336499' to a biblio
    
    3. Open a "Incognito" window in your browser (recommended to use Google
    Chrome to test this)
    
    4. View the biblio detail page in the OPAC. Observe a 'Coce image from
    Amazon' box loads with a spinner
    
    5. Apply patch and restart services
    
    6. Clear your browser cache
    
    7. Reload the same biblio detail page in the OPAC. Observe no image is
    displayed.
    
    8. View another OPAC biblio detail page that does have a successfully
    loading coce image and confirm the source of that image is listed: For
    example 'Coce image from Amazon.com' is displayed
    
    Sponsored-by: Toi Ohomai Institute of Technology, New Zealand
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 52734ca9bee39e66f389e502f11d00f35ef90dbd
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Aug 18 09:44:03 2022 +0100

    Bug 28854: (follow-up) Remove errant warning
    
    Oops, I left in a bare warn from debugging.. this simply removes it; it
    is unrequired.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 218419ce2c2502bcad0f8285173b4493d7e9e8fc
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Aug 17 11:09:14 2022 +0000

    Bug 31382: Pass password_has_expired param to templte
    
    This patch restores the param, while still leaving the check against invalid
    login credentials to ensure we don't leak information.
    
    To test:
     1 - enable  EnableExpiredPasswordReset
     2 - Edit a patron to set password to expire in the past
     3 - Attempt opac login as patron
     4 - It fails, but you are redirected to login screen with no info
     5 - Apply patch
     6 - Attempt login
     7 - You are notified password expired and given reset link
     8 - Go back to login screen
     9 - Login with correct username,, wrong password
    10 - You are notified of incorrect credentials, not password expiration
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 217e953ffb81cbac7f57521d3c0c7568995bb11d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Aug 17 15:40:07 2022 -0300

    Bug 31382: Regression tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7343e404b7b486c52a150613f308e452f4f5da05
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jul 22 14:47:36 2022 +0000

    Bug 31222: Reduce query size for batchMod
    
    The object search is currently:
    Koha::Items->search({ barcode => \@contentlist }
    
    Which generate code like:
    barcode = 1 OR barcode = 2 OR barcode = 3 ....
    
    This can get quite large
    
    We can reduce the query size by using -in:
    Koha::Items->search({ barcode => { -in => \@contentlist } }
    
    Which generates code like:
    barcode in ( 1, 2, 3 )
    
    To test:
    1 - Apply patch
    2 - Perform batch modifications
    3 - Confirm nothing has changed
    
    Signed-off-by: Rachael Laritz <rachael.laritz@inlibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 89e65657b106570b717dede6476a6d6f65511b67
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Aug 16 12:02:13 2022 +0000

    Bug 29782: Fix handling records without title or content
    
    Test plan:
    Save a new record with only a title in the non-default tab (english).
    Check if you see it on the list. Edit.
    Save a new record without title but only content in non-default lang.
    Check if you see it.
    Do the same 2 edits on the default tab only. Verify too.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5ec01dd3261b5aefdd9b5feaaa059c3fb300ac55
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Aug 17 10:33:07 2022 -0300

    Bug 27342: Fix C4::ILSDI::Services::AuthenticatePatron
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit daef044b6f876ea2555c4520e6c91319d2760d25
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Wed Aug 10 15:32:24 2022 +0000

    Bug 31228: Intranet coce.js is not hiding the coce-coverimg div for single-pixel image
    
    This is because the intranet detail.tt has coce-coverimg as an ID.
    Intranet results.tt has coce-coverimg as a class. Intranet coce.js
    targets coce-coverimg as a class.
    
    Intranet detail.tt should be changed to have coce-coverimg as a class.
    This is inline with the change made to the OPAC in bug 31217
    
    Test plan:
    1. Set your system preferences:
    - CoceHost = https://coce.mykoha.co.nz
    - CoceProviders = Select all
    - IntranetCoce = Enable
    
    2. Add the ISBN of '9780262336499' to a biblio
    
    3. Open a "Incognito" window in your browser (recommended to use Google
    Chrome to test this)
    
    4. View the biblio detail page in the intranet. Observe a 'Coce image
    from Amazon' box loads with a spinner
    
    5. Apply patch and restart services
    
    6. Clear your browser cache
    
    7. Reload the same biblio detail page in the intranet. Observe no image
    is displayed.
    
    8. Do an intranet search to get the biblio returned in search results
    page. Confirm no cover image box is displayed
    
    9. View the intranet search result and detail pages for a different
    biblio that you know Coce should be displaying the cover image of and
    confirm that it is correctly displayed with the source of that image
    listed: For example 'Coce image from Amazon.com' is displayed
    
    Sponsored-by: Catalyst IT, New Zealand
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 01985605434b7b78cb8f234f8ea66e0a16b3f8c5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jan 7 13:44:33 2021 +0100

    Bug 19540: Tell the patron why a hold cannot be placed on items
    
    This patch adds an explanation when a hold cannot be placed, in some situation:
    tooManyReserves
    tooManyHoldsForThisRecord
    tooManyReservesToday
    itemAlreadyOnHold
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 089f5a4cf5c0ec2ae68aef9d5f3aaef47e19ad5c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon May 16 19:37:59 2022 +0000

    Bug 26632: Remove two more occurrences
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 66c5ab528cf9ed8afa23dd6f14ddf890ef1e9039
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon May 16 19:32:03 2022 +0000

    Bug 26632: (Bug 22532 follow-up) Remove random variables
    
    AddBiblioToBatch and AddAuthToBatch were btoh passing a random number for the
    parameter $update_counts
    
    This simply removes that value as should have been done on 22532
    
    To test:
    1 - Stage a marc file
    2 - Confirm it works befor and after patch
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d2d78e2581419dd3d8101fd9aecf358c71213733
Author: Johanna Raisa <johanna.raisa@gmail.com>
Date:   Tue Jul 26 12:01:56 2022 +0300

    Bug 23202: Fix screen freeze when ordereing several items
    
    This patch fixes adding multiple items on order acquisitions
    
    The error is: Uncaught TypeError: $(...).parent(...).attr(...) is undefined
    
    Test plan:
    1) Set dateaccessioned.pl plugin to ACQ framework's 952$d field.
    2) Create basket to a vendor and add order from a new empty record.
    3) Add date acquired value from calendar.
    4) Add multiple items and see that the view freezes.
    5) Apply the patch
    6) Reload the page and repeat the steps 3 and 4.
    7) See that the items are added.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    JD Amended patch: adjust commit title
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f433875363462b363e688fec6119e596c2457309
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 17 10:16:26 2022 +0200

    Bug 31313: Fix holds_count and priority
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 01091c80893caab0c5b3a99397be658e3a537ead
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Aug 15 17:31:57 2022 +1200

    Bug 15326: (follow-up) Fix staff permissions and consider library limits
    
    To test:
    1. Take note of what your logged in library is
    2. Add a new page that can be viewed on the OPAC and staff interface.
    Limit the library to a different library, not your logged in library
    3. Use a News item to create a hyperlink to your new page on the OPAC
    and staff interface.
    4. Confirm that a page error shows if you try to view the new page.
    5. Edit the new page and set the library to All libraries.
    6. Try to go to the new page again and confirm it shows.
    7. Log out and log back into the staff interface as a staff user that
    isn't a superlibrarian
    8. Confirm you can view the new page as this user
    
    Sponsored-by: Horowhenua Libraries Trust
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e55864db2747bd8bc139b3b26c0f5214f1958123
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Aug 2 12:40:04 2022 +1200

    Bug 15326: (follow-up) Hide RSS feed if no news items
    
    If there are pages but no news items showing on the OPAC, the RSS feed container
    should not show.
    
    Sponsored-by: Horowhenua Libraries Trust
    
    Signed-off-by: Lisette Scheer <lisettePalouse+Koha@gmail.com>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8de80449dde00b985d99c23b168c12d3d94b4794
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Fri Dec 17 02:06:51 2021 +0000

    Bug 15326: Using AdditionalContents for custom pages on OPAC
    
    This page utilises the Additional Contents feature to add custom pages
    to the staff client and the OPAC in the user's desired language.
    
    To test:
    1. Apply patch and restart services
    2. In the staff client, go to Tools, then go to the new 'Pages' page
    3. Add a new page to display on both the staff client and OPAC.
    4. Confirm the URLs in the Page URL column work as expected.
    5. Confirm that any pages made for the staff client only do not show in
    the OPAC, and that any pages made for the OPAC only do not show in the
    staff client.
    6. Confirm that pages do not show on the OPAC main page where news items
    show. Confirm news items show on the OPAC main page as expected.
    
    Sponsored-by: Chartered Accountants Australia and New Zealand
    
    Signed-off-by: Thibault Kero <thibault.keromnes@univ-paris8.fr>
    
    Signed-off-by: Lisette Scheer <lisettePalouse+Koha@gmail.com>
    
    Signed-off-by: Lisette Scheer <lisettePalouse+Koha@gmail.com>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5c1db538e6c25da27484e39ae619e09779aac1c2
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Aug 11 05:40:45 2022 +0000

    Bug 31294: Show "Required" label on mandatory fields
    
    This patch adds "Required" label on mandatory fields for Article Requests
    
    0. Apply the patch
    1. koha-plack --restart kohadev
    2. Change syspref 'ArticleRequests' to 'Enable'
    3. Change syspref 'ArticleRequestsMandatoryFields' to '[Select all]'
    4. Go to http://localhost:8080/cgi-bin/koha/opac-search.pl?idx=&q=test&weight_search=1
    5. Click "Request article" for "Gairm"
    6. Note that "Title", "Author", "Volume", "Issue", "Date", "Pages", and
       "Chapters" all say required
    7. Change syspref 'ArticleRequestsMandatoryFields' to 'Title' and
       'Author'
    8. Go to http://localhost:8080/cgi-bin/koha/opac-request-article.pl?biblionumber=29
    9. Note that only "Title" and "Author" say required
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 21e4995a3163de70a4744f47f015c98614ed03f9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Aug 16 10:50:47 2022 -0300

    Bug 27342: (QA follow-up) Fix test
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a433573054324275be01be3e0cacf2dfb2d1dd20
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Aug 10 08:12:53 2022 +0100

    Bug 27342: (QA follow-up) Remove dbh from new tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1b92fd78fda847b366ae44f351f20d92b6691226
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 5 11:28:16 2021 +0100

    Bug 27342: Remove dbh from C4::Auth
    
    We must not pass $dbh but retrieve it when needed instead
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4c44dd5eb4d27cfddcd982a5e7e11dc595d88772
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 5 11:18:26 2021 +0100

    Bug 27342: Improve test for OPAC
    
    We don't need to build allowed_scripts_for_private_opac for staff
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 18211bf23367af9a3b0da6f97b413199a1668604
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Jun 29 15:01:38 2022 -0400

    Bug 30901: Add Unit Tests
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 58f401de9c98cc917135029d3f892ebd7e0a4949
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jun 3 13:34:53 2022 -0400

    Bug 30901: Add POD for Koha::Template::Plugin::CirculationRules
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 32475570c4b98ba5d0fd0e51634013eb4ffdf835
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jun 3 13:14:06 2022 -0400

    Bug 30901: Add Renewals method to CirculationRules template plugin
    
    It would be useful to be able to report renewals used/remaining in some notices and slips.
    
    Test Plan:
    1) Apply this patch
    2) Add the following to the RENEWAL notices:
    --
    [% USE CirculationRules %]
    [% SET renewals = CirculationRules.Renewals( borrower.id, item.id ) %]
    You have used [% renewals.count %] of [% renewals.allowed %], you have [% renewals.remaining %] renewals left.
    --
    3) Trigger a renewal notice
    4) Verify the text is correct!
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bd70e8989fc02040a751f13c7d291d40e2dd91d7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 2 11:38:02 2022 +0200

    Bug 31312: Remove GetItemsInfo from misc/migration_tools/rebuild_zebra.pl
    
    Hum... Item2Marc ok here?
    
    Bug 27272 is going to remove C4::Items::GetItemsInfo in favour of Koha::Items->search.
    
    Here we are going to deal with misc/migration_tools/rebuild_zebra.pl
    
    Test plan:
    I am not sure, what do we want to test here? Items' info indexed
    correctly?
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit db4293988551bd25eede41ee5e3b92c7ad02c797
Author: Shi Yao Wang <shi-yao.wang@inlibro.com>
Date:   Wed Jul 6 10:47:03 2022 -0400

    Bug 30922: Make the "Relative's checkouts" table configurable by the table settings
    
    Adds "relatives-issues-table" in table settings.
    
    Test plan:
    1- Apply the patch
    2- Check out an item to a patron with a guarantor
    3- Go to the guarantor's "details" and "check out" page > relatives'
    checkouts and look at the different columns (you should see collection
    and location)
    4- Go to
        admin > table settings > patron > moremember > relatives-issues-table
     or
        admin > table settings > circulation > circulation >
    relatives-issues-table
    to hide some columns (e.g. collection and location) and click save
    5- Do step 3 again and notice some columns (e.g. collection and location) are hidden
    6- Also notice the "Columns" and "Export" buttons that should work as
    intended
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 015dcce2ab614ec409c99ea6fb4d57e782d9ac5f
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Dec 9 16:07:18 2021 +0100

    Bug 29673: Allow English sql localization script
    
    Test plan:
    You might want to add a simple SQL statement to your English
    custom.sql in order to verify the execution.
    Run a Koha install (in English).
    Check if the data shows your custom sql action.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7d47c1bc77ad2d49c69c580ab3c16b094ca90973
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Aug 16 10:19:56 2022 -0300

    Bug 29723: (QA follow-up) _ vs __
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ed6301444ec37b462e64ae87d2efd9c972a1b144
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Aug 10 14:52:53 2022 +0100

    Bug 29723: (QA follow-up) Ensure ID's match Module names
    
    There was a disparity between module codes and how it was used to
    construct ID's for various elements.. this patch updates ID's to match
    codes for circulation and illrequests.
    
    Signed-off-by: Andrew <andrewfh@dubcolib.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a9ffc07a1d9d50785d1031772e96c56a27f8ce85
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Aug 10 12:14:35 2022 +0100

    Bug 29723: (QA follow-up) Correct scroll to table
    
    This patch enabled scrolling directly to the correct table configuration when clicking the 'Configure this table'
    button from any KohaTable/kohaTable table in Koha.
    
    Test plan
    1. Navigate to Administration > Cities
    2. Click 'Configure this table'
    3. Confirm the result is the table settings page and you are scrolled to
       the cities table configuration
    
    Signed-off-by: Andrew <andrewfh@dubcolib.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c8c8ef9d2edaeb77d2b92042ad397458cb85c917
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Aug 10 11:27:18 2022 +0100

    Bug 29723: (QA follow-up) Switch to using ID's on column settings
    
    This patch updates the column settings page to use ID's instead of
    Indexes to restor the open accordian card after a setting change.
    
    Test plan
    1 Go to Administration -> Table settings.
    2 All panels should be collapsed.
    3 Test expanding and collapsing panels to confirm it's working
      correctly.
    4 Make a change to one of the table configurations. After clicking
      "Save" the page should reload with the same panel expanded.
    
    Signed-off-by: Andrew <andrewfh@dubcolib.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ebf1ad39f855e4625d1217fb1e6a4ddb390a7a34
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Aug 10 08:36:18 2022 +0100

    Bug 29723: (QA follow-up) Make button text translatable
    
    This patch makes the button text translatable. Whilst we're here I also added a wrench icon,
    set the title attribute and added a class.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Andrew <andrewfh@dubcolib.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 73178317a6c9395946662dd808c8d92ad061dd42
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Dec 17 10:19:35 2021 +0100

    Bug 29723: Add a "Configure table" button for KohaTable tables
    
    This patch suggests to have a "Configure table" button when a table can
    be configured in the "Table settings" administraition area.
    
    Test plan:
    Go to different views where the table can be configured (you an
    exhaustive list on bug 29648), notice the "Configure table" button (if
    you have the 'manage_column_config' subpermission.
    
    Note that the link is correct but the scrollbar is not adjusted at the
    correct position. Maybe we could improve that switching to the bootstrap
    accordion plugin?
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Andrew <andrewfh@dubcolib.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6bc85707baf453778b38856f32025aa84f4f2c14
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Aug 16 10:10:03 2022 -0300

    Bug 31313: Unit tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5a1bf540d1b73a18fabe3359018fa60f56d4ece1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 3 08:26:41 2022 +0200

    Bug 31318: Remove GetItemsInfo from serials/routing-preview
    
    Bug 27272 is going to remove C4::Items::GetItemsInfo in favour of Koha::Items->search_ordered.
    
    Here we are going to deal with serials/routing-preview
    
    Test plan:
    List items on the modified view and confirm that all the info is
    displayed correctly
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e627b437dc54a9494204f5d5ea7e989261d74cf3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 12 15:33:45 2022 +0000

    Bug 31314: (QA follow-up) Prefetch and make routines use result objects
    
    This reduces lookups for the related items that we now fetch in the templates
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 873170aa5225dec7b01ad043a846b451c3fffc2c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 12 15:04:30 2022 +0000

    Bug 31314: (QA follow-up) Search Koha::Items not $biblio->items
    
    To get the host items we need to search all items, not those limited to the
    same biblionumber
    
    To test:
    1 - Enable EasyAnalytics
    2 - Attach an item to a record
    3 - Confirm it is listed in the items list on opac reserve
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c61f2a64fc7e4b9a7c1560c6809bb5029c25eb46
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 3 07:44:46 2022 +0200

    Bug 31314: Remove GetHostItemsInfo and GetItemsInfo from opac-reserve
    
    Bug 27272 is going to remove C4::Items::GetItemsInfo in favour of Koha::Items->search_ordered.
    
    Here we are going to deal with opac-reserve
    
    Test plan:
    List items on the modified view and confirm that all the info is
    displayed correctly
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 05be7300acbec34a118de5c11787a9c784b8b808
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Aug 15 11:34:59 2022 +0000

    Bug 31313: (QA follow-up) Prefetch checkouts and branches
    
    This prefetches objects we are using in templates to avoid extar DB calls
    
    The branch fetches won't actually be used without the extra patch on 31314 that
    adapts home_branch and holding_branch routines to use result objects
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c46b2ab1cd0acb6b04d008a79d4bdf5730216cb4
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Aug 15 11:32:03 2022 +0000

    Bug 31313: (QA follow-up) Search Koha::Items
    
    This ensures host items from otehr biblios are returned as well
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 70cb4e22c0740eb175c4cd813cd38f9f5f635fa3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 1 08:59:53 2022 +0200

    Bug 31313: Fix availability - OPAC opac-detail
    
    Has to move some code to a method
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 959f49baf2cffd53859d701c9395c0ad9df5326f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 3 06:50:44 2022 +0200

    Bug 31313: Remove GetItemsInfo from opac-detail
    
    Bug 27272 is going to remove C4::Items::GetItemsInfo in favour of Koha::Items->search_ordered.
    
    Here we are going to deal with opac-detail
    
    Test plan:
    List items on the modified view and confirm that all the info is
    displayed correctly
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 992078f494c54643fa20b37f0c11b1392bf10323
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 3 08:33:00 2022 +0200

    Bug 31320: Remove GetItemsInfo from virtualshelves/sendshelf.pl
    
    And GetItemsLocationInfo from shelves.pl
    
    Bug 27272 is going to remove C4::Items::GetItemsInfo in favour of Koha::Items->search_ordered.
    
    Here we are going to deal with virtualshelves/sendshelf.pl
    
    Test plan:
    List items on the modified view and confirm that all the info is
    displayed correctly
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7a56800131590ec1d91a21a91825866d0bf5f242
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 3 08:23:55 2022 +0200

    Bug 31317: Remove GetItemsInfo import from opac-tags
    
    Bug 27272 is going to remove C4::Items::GetItemsInfo in favour of Koha::Items->search_ordered.
    
    Here we are going to deal with opac-tags
    
    Test plan:
    List items on the modified view and confirm that all the info is
    displayed correctly
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 86796446359e51a389634cb3f3822d3b792724ae
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 2 11:34:46 2022 +0200

    Bug 31310: Remove GetItemsInfo from catalogue/imageviewer
    
    Bug 27272 is going to remove C4::Items::GetItemsInfo in favour of Koha::Items->search_ordered.
    
    Here we are going to deal with catalogue/imageviewer
    
    Test plan:
    List items on the modified view and confirm that all the info is
    displayed correctly
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 42b6aea89c39bc819adc92b001748a031d4466c9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 2 11:33:40 2022 +0200

    Bug 31309: Remove GetItemsInfo from basket/sendbasket
    
    Why are we display with $raw?
    Why are we display the location code instead of the AV's lib?
    
    Bug 27272 is going to remove C4::Items::GetItemsInfo in favour of Koha::Items->search_ordered.
    
    Here we are going to deal with basket/sendbasket
    
    Test plan:
    List items on the modified view and confirm that all the info is
    displayed correctly
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit da470332493ae59f7caab358b1cd2ac2204cf5c0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 10 15:33:13 2022 +0200

    Bug 31328: Call get_transfers from get_transfer
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e58bb3d605736049ed289bf77fffb003fa8d3d51
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Aug 9 08:40:45 2022 -0300

    Bug 31328: Make Koha::Item->get_transfer* use Koha::Item::Transfers->filter_by_current
    
    This patch makes the get_transfer and get_transfers methods internally
    use the new ->filter_by_current method.
    
    To test:
    1. Run:
       $ kshell
      k$ prove t/db_dependent/Koha/Item.t
    => SUCCESS: Tests pass!
    2. Apply this rewriting patch
    3. Repeat 1
    => SUCCESS: Tests still pass!
    4. Sign off :-D
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b3d8941c34887b34c69edac8f33b7de179d96267
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Tue Aug 9 07:26:07 2022 +0000

    Bug 31302: Fix spelling in sample_notices.yml
    
    Test plan:
    1. Apply patch
    2. Confirm 'URL(s)', rather than urls(s), is in the line:
    You can download the scanned materials via the following URL(s)
    
    Sponsored-by: Catalyst IT, New Zealand
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 25de03ab10950c1afb0a1e59683f868a32d55f0a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Aug 10 11:53:13 2022 +0000

    Bug 31308: (QA follow-up) use count to see if no items present
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 62667dbb91478740d222d4daf3d1d5988f43442c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 2 11:31:38 2022 +0200

    Bug 31308: Remove GetItemsInfo from basket/basket
    
    Bug 27272 is going to remove C4::Items::GetItemsInfo in favour of
    Koha::Items->search_ordered.
    
    Here we are going to deal with basket/basket.pl
    
    Test plan:
    List items on the modified view and confirm that all the info is
    displayed correctly
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 89f2f369a61b43d396f90d77e1bd1941330a359f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 1 08:14:27 2022 +0200

    Bug 31158: (bug 23991 follow-up) Fix suggestion search by dates
    
    Search suggestions by date is broken, we don't remove the '_from' CGI
    params for the DBIC query
    DBIx::Class::Storage::DBI::_dbh_execute(): DBI Exception: DBD::mysql::st execute failed: Unknown column 'suggesteddate_from' in 'where clause' at /kohadevbox/koha/Koha/Objects.pm line 394
     at /usr/share/perl5/DBIx/Class/Exception.pm line 77
    
    Test plan:
    Create some suggestions, search for them using date range (suggested
    date, managed date and accepted date)
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5e29433bdc3a5ccd582ece6e2338c6e38e97c5d9
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Aug 1 10:47:04 2022 -0400

    Bug 31276: Report results are limited to 999,999 no matter the actual number of results
    
    In Koha, any report that uses C4::Reports::Guided will be limited to 999,999 rows. This is causing problems for larger libraries where some reports may have over a million results.
    
    Test Plan:
    1) Create a report "SELECT * FROM borrowers" and run it, note the number
       of results
    2) Apply this patch
    3) Add the line `<report_results_limit>3</report_results_limit>`
       within the <config> block of your koha-conf.xml
    4) Restart all the things!
    5) Run the report, download the results as a CSV
    6) Note your CSV only has 4 lines, the header and 3 patrons
    
    Signed-off-by: Rachael Laritz <rachael.laritz@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3f1fe4f178df3423bc95f9a288aaefdda6a6e8c0
Author: Magnus Enger <magnus@libriotech.no>
Date:   Tue Aug 9 06:49:54 2022 +0000

    Bug 31325: Fix koha-preferences get
    
    To reproduce:
    $ perl koha/misc/admin/koha-preferences get MarcFlavour
    This will output something like "HASH(0x55dd4d432840)".
    
    To test:
    Apply this patch and run the command again:
    $ perl koha/misc/admin/koha-preferences get MarcFlavour
    This should output something like "MARC21".
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 18b2389de49b5c403f7bd68ef315b044a201eff5
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Aug 7 16:14:37 2022 +0000

    Bug 31281: Use correct reply-to email when sending overdue mails
    
    Overdue emails are either sent from the issuing or the home
    library of an item. We never use the patron's home library,
    so the reply-to address must explicitly be set in EnqueueLetter.
    
    To test:
    - Set up 2 branches (A and B) with different email addresses.
    - Set up an SMTP server for each to use
    - Set up an overdue notice trigger for the patron category you'll use
      First letter: 1 day delay, any notice
    - Check out an item with home branch B to a patron from A
    - Run the the script with:
      overdue_notices.pl -t --frombranch item-homebranch
      overdue_notices.pl -t --frombranch item-issuebranch
    - Confirm for each setting that the correct email headers have been
      used. You can see the reply-to address and to-address in the
      message queue:
      SELECT * FROM message_queue;
    
    Signed-off-by: Nason Bimbe <nason.bimbe@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 10ced3c49485aa5cdfc0cd06cfff30ddb7f9afe7
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Aug 11 22:56:49 2022 +0000

    Bug 31346: Fix broken Syndetics links on OPAC detail page
    
    To test:
    -Have some Syndetics credentials
    -Turn on SyndeticsCoverImages
    -Look at some and you'll notice that Syndetics cover images dont always load
    -If you view the page source you'll see why. The links are built like this:
    https://secure.syndetics.com/index.aspx?isbn=/LC.GIF&amp;amp;client=bedf&amp;type=xw10&amp;upc=843501038123&amp;oclc=1311289389
    
    -Apply patch
    -Cover images should load properly.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 883d12913e32075f37b03135abe64e97d691739a
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Aug 9 14:31:05 2022 +0000

    Bug 31331: Add data-order attribute for better sorting of dates
    
    To test:
    1. I used the following suggestiondates:
    
    MariaDB [koha_kohadev]> select suggesteddate from suggestions;
    +---------------+
    | suggesteddate |
    +---------------+
    | 2022-01-03    |
    | 2022-08-09    |
    | 2022-02-22    |
    | 2021-01-21    |
    +---------------+
    
    2. Set the dateformat system preference to 'mm/dd/yyyy'.
    3. Try sorting the suggestion table by date, ascending and descending,
       it is not right.
    4. Apply patch
    5. Try sorting by date again, ascending and descending, it should now
       sort correctly.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 12bc623ae7bcbd03fd4c8505bf1c55010bb3d0f7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jul 26 10:12:05 2022 -0300

    Bug 31245: Do not try to report results if task not started
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Andrew <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 931f4bd79776215b8cb1e656d58abf80b7aad8db
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 27 10:35:08 2022 +0200

    Bug 31245: Do not call report for job detail view if job not started
    
    We should not generate the report if the job hasn't started yet
    
    Test plan:
    Stop the koha-worker processes, modify a new item using the batch mod
    tool, then see the detail page of the job
    
    Without this patch an error is generated:
    Can't use an undefined value as an ARRAY reference at /kohadevbox/koha/Koha/BackgroundJob/BatchUpdateItem.pm line 175
    
    Signed-off-by: Andrew <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1f098a8c866fecce9fce4edf22f0e27486c59d11
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Aug 9 14:00:40 2022 -0300

    Bug 24857: No words
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fc78953951837f6fe7a3e9d66ac497dcb5511f53
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Aug 9 13:56:05 2022 -0300

    Bug 24857: (QA follow-up) Add spec description
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bb8d86f3bc9ddbaed2a7d4348cbadd217c40f229
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Aug 9 13:48:52 2022 -0300

    Bug 28787: (QA follow-up) Add spec description
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d68831bde5f5132df563fba23d83d32861bbc2ef
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Aug 9 13:42:21 2022 -0300

    Bug 28787: DBRev 22.06.00.035
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 017c701b18b66cca35d85cb2c0f3a5422a2ad4a9
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Aug 5 12:31:26 2022 +0000

    Bug 28787: (QA follow-up) Remove unused variable
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2f71ac6f77991e8356c8b1038b38dbf2b84ac894
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 26 11:43:36 2022 +0200

    Bug 28787: Fix misleading tests in two_factor_auth.t
    
    We were having a "Patron is not authenticated yet" comment, but it was not correct,
    we set 'number' and 'id' in session, and waiting-for-2FA was not set => the patron is fully authenticated.
    The test returned 401 because we fully authenticated user cannot request
    an otp token when not waiting for the second auth step.
    
    This situation is already covered (last test of the subtest).
    
    Test plan:
      prove t/db_dependent/api/v1/two_factor_auth.t
    must return green
    
    Sponsored-by: Rijksmuseum, Netherlands
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 12305c89d745cfb4d02b7a8600c4550b83465eec
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jul 8 09:38:55 2022 +0000

    Bug 28787: (follow-up) Typo and additional test
    
    Adding a test for a 403 status when lowering authorization.
    The Auth mock for check_cookie_auth is not needed here.
    Reading back the session after flush either.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Sponsored-by: Rijksmuseum, Netherlands
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2568234cdade350b7db83325b8375e1acdb06208
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 8 09:08:40 2022 +0200

    Bug 28787: Comment selenium test that will fail if no SMTP server is defined
    
    This is a deadlock I think. Any ideas how we could continue to test that
    in any conditions?
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Sponsored-by: Rijksmuseum, Netherlands
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2b4baae94a402d7be753645e8d83e21d617a462b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 8 09:05:26 2022 +0200

    Bug 28787: Mock send_or_die
    
    To make the tests pass even if no SMTP server is defined.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Sponsored-by: Rijksmuseum, Netherlands
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c52eb53c69f4564bce75cf385a5cd1cd31990c46
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 8 08:53:22 2022 +0200

    Bug 28787: Don't request a token if no email address defined
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Sponsored-by: Rijksmuseum, Netherlands
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 950cfa1173676008b337b1439a237880321bbb2d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 7 19:28:38 2022 +0200

    Bug 28787: Don't send the notice if we are not waiting for 2FA
    
    If we are fully logged-in or haven't pass the password phase, don't send
    the notice!
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Sponsored-by: Rijksmuseum, Netherlands
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 25c522fea13ff3d27188991b673d998d12262d1d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 7 09:34:08 2022 +0200

    Bug 28787: Rename the REST API route to /auth/otp/token_delivery
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Sponsored-by: Rijksmuseum, Netherlands
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1d0eab9b94244d8a18451a561e7ffd3549338fd8
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jul 7 06:44:04 2022 +0000

    Bug 28787: Fix t/db_dependent/api/v1/two_factor_auth.t
    
    Changing flags to 20 to include the required Staff access for
    intranet login.
    This changes the http status. The API raises an exception now.
    
    Test plan:
    Run t/db_dependent/api/v1/two_factor_auth.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Sponsored-by: Rijksmuseum, Netherlands
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a7b70c4550297af1528eb60280434d72d0503c50
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Jun 27 11:39:43 2022 +0000

    Bug 28787: Typo authenticaction
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Sponsored-by: Rijksmuseum, Netherlands
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c0864cfdeac9d1be99ada15b14e4fb433d9a40f8
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Jun 27 11:06:34 2022 +0000

    Bug 28787: (follow-up) Changes in API auth, moved otp out of Letters
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Sponsored-by: Rijksmuseum, Netherlands
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6e099d0bbdd8921715fd7bcd1b993110f1fddfff
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 23 22:51:26 2022 +0200

    Bug 28787: Send a notice with the TOTP token
    
    Bug 28786 let librarians enable a Two-factor authentication but force them to use
    an application to generate the TOTP token.
    
    This new enhancement add the ability to send an email containing the token to the
    patron once it's authenticaed
    
    The new notice template has the code '2FA_OTP_TOKEN'
    
    Test plan:
    - Setup the two-factor authentication (you need the config entry and the
    syspref ON)
    - Enable it for your logged in patron
    - Logout
    - Login and notice the new link "Send the code by email"
    - Click on it and confirm that you received an email with the code
    - Use the code to be fully logged in
    
    QA question: Is 400 the correct error code to tell the email has not
    been sent?
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Sponsored-by: Rijksmuseum, Netherlands
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 244c64925036ec4a7541de213b7d807519f56495
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Aug 9 16:12:08 2022 +0000

    Bug 31265: (QA follow-up) Align time selection controls like other inputs
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit adbf5e4a6acd10cd5e81126d3123aa14c0df94d3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sun Jul 31 09:45:38 2022 +0200

    Bug 31265: Update style of time selection controls
    
    This patch updates the style of the time selection controls so that it
    is clearer that they are elements which the user can interact with. The
    times are now styled as buttons, and a check-mark icon is added when a
    time is selected.
    
    Also changed: Pickup date and notes fields are hidden until a library
    has been selected. The count of existing appointments has been removed
    in favor of showing the count of available appointments. A tooltip has
    been added: "Appointments available: X"
    
    I also changed the way the date selection event is fired. I found that
    jQuery's "change" event on the input itself was not reliable for some
    reason. I implemented instead an "onClose" event using the flatpickr
    instance.
    
    Note: The patch contains some indentation changes.
    
    To test, apply the patch and enable and configure curbside pickups if
    necessary. You should have at least two libraries with curbside hours
    defined.
    
    - Log in to the OPAC and go to "your curbside pickups."
    - Under the "Schedule a pickup" tab you should see only the option to
      select a library.
    - When you select a library the "Pickup date" field should appear.
    - When you select a date the time-selection buttons and the notes field
      should appear.
    - Hovering over a time should trigger the "Appointments available"
      tooltip.
    - Clicking a time should cause the "button" to turn green with a
      check-mark icon.
    - Submit a pickup request and confirm that it is saved correctly.
    - Return to the "Schedule a pickup" form and confirm that selecting the
      same library again triggers a message, "You already have a pickup
      scheduled for this library."
    - Select another library and another date.
    - Switch your library selection to the library you already have a
      request for. The date, time, and notes fields should be hidden again
      and the same message triggered about already having a pickup
      scheduled.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4e516da529e5cc856185d1eb175ac846e9822cb8
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Tue Aug 31 10:06:03 2021 +0100

    Bug 28909: Fix handling if backend doesn't support
    
    If a backend hasn't been updated to support this functionality, we need
    to handle that gracefully
    
    Also, this commit fixes some indentation.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 80e179edd7a7d6cc70dada6a05a4dad915a38d9a
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Aug 27 11:53:00 2021 +0100

    Bug 28909: Allow illview to use backend template
    
    This commit allows illview to use an intranet template supplied by the backend, as
    per other stages. The template must be named illview.inc
    
    Test plan:
    - Apply the patch
    - Install FreeForm backend (https://github.com/PTFS-Europe/koha-ill-freeform)
    - Create a request
    - On the resulting "Manage ILL request" note the display is normal
    - Create a new file in the FreeForm backend directory: /intra-includes/illview.inc
      with the following content:
    
      [% BLOCK backend_jsinclude %]
      <script>(function() { alert("Working!"); })()</script>
      [% END %]
    
    - Restart Plack if enabled
    - Reload the page
    => TEST: Observe that the alert specified in the template is displayed
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e41cde66f011abdc1a7476ea6842ff04996975d2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 3 07:32:35 2022 +0200

    Bug 31307: Remove 'already_reserved' flag from opac-reserve.pl
    
    It was never set (was set before 14695)
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d38f55795e84f6f6d2bfaaf98deccbe173558bdd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 2 11:35:13 2022 +0200

    Bug 31311: Remove GetItemsInfo labels/label-item-search
    
    It was commented anyway
    
    Hey, nothing to do here!
    
    Amended patch removes refactor comment that referred to this line, maybe?
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f13b688987c4acf489fb6518a9ae94af35da90ce
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Aug 9 12:44:54 2022 +0000

    Bug 31316: (QA follow-up) Remove stray template close tag
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9b9a7b670ccd9e1437a32697f81645af6b1e93bd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 3 08:20:17 2022 +0200

    Bug 31316: Remove GetItemsInfo from opac-sendbasket
    
    Bug 27272 is going to remove C4::Items::GetItemsInfo in favour of Koha::Items->search.
    
    Here we are going to deal with opac-sendbasket
    
    Test plan:
    List items on the modified view and confirm that all the info is
    displayed correctly
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9b1c397bee25384f65d28de8d9a3cf461b22dd48
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Aug 9 13:21:05 2022 +0000

    Bug 31319: (QA follow-up) Search items directly (biblio not used yet)
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    JD amended patch: add 'me' prefix to prevent failure if biblio is linked
    with a subscription
    DBIx::Class::Storage::DBI::_dbh_execute(): DBI Exception: DBD::mysql::st execute failed: Column 'biblionumber' in where clause is ambiguous at /kohadevbox/koha/Koha/Objects.pm line 394
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 998fb79cb353868d55edba29064b1fb2cace2008
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 3 08:29:19 2022 +0200

    Bug 31319: Remove GetItemsInfo from tags/list.pl
    
    Bug 27272 is going to remove C4::Items::GetItemsInfo in favour of Koha::Items->search_ordered.
    
    Here we are going to deal with tags/list
    
    Test plan:
    List items on the modified view and confirm that all the info is
    displayed correctly
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 52d107bf5d79a953878a3d5b94bab2f334eff63a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Aug 9 12:57:24 2022 +0000

    Bug 31306: (QA follow-up) Add comments to test
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 116ac99d3c76631a8bb7dffb661cdfcafcea7835
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 29 13:06:20 2022 +0200

    Bug 31306: Add tests for search_ordered
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 80f784d352c5f2425291bd13cd2c289bbfd83894
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 29 13:06:07 2022 +0200

    Bug 31306: Allow to pass params and attributes to search_ordered
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 999014d3e84d1489049be21193e55609362c6200
Author: Petro Vashchuk <stalkernoid@gmail.com>
Date:   Mon Jul 18 12:47:21 2022 +0300

    Bug 31306: Add search_ordered sub to order items with extra conditions
    
    Commit message from JD:
    
    On bug 27272 we are going to replace C4::Items::GetItemsInfo with Koha::Items
    methods, but we need to keep the existing behaviour that is:
    
    Order by publisheddate, enumchron for searisl, or by homebranch.branchname,
    enumchron, LPAD( copynumber, 8, '0' ), desc dateaccessioned
    
    Test plan:
    Confirm that the code from the new method makes sense
    Run t/db_dependent/Koha/Items.t
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4b9179b0d59065992b15c2438cf50465dae0f3f8
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Aug 9 11:58:06 2022 -0300

    Bug 29897: DBRev 22.06.00.034
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 141223b0fd951038ddf4efebbcb7f3708cc15200
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Aug 2 06:54:59 2022 +0200

    Bug 29897: Don't display empty li
    
    It's ugly to move the li to the include file, but it's the easiest for
    now...
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 443884ef7417bc49224e88197ddbd8053e7a5481
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Aug 1 20:40:50 2022 +0200

    Bug 29897: (QA follow-up) Add valid $2 codes to pref description
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8eb86849b5d2c73b71712e2d50158bc7364be77e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 29 18:29:31 2022 +0200

    Bug 29897: Adjust syspref description
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2c3aa214ef8a607b0b485cc2b51704c2028c4177
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 29 18:28:03 2022 +0200

    Bug 29897: Remove 'linkage' leftover
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e1adf5c3236960cfbc258212fbf0a9aaf04e3a74
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 29 11:06:43 2022 +0200

    Bug 29897: Fix tab display
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 74ea23ea9b9e8e6d6474db5ff5c7b1f0c915df43
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 2 11:24:47 2022 +0200

    Bug 29897: Don't display identifier if not in the list
    
    Requested by QA, see comment 26.
    
    Sponsored-by: Orex Digital
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c57b5f5408a0ba74e1ee0ad9d90c5318ab09c467
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 2 11:23:05 2022 +0200

    Bug 29897: Move the identifier list to an include file
    
    Sponsored-by: Orex Digital
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 035d0eb167344c20947d3634154317ff553dd24d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 2 11:18:57 2022 +0200

    Bug 29897: Add VIAF
    
    Sponsored-by: Orex Digital
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4329371c8d90c60332aa4af2cb300b9055f6064d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 2 11:12:56 2022 +0200

    Bug 29897: Improve syspref's description
    
    Sponsored-by: Orex Digital
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 49ab591d1716039bb634c26e8443f9b045595c35
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 2 11:08:41 2022 +0200

    Bug 29897: Add and fix POD
    
    Sponsored-by: Orex Digital
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 49fb09b142b4d19637f2d347cf8e666a6bc8eb9c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 2 10:59:23 2022 +0200

    Bug 29897: Don't use $6 for linkage but build the link instead
    
    See comment 26:
    $6 is a very specialized field that will never contain a URL. Linkage here means 'linking MARC fields within the record'. For example it is used to link an original script tag with the corresponding tag in transliteration. See: https://www.loc.gov/marc/authority/ecadcntf.html
    
    Sponsored-by: Orex Digital
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 08461a8a6f645bef7535f43935307b51021d2e65
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 7 15:20:35 2022 +0200

    Bug 29897: Fix linkage
    
    Signed-off-by: Orex Digital <info@orex.es>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dd4ea169922c6e7aa4c9b87c3af0a4aa34f36d72
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jan 17 17:59:21 2022 +0100

    Bug 29897: Display author's identifiers
    
    This new enhancement add the capability to list the different
    identifiers of authors. It is helpful for research publications for
    instance.
    
    This patch will add a new "Author identifiers" tab on the detail page
    (OPAC) of a bibliographic record, with the list of the authors and their
    identifiers.
    On the detail page of the authority record, the same identifier list
    will be displayed.
    
    Test plan:
    Create some authority with
    024
      $a source
      $2 number
      $6 link to the source
    With the pref turned ON you will be able to see the new information.
    
    Sponsored-by: Orex Digital
    
    Signed-off-by: Orex Digital <info@orex.es>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 84d4b909484fe2b0d173a353435bcb67beecea18
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 18 11:35:17 2022 +0100

    Bug 29897: Add new pref OPACAuthorIdentifiers
    
    Sponsored-by: Orex Digital
    
    Signed-off-by: Orex Digital <info@orex.es>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 603d427607917e7f1c0de24ca0814d9950aaf1fc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jan 17 17:50:26 2022 +0100

    Bug 29897: Move code to private method for reusability
    
    Sponsored-by: Orex Digital
    
    Signed-off-by: Orex Digital <info@orex.es>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7b74bedd2d5a433c154c584e545f1e26da996bdd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jan 17 17:41:39 2022 +0100

    Bug 29897: Rename get_marc_authors with get_marc_contributors
    
    get_marc_authors actually return authors from 700..712, not the first
    author from 200
    
    Sponsored-by: Orex Digital
    
    Signed-off-by: Orex Digital <info@orex.es>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 27fa89648e325325f8d9ae78e07bf093445973ab
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Aug 8 19:27:37 2022 +0000

    Bug 28269: (QA follow-up) Fix typo in test description
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bfc5c5eeff4506a9402ed9adedf44c64c9651696
Author: Slava Shishkin <slavashishkin@gmail.com>
Date:   Mon Apr 25 15:16:48 2022 +0300

    Bug 28269: Add tests for Acquisitions Orders search by ISSN
    
    also with SearchWithISSNVariations on and off
    
    Signed-off-by: KIT Library Germany <michaela.sieber@kit.edu>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4443f9828c99f34f2d76fabbff5edbec1f9b5335
Author: Slava Shishkin <slavashishkin@gmail.com>
Date:   Sun Apr 24 00:51:00 2022 +0300

    Bug 28269: Add feature to search Acquisitions Orders by ISSN
    
    - add search form field for ISSN number
    - add search logic including ISSN variations search
      if SearchWithISSNVariations preference is set
    
    Signed-off-by: KIT Library Germany <michaela.sieber@kit.edu>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 94cfb6b8f26182295e0afa490e47bf7135a7f0e8
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Aug 8 19:44:45 2022 +0000

    Bug 10086: (QA follow-up) Fix TT filters
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ad00fc72adb03d2979f2af1f400e66789793eb78
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Feb 13 22:53:10 2017 +0000

    Bug 10086: Link to go to basket from uncertain prices page
    
    This patch moves the Edit button into an Edit column, styled with
    bootstrap button and font awesome icon, and adds a link on the basket
    name to go to the basket.
    
    To test:
    1) Add an item with uncertain prices to a basket
    2) Go to the vendor of the basket
    3) Click Uncertain prices on the left
    4) Notice 'edit' button does not look like a button, and basket name is
    not a link
    5) Apply patch and refresh page
    6) Basket name is now a link. Click to confirm it takes you to the right
    page
    7) Edit button is now in edit column. Confirm it works as expected
    8) Confirm you cannot sort on Edit column and the button does not wrap
    on a narrower browser
    9) Check that the correct information is displayed for the order column
    (title, author, publisher code, publication year, copyright date, isbn)
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0fce4ba81d49d8cd4939e339c3d5b5860d117203
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 14 13:18:30 2022 +0000

    Bug 30543: Decouple DumpSearchQueryTemplate from other tempalte dump preferences
    
    To test:
    1 - Enable DumpSearchQueryTemplate
    2 - Confirm you can find the search query in the HTML as a comment
    3 - Enable other template dump preference
    4 - Confirm they work as before
    5 - Confirm new description of preference makes sense
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9d527ad8a45292598c04f5ec5d88c49ffab34fa5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 18 18:39:51 2022 -0300

    Bug 31183: Use filter_by_current in Koha::Holds->get_items_that_can_fill
    
    This patch makes the method use the new
    Koha::Item::Transfers->filter_by_current one.
    
    To test:
    1. Run:
       $ kshell
      k$ prove t/db_dependent/Koha/Holds.t
    => SUCCESS: Tests pass
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: Tests still pass
    4. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Michal Urban <michalurban177@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 96e0402573a6d19b5fcd815609651a5c6c447d92
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 18 18:33:47 2022 -0300

    Bug 31183: Add Koha::Item::Transfers->filter_by_current
    
    This patch introduces the aforementioned method.
    
    To test:
    1. Apply this unit tests patch
    2. Run:
       $ kshell
      k$ prove t/db_dependent/Koha/Item/Transfers.t
    => FaIL: method not defined?
    3. Apply this patch
    4. Repeat 2
    => SUCCESS: Tests pass!
    5. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3ab8807d7e41d734f671720fffe56bf9e1fce61c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 18 18:33:33 2022 -0300

    Bug 31183: Unit tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a5dfa2d4901575c93d900f300fe5b5b2d7f178d4
Author: Andreas Roussos <a.roussos@dataly.gr>
Date:   Mon Nov 8 08:19:58 2021 +0100

    Bug 29434: add UNIMARC relationship codes for authorities
    
    When using the authority finder plugin (authorities/auth_finder.pl),
    you can pick an entry from the 'Special relationship:' dropdown menu
    in order to set the relationship between authorities.
    
    However, in UNIMARC instances the relationship codes listed are those
    for MARC21. The correct codes for UNIMARC are listed in pages 93-94
    of the IFLA UNIMARC Manual for Authorities.
    
    Test plan:
    
    1) In a UNIMARC instance, launch authorities/auth_finder.pl in the
       Staff client, by clicking on the 'Tag editor' button. Notice how
       the 'Special relationship:' dropdown menu lists the relationship
       codes for MARC21 instead of UNIMARC.
    2) Apply this patch.
    3) Launch the authority finder again; this time the correct values
       should be listed in the 'Special relationship:' dropdown menu.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 045ead15fd477b54d1193bcd7fbcc2df1984a145
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Sun Aug 7 11:24:12 2022 +0000

    Bug 31214: Make subfield code non-editable in MARC framework editor
    
    The subfield code field became editable in framework
    editor due to a regression that happened during the
    switch from a previous template framework koha used
    to the new Template toolkit framework currently in use:
    Bug 5917 : Swapping templates over (5884fb100071e973daf671a4ada6b32724376768)
    The regression happened due to the template syntax
    not being updated to the new one in this particular
    case.
    
    Note: The subfield code field doesn't align with the
          other fields anymore after this patch. However,
          this alignment issue is in every other Koha form
          in intranet and should be fixed in the global
          CSS rules.
    
    1) Apply patch
    2) Browse to
       /cgi-bin/koha/admin/marc_subfields_structure.pl?op=add_form&tagfield=995&frameworkcode=AR
    3) Notice the subfield code is non-editable
    4) Notice the subfield code is still editable in the New tab.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2395f781fde622e5b9219a2a1b2e2f4d0904450e
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Jun 13 17:57:13 2022 +0000

    Bug 30927: Improve formatting or iCal files for checkout due dates
    
    We got some feedback from a patron regarding the default notifications
    on the iCal export for the patron checkout summary in the OPAC.
    The notifications send 1 minute before the event (the due date), which
    is midnight.
    
    Test Plan:
    0) Make sure your time zone in Koha is set correctly in koha-conf.xml
    1) Apply this patch
    2) Restart all the things!
    3) Make a checkout due at 23:59
    4) Make a checkout due at 11:00
    5) Download the iCal file from the OPAC
    6) Import this file into Calendar
    7) Note the first checkout is an all day event
    8) Note the second checkout is an "instantaneous" event at the date and
       time the item is due
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f8865ecd43a284fd5d09033e2543bc9bb97c5739
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Aug 9 09:27:35 2022 +0100

    Bug 27779: (QA follow-up) Fix unit test
    
    I forgot to adapt the unit test for the new 'related_debit' key in the
    outpur from the summary method.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bf35746743def72e3ba5abc7e49c9d3d4adfb22e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Aug 8 15:41:36 2022 -0300

    Bug 27779: (QA follow-up) Better translatability
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4ddf182192f0706585fc6963992eab11d61c384b
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Aug 7 22:11:03 2022 +0000

    Bug 30992: (follow-up) Fix semicolon at line ending
    
    $itemLoopIter->{reservedate}     = $first_hold->reservedate,
    $itemLoopIter->{ExpectedAtLibrary}         = $first_hold->branchcode;
    
    1st line ends with a comma instead of a semicolon.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fe3339528e54b76302bfc46886304a13e0cd7941
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Aug 8 13:40:13 2022 -0300

    Bug 27779: DBRev 22.06.00.033
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit efc9f9e8823ba89e9e8b6276efd8f888b9a95cd3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jun 24 14:30:53 2022 +0100

    Bug 27779: (QA follow-up) Fix database update
    
    Don't overwrite peoples translations if they've already changed the
    description.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e6ae58db966291bdf76230f975fee47f93d96021
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Jan 31 21:04:52 2022 +0000

    Bug 27779: (QA follow-up) Fix translation issue with 'against'
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 78532c6f49f6daa67d714ddb78c3cce5b6cf4141
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 11 15:23:27 2021 -0300

    Bug 27779: New atomic update syntax
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7f33f06d3b4b5f9f47ce2d6c587cb948c27a7a52
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu May 20 08:48:12 2021 +0100

    Bug 27779: Update 'REFUND' description in the database
    
    This patch simplified the REFUND description from 'Refund applied
    to a patrons fine' to simply 'Refund'.. this allows the description to
    be combined with debit type descriptions simply to denote what it was
    applied against instead of using the generic 'applied to a patrons fine'
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4fb65e3f4ee01b02e0d53fde02ed8dca67fe7d29
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu May 20 08:38:11 2021 +0100

    Bug 27779: Group payouts by type of debit they're applied against
    
    This patch adds additional grouping to the cashup summary output such
    that payouts are additionally grouped by the types of debit they're
    applied against.  The cashup sumary modal is adapted to expose the
    descriptions at the grouping level too.
    
    Test plan
    1/ Add a various transactions using a cash register (Using Point of
    Sale, Patron Accounts with payments etc).
    2/ Refund some of the debts and pick the 'cash' option for payout.
    (ensure you pick a variety of debit types)
    3/ Add some credit to a patron account, (either refund a debt as
    'credit' or add a 'manual credit')
    4/ Payout the credit as 'cash' on the patron account
    5/ Cashup the register
    6/ Inspect the cashup summary for your cashup.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6eaf23d2d4691844a75db1aaf3090d9eb9747a33
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Mar 3 12:34:33 2022 +0000

    Bug 30213: Hide Delete (aka Priority) column when user only has place_hold permission
    
    This patch changes the way the priority column displays when viewing a
    list of holds as a user who doesn't have permission to change hold
    priority.
    
    To test:
    
    - Apply the patch and log into the staff interface as a user with
      at least "place_hold" permission.
    - Locate a record which can be put on hold and place multiple holds.
    - View the list of holds.
    - As a user with both "place_hold" and "modify_holds_priority"
      permission, you should see a "Priority" column with <select> fields
      allowing you to change hold priority. You should also see the arrow
      buttons for changing priority.
    - As a user with only "place_hold" permission, the "Priority" column
      should show the priority as a number. You should not see the arrow
      buttons.
    - In both cases, confirm that all operations work correctly: Changing
      hold date, expiration date, pickup library, suspended status;
      Cancelling holds.
    
    Signed-off-by: Christopher Brannon <cbrannon@cdalibrary.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aca26a83e367ae930eeb22241ef3af7b4244d127
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Aug 8 12:09:45 2022 -0300

    Bug 31303: (follow-up) Use get_effective_rule_value instead
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 38ef4f635d6be3118fc1a43d5d053e9c22bcee73
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon Aug 8 05:07:47 2022 +0000

    Bug 31303: Prevent fatal errors when missing "waiting hold cancellation" rule
    
    This patch removes method chaining which didn't account for the fact that
    the "waiting hold cancellation" circulation rule might not exist.
    
    Test plan:
    0. Apply patch and koha-plack --restart kohadev
    1. Go to http://localhost:8081/cgi-bin/koha/reserve/request.pl?biblionumber=29
    2. Search for "koha" user
    3. Choose the specific item and click "Place hold"
    4. Check in "39999000001310" and click "Confirm hold (Y)"
    5. Go to http://localhost:8080/cgi-bin/koha/opac-user.pl#opac-user-holds
    6. Rejoice in Koha not exploding
    7. Go to http://localhost:8081/cgi-bin/koha/admin/smart-rules.pl
    8. Go to "Default waiting hold cancellation policy" and change "Cancellation allowed" to "Yes" and click "Add"
    9. Go to http://localhost:8080/cgi-bin/koha/opac-user.pl#opac-user-holds
    10. Note the "Cancel" button appears
    11. Rejoice again that the "Cancel" button appeared
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d673d7efdcdffe425722962336f8dc7f9f8940f0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Aug 8 13:15:29 2022 -0300

    Bug 31296: (QA follow-up) Fix trivial spelling errors
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5a6bd96d4c08a7b566fdc315c3c69e3838f491c4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Aug 5 13:52:46 2022 +0100

    Bug 31296: (QA follow-up) Add to debian templates
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 00f489de6d05fd8a5d4c8b4599a72d55e1ee8005
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Aug 5 07:14:14 2022 -0400

    Bug 31296: Add ability to disable demagnetizing items via SIP2 based on itemtypes
    
    Some libraries have certain item types that can only do in house checkouts via SIP self check machines. In these cases, the items should not be demagnetized since the items cannot leave the library.
    
    Test Plan:
    1) Apply this patch
    2) prove t/db_dependent/SIP/Message.t
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 42b316912097fc11d55d3f8bacc4ade2107b4c7e
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Thu Jul 14 10:26:29 2022 -0400

    Bug 31155: Document --since option in help of borrowers-force-messaging-defaults.pl
    
    This patch adds a section about the --since option in the help section
    of borrowers-force-messaging-defaults.pl
    
    To test:
    0) Apply patch
    1) run the script with the --help option, e.g.
    ./misc/maintenance/borrowers-force-messaging-defaults.pl --help
    --> There should be an explanation of the --since option with examples
        for specific and relative dates
    2) Optionally, run the script with different options
    --> The behaviour shouldn't have changed
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 18005a6bb47cf876b08095e21306c0a90c93079d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Dec 3 16:45:44 2021 +0100

    Bug 31305: Remove type= from detail.pl
    
    This is not related to anything known.. was it "itype" at some point?
    `git log -p` will tell you that it's there for a looong time already
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 99790c6c38af93698069f5f493b299a715eabd68
Author: Bernardo González Kriegel <gonzalez@di.unc.edu.ar>
Date:   Fri Aug 5 11:34:05 2022 -0300

    Bug 31292: Untranslatable string in sample_notices.yaml
    
    This patch removes a regex that discard lines in multiline YAML values
    On close inspection, there is no need for it.
    
    To test:
    1) go to misc translator, update some language
        ./translate update fr-CA
    
    2) check missing string
    
        egrep "You may pick up your article" po/fr-CA-installer.po
    
       from sample_notices.yaml
    
    3) apply the patch, repeat 1)
    
    4) repeat 2), verify the string is present in the translation file
    
    5) translate the new string, install the language,
       verify string is present in the translated file
        ./translate install fr-CA
    
       check fr-CA/mandatory/sample_notices.yml
    
    There are three new strings
    msgid "%sDear %s %s,%s"
    msgid "%s%s%sTitle: %s"
    msgid "%sYou may pick up your article at %s.%sYou can download the scanned materials via the following url(s): %s.%s"
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a26211d53d9ef2dd16f68fe9b287c2b9845c209e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Aug 8 11:18:02 2022 -0300

    Revert "Bug 31104: Add a selenium test"
    
    This reverts commit 56d79a483da8cac66aa22b9904fd2a64464b8eff.

commit f3eaf43f7b1b71a3e900735db15dc08b05164064
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 8 14:18:49 2022 +0200

    Bug 29983: Fix xt/author/valid-templates.t
    
     #   Failed test '/kohadevbox/koha/koha-tmpl/intranet-tmpl/prog/en/modules/circ/circulation.tt'
     #   at xt/author/valid-templates.t line 141.
     # file error - modal-claims-js: not found
     # Looks like you failed 1 test of 757.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bc0d561cf07d4004d0870f411866ea68187bd8cf
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 1 10:28:20 2022 +0200

    Bug 30874: Remove category_type
    
    In which case do we pass category_type to this script? Am I missing
    something?
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a2330a84e093373aec174b2eb2839dd21ff2fe07
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 1 10:00:37 2022 +0200

    Bug 30874: Simplify categories loop construction
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 71611bb146fb9154ebe7533bf857c9abfc2aac33
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 1 10:00:08 2022 +0200

    Bug 30874: 2 more - need more investigation
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 18d7c7fdf9329e77dbd064576704217ad49a8beb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 1 09:59:31 2022 +0200

    Bug 30874: Reduce number of category fetches
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 36cb2bff475c2e6ac1e118aeff4e7e5ae4874944
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 1 09:54:25 2022 +0200

    Bug 30874: Replace categoryname
    
    == Test plan ==
    1. Apply all patches
    2. Create a new patron in a given category
       => Form show the dropdown with the selected category
    3. Edit again
       => Value is kept
    4. Edit a category to give it specific values for: messaging prefs,
       password strength/length, can be guarantee
    5. Edit the patron, change the category, and confirm that the different
       limitation are correctly applied.
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 130e1c888a0758145de19ae704bd7b592ca0595f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Aug 5 14:50:12 2022 -0300

    Bug 29971: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dd3ba23f4ae8c04bdbe0dea806a3de6d039d0ef2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 1 12:05:02 2022 +0200

    Bug 29971: Add selenium tests
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a027cffcf40bbac85d84e92e8316ffa121da7fa6
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 28 17:14:15 2022 +0000

    Bug 29971: Remember selections across patron search pages
    
    This patch modifies the patron search results page to enable checkbox
    selections to be remembered in the browser's localStorage. This allows
    checkbox selections to persist while navigating through multiple pages
    of search results or even across multiple different searches.
    
    Once selected, these values can be added to a patron list or submitted
    for merging. Selections can be cleared manually and will be
    automatically be removed upon logout.
    
    To test, apply the patch and rebuild the staff interface CSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client).
    
    - In the staff interface perform a patron search in the Patrons module
      which will return multiple pages of results..
    - Check checkboxes next to several patrons.
      - After one checkbox is checked the "Add to patron list" button should
        be enabled.
      - After more than one checkbox is checked the "Merge selected patrons"
        button should be enabled.
    - A box should appear in the toolbar above the search results, "Patrons
      selected: X"
    - Navigate to another page of results. Check more checkboxes. The
      "Patrons selected" information should be updated.
    - Return to the first page of results. Your original selections should
      still be checked.
    - Test that the correct set of patrons is used when clicking "Merge
      selected patrons" or when using "Add to patron list."
    - Click the "Clear" button in the selections information box. Checkboxes
      should be cleared on every page of results you previously checked.
      - The "Add to patron list" and "Merge selected patrons" buttons should
        become disabled.
    - After making several selections, log out of the staff interface and
      log back in, returning to the same patron search. Your selections
      should have been forgotten.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7b1e1f957ce75826e621bb936c0c8fcd8b62b1c9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 1 15:54:42 2022 +0200

    Bug 29983: Show the column by default but hide if the feature is disabled
    
    Prior to this patch there was a blink, the column was displayed then
    hidden if the column was hidden.
    Also we could display the column even if the feature was disabled.
    
    Now the column is shown by default, and hidden if the feature is
    disabled.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 69d491bd1d5f28eb348ba83ccdd69f1f82e9b8d8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 1 15:43:51 2022 +0200

    Bug 29983: Format dates in templates using KohaDates (and display the time part)
    
    The time part is displayed on the checkout list
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e56c0dead6c51e89e4b6bbfeb75077fb5ceb27c6
Author: Jérémy Breuillard <jeremy.breuillard@biblibre.com>
Date:   Tue Feb 1 11:20:07 2022 +0100

    Bug 29983: Display the pretend claim column in overdue.tt
    
    This patch displays the column "Return claims" from the page "moremember.pl" to the page "overdues.pl". Rebase on master.
    
    Test plan:
    1) Use a patron with at least 1 item who should be checked out soon
    2) Home > Patron > Patron details for [name]
    3) Click on the 'Checkout' button down the page to show the full table and notice the "Return Claims" column
    4) Now go to Home > Circulation > Overdues
    5) Find the patron who has to check out and have a look at the table
    6) Apply patch and repeat 4) and 5) -> the "Return Claim" column is now displayed on the table
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4b875fa936f1c971e734e71ec7727d780ba9a9af
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed Aug 3 09:54:27 2022 -0400

    Bug 31289: Hide Article requests column in circulation rules when ArticleRequests syspref is disabled
    
    This patch hides the Article requests column in the large circulation
    rules table when the ArticleRequests system preference is disabled.
    
    To test:
    0) Apply patch
    1) With ArticleRequests disabled, go to Administration > Circulation and fines
       rules
    2) Scroll right in the first table
    --> There isn't any mention of article requests in the table
    3) Scroll down to see the other tables in the page
    --> There are no other article requests tables
    4) Enable ArticleRequests in Administration > System preferences
    5) Go back to the Circulation and fines rules and refresh the page
    6) Scroll right in the first table
    --> There should be an article requests yes/no column
    7) Scroll down to see the other tables in the page
    --> There are other article requests tables, Default open article requests
        limit and Default article request fees
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9b5eb7bafe34073f88daea84a9a1609ca18aeeff
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Aug 5 12:04:11 2022 -0300

    Bug 27497: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 47a2d79cb3921f57956807e310424f08502c8b35
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Feb 11 11:33:35 2021 +0100

    Bug 27497: Display Koha version in staff interface home page
    
    Koha current version is very useful in staff interface.
    You can find it in 'About' page but home page is the first page you
    see. Display it in the lower right-hand side of the page, after
    'IntranetmainUserblock' content.
    
    Note that it is not a vertical floating text, it whould conflict with
    languages floating bar.
    
    Test plan :
    1) Apply patch and update staff client CSS :
    https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client
    2) Look at staff interface home page and look at lower right-hand side
       of the page
    
    Signed-off-by: Michael Adamyk <madamyk@ckls.org>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f31925e9844a7e9abbda8396efd3f94ce1429ba1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sun Jul 31 09:16:13 2022 +0200

    Bug 31264: Curbside pickups - Take CalendarFirstDayOfWeek into account
    
    We need to take the pref CalendarFirstDayOfWeek into account to display
    the days on the curbside pickups admin page.
    
    Test plan:
    Turn on the CurbsidePickup pref
    Set CalendarFirstDayOfWeek to Sunday
    Go to the curbside pickups admin page, add new slots, and confirm that
    Sunday is displayed first.
    Try again with CalendarFirstDayOfWeek set to Monday and Saturday.
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 45d9dd8c4220be8877b0b7aa96237a794762e2f2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Aug 5 11:56:24 2022 -0300

    Bug 30500: DBRev 22.06.00.032
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3a814ff573f9491156c252fa3b2b6bcb6b82a461
Author: Petro Vashchuk <stalkernoid@gmail.com>
Date:   Fri Aug 5 15:47:41 2022 +0300

    Bug 30500: (QA follow-up) Separate code execution streams for obviously independent parameters
    
    When $new_pickup_location gets passed as parameter it doesn't make any
    sense to also check is_cancelable_from_opac.
    
    Also this makes code more clearer as it seemed like it was possible for
    item to get cancelled at the same time as request to change pickup
    location.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6215f9a0e17444d3178b85cfcc1df33fd4644e8f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jun 8 17:26:43 2022 -0300

    Bug 30500: Allow patrons to change in transit holds pickup locations
    
    This patch adds a way for patrons to change the pickup location for in
    transit holds.
    
    This is done in the OPAC on the holds table.
    
    The feature is controlled by a new system preference:
    
    * OPACInTransitHoldPickupLocationChange
    
    To test:
    1. Apply this patches
    2. Run:
       $ updatedatabase
       $ restart_all
    => SUCCESS: system preference added
    3. Have an in-transit hold for a known patron
    4. Visit the holds table for the patron (OPAC)
    => SUCCESS: Hold in transit, cannot change pickup location
    5. Enable the OPACInTransitHoldPickupLocationChange system preference
    => SUCCESS: Descriptive text makes sense and is idiomatic
    6. Reload the OPAC page
    => SUCCESS: You can now choose a new pickup location
    7. Choose one
    => SUCCESS: It works! Reloaded page pre-selects the new pickup location
    8. Switch to the new pickup location library on the staff interface
    9. Go to Circulation > Transfers to receive
    => SUCCESS: The hold is there!
    10. Scan the hold
    => SUCCESS: Usual workflow follows
    11. Sign off :-D
    
    Sponsored-by: Montgomery County Public Libraries
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1ae7b9055ac9b1e3252f9e75813b7a8536382d64
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jun 8 17:22:51 2022 -0300

    Bug 30500: Add OPACInTransitHoldPickupLocationChange syspref
    
    Sponsored-by: Montgomery County Public Libraries
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2353893c1acc45c99f5afbe0bde5dcd049d88660
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jul 30 23:35:50 2022 +0200

    Bug 31272: Use TT plugins for pickup library and due date in opac-reserve.pl
    
    Before this patch the date formatting for the due date was done
    in the .pl instead of the template and the branchcode would show
    instead of the library's name in the list of items when placing
    an item level hold in the OPAC.
    
    To test:
    * Find or create a record with mulitple items
    * Check out one of the items
    * Place a record level hold
    * Return an item to set to waiting
    * Place an item level hold
    * Go to the OPAC and start placing an item level hold
    * Verify the messages in the item table show the branchcode
    * Apply patch
    * Only visible change should be the library name replacing the branchcode
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e4d2ef0f4691058cdb9fdff34a5a555a755f75a2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jul 27 20:46:03 2022 -0300

    Bug 31249: Use cronlogaction on update_patrons_category.pl
    
    This patch does what the title says.
    
    To test:
    1. Run the script
    2. Check the action logs
    => FAIL: Boo, no record of the running cronjob
    3. Apply this patch
    4. Repeat 1-2
    => SUCCESS: Yay!
    5. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Liz Rea <liz@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 92f5e02a8c2ee7efaa9478015a860a5f62ee05aa
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 13 08:01:48 2022 +0200

    Bug 30992: Improve translatability for 'for'
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eedec9e929c641c9dcdb5c002f812ecf034433d4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 13 08:01:34 2022 +0200

    Bug 30992: Improve translatability for Waiting at|On hold
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e544ff4345498902dad76acfc7077b473870a74a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Aug 4 09:55:16 2022 -0300

    Bug 29632: (QA follow-up) Fix COMMENT discrepancy on upgrade
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 657a9f28998feb3745b31adaca2e4df19d25a02b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Aug 4 09:47:38 2022 -0300

    Bug 30650: (QA follow-up) Fix TINYINT fields discrepancy on upgrade
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e7a8aab055affcb6c59d76bd55454d333759f599
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Aug 2 15:04:03 2022 -0300

    Bug 31220: (QA follow-up) Add missing filter
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 470fb6b6d8ab06a3750b147721fb139ced45a532
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jul 22 11:36:06 2022 +0000

    Bug 31220: Pass label batch and ids to label-create-pdf
    
    This patch fixes a malformed link to print selected labels
    and fix error:
    Can't locate object method "get_attr" via package "-2" (perhaps you forgot to load "-2"?) at /usr/share/koha/intranet/cgi-bin/labels/label-create-pdf.pl line 126.
    
    To test:
    1 - Create a new label batch with some items
    2 - Select 1 or more
    3 - Export selected labels
    4 - Download as PDF
    5 - It works!
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b0a77687ac1ece0b767da836b7e9c7d37e10e698
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Aug 3 11:20:20 2022 +0000

    Bug 31288: (QA follow-up) Check userenv in disown_or_delete
    
    Test plan:
    1. Apply the regression tests
    2. Run:
       $ kshell
      k$ t/db_dependent/Koha/Virtualshelves.t
    => FAIL: Tests fail!
    3. Apply this patch
    4. Repeat 2
    => SUCCESS: Tests pass!
    5. Sign off :-D
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fa22219a1fcc253df64842e52ccdd4b3f28b3a03
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Aug 3 11:40:51 2022 -0300

    Bug 31288: Regression tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e92827b9bd53fa9cf0ff8416f3b82250b7df30f5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Aug 2 09:41:54 2022 -0300

    Bug 30879: DBRev 22.06.00.031
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 505e12970d81fe30436a6a86189c17c9c242a729
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jun 22 14:55:03 2022 +0000

    Bug 30879: Add option to syspref and update display
    
    To test:
    1 - Update ComponentSortField system preference and verify biblionumber is an option
    2 - Repeat test plan from 30327 and confirm sorting with biblionumber works
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fbf1c32a6ff03b29f68f0bee6017fb15ea8b0c1b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jun 22 14:49:05 2022 +0000

    Bug 30879: Handle index/sorting for UNIMARC
    
    Same as before, but test with UNIMARC setup
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c8c51867c479bc153d84f9e23cad5983bdd535cb
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jun 22 14:42:17 2022 +0000

    Bug 30879: Allow biblionumber as sort option in Elasticsearch
    
    Repeat previous tests with Elasticsearch engine
    You will need to reindex and reset mappings to pickup the changes form the file
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 230bae0b02875dc25abe8ba71f6e7217fce80b76
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jun 22 14:37:23 2022 +0000

    Bug 30879: Add biblionumber as a sorting option in MARC21
    
    This patch updates the Local-Number indexing by adding a zeropad option
    to Zebra indexing and adding this to the mapping files
    
    It also updates C4/Search.pm to allow biblionumber as an option
    
    To test:
    1 - Apply patches
    2 - copy etc/zebradb/marc_defs/marc21/biblios/biblio-zebra-indexdefs.xsl to /etc/koha/zebradb/marc_defs/marc21/biblios/biblio-zebra-indexdefs.xsl
    3 - Restart all, reindex zebra
    4 - Browse to: http://localhost:8081/cgi-bin/koha/catalogue/search.pl?idx=kw&q=a&sort_by=biblionumber_dsc&count=20
    5 - Confirm records sorted correctly
    6 - Browse to http://localhost:8081/cgi-bin/koha/catalogue/search.pl?idx=kw&q=a&sort_by=biblionumber_asc&count=20
    7 - Confirm records sorted correctly
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 494a6d7863493c4777d26b4dbc0ea0c4d32c2d0b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Aug 2 09:30:28 2022 -0300

    Bug 31274: DBRev 22.06.00.030
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1c0b7bf01fabe7dfa558b29a7549c39a6f627c18
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Aug 1 11:38:01 2022 -0300

    Bug 31274: Make sure OPACSuggestionAutoFill is handled as a boolean everywhere
    
    The YAML preference definition defines it as a string ('yes' or 'no' the
    possible values). And the opac-suggestions.tt template has one occurence
    of the variable being compared to a string.
    
    This patch does:
    - fix the template
    - fixes opac.pref for 0|1
    - adds an atomicupdate that takes care of moving 'yes' and 'no' to their
      respective boolean values.
    
    To test:
    1. Change the syspref value to enable/disable
    2. Check on the DB that the value is wrong:
       $ koha-mysql kohadev
       > SELECT value FROM systempreferences WHERE variable='OPACSuggestionAutoFill';
    => FAIL: It is either 'yes' or 'no' depending on what you choose.
    3. Apply this patch
    4. Run:
       $ updatedatabase
    5. Repeat 2
    => SUCCESS: Values are now 0 or 1
    6. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bd268aa7d5ef8dd1a9183ad6567613c31bd9efb0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Aug 2 08:45:07 2022 -0300

    Bug 30392: (QA follow-up) Remove deleted_on from the API response
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cdf34ce15603edfee5453ce7b232d2ceb0aa61e7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Aug 1 14:48:34 2022 -0300

    Bug 30077: (QA follow-up) Avoid warning
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 12f42a5aafea277c2e8456d658e3cd8bb48930bf
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Aug 1 12:28:20 2022 +0000

    Bug 29579: (QA follow-up) Fix up t/db_dependent/Koha/Reports.t
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f0ba2a8484759d178c5c037f901e2d63a6c97192
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jul 21 13:12:06 2022 -0400

    Bug 29579: Show saved SQL report ID in database query
    
    When trying to figure out which saved SQL report caused too much load, it's useful to have the report id show in the mysql process list.
    
    This patch adds the saved SQL ID number as a comment line in front
    of the SQL before passing it to the database.
    
    Test Plan:
    1) Apply this patch
    2) Restart all the things!
    3) Create a long running query like:
       SELECT * FROM borrowers a, borrowers b, borrowers c, borrowers d
    4) Connect to the database using koha-mysql
    5) Execute "show processlist;"
    6) Note the Info column looks something like:
       SELECT * FROM borrowers a, borrowers b, borrowers c, borrowers d /* saved_sql.id: 1 */
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1c924bbcf4913da1659a7aab6a3ea7cd720584c1
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Aug 1 14:35:35 2022 -0300

    Bug 30392: DBRev 22.06.00.029
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ba404f2ba93a4c79c55ea9977848bb889d5c97b7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Aug 1 14:33:29 2022 -0300

    Bug 30392: DBIC update
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bc1e0d04fca13adb1553cdba32e33c7a4ce24fc1
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Aug 1 14:30:17 2022 -0300

    Bug 30392: (QA follow-up) Correct COMMENT
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 36d1f18bd57796c0200ca0de0495a6720d2bbfcc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 25 10:07:48 2022 +0200

    Bug 30392: Set deleted_on when an item is (marked as) deleted
    
    We could like to track down when an item has been moved to the
    deleteditems table.
    
    Test plan:
    Created a new item, delete it
    Not that the deleteditems.deleted_on value is set correctly
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 959fe662ed9f236061eac41b57698acae5d0827d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 25 09:48:16 2022 +0200

    Bug 30392: DB changes
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 35e03400495924088081e825349261a3c2b54ac8
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Aug 1 14:05:45 2022 -0300

    Bug 30077: DBRev 22.06.00.028
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 67cc0f8de2566f861c8cfd7185cf57cb92d9cf49
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Aug 1 14:04:43 2022 -0300

    Bug 30077: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c1ba39c8c9195a4789608209d907ebcb44bfa06a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Apr 6 14:17:46 2022 +0000

    Bug 30077: (follow-up) Set max width for library drapdown
    
    If you have a library with a very long name the dropdown will expand to
    accommodate it. I think this is awkward-looking, so I propose to set a
    max width on <select> elements in the header search region.
    
    The patch requires a rebuild of the staff interface CSS:
    https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 593614456c1c25ddb5ebd34d511a126cf659bc49
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Apr 5 23:04:33 2022 +0000

    Bug 30077: (follow-up) retain branch selection
    
    To test:
    1. Apply patch, updatedatabase, restart_all
    2. Search for the system pref 'IntranetAddMastheadLibraryPulldown'
    3. Set it to 'Show'.
    4. Go to any page that contains header search box and click on 'Search
       the catalog'.
    5. To the left of the search bar you should see a dropdown for branches.
    6. This should be defaulted to 'All libraries'.
    7. In the dropdown choose any branch and do a search and make sure it is
       correctly limiting to that branch.
    8. Try changing to a different branch and doing another search. It
       should correcrly limit to that branch and retain that branch in the
       dropdown, just like the OPAC.
    9. Try selecting 'All libraries' from the top of the dropdown and make
       sure it is correctly searching all branches.
    10. Turn on the system pref 'IntranetCatalogSearchPulldown' and make
        sure it looks nice with both of those dropdowns and functions when
        you use limiters from both dropdowns.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 53e9309772206ac947d94eefd85a3e1fdf0cfdef
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Feb 10 23:48:13 2022 +0000

    Bug 30077: Add system preference IntranetAddMastheadLibraryPulldown
    
    To test:
    1. Apply patch, updatedatabase, restart_all
    2. Search for the system pref 'IntranetAddMastheadLibraryPulldown'
    3. Set it to 'Show'.
    4. Go to any page that contains header search box and click on 'Search
       the catalog'.
    5. To the left of the search bar you should see a dropdown for branches.
    6. This should be defaulted to 'All libraries'.
    7. In the dropdown choose any branch and do a search and make sure it is
       correctly limiting to that branch.
    8. Try changing to a different branch and doing another search. It
       should correcrly limit to that branch BUT it should also default back
       to 'All libraries' for the next search.
    9. Try selecting 'All libraries' from the top of the dropdown and make
       sure it is correctly searching all branches.
    10. Turn on the system pref 'IntranetCatalogSearchPulldown' and make
        sure it looks nice with both of those dropdowns and functions when
        you use limiters from both dropdowns.
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d990595d846cd087f67a59a13ee492ef68e27a47
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Aug 1 14:00:03 2022 -0300

    Bug 23919: DBRev 22.06.00.027
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fa5f643000ebffda464fef611a0bf788900c369d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Aug 1 13:55:35 2022 -0300

    Bug 23919: (QA follow-up) Tidy query build code
    
    This is really opinionated, but I found this to be much cleaner to read
    and thought it was worth pusing as well.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cdcccc9cbe4c458ba7a1b57aa29e1d24463c5bd7
Author: Slava Shishkin <slavashishkin@gmail.com>
Date:   Fri Apr 29 12:10:54 2022 +0300

    Bug 23919: Add tests for Items search by ISBN and ISSN with variations
    
    (sysprefs SearchWithISBNVariations/SearchWithISSNVariations)
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 678bc58bb99f9c057a48a21f941670a49ec06925
Author: Slava Shishkin <slavashishkin@gmail.com>
Date:   Wed Apr 27 00:22:54 2022 +0300

    Bug 23919: Items search by ISBN variations and ISSN variations
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d5850d8ba44e1de41e8ba2c40604d299db445c8a
Author: Slava Shishkin <slavashishkin@gmail.com>
Date:   Thu Apr 28 22:38:23 2022 +0300

    Bug 23919: Add tests for biblioItems search by ISBN and ISSN with
    
    variations (sysprefs SearchWithISBNVariations/SearchWithISSNVariations)
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a18da2b21f3960ed344f8afb5caa9c99bb30331e
Author: Slava Shishkin <slavashishkin@gmail.com>
Date:   Tue Apr 26 23:38:33 2022 +0300

    Bug 23919: Zebra search by ISSN variations
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b789571ff57630818ee977212b5bcca0246777f1
Author: Slava Shishkin <slavashishkin@gmail.com>
Date:   Sun Apr 24 00:18:22 2022 +0300

    Bug 23919: Add new system preference SearchWithISSNVariations
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 83b7f1a74d6c9089e7ddf4c9435436e51b519ff1
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Aug 1 10:00:54 2022 -0300

    Bug 30984: DBIC update
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6a3262de99ba05a49e63ee45e823d9bda87f1efc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 1 14:44:04 2022 +0200

    Bug 30612: Rename other occurrences
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5b7ec36b7f91b0b6a7b77bc910f334871231ab0a
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Aug 1 08:34:17 2022 -0400

    Bug 30612: (QA follow-up) Rename accountlines method to account_lines
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 396402aa6850ce1f57106d9820d9081f10256df8
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Jun 8 13:43:01 2022 -0400

    Bug 30612: Update schema files
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 58dfeff13a2ade61a6a3eda2a4339b4b1cf02637
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Jun 8 13:41:56 2022 -0400

    Bug 30612: Add accountlines method to Koha::Checkout and Koha::Old::Checkout
    
    It would be very useful to have an accountlines method on checkouts objects. In particular it would make fees related to a checkout available from the checkout objects in overdue notices.
    
    Test Plan:
    1) Apply this patch
    2) prove t/db_dependent/Koha/Account/Line.t
    3) prove t/db_dependent/Koha/Checkouts.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ad0aa754ee2a3e8e438594a54b2375b994753951
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Aug 1 07:25:10 2022 +0000

    Bug 27849: (follow-up) Add test
    
    Compacting the code a bit too.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8c45fe1aaa54fd9d6ff84617df0bb94b4cfbbb12
Author: MJ Ray <mjr@phonecoop.coop>
Date:   Wed Mar 3 17:54:42 2021 +0000

    Bug 27849: Koha::Token may access undefined C4::Context->userenv
    
    The _add_default_csrf_params internal function accesses
    C4::Context->userenv without checking that it has been defined. I think
    not all of the potential callers of it declare that they require a
    defined userenv, so we should test and provide defaults for required
    values if it is not defined, to avoid some "Can't use an undefined value
    as a HASH reference" HTTP 500 Internal Server Errors.
    
    To test:
    
    Do anything that requires a form with CSRF token, such as editing your
    details. Behaviour should be unchanged. To test the failure case, you
    would need some customised code that indirectly generates a CSRF token
    before setting the userenv up and I am not sure there is any in released
    Koha yet.
    
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    
    Looks good to me. Working as expected.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5ca665f6aaf750fa507875343da0adb423ad7bd8
Author: Michael Hafen <michael.hafen@washk12.org>
Date:   Fri Aug 13 15:52:52 2021 -0600

    Bug 28864: Have patron card creator use PatronsPerPage
    
    Add pageLength to members/member.tt
    Add aLengthMenu and pageLength to
     patroncards/add_user_search (common/patron_search.tt).
    Add aLengthMenu, pageLength, and iDisplayLength to patroncards/edit-batch
    
    Test plan:
    1.  Set the PatronsPerPage system preference to any integer other than 20.
    
    2.  Go to Tools -> Patron card creator.
    3.  Start a new Card Batch.
    4.  Click the 'Add patron(s)' button to open the patron search window.
    5.  Do a search.
    6.  Add more than 20 patrons to the batch.
    7.  Close patron search window.
    8.  Click the 'Add patron(s)' button to add the selected patrons to the batch.
    9.  Observe that the table of patrons is has 20 as the default per page setting.
    
    10. Apply patch.
    11. Reload the batch.
    12. Observe that the per page drop down includes the value of PatronsPerPage
         and that value is selected by default.
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 945339b757e6fdc2c216b405c0afd3bfb42a3de0
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jul 30 13:39:41 2022 +0000

    Bug 30964: (QA follow-up) Add classes to allow for additional styling
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3960ccb4de0b2308919d9428cb19bb5ef438cc3b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 27 15:20:03 2022 +0200

    Bug 30964: Add 'restricted' and 'has overdues' on curbside pickup
    
    This patch adds more information about the patron's account on the
    curbside pickup list view.
    "Patron's account is restricted" if the patron is restricted
    "Patron has items overdue" if the patron has overdues
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8bba933d488fe98cbc379552a332f328cad515e7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Aug 1 09:26:59 2022 -0300

    Bug 30984: DBRev 22.06.00.026
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 526606901626082831ab501609cf05e360551ce1
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jul 29 06:53:06 2022 -0400

    Bug 30984: (QA follow-up) Switch from mediumtext to varchar(255)
    
    My research indeicates that tinytext of less than 40 bytes uses
    about the same storage as a varchar(255). Also, using
    a TEXT field in a complex query may create a temp table.
    varchar fields are also more efficient for sorting on.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b3a0d75a40cfeec8e14d7092b4cf23763363b45a
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jul 29 06:39:21 2022 +0000

    Bug 30984: (QA follow-up) Ternary formatting style
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 18fd0c89cf7f288ad5ff4527484d9e989ed3e5f7
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jun 17 06:59:11 2022 -0400

    Bug 30984: Action logs should log the cronjob script name that generated the given log
    
    When something is changed by a cronjob, and that entity is logged via action logs, we can know what changed, and that it was via a cronjob, but we cannot necessarily know which cronjob made that change. The closest we can come is to find the action logs for the cronjob module which ran before the change which is by no means reliable assuming the CronLog is even enabled.
    
    We should add a new column to action logs to store the name of the script ran for any action logs where the interface is "cron".
    
    Test plan:
    1) Apply this patch
    2) Run updatedatabase.pl
    3) Enable all the Log/Logging sysprefs
    4) Run some cronjobs that will generate action logs
    5) Note the new action_logs column "script" contains the filename of the
       cronjob that caused the change.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4f6164d1940f4d666d2efb0e3e8d76bea3108125
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Sun May 1 23:59:09 2022 +0200

    Bug 30658: (bug 29496 follow-up) CheckMandatorySubfields don't work properly with select field in serials-edit.tt for Supplemental issue
    
    CheckMandatorySubfields use the class "input_marceditor" but in file
    serials-edit.tt this class is not set for select input in Supplemental
    issue form. In consequence if a select field is set as mandatory, it is
    detected as missing even if it is filed and so you can't submit the form
    and receive the new supplemantal issue.
    
    Test plan:
    1- Create (or find) a subscription for a biblio record and select the
       option "Create an item record when receiving this serial"
    2- Be sure to have at least one mandatory subfield that is filed with a
       select input in the framework used by the biblio record. (ex: 952$a,
       952$b or 952$c).
    3- From the subscription-detail page click on "Receive"
    4- In the lower part--Supplemental issue--fill the suppelemant details,
       change the status to "Arrived" and fill the item form that appears.
    5- Click on "Save"
    6- Check that an error box appear with the message " Form not submitted
       because of the following problem(s) 1 mandatory fields empty
       (highlighted)" (the number can be different according to the number of
       concerned subfields)
    7- Apply the patch
    8- Repeat step 3 to 5
    9- Check that no error appear and that your item has been created
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4a00658e349fb21a9a334f0ab880d81b8f51d2e3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Aug 1 12:31:21 2022 +0200

    Bug 30468: Restore 'set -e' and remove echos
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e97b099d58e73be44354d2343c0f45077871b398
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Apr 6 08:38:00 2022 -0400

    Bug 30468: koha-mysql does not honor Koha's timezone setting
    
    If I run a query like "SELECT NOW()" from a koha report, I will get a different answer than if I had run it from koha-mysql.
    In Koha, we set the timezone for each database connection.
    However, koha-mysql does not do this, so instead we are left using the default timezone of the database.
    
    Test Plan:
    1) Set your time zone to something other than the database time zone
    2) run "SELECT NOW()" using debian/scripts/koha-mysql
       *not* /usr/sbin/koha-mysql
    3) Note you get the database timezone's current time
    4) Apply this patch
    5) Repeat step 2
    6) Now you get the correct time!
    
    Signed-off-by: Michal Urban <michalurban177@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 573db0fca181cb36063462ed566adc5bac7f293d
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Jul 29 23:41:13 2022 +0000

    Bug 31269: Define sDefaultContent for DataTables
    
    1. Stage a MARC record for import
    2. Once you have one click on 'Manage staged records'
    3. You will see an alert that says "Something went wrong when loading the table."
    4. If you dismiss that you should see the following error:
    
    DataTables warning: table id=records-table - Requested unknown parameter '' for row 0, column 4. For more information about this error, please see http://datatables.net/tn/4
    
    5. Appy patch
    6. Try ssteps 1 & 2 again
    7. No DataTable errors
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 622137294a4f1eca66ff794e1a91a75c08fe30c8
Author: Shi Yao Wang <shi-yao.wang@inlibro.com>
Date:   Fri May 27 10:52:08 2022 -0400

    Bug 30028: Fix patron message delete confirmation to be translatable
    
    Make the message deletion confirmation popup translatable. Test plan
    uses fr-CA translations.
    
    Test plan:
    1) Switch language to french (fr-CA)
    If you do not have the translations, go to
      misc/translator
    then do
      ./translate install fr-CA
    After it is done, go to administration > global system preference >
    l18N/L10N then select Français (fr-CA) under language preference.
    Refresh then you should be able to switch languages.
    2) Add a message to a patron account from your own branch (or make sure AllowAllMessageDeletion is on)
    3) Click "Delete" next to the message
    --> a confirmation message appears "Are you sure you want to delete this message? This cannot be undone." with options "Cancel" and "OK".
    4) Apply the patch
    5) Write a translation in misc/translator/po/fr-CA-messages-js.po :
    msgid "Are you sure you want to delete this message? This cannot be undone."
    msgstr "Êtes-vous sûr de vouloir supprimer ce message? Cette opération est irréversible."
    6) Refresh the translations by going to misc/translator and execute ./translate install fr-CA
    7) Refresh and click "Delete" again
    --> now the confirmation message is "Êtes-vous sûr de vouloir supprimer ce message? Cette opération est irréversible." with options "Cancel" and "OK"
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 94191e5bfe681dca021bb133c9593bc5bc7e2193
Author: Tim McMahon <tmcmahon@wlpl.org>
Date:   Fri Jul 29 13:29:52 2022 -0500

    Bug 30499: Move the include for catalogue-search-box.inc in circ-search.inc to correct keyboard shortcuts
    
    Keyboard shortcuts for catalog search, check in and renew should be following:
    1) Alt-q for catalog search
    2) Alt-r for check in
    3) Alt-w for renew
    
    However on some of the pages shortcuts get mixed up:
    
    1) Alt-w for catalog search
    2) Alt-q for check in
    3) Alt-r for renew
    
    Affected files are:
    circ/pendingreserves.tt
    circ/circulation_batch_checkouts.tt
    circ/circulation-home.tt
    circ/branchtransfers.tt
    circ/branchoverdues.tt
    circ/set-library.tt
    circ/checkout-notes.tt
    circ/renew.tt
    circ/waitingreserves.tt
    circ/transferstoreceive.tt
    circ/offline.tt
    circ/bookcount.tt
    circ/on-site_checkouts.tt
    circ/circulation.tt
    circ/transfers_to_send.tt
    circ/request-article.tt
    circ/overdue.tt
    circ/reserveratios.tt
    offline_circ/list.tt
    offline_circ/process_koc.tt
    offline_circ/enqueue_koc.tt
    plugins/plugins-upload.tt
    plugins/plugins-disabled.tt
    pos/registers.tt
    pos/register.tt
    pos/pay.tt
    reports/reports-home.tt
    reports/dictionary.tt
    reports/guided_reports_start.tt
    reserve/request.tt
    tools/scheduler.tt
    
    This is because the include statement for catalogue-search-box.inc is in the wrong line in circ-search.inc.
    
    To test:
    1) Go to an affected page (circulation-home was the first one I noticed)
    2) Try the keyboard shortcuts and notice they are incorrect
    3) Apply patch and refresh the page
    4) Notice that the keys work properly
    
    Signed-off-by: Andrew <andrewfh@dubcolib.org>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 160d96e176331f8ac8eef4942bcc0af1868017c5
Author: Bernardo González Kriegel <gonzalez@di.unc.edu.ar>
Date:   Fri May 6 19:27:28 2022 -0300

    Bug 28707: Translate RECEIPT notice
    
    There is a badly crafted regex used when extracting
    strings in multiline fields in yaml files
    The regex is my own, introduced in Bug 24262, sorry.
    
    This patch correct it a little. Better eyes are welcome.
    
    To test:
    1) go to misc translator, update some language
        ./translate update fr-CA
    
    2) check missing strings
    
        egrep "Total out|Operator ID|August 31" po/fr-CA-installer.po
    
       first two are from sample notices, third from sample creator data
    
    3) apply the patch, repeat 1)
    
    4) repeat 2), verify the strings are present in the translation file
    
    5) translate some of the new strings, install the language,
       verify strings are present in the translated files
        ./translate install fr-CA
       check fr-CA/optional/sample_creator_data.yml and
       fr-CA/mandatory/sample_notices.yml
    
    There are some 60+ new strings.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a3198f647496d87e19036432f1be9f87dac4614d
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Jul 28 18:18:15 2022 +0000

    Bug 31251: Use jQuery val() to clear_entry
    
    1. Add some patron attributes that are textarea and some that have an AV category so they are select dropdowns
    2. Go to the patron form and add some values to the patron attributes
    3. Use the "Clear" button to try and clear the values, doesnt work.
    4. Apply patch
    5. Try clearing values from patron attributes that are both select dropdowns and textarea. The "Clear" button should work.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7867106d430dd9ab3f673185945467931a10082e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jul 26 09:55:38 2022 -0300

    Bug 31223: Do not explode if plugins disabled
    
    This patch makes the code skip calculating the plugin-related task
    codes => class mapping if plugins are entirely disbaled.
    
    To test:
    1. Apply the regression tests
    2. Run:
       $ kshell
      k$ prove t/db_dependent/Koha/Plugins/BackgroundJob.t
    => FAIL: Tests explode with: Can't call method "GetPlugins" on an
    undefined value at... Koha/BackgroundJob.pm line 424.
    3. Apply this patch
    4. Repeat 2
    => SUCCESS: Tests pass!
    5. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 28896d9c302ad41fce463fd8d80ea02283a7d55b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jul 26 10:48:21 2022 -0300

    Bug 31223: Regression tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d33f8729652d47857dd83586a5a282e2d19627a8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sun Jul 31 08:14:21 2022 +0200

    Bug 30965: Add a 'x' to go back to the patron search
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit accc73e1279b753c18bdf21be3cbeab174f8cec3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 27 14:51:45 2022 +0200

    Bug 30965: Add patron autocomplete search to curbside pickups
    
    Prior to this patch librarians had to know the cardnumber to search for
    patron. Now it's possible to search using the default patron
    autocomplete search (name, cardnumber, etc.)
    
    Test plan:
    Confirm that you can search for a patron without their cardnumber,
    select it and create a curbside pickup
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bba4bc93ebd2b5991723bf10d62c99a23b9629bc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sun Jul 31 07:57:03 2022 +0200

    Bug 30650: Add missing koha_object[s]_class methods
    
    To fix TestBuilder.t
            #   at t/db_dependent/TestBuilder.t line 453.
            #          got: 'Can't locate Koha/CurbsidePickupPolicys.pm
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1b0d9cd3da5c16fa34f1b4530d833108ebbc49a7
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Mar 28 19:21:55 2022 +0000

    Bug 30389: Switch to Bootstrap tabs on the page for adding orders from MARC file
    
    This patch updates addorderiso2709.tt so that it uses Bootstrap tabs
    intead of jQuery.
    
    The patch contains indentation changes, so diff accordingly.
    
    To test apply the patch and go to Acquisitions -> Vendor -> Basket ->
    Add to basket -> From a staged file.
    
    - Click "Add orders" next to the staged file you want to use.
    - On the "Add orders" page, test that the tabs work correctly.
    
    Signed-off-by: Séverine Queune <severine.queune@bulac.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a54982970127ffa68a931230a973f04d1888fc35
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 29 16:06:12 2022 -0300

    Bug 14364: DBRev 22.06.00.025
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 51cef8c0ec1eca244ebafb853a9164bde65941cb
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 29 16:04:12 2022 -0300

    Bug 29012: DBRev 22.06.00.024
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a0afcda26ae347ac21b6d9f26a2c0f22d20de98d
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Apr 26 14:34:18 2022 +0000

    Bug 14364: (QA follow-up) Add email validation to ExpireReservesAutoFillEmail
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4bbde3bde6b675473eab5041bcb3f88ff2e36eee
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Apr 26 14:23:25 2022 +0000

    Bug 14364: (QA follow-up) Fix capitalization
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ba7153a76247511840ed63ba94b16b9775c0ce73
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Apr 25 14:41:33 2022 +0000

    Bug 14364: Fix spelling and tests
    
    Moved the installer to pl file
    Adjusted capitalization / reply-to
    Fix tests by importing needed fuction and adjusting a wrong call
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 482f3f1630e990097dff1c1d2961b407adaf047c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Dec 20 14:03:22 2021 +0000

    Bug 14364: (follow-up) Cleanup duplicate code and adjust notices and prefs
    
    This patch removes a duplicated stanza left form moving routine
    Changes the routines to use inbound_library_address
    Improves the display if the system preferences
    Updates the update file
    Moves smaple notice
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6c75695542e2416a52dab1776c751601188aad93
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu May 13 12:04:41 2021 -0400

    Bug 14364: (QA follow-up) Generate message for transfers as well
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6a770ace343b349c03c483c51356dc78f1a16514
Author: Kyle M Hall <kyle@bywatetsolutions.com>
Date:   Fri Feb 2 08:36:02 2018 -0500

    Bug 14364: Allow automatically canceled expired waiting holds to fill the next hold
    
    Right now, if a library automatically cancels expired waiting holds, a
    librarian must still re-checkin an item to trap the next available hold
    for that item. It would be better if the next hold was automatically
    trapped and the librarians receive an email notification so they can
    make any changes to the item if need be ( hold area, hold slip in item,
    etc ).
    
    Test Plan:
     1) Apply this patch
     2) Run updatedatabase.pl
     3) Create a record with one item
     4) Place two holds on that record
     5) Check in the item and set it to waiting for the first patron
     6) Set ReservesMaxPickUpDelay to 1
     7) Enable ExpireReservesMaxPickUpDelay
     8) Enable ExpireReservesAutoFill
     9) Set an email address in ExpireReservesAutoFillEmail
    10) Modify the holds waitingdate to be in the past
    11) Run misc/cronjobs/holds/cancel_expired_holds.pl
    12) Note the hold is now waiting for the next patron
    12) Note a waiting hold notification email was sent to that patron
    13) Note a hold changed notification email was sent to the library
    
    Signed-off-by: Victoria Faafia <vfaafia29@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c39e47cbf3af9b7fcedbfd3a3e0efcffb74efb10
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Tue Jul 26 12:02:16 2022 +0300

    Bug 31238: Fix typo in marc_subfields_structure.pl
    
    After bug 29001 one is unable to save authorised value to frameworks
    subfields. This is caused by minor typo in marc_subfields_structure.pl.
    
    To test:
    1. Edit e.g. default frameworks subfield 952$8
    2. Add or change fields authorised value
    3. Save your changes
    => note that on subfield listing there is no mention that 952$8 is linked to any authorised value
    => if you edit 952$8 authorised value input is empty
    4. Apply this patch.
    5. Repeat steps 1.-3.
    => authorised value should now be saved
    
    Sponsored-by: Koha-Suomi Oy
    
    Signed-off-by: Emmanuel Bétemps <e.betemps@gmail.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6f8e77b4e899d6f71fb8987975ba916a65dc8229
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jul 29 08:12:53 2022 -0400

    Bug 29012: (QA follow-up) Use q{} instead of '' in smart-rules.pl
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cf397ac3bcbc93a508954c836d1cb90a84fb2ac6
Author: Kevin Carnes <kevin.carnes@ub.lu.se>
Date:   Fri Dec 3 09:49:59 2021 +0000

    Bug 29012: Add default values for blank circulation rules that weren't saved to the database
    
    There are 5 fields that are not set if no value is provided when saving/editing a rule in Administration->Circulation and fines rules
    - issuelength
    - hardduedate
    - unseenrenewalsallowed
    - rentaldiscount
    - decreaseloanholds
    
    This is problematic because it gives the impression these rules are set as blank, but in reality they don't exist and the rule will fal back to the higher level
    
    To test:
    1 - Set a rule for
        Patron category: Teacher
        Itemtype: All
        Hard due date: (Today)
        Lona period: 10
    2 - Set a rule for
        Patron category: Teacher
        Itemtype: Books
        Hard due date: (leave blank)
        Loan period: 10
    3 - Expected behaviour is Book item will checkout to teacher for 10 days, all other types will be due yesterday at 25:59:00
    4 - Checkout an non-book item type to teacher
    5 - Hard due date applies
    6 - Checkout a 'book' item type to teacher
    7 - Hard due date applies - FAIL
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d5e65dd4c0352c4fb2d96f4cabfc6e6311770cd0
Author: Frédéric Demians <f.demians@tamil.fr>
Date:   Mon Jul 11 12:05:54 2022 +0200

    Bug 30308: Fix bulkmarcimport.pl broken by OAI-PMH:AutoUpdateSets(EmbedItemData)
    
    Test plan:
    
    (A) Reproduce the bug:
    
    A1 In Administration > System preferences > Web services:
       - Enable OAI-PMH
       - Enable OAI-PMH:AutoUpdateSets
       - Enable OAI-PMH:AutoUpdateSetsEmbedItemData
    
    A2 In Tools > Export data > Export bibliographic records, export 1 (one)
       biblio record. Be sure that this biblio record has at least one item.
       Don't tick "Don't export items".
    
    A3 Delete the exported biblio record, and its items.
    
    A4 In command line, on the server load the exported file:
       ./bulkmarcimport.pl -b -v -file /path/to/koha.mrc
    
    A5 Retrieve the biblio record in Koha. Note the absence of the item(s). This is
       the bug.
    
    (B) Apply the patch
    
    B1 Delete the record (without item) loaded at A4.
    
    B2 In command line, on the server load the exported file:
       ./bulkmarcimport.pl -b -v -file /path/to/koha.mrc
    
    B2 Retrieve the biblio record in Koha. Note the presence of the item(s).
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e7bb0d2a5ed92a1c9fedd5611e5569f11bd47723
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 27 17:47:18 2022 +0200

    Bug 31247: Fix OPAC authentication when 2FA is enabled
    
    Silly mistake from bug 28786, the $type should be compared to "opac"
    instead of "OPAC", erk!
    
    Test plan:
    Turn 2FA on
    Set it up for an user
    Login at the OPAC
    => Without this patch you keep being redirected to the auth form screen
    => With this patch applied you are able to successfully login
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e9891b84fefd74059caf81730b1acd26f7cc4569
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 27 17:52:34 2022 +0200

    Bug 31247: Add tests
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5a4194ead493623f9b3144f6f156890cdd25e594
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 29 15:38:51 2022 -0300

    Bug 30650: (QA follow-up) Some higher-level methods usage
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5f831bcf52061b0bb6340b36f3c3a3f20235973d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 29 15:33:13 2022 -0300

    Bug 22456: DBRev 22.06.00.023
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9e28725966466579fb5c1c1274de7d133994138e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 11 17:35:27 2022 -0300

    Bug 22456: (QA follow-up) Consider cancellation requested as cancelled in OPAC
    
    This patch adds a helper method for filtering out cancellation
    requested-holds from resultsets, and makes use of it in the OPAC to
    filter out those in the current holds tab. Holds history now shows
    'Waiting (cancellation requested)' on those.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0e6f15207720edeacbc34bc1d54c98b01d9ec537
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 27 10:38:29 2022 -0300

    Bug 22456: (follow-up) Cancel holds at checkin
    
    This patch makes checkin process the cancellation requested holds
    actually cancel them before moving forward.
    
    To test:
    1. Have a waiting hold with a patron generated cancellation request
    2. At circulation, check the item in
    => SUCCESS: The workflow follows as if the cancellation requested hold
    was already cancelled
    => SUCCESS: The hold is actually cancelled
    => SUCCESS: Not shown in the OPAC anymore
    
    Sponsored-by: Montgomery County Public Libraries
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b3cdbb557d5ec4a4b5489e64ab73f7bd3b7f6bc6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 18 17:38:37 2022 -0300

    Bug 22456: Staff interface handling
    
    This patch introduces a new tab to the 'Holds awaiting pickup' screen
    for holds that have cancellation requests. This can be accepted (by
    cancelling the hold) or rejected.
    
    To test:
    1. Set circulation rules for cancellation requests, allowing them for
       certain item type.
    2. Have some waiting holds for a patron on an item type that allows
       requesting cancellation.
    3. Visit 'Holds awaiting pickup'
    => SUCCESS: No holds have cancellation requests
    4. In the OPAC, on the user details, notice some holds have the ability
       to be requested cancellation.
    5. Choose to request cancellation
    => SUCCESS: Request is placed, the button is disabled
    6. In 'Holds awaiting pickup' you can see them
    7. Play with rejecting/accepting
    => SUCCESS: It works!
    8. Things are reflected in the OPAC side
    
    Sponsored-by: Montgomery County Public Libraries
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f7173143853c37e44dec29e42068ee9ca68d4b6c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 18 16:16:58 2022 -0300

    Bug 22456: Allow requesting cancellation from the OPAC
    
    Sponsored-by: Montgomery County Public Libraries
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a40f8f697f78b5937876d127afeb2bd3dfa5027b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon May 23 11:44:19 2022 -0300

    Bug 22456: Add Koha::Holds->filter_by_has_cancellation_requests
    
    This patch adds that method. Which is covered by new tests.
    
    To test:
    1. Apply this patch
    2. Run:
       $ kshell
      k$ prove t/db_dependent/Koha/Holds.t
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Sponsored-by: Montgomery County Public Libraries
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e22e91aae4912b97a4bd8729e8c97efbfd8f3e44
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 18 14:05:04 2022 -0300

    Bug 22456: Add cancellation request methods to Koha::Hold
    
    This patch adds the following helper methods for dealing with hold
    cancellation requests to the Koha::Hold class:
    
     * cancellation_requests
     * add_cancellation_request
     * cancellation_requestable_from_opac
     * cancellation_requested_by_owner
    
    To test:
    1. Apply this patch
    2. Run:
       $ kshell
      k$ prove t/db_dependent/Koha/Hold.t
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Sponsored-by: Montgomery County Public Libraries
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 100e79de477b0e276ca795567ce6a5e8d624fbaf
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Apr 21 11:19:58 2022 -0300

    Bug 22456: Add Koha::Hold::CancellationRequest(s) class(es)
    
    This patch adds the Koha::Object-derived classes for cancellation
    requests.
    
    Tests are added for the overloaded ->store method.
    
    To test:
    1. Apply this patch
    2. Run:
       $ kshell
      k$ prove t/db_dependent/Koha/Hold/CancellationRequest.t
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Sponsored-by: Montgomery County Public Libraries
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d7bfe09dd698bdb82078b520a6c16142d5d58d78
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 18 13:08:19 2022 -0300

    Bug 22456: DBIC update
    
    Sponsored-by: Montgomery County Public Libraries
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d3ebbb88be68e42318f3de08ba55318e2970a70c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 18 17:54:14 2022 -0300

    Bug 22456: Add waiting_hold_cancellation circulation rule
    
    This patch adds handling for the waiting_hold_cancellation circulation
    rule. It is set no 'No' by default in the atomic update, if not
    previously set.
    
    Handling in the rules editor is added, in its own section.
    
    To test:
    1. Apply this patch
    2. Run:
       $ updatedatabase
    => SUCCESS: All good
    3. Verify that the syspref is set:
       $ koha-mysql kohadev
       > SELECT * FROM circulation_rules WHERE rule_name='waiting_hold_cancellation';
    => SUCCESS: Set to 0
    4. Play with the rules editor, changing things back and forth, things
       should work, including library-specific and global/defualt settings.
    => SUCCESS: It works
    => SUCCESS: Texts are idiomatic
    5. Sign off :-D
    
    Sponsored-by: Montgomery County Public Libraries
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a2dbdc6fc44e379c8bec04f5396799da4f3d9d90
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 18 10:45:02 2022 -0300

    Bug 22456: Add cancellation request table
    
    This patch adds a new table, for storing holds cancellation requests,
    and managing them afterwards.
    
    The *hold_id* attribute is not made a FK on the reserves table because
    of the old_reserves thing we still do (see bug 25260 for a discussion
    about it).
    
    Sponsored-by: Montgomery County Public Libraries
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c02dae93806d820ec38125647b06750fb58f7582
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 29 15:20:27 2022 -0300

    Bug 30650: DBRev 22.06.00.022
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 683dc6544d7cb113b3d355f0309d851e0143f71c
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jul 29 16:14:46 2022 +0000

    Bug 30650: (QA follow-up) Terminology: location - library
    
    Updates one remaining occurrence of "at this location" meaning
    "at this library".
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 15365b150a9962d0693bdfe80cf9762c3452264f
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jul 29 15:58:11 2022 +0000

    Bug 30650: Add missing name to notice added by database update
    
    The notice was missing the name, which gives you an error when
    you try to save changes in Koha.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ac1f65bc2c99849e0e797e86cc46c2f364b81325
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 29 16:58:24 2022 +0200

    Bug 30650: Add message on the admin page if the pref is off
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0f0842465b6af8c41cc6abf09984c316a2dac365
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 29 16:36:19 2022 +0200

    Bug 30650: Split yml on several lines to help translation
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8e3f95f52c2ac93abd7a6aa16580c395bbe9f96f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 29 16:22:04 2022 +0200

    Bug 30650: Add the sidebar to the circ view
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 85a65eeb5ab350643a39e17f33cd01f17ed17a78
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 29 16:12:36 2022 +0200

    Bug 30650: Add link to the circ nav bar
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6c347921fedefdfbe41182bfaa287eb626c1a755
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 29 16:07:50 2022 +0200

    Bug 30650: Add info to the trash icon
    
    And add a missing space between the time and icon
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d93f7b8215f2ec006cb6a9d04494c20a26dea73
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 29 16:04:17 2022 +0200

    Bug 30650: Add dayjs license to the about page
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 88c600e3de264ebb273b5e95c4e89985d527262e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 29 16:03:26 2022 +0200

    Bug 30650: Fix some typos
    
    * Curbside pickups are not enabled for your location. = library
    * Pickup Date/Time = capitalization
    * ... it is an holiday = it is a holiday. (multiple)
    * Deliver Date/Time = capitalization
    * There is no waiting holds for this patron at this location. = There are no... at this library
    * No pickup time define for this day. = defined (multiple)
    * You don't have waiting holds at this location = library
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 13104f2db778531f4bf84ca7af307e265b73b063
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 29 11:21:14 2022 +0200

    Bug 30650: Display the link in the admin even if the pref is off
    
    The link in the sidebar was displayed already. The idea is to let admins
    configure the module before enabling it for users.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit db1995935f6d07b707c6012f344fef9b2a3b25fe
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 6 16:08:35 2022 +0200

    Bug 30650: Take dateformat into account
    
    dayjs init was not passing the dateformat.
    We really need to clean the date handling with the following two bugs:
      Bug 30310 - Replace Moment.js with Day.js
    and
      Bug 30718 - Use flatpickr's altInput option everywhere
    
    But it's outside the scope of this bug report.
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b567194b39c3231ccc6e98c5c5cd1f18fc0f1ca0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 6 16:07:58 2022 +0200

    Bug 30650: Add dayjs customParseFormat plugin
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 96bcc5cbda023303560c9b1097fdeb02683af106
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 6 09:48:39 2022 +0200

    Bug 30650: Don't display slots that have are before now
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 01c96335148abb98e4f3b3fd9ce0c243066c6e71
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 4 17:12:24 2022 +0200

    Bug 30650: Display holds waiting at the logged-in library
    
    Not those waiting at the library of the logged-in user
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2822412908473b3815647f4af7a18059c76492ee
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 10 08:34:05 2022 +0200

    Bug 30650: DBIC specific
    
    Note for QA - a false positive is raised by the QA tools:
    
    """
    The new column curbside_pickup_opening_slots.day is using TINYINT(1) as
    type but is not defined as boolean in the schema file
    (Koha/Schema/Result/CurbsidePickupOpeningSlot.pm)
    """
    
    => It's not a boolean!
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d6d6e6ed0a22b4e7f16e7f577a1da67dae35423f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 27 13:59:51 2022 +0200

    Bug 30650: DBIC
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 56e1ce35ab10eca526d4326faef5a506b0f883b4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 15 11:27:19 2022 +0200

    Bug 30650: Prevent browser crash if no pickup interval set
    
    Don't get stuck in an infinite loop
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 50f8cce21135614e1228fe7c98e9dae43ba5e07f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 15 10:58:07 2022 +0200

    Bug 30650: Select 'schedule a pickup' if no pickups yet
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bcf690e69e5e2067146b4a723c908baf86a7ff17
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 15 10:03:28 2022 +0200

    Bug 30650: Split the permission
    
    We actually want one permission to manage the administration page, and
    one for the circulation module.
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d0835156e4a6341d723993ac9e0095dc3621f6f8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 10 14:01:09 2022 +0200

    Bug 30650: Prevent pickup to be created on holiday
    
    We could improve this more and add disable the holiday from the date
    picker widget, but it's out of the scope here.
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b6fd2ece23b87369bc8cf4ff2911bbc8b8c8ac15
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 10 10:42:51 2022 +0200

    Bug 30650: Add filter_by_scheduled_today
    
    A bit of cleaning
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 78b96996f5b7b512b4fefbf6312e740e7ef181c6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 10 09:50:55 2022 +0200

    Bug 30650: Add link from the circ patron page
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2d3489f7237527d15b6bc0f589b7564239f3d50d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 10 09:24:16 2022 +0200

    Bug 30650: Add link from the mainpage
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d1ad3c11462a704d56b5dacda519fcdfcb3e727a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 10 09:04:36 2022 +0200

    Bug 30650: Allow to restrict curbside pickup for waiting holds only
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d01c0c7fa361c4ef7e455369f1a340aea905ef39
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 10 08:18:02 2022 +0200

    Bug 30650: DB - Add policy.enable_waiting_holds_only
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 00da3ec0a364f24481c96b207bb06956555b80ae
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 9 18:35:10 2022 +0200

    Bug 30650: Notify the patron when a new curbside pickup is created
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fdf53e0ae8fbc716bc8ac70351f0ce278199e5dd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 9 12:14:39 2022 +0200

    Bug 30650: Add link from the member toolbar
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8a712ede2872243776cd4a1775381a288cc67a49
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 3 22:05:58 2022 +0200

    Bug 30650: OPAC view
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 572df4f172244ffa8497536e7121b8ed24da3d16
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 3 22:51:26 2022 +0200

    Bug 30650: Add dayjs to opac
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ead28aad7ba4ef50155ee3adcf744d06c35fad5c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 2 17:21:59 2022 +0200

    Bug 30650: Add dayjs and isSameOfAfter plugin
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4a51122e2657a44cb45a013b5c0817e9b0d0acf4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 10 10:14:20 2022 +0200

    Bug 30650: Add circulation page view
    
    This is the main commit message.
    
    A plugin already exists to manage curbside pickups. This new
    enhancehemnt is suggesting an implementation that is ready to be integrated
    into Koha core in order to provide the feature out-of-the-box.
    
    What has been done in this patch set:
    - Deal with installations using the existing plugin (upgrade the DB schema and migrate their data)
    - Add a new syspref (CurbsidePickup) and two new permissions:
      * parameters.manage_curbside_pickups
      * circulate.manage_curbside_pickups
    - Add an administration page to setup the configuration: admin/curbside_pickup.pl
    - Add a circulation page to manage the existing pickups, and create new one
    - Add a new OPAC view "your curbside pickups" to let patron manage their pickups, and create new ones
    - Add link from the "member" toolbar
    
    Improvements compared to the plugin:
    - Ability to create several pickup windows per day
    - Better display of the pickup times (not in a dropdown list)
    - Ability to disable pickups for patrons without waiting holds
    - Display pickups on the patron circulation page
    - Display pickups of the library on the homepage
    - Prevent pickup to be created on a holiday
    - Better error handling (exceptions)
    - Unit tests
    
    More improvements are already planned, see related bug reports.
    
    Test plan:
    After you setup the feature correctly from the administration view, you
    will be able to use the schedule curbside pickups from the staff
    interface, and from the OPAC interface if you selected "patron-scheduled
    pickup"
    A. Staff interface
    1. Go to Circulation > Curbside pickups
    => If the logged-in user has the circulate.manage_curbside_pickups
    permission you will be able to create and manage curbside pickups
    2. Go to a patron detail page and click the "Schedule pickup" button in
    the toolbar
    3. If the patron has waiting holds and you selected "Enable for waiting holds only",
    of if you didn't select the option, you will be able to select a pickup
    date and slots to create a pickup.
    4. Confirm that you cannot create more pickups per slot than what you
    defined in the curbside pickup configuration for this library
    5. Confirm that you cannot create a pickup if the feature is disabled
    for the library
    6. Notice that you can mark the pickup as "stage and ready", then
    "patron is outside" and finally "delivered today". You can also rollback
    the change
    7. Notice that once the pickup has been marked as delivered, the
    item has been checked out and that a new notice has been generated (if
    the patron has "Hold_Filled" in their messaging preferences
    8. Confirm that the information about current pickups is displayed on
    the circulation page of the patron
    
    B. OPAC interface
    1. Create a new curbside pickup from the OPAC
    2. Confirm that the same limitations as from the staff interface are in
    effect (waiting holds, number of patron per slots, etc.)
    3. Confirm that you can cancel a pickup and alert staff of you arrival
    4. Confirm that you cannot cancel a pickup that has been delivered
    already
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2b1a0e9d0d163bd75f9a989ee6016a2fb7f3a546
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 10 10:29:27 2022 +0200

    Bug 30650: Add some useful modules and tests
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 197ad75727a9ae1a4187acb252f014737e946e9f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 2 15:21:27 2022 +0200

    Bug 30650: Be more flexible with opening slots
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 08ad52b5e9bfc0592d40b50e8141d0bfe289fccd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 29 17:52:18 2022 +0200

    Bug 30650: Adjust atomic update
    
    Take into account existing installs using the plugins
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 412dd9d127e83002b5b6d66a51746d57d004e7ae
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 29 12:04:03 2022 +0200

    Bug 30650: Admin page
    
    This patch adds a new page in the administration area to manage curbside
    pickups.
    
    Test plan:
    1. Enable the new CurbsidePickup syspref
    2. Go to Administration > Curbside pickups
    => If the logged-in user has the manage_curbside_pickups permission you
    should see the administration view
    3. Enable the feature for some libraries and configure it.
     a. You must define a "pickup interval" and a "maximum patrons per interval"
    values.
     b. If "Patron-scheduled pickup" is enabled, patrons will be able to
    schedule curbside pickups from the OPAC
     c. If "Enable for waiting holds only" is enabled, only patron with waiting
    holds will be allowed to schedule curbside pickups
     d. In the bottom part of the form you can define the slots available for
    curbside pickups.
     e. Save
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6f8e1c3f122029349d12a7309c2f63b2d4253740
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 29 11:37:24 2022 +0200

    Bug 30650: Add link from the admin home page
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 047ca189de9d1dd70318d47671cb6059745582ec
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 29 11:01:27 2022 +0200

    Bug 30650: Add new permission manage_curbside_pickups
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d469bb32312b8c888ef6025060dba9ec8499ad38
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 29 10:48:07 2022 +0200

    Bug 30650: Add the CurbsidePickup syspref
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 08cd234534213d2b69ed87d508924f240e869579
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 29 10:42:05 2022 +0200

    Bug 30650: Koha classes
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 17812b522fab7322600b199ea699b6fb9c53d4fe
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 29 09:57:26 2022 +0200

    Bug 30650: DB changes
    
    Sponsored-by: Association KohaLa - https://koha-fr.org/
    
    Signed-off-by: Koha Team University Lyon 3 <koha@univ-lyon3.fr>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1ae5454b01f2a5cfac105b056bc2a8d72ac444a8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 26 14:55:02 2022 +0200

    Bug 31244: Fix 500 if logout and not logged in
    
    Can't use an undefined value as a HASH reference at /kohadevbox/koha/C4/Auth.pm line 985
            C4::Auth::checkauth('CGI=HASH(0x5603b7dc4300)', 0, 'HASH(0x5603b2633238)', 'intranet', undef, 'intranet-main.tt') called at /kohadevbox/koha/C4/Auth.pm line 186
            C4::Auth::get_template_and_user('HASH(0x5603b7b83d08)') called at /kohadevbox/koha/mainpage.pl line 40
    
    Test plan:
    Open a private window
    Hit /cgi-bin/koha/mainpage.pl?logout.x=1
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a7272f988679904d3f018550a73719fc102b3425
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jul 27 09:54:19 2022 -0300

    Bug 31246: <span> displayed in 'Additional fields' section
    
    This patch avoids escaping HMTL data in the additional fields section.
    
    To test:
    1. Open the additional fields section
       http://kohadev-intra.mydnsname.org:8081/cgi-bin/koha/admin/additional-fields.pl
    => FAIL: there are some nasty <span> </span> texts in there
    2. Apply this patch
    3. Reload
    => SUCCESS: Things display nicely again!
    4. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Emmanuel Bétemps <e.betemps@gmail.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9b010d99dfcb1a77a6ebd679aabafd819c6e67cf
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jul 7 15:14:59 2022 -0400

    Bug 31120: Items will renew for zero ( 0 ) days if renewalperiod is blank/empty value
    
    If the rule renewalperiod is the blank empty string instead of being null/undefined or non-existant, Koha will interpret the renewal period as being zero days instead of falling back to the issuelength rule.
    
    It makes sense to me that a literal 0 here should make it renew for zero days even though that is nonsensical.
    
    Test Plan:
    1) Delete all your rules
    2) Create an all/all/all rules with an empty string for renewal base
       period
    3) Note that renewing an item does nothing
    4) Apply this patch
    5) Restart all the things!
    6) Renew again
    7) Note the renewal uses the issuelength rule as intended
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 511ae8298e033ddf2a12799c968d25bd716d62af
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jul 14 10:38:57 2022 +0000

    Bug 31120: Add unit tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dd40d815982037bb9c1707a24710fc06781ef896
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Apr 24 12:43:27 2022 +0000

    Bug 22276: (QA follow-up) Add missing USE
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 19511daa3b4152b791bcacb472e6e22f1da2c4c1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 28 13:00:04 2022 +0000

    Bug 22276: Add client storage of user-selected DataTables configuration
    
    This patch enables use of DataTables' built-in session storage of table
    configurations. DataTables by default uses the browser's localstorage
    feature to store the state of each DataTable, including which columns
    have been hidden by the user.
    
    Our table settings system has always overridden this saved state. This
    patch adds a check for a saved configuration state and if present loads
    the saved state instead of the default state.
    
    The system is enabled in this patch on the libraries administration
    page. To test, apply the patch and open go to Administration ->
    Libraries.
    
    - Use the "Columns" button to change the visibility setting of multiple
      columns.
    - Navigate away from the page and then back to test that the visibility
      settings have been kept.
    - Go to Administration -> Table settings -> Administration and change
      the visibility settings for the "libraries" table in a way that it
      differs from the visibility settings you set manually.
    - Return to the libraries administration page and confirm that your
      manual settings are still being loaded instead of the defaults from
      table settings.
    
    Signed-off-by: Solène Desvaux <solene.desvaux@biblibre.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 14372e44fb718cb762fae880cbcd21851e4d9c9c
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Jul 25 22:25:46 2022 +0000

    Bug 31211: (QA follow-up) Add class to new list element for error
    
    To allow additional styling the class template_toolkit_error was
    added to the list element.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8c0adbc4a04afc3d6286236c35195a498b5342ae
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jul 21 11:06:15 2022 -0400

    Bug 31211: Check slips and notices for valid Template Toolkit and report errors
    
    It would be useful for Koha to run a basic TT validation test and report back errors.
    That way if somebody misses an END tag or something of that nature, it will be easy to find and fix.
    
    Test Plan:
    1) Apply this patch
    2) Edit a notice, change the content to simply "[% END %]"
       or some other invalid Template Toolkit
    3) Choose "Save and continue editing"
    4) Note the new "Template Toolkit error" field that displays the error
       message
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 49ab11b61dcf844609ffe429a1a1c402be867eba
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 25 08:54:48 2022 +0200

    Bug 31229: (bug 30063 follow-up) fix column visibility
    
    Fix bad conflict resolution with bug 29648.
    
    Test plan:
    Confirm that the "Columns" button is displayed on the patron result view
    and that it works as expected.
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 610f287db9581bfa6d606468810792d25c6dc47b
Author: Jérémy Breuillard <jeremy.breuillard@biblibre.com>
Date:   Wed Nov 24 16:56:09 2021 +0100

    Bug 21982: Circulation statistics wizard does not count deleted items
    
    By default statistic assistant filter is set on the
    existing items and doesn't mind about deleted items.
    The patch corrects this. Items belong to the same library.
    
    Test plan:
    1)Make sure to have at least 1 or more item(s) in deleteditems database table
    2)Home > Reports > Circulation statistics
    3)Fill up 'Issuing library', 'Home library' and 'Holding library'
    4)Submit
    5)Notice that only statistics for active items are shown
    6)Apply patch and repeat from 2) to 5)
    7)Now active items and deleted items are shown
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4624879e53f4c4755de1b94032e026d2391d8e26
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Tue Jul 19 15:22:33 2022 -0400

    Bug 31191: Specify FacetLabelTruncationLength is only for Zebra
    
    This patch adds a note in the description of FacetLabelTruncationLength
    that it only works with Zebra.
    
    To test:
    0) Apply patch
    1) Go to Administration > Global system preference > Searching
    preferences
    2) Search for FacetLabelTruncationLength
    3) Read the description, make sure it indicates that is requires Zebra
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e478118dc5855be4d8e660cbd21023e3de757c64
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 12 15:53:55 2022 +0000

    Bug 26549: Show value of global system preferences on subscription form
    
    This patch modifies the subscription entry form so that the values of
    two system preferences are displayed as a hint to the user:
    
    The "Number of issues to display to staff" field will show the value
    of the StaffSerialIssueDisplayCount preference, and the "Number of
    issues to display to the public" field will show
    OPACSerialIssueDisplayCount. If the user has permission the system
    preference names will link to the system preferences page.
    
    To test, apply the patch and log into the staff interface as a user with
    permission to edit system preferences.
    
    - Go to Serials -> New subscription.
    - The "Number of issues to display to staff" field should have a hint
      under it: "Default: XX (StaffSerialIssueDisplayCount system
       preference)"
    - The "Number of issues to display to the public" field should have a
      hint under it: "Default: XX (OPACSerialIssueDisplayCount system
      preference)"
    - Log out and log back in as a user who does not have permission to edit
      system preferences. Return to the form and confirm that the hints do
      not link to system preferences.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 866d10d416fd23129895c2e9282489de6b9cebff
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Jun 15 12:06:55 2022 -0400

    Bug 30969: Cross site scripting (XSS) attack in OPAC authority search ( opac-authorities-home.pl )
    
    There appears to be a cross site scripting attack vulnerability in opac-authorities-home.pl, but may be accessible from any page using C4::Output::pagination_bar.
    
    https://MYKOHA.LOCAL/cgi-bin/koha/opac-authorities-home.pl?and_or=and%27%22()%26%25%3Csad%3E%3CScRiPt%20%3Ealert(document.domain)%3C/ScRiPt%3E&authtypecode=CORPO_NAME&excluding=1&marclist=all&op=do_search&operator=contains&orderby=HeadingAsc&type=opac&value=1
    
    Test Plan:
    1) Use the URL above to show the XSS vulnerability exists
    2) Apply this patch
    3) Restart all the things!
    4) Reload the page, no XSS vulnerability!
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 64176acbc903f049c7d1508745961b72c0cc1c52
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 25 15:08:35 2022 +0200

    Bug 29697: tracklinks should not explode on invalid marc record
    
    Caught by t/db_dependent/www/regressions.t
    
        #   Failed test '404 for itemnumber containing different URI'
        #   at t/db_dependent/www/regressions.t line 124.
        #          got: '500'
        #     expected: '404'
    
        #   Failed test '302 for itemnumber with matching URI'
        #   at t/db_dependent/www/regressions.t line 126.
        #          got: '500'
        #     expected: '302'
    
        #   Failed test '404 for itemnumber containing different URI'
        #   at t/db_dependent/www/regressions.t line 139.
        #          got: '500'
        #     expected: '404'
    
        #   Failed test '302 for itemnumber with matching URI'
        #   at t/db_dependent/www/regressions.t line 141.
        #          got: '500'
        #     expected: '302'
        # Looks like you failed 4 tests of 36.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 24b7675dac561ae34bf4bbf0295fbf7d008c3e8a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 25 10:16:48 2022 -0300

    Bug 29697: Fix t/db_dependent/Search.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1201d39cd6ef0ad2b0a722ae01b94d164ae38a95
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 25 14:30:40 2022 +0200

    Bug 29697: Fix t/Search.t
    
     #   Failed test 'No tests run for subtest "searchResults PassItemMarcToXSLT test"'
     #   at t/Search.t line 208.
     Undefined subroutine &C4::Biblio::EmbedItemsInMarcBiblio called at t/Search.t line 194.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 16eb8ffe60c1d34f88a3ad0faa76b698335fa1f6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 25 14:28:56 2022 +0200

    Bug 29697: Reintroduce wrongly removed import
    
     #   Failed test 'No tests run for subtest "CancelHold"'
     #   at t/db_dependent/ILSDI_Services.t line 806.
     Undefined subroutine &C4::ILSDI::Services::CanReserveBeCanceledFromOpac called at /kohadevbox/koha/C4/ILSDI/Services.pm line 941.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 336951673cb5c0700f2408dabc8c87b2cc9ea051
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 25 14:26:27 2022 +0200

    Bug 29697: Fix t/db_dependent/Exporter/Record.t
    
    Not sure about the warn, we shouldn't need it as we are raising an
    exception. But better (for now) than introducing regressions.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f275de1f4f170c6abf7e44c59134e8ca10ec0637
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 25 14:10:53 2022 +0200

    Bug 29697: Replace some missing occurrences
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 30235d31884c6c24edf692a9f69170b25a645e05
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Wed Jun 1 15:06:52 2022 +0000

    Bug 30878: Avoid resetting waiting reserves tab
    
    When canceling holds waiting over X days in "Holds awaiting pickup"
    view, form submission resets the selected tab to "Holds waiting". This
    tab reset may cause confusion for the user and lead to unwanted
    actions. Instead, the user should be returned to the same tab that they
    began with.
    
    To test:
    1. Apply patch
    2. Navigate to /cgi-bin/koha/circ/waitingreserves.pl
    3. Select "Holds waiting over X days" tab
    4. Refresh page
    5. Observe "Holds waiting over X days" is still selected
    6. Have some holds waiting over X days
    7. Select one of them and press "Cancel selected (1)" and confirm
    8. Observe "Holds waiting over X days" is still selected after form
       submission
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8a1d66740873009f0cc8d5b28598e9fd45df20bd
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 22 15:49:22 2022 -0300

    Bug 29697: (follow-up) Indexing a deleted record is not expected to crash
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cb8aaff8c380fac3b17a4ba4c31a185623b3420d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 20 09:02:29 2022 +0200

    Bug 29697: Don't crash ES reindex if a record is wrong
    
    We don't want rebuild_elasticsearch.pl to crash if a record is wrong
    (also fix ktd setup).
    Note that now the script will output an error for the problematic
    record, which is certainly the expected behaviour as we are doing it
    already for authority records.
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 25f78370c49dbbb589ed6c12ca8126ff55959093
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 18 11:30:31 2022 +0100

    Bug 29697: Deal with the degraded view in detail.pl
    
    In detail.pl we must provide a degraded view with an error message about
    invalid MARC::Record.
    We are then forced to reproduce the GetMarcBiblio behaviour and call
    StripNonXmlChars on the MARC::XML
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Rebased-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9d1a2f27cfd4449b21882f8a0b3a9f8180d801df
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jan 24 17:01:11 2022 +0100

    Bug 29697: Fix tests
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 45de338715225922429b6afe2f5ee33d4061751b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 21 14:41:41 2022 +0100

    Bug 29697: Use flag embed_items
    
    Includes:
        Bug 29697: (follow-up) Use flag embed_items
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0a37e8f7fd89d9ea23e0a8649885cca3f9c043f3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 21 15:06:54 2022 +0100

    Bug 29697: Remove GetHiddenItemnumbers
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    JD amended patch:
    -    my @items        = $biblio->items->filter_by_visible_in_opac({ patron => $logged_in_user })->unblessed;
    -    foreach my $item (@items) {
    +    my $items        = $biblio->items->filter_by_visible_in_opac({ patron => $logged_in_user })->unblessed;
    +    foreach my $item (@$items) {
    
    -    for my $itm (@items) {
    +    for my $itm (@$items) {
    
    -    $dat->{ITEM_RESULTS}   = \@items;
    +    $dat->{ITEM_RESULTS}   = $items;
    
    -        @items_to_show = Koha::Items->search( { itemnumbers => [ map { $_->{itemnumber} } @all_items ] } )
    -                                    ->filter_by_visible_in_opac( { patron => $patron } );
    +        @items_to_show = Koha::Items->search( { itemnumber => [ map { $_->{itemnumber} } @all_items ] } )
    +                                    ->filter_by_visible_in_opac( { patron => $patron } )->as_list;
    
    -            my @items_to_show = $items->filter_by_visible_in_opac({ opac => 1, patron => $patron });
    +            my @items_to_show = $items->filter_by_visible_in_opac({ opac => 1, patron => $patron })->as_list;
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 70d61d80fbf48df4d2a3843ea3349ea77de5fbf8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 21 11:03:15 2022 +0100

    Bug 29697: Replace GetMarcBiblio occurrences with $biblio->metadata->record
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    JD Amended patch:
    -# FIXME Special case here
    
    -    print "Biblio not found\n,";
    +    print "Biblio not found\n";
    
    - my $biblio = Koha::Biblio->find($hostbiblionumber);
    + my $biblio = Koha::Biblios->find($hostbiblionumber);
    
    Rebased-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 790bab24b156610999d915352371a3b4f71e34cb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 21 11:04:23 2022 +0100

    Bug 29697: Special case - opac not needed
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 808e48486745819d7153ab36abad2a554e5412c3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 22 15:18:06 2022 -0300

    Bug 31157: DBRev 22.06.00.021
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eef6b0c02249f1b47c6af6bdbc9e0d784b445945
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jul 22 15:57:25 2022 +0000

    Bug 31157: (QA follow-up) Update descriptions and wording of configuration options
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 19fc6220fa97c31f6dbe746fdf6bcded05284bfe
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jul 14 17:11:45 2022 +0100

    Bug 31157: Allow selection for overdue from address in the UI
    
    This patch adds a new system preference to allow systems librarians the
    option to pick wich address to use for overdues notices.
    
    We default to 'cron' to allow existing uses of '--frombranch' on the
    command line to continue to function but now allow end users to override
    this option via the new OverdueNoticeFrom preference.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e6947b740883670b48f002bba7a64103016bc4ef
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 22 15:11:58 2022 -0300

    Bug 15187: (QA follow-up) Fix test permissions
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 058d411643c4b868553b97896fb065cf9870e456
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jul 6 12:52:05 2022 +0100

    Bug 15187: (QA follow-up) Add unit test
    
    This patch adds a unit test for the newly introduced filter.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 85690a14f8685a2eb6cb88316bb4a3145c024cc2
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon May 2 07:34:34 2022 +0000

    Bug 15187: Index 880 in Zebra the same as Elasticsearch
    
    This patch modifies the MARC21 export to Zebra, so that 880 fields
    are rewritten as their linked fields, in the same way that we
    already do with Elasticsearch, so that the alternate graphic
    representation of fields are indexed accordingly. (ie 880 $6245-01
    Chinese titles will be indexed into the title index using the 245 rules)
    
    Test plan:
    0. Apply patch
    1. Turn on ICU indexing
    1b. vi /etc/koha/zebradb/etc/default.idx
    1c. Replace charmap word-phrase-utf.chr with icuchain words-icu.xml
    1d. Replace charmap word-phrase-utf.chr with icuchain phrases-icu.xml
    1e. Restart Zebra server
    1f. Re-index Zebra
    2. Add record with a 880 $6 245-01 $a 教牧書信 field.
    3. Search for this record using a title index with the Chinese title
    4. Note that the record is correctly retrieved
    
    (Note: This test probably works better using author or series as they
     present as links on the detail page which makes the fix more obviously
     useful.)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 87aa05f9deb7fa09f059d53b422b89c8411e0c84
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jun 29 17:26:30 2022 +0100

    Bug 26689: Prepend letter codes.
    
    This patch prepends the credit_type_code and debit_type_code with
    CREDIT_ and DEBIT_ respectively when doing a lookup on the notice letter
    code.
    
    Test plan
    1) As previous patches, however instead of just naming your notice to
       match the credit_type_code or debit_type_code use
       CREDIT_credit_type_code and DEBIT_debit_type_code respectively.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8e46612d7c5dfc8d0faff009ef9f86198bdd0f83
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 12 16:09:22 2021 +0000

    Bug 26689: Check for specific template then fallback - printinvoice
    
    This patch adds a check for a more specific ACCOUNT_DEBIT template
    (named to match the debit_type_code of the credit line) prior to
    falling back to the ACCOUNT_DEBIT template.
    
    Test plan
    1/ On a patrons account page use the print option on a series of debit
    lines with differing credit types (Overdue, Payout)
    2/ Note that the same template 'ACCOUNT_DEBIT' is used for all types
    3/ Apply the patch
    4/ Run step 1 again and note all still print using ACCOUNT_DEBIT
    5/ Add a new notice template under the 'circulation' module with a code
    that matches one of your account debit types (OVERDUE, PAYOUT)
    6/ Run step 1 again and note that where you have added a specific notice
    for that debit type it has been used.
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 422ab472836cfcd0dd4197173de1213c06375d42
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 12 14:38:31 2021 +0000

    Bug 26689: Check for specific template then fallback - printfeercpt
    
    This patch adds a check for a more specific ACCOUNT_CREDIT template
    (named to match the credit_type_code of the credit line) prior to
    falling back to the ACCOUNT_CREDIT template.
    
    Test plan
    1/ On a patrons account page use the print option on a series of credit
    lines with differing credit types (Payment, Lost Item Return, Writeoff)
    2/ Note that the same template 'ACCOUNT_CREDIT' is used for all types
    3/ Apply the patch
    4/ Run step 1 again and note all still print using ACCOUNT_CREDIT
    5/ Add a new notice template under the 'circulation' module with a code
    that matches one of your account credit types (PAYMENT, WRITEOFF,
    LOST_FOUND)
    6/ Run step 1 again and note that where you have added a specific notice
    for that credit type it has been used.
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dec2a44f009031f2eb226a668cbaafbbef2a700a
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue May 10 13:50:38 2022 +0000

    Bug 30678: (follow-up) Change call in opac scripts
    
    Test plan:
    See first patch. Add orgcode OCoLC.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d04728f80551965a2ee4630a0d3795c413ecefc9
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon May 9 10:19:57 2022 +0000

    Bug 30678: (follow-up) Add oclc_number routine and friends
    
    As requested by QA, we should match the orgcode.
    Adding a few small routines in a Util module.
    
    Test plan:
    Run t/Koha/Util/MARC.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 88e967d669259651f511a424937060184e24ff3c
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed May 4 14:38:29 2022 +0000

    Bug 30678: Adjust pref description
    
    Test plan:
    Look up pref OPACSearchForTitleIn.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ff0da4944cbb2f2a9af645bdc399e8df7cef8793
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed May 4 14:30:28 2022 +0000

    Bug 30678: Add OCLC_NO as option to OPACSearchForTitleIn
    
    We need to pass OCLC_NO as key to C4::Output::parametrized_url.
    We get it from MARC21 035$a and strip the organizational code.
    
    Test plan:
    Add e.g. 62385712 in 035$a in a record.
    Add e.g. following link to pref OPACSearchForTitleIn:
        <a  href="https://worldcat.org/search?q={OCLC_NO}" target="_blank">WorldCat (via OCLC number)</a>
    Open that record on detail page. Click More searches. Follow that link.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 39ae2fa3fef232c0c11631cc2c8d99c2e00b36de
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Jul 18 20:53:46 2022 +0000

    Bug 30858: (follow-up) Add enumchron to CSV export and fix CSS class
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8c5e47ae5ba4144c24cee77e6a64d019d476ef73
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu May 26 16:34:12 2022 +0000

    Bug 30858: Add serial enumeration/chronology to item search
    
    To test:
    1. Apply patch
    2. Go to  Catalog > Item search and do a search for items that you know contain a items.enumchron
    3. The result set should now show the items.enumchron
    4. Make sure you can properly "Export results to.."
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c12d037da294944cf82208b2bd72d3348b66c0cf
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jul 8 15:46:04 2022 +0100

    Bug 31121: Fix date formatting in cashup summary modal
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7ce420ed82862e750b7a6a46c66c5cf1587f5e7d
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Jul 20 16:53:28 2022 +0000

    Bug 31204: Clearly indicate edit buttons are for record modification
    
    To test:
    1. Apply patch
    2. Do a search and select some records
    3. On the toolbar (#selection_ops) open the Edit dropdown.
    4. The labels should read 'Batch edit records' and 'Batch delete records'.
    
    Note: To see both you must have batchmod and batchdelete permission.
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 467b444c7e355b1ef3ecbab29f67544bfd72360b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jul 6 11:54:35 2022 +0100

    Bug 30838: (QA follow-up) Add unit tests
    
    Two tests added, one in t/db_dependent/Circulation.t to catch the
    initial setting of to_address at enqueue time and a second in
    t/db_dependent/Letters.t to catch the correcting at send time.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 008e6ae9ebd45cc8161a86f293703f02d7409319
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jun 28 07:27:17 2022 -0400

    Bug 30838: (QA follow-up) Add missing semicolon
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e9cdc1da651faa24a93f87569bf2b219f31552ee
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue May 24 12:57:09 2022 +0100

    Bug 30838: Set to_address to smsalertnumber at send
    
    It may be helpful to know exactly what number was used for the sms alert
    that was sent. As such, we should ensure it's set at the time of
    sending.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5e388ed509c58b5f7398baf6f7bb027b4dc46c1c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue May 24 12:32:45 2022 +0100

    Bug 30838: Don't fallback through phone numbers for sms
    
    This patch removes the fallback handling for smsalartnumber as the
    to_address in notices. We ignore the to_address field in the message
    queue at send time for sms anyway and use smsalertnumber exclusively so
    having this field populated is just confusing to the end user
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a85d08c76593dfbb2f93fa39aa7e8c60a7aa33e4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 22 14:41:15 2022 -0300

    Bug 31086: DBRev 22.06.00.020
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a3d972d726267f7a4d6a1ef0572f0cc5a2abc00b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 22 14:39:02 2022 -0300

    Bug 31086: DBIC update
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit efd2dfdaae0441c4e8701278853e7a75db285717
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 22 14:36:39 2022 -0300

    Bug 31086: (QA follow-up) Use plain SQL in db_rev
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0704102bc800dd43db1255918348e454a6df2f75
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jul 22 12:31:55 2022 +0000

    Bug 31086: Notify of problematic holds during upgrade
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5fa510b431c043671c7bcb73c431c60aac0039ed
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jul 22 10:05:55 2022 +0100

    Bug 31086: (QA follow-up) Improve atomicupdate to be more resilient
    
    We now populate the branchcode field with the first available branch on
    the system if we find it to be NULL before we set the NOT NULL
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f0685f0f4053da428ab13d9f3991790fb71b7e55
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jul 12 16:22:46 2022 +0100

    Bug 31086: (QA follow-up) Add unit tests
    
    This patch adds the unit tests for the change to Koha::Hold::store.
    
    We test for and catch the exception introduced for both the create and
    update cases.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bdddc7ee0a3a0ed2ec1c5996ab5be587c1e395df
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jul 12 16:21:30 2022 +0100

    Bug 31086: (QA follow-up) Fix failing tests
    
    This test was missed first time around, branchcode needed adding to all
    the calls to AddReserve.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d731943c2464592624d2b34bc91a75ea3ceae5b7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jul 12 15:39:37 2022 +0100

    Bug 31086: (QA follow-up) Remove DEFAULT from column
    
    There's no need to have a default here, and in fact it doesn't make
    sense.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bf2a9b5279151b61bb149c318505e2d5e5ca8df8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jul 1 15:30:33 2022 +0000

    Bug 31086: Update existing unit tests
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e609e20c041084a5b763f0b8fe8cd304e5ca8159
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jul 1 14:46:26 2022 +0000

    Bug 31086: Prevent placing hold with no pickup location
    
    To test:
    1 - Apply patch
    2 - Repeat test on previous patch
    3 - You should get a warning popup when attempting to save hold
    4 - Reload page
    5 - Inspect the HTML and manualy set #pickup value of selected option to ""
    6 - Attempt to save hold
    7 - You get the popup
    8 - Place a hold normally (with location) and verify it works
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e7d886d388dc9825c6e93a158e19f7da60db145b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jul 1 14:44:09 2022 +0000

    Bug 31086: Throw an exception when a hold is stored with no branchcode
    
    To test:
    1 - Apply first 2 patches
    2 - On staff client, find a biblio, place hold, select a patron
    3 - Before creating hold, right click on 'Pickup location'
    4 - Inspect the element
    5 - In the console find the top <li> for pickup, and right click
    6 - Select 'Delete node'
    7 - Save hold
    8 - You get an exception/error
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1565efe8f3e4c782e4d94a6c06cc71d2ac460d43
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jul 1 14:43:09 2022 +0000

    Bug 31086: DB update
    
    This update sets branchcode as NOT NULL
    default set to 0 as borrowernumber is
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 76b984bb6ccee55ba1ddfdb5b08c6ee2e75eaa37
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 12 10:09:25 2022 +0200

    Bug 31138: Don't ignore DataTables errors and raise them to the end-user
    
    DataTables is not raising error to the end user, it's only displaying a generic message in the console.
    This leads to lot of questions on IRC or the mailing list ("the table is empty").
    We can do better and display what went wrong.
    
    We could also imagine add a link to the wiki for the more common problems (won't be implemented here however).
    
    Test plan:
    Revert "Bug 31104: Put each link on a separate header" and search for a
    patron using a very long string
    You should get an alert with the reponse of the server.
    In my case:
    """
    Something went wrong when loading the table.
    414: Request-URI Too Long
    """
    
    You can also make the REST API returns a 500 (bad specs or simply with a
    die statement).
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5ec4dced13a57ea4e1cd443a1898ee5e3e914f43
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 22 12:46:30 2022 -0300

    Bug 23838: (QA follow-up) Move include files
    
    As talked with Martin, this patches were originally developed before we
    added the modals/ and str/ dirs, but we need to align it with current
    way of doing it. This patch does that.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f91df61c8e156170d74573c7238e941bac2097e9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 22 12:16:32 2022 -0300

    Bug 23838: Add 'view' link to item detail page
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 86ac23b05ec8f2f3c95445f19793ea9f61af6f7b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 22 12:15:46 2022 -0300

    Bug 23838: (QA follow-up) Rename patron-renewal => checkout-renewal
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 110fac2f171054a2401ef0084b6a272405c6b444
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jul 22 10:56:40 2022 +0100

    Bug 23838: Use $patron_to_html formater
    
    This patch updates the renewals modal to correctly format the staff
    member who renewed the checkout.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2a77eaf25ded22097aeb58015c8847ee5d0f3b79
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Apr 26 16:56:12 2022 +0000

    Bug 23838: (follow-up) Add missing template filter
    
    Quieting an issue highlighted by the QA tool.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 47443858cea9b1f0dec15148a1276d1c0659d973
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 18 14:53:41 2022 +0000

    Bug 23838: Use $datetime formater
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 968c5865e71196bcda562d38be9db4e09b83ebb2
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Fri Oct 18 08:56:21 2019 +0100

    Bug 23838: Add renewals modal
    
    This patch adds the display of the renewals modal when appropriate. A
    "View" link is displayed next to renewals count where appropriate.
    Clicking the link opens the modal that displays the logged renewals.
    
    Sponsored-by: Loughborough University
    Signed-off-by: Myka Kennedy Stephens <mkstephens@lancasterseminary.edu>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Bouzid Fergani <bouzid.fergani@inlibro.com>
    Signed-off-by: Ben Veasey <B.T.Veasey@lboro.ac.uk>
    
    Rescued-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    I rescued this patchset by squashing previous work and updating it to
    utilise the new renewals API routes introduced in bug 30275.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b3c9e95face6b2b253d8af187be18ec3fbf541be
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jul 11 13:07:28 2022 +0100

    Bug 31128: Add effective_not_for_loan_status into items response
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4ce3a882a686237d411d622f95abd554814c57b5
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jul 11 13:46:05 2022 +0100

    Bug 31128: Unit tests
    
    This patch adds unit tests for the new effective_not_for_loan_status
    which I add to the items api responses in this patchset.
    
    Test plan
    1) Run the unit test without applying the next commit, it should fail
    2) RUn the test again after applying the next commit, it should pass
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2ce5f0532c8fea625c838725f70518421ebbb22b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jul 21 18:16:22 2022 +0000

    Bug 31213: Auto search simple term quoted
    
    This patch does a second search if the first had no results and was a simple single term search
    
    We simply quote the term, rebuild the query, and rerun the search
    
    This targets both Zebra and ES, but is more relevant for ES
    
    To test:
    0 - Have Koha running using ES
    1 - Add titles your system "Ivy + Bean" "The 6:20 Man"
    2 - Search for these titles without quotes - NO results under ES
    3 - Search with quotes - you find them
    4 - Apply patch, restart all
    5 - Search again without quotes
    6 - Success!
    7 - Confirm search still works under Zebra
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0177b88eb33d398da4eb5ffb6344226930c3346b
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Apr 5 09:40:51 2022 -0400

    Bug 30458: Include librarian (manager_id) in accountline when using "Payout amount" button
    
    When using the "Payout amount" button, accountlines.manager_id is not
    populated. This is not the case with the "Issue payout" buttons.
    
    Test Plan:
    1) Create a manual credit
    2) Issue a payout using the "Payout amount" button
    3) Inspect the payout accountline, note it has no manager_id
    4) Apply this patch, restart all the things!
    5) Repeat steps 1 and 2
    6) Note the new payout accountline has a manager_id!
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    JK: Fix commit title
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 417d8df61b4d00b6b904dd374835e99cfb9be4a2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Apr 6 13:49:58 2022 +0000

    Bug 30471: Correct display of default rules
    
    To test:
    1 - Browse to 'Administration->Circulation and fines rules'
    2 - Make sure you are editing 'Standard rules for all libraries'
    3 - Set 'Lost item fee refund on return policy' to 'Refund lost item charge and charge new overdue fine'
    4 - Swtich to edit rules for a specific library, click on the dropdown for 'Lost item fee refund on return policy' and note default says 'Use default (Refund lost item charge and restore overdue fine)'
    5 - Switch default/all libraries rule to 'Refund lost item charge and restore overdue fine'
    6 - On specific branch note the default option is now 'Use default (Refund lost item charge and charge new overdue fine)'
    7 - Apply patch and repeat, note the default descriptions now display correctly
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0df59817bf52e26b44348848ea8d299d814482c2
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Thu Jul 21 17:57:20 2022 +0000

    Bug 29001: (QA follow-up) Remove code duplication
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 16a919d9191dd4221f7f370cfcd36555428ea9fa
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 19 17:00:29 2022 +0200

    Bug 29001: Fix framework edition when subfields are reordered
    
    There is a flaw when subfields are ordered, the inputs are not retrieved
    correctly.
    We should not rely on the order but use an id instead.
    Test plan:
    Create, edit subfields
    Modify values from the different subfields
    Confirm that values are correctly saved
    
    Signed-off-by: Thibault Kero <thibault.keromnes@univ-paris8.fr>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8b957a69d4449bedd0f593cf946e5fde0e8d7a69
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Jul 20 12:32:58 2022 -0400

    Bug 31202: Don't remove optional SIP fields with a value of "0"
    
    If the value of a SIP field is "0", that evaluates to false, so any calls to maybe_add with a value of "0" will not get added to the SIP response message.
    
    Test Plan:
    1) Apply this patch
    2) prove t/db_dependent/SIP/Message.t
    
    Signed-off-by: Michal Urban <michalurban177@gmail.com>
    JK: Adjust commit title
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bf32471053fe86d909d6c7857d38f265285b5482
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jul 21 07:47:20 2022 +0100

    Bug 25449: (QA follow-up) Fix basic_workflow.t
    
    Now that we have made item.itype a required field, we need to ensure we
    set it for the corresponding selenium test.. this wasn't entirely easy
    as the html select is hidden by select2. I had to find the select2 span,
    trigger a click event to open it and then find and click an option.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0800662227e16a7a36fc228d82224bf0ffd29633
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 20 17:39:22 2022 +0200

    Bug 25449: Fix basic_workflow.t
    
    We need to create an itemtype for the biblio, then the item form will
    have 942$c prefilled by default
    
    STRACE: /usr/share/perl5/Try/Tiny.pm:123 in Selenium::Remote::Driver::catch {...}
            /usr/share/perl5/Selenium/Remote/Driver.pm:361 in Try::Tiny::try
            (eval 1726):1 in Selenium::Remote::Driver::__ANON__
            (eval 1728):2 in Selenium::Remote::Driver::__ANON__
            /usr/share/perl5/Selenium/Remote/Driver.pm:953 in Selenium::Remote::Driver::_execute_command
            t/db_dependent/selenium/basic_workflow.t:224 in Selenium::Remote::Driver::get_title
    
    Error while executing command: unexpected alert open: Dismissed user prompt dialog: Form not submitted because of the following problem(s)
    ------------------------------------------------------------------------------------
    
    - 1 mandatory fields empty (highlighted) at /usr/share/perl5/Selenium/Remote/Driver.pm line 411.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ed83d7744502d767d9806afb8516ec5ecb967fa5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 20 17:44:05 2022 +0200

    Bug 31201: Prevent Pseudonymization.t to fail
    
    It's failing if selenium/patrons_search.t failed before, they are using
    the same code and the selenium tests didn't clean correctly
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d7647052f20104b70ba6b02d1535874fb9ab3b61
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Jul 19 11:27:55 2022 +0000

    Bug 31186: Fix the hidingrules test for result numbering
    
    We should not test the $hidingrules variable but the number
    of keys it contains.
    
    Test plan:
    Clear OpacHiddenItems.
    Check with and without this patch search result numbering on
    the OPAC.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2eea061ca30e4810b07ca2920bfe1e55762fab02
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jul 16 11:23:54 2022 +0000

    Bug 27045: (follow-up) Fix delimiter in header rows
    
    The header rows still showed \t because the newly defined
    variable wasn't used there.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7cd84171ab57a35138fa5c585d2ed6de442e453c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 20 15:33:14 2020 +0100

    Bug 27045: Fix other exports using CSV profiles
    
    This patch corrects the export of the 2 other reports
    using CSV profiles:
    
    * Late issues (serials)
    * Basket (acquisitions)
    
    To test:
    1) Late issues
    * Update the late issues sample report to use tab as separator
    * Create a subscription
    * Go to serial collection and 'generate next' to get some late issues
    * Go to Claims
    * Export the late issues and verify format is correct
    * Verify exported file has tabs
    
    2) Basket summary
    * Create an order with several order lines
    * Create an SQL type CSV profile for basket export using tab as separator
      Example: aqorders.quantity|aqordres.listprice|Title=biblio.title
    * Export the basket using your configured CSV profile
    * Verify exported file has tabs
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 983965ee4790fd7841af87fcfdb8395ccea9e813
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 20 15:33:02 2020 +0100

    Bug 27045: Fix items lost report export if delimiter is tab
    
    When choosing tabulation as the delimiter for a CSV profile
    for the lost item report, the tabs appear in the file as \t
    instead of as proper tabs.
    
    title\tauthor\tstocknumber\tcallnumber
    "E Street shuffle :"\"Heylin, Clinton."\\
    
    To test:
    * Upate the existing sample lost item CSV profile to use tabs as
      separator
    * Make sure you have some lost items in your database or create some
    * Go to Reports > Lost items
    * Run the report
    * Check all or some of the checkboxes in the result list
    * Export using the link on top and the CSV profile
    * Verify the tabs are not exported correctly
    * Apply patch
    * Verify tabs now are proper tabs instead of \t
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit de6ca8aa3d291edc054028fb4f16bc6540ab47fb
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jul 20 09:29:39 2022 +0100

    Bug 31192: Check for item before calling is_bundle
    
    The code in here is weird.. we really aught to check for the item before
    anything else and throw an error to screen if we don't find one... but
    my patch takes the simple option, and the one taken elsewhere in the
    script.. to just check for item being defined before calling a method
    upon it.
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e37359cae96535e45ccb26a5e22d5b67920d27cd
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Mar 9 16:42:50 2022 +0100

    Bug 30268: Check mandatory fields in addorderiso2709.pl
    
    Test plan:
    1. Make sure you have mandatory item subfields in the MARC bibliographic
       framework used in acquisitions ("ACQ" if it exists, the default framework
       otherwise).
    2. Use the "Stage MARC records for import" tool to upload a file. Do not import
       the bibliographic records.
    3. Create a new acquisition basket ("Create items when:" must be set to
       "placing an order") and add a new order from a staged file
    4. Select the file you just uploaded
    5. In the "Items information" tab, make sure at least one mandatory subfield is
       empty
    6. Try to submit the form. If there are errors about other mandatory fields
       (like the fund for instance), fix those errors and resubmit. There should be
       an error message about mandatory item subfields.
    7. Enter a value for the mandatory item subfields and resubmit the form. Verify
       that the order and the item have been correctly created.
    
    Signed-off-by: Thibault Kero <thibault.keromnes@univ-paris8.fr>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e7dfda6210d4c94e2787bd21c909d281374375ec
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Mar 22 11:25:12 2022 +0000

    Bug 30333: Move view actions on acquisitions receipt summary page into menu
    
    This patch moves the "views" group of links (MARC, Card, and Order) into
    a menu button. The patch also makes some corrections to the modal markup
    and handling to fix a display error.
    
    To test you must have a basket or baskets with multiple titles on order,
    both received and pending.
    
    - Apply the patch and go to Acquisitions -> Vendor -> Receive shipment
      -> Receive a new shipment (or open an existing invoice).
    - In the list of pending orders:
      - Test the 'View' menu for multiple titles. The 'Order,' 'MARC,' and
        'Card' menu items should work correctly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 146423f1bcbefda20995429a1f8ed9152977495c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jul 18 11:49:57 2022 +0000

    Bug 7660: Use first available categorycode when none passed in
    
    The code that populates the patron messaging preferences on initial form load
    expects to have a category selected. Currently we only have one if one was
    passed to the form. When creating an account from a parent, we don't have a
    category explicitly selected - so we can just select the first of the possible
    categories
    
    To test:
     1 - In KTD set 'Juvenile' category to have some messaging preferences
     2 - Find a patron, say Edna Acosta, and 'Add guarantee'
     3 - In new form preferences are blank, cancel
     4 - Apply patch, restart all
     5 - Go to Edna, click 'Add guarantee'
     6 - Preferences are populated!
     7 - Cancel
     8 - Go to 'Patrons' module
     9 - Click "+ New patron"
    10 - Confirm messaging preferences load correctly when not adding child
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 291ffd270f6a8aad96b40e7b73bcdf284c760757
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jul 20 10:05:29 2022 -0300

    Bug 30570: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 894f7013ebef9ec9c8c6ffa52f5e5b9554f27986
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jul 6 11:36:11 2022 +0000

    Bug 30570: Replace the use of jQueryUI tabs in OPAC templates
    
    This patch switches to Bootstrap tabs anywhere in the OPAC where
    jQueryUI tabs were used.
    
    To test, apply the patch and rebuild the OPAC CSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client).
    
    - Test the item type/collection/shelvinglocation tabs on the advanced
      search page. Test that it works correctly with different variations of
      the OpacAdvancedSearchTypes system preference.
    - Search for an authority record and view the details. The "Notes"
      tab should be styled correctly.
    - Locate a bibliographic record and view the detail page. Verify
      that tabs are working, including all the options:
    - Holdings
    - Other holdings ( If OpacSeparateHoldings is enabled)
    - Descriptions ( MARC notes )
    - Subscriptions
    - Serial collection (UNIMARC, untested)
    - Components ( If ShowComponentRecords is enabled. Link to sample
      record:
      https://bugs.koha-community.org/bugzilla3/attachment.cgi?id=78023 )
    - Comments
    - Editions (OPACFRBRizeEditions)
    - Html5media ( If HTML5MediaEnabled is on. Link to sample records:
      (https://bugs.koha-community.org/bugzilla3/attachment.cgi?id=10685)
    - Images ( If OPACLocalCoverImages is enabled )
    
    Bonus points for testing these tabs for which I don't have
    credentials:
    - Syndetics TOC
    - Syndetics Excerpt
    - Syndetics Reviews
    - Syndetics AuthorNotes
    - LibraryThing for Libraries (with LibraryThingForLibrariesTabbedView
      set to "in tabs."
    - NovelistSelect
    
    - Check tabs on these patron-related pages:
      - Checkout history
      - Search history
      - Patron summary. The following tabs are
        ✓ Checkouts
        ✓ Relatives' checkouts
        ✓ Overdues
        ✓ Fines
        ✓ Relatives' fines
        ✓ Holds
        ✓ Recalls
        ✓ Article requests
        ✓ Overdrive
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Bug 30570: (follow-up) Correct rebase errors
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 44d0f585d171b16e4eb8f435d79330d1423b9c60
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Jul 18 20:18:50 2022 +0000

    Bug 30039: (QA follow-up) Change published on to publication date
    
    As the issue might not have been published yet, but should have
    been that seemed a better fit.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d8b63b05e938e58997950617e55af303a03b4ec3
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Feb 7 19:02:53 2022 +0000

    Bug 30039: Add published on column to claims.pl
    
    To test:
    1. Have a vendor setup
    2. Go to serials and add a new serial w/ that vendor.
    3. When creating a serial make this first issues sometime in the past.
    4. Go to Claims, choose your vendor and load the table.
    5. No published on column.
    6. Apply patch
    7. Try step 4 again and now you should see a published on column.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0d19d7bcc50d48aa326a909b221a1251f664d632
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 31 11:18:08 2022 +0200

    Bug 26377: Simplify JS code
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 97e8a5b00df05c25180b4564f21d689caae18902
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 31 11:16:57 2022 +0200

    Bug 26377: Show when loading the page if needed
    
    Prevent a blink
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 13525cff5ce866b060fcc899aa696646db351c3a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 12 16:25:05 2022 +0000

    Bug 26377: Clearly label parts of subscription-add.pl that relate to optional item records
    
    This patch modifies the form for adding a new subscription so that the
    collection and item type fields are shown only when the subscription is
    configured to create an item when receiving.
    
    To test, apply the patch and go to Serials -> New subscription.
    
    - When the page first loads, the "Do not create an item record when
      receiving this serial" radio button should be selected.
    - Under the "Location" field there should be no item type or collection
      field.
    - Select the "Create an item when receiving this serial" radio button.
    - The item type and collection fields should appear.
    - Test that the values are correctly saved when you add or edit a
      subscription.
    - If you edit a subscription which had item type and collection defined,
      and you switch to "Do not create an item..." the record should save with
      empty values for those fields.
    - Confirm that existing subscriptions open with the correct settings
      applied: Only records with "Create an item..." checked should open
      with the item type and collection fields displayed.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f6dbad91c4f114471036695f1476dc5315a94d1a
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Jun 22 15:04:47 2022 -1000

    Bug 31020: Fix PassItemMarcToXSLT in system preferences description
    
    Bug 28373 added system preference PassItemMarcToXSLT is referenced is all XSLT system preferences.
    But it only applies on results pages.
    The only use in perl code is in C4::Search :
     > $marcrecord->delete_fields( @fields ) unless C4::Context->preference('PassItemMarcToXSLT');
    
    I've tested by adding in all XSLT files :
      <strong>ITEMS <xsl:value-of select="count(marc:datafield[@tag=952])"/> </strong>
    Number of items only appears in OPAC and staff interface results pages.
    
    In fact only search pages get MARC record from search engine, in which items datas have been embedded for indexing.
    In other pages MARC record does not embed items datas.
    
    This patch adds "MARC21 952, UNIMARC 995" to be explicit we talk about
    MARC datas not item tags build in XML recieved by XSLT.
    
    Test plan :
    1) Apply patch
    2) Search for PassItemMarcToXSLT in system preferencies
    3) Look at description of PassItemMarcToXSLT
    4) Check PassItemMarcToXSLT only apprears in OPACXSLTResultsDisplay and XSLTResultsDisplay
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 927b488ead0a0f880fa7fa677aa3861010320cf2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 6 12:40:00 2022 +0000

    Bug 27546: (follow-up) Avoid index clash
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7fbce0b177b1b1a19cf11d51896e5b35abef8c4c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 26 10:56:52 2022 +0000

    Bug 27546: (follow-up) Escape new search string
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 869b1d9f8f1e00de6ad7f8b4a957751fafd2e24f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jan 21 14:23:35 2021 +0000

    Bug 27546: Add 'Search within results' search box
    
    This enhancement adds a new input above the search results allowing one to search within the results. The search
    box will take a query and add it as a limit to the previous search
    
    These patches make a slight change to the search header, passing the dropdown selection as a parameter rather thandirectly.
    
    Searching this way is functionally equivaled to adding 'AND' with the new term to original results.
    
    To test:
    1 - Apply patch
    2 - Search on staff client wiht a term that returns results
    3 - Note the new 'Search within results box'
    4 - Add a search term
    5 - Note new results and confirm they are as expected
    6 - Enable IntranetCatalogSearchPulldown and confirm the dropdown works as expected
    7 - Edit your search - the reinfements appear in the limits section and can be removed
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7b03771eb2f02d809ecca9ddfbeb49d0b33deec1
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jul 20 09:16:47 2022 -0300

    Bug 30933: DBRev 22.06.00.019
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e2668a685702a0cd9adf3deeafcc9e4433199e0f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jun 7 11:27:04 2022 +0200

    Bug 30909: Retain permanent_location if mapped
    
    If items.permanent_location is mapped to a MARC subfields we must retain
    the value, not using items.location
    
    Test plan:
    1 - Map permanent_location to a marc field
    2 - Expose that field in the item editor
    3 - Change the location of the item and retain the permanent location on saving
    4 - note that permanent location has not changed
    
    Test the different other situation, when adding and editing: Empty the field, change only location, change only permanent_location, etc.
    
    Signed-off-by: andrew <andrewfh@dubcolib.org>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d24cb97b0607ccc8aaa145018ae4dff140910f26
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jul 19 15:26:51 2022 +0000

    Bug 31179: (QA follow-up) Set field as hidden for tests
    
    We want the tests to pass in the case where field is set to visibile in Koha
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 05964056604233620016dba801661fe879cd23e9
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jul 19 15:17:56 2022 +0000

    Bug 31179: (QA follow-up) POD fix
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b90787d5c8167b455cfd24e8cc24384c3ee70081
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 19 16:09:46 2022 +0200

    Bug 31179: Don't copy invisible subfields when duplicating items
    
    Duplicate item is intended to duplicate the visible cataloging fields of an item, however,
    currently it is duplicating the complete internal record of the item
    
    To recreate:
    1 - find an item in Koha staff client, copy the barcode
    2 - Issue this item to a patron
    3 - Return to the record
    4 - Edit items
    5 - Click 'Actions->Duplicate' for the item in question
    6 - Save the item
    7 - Note in the items table above for that 'Total checkouts' 'Due date'
     etc. have not been copied to new item
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 47c860548715ee2248cb5c45e6441edb286c7559
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jul 19 14:49:52 2022 -0300

    Bug 30933: Add lists methods for disowning
    
    This patch aims to tidy things a bit by doing the following changes:
    
    * Koha::Virtualshelf gets the 'transfer_ownership' method
    * Koha::Virtualshelves gets the 'disown_or_delete' method
    * Koha::Patron->delete gets rewritten/simplified by using
      disown_or_delete
    
    The idea is to capture the current behavior in more fine grained
    methods. So current tests should be passing as they do now.
    
    To test:
    1. Run:
       $ kshell
      k$ prove t/db_dependent/Koha/Patrons.t \
               t/db_dependent/Virtualshelves.t
    => SUCCESS: Tests pass
    2. Apply this patches
    3. Repeat 1
    => SUCCESS: Tests still pass!
    4. Run:
      k$ prove t/db_dependent/Koha/Virtualshelf.t \
               t/db_dependent/Koha/Virtualshelves.t
    => SUCCESS: Tests pass!
    5. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9288addef002c97120fdaeb5c394448da18293ff
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jul 19 14:49:24 2022 -0300

    Bug 30933: Unit tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b70ae1d50f07d1449630bf738bd0e9d53d542c82
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Jun 22 12:14:37 2022 +0000

    Bug 30933: (follow-up) Use cannot_be_transferred in shelves scripts
    
    Test plan:
    Verify if transfer shared list on OPAC still works as expected.
    Same for intranet counterpart for public lists.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 773779e792243f640c00be804a39f071a99ea60b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Jun 21 14:41:42 2022 +0000

    Bug 30933: (follow-up) Consolidate transfer checks
    
    Adding shelf->cannot_be_transferred with unit tests.
    
    Note: This follow-up actually refers to comment42 on the
    preceding report 25498.
    Furthermore, we could still improve later on using error code
    more effectively (adding codes). Here we concentrate on moving
    the checks to module level.
    
    Test plan:
    Run t/db_dependent/Virtualshelves.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c46e0d89b4a3a95133a9e9de201219281a5e2cf4
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Jun 20 11:48:25 2022 +0000

    Bug 30933: Adjust pref description, include ListOwnerDesignated
    
    Test plan:
    View the pref on the System preferences, Patrons tab.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d5ba2b1c4f48f16bf37974deb4cd3e81c70d4d29
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Jun 20 10:03:59 2022 +0000

    Bug 30933: Change for patron->delete
    
    Test plan:
    Run t/db_dependent/Koha/Patrons.t
    Set pref ListOwnershipUponPatronDeletion to transfer.
    Set pref ListOwnerDesignated to some valid borrowernumber.
    Pick a user with public or shared list, delete from interface.
    Pick a user with public or shared list, delete by script. (*)
    Verify in both cases that new list owner is the designated one.
    
    (*) Tip: Create another branch. Move the patron to be deleted to that
    branch. And delete by script with:
        misc/cronjobs/delete_patons.pl -c -v -library YOUR_CODE
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fc5d9c013ee9887652fd00386fb24b07363d3d4d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Jun 21 11:29:09 2022 +0000

    Bug 30933: Database revision (new pref)
    
    Adds pref ListOwnerDesignated.
    Generalize description of ListOwnershipUponPatronDeletion a bit.
    
    Test plan:
    Run updatedatabase.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5182341cd1ae542e1c0b12ab57e669d8ba3d7938
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Jul 20 11:45:23 2022 +0000

    Bug 25498: (follow-up) Show error message when no sharee has email
    
    Test plan:
    Share a list with a patron that has no email address.
    Try to transfer ownership. Verify that you get the error message.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dc5431c8ec0d35e22a4b9047cbded234b1efef83
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Jul 19 12:18:21 2022 +0000

    Bug 25498: (follow-up) Change for autocomplete change of 30578
    
    Test plan:
    Check if the patron search still works on the intranet shelves form
    when transferring ownership.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 443c71fa004c1f94c2b264d85ed6b5be461dc56d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jun 17 06:58:09 2022 +0000

    Bug 25498: (QA follow-up) Rename virtualshelfshare->patron
    
    This patron is a 'sharee' (not the sharer).
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 52154c6e9038d768341570f816f3832cfb6c1582
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Jun 13 09:40:07 2022 +0000

    Bug 25498: Transfer ownership shared list on OPAC
    
    Test plan:
    Pick or create a shared list. Login as owner.
    Transfer to one of the other members.
    Verify that you do no longer have Transfer, but see Remove share.
    Login as the other member. Transfer it back.
    
    Bonus: Working with two tabs, you can open the Transfer form and
    in the meantime delete the list, the patron or remove the share.
    Or change permissions. Submit after that and check the error message.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit da8f05f7c522fe6cdabf923c80e749b9e4662f68
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jun 10 09:42:41 2022 +0000

    Bug 25498: Show transfer button for shared lists on OPAC
    
    Test plan:
    Pick or create a shared list.
    Verify that OPAC only shows the Transfer button when you are the
    owner of a shared list.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 92e7bcf7510a9d63998ca3f9371fcc00cca12e17
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jun 10 08:26:16 2022 +0000

    Bug 25498: Add a transfer form for public lists
    
    Test plan:
    [1] Valid transfer:
        Log in with staff patron C having edit_public_lists.
        Pick a public list. Choose Transfer. Select a patron.
        Submit and check if transfer was successful.
    [2] Permission problem:
        Pick a staff user D. Temporary enable edit_public_lists.
        Add another private tab. Login with D.
        Pick a public list. Transfer. Choose another patron. Wait.
        Switch tab: remove added permission from D.
        Switch tab again: Submit transfer form. Error? Close tab.
    [3] Bonus test - Shelf disappeared:
        Pick a public list. Transfer. Choose another patron. Wait.
        Open another tab. Delete the selected public list.
        Close tab. Submit the transfer. Not exist error?
    [4] Bonus test - Patron not found:
        Pick a public list. Transfer. Choose another patron. Wait.
        Open another tab. Delete selected patron.
        Close tab. Submit transfer. Patron not found error?
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ad83180fb071bfb3f1c3d9c223e455a19ca81adb
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jun 9 12:59:43 2022 +0000

    Bug 25498: Add transfer button on intranet
    
    Note: Adjusting shelves_results template too for not allowing delete
    when you do not have delete_public_lists (or higher). If you are the
    owner, you are allowed to edit or delete. But transfer specifically
    needs edit_public_lists (or higher).
    
    Note: Removed a few useless POD lines to make qa tools happy.
    
    Test plan:
    Check if you see the transfer button on public lists only when having
    permission edit_public_lists (or higher). And never on private lists.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7d65cd5db42d4243ccacfee5f92a88e776deb759
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jul 19 11:21:00 2022 -0300

    Bug 11889: DBRev 22.06.00.018
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f619a2e3d10b757869b67f4d0dad08755a6fc2b1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jun 9 15:39:36 2022 +0100

    Bug 11889: (QA follow-up) Spelling
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 60a4f1c84a465299ffdef2bf9483d9950dd51f54
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jun 9 09:12:18 2022 +0000

    Bug 11889: (follow-up) We did not need get_shared_shelves after all
    
    Test plan:
    Run t/db_dependent/Virtualshelves.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aff32dd6dddb54ec418a48226f0b300cab57bcd6
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jun 9 07:24:31 2022 +0000

    Bug 11889: (follow-up) Get rid of FIXME in Koha::Patron
    
    Instead of get_lists, I added ->virtualshelves.
    
    I removed the addition of the suffix to the shelf name here; if we
    really want that (doubts), we should do it pref based. Removing a
    staff member with public lists would result in weird names with
    shelf numbers on the OPAC. (Should be very easy to restore.)
    
    Used this opportunity to refactor the patron->delete subtest a bit:
    switching to build_object, removing the 'retrieved patrons',
    differentiating between staff patron and patron for sharing,
    adding a few tests.
    
    Test plan:
    Enable transfer ownership. Delete a patron with lists in interface.
    Check what happened.
    Run t/db_dependent/Koha/Patrons.t.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1d1432cfb5ff5e8cae6443a7ce4095eeec18e787
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Jun 8 14:35:31 2022 +0000

    Bug 11889: (QA follow-up) Fix tests
    
    We need some changes for 28959 changing category to public.
    Added the userenv mocking.
    
    Note: A follow-up does a bit more refactoring here. But they
    should pass at least now.
    
    Test plan:
    Run t/db_dependent/Virtualshelves.t
    Run t/db_dependent/Koha/Patrons.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2eac11c24dbe8a4633cb82245ad0d388922faede
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Jun 8 14:47:05 2022 +0000

    Bug 11889: (QA follow-up) Changes for wantarray move in ->search
    
    See bug 29844.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 824352d5037d5334c0e94b2918388b468f4d792e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Jun 8 14:14:43 2022 +0000

    Bug 11889: (QA follow-up) Convert to new atomicupdate style
    
    The first patch contained an old .sql atomic update.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 277c2d7fd88a14b5e27439dda0a0c4e1abc166d8
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Jun 8 14:05:42 2022 +0000

    Bug 11889: (QA follow-up) Add POD ground work
    
    Make QA tools a fraction happier ;)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5e544116c8aeb22034b520f8ce572feb33b9e4e3
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Feb 20 21:51:39 2017 +0000

    Bug 11889: (follow-up) Tests and new get_shared_shelves
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    This is a manual reconstruction of an older patch, that git
    did not want to apply anymore (sha trouble etc.)
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 872b1908f87297f1d4b20ff599a866b2db70a4f0
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Feb 16 10:30:35 2017 +0100

    Bug 11889: (QA follow-up) Add entry to sysprefs.sql
    
    Also changes the insert in the atomic update to an insert ignore, as
    we generally do for inserting sysprefs (see updatedatabase).
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Cédric Vita <cedric.vita@dracenie.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 832aa7416193215fafe9b34e2681f1c32eee9505
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Feb 16 10:04:27 2017 +0100

    Bug 11889: (follow-up) Remove share if you are the new owner
    
    This will probably be exceptional. But if the staff member already had
    a share for a private list of the patron he deletes now, he will be
    the new owner and we should remove the share record.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Cédric Vita <cedric.vita@dracenie.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6ff09b16f1620840fc2f9353e17a718e7e98f8c7
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Feb 14 22:56:31 2017 +0000

    Bug 11889: Disown a list upon deletion of owner
    
    This patch adds a syspref 'ListOwnershipUponPatronDeletion' which
    decides if all the owner's lists (public and private) are deleted
    when the owner is deleted, or if the ownership of their public and
    shared lists are transfered to the user who deleted the owner (private
    lists that are not shared are always deleted).
    
    To test:
    1) Apply patch and update database
    2) Set the ListOwnershipUponPatronDeletion syspref to 'Transfer...'
    3) Set up a superlibrarian user
    4) Log in as this superlibrarian user and set up three lists, a public
    list (maybe named 'public'), and two private lists (named 'private' and
    'shared')
    5) Log in as this user to the opac (if you haven't already) and share
    the 'shared' list with someone
    6) View the virtualshelves table in mysql to see the three lists you
    just created under your new user
    7) Also view the virtualshelfshares table in mysql to see the 'shared'
    list
    8) Log into the staff client with your regular user (a different user to
    the one you just created)
    9) Search for the user you just created and delete them
    10) Go to your lists
    11) You should see the 'shared' list under your private lists, and their
    'public' list under your public lists, both with you as the owner
    12) if you view both the virtualshelves table and the virtualshelfshares
    table in mysql again, youll see you are now the owner and the 'private'
    list will no longer exist.
    13) Set the ListOwnershipUponPatronDeletion syspref back to 'Delete...'
    14) Repeat steps 3 - 10 again (it may help to delete the 'shared' and
    'public' lists before you re-create them)
    15) You should not see any of the lists you just made under private or
    public lists this time. To confirm, check the virtualshelves table in
    mysql and make sure that all three lists have been deleted.
    
    Sponsored-by: Catalyst IT
    Signed-off-by: Cédric Vita <cedric.vita@dracenie.com>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    2022-06-08 Removed old atomic update. See new follow-up.
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fc919fc796df42c29e73cd527d3c425377fcc27a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jul 19 09:51:16 2022 -0300

    Bug 30905: (follow-up) Get logged in branch once
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 952f00f20b0ab110bc9b2b2e7cf4eb6febf31698
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Jun 6 23:36:38 2022 +0000

    Bug 30905: Show waiting recalls in patron account
    
    This enhancement shows recalls ready for pick-up on the patron's account
    so they can't be missed.
    
    To test:
    1) Enable the UseRecalls system preference and set up your
    recalls-related circulation rules.
    2) Check out an item to Patron B.
    3) Log into the OPAC as Patron A and search for the item.
    4) Place a recall on that item. Note the pickup library.
    5) Go back to the staff client. At the top right of the page, confirm
    your logged in library matches the recall pickup library. Set the
    library to the recall pickup library if needed.
    6) Check in the recalled item and confirm the recall as waiting for
    Patron A.
    7) Go to Patron A's account (members/moremember.pl). Confirm the recall
    shows under 'Recalls waiting here' and all the information is correct.
    8) Go to Patron A's checkouts (circ/circulation.pl). Confirm the recall
    shows under 'Recalls waiting here' and all the information is correct.
    9) Click on the menu at the top right of the page and choose 'Set
    library'. Change the library to some other library.
    10) Repeat steps 7 and 8, however this time the recall should show under
    'Recalls waiting at other libraries'.
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 87b985528edf0a714121fed13d2390fd57a27a36
Author: Shi Yao Wang <shi-yao.wang@inlibro.com>
Date:   Wed Jun 29 11:13:27 2022 -0400

    Bug 30935: Holds to pull shows wrong first patron
    
    When different patrons have item level holds on the same item, Holds to
    pull shows wrong first patron.
    
    Test plan:
    1) Place a record-level hold on a biblio with an available item
    2) Check the Holds to pull page (circ/pendingreserves.pl)
    --> The biblio should appear in the list and the patron should appear in the 'First patron' column
    3) Place a second record-level hold on the same biblio
    4) Go back to the Holds to pull page
    --> The biblio is still there, but the patron in the 'First patron' column is the second patron
    5) Place a third record-level hold on the same biblio
    6) Go back to the Holds to pull page
    --> The biblio is still there, but the patron in the 'First patron' column is the third patron
    7) Apply the patch
    8) Go back to the Holds to pull page
    --> The biblio is still there and the patron in the 'First patron' column is the first patron
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cc23a4c478ab57f3b987b27fb7c2beebd4ceb823
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Feb 11 16:27:54 2021 +0100

    Bug 27683: Impact on catalogue/detail.pl
    
    Since EasyAnalyticalRecords pref is now in GetAnalyticsCount, remove
    test in catalogue/detail.pl.
    
    Test plan :
    1) Build an item and a linked analytical record with 773$0 and $9
    2) Go to record detail page
    3) Enable EasyAnalyticalRecords
    4) You see analytics tab and analytical count on item
    5) Disable EasyAnalyticalRecords
    6) You dont see analytics tab
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dfc390940d8688195c5046f978f08bbd64bf24e1
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Feb 11 15:33:35 2021 +0100

    Bug 27683: Bind results of GetAnalyticsCount to the EasyAnalyticalRecords pref
    
    C4::Items::GetAnalyticsCount is part of the easy analytics feature.
    Like Bug 20702 make early return when the system preference EasyAnalyticalRecords is disabled.
    Actually it may block an item deletion for wrong reason.
    
    Test plan :
    1) Dont apply patch
    2) Build an item and a linked analytical record with 773$0 and $9
    3) Enable EasyAnalyticalRecords
    4) Try to delete the item
    5) You have an alert because linked to analytics
    6) Disable EasyAnalyticalRecords
    7) Try to delete the item
    8) You have an alert because linked to analytics
    9) Apply patch
    10) Try to delete the item
    11) No alert, it works :D
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fd7652255c1a4c2ea6c62fab91cb94a92e312258
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Feb 11 16:28:18 2021 +0100

    Bug 27683: Unit test for GetAnalyticsCount
    
    Run prove t/db_dependent/Items/GetAnalyticsCount.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b4a9edc83f72b9740cd59bd5c842855cd65e19cc
Author: Michal Urban <michalurban177@gmail.com>
Date:   Wed Jun 15 04:04:37 2022 -0400

    Bug 30447: Unit tests
    
    Added tests to ensure that Koha::Holds->get_items_that_can_fill returns items with datecancelled and datearrived
    Added test for correct number of items for each call of "get_items_that_fill"
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 206ba015c4a4b28b022ab9d6481a07ab76461747
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Apr 4 12:21:43 2022 +0000

    Bug 30447: Check if transfers arrived or cancelled
    
    TO test:
     1 - Find a bib with a single item
     2 - Browse to Circulation->Transfer
     3 - Transfer the item to another branch
     4 - Check the item in at current branch and cancel the transfer on the dialog
     5 - Place a hold on the biblio for a patron at current branch
     6 - Browse to Circulation->Holds to pull
     7 - Item does not show
     8 - Apply patch, restart all
     9 - Browse to Circulation->Holds to pull
    10 - Item shows
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 15918c33701fe2cf3b84e568bb9bd16b328f172f
Author: Shi Yao Wang <shi-yao.wang@inlibro.com>
Date:   Mon Jul 4 09:18:51 2022 -0400

    Bug 29922: (follow-up) Remove extra sort
    
    Remove wrong sort in staff advanced search page
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d86d949551201bfc7745f65fbb8428abac324cb4
Author: Shi Yao Wang <shi-yao.wang@inlibro.com>
Date:   Mon Jun 27 11:18:05 2022 -0400

    Bug 29922: Make get_search_groups return results sorted by title
    
    get_search_groups from Koha/Library/Groups.pm returns library groups sorted by title.
    
    Test plan:
    1- Go to administration > library groups and create multiple library groups with different names (e.g. AGroup, BGroup, ÄGroup, etc.). Make sure to tick "Use for OPAC search groups" checkbox.
    2- Go to advanced search in OPAC.
    3- Under "Groups of librairies" , click the select button.
    4- Notice that the library groups are not in alphabetical order.
    5- Apply the patch.
    6- Notice that the library groups are in alphabetical order.
    7- Run `prove t/db_dependent/LibraryGroups.t` and all test should pass.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dbbaba3ee08f6551294a00194f03e6d64a409431
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jul 15 14:58:40 2022 +0100

    Bug 31163: Sort cashups newest to oldest
    
    The cashup history table was sorting from oldest to newest.. it's
    perferable to show the most recent at the top by default.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c4ee39bf3aa8f1077ec925630e70e22aa2f35f6a
Author: Andrii Veremeienko <averemeienko@jabra.com>
Date:   Fri Oct 29 16:44:19 2021 +0300

    Bug 29114: Trim whitespace before the barcode
    
    The solution was to add regexp that trims all whitespaces.
    
    How to test:
    1. Go to the koha/virtualshelves/shelves.pl;
    2. Add new list or edit existing one;
    3. Start adding new items;
    4. In the "Barcode" field add barcode(s) with whitespaces before them;
    5. Observe that it wasn't added as the barcode isn't recognized because of whitespaces;
    6. Apply the patch;
    7. Repeat step 4;
    8. Observe that the item was successfully added;
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 325d783419fd539ea596bf1f0a1ddc1b3ace66e2
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jul 15 13:23:18 2022 +0000

    Bug 27667: (QA follow-up) Fix singular index and rephrase heading
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fee0f29792353d895af9eb6328cd50faef743162
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed May 11 09:38:23 2022 -1000

    Bug 27667: Display a warning for records missing in Elasticsearch
    
    On "About Koha" page are displayed the numbers of indexed biblios and authorities with ES.
    It could be great if we could have comparison with the number of records in the database to display the number of missing records.
    In the "System information" tab with the other "Data problems".
    
    If Searchengine has any issue (index count will be -1), we do not
    display missing records.
    
    Test plan :
    1) Use Elasticsearch searchengine
    2) Rebuild all records : koha-elasticsearch --rebuild -d kohadev
    3) Go to "About Koha" page and look at System information tab
    => you see no warning
    4) On a biblio record delete the MARCXML in biblio_metadata.metadata
    5) Rebuild all records : koha-elasticsearch --rebuild -d kohadev
    6) Go to "About Koha" page and look at System information tab
    => you see warning : 1 record(s) missing on a total of 435 in indice koha_kohadev_biblios.
    7) On a authority record delete the MARCXML in auth_header.marcxml
    8) Rebuild all records : koha-elasticsearch --rebuild -d kohadev
    9) Go to "About Koha" page and look at System information tab
    => you see warning : 1 record(s) missing on a total of 1705 in indice koha_kohadev_authorities.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fd49601079fcf6790364522b41bd038bca3190c6
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Jul 15 16:55:53 2022 +0000

    Bug 20439: Sort SMS providers in alphabetical order by DB field
    
    To test:
    1/ Add 'Email' to the 'SMSSendDriver' system preference.
    2/ Make sure 'EnhancedMessagingPreferencesOPAC' and 'EnhancedMessagingPreferences' are turned on.
    3/ Add some SMS providers (/cgi-bin/koha/admin/sms_providers.pl) with different names.
    4/ Notice on memberentry.pl and opac-messaging.pl the SMS providers sort by when they were added, not alphabetically.
    5/ Apply patch and restart services.
    6/ Look at memberentry.pl and opac-messaging.pl and notice that they SMS providers now sort alphabetically.
    
    Signed-off-by: George Williams <george@nekls.org
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 73d2066837e5f73e44c89952497d12e6f1d13342
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jul 12 18:39:06 2022 +0000

    Bug 31144: When modifying an order we should not load the vendor default discount
    
    After placing an order in a basket with a discount of "0" if you attempt to modify we will load the vendor default discount, this can lead to accidentally applying a discount when modifying other order parts
    
    To test:
    0 - Have a vendor with a discount set
    1 - Add an order to a basket
    2 - While adding, set discount to 0
    3 - Add order - prices are calculated ocrrectly
    4 - Modify order
    5 - Note discount is populated with vendor discount
    6 - Cancel
    7 - Apply patch
    8 - Modify order
    9 - Discount remains at 0
    10 - Repeat with a vendor with no discount set
    11 - Placing order not specifiying discount it remains blank
    12 - Modifying order discount remains blank
    13 - Modify order and set discount
    14 - Confirm it is retained on modifcation
    
    Signed-off-by: Kelly McElligott <kelly@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 920529df429ee12694ed92c7912e098da0f05942
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Mon Jul 4 12:10:54 2022 -0400

    Bug 31068: Context for translation: Print (verb) vs. Print (noun)
    
    This patch adds context to the term Print in the context of message transport types (as opposed to printing something/print button), for translation purposes.
    
    To test:
    0- Apply patch
    
    Check the terms to be changed
    1- Go to Tools > Notifications & slips
    2- Edit a notification
    ** 3- In the tabs for different transport types, check the 'Print' term (letter.tt)
    4- Go to Tools > Overdue notice/status triggers
    ** 5- In the transport types, check the 'Print' column heading (overduerules.tt)
    
    Add a new language (fr-CA in the example, change for whatever language code you want)
    6- In a terminal, run
    gulp po:create --lang fr-CA
    7- Then, run
    gulp po:update --lang fr-CA
    8- In system preferences, enable the new language in language and OpacLanguages
    9- Switch the language in staff interface and OPAC
    
    Change the translations
    10- In your favourite text editor, open fr-CA-messages.po
    11- Find the string msgctxt "Message transport type"
    12- Enter a word in msgstr
    13- Save the file
    14- In a terminal, go to misc/translator
    15- Run
    ./translate install fr-CA
    
    Check the translations
    16- Redo the steps to check the terms (steps 1-5) and make sure the terms in steps 3 and 5 are changed for the word you put in step 12.
    
    17- Optionally, check the other pages where the term is supposed to be unchanged and make sure it is unchanged
    
    Check the terms to leave unchanged (optional)
    18- Enable the HoldsAutoFill and UseCashRegisters system preferences
    19- Go to Administration > Cash registers and create a cash register
    20- Go to a patron's account
    ** 21- Check the 'Print' button in the menu bar or the patron's account (members-toolbar.inc)
    22- Go to the 'Accounting' tab
    23- Create a manual invoice
    ** 24- In the 'Transactions' tab, check the 'Print' button in the fee line (boraccount.tt)
    25- Pay the fee (make sure to use the cash register)
    ** 26- In the 'Transactions' tab, check the 'Print' button in the payment line (boraccount.tt)
    27- At the top of the transactions table, click the 'Export' option
    ** 28- Check the 'Print' option (columns_settings.inc)
    29- Go to the 'Check out' tab and check out an item
    30- Go to the item's bibliographic record
    ** 31- Check the 'Print' button in the menu bar of the detailed record (cat-toolbar.inc)
    32- Add the record to the cart and open the cart
    ** 33- Check the 'Print' button in the cart (basket.tt)
    34- Place a hold on the item
    35- In the search bar at the top, click the 'Check in' tab and check in the item
    ** 36- Check the 'Print' button in the 'Hold filled for' message (returns.tt)
    37- Go to Tools > Cash summary for Branch
    38- Click 'record cashup' and confirm
    39- Click the 'Summary' link in the 'Last cashup' column
    ** 40- Check the 'Print' button in the cashup summary modal (cashup_summary.inc)
    41- Go to Serials
    42- Create a subscription (if there aren't any)
    43- Receive an issue
    44- From the subscription detail page, go to Create routing list
    45- Add a recipient to the list
    46- Save the routing list
    47- Click 'Save and preview routing slip'
    ** 48- Check the 'Print' button in the routing list preview (routing_preview_slip.tt)
    
    Note: I can't find where the 'Print' from tinymce_i18n.inc is displayed in the staff interface
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dc75b5d5cd181d8f8e50e98adb7afc69fc6a8838
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Sep 24 12:19:12 2021 +0100

    Bug 29105: Add effective_itemtype handling to items api
    
    This patch adds effective_item_type_id to the items api.
    
    We overload the to_api method to append the effective_item_type_id field
    with that of the effective itemtype code.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6ca908816f2e56acced272f7fc56a0f68df62a43
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Sep 24 15:13:55 2021 +0100

    Bug 29105: Unit test
    
    This patch adds a unit test for the addition of effective_item_type_id
    to the items responses.
    
    Test plan
    1) Run the unit test prior to applying the second patch and confirm it
       fails
    2) Apply the second patch and confirm the unit test now passes
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3f3a1b702c437f77cf31f5caac28858a1751a8c5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 18 14:39:25 2022 -0300

    Bug 31071: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 25d31a7581404405fe32b9da5a79c6044891981a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jul 12 14:45:13 2022 +0000

    Bug 31071: Regression: date due removed from staff search results
    
    This patch corrects a regression caused by Bug 28321, which
    inadvertently removed the date due from output of item information in
    each search result.
    
    To test, apply the patch and perform a catalog search which will return
    some results which are checked out and some which aren't. Confirm that
    the checked out items show the date due correctly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Emmanuel Bétemps <e.betemps@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e1b63d9df322101af1230fc4aaf5cf2e38832830
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 4 21:09:05 2022 -0300

    Bug 31106: Fix links generated in XSLTs
    
    This patch addresses the case of links that are generated on the XSLT
    side, those linking to and from host records using 773$t and 773$a.
    
    To test:
    1. Pick a bibliographic record (I chose 'Unconditional' from the sample
       data
    2. Add " and ? to the title statement. I changed it to
       'Uncond"itional?¿'
    3. Add a child record to it
    4. Open the detail page for the host record
    => FAIL: It doesn't show the 'Show analytics' link
    5. Repeat 4 for the same record, in the OPAC
    => FAIL: It doesn't show the 'Show analytics' link
    6. Apply this patch
    7. Repeat 4 and 5.
    => SUCCESS: Links are shown!
    8. Follow the links
    => SUCCESS: The links take you to the right resultset!
    9. Go to the child record, and notice the link back to the parent works
       :-D
    10. Sign off :-D
    
    Sponsored-by: Theke Solutions
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 24bb15785dd7f176c1ffe2bf8ae5e8a05cc0707a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 4 15:19:27 2022 -0300

    Bug 31106: Make clean_search_term escape double quotes
    
    We noticed that several characters will break Zebra queries. So search
    terms need to be quoted for things to work. In this context, double
    quotes inside search terms are problematic because double quotes are
    what we use for quoting strings.
    
    This patch makes the clean_search_term method escape double quotes.
    
    To test:
    1. Apply the unit tests patch
    2. Run:
       $ kshell
      k$ prove t/Koha/SearchEngine/Zebra/QueryBuilder.t
    => FAIL: It doesn't work as it should!
    3. Apply this patch
    4. Repeat 2
    => SUCCESS: It does the job!
    5. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 73ca6e2f57d9c2271878e74e46548cb7eadea2a3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 4 15:18:44 2022 -0300

    Bug 31106: Unit tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f8f9231562be10c769c57d42b0f3d2e395e5aac3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 18 14:36:28 2022 -0300

    Bug 30882: (QA follow-up) Fix tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ecd91d608914aa04660b3f83e9337effbed3822e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 18 12:33:47 2022 -0300

    Bug 31069: Remove ExplodedTerms dependency on templates
    
    This patch removes the use of templates and CGI in ExplodedTerms by using the
    Koha::I18N library.
    
    The functionality on the package is too simple, and messing with the
    template paths complexity on the tests was too much, given we have a
    nice way to have translatable strings at the package level.
    
    This patch does that, and cleans up the test file as well, that required
    complex template and CGI mocking to run properly.
    
    To test:
    1. Run:
       $ kshell
      k$ prove t/db_dependent/SuggestionEngine_ExplodedTerms.t
    => FAIL: It fails in master
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: Tests pass
    4. Follow the original test plan
    => SUCCESS: Things work
    5. Enjoy the rest of the day and forget this ever happened
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1857b29ee64ea6c509580594e6d1a025a136443b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 18 12:11:15 2022 -0300

    Bug 29632: DBIC update
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8aaa728aeb39308de99e21175f38c2831ba36038
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 18 12:09:41 2022 -0300

    Bug 29632: (QA follow-up) Add ENUM value to kohastructure.sql :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cb986e17d77a6284b9bd440ec95583a13db44b6c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 18 12:07:42 2022 -0300

    Bug 28854: DBIC update
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ef32afd5ea09c11f3ef54e3c1bba169e0e9769be
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 18 12:05:40 2022 -0300

    Bug 29632: DBRev 22.06.00.017
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 90ef5ec8c81b6010e6d7eafc6498bc2e6a9ca8f5
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Jun 1 20:24:03 2022 -1000

    Bug 30882: Add max_result_window to index config
    
    Elasticsearch number of results is by default limited by setting "index.max-result-window", default value is 10000.
    https://www.elastic.co/guide/en/elasticsearch/reference/current/index-modules.html#index-max-result-window
    
    We use this setting:
    https://git.koha-community.org/Koha-community/Koha/src/commit/44d6528b566e5c16eba9b15f8aa24667293766c3/Koha/SearchEngine/Elasticsearch/Search.pm#L411
    
    I propose we add this setting in index config.
    
    Test plan:
    1) Use Elasticsearch
    2) Apply patch and flush memcached
    3) Rebuild indexes: misc/search_tools/rebuild_elasticsearch.pl -v -b -d
    4) Check the settings of index (when using koha-testing-docker*):
       curl 'es:9200/koha_kohadev_biblios/_settings?pretty&filter_path=**.max_result_window'
    5) You should see:
       "max_result_window" : "1000000"
    
    * You also need to add this setting to the es section in koha-testing-docker's
    docker-compose.yml (after the networks configuration):
         ports:
             - "9200:9300"
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 295987a06184f8538a98a50907b5caf97988a242
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Jul 11 15:56:05 2022 +0000

    Bug 29632: Unit tests
    
    This patch adds unit tests, as well as changing existing test to use a mock
    and read the data as passed in tests, rather than relying on what exists in
    the DB
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b8b8a62f112dc6937a7187d4150146a7cad6941f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jun 28 13:47:45 2022 +0000

    Bug 29632: Don't sort cn-sort numerically
    
    When defining our sort fields in we defined all as 'numeric'
    
    For other string containing numbers this is likely correct, however,
    for callnumbers it is not. e.g. E45 should sort before E7
    
    This patch adds a new 'callnumber' type and deifnes this for cn-sort and
    adds to the field maping a sort without numeric set
    
    To test:
    0 - Be using ES with Koha
    1 - On records with single item, add callnumbers:
        VA65 E7 R63 1984
        VA65 E7 T35 1990
        VA65 E45 R67 1985
    2 - Add public note 'shrimp' or something to make them easily searchable as a group
    3 - Search for 'shrimp', sort by callnumber
    4 - Note E45 comes last, it should come first
    5 - Apply patch
    6 - Reset ES mappings
    7 - Reindex ES
    8 - Repeat search
    9 - Sorting should be correct when set to callnumber
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Michal Urban <michalurban177@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6dc978375e5a11829951aca2808482e7d7723c39
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Jul 14 15:10:55 2022 +0000

    Bug 31153: Correct include for patron-search-header
    
    To test:
    1) Turn on recalls
       1.1) In Administration > Global system preferences, enable UseRecalls
       1.2) Add recalls permissions in your circulation rules
    2) In the OPAC, log in as a patron
    3) Find a record with checked out items and place a recall
    4) In the staff interface, go to the patron's account
    5) Click on any tab on the left in the patron's account (e.g. Holds history)
    --> Note that the Koha logo and search bar is at the top of the page between the module menu and the breadcrumbs
    6) Click on the 'Recalls history' tab
    --> Note that the Koha logo and search bar disappear
    7) Apply patch
    8) Conform search bar is there
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7c734c6903a823eeb58be9ab1c4af251def776b7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jul 12 18:10:54 2022 +0000

    Bug 14680: Always subtract discount from price to calculate estimated cost
    
    This patch simply removes a discrepancty where when a discount is provided on the order form
    we add the discount to the price, and when it comes form the vendor we subtract the discount.
    
    Discounts should always descrease the estimated cost
    
    To test:
     0 - Have a vendor with a discount of 10% specified
     1 - Export a record from your Koha
     2 - Stage the record for import and match on biblionumber
     3 - Add to a basket in acq from the staged file
     4 - Select the title, and set order price to $10 and do not fill the discount field
     5 - Add the order - note $10 RRP and $9 actual/budgeted cost
     6 - Repeat 2&3
     7 - Select the tile, set price $10 and discount 50%
     8 - Add the order - note $20 RRP and $10 actual/budgeted cost! FAIL
     9 - Apply patch, restart all
    10 - Repeat 2-7
    11 - Add the order, note $10 RRP and $5 actual.budgeted cost
    
    Signed-off-by: Kelly McElligott <kelly@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 23bce125eaba4943ae3aed7b0d9d25cafa15d641
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jul 4 11:49:00 2022 +0100

    Bug 31083: Fix part_name handling in js-biblio-format
    
    This patch corrects the typo introduced in bug 28854 for part_name
    handling in the js-biblio-format include.  We also introduce proper
    whitespace addition when concatenating subtitle, medium and parts to the
    title string.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 88becf3dcee54b8c8892e8a44acdf2c54f2d66ed
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 13 20:58:44 2022 +0200

    Bug 30578: Fix multi-terms search
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8e321e8d76e02c2901dcfdb8f17c53930bbc90d8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 13 20:46:28 2022 +0200

    Bug 30578: Remove ajaxSetup from checkouts.js
    
    It was a IE fix apparently
      commit f021b52e71deaac0b46992fa33ef02f2b001e56d
      Bug 11703 [QA Followup] - Stop IE from caching ajax request
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fbcb5fa475d8afa1b8b8e7aefc749b8794a622a1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 13 20:46:17 2022 +0200

    Bug 30578: Fix on-select for 2 occurrences
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d2b16aaaccfe305ecefd1cccdbf7ed96559ab6b3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 13 20:37:44 2022 +0200

    Bug 30578: Restore highlighting of patrons from the logged-in library
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9309dedb53dd73b7e129db2acde37d2cf55aff51
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 9 11:03:27 2022 +0200

    Bug 30578: Remove circ/ysearch.pl in favor of the /patrons REST API route
    
    This patch removes the circ/ysearch.pl script used by the jQuery autocomplete widget.
    We can now use the /api/v1/patrons endpoint to retrieve the patrons and
    generate the patron result list.
    
    Prior to this patch the different occurrences were defining the style
    and the list of patron's attributes to display for each option (name,
    date of birth, age, address, etc.). Now they are all displaying the same
    information.
    
    To acchieve this we had to:
    * Make js-date-format.inc and js-patron-get-age.inc available from js_includes.inc
    and so available from everywhere, which is certainly a good move. We
    could discuss why this code is in include file instead of JS files
    however.
    * Remove the .ajaxSetup call in tags-review.js to reduce its scope: an
    underscore parameter was added to the REST API query (?)
    
    A better solution would have been to extend the existing widget
    (https://learn.jquery.com/jquery-ui/widget-factory/extending-widgets/)
    but I didn't manage to do it, and I feel like there is a bug in jQuery
    autocomplete. The "source" was not taken into account.
    We could think about replacing the jQuery autocomplete with something
    else, but that's outside the scope of this bug.
    
    Test plan:
    Search for patrons and confirm the autocomplete works and that the
    "select" action works as before (either a redirect or select the
    patrons) on the different views:
    * Place a hold
    * Search for tags (form on the left)
    * In the header, "Check out" and "Search patrons"
    * Add instructors to course reserves
    * View logs (the "librarian" input)
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e25819723d5b1e99e2334f4b00adafb0a5134eae
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue Jan 5 00:21:16 2021 +0000

    Bug 11158: Add complete field to authority "starts with" search
    
    This patch adds "complete field" to the authority "starts with"
    search so that it uses the untokenized "p" register.
    
    Test plan:
    1. Apply the patch
    2. koha-plack --restart kohadev
    3. Go to http://localhost:8081/cgi-bin/koha/authorities/authorities-home.pl
    4. Type in "Espen" into the search box and hit "Submit"
    5. Note that there are 3 results
    6. Change "contains" to "starts with" and hit "Submit"
    7. Note that no results are returned
    8. Change the search from "Espen" to "Sandberg" and hit "Submit"
    9. Note that 3 results are returned
    10. Experiment to your heart's content and rejoice at your new found power
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f154fb0372d2e24318cad75bb65b993d47da8290
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jul 15 15:20:03 2022 +0100

    Bug 31036: (QA follow-up) Add a warning to the system preference
    
    As suggested by Katrin, adding a warning to the system preference that
    this has an effect on SIP configurations that needs to be understood.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9d8be887d08f523171faa30b35ff86798c4b0115
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jun 24 09:20:52 2022 +0100

    Bug 31036: Treat SIP00 that same as CASH
    
    SIP00 is the code for CASH transactions that have taken place on a SIP
    client.  Cash management treats CASH type transactions as a special case
    for banking and register requirements. This patch brings SIP00 in line
    with the CASH handling code of cash management.
    
    Test plan
    1) Enable cash management with 'EnablePointOfSale'
    2) Enable cash registers with 'UseCashRegisters'
    3) Add a cash register via 'Administration > Cash registers'
    4) Make some payments against the ash register in the staff client
    5) Attempt to make a payment via a SIP client without having associated
       a cash register to the SIP account config
    5a) This should now fail
    6) Attach the cash register to the SIP account used above
    6a) Payment should now work again on SIP transactions
    7) Look at the cash register details page for the cash register
    7a) 'Bankale' should now include cash from both SIP and Staff client
    sales
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1672d0c1c0be45aba66c17b2024495852f1ab2fe
Author: Victor Grousset <victor@tuxayo.net>
Date:   Sat Jul 9 05:39:39 2022 +0200

    Bug 31069: fix <span> in OPAC search suggestions (Did you mean)
    
    == test plan ==
    1. Enable "Did you mean?":
       . go to Administration > Additional parameters > Did you mean?
       . put a tick in each plugin and save the configuration
    2. In the OPAC, search for 'open source'
    3. Without the patch you see escaped <span> after "Did you mean:"
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7b21fb020b868ebaad97fc8a8970dc9570b76e56
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Sep 23 08:57:30 2021 -0400

    Bug 29094: Adding hold via SIP should check if patron can hold item first
    
    When placing holds via SIP2, there is no holdability check. This seems very incorrect.
    
    Test Plan:
    1) Apply this patch
    2) prove -r t/db_dependent/SIP
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7bfcb8288b9eca65ee2b3e36501242dad3331102
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jul 15 12:10:43 2022 +0000

    Bug 31137: (QA follow-up) Also fix new template page
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e7d0b2ab47f1770ed11d3edc5ece8a4cf6753829
Author: Adolfo Rodríguez <adolfo.rodriguez@xercode.es>
Date:   Tue Jul 12 09:20:45 2022 +0200

    Bug 31137: Only display label printer profiles when editing labels
    
    This patch filters the printer profiles in the label edition template so you may only choose Printer Profiles created for Labels.
    
    To test
    1 Create a new Printer Profile in Patron Cards
    2 Edit a Label template, pick the Printer Profile you just created.
    3 Save the Label Template. You get an error 500
    4 apply patch, restart services
    5 Edit a Label template and check that you can't pick the Printer Profile you created in Patron Cards
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 098866cab09a6276d7a5843759c1766791aaf20f
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Jul 14 15:30:09 2022 +0000

    Bug 31146: Fix unclosed table element
    
    To test:
    1) Install another language and enable it in the OPACLanguages system preference
    2) Also make sure opaclanguagesdisplay is set to Allow
    3) Make sure OpacLangSelectorMode is set to display the switch in the footer (either top and bottom or footer only)
    4) Turn on recalls
       4.1) In Administration > Global system preferences, enable UseRecalls
       4.2) Add recalls permissions in your circulation rules
    5) In the OPAC, log in as a patron
    6) Find a record with checked out items and place a recall
    7) Go to your account
    --> Note that the language switch is at the bottom left of the screen
    8) Click on any tab in the patron's account
    --> Note that the language switch is at the bottom left of the screen
    9) Click on 'Your recalls history'
    --> Note that the language switch is right under the recalls history table
    10) Apply patch
    11) The changelanguage div should now be properly placed at the bottom of the page.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 318bb17d5829d5a5de5e4db52261615b58e205c2
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jul 14 12:05:29 2022 +0100

    Bug 31134: Mock EdifactLSQ for t/Edifact.t
    
    This patch adds a mock for the EdifactLSQ preference so we can
    consistently pass when a database is not available.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b6afcdbf48d9daacb24a3f0337a5cab5c7dbded7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jul 4 13:14:45 2022 +0100

    Bug 31129: Fix debarment count on circulation page
    
    This patch was split from bug 23681 where QA identified the issue.
    
    This patch fixes the debarment count displayed on the circulation page
    tabs
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9802273b1f485d9492022ab073aebf6e7e244096
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Jun 12 12:32:37 2022 +0000

    Bug 25449: (QA follow-up) Set items.itype to mandatory by default (UNIMARC)
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ac54145e2a844bbabf9c8d8439a0e5cd68d81ea5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 26 12:08:23 2020 +0200

    Bug 25449: Set items.itype mandatory by default
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 083769164b9af4ab27db7dd16f60af960b3dbf28
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 12 11:30:55 2022 +0200

    Bug 31139: Fix basic_workflow.t
    
    Error while executing command: element not interactable: Element <input id="tag_952_subfield_w_810691" class="input_marceditor items.replacementpricedate noEnterSubmit flatpickr-input" name="items.replacementpricedate" type="hidden"> is not reachable by keyboard at /usr/share/perl5/Selenium/Remote/Driver.pm line 411.
    
    Not sure if it's coming from bug 30717 or not. git bisect told me it was the culprit but we released 22.05 and it seems that we got basic_workflow.t green since then.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 70ff3607b5fdd696aaabdb4a61c759f83451e7e6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jul 13 19:09:39 2022 -0300

    Bug 28854: Fix permissions problem
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 08924cd931e0f7448442630e7ea99160d73a8443
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jul 13 16:48:17 2022 -0300

    Bug 28854: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c9aa31d166887b8d66f696c5d74a734f425fc186
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jul 13 16:22:21 2022 -0300

    Bug 28854: DBRev 22.06.00.016
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 475486781fec55b6a6bd62afd5f69ff5fdafd632
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jul 13 18:11:34 2022 +0100

    Bug 28854: (follow-up) Replace unique constraint in return claims
    
    This patch fixes the failing test for the return claims api.  We add a
    new unique constraint to replace the one we removed earlier in the
    patchset. One should not be able to create a duplicate return claim for
    the same issue of an item.
    
    Test plan
    1) Run the database update
    2) Confirm that t/db_dependent/api/v1/return_claims.t now passes
    3) Confirm that t/db_dependent/api/v1/items.t continues to pass
    4) Bonus points, confirm that bundle checkin still works when items are
       missing
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5476be0c900adf1f6527dd431dc9d7b14d0fc595
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jul 13 12:21:05 2022 -0300

    Bug 28854: DBRev 22.06.00.015
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 470a0c3981f35cbea29fc1057c0e55c134a0ca5a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jul 13 10:34:23 2022 -0300

    Bug 28854: DBIC update
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit db48209356ed2118c1b18b09cf237500da5bd234
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jul 11 16:18:25 2022 +0100

    Bug 28854: (QA follow-up) Fix DB revision for AV's above 10
    
    The authorised_value field is a varchar and so 'MAX' will sort '9' above
    '10' and cause issues if you have more than 9 AV values already for LOST
    or NOT_LOAN.
    
    This patch adds a 'CAST' to the field so we can use MAX correctly.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f22a40b8bab3f6896ab73100802f2bf42efbd09d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jul 11 16:08:05 2022 +0100

    Bug 28854: (QA follow-up) Remove duplicate key test
    
    We now allow duplication of issue_id accross the return claims table (to
    allow for the case where a bundle item has been loaned and thus multiple
    claims can result from the same checkout.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6436629d86834c5409764485463ce9a9afa35dcf
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Jul 11 08:31:34 2022 -0400

    Bug 28854: (QA follow-up)
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6138ef1acb2909d6ae1084b1f7b4f18f3bcebe2a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jul 1 12:43:12 2022 +0100

    Bug 28854: (follow-up) Remove fields from from bundle items
    
    This patch removes the itemtype and collection code fields from the
    bundle items table.
    
    We will add the itemtype back in at a later date with a new bug as the
    display code needs some careful consideration and we felt that doing
    that work inline here would be an unrequired blocker.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 973b6c188a1ad3cb9a1c82a23757a916dc3b57d2
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jul 1 11:38:26 2022 +0000

    Bug 28854: (QA follow-up) Add missing TT filters
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4eda276c1868fd0636dff0a19cdd30832f1ea3a3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jun 27 16:36:09 2022 +0100

    Bug 28854: (follow-up) Add handling for part_numbers/names
    
    This patch adds part number/name handling to the new biblio-format js
    include. This will add such details to bundle management tables.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0938a735de6be0adb0e65eb9879d27718e8aa3b1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jun 27 15:26:04 2022 +0100

    Bug 28854: (follow-up) Link to 'In bundle' on OPAC
    
    This patch adds the 'In bundle: Link' to the OPAC to mirror what we have
    on the staff client.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fa6611a52f0b59965704ceb919ceddfc6e5c80e2
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jun 27 15:00:50 2022 +0100

    Bug 28854: (follow-up) Restore block styling on bundled span
    
    This patch restores a css rule that we lost during rebases that makes
    the 'bundled' span that appears for bundled items on their respective
    details pages so that the 'In bundle: ' text in the status field of the
    table appears beneath the 'Not for loan (Added to bundle)' text.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3702f7bcb467b87bd66128dd5de143d58a799577
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jun 27 14:54:42 2022 +0100

    Bug 28854: (follow-up) Make 'Manage bundle' button a 'toggle'
    
    This patch adds and removes the 'active' class to the 'Manage bundle'
    button such that it correctly reflects whether the manage area is
    expanded or not for the bundle item.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d711d45f4e8336c22981184758686fbe07d375be
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jun 27 14:47:03 2022 +0100

    Bug 28854: (follow-up) Add bundle item status to manage button
    
    This patch adds the item counts (Present|Lost) to the 'Manage bundle'
    button in the catalogue details page.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b8a2fdcd4897304545a056fcce2e20877cbbf97f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jun 27 14:31:04 2022 +0100

    Bug 28854: (follow-up) Restore last seen date formatting
    
    We lost the date formatting somewhere along the line with rebases, this
    patch restores the call to $date for last seen date.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7d0cd2ebae3c398c07c63edb796ecfca73117ea8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jun 27 11:54:49 2022 +0100

    Bug 28854: (follow-up) Link bundle items to thier biblios
    
    This patch splits out the title formatting from the bundle item title
    display into it's own new js-biblio-format include file and adds biblio
    linking options.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3c485bb1c568a1b23c27e11e9ed3fbf8b25f5d4c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jun 27 10:15:16 2022 +0100

    Bug 28854: (follow-up) Disable bundle editing for checked out
    
    This patch disables the add and remove options under bundle management
    when the bundled item in question is checked out.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 720ed202b82e89db1af68e98fd6ac2dd465b562e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jun 24 16:55:25 2022 +0100

    Bug 28854: (follow-up) Use barcodedecode in Koha::REST::V1::Items
    
    This removes any leading or trailing whitespace from the external id
    passed
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 08356151cbdd29c12a9f8d9043f2aa17dfc9f9f5
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jun 24 16:50:53 2022 +0100

    Bug 28854: (follow-up) Improve error for item not found
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3642a22ca44130771a3269c65938030b0b33b582
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jun 24 13:55:54 2022 +0000

    Bug 28854: (follow-up) Fix typo in templates and test plan
    
    * aready > already
    * 61 > 62
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b8e9abedaaaea48337f56377b119010314fec961
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jun 20 11:44:07 2022 +0100

    Bug 28854: (follow-up) Move preferences to "Item bundles"
    
    Move the preferences into a section under 'Circulation' called 'Item
    bundles'
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 94ce429b8825a46b8d7c36e06c82eb8f82c80b6f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jun 20 11:30:38 2022 +0100

    Bug 28854: (follow-up) Rename column configuration to barcode
    
    This patch updates the column configuration from 'external_id' to
    'barcode'
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9437db7979ae7e08ce290f220f8c33e8ad6cdf5e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jun 20 11:14:53 2022 +0100

    Bug 28854: (follow-up) Translations fixes
    
    This patch wraps and unwraps strings appropriately for trasnlation.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5b4e36b39af67be36cdb5a7447749ead45dbe3c5
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jun 20 10:18:08 2022 +0100

    Bug 28854: Add default AV and Syspref values
    
    This patch adds the new AV and System Preferences to the installer.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2758b572ee490731925a2ca4b0becc795bae76f9
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jun 20 10:06:37 2022 +0100

    Bug 28854: Unit tests - chargelostitem
    
    This patch adds unit tests for the changes to chargelositem to ensure
    bundle charging works as expected setting the correct issue_id.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 266bbe1234ec5f85f5b19e9b231a5961fcea8b8b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jun 17 15:01:04 2022 +0100

    Bug 28854: Unit test for AddReturn addition
    
    This patch adds tests for the AddReturn change that adds an 'InBundle' message
    to the return.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 140dafd3f70bba0f2b36c64d49c983925b886b4a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jun 17 13:08:46 2022 +0100

    Bug 28854: Unit test for Koha::Item additions
    
    This patch adds unit tests for the new methods added to Koha::Item
    including:
    
    * return_claim
    * return_claims
    * is_bundle
    * in_bundle
    * bundle_host
    * bundle_items
    * add_to_bundle
    * remove_from_bundle
    
    Test plan
    1) Run t/db_dependent/Koha/Item.t
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fd7e41718985ef0d49cd0d18472627a0dfe054cf
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jun 17 12:24:09 2022 +0100

    Bug 28854: (follow-up) Use Koha::Item->itemtype introduced with bug 20469
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cc23b3b91813f7ca0b1c15e470e8884c6e6a20aa
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jun 17 09:28:27 2022 +0000

    Bug 28854: (QA follow-up) Fix QA tool complaints
    
    * Typo in code comment
    * Permissions on atomicupdate
    * Missing TT filter in template
    * Spelling in template
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dd858180dbd3e8d2d949ba00366b97193f237278
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Dec 15 11:15:42 2021 +0000

    Bug 28854: Make barcode comparison case insensative
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6c816a356a8b4f9df6833470723b05c9d4bc846b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Dec 14 16:47:54 2021 +0000

    Bug 28854: (follow-up) Only count rows in the body
    
    This patch fixes the count to only include table rows in the body, i.e.
    skip the header row.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b4f239adc6d19b9d354d06c05600d61149b56158
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 30 14:34:48 2021 +0000

    Bug 28854: Add modal after checkin to print missing items list
    
    This patch adds a further modal to the post checkin alert to allow the
    user to print a view and print a list of items that went missing at this
    checkin to allow for replacements to be picked.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8a69d1811344a73b7bb6afde2df88b87b195794e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 30 09:35:46 2021 +0000

    Bug 28854: Add 'Remove from bundle' dialogue to details display
    
    This patch adds the counterpart of the 'Add to bundle' modal prompt for
    adding items to bundles from the catalogue details display.  It allows
    for scanning barcodes to remove them from a bundle.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1812d03e550e119fa02258e532f33098c583aff9
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 26 10:21:08 2021 +0000

    Bug 28854: Add count of scanned items to verification modal
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 830a26e29436470f3acd7fb87a7926cf9e5b54af
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Nov 25 17:54:08 2021 +0000

    Bug 28854: Highlight when a scanned item is unexpected
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 66b35f505b2b5c02ebf76b820742caacb0c2ed9e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Nov 25 14:28:03 2021 +0000

    Bug 28854: Enable claims return view when BundleLostValue is set
    
    This patch adds the alternation of BundleLostValue to enable the return
    claims functionality when Bundles are enbled.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c66032ba2c54ef0844df17910cc29998dd6595fe
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Nov 25 12:10:57 2021 +0000

    Bug 28854: Improve lost details display for bundle items
    
    This patch adds the return claim details to the bundle item status
    display on the catalogue details page.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a6dbcf995f8f57cc16ba5009be7023c3485e6a9d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Nov 24 10:16:53 2021 +0000

    Bug 28854: Add ordering to checkin validation modal
    
    This enhancement adds simple dataTable ordering to the verification
    modal table at bundle checkin time.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 34c0fbe755d61ef7ae2498303cd017109d5a2856
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 19 15:11:26 2021 +0000

    Bug 28854: Add option to print content list after verification
    
    We already allowed the user to view and print an updated content list
    after a varification showed that items were missing from the bundle.
    This patch adds the option to view and print the list even if the
    content has been varified to have not changed.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 21b1eab2887ee22380fe53de5a162a65511baf21
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Nov 18 15:17:03 2021 +0000

    Bug 28854: Simplified status handling for bundle inventory check
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3770ebc0e92c664c64042f71c8283f48a782e8c2
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Sep 23 13:58:50 2021 +0100

    Bug 28854: Record and display who lost the item
    
    This patch records the bundle issue from which an item is marked as lost
    so that we may use that to infer who lost the item (for later charges
    and display).
    
    Test plan
    0) Apply all patches up to this point
    1) Checkout a bundle to a user
    2) Checkin the bundle and do not scan one of the barcodes at
       confirmation
       * Note that the item not scanned is marked as lost
    3) Navigate to the biblio for the lost item and note that it is marked
       as lost.
    4) Navigate to the biblio for the collection and expand the collection
       item that contains the lost item. Note the item is marked as lost and
       checkout details are listed.
    5) Checkin the lost item
       * The item should be marked as found and the return_claims line should
       be marked as resolved.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d7a339d8b7eeea9e0c3d3c3be6471db1fde23dc0
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Nov 18 15:04:38 2021 +0000

    Bug 28854: Drop unique index on issue_id in return claims
    
    With the introduction of circulating items within a bundle set, we can
    now loose multiple items from the bundle from the same issue.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d67e2e0511a79e68d88bd364ba0740aabf556d14
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Sep 30 08:44:22 2021 +0100

    Bug 28854: Highlight bundle rows to clarify UI
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d5a4d782d83a4b77b02308315946a17e02ae408d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Sep 23 11:37:52 2021 +0100

    Bug 28854: Update circulation functionality for bundles
    
    This patch updates the circulation system to account for bundle
    checkins. We add a content verification step to ensure bundle content is
    all present at checkin and we use this comparison to mark missing items
    as lost.
    
    Test plan
    0) Apply patches up to this point
    1) Checkin an item that belongs to a bundle
       * An alert should be triggered noting that the item belongs to a
         bundle
       * The option to remove the item from the bundle should be clear
       * Click remove should result in the alert dissapearing and the item
         having been removed from the bundle.
    2) Checkin an item bundle
       * A modal confirmation dialog should appear requesting each item
         barcode be scanned
       * As items are scanned they should be highlighted in yellow in the
         bundle content table
       * Upon submission;
         * The user will be alerted to any unexpected items that were
           scanned and told to put them to one side.
         * The user will be alerted that any missing items in the validation
           will have been marked as lost.
         * The bundle item will be marked as checked in.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5f614c05fd3b0691fa5aa0779dbfcb1d0d5b94ec
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Sep 23 10:01:23 2021 +0100

    Bug 28854: Expose functionality to attach items to bundles
    
    This patch adds methods the the Koha::Item object for managing item
    bundling operations and then exposes those methods via the REST API.
    
    We include the new `BundleNotLoanValue` preference for setting not
    for loan values when an item is added to a bundle.
    
    Finally, we expose bundle management via the catalogue details page.
    
    Test plan:
    0) Apply patches up to this point and run the database update
    1) Configuration: `BundleNotLoanValue` should have been set by the
       database update and point to a newly added AV value.
    2) Creating a new bundle
       * Add a new bib record
       * Mark the bib record as a 'collection' type by setting leader
         position 7 to 'c'
       * Add a new item to this bib record
       * You should see a new 'Manage bundle' button available in the
         'Actions' column of the Holdings table.
       * Clicking 'Manage bundle' should expand the table to include a new
         row directly beneath this one.
       * Use the new 'Add to bundle' button that appears in this row to
         trigger a modal that allows entering the barcode of items you wish
         to add to the bundle
       * Upon closing the modal, the bundle content table should reload and
         contain your newly associated items.
       * You can subsequently remove an item from a bundle using the new
         'Remove' button.
    3) Not for loan
       * Items that have been added into a bundle should now appear as 'Not
         for loan' from their original biblio record and note which bundle
         they belong to.
    4) Error cases
       * Try adding an item that already belongs to a bundle to another
         bundle: Note an error is displayed in the modal form.
    5) The bundles feature can be disabled by unsetting the
       `BundleNotLoanValue` system preference.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 91518ae3755783149f80ba162f7b6eca52be1ad6
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Sep 23 08:28:15 2021 +0100

    Bug 28854: Database update
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b306cb47ce4e578ceeb7364b9fef0b57767a052e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jul 12 18:52:21 2022 +0000

    Bug 31145: Supply defaults for vendors and funds
    
    This is a convenience bug - when koha testing docker creates sample vendors and budgets there are small issues:
    
    1 - The vendor website gets a random string - you can't edit the vendor without removing this
    2 - The funds have random values for statistical categories, and you get empty dropdowns when choosing a fund in ordering
    
    To test:
    1 - Apply patch
    2 - Restart all
    3 - Edit 'My vendor'
    4 - note webstie is empty and you can save without changing anythign
    5 - Add order to basket for my vendor
    6 - Confirm that when selecting a fund statistic 1 and statistic 2 remain as text input fields
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f58099a2440a8482b09ae14df89c1cd6eb43c5d6
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jul 12 11:22:36 2022 +0100

    Bug 31141: Remove 'select_column' from waiting_holds.inc
    
    In the only place we use the waiting_holds include, we were hard coded
    to always pass the 'select_column' variable as true.
    
    We can simply and clarify the logic by just removing this superflous
    variable.
    
    Test plan
    1. Confirm that the waiting holds tables continue to display as expected
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fdc933adb49256bb0b61a2189126dc4ad8c37143
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 12 09:11:12 2022 +0200

    Bug 31133: Don't generate values for more than one FK
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 56d79a483da8cac66aa22b9904fd2a64464b8eff
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 12 10:25:25 2022 +0200

    Bug 31104: Add a selenium test
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e33e0bae66bc7a10b05f9420b83098ec1ed8f6b6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 12 10:44:25 2022 -0300

    Bug 31140: (QA follow-up) Remove leftover POD
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6961cb2dcb6cfa38e8efd57fcd86071bd791f32e
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jul 12 06:12:26 2022 -0400

    Bug 31140: TestBuilder.t is failing on item groups modules
    
    Test Plan:
    1) prove t/db_dependent/TestBuilder.t
    2) Note failures
    3) Apply this patch
    4) prove t/db_dependent/TestBuilder.t
    5) Note all tests pass!
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c0803a10fd1a1b2c1164f6b8386884d75e069bfc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 12 10:42:39 2022 +0200

    Bug 21978: Fix Selenium tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 901c1a85a97e53811d89aba40b422f66df8af7eb
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 11 23:36:56 2022 -0300

    Bug 30275: (QA follow-up) Trivial fix to schema file
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 181b0c16feeb0645851aa586c59c1fd5de8e6053
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Jun 27 08:13:39 2022 -0400

    Bug 31054: Manual importing for EDIFACT invoices fails with a 500 error page
    
    Error in plack log is: Can't locate object method "new" via package
    "Koha::Plugin::Com::ByWaterSolutions::MyEdifactPlugin" (perhaps you
    forgot to load "Koha::Plugin::Com::ByWaterSolutions::MyEdifactPlugin"?)
    at /usr/share/koha/lib/Koha/EDI.pm line 219.
    
    Test Plan:
    1) Set EdifactInvoiceImport to "Don't"
    2) Configure an EDI vendor to use an EDIFACT plugin
    3) Attempt to import an invoice file
    4) You will be shown an error page
    5) Apply this patch
    6) Restart all the things!
    7) Attempt to import another invoice file
    8) It works!
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5ac0c55879254bcd7595ba1957706d899ce4e142
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jul 8 06:05:43 2022 +0000

    Bug 31116: (QA follow-up) Remove duplicate line
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 257ee57c80eb4a3dfe8bcdbb9687032199058eee
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jul 7 12:39:01 2022 +0100

    Bug 31116: Add circulation sidebar to article requests
    
    This patch adds the circulation sidebar menu to the article requests
    page to make it consistent with other circulation module pages.
    
    Test plan
    1) Prior to applying the patch confirm that there is no sidebar on the
       article requests management page, regardless of the CircSidebar
       perference.
    2) Apply the patch
    3) Confirm there is still no sidebar when CircSidebar is disabled
    4) Confirm there is now a sidebar present when CircSidebar is enabled
    5) Confirm the current page is highlighted correctly in the sidebar when
       on the article requests page.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 797ebc65e800a333b5c3432429ff128454e7efaf
Author: Andrew Nugged <nugged@gmail.com>
Date:   Fri Nov 26 13:45:37 2021 +0200

    Bug 31000: Warn removal: param record_type can be undef
    
    Uninitialized value warning on /tools/export.pl when $record_type is undef
    
    Use of uninitialized value $record_type in string eq
    at /home/vagrant/kohaclone/tools/export.pl line 43.
    
    This warning in koha-testing-docker appears in:
    /var/log/koha/kohadev/intranet-error.log
    
    This patch fixes it by working when $record_type is Undef.
    The functionality still remains the same but warning doesn't flood
    error log.
    To reproduce:
    1. Go to export data tool page (/tools/export.pl).
    2. Check the error log and find the upper mentioned warning,
    check the timestamp to ensure that it was added when you loaded the page.
    3. Apply the patch.
    4. Load the page again, ensure that the same warning doesn't get added
    to the log file again.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2f668f0b187c4a421b1ffa862e1c40553e8ab786
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jul 6 16:27:23 2022 -0300

    Bug 31104: Put each link on a separate header
    
    This patch makes the Pagination helper put each Link entry on the
    response headers on a separate header. In practice, this leads to
    shorter headers and will avoid apache default/reasonable limits.
    
    To test:
    1. Open the patron search page
    2. Open the koha logs:
       $ tail -f /var/log/koha/kohadev/*.log
    3. On the 'Search for patron' input, use a really long string, like
       'superlongstringthatistoolongforapacheyeahsuperlong'
    => SUCCESS: There's no user with an attribute with that content :-D
    => FAIL: You get an error like (28)No space left on device: [client 127.0.0.1:60330] AH10124: header size is over the limit allowed by ResponseFieldSize (8192 bytes). Bad response header: 'Link:...'
    4. Apply this patch
    5. Restart all:
       $ restart_all
    6. Repeat 2 and 3
    => SUCCESS: No results
    => SUCCESS: No error in the logs
    7. Run:
       $ kshell
      k$ prove t/Koha/REST/Plugin/Pagination.t \
               t/db_dependent/api/v1/*.t
    => SUCCESS: Tests pass!
    
    Note 1: The Link header is expected to be in CSV format, which is
    usually the way libraries treat repeated headers anyway.
    
    Note 2: Apache is not rejecting the response, just stripping out the
    'bad header'. So this is not a critical issue.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Michal Urban <michalurban177@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 743731949db14eac858c6cdced4bb471d1da879b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jul 11 15:03:44 2022 +0100

    Bug 31039: (follow-up) Wrap jQuery in $(document).ready()
    
    cashup_modal.js consists only of jQuery code, so the whole thing should
    be contained in a $(document).ready() function. This may or may not be
    contributing to the behavior this bug is trying to fix.
    
    Please note that this patch contains whitespace changes, so diff
    accordingly.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5e6f88e62fe844eab78e23945e7c06dbd65b8772
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jun 24 13:10:46 2022 +0100

    Bug 31039: Remove duplicate modal printing JS
    
    This patch removes the erroneos duplication of the modal printing js.
    
    Test plan
    1) Create some transactions and perform a cashup.
    2) Open the cashup summary modal
    3) Click 'Print'
    4) Cancel the print dialogue
    5) Note that the dialogue re-appears
    6) Apply the patch
    7) Repeat and note the dialogue closes first time now.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 86197c407dded3c673712c28e1323b4c4f332ac0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 8 19:11:23 2022 -0300

    Bug 24857: Fix missing additionalProperties in spec
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e49a23f2d53a0a4f404372c534c19a2afec9c5c3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 8 16:23:05 2022 -0300

    Bug 24857: DBRev 22.06.00.014
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 995f32f4a1fd74d8798d3942de3bf65f73483cff
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 8 16:19:35 2022 -0300

    Bug 24857: (QA follow-up) Make update idempotent
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c7ee20e7fc07ab4768fb181a45750019cfeeb0d8
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 8 16:11:11 2022 -0300

    Bug 24857: DBIC update
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 52b063d05a6fda12b120022c254fa180620b6132
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 28 17:54:48 2022 +0000

    Bug 24857: Add object classes to Schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f85bd70078343f6041b89dadf0d6ce3f76fde40b
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jun 2 16:19:26 2022 +0000

    Bug 24857: Add new Schema files
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6361638407070afbe6f2552c39d19084c738be95
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 8 12:31:12 2022 +0000

    Bug 24857: Delete item group when last item is deleted
    
    To test:
    1 - Find a record with an item gorup, or add a group
    2 - Add an item to this group, ensure it is the only item in the group
    3 - Delete the item
    4 - Confirm the gorup was also deleted
    5 - prove t/db_dependent/Koha/Biblio/ItemGroups.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f83c7f86553641063725ff0b10d1b3d29a3506a9
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 8 12:03:38 2022 +0000

    Bug 24857: Add ability to set item group when adding a new item
    
    During cataloging a user may wish to add an item to a group when
    creating a new item
    
    This patch also copies the group description to the enumchron field
    
    To test:
    1 - Browse to details page for a record
    2 - Create or ensure the record has item group(s)
    3 - Click New->New item
    4 - Note the bottom of the page has a form to attach to existing group, or create new
    5 - Note when a group is selected the enumchron field is populated
    6 - Confirm item is saved to group when saved
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b791431e8c8ff05587d7a1ea7c3ea4d751d91233
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 8 12:01:48 2022 +0000

    Bug 24857: Add item group management to detail.pl
    
    Test Plan:
    1) Apply the patches for this bug
    2) Run updatedatabase.pl
    3) Restart all the things!
    4) Enable the new syspref EnableItemGroups
    5) Browse to detail.pl for a record with items
    6) Note the new Item Groups tab
    7) Test creating, editing and deleting groups
    8) On the Holdings tab, select one or more items using the checkboxes
    8) Note new selection options for setting an item group for items,
       and for clearing an item group for items.
    9) Test adding and clearing the item group for items
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 35d5ec1a67e44b9044737e2744c2eabc37550955
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 8 12:00:23 2022 +0000

    Bug 24857: Add Object Methods
    
    To test:
    1 - prove t/db_dependent/Koha/Biblio.t
    2 - prove t/db_dependent/Koha/Item.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 95a6ee4d530d6da8048bfdfa65298148b11793ac
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 8 11:34:40 2022 +0000

    Bug 24857: API spec
    
    To test:
    1 - prove t/db_dependent/api/v1/item_groups.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1094577cff8a0f054b05717b3bc852fa3b0fbfaa
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 8 11:27:59 2022 +0000

    Bug 24857: Add Koha Objects
    
    To test:
    1 - prove t/db_dependent/Koha/Biblio/ItemGroups.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9ab9601ee99d4478dfb6a1d9a1ab7da418ed3d22
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 8 11:26:19 2022 +0000

    Bug 24857: Database updates
    
    This adds the new tables, syspref, and a new permission
    
    https://bugs.koha-community.org/show_bug.cgi?id=24860
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 04b6ed16c6c5af471c985f2b9844dc416f5a41d0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 8 15:46:08 2022 -0300

    Bug 29333: (QA follow-up) POD consistency
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 01d78e1ec71c1c227738215c5b5d4aaef847daaf
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Oct 27 12:00:23 2021 +0200

    Bug 29333: Fix encoding of imported UNIMARC authorities
    
    MARC::Record and MARC::File::* modules sometimes use the position 09 of
    the leader to detect encoding. A blank character means 'MARC-8' while an
    'a' means 'UTF-8'.
    
    In a UNIMARC authority this position is used to store the authority type
    (see https://www.transition-bibliographique.fr/wp-content/uploads/2021/02/AIntroLabel-2004.pdf [FR]).
    In this case, 'a' means 'Personal Name'.
    
    The result is that the import will succeed for a Personal Name
    authority, but it will fail for all other authority types.
    
    Steps to reproduce:
    0. Be sure to have a Koha UNIMARC instance.
    1. Download the MARCXML for "Honoré de Balzac"
       curl -o balzac.marcxml https://www.idref.fr/02670305X.xml
    2. Verify that it's encoded in UTF-8
       file balzac.marcxml
       (should output "balzac.marcxml: XML 1.0 document, UTF-8 Unicode
       text")
    3. Go to Tools » Stage MARC for import and import balzac.marcxml with
       the following settings:
       Record type: Authority
       Character encoding: UTF-8
       Format: MARCXML
       Do not touch the other settings
    4. Once imported, go to the staged MARC management tool and find your
       batch. Click on the authority title "Balzac Honoré de 1799-1850" to
       show the MARC inside a modal window. There should be no encoding
       issue.
    5. Write down the imported record id (the number in column '#') and go
       to the MARC authority editor. Replace all URL parameters by
       'breedingid=THE_ID_YOU_WROTE_DOWN'
       The URL should look like this:
       /cgi-bin/koha/authorities/authorities.pl?breedingid=198
       You should see no encoding issues. Do not save the record.
    6. Import the batch into the catalog. Verify that the authority record
       has no encoding issue.
    7. Now download the MARCXML for "Athènes (Grèce)"
       curl -o athènes.marcxml https://www.idref.fr/027290530.xml
    8. Repeat steps 2 to 6 using athènes.marcxml file. At steps 4 and 5 you
       should see encoding issues and that the position 9 of the leader was
       rewritten from 'c' to 'a'. Strangely, importing this batch fix the
       encoding issue, but we still lose the information in position 09 of
       the leader
    
    This patch makes use of the MARCXML representation of the record instead
    of the ISO2709 representation, because, unlike
    MARC::Record::new_from_usmarc, MARC::Record::new_from_xml allows us to
    pass directly the encoding and the format, which prevents data to be
    double encoded when position 09 of the leader is different that 'a'
    
    Test plan:
    - Follow the "steps to reproduce" above and verify that you have no
      encoding issues.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7ffc698c9b7b441b0493f40b856aba0a2ac997d3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 13 14:46:08 2021 +0200

    Bug 28739: Execute the letter processing inside a transaction
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3a154af7f10d5708733ab635533c2ef6a0e48ba5
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jul 23 08:07:59 2021 -0400

    Bug 19966: Add ability to pass objects directly to slips and notices
    
    Koha spends an incredible amount of time on parsing and processing parameters
    passed in to slips and notices. It would be immensely more efficient to be able
    to pass objects directly to GetPreparedLetter so it doesn't need to do any
    fetching / processing on them.
    
    Test plan:
    1) Apply this patch
    2) prove t/db_dependent/Letters/TemplateToolkit.t
    
    Signed-off-by: Josef Moravec <josef.moravec@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e3311ebffc2b2965239674501cf56818c9e90cec
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 11 16:21:48 2022 +0100

    Bug 29051: Update svc api to allow seen renewals
    
    This patch updates the svc/renew api endpoint to allow seen renewals
    when appropriate
    
    Signed-off-by: Caroline <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 91a67e3c8acd4d0cad73e01b10569c712b6b4c01
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 11 16:13:23 2022 +0100

    Bug 29051: Enable seen renewal in the staff client
    
    This patch updates the javascript for the checkouts table to add the
    checkbox back in for the case where too_unseen is the error returned by
    CanBookBeRenewed, allowing such issues to be renewed.
    
    Signed-off-by: Caroline <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 91f50ee70fc645328d0c6dfda86c8886af49cd02
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jul 8 13:03:01 2022 +0000

    Bug 30911: Datatables error on course-details.pl after adding a bib-level course reserve
    
    This patch removes the colspan from biblio-level course reserves rows in
    favor of adding a style to the message's container allowing it to
    overflow across table cells.
    
    To test, apply the patch and go to course reserves.
    
    1. If necessary, add a new course.
    2. View the details of the course and add a reserve using the
       biblionumber option to add the reserve at the bibliographic level.
    3. Add a notes if you want, then click "Save."
    4. Return to the course detail view.
    5. In the table of reserves your biblio-level reserve should have a
       message starting in the "Barcode" column and overflowing across other
       item information columns, "Item information is not available for
       record-level course reserve."
    6. Try adding multiple item-level and biblio-level reserves to the same
       course to confirm that the information displays well in those cases.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 69513449dbfd08f53d6c1b78792c87478481437c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 6 16:23:25 2022 +0200

    Bug 29951: Fix EXPORT for C4::ClassS*Routine modules
    
    Can't locate object method "subclasses" via package "C4::ClassSplitRoutine" at /kohadevbox/koha/C4/ClassSplitRoutine.pm line 53
    
    Certainly from bug 17600.
    
    Test plan:
    Home -> Administration -> Classification sources -> New splitting rule
    
    And create classification sources and filing rules.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c483afa2d0ed1b70e31abbec6d57f7b5bae93a58
Author: Florian Bontemps <florian.bontemps@biblibre.com>
Date:   Thu Jul 7 15:24:10 2022 +0000

    Bug 31117: New message for cloning standard rules
    
    This commit adds a different message when cloning circulation and fine rules if you use the Standard rules for all libraries option.
    
    Test plan :
    1. Go to the Circulation and fine rules page in the Admin tab.
    2. Check that the 'Select a library' menu is on 'Standard rules for all libraries'.
    3. Check that you also have some random rules to clone, or create some.
    4. Clone these rules to the library of your choice.
    5. Confirm that the message 'Clone circulation and fine rules from "" to (library of your choice)' appears.
    6. Now clone rules from a specific library to another one, and repeat steps 3-4.
    7. Confirm that this time, the message will displays both libraries properly.
    8. Apply patch.
    9. Repeat steps 2 to 4 and 6 to 7. Confirm that this time, the message in the first case will be 'Cloning circulation and fine rules to "(library of your choice)"'.
    10. Kindly sign off.
    
    Signed-off-by: Emmanuel Bétemps <e.betemps@gmail.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 21cf6228bed1956ea975c9ba7bb984c58607ecc7
Author: Karen Turner <karen@catalyst.net.nz>
Date:   Thu Jul 7 23:37:34 2022 +0000

    Bug: 27996: Updates the Circulation report overdues page to display date in red.
    
    Test:
    1. Login to the staff interface
    2. First you need to create an overdue item.
      a. Find the barcode for an item
      b. Goto My checkouts from the drop down by your login
      c. Enter the barcode and use checkout settings to select a date in the
      past.
    2. Go to Tools
    3. Go to Circulation
    4. Go to Go to Overdues
    5. In the table the due date is in black
    6. Apply the patch
    7. Refresh the page and the due date should be in red.
    
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cb35d1e92c1237b2e58f840288e8f1a3ddc35e54
Author: Logan Symons <logansymons@catalyst.net.nz>
Date:   Thu Jul 7 22:58:40 2022 +0000

    Bug 30767: Changes word "issue" to "item"
    
    Please test and confirm terminology is now correct.
    Was unable to test without steps to reproduce.
    
    Sponsored-by: Catalyst IT
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2702fc533f3f7ee55be4decbdf5c11beb1a6823a
Author: Danyon Sewell <danyonsewell@catalyst.net.nz>
Date:   Thu Jul 7 22:45:46 2022 +0000

    Bug 30766: extra space in Cannot cancel receipt string
    
    TEST PLAN:
    
    1. Trigger the Cannot cancel receipt error in invoices OR look at the
    amended string to see the additional space has been removed.
    
    Sponsored by Catalyst IT
    
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8a5ec1145bcb8973282ce724982cf712dce30b30
Author: Kris Wehipeihana <kriswehipeihana@catalyst.net.nz>
Date:   Thu Jul 7 22:56:40 2022 +0000

    Bug 30762: Terminology: Go to Staff client
    
    Test plan
    Login to staff interface
    Go to Administration. Search EnableExpiredPasswordReset. Enable this preference. Save.
    Find your patron record and go to details.
    In the ‘OPAC/Staff interface login’ section, set the Password expiration date to  the previous day. Save.
    Open the OPAC in a new window.
    Login to your account. It will fail. Click Reset your password.
    Follow the process to add a new password.  Click update password.
    See that it says ‘Go to staff interface’
    
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8855da2265b5674b8e5ab0d42b95db9f343f61e3
Author: Evan Giles <evan@catalyst.net.nz>
Date:   Thu Jul 7 22:19:37 2022 +0000

    Bug 30763: fixes spelling of 'proceeds'
    
    Test plan:
    1. Login to the staff interface
    2. go to tools
    3. go to label creator
    4. Click New -> Layout
    5. Click the 'Choose layout type' dropdown
    6. Notice the 'barcode proceeds biblio data' and 'biblio data proceeds
    barcode'.  These are typos
    7. Apply the patch and refresh the page
    8 repeat step 5. Confirm 'proceeds' now correctly says 'precedes'
    
    Sponsored by: Catalyst IT
    
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5a9d7be424660611fe505560637a16138d421dca
Author: David Nind <david@davidnind.com>
Date:   Fri Jul 8 05:58:07 2022 +0000

    Bug 30784: (follow-up) Additional rephrasing
    
    Add additional clarifcation, format NOTE: similar to most other
    notes in system preferences (bold, start on a new line), and link
    to other system preferences mentioned.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ff4f9a9e74e911c0f4bf9a1b41f58bb92b803810
Author: Danyon Sewell <danyonsewell@catalyst.net.nz>
Date:   Thu Jul 7 23:26:19 2022 +0000

    Bug 30784: Rephrasing OPACMandatoryHoldDates pref slightly
    
    TEST PLAN:
    
    1. On the Admin page, navigate to Koha Administration > Global System
    Preferences
    
    2. Search for OPACMandatoryHoldDates
    
    3. In the Value field, check that it now says On the "Placing a hold"
    form, instead of opac-reserve form.
    
    Sponsored by Catalyst IT
    
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5bea1583d6b39c5d1a2bc82d1bfb1b6dedaff950
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jul 8 08:31:42 2022 +0000

    Bug 30770: (QA follow-up) Fixing the last occurrence of reserve in returns.tt
    
    Reserve -> Hold
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 42a1aba19d178825aa63290198695bd7f5a7ea0b
Author: Tosca Waerea <toscawaerea@catalyst.net.nz>
Date:   Thu Jul 7 23:07:21 2022 +0000

    Bug 30770: Fixed terminology 'reserve' -> 'hold'
    
    Test plan:
    1. Look at koha-tmpl/intranet-tmpl/prog/en/modules/circ/returns.tt
    2. Note that it says 'Lost reserve'
    3. Apply patch
    4. Note that it says 'Lost hold'
    
    Note:
    I was not able to trigger the behaviour to see the text in question
    
    Sponsored-by: Catalyst IT
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b688fd97499682a77ca899011f0667c148515a04
Author: Filip Vujičić <filipvujicic@catalyst.net.nz>
Date:   Thu Jul 7 22:48:42 2022 +0000

    Bug 30764: replace "Cancelled reserve" with "Cancelled hold"
    
    Test plan:
    1. Inspect `koha-tmpl/intranet-tmpl/prog/en/modules/circ/returns.tt`, notice that on line 136 it says "Cancelled reserve"
    2. Apply patch
    3. Inspect the same line again and notice it now correctly says "Cancelled hold"
    4. ???
    5. Profit!
    
    Sponsored-by: Catalyst IT
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ec773f57197636fdea871ec9192de38adc4da390
Author: David Nind <david@davidnind.com>
Date:   Fri Jul 8 06:18:26 2022 +0000

    Bug 30773: (follow-up) Remove spaces between brackets
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0a40c7f58e0045c04672a85347bc90359cf48f53
Author: Kris Wehipeihana <kriswehipeihana@catalyst.net.nz>
Date:   Thu Jul 7 23:53:15 2022 +0000

    Bug 30773: Standardize spelling i-tive / Itiva
    
    In the Koha staff interface go to administration.
    Go to TalkingTechItivaPhoneNotification. Enable this preference. Save.
    Go to Tools > Overdue notice/status triggers
    Check that ‘Phone (i-tiva)’ is an option for notice types.
    
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f46b636d03aa6e35c97f8c00cc7d6f0c6f4dbc94
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jun 24 11:36:32 2022 +0100

    Bug 31038: Fix price formating in cashup summary
    
    This patch uses the existing format_price JS include to format prices in
    the cashup summary modal
    
    Test plan
    1) Create some transactions and a cashup
    2) View the cashup summary modal and confirm amounts are not nicely
       formatted
    3) Apply patch
    4) Confirm amounts in cashup summary modals are now nicely formatted
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4a9d5dd9a1cc34a9445221b1feb7d5f91ae2efb6
Author: David Nind <david@davidnind.com>
Date:   Fri Jul 8 11:10:34 2022 +0000

    Bug 29050: (follow-up) Replace & with and
    
    See the terminology list https://wiki.koha-community.org/wiki/Terminology
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 36357ad045116f4be63ea50eff9807f1c262aaef
Author: Nisha Dahya <nishadahya@catalyst.net.nz>
Date:   Thu Jul 7 23:31:38 2022 +0000

    Bug 29050: Added a punctuation between renewal messages
    
    Test plan:
    
    1. First step is to go to administration > then system preferences
    2. Set unseenrenewal to "allow"
    3. Go to administatrion > circulation and fines rule
    4. Set unseenrenewals count to any number
    5. Check out an item to a patron and go to the checkouts tab
    6. Renew the item
    7. Notice that the renewal messages have no seperation
    8. Apply the patch
    9. Notice there is now a "&" in the spacing between renewal messages
    
    Sponsored-by: Catalyst IT
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d614a0199b235405c2b341c1ba6ef86f2ca4b128
Author: David Nind <david@davidnind.com>
Date:   Fri Jul 8 12:25:01 2022 +0000

    Bug 31122: Terminology - Replace occurences of 'Notices & slips' with 'Notices and slips'
    
    Replace occurences of 'Notices & slips' with 'Notices and slips'
    (replacing '&' and '&amp' with 'and'), as per the terminology
    guidelines.
    
    See the terminology list:
    https://wiki.koha-community.org/wiki/Terminology
    
    Test plan:
    1. Find occurrences of 'Notices & slips':
       - git grep 'Notices &amp; slips' -- :^misc/translator/po
       - git grep 'Notices & slips'
    2. Review places in the staff interface where 'Messages & slips' is
       displayed:
       - Tools home page
       - Tools > Notices & slips: page title and breadcrumb
       - Other breadcrumbs:
         . Tools > Notices & slips > New notice > [select any module]
         . Tools > Notices & slips > [select Edit for any notice]
         . Tools > Notices & slips > [select Delete for any notice]
    3. Review other occurences:
       . The cron job description for misc/cronjobs/holds/holds_reminder.pl:
         misc/cronjobs/holds/holds_reminder.pl -man (scroll down to the
         description)
       . The TalkingTech README file:
         vi misc/cronjobs/thirdparty/TalkingTech.README
    4. Apply the patch.
    5. Re-run the grep queries from step 1 - no occurences are now found.
    6. Review places where 'Notices & slips' was found in steps 2 and 3 -
       these should all be replaced with 'Notices and slips' and should
       read correctly.
    7. Sign off!
    
    Alernative: review the diff for the patch and check that occurences of
    '&amp' and '&' are replaced with 'and' and the updated text reads
    correctly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e3faa4d66ba281125be437a971d1549ba8179ec3
Author: Florian Bontemps <florian.bontemps@biblibre.com>
Date:   Wed Jun 29 15:18:17 2022 +0000

    Bug 31067: Fixing missing permission check
    
    This patch just fixes a missing permission on the intranet main page. Currently, the Additional Content modules allows people to edit, modify or create new additional content just by checking if they have any tool permission at all, and not the right one.
    
    To test:
    1 - From the staff client, create a news article for the intranet.
    2 - Create (or use) an additional staff patron, giving them the necessary permissions to access the intranet, but no tool permission.
    3 - Using another browser (or incognito mode), log on the intranet page with your new staff account, you should be able to see the news content, but not edit or delete it. That's the expected behavior.
    4 - From your main admin account, give your test account the edit_additional_contents permission.
    5 - Your test account should now be able to edit/delete the news content. This is also expected behavior.
    6 - Using the main account again, remove this time the edit_additional_contents but add any other subtool permission (edit_calendar is a good one for instance)
    7 - Repeat step 5 and confirm that your test account can still edit or delete the news content. This shouldn't happen.
    8 - Apply patch
    9 - Repeat steps 4-6, and confirm that your test account can now only edit or delete news content if they have the edit_additional_contents permission enabled.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8a78666fd0dfeb946082e8e81c08bed2dc2c7d90
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jun 28 10:06:57 2022 +0000

    Bug 30769: Typo fix in request.tt
    
    This patch fixes a small typo at
    koha-tmpl/intranet-tmpl/prog/en/modules/reserve/request.tt:574
    
    To test:
    1 - Set item-level_itypes in administrative preferences to
        bibliographic record
    2 - Navigate to /reserve/request.pl in admin interface
    3 - Notice that the typo is there in hold details
    4 - Apply Patch
    5 - Typo is fixed
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 096fd4acfa360e450e9d6a1a37a96f7eb8d848c8
Author: Petro Vashchuk <stalkernoid@gmail.com>
Date:   Tue Jun 21 16:02:51 2022 +0300

    Bug 31001: Fix "CGI::param called in list context" warning in basket.pl
    
    CGI param basketno should be explicitly scalar,
    or else error log gets flooded with this warning:
    
    AH01215: CGI::param called in list context from
    /home/vagrant/kohaclone/acqui/basket.pl line 175, this can lead to
    vulnerabilities. See the warning in "Fetching the value or values of a
    single named parameter" at /usr/share/perl5/CGI.pm line 412.
    
    This patch fixes it by working with it in a scalar context.
    The functionality still remains the same but warning doesn't flood
    error log.
    
    To reproduce:
    1. Head over to the acquisitions page.
    2. Pick existing vendor with email contact info or create a new one.
    3. Create a new basket or use existing one, and if it doesn't have
    any orders, add a new order to it.
    4. Use the "E-mail order" button to send order.
    5. Check the error log and find the upper mentioned warning.
    (Note: if you're going to test this more than once, you might need
    to restart your Plack in order for this warning to get added to your
    log file again, reasons of that is that the authors of CGI.pm decided
    to "warn only once")
    6. Apply the patch.
    7. Use the "E-mail order" button again, ensure that the same warning
    doesn't get added to the log file again.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6c55159eb6a91891f7c1becd49ec927ee9a3a36a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 16 12:33:31 2022 +0200

    Bug 30976: Display biblio's cover images first
    
    If one add cover images at item's level, then biblio level, the cover images
    of the items are displayed first on the main "cover slider" at the top of the page.
    We should displayed biblio cover images first, then the ones for the items.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c698b3be5a4777b75c502eca6ee18b80110872c0
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Mon Jun 20 11:23:32 2022 -1000

    Bug 30903: (follow-up) Fix error message class
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f36dbf09f635e42066d43799a79e634c15465a0e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jun 7 15:57:35 2022 +0200

    Bug 30903: Fix UI glitch on the quotes upload view
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4e75a3a1ee34849384b28c236ca97f7d180591d4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jun 7 15:56:59 2022 +0200

    Bug 30903: Fix POST /quote
    
    quote_id should not be required
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8884068904b77ecb8dff7875a056129443b08e6b
Author: Mason James <mtj@kohaaloha.com>
Date:   Wed Jul 6 22:54:55 2022 +1200

    Bug 31108: rename ./t/00-check-atomic-updates.pl extension to *.t
    
    to test...
    
    1/ run prove, test is not run :(
     prove ./t | grep 00-check-atomic-updates.pl | wc -l
     0
    
    2/ apply patch
    
    3/ run prove, test is run :)
     prove ./t | grep 00-check-atomic-updates.t | wc -l
     2
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b4eaac91c91b5ceb19fb31d65043e63b8447b644
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jul 6 16:03:30 2022 +0100

    Bug 30275: (QA follow-up) Fix TestBuilder.t
    
    This patch adds 'CheckoutRenewal.checkout_id' to the list of non-foreign
    key relations found in _should_be_fk.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8052ee34a99a0bf8ecb031facd9389807fd9ee4b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 6 11:30:13 2022 +0200

    Bug 23991: Don't display empty div if no suggestions exist
    
    If no suggestions exist we should not display an empty tab div
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 37c80e1686fcc9a37cd10b4eaa1fcdfef770689a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jul 5 14:45:47 2022 -0300

    Bug 24010: DBIC update
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a79500c5c5d357756602d6b055c6c497e75d7995
Author: Marion Durand <marion.durand@biblibre.com>
Date:   Mon Dec 20 11:07:47 2021 +0000

    Bug 21903: (follow-up) update documentation
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c91fdece15f535a277891aa7695ffed2d74f09a9
Author: Marion Durand <marion.durand@biblibre.com>
Date:   Thu Oct 21 08:00:21 2021 +0000

    Bug 21903: (follow-up) koha-dump can export uploaded and temporary uploaded files
    
    Minor improvment on display.
    Solve the error message if the folder for uploaded temp files
    doesn't exist.
    
    Sponsored-by: Orex
    
    Test plan:
    - Apply the patch
    - Try using koha-dump without any option
    - Try using koha-dump with --uploaded_files
    - Try using koha-dump with --uploaded_temp_files
    - Try using koha-dump with both of the options above
    
    Expected results: the .tar.gz dump will include uploaded and/or temporary
    uploaded files if requested.
    Change message and solve the error message if no temporary folder
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4314700607268a3b5e95be1e0bf01965f3f5d95e
Author: Matthias Meusburger <matthias.meusburger@biblibre.com>
Date:   Wed Apr 10 11:38:45 2019 +0200

    Bug 21903: koha-dump can export uploaded and temporary uploaded files
    
    Sponsored-by: Orex
    
    Test plan:
     - Apply the patch
     - Try using koha-dump without any option
     - Try using koha-dump with --uploaded_files
     - Try using koha-dump with --uploaded_temp_files
     - Try using koha-dump with both of the options above
    
    Expected results: the .tar.gz dump will include uploaded and/or temporary
    uploaded files if requested.
    
    Signed-off-by: Hugo Agud <hagud@orex.es>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 988abb6647cd26c0748a94a004149a52a7938efa
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jul 5 11:41:34 2022 -0300

    Bug 24865: DBRev 22.06.00.013
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e579f5019a7d4b171c3cdfa5a07441ff34072dd7
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Apr 19 11:48:14 2022 +0000

    Bug 24865: (QA follow-up) Remove hardcoded notice name from protected_letters
    
    If the letter has been removed, fall back to itemnumber/due date. (Title is
    no longer fetched.) We may assume that the notice is present.
    
    Note: The option to 'protect' a notice may need some more thought. Perhaps
    it needs to be an attribute on itself.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Tested by deleting notice, running fines again.
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 10fa2db886c75deffbb2f509624faa656bee161b
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Feb 17 09:23:28 2022 -0500

    Bug 24865: Customize the Accountlines Description
    
    It would be great if we could customize what information was added to the "Description of charges" field when a fine was made so data could be stored even when the item is deleted.
    
    Test Plan:
    1) Create an overdue checkout that will get a fine
    2) Run fines.pl
    3) Note the description for the fine
    4) Delete the fine from the database
    5) Apply this patch
    6) Run updatedatabase.pl
    7) Restart all the things!
    8) Run fines.pl
    9) Note the description of the fine is unchanged
    10) Delete the fine again
    11) Browse to Slips & Notices
    12) Edit the new notice OVERDUE_FINE_DESC
        You will have access to the objects checkout, item, and borrower
    13) Run fines.pl
    14) Note your new description was used
    
    Signed-off-by: Christopher Brannon <cbrannon@cdalibrary.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ae9c951160e3082660845ee124004f30d2854ca4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jul 5 11:11:54 2022 -0300

    Bug 24010: DBRev 22.06.00.012
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 29a9d790e811c2a3139abf75a2f8f05901973c81
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jul 5 11:08:16 2022 -0300

    Bug 24010: (QA follow-up) Correct COMMENT syntax
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a7eee1027993efa7d34181a77e70ac5d9f129379
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 22 12:33:41 2019 +0100

    Bug 24010: DB Changes
    
    Amended-patch: adjusted to new atomic update format
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 57221e083bb329f3c428fd20e7e7f65a6ab10186
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri May 13 15:14:26 2022 +0000

    Bug 24010: Number of issues to display to staff accepts non-integer values
    
    This patch modifies the subscription entry form so that it will perform
    a check on the staffdisplaycount and opacdisplaycount fields before
    proceding to the second step. It verifies that the values are numeric.
    
    The changes are made in the style of the existing form validation, which
    should be rewritten to either use the validation plugin or to peform
    checks in a way that all checks are run before warning the user.
    However, this smaller change will work in the meantime.
    
    To test, apply the patch and go to Serials -> New subscription.
    
    - Fill out the form with at least the required fields, but put something
      other than a number if the "Number of issues to display to staff" and
      "Number of issues to display to the public" with non-numeric characters.
    - When you click the "Next" button you should get an error message,
      "Number of issues to display to staff must be a number."
    - Correct the issues to display to staff field and submit again.
    - You should get a different error message, "Number of issues to display
      to the public must be a number."
    - Correct this field and you should be able to proceed to the next step.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b48ac1ef741d8e1c02290dd9d2809713f3bba23b
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri May 6 21:50:05 2022 +0000

    Bug 30716: Add collection to cn_browser results
    
    To test:
    1. Go to MARC bibliographic framework, pick a framework and go to 952, subfield "o". Turn the cn_browser plugin on.
    2. Pick or create an item in that framework, edit that item.
    3. TO the right of the 952$o notice the "...". Click that start the call number browser.
    4. Notice there is no column for collection.
    5. Apply patch, restart_all
    6. Notice there is now a column for with the items collection.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c54e1de8b2beec131f51fdfe866fd27ee8bc0759
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Jun 6 21:34:26 2022 +0000

    Bug 30567: Fix price formatting when adding a manual invoice with CurrencyFormat FR
    
    In input fields we always use the decimal . while the display format
    uses the decimal separtor definded by CurrencyFormat. When adding a
    manual invoice without this patch, the amount is shown with comma, but
    it should be . in the input field.
    
    To test:
    1- Go in Administration->Debit types
    2- Click on New debit type
    3- Fill the form:
       Code: USEDBOOK
       Default amount: 0.50
       Description: Used book
       Can be manually invoiced: Yes
    4- Save
    5- Go to any patron account
    6- Go to the "Accounting" tab
    7- Click on "Create manual invoice"
    8- Fill the form
    9- Choose the created debit (Used book)
    10- Verify that the format is incorrect (0,50 instead of 0.50)
    11- Apply the patch
    12- Verify the amount is now using the correct format
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3bd3ec4805047412f25a93712dd06ea2de70608b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Apr 19 15:31:41 2022 +0000

    Bug 30566: Incorporate link handling in OPAC's biblio-title include
    
    This patch modifies the biblio-title include so that it can be used to
    link to the bibliographic record using the default biblio view.
    
    On pages where the biblio-title include was wrapped in an anchor tag, a
    link parameter is added: [% INCLUDE 'biblio-title.inc' link=> 1 %]
    
    To test, apply the patch and view the following pages in the OPAC to
    confirm that titles are displayed correctly and that the link to the
    bibliographic record is correct:
    
    - Log in to the OPAC: On the "your summary" page, check checkouts,
      overdues, holds, and article requests.
    - Check the "your holds history" page.
    - Locate a bibliographic record and click "Save to your lists."
      In the popup, the title should be displayed correctly without a link.
    - Place a hold, and check the hold confirmation page.
    - Check the "Recent comments" page.
    - Locate a record which has a local cover image attached, and view the
      image.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 21a37a19e0d5bff051d529272c64673b759a43b4
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Jun 17 22:20:08 2022 +0200

    Bug 30990: Fix DefaultHoldPickupLocation system preference description
    
    Changes:
    * branch to library
    * staff client to staff interface
    * adds an ending .
    
    To test:
    - Compare system preference descrpition before and after the
      patch was applied.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fa6fd10f9678ceeec2b9cfa2b71079fe7696c2db
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jul 5 09:53:29 2022 -0300

    Bug 30275: (follow-up) Fix tests count
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b4a9d0323ee5dfa49c35597c3d989ba410566511
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jul 5 09:50:05 2022 -0300

    Bug 30275: DBRev 22.06.00.011
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5e8cd1c578f67c31b6fb7a318b833aa891994440
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 28 13:13:24 2022 +0100

    Bug 30275: Unit Tests for Checkouts::Renewal
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4e6a569c9cd02c93d7dc3419babe0a813dc6989d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 28 11:55:32 2022 +0100

    Bug 30275: Add Unit test for renewals relation
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 41a75bc76c837032927fe48d4a6870a80aa0e59a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 28 11:35:54 2022 +0100

    Bug 30275: Add unit tests for AddRenewal addition
    
    This patch adds a test for the AddRenewal addition that creates Renewal
    lines.
    
    Test plan
    1) Run the unit tests and confirm it passes
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f8c91602847cefc1ccc7d031bd71dc567fd13b03
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 28 09:28:50 2022 +0100

    Bug 30275: (follow-up) Drop renewer_id constraint
    
    This patch fixes some unit tests by ensureing we set a valid userid for
    mock userenv setting so that the foreign key constraint doesn't fail and
    it also removes the exception class and check for renewer_id from the
    store method as, for example with autorenewals, the renewal may not have
    been triggered by a actual user.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 61e41c4c41a89a6b196edeeacff0f25a8a97ff15
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Apr 27 17:07:01 2022 -0300

    Bug 30275: (QA follow-up) Rename columns to match API
    
    This patch performs the following column renames:
    
    * id => renewal_id
    * issue_id => checkout_id
    
    The idea is that no translation is needed for the API, and also, being a
    new table, we can educate the users into the 'to be' terminology we are
    leaning towards, instead of having them learn one naming to create
    reports and then need to translate them once we normalize things in a
    future.
    
    That said, this is simple to review.
    
    Apply this patch and repeat the test plan.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cefbaca5914f4e8a4366b29376af9a7b98583afd
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 26 15:56:45 2022 +0100

    Bug 30275: Add renewals relation to Koha::Old::Checkout
    
    Add the new 'renewals' relation to Koha::Old::Checkout to return a
    list of Koha::Checkouts::Renewal objects.
    
    We also add the same relation to the OldIssue schema inline.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 557dfa9eae15143f6a08b1e95bbd61b27b06aa52
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 26 15:33:53 2022 +0100

    Bug 30275: (follow-up) Rebase fixes
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 76a3127237fa1f5dde604fc0c15c6f5d5f751e19
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 18 14:10:44 2022 +0000

    Bug 30275: Add basic unit test for fetching renewals
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 27622d05b6e5d93c8f14f9ecf9ea115c889c0e6f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 18 13:57:32 2022 +0000

    Bug 30275: Fix checkouts.t unit test
    
    We no longer require a mocked userenv for these tests to pass, we're
    setting the userenv in api auth now. The mock just serves to break tests
    for the renew method now that AddRenewal required a correctly set
    userenv for 'number'.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 14a8e322e6e9e5ebe61756830dec6efe9f10db15
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 11 16:17:16 2022 +0000

    Bug 30275: Add alias to create renewal in api routes
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5fab94ffa03ed34829e672256faeca7842a508b6
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 11 14:05:25 2022 +0000

    Bug 30275: Add `/api/v1/checkouts/{checkout_id}/renewals`
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4de4cc92637bc9ee1b67187662c3a7b887c6e291
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 11 15:39:43 2022 +0000

    Bug 30275: Add renewals relation to Koha::Checkout
    
    Add the new 'renewals' relation to Koha::Checkout to return a list of
    Koha::Checkouts::Renewal objects.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0d1f8f09636bc117bd5b77d99db2546dfa16ddaf
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 11 14:05:48 2022 +0000

    Bug 30275: Add 'renewals' relation to Issue Schema
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8a8d5ce5824b7039444d357b614c76969f909868
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 11 15:22:01 2022 +0000

    Bug 30275: renewals_count DBIC Update
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2d64b3ce8ae9370bdafabf81378dc74be510571c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 11 15:04:06 2022 +0000

    Bug 30275: Rename issues.renewals to issues.renewals_count
    
    Rename the issues.renewals field to renewals_count to prevent a method
    name collision with the new relation accessor introduced by this
    patchset.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dd0bc7f0c110302c0a82728630ccea2865d87e31
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 11 13:32:20 2022 +0000

    Bug 30275: Add Koha::Objects for Renewals
    
    Add Koha::Checkouts::Renewals|Renewal classes
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d7dac21ad83b0cf0a679559646c373c22705590f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 11 13:31:53 2022 +0000

    Bug 30275: DBIC Schema Additions
    
    Add checkout and old_checkout relations to CheckoutRenewal schema and
    mark 'seen' as a boolean.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit abaa61ab610934c66e2f33637349d9ea2ede65d7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 11 16:02:47 2022 +0000

    Bug 30275: Record renewals
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d8381aff7c1246a942a7ff890dda93cd655ac7e6
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 11 13:07:59 2022 +0000

    Bug 30275: DBIC Schema Changes
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7dd67c9c99572e0bd71e6f4461bb1958fdae54f1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 11 13:04:24 2022 +0000

    Bug 30275: Generated kohastructure.sql
    
    This kohastructure update was generated using `koha-dump --schema-only`
    in koha-testing-docker once the atomicupdate had been run against the
    previous atomicupdate patch.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 96aaf9a82f84f2153acd9391b643f5b975073fbf
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 11 15:05:23 2022 +0000

    Bug 30275: Add checkout_renewals table
    
    This patch adds the new checkout_renewals table using an atomicupdate
    
    Sponsored-by: Loughborough University
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 574bc6c5d3aee493cfe1e23eb0cacf40b083e8d8
Author: Isobel Graham <isobel.graham09@gmail.com>
Date:   Thu Jun 30 17:16:08 2022 +0100

    Bug 30785: Fixed typo in SIP2SortBinMapping
    
    To test:
    1. Go to the admin page.
    2. Search for the above preference.
    3. Confirm that "Will" is now spelled correctly.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 30062ccc202f78b55bbcf32328d36e96b4325be2
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jul 2 21:59:14 2022 +0000

    Bug 26311: (QA follow-up) Update script documentation
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 50810e233d09bd9272ed74fb5eb70a7e404ec999
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Mon Jun 27 20:08:33 2022 -1000

    Bug 26311: (follow-up) Fix undefined values in sprintf
    
    Avoid warns 'Use of uninitialized value in sprintf' by using
    '0' if lower age is undefined
    'unlimited' if upper are is undefined
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 03b32e7a274af581d8ef264a01686abcf1027232
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Sep 30 11:51:22 2020 +0200

    Bug 26311: (follow-up) loop through the patron with date of birth and in categories having age limits
    
    Also added category limits in message, for example (12-18)
    
    Check patron :
    - with no date of birth
    - with invalid age in category having age required
    - with invalid age in category having upper age limit
    - with invalid age in category having age required and upper age limit
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0151d5cd1f7cc92d75187be40cca339143a55431
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Sep 14 07:07:01 2020 +0000

    Bug 26311: (QA follow-up) Rephrase output message
    
    This is a suggestion for rephrasing the message slightly:
    
    Before:
    * Patron borrowernumber=15 in category 'J' has invalid age '56'
    
    After:
    * Patron borrowernumber=37 has an invalid age of 37 for their category 'K'
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cbdc4247496fb6c35496f6088611894fd3f9c0d3
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Aug 27 17:21:14 2020 +0200

    Bug 26311: Add patron invalid age to search_for_data_inconsistencies.pl
    
    Patron categories may have age limits.
    Add to script misc/maintenance/search_for_data_inconsistencies.pl the list of patrons which age is invalid regarding there category.
    
    Test plan :
    1) Create an adult patron category limited to 18-99 years
    2) Create a patron in the category
    3) Edit in database its date of birth so that he is 17 years old
    4) Run misc/maintenance/search_for_data_inconsistencies.pl
    => You see the patron
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8f1f1cfd5054211df2aebf3073333133b410d929
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jun 24 11:44:09 2022 +0000

    Bug 31040: jsTree image being used outside of jsTree plugin
    
    This patch corrects OPAC templates which tried to use a jsTree image
    asset which is missing following the jsTree upgrade (see Bug 11873).
    Templates should use /images/spinner-small.gif instead.
    
    To test, apply the patch and enable OpenLibrarySearch and populate
    OverDrive and RecordedBooks preferences with credentials (they don't
    have to be valid).
    
    Perform a catalog search in the OPAC. When the search results page first
    loads you should see messages about the services being queried:
    
    Searching OpenLibrary...
    Searching RecordedBoks...
    Searching OverDrive...
    
    Each should show a working "spinner" image while the queries are being
    performed. If you have valid OverDrive credentials you can try clicking
    through to the OverDrive search results page to confirm that the image
    is working on that page too.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e764e82dfc73da5d77199f71dd2d51d201b0a2eb
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jun 29 11:23:22 2022 +0000

    Bug 31066: Update javascript to use 'text_plugin' type for regex option
    
    To test:
     1 - Confirm 952$o is not linked to a plugin in the default marc framework
     2 - Send some tiems to batch modification
     3 - Confirm you can select RegEx as an option for callnumber during modification
     4 - Link 952$o to the cn_browser.pl plugin
     5 - Repeat batch modification
     6 - Note there is no regex option
     7 - Apply patch
     8 - Confirm there is a regex option
     9 - Unlink 952$o from plugin
    10 - Confirm you still have a regex option in batch modification
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1f5fbcf73626139bcc01aca73b912fa29ff51f7d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jun 24 15:39:07 2022 +0100

    Bug 29958: Do not set dateaccessioned on updates
    
    This patch reomves the second occurence of setting daeaccessioned today,
    outside of the 'add/update' handling in Koha::Item->store.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3684a53dc328047f5f608d4b3d6b37abcbf30400
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jul 5 09:14:16 2022 -0300

    Bug 29958: Regression tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ffd3b4b7e391d40c476772bd16530572431d2896
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri May 29 16:10:58 2020 +0200

    Bug 25622: Use special chars in DB password (koha-create)
    
    On bug 23250 we decided to generate a password without special chars
    then add a '@' at the end to comply with MySQL policy.
    That is wrong, we should handle correctly the special chars we don't
    want to be part of the password.
    
    Test plan:
    1.
    mysqlpwd=$(pwgen -s -y -r ":'&\\<>/" 16 1)
    echo $mysqlpwd
    
    Confirm that you don't see one of the following chars : ' & \ < > /
    
    2.
    Copy from src and edit /usr/sbin/koha-create to add an echo $mysqlpwd
    Create several instances, like:
    koha-create --create-db x
    koha-create --create-db xx
    koha-create --create-db xxx
    ...
    
    When you see a password with a special chars, do:
    koha-shell xxx
    grep '<pass>' $KOHA_CONF
    And make sure the password does not contain "__DB_PASS__"
    
    Signed-off-by: Bernardo Gonzalez Kriegel <bgkriegel@gmail.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3ed649a0e09d4ab96ed117ec2dc2446c9da71d34
Author: Kevin Carnes <kevin.carnes@ub.lu.se>
Date:   Tue Feb 22 14:29:15 2022 +0100

    Bug 30152: Elasticsearch - queries with OR don't work with limits
    
    When a query with "OR" is combined with a limit in Elasticsearch, the precedence is not preserved and the results are not correct.
    
    To test:
    1) Set SearchEngine to Elasticsearch
    2) Index records in Elasticsearch
    3) Do an advanced search
    4) Select More options
    5) Enter a value for the first Keyword (e.g. Novels)
    6) Change "and" before the second Keyword to "or"
    7) Enter another value for the second Keyword (e.g. Prose)
    8) Limit the search (e.g. Item type Books)
    9) Do the search
    10) Observe that records with the first keyword are not in the results
    11) Apply the patch
    12) Repeat the search
    13) Observe that results with both keywords are in the results
    14) Sign off
    
    Sponsored-by: Lund University Library
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>

commit c925b3ff85be00f48c33ad13b20caaad616b251d
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Jun 29 18:40:35 2022 -1000

    Bug 30430: (QA follow-up) Several fixes
    
    Several fixes :
    
    - Replace tab with spaces
    
    tag_210 :
    - Class 'value' and not 'valeur'
    - Loop on subfields must restrict to abcdg otherwise last() may not be
      correct (ie 214r and 214s)
    
    tag_214 :
    - Condition for coma after b should be same as after a : "position() != last()"
    
    tag_210 and tag_214 :
    - Space before ':' like in other fields
    - ':' before c or g does not exist in opac, removed from intranet file
    - Search links in intranet fixed (where composed with opac-search ^^)
    - Search links using 'str:encode-uri' like other places
    - Simplify title attribute with only 'Search for publisher' => Bad idea
      to use double quotes in a text
    
    tag_214_s and tag_214_r :
    - Loop on field+subfield otherwise last() may not be correct
    
    I've fixed intranet and copied to OPAC (only adapted search links)
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>

commit 81dc7a1845e37f473bc9b6b581917d9fd7d3c278
Author: Arthur Suzuki <arthur.suzuki@biblibre.com>
Date:   Thu May 5 17:29:51 2022 +0200

    Bug 30430: (QA follow-up) fix display of 210 only if no 214 + added 214r/s
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>

commit b82a37f11a0fd5b7bc76f6190308a797815e6f40
Author: François Pichenot <fpichenot@ville-roubaix.fr>
Date:   Wed Apr 13 13:20:11 2022 +0200

    Bug 30430: UNIMARC XSLT add field B214 display
    
    test plan :
    - Apply patch
    - Find a record with a B214
    - Check on both Opac-Details and Opac-Result that the field is
      displayed.
    - Do the same checks on catalogue/search results and catalogue/details
      in Staff interface.
    - Add a 210 field to the record (legacy)
    - It should be displayed as well
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>

commit 9b32080571175a497251bcde974844927f285d8b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri May 13 17:12:36 2022 +0000

    Bug 30859: Upgrade jQuery Validation plugin from v1.19.1 to v1.19.4
    
    This patch updates the jQuery Validation plugin in both the OPAC and
    staff interface. This upgrade brings the plugin to the current latest
    version (1.19.4) which includes compatibility fixes for the latest
    version of jQuery.
    
    To test, apply the patch and test various forms in the OPAC and staff
    interface to confirm that validation is still working correctly.
    
    In the OPAC:
    
    - Patron self-registration: Required fields, password match
      and complexity. Test also the "Forgot password" and "Change password"
      interfaces.
    
    In the staff interface, for example:
    
    - Patrons -> Patron password change: Required fields, password match and
      complexity.
    - Administration -> Patron categories -> New category:
      - Required fields
      - One or the other enrollment period inputs
      - Digits required in password expiration, age required, upper age
        limit
      - Numbers required in enrollment and hold fee.
    - Administration -> Budgets -> New budget:
      - Required fields
      - End date must be after start date
    - Administration -> Cities & towns: Required fields
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>

commit 30cc6f422f1e7f2cd130d8327317f2805d510e9a
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed Jun 29 11:12:57 2022 -0400

    Bug 31062: Change description of QOTD tool in tools-home
    
    This patch changes the name and description of the QOTD tool in order
    to make them more consistent with the other tool names and descriptions.
    
    To test:
    1) Go to Tools
    2) Read the QOTD tool name and description, make sure they make
       sense and that there are no typos
    3) Test the link to make sure it goes to the tool
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>

commit 89c910449d2043050f75694e1a401e213c103e22
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Jun 29 08:46:21 2022 +0000

    Bug 31064: Wrap local login with stylable element
    
    Test plan:
    0. Apply patch
    1. Go to http://localhost:8081/cgi-bin/koha/admin/preferences.pl?op=search&searchfield=OPACUserCSS
    2. Set syspref to the following:
    .local-login {
          display: none;
    }
    3. Go to http://localhost:8080/cgi-bin/koha/opac-main.pl
    3b. Note that the local login boxes are hidden
        ("Log in to your account:" remains so that other login options can
        be supplied by OpacUserJS)
    
    4. Click on "Log in to your account" on the top toolbar
    4b. Note that the local login boxes are hidden
        ("Log in to your account:" remains so that other login options can
        be supplied by OpacUserJS)
    
    5. Go to http://localhost:8080/cgi-bin/koha/opac-user.pl
    5b. Note that the local login boxes are hidden
        ("Log in to your account" remains so that other login options can be
        supplied by OpacUserJS)
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>

commit ad313c37af41b7be7eea2bae851525af7ee5e37a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 1 16:13:52 2022 -0300

    Bug 30823: DBRev 22.06.00.010
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7b8939b2ec823afb4b008dbba81276e259037ce5
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Jun 6 23:52:59 2022 +0000

    Bug 30823: Filling recalls uses 'FILL' action in action logs
    
    This enhancement changes recall fulfillment actions to log with the
    FILL action. It will also update existing recalls FULFILL actions in
    the database to use the FILL action.
    
    To test:
    1) Enable the UseRecalls system preference and set up your
    recalls-related circulation rules. Confirm RecallsLog is enabled.
    2) Check out an item to Patron B.
    3) Log into the OPAC as Patron A and search for the item.
    4) Place a recall on that item.
    5) Go back to the staff client and check the item in. Confirm the recall
    as waiting for Patron A.
    6) Check out the item for Patron A to fill the recall.
    7) Go to Tools -> Log Viewer. Confirm there is a FULFILL action. Choose
    the following search params to browse system logs:
    - modules: recalls
    - actions: fill
    8) Submit the search and confirm the recall DOES NOT show.
    9) Apply the patch, update database, restart services.
    10) Refresh the log viewer and repeat step 7. Submit the search and
    confirm the recall DOES show. Confirm there is no longer a FULFILL
    action as both holds and recalls will use FILL.
    11) Check in the item.
    12) Repeat steps 2-6. We are ensuring that future recalls are logged
    using the FILL action.
    13) Repeat step 7. Confirm all test recalls are now showing in search
    results.
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2485476b71fb5868da47253558c717d02d12e1a5
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jun 27 17:53:15 2022 +0100

    Bug 31085: Reload return claims table on resolve
    
    This is another fix for a bug in return claims. We now test for the
    initialised datatable and call an ajax reload directly on it if we find
    one instead of calling a undefined function (the function is out of
    scope here).
    
    NOTE: Taken as a whole commit follow-up on bug 28854 where the issue was
    initially identified
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 41ce80eb12e738a55c697f51ecfb32a932a38959
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jun 27 17:20:55 2022 +0100

    Bug 31087: Prevent stringification of null in return claims
    
    The return claims table was stringifying 'null'. This patch updates the
    code to check for definition so we don't stringify incorrectly
    
    Note: This patch was split out from a follow-up on bug 28854 as we felt
    it should be treated separately for backportability.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit de90b39b4c8a77ea3a911cf611e406770de5cf26
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 1 10:21:58 2022 -0300

    Bug 30889: (follow-up) Warn if context is not defined
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fd385d90b8063d5cbdb0e5d1cf76e99b9c58cc84
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon May 30 03:31:44 2022 +0000

    Bug 30865: Double-quote Host-item in Koha::Biblio->get_components_query
    
    This patch adds double quotes around the term qualified by "Host-item"
    in Koha::Biblio->get_components_query().
    
    Without them, reserved charactrs like "=" will cause syntax errors like
    "CCL parsing error (10014) Unknown qualifier ZOOM for query:
        Host-item=(MyTitle = Mysubtitle)
        at /usr/share/koha/lib/C4/Search.pm line 245."
    
    Test plan:
    0) Don't apply the patch
    1) Create biblio with title and subtitle like (MyTitle : MySubtitle)
    2) Note the warning "There was an error searching for analytic records,
       please see the logs for details." on the detail page
    3) Apply the patch
    4) koha-plack --restart kohadev
    5) Refresh the detail page
    6) Note that the warning message is gone
    7) prove t/db_dependent/Koha/Biblio.t
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 029d7bacf01ac9debe4ca21150d9c9c572f090da
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 25 15:51:41 2022 +0100

    Bug 30744: Use RecordProcessor in get_marc_notes
    
    This patch utilises RecordProcessor to filter the MARC::Record for the
    right interface prior to constructing the marc notes array.  We also
    remove the use of C4::XSLT for replacing AV values in the MARC fields in
    preference to using the RecordProcessor filter.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0efae9ed0565aac7ade8b9febfcd0e44fe35d420
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jun 7 13:45:14 2022 +0100

    Bug 30918: Allow passing filtered record to get_marc_notes
    
    This patch does the absolute bare minimum to prevent private notes from
    appearing on the OPAC.
    
    Test plan
    1. Go to Koha Administration -> Koha bibliographic frameworks
    2. View the MARC structure for your BKS framework (or something else)
    3. Search for tag 583, edit subfields
    4. Go to subfield 'x' - nonpublic note. Confirm the OPAC visibility
       checkbox is UNCHECKED.
    5. Edit or create a record using the BKS framework. Put a note in the
       583$x.
    6. View this record in the OPAC
    7. Go to the Title notes tab. Confirm the non-public note is
       showing, even though the framework says it should not be
       visible via the OPAC.
    8. Apply patch
    9. Confirm the non-public note is no longer visible
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8c926c976a7a5057c578d8f5d41f4cdaa1d8ab5e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jun 17 13:09:02 2022 +0000

    Bug 30848: Add exec flag to test
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6c381c4b22d30388f8e24966a6c6e7c78201dba3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jun 13 14:26:33 2022 +0100

    Bug 30848: Fix issue exposed by unit tests
    
    This patch changes the 'map' to a simple for loop so that we can easily
    map multiple subfields to a field without overwriting the first previous
    subfields in the structure.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6b04e3e18f1c534e3d7d91dde458d30e02e13f33
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jun 13 14:25:30 2022 +0100

    Bug 30848: Expand unit tests
    
    Add to the unit tests to test Library and Itemtype expansions as well as
    linking multiple subfields of the same marc field to such expansions.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 62bba6d9e12bdf9e3dbf231beae68afe43618f4b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu May 26 10:24:50 2022 +0100

    Bug 30848: Add an ExpandCodedFields RecordProcessor filter
    
    This patch introduces a RecordProcessor filter for MARC::Record objects
    that replaces Koha codes with descriptions in the MARC::Record passed to the processor.
    
    Target usage:
    
      my $biblio = Koha::Biblios->find(
          $biblio_id,
          { prefetch => [ metadata ] }
      );
    
      my $record = $biblio->metadata->record;
    
      my $processor = Koha::RecordProcessor->new(
        {
            filters => ('ExpandCodedFields'),
            options => {
                interface     => 'opac',
                frameworkcode => $biblio->frameworkcode
            }
        }
      );
    
      $processor->process( $record );
    
    Test plan
    * Read the included unit test and confirm it makes sense and passes
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 41ddbd7b2f6c9b43cfb3b6327d5decc5bfa3a1b4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 1 09:14:18 2022 -0300

    Bug 30889: DBRev 22.06.00.009
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 440452893396f1d321d937e314faf01cb6a94771
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 30 11:54:10 2022 -0300

    Bug 30889: Schema update
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b983e3c505a4ad5c65587c85c4ab79bf3e18eaf3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 30 11:52:52 2022 -0300

    Bug 30889: Add comment for the new DB field
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a0000de817cce2814f05da66146a89e7323346a7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jun 20 16:27:51 2022 +0100

    Bug 30889: Unit tests - process
    
    This patch adds corresponding unit tests for the 'process' side of this
    patchset. We check that the Context for the job to run in as set from
    the Job context recorded at enqueue time.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit defcdd85a4e75059df9f36bb620d9faaeb7fb677
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jun 20 16:01:28 2022 +0100

    Bug 30889: Unit tests
    
    This patch adds a unit test for the 'enqueue' part of the bug. We check
    that the mocked context (and interface) are recorded with the job
    enqueue in the new 'context' field.
    
    We do not yet test the 'process' end, where we then read the context out
    and set the job Context from it.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c1fcf3510ea21df24ed02f6fec0a617833200cf5
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jun 17 18:00:36 2022 +0000

    Bug 30889: Fix atomic update permissions
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bde3a32277efdfe8bcf47ffe444b1a9780125940
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jun 10 14:09:21 2022 +0100

    Bug 30889: (follow-up) Record and use context in background_jobs
    
    This patch records the current context to the background_jobs table at
    enqueue time and then uses that record to set the context at process
    time.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 72a6c8ba84e90928c03ad7ee48f66e0c12750214
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jun 10 14:06:22 2022 +0100

    Bug 30889: (follow-up) Add context field to background_jobs
    
    This patch adds a new 'context' field to the background_jobs table to
    record the context in which the job was queued.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 44b74010b1d45bda2ce2f8c58f282570566238fc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jun 7 14:41:14 2022 +0200

    Bug 30889: Set interface to 'intranet'
    
    Is that correct?
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0f2425a2433adc380b9bd06c7fdd20d5d7a268a6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jun 7 14:39:44 2022 +0200

    Bug 30889: Set userenv for background jobs
    
    We need to set the userenv when we process the jobs. It is useful for
    stats (at least)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6c315c164dbcf3e05fcfe4a3110b824ab3ac162c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jun 28 10:06:57 2022 +0000

    Bug 31058: Fix import AutoUnsuspendHolds
    
    This patch corrects missing import
    
    To test:
    1 - perl misc/cronjobs/holds/auto_unsuspend_holds.pl
    2 - It dies
    Undefined subroutine &main::AutoUnsuspendReserves called at misc/cronjobs/holds/auto_unsuspend_holds.pl line 38.
    3 - Apply patch
    4 - run again
    5 - It succeeds!
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit df393b38b8102b4d304b79cb2ba2e73caf8187bd
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Jun 17 22:34:45 2022 +0000

    Bug 30939: Fix use statement for DelAuthority
    
    Without this patch, the script won't delete any
    unused authorities, but gives an error instead
    and dies:
    
    Undefined subroutine &main::DelAuthority called at ./misc/migration_tools/remove_unused_authorities.pl line 98.
    
    To test:
    - Run from koha-shell:
      ./misc/migration_tools/remove_unused_authorities.pl -t
    - Verify several authorities are reported as unused
    - ./misc/migration_tools/remove_unused_authorities.pl -c
    - Verify the error message is shown when the first unused
      authority is found and the script stops
    - Apply patch and rerun:
      ./misc/migration_tools/remove_unused_authorities.pl -t
    - Verify the error is gone, the script finishes and auhorities
      are deleted
    
    https://bugs.koha-community.org/show_bug.cgi?id=30936
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 667722daa34ce6acaf47f2bd94434260dcc76d48
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jun 28 12:29:05 2022 +0100

    Bug 30677: Cleanup
    
    This patch cleans up the regular expression to remove the superflous
    double check and use standard delimiters
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit be3bd8af8b1f2dbff33d2228eb64fa77fe9362f7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 11 16:47:59 2022 +0100

    Bug 30677: Use lookahead in regex for biblioitem replacement
    
    This patch takes Andrew's suggested fix using a lookahead regex to
    correct our biblio vs biblioitem table name replacements.
    
    Please use the preceeding unit test patch proposed by Jonathan to test.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit de4fcc91f02e7d8da645388c7287ed942fa4bae8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri May 6 13:53:01 2022 +0200

    Bug 30677: Add tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1e439d710517b291b5a065200ef20a3fdf798de2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jun 27 13:23:06 2022 -0300

    Bug 23991: (follow-up) Silence useless warnings
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 148e93d45d5813232e06ed7ff18726b2cb558fbe
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 16 15:30:35 2022 +0200

    Bug 30937: Surroung Yes/No with span
    
    See bug 29602
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6173de92bbd595299a75e943d9822cb4ec3a0da1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 16 15:24:59 2022 +0200

    Bug 30937: Add a 'does not exist' hint if branchcode is invalid
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit da31437d1a7e2ac3f4a71b78ac652ed6c3d57731
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 4 17:40:27 2022 +0000

    Bug 30937: Add a detail view for libraries
    
    This patch adds a view page for libraries, so that the user isn't
    required to edit the library to see information about it.
    
    To test, apply the patch and log into Koha as a user with permission to
    manage libraries.
    
    - In the list of libraries you should see that the library name in the
      first column is now a link.
    - When you click the link you should be taken to a view of all the
      information about the library.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b25dfb50a10390e1fa4f66c40ecc6da7aeb3af79
Author: Petro Vashchuk <stalkernoid@gmail.com>
Date:   Mon May 16 17:04:18 2022 +0300

    Bug 30775: Make 952w to have datepicker plugin by default
    
    This field (Price effective from) is very similar to 952d,
    but it doesn't have dateaccessioned.pl plugin by default,
    
    Apart of worse usability of this it is also allows to enter wrong
    date which will be converted in 0000-00-00 in DB and even lead to
    crashes by code in other places.
    
    So, adding this plugin not only improves usability (user can have
    datepicker) but also adds date field validation.
    
    Test plan:
    1. Head over to MARC frameworks from your administration page,
    check 952 subfield structure of your default framework structure.
    2. dateaccessioned.pl is set as a plugin for 952d by default
    but is missing from 952w.
    3. Apply the patch and reset your koha, drop db and use reset_all alias.
    4. Check frameworks structure again and ensure that datepicker plugin
    is set by default for 952w.
    5. Edit some item to ensure that datepicker works for that 952w.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 22afd8b4e7be875f737a4dd86d9f69e4ca117ce1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Mar 23 14:11:47 2022 +0000

    Bug 26486: Group edit buttons in reports toolbar
    
    This patch modifies the reports interface to change the reports toolbar
    in two ways:
    
    1. The Edit, Duplicate, and Delete buttons are now combined into a
       button menu. My original idea was to have it be a split button, but
       the logic for handling various permissions made the template logic
       too convoluted.
    2. The "Show SQL code" button is converted to a "Single toggle" button
       (https://getbootstrap.com/docs/3.3/javascript/#buttons-single-toggle).
       This type of button is specifically designed for this kind of
       interface element.
    
    This patch includes indendation changes, so please diff accordingly.
    
    To test, apply the patch and go to Reports -> Saved reports.
    
    - Logged in as a user with Create and Delete report
      permissions:
      - View an SQL report. In the toolbar you should see an "Edit" button
        menu with three options: Edit, Duplicate, and Delete. Check that all
        work correctly, including a deletion JavaScript confirmation dialog.
    
    - Logged in as a user with Create but not Delete report permissions, you
      should see an "Edit" button menu with two choices: Edit and Duplicate.
    
    - Logged in as a user with Delete but not Create report permission (??)
      you should see only a standalone delete button.
    
    - Logged in as a user with Execute report permission, run an SQL report.
      Test the "Show SQL code" button. The text should change to "Hide SQL
      code" and the button should be styled to look like its "pressed"
      state.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cd401736edc47655a7936260ec7abff234a5569e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jun 23 11:13:10 2022 +0100

    Bug 23991: (QA follow-up) Fix tabbing
    
    It looks like during one of the many rebases we lost some of the tabn
    handling, likely due to the conversion from jquery-ui to bootstrap tabs.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d533a92aa8283de29dd64cdf698588dd707af353
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 12 11:52:45 2022 +0200

    Bug 23991: Move SearchSuggestion to Koha::Suggestions
    
    The C4::Suggestions::SearchSuggestion subroutine is badly written and
    can be replaced by calls to Koha::Suggestions->search.
    The hard part in this patch is suggestion.pl, the other occurrences have
    been replaced easily.
    
    Test plan:
    The idea is to test the whole suggestion workflow.
    1. Create a suggestion on OPAC
    2. Create a suggestion on the staff interface
    3. Edit suggestions
    4. Filter suggestions (use the different filters and "organize by"
    values)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Bug 23991: Remove SearchSuggestion tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Bug 23991: (QA follow-up) Save some DB queries
    
    This patch makes the suggestion-related pages rely on array size instead
    of querying the DB each time they need to. In the case of
    suggestion/suggestion.pl it goes from 4 COUNT(*) to 1.
    
    To test, with KTD:
    1. Run on the host machine:
        $ docker exec -ti koha_db_1 bash
        $ mysql -ppassword
        > SET GLOBAL general_log_file='/var/log/mysql/mycustom.log';
        > SET GLOBAL log_output = 'FILE';
        > SET GLOBAL general_log = 'ON';
        > \q
        $ tail -f /var/log/mysql/mycustom.log | grep suggestions
    2. Visit the different pages changed on this bug
    => SUCCESS: Some queries
    3. Apply this patch
    4. Repeat 2
    => SUCCESS: Less queries!
    5. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Bug 23991: Fix branchcode and budgetid filtering
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Bug 23991: Fix conflict with bug 28941
    
    Well, this patchset fixed the security bug...
    Redoing on top of bug 28941
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Bug 23991: (follow-up) Missing semicolon
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Bug 23991: Fix 'all' libraries
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Bug 23991: (follow-up) Add value to filter_archived
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 147f6e0293ce5817bca450a54c83213c7f0f1585
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Jun 27 08:59:30 2022 +0000

    Bug 31053: Add Context module to Koha::Encryption
    
    Test plan:
    perl -MKoha::Encryption -e'print Koha::Encryption->new->encrypt_hex("test");'
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cccfccca763baa72c43009049f3d8d38a5c644de
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Jun 25 15:30:47 2022 -0300

    Bug 30327: DBRev 22.06.00.008
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8757023b2167bfec92a494873232f1aaa76ab6be
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Sat Jun 25 11:18:42 2022 +0000

    Bug 30327: (follow-up) Fix inconsistencies in syspref names and supply defaults
    
    This patch fetches the new sysprefs into variables, providing default title ascending if
    they are not set to avoid an undefined concatenation warning
    
    I also make the update idempotent and fix confusion of plural/singular names
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit daab31ab38ea1d9c2992af51d38f30f318c3546b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jun 17 10:13:41 2022 +0000

    Bug 30327: Fix tests
    
    Corrected variable name on update to match everywhere else
    
    Added a default value for limit in buildQuery and only append limit if it has content
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit de63c2abb1a64fae45ebbfa98c5001b98f4a69ae
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jun 1 14:40:49 2022 +0000

    Bug 30327: Add options for sorting components
    
    This patch adds two new sysprefs:
     ComponentSortField
     ComponentSortOrder
    
    These allow the user to choose how components should be sorted when displaying on the details page
    of a record, and the corresponding search for all components
    
    This also updates our search from simple_search_compat to search_compat to allow for sorting options
    
    Note:
    Some sorting under ES is unclear - this is a separate issue to be invesitgated
    Our Zebra index does not offer 'record number' sorting, I will file a bug for that
    
    To test:
     1 - Enable UseControlNumber (or not)
     2 - Add some components to a record by control number or title depending on above
     3 - Enable  ShowComponentRecords  syspref
     4 - View the record that has components
     5 - Note they are not sorted
     6 - Apply patch, updatedatabase
     7 - reload record
     8 - Note components are sorted by title ascending
     9 - Try different values for ComponentSortField and ComponentSortOrder
    10 - Confirm sorting changes with system preferences
    11 - Repeat test on staff and opac, with ES and Zebra search engines
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fde9f39ca56bacd8a7f300a105ea6dfde14d0fd9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jun 20 13:20:58 2022 +0000

    Bug 30994: Typo: item was on loan. couldn't be returned.
    
    This patch updates some language in the inventory template to make it
    readable and consistent: Punctuation fixed, capitalization made more
    consistent, language corrections ("check in" instead of "return").
    
    To test you can try to apply the patch and trigger the various errors in
    the inventory interface, but it's probably enough to visually confirm
    the changes in the patch.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit efad62f91d7fa5bf2a85f20b16afa8cfaa52e717
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Wed Jun 22 08:38:58 2022 +0000

    Bug 30991: Fix remaining instances of [% ELSE %]0[% END %] in templates
    
    The construct of [% ELSE %]0[% END %] breaks translations as it is
    translated as [% ELSE %][% END %]. Note: No 0 in the ELSE statement.
    
    This patchset either removes occurances of a lone 0 in template ELSE
    statements, or splits it over multiple lines so the 0 is not removed in
    the translated templates.
    
    Test plan:
    1. Install the en-NZ translation
    2. Search the translated templates for '[% ELSE %][% END %]' and confirm
    there are are instances of that
    3. Apply patch
    4. Update your en-NZ translation
    5. Repeat step 2 and confirm there are no more instances of [% ELSE %][%
    END %] in the translated templates
    
    Note: I removed the [% ELSE %] statement from opac-bottom.inc as that
    statement was empty in the en translation so it didn't look to be
    needed.
    
    Sponsored-by: Catalyst IT, New Zealand
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 78642d03ea8d578347ab639467be6e1719ce1d08
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Jun 25 11:25:36 2022 -0300

    Bug 29282: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0c6084b86425640243f62e2c64b454d87c40e915
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jun 16 13:15:17 2022 +0100

    Bug 29282: (QA follow-up) Class consistency
    
    This patch updates the field classes introduced in this patchset to
    improve class name consistency.  We remove the _field apendment and to
    repvent a clash we update the existing 'renewals' class elsewhere to
    'renewals-info' to more clearly reflect it's content.
    
    Test plan
    1) The patchset should continue to function as described in prior patches
    2) Build the CSS for the staff client
    3) Check the 'Checkouts' table on various screens and confirm the
       renewals information still displays as it always has in the table.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b10aa7bcb5fec4b094bb8538467b0397b8fb2da8
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri May 13 15:24:04 2022 +0000

    Bug 29282: (follow-up) Account for otherholdings table
    
    This patch accounts for the otherholdins table. To test:
    
    1. Turn on SeparateHoldings
    2. Find a record where the items are split by SeparateHoldings.
    3. Make sure you can hide columns from the table in the Other holdings tab.
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 018a981b9ba4febb9a86ca5c794bff1cbf928d03
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Feb 14 19:14:58 2022 +0000

    Bug 29282: Add issues and renewals columns to holdings tbale on details page
    
    To test:
     1 - Apply patch, restart all
     2 - View a record with items in the staff client
     3 - Note issues and renewals columns not shown
     4 - Click the gear to edit visible columns
     5 - Issues and renewals are present and hidden
     6 - Click to view columns
     7 - Confirm counts show, or 0 if item has not circulated/been renewed
     8 - Circulate/renew an item
     9 - Verify counts increase
    10 - Make columns visible by default in Admin->Table settings
    11 - Confirm columns show by default on details page
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 04d43d4f213641f6fbdb595b636c94ff313907fd
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jun 9 18:30:10 2022 +0000

    Bug 30936: (follow-up) Add markup comments
    
    This patch adds comments to the template to highlight the markup
    structure.
    
    This patch should have no effect on the page's appearance or
    functionality.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1da958f59bdb6fdf6ec1a87969a468f7b6583416
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jun 3 15:22:06 2022 +0000

    Bug 30936: Reindent authority detail template
    
    This patch updates the authority detail template so that indentation is
    consistent.
    
    To test, apply the patch and go to Authorities.
    
    - Locate an authority record and view the detail page.
    - Everything should look correct, with working numbered tabs.
    - If the AuthDisplayHierarchy preference is enabled, you should see a
      collapsible tree of elements in the authority hierarchy.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8fd6b90f45f02823ba01232dc6a5ed8c235d621e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 31 09:56:09 2022 +0200

    Bug 30195: Remove second parameter for GetMarcFromKohaField
    
    It does not longer exist.
    
    Also fix a spelling (emtpy ==> empty)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3fd8a60db1c24eaf3a460d2c3eacb856bd79bb2c
Author: Paul Derscheid <paul.derscheid@lmscloud.de>
Date:   Thu May 12 11:50:44 2022 +0000

    Bug 30195: Added a missing semicolon to the added subtest and increased test count to 107
    
    https://bugs.koha-community.org/show_bug.cgi?id=30195
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f1e29b18ea308574e619e7c2b5ae324a93a25d01
Author: Thomas Klausner <domm@plix.at>
Date:   Tue Mar 15 16:00:48 2022 +0100

    Bug 30195: Search by ISBN if it is provided in suggestion
    
    When a patron enters an ISBN/ISSN when suggesting a new purchase, the
    ISBN is used to find duplicates. Title/Author are ignored (as patrons
    might misspell them, and the ISBN provides a better way to find
    duplicates)
    
    Test Plan:
    * in the OPAC, go to /cgi-bin/koha/opac-suggestions.pl
    * Click "new purchase suggestion"
    * Enter any title
    * Enter an ISBN that exists in your library
    * Click "Submit your suggestion"
    -> A new purchase suggestion has been submitted
    
    * Apply the patch!
    
    * Again start a new purchase suggestion, enter any title and the
      duplicate ISBN, and Submit
    * You should see the note "A similar document already exists: ..."
    
    Please note that the title should not be required when entering an ISBN,
    but as the list of required fields is managed via OPACSuggestionMandatoryFields
    I fear that it's rather complicated to make title an optional required
    field if isbn is provided.
    
    I also added a simple non-DB test case to t/db_dependent/Suggestions.t
    (in a subtest at the end), but could not actually run it as I haven't
    gotten around to set up / try a testing Koha dev env...
    
    Sponsored-by: Steiermärkische Landesbibliothek
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b6dcd3cbd395b0df439d846f58772808a5696da5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Jun 25 11:16:23 2022 -0300

    Bug 29129: DBRev 22.06.00.007
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6dbb9c3690dffabe85a1dfb119291e7169bd4831
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Jun 25 11:15:12 2022 -0300

    Bug 29129: (QA follow-up) Tidy atomicupdate
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 27a81ba75df283a19a6380ea9259865ae006ea45
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Jun 25 10:59:28 2022 -0300

    Bug 29129: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d016a907f3a4f3d8cd233e20cbfb68d05b949bc4
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Apr 28 16:16:04 2022 +0000

    Bug 29129: (QA follow-up) Rephrasing DisplayClearScreenButton preference
    
    Trying to make it clearer that's either none or 2 buttons.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e9c636bbb53b476f87b0a1b944245de51becae8e
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Apr 28 15:33:51 2022 +0000

    Bug 29129: (QA follow-up): Fix tiny typo in system preference description
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f85a7a0d82ac881bbecf1d090751de0a7f6843b6
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Apr 28 15:29:05 2022 +0000

    Bug 29129: (QA follow-up) Add +x to atomicupdate permissions
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4a3b988d5c5f01d98e742f8949240a0d903919c2
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Apr 27 17:55:26 2022 +0000

    Bug 29129: Update DisplayClearScreenButton to allow for a choice between issueslip and issueqslip
    
    To Test:
    1. Apply patch, updatedatabase, and restart_all
    2. A small change the global scss file means you should regenerate the CSS as well. ( https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_interface )
    3. Set DisplayClearScreenButton to "don't show"
    4. Go to the patron checkout screen and see that no button should show to clear the screen and print
    5. Set DisplayClearScreenButton to 'ISSUESLIP' and make sure the button now appears and the ISSUESLIP prints
    6. Set DisplayClearScreenButton to 'ISSUEQSLIP' and make sure the button now appears and the ISSUEQSLIP prints
    
    Signed-off-by: Andrew Fuerste-Henry <andrew@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9b55a435d9a61819750c322ac284f8c9a2c236c3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Apr 25 14:15:56 2022 +0000

    Bug 30609: (follow-up) Add markup comments
    
    This patch adds comments to the template to highlight the markup
    structure.
    
    This patch should have no effect on the page's appearance or
    functionality.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 455b3b4a93b491b26af8e4f16642eeab03254ccc
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Apr 22 18:31:35 2022 +0000

    Bug 30609: Reindent serial claims template
    
    This patch updates the serial claims template so that the indentation
    is consistent. Tabs are replaced with spaces.
    
    To test you must have at least one subscription with late issues.
    
    - Apply the patch and go to Serials -> Claims and select the vendor
      responsible for your late issue.
    - On the "Missing issues" page, confirm that everything looks correct.
    - All functionality should be the same: Filters, table sorting, CSV
      export, and claim notification.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 712ced46128470010a043597c2ad7f956bd9b9cd
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 12 15:14:32 2022 +0000

    Bug 29055: Focus on keyword field when subscription biblio search window opens
    
    This patch adds the "autofocus" attribute to the keyword field in the
    popup window used to find a bibliographic record to use in a
    subscription.
    
    The same is also done for the vendor search popup.
    
    To test, apply the patch and go to Serials -> New subscription.
    
    - Click the "Search for vendor" link. When the "Serial subscription:
      search for vendor" window opens the cursor should automatically be in
      the vendor search field.
    - Click the "Search for record" link. When the "Catalog search" window
      opens the cursor focus should automatically be in the keyword field.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 347d9d733984170a04743510d50c5c8457484b60
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Mar 28 20:51:35 2022 +0000

    Bug 22659: (follow-up) Add category to redirect
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e88ee0fc5efea3f25bdca1f4fe70b71239743d9c
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Feb 3 22:31:19 2022 +0000

    Bug 22659: Add save and continue button to additional-contents.tt
    
    To test:
    1. Apply patch and restart everything
    2. Go to Tools > News and create some new additional content.
    3. Notice a Save and continue button
    4. Try saving and contining.
    5. Make sure if you are using the CodeMirror editor that you are still in the CodeMirror editor
    6. Try 2 - 5 again but with the wysiwyg editor, make sure when you save and continue you remain in the wysiwyg editor.
    7. If you are saving and contining from News make sure you remain in News, when you are saving and contining from HTML customizations make sure you remain there.
    8. Turn on the NewsLog system preference
    9. With the NewsLog on make sure your content is being logged correctly when you sabe and continue.
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9de92e07e69c8c209b10d70ab4da623572240a95
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue May 31 13:01:59 2022 +0000

    Bug 30871: Add notes in advanced cataloging editor
    
    This is the same as preevious patch, but for advanced cataloging editor
    
    To test:
    1 - Enable EnableAdvancedCatalogingEditor
    2 - Create a new record in advanced edtior
    3 - Hover over leader6 and 008 type
    4 - Confirm notes are useful
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9912739231511441d54bec77ff04bbb561fdb93d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue May 31 12:54:40 2022 +0000

    Bug 30871: Add/expand title text for LDR/06 and 008 Type of material
    
    This patch simply adds title elements or clarifies existing title elements to indicate how default
    values are chosen
    
    To test:
    1 - Create new record in default editor
    2 - Open leader helper, hover over "6-Type of record" and the dropdown
    3 - Confirm notes make sense
    4 - Open 008 helper
    5 - Hover over 'Type of Material' and dropdown
    6 - Confirm notes make sense
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5e5481ea44cb09588b81b74f85f95b4e9f6a62cb
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jun 24 12:31:39 2022 -0300

    Bug 21978: DBRev 22.06.00.006
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit db001f05c6be6a3c499e835b678a2bd8e3a467ae
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jun 24 12:30:29 2022 -0300

    Bug 21978: Schema Update
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1e3ec982e42846c3de118f9a9b5a42ddeb0e4f85
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 19 07:28:50 2022 +0200

    Bug 21978: Add middle_name to sysprefs.sql
    
    And add middle_name at the exact same places for installations with the
    default value.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b409b5eb8d191104bbd29a93f2bcace9725ebd02
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 18 16:34:50 2022 +0100

    Bug 21978: (follow-up) Stop using C4 methods in atomicupdate
    
    We should really only use C4::Context methods where absolutely
    necessary.. in this case is was simple to replace the get_preference and
    set_preference calls with SQL
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5a4253aa8ef7dd796c84af1c40dec0abc614cabe
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 18 16:17:11 2022 +0100

    Bug 21978: (follow-up) Stop passing holdfor_cardnumber
    
    We not longer need to pass holdfor_cardnumber distinctly, we can just
    refer to holdfor_patron.cardnumber instead.  This patch does that ;P
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9a40eb5820983fa99f693a13857b9a9ef1bb25fc
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue May 3 11:07:00 2022 +0100

    Bug 21978: Use patron-title for holdfor handling in results
    
    This patch update the catalogue search results page to use the
    patron-title include to display patron titles for the 'Holds for' line
    in results and dropdown list.
    
    Test plan
    1) Load patron account
    2) Press search to hold
    3) Perform a search which brings back 2+ items (e.g. 'street')
    4) Note that on the search results it says:  Place hold for 'firstname
       (othername) surname (cardnumber)'
    5) Press the Place hold button and note that the dropdown includes
       "Place hold for 'firstname (othername) surname'" and "Forget
       'firstname (othername) surname'"
    6) Click through to an item from the results, press the 'Place hold'
       button and note the dropdown includes "Place hold for 'firstname
       (othername) surname'"
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a14dfafa2e15ee91896f60b28446bdf0016e5bfc
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Apr 25 12:14:29 2022 +0100

    Bug 21978: Use patron-title.inc in request.tt
    
    This patch updates all manual accurences of the patron title display
    to use the patron-title.inc include (so we get middlename handling)
    in request.tt.
    
    We also add the option to hide the cardnumber from the include and set
    the link_to to 'members_pay' to retain the current display format on
    this page.
    
    Test plan
    You'll need to trigger the following cases to test all cases:
    1) Too many holds
    2) Account expired
    3) Has restrictions
    4) Outstanding fines
    5) Already has hold on item
    6) No holds allowed
    7) Too many holds for this record
    8) Already in possession
    9) Already has a hold
    10) Already has a recall
    11) Pickup library doesn't many patron home library
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a89c710978a71dffe7ff8fbb54f5c03b5b722e95
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Apr 25 10:13:05 2022 +0100

    Bug 21978: Add middle_name into hold request autocomplete
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d5608b8ff00e8674e9391333c17554765579502f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 19 16:20:51 2022 +0100

    Bug 21978: Add support for middle name
    
    This patch adds the new 'Middle name' field to the patron record.
    
    To test:
    1) Apply patches
    2) Update database, restart all and clear the browser cache
    3) Load a patron in the staff module
    4) Confirm you can see and edit the new 'Middle name' field
    5) Confirm the new middle name data displays on patron details
    6) Confirm the new middle name data displays on patron search results
    7) Confirm the new middle name data displays everywhere patron names are
       displayed.
    8) Confirm the new middle name data displays on the OPAC
    9) Confirm the 'Middle name' field appears in the OPAC borrower
       modification screens
    10) Edit sysprefs `BorrowerMandatoryFields`, `BorrowerUnwantedFields`,
        `SelfModificationBorrowerUnwantedField`, `PatronSelfModificationMandatoryField`,
        `PatronSelfRegistrationBorrowerMandatoryField` and
        `PatronSelfRegistrationBorrowerUnwantedField` to confirm you can make
        the new field required or hidden.
    11) Verify that DefaultPatronSearchFields contains the new field if you
        already had 'firstname' in the field list
    12) Enable PatronAutoComplete system preference
    13) Type patrons surname into checkout or patron search but don't hit
        return
    14) Confirm the patrons middle name is displayed in the preview
    15) Go to tools > patron lists and attempt to add a patron to a list
    16) Patrons middle name should appear in the autocomplete here too
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8993c39b7a00b10bf2aa55715fb80027177355e8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 19 15:46:28 2022 +0100

    Bug 21978: Add middle_name to api specification
    
    This patch adds middle_name to the accaeptable fields in API requests
    and responses.
    
    Test plan
    1) Search for a user using the API
    2) Confirm the API responds with a 200
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f4951cc05ee007f898eee42a91416c311c89ccad
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 19 15:34:31 2022 +0100

    Bug 21978: Add middle_name field to the database
    
    This patch adds a new field, middle_name, to the borrowers,
    deletedborrowers and borrower_modifications tables.
    
    It also updates the DefaultPatronSearchFields preference to include the
    new field if the preference is still set to it's default settings from
    install.
    
    Sponsored-by: Cheshire Libraries
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 75fe055dcc76b9aa6dd4f3880dcbb504c1001dcb
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jun 15 12:08:05 2022 +0000

    Bug 29454: (follow-up) Cover more test cases
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 338ca787be4febc1136e45dac95f9006ccf2a425
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Jun 14 11:57:40 2022 -1000

    Bug 29454: Add unit test for Koha::Template::Plugin::ItemTypes
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3df28469c551d7cc2c2f16925e75e9913db0ee67
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Dec 13 14:44:18 2021 +0000

    Bug 29454: Use Koha Cache Memory Lite to stash itemtype descriptions for template plugin
    
    Returns empty string if given item type is undefined or unknown
    
    To test:
    1 - Add 1000 items to a record, of varying item types
    2 - Bring up the details page
    3 - Note time to load
    4 - Apply patch
    5 - Reload page and compare to previous
    6 - Confirm information is correct
    7 - Confirm some performance benefit
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bc0264bae4769fc75133f0e10f13fc6edd86f016
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jun 23 17:29:26 2022 +0000

    Bug 31005: Don't inlcude attributes only required for other categories
    
    To test:
     1 - Create a new patron attribute - check boxes to make it mandatory and visible etc.
     2 - Limit it to 'Patron' or other category
     3 - Edit a patron not in that category
     4 - Attempt to save
     5 - 500 Error
     6 - Missing mandatory extended attribute (type=MAND)
     7 - Apply patch
     8 - Attempt aedit again
     9 - It succeeds!
    10 - Edit a patron in the category with MAND required
    11 - on the edit page, right click teh attribute - click 'delete node'
    12 - Submit the form
    13 - 500 error, but this time that's good, the attribute check works
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 39c39430766f66008a465e1d023830c49b1f6122
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jun 23 17:22:53 2022 +0000

    Bug 31005: Unit test
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1eee121bed6749a49da3ec95bbe76335ecf57540
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jun 24 09:31:51 2022 +0000

    Bug 29325: (QA follow-up) Tidy up
    
    tools/manage-marc-import.pl: sub commit_batch does no longer need $schema
    tools/manage-marc-import.pl: sub revert_batch: calling BatchRevertRecords which has no interval and callback
    misc/commit_file.pl: sub print_progress_and_commit does no longer commit, renamed
    misc/commit_file.pl: sub print_progress does no longer have a schema parameter
    misc/commit_file.pl: sub revert_batch reported deleted items as added
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1f62cbc618a0bfe489ba52c63b3fc8737781a931
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 26 13:54:15 2021 -0300

    Bug 29325: Fix commit_file.pl
    
    This patch fixes the broken commit_file.pl script.
    
    It doesn't deal with commiting the import from the UI.
    
    To test:
    1. Pick a file for staging:
       $ kshell
      k$ misc/stage_file.pl --file TestDataImportKoha.mrc
    => SUCCESS: All good
    2. Commit!
      k$ misc/commit_file.pl --batch-number 1
    => FAIL: You see
    DBIx::Class::Storage::DBI::_exec_txn_begin(): DBI Exception: DBD::mysql::db begin_work failed: Already in a transaction at /kohadevbox/koha/C4/Biblio.pm line 303
    3. Apply this patch
    4. Repeat 2
    => SUCCESS: Commit succeeds
    5. Sign off :-D
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Bug 29325: (QA follow-up) Remove unexisting parameters of BatchRevertRecords
    
    There is no interval and callback as in BatchCommitRecords.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Bug 29325: Call progress callback one last time to confirm comppletion
    
    Previously after finishing the loop we were still in a transaction that never completed - we should report progress when done
    one final time to commit the last records
    
    To test:
    1 - Stage a file with > 100 records
    2 - Commit file
    3 - Confirm batch is imported and no records left as staged
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Bug 29325: Fix import from staff client
    
    same test as before, but via the staff client
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Bug 29325: Handle the transaction in BatchCommitRecords
    
    Requiring the callback to commit was breaking reversion, and likely elsewhere
    
    Let's simplify and say that the routine iteself will handle the txn and commit
    
    TO test:
    1 - Stage a file
    2 - Import a file
    3 - Revert a file
    4 - Test staff client and command line
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit df3c578ae18c1732ce09ddab49683d55dbe4d904
Author: Mark Tompsett <mtompset@hotmail.com>
Date:   Thu Mar 15 16:08:45 2018 +0000

    Bug 20395: (follow-up) Change format to use price filter
    
    See comment #1.
    
    Signed-off-by: Roch D'Amour <roch.damour@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c1784437b4962bee46cd801967bbeb75a3f33fec
Author: Pasi Kallinen <pasi.kallinen@joensuu.fi>
Date:   Wed Mar 14 11:04:50 2018 +0200

    Bug 20395: Change paycollect to use Price formatter
    
    Test plan:
    1) Apply patch
    2) Go to Home -> Patrons -> Patron details (for any patron)
    3) Create manual invoice for the patron
    4) Pay fines -> Pay -button
    5) Check that the currency values look correct
    
    6) Pay fines -> Pay amount -button
    7) Check that the currency values look correct
    
    8) Pay fines -> Pay selected -button
    9) Check that the currency values look correct
    
    10) Change the CurrencyFormat setting
    11) Repeat 2-9
    
    Signed-off-by: Pasi Kallinen <pasi.kallinen@joensuu.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8a5779758a08ba8f34fbf21b48fe7369ff511d10
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Sep 20 15:22:33 2021 +0000

    Bug 29057: Use font awesome icons on request.pl
    
    This patch offers an alternate take on using Font Awesome icons on the
    holds page in place of images as links.
    
    This revised patch updates the icon implementation so that it is easier
    to override the Font Awesome icon selection with CSS. Test by adding the
    contents of this file to the IntranetUserCSS preference:
    
    https://gitlab.com/-/snippets/2319364
    
    To test:
    1 - Place some holds on a record
    2 - View the 'Holds' tab in the staff interface
    3 - Note the new icons
    4 - Note their hover test
    5 - Confirm the buttons still work as expected
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0810d7d343d0b42c1d0670326c665f7b2a220c5c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 23 15:55:54 2022 -0300

    Bug 24239: DBRev 22.06.00.005
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 33e6256619bdb572ea61fddf82c7bbfcf23c8359
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 23 15:50:34 2022 -0300

    Bug 24239: (QA follow-up) Make dbrev idempotent
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5c665cfb247539262cfc8544a964203fb2ee5211
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 23 15:44:44 2022 -0300

    Bug 24239: DBIC update
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ed1a8812c1434901545971e2c8d56f0a55dd15aa
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 23 15:43:18 2022 -0300

    Bug 24239: (QA follow-up) Rename date_due => due_date
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e9bab63e80412f3b9e2457ef0f76f6660c8d3d24
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Fri Dec 13 13:17:55 2019 +0100

    Bug 24239: Let the ILL module set ad hoc hard due dates
    
    The Swedish Libris ILL backend lets librarians store a specific due date
    when an ILL loan is received.
    
    This patch set adds a new date_due column to the illrequets table that can be
    used by the different backends to store a due date. If an illrequest has the
    date due set, it will be used when the item is checked out instead of the calculation
    using the circulation conditions.
    
    To test:
    - Apply the patch and make sure the atomic database update is run
    - Use the FreeForm backend to add one ILL request. Take note  of the
      illrequest_id of the request you created. We refer to this as
      "x" below.
    - Connect a biblio (with biblionumber y), that has an item with a
      barcode, to the ILL request directly in the database:
      UPDATE illrequests SET biblio_id = y WHERE illrequest_id = x;
    - Next we set the due date, this would normally be done by or from the backend.
      UPDATE illrequests SET date_due = "2023-01-01" WHERE illrequest_id = x;
    - Go to circulation and issue the barcode of the item to the
      patron associated with the FreeForm ILL request. Verify that the
      loan gets a due date of 2023-01-01.
    - Ideally: return the item and issue it again through SIP2 and SCO,
      and verify that the due date is still 2023-01-01.
    - Verify that there are no regressions, so that regular calculation
      of due dates still work.
    - prove t/db_dependent/Circulation.t
    
    (Patch description, test plan and partial code credits to Magnus Enger)
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    (Patch description and test plan rewritten to reflect changes in development)
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5b8e1d6f02eab714573c43fde7a79d2c1aa5a1b2
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Wed Feb 9 23:07:35 2022 +0000

    Bug 24239: Unit tests
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 60f3c899b8f1c57375e97966ad75e1c6106c9aca
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Wed Feb 9 23:06:37 2022 +0000

    Bug 24239: Add column illrequests.date_due
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 75bd5cfda14c2ddc7dfdb2939e0f67f3cb302c42
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 13 10:45:33 2022 +0200

    Bug 30950: Remove timepicker.inc
    
    No longer used since
      commit de2d8ba3e4f611aadc29165a7748cc1797d87ce3
      Bug 30011: Update links to jQueryUI assets, remove datepicker references, etc.
    
    We must remove it from our codebase.
    
    Test plan:
      git grep timepicker.inc
    Should not return occurrences outside of PO's
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 76d22780ede623ee33de32ff63c7f06dfda2b992
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 23 13:48:52 2022 -0300

    Bug 12446: (follow-up) Fix patron categories sample data
    
    The can_be_guarantee column was added to the sample data, but not to all
    rows so it was being silently skipped by the install process.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 251a3bb58430b172e240df9e1df510588260bdbb
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 23 13:32:23 2022 -0300

    Bug 12446: (QA follow-up) Rename canbeguarantee => can_be_guarantee
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9d6d1cbd18329bc91b2320a6ea75a04f4333485f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 23 12:14:33 2022 -0300

    Bug 12446: (QA follow-up) Minor kohastructure.sql fix
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d1fbd8b3c63b136b1a98edd9babc7d9aa0287c1c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 23 12:00:36 2022 -0300

    Bug 12446: DBRev 22.06.00.004
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d78c0e47305dd91ae10b28910c5a7ab8400f933a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 23 11:50:12 2022 -0300

    Bug 12446: DBIC update
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 58e6cf9845054fe343174f430a31eb055c09e29d
Author: Maryse Simard <maryse.simard@inlibro.com>
Date:   Thu Nov 12 16:01:35 2020 -0500

    Bug 12446: Add canbeguarantee value to patron categories sample data
    
    This patch changes sample data so patron categories of type 'C' or
    'P' can be guarantees by default.
    
    Signed-off-by: Salman Ali <salman.ali@inlibro.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eae7eb4dc01e5edad93d8fd02866ed05b5b440ee
Author: The Minh Luong <theminh@inlibro.com>
Date:   Mon Mar 21 09:21:50 2022 -0400

    Bug 12446: Fix typos
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    JD Amended patch: squashed and edited commit message
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b69a7977d8285f6bb659c07c8480756b8e4b9044
Author: Maryse Simard <maryse.simard@inlibro.com>
Date:   Tue Oct 20 20:39:51 2020 -0400

    Bug 12446: Limit available categories when using "Add guarantee" button
    
    Test plan:
    1) Have some patron categories that can and cannot be guarantee
    2) Visit a patron's account and click the "Add guarantee" button
    3) In the "category" dropdown, note that all categories are available
    4) Apply this patch
    5) Repeat step 2 and 3; the dropdown now only contains the categories
    for which "can be guarantee" is set to "Yes".
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b8f1b0e73d8a0b9562361b983a38d9eafcf202eb
Author: Maryse Simard <maryse.simard@inlibro.com>
Date:   Fri Oct 2 00:02:38 2020 -0400

    Bug 12446: Ability to allow guarantor relationship for all patron category types
    
    This adds a new field "Can be guarantee" to patron categories so it
    becomes possible for any category type to have a guarantor.
    
    To test:
    1) Have a patron category of type 'Adult' and one of type 'Child'
    2) Confirm, by searching for the "Patron guarantor" fieldset in the
    edit/create form, that:
        => a patron of the first category can't have a guarantor
        => a patron from the second category can
    3) Apply patch and run updatedatabase.pl
    4) Edit the categories and note the new "Can be guarantee" field
    5) It should have been set to "yes" for the "Child" and to "no" for
    the "Adult"
    5) Repeat step 2. It should behave in the same way.
    6) Edit the "Can be guarantee" for any of the category and check
    that the fieldset only appears when "Can be guarantee" is set to "yes"
    7) prove t/db_dependent/Patrons.t
        => tests should still pass
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7f60d887976972aafe16e1495ff46cee128ea81f
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Sun Jun 19 10:22:39 2022 +0000

    Bug 30947: (follow-up) Remove unnecessary object cloning
    
    CalcDateDue() works on its own copy of the $startdate parameter
    so the cloning in the calling end is not necessary.
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9b4b43656ebe693b1445611d4d80b808cb7c6263
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Sat Jun 11 10:50:06 2022 +0000

    Bug 30947: Simplify CanBookBeIssued date handling
    
    1) This removes support for passing string dates to CanBookBeIssued. The
    function didn't publicly even document support for string dates, only
    DateTime objects.
    
    2) We get a $duedate always at least from CalcDateDue so having
    
     $issuingimpossible{INVALID_DATE} = output_pref($duedate);
    
    was unneccesary and thus removed.
    
    3) The check "duedate cannot be before now" was needlessly complex: if
    the due date really cannot be before now we should check seconds too
    and warn the librarian! Thus the truncation to minutes can be dropped
    safely.
    
    To test:
     1) prove t/db_dependent/Circulation.t
     2) prove t/db_dependent/Illrequests.t
     3) Enable OnSiteCheckouts and disable SpecifyDueDate syspref. Create
     on-site checkout for any patron and verify the due date is your
     current date at 23:59, you can check the exact minute with sql:
      > select * from issues
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3025373b69016bb9ea6ce120f847aec143f4a1a9
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Sat Jun 11 10:50:41 2022 +0000

    Bug 30947: Add test for Illrequest checkout with custom due date
    
    To test:
     1) prove t/db_dependent/Illrequests.t
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e926de5e8f359acf6b8beff541fe13ce2a5ac49e
Author: Kevin Carnes <kevin.carnes@ub.lu.se>
Date:   Wed May 25 09:19:21 2022 +0000

    Bug 25669: (follow-up) Minor fixes
    
    Bulk doesn't support include_type_name, update requirement to
    Search::Elasticseach@6.80, and remove data type name from tests.
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 150a4b03f337f6a58869c67d3681caa64441d53a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 28 12:00:25 2022 +0000

    Bug 25669: Use include_type_name parameter in ES calls
    
    This patch includes the parameter:
    include_type_name
    on our ES calls
    
    It removes the deprecation warning we are seeing, and should allow using ES7 with no other chnages.
    
    For ES8 we will need to remove the hardcoded type,
    
    I would suggest a second patch, with a new syspref "ElasticsearchLegacyType" set to 'True' by default.
    Description can explain that this must be set to false, and data reindexed after upgrading to ES7 and before
    upgrading to ES8 - then we can drop this pref when we drop ES7 support
    
    When we drop ES6 support the pref can be set default true for upgrades, default 'false' for new installs
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a4c5bd58361900983f870f1c0e7f497ae3618c85
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jun 22 13:19:03 2022 +0000

    Bug 31013: Quote branchcodes in Elasticsearch limits
    
    This patch adds quoting when handling branchcodes in searching in order
    to prevent errors when branchcodes are reserved words in ES
    
    To test:
    0 - Be using Elasticsearch with Koha
    1 - Add a new branch code:OR name:Orly
    2 - Add an item to this branch
    3 - Use advanced search to limit search to only Orly
    4 - Oh really bad, the search fails!
    5 - Apply patch
    6 - Repeat search
    7 - Oh really good, the search succeeds
    8 - prove t/db_dependent/Koha/SearchEngine/Elasticsearch/QueryBuilder.t
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7a7bee59021728a30c631e2ee51f9b7778217a9f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu May 26 13:03:10 2022 +0100

    Bug 30822: Clarify that BatchCommitItems is a private function
    
    BatchCommitItems is only being used within this module and isn't
    mentioned in EXPORT_OK. This patch simply renames it to
    _batchCommitItems to take the _ standard for private functions and also
    adds a little hint to the POD of the function to clarify that the caller
    must trigger a re-index.
    
    JK: Amended patch to rename also the function in t/db_dependent/ImportBatch.t
        and fix typo "commiting" => "commiting"
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 809b6e701691118bbd1589428abc6fd1bada4b8c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri May 20 16:59:23 2022 +0100

    Bug 30822: Make BatchCommitRecords update the index in one request
    
    When committing staged marc imports to the catalogue we will often be
    importing a batch of records. We don't want to send one index request
    per biblio affected, we want to index them all after the records have
    been modified otherwise we will end up with multiple tasks per record
    (when items are also affected).
    
    Test plan:
    1) Use the stage marc record tool to stage and commit a set of records and
    confirm the behaviour remains correct.
    2) If using Elastic, check that only one indexing job is queued to take
    place resulting from the committed import.
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 02b029233326742ee11f897ee12a2a431f7ed946
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Jun 17 22:10:55 2022 +0200

    Bug 28355: (QA follow-up) Move Note to new line
    
    There is an existing pattern for the 'Note:' in pref
    descriptions, where it's always added on a new line.
    This changes the formatting to match that pattern.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5aa603fa301d3109811ddb3c470a9976566babf2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jun 17 12:00:34 2022 +0000

    Bug 28355: Add a note that SMS to email via mobile provider is not recommended
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ade61b5e0c185fd7263ab6f101b1a4082d0ea0dd
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Mon Jun 13 22:54:54 2022 +0000

    Bug 30958: OPAC overdrive search result page broken for translations
    
    Note: You will need a valid OverDrive subscription to test this.
    
    This patch fixes a JavaScript error thrown on the OPAC overdrive search
    results page for libraries using translation templates and who don't
    have the OverDrivePasswordRequired system preference = 'Required'.
    
    Test plan:
    1. Install the en-NZ translation: https://wiki.koha-community.org/wiki/Installation_of_additional_languages_for_OPAC_and_INTRANET_staff_client
    
    2. Enable the en-NZ language:
       - In the OPACLanguages system preference -> tick 'English New Zealand
         (en-NZ)' checkbox and untick 'English (en)'
    
    3. Fill in the OverDrive system preferences:
       - Make sure you set: OverDrivePasswordRequired = "Not required"
    
    4. Perform an OPAC search
    
    5. Click on the Overdrive results link
    
    6. Open the browser console and notice there is a JS error, and the
       OverDrive results do not load
    
    7. Apply patch
    
    8. Update the en_NZ translation:
    
    9. Repeat steps 4, 5 and 6 and notice there is no JavaScript error and
       the OverDrive results do display
    
    Sponsored-by: Melbourne Athenaeum Library, Australia
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7a7716b6d8039476a6cc2d6403092cc2df42458e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Dec 15 09:20:52 2021 +0000

    Bug 29504: (follow-up) Account for other blockers
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 49ef741405d0b81ba0cb37dd81fa9a4b5aba5bbb
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Nov 22 11:33:25 2021 +0000

    Bug 29504: Allow 'ADDITIONAL_MATERIALS' check to be confirmed
    
    The additional materials check when CircConfirmParts is enabled was
    errantly relying upon the 'FORCE_CHECKOUT' permission.  This patch
    updates the template to allow confirmation as well as cancellation of
    chekout.
    
    Test plan
    1. Set a staff member with circ permissions, but not FORCE_CHECKOUT
    2. Turn on CircConfirmItemParts
    3. Log in as staff member in step 1
    4. Attempt to checkout an item with a 952$3
    5. The only option given is the Continue button (with a red X) and when
       clicked, the item does not get checked out.
    6. Apply patch
    7. Repeat step 4.
    8. You should now have the option to 'Yes, check out (Y)' or
       'No, don't check out (N)'
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 407564e3940ad08030383078fd1ce5c530a19f2d
Author: Petro Vashchuk <stalkernoid@gmail.com>
Date:   Mon Jun 20 17:08:32 2022 +0300

    Bug 30997: Fix "CGI::param called in list context" warning in detail.pl
    
    CGI param found1 should be explicitly scalar,
    or else error log gets flooded with this warning:
    
    CGI::param called in list context from
    /usr/share/koha/intranet/cgi-bin/catalogue/detail.pl line 622
    
    This patch fixes it by working with it in a scalar context.
    The functionality still remains the same but warning doesn't flood
    error log.
    
    To reproduce:
    1. Open any biblio (details.pl) page.
    2. Check the error log and find the upper mentioned warning,
    check the timestamp to ensure that it was added when you loaded the page.
    3. Apply the patch.
    4. Load the page again, ensure that the same warning doesn't get added
    to the log file again.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 16ec30258e9ee9bfbd5bbcbf3039c6b1b3cc9082
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Jun 17 22:23:31 2022 +0000

    Bug 30989: (QA follow-up) Use uri filter on OPAC tag cloud page
    
    This fixes 2 links on the page:
    * The tag within the 'all tags' cloud
    * The tag shown in the 'your tags' table
    
    Test plan as before: Test with a tag like +++
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6895af827aa04d2cada9449e8e27884abe11ca2d
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Jun 17 21:26:55 2022 +0000

    Bug 30989: (QA follow-up) Use uri filter on staff detail page
    
    This applies the same fix as the first patch but to the staff
    interface detail page. With this fix, a tag like +++ can
    be clicked and the tagged records will show.
    
    To test:
    - Tag some records in the staff interface with something like +++
    - Go to the detail page of one of those recods
    - Click on the tag
    - Verify nothing is found
    - Apply patch
    - Repeat - all tagged records will show
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 997262f6fe7f47b5b6f0fd5cc1032538b3a79b26
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Jun 17 19:45:42 2022 +0000

    Bug 30989: Use uri filter where tag links are displayed
    
    TO test:
    1. Turn on:  TagsEnabled.
    2. Log in to the OPAC and create a tag like "LGBTQ+"
    3. Add that record to a list
    3. Now try  clicking on that tag from detail, results, and lists page.
    4. If you click on the link for the "LGBTQ+" you will get a 'no results found page'.
    5. Apply patch
    6. Try clicking on each of the tags in detail, results, and lists. They should work now.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 505b62b4d2ff9617733547d41088bdae37b4506d
Author: Petro Vashchuk <stalkernoid@gmail.com>
Date:   Mon Jun 13 15:02:28 2022 +0300

    Bug 30960: Fix JS error message when no pick-up location is selected when placing a hold
    
    It's possible to place item-level hold without selecting a pick-up
    location, which causes problems: if the item is then returned,
    Koha tells about a hold, but gives error 500.
    At patron's hold tab you see the number of holds, but cannot see the
    actual holds there. However, if you go to the title in question,
    then modify the hold so that it has a pick-up location,
    then the hold will work normally again.
    
    This patch fixes already existing but not working JS error message and
    ensures that hold cannot be made while pickup location is undefined.
    
    To reproduce:
    1. Go to admin page, to the libraries configurations, and disable
    pickup location for one of them.
    2. Pick any biblio that has items that have that same library as a
    default pickup location.
    3. When placing the item-level hold, notice that the pickup location
    dropdown box is empty by default. Keep it empty, place the hold.
    4. Go to the patron's page of the patron who you placed that hold for,
    check that it doesn't show the new hold.
    5. Apply patch.
    6. Repeat steps 2 and 3, it shouldn't let you make the item-level hold
    until you select a specific pickup location.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e32e7a6c9019ac93217f1b4322076e779d35dec4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 16 12:29:14 2022 +0200

    Bug 30972: Don't replace biblio's local cover images when uploading an image's image
    
    When attaching a new cover image to an item we should not replace cover
    images attached to the bibliographic record if "Replace existing covers"
    is ticked.
    
    Test plan:
    Attach 1+ image to a bibliographic record
    Attach 1 image to an item of this biblio
    Attach another image to the item and seect "replace existing covers"
    => Without this patch the images attached to the biblio are removed
    => With this patch applied only the images attached to the image are
    removed
    
    Same if you tick the checkbox when attaching an image to the biblio
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 54734f68f21a2d4d248e339d144b67e071317236
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Mar 7 11:30:35 2022 +0100

    Bug 30234: Fix local cover image display for other holdings
    
    Bug 26145 added the ability to add local cover images to items.
    If SeparateHoldings is set, items from other libraries are displayed in
    a separate tab, and not considered as visible. We have a JS test to
    assume that images not shown are not present, this only apply for the
    images for the bibliographic record, as they can come from different
    sources.
    
    Test plan:
    Turn on LocalCoverImages and SeparateHoldings
    Create a record with different items coming from different libraries
    Attach images to items and to the biblio
    Notice that with this patch you can see the images from the "Other
    holdings" tab
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 941e538122cdcaa610f14d1ff82950a13aa9557a
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Jun 20 07:03:17 2022 +0000

    Bug 30925: Fix category parameter for addbybiblionumber
    
    In bug 28959 category was replaced in favor of public. But
    unfortunately a few places were missed.
    This fixes the addbybiblionumber templates.
    
    Test plan:
    Add a biblio to a list from the search results using the Add to
    or Add to list button on OPAC/intranet.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 926def44c0e25c0ff6cb634a24dce3014075a3a3
Author: Petro Vashchuk <stalkernoid@gmail.com>
Date:   Fri Jun 3 19:10:03 2022 +0300

    Bug 29963: Do not prefill empty date fields with today's date
    
    Revert "Bug 29815: Pre-populate 'Date acquired' field when adding/editing items"
    commit bd197c64567fba6899f12e4897d786adf52384d8
    
    Items date fields in MARC framework with dateaccessioned.pl assigned as
    plugin automatically prefilled by it with today's date if empty on page
    load.
    
    This becomes big problem because it silently changes empty date fields
    in single item edit form with today's date. This drastically degrades
    UX because user won't noitce that fields were filled.
    
    Also, even when user aware about this problem, user is forced to clean
    the field manually each time they edit items with empty fields.
    
    Also in item batch edit tool the probability heavily increases to make
    mistake and leave those fields prefilled on mass.
    
    To reproduce problem with single item edit:
    1. Edit single item that doesn't have a date set in any of the date
    fields where dateaccessioned.pl in MARC framework assigned as plugin,
    see that the field got prefilled with today's date.
    2. Save the item. See that it overwrote the previously empty date.
    3. Apply the patch.
    4. Edit single item again, and ensure that the empty date fields don't
    get overwriten like it happened previously.
    
    To reproduce problem with bath edit:
    1. Edit items in batch for any biblio, see that the date fields where
    dateaccessioned.pl in MARC framework assigned as plugin is automatically
     set to current day's date.
    2. Apply the patch.
    3. Check the fields again, they should be empty after that.
    
    Signed-off-by: Alex Buckley <alexbuckley@catalyst.net.nz>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9b3e31222355d2353164ce18e48e31beefa50df0
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Jun 10 17:27:16 2022 +0000

    Bug 30938: Convert ColumnSettings to TableSettings
    
    To test:
    1. Apply this patch
    2. Go to /cgi-bin/koha/acqui/acqui-home.pl
    3. The columns button should be restored, make sure you can hide/show columns correctly.
    4. Go to Table settings and make sure you can hide columns properly by default.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a999c66f48b9c74b95642e22893b48e9e7fe275d
Author: Victor Grousset <victor@tuxayo.net>
Date:   Sat Jun 11 01:46:40 2022 +0200

    Bug 30733: Split strings differently
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 507e80e473b33aa463a22fd0fde3bbebba10eb94
Author: Victor Grousset <victor@tuxayo.net>
Date:   Mon Jun 13 05:29:00 2022 +0200

    Bug 30733: fix url => URL to merge with existing string
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dd4fb508d11a13c176c1184de1ce3428706692e7
Author: Victor Grousset <victor@tuxayo.net>
Date:   Mon Jun 13 04:49:00 2022 +0200

    Bug 30733: Undo some <span> additions that don't yield good strings
    
    They need more complex solutions that would be better in a follow up ticket
    to not drag this one too long.
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6ab2211f451d4d6abd1e9b0bba30dc2a2ef37dcf
Author: Victor Grousset <victor@tuxayo.net>
Date:   Sun Jun 12 01:42:40 2022 +0200

    Bug 30733: Simplify some singular cases
    
    To be sure translators don't think it's wrong and translate it plurally.
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4c8be7f38c2d147f7d729acd56ed1b6b3564b239
Author: Victor Grousset <victor@tuxayo.net>
Date:   Thu Jun 2 05:42:33 2022 +0200

    Bug 30733: Undo <span> in an ICS calendar file
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bbc24df30e5df5d4254140c7f8aef7943fb935f4
Author: Victor Grousset <victor@tuxayo.net>
Date:   Thu Jun 2 05:37:55 2022 +0200

    Bug 30733: Wrap one more string in <span>
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9e0d824d8725acaa579bd413da99d248786d8283
Author: Victor Grousset <victor@tuxayo.net>
Date:   Thu Jun 2 04:46:27 2022 +0200

    Bug 30733: Undo bad handling of a plural case
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9062a7f793e6ee8c50be405f356debe9ec50eed0
Author: Victor Grousset <victor@tuxayo.net>
Date:   Thu Jun 2 03:35:23 2022 +0200

    Bug 30733: Fix string context lost due to being in two parts
    
    Due to conditions. Things like "Edit batch" need to be keept in one
    strings.
    
    Also removed some capitalization because it wasn't needed and wasn't
    consistend with <title> and <h1> which had now capitalization.
    
    Also fixed patron edit-batch.tt and edit-layout.tt because they were
    incomplete in regard to their label counterparts. They had the condition
    on description and batch_id but weren't displaying anything different
    between the two cases.
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c7cfcec2f27d1c668bceb36df6d4cf0c026695c7
Author: Victor Grousset <victor@tuxayo.net>
Date:   Mon May 30 01:45:29 2022 +0200

    Bug 30733: Move all semicolons inside the translatable strings
    
    In the 1st patch, sometimes they where left out
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7758a0248e94b97fb0bc7e9a9c58f37039596d75
Author: Victor Grousset <victor@tuxayo.net>
Date:   Wed May 11 17:08:32 2022 +0200

    Bug 30733: Simplify translatable strings
    
    And a few minor fixes when they where causing issues for
    translatability.
    And rephrased a string about password reset to have it identical to
    other strings with the same meaning.
    
    Simplified via wrapping strings with <span> to split to huge
    concatenated strings with a lot of %s everywhere.
    
    == Test plan ==
    This patch needs mainly proof reading. Still it's possible to do some
    basic testing to demonstrate that adding a <span> in an IF doesn't
    break anything.
    Pick in one of the 110 modified templates a string that you know how to
    display. Otherwise:
    1. acquisitions => vendor => basket => add to basket =>
       search "from existing record" => add order
    2. Cancel the order
    3. You see without issue "Bibliographic record will not be deleted"
    4. administration => Patron categories
    5. Try to delete a used and unused category
    6. You see as expected
       Category XXXX is in use. Deletion not possible!
       and
       Confirm deletion of category XXXX
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bccec37915804da15068a632cf501cef2f2651a6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 16 11:36:43 2022 -0300

    Bug 30924: DBRev 22.06.00.003
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cfb293a08a3a343213389c681a0a55be936cfd13
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 13 14:47:12 2022 +0200

    Bug 30954: (bug 27344 follow-up) Remove background_jobs_update_elastic_index.inc
    
    includes/background_jobs_update_elastic_index.inc
    vs
    includes/background_jobs/update_elastic_index.inc
    
    Both exist and have been added by bug 27344.
    The first one is not used.
    
    Test plan:
      git grep background_jobs_update_elastic_index.inc
    must not return any occurrences (outside of POs)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f176c0b04aa6fc8c8b3ea97f01d0a9d3aa7fe4ab
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Jun 15 21:55:51 2022 -1000

    Bug 30973: Serials search fix body id
    
    The serials search page serials/serials-search.pl has HTML body id :
      <body id="ser_serials-home" class="ser">
    It is the same as serials home page.
    
    This patch replaces with id="ser_serials-search"
    
    Test plan :
    1) Go to Serials > Advanced search
    2) Look at HTML code
    3) Check you see <body id="ser_serials-search" class="ser">
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 85dc90c1514aaf9a7b57d5fed2efd79bc5c29321
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 16 10:22:02 2022 +0200

    Bug 30974: Set size for indexing jobs to 1
    
    job's size is the number of records to index, but when finished the progress is always set to 1.
    
    Wich leads to: finished 1/42
    
    Test plan:
    Don't apply this patch
    Use the batch item modification tool to update more than 1 item
    Notice that the new indexing job has a size of the number of items you
    modified
    When finished, the job detail shows "Finished. 1/X"
    Apply this patch, repeat
    Notice that now the progress shows 0/1 before the job is done, then 1/1
    when finished
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d0c4303c5a2a6b9548d140909114879505e9d943
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jun 15 16:26:51 2022 -0300

    Bug 30971: (follow-up) Fix recall.branchcode occurences
    
    This fixes a couple cases actually.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9991dc8811ab2235117e79aabcc746dd9e56085a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jun 15 16:18:08 2022 -0300

    Bug 30971: (follow-up) Fix one more occurence
    
    To test:
    1. Run:
       $ git grep 'recall.itemnumber'
    => SUCCESS: No more occurences
    2. Run:
       $ git grep 'recall.biblionumber'
    => SUCCESS: No more occurences
    3. Run:
       $ git grep 'recall\->biblionumber'
    => SUCCESS: No more occurences
    4. Run:
       $ git grep 'recall\->itemnumber'
    => FAIL: One standing occurence
    5. Apply this patch
    6. Repeat 4
    => SUCCESS: No more occurences
    7. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b73ab06b48a38afbdddd3f6a190b2c63566db0a3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jun 15 16:14:22 2022 -0300

    Bug 30971: Recalls log viewer error
    
    This patch addresses the itemnumber and biblionumber attributes for
    recalls having been renamed.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5e5b642067bb108e4270aa8d5aab130ab3403be8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Apr 27 13:33:09 2022 +0200

    Bug 30420: Rename Koha::Patron->get_overdues with ->overdues
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 123a55849a823f144f13f383461ec33ca3602944
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jun 10 08:18:37 2022 +0100

    Bug 29623: (QA follow-up) Add POD to Koha::CirculationRules
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6b1c4d00f7f5cf300c7f824d304471853f4b4e01
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jun 10 08:11:28 2022 +0100

    Bug 29623: (QA follow-up) Add POD to Koha::Cache::Lite
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 61dbe014af3fb09189a89d5b0cd8f86ff84764b2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 31 07:36:57 2022 +0200

    Bug 29623: Don't flush the whole L1 cache
    
    We shouldn't flush L1 cache completely, only the values related to the
    circulation rules.
    It is not correct to update the value of the value we are currently
    setting (because of the inheritance concept of the circ rules).
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c373a253e6406bd6c52de615302cd7369c4d6d94
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Dec 2 17:27:43 2021 +0100

    Bug 29623: Cache circulation rules
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6eb56acba6a54f12c9d893206947045c2985c9b7
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 7 11:33:48 2022 +0000

    Bug 30917: Improve course reserves breadcrumbs
    
    This patch adds course name to the breadcrumbs and page title on the
    pages for adding items to a course.
    
    To test, apply the patch and go to course reserves.
    
    - Click a course to view it.
    - Click the "Add reserves" button.
    - In the breadcrumbs you should see:
    
      Home > Course reserves > [Course name] > Add reserves
    
    - [Course name] should link correctly to the course detail view. In the
      page title you should see:
    
      Add reserves > [Course name] > Course reserves > Home
    
    - Enter a barcode or biblionumber and proceed to the next step. Confirm
      that the same changes are in effect on the second page.
    - Perform the same tests in the "Batch add reserves" process.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 730719c90c3f6eeef7ca3713282878b3ab7be527
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jun 14 08:21:42 2022 -0300

    Bug 30409: (QA follow-up) Avoid uninitialized variable warnings
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2538c846f48a86e0d557ec3238b93a850b5a0c58
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Sun Jun 12 08:12:23 2022 +0000

    Bug 30409: (QA follow-up) Fix grammar in syspref help text
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e2611c919dd5287402b89f219d75d3a013407123
Author: Petro Vashchuk <stalkernoid@gmail.com>
Date:   Sun Apr 3 00:02:40 2022 +0300

    Bug 30409: barcodedecode() should always trim barcode
    
    Barcode is trimmed of leading/trailing whitespaces in many instances
    before the barcodedecode sub was called. This patch instead makes that
    barcodedecode sub is going to trim it itself and removes unnecessary,
    and repetitive code that was used before barcodedecode was called.
    
    Steps to test:
    1. Edit item with any barcode, add a bunch of whitespaces at the start
    and at the bottom of it. Save the item. Ensure that this action ruins
    the barcode and ensure that the spaces are still there by editing the
    same item again.
    2. Apply the patch.
    3. Edit the same item again in the same fashion. Ensure that now all
    whitespaces are getting trimmed and it doesn't affect the barcode in
    any negative way.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 824b676de7b0a6b288c1dea31ad839c662b17893
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue May 24 15:29:04 2022 +0100

    Bug 30824: (follow-up) POD
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bb6be983d662cf15ecb29382cffaadfba56b2c79
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 20 14:29:58 2022 +0000

    Bug 30824: Improve performance of BatchCommitItems
    
    This makes two simple changes:
    - Limit TransformMarcToKoha to the fields we need
    - Pass forward the biblioitemnumber when adding items to a new biblionumber
    
    Profiling with NYTProf I saved ~8-9 seconds importing around 400 bibs/1000 items
    
    Reducing calls in item store to use a passed biblionumber was the largest gain.
    
    To test:
    1 - Import some records and items
    2 - Verify values etc., revert
    3 - Apply patch
    4 - Import again
    5 - Verify values etc. same as before
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 71a95d35574db31e21a6815fc696ee2b446c617e
Author: Johanna Raisa <johanna.raisa@gmail.com>
Date:   Tue May 17 08:58:15 2022 +0300

    Bug 30780: Librarians with only "place_holds" permissions can not update holds data via REST API
    
    This patch enables librarians with only "place_holds" permissions to cancel, suspend and resume holds via REST API.
    
    Test plan:
    1) Try to cancel or suspend a hold with only "place_holds" permissions
    2) See that it is forbidden.
    3) Apply the patch
    4) Cancel a hold again
    5) The cancellation succeeds
    6) prove t/db_dependent/api/v1/holds.t
    
    Sponsored-by: Koha-Suomi Oy
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ccfedaa5d9039decb5cf61264621d360e75b94ac
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jun 13 11:46:20 2022 -0300

    Bug 30780: Regression tests
    
    This patch lowers the used permissions on the suspend/resume tests, and
    adds tests for fine-grained permissions on cancelling a hold.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d5fdd1217c74757d6b3d374912b158912b0810d9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 8 11:56:30 2022 +0200

    Bug 30904: (bug 24387 follow-up) Fix library modification of additional contents
    
    Modifying an existing element of additional content (News) by changing
    the library causes a duplication of the entry on the Additional contents
    (News) list.  A subsequent attempt of deleting one of the entries results
    in deleting both of them.  This is due to the fact that after
    the unwanted duplication all the  entries share the same
    additional_contents.code.
    
    Test plan
    =========
    
    1. Create a piece of news under Tools > News.
    2. After having saved it make a modification by changing the library.
       It should result in two rows in the table.
    3. Delete one of the lines with Delete button.  Both lines will
       disappear.
    4. Apply the patch.
    5. Repeat the steps 1 and 2.  Only the one (the modified) entry should be
       present in the table.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c16e366af58bd41783a478bf9d7d8fc3257bc874
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Wed May 18 12:16:42 2022 +0300

    Bug 30798: Change column order on account-fines table column settings
    
    Columns Home library and Checked out from are in wrong order
    on table settings. Because of this hiding Home library actually
    hides Checkout out from column and vice versa. This patch changes
    order of these columns on columns_settings.yml
    
    To test:
    1) Navigate to columns settings page and modify
    account-fines tables column.
    => Note that if you hide  column checked_out_from, column
    home_library is hidden on patrons account page.
    2) Apply patch and restart plack etc.
    => Column checked_out_from should now be hidden.
    
    Sponsored-by: Koha-Suomi Oy
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d3e6c3c7090ed706a152c6c465efc767fc0428c1
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jun 13 10:17:22 2022 -0300

    Bug 30912: Fix db rev 21.12.00.016
    
    This is a mix of Nick's patch and Jonathan's comment on it. I tested it
    with KTD using MySQL 8 and it works correctly.
    
    To test:
    1. Launch KTD with bells and whistles:
       $ docker compose -f docker-compose.yml \
                        -f docker-compose.mysql8.0.yml \
                        up -d
    2. Inside of it, do:
       $ koha-mysql kohadev
       > update systempreferences set value="21.1200015" where variable="version";
       > \q
       $ restart_all
       $ updatedatabase
    => SUCCESS: All good :-D
    3. Run:
       $ koha-mysql kohadev
       > update systempreferences set value="21.1200015" where variable="version";
       > ALTER TABLE user_permissions DROP PRIMARY KEY;
       > \q
       $ updatedatabase
    => FAIL: You get:
    Upgrade to 21.12.00.016  [12:47:09]: Bug 30060 - Update user_permissions to add primary key and remove null option from code column
    ERROR - {UNKNOWN}: DBI Exception: DBD::mysql::db do failed: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'IF EXISTS `PRIMARY`' at line 1 at /kohadevbox/koha/C4/Installer.pm line 739
    4. Apply this patch
    5. Run:
       $ updatedatabase
    => SUCCESS: Update goes well
    6. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 48d4b016ab8f5b7199efe75384c592e39e5dfce6
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Jun 1 21:23:23 2022 -1000

    Bug 30883: Authorities merge is limited to 100 biblio with Elasticsearch
    
    In C4::AuthoritiesMarc::merge, we search all biblio records using an authority with Koha::Authorities->linked_biblionumbers().
    This method uses simple_search_compat() with no results limit, even saying in comment :
    https://git.koha-community.org/Koha-community/Koha/src/commit/44d6528b566e5c16eba9b15f8aa24667293766c3/Koha/Authorities.pm#L80
    
    With Zebra searchengin it is correct.
    
    But not with Elasticsearch, there is an hardcoded limit at 100 in case no limit is given :
    https://git.koha-community.org/Koha-community/Koha/src/commit/44d6528b566e5c16eba9b15f8aa24667293766c3/Koha/SearchEngine/Elasticsearch/Search.pm#L346
    
    This means authorities links are wrong after a merge or an edit in case the authority is used in more than 100 biblio records.
    
    :(
    
    I propose to fix by using by default the real server max given by Koha::SearchEngine::Elasticsearch::Search::max_result_window().
    This will allow a huge limit nearly impossible to reach.
    See Bug 30882 to how increase this limit.
    
    Test plan :
    1) Use Elasticsearch search engine
    2) Use an authority id=111 linked to 200 biblio records
    3) Perform a search 'an:111', you get 200 results
    4) Create a new authority id=222 linked to 2 biblio records
    5) Perform a search 'an:222', you get 2 results
    6) Perform a merge of the two authorties, keeping id=222
    7) Perform a search 'an:111'
       without patch you get 100 results
       with patch you get no results
    8) Perform a search 'an:222'
       without patch you get 102 results
       with patch you get 202 results
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a6166405c7d7886466a8d1264c98970b4973f77f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jun 7 14:11:06 2022 +0200

    Bug 30914: (24153 follow-up) Fix cleanup_database.pl --transfers --old-reserves
    
    Silly mistake, 'delete if verbose' must be 'delete if confirm'
    
    Test plan:
    Try the cleanup_database.pl script to delete transfers and old issues.
    Using --transfers --old-reserves and the --confirm flag the entries must be
    removed
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 82a139794626ebeaa372611ef8d4d95ee849d1f1
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 9 12:03:48 2022 -0300

    Bug 30924: DBIC update
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 54372681bec7e81e044e32644330e38093408f8f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 9 11:58:44 2022 -0300

    Bug 30924: Add missing branchtransfers.reason value for recall cancellation
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 46387c3845b7a22a661e79910eb4787795f3c594
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 9 11:09:18 2022 -0300

    Bug 30924: Fix transferstoreceive.pl explosion on recalls
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 523a2f297d09015818eec2785de5cc538ff65852
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 8 11:39:43 2022 +0200

    Bug 30399: Make Patron.t pass even if mandatory attributes exist
    
    t/db_dependent/Koha/Patron.t is failing if mandatory attributes already
    exist in the DB. We can make it pass easily by deleting all the
    attributes before we run the tests.
    
    Test plan:
      prove t/db_dependent/Koha/Patron.t
    must return green even if one mandatory patron attribute exists.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a1739ea43bfb7110059446989483f3282784527c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jun 10 14:47:44 2022 +0000

    Bug 12630: Rebase tests and cover CheckReserves
    
    It turns out we do honor reservedate in CheckReserves, so a hold with a lower priority will
    fill before a hold in the future. I add tests to cover this and fix the old tests to pass again
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2369076f99ce3415bcfe6ced74cc3edb6aef5a09
Author: Jonathan Druart <jonathan.druart@biblibre.com>
Date:   Wed Nov 5 10:32:21 2014 +0100

    Bug 12630: Add regression tests
    
    Verify that the 2 tests failed before applying this patch and return
    green after.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0ca445fca8262ad3a0e2b44c7516417e81532c43
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Aug 25 10:17:28 2014 -0400

    Bug 12630: (QA follow-up) - Rename _ShiftPriorityByDateAndPriority to _ShiftPriority
    
    Signed-off-by: Jonathan Druart <jonathan.druart@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 05ac7e0d4a1d4247df43f4a83ead509cfaffa04c
Author: Olli-Antti Kivilahti <olli-antti.kivilahti@jns.fi>
Date:   Wed Jul 23 08:41:47 2014 +0300

    Bug 12630: Prioritizing "Hold starts on date" -holds causes all other holds to be prioritized as well!
    
    -------------------------
    -- REPLICATE LIKE THIS --
    -------------------------
    
    0. Enable AllowHoldDateInFuture-system preference!
    
    1. Select a biblio with some holds.
    2. Place a hold with the "Hold starts on date"-attribute set to future.
    3. More the specific hold up on the priority queue.
    4. Add another normal hold, observe how it is prioritized with the "Hold starts on date"-hold, leaving old holds to the prioritization queue tail.
    
    Unfair eh?
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit beb663836b45a77f45195774133cc9b78957fcd5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 9 10:22:16 2022 -0300

    Bug 30907: Fix incorrect uses of Koha::Recall->item_level_recall
    
    This attribute name was changed to *item_level* but this two remaining
    places kept calling it with the old name.
    
    To test, verify things don't explode when looking at checkouts with
    recalls and also in the log viewer.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 972330bc9e13e40564885bcf0ef1723abcc51772
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Jun 6 21:02:25 2022 +0000

    Bug 30585: Fix library options on table settings for course_reserves_table
    
    The table on  course-details.pl has columns for both home library and jolding library,
    but course_reserves_table in the Table configuration admin area only has a
    single toggle for 'library'.
    
    Hiding 'library' hides the home library column. Anything after that is off by one.
    Hiding 'staff_note' actually hides the holding library column, 'link' hides
    Public note, etc.
    
    To test:
    - Add a course and some course reserves
    - Go to table configuration and hide 'staff note'
    - Look at the list of course reserves for your course
    - Verify the wrong column was hidden
    - Apply patch
    - The configuration area now shows holding_library and home_library
      as separate options.
    - Change the settings and verify everything now hides/displays correctly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ed4250e7a9c8a83f8a538b5088f8867c630c72a1
Author: Michal Urban <michalurban177@gmail.com>
Date:   Wed Jun 8 11:40:42 2022 -0400

    Bug 30768: Capitalizing "pin" in 2FA setup
    
    Change of text from "pin" to "PIN" in the 2FA setup interface.
    This slight changes clarifies that "PIN" is an acronym,
     and increases user comprehension
    
    To test:
    1) Log in as an Administrator
    2) Enable TwoFactorAuthentication
    3) Log in to a user with superlibrarian permissions.
    4) On the user profile page, click the "More" dropdown button,
    click "Manage Two-Factor
    5) Check that "pin" is displayed in lowercase, in both instances.
    6) Apply patch.
    7) Refresh the page and observe that "pin" has changed to "PIN"
    8) Sign off.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cc40bbf1952f67b2e46bae0cf71b8d4fbe0bea3d
Author: Kevin Carnes <kevin.carnes@ub.lu.se>
Date:   Thu Jun 9 08:12:56 2022 +0200

    Bug 30844: Ensure that allow_nonref is enabled when using older versions of JSON
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5e8dccb671caa7dbff68461661935ecc253dae21
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jun 8 13:41:14 2022 -0300

    Bug 30813: (follow-up) Fix tests import
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3f47027a574f936f1f95d0bc1860e47524430e95
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Apr 14 12:39:05 2022 +0000

    Bug 30508: Do not display OPAC message about block from holds when OPACHoldRequests is disabled
    
    This patch adds a check for the OPACHoldRequests to determine whether a
    message should be shown to patrons whose account is over the
    maxoutstanding limit.
    
    To test, apply the patch and set the "maxoutstanding" system preference
    to a low value. Set OPACHoldRequests to "Allow."
    
    - Log in to the OPAC as a patron who has outstanding fines or charges
      which exceed the maxoutstanding value you set.
    - You should see a message on the "Your summary" page, "Holds are
      blocked because your fine balance is over the limit."
    - Set OPACHoldRequests to "Don't allow" and refresh the "Your summary"
      page in the OPAC. The message should disappear.
    
    Signed-off-by: Amit Gupta <amit.gupta@informaticsglobal.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d491b15c55804500a96ae7065d459d6b84126069
Author: Séverine Queune <severine.queune@bulac.fr>
Date:   Tue Apr 5 13:09:08 2022 +0000

    Bug 29312: Remove unnecessary dot
    
    This patch removes an extra point after the number of shown results.
    
    Test plan :
     - don't apply patch
     - run a report that brings you more than 20 results, e.g. SELECT * FROM biblio LIMIT 50
     - see extra ' .' after the number of shown results
     - apply patch
     - run the report again and see the point isn't displayed anymore
     - check the behaviour is still correct when you change the number of rows displayed
     - sign off !
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ed81d6bac6db499412a22f20ac45003da1aab0b1
Author: Shi Yao Wang <shi-yao.wang@inlibro.com>
Date:   Wed May 18 10:59:39 2022 -0400

    Bug 27519: Normalize Show/Don't show in system preferences
    
    Replace Display/Don't display (and some other pairs) by Show/Don't show in system preferences.
    
    Test plan:
    1- Go to administration > system preferences
    2- View any system preference with Display/Don't display pair of options
    (e.g. OPACAcquisitionDetails)
    3- Apply the patch
    4- Refresh the page and notice it is now a Show/Don't show pair instead
    5- Loop the steps with other system preferences until satisfied
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c3fd42b5507af58d0f12a2bb36f3fb62df54865d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu May 19 12:53:18 2022 +0100

    Bug 30807: Migrate to patron-title in pay and paycollect
    
    This patch updates the member-flags template to use the patron-title.inc
    include wherever patron names are referenced.
    
    Test plan
    1) Navigate to a patron and click through to their accounts tab
    2) Note how the patron name displays in the title, breadcrumb and
       headings
    3) Click through to make a payment
    4) Note how the patron name displays in the title, breadcrumb and
       headings
    5) Apply the patch and reload the page
    6) Confirm the patron name still appears in each location and is
       consistently formatted and linked as you would expect
    
    Note: This patch also removes a superflous hidden title form element
    that was simply passed to and from the controller but not actually used
    in any way.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8b460db131f83e361788d53b3a101565eab302db
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu May 19 12:34:01 2022 +0100

    Bug 30806: Migrate to patron-title in member-flags
    
    This patch updates the member-flags template to use the patron-title.inc
    include wherever patron names are referenced.
    
    Test plan
    1) Navigate to a patron and click through to edit their permissions
    2) Note how the patron name displays in the title, breadcrump and
       headings
    3) Apply the patch and reload the page
    4) Confirm the patron name still appears in each location and is
       consistently formatted and linked as you would expect
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1334e89ed0013d38fb10e134f46268384b239144
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Jun 7 12:44:03 2022 +0000

    Bug 30813: (QA follow-up) Adjust three use statements
    
    Altough we used the namespace when calling, the intention of
    bug 17600 was that we do import the routines that we are
    calling here.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7f10ee6df0c1f0dbe99900da4e0d9ed29d29a42f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu May 26 11:54:44 2022 +0000

    Bug 30813: (follow-up) Correct C4::Breeding call
    
    This patch changes the call to use the fully qualified name and
    adds import to C4::Breeding, Koha::MetaSearcher, and removes import
    from Koha::MetadataRecord
    
    Additionally it replaces missing fields from the update to using TransformMarcToKoha
    
    Lastly, it reduces the fields used when saving the bredding record to the reservoir
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ef845aa682f69a4fce3e1ad099a2cd60a4299cf8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 20 11:26:29 2022 +0000

    Bug 30813: (follow-up) ImportBatch updates
    
    Missed these in the original commits
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 69984391e4323e6e50206a72e46e71e136e11272
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 20 10:08:11 2022 +0000

    Bug 30813: Remove Koha::MetadataRecord::getKohaField
    
    This was essentially a wrapper around TransformKohaToMarcOneField
    
    After changing and updating, it seems easier not to create the intermediary
    object and to just transform the data
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6f36a3a6ba9fb890717facf25b77f5e9ae2684f5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu May 19 21:39:49 2022 +0000

    Bug 30813: Remove TransformMarcToKohaOneField
    
    To test:
    1 - prove -v t/db_dependent/Biblio/TransformMarcToKoha.t t/db_dependent/Breeding.t
    2 - Test Z3950 search in advanced catalog editor
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 29b62b63a37bdab8f66010bebbc4e44e8d8012e7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu May 19 20:10:35 2022 +0000

    Bug 30813: Adjust TransformMarcToKoha to take kohafields parameter
    
    This adjusts the routine to accept an arrayref of koha fields to process
    
    To test:
    prove -v t/db_dependent/Biblio/TransformMarcToKoha.t t/Biblio.t
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ee669178f698ad35ce6a38ae487ca0ebd06b6911
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu May 19 19:53:16 2022 +0000

    Bug 30813: Update TransformMarcToKoha to accept a hashref
    
    This patch updates all the calls to pass a hasref rather than an array
    
    It also removes the no longer used framework parameter
    
    To test:
    prove -v t/Biblio.t t/db_dependent/Biblio/TransformMarcToKoha.t
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 24c4b408ff724bfe3dd19a46ad001188aafd4350
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu May 19 19:21:27 2022 +0000

    Bug 30789: Improve performance of AddBiblio
    
    AddBiblio calls TransformMarcRecordToKoha. We are only interested in getting biblio and biblioitems info, so we can pass 'no_items' to save some field lookups
    
    Benchmarking saw a ~75% increase in the performance of this call
    
    To test:
    1 - Stage and import some records
    2 - Confirm it works the same before and after patch
    3 - Add a biblio via cataloguing, confirm it works
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 19068801ef6fc4847de426ef764bc32f98c4856e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jun 8 11:25:26 2022 -0300

    Bug 30850: DBRev 22.06.00.002
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 33df93f4c0190949d7f7f72b7ed12f220fa92cd1
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jun 3 06:23:38 2022 +0000

    Bug 30850: (QA follow-up) Cosmetic changes to atomic update
    
    No need to encode, etc.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e0f1f666a88526a20cf0f3c52aec3e9b31501d02
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Thu Jun 2 10:21:09 2022 -0400

    Bug 30850: dbrev to inform existing users of the mapping change
    
    This patch adds a message in a dbrev to inform users of existing
    installations that they might want to add a mapping from 110$a to
    biblio.author
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ea3a5b37c15b51dcc3700f4b1c01801d1334de84
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed May 25 18:43:33 2022 -0400

    Bug 30850: Add default mapping for biblio.author to 110$a (MARC21)
    
    This patch adds a mapping to biblio.author in 110$a in the default framework
    
    Note: I added lots of tests for different scenarios, I'm not sure it's necessary to test everything. I don't want this to be a deterrent! The first one is necessary, the rest are use cases.
    
    Note 2: I don't work with ktd so maybe the steps for loading new frameworks are different, sorry about that, I honestly don't know another way to do it.
    
    Test 1 - basic test
    Before applying patch,
    1- Create a new record with a corporate author (110$a)
    2- Query the database, author should be null
    select author from biblio where biblionumber = XXXX;
    
    (do other control tests if you want/need before applying the patch)
    
    3- Apply patch
    4- Delete frameworks
    delete from biblio_framework;
    delete from marc_subfield_structure;
    delete from marc_tag_structure;
    5- Load new frameworks
    ./misc/load_yaml.pl -f installer/data/mysql/en/marcflavour/marc21/mandatory/marc21_framework_DEFAULT.yml --load
    6- Edit the record, don't change anything and save it
    7- Query the database, author should be filled
    8- Go to Administration > MARC Bibliographic framework test, everything should be OK
    
    Test 2 - checkouts table
    Before applying patch,
    1- Create a new record and item with a corporate author (110$a)
    2- Checkout the item for that record to a patron
    Note that the author is not listed in the checkouts table
    3- Apply patch
    4- Delete frameworks
    delete from biblio_framework;
    delete from marc_subfield_structure;
    delete from marc_tag_structure;
    5- Load new frameworks
    ./misc/load_yaml.pl -f installer/data/mysql/en/marcflavour/marc21/mandatory/marc21_framework_DEFAULT.yml --load
    6- Edit the record, don't change anything and save it
    7- Refresh the checkouts table, the author should be listed
    
    Test 3 - notices and slips
    Before applying patch,
    1- Go to Tools > Notices & slips
    2- Edit ISSUESLIP and add <<biblio.author>> after <<biblio.title>>
    3- Save the notice
    4- Create a new record and item with a corporate author (110$a)
    5- Checkout the item for that record to a patron
    6- Print the checkout slip
    Note that the author is not listed on the slip
    7- Apply patch
    8- Delete frameworks
    delete from biblio_framework;
    delete from marc_subfield_structure;
    delete from marc_tag_structure;
    9- Load new frameworks
    ./misc/load_yaml.pl -f installer/data/mysql/en/marcflavour/marc21/mandatory/marc21_framework_DEFAULT.yml --load
    10- Edit the record, don't change anything and save it
    11- Print the checkout slip, the author should be listed
    
    Test 4 - labels
    Before applying the patch,
    1- Create a new record and item with a corporate author (110$a)
    2- Go to Tools > Label Creator
    3- Create a label batch with that item
    4- Export the batch in PDF using the Avery 5160 template and 'Label test' layout
    Note that the author is not listed
    5- Apply patch
    6- Delete frameworks
    delete from biblio_framework;
    delete from marc_subfield_structure;
    delete from marc_tag_structure;
    7- Load new frameworks
    ./misc/load_yaml.pl -f installer/data/mysql/en/marcflavour/marc21/mandatory/marc21_framework_DEFAULT.yml --load
    8- Edit the record, don't change anything and save it
    9- Export the label batch again, the author should be listed
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9d8d9321e800e0ccfda895a9060b2800947982e8
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu May 12 04:09:58 2022 +0000

    Bug 30738: Log warnings for background MARC import
    
    This change logs warnings from the CGI background MARC import.
    
    Test plan:
    0) Apply patch
    1) Export a record with an item
    2) Update the 952$f subfield to "Circulation" (any value over 10 chars)
    3) Import the record and try to add the item
    4) The import will stay stuck with "Importing" status and 0% job
    progress
    5) Check the /var/log/koha/kohadev/intranet-error.log file
    and notice there's an error with the following text:
    "Data too long for column 'coded_location_qualifier' at row 1"
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 556a910021883e4d27d499747559dc2ee102ce05
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jun 7 16:56:34 2022 -0300

    Bug 30923: Remove EXPERIMENTAL mark on RESTOAuth2ClientCredentials
    
    The feature is not experimental at all.
    
    To test:
    1. Search for the RESTOAuth2ClientCredentials syspref
    => FAIL: It says it is an experimental feature
    2. Apply this patch and reload
    3. Repeat 1
    => SUCCESS: No longer marked as experimental
    4. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 129e353685f0e0a7552a03c771924012d7890c6b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Jun 7 14:11:23 2022 +0000

    Bug 30899: Correct dbrev 211200041
    
    Replace DROP CONSTRAINT by DROP FOREIGN KEY.
    
    Note: It seems that we do not need a new dbrev for master. A developer
    could follow test plan below to correct if really needed.
    
    Test plan:
    
    NOTE: When you check show create table, verify that you see an index for category_code and a foreign key called borrower_attribute_types_ibfk_1.
    
    [1] cp installer/data/mysql/db_revs/211200041.pl installer/data/mysql/atomicupdate/
    [2] run updatedatabase; check show create table
    [3] alter table borrower_attribute_types drop foreign key borrower_attribute_types_ibfk_1; alter table borrower_attribute_types drop index category_code; RUN updatedatabase again; check show create table
    [4] alter table borrower_attribute_types drop foreign key borrower_attribute_types_ibfk_1; ALTER TABLE borrower_attribute_types ADD CONSTRAINT category_code_fk FOREIGN KEY (category_code) REFERENCES categories(categorycode); RUN updatedatabase again; check show create table
    [5] rm installer/data/atomicupdate/211200041.pl
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d9e8a0e9d23a62e64a1b67e96e0dd2de9613e2ab
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jun 7 09:36:31 2022 -0300

    Bug 13614: Compiled CSS
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8262613b25b481f2eaa68ca8c434145a902c5df5
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 26 16:44:35 2022 +0000

    Bug 13614: Replace usage of YUI on basket groups page
    
    This patch updates the basket groups interface so that it doesn't rely
    on YUI to move baskets in and out of groups. The patch also removes
    all YUI assets and many long-obsolete references to YUI-related classes
    and IDs.
    
    To test, apply the patch and rebuild the staff interface CSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client)
    
    - Go to Acquisitions.
    - Locate a vendor with multiple closed baskets.
    - Click "Basket groups" in the sidebar menu.
    - Create or edit a basket group.
    - On the basket group page you should see the basket group form in one
      column and ungrouped baskets in another.
    - Both grouped and ungrouped baskets should be in a sortable
      DataTable.
    - Test that when you click the "Add to group" button on an ungrouped
      basket the row is removed from the table of ungrouped baskets and
      added to the table of grouped baskets.
      - The button text on the row should now read "Remove."
    - Test the reverse operation: Clicking "Remove" on a grouped basket
      should move it to the table of ungrouped baskets.
    - Test that when all baskets are moved out of either of the tables a row
      is displayed with a message specific to that table, e.g. "There are no
      ungrouped baskets."
    - Test that the basket group saves correctly when zero or more baskets
      are added to the group.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3a1807e56d29f1a13d9ba11aec7950f955fa7ebe
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 1 14:04:47 2022 +0200

    Bug 30877: use List::MoreUtils::uniq from recalls_to_pull.pl
    
    Test plan:
    Confirm that "Recalls to pull" is still working correctly
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dc7a191db34af43bd1d4b1ec60a119324e7f4c10
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 31 07:58:59 2022 +0200

    Bug 30539: (bug 24161 follow-up) Fix typo in DBrev
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7704f51d5131d3f1104244a705294db614eae76e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Feb 9 10:05:12 2022 -0300

    Bug 30057: Move virtualshelf-related exceptions to a separate library
    
    This patch moves the not-generic virtualshelf-related exceptions to
    their own file. Callers are adjusted as required.
    
    To test:
    1. Run:
       $ kshell
      k$ prove t/db_dependent/Virtualshelves.t
    => SUCCESS: Tests pass
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: Tests pass
    4. Check virtualshelves work as expected
    5. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3f784ea61318818188a102a4d81e2aece1899e74
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Jun 6 13:16:33 2022 +0200

    Bug 30891: (QA follow-up) Add check to patron details page
    
    Adds a similar check to the patron details shown when selecting
    the details tab in the patron account in the staff interface.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit febacd36e121185546c87a413e6644dcfe0e9be6
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jun 2 10:23:08 2022 -0400

    Bug 30891: SMS provider shows on staff side even if SMS::Send driver is not set to "Email"
    
    It appears that in my original submission ( Bug 9021 ),
    I hid the SMS provider selector unless the SMS::Send
    driver was set to "Email", but only on the OPAC,
    not on the staff interface!
    
    Test Plan:
    1) Set SMSSendDriver to anything except "Email"
    2) Note the SMS Provider pulldown shows in the patron editor
    3) Apply this patch
    4) Reload the page, SMS Provider id should now be gone
    5) Set SMSSendDriver to "Email"
    6) Reload the page, SMS Provider should now be shown
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f72b8cbd3eb77ded61e08714b68969f7cacc8224
Author: Christophe Torin <christophe.torin@univ-rennes2.fr>
Date:   Wed Jun 1 14:14:38 2022 +0200

    Bug 29607: Store the discount amount correctly when importing and order from a file
    
    This bug fixes how the discount amount for an order is stored, when an order is added to a basket using "From staged MARC records".
    
    Test plan:
    1. Export a record (without the items) (Tools > Catalog > Export data).
    2. Delete the record from the catalog (including any items).
    3. Stage the record for import (Tools > Catalog > Stage MARC records for import).
    4. Create a new vendor with a discount of 25%. (Or select and existing vendor that has a discount). (Acquisitions > New vendor)
    5. Create a new basket for the vendor. (Acquisitions > Manage orders > search for vendors > New > Basket).
    6. Add to the basket using "From a staged file":
       . select "Add orders" next to the staged file
       . select the record to add to the order
       . enter a price
       . leave the discount field blank
       . select a fund
       . select "Save"
       ==> The order is created!
    7. Modify the order - note that the discount is showing on the form as .25% instead of 25%, also note that the discount amount is calculated correctly.
    8. Check what is recorded in the database:
       . koha-mysql kohadev
       . select * from aqorders;
       ==> discount field for the basket item shows as 0.2500
    9. Change the discount to 25%. Run step 8 again - discount amount will be correctly shown as 25.0000
    10. Apply the patch.
    11. Repeat steps 1-9 - discount amount is shown and calculated correctly.
    12. Test modifying the discount amount - should be calculated and shown correctly.
    13. Sign off!
    
    See additional comments in the bug description.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b74ce12b8566ddab1149a82a9aa9b071f2586803
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Jan 12 21:05:29 2022 -1000

    Bug 29871: Remove marcflavour param in Koha::Biblio->get_marc_notes
    
    Test plan :
    Display a biblio record with some MARC notes in details page and basket,
    OPAC and staff
    Run prove t/db_dependent/Koha/Biblio.t
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5f9214658850ce2e1fabecfeb10cd011f354a5e0
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Mar 28 17:28:50 2022 +0000

    Bug 30388: Fix some errors in the template for ordering from a MARC file
    
    This patch fixes a few markup errors in the addorder2709 template. The
    modal dialog markup is corrected and moved out of the loop of records so
    that it doesn't create repeating id attributes. Obsolete CSS is removed,
    fixing the width of the MARC preview modal.
    
    The calendar include is added, fixing a Flatpickr error in the console.
    
    Double ID attributes are removed from the Statistics 1 and Statistics 2
    fields.
    
    To test, apply the patch and test the process of adding an order to a
    basket from a staged MARC file. Test in particular:
    
     - The MARC and Card previews
     - The "Date acquired" field under the "Item information" tab should
       trigger a Flatpickr widget.
    
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cec9ba5283f9766a277ec5416e6cb24c06680c65
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Mar 28 14:38:51 2022 +0000

    Bug 30384: (follow-up) Add markup comments
    
    This patch adds comments to the template to highlight the markup
    structure.
    
    This patch should have no effect on the page's appearance or
    functionality.
    
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cd7c956c0d788222c143c2d52615e6393ec1e4d1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Mar 28 14:11:19 2022 +0000

    Bug 30384: Reindent template for ordering from a MARC file
    
    This patch updates the template for ordering from a MARC file so that
    the indentation is consistent.
    
    This patch does not fix a couple of bugs which will be fixed in a later
    patch: The MARC modal window has the wrong width, and there is a
    Flatpickr error in the console.
    
    To test apply the patch and go to Acquisitions -> Vendor -> Basket ->
    Add to basket -> From a staged file.
    
    - Click "Add orders" next to the staged file you want to use.
    - On the "Add orders" page, test that everything still works correctly:
    - Tabs work correctly
    - JavaScript controls (select all, show inactive, etc.) work
    - MARC and Card previews work
    - Adding orders works
    
    Signed-off-by: Chris Cormack <chrisc@catalyst.net.nz>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 26e8642f3fd04f5be850b87f8ad8cad5e60424a4
Author: Florian Bontemps <florian.bontemps@biblibre.com>
Date:   Fri Mar 4 14:49:19 2022 +0000

    Bug 30026: Quick fix for SmsAlert Hint
    
    Just modifying the hint provided in patrons' messaging preferences to
    allow either + or 00 for international formats.
    No test plan needed.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3dc883a1cc493a1208b16782f9b43a318de43ce8
Author: Florian Bontemps <florian.bontemps@biblibre.com>
Date:   Fri Feb 4 15:40:33 2022 +0000

    Bug 30026: SMSAlert regex fixed for international
    
    When registering a phone number for SMS alerts, the number goes through
    a regex filter to make sure the number is valid. One of the formats used
    in Europe is 00 AAA XXXXXXXXX (A = country indicator) and it is not
    supported.
    
    This patch adjusts the regex to either accept 00 AAA XXXXXXXXX or
    +AAAXXXXXXXXX in this case. (Note : +AAA and 00AAA are mutually exclusive).
    
    To test:
    1) You need to have installed a SMSAlert plugin. Make sure the
       SMSSendDriver syspref is also set up with your SMS plugin of choice.
    2) Pick a patron and edit its profile.
    3) In the messaging preferences fieldset, under SMS number, enter any
       number with the format 00 AAA XXXXXXXXX (ie : 00111123456789).
       Try to save the modification : you should have an error message.
    4) Try instead a number with the format +AAAXXXXXXXXX (ie :
       111123456789), that one should be accepted.
    5) Save your modification then check that the number has been changed.
    6) Apply patch.
    7) Repeat step 3 to 5.
    8) Observe the error is gone.
    9) Try it once more with the format +00 AAA XXXXXXXXX (+00111123456789),
       that format should not be accepted: this is intentional.
    10) Sign off.
    
        Thanks-to: Didier Gautheron <didier.gautheron@biblibre.com>
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4d16ca1069760f32df4c8bb8267fd24e21f812aa
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri May 6 15:21:43 2022 +0000

    Bug 30713: Patron entry should limit date of birth selection to dates in the past
    
    This patch adds to the configuration of the date of birth field in the
    patron entry form so that the calendar widget prohibits the selection of
    a date in the future.
    
    To test, apply the patch and open a patron record for editing. Try to
    select a birth date in the future using the calendar widget. You should
    be limited to a selection of today or before.
    
    Confirm that clicking the "Yesterday" and "Today" shortcuts in the
    calendar widget works correctly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 79396ae625ac772e4a6c01f2649a7147a07cc7b7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 1 14:29:59 2022 +0200

    Bug 30864: Add validation to password_expiry_days
    
    When creating a patron category or editing an existing one, there is no validation for the "Password expiration" field.
    
    If letters or other characters are entered, there is no error message and if not a number whatever is entered is not saved.
    
    To test:
    1. Go to Administration > Patrons and circulation > Patron categories.
    2. Add a new patron category (or edit an existing category).
    3. For the "Password expiration" field, enter letters or characters such as L$%.
    => Note that you are prompted to "Please enter only digits"
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7306f945ce9cba653c298e0c84016b9c8a7bd582
Author: Marion Durand <marion.durand@biblibre.com>
Date:   Fri Sep 10 16:25:34 2021 +0200

    Bug 29260: 210a is reported to Autor (meeting/conference) when upgrading an authority through Z3950
    
    When upgrading an authority with Z39.50, the field 2XX is sent into the
    research grid.
    
    The field 210a is sent into the search field "Author
    (meeting/conference)". Or a collective authority is more often a
    corporation than and meeting so librarian has to copy and paste this
    data. (In unimarc field 210a is used both for corporation and meeting.)
    
    This patch makes 210a field be sent into the search field "Author
    (corporate)" instead of the "Author (meeting/conference)" one.
    
    1- Find an authority with collectivity type (with a field 210a).
    2- Click on "Edit" then on "Edit record"
    3- Click on "Replace record via Z39.50/SRU search"
    4- See that the field 210 is reported in the search grid in "Author
    (meeting/conference)" field
    5- Apply the patch
    6- Go throug step 1 to 3 again
    7- See that the field 210 is now reported in the search grid in "Author
    (corporate)" field
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d07e6928233dd01e278b8d1424dae8264f41d211
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon May 16 19:51:41 2022 +0000

    Bug 30778: Remove ModAuthInBatch
    
    1 - git grep ModAuthInBatch
    2 - Confirm none of these occurences are calls
    3 - Apply patch
    4 - git grep ModAuthInBatch
    5 - No occurences
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 46fabf9bb52375db38268031ca9409a734fe7ce0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon May 16 19:50:20 2022 +0000

    Bug 30778: Remove ModBiblioInBatch
    
    To test:
    1 - git grep ModBiblioInBatch
    2 - Confirm these occurences are not calls
    3 - Apply patch
    4 - git grep ModBiblioInBatch
    5 - No occurences
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3b0505247ac358067a14a8b2edba087f212daad5
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Apr 28 05:48:33 2022 +0000

    Bug 30636: Show notforloan availability correctly in ILS-DI
    
    This patch adds the Koha::Item->is_notforloan() method which checks
    the item status of "notforloan" and it checks the effective item type
    to see if it's marked as "notforloan". This change brings ILS-DI in line
    with the catalogue which displays "Not for loan" for both those scenarios.
    
    0. Don't apply patch yet
    1. Enable ILS-DI system preference
    http://localhost:8081/cgi-bin/koha/admin/preferences.pl?op=search&searchfield=ILS-DI
    2. Change Item types to "Not for Loan" for Books
    http://localhost:8081/cgi-bin/koha/admin/itemtypes.pl?op=add_form&itemtype=BK
    3. Note that book is listed as "Not for loan" in catalogue
    http://localhost:8081/cgi-bin/koha/catalogue/detail.pl?biblionumber=29&searchid=scs_1651115075364
    4. Note that book is listed as "available" via ILS-DI
    http://localhost:8080/cgi-bin/koha/ilsdi.pl?service=GetAvailability&id=29&id_type=bib
    
    5. Apply patch and restart starman (ie koha-plack --restart kohadev)
    
    6. Note that book is listed as "not available" and "Not for loan" via ILS-DI
    http://localhost:8080/cgi-bin/koha/ilsdi.pl?service=GetAvailability&id=29&id_type=bib
    
    --
    
    7. prove t/db_dependent/Koha/Item.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 71f54a75713c5d5a6acfbdd3fefe1166ea0efafd
Author: Kevin Carnes <kevin.carnes@ub.lu.se>
Date:   Wed May 25 10:54:25 2022 +0000

    Bug 30844: The OPAC detail page's browser is limited to the current page of results when using Elasticsearch
    
    When viewing the detail page of the first or last record of a result page,
    it's not possible to browse to another page when using Elasticsearch.
    
    To test:
    1) Search for "*" in the OPAC
    2) Click on the last result of the page
    3) Observe that you cannot browse to the next page
    4) Apply the patch
    5) Search for "*" in the OPAC
    6) Click on the last result of the page
    7) Observe that you can browse to the next page
    8) Sign off
    
    Sponsored-by: Lund University Library
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 637c580663f2abc5005ed2c96ef324e28c4feb20
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 1 14:36:52 2022 +0200

    Bug 30726: Fix "yesterday" when limited to past dates
    
    Test plan:
    Go to "Patrons with no checkouts" report, /cgi-bin/koha/reports/borrowers_out.pl
    Select "Yesterday"
    => it automatically selects the previous day's date and populates the form field
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c699f05970bbef78ec07e16eac5991cd72f9b87a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 1 14:54:34 2022 +0200

    Bug 30746: Fix JS error on opac-memberentry
    
    Empty PatronSelfRegistrationBorrowerMandatoryField and PatronSelfRegistrationBorrowerUnwantedField
    Go to opac-memberentry.pl
    Notice the JS error
      Uncaught TypeError: j is undefined
    Apply this patch
    Go to opac-memberentry.pl
    => no JS error
    Fill the pref with some values
    Go to opac-memberentry.pl
    => Confirm that the fields you marked as mandatory as flagged accordinly
    on the UI
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 314840b82ed849b916c765c9272fcfe1f8fa3a14
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jun 6 11:43:41 2022 -0300

    Bug 23659: DBRev 22.06.00.001
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dd9ca0c44e89f922772092160fdd3892541de483
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon May 23 12:59:03 2022 +0000

    Bug 23659: (follow-up) Correct syspref.sql to match atomicupdate
    
    Missed updating this file when I added another option and renamed another
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a25b4d78d090a69b46ad07b05f915cc0f849a30c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 18 14:21:35 2022 +0000

    Bug 23659: Add DefaultHoldPickupLocation system preference
    
    On the staff side behaviour differs for default pickup location when placing a hold or
    placing an overridden hold. Additionally, the behaviour has changed betwee master and stables
    
    We should provide a consistent default, and allow the library to specify their choice
    
    Note this only affects staff client as there is only a single dropdown on OPAC and it is not
    tied to items
    
    To test:
     1 - Apply patch
     2 - Update database
     3 - Find a record with items from various branches, and at least one with a different home/holding branch
     4 - Ensure there is an item that requires override to hold, and  AllowHoldPolicyOverride  is enabled
     4 - Attempt to place hold
     5 - Confirm all dropdowns default to logged in library
     6 - Set DefaultHoldPickupLocation to item's home branch
     7 - Refresh and confirm all dropdowns match item home library except biblio level hold - still logged in library
     8 - Set DefaultHoldPickupLocation to item's holding branch
     9 - Refresh and confirm defaults
    10 - Mark one of the items holding library as 'not a pickup location' in Admin->Libraries
    11 - Refresh and confirm dropdown is now empty for that item
    
    Signed-off-by: Andrew Fuerste-Henry <andrew@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f279cdd30fa73241d87d9bb46c21f34c4370d472
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jun 3 11:35:34 2022 +0000

    Bug 30893: Fix documentation in update_patrons_category.pl
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9f1cfa0bd31abdf54cb2ccd9eddae674dcaedc97
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 31 08:23:30 2022 +0200

    Bug 30868: (bug 29684 follow-up) Fix borrowernumber var in template
    
    borrower_data does not contain the borrowernumber, it is sent
    separately.
    
    Test plan:
    1. Edit a patron record (for example: Henry Acevedo).
    2. Note that the URL is http://127.0.0.1:8081/cgi-bin/koha/members/memberentry.pl?op=modify&destination=circ&borrowernumber=19
    3. Change date of birth to yesterday.
    4. Save.
    5. Error message displayed above the Save and Cancel buttons:
       The following fields are wrong. Please fix them.
       - Patron's age is incorrect for their category. Ages allowed are 18-999.
    6. Note that the URL is now http://127.0.0.1:8081/cgi-bin/koha/members/memberentry.pl
    7. Fix date of birth (for example: change year to 2000).
    8. Select Save.
    => Without this patch you get: "Patron not found. Return to search."
    => With this patch applied the patron's data is saved
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f0062c67d6628ded2db76a9bb16a44e694acbaac
Author: Slava Shishkin <slavashishkin@gmail.com>
Date:   Fri Jun 3 17:47:46 2022 +0300

    Bug 30884: Fix jQuery selector to correctly detect active tab
    
    To reproduce:
    1. Go to /tools/modborrowers.pl and fill form Card number list with data and click Continue.
    2. It should give "No patron card numbers or borrowernumbers given." warning.
    3. Using the browser inspector tool see that post fields cardnumberlist or borrowernumberlist
       is sent with empty data.
    
    Apply the patch, and then:
    1. Fill form Card number or Borrowernumber list and click Continue.
    2. Get the result: table with patrons for editing or warning about not found number.
    3. Using the inspector tool see that request has data from the active tab in the form.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8f09ef75c365fd20dcdfefb92122e1b0c6afa6d6
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Thu Jun 2 22:59:56 2022 +0000

    Bug 30886: Show pending recall on item on OPAC
    
    The 'completed' flag was causing the wrong status to be shown, but we
    can also give a more useful message to the patron.
    
    To test:
    1) Enable the UseRecalls system preference and set up your
    recalls-related circulation rules.
    2) Check out an item to Patron B.
    3) Log into the OPAC as Patron A and search for the item.
    4) Place a recall on that item.
    5) Go back to the staff client and check the item in. Confirm the recall
    as waiting for Patron A.
    6) Go back to the OPAC record page and look at the holdings table.
    Notice the status still says the item is Available.
    7) Apply patch, restart services, refresh the OPAC.
    8) Confirm the holdings table status now says the item has a pending
    recall.
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d37b9e6013ab2f1c3cb94e68dd75a2e5092fe5e4
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jun 2 17:24:21 2022 +0000

    Bug 30892: (bug 30742 follow-up) Send single bib as a holdable bib
    
    To test:
    1. Try placing hold
    2. Everything seems to work but no hold gets placed.
    3. Apply patch
    4. Verify holds are no placed correctly.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3b1ee10ee5111eb5346ac8c285a776f8bd51e778
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Thu Jun 2 21:23:55 2022 +0000

    Bug 30885: Display recall data correctly
    
    This page does not pull the recall columns correctly.
    
    To test:
    1) Enable the UseRecalls system preference and set up your
    recalls-related circulation rules.
    2) Check out an item to Patron B.
    3) Log into the OPAC as Patron A and search for the item.
    4) Place an item-level recall on that item.
    5) Go back to the staff interface and search for the item. Confirm that when you go
    to the record detail page, it explodes and errors are shown.
    6) Apply patch and refresh page.
    7) Confirm page loads as expected.
    8) Check the Status information for the item in the Holdings table.
    Confirm it shows the recall information correctly.
    9) Check in the item and confirm the recall as waiting for Patron A.
    10) Go back to the record detail page and confirm the Status information
    for the item shows as Waiting in the Holdings table.
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 12464241ebf8d4e3bbba9ea7023c66774ee810dc
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jun 1 10:12:05 2022 -0300

    Bug 30876: (follow-up) Use the $biblio object even further
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b60d59eb89a1250da5122ce6acea49a9197650cd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 1 13:59:09 2022 +0200

    Bug 30876: Use Koha::Biblio
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8beb878e5b1276cf6924364d9a6e7caccbad065c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jun 1 08:16:00 2022 -0300

    Bug 30876: Fix wrong call to ->search in list context
    
    The code is clearly incorrect as ->search no longer returns a list when
    called in list context.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9b99458a6f60081f903565b869804d2e4a10687e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sun Jun 5 20:24:03 2022 -0300

    Bug 30756: (follow-up) Restore MARC21 authority file
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b8a18702d291210f9d62ca9daa747ec06f2cc8f6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue May 24 18:27:30 2022 +0000

    Bug 30840: Add support for barcode filters to course reserves
    
    This bug adds support for barcode filters on the inputs in the course reserves module.
    
    To test:
    1 - Set itemBarcodeInputFilter to 'Remove spaces from'
    2 - Find a barcode in your system and add spaces between each characters
        e.g. 3 9 9 9 9 0 0 0 0 0 0 8 1 8
    3 - Past that barcode into the checkin box, success
    4 - Browse to course reserves, ensure you have a course or create on
    5 - Test adding a reserve, batch adding a reserve, and batch removing reserves
    6 - The pasted barcode does not in any
    7 - Apply patch and restart
    8 - Pasted barcode with spaces can now successfuly be added, batch added, and batch removed from courses
    
    Signed-off-by: Jason Robb <jrobb@sekls.org>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 98c5ecd0d5bbced740c55c85ed1db226f1569b67
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Jan 27 16:55:34 2022 +0000

    Bug 29961: Make horizontal scroll bar always visible on acqui/z3950_search.pl
    
    To test:
    1. In Acquisitions make a basket and add something "From an external source"
    2. Search for a title and click on the 'MARC' button, make sure the MARC prview is both tall and wide.
    3. You will not see the horizontal scroll bar unless you scroll all the way to the bottom of the preview.
    4. Apply patch.
    5. Try steps 1 & 2 again, this time you should see the horizontal scroll bar as soon as the MARC prveiw loads.
    
    Note: I put the CSS on multiple lines for better readability
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e96ba5ac7b3c12e8c231cc7e38fd49ebc13bc39c
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Sat May 14 12:29:25 2022 +0000

    Bug 30756: Rename to Koha_MetadataRecord_Authority
    
    What we are actually testing here.
    
    No test plan.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    JD amended patch: remove Dumper
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 24ff8b4a855680820761f6e6cfb7405526c82e2a
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Sat May 14 12:07:17 2022 +0000

    Bug 30756: Further adjustments to Koha_Authority.t
    
    Remove use of exported_records file in favor of TestBuilder.
    Remove conditional tests with SKIP block. Create reservoir record.
    
    Test plan:
    Run t/db_dependent/Koha_Authority.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 96867a4fdcde290a260085b38b5e285c455828db
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Sat May 14 07:42:42 2022 +0000

    Bug 30756: Ground work for improving Koha_Authority.t
    
    Move stuff into two subtests.
    
    Test plan:
    Run t/db_dependent/Koha_Authority.t.
    If you have no imported auths, you will still see skips.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b4ea3da6f1d1b6066317d885cb4a676a56e0f147
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu May 26 11:35:41 2022 -0300

    Bug 30855: (follow-up) Rewrite tests using Basic authentication
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 891972d0d335c4cf13ea458a024256367c21b6ad
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu May 26 11:17:18 2022 -0300

    Bug 30855: Rename /import => /import_batches
    
    This patch renames the route to make it consistent for future additions.
    
    To test:
    1. Run
       $ git grep 'matches/chosen'
    => FAIL: all occurences use /api/v1/import/
    2. Apply this patch
    3. Run:
       $ git grep 'matches/chosen'
    => SUCCESS: All occurences have '/api/v1/import_batches/'
    4. Run:
       $ kshell
      k$ prove t/db_dependent/api/v1/import_record_matches.t
    => SUCCESS: Tests pass!
    5. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 022330b8d26b81e53f9c4af7798fa42ff48bdaa3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 18 15:08:39 2022 +0000

    Bug 27697: Only preopulate search when we have found a single biblio
    
    This patch uses the url parameter we created in 23475 to determine whether
    we should populate the search bar or not
    
    Note - a bookmark with this param will still populate search term with last search
    
    To test:
    1 - Search staff client for 'cat'
    2 - Browse to a patrons checkouts and click on a title, or just go directly to a details page:
        http://localhost:8081/cgi-bin/koha/catalogue/detail.pl?biblionumber=2850
    3 - Search bar says 'cat'
    4 - Apply patch
    5 - Repeat 1-2
    6 - Search bar is not populated
    7 - Search "dalek war box set" or a term that finds a single record in your instance
    8 - Search bar is populated
    9 - Note url like: http://localhost:8081/cgi-bin/koha/catalogue/detail.pl?biblionumber=2850&found1=1
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 34b84b68e509c9172b850dad4dbc5b7e9f518225
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed May 18 17:50:13 2022 -1000

    Bug 30781: Fix warning in GetPreparedLetter
    
    Test by running :
      prove t/db_dependent/Letters.t
    Check you dont see warning :
      Use of uninitialized value $val in substitution iterator
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2e0243c378158755660d7bc95e15ad32dd6d0ebf
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed May 18 17:47:18 2022 -1000

    Bug 30781: Add unit test for substitute with undefined value
    
    Add unit test that generates warn.
    This may be usefull as no regression test.
    
    Run prove t/db_dependent/Letters.t
    You see warn :
    t/db_dependent/Letters.t .. 1/84 Use of uninitialized value $val in substitution iterator at /kohadevbox/koha/C4/Letters.pm line 607.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e536229292617e2f6e5bade47e3fbad1a0101ea4
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Mar 22 14:14:52 2022 -0400

    Bug 30337: Holds to Pull ( pendingreserves.pl ) ignores holds if priority 1 hold is suspended
    
    Holds to Pull ( pendingreserves.pl ) ignores holds if priority 1 hold is suspended,
    and shows the wrong number of "patrons with holds" which presumably tells the
    librarian how many copies to pull from the shelves.
    
    Test Plan:
    1) Create a record with one or more holdable items
    2) Place two holds on the record
    3) Note they show in the holds to pull report
    4) Suspend the priority 2 hold
    5) Note the report continues showing that 2 patrons have holds
    6) Resume the priority 2 hold
    7) Suspend the priority 1 hold
    8) Note the hold disappears from the holds to pull report
    9) Apply this patch
    10) Restart all the things!
    11) Reload the holds to pull report
    12) The report should show one hold that needs an item pulled to fill it!
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fcb08b0e932a2ce1b70e90b2c7219aebc72ac4f4
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Apr 13 12:18:13 2022 +0000

    Bug 30523: Quiet console warning about missing shortcut-buttons map file
    
    This patch updates the Flatpickr plugin shortcut-buttons which adds the
    "Yesterday," "Today," and "Tomorrow" links to Flatpickr widgets.  This
    updates it to the latest version, 0.4.0.
    
    The file is modified in two ways: The version information is added to
    the top of the file, and the sourceMappingURL line is removed from the
    bottom. This quiets browser console warnings about a missing map file.
    
    To test:
    - apply the patch and clear your browser cache.
    - Go to Circulation -> Check out and check out to a patron.
    - Click "Checkout settings" and click the "Specify due date" field.
    - In the pop-up calendar, test all controls, including the shortcut
      links, to confirm that everything works as before.
    - In the browser console there should be no warning related to
      shortcut-buttons-flatpickr. (Firefox didn't have the warning, Chromium
      can be used.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5a90eb17e6c9a0d54376584e356dcacef4aab6c8
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue May 31 11:36:37 2022 +0200

    Bug 28723: Replace "No title" by an empty string
    
    This is to be consistent with what is done in checkouts.js
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 35874fa380707ba8eedda825e9cdc7ad47755958
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Jul 20 14:45:35 2021 +0200

    Bug 28723: Fix holds table display when a biblio has no title
    
    Test plan:
    1. Create a biblio without title, then create an item for this biblio.
    2. Place a hold on it.
    3. Go to the patron detail page and click on the Holds tab
    4. Confirm that holds are correctly displayed
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 44d6528b566e5c16eba9b15f8aa24667293766c3
Author: Victor Grousset <victor@tuxayo.net>
Date:   Fri May 13 21:25:53 2022 +0200

    Bug 30629: fix <span> in title of some pages
    
    == Test plan ==
    1. Go to http://localhost:8081/cgi-bin/koha/patroncards/manage.pl?card_element=layout
    2. See that the page title in your browser window title is wrong because it contains <span>
    3. Go to http://localhost:8081/cgi-bin/koha/labels/label-manage.pl?label_element=batch
    4. See that the page title in your browser window title is wrong because it contains <span>
    5. Go to http://localhost:8081/cgi-bin/koha/admin/aqbudgetperiods.pl
    6. Administration => Budgets => Click on a budget => planning => plan by months
    7. See that the page title in your browser window title is wrong because it contains <span>
    8. Refresh the pages and see that the titles are correct
    9. Sign off :)
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 81bdce5c4390e1914ff6cfb2adb469027904f659
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Sep 1 18:00:59 2021 -0300

    Bug 28529: Make biblio-level hold itemtype count against max rules
    
    The current situation is that biblio-level holds can be assigned an item
    type, so they can only be fulfilled by items matching that specified
    item type (be it item-level itype or the fallback to biblio-level).
    
    But there's the situation in which max holds limits for a specific item
    type can be overridden by using biblio-level holds with item type
    selection (AllowHoldItemTypeSelection) enabled.
    
    To test:
    1. Have a patron of category 'Staff' (S)
    2. Have 3 records with items with the 'BK' item type, and maybe others
    3. Enable AllowHoldItemTypeSelection
    4. Set a limit of 2 max holds for that category+item type
    5. In the OPAC. Place bibio-level holds, with item type contraint to 'BK' on those 3 records
    => FAIL: You can place the 3 holds
    6. Cancel the holds
    7. Apply this patch and restart all
    8. Repeat 5
    => SUCCESS: You can only place 2 holds
    9. Run:
       $ kshell t/db_dependent/Reserves.t
    => SUCCESS: Tests pass!
    10. Sign off :-D
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ad14a8eee8a8f229518ee0d40c7d9c807f1c0937
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 3 16:47:14 2021 -0300

    Bug 28529: Regression tests
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 900aa4bf51b131c9f362cb647edf1bb0de2fbcc0
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu May 12 07:05:50 2022 +0000

    Bug 30731: Remove Readonly::XS::MAGIC_COOKIE
    
    This variable does not make sense anymore, since the Readonly::XS
    module is not listed in the cpanfile. So it will not be required
    the versions_info loop.
    
    Test plan:
    Run t/Installer_PerlModules.t again.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit da1115336bfab44eb9eebaae214c355fa19fc36d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed May 11 14:26:06 2022 +0000

    Bug 30731: Silence noisy CPAN modules in C4::Installer::PerlModules
    
    Main change is replacing 'no warnings' by local $SIG{__WARN__}.
    
    The modules are sorted now too. This will make results of requiring
    them one after the other a more predictable experience and improves
    the output of koha_perl_deps.
    
    Test plan:
    Run about. Check plack intranet log.
    Run koha_perl_deps.pl -a
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2265739a378c1d31c5ea3d4beb07cbaa4d04e62b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed May 11 14:35:18 2022 +0000

    Bug 30731: Unit tests
    
    Installer_pm.t can safely be discarded, having Installer_PerlModules.t.
    
    Note: Without the second patch, the test about versions_info being silent
    might fail. With the second patch, it should pass.
    Note that since the order of requiring the cpan modules varies (without
    the second patch), the results (potential warnings) vary too.
    
    Test plan:
    Run t/Installer_PerlModules.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f6110ce4170ced8ba246e295cc547c9794566ef1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 25 10:04:58 2022 +0200

    Bug 30842: 2FA - Allow at least one old TOTP
    
    We allow one old token when we are setting the two-factor auth, we
    should reuse the same settings when validation the authentication
    itself.
    
    Test plan:
    Setup 2FA for your logged-in user
    Logout/Login
    Have a look at the code and wait for 30 sec before using it (< 1min
    however)
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 17b7ae56c539bfaaf2dae75f6855e9cda13ec904
Author: David Nind <david@davidnind.com>
Date:   Wed May 18 02:21:14 2022 +0000

    Bug 30786: Fix capitalization in advanced search system preferences
    
    This fixes the capitalization in the descriptions for the
    AdvancedSearchTypes and OpacAdvancedSearchTypes system preferences.
    
    Test plan:
    1. In the staff interface, search the system preferences for
       'AdvancedSearch'.
    2. Review the current descriptions for the AdvancedSearchTypes and
       OpacAdvancedSearchTypes system preferences.
    3. Note that "..Shelving Location.." is used instead of "..Shelving
       location..".
    4. Apply the patch.
    5. Refresh the page.
    6. Sentence case is now used for "Shelving location" in the
       descriptions (as per coding guideline HTML4: Upper and lower cases
       in strings).
    7. Sign off.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e59e2c4b8f58b267227bd5159e90a3ce015d0beb
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri May 20 08:05:43 2022 +0000

    Bug 30788: Unit test
    
    Run:
      prove t/db_dependent/Circulation/CalcFine.t
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 368bdcf4e95e1cbb93f53f1d5dd976b98f59bf29
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri May 20 09:43:15 2022 +0200

    Bug 30788: Fix warning in Overdues.pm when fine is empty in circ rules
    
    Argument "" isn't numeric in multiplication (*) at /usr/share/koha/lib/C4/Overdues.pm
    
    To test:
    * Create a issuing rule where fine is empty, but a fine interval is set.
      Fine amount: empty
      To do this, remove the 0 displayed in the input field before saving.
      Fine charging interval: 5 or any other numeric value
      When to charge: Start of interval
      Fine grace period: 0
    * Check out an item with the due date yester (use specify due date)
    * Run misc/cronjobs/fines.pl -v
    * You should see above warn in the output
    * Apply patch
    * Rerun fines.pl, there should be no warn.
    * Run:
      t/db_dependent/Circulation/CalcFine.t
      t/db_dependent/Fines.t
      t/db_dependent/Circulation.t
      t/db_dependent/Overdues.t
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 54a6c73c6d6e94554b7e4c15554e08d79e3eb578
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Sat May 21 19:23:32 2022 +0000

    Bug 30828: Remove useless 'type' parameter in placerequest.pl
    
    To test:
     1) Grep for placerequest.pl in the source code and check that
        request.tt is the only place where the type parameter is passed.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    JD amended patch: adjust commit title
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 72dcf17ea0f23b0e23272231d39632bc5b57db73
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue May 17 11:19:19 2022 +0000

    Bug 30774: Typo: i %sEdit %sReserve %s
    
    This patch removes an out of place "i" and replaces it with a space. The
    patch also removes obsolete CDATA markers in the page's JavaScript.
    
    To test, apply the patch and go to Course reserves.
    
    - Create a course if necessary, then view the details of your course.
    - Click the "Add reserves" button.
    - Enter a barcode or biblionumber.
    - On the next page, the heading "Reserve [title] for [course]" should
      look correct, with no extra "i" at the beginning of the line.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a614cb21268a21cb21f8aa59025bef5d5c1bb0d0
Author: David Nind <david@davidnind.com>
Date:   Sat May 28 18:55:59 2022 +0000

    Bug 30772: (follow-up) Age restriction message
    
    Improve age restriction message.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e68ecb3311eb34e8b1f12a98ccf51576c03f3307
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue May 17 12:04:41 2022 +0000

    Bug 30772: Terminology: Replace instances of "reserve" with "hold"
    
    There were several templates where we were still using the term
    "reserve" instead of "hold." This patch corrects the ones I found,
    including in a couple of HTML comments.
    
    To test, apply the patch and confirm that the changes look correct and
    affect only the relevant term.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 169c535e880bf1233622042cab76351b7dbc65ca
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jan 12 11:15:10 2022 -0300

    Bug 29860: Remove item type-related warnings
    
    To test:
    1. Run:
       $ kshell
      k$ prove t/db_dependent/selenium/regressions.t
    => FAIL: You see several
    item-level_itypes set but no itemtype set for item (985) at /kohadevbox/koha/Koha/Schema/Result/Item.pm line 905.
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: No more item type warnings
    4. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d1f67e4287e888beb205c48a6769d967deb1777e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue May 17 12:30:28 2022 +0000

    Bug 30761: Fix typos in OPAC reset password template
    
    This patch corrects the word "PLease" to "Please." The patch also adds
    some periods at the end of some alert strings to make punctuation
    consistent between different alerts.
    
    To test, an inspection of the patch is probably enough. The main fix
    (the "PLease") only appears when an unknown error occurs.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 58de13cb9a5efa3fd9c9fd50865eea62ee18ec5b
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Fri May 27 17:52:06 2022 -0400

    Bug 30862: Typo: langues
    
    This patch changes the word 'langues' to 'languages' in the description
    of the following system preferences:
    
    - OPACXSLTDetailsDisplay
    
    - OPACXSLTListsDisplay
    
    - OPACXSLTResultsDisplay
    
    - XSLTDetailsDisplay
    
    - XSLTListsDisplay
    
    - XSLTResultsDisplay
    
    To test:
    1- Apply patch
    2- Check the aforementioned system preferences and make sure the descriptions say 'languages'
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b46396c0035a981f61fbd2c26e0dceb50de0566b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu May 26 09:52:46 2022 -0300

    Bug 30853: Add description for baskets in swagger.yaml
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2da14cf8c10c2d5165220e6657b279b37aa02f81
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 14 12:20:09 2022 +0000

    Bug 30528: Process limits before handling CCL query
    
    This patch moves the code that handles limit processing before that for CCL queries to ensure that special limit cases (branch, multibranch, etc) are handled before adding the limits to the query string
    
    To test:
    1 - Apply unit tests patch only
    2 - prove -v t/db_dependent/Search.t
    3 - It fails
    4 - Apply this patch
    5 - It passes!
    6 - Test searching and confirm things work as epxected
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fde3aefba821c43554adaa53324c81cbe7d2d95a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 14 12:19:22 2022 +0000

    Bug 30528: Unit tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 42290cb43deb7dde668d9a55467c44ba705e665c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 31 11:29:57 2022 +0200

    Bug 30870: Don't skip tests if Test::Deep if not installed
    
    We are using Test::Deep in different tests, but from t/db_dependent/Koha.t the tests are skippted if the module is not installed.
    We must assume the module is installed
    
    Test plan:
      prove t/db_dependent/Koha.t
    should return green in ktd
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 740258568368b7741df1a95d7bf330c527bf9054
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 31 11:26:36 2022 +0200

    Bug 29883: Add test
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 44e126bcc7fae369e13c533eea79f00ef41f2ff1
Author: Petro Vashchuk <stalkernoid@gmail.com>
Date:   Fri Jan 14 11:57:39 2022 +0200

    Bug 29883: avoid uninitialized value warn in GetAuthorisedValues sub
    
    GetAuthorisedValues is defined with optional parameter $category but it
    is instantly interpolated without preventing "Use of uninitialized value
    $category in concatenation (.) or string at .../C4/Koha.pm line 491."
    warning.
    As category param is optional, we can avoid throwing that warn as it is
    something that can happen and is not an actual error:
    C<$category> returns authorized values for just one category (optional).
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3b431117e4e20e15f48cfa3c5dca5c228b96b4af
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu May 26 10:42:29 2022 -0300

    Bug 30854: (QA follow-up) Spec fixes
    
    This patch fixes minor spec QA issues:
    
    * Missing summary for routes
    * Missing error_code description for 500
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 15f8d8f42b6f2bdd14d5488cda92ae69d4b4f3c2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu May 26 10:38:59 2022 -0300

    Bug 30854: Missing description for 'import_record_matches' in swagger.yaml
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 503a7f0ab10b6689c2ac6e42f7f788d383575028
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 13 15:23:30 2022 +0000

    Bug 30742: Remove 'bad_bibs' and send a list of holdable bibs
    
    Currently place request gets a list of bad_bibs that is created via javascript on the
    template. It ignores this list
    
    Ths patch instead doesn't add info for bad bibs, and provides a list of the bibs that
    can be held
    
    To test:
    1 - Attempt multi hold with some items that can be held, and one that cannot due to notforloan
    2 - Fill in pickup locations and place hold
    3 - Note hold is place on bib with no avilable items and hsows twice in results
    4 - Apply patch
    5 - repeat with another patron
    6 - Note no aidditonal hold on record with notforloan items
    7 - Note with with not for loan items appears only once in results
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1c1c1e19f5529b5728ed7770a030feabf1a9b8df
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 13 14:01:48 2022 +0000

    Bug 30742: Prevent placing holds on items/records where all items notforloan
    
    This patch does a few things:
    1 - Adds itemtype not for loan status to display
    2 - Adds a conditional to display notforlaon status as the reason a hold cannot be placed
    3 - Seperates the lower 'Place hold(s)' buttons for single and multi holds into two template sections
    4 - Handles the case where all bibs in a multi hold have no items available
    5 - Disables the button for single hlds when all items are unavailable
    
    To test:
     1 - Find or create a record with all items of itemtype marked 'notforloan'
     2 - Attempt to place single hold on this record from staff client
     3 - See one disab;ed button, one enabled 'Place holds' button
     4 - Click 'Place holds' - hold placed
     5 - Cancel hold
     6 - Place multiple holds with some bibs that can be held, and this one that cannot
     7 - Notice message that 'Cannot place hold on some items'
     8 - Click 'Place holds' - hold is generated for the notforloan bib
     9 - Apply patch
    10 - Place single hold
    11 - Note you now see not for loan status on items
    12 - Note the red x also includes message abnout not for loan status
    13 - Note the 'Place hold' button is disabled
    14 - Attempt multi hold
    15 - Message now includes "No items available: One or more records have no items that can be held"
    16 - Click 'Place holds'
    17 - Above still places the hold - this is for a followup patch
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Joonas Kylmälä <joonas.kylmala@iki.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
