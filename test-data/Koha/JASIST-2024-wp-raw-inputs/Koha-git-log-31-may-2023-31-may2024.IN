commit 40900343673c280d092de9c57399a77c113b41ba
Author: Thibaud Guillot <thibaud.guillot@biblibre.com>
Date:   Fri May 17 11:13:21 2024 +0200

    Bug 36892: Fix label for 'is_standing' input
    
    Test plan:
    
    1) Go to acqui/histsearch.pl and look for "search_children_too" with
       dev tools console.
    2) On 'is_standing' input, the same label is used
    3) Apply this patch and reload it
    4) Now it's correct
    
    Sponsored by: BibLibre
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5080eecc2268c2b7b88856800e728041c2fc29ec
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue May 14 11:41:57 2024 +0200

    Bug 36856: Fix MARC subfield name in new order from existing bibliographic record
    
    In form of the bibliographic details when adding an order 'From an existing record' in a basket, the marc subfield name is not shown.
    The template calls [% field.lib | html %] but this comes from Koha::UI::Form::Builder::Biblio generate_subfield_form() which gives 'marc_lib'.
    
    Test plan:
    1) Be sure to have an ACQ biblio framework
    2) Enable system preference UseACQFrameworkForBiblioRecords
    3) Go to an acquisition basket
    4) Add a term in 'From an existing record' and submit
    5) On first result click on 'Add order'
    6) Look at 'Catalog details'
    => Without patch you only see subfield tag and letter : (123a)
    => With patch you also see subfield name : Name (123a)
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3b9a43ec5a5ce24865f93a345215858b74348b2b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Apr 5 16:05:56 2024 +0000

    Bug 36528: Correct JS assets included in self checkout slip template
    
    The self checkout's slip print template includes some assets which it
    doesn't need (enquire.js) and lacks other that it does (i18n-related
    files). This patch correct the problem.
    
    The patch also wraps some code in global.js with a check that the
    relevant library has been loaded so that we don't get errors when the
    asset isn't included.
    
    To test, apply the patch and clear your browser cache.
    
    - With WebBasedSelfCheck enabled, log in to the self checkout module and
      check some items out.
    - Click "Finish" and then "Print receipt..."
    - Check the browser console on the receipt page. There should be no
      errors.
    - Log in to the OPAC and click the "Messaging" tab on the patron summary
      page.
    - Test that the "Digests only" table heading icon shows a tooltip.
    - Test that enquire.js is still loading correctly by performing a
      catalog search and narrowing your browser. When the window is narrow
      enough, the facets sidebar should collapse into a "Refine your search"
      button.
    
    Note that the "js_in_body" qa warning is a false positive.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e4e54af0e77a01d8ad1ee6ac84f5b255951f1831
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Sat May 11 08:41:04 2024 +0000

    Bug 36834: (Bug 29697 follow-up) Koha explodes when trying to open in Labeled MARC view a bibliographic record with an invalid biblionumber
    
    After changes made in catalogue/labeledMARCdetail.pl with the bug 29697
    when trying to open the Labeled MARC view with
    biblionumber=<invalid_number> (e.g. a deleted biblionumber) Koha explodes
    with a message << Can't call method "metadata" on an undefined value at
    /kohadevbox/koha/catalogue/labeledMARCdetail.pl line 59 >>
    
    Test plan:
    ==========
    1. Activate the viewLabeledMARC syspref.
    2. Try to open a biblio record in Labeled MARC view, giving as a biblionumber
       (in URL) a non-existing biblionumber, e.g. in ktd, with standard ktd
       test data:
       http://your_ktd:8081/cgi-bin/koha/catalogue/labeledMARCdetail.pl?biblionumber=1234567
       Koha should explode with the message:
       Can't call method "metadata" on an undefined value at
       /kohadevbox/koha/catalogue/labeledMARCdetail.pl line 59
    3. Apply the patch; restart_all.
    4. Repeat p. 2.  You should get a regular page with the info "The record you
       requested does not exist (1234567)".
    
    Signed-off-by: Roman Dolny <roman.dolny@jezuici.pl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1d04e429cec10caf41d7dbaa1c55d3e3b5bda4a2
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue May 14 18:18:05 2024 +0000

    Bug 36060: (follow-up) Remember selections when refreshing the table
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b39f669fa8879653754f1deb707e8b4da9f446d3
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Feb 9 18:14:50 2024 +0000

    Bug 36060: Simplify logic to enable/disable CheckinChecked/RenewChecked buttons
    
    This patch attempts to simplify for disabling/enabling the 'Check in selected items' and 'Renewal selected items' buttons.
    
    To test:
    1. APPLY patch, clear browser's cache
    2. Have more than 1 checkout issued to a borrower.
    3. Load the checkout table on circ/circulation.pl
    4. Notice that there is now 'Renew selected items' and 'Checkin
       selected items' button.
    5. Play around with each making sure that they work as excepted when
       checkouts are checked in either the 'Check in' or 'Renew' columns.
    6. Uncheck everything in the 'Renew column', the 'Renew selected items'
       button should be disabled.
    7. Uncheck everything in the 'Checkin column', the 'Checkin selected
       items' button should be disabled.
    8. Try unchecking some of these to make sure the Renew/Checkin button is
       properly disabled when no related checkboxes are checked.
    9. Try using the select all/none options at the top of both the 'Renew'
       and 'Checkin' columns. Make sure the 'Renew selected items' and
       'Checkin selected items' become properly disabled/enabled.
    10. Make sure the 'Renew all' button still works properly.
    
    11. Have two checkouts. Click one for Renew and one for Checkin. Click on Check in selected items.
    12. When the table reloads the 'renew' selections should be retained
    13. Have two checkouts. Click one for Renew and one for Checkin. Click on Renew selected items.
    14. When the table reloads the 'check in' selections should be retained
    
    15. Have overdues
    16. Go to a patron account and load the issue table
    17. The items that are overdue are checked for renewal by default
    16. The 'Renew selected items' button show be enabled.
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 92cb6c9efaa380b921eaf6afc1c5be4a52ef8cc4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri May 17 14:39:05 2024 +0100

    Bug 28869: (RM follow-up) Add missing field in api definition
    
    We missed adding the new field to the api definition for
    authorised_value_category.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 537c960777f94cf964c757ed2773f330612ae3c7
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 16 12:52:04 2024 +0000

    Bug 36872: Untranslatable strings in request.tt
    
    There are errors in the JavaScript in the holds template in the staff
    client which results in strings not being translatable. This patch
    corrects the errors.
    
    To test, apply the patch and run through the process of placing a hold
    on multiple items in the staff interface.
    
    - At the hold confirmation step, try to submit the form without
      selecting pickup locations for one or more titles.
    - You should get an alert, "Please make sure all selected titles have a
      pickup location set".
    - Uncheck the checkboxes next to each title you're placing a hold on.
    - Submit the form. You should get an error: "Please select at least one
      title".
    
    - Test the translation process with a language, e.g. fr-FR:
    - In KTD, run: gulp po:update --lang fr-FR
    - Check fr-FR-staff-prog.po for the line referring to
      koha-tmpl/intranet-tmpl/prog/en/modules/reserve/request.tt:1499
    - You should see the string "Please make sure all selected titles have a
      pickup location set".
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b40d8e90bd598301dfd4d1122501cb8bff3279a4
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 1 11:04:41 2024 +0000

    Bug 36739: Correct CSRF change to budget deletions
    
    This is another instance of the deletion confirmation step getting
    mistakenly auto-updated as if it were the deletion step. The
    'delete_confirm' doesn't need the 'cud-' prefix, only the
    'delete_confirmed' step.
    
    To test, apply the patch and restart services.
    
    - Test the process of deleting a budget.
    - On the confirmation step you should see the name of the budget you're
      about to delete.
    - After confirming, the deletion should complete correctly.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b71ee66dd7c62c6dbb39e5d24a16a37b2183288b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 16 12:03:11 2024 +0000

    Bug 36876: Correct <span>s around translatable strings in table settings
    
    This patch corrects the way translatable strings are handled in the
    table settings template. The switch to Bootstrap WRAPPERs for the
    accordion widget included several errors.
    
    To test, apply the patch and go to Administration -> Table settings.
    
    - Confirm that the sections expand and collapse correctly.
    - Test the translation process with a language, e.g. fr-FR:
      - In KTD, run: gulp po:update --lang fr-FR
      - Check fr-FR-staff-prog.po for the line referring to
        koha-tmpl/intranet-tmpl/prog/en/modules/admin/columns_settings.tt:298
      - It should show the whole string "Interlibrary loans"
    
    Signed-off-by: Roman Dolny <roman.dolny@jezuici.pl>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit dfd2bc352adcbbcd5922987357da33c0c2af8062
Author: Jan Kissig <jkissig@th-wildau.de>
Date:   Thu May 16 14:37:16 2024 +0200

    Bug 36877: (follow-up) Fix op eq edit to op eq edit_form in edit-batch.pl
    
        Additionally removes fixme comments
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9a33f6fcb2cb746560df075b00651e51474946aa
Author: Jan Kissig <jkissig@th-wildau.de>
Date:   Thu May 16 11:23:31 2024 +0200

    Bug 36877: Fix Patron card creator errors on editing layout, profile or template
    
    This patch fixes the unexpected behaviour when clicking on edit layout,
    edit profile or edit template in Patron card creator tool.
    
    Test plans:
    
    1.  edit layout:
    
      a) go to http://localhost:8081/cgi-bin/koha/patroncards/manage.pl?card_element=layout
      b) click on edit 'Test Layout'
      c) WARNING: An unsupported operation was attempted on layout 20.
         Please have your system administrator check the error log for
         details.
    
    apply patch
      a) go to http://localhost:8081/cgi-bin/koha/patroncards/manage.pl?card_element=layout
      b) click on edit 'Test Layout'
      c) Edit patron card layout form 20 shows up
    
    2. edit template and profile:
    
      a) go to http://localhost:8081/cgi-bin/koha/patroncards/manage.pl?card_element=template or
         http://localhost:8081/cgi-bin/koha/patroncards/manage.pl?card_element=profile
      b) click edit on an item in the table
      c) notice that the forms are empty
    
    apply patch and redo steps a) and b) to load the edit form
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b52c32e13e505d4735f8ddf3053c4657b92dec15
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri May 17 06:33:25 2024 +0000

    Bug 33237: (QA follow-up) Remove hardcoded kohadevbox path
    
    Test plan:
    Run Letters.t (outside kohadevbox :)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e251212ff5f783ff7d5d9de3821510ba7928d95f
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Fri Apr 12 05:53:25 2024 -0400

    Bug 36529: manage_additional_fields permission for more than acquisitions and serials
    
    This patch renames the manage_additional_fields permission to remove
    the specificity of acquisitions orders and serial subscriptions.
    Since each additional field requires a corresponding permission, I
    wrote each of them next to it. It makes it very long, but right now
    there isn't really a way to link permissions other than the permission
    description.
    
    To test:
    1. Apply patch
    2. Go to a patron account
    3. Click More > Set permissions
    4. Go to the Administration panel permissions and open the
       sub-permissions
    5. Check that the manage_additional_fields permission description
       makes sense, check grammar and spelling, try the various
       combinations
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ce7844c430a5c37371bbdd1e41cb440f39fba546
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Feb 14 16:55:33 2024 +0000

    Bug 36096: Add ability to set default sort and length to waitingreserves tables
    
    To test:
    1. APPLY patch and restart services.
    2. Have waiting holds, waiting holds past the expiration date, and
       waiting holds with cancellation requests.
    3. Go to Administration -> Table settings and find each of the tables. (
       holdscr | holdso | holdst )
    4. Each table should now include a 'Default display length:' and
       'Default sort order:'
    5. Play with those Table settings, ensuring they behave correctly.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 57ddbae230c68a985e33553f33ec14b035701da5
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Apr 17 12:55:04 2024 +0000

    Bug 36610: Some improvements to OPAC print CSS
    
    This patch makes a few CSS and markup changes to improve the print view.
    
    The markup changes use Bootstrap's ".d-print-none" class to hide
    specific elements without creating an ID or class specifically for those
    elements.
    
    To test, apply the patch and rebuild the OPAC CSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client)
    
    - Log in to the OPAC
    - Test the following user pages by viewing the print preview:
      - Summary
      - Holds history
      - Messaging
      - Lists
      - Suggestions
    - The "Personal details" tab hasn't been improved for printing but it's
      a good page to view to confirm that the "Back to top" arrow is now
      hidden in the print view.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b1fe94cd58bc0e01d0a730a6b8c5f3dc3ee439ba
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue May 14 18:02:49 2024 +0000

    Bug 35285: (QA follow-up) Tidy
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 64a9e3c99951b466ffbb0b9b3f5d5654b5e0f6fb
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Nov 13 16:46:17 2023 +0000

    Bug 35285: Unit tests
    
    This patch adds unit tests for the new 'is_html' function introduced in
    Koha::Notice::Message and update the tests to include the new plaintext
    handling of html_content.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    test
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 74f9c57adfa2577cfcaff9ef1f92ee42a3d35451
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Nov 8 10:43:09 2023 +0000

    Bug 35285: Remove switch in notices.tt
    
    We now wrap appropriately for non-html formatted messages as
    part of the html_content method. This means we can remove the
    case from members/notices.tt and rely on html_content doing
    the right thing for notice previews.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6b413acfc41f580ac6b424c554ac47a6fa953782
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Nov 8 09:59:30 2023 +0000

    Bug 35285: Add non-html template support to html_content wrapping
    
    This patch adds support for messages generated using non-html formatted
    notice templates to the html_content method of Koha::Notice::Message.
    
    We continue to wrap content for html generated messages with the
    appropriate headers, css and title.
    
    For non-html generated content we wrap in the <div style="white-space:
    pre-wrap"> block to maintain text formatting as defined in the original
    plaintext template.
    
    Test
    Follow the test plan for bug 30287, nothing should outwardly change.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4d344fd3ab6fa988a9b3e79e683c8217f0705d2c
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Tue May 14 11:08:19 2024 +0000

    Bug 24424: Advanced editor - interface hangs as "Loading" when given an invalid bib number
    
    The Advanced Editor hangs with "Loading, please wait" message when given an
    invalid bib number, e.g. /cgi-bin/koha/cataloguing/editor.pl#catalog/55555
    
    This is because in the bug 16424, when changes had been made to
    koha-tmpl/intranet-tmpl/lib/koha/cateditor/koha-backend.js
    (Bug 16424: Add framework support to advanced MARC editor),
    the .fail callback method of the outer .get (in the KohaBackend.GetRecord
    function called from cateditor-ui.inc) had been (perhaps by mistake?) removed.
    So, in case of failure, the situation is not handled properly.
    
    The proposal is to restore the outer .fail.  As a result, the
    openRecord( 'new/', editor, finishCb ); will be called (a standard way
    of resolving failed openRecord action (cf. the bottom of cateditor-ui.inc).
    
    Test plan:
    ==========
    0. Be sure your browser does not cache JavaScript for this test.
    1. Enable EnableAdvancedCatalogingEditor in the system preferences.
    2. Try to open in the advanced editor an unexisting record, e.g.
       http://your_ktd:8081/cgi-bin/koha/cataloguing/editor.pl#catalog/55555
       Koha should hang with a message "Loading, please wait".
    3. Apply the patch, restart_all.
    4. In a new browser window, repeat p. 2 (remember not to cache JS).
    5. The editor should open with a new empty record.
    
    Sponsored-by: Ignatianum University in Cracow
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4a18e25d3c0e24387845570b8a0d7a243c106dca
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon May 6 09:12:36 2024 +0000

    Bug 36785: Typo unreconized and bilbio in tags code
    
    Test plan:
    Look at the patch.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5653c36d4a3e3cb0999c1599ec1f9577383772ff
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon May 6 09:04:26 2024 +0000

    Bug 36785: Do not pass biblionumber to get_approval_rows
    
    Resolve:
    [WARN] get_approval_rows received unreconized argument key 'biblionumber'. at /usr/share/koha/opac/opac-tags.pl line 336.
    
    Test plan:
    Visit opac-tags.pl?biblionumber=SOME_NUMBER
    With this patch, you should no longer find a warning in the logs.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8ea126b1f89e24a2baf8c43f7bf837bf74741088
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon May 6 12:28:45 2024 +0000

    Bug 36793: Fix case of $var in Context->delete_preference
    
    This only applies to 'local' preferences.
    
    Test plan (first without this patch):
    Add a local pref. Delete it. Ask value on commandline with:
    * perl -MC4::Context -e"print C4::Context->preference('YOUR_PREF')"
    * Did you replace YOUR_PREF :)
    
    Now repeat with this patch. And verify fix (no value now).
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b77cb006f1b1145b0251579e4122b7ad0c1bd0c1
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon May 6 12:28:45 2024 +0000

    Bug 36793: Unit test
    
    This only applies to 'local' preferences.
    
    Test plan:
    Run sysprefs.t with/without second patch.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 76ebbb4b9b3a39c6e7ffffe8ad1b9b2c603daf5c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Apr 17 12:18:11 2024 +0200

    Bug 36619: Restore 'Columns' visibility on the patron search when placing a hold
    
    Test plan:
    Go to /cgi-bin/koha/reserve/request.pl?biblionumber=117
    Search for "d"
    Notice that with this patch applied the "Columns" button is back and
    that the "Configure" is working correctly
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 79adad4942695bedb45bfb3ca3741f7ad8f53f75
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue May 14 21:47:14 2024 +0000

    Bug 36864: Add a font awesome icon to indicate enabled
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 391c96aa52105b318bcd95fd04b951077312f27a
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue May 14 21:06:52 2024 +0000

    Bug 36864: Add classes/CSS/fix markup on request.tt
    
    To test:
    1. APPLY PATCH
    2. Regenerate CSS ( https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_interface )
    3. Place a hold
    4. On reserve/request.pl the 'Hold a specific item' fieldset should be
       disabled by default.
    5. While disabled try clicking on the Allowed pickup locations
       dropdowns, you should not be able to.
    6. In the 'Hold next available item', while enabled, you should be able
       to interact with the dropdowns.
    7. Use the radio buttons to enable the 'Hold a specific item' fieldset.
       You should now be able to interact with the dropdowns.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e412a4387c888816cf478d811a559c5f57f7e9e2
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon May 13 22:15:02 2024 +0000

    Bug 35961: (follow-up) Pass along the borrowernumber
    
    To test:
    1. APPLY PATCH
    2. Turn on  OpacCatalogConcerns
    3. Find a record and go to the OPAC detail page.
    4. Click "Report a concern" in the right navigation menu
    5. Make sure it works
    6. Repeat the proces from MARC view and ISBD view pages
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c2154173af06efaf007e0cdf444f885275d61f1b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon May 13 14:43:53 2024 +0100

    Bug 35961: Add missing includes
    
    This patch adds the missing includes for the 'Catalog concerns' modal on
    opac-MARCdetail and opac-ISBDdetail views.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 13c2be5a1e677d8157425b9d378bdd4e3b6907fe
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 15 09:44:01 2024 +0100

    Bug 36620: (QA follow-up) Tidy controller
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 93bcf5a844d1e12addd70f5a3d5d2ab6430127d8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 15 09:40:24 2024 +0100

    Bug 36620: (QA follow-up) Add missing filters
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3cfe1af7dba820410c5537172a875e82d472c8e2
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Wed Apr 17 11:17:22 2024 +0000

    Bug 36620: Broken order management for suggestions with quantity
    
    Test plan
    =========
    Scenario A (the bug)
    --------------------
    1. In OPAC, create a purchase suggestion with defined quantity
       ("Copies" in staff interface).
    2. Accept the suggestion.
    2. Have a budget, fund, vendor etc. to use the Acquisitions module.
       Ensure that AcqCreateItem syspref is set to 'placing an order'.
    3. Create a new basket and add to basket an order line from accepted
       suggestion.  Note the initial Quantity set to the quantity entered
       in suggestion.  Note increasing this number while you add items
       to the order with the 'Add item' button. Save the order, close the
       basket.
    4. Start receiving shipments for this order (create invoice etc.).
       Receive items you created by 'Add item' until there is nothing more
       to receive.  Note the number of unreecived items in the order (eqal
       to the initial quantity from the suggestion) that cannot be regulary
       received (with the items table on the left).  This is the *bug*.
       [This is due to the ambiguity of $data->{quantity} in the neworderempty.pl
       -- it normally comes from the order: GetOrder, but in the case of a yet
       empty order created from a suggestion, it comes from the suggestions table:
       GetSuggestion].
    5. Apply the patch, restart plack etc.
    6. Repeat step 2 and 3. While adding items in order note that you start
       from quantity 0, and that the suggested quantity is shown in brackets.
    7. Continue with p. 4.  You should be able to receive the order in the
       regular way (with the items created).
    
    Scenario B (bonus)
    ------------------
    Repeat the above with AcqCreateItem syspref is set to 'receiving the order',
    or 'cataloging the record'.  These cases do not create a bug as it does
    the case with 'placing an order'.  Note however, after applying the patch,
    the initial quantity in the order is set to 0 and there is the bonus infomation
    about the suggested number of items (from the suggestion).
    
    Sponsored-by: Ignatianum University in Cracow
    Signed-off-by: Roman Dolny <roman.dolny@jezuici.pl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 98faf85163d75ae37a12a0e283d97206d37acead
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Thu May 16 12:57:53 2024 +0000

    Bug 35836: (follow-up) optimize the script when searching for guarantors
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c90185f10ef3aff77319b0513a50945b20c1b081
Author: Matthias Le Gac <matthias.le-gac@inlibro.com>
Date:   Mon Mar 18 14:05:15 2024 -0400

    Bug 35836: change | by , for the print
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f2db025ccde3c6568d14cf87f5a326c8ea50d518
Author: Matthias Le Gac <matthias.le-gac@inlibro.com>
Date:   Thu Feb 22 14:26:24 2024 -0500

    Bug 35836: search_for_data_inconsistencies.pl - Search for loops in dependencies
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 98f69862f344630a1d6991c6e58d08e84b873e37
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed May 8 17:01:08 2024 -0400

    Bug 36819: Default layout data prints squished barcodes
    
    This patch changes the default layout data for the barcode
    width.
    
    To test:
    **On a fresh db**
    1. Go to Cataloging > Label creator
    2. Click New > Label batch
    3. Enter the following barcodes in the text field (or enter your own)
    
    39999000010114
    39999000010138
    39999000010152
    39999000011333
    39999000002331
    39999000002355
    
    4. Click Add items
    5. Click Export full batch
    6. Choose the following
       - Template: Avery 5160 | 1 x 2-5/8
       - Layout: Label test
    7. Click Export
    8. Click Download as PDF
    9. Open the PDF
       --> Note the squished barcodes
    10. Apply patch and reset_all
    11. Redo steps 1 to 9
        --> Note the barcodes now look OK
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cc52a6aa7e7c0cb7dfdd1e7ccdabd588c79dca00
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Mar 25 10:26:10 2024 +0000

    Bug 36414: OPAC - Skip csrf_token
    
    Skip csrf_token field if it already exists and
    is coming from a previous workflow stage form
    submission, as it's already included at the
    start of the form.
    
    The test plan requires EDS credentials in order to be followed.
    I'm available to help others through this test plan if required.
    Otherwise, I believe the code is simple enough to understand
    and follow what it's fixing without testing.
    
    Test plan:
    1) Install an ILL availabililty plugin, e.g.:
    https://github.com/PTFS-Europe/koha-plugin-ill-avail-eds
    3) Configure the plugin and add EDS credentials
    4) Enable ILLCheckAvailability sys pref
    5) Enable ILLModuleDisclaimerByType by copying the example YAML block in the sys pref description
    6) Create a new ILL request of type 'Book' and add a DOI
    7) You should now be on the availabililty stage, click 'Continue adding your request'
    8) You should now be on the type disclaimer stage, click 'Create'
    9) Notice 'Wrong CSRF token' error.
    This happens because the type disclaimer stage is adding its own CSRF token in addition
    to the CSRF token coming from the previous availabililty stage
    10) Apply patch. Repeat. No error -> Request is created as expected.
    11) Do the same test plan on both Staff UI and OPAC
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a324add431d30509b132efc29fc6f24462429323
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Mar 25 10:23:37 2024 +0000

    Bug 36414: Staff UI - Skip csrf_token
    
    Skip csrf_token field if it already exists and
    is coming from a previous workflow stage form
    submission, as it's already included at the
    start of the form.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b40106526d4d78a9c930df75b6b8d25bde21942c
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri May 17 07:34:00 2024 +0000

    Bug 28869: DBIC schema update
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5cf60b53297910bca2e4d6596a33d70ff4c34d05
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri May 17 07:32:16 2024 +0000

    Bug 28869: DBRev 23.12.00.058
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 629fac61f8d120b98cdef62bb380850a620d38ad
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Mar 27 13:18:21 2024 +0000

    Bug 28869: (follow-up) Switch to cud-edit_category for CSRF
    
    No test plan.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e62468de2ed75fa33b2428d31c2a883c9176431e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Jan 30 13:53:05 2024 +0000

    Bug 28869: Unit tests
    
    Test plan:
    Run t/db_dependent/AuthorisedValues.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d7757196cc8aa90de9ade42abf432db91f798f91
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Feb 5 09:34:49 2024 +0000

    Bug 28869: (follow-up) Add html restriction for tinyint
    
    Several item fields are signed tinyints, connected to
    authorised value categories like NOT_LOAN etc. They only
    accept -128 up to 127.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 593c184274547114a920b3f45225ed92ba9ce457
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Jan 29 10:31:23 2024 +0000

    Bug 28869: Implement authorised_value_categories.is_integer_only
    
    Test plan:
    Add category with/without integer restriction.
    Test adding/editing values.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 961df91b03885b225709e75d43c7d6cff25fdc5c
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Jan 30 14:08:09 2024 +0000

    Bug 28869: Database revision
    
    Test plan:
    Run updatedatabase.pl
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c9e7b7442b08913ab3f7ae22415b42d17939e609
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 15 11:51:54 2024 +0000

    Bug 36844: (QA follow-up) Fix preselected options on set-library.pl
    
    I found that when switching from a branch with a default register to one without, the default register for
    the last branch was remaining selected (though disabled)
    
    When opening the page if no desk was set (choose 'My library' on initial login) the branch was default to 'No desk' rather than defaulting to the first desk of the current branch
    
    Remove a debugging line as well
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit dc6dcd13bdb381d1af8e3389c707075982909cc0
Author: Victor Grousset <victor@tuxayo.net>
Date:   Tue May 14 03:50:48 2024 +0200

    Bug 36844: (QA follow-up) fix forgotten 'for' attr change
    
    It didn't match the <select> id.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e02ac2ece60b64d2c40d71617405c6fc92e67ab8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon May 13 16:53:39 2024 +0000

    Bug 36844: Set library, desk, and cash register menu follow-ups
    
    This patch ties up a couple of loose ends which should have been
    included in Bug 36582. The patch includes fixes for the staff interface
    login page and the cash register statistics page.
    
    To test you should have multiple libraries, desks, and cash registers
    defined. You may need to enable the UseCirculationDesks and
    UseCashRegisters system preferences.
    
    - Apply the patch and log out of the staff interface.
    - On the login form, test that changing your selected library correctly
      affects the desk and cash register dropdowns: Only desks and registers
      for your selected library should appear.
    - Log in and confirm that your selections were submitted correctly.
    
    - Go to Reports, and under "Statistics wizards" choose "Cash register."
    - Confirm that changes to the "Transaction library" correctly change the
      available options in the "Cash register" dropdown, including the "All"
      option.
    
    Sponsored-By: Athens County Public Libraries
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 70b9f02920a355c5890788fbb643ae55df7cfe39
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue May 14 11:10:32 2024 -0400

    Bug 36859: Pass the op value 'cud-checkout' for the batch checkout form
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f368156e075e1b3608520cfd6a48d3b1052b07d0
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed May 15 10:41:53 2024 +0000

    Bug 36623: (follow-up) Fix cypress test
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b58892ebbb8472c8981cbea1bd6d7d3de86fb106
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Apr 9 14:45:39 2024 +0200

    Bug 36149: Add userenv middleware to app.psgi
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ab715cab3a991953d1ff00e06ea910cdb70a3f03
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 29 18:09:30 2024 +0000

    Bug 36149: (follow-up) POD and tidy
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit df23f6c3456bb0898b44bb52066faecd757983f7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 8 16:06:11 2024 +0100

    Bug 36149: Unset userenv from middleware
    
    The userenv (logged in user's info) are stored in
    $C4::Context->context->{activeuser}, which persists in plack worker's
    memory.
    It's really bad in theory as we are not cleaning it before or after the
    HTTP request, but only when set_userenv is called (what we are doing
    commonly in C4::Auth::get_template_and_user).
    If C4::Context->userenv is called before set_userenv we should get undef,
    not the userenv from the previous request!
    In practice this should not be a problem, but well... who really knows?
    
    This patch suggests to have a middleware to deal with removing the
    userenv at the beginning of each request (maybe it should be after, right? - FIXME).
    
    To test:
    1 - Edit /etc/koha/sites/kohadev/koha-conf.xml to set <plack_workers>1</plack_workers>
    2 - Edit about.pl  and add a line after: CGI->new:
        warn Data::Dumper::Dumper( C4::Cointext->userenv() );
    3 - tail -f /var/log/koha/kohadev/*.log
    4 - View about.pl in staff interface, should get a "somethign's wrong" warning
    5 - Reload, you get current user info
    6 - Open an incognito tab, sign in as a different user and click some stuff
    7 - Reload about.pl in other window
    8 - You get the opac user info
    9 - Apply patch
    10 - Edit /etc/koha/sites/kohadev/plack.psgi and add the middleware after "RealIP":
         enable "+Koha::Middleware::UserEnv";
    11 - Restart all
    12 - Reload about.pl - you get a "Something's wrong" warning
    13 - Click things in opac on incognito window
    14 - Reload about.pl  - only "Something's wrong" - you no longer see any user info
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1efe9ffc776e864ad3e8109719d9b5765d91f9c5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 20 08:35:29 2024 +0100

    Bug 19613: Use the 'note' profile
    
    WNC amended patch: tidied
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b31c732105a3a882510ff25406998ea7a77d7ece
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 15 11:37:43 2024 +0100

    Bug 19613: Scrub borrowers fields: borrowernotes opacnote
    
    To prevent XSS
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 077636977606357d0634c7cad81f5eb38f6bbce3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 5 08:58:06 2024 +0200

    Bug 36532: Protect opac-dismiss-message.pl from malicious usages
    
    Really bad design, NEVER retrieve the logged in user from the CGI
    param!
    
    See comment 1 for more info
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 489f6f86fd1bf6f4a7555bbbb3b74a1908d3b3cf
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Mar 29 07:07:54 2024 -0400

    Bug 36382: (QA follow-up) Don't escape quotes in escapeHtml
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a1045024372ceb2f149ca2c15f138f0542fc0b8c
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Mar 21 09:30:26 2024 -0400

    Bug 36382: XSS in showLastPatron dropdown
    
    1) Set borrower surname to:
        <script>alert("here comes trouble");</script>
    2) Save, nothing happens
    3) Enable showLastPatron
    4) Reload patron
    5) Note the alert popup
    6) Apply this patch
    7) Reload patron
    8) No alert!
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2884226fe27cd3e4d5f4a070405c047183fed881
Author: Jan Kissig <jkissig@th-wildau.de>
Date:   Fri May 3 14:11:58 2024 +0200

    Bug 36772: OPAC Self checkout accepts wrong or partial barcodes
    
        When using the opac trusted checkout feature it is possible to enter non existant or partial barcodes to check out items.
    
        Testplan:
        a) set  System preference OpacTrustedCheckout  to Allow
        b) go to http://localhost:8080/ and login with koha / koha
        c) click Self Checkout in navigation bar
        d) enter barcode 1234
        e) result: Item '39999000011234' was checked out
    
        apply patch and reload the page
    
        a) now enter barcode 1234
        b) result: Item '1234' not found
        c) enter 39999000011234
        d) result: Item '39999000011234' was checked out
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a0b1ee7df30a191a65fc44020bbe18dd69366ce2
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Fri May 10 08:31:42 2024 +0300

    Bug 36825: Hide "Protected" field via BorrowerUnwantedField syspref
    
    Setting field "Protected" as hidden in patron entry/modification
    form via BorrowerUnwantedField syspref doesn't work. Form is
    missing condition "UNLESS noprotected".
    
    To test:
    1. From BorrowerUnwantedField, check field "Protected" as hidden.
    2. Either attempt to create a new patron or modify existing one.
    => Note that "Protected" is still displayed in the form.
    3. Apply this patch.
    4. Navigate back to create/modify patron form.
    => Note that "Protected" is no longer displayed.
    5. Uncheck field "Protected" from BorrowerUnwantedField.
    => Field should now be displayed in create/modify form.
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 537d5aac5ac46718e3a1a5f8dac2baf26a8abdea
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon May 13 12:06:02 2024 -0300

    Bug 36837: (follow-up) UNIMARC case
    
    I checked the UNIMARC authResults counterpart file. And it only
    contained a single case of generated elements like the previous patch.
    
    To test:
    1. On latest main
       $ ktd --shell
      k$ cd misc/translator/po
      k$ git fetch
      k$ git reset --hard origin/main
      k$ cd /kohadevbox/koha
      k$ gulp po:update --lang es-ES
      k$ cd misc/translator/po
      k$ git add -u ; git commit -mWIP --no-verify
    2. Apply this patches
    3. Run:
      k$ cd /kohadevbox/koha
      k$ gulp po:update --lang es-ES
      k$ cd misc/translator/po
      k$ git diff
    => SUCCESS: Notice CSS class names are not translated anymore
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 48e39c1e5cea2db2c4e0951a6efcae7e611490fb
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon May 13 10:58:48 2024 -0300

    Bug 36837: Simplify XSLT and aid translatability
    
    This patch makes the XSLT contain HTML tags instead of building them
    from scratch with static attribute values. This made it awkward for
    translators as CSS classes ended up being extracted for translation
    purposes. Plus, there's no need to spend CPU cycles on static content
    generation.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d4c70f7d07dcc0fe1319b6e0380abcd1b7400b95
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Tue Apr 18 21:42:24 2023 +0200

    Bug 33099: Add missing MARC21 Match authority mappings so "Search all headings" search works
    
    The main entry form of corporate names (110), uniform titles (130), topical
    terms (150), geographical names (151), and genre/form (155) are not indexed
    with 'Match' search field in Elasticsearch standard mapping.  As a result,
    the respective records are not present on the result list when performing
    an 'All headings' search for the authority records with the main heading form
    (MARC 21).
    
    Test plan
    =========
    0. Have a test installation with Elasticsearch.
    1. In Authorities, make an 'All headings' search for a main entry
       form from the corporate names, uniform titles, topical terms,
       geographical names, or genre/form
       --> e.g., in ktd: UK Archiving.  You will get no results.
    2. Apply the patch, reindex with:
       sudo koha-elasticsearch --rebuild -r -a kohadev
    3. Repeat the test. You should see 'UK Archiving' on the result list.
    
    Signed-off-by: Roman Dolny <roman.dolny@jezuici.pl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7291a312332e4fac7ac61288f33a001d4a7b306c
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Mar 20 15:32:50 2024 -0400

    Bug 36378: Cannot stay logged in if AutoLocation is enabled but branch ip is not set correctly
    
    We can get into a scenario what a user cannot stay logged in for more than a single page load.
    If AutoLocation is enabled with branch IP addresses being set to a space, you will be logged out with every page load.
    
    Test Plan:
    1) Set your branch ip to a space
    2) Enable AutoLocation
    3) Restart all the things!
    4) Log out
    5) Log in
    6) Browse to another page
    7) You are logged out
    8) Apply patch
    9) Repeat 1-6
    10) You are not logged out!
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 02eae879ebf8bab98010b92e9913a79264185533
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Apr 29 15:18:26 2024 +0000

    Bug 36708: Fix column index for processing No automatic renewal after
    
    To test:
    1- Find or create a circulation rule with a 'Holds allowed (total)' limit of 3 (or another number) and no value in 'No automatic renewal after (hard limit)'
    2- Select to edit the rule, and note that 'No automatic renewal after (hard limit)' box in the editing line is now populated with a date
    3- Note also that 'Holds allowed (total)' is empty in your editing line
    4- If you save your edits without clearing the new 'No automatic renewal after (hard limit)' date, it will save as part of the rule. Also, 'Holds allowed (total)' will save as Unlimited unless you re-add your numerical value.
    5- APPLY PATCH
    6- Try again, the values should save corrected and not erroneously fill the No automatic renewal after (hard limit) column.
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3af27824b73af78b432b0c177892afa90c4b7f23
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 14 14:47:33 2024 +0200

    Bug 35862: Fix patron_search_form selection
    
    We were no longer getting a match here and so ended up with 2 forms on
    the budget page (where we have two modals for patron: owner and users).
    
    Caught be selenium tests patrons_search.t :
    Error while executing command: element not interactable: Element <a class="patron_name patron_preview" href="/cgi-bin/koha/circ/circulation.pl?borrowernumber=511"> could not be scrolled into view
    
    It fixes the following UI issues:
    When you open a modal, start a search, close the modal
    open the other modal search: the results from the other modal were shown
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6d8f72efa0570141fd5bbe4b0a86c70dde74f945
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 14 14:46:29 2024 +0200

    Bug 35862: Remove dup aside node
    
    The aside element is now a parent of the form block, in
    patron-search.inc (BLOCK patron_search_filters).
    
    On members/members-home.pl there were 2 nested aside
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 69c64bcb7284fc7de487d37543a2815c07270f53
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 14 11:51:11 2024 +0200

    Bug 35362: Adjust other "Close window" clicks
    
    Previous patch "Bug 35362: (follow-up) Fix guaruntor preview modal close in test"
    didn't adjust the other occurrences.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 33e9127082cd16f5e71ea4eb0adf3f8d1a6441eb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 14 10:41:20 2024 +0200

    Bug 36018: Prevent random failure from api/v1/acquisitions_orders.t
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 150914e2345b685fb2563df91b564713ef3b1941
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Mon May 13 14:21:05 2024 +0000

    Bug 34788: (follow-up) Fix unit tests
    
    prove t/db_dependent/Koha/BackgroundJob/ImportKBARTFile.t
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b7e5dab1e71c46a52a94a0b5c244a716653b61be
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon May 13 14:03:47 2024 +0000

    Bug 30047: (follow-up) Fix failing tests
    
    This patch updates the test files to correctly create authorities and/or correctly
    mock the needed data for authorities.
    
    the tests in t/db_dependent/Authority/Merge.t cover the case of 'Default' authorities
    which don't have valid headings - so I had to add handling for blanking the heading field
    when Default type is used.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit aae125044d78f9f1a71bdc229b029db585422890
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon May 13 13:46:03 2024 +0000

    Bug 36838: Add CSRF token to tags review AJAX requests
    
    The JavaScript for approving or rejecting tags in the staff interface's
    tag review interface lacked a CSRF token for the POSTed requests. This
    patch adds the token for "approve" and "reject" operations.
    
    To test, apply the patch and clear your browser cache if necessary.
    
    - If necessary, enable tags in system preferences.
    - Log in to the OPAC and submit multiple tags on various records.
    - In the staff interface, go to Tools -> Tags.
    - Test the process of approving and rejecting tags by clicking the
      buttons in each row of the table of tags.
    - The browser console should show no errors, and the lists of approved
      and rejected tags should correctly show the tags you moderated.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 43eb61f0d80cf69a90e08ed877491a432b7c7f04
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 13 15:59:57 2024 +0200

    Bug 29948: Adjust sysprefs.sql
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fffb3665eadec04792b055e9ba04152b3b36d6dd
Author: danyonsewell <danyonsewell@catalyst.net.nz>
Date:   Fri May 10 02:40:45 2024 +0000

    Bug 36723: Add musical presentation to Elasticsearch index mappings
    
    Testing plan:
    
    1. Start up KTD with Elasticsearch: ktd --es8 up
    2. Apply the patch and restart everything (restart_all).
    3. Reset the mappings: Administration > Catalog > Search engine configuration (Elasticsearch) > Reset mappings (at the bottom of the page)
    4. Reindex: koha-elasticsearch --rebuild -d -b -a kohadev
    5. Alternative to steps 3 and 4: reset_all
    6. Update the visibility for 254$a in the default framework so that it is visible in the Editor (OPAC, Staff interface should already be selected).
    7. Add a new record using the default framework and put a term in 254$a, such as 'Full score'.
    
    Sponsored-by: Education Services Australia SCIS
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4b8dad9a8e5c70e4ec5e1d7f29790b6fd4e3796f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Apr 1 13:04:06 2024 +0000

    Bug 36472: Add search box at the top of the authorities editor page
    
    This patch adds the authority search header include to the authorities
    editor page.
    
    To test, apply the patch and go to Authorities -> New authority.
    
    There should now be a set of authority search forms at the top of the
    page.
    
    Signed-off-by: Michelle Spinney <mspinney@clamsnet.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit be98d633be1fb34f52ccc8b57b18280856cf1d1a
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Mar 6 18:41:04 2024 +0000

    Bug 34823: Do not show Item group dropdown if there are no item groups
    
    To test:
    1. Enable EnableItemGroups and EnableItemGroupHolds
    2. Go to the OPAC and log in as a patron
    3. Go to any record that doesn't have grouped items and try to place a hold
    4. Click on "Show more options"
    5. See "Request specific item group:" and dropdown
    6. APPLY PATCH
    7. Try again, this time if the record has no item groups you should not see the dropdown at all.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2d34006653b96c0beaa4bc250f9eec8207ba5116
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Fri May 10 16:35:01 2024 -0400

    Bug 36440: (QA follow-up) Update op parameter
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6e6167f3e14337402d7ac219a7c521d49ec79015
Author: Stefan Berndtsson <stefan.berndtsson@gmail.com>
Date:   Fri Nov 3 10:14:39 2023 +0100

    Bug 36440: Add edit buttons for patron flags in attention box
    
    Add edit buttons for patron flags in attention box and show
    flag status in detail view
    
    To test:
    1) Go to patron details for a patron with address in
       doubt and card lost flags set and verify these are
       highlighted under "Library use" and the patron messages
       has edit buttons that links to the modfiy patron page.
    
    Sponsored-by: Gothenburg University
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 36eab911dda07d922e0b139f3d1f8aa982f15e00
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Thu Apr 4 12:31:59 2024 +0000

    Bug 26654: Added item number column to item search
    
    Test plan:
    1. Apply patch
    2. Do an item search and notice the column containing the item number
    
    Signed-off-by: Michelle Spinney <mspinney@clamsnet.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0fcd0a92de8235487b3e2d2ce2ed0fb63b59d3f6
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon May 13 11:29:35 2024 +0000

    Bug 29948: (follow-up) Add CSS class to list items
    
    This will allow to hide some of the entries by their source from $2.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5f7dd9c62db1d78fe705f524517e6c969ab5ad80
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon May 13 10:11:33 2024 +0000

    Bug 29948: DBRev 23.12.00.057
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 88acb4ea49ae271127434729fac2ee5f5dd658bf
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 6 12:22:42 2024 +0200

    Bug 29948: Remove margin bottom for paragraph
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bc77ca128a630487c807cded01c9bfdfdf28b90e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 6 12:18:55 2024 +0200

    Bug 29948: Hide entry if empty
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bdc06dd36f6651f0cc6d5f8a4140c50c75564c9f
Author: David Nind <david@davidnind.com>
Date:   Mon May 6 06:48:28 2024 +0000

    Bug 29948: (follow-up) Update system preference description and heading
    
    This follow-up:
    1. Updates the OPACAuthorIdentifiersAndInformation system preference
       description.
    2. Changes the OPAC heading used on the bibliographic record and
       authority record detail pages from "Author identifiers/information"
       to "Author information". Identfiers are a subset of author information
       and having just "Author information" is sufficient. In addition,
       the authority record doesn't have to include identifiers.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3c503a159500a7e66d9d63c9905a04480b753f71
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 22 12:46:21 2024 +0100

    Bug 29948: Fix display of selected values
    
    The values were correctly inserted but the display was not sorting
    correctly
    
    Signed-off-by: Signed-off-by: Hugo Agud <hagud@orex.es>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6f1b00e24d83f79ab74d8f6bd1b33ead3ef9a671
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 14 10:40:29 2024 +0100

    Bug 29948: Allow to sort info
    
    With this patch the different info can be ordered when editing the
    syspref
    
    Sponsored-by: Orex Digital
    
    Signed-off-by: Signed-off-by: Hugo Agud <hagud@orex.es>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 40ca270825734e9716871401cabd86414ff4c470
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 14 09:58:05 2024 +0100

    Bug 29948: OPACAuthorIdentifiersAndInformation
    
    This patch merge the previous patch attempt with the existing OPACAuthorIdentifiers syspref.
    
    It creates a new syspref OPACAuthorIdentifiersAndInformation and remove
    OPACAuthorIdentifiers.
    "identifiers" become an entry of the new syspref.
    
    Test plan:
    Select some entries in OPACAuthorIdentifiersAndInformation
    Edit an authority record and enter data in the corresponding subfield
    (the list is on the syspref entry)
    Go to the biblio detail page or the authority detail page at the OPAC
    and notice that the info you selected are correctly displayed.
    
    Sponsored-by: Orex Digital
    
    Signed-off-by: Signed-off-by: Hugo Agud <hagud@orex.es>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 070f720aaeda27ff0d863fe20a3cd60743558167
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 13 16:07:47 2024 +0100

    Bug 29948: Display authors information along with the identifiers
    
    Sponsored-by: Orex Digital
    
    Signed-off-by: Signed-off-by: Hugo Agud <hagud@orex.es>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 11cdeb0889ecd4b2827690a6e7df45c912f2a9e1
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri May 10 13:13:20 2024 +0000

    Bug 36827: Fix tab formatting
    
    This patch removes unwanted whitespace between the tabs and the tab content
    
    Test plan:
    1) Enable the ERM module and navigate to the eUsage > Reports sections
    2) Observe the whitespace between the tabs and the content
    3) Apply patch and run yarn build
    4) Hard refresh the page, the whitespace should be gone
    
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f3af09c78cbec3e091164e71f74c97bcb90f9978
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri May 10 13:18:45 2024 +0000

    Bug 36828: Remove commented out code
    
    Test plan:
    1) Look at the patch diff and observe that the commented out code has been removed
    
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 274c0bee86be52c9c66c0df3fccdd45c0c271977
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Mar 20 16:04:14 2024 +0100

    Bug 36370: Add ContentWarningField to UNIMARC XSLT
    
    Bug 31123 added new feature with preference ContentWarningField.
    Add this behavior to UNMARC XSLT files.
    
    This patch adds new template 'tag_content_warning' in UNIMARCslimUtils.xsl
    called in results and details pages.
    
    New field is placed after 3xx.
    
    Test plan (in both interfaces OPAC and staff):
    1) Create a new field 599 in framework
    2) Set system preference ContentWarningField to 599
    3) Edit a record to add a 599 with text in $a$b and an URL in $u
    4) Perform a search to find this record
    => Check you see content_warning: <a href="$u">$a</a> $b
    5) Click on details page
    => Check you see content_warning: <a href="$u">$a</a> $b
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6635f7393695b7963eeb7a91e76d36a64b0e5968
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Mar 6 16:24:25 2024 +0000

    Bug 36373: Show existing bookings in the datepicker
    
    This patch exposes existing bookings as info dots in the flatpickr
    
    Signed-off-by: Esther <esther@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 93a5ec9ca4a5d7273a0fd03fe376608b299e00ba
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Sun Mar 17 11:23:51 2024 +1300

    Bug 36325: Add --exclude-logs option to koha-run-backups
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c8bc861ec7a8ed4ba2426d65ea6de93db722df77
Author: danyonsewell <danyonsewell@catalyst.net.nz>
Date:   Fri Mar 15 01:21:53 2024 +0000

    Bug 36325: Add option to koha-run-backups/koha-dump, to exclude logs
    
    Written patch to add flag to both koha-dump and koha-run-backups.
    
    Test plan:
    1. do a sudo koha-dump and sudo koha-run-backups and check the contents of the .tar.gz backup in /var/spool/koha/instance/ and verify logs are in there
    2. apply this patch
    3. this time do sudo koha-dump --exclude-logs and sudo koha-run-backups --exclude-logs and check the contents of the .tar.gz backup in /var/spool/koha/instance and verify nothing from /var/log/koha is in there.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e48df518e842ebe0c1a1d383297f375e3da521d7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Feb 19 09:50:22 2024 +0000

    Bug 35813: Migrate 'transient_result' to 'messages.inc'
    
    This patch DRY's out the code by migrating the transient_result div into
    the now widely included messages.inc include.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 21cda2fa638e19c783ac82e599190af51c1043c8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jan 16 12:18:48 2024 +0000

    Bug 35813: (follow-up) Correct dialog class and clean up whitespace
    
    This patch changes the class of the success message from "success"
    (which is a Bootstrap class) to "message" which is the class we use
    elsewhere in Koha for this kind of informational message.
    
    The patch adds the same dialog markup to labeledMARCdetail.tt.
    
    The patch also trims trailing whitespace from place_booking_modal.js
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cef4c56d6ec7197340f8f86184fd305ded5f4b2a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jan 15 16:45:03 2024 +0000

    Bug 35813: Add success feedback after placing/editing bookings
    
    This patch restores the lost behaviour that a successful add/edit of a
    booking via the 'Place booking' modal should notify the end user that
    the submission was sucessful.
    
    Test plan
    1) Set an item as bookable to expose the 'Place booking' button
    2) Place a new booking from the following pages and confirm that you
       now recieve feedback.
       * Catalog > Title > Details
       * Catalog > Title > MARC details
       * Catalog > Title > ISBD details
       * Catalog > Title > Item details
       * Catalog > Title > Bookings
    3) Edit a booking on the 'Catalog > Title > Bookings' page and confirm
       you now recieve feedback.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c74169ba27c2e12473239b15358e428bc05da9f5
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Mon May 6 13:24:10 2024 +0000

    Bug 36794: Illegitimate modification of biblionumber subfield content (999 $c)
    
    It happens that librarians, by mistake, open a biblio editor putting in the
    URL, by hand, the biblionumber prefixed with a blank (e.g.
    .../addbiblio.pl?biblionumber= 123 -- mind the space before 123).
    In such a case the editor opens with the right biblio record (i.e. 123)
    but, after saving the record, the content of the biblionumber MARC
    field (999 $c for a standard MARC 21 installation) results modified and
    contains additional initial blanks.
    
    Moreover, while using ES and making a search for the record (with title,
    author etc.) we get two records on the result list (instead of one).
    
    This is because in the addbiblio.pl script $biblionumber is taken (and
    continuously used) directly from CGI parameter, without any
    validation and/or correction.
    
    Test plan:
    ==========
    0. Have a test installation with ES.
    1. Open a biblio record in the editor with an added space before
       biblionumber value, e.g.:
       http://ktd:8081/cgi-bin/koha/cataloguing/addbiblio.pl?biblionumber= 123
       Save the record.
    2. From the Normal view choose Save -> MARCXML.  Open the saved file in
       your favourite editor.  You should see, at the end, something like:
       <datafield tag="999" ind1=" " ind2=" ">
         <subfield code="c"> 123</subfield>
       (mind the space before 123).
       This is not right.
    3. Make a search with the title or author's name from the record (e.g.
       Henning Mankell for the record 123 from the default ktd data set).
       You should get two records instead of one (while using ES).
    4. Apply the patch, restart_all.  Repeat p. 1 and 2 with a different
       biblionumber.  Notice the unchanged (i.e. without spaces) value
       of 999 $c subfield in the exported record and only one record
       as a result of a search.
    
    WNC amended patch - rebased, added conditional in case no bib, moved comments to their own lines
    
    Sponsored-by: Ignatianum University in Cracow
    Signed-off-by: Roman Dolny <roman.dolny@jezuici.pl>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4b66fbc4ebc0fe706f9a9b9057a19ee0c1b13aa3
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Tue May 7 09:13:54 2024 +0000

    Bug 36799: Illegitimate modification of MARC authid field content (001)
    
    It happens that librarians to save time open an authority editor by putting
    in the URL, by hand, the authid prefixed, by mistake, with a blank (e.g.
    .../authorities.pl?authid= 100 -- mind the space before 100).  In
    such a case the editor opens with the right auth record (i.e. 100) but,
    after saving the record, the content of the authid MARC field (001 for
    a standard MARC 21 installation) results modified and contains
    additional initial blanks.
    
    Moreover, if the heading (1XX field) was modified in the authority record
    during such an edit, the changes will not propagate to the linked
    bibliographic records.  And won't in the future.
    
    This is because in the authorities.pl script $authid is taken (and
    continuously used) directly from CGI parameter, without any
    validation and/or correction (line 540 in the current main branch).
    
    Test plan:
    ==========
    1. Open an auth record in the editor with an added space before
       authid value, e.g.:
       http://ktd:8081/cgi-bin/koha/authorities/detail.pl?authid= 100
       Modify the heading field -- in the ktd data set:
           150 Computerized typesetting
       Save the record.
    2. a) Open the record for editing again--see the space added before
       the authid in field 001.  Close the editor (with Cancel).
       b) Try to go to the linked biblio records with Used in X records.
       Note no results, if using ES.
       c) Remove the space before authid (after an:) in the URL.
       Go to the linked biblio records.  See that the content of
       the field controlled by the modified auth record did not
       update.
    3. Apply the patch; restart_all.
    4. Repeat p. 1 and 2 with a different authid.  Everything should
       be OK now.
    
    Sponsored-by: Ignatianum University in Cracow
    Signed-off-by: Roman Dolny <roman.dolny@jezuici.pl>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d2f41df188c3d8e8d8705c6a5ceb583e3e29e629
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Thu Apr 4 09:04:47 2024 +0300

    Bug 33849: Do not reset new patrons home library when error occurs
    
    While adding new patron, if patron is flagged as duplicate
    or another error occurs and their home library differs from
    library user is logged in, patrons home library resets as
    logged in users library. This happens with all patrons
    expect those with category type C. This patch removes checking
    if patrons category type is C from code so that all category
    types use previously chosen home library even if error occurs.
    
    To test:
    1. Add new patron and set their library to a different
    library than the one you're logged in.
    2. Cause an error (wrong age, duplicate etc) while saving.
    3. Attempt to save.
    => Note that patrons home library is set as one you're
    logged in.
    4. Apply this patch.
    5. Repeat steps 1 to 3.
    => Note that patrons home library hasn't changed.
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: Esther <esther@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2b3ad46f979d0ba2e5c0ea2e128597e9c8bf153e
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon May 13 08:33:50 2024 +0000

    Bug 35149: DBRev 23.12.00.056
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 42d95f362a89c9c2236220f6b961b1748792087f
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Wed Feb 21 20:03:42 2024 +0100

    Bug 35149: Change CircAutoPrintQuickSlip syspref explanation
    
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3d030ded6bc3d60b6a6e0ca8c6c648b5bb167e0e
Author: Stefan Berndtsson <stefan.berndtsson@gmail.com>
Date:   Mon Sep 25 14:05:06 2023 +0200

    Bug 35149: Add Option to ignore submit of checkout field when empty
    
    1) Apply patch
    2) Set CircAutoPrintQuickSlip to "do nothing"
    3) Go to the checkouts form for a specific patron
    4) Submit the form with empty value
    5) Verify that no action is taken and you stay on the current page
    
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5cc42c162c51aa3624f5e46e2ad6c70dd5ee6f01
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue May 7 16:03:54 2024 +0000

    Bug 36797: Change WHILE loop into FOREACH
    
    To test:
    1. Find a record that has 1000 non-waiting holds with different priorities.
    2. Try loading the reserve page for that record ( /reserve/request.pl?biblionumber=X )
    3. Error: Template process failed: undef error - WHILE loop terminated (> 1000 iterations)
    4. APPLY PATCH
    5. Try again, this time the page should load.
    6. Try testing on a record with less than 1000 holds, making sure the priorities are still set right.
    7. Make sure you can change your priorities and everything works right.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1aba01adb4ff61c6af77af6b42f13d29d55df4f2
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Fri May 10 14:01:59 2024 -0400

    Bug 36832: (bug 36791 follow-up) Allow authid=0
    
    To test:
    1. Go to the Authorities module and do a Z39.50 search that will return
       results (e.g. a general subject heading)
    2. Import an authority record from the results
    --> Confirm that the record is imported into the editor
    3. Authorities > New, replace it via Z39.50, confirm it's imported
    4. Authorities > New, fill the required fields, confirm it saves
    5. Edit an existing authority, replace it via Z39.50, confirm it saves
    6. Edit an existing authority, replace authid=nn in the URL with a
       number that doesn't exist like 1000000, confirm you get a 404 page
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Janusz Kaczmarek <januszop@gmail.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b7a5cc5beeb4af7cd23a414519c038f007f5b959
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Mon Jan 29 10:08:00 2024 +0100

    Bug 35927: Selecting MARC framework again doesn't work when adding to basket from an external source
    
    Like Bug 19372, selecting MARC framework currently doesn't work when adding to basket from an external source.
    Strangly I can reproduce on koha-testing-docker, but we have this issue with a Ubuntu Focal install.
    Looks like it comes from a bad syntaxe than needs to be replaced in any case.
    
    Test plan:
    1) Add an order to a basket from an external source
    2) Select another framework than the default one on the search result
       view. Before doing 'add order' on choosen search result line.
    3) Chek the framework code you will pick will be used in the created biblio record
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5406aaedfa86aa97ed06019f4862bff285a4aad2
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Mar 15 16:02:11 2024 +0100

    Bug 36335: Fix ILS-DI GetRecords bad encoding for UNIMARC
    
    ILS-DI GetRecords generates bad encoding of MARCXML for UNIMARC, like OAI in Bug 34467
    
    Enable ILS-DI and display a record with :
    <opac url>/cgi-bin/koha/ilsdi.pl?service=GetRecords&id=<biblionumber>
    
    Well-known issue, fixed
    Signed-off-by: Frédéric Demians <f.demians@tamil.fr>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit af6a0b78b7d0e73176923d67501ef54511f6d435
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri May 10 14:14:54 2024 +0000

    Bug 34788: (follow-up): Fix translations
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2ab4b20aaa652267bd8976be412bf8851340cbe9
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri May 10 15:58:37 2024 +0100

    Bug 33737: (QA follow-up) Add missing column configuration
    
    I somehow missed commiting the column configuration bits.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2daa27427809d8afc39dc1d144f4cfe03ddd9ad2
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Mon May 6 12:04:39 2024 -0400

    Bug 36735: (follow-up) Fix TT filters and add a comment
    
    holds_table.inc depends on form-submit.js, but importing the asset
    directly breaks the script. Add a comment stating that any script that
    imports holds_table.inc must import form-submit.js too.
    
    Also change uri filters to html
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 236c9d4d98e653874486b5cb0cf12f0e3447b0c9
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Tue Apr 30 15:32:13 2024 -0400

    Bug 36735: Fix revert hold button
    
    Update the revert hold button to use the new include for submitting
    forms from link data with a POST request
    
    To test:
    1. Place a hold on a biblio record
    2. Check an item in to fill the hold
    3. On the holds tab for the biblio record, click the "Revert waiting
       status" button for that hold
    --> The page reloads but the hold is still waiting
    4. Apply patchset
    5. Click to another page and then return to the holds tab (we don't want
       to refresh the page and resend the request)
    6. Click the "Revert waiting status" button for that hold
    --> The hold should be reverted to pending status
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 11c69496bcd216ad264acd87409e5160c73995bf
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 10 09:30:53 2024 -0300

    Bug 34041: (follow-up) escape double dashes to prevent issues
    
    Having double dashes inside a commmented block is not valid XML. This
    patch restores it, with an added message explaining it
    
    To test:
    1. Run:
       $ xmllint etc/z3950/config.xml
    => FAIL: You get:
    etc/z3950/config.xml:5: parser error : Double hyphen within comment: <!--
      <config>
          <z3950_responder_options>
          <z3950_responder_options>--add-item-status k -t 5</z3950_responder_options
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: All good!
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3878dbe9994186d70b3eb94e5096d4d1c6cf5452
Author: Liz Rea <liz@bywatersolutions.com>
Date:   Fri Jun 16 12:50:35 2023 -0500

    Bug 34041: z3950 responder additional options not coming through properly
    
    This patch adds the <config> node that the z3950 responder starter script is looking for in the z3950/config.xml to the example code.
    
    To test:
     - verify that the <config> </config> is around the commented z3950_additional_options suggestion in the etc/z3950/config.xml file
     - copy the config stanza to the live file: /etc/koha/sites/kohadev/z3950/config.xml
     - restart_all
     - ps aux | grep z3950
     - confirm the script has restarted
     - confirm the options: --add-item-status k -t 5 have been passed through
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 582d6916c9a4e021641030d8779466cb5f7f6273
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri May 10 14:14:59 2024 +0000

    Bug 36830: Update delete -> cud-delete
    
    1) Visit <staff_url>/cgi-bin/koha/tools/holidays.pl
    2) Select "Holiday only on this day" (or whatever other option to add an holiday). Click 'Save.
    3) Now click on that day in the calendar, pick "delete this holiday". Click 'Save'. Notice the holiday is still there.
    4) Apply patch. Repeat. Notice its deleted.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 38e358241367b61dc26dfe0b4ca2af4288871dbe
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri May 10 15:15:12 2024 +0100

    Bug 33737: (QA follow-up) Translatability
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 31af594bb0b2e00ceb07c655059a59e62ed7ebdf
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Sun Feb 18 17:25:33 2024 +0000

    Bug 33737: Fix undefined variable issues
    
    This patch resolves the undefined bookings_table variable issue reported
    and also further fixes a subsequent undefined timeline bug that was
    exposed by the original fix.
    
    Signed-off-by: Esther Melander <esther@bywatersolutions.com>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f46453cd89d07c94debcd07ce93b095b277e165a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Aug 18 11:38:53 2023 +0100

    Bug 33737: Link from patron bookings to biblio bookings
    
    Signed-off-by: Esther Melander <esther@bywatersolutions.com>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a8bf78d32ef81556b2a2630f33abfbbc94189fc5
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Aug 18 11:21:37 2023 +0100

    Bug 33737: Fix patron bookings table display issues
    
    Signed-off-by: Esther Melander <esther@bywatersolutions.com>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cee9da8efcff2f854e108f75a28319c8d4768272
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Dec 7 14:38:06 2021 +0000

    Bug 33737: Add bookings tab to patron details
    
    This patch adds a new 'bookings' tab to the bottom of the members
    details pages.  When a patron has any future or current bookings against
    their record the tab will display the number of bookings in the tab name
    and on clicking the tab a bookings table will display the current and
    upcoming bookings.
    
    Signed-off-by: Esther Melander <esther@bywatersolutions.com>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f30293fcc173d30cc1346f3d5c0b4d601f7e4e17
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri May 10 14:33:29 2024 +0000

    Bug 35994: (follow-up) Add class for customization
    
    Also wraps statuses into b instead of the SWITCH statement,
    which should hopefully help to make translation a little nicer.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 391aeaa9a87a3962c92a62dff918c6175c63b9b6
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri May 10 08:37:32 2024 +0000

    Bug 35994: (QA follow-up) Fix Biblio.t
    
    A follow-up changed orders->cancel a bit. This test assumed to
    cancel completed lines here. So we are doing it now with a
    direct update to have the original result.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cc567cb75533a6d50b0a482dbd6fd6478d3ad6e0
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Feb 22 13:52:41 2024 +0000

    Bug 35994: Show acq_status on catalogue/detail
    
    Test plan:
    Based on the described criteria, check a few biblio records.
    Look at Acquisitions tab on the intranet detail page.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9f8186eaa1749415d84a4fa0ea3d8202ea4437fa
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Feb 22 12:48:55 2024 +0000

    Bug 35994: Add $biblio->acq_status
    
    This allows you to see quickly if a biblio has linked orders or not.
    And if they are all cancelled, or some still in processing, or some
    are complete (and the rest cancelled).
    
    Test plan:
    Run t/db_dependent/Koha/Biblio.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit dbc7a74427391d064d63bc425789c9e00e393263
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri May 10 14:01:40 2024 +0000

    Bug 36755: DBIC schema update
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a2a2676976ace99c9ec208b9107d9e955223a503
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri May 10 14:02:51 2024 +0000

    Bug 30047: DBIC schema update
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0829d489a08a4268c8435f23584fc613f26ff7cd
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri May 10 13:56:34 2024 +0000

    Bug 30047: DBRev 23.12.00.055
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c3df59e860726a1789a6769f81a45f9abcd3af25
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 19 14:24:25 2024 +0000

    Bug 30047: Unit tests
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 26f32023697231dace10eb04b715d37d74955f98
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 19 14:20:19 2024 +0000

    Bug 30047: Add new heading field to auth_header table
    
    This patch adds a new heading field containing the display form of the authority record
    
    NOTE: If trying to save an auhority in the 'DEFAULT' framework, you will get an error, you should not be
    using DEFAULT for authorities and we should remove from the list on another bug
    
    To test:
    1 - Apply patches
    2 - Update database
    3 - Restart all
    4 - Create a new authority, save.
    5 - Do this for various types
    6 - View the db records:
        SELECT * FROM auth_header\G
    7 - Note new heading field is populated correctly
    8 - Edit your new authorities
    9 - Confirm the heading field is updated correctly
    10 - Import some authorities and confirm heading generated correctly
    11 - Import auth via Z39.50 and confirm heading generated correctly
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ce30f5f3a29a83088888739d8a55da594810a766
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 19 14:19:32 2024 +0000

    Bug 30047: DB Updates
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d7f4a93008e131f7cc9eccc26ab66ab74224146c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Apr 5 12:49:59 2023 +0000

    Bug 33418: Add overlay_framework option to connexion scripts
    
    This patch adds the option to specify a framework to be used when overlaying records from webservices/connexion
    
    To test:
    1 - vim /etc/koha/sites/kohadev/connexion.cnf
    2 - Set content:
        host:
        port: 8888
        koha:http://localhost:8081
        log:/var/log/koha/kohadev/connexion.log
        match:ISBN
        user:kohauser
        password:kohapass
        overlay_action:replace
        nomatch_action:create_new
        item_action:always_add
        import_mode:direct
        framework:BKS
        overlay_framework:
        debug:1
    3 - Save the sample file from this bug into your kohaclone (or copy and paste into a file your koha test site can reach)
    4 - On the command line:
        perl misc/bin/connexion_import_daemon.pl -c /etc/koha/sites/kohadev/connexion.cnf
    5 - In another terminal:
        cat bug_33418.test  | nc -v localhost 8888
    6 - It should report success and a biblionumber
    7 - In Koha: Cataloguing->Manage staged MARC record
    8 - View the most recent batch with file name (webservice)
    9 - Confirm it was imported, no match
    10 - Click 'View' under the 'Record' column
    11 - Confirm record loads correctly and 'MARC framework' detail is 'Books, Booklets, Workbooks'
    12 - On the terminal repeat the command:
        cat bug_33418.test  | nc -v localhost 8888
    13 - It should succed
    14 - View the new batch, confirm the record matched this time
    15 - View the record details, confirm framework is now 'default'
    16 - On the first terminal hit Ctrl+C to stop the daemon
    16 - Edit connexion.cnf and change:
        import_mode:stage
        framework:ACQ
        overlay_framework:IR
    17 - Restart daemon:
         perl misc/bin/connexion_import_daemon.pl -c /etc/koha/sites/kohadev/connexion.cnf
    18 - Delete the record created above
    19 - On the second terminal repeat the command:
        cat bug_33418.test  | nc -v localhost 8888
    20 - Confirm the batch is created, but not imported
    21 - In terminal:
         perl misc/cronjobs/import_webservice_batch.pl --framework=ACQ --overlay_framework=BKS
    22 - Confirm batch imported, and record in ACQ framework
    23 - In terminal:
         cat bug_33418.test  | nc -v localhost 8888
         perl misc/cronjobs/import_webservice_batch.pl --framework=ACQ --overlay_framework=BKS
    24 - Confirm batch added, record matched, record imported, and record now in Books framework
    25 - Stop the deamon, edit connexion.cnf:
         import_mode:direct
    26 - Start the daemon, and on other terminal repeat:
         cat bug_33418.test  | nc -v localhost 8888
    27 - Confirm record in Binders framework
    28 - Set record framework to Books
    29 - Stop daemon, edit cnf and remove 'overlay_framework' setting
    30 - Start daemon and cat the file again
    31 - Confirm the record remains in Books framework
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8d24f3e80eaeb615e1c143a2c3559ef9bdf787f6
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri May 10 10:29:13 2024 +0200

    Bug 36486: Fix file perms and tidiness
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e6382d04ada91640ca1c5224df8e1beb0c929bc4
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Apr 2 09:34:25 2024 +0200

    Bug 36486: Add tests for Koha::DateTime::Format::SQL
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit faeebd74860224e0b70a3e2f1f33380ac0e4c1dd
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Apr 19 07:21:57 2024 +0000

    Bug 36018: (follow-up) Disambiguate quantity
    
    One of the embeds refers to suggestions. This table also has
    a quantity column.
    
    Test plan:
    Verify that Pending Orders table does load now instead of
    triggering an internal server error on ambiguous column.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 94d5bd4f022c2b3f39e1d22aa28717ca0eb0d1a9
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Mar 25 09:46:06 2024 +0000

    Bug 36018: (follow-up) Do not rely on assumed correct quantities
    
    Now filter_by_active checks quantities, we should ascertain that
    our test data is correct, not leaving it to random values from
    TestBuilder.
    
    Test plan:
    Run t/db_dependent/Koha/Acquisition/Order.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Janusz Kaczmarek <januszop@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d563baa853e078472f66dd7b18c2bf3fcd2eddd2
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Feb 21 15:20:23 2024 +0000

    Bug 36018: $orders->filter_by_active should check quantityreceived
    
    An active order that has no items to receive any more is actually
    not very active anymore :)
    
    Test plan:
    Run t/db_dependent/Koha/Acquisition/Orders.t
    Enable OPACAcquisitionDetails.
    Add order on basket for new biblio. Check that opac-detail does not
    yet count the item as on order (since status is still new).
    Close basket. Check opac-detail again. Should count it now.
    Reopen basket. Cancel line. Check opac-detail again.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Janusz Kaczmarek <januszop@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 21c87aeb15e6380d71b41f8c5e8ff28df74b3edd
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Feb 21 14:39:00 2024 +0000

    Bug 36018: biblio->active_orders should be ->uncancelled_orders
    
    Active orders are more than just not cancelled. See filter_by_active
    in Koha::Acquisition::Orders. They are still in the acq process; we
    still need to receive items on those orders.
    
    When we cancel and want to delete a biblio, we should check for not
    cancelled orders (broader than active orders as in Orders.pm).
    
    Test plan:
    Git grep active_orders.
    Run t/db_dependent/Koha/Biblio.t
    Run t/db_dependent/Koha/Acquisition/Order.t
    Add two order lines in a basket referring to same biblio. Try to
    cancel with delete biblio. Should not be possible.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Janusz Kaczmarek <januszop@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b7448dbd7531b24b7c54f254164881e144ce6b00
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Feb 21 12:34:50 2024 +0000

    Bug 36018: Rename orders->filter_by_current
    
    Current is a bit misleading here. It means the ones that are not
    cancelled.
    We already use the filter_out_etc naming schema. So in harmony with
    that, we switch it to filter_out_cancelled.
    
    Test plan:
    Run t/db_dependent/Koha/Acquisition/Order.t
    Run git grep -l '::Orders' | xargs grep filter_by_current
    * All occurrences should be related to Recalls, not Orders.
    Go to acqui/basket.pl. Delete a whole basket who has some active
    and some cancelled lines.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Janusz Kaczmarek <januszop@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2f702d2387a50790bd1cafbdf47b5010a482539d
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jan 25 10:27:11 2024 -0500

    Bug 35907: Tidy execute_query
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 26014e62da5f60f1518f7ed45b8423e26509fdff
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jan 25 14:59:32 2024 +0000

    Bug 35907: Add ability to log all custom report runs with or without query
    
    Because of the way Koha::Logger has been used to log to different categories based on the interface and caller, it can be extremely hard to log all of a particular log statement to one place.
    
    For custom report runs, the category is plack-intranet.C4::Reports::Guided when run from the web interface, cron.C4::Reports::Guided when run from runreport.pl, and plack-intranet.C4::Auth when run from svc/report.
    
    We should add a more standardized report run log, both with and without the full query, so that administrators can log all report runs to a centralized location. If an administrator were to need the "point of entry" for reports, it is easy to include via parameters in PatternLayout.
    
    Test Plan:
    1) Apply this patch
    2) Modify your log4perl file, add the following:
    
    log4perl.logger.reports.execute.time = INFO, REPORTTIME
    log4perl.appender.REPORTTIME=Log::Log4perl::Appender::File
    log4perl.appender.REPORTTIME.filename=/tmp/report-time.log
    log4perl.appender.REPORTTIME.mode=append
    log4perl.appender.REPORTTIME.layout=PatternLayout
    log4perl.appender.REPORTTIME.layout.ConversionPattern=[%d] [%p] [%P] %m%n
    log4perl.appender.REPORTTIME.utf8=1
    
    log4perl.logger.reports.execute.query = INFO, REPORTQUERY
    log4perl.appender.REPORTQUERY=Log::Log4perl::Appender::File
    log4perl.appender.REPORTQUERY.filename=/tmp/report-query.log
    log4perl.appender.REPORTQUERY.mode=append
    log4perl.appender.REPORTQUERY.layout=PatternLayout
    log4perl.appender.REPORTQUERY.layout.ConversionPattern=[%d] [%p] [%P] %m%n
    log4perl.appender.REPORTQUERY.utf8=1
    
    3) Restart all the things!
    4) Run a report somehow:
       CLI: ./misc/cronjobs/runreport.pl 1
       API: /cgi-bin/koha/svc/report?id=1
       Web: /cgi-bin/koha/reports/guided_reports.pl?reports=1&phase=Run this report
    5) Note the report runs are logged to /tmp/report-time.log and /tmp/report-query.log
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e94df657b749af69f87354b1be9eeeeff6e37a0d
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Feb 5 10:20:04 2024 +0000

    Bug 26567: (follow-up) Update label and add check for RoutingSerials
    
    The system preference RoutingSerials controls if the routing list
    feature is available in the staff interface or not. If routing lists
    are deactivated, the search option should not show.
    
    Also updated the label to read: "Has routing list"
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ac5084641e95621a46eef8d8663cc3a2eb9b5675
Author: danyonsewell <danyonsewell@catalyst.net.nz>
Date:   Wed Dec 20 04:15:06 2023 +0000

    Bug 26567: Allow to limit subscription search to subscriptions with routing lists
    
    Adds a search option to the advanced search in the
    serials module that allows to limit search on subscriptions
    with routing lists.
    
    Test plan:
    1. Apply this patch
    2. Create two subscriptions, one with a routing list and one without
    3. Navigate to Serials home and tick the checkbox labeled "Search routing lists only:"
    4. Confirm that the only search result to appear is the subscription you added the routing list to
    5. Run unit tests: prove t/db_dependent/Serials.t
    
    Sponsored by: Bibliotheksservice-Zentrum Baden-Wuerttemberg
    
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Perltidied changes to make QA test tools pass.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b1944c78954ef00873ba0a8bc9c1da1bf4ec9577
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu May 9 13:34:06 2024 +0100

    Bug 36757: (QA follow-up) Fix for action on different triggers
    
    This patch updates the 'title' and 'comment count' links to action the
    same ticket detail/update modal as the 'details' button.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Paul Derscheid <paulderscheid@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fffe081bec1acd53c5732c3d3d2d1df2bf7657a4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri May 10 13:36:25 2024 +0100

    Bug 34655: (QA follow-up) Tidy the file
    
    As we're already updating whitespace over almost the entire file, we may
    as well go and tidy the whole thing too and add the /* keep tidy */
    flag. (I checked for conflicts with existing bugs.. there's bug 20930
    which will need a rebase, but it will already conflict and need a rebase
    and is currently FQA)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d5e20a832158d59a7f375d43de50f0839b63843c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri May 10 10:33:26 2024 +0200

    Bug 34655: Prevent selenium/system_preferences_search.t to fail randomly
    
    Removing this JS code from document.ready.
    The script tag is at the end of the DOM and there is no good reasons (at
    least I didn't find any) to wait for the whole document to be ready
    before executing the JS code.
    
    It made the selenium tests selenium/system_preferences_search.t to fail
    randomly with:
        #   Failed test 'The first "Policy" section (under "Accounting") is currently expanded'
        #   at t/db_dependent/selenium/system_preferences_search.t line 63.
        #          got: undef
        #     expected: 'expanded'
        # Looks like you failed 1 test of 6.
    
    Because we set the class in this JS code and selenium won't wait for it
    to finish before starting running the tests.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e75e59d8561f247f2f58c514f7dbe50d40d9fe01
Author: Thibaud Guillot <thibaud.guillot@biblibre.com>
Date:   Thu Mar 21 09:25:08 2024 +0100

    Bug 36380: Add filter value on patron statistics report summary
    
    Test plan:
    1) Go to reports and select "Patrons"
    2) Select some filters (patron category, library,..) and run it
    3) Normally you will see filters selected but with blank value like
       "branch code = "
    4) Apply this patch
    5) Refresh
    
    Sponsored by: BibLibre
    
    Signed-off-by: Frédéric Demians <f.demians@tamil.fr>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4d0e4f583ed9502274f2c5fe9c9e1d58aa6abae3
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri May 10 13:04:58 2024 +0000

    Bug 34788: (follow-up) Terminology: biblio record
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d2820f57d6a738786a243e558e43ba640eaf7165
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed May 8 14:29:36 2024 +0000

    Bug 34788: (QA follow-up)
    
    This patch fixes a few things:
    1) The blue dialog box now clears when navigating away from the page
    2) The background job now uses skip_record_index to avoid queuing indexing jobs for every new biblio and instead queues one job at the end
    3) Large files that get chunked now successfully create linked biblios if requested
    4) Title matching rules have been expanded to check the package ID so that we can have duplicate titles in different packages
    5) A link to the package is now included on the job report page
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e8763a720c96bbad3e700302845c58f952bd0280
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue Apr 30 10:27:48 2024 +0000

    Bug 34788: Allow import of file with additional columns
    
    This patch allows a file with additional columns to be imported. When the file is submitted, the system will enqueue the background job and send back information to the UI that certain columns have been ignored. The data will stil l import as normal but only the standard KBART columns will be parsed and imported
    
    Signed-off-by: Clemens Tubach <clemens.tubach@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d31f453186f035ff9ba22d2bbcc5939ba3010e25
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Apr 17 14:22:29 2024 +0000

    Bug 34788: Make biblio creation optional
    
    This patch rebases in the changes from bug 36618 to make biblio creation optional
    
    Signed-off-by: Clemens Tubach <clemens.tubach@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 381443700333aaa4cbd4ac1067b1a884202d6f96
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Oct 19 16:12:58 2023 +0000

    Bug 34788: Allow for import of CSV files
    
    This commit allows CSV files to be imported alongside TSV files.
    It also adds some performance improvements relating to the max_allowed_packet and the matching of titles, as well as some small bugfixes and unit test changes
    
    Test plan:
    1) Enable the ERM module
    2) Navigate to E-resource management > eHoldings > Local > Packages
    3) Create at least one package
    4) Navigate to E-resource management > eHoldings > Local > Titles
    5) There should be a button for "Import from KBART file"
    6) Click this button
    7) Select the package that you created from the dropdown and then choose your KBART file using the "Choose file" button. I have attached some example files to the bug but feel free to use your own if you have them.
    8) Click Submit
    9) If your file is a valid file, a background job will be queued, if not then a warning will display showing what is incorrect in your file
    10) To test the file format warning, edit your file and add a random column heading into the file e.g. test_column. When you upload it, the warning should show that an invalid column "test_column" has been detected
    11) Click on the background job. (If you have uploaded a very large file, the system will chunk the file into smaller pieces and create multiple background jobs)
    12) It should display a progress bar followed by a report and any error messages
    13) Navigate to E-resource management > eHoldings > Local > Titles and you should see your new titles.
    14) Run the unit test: prove t/db_dependent/Koha/BackgroundJob/ImportKBARTFile.t
    
    Signed-off-by: Clemens Tubach <clemens.tubach@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 698c1e930b7069fb6c27fe4331db77b4daf5998a
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Mon Oct 16 10:45:25 2023 +0000

    Bug 34788: Add a relationship to a package for the imported file
    
    Signed-off-by: Clemens Tubach <clemens.tubach@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4760863cfbd8d8f9e618a0c36320cd51d76e4ecf
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Sep 14 12:39:45 2023 +0000

    Bug 34788: Add unit test
    
    Signed-off-by: Clemens Tubach <clemens.tubach@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1320dc2cd2d93ca85e5c598b8084af07d35275e7
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Sep 14 12:36:40 2023 +0000

    Bug 34788: Add a background job to import a KBART file
    
    This patch adds a background job that will import a KBART file
    
    Sponsored-by: UKHSA
    Signed-off-by: Clemens Tubach <clemens.tubach@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d3222816bbb25f8200591aa907524fbc1c46ede7
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Sep 14 12:35:08 2023 +0000

    Bug 34788: Add Vue components, api client and navigation route
    
    This patch adds a new component to handle the file import, a route to that component and the API client route needed to access the API
    
    Signed-off-by: Clemens Tubach <clemens.tubach@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c76ea88b0e981f731030ee85e20088540ebac388
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Sep 14 12:34:06 2023 +0000

    Bug 34788: Add an API endpoint to import a KBART file
    
    This patch adds the endpoint needed to queue an import_from_kbart_file background job
    
    Signed-off-by: Clemens Tubach <clemens.tubach@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d683e6fc2cbe60f3d7ce8e26b5a963cc9c8cf6ed
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Mon Apr 15 17:48:46 2024 -0400

    Bug 35925: Adjust default purchase suggestion notices to use TT
    
    1. Apply patch
    2. reset_all (or start your testing environment in the first place)
    3. Set syspref EmailPurchaseSuggestions to "email address of library"
    4. Under Administration > Libraries, enter an email address for at least
       one library
    5. Go to "my account", and enter a Primary email and Phone number
    6. Go to the Acquisitions module > Suggestions page
    7. Click "New purchase suggestion", and fill in values for, at minimum:
        Bibliographic information:
            Title
            Author
            Copyright date
            ISBN/ISSN
            Publisher
            Publication place
            Collection title
            Document type
            Reason for suggestion
            Notes
        Acquisition information:
            Library (set to the library you entered an email for in step 4)
            Copies
    8. Submit the suggestion
    9. Set the suggestion status to "Rejected"
        a. Check the checkbox next to the suggestion
        b. Set the "Mark selected as" drop-down (below the table) to Rejected
        c. Select a value for the "Reason" drop-down
        d. Click the Submit button
    10. Set the suggestion status to "Accepted" (as above)
    11. Set the suggestion status to "Ordered" (as above)
    12. Return to "my account" and open the Notices tab
    --> There should be notices suggestion declined, suggestion accepted,
        suggestion ordered, and (depending on settings) new suggestion*
    13. Open each notice, and confirm the all information was filled in
        correctly
    
    * New suggestion will be there if you're using default KTD settings/data
    and logged in as the root user. If it is not there, query the database
    (by command line or SQL report) to see the generated notice text:
    SELECT * FROM message_queue WHERE letter_code = 'NEW_SUGGESTION'
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e9540c6a1fcb7bd87f34d38dfafa7546198aa30c
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Thu Apr 25 16:54:16 2024 -0400

    Bug 36106: Adjust DUE and PREDUE notices to use TT
    
    To test:
    1. Apply patch
    2. reset_all (or start your testing environment in the first place)
    3. Enable SMS Notices
        a) Find the system preference SMSSendDriver
        b) Enter "Email" as the value for SMSSendDriver and save
    4. Go to a patron account, and set the following messaging preferences:
        Item due:
            - Check SMS
            - Check Email
            - Leave Digests only unchecked
        Advance notice
            - Select 1 day in advance
            - Check SMS
            - Check Email
            - Leave Digests only unchecked
    5. Go to the checkout tab for that patron
    6. Set a custom due date for today and check out an item
    7. Set a custom due date for tomorrow and check out another item
    8. Run the cron job to generate notices:
       misc/cronjobs/advance_notices.pl -v -c
    9. Open the Notices tab on that patron's account
    --> The patron should have four notices:
        Item due reminder (one for SMS and one for email)
        Advance notice of item due (one for SMS and one for email)
    10. Open each notice and confirm that all information is correct
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6af529879c98a3d2a8d3869b11ed54a4f1ea11aa
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Mon Apr 29 16:01:59 2024 -0400

    Bug 36126: Adjust default HOLD notices to use TT
    
    To test:
    1. Apply patch
    2. reset_all (or start your testing environment in the first place)
    3. Enable SMS Notices
        a) Find the system preference SMSSendDriver
        b) Enter "Email" as the value for SMSSendDriver and save
    4. Go to a patron account, and set the following messaging preferences:
        Hold filled:
            - Check SMS
            - Check Email
            - Leave Digests only unchecked
    5. Leave SMS number and all email address fields blank for that patron
    6. Place a hold for that patron
    7. Check in an item to fill the hold
    8. Open the Notices tab on that patron's account
    --> The patron should have a Print "hold filled" notice, since they
    don't have an email address or SMS number in the system
    9. Add a Primary email and SMS number to the patron account
    10. Place another hold for that patron
    11. Check in an item to fill the hold
    12. Go back to the Notices tab on that patron's account
    --> The patron should now have Email and SMS "hold filled" notices as well
    13. Open each notice and confirm that all information is correct
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8026d8b24c47637ecc37bac6de2568cb4b0935bd
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Mon Apr 15 17:21:37 2024 -0400

    Bug 36113: Adjust default RENEWAL notice template to use TT
    
    Test plan:
    1. Apply patch
    2. reset_all (or start your testing environment in the first place)
    3. Enable the system preference RenewalSendNotice
    4. Check an item out to a patron
    5. Edit that patron:
        a. Enter a value for Primary email
        b. Set messaging preference to enable email notices for Item
           checkout and renewal
    6. Renew the checked-out item
    7. Check the patron's Notices tab for the Item renewal notice, and
       confirm that the notice is correct
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4b2716c86ccacc14becc4fe3587cc235ac232d82
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Tue Apr 30 08:54:20 2024 -0400

    Bug 36125: (follow-up) Use $KohaDates
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 296b4c11e5b47baf06ced8bdcafdf3092fb1ce4b
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Thu Apr 25 17:03:20 2024 -0400

    Bug 36125: Adjust default HOLD_SLIP to use TT
    
    To test:
    1. Apply patch
    2. reset_all (or start your testing environment in the first place)
    3. Find a patron and make sure their account contains values for
       all of the following fields:
       First name
       Surname
       Card number
       Phone
       Address
       Address 2
       City
       Zipcode
       Email
    4. Place a hold for this patron, specifying a hold note
    5. Check in an item to fill the hold and click "Confirm and print slip"
    6. Confirm that all information on the hold slip is correct
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4380508eceb112db790c60c3a555f928985ffd8d
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Thu Apr 25 16:17:41 2024 -0400

    Bug 36608: Adjust TO_PROCESS and AVAILABLE to use TT
    
    To test:
    1. Apply patch
    2. reset_all (or start your testing environment in the first place)
    3. Go to "my account", and enter a Primary email
    4. Under Administration > Libraries, enter an email address for at least
       one library
    5. Add the demo user (koha) as the owner of the Main Fund
        a) Go to the Acquisitions module
        b) Click on Main Fund
        c) Click the Actions button at the end of Main Fund row > click Edit
        d) Click "Select owner"
        e) Search for "koha"
        f) Click the Select button
        g) Click Submit
    6. Click "Suggestions" on the left side of the page, and click "New
       purchase suggestion"
    7. Fill in values for, at minimum:
        Bibliographic information:
            Title
            Author
        Acquisition information:
            Library (set to the library you entered an email for in step 4)
            Fund (set to Main Fund)
    9. Submit the suggestion
    10. Run the cron job to generate TO_PROCESS notification email:
    misc/cronjobs/notice_unprocessed_suggestions.pl -v -c --days=0
    11. Set the new suggestion to "Accepted"
        a) Check the checkbox next to the new suggestion
        b) Below the table, set "Mark selected as" drop-down to "Accepted"
        c) Click Submit
    12. Create an order from the purchase suggestion
        a) Return to the Acquisitions homepage
        b) Leave the Vendor field blank and click Search
        c) Next to the sample basket (My Basket), click "Add to basket"
        d) Click "From a suggestion"
        e) Click "+ Order" next to the suggestion
        f) Make sure there are values for all required item fields
        g) Click "Add item"
        h) Click Save
    13. Close the basket and receive the order
        a) Click "Close basket" and click "Yes, close"
        b) Click "Receive shipments"
        c) Enter a number in "Vendor invoice" and click Next
        d) Check the checkbox next to "My Basket" and click "Receive
           selected" button
        e) Check the checkbox under "Receive?" in the Items table
        f) Click Confirm
    14. Return to "my account" and open the Notices tab
    --> There should be (among others) notices for "A suggestion is ready to
        be processed" and "Suggested purchase available"
    15. Open each of the above two notices, and confirm all the information
        was filled in correctly
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9af249057c613c21ad29e1020f48e1025169199c
Author: Phil Ringnalda <phil@chetcolibrary.org>
Date:   Thu May 9 15:45:45 2024 -0700

    Bug 36823: Switch database schema links in Reports from master to main
    
    Test plan:
    1. Reports > click Database schema link, verify it gets a 404 not foun
    2. Reports > Use saved > click Database schema link, verify 404
    3. Apply patch
    4. Reports > click Database schema link, verify it loads as main
    5. Reports > Use saved > click Database schema link, verify it loads
    
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 899b064b9e5f7c4cc16bc7fccdbe69cac8752d1c
Author: Phil Ringnalda <phil@chetcolibrary.org>
Date:   Thu May 9 16:31:56 2024 -0700

    Bug 36824: Fix conversion of __VERSION__ in system preferences to use main rather than master
    
    Test plan:
    1. Administration > search system preferences for the words database columns
    2. Click the links to schema.koha-community.org, note that they 404 with
       /master/ in the URL
    3. Apply patch, reset_all
    4. Search again, click the links, note that they load successfully with /main/
    
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d59e148879c0495f5071998d4521875e9c9022ed
Author: Jan Kissig <jkissig@th-wildau.de>
Date:   Tue Apr 23 20:19:05 2024 +0200

    Bug 36676: SIP2 drops connection on unknown patron id in fee paid message
    
    When sending a fee paid message to SIP2 with an unknown patron id it will respond with an empty response followed by dropping the connection to a client.
    
    Test plan:
    a) perl /usr/share/koha/bin/sip_cli_emulator.pl -a 127.0.0.1 -p 6001 -su term1 -sp term1   -l CPL --patron 2352900100046 -m fee_paid --fee-type FT --fee-amount 0.01
    Output:
    Trying 'fee_paid'
    SEND: 3720240423    124447FT00USDBV0.01|AO|AA2352900100046|ACterm1|
    Use of uninitialized value $data in concatenation (.) or string at /usr/share/koha/bin/sip_cli_emulator.pl line 355, <GEN0> chunk 1.
    READ:
    
    b) apply patch
    c) perl /usr/share/koha/bin/sip_cli_emulator.pl -a 127.0.0.1 -p 6001 -su term1 -sp term1   -l CPL --patron 2352900100046 -m fee_paid --fee-type FT --fee-amount 0.01
    Output:
    Trying 'fee_paid'
    SEND: 3720240423    125602FT00USDBV0.01|AO|AA2352900100046|ACterm1|
    READ: 38N20240423    125602AO|AA2352900100046|AFInvalid patron barcode.|
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9628e6a5298b45ceab7d9d443ba1c006b4df9313
Author: Michał Kula <148193449+mkibp@users.noreply.github.com>
Date:   Wed Mar 27 13:25:49 2024 +0100

    Bug 35812: Fix search URL aliases in Plack Apache config
    
    Mimic missing stuff from apache-shared-opac.conf into apache-shared-opac-plack.conf, where /search and /opac-search.pl aliases were missing.
    
    Note that while RewriteRule applies before reverse proxy directives and works, ScriptAlias applies purely to standard cgi perl scripts, meaning it didn't apply there.
    
    Now it's mimicked analogously to how /index.html is configured.
    
    This patch fixes an issue where someone might have just a reverse proxy to Plack configured without native Perl scripting, where this URL would then otherwise be failing.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bc58644a32338022a8ebaa00258248f80f8d1283
Author: Michał Kula <148193449+mkibp@users.noreply.github.com>
Date:   Wed Mar 27 10:20:17 2024 +0100

    Bug 35812: specify canonical URL for the main page
    
    Currently main page can be accessed by:
    - /
    - /index.html
    - /cgi-bin/koha/opac-main.pl
    
    This specifies the canonical link for all of them to be "/", to aid search engines in assessing what's url to put in the index.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 119c48e6b64417cadd7659f6a1a3e8a518d483a6
Author: Michał Kula <148193449+mkibp@users.noreply.github.com>
Date:   Wed Mar 27 10:16:06 2024 +0100

    Bug 35812: Add canonical URL for biblio details page
    
    This adds a nice canonical URL for search engines to use. Will prevent duplicates with different URL query parameters from getting indexed separately, will also prevent search engine confusion when opac-search.pl redirects to opac-detail.pl when there's just one result.
    
    Should result in prettier/simpler URLs in the search engines too, plus removal of constant warnings in Google Search Console and other tools.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2273ac808080484681b278d8bebefda2cc906ace
Author: Michał Kula <148193449+mkibp@users.noreply.github.com>
Date:   Wed Mar 27 09:25:37 2024 +0100

    Bug 35812: add noindex attribute to search result pages in OPAC
    
    This will prevent search engines from putting the search results pages into their indexes, to prevent cluttering of the search results and give better visibility to the actual bibliographic records' pages.
    
    Note that "noindex" is separate from "nofollow", meaning that the search engine is allowed to get and process the search results page and extract ("follow") further links from it, such as links to biblio records, which is exactly what we want.
    
    This approach is better to the sitemaps, which search engines are free to choose whether to use or not, based on multiple factors such as the size of the page. In practice for small pages Google will just not download them at all, meaning that indexing by following links around is the only way the indexer will extract any links.
    
    Note that for this to work properly, you must NOT block the affected pages in your robots.txt file (they're not blocked by default).
    
    Also, this patch moves "cssinclude" block in opac-results.tt inside of <head>, because in all other templates it's inside, meaning its current positioning is a small mistake I fixed while at it.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 22376af40137107d2f2e3aca9842823b9e42fac6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 10 09:03:46 2024 -0300

    Bug 36503: (follow-up) Fix tests count
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3c07553b3674788f219e4e9e4bfc474ada424654
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri May 3 12:34:33 2024 +0100

    Bug 36503: Move and update unit test
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4417811d9a5d2c72e4af9096d2aa7901201bc272
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri May 3 11:19:42 2024 +0100

    Bug 36503: Fix unit tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3c6280f4a2fcfa1dd7da5c215854ea840c9a09f0
Author: Raphael Straub <raphael.straub@kit.edu>
Date:   Thu May 2 09:19:32 2024 +0000

    Bug 36503: (follow-up) Use the call method of Koha::Plugins
    
    This removes the option to call multiple plugins in a prioritized order,
    but this is not needed if there is only one plugin that uses this hook.
    
    Sponsored-by: Karlsruhe Institute of Technology (KIT)
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 356d3226f9ce1a7ba2f2dce005480fdef6b1ae75
Author: Raphael Straub <raphael.straub@kit.edu>
Date:   Wed Apr 24 13:48:37 2024 +0000

    Bug 36503: (follow-up) Move the plugin hook to include the domain
    
    This allows the plugin to read/change the domain.
    
    Sponsored-by: Karlsruhe Institute of Technology (KIT)
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 911342ffec8f900e2b4e36fcb0208a7560bfd49c
Author: Raphael Straub <raphael.straub@kit.edu>
Date:   Thu Mar 28 12:31:15 2024 +0000

    Bug 36503: Add a plugin hook after user authentication
    
    This plugin hook allows to change patron data or define the patron
    based on the authenticated user.
    
    To test: Run
    prove t/db_dependent/Koha/Auth/Client.t
    
    Sponsored-by: Karlsruhe Institute of Technology (KIT)
    Signed-off-by: Thomas Klausner <domm@plix.at>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b099f62bfc14ec97d38738307e43331987b5e264
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri May 10 12:04:02 2024 +0000

    Bug 31627: (follow-up) Update -Id to -ID
    
    This also makes it match with the Message-ID.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c71e9f1e40607081d60787e8901a2dc28e28c818
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 8 13:32:14 2024 +0100

    Bug 31627: (QA follow-up) Tidy test block
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 298abcb4cb54ddc6c93c451fa8a935c9672ba1ab
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 8 13:22:02 2024 +0100

    Bug 31627: (QA follow-up) Catch more locations
    
    This patch moves the header set into Koha::Email->create and passes the
    template_id in a few additional locations to ensure we catch more cases.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit aed4a2ec9839fad05ff0ce2c4d9b757c5814f06d
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Sep 26 12:23:33 2022 -0400

    Bug 31627: Add ability to embed the letter id in outgoing email notices
    
    It can be useful to know exactly what template was used to generate a notice. To further this end, it would be useful be able to send the letter id as part of any emails sent out if there is a letter template associated with the message.
    
    Test Plan:
    1) Apply this patch
    2) Restart all the things!
    3) Generate an email notice like a checkout notice
    4) Inspect the email headers, note the new X-Koha-Template-Id and
       X-Koha-Message-Id headers!
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6e09fb6ad8eaab2e219c01cc332b404ad89088c0
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Thu Mar 21 16:20:24 2024 +0100

    Bug 36388: Mouse operation does not work in draggable fields in authority editor
    
    When using the authority editor in Firefox, it is not possible to set
    the cursor or select text from the text field.
    
    This patch mimics the corrections made in bug 35425 for biblio editor.
    
    Test plan:
    ==========
    1. Start editing an existing authority record and try to put the cursor
       with the mouse in the middle of the content of any subfield or to
       select text with the mouse. It should not be possilbe.
    2. Apply the patch (reload plack etc.).
    3. Repeat p. 1 - everything should work as expected.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 95d68c6bbd930c8b3bf8d27acea7a16e0fbfccb3
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Thu May 9 12:32:35 2024 -0400

    Bug 36775: (QA follow-up) Remove max_length attribute
    
    The existing code for "Holds to place (count)" sets the input field's
    maxlength to remaining_holds_for_record, which does not do what we want
    and makes the field unusable when the circulation rules allow unlimited
    holds. Better to remove it.
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c345e68769d801874e3d914e6ecdd7e0b6f863e2
Author: Andrew Fuerste Henry <andrewfh@dubcolib.org>
Date:   Thu May 9 16:00:12 2024 +0000

    Bug 36775: Allow multiple holds on record when holds per record is unlimited
    
    To test:
    1 set Holds Per Record to Unlimited
    2 confirm hold placement interface does not include "Holds to place (count)"
    3 apply patch, restart all
    4 reload hold placement interface, confirm it does include "Holds to place (count)"
    5 set Holds Per Record to 2
    6 confirm Holds to place shows when placing a first hold for a patron, but not when placing a second
    7 set Holds Per Record to 1
    8 confirm Holds to Place does not show
    9 sign off and eat a nice snack
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 37bda5d1300aa8262917be6f36172348244b7c73
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Thu May 9 11:26:52 2024 -0400

    Bug 36791: (QA follow-up) Simplify conditional
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 18843cabdb1697fda2eb2d9c3c7f96b58f277813
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Mon May 6 11:44:26 2024 +0000

    Bug 36791: Koha explodes when trying to edit an authority rec. with an invalid authid
    
    When trying to open the authority editor with authid=<invalid_authid>
    (e.g. a deleted authid) Koha explodes with a message:
    Can't call method "authtypecode" on an undefined value at
    /kohadevbox/koha/authorities/authorities.pl line 556
    
    This this because authtypecode method is called on the result of
    ->find without verifying that it was succesful.
    
    Test plan:
    ==========
    1. Try to edit an auth rec. giving as a authid (in URL) a non-existing
       authid, e.g. in ktd, with standard ktd test data:
       http://your_ktd:8081/cgi-bin/koha/authorities/authorities.pl?authid=100000
       Koha should explode with the message:
       Can't call method "authtypecode" on an undefined value at
       /kohadevbox/koha/authorities/authorities.pl line 556
    2. Apply the patch; restart_all.
    3. Repeat p. 1.  You should get the 404 error page.
    
    Sponsored-by: Ignatianum University in Cracow
    Signed-off-by: Roman Dolny <roman.dolny@jezuici.pl>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a8f4fe946cbafd46621a7a94812580ce0104fe7e
Author: Phil Ringnalda <phil@chetcolibrary.org>
Date:   Thu May 2 16:19:17 2024 -0700

    Bug 27363: Restore temporary selection of Z39.50 targets throughout multiple searches
    
    The advanced editor currently saves which Z39.50 servers are selected
    in local storage using the index in the sorted array of servers, and
    then misreads them back as though they were server_ids. We want them to
    be server_ids, since that's immutable and the index can change with
    changes in rank or server name.
    
    We use the data-server-id property in the HTML more often as a server_id
    than as the index that's currently stored there, so this patches
    switches it back to be the server_id, and in the one place we would use
    the index, instead uses Array.find to just get the server object instead
    of referencing it by index.
    
    Test plan:
     1. Set the preference EnableAdvancedCatalogingEditor to enable
     2. Administration - Z39.50 Servers, for NATIONAL LIBRARY OF FRANCE
        uncheck "Preselected"
     3. To be sure you don't have confusing saved preferences, open
        Firefox's Developer Tools, in the Storage tab open Local Storage and
        select your URL
     4. In the row for cateditor_preferences_{your Koha user id}, if there
        are any values for selected_search_targets, delete them so you
        have "selected_search_targets":{}
     5. Open the advanced editor, and click "Advanced »" in the search box
     6. You should have Local catalog unchecked, LIBRARY OF CONGRESS checked
        because it is preselected, and NATIONAL LIBRARY OF FRANCE unchecked
     7. Toggle each checkbox so Local catalog and France are selected, and
        LoC is unselected.
     8. In a new broser tab, open the advanced editor, and click "Advanced »"
     9. You will see Local catalog unchecked, LoC checked, and France
        unchecked.
        That's the bug.
    10. Apply patch, open the advanced editor in a new tab, click "Advanced »"
    11. Toggle the checkboxes so Local catalog and France are selected, and
        LoC is not selected.
    12. Open the advanced editor in another new tab, click "Advanced »"
    13. You should see what you just set, Local catalog and France checked,
        and LoC unchecked, That's the correct behavior.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e6b778b5d49cffcb33ccfa30542c4271d35e60e9
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue May 7 15:46:23 2024 +0000

    Bug 36804: Fix clear filter
    
    1) Visit serials and click "New subscription":
    http://localhost:8081/cgi-bin/koha/serials/serials-home.pl
    2) Enter '112' on the record input and '1' on the vendor input. Click "Next"
    3) 'First issue publication date' -> Enter some date in the past
    4) 'Frequency' -> Enter '2/day'
    5) 'Subscription start date' Same as step 3)
    6) 'Subscription end date' Some date in the future
    7) 'Numbering pattern' -> Enter 'Number'
    8) Click 'Test prediction pattern'. Click 'Save subscription'
    9) On the left side menu -> Click "Serial collection". Click the yellow button 'Edit serials'
    10) On the first serial, edit the status to 'Late'. Save.
    11) Visit serials claims:
    http://localhost:8081/cgi-bin/koha/serials/claims.pl?supplierid=1
    12) Input some dates in "From" and "To"
    13) Click 'Clear filter'. Notice it doesn't work.
    14) Apply patch. Repeat.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1137793e44ce6b5d2a4e7759e46218f6ddeb9e8b
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri May 3 14:22:13 2024 +0000

    Bug 34263: (QA follow-up): Use flatpickr .clear instead
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0f0479e87aaa324b455fbbf40674f15e2fa862c0
Author: Katariina Pohto <trainee@koha-suomi.fi>
Date:   Thu May 2 16:09:39 2024 +0300

    Bug 34263: Suspending holds consecutively populates previously used date falsely
    
    Suspending a hold doesn't clear the date from the date picker. When another hold is suspended
    the previously used date will show on the date picker but the value is not set on the hold.
    Suspending the hold will suspend it indefinitely. Also the link "Clear date to suspend indefinitely"
    will not clear the date picker. This patch will make both the Suspend button and the Clear date link
    clear the dates from both the date picker and the variable passed on, making the suspending consistent
    with what is seen on the date picker.
    
    Test plan:
    1) Place 3 holds on a patron.
    2) Suspend a hold and set a date for it.
    3) Suspend a second hold and notice the previously used date is shown on the date picker.
       Note that the hold will be suspended indefinitely.
    4) Open the suspending window for the third hold and pick a date. Click "Clear date to suspend indefinitely"
       and note the date picker doesn't get cleared. The hold will be suspended indefinitely.
    5) Apply patch.
    6) Suspend a hold and set a date for it.
    7) Suspend a second hold and notice the date picker does not have a preset date.
    8) Pick a date and clear it with the "Clear date to suspend indefinitely link".
       See that the date picker also gets cleared.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 46c5a51d58565f2773a9438c195711c0156b866c
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed May 8 15:26:52 2024 +0000

    Bug 36774: Add cypress tests
    
    Inside k-t-d, run:
    cypress run --spec t/cypress/integration/flatpickr_spec.ts
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c6e2995d278df289065a32f19af7ca9b9226d3ea
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri May 3 14:07:25 2024 +0000

    Bug 36774: Remove wrapper if already exists
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b5388933b64b78ce22b058dd1e5b96e1c0ec78a0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jan 11 11:53:42 2024 +0000

    Bug 34360: Get distinct biblionumber
    
    This fixes the problem noted in the bug:
    [WARN] DBIx::Class::ResultSetColumn::new(): Attempting to retrieve non-unique column 'biblionumber' on a resultset containing one-to-many joins will return duplicate results. at /usr/share/koha/Koha/Objects.pm line 421
    
    We are taking a list of items, assuming the scenario is that these are from a single biblio and possibly some host_items, then searching and ordering conditionally on whether the biblio is a serial.
    
    Current code gets the first biblio from the list - this patch adds a 'DISTINCT' to the results ebfore fetching the column
    
    To test:
    1 - Find a biblio in the staff interface
    2 - Transfer one of the items a few times
    3 - Recreate the issue on the command line:
        export DBIC_TRACE=1
        perl -e 'use Koha::Items; my $items = Koha::Items->search({biblionumber=>9})->search_ordered(undef,{ prefetch => ['issue','current_branchtransfers'] }); $items->next'
    4 - Note warning:
        DBIx::Class::ResultSetColumn::new(): Attempting to retrieve non-unique column 'biblionumber' on a resultset containing one-to-many joins will return duplicate results. at /kohadevbox/koha/Koha/Objects.pm line 426
    5 - Apply patch
    6 - Repeat 3
    7 - Error is gone
    
    Signed-off-by: baptiste <baptiste.bayche@inlibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5c43883a7c1241e4e0cd08ff8c6fa62b55899dd9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri May 10 10:04:40 2024 +0200

    Bug 36582: Fix regressions.t
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 650065fcd2fc58491d589541449b240abdf1de6e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 8 14:35:11 2024 +0200

    Bug 35138: (follow-up) Mark DisplayLibraryFacets as zebra only
    
    The tests are no longer relevant
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 26e7ed29af9ce233066d980136ee10ca0c5b8609
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu May 9 08:58:46 2024 +0100

    Bug 36687: (RM follow-up) Fix more unit tests
    
    Use currency.active to test `int(1) DEFAULT NULL` now that itemtypes.notforloan
    is `NOT NULL DEFAULT '0'`
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit fba56f01781f407c4e6500a4305c1ef8cc1c7c22
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu May 9 08:40:18 2024 +0100

    Bug 36687: (RM follow-up) Fix unit tests
    
    Set notforloan to '0' as apposed to 'undef' for tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 07d52309c22da89430db344da0a387ce832de2ed
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Wed May 8 17:53:44 2024 +0000

    Bug 19768: DBRev 23.12.00.054
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cc8bf034bcb22419021c2104d3923dad14bb7037
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 8 17:37:59 2024 +0000

    Bug 19768: (follow-up) Database update
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0945cdf5d6a8a0dbdde7775db2f3084e76af3a71
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Apr 30 12:08:09 2024 +0000

    Bug 19768: Add "Title notes" tab to OpacSerialDefaultTab preference
    
    This patch adds a "title notes tab" option to the opacSerialDefaultTab
    preference.
    
    To test, apply the patch and restart services.
    
    - Go to Administration -> System preferences -> opacSerialDefaultTab.
    - There should now be a new options, "title notes tab."
    - Set the preference to the new value.
    
    - Go to the OPAC and locate a bibliographic record which is associated
      with a subscription and which has data in a 5XX notes field.
    - On the bibliographic detail page the "Title notes" tab should be
      selected by default.
    - Test that the other system preference values still work correctly too.
    
    Sponsored-by: Athens County Public Libraries
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d8465adfe545d0046fdcc089298c58f7da2dfa53
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed May 8 10:30:10 2024 +0000

    Bug 36618: (QA follow-up) Hide option for titles with no linked record
    
    This patch hides the "Update linked biblio" option for titles that have been created with no linked biblio record
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b0bf5358816d11fdacbfd8934f973d69d84ac55a
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Apr 17 10:34:49 2024 +0000

    Bug 36618: Add unit tests
    
    prove t/db_dependent/api/v1/erm_eholdings_titles.t
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 08992ab7119403d24bedfeca1c5b0e4a7b1c1798
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Apr 17 10:31:27 2024 +0000

    Bug 36618: Make biblio creation optional for ERM local titles
    
    This patch makes biblio creation on local title creation optional.
    
    Test plan:
    1) Navigate to the local title creation form
    2) Create a title and leave the "Create record" box unchecked
    3) Submit the form
    4) Search the catalogue for the title you have just created - no biblio result will be available
    5) Repeat steps 2 - 3 but this time check the box to create a record
    6) You should now be able to find a record in the catalogue for the title you just imported
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 956755fa152762facdf0564af9c4de5970f7ef55
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Wed May 8 19:43:22 2024 +0200

    Revert "Bug 34263: Suspending holds consecutively populates previously used date falsely"
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 10853d1edc9c31bcef096ffa514bb3025e0a760e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 26 18:14:04 2024 +0000

    Bug 36582: Add option to set library, desk, and register from user menu
    
    This patch adds an expandable "panel" in the user dropdown menu in the
    staff client. Expanding the panel will load the form from
    set-library.pl, including library, desk and register options if present.
    
    The patch moves the contents of desk_selection.js and
    register_selection.js into staff-global.js so that the functionality is
    available on every page.
    
    To test, apply the patch and rebuild the staff interface CSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client).
    
    Test plan stolen from Bug 36572:
    
    1. Have 3 staff accounts to test:
      -STAFF A: superlibrarian
      -STAFF B: loggedinlibrary permission
      -STAFF C: no loggedinlibrary or superlibrarian permission
    2. Enable 'UseCirculationDesks' and create some desks. (Admin >
       Circulation desks)
    3. Enable 'UseCashRegisters' and create some registers ( Admin > Cash
       registers)
    4. Use STAFF A ( superlibrarian ) and make sure you can change branch,
       desk and register.
    5. Use STAFF B ( loggedinlibrary permission ) and make sure you can
       change branch, desk and register.
    6. Use STAFF C ( no loggedinlibrary or superlibrarian permission ) and
       make sure you can change branch, desk and register.
    7. Each time you change you should be redirected to the page you were
       previously on.
    8. Turn off UseCirculationDesks, make sure everything still works.
    9. Turn off UseCashRegisters, make sure everthing still works.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 42944b3e9b1c3bb0e20c2697e9716feea473acdb
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri May 3 17:12:26 2024 +0000

    Bug 35648: (follow-up) Remove sorting from transport columns
    
    There's not a simple way to handle sorting of a column containing only
    checkboxes, so I think it makes sense to remove the sorting unless
    someone feels strongly about it being necessary.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 109a1e93dc90bdc77dff55827f7d326d29cbae0f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Mar 22 12:47:22 2024 +0000

    Bug 35648: (follow-up) Clear table filter before submitting
    
    This patch takes advise from elasticsearch-mappings.js and adds an
    onsubmit event to clear any DataTables filter before submitting. This
    should prevent hidden fields from being overwritten.
    
    To test, filter the table and make a change to one of the visible rows.
    After submitting, confirm that the previously-hidden rows retain the
    same settings as before.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2800f7c9fb525783a45306102a1958362a58f771
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jan 2 20:11:28 2024 +0000

    Bug 35648: Allow sorting of patron categories in Overdue notice/status triggers
    
    This patch adds a basic DataTables configuration to the table of patron
    categories on the Overdue notice/status triggers page. The table can be
    sorted by patron category and can be filtered.
    
    To test, apply the patch and go to Tools -> Overdue notice/status
    triggers.
    
    - Confirm that the table of patron categories is sorted by default by
       patron category
    - Other columns should not be sortable
    - You should see a search field above the table which works to filter by
      patron category.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 37e9c21d065f018dd49af90a2c90ef033c0a701d
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Wed May 8 16:13:44 2024 +0000

    Bug 36755: DBRev 23.12.00.053
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 111fe8c07b10eb10a6cc8ef829ddd78c7b3935a7
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue May 7 12:36:31 2024 -0400

    Bug 36755: Update kohastructure.sql
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    PA amended: Squashed borrower_attribute_types table update
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ffd47c373aa84f19c4dcab4d7f249b622e8adcaa
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu May 2 13:19:05 2024 +0000

    Bug 36755: Atomicupdate file
    
    Test plan, k-t-d:
    1) Apply patches.
    2) Run the following SQL and save the output of each:
      SHOW CREATE TABLE pseudonymized_borrower_attributes;
      SHOW CREATE TABLE borrower_attribute_types_branches;
      SHOW CREATE TABLE borrower_attributes;
      SHOW CREATE TABLE borrower_attribute_types;
    3) Run updatedatabase
    4) Run the SQL queries again, compare the output of each with the previous output before updatedatabase.
    5) Make sure the only diff between the two is VARCHAR(10) -> VARCHAR(64)
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ac19b97974b36eb55421bd7823c1947ad763562e
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu May 2 13:19:27 2024 +0000

    Bug 36755: Update UI input element
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8017e603979e38f34ec7156dc6d51fdde7f47486
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 8 16:51:32 2024 +0200

    Bug 32693: Fix history.t
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e033aad342e40dd7c89ae1c9b8b8a8ce33baf6ba
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Wed May 8 15:27:47 2024 +0000

    Bug 32256: DBRev 23.12.00.052
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d8baa5090b9c84856072c79112ac1377e6395562
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon May 6 03:42:57 2024 +0000

    Bug 32256: Use a new SCOBatchCheckoutsValidCategories syspref
    
    So that this functionality can be controlled separately from staff-side batch checkouts
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b138519d2bbb306acee120c7d4ee8a13d8251191
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 1 15:19:09 2024 +0100

    Bug 32256: (QA follow-up) Tidy sco-main.pl
    
    This tidies the whole file as the patchset touched so much that we
    basically needed to tidy all to make the QA scripts clean.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bb059abe90c4be84d3354ba0c716566227b39c64
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Apr 29 04:37:50 2024 +0000

    Bug 32256: Handle batch error messages better
    
    This enhancement modifies the self-checkout script to better handle 'impossible' and 'needs confirmation' checkout messages.
    
    Test with a combination of barcodes that would invoke these messages, for example:
    - impossible: barcode doesn't exist
    - impossible: barcode is for a 'notforloan' item type
    - impossible: debt
    - needs confirmation: barcode already checked out, i.e. confirm renewal
    
    Include barcodes that should have successful checkouts too.
    
    Also, test with the following sysprefs:
    - BatchCheckouts: enabled
    - BatchCheckoutsValidCategories: none selected
    
    Confirm SCO does not have a multi-line text area for more than one barcode, and doesn't accept more than one barcode.
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3c57d0f3db065b0aebbebad1c08b14bee8bd3016
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Apr 15 00:52:58 2024 +0000

    Bug 32256: Display barcodes not checked out in batch
    
    This patch encourages the user to check out certain items individually if they fail to be checked out in a batch.
    
    This way they will be presented with more useful error messages.
    
    To test:
    
    1 - Enable BatchCheckouts, select nothing in BatchCheckoutsValidCategories
    2 - Find three barcodes
    3 - log into SCO with a user in category Patron, paste the barcodes separated by newlines and submit. confirm one item is succcessfully checked out and the other two barcodes are listed in the pop-up, encouraged to try checking out individually.
    4 - select Patron in BatchCheckoutsValidCategories
    5 - log into SCO with your Patron user again, confirm you can check out multiple items at a time
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e9f387cfc3f209256c5239d2034e842851d1df2e
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Apr 10 00:58:30 2024 +0000

    Bug 32256: (follow-up) Use correct patron category
    
    This patch ensures we check the categorycode of the patron trying to issue the items is valid (based on BatchCheckoutsValidCategories), rather than the categorycode of the AutoSelfCheckAllowed patron.
    
    To test:
    
    1 - Enable BatchCheckouts, select nothing in BatchCheckoutsValidCategories
    2 - confirm AutoSelfCheckAllowed is allowed and contains the username and password for the self_check user. Confirm self_check user is in category Staff
    3 - log into SCO with a user in category Patron, confirm you can only check out 1 item at a time
    4 - select Patron in BatchCheckoutsValidCategories
    5 - log into SCO with your Patron user again, confirm you can check out multiple items at a time
    
    Sponsored-by: Koha-US
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 297ad2bb6f1755182c3ca0149f54c245246f6cea
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Nov 7 03:18:02 2023 +0000

    Bug 32256: Add message to SCO that batch checkouts works for checkouts only
    
    Not yet handling renewals, returns, or items that are impossible to check out.
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6a70c126d16aff00e278a2ae93e84f859d86be55
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Aug 28 04:58:26 2023 +0000

    Bug 32256: Enable batch checkout using self-checkout
    
    This patch allows more than one item to be scanned and processed at once in Koha's self-checkout module. The items in the batch will still be handled one-by-one, so if any item in the batch requires confirmation (i.e. to be renewed or returned) or is impossible to check out, the process will stop at that item. Any items earlier in the list will be processed, but any items coming after in the list will be ignored. This feature uses the existing BatchCheckouts and BatchCheckoutsValidCategories system preferences to determine if batch checkouts should be allowed.
    
    To test:
    1) Open the staff interface. Go to Koha Administration -> Global system preferences. Search for "BatchCheckouts". Confirm BatchCheckouts syspref is disabled, and no categories are selected for the BatchCheckoutsValidCategories syspref.
    2) In another tab, open the OPAC self checkout (found out OPACBaseURL/cgi-bin/koha/sco/sco-main.pl) and log in
    3) Confirm the self-checkout works as normal for checking out, returning or renewing one item at a time
    4) Go back to the staff interface tab (you may need to log back in). Enable the BatchCheckouts syspref but leave the BatchCheckoutsValidCategories syspref empty.
    5) Refresh the OPAC self checkout tab. The barcode input field will now be bigger to support a list of barcodes. Enter a list of barcodes separated by newlines and Submit.
    6) Only the first barcode should be processed. This is because no categories are valid for BatchCheckouts.
    7) Go back to the staff interface tab (you may need to log back in). Select at least your patron category for the BatchCheckoutsValidCategories syspref and Save.
    8) Refresh the OPAC self checkout tab. Enter a list of barcodes separated by newlines and Submit. Confirm all valid items are checked out as expected.
    9) Test with a few items that are notforloan or would not be valid checkouts. Confirm they are not checked out, but other valid items in the batch are checked out successfully.
    10) Test with a batch where one of the items is already checked out to the patron. The batch should get blocked at this item as the self-checkout asks for confirmation.
    11) Test with both renewing and returning of items that are already checked out to the patron. This will only work with one item at a time and later items in the list will be ignored.
    
    Sponsored-by: Koha-US
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1eb3eddd2ded845b85324ac0488f8e4af1c307cf
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Wed May 8 15:07:28 2024 +0000

    Bug 31097: DBRev 23.12.00.051
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a2aa3053a8993b9439d4bd67e05d652962ec0b46
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Wed May 8 15:24:59 2024 +0000

    Bug 31097: (follow-up) Rename link from 'account' to 'charges'
    
    The tab has been renamed at some point and I think the link should
    be adapted to be clear where it leads to.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1966938c6f53ae5c8631e565708e8e7359c9a53c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 8 15:31:55 2024 +0000

    Bug 31097: (follow-up) Standardize appearance of colon between restriction type and comments
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0967c18adb0679a469eb00e59e77f7fb93aebe7b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue May 7 14:55:34 2024 +0000

    Bug 31097: (follow-up) Restructure messages a bit
    
    This patch updates the patron restrictions markup and splits up some
    strings to (hopefully) improve the translation process. The patch also
    fixes a bug in a previous patch which prevented manual restrictions from
    being displayed if there was also a restriction added by
    overdue_notices.pl.
    
    Test that all three kinds of restrictions display correctly:
    
     - Restrictions added by overdue process
     - Manual restriction without an expiration date
     - Manual restriction with an expiration date
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9e996fc4667e843cce851c4410f96da0d7ccd3ce
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue May 7 11:45:40 2024 +0100

    Bug 31097: Update restriction type display text
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1f53e721ef3f0cc5e7885e478f59c04497f197a7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu May 2 11:41:36 2024 +0100

    Bug 31097: Add classes, drop an ELSE, drop <br />
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2dd1fd55871cb70d57861717dd38ed0042b3351f
Author: Philip Orr <philip.orr@lmscloud.de>
Date:   Thu Apr 18 15:41:33 2024 +0000

    Bug 31097: Added more restrictions info
    
    Added more info to the restrictions message
    in circulation as well as to the OPAC display
    in "Your account" and to the display of
    restriction messages when trying to place a
    hold in the OPAC.
    
    To Test:
    1. Before applying patch, set system preference
    "PatronRestrictionTypes" to "Allow"
    2. Go to Administration -> Patron restriction types
    3. Add some restriction types, make sure you
    fill out both "Code" and "Label"
    4. Go to any patron and add one or more of each
    restriction type
    4a. Make sure that you add some with an
    expiration date and some without
    4b. Make sure you add some with a comment and
    some without
    5. Go to that patron's checkout page
    6. Notice that only the comments of the
    restrictions are displayed and not all info
    is displayed
    7. Apply the patch
    8. Reload the page
    9. Notice the restriction types are now
    displayed correctly
    10. Notice the colon is only displayed
    if there is a comment
    11. Notice the expiration date is also displayed
    12. Open the OPAC and log in with that user
    (or if you want to log in with your own user:
     make sure they have all the restrictions
     mentioned above as well)
    13. Go to "Your account" in the OPAC
    14. Notice the display of restrictions
    15. Try to place a hold on any record
    16. Notice the display of restrictions
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a2fa3a1719e8aec734cbd3d6a3b793349c1e163f
Author: Philip Orr <philip.orr@lmscloud.de>
Date:   Thu Apr 18 09:37:59 2024 +0000

    Bug 31097: Display restriction types
    
    This patch changes the display of patron
    restrictions in checkout and patron details
    pages to show the restriction type for each
    restriction. It also changes the display so
    each restriction is shown on a newline.
    
    To test:
    1. Before applying patch, set system preference
    "PatronRestrictionTypes" to "Allow"
    2. Go to Administration -> Patron restriction types
    3. Add some restriction types, make sure you
    fill out both "Code" and "Label"
    4. Go to any patron and add one or more of each
    restriction type
    5. Go to that patron's checkout page
    6. Notice that only the comments of the
    restrictions are displayed
    7. Apply the patch
    8. Reload the page
    9. Notice the restriction types are now
    displayed correctly
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7b4b3f7487f7539485a52216adea98dccf403157
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Thu Apr 25 14:58:31 2024 -0400

    Bug 36701: Adjust confirmation to hide empty div
    
    To test:
    1. Place a hold on any bib record
    2. Cancel the hold by clicking the trash can icon next to it
    --> Note that there is an empty red page section in the modal
    3. Apply patch and refresh the page
    4. Repeat steps 1-2
    --> No empty red page section
    5. Confirm that the test plan from bug 33174 still works
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e9356afd9f7e8ee16165341b8009282ff9ab3ff3
Author: Katariina Pohto <trainee@koha-suomi.fi>
Date:   Thu May 2 14:27:06 2024 +0300

    Bug 36534: Batch operations when using limit in report
    
    When report results number exceeds the result per page limit, batch
    operations link reads "Batch operations with (page limit) records" even
    if there are more or less shown records (more when using limit in SQL or
    less in the last page of result). This patch fixes the link text to
    actual shown records.
    
    To test:
    1) Create a report of items with a limit of e.g., 26.
    2) Run report.
    3) See that number of results shown exceeds 20 but the link says "Batch
       operations with 20 visible records".
    4) See that the second page shows 6 results but the link is still for 20
       records.
    5) Apply patch.
    6) Run report again.
    7) See that the link texts will show correctly 26 records on the first
       page and 6 records on the second.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3abfe484f94720992a25855cada94b3b5aab4e34
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue May 7 09:45:56 2024 +0100

    Bug 36757: Sync concerns tables
    
    This patch re-syncs the two catalog concerns display tables markup. We
    add the 'Title' field into the catalog/detail version of the table and
    split the columns settings so you can control the table distinctly from
    the cataloguing module version so we can hide 'title' by default in the
    details display tab.
    
    This results in the table matching the display from the cataloguing
    module page, i.e. the assignee and status detail displays.
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 94e9bda510f2b8fe54845c7b55c6336a0ceed228
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Wed May 8 14:39:03 2024 +0000

    Bug 36687: DBIC schema update
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3f9551b0c63d160f96948fb94a8054154b210b7d
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Wed May 8 14:36:52 2024 +0000

    Bug 36687: DBRev 23.12.00.050
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d267e2fe174506ed066b1810659bf9dcf87681b0
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Apr 24 17:05:18 2024 +0000

    Bug 36687: Update itemtypes.notforloan to not allow NULL values and change to tinyint(1)
    
    To test:
    1. Have some itemtypes.notforloan values set to NULL.
    2. APPLY PACTH, updatedatabase, restart_all
    3. When you updatedatabase those values should be set to 0.
    4. Try updating an itemtypes.notforloan value to NULL. You cannot.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a459d5d6efd468f0da39c4819818b4bf7c4bdf2a
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri May 3 14:22:13 2024 +0000

    Bug 34263: (QA follow-up): Use flatpickr .clear instead
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e02311e556e009151b186ca61d67771d40cfdd06
Author: Katariina Pohto <trainee@koha-suomi.fi>
Date:   Thu May 2 16:09:39 2024 +0300

    Bug 34263: Suspending holds consecutively populates previously used date falsely
    
    Suspending a hold doesn't clear the date from the date picker. When another hold is suspended
    the previously used date will show on the date picker but the value is not set on the hold.
    Suspending the hold will suspend it indefinitely. Also the link "Clear date to suspend indefinitely"
    will not clear the date picker. This patch will make both the Suspend button and the Clear date link
    clear the dates from both the date picker and the variable passed on, making the suspending consistent
    with what is seen on the date picker.
    
    Test plan:
    1) Place 3 holds on a patron.
    2) Suspend a hold and set a date for it.
    3) Suspend a second hold and notice the previously used date is shown on the date picker.
       Note that the hold will be suspended indefinitely.
    4) Open the suspending window for the third hold and pick a date. Click "Clear date to suspend indefinitely"
       and note the date picker doesn't get cleared. The hold will be suspended indefinitely.
    5) Apply patch.
    6) Suspend a hold and set a date for it.
    7) Suspend a second hold and notice the date picker does not have a preset date.
    8) Pick a date and clear it with the "Clear date to suspend indefinitely link".
       See that the date picker also gets cleared.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f402b0eccdc44c5511bbf6b7da88b6e143b7163e
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Mon May 6 09:08:50 2024 +0000

    Bug 36786: (Bug 31791 follow-up) Koha explodes when trying to edit a biblio with invalid biblionumber
    
    After changes made to addbiblio with the bug 31791, when trying to open the
    editor with biblionumber=<invalid_number> (e.g. a deleted biblionumber)
    Koha explodes with a message << Can't call method "can_be_edited" on
    an undefined value at /kohadevbox/koha/cataloguing/addbiblio.pl line 555 >>
    
    Test plan:
    ==========
    1. Try to edit a biblio giving as a biblionumber (in URL) a non-existing
       biblionumber, e.g. in ktd, with standard ktd test data:
       http://your_ktd:8081/cgi-bin/koha/cataloguing/addbiblio.pl?biblionumber=1234567
       Koha should explode with the message:
       Can't call method "can_be_edited" on an undefined value at
       /kohadevbox/koha/cataloguing/addbiblio.pl line 555
    2. Apply the patch; restart_all.
    3. Repeat p.1.  You should get a page with the info: "The record you are trying
       to edit doesn't exist...".
    
    Sponsored-by: Ignatianum University in Cracow
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 18ac387e6a706019bc5a6c9fadf266eb2b4bf05d
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Mon May 6 12:08:02 2024 +0200

    Bug 36787: staticfines.pl add use Koha::DateUtils::output_pref
    
    misc/cronjobs/staticfines.pl is calling output_pref() but it is missing from module import :
    use Koha::DateUtils qw( dt_from_string );
    
    Test but running staticfines.pl
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6d0d585c14a5943fad77f1f6481f5213cc4f7983
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 7 15:46:54 2024 +0200

    Bug 36750: Fix Languages vs Language
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a654faf72e602463fec6ebeda2a4da8ed4938bfc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 6 11:55:28 2024 +0200

    Bug 36750: Fix aria-label for show more/less links
    
    Didn't manage to keep the more_less_labels because of the space in the
    key names
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4ffaa07a40a9cb6648779ed8aa0984827e87f7b2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 6 11:38:44 2024 +0200

    Bug 36750: Use the same label for Zebra
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4e8500beb0873aa96e5c33c45b1e4b17030edec1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 6 11:07:13 2024 +0200

    Bug 36750: Fix some labels
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 52c46ae8d0c35a4964adf83e55d016c60af28141
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu May 2 16:44:36 2024 +0000

    Bug 36750: (35138 follow-up) Use same display code for OPAC
    
    To test:
    1 - In OPAC with ES enabled do a search
    2 - Note missing facet labels
    3 - Apply patch
    4 - They are back!
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7cc445e95cc7ba5130fc0efbca863f858d4269ee
Author: David Nind <david@davidnind.com>
Date:   Tue May 7 05:41:54 2024 +0000

    Bug 36796: (follow-up) Fix column descriptions for the statistics table
    
    This follow-up to bug 32312 fixes the descriptions for the statistics
    database columns, used in guided reports.
    
    It removes the duplicate statistics section in Koha/Database/Columns.pm
    so that descriptions are displayed for all columns, as originally
    intended.
    
    It also adds a description for the interface column (a new column added
    after the original patch was pushed).
    
    Test plan:
    1. Go to Reports > Guided reports > Create guided report.
    2. Choose 'Circulation' for the module to report on and select
       'Next'.
    3. Choose 'Tabular' for the type of report and select 'Next'.
    4. Scroll down to the statistics table section and note that some
       columns have descriptions and some don't:
         Statistics date and time / statistics.datetime
         Library / statistics.branch
         Value / statistics.value
         Type / statistics.type
         Item number / statistics.itemnumber
         Item type / statistics.itemtype
         statistics.other
         statistics.location
         Borrower number / statistics.borrowernumber
         statistics.ccode
         statistics.categorycode
         statistics.interface
    5. Apply the patch.
    6. Restart all the things (restart_all).
    7. Repeat steps 1 to 4.
    8. Scroll down to the statistics table section again and note that all
       columns now have descriptions:
         Statistics date and time / statistics.datetime
         Library / statistics.branch
         Value / statistics.value
         Transaction type / statistics.type
         SIP mode / statistics.other
         Item number / statistics.itemnumber
         Koha item type / statistics.itemtype
         Shelving location / statistics.location
         Borrower number / statistics.borrowernumber
         Collection / statistics.ccode
         Patron category / statistics.categorycode
         Interface / statistics.interface
    9. Sign off :D
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a464e20091e0662bed82bfe308af69c8710614aa
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue May 7 13:07:53 2024 +0100

    Bug 36612: (QA follow-up) Add 'source' to public_read_list
    
    This patch adds the required 'source' field to the public_read_list for
    tickets.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 14675bea5616c934e0588993b3f4aabaebd3f736
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue May 7 12:35:04 2024 +0000

    Bug 30579: (follow-up) Style selections as buttons
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e2c4b292d4b364a9a847b20b63183b14b3e4e3fa
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue May 7 12:24:24 2024 +0000

    Bug 30579: (follow-up) Standardize labels:
    
    This patch changes the heading for specific item holds, so the three options are now:
    
     Hold next available item
     Hold next available item from an item group
     Hold a specific item
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fe4be8be6e82dfb20e66dc1d5f3ce8e70ce9f041
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue May 7 12:01:33 2024 +0000

    Bug 30579: (follow-up) Fix rebase of multi holds form and add CSRF
    
    This patch restores missing elemtns to multi-hold form and adds CSRF variables
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2f70239201cd1d3c93cdd9557f9752bb88c7bf55
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu May 2 16:05:35 2024 +0000

    Bug 30579: Fix rebase issue
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c583acec24c9d0a1ab04af9fef041f58dc232ac7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 15 18:03:10 2024 +0000

    Bug 30579: (follow-up) Remove unnecessary nested form elements
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0209573f169029165a5c2e159e523a4296169180
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Thu Oct 26 13:00:10 2023 -0400

    Bug 30579: (follow-up) fix button id
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9caea3fcfcea694b41f9cf2dc79cf78d3f3560e2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 25 12:13:49 2023 +0000

    Bug 30579: (follow-up) Add required label and warning when hold levels required
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4686f5f0ff9f79fbad515a5bb85a92d0e04089d4
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 25 11:40:04 2023 +0000

    Bug 30579: (follow-up) Use same conditions on item groups place hold button as on other options
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e40bbac24f13e7f6ba83e3b765a0e0f5acebe94c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Aug 28 14:42:49 2023 +0000

    Bug 30579: (follow-up) Add fieldsets and style disabled elements
    
    This patch surrounds each section with a fieldset which allow enabling/disabling
    all the elements in one go. CSS is added to make it clear which fields are disabled.
    
    Button for item specific is moved form the multi-hold section
    
    Javascript is simplified to use the new fieldsets
    
    To test:
    1 - Repeate test plan on earlier commit
    2 - Additionally, search and select multiple records and place hold
    3 - Confirm multi-hold placing works :-)
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b44bfbdaf200a5169398c9ff10a7552de0797c4a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Aug 28 12:26:44 2023 +0000

    Bug 30579: Remove doubled notes field
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 00b2f755e7c49e0c6845f21a52d4badbde2a13d9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 23 11:36:43 2023 +0200

    Bug 30579: Add missing for attribute on label
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bc172982f8e296a6c923601ca553c116d8fe0d16
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 23 15:06:05 2022 +0000

    Bug 30579: Disentangle multi-hold and single bib forms
    
    This patch alters the structure of the hold request page to make it clear
    that "Hold next available", "Hold item group", and "Hold specific item" are
    mutually-exclusive options.
    
    While there is some duplication from this, it makes the sections easier to read
    and allows for more variation in the two forms
    
    To test:
     1 - Find a bib with multiple items
     2 - Enable item groups and item group holds in system preferences
     3 - Load the records detail page
     4 - Add an item group on the item groups tab
     5 - Select two items and add to the group
     6 - Click the 'Holds' tab and search for/select a patron
     7 - Confirm the three levels of holds are clear
     8 - Confirm checking the radio next to one disables the others
     9 - Check 'Hold next available item from an item group'
    10 - Do not select an item group
    11 - Click 'Place hold' and confirm you are notified of need to select an item group
         NOTE: if you are overrirding you may also have an alert that the items cannot normally be put on hold
    12 - Click 'Place hold on a specific item' - but do not select an item
    13 - Click place hold and confirm there is an alert and you cannot continue
    14 - Click 'Hold next available item' and place hold
    15 - Hold is successfully placed
    16 - Place another hold for the same patron
    17 - Only the 'Hold next available item' form is enabled
    18 - Confirm you cannot switch hold type
    19 - Place hold
    20 - Select a new patron and place an item group hold
    21 - Select the same patron and place another hold - you are forced to place an item group hold
    22 - Select a new patron and place a hold on a specific item
    23 - Place a second hold, confirm you can only place it on a specific item
    
    Signed-off-by: hinemoea <hinemoea@inlibro.com>
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 79d30205943dd3adeabd267bc729a63e69c0be30
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue May 7 13:16:07 2024 +0000

    Bug 36396: DBRev 23.12.00.049
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 98a1f1750177251d743162a7ace9fc6767867abf
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 7 12:41:39 2024 +0200

    Bug 36396: Add tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 98e6ddd4a3042a0a419a0f0d0d0c7a5abafac0bd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 22 14:37:22 2024 +0100

    Bug 36396: (follow-up) Prevent link to av for 'specials'
    
    Signed-off-by: Lukas Koszyk <lukasz.koszyk@kit.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5561383a9ffe0f294b756ab3a56754901c34ceae
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 22 10:04:08 2024 +0100

    Bug 36396: Export/import the yaml config
    
    Test plan:
    Export the ES fields/mappings using
     misc/search_tools/export_elasticsearch_mappings.pl > mappings.yaml
    Copy this file to admin/searchengine/elasticsearch/mappings.yaml
    
    Reset the mapping from the UI
    Notice that the links to the AV categories have been preserved
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Lukas Koszyk <lukasz.koszyk@kit.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 621ad21a7aea74afddc06f73ae86f477077becb5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 22 09:23:19 2024 +0100

    Bug 36396: UI - OPAC
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Lukas Koszyk <lukasz.koszyk@kit.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4941197a4b4e003ca7f0d53597d7a11031cc3e5c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 22 09:29:45 2024 +0100

    Bug 36396: Prevent link to av for 'specials'
    
    See previous commit message, 'QA' part.
    We do not support the "specials" categories.
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Lukas Koszyk <lukasz.koszyk@kit.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 901f550a47bce01f6f4cd503ff0abb2417ba44e9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 21 16:48:56 2024 +0100

    Bug 36396: Link facet with authorised value category - ES
    
    This new feature adds the ability to link an ES facet to an authorised
    value category, in order to display a description instead of the code.
    
    Test plan:
    1. Go to the ES mapping admin page
    2. Notice the new "Authorized value category" column in the facets
       config table
    3. Create a new facet that is linked to a search field containing values
       from an authorised value category. Pick this category in the list
    4. Save
    5. Reindex
    6. Notice that the descriptions are now displayed (staff and OPAC) in
       the search result page.
    
    QA: See the related bug report for possible improvements. It's not
    easy at all to deal with the "specials" here, a lot of changes must be
    done in how we fetch/cache the AVs.
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Lukas Koszyk <lukasz.koszyk@kit.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 58d097d2aa3884162bbc4acaf6f14c3beec9b8cb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 21 15:51:44 2024 +0100

    Bug 36396: DBIC schema changes
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Lukas Koszyk <lukasz.koszyk@kit.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a3887fe12af6979bef92be3025fbaabc09e6f1e0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 21 15:45:11 2024 +0100

    Bug 36396: DB changes
    
    Add the new DB column search_field.authorised_value_category
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Lukas Koszyk <lukasz.koszyk@kit.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 09734c1c1195de97d6a8959de94d00689e926c3f
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue May 7 13:11:23 2024 +0000

    Bug 33134: DBRev 23.12.00.048
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4053893e4f282456dbc4bdb53f14b8b4a482b71c
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Fri Mar 3 23:15:51 2023 +0100

    Bug 33134: Add some 76 missing languages
    
    When languages come into facets in ES, Koha should know
    the names for the codes used records.  Otherwise
    the three-letters language code is being displayed in
    the facet instead of name.  Koha now knows about 77
    languages, many are still missing.
    
    The most missed 76 languages, in order of occurrences
    in my data sets, are (MARC 21 codes): grc, syr, chu, cop, arc,
    ang, epo, syc, gez, sla, san, csb, akk, gmh, egy, wen, gle,
    fro, rom, mac, mal, uga, mis, sem, sux, pli, bos, che, dum,
    kaz, tib, enm, frm, mlt, got, nds, ira, lin, uzb, ave, cho,
    jrb, bnt, pal, tut, goh, hsb, inc, mlg, roa, cel, sam, bem,
    fur, gem, hit, lad, nah, ota, peo, pro, tat, wel, yor, bra,
    den, hau, her, kas, mga, myn, nya, pra, que, tir, tuk.
    
    Plus: gwi, dgr, chp asked in bug 23693.
    
    Here, I do not put language codes which are extremely rare
    in my data sets.
    
    Subtags and names for language_subtag_registry are taken from
    https://www.iana.org/assignments/language-subtag-registry/language-subtag-registry,
    English names for language_descriptions.description - from
    https://www.loc.gov/marc/languages/language_code.html, and Polish names -
    from https://przepisy.bn.org.pl/aneksy#25-kody-jezykow---marc-21.
    
    Test plan:
    ==========
    1. Hava a ES installation with reasonable number of records,
       with a variety of languages in 008/35-39 not present in
       Koha (you can modify your record with codes from the list above).
       Set FacetMaxCount to a high number (like 500 or so,
       dependiing on the size of your data set).
    2. Do a search, like '*a*'.
    3. Controll the content of the Language faset -- you should
       see some bare codes instead of language names.
    4. Apply the patch -- update the database.
    5. Perform the same search.
    6. You should see the names in place of the codes.
    7. Optionally, you can activate the Polish translation and
       you should be able to see Polish names for the added languages.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2a20cbb94a8e4d54279d80c136e09a29361bfcfd
Author: Thomas Klausner <domm@plix.at>
Date:   Mon May 6 12:39:35 2024 +0000

    Bug 36151: Update leaflet.js
    
    Koha currently comes with leaflet.js 1.0.3 which is quite old (2017).
    For GeoSearch (Bug 31652) we need a more current leaflet.js, so this
    patch updates leaflet.js to the current version 1.9.4
    
    Test plan:
    
    * Go to staff /cgi-bin/koha/admin/usage_statistics.pl where you see a
      map and can set the location of the library by clicking on the map.
    * Apply the patch
    * Again, go to staff /cgi-bin/koha/admin/usage_statistics.pl
    * Do a complete reload of the page
    * It should still work:
      * Display the location as a pin
      * Set a new location
    
    There was no code change necessary besides downloading the current
    version of leaflet.js and updating the about-page
    
    Sponsored-by: Geosphere Austria
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5ddd89cbb29fec150e65a99ef99e84269a84b781
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue May 7 12:58:55 2024 +0000

    Bug 35169: DBRev 23.12.00.047
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 871915219b3348ebf5c76f7db21941afd6a45137
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue May 7 12:57:52 2024 +0000

    Bug 35169: (follow-up) Fix sequence and patron categories in sysprefs.sql
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7dd3fc3cef81ce34fb7f8b012a49ecb2557b4614
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue May 7 11:52:42 2024 +0100

    Bug 35169: (QA follow-up) Fix spelling and preference name
    
    Update the preference name from 'Borrower' to 'Patron' and correct
    spelling of receive.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ab438e70230cd6885c58a9b7d3cfe2b8262260de
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri May 3 14:07:44 2024 +0000

    Bug 35169: (QA follow-up) Fix up syspref language and group them together
    
    The language used in the syspref preferences was a bit confusing.
    Also, it makes sense to keep these two together on the page as they
    are intrinsically linked.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a03b3e5fe2a6b34ab13ab0d0e19b5fa65dcd2be9
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Sat Mar 9 17:53:13 2024 +0000

    Bug 35169: (follow-up) perltidy
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0ebc5a78d9ceba0d7f7cf6ab28fd9d2faa566c9b
Author: Matthias Le Gac <matthias.le-gac@inlibro.com>
Date:   Fri Mar 1 14:17:20 2024 -0500

    Bug 35169: Resolve the override situations
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e8fef64cf5d0856ffbcee29da8b125aa59adc9ff
Author: Matthias Le Gac <matthias.le-gac@inlibro.com>
Date:   Fri Mar 1 08:53:43 2024 -0500

    Bug 35169: update DBupdate file
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fcd59d771294c111ff1ea7cca3dc54b4bf2166fd
Author: Matthias Le Gac <matthias.le-gac@inlibro.com>
Date:   Thu Feb 29 12:08:00 2024 -0500

    Bug 35169: update sysprefs.sql
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 41d24731981cd472b017cb8e867d9708b650d1fb
Author: Matthias Le Gac <matthias.le-gac@inlibro.com>
Date:   Thu Feb 22 15:33:25 2024 -0500

    Bug 35169: add bug_35169.pl for DB
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7c9a7fe7ff4ffb0fbc6e421c0d68d11e0e4fb58e
Author: Matthias Le Gac <matthias.le-gac@inlibro.com>
Date:   Thu Feb 22 14:46:22 2024 -0500

    Bug 35169: Make long overdue borrower category options configurable in interface
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5e06fd00cef16f4d8e90d7a236f45868b1de2c9d
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Apr 29 20:39:08 2024 +0000

    Bug 36709: Add confirm flag to update_localuse_from_statistics.pl script
    
    To test:
    1. APPLY PATCH and restart all
    2. Run the update_localuse_from_statistics.pl script without a confirm flag, nothing happens.
    3. Run the script and add the --confirm flag, stuff happens.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 67b3cbd438f0cee378cfa5236f2673ab6ea32f33
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Tue Apr 30 10:18:12 2024 +0000

    Bug 36730: (Bug 35428 follow-up) po files (sometimes) fail to update
    
    Under some circumstances (e.g. non-standard disk latency) po files fail
    to be generated.  The output from the gulp po:update --lang xx-XX task
    is than like this:
    
    [10:01:39] 'po_update_staff' errored after 6.41 s
    [10:01:39] Error: ENOENT: no such file or directory, open '/tmp/koha-5WCc9s/Koha-staff-prog.pot'
    
    This is due to the time dependencies inside the function flush (callback)
    (in the function xgettext) in gulpfile.js.  It happens that the
    /tmp/koha-NNNNNN folder gets deleted before the asynchronous callback
    function called by fs.readFile is completed.  The callback should copy
    the content of the .pot file from /tmp/koha- to its final destination,
    while, in parallel in fact, the folder inside /tmp is being removed.
    This creates a race condition.
    
    Test plan:
    ==========
    Hard to reproduce.  But the race condition found in the code should
    be obvious.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7f22156b8fea3766f893d28fc17ebe8561d5e7cc
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri May 3 09:07:17 2024 +0000

    Bug 34972: (QA follow-up) Remove second transfer from Circulation.t
    
    Removing the manual transfer and rightaway doing the Reserve
    transfer. One test description was misleading too.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 87c1759dd789cb2a91bff8e6609847811c05f984
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri May 3 08:07:24 2024 +0000

    Bug 34972: (QA follow-up) Remove some ModReserveCancelAll imports
    
    Not used? Dont import.
    Which actually only leaves circ/waitingreserves.pl as the only
    'real' caller.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit dc00e55a322c2c5279e4c42d516125d4e98cff4e
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Tue Mar 19 14:14:27 2024 -0400

    Bug 34972: Remove GetOtherReserves
    
    GetOtherReserves attempts to set the waiting/transit status for the next
    hold on the list when applicable, but in practice it either leaves the
    hold state unchanged, or sets the itemnumber without setting the found
    status (erroneously converting bib-level holds to item-level holds).
    
    The latter situation only occurs when the user has been prompted to
    confirm, cancel, or revert the hold, and is able to ignore the prompt.
    In those situations, the hold's state should not change.
    
    GetOtherReserves does not need to change the hold state, and it does not
    do so correctly. Besides that, it does not do much other than call
    CheckReserves, and is only used in 3 places.
    
    This patch removes GetOtherReserves, and refactors returns.pl and
    C4::Reserves::ModReserveCancelAll to call CheckReserves directly instead.
    
    To test:
    1. Place 2 bib-level holds for 2 different patrons (Patron A and Patron
        B) on the same record, both for pickup at the logged-in library
    2. Check in an item from that record to fill Patron A's hold
    3. Set the hold's expiration date to yesterday by accessing the database
        in the command line:
        - In a ktd shell prompt, open the db client with koha-mysql kohadev
        - UPDATE reserves
            SET expirationdate = DATE_SUB(CURDATE(), INTERVAL 1 DAY)
            WHERE borrowernumber = <Patron A's borrowernumber>
    4. Go to Circulation > Holds Awaiting Pickup, and find the hold in the
        "holds waiting past their expiration date" tab
    5. Click the "Cancel hold" button in the Actions column next to the hold
       (do not check in the book)
    6. Return to the bib record and look at Patron B's hold
    --> Note that Patron B's hold is now an item-level hold and does not
        have a waiting status
    
    7. Cancel Patron B's hold
    8. Place 2 new holds on the record: one for Patron A at the logged-in
        library, and one for Patron B at a different library
    9. Check in an item to fill Patron A's hold
    10. Repeat steps 3-5 to expire and cancel Patron A's hold
    11. Return to the Holds tab of the bib record and look at Patron B's hold
    --> Note that Patron B's hold is now an item-level hold, and there is no
        "Revert transit status" button
    
    12. Place 2 bib-level holds for 2 different patrons (Patron A and Patron
        B) on the same record, both for pickup at the logged-in library
    13. Check in an item from that record to fill Patron A's hold
    14. Check in the same item again. A modal will pop up, saying that the
        hold is already waiting
    15. In the modal, choose a cancellation reason and click "Cancel hold"
    --> A new modal will pop up to fill Patron B's hold
    16. Click "Ignore" on the modal for Patron B's hold
    17. Return to the bib record and look at Patron B's hold
    --> Note that Patron B's hold is now an item-level hold and does not
        have a waiting status
    
    18. Apply patch
    19. Repeat steps 1-6
    --> Note that Patron B's hold is still a bib-level/"next available" hold
    20. Repeat steps 7-11
    --> Note that Patron B's hold is still a bib-level/"next available" hold
    21. Repeat steps 12-17
    --> Note that Patron B's hold is still a bib-level/"next available" hold
    
    Make sure correct behavior is unchanged:
    
    22. Cancel Patron B's hold
    23. Place 2 new holds on the record: one for Patron A at the logged-in
        library, and one for Patron B at a different library
    24. Check in an item from that record to fill Patron A's hold
    25. Check in the same item again. A modal will pop up, saying that the
        hold is already waiting
    26. In the modal, choose a cancellation reason and click "Cancel hold"
    --> A new modal will pop up to fill Patron B's hold
    27. Click "Print slip, transfer, and confirm" on the modal for Patron B's hold
    --> Confirm that the information on the slip is correct
    --> Confirm that the hold is correctly put in transit
    
    22. Set HoldsAutoFill and HoldsAutoFillPrintSlip to "Do"
    
    23. Place a bib-level hold for the logged-in library
    24. Check in an item from that bib
    --> Confirm the information on the slip is correct
    --> Confirm the hold is correctly assigned and set to waiting
    25. Place a bib-level hold for a different library
    26. Check in an item from that bib
    --> Confirm the information on the slip is correct
    --> Confirm the hold is correctly put in transit
    27. Change the logged-in branch to match the hold pickup location
    28. Check the item in
    --> Confirm the information on the slip is correct
    --> Confirm the hold is correctly assigned and set to waiting
    
    29. Repeat steps 22-26
    --> Confirm a correct hold slip pops up for Patron B's hold
    --> Confirm that Patron B's hold is correctly put in transit
    30. Cancel Patron B's hold
    31. Place 2 bib-level holds for 2 different patrons (Patron A and Patron
        B) on the same record, both for pickup at the logged-in library
    33. Repeat steps 24-26
    --> Confirm a correct hold slip pops up for Patron B's hold
    --> Confirm Patron B's hold is correctly set to Waiting
    
    34. Prove t/db_dependent/Circulation.t
    35. Prove t/db_dependent/Koha/Holds.t
    --> Tests pass
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d71f5272021b54849e5854d3a7b8ecb1f30d9414
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Wed Apr 3 16:24:38 2024 -0400

    Bug 34972: Add tests for ModReservesCancelAll
    
    To test:
    1. Apply this patch only
    2. prove t/db_dependent/Koha/Holds.t
    --> Tests pass
    3. Apply the other patch
    4. prove t/db_dependent/Koha/Holds.test
    --> Tests still pass
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8d9ccd6fc371877fbd4d016ee3bc1de54721787e
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Mon May 6 12:06:22 2024 +0000

    Bug 36792: Limit POSIX imports
    
    A Marcel's QA patch to Bug 36552 added use POSIX; in two spots.
    In https://metacpan.org/pod/POSIX we read:
    
    CAVEATS
    Everything is exported by default (with a handful of exceptions). This is
    an unfortunate backwards compatibility feature and its use is strongly
    discouraged. You should either prevent the exporting (by saying use
    POSIX ();, as usual) and then use fully qualified names (e.g.
    POSIX::SEEK_END), or give an explicit import list. If you
    do neither and opt for the default (as in use POSIX;), you will
    import hundreds and hundreds of symbols into your namespace.
    
    This patch fixes this.
    
    No test plan.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ff183612043b8f37d74fbbd9c306a54c48329d99
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon May 6 12:58:33 2024 +0200

    Bug 36790: List table columns for 230600052 queries
    
    We must list the columns, or the db rev will fail when a new column is
    added. It happened here when 33478 added 'style'
    
    Also remove id and dates
    
    To test:
    1. On current main, run:
       $ ktd --shell
      k$ perl /kohadevbox/misc4dev/run_tests.pl --koha-dir=. --run-db-upgrade-only
    => FAIL: Tests explode for DB query issues
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: Tests pass!
    4. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 34b3becef2c38804153f062f4043b47fb23143a4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon May 6 09:35:59 2024 -0300

    Bug 25159: (QA follow-up) Make DBRev idempotent
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 76504fb6b7edd5a78638d0cb42b08b30f10de1bc
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon May 6 10:22:13 2024 +0000

    Bug 36788: Update debian/control file
    
    Signed-off-by: Mason James <mtj@kohaaloha.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d90c2a44e7506ec47a4f9481a1b8693b99244ecb
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Tue Mar 14 14:22:27 2023 +0100

    Bug 36554: Document languages from field 041 should be present in 'ln' search field and Languages facet (MARC 21)
    
    In Elasticsearch, the field 041 (subfields: a, d, e, i, j)
    is not indexed with 'ln' search field.  As a result, records cannot
    be found when searching with languages present in 041 (but only
    with the one from 008/35-37), and the languages are also missing
    from the facet.
    
    Subfields content (only relevant subfields):
    $a - Language code of text/sound track or separate title
    $d - Language code of sung or spoken text
    $e - Language code of librettos
    $i - Language code of intertitles
    $j - Language code of subtitles
    
    Test plan
    =========
    0. Have a test installation with Elasticsearch.
    1. In ktd with its test data, make a biblio search for a language present
       in 041 a/d/e/i/j but not in 008/35-37, e.g. for Japanese (with ln:jpn
       or from Advance search).  You will get no results.
    2. Apply the patch, reindex with:
       sudo koha-elasticsearch --rebuild -r -b kohadev
    3. Repeat the test. You should get some records and also you should see
       the Japanese language in the Languages facet.
    
    Signed-off-by: Roman Dolny <roman.dolny@jezuici.pl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5fe0fcc3d6f2a8d92bd322cfbcdb24ae2f91bc7a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu May 2 15:30:40 2024 +0100

    Bug 36760: Use 'strong' for 'Assignee' label
    
    This patch simply add the 'strong' class to the assignee label in the
    catalog concerns display ticket modal.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 09119cf9c51e098db891002035213f250f635077
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Feb 29 16:36:34 2024 +0000

    Bug 36390: Two minor OPAC CSS fixes
    
    This patch makes corrections to OPAC CSS to address two small issues.
    
    To test, apply the patch and rebuild the OPAC CSS.
    
    - Perform a catalog search which will return multiple results..
    - In the table of search results, check the icon and text for the
      controls under each title: "Place hold", "Add tag", "Add to cart" etc.
      - The colors should be consistent, with a slightly darker blue for the
        icons.
    - Scroll down until the table header "sticks" to the top of the
      viewport.
    - There should be no gap between the header row with the pagination
      links and the row with the "Select all", "Clear all", etc. controls.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6f8ef2b0c0788f71e821f2c56fc87c5a7173e081
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Feb 12 22:03:38 2024 +0000

    Bug 36074: Add classes to materials specfied message on check in and checkout when CircConfirmItemParts is on.
    
    To test:
    1. APPLY PATCH
    2. Set CircConfirmItemParts to 'Require'.
    3. Add a materials specified message to an item. ( 952$3 )
    4. Add the following CSS to your IntranetUserCSS:
    
        .mats_spec_label { color: white; background: purple;  }
        .mats_spec_message { color: white; background: green; }
    
    5. Checkout that item. Notice the message should be green and the label (Note about the accompanying materials:) should be purple.
    6. Check in that item. Notice the message should be green and the label (Note about the accompanying materials:) should be purple.
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2c8196cc077501d1b970f1077f94fd3f25b1385a
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Mar 21 16:37:13 2024 +0000

    Bug 31981: Add classes to each NEEDSCONFIRM message in circ/circulation.tt
    
    This patch adds a 'needsconfirm' class and a unique class to each NEEDSCONFIRM message on circ/circulation.tt to make these easier to style individually.
    
    To test:
    1. APPLY patch
    2. Review the diff to see each of the NEEDSCONFIRMATION messages.
    3. Add some CSS to IntranetUserCSS like this:
    
    .needsconfirm { padding: 1em; color: #fff; }
    
    .reserved { background: blue; }
    .debt { background: red; }
    .reserve_waiting { background: orange; }
    .rentalcharge { background: purple; }
    .renew_issue { background: limegreen; }
    
    4. Place a hold on an item for Patron A, do not trigger the hold, and check the item out to Patron B.  The message background is blue.
    5. Then check the item in, confirm the hold, then check the item out to Patron B.  The message background is orange
    6. Check something out that is already checked out to that patron, message background is lime green.
    7. Have too much debt and check something out to a patron, message is red.
    
    Note: There are plenty more NEEDSCONFIRMATION messages but I don't think we need to test every single one.
    Note: These background colors are more testing purposes only.
    Signed-off-by: Donna <donna@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 70eefbdce72e83a5c5af0de2ec3e81c6a59fc225
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Thu Apr 11 18:02:14 2024 +0000

    Bug 36584: Add fields 520, 561, and 563 (MARC 21) to ES note search field
    
    With Zebra, the general keyword search covered the entire record content,
    even if the field was not explicitly indexed with a Zebra index (the Any index).
    With Elasticsearch only the content of the fields explicitly indexed
    can be found with general keyword search.  This is OK, to some extent, but with
    the current configuration it hides the content fo some important notes from the
    searches, and librarians complained about that: 520 - Summary, etc.,
    561 - Ownership and Custodial History, 563 - Binding Information.
    
    This patch adds the content of 520, 561, and 563 fields to the 'note'
    search field.
    
    Test plan
    =========
    1. Have an installation with Elasticsearch.
    2. Add some information to the 520, 561, and/or 563 fields (561 is
       hidden in the default framework--one should enable it to be able to use
       the 561 field).  Save teh record.
    3. Try to find the record with the general keyword search, with the words
       you used.  If they were specific enough, you will get no results.
    4. Apply the patch, reindex with:
       sudo koha-elasticsearch --rebuild -r -b kohadev
    5. Confirm that now you are able to find the record with the information
       you entered.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d4b7fc521e69b201bfcdd6132b60c1335d7add58
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Thu Apr 11 14:32:51 2024 +0000

    Bug 36578: Elasticsearch: publisher-location (pl) index should include field 752 (for old prints) and also support UNIMARC
    
    Extension to bug 36269: 1) when cataloguing old prints, the standardized form of
    the place of publication is given in the field 752 and as such should also be indexed.
    
    2) Also, normal UNIMARC fields for publication place should be indexed (210a, 214a).
    
    Test plan
    =========
    
    Scenario A (MARC 21, field 752)
    -------------------------------
    0. Have an installation with Elasticsearch and MARC 21 configuration.
    1. Activate subfields 752 $a, $d in the default framework (Visibility: Editor).
    2. Edit an existing record with this framework, putting some rare words in the
       752 $a and $d subfields.
    3. Try to make a search with tis words (general keyword or by publication place,
       i.e. pl:).
    4. You hsold get no results.
    5. Apply the patch, reindex with:
       sudo koha-elasticsearch --rebuild -r -b kohadev
    6. Repeat p. 3. You should get your edited record.
    
    Scenario B (UNIMARC)
    --------------------
    0. Have an installation with Elasticsearch and UNIMARC configuration.
    1. Try to search for a publication place, either with pl: directly in the
       search window, or in Advanced search, with Publisher location.
       With ktd UNIMARC test date you can search for 'Ste Geneviève Cedex'.
    2. You should get no results.
    3. Apply the patch, reindex with:
       sudo koha-elasticsearch --rebuild -r -b kohadev
    4. Repeat p. 1. You should get some results (with ktd test data set and
       Ste Geneviève Cedex - record #1).
    
    Signed-off-by: Roman Dolny <roman.dolny@jezuici.pl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 64ad6469ef92c1e5f44136ddd57fb3c05564b772
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Fri Sep 1 15:27:44 2023 -0400

    Bug 34693: Add 035$a as Other-control-number index in default authorities search indexes
    
    This patch adds a new index for authorities, Other-control-number, and maps it to 035$a.
    
    This will help when trying to match authority records when importing external records.
    
    Test 1:
    0. Make sure Elasticsearch is set as the search engine
    1. Apply patch and restart
    2. Import the attached record
       2.1. Go to Cataloging > Stage records for import
       2.2. Choose the file
       2.3. Click Upload file
       2.4. Choose Record type: Authority
       2.5. Click Stage for import
       (wait until the job is finished...)
       2.6. Click View batch
       2.7. Click Import this batch into the catalog
       (wait until the job is finished...)
       2.8. Click Manage imported batch
       2.9. Click View next to the record
       2.10. Note the auth id number
    
    3. Examine the ES entry for the record (replace INDEX_NAME with the index name (found in koha-conf.xml and XX with the auth_id)
    
    curl -XGET 'http://localhost:9200/INDEX_NAME_authorities/data/XX?_source_includes=other-control-number&pretty'
    
    --> It should give you the value of 035$a
    
    Test 2 (optional):
    1. Steps 1 and 2 as above
    2. Add a matching rule to match on 035$a for authority records
       2.1. Go to Administration > Record matching rules
       2.2. Click New record matching rule
       2.3. Fill out the form
            - Matching rule code: enter a code (for example AUTCONTROL)
            - Description: enter a description (for example 035$a for authorities)
            - Match threshold: 100
            - Record type: Authority record
            - Search index: Other-control-number
            - Score: 100
            - Tag: 035
            - Subfields: a
       2.4. Click Save
    3. Import the same record again, checking for matches using the new rule
       3.1. Go to Cataloging > Stage records for import
       3.2. Choose the file
       3.3. Click Upload file
       3.4. Choose Record type: Authority
       3.5. Choose Record matching rule: rule created above
       2.6. Click Stage for import
       (wait until the job is finished...)
       --> It should say that 1 record was found using the rule
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 356efc42b890a22f7f2ffa14e50f393690102261
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed Mar 6 10:05:14 2024 -0500

    Bug 36247: MARC21 Addition to relator terms in technical notice 2024-02-27
    
    This patch adds the relator code gdv (Game developer) in the list of
    MARC21 relator terms in Koha.
    
    To test:
    1. Apply patch and reset_all
    2. Go to Administration > Authorized values > RELTERMS
    3. Search for gdv
       --> The new relator code should be there with its corresponding term
           "Game developer"
    
    Note: this is added in the installer files. It will not affect existing
    installations. For existing installations, add the new relator code in
    Administration > Authorized values > RELTERMS.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 77aa7722e1d6c2adae69e3d1545c7449c0d0aa9d
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Thu Feb 15 16:11:03 2024 -0500

    Bug 36108: Update MARC21 default framework to Update 37 (December 2023)
    
    This patch updates the default MARC21 framework to reflect the changes
    brought by Update 37 (December 2023).
    
    To test:
    1. Apply patch and reset_all
    2. Go to Administration > MARC bibliographic framework
    3. Click Actions next to the default framework and choose MARC structure
    4. Check for the changes detailed in the update
    https://www.loc.gov/marc/bibliographic/bdapndxg.html
    
    - Two subfields of 022 should be marked as obsolete
      - l ISSN-L [OBSOLETE]
      - m Canceled ISSN-L [OBSOLETE]
    
    - There should be a new field 023, named CLUSTER ISSN
      - This field should be repeatable
      - Subfields:
        - 0 Authority record control number or standard number (NR)
        - 1 Real World Object URI (R)
        - 2 Source (NR)
        - 6 Linkage (NR)
        - 8 Field link and sequence number (R)
        - a Cluster ISSN (NR)
        - y Incorrect Cluster ISSN (R)
        - z Canceled Cluster ISSN (R)
    
    - There should be one new subfield in field 532
      - 3 Materials specified (NR)
    
    5. Optional: run the framework test in Administration > MARC
       bibliographic framework test
       --> All should be OK
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 42561279297366732916903f656a9bcfa37ebe4f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Mar 19 15:06:08 2024 +0000

    Bug 35895: (follow-up) Add markup comments
    
    This patch adds comments to the template to highlight the markup
    structure.
    
    This patch should have no effect on the page's appearance or
    functionality.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f16c7979e634ba27237e460d8ea3e0ab481fbc07
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Mar 19 15:05:25 2024 +0000

    Bug 35895: Reindent tags review template
    
    This patch reindents the tags review template so that it has consistent
    indentation, with tab indentation coverted to space.
    
    The patch also adds "FILTER collapse" around the <style> block in the
    head of the page.
    
    To test, apply the patch and go to Tools -> Tags.
    
     - The page should look unchanged.
     - Test that no functionality has been affected:
       - Tag searches
       - Tag status changes
       - Check lists
    - If you view the diff while ignoring whitespace the only changes should
      be places where line breaks were introduced
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit dcb19b1c578a8f962df848a94276f4c3ce1ae677
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon May 6 07:03:26 2024 +0000

    Bug 27753: Update preference description
    
    Replace description by authorized value code in link texts.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 18f92f110b740fe7abd85fe7b0d58d337826cab9
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon May 6 06:59:06 2024 +0000

    Bug 27753: DBRev 23.12.00.046
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b08855fc693d0a007b91771468414647bc7ebace
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 1 12:58:17 2024 +0100

    Bug 27753: (QA follow-up) Use librarian as resolver
    
    This patch updates the changed code to set the logged in librarian as
    the person who resolved the return claim at checkin/checkout action.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2e91745b4c49524245f6fdd5929d35eac3ec88dc
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 1 12:57:54 2024 +0100

    Bug 27753: (QA follow-up) Enhance unit tests
    
    This patch further unit tests highlighting possible issues
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9e5d4f2384f1bf02e9e96b322318e90708be3098
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 1 10:52:52 2024 +0100

    Bug 27753: (QA follow-up) Improve unit tests
    
    This patch adds unit tests that test the functionality more specifically
    and adds a few notes/fixme for things we need to consider here
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7953b1724361b62f7a3ee4424eca2ae5e6e01f00
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 1 09:57:49 2024 +0100

    Bug 27753: (QA follow-up) Check that item exists before using it
    
    We're actioning the change of claim status outside of any block that
    checks the $item exists. As such we'll want to add that check in here.
    
    I did consider that this should live inside AddIssue, but on reflection
    the librarian may want to not proceed with the issue given other return
    values from the CanBookBeIssued call, but you still want the
    AutoClaimReturn to fire regardless as you've now found the item.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2e42bc55842ef607c918ff7aa170cfcf35818808
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Tue Apr 30 15:56:41 2024 +0000

    Bug 27753: (follow-up) Tidy unit tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a073ed20cab2990d281e33da09aeac55a38e57b3
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Tue Apr 30 15:54:01 2024 +0000

    Bug 27753: (follow-up) Tidy new code in circulation.pl
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit eb7e84efb98c24952fa2738bbe78178d5c52121a
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Tue Apr 30 15:51:45 2024 +0000

    Bug 27753: (follow-up) Tidy introduced code in Circulation.pm
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ace383ad96ade6eac8514a16dc68ea053dfe60c3
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Tue Apr 30 14:21:35 2024 +0000

    Bug 27753: (follow-up) Update logic in AddReturn
    
    The new logic in AddReturn was flawed, we were missing return messages
    due to moving the if statement too high and catching more code than
    intended.
    
    Mentored-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c808bf3465fedf0c1f16f92cad365acff1f06a39
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Tue Mar 19 16:03:54 2024 +0000

    Bug 27753: Unit tests
    
    Add unit tests for new logic introduced to C4::Circulation::AddReturn
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 48378179a304318bcca125a57d88e737014ad75e
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Tue Mar 12 02:44:05 2024 +0000

    Bug 27753: Added new system preferences for automatically resolving claims
    
    To test:
    1. Configure Claims returned
        1. Go to Administration > Authorized Values > LOST
        2. Add a new authorized value with value:6 and description:Claims returned
        3. Go to Administration > System Preferences
        4. Set ClaimReturnedLostValue to 6 and save
    2. Check out an item to a patron.
        1. Mark the item as claim returned
        2. Check the item in.
        3. A message stating that the item has been claimed as returned pops up with
           an option to resolve.
        4. Resolve the claim.
    3. Check out the item to the patron again.
        1. Mark the item as claim returned.
        2. Check out the item to a new patron. Select “Yes, check out”
        3. Go back to the previous patron. Notice that their claim was not resolved.
    4. Apply the patch.
        1. Updatedatabase
        2. restart_all
        3. Go to the system preferences and set the system preference
           ‘AutoClaimReturnStatusOnCheckin’ to ‘Returned by patron’
        4. Set ‘AutoClaimReturnStatusOnCheckout’ to ‘Found in library’
    5. Redo step 2
        1. When checking the claim returned item in you will now see a message that
           says “The previously claimed returned item has been found, automatically
           resolving the associated claim.”
        2. View the previous patron. Their claim has automatically been resolved
           with a status of ‘Returned by patron’
    6. Redo step 3
        1. Upon checking the item out to another patron you will see a message that
           says “The previously claimed returned item has been found, automatically
           resolving the associated claim.”
        2. View the previous patron. Their claim has automatically been resolved
           with a status of ‘Found in library’.
    7. Sign off and have a wonderful day!
    
    Sponsored-by: Altadena Library District
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c29e4ef1f1cda011867ba69207e4a0a0a74c829d
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Thu Mar 21 22:53:26 2024 +0000

    Bug 36393: Renewal with a specific date does not take the new date due that we pick
    
    When we renew a notice with a specific date and we have to override the limit, the new date due is not the date that we picked
    
    To reproduce
    
    1- Log in to the staff interface
         1-1. Make sure you have a ciculation rule that allows you to renew
         1-2. set the AllowRenewalLimitOverride system preference to Allow and SpecifyDueDate to Allow
    2. Check out the item to a Borrower
    5. Access the borrower's account and renew it until the limit is reached and note the due date.
    6. Go to Circulation, click Renew
    7. Enter the item barcode and choose a due date further than the due date from step 5 and submit
    8. Click on Override limit and renew button
         ---> Note that the new date due is not the date that we picked in step 7
    9. Apply the patch
    10. Repeat step 6, 7 snd 8
         ---> Note that the new date due is the date that we picked
    
    Signed-off-by: Anneli Österman <anneli.osterman@koha-suomi.fi>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ccd4738e26ef3c2e40bfa1dc1e74dfdb94a34239
Author: Magnus Enger <magnus@libriotech.no>
Date:   Mon Feb 5 08:12:29 2024 +0000

    Bug 35954: Add --status to koha-plack
    
    This adds a --status switch to the koha-plack command.
    
    To test on ktd:
    - Copy the script to /usr/sbin, so you run the modified script,
      and not the one installed by Koha:
      $ sudo cp debian/scripts/koha-plack /usr/sbin/
    - Stop and start Plack for kohadev like so:
      $ sudo koha-plack --stop kohadev
      $ sudo koha-plack --start kohadev
      And make sure this reports the correct status, both when Plack
      is running and when it is not running:
      $ sudo koha-plack --status kohadev
    - Make sure --status is mentioned here:
      $ sudo koha-plack --help
    - See https://wiki.koha-community.org/wiki/Testing_man_pages for
      details on how to check the manual page for the command
    
    Signed-off-by: Tadeusz Sośnierz <tadeusz@sosnierz.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3b2c2b127032d9b26e49026a240bca3e0c280cf6
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri May 3 17:25:15 2024 +0000

    Bug 22740: DBRev 23.12.00.045
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 38b8d1ae4bace48e6b445229dfacfa37843e3f3c
Author: Jacob O'Mara <jacob.omara@ptfs-europe.com>
Date:   Mon Apr 8 09:50:37 2024 +0100

    Bug 22740: Write unit tests for automatic lost status switching
    
    This patch adds the unit tests for the new system preferences that will
    automatically change an items lost status to an authorised value defined
    in these preferences on payment or write off of outstanding balance.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 31dcca64d50d21f080645cdf21d1ea3efef572db
Author: Jacob O'Mara <jacob.omara@ptfs-europe.com>
Date:   Wed Mar 27 14:58:13 2024 +0000

    Bug 22740: Automatically change lost status when item is paid for
    
    This patch implements two new system preferences, "UpdateItemLostStatusWhenWriteOff" and "UpdateItemLostStatusWhenPaid" that allow you to specify the status to change an item to when the outstanding balance of a lost item is paid or written off. These preferences are tied to the LOST authorised values set.
    
    Test Plan:
     - Set one of the system preference to any of the available values
     - Set an item as lost
     - Make a manual invoice for your desired user and assign it to the barcode of the above item
     - Save and Pay
     - Select Pay/Write Off depending on the system preference you selected above
     - Pay
     - Note that the status of the item has changed to the status you set with the system preference
     - Repeat for all values of both system preferences
     - Check that when the system preference is left blank and no option is chosen, the lost status does not update.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b00001170cf8f5d2554d36ca9435842f57b7e139
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri May 3 15:57:08 2024 +0000

    Bug 25996: Amend system preference description for BorrowerLogs
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1a76cd4ec24f80b7820ea4e707168b752a8e81bd
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 22 08:26:46 2024 -0300

    Bug 25996: (follow-up) Log the entire object on deletion
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 38970ac9d6282c2851055b943e9ec2bf31c928e3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 22 00:07:48 2024 -0300

    Bug 25996: Add restrictions to the log viewer
    
    This patch adds the new log actions, related to restrictions, to the log
    viewer.
    
    To test:
    0. Set BorrowersLog to 'Log'
    1. Pick a patron
    2. Add a restriction and identify it's id, maybe using the DB:
       $ ktd --shell
      k$ koha-mysql kohadev
       > SELECT * FROM borrower_debarments;
    3. Run [1]:
      k$ perl -MKoha::Patron::Debarments \
             -e 'Koha::Patron::Debarments::ModDebarment( { borrower_debarment_id => 195, comment => "potato" } );'
    4. Visit the log viewer.
    => SUCCESS: You can filter on 'Create restriction', 'Modify restriction'
    and 'Delete restriction', things are displayed correctly.
    
    [1] There's the ModDebarment method in the codebase, but I couldn't find
    a way to trigger it for testing, so my last resort was to do it from the
    CLI, manually. The tests on the previous patches cover the method
    anyway.
    
    Sponsored-by: Karlsruhe Institute of Technology (KIT)
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 00ec0035cffadf14357a81ee20a07a1ed3033fa3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 22 01:04:31 2024 -0300

    Bug 25996: Add logging to restrictions actions
    
    This patch adds logging for the following actions:
    
    * CREATE_RESTRICITON
    * MODIFY_RESTRICTION
    * DELETE_RESTRICTION
    
    To test:
    1. Apply the unit tests
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/Patron/Borrower_Debarments.t
    => FAIL: The feature is not implemented! Nothing is logged!
    3. Apply this patch
    4. Repeat 2
    => SUCCESS: Tests pass!
    5. Sign off :-D
    
    Sponsored-by: Karlsruhe Institute of Technology (KIT)
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 96f524060171dad6d0bcaabfc14d452a13e6a693
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 22 01:03:54 2024 -0300

    Bug 25996: Unit tests
    
    Sponsored-by: Karlsruhe Institute of Technology (KIT)
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2b106c1181fd970e9aeef53bf6ab19592f61592c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 22 00:07:30 2024 -0300

    Bug 25996: Make AddDebarment() use Koha::Patron::Restriction
    
    This patch makes the AddDebarment() method use the Koha::Object-based
    class to ease the next steps. The current codebase makes the feature
    fragile otherwise, as adding a new row and then querying for the latest
    row of that kind seems risky,
    
    With this approach the result is the same, but we have the
    Koha::Patron::Restriction object for using it later in logging.
    
    I opted to return 1 as it does now. The whole module deserves to be
    removed in the future but it is out of the scope of this report.
    
    To test:
    1. Run:
       $ ktd --shell
      k$ prove t/db_dependent/Patron/Borrower_Debarments.t
    => SUCCESS: Tests pass
    2. Apply this tiny refactoring patch
    3. Repeat 1
    => SUCCESS: Tests still pass!
    4. Sign off :-D
    
    Sponsored-by: Karlsruhe Institute of Technology (KIT)
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 307acdf96b28c722a0027c1eeadb4c98ab38eeef
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Apr 10 11:56:01 2024 +0000

    Bug 36137: Make update_totalissues cron always skip the holds queue
    
    To test:
    1. Run the update_totalissues cron, the holds queue is updated.
    2. APPLY PATCH, restart services
    3. Run update_totalissues cron again, this time the holds queue should always be skipped.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ec3ee1fd43f2289ca10326f5f67065d6401a4976
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri May 3 14:15:32 2024 +0000

    Bug 36246: Remove space before question mark in confirmation message
    
    This has the benefit of making the messages on 2 separate pages
    consistent so they appear as one string to translate.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit afbb3450e4bd47c8c9e4a93f7f47571ebcd452b9
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 1 14:20:19 2024 +0100

    Bug 36246: (QA follow-up) Add missing filter
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 02df32472209b496a2bfd4a30e43b4cf0ac495ff
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 1 14:19:02 2024 +0100

    Bug 36246: (QA follow-up) New JS should start tidy
    
    Add the `/* keep tidy */` flag so the new file stays tidy
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9bae9af03a23120531a25f9313e8caea010b7f15
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 12 11:50:34 2024 +0000

    Bug 36246: (follow-up) Fix confirm
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit dee0ed4ede04cac2826353a8831c1719479a1415
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 20 10:53:11 2024 +0100

    Bug 36246: Add the confirmation text directly to the attribute
    
    To avoid the eval and have all the values together.
    
    For discussion.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6e05d3edf397a323d0fd439c3a10a637a14b5a37
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Feb 28 09:46:43 2024 -0500

    Bug 36246: Add JS function/include for submitting forms from link data
    
    This patch adds a new js include file form-submit.js which will read data elements from a link
    and use those to submit a form
    
    This patch fixes forms on acqui/invoice.pl as an example
    
    To test:
    1 - Add some invoices for a vendor
    2 - Got to Acquisitions->Invoices
    3 - Actions -> Close - confirm it works
    4 - Got to 'Closed invoices' - reopen
    5 - Go to Details on the invoice
    6 - Add an adjustment
    7 - Delete the adjustment
    8 - Confirm it works
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 915d585b50868c878e492b2ce7d60f92fd3e8e87
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Thu Apr 11 09:21:42 2024 +0000

    Bug 36574: Canceled/invalid ISBN not indexed by ES for MARC 21
    
    For MARC 21, canceled/invalid ISBNs (subfield 020 $z) are not being
    indexed in Elasticsearch (search fields identifier-standard and isbn),
    but it is for UNIMARC (subfield 010 $z).  As a result, a user searching
    for such an ISBN (e.g. with wrong checksum--and therefor put in 020 $z)
    will not find the record in the catalogue.
    
    A new isbn-all Elasticsearch search field 'isbn-all' has been created with
    020az (MARC 21, and 010az for UNIMARC), 010z has been removed from isbn
    search field for UNIMARC, and 020z has been added to identifier-standard
    search field.
    
    Test plan
    =========
    0. Have a test installation with Elasticsearch.
    1. In ktd with its test data, make a biblio search for a cancelled ISBN
       e.g. 9780007269854.  You will get no results.
    2. Apply the patch, reindex with:
       sudo koha-elasticsearch --rebuild -r -b kohadev
    3. Repeat the test. You should get "The ice princess / Camilla Läckberg".
    
    Signed-off-by: Roman Dolny <roman.dolny@jezuici.pl>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 33f595eb593d0416841b03cd7fc4b85de1fdf84f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Feb 7 13:34:20 2024 +0000

    Bug 36003: Add cookie consent buttons to hidden list on print
    
    This patch adds #consentMoreInfo, #cookieConsentFooter and
    .consentAcceptEssential to the hidden fields for OPAC printing.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d8abd8fa14319021c9468348927c0cabe9dc9b07
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri May 3 13:15:27 2024 +0000

    Bug 36120: DBIC schema update
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1b3a7592c86f7c9e5a1367e2c3fe9bff661e6d6e
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri May 3 13:11:23 2024 +0000

    Bug 36120: DBRev 23.12.00.044
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 87807ea5c3cbae5b32305cc556945f64b2d0a9e6
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 1 15:47:47 2024 +0100

    Bug 36120: (QA follow-up) Fix api/v1/bookings.t
    
    We now require pickup_library_id and so need to update the unit
    tests to reflect that for our sample bookings
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 687a8b70b3ac433fdc1f70e5acf62e35ea8c31c6
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 1 15:41:10 2024 +0100

    Bug 36120: (QA follow-up) Fix Circulation.t
    
    We now require pickup_library_id and so need to update the unit tests to
    reflect that for our sample bookings
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 66466e5d8669e00e98ecde507e90f3c1e226ac34
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Apr 29 15:53:01 2024 +0100

    Bug 36120: (QA follow-up) Fix /biblios.t unit test
    
    This patch adds some mock data for pickup_items getting included in the
    pickup locations response.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit faa5f7a7cb68c4196e5b03d07361bd8d8422aef3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Apr 19 16:39:46 2024 +0100

    Bug 36120: Restore edit
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5094258b9c329cf8493e7caca14db255f9202526
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Apr 19 16:20:42 2024 +0100

    Bug 36120: (follow-up) Only display locations for bookable items
    
    This patch updates the pickup locations picker to only include locations
    for items that are bookable.
    
    We should look at doing this on the API level as it highlights some
    issues with re-using item holds pickup location rules.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8fc15869efa278f63d7856a39074211a1a8daaa1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 18 17:56:15 2024 +0100

    Bug 36120: Ensure pickup location and item can be picked in either order
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3d403e48e25f5d8be5edec199a278585f490a5b0
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 21 15:34:59 2024 +0000

    Bug 36120: Account for both pickup_location and date selection in items
    
    This patch ensures we account for both pickup location and date
    selections having taken place before an item selection is pondered. We
    now correctly disable item options given both conditions rather than it
    being a race between the two.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit eef929f3f1145994fe6a9858bdfa68d3fcab1636
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 21 14:13:04 2024 +0000

    Bug 36120: Re-enable 'Any item' selectable
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f88267f66202bedf54cd64f3d7c8bbb7ee1d39f0
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 21 12:52:57 2024 +0000

    Bug 36120: Unit tests for pickup_locations change
    
    This patch adds unit tests for the additional caching of location_items
    in the pickup_locations method of Koha::Biblio.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bcda0b676e56aa1b3565a7f34d91770490c61972
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 21 10:32:32 2024 +0000

    Bug 36120: Add unit test for pickup_library relation accessor
    
    This patch adds a unit test for the newly introduced pickup_library
    accessor added to Koha::Booking
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 83ce6c025432de2392972245bde4eaf7dadfce42
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 21 10:16:28 2024 +0000

    Bug 36120: Ensure pickup_library_id is NOT NULL
    
    This patch updates the database schema to ensure
    bookings.pickup_library_id is NOT NULL
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit db05d2b86038a51baa2b953ce2ba26b33094e208
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 8 16:00:57 2024 +0000

    Bug 36120: Ensure existing bookings are assigned a pickup library
    
    Sponsored-by: Cuyahoga County Public Library
    Signed-off-by: Lisette Scheer <lisette.scheer@bywatersolutions.com>
    Signed-off-by: Kristi Krueger <kkrueger@cuyahogalibrary.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 20ce34336982b6dfbbbbb3d8694993404307d24c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 7 17:34:35 2024 +0000

    Bug 36120: Add pickup library to bookings list table
    
    Sponsored-by: Cuyahoga County Public Library
    Signed-off-by: Lisette Scheer <lisette.scheer@bywatersolutions.com>
    Signed-off-by: Kristi Krueger <kkrueger@cuyahogalibrary.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9eb4a39c05d7af3eef7b5f02a93d96b6dbd4689a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 7 13:18:19 2024 +0000

    Bug 36120: Add pickup locations to place bookings modal
    
    This patch adds a call to /biblios/biblionumber/pickup_locations to
    fetch valid pickup locations for the biblio.
    
    Upon selecting a pickup location we adapt the item select to only allow
    for selecting items returned as valid for pickup at the selected
    location.
    
    Sponsored-by: Cuyahoga County Public Library
    Signed-off-by: Lisette Scheer <lisette.scheer@bywatersolutions.com>
    Signed-off-by: Kristi Krueger <kkrueger@cuyahogalibrary.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit dadabbd92403af8128c6d538679f05810cda1ab0
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 7 17:12:51 2024 +0000

    Bug 36120: Add pickup_library support to bookings API
    
    Sponsored-by: Cuyahoga County Public Library
    Signed-off-by: Lisette Scheer <lisette.scheer@bywatersolutions.com>
    Signed-off-by: Kristi Krueger <kkrueger@cuyahogalibrary.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b3fa2506cd30edb5c1fe5e5ea4bd0627602e27b5
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 7 15:30:26 2024 +0000

    Bug 36120: Add pickup_items to the pickup_locations response
    
    This patch adds pickup_items as a list of itemnumbers that can be picked
    from the library should it be selected as a pickup location.
    
    Sponsored-by: Cuyahoga County Public Library
    Signed-off-by: Lisette Scheer <lisette.scheer@bywatersolutions.com>
    Signed-off-by: Kristi Krueger <kkrueger@cuyahogalibrary.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e33be427bc852f0c519c620e5f50625e2062db15
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 7 17:06:52 2024 +0000

    Bug 36120: Add pickup_library_id to bookings table
    
    Sponsored-by: Cuyahoga County Public Library
    Signed-off-by: Lisette Scheer <lisette.scheer@bywatersolutions.com>
    Signed-off-by: Kristi Krueger <kkrueger@cuyahogalibrary.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f5e9f9634fd0d3ea1d06ca24141cb10660a2cf66
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Wed Apr 10 14:50:04 2024 +0300

    Bug 36567: Get rid of Datetime warning in Circulation.t and dateexpiry.t
    
    Running either t/db_dependent/Circulation.t or t/db_dependent/Circulation/dateexpiry.t
    cause following error to be dispalyed:
    
    You are creating a DateTime object with a far future year (9999) and a time
    zone (Europe/Helsinki). If the time zone you specified has future DST changes
    this will be very slow.
    
    Smallest allowed value is 4999, so we need to use that rather than 9999 in tests.
    
    To test prove t/db_dependent/Circulation.t and t/db_dependent/Circulation/dateexpiry.t.
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f9effbfdb4a1221da4f05683a57946de01d0aa25
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Apr 22 18:12:47 2024 +0000

    Bug 36673: Filter used categories and item types to current branch
    
    To test:
    1 - Define some circulation rules for default and specific branches
    2 - Apply patch
    3 - Confirm rules display as before
    
    PA amended:
    - bug->Bug in commit title
    - squashed tidy
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 675c8263b707c8e1987ac6084272b355deb1b05c
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Apr 4 16:26:00 2024 +0200

    Bug 36526: Remove circular dependency from Koha::Objects
    
    Koha::Objects depends on Koha::DateUtils, which depends on C4::Context,
    which depends on Koha::Config::SysPrefs, which depends on Koha::Objects
    
    Apart from the circular dependency, the dependency on C4::Context alone
    is problematic as it loads a bunch of modules that are not needed at all
    in Koha::Objects (YAML::XS and ZOOM for instance).
    As Koha::Objects is used as a base for a lot of modules, we should take
    care to only load the minimum required.
    
    This patch removes uses of Koha::DateUtils from Koha::Objects.
    It was only used in Koha::Objects::filter_by_last_update
    
    filter_by_last_update now requires that the 'from' and 'to' parameters
    must be DateTime objects. Previously it would also allow date and
    datetime strings. This possibility was only used in two places:
    * misc/cronjobs/cleanup_database.pl
    * tools/cleanborrowers.pl
    
    Now they call dt_from_string first and pass a DateTime object to
    filter_by_last_update
    
    Test plan:
    1. Run `perl -cw Koha/Objects.pm`. It should only say:
       "Koha/Objects.pm syntax OK" without warnings
    2. Run `prove t/db_dependent/Koha/Objects.t`
    3. Verify that misc/cronjobs/cleanup_database.pl works as before,
       especially with the options --pseudo-transactions,
       --pseudo-transactions-from and --pseudo-transactions-to
    4. Go to Tools » Batch patron deletion and anonymization, check "Verify
       you want to anonymize patron checkout history" and enter a date in
       the text input below. Then click Next and verify that the correct
       count of borrowers is shown. Click on the "Finish" button and verify
       that the circulation history has been correctly anonymized
    
    See also bug 36432
    
    Signed-off-by: Tadeusz Sośnierz <tadeusz@sosnierz.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ce4ab12a3cac55db65839dadacd84ada27db2091
Author: Shi Yao Wang <shi-yao.wang@inlibro.com>
Date:   Tue Apr 30 15:02:50 2024 -0400

    Bug 36738: Don't copy date when repeating date fields
    
    Make the repeatable date patron attribute empty when repeating the
    inputs to avoid date formatting problems (and keeping past date value
    after repeating is not something we want)
    
    Test plan:
    1- create a patron attribute type with is a date and repeatable checked
    (administration -> patron attribute types)
    2- add a couple of patron attribute of type date, notice the repeated
    inputs contain previous data
    3- Apply the patch
    4- redo step 2 and notice the repeated inputs are empty
    
    Follow up for bug 32610 (https://bugs.koha-community.org/bugzilla3/show_bug.cgi?id=32610)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 834fc10650779c71b6608ab01ef0e54bd9dd4746
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 16 18:22:41 2024 +0100

    Bug 36612: Add public_read_list to Koha::Ticket
    
    Without the public_read_list to define which fields should be accessible
    from the public endpoints we will always return a 500 from the API on
    otherwise successfull additions of tickets via the OPAC.
    
    Test plan
    1) Enable OPACCatalogConcerns
    2) Login to the OPAC and "Report a concern"
    3) Note the error message in the UI "There was an error when submitting
       your concern, please contact a librarian."
    4) Confirm that the concern is actually created regardless
    5) Apply the patch here and restart plack
    6) Submit another 'Report a concern' and now note the success message
       "Your concern was successfully submitted."
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit af0422ccabb21521c8aff14a10a874f100ee1f0a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 16 18:49:19 2024 +0100

    Bug 36612: Unit test for public ticket add
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 05a979a8ae91748ade65ee47e0e8ba3ad18797c8
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Thu May 2 14:31:05 2024 +0000

    Bug 25159: DBIC schema update
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6fecc2a9f31389a8c1dd584dc744a06ea3376b8f
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Thu May 2 14:26:08 2024 +0000

    Bug 25159: DBRev 23.12.00.043
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 781dd75a5d32de96ea01ded12c07f2f4e1bdc6c8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 25 12:53:10 2024 +0100

    Bug 25159: (QA follow-up) Tidy changes
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 47211deee16ba3f9827926f3d76153a1fa3959ec
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Dec 12 12:02:53 2023 -0500

    Bug 25159: (QA follow-up) Allow passing of 'original' as hashref or Koha::Object
    
    Signed-off-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4576eb73da90f22b16398ab758608ced6013db1a
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jul 18 09:07:59 2023 -0400

    Bug 25159: Implement diffs in action logs for holds
    
    Test Plan:
    1) Apply this patch
    2) Run updatedatabase.pl
    3) Restart all the things!
    4) Enable HoldsLog
    5) Perform various hold related actions
    6) Observe the diff column is populated by a JSON string
       of the diff format generated by Struct::Diff
    
    Signed-off-by: Kyle Hall <kyle@bywatersolutions.com>
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 97c2110fa636468c770102757590f6922acd2021
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jul 18 09:06:36 2023 -0400

    Bug 25159: Add ability to specify a pre-modified version of action log data and store as diff
    
    Test Plan:
    1) sudo cpanm Struct::Diff
    2) prove t/db_dependent/Log.t
    
    Signed-off-by: Kyle Hall <kyle@bywatersolutions.com>
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c18573d7a4f591d261acd3ab0f2deba67b6a82a3
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jul 18 07:00:50 2023 -0400

    Bug 25159: DB Update
    
    Signed-off-by: Kyle Hall <kyle@bywatersolutions.com>
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7904c1b5d0dfd376243add11c6611af8d1069b66
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Apr 16 11:22:38 2024 -0300

    Bug 35681: (follow-up) Pass filehandle in skeleton.pl
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e3f4af26268ffb4857748cdd319893be53c3886e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 16 12:22:42 2024 +0100

    Bug 35681: Use Koha::Installer::Output in template
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 82e0793c575ce3702ac953961215145d06cc2bc1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 16 12:06:54 2024 +0100

    Bug 35681: Add Koha::Installer::Output
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1ff0a5dfb4b5b8875ae7a357a3c560003ccce48b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jan 10 14:22:13 2024 +0000

    Bug 35681: Add to template
    
    This patch adds colors to the skeleton atomic update to hint at their
    use
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 38613bbf3be7c9863ff3692f986c26c43b3754a1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jan 10 10:51:27 2024 +0000

    Bug 35681: Use ::Bootstrap version of FromANSI
    
    With the next iteration of HTML::FromANSI::Tiny we can add our own subclass
    to map ANSI strings to Bootstrap classes.
    
    This patch adds a local lib HTML::FromANSI::Tiny::Bootstrap module to
    do said mapping and then uses it in the installer.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 99e9c85fc01679e78800d7bdb463d7568bc3c38d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jan 3 09:38:34 2024 +0000

    Bug 35681: Add new perl dependancy
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0612c0402d3ce99ff29bcc6d36ff52bb0ab33aa8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jan 2 15:56:12 2024 +0000

    Bug 35681: Allow for ANSI color in database updates
    
    This patch adds support for colored output in database updates.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3929d640845ea69ddd78a20793aab678cec1c9e1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu May 2 15:09:44 2024 +0100

    Bug 36756: Don't require status change on ticket updates
    
    Follow-up for bug 35628, we lost a class during rebases that meant the
    'Update' split button when status's are enabled no longer submitted
    unless you explicitly selected a new status each time.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 85dbb04e16a9652c1b7003eacec11a90cb0a23c0
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Thu May 2 14:18:21 2024 +0000

    Update docs/contributors.yaml
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4707233908f7031e82c33861313b2b87e5e60744
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu May 2 11:42:41 2024 +0000

    Bug 35993: (follow-up) Another fix for MarcOverlayRules.t
    
    We should not assume comparing within the same second. Now just
    remove 005 before comparing.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bef42e54dba77b6deecc8875579deeb0db364015
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Thu May 2 12:58:30 2024 +0000

    Bug 35657: (follow-up) Update label to the more explicit "Notify reporter"
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 07db73e1fb5bf810d2ab5a9366ddd03ac5cefdab
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu May 2 13:17:21 2024 +0100

    Bug 35657: (follow-up) Placeholders should be translatable
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 62a322f7976312886cbd57d75c4fbfeccdbf86c8
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Thu May 2 11:39:50 2024 +0000

    Bug 35657: DBIC schema update
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 21b8f425f977b711578b979100ff7159b92c67f5
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Thu May 2 11:34:31 2024 +0000

    Bug 35657: DBRev 23.12.00.042
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 378ea8db57afc0805704b6a7ef4931c500799d2d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 30 13:58:38 2024 +0100

    Bug 35657: (follow-up) Add missing DB update
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3ba42ec1631749f2e82a2be07c8e34916a10b259
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Apr 26 17:01:43 2024 +0100

    Bug 35657: Unit test for addition to tickets endpoint
    
    This patch adds a unit test for the additional option of now setting the
    assignee from the tickets update endpoint.
    
    Signed-off-by: Paul Derscheid <paulderscheid@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 95ab5b74036de0bfc91a96aa67ab1ca865030136
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Apr 26 14:48:30 2024 +0100

    Bug 35657: Unit tests for ticket_update api addition
    
    This patch adds unit tests for the addition of assignee handling in the
    ticket update endpoint
    
    Signed-off-by: Paul Derscheid <paulderscheid@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9bbdbb50e0eca0827936491ccda53aa129ea5722
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Apr 26 14:24:08 2024 +0100

    Bug 35657: Unit tests for relation accessor additions
    
    This patch adds the unit tests for the new 'assignee' relation accessors
    added to Koha::Ticket and Koha::Ticket::Update classes.
    
    Signed-off-by: Paul Derscheid <paulderscheid@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e70f9979c54b3de9ce9172accbad5ac74dac1e0a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Dec 29 11:53:25 2023 +0000

    Bug 35657: Add option to set assignee during update
    
    This patch exposes the UI to allow setting assignee from the ticket
    update modal.
    
    Test plan
    1) Apply the patches and run the database updates
    2) Enable catalog concerns - `CatalogConcerns` or `OPACCatalogConcerns`
    3) Submit a catalog concern via the OPAC or Staff client biblio page
    4) Navigate to the concerns management page 'Cataloging > Catalog
       concerns'
    5) Note there is no assignee displayed in the status field for your new
       concern.
    6) Click the concern to view it's details
    7) Note that in the modal there is now a new 'Change assignee' option
    8) Use this new option to search for and assign a librarian to the
       concern.
    9) Submit the update
    10) Your assignee should now appear in the 'status' data field in the
        table
    11) Clicking through to details again, you should see when the assignee
        was set and should also be able to re-assign it
    
    Signed-off-by: Paul Derscheid <paulderscheid@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8b08ec8b3ffb9eba6b0bd976347b85af52c33881
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Dec 28 15:03:36 2023 +0000

    Bug 35657: Add support for assignee_id to ticket_updates endpoint
    
    This patch adds support for cross-synced ticket.assignee_id updates.
    
    The API allows you to set assignee directly on a ticket or via a
    ticket_update. In both cases we store a ticket_update with the fine
    details of when and who set the assigee.
    
    Signed-off-by: Paul Derscheid <paulderscheid@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit aaa554b70fea81a8c6e8d3eff77f389b5bf9a83e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Dec 28 15:02:36 2023 +0000

    Bug 35657: Add assignee_id to tickets and ticket_updates
    
    This patch updates the tickets and ticket_updates tables to include a
    assignee_id.
    
    Signed-off-by: Paul Derscheid <paulderscheid@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f862f78588b032c6d59eae3eb4b0d30ae33ac787
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 1 09:16:21 2024 +0100

    Bug 36546: (follow-up) Add fallback to unbundled spec
    
    Some developers are running without ktd still and as such may not want
    to install the node modules required to bundle the specification.
    
    This patch adds a fallback to the unbundled yaml files when the
    bundle.json file isn't found.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 24abc7c9973ce4b2b91a4b53375ef233faf59304
Author: Matthias Le Gac <matthias.le-gac@inlibro.com>
Date:   Fri Apr 5 10:12:37 2024 -0400

    Bug 36122: Update unit test
    
    Signed-off-by: Roman Dolny <roman.dolny@jezuici.pl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 69d87031514bb108fb33c4791d6f5a1ff0c0d544
Author: Matthias Le Gac <matthias.le-gac@inlibro.com>
Date:   Fri Mar 8 16:44:51 2024 -0500

    Bug 36122: Add unit test
    
    Signed-off-by: Roman Dolny <roman.dolny@jezuici.pl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4ab5e6d29d6a67320a2931e4b9f667879aaadb3d
Author: Matthias Le Gac <matthias.le-gac@inlibro.com>
Date:   Thu Mar 7 16:55:37 2024 -0500

    Bug 36122: NEW_SUGGESTION is sent for every modification to the suggestion
    
    Signed-off-by: Roman Dolny <roman.dolny@jezuici.pl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a16d1807aac1bd2cb6dda4f29ebe12e02fe41a15
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 1 10:33:43 2024 +0000

    Bug 36555: (QA follow-up) Tidy
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 04b15ff5a9a18c0499d63850635dd206a6795e19
Author: Andrew Fuerste Henry <andrewfh@dubcolib.org>
Date:   Tue Apr 9 14:51:17 2024 +0000

    Bug 36555: Add report_id to download file name
    
    To test:
    - apply patch, restart all
    - run a report
    - export results
    - confirm file name is the report ID, followed by report name
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 54d884819121ecb18930bbf250dfbb21fc7ecb93
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Sun Mar 24 16:07:16 2024 -0400

    Bug 35559: Correctly parse previous flatpickr date
    
    The Flatpickr configuration for futuredate and futuredateinclusive is
    meant to allow the preexisting date, even if it is in the past, to avoid
    data loss. As of Bug 30718 - Use flatpickr's alt option everywhere,
    that incoming date is in yyyy-mm-dd format, not the configured
    human-readable format, and needs to be parsed accordingly.
    
    To test:
    1. Place 2 holds on the same bib, both with an expiration date set
    2. Set the expiration date for one of the holds to a date in the past
       (e.g., in Koha Testing Docker, use the commands:
       ktd --shell
       koha-mysql kohadev
       to access the database directly)
    3. Reload the holds tab for that bib
    --> Note that the future expiration date will be editable, and the past
        expiration date will not be editable
    4. In a new tab, go to Administration > Patron Categories
    5. Edit one patron category to have an enrolment period date in the future
    6. Edit another patron category to have an enrolment period date in the
       past (e.g. by accessing the database directly, as above)
    7. Reload the Edit pages for each of the above categories (in new tabs)
    --> Note that the future enrolment period date will be retained in the
        date field, but the past enrolment period date will be blanked out
    8. Apply this patchset
    9. Refresh the holds tab from step 3
    --> Note that both expiration dates are now editable
    10. Refresh the 2 patron category tabs from step 7
    --> Note that both enrolment dates are now retained correctly
    11. Open the date picker on one of the date fields that has a past date
    --> Note that other past dates, besides the existing date, are prevented
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 33465f2f7ae0d00775a207b793037fc15b89177d
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Sun Mar 24 15:58:47 2024 -0400

    Bug 35559: Revert changes from bug 34634
    
    This reverts commit fad3af0005c3a4234634ee477fafc85902540843
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e40ec97c9011b7c341ff42431f99ed5225101cd7
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Thu May 2 10:46:19 2024 +0000

    Bug 15565: DBRev 23.12.00.041
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2d1fc5d9df1c97972778d55cf77249c2d21bf33e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 1 15:29:34 2024 +0000

    Bug 15565: (QA follow-up) Add atomic update
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1776a52ee6ca4e38af703afd85caec5fd52f30d8
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue Feb 13 00:44:51 2024 +0000

    Bug 15565: Add 'DisplayMultiItemHolds' system preference to toggle display of multi item holds
    
    These patches allow the display of checkboxes instead of radio buttons for placing specific
    item holds in the OPAC and staff interface. This display is controlled by the system preference
    'DisplayMultiItemHolds'. When disabled, the hold display is the same as in the past. When enabled,
    the user can select multiple items to place holds on at the same time.
    
    If there is an error placing one or more holds, an error will display on the following screen.
    
    Test plan:
    0. Apply the patches and koha-plack --reload kohadev
    1. Enable 'DisplayMultiItemHolds' syspref
    2. In staff interface, go to a record with multiple holdable items
    3. Check the boxes next to 2+ items and click the button to place the holds
    4. Note that the holds are all placed (unless there is a failure)
    5. Cancel the holds, and try again (but this time make Holds per record (count) only
    1 in the circ rules)
    6. Note that one of the holds is placed, but the others are not and an error message
    is displayed saying that one or more holds could not be placed because the holds per
    record was exceeded
    
    7. Perform the same above procedure on the OPAC
    8. If DisplayMultiPlaceHold is enabled, you can test placing multiple specific item holds
    across multiple bibs in the OPAC via the search results
    9. If EnableItemGroups and EnableItemGroupHolds is enabled, you can test that you can
    either place item group holds or specific item holds. Toggling the checkboxes in the
    staff interface will uncheck the item group hold radio button.
    
    Signed-off-by: Lisette Scheer <lisette@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 019709fc8162840db141fe957de22c45c7550919
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue Feb 13 00:26:42 2024 +0000

    Bug 15565: Place multiple holds on one or more records in OPAC
    
    Signed-off-by: Lisette Scheer <lisette@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 29ae8a7a77a5b23753c15cec1b5a7d651e13876b
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon Feb 12 23:20:35 2024 +0000

    Bug 15565: Tidy reserve/placerequest.pl
    
    Signed-off-by: Lisette Scheer <lisette@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1fc3bf1e348bca6f72b2ed6cf529357813ee966f
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon Feb 12 23:17:05 2024 +0000

    Bug 15565: Place multiple holds on one record on staff interface
    
    Signed-off-by: Lisette Scheer <lisette@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1ff3d65c7073e5d93502d329b917d886a3665e0b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 30 16:13:25 2024 +0100

    Bug 35977: (follow-up) Cleaner working approach
    
    This patch removes the Date_from_syspref recently added and replaces it
    with the correct parseDate call as per bug 35559. We also clean up the
    code around setting the input value in the first place and use iso which
    is what the rest of flatpickr expects and now is handled correctly in
    futuredate pickers.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d4bea3f9c84d97225efc0e07d7f6b9390d86d0d8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Apr 17 12:33:24 2024 +0200

    Bug 36614: Restore 'phone' on the main patron search
    
    It disappeared at some point (history is tricky here, I didn't manage to
    track down what happened, it's a mess)
    
    This patch adds a phone column after the "name and address" one. It's
    hidden by default.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7c20263fd0930997a8da70b8798e0ada623ac2bc
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 23 18:57:54 2024 +0000

    Bug 36678: Index fields with non-filing characters in both versions
    
    Currently we only remove non-filing characters for sort fields, however, this can make searching difficult.
    This patch adds the filing form to the index as well to aid in searching.
    
    To test:
     0 - Setup Koha with Elasticsearch
     1 - Import the sample record on this report: "L'amour de l'art"
     2 - Search for "amour de l'art" - no results
     3 - Apply patch
     4 - Reindex
     5 - Search for "amour de l'art" - result!
     6 - Search for "title:amour de l'art" - result!
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 93a647fa90b13bfc0bc13eb71c445b37498647e3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 23 18:57:45 2024 +0000

    Bug 36678: Adjust unit tests
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 67abe6410631af52184c75b08742c6c197ef853b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 1 13:48:35 2024 +0100

    Bug 36481: (QA follow-up) Rename branch_default to library_default
    
    Use agreed terminology
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 451806c167508b17a756afb8954cf7c57ab5bdb1
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon Apr 29 01:36:02 2024 +0000

    Bug 36700: Fix CSRF-TOKEN header in image upload
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 9dcac6dfe926276caa92a6dacff521bf94da4fc8
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon Apr 29 01:23:17 2024 +0000

    Bug 36700: Update svc to use CSRF-TOKEN
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit e4bb59683f823c58df6574043d9e2cf0b8aacb02
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Apr 26 08:32:52 2024 +0000

    Bug 36700: Fix underscore in CSRF header
    
    Also change the cache key in template plugin. And the X- header
    that had an underscore in svc script.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 643f139530d8cabbc88fa837a07dc0921f3bae6a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 1 07:30:42 2024 +0100

    Bug 29393: (QA follow-up) Add key to Permissions test
    
    We missed adding the new superlibrarian key to the Permissions test
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit f58dab30a2853558bccca8fd5d33a8acb10f7936
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Apr 30 15:54:54 2024 -0300

    Bug 32610: (follow-up) Adjust TestBuilder
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6033bfe77dd2b86bf43ccdc81540130b00771150
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Apr 30 15:07:12 2024 -0300

    Bug 36546: (QA follow-up) Add bundle spec to .gitignore
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e4e7d95a287425bdfce3f79a363c4696446d85b9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Apr 30 10:36:31 2024 +0000

    Bug 36545: (follow-up) Remove closeOnSelect option
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4369a65bd5093847f2d598d8ce7cf63b27386299
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Apr 12 17:46:43 2024 +0000

    Bug 36545: (follow-up) Style tweaks for Select2 multiple fields
    
    This patch does some fine-tuning of Select2 style on fields which accept
    multiple selections. The patch also changes the way the form rows are
    displayed on this page. I thought that the Select2 fields should be
    wider to accpet multiple selections without the container wrapping onto
    another line.
    
    The patch also sets the Select2 "closeOnSelect" option to false on this
    page because I think that makes more sense in a situation where multiple
    selections might be made.
    
    To test, apply the patch and clear your browser cache.
    
    - Go to item search in the staff client
    - Confirm that the form looks good and adjusts well to various browser
      widths.
    - Make some selections to confirm that the style of selections looks
      good and that the dropdown stays open as you make multiple selections.
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b7fa695f68c85004ed86ce3f8baed4007e687dc0
Author: Michael Skarupianski <michael.skarupianski@gmail.com>
Date:   Tue Apr 9 14:00:15 2024 +0000

    Bug 36545: Use select2 in item search
    
    This patch modifies the multi-select fields in the item search to use
    the select2 framework.
    
    To test:
    1. Apply patch
    2. Go to staff interface -> "Item search"
    3. Check item search form and search for
          - Home library
          - Current library
          - Shelving location
          - Item type
          - Collection
          - Status
          - Lost
          - Withdrawn
          - Damaged
    4. Search with multiple variations (nothing selected, only one value,
       multiple values, ...) If no value is selected this means that "All"
       values are searched
    5. Check that the search is working well
    
    Sponsored-by: Karlsruhe Institute of Technology (KIT)
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 822f19d6a4e7e7dff714e9b4fc2d141cf0bcc619
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Apr 30 13:45:12 2024 +0000

    Bug 32610: DBIC schema update
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3da65483f351fbadb028795e2337255990827b0b
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Apr 30 13:42:25 2024 +0000

    Bug 32610: DBRev 23.12.00.040
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ae542fb8217b2435f59fb7bcca75f4ac06d9d180
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 30 12:49:33 2024 +0100

    Bug 32610: (QA follow-up) Tidy Koha::Patron::Attribute
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 941e743df937c9538001a31052ff51508a09e105
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 30 12:48:47 2024 +0100

    Bug 32610: (QA follow-up) Tidy exceptions file
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1045e717124f5e5c8f72166a5e3de717766f92cb
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 30 12:40:14 2024 +0100

    Bug 32610: (QA follow-up) Fix unit tests
    
    With the introduction of data type checking based on the is_date flag we
    need to update the tests to ensure we're setting the attribute types
    consistently to not date when we're testing for other flags.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 62a7274766b912359b270e1e2fe6214aec89fdc2
Author: Shi Yao Wang <shi-yao.wang@inlibro.com>
Date:   Mon Apr 29 12:26:06 2024 -0400

    Bug 32610: make date attributes repeatable
    
    Test plan:
    1- create a patron attribute type with is a date and repeatable checked
    (administration -> patron attribute types)
    2- add a couple of patron attribute of type date
    3- Save
    4- Edit to see if everything has been stored correctly
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6603f129ee237ec3eb70f2feb604d416258646cc
Author: Shi Yao Wang <shi-yao.wang@inlibro.com>
Date:   Mon Apr 29 10:10:46 2024 -0400

    Bug 32610: Patron attribute is_date error handling and tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 21d47773cb9204dba267e6a595394bafc63c62fa
Author: Shi Yao Wang <shi-yao.wang@inlibro.com>
Date:   Wed Oct 25 15:06:33 2023 -0400

    Bug 32610: Remove data-date_to and tweak comment
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 799a74364d0de429fbf3f2e13e80af53ebd39104
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Mar 18 10:54:14 2023 +0000

    Bug 32610: Add date extended patron attribute handling to overdues report
    
    This makes sure that the overdues report manages filters for
    extended patron attributes of the type date correctly.
    
    To test:
    * Make sure you have at least one PA marked as 'searchable'
    * Make sure your patron has at east one checked out item
    * Go to circulation > overdues
    * If you have no overdue items, check "Show any items currently checked out:"
    * Verify the list of checkouts displays
    * Verify the PA filter option displays with the calendar widget
    * Limit to the date in your patron's record - list remains
    * Limit to any other date - list empties
    
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0615bd757c5a88e5abd2980908a7cd41e06c23de
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Mar 18 10:19:42 2023 +0000

    Bug 32610: Add date extended patron attributes to the OPAC
    
    This makes sure that the attributes are handled correctly
    when displayed and edited in the OPAC during address changes
    or self registration.
    
    To test:
      * You will need to test different configuration options for
        extended patron attributes (PA) in combination with the date option:
        * PA displays in OPAC, but is not editable
          * The date will show nicely formatted on the personal details tab.
        * PA displays and is editable in the OPAC
          * The date can be edited using the calendar widget
        * PA displays, is editabe and mandatory
          * The date is marked as required and you can't save without
            it being set.
      * Test the form behaves correctly when requesting changes for an
        existing patron account and when self registering.
    
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e22e0e09dd9a1e3aad3fb2a8e3d93459cacac597
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Mar 18 10:13:09 2023 +0000

    Bug 32610: Add date extended patron attributes to patron module
    
    This makes the necessary changes in the patron module of
    the staff interface, so the new patron attribute appers and
    behaves correctly when editing a patron record.
    
    To test:
    * You will need to test different configuration options for
      extended patron attributes (PA) in combination with the date option:
      * PA is a date and not mandatory
        * Patron form should have the calendar widget to let you set the date.
      * PA is a date and mandatory
        * Patron form shoudl have calendar widget and check that the date is
          set for allowing you to save the record.
      * PA is a date and unique
        * For this set the date in one patron record and try to
          set the same date in another. You should not be able to save.
      * PA displays in brief patron information
        * Make sure the date displays on the left formatted correctly
      * When the date PAs are saved, they should display nicely formatted
        on the details tab.
    
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ff306da736467c609e19a9d21bcb6d3f23fda1db
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Mar 18 10:05:32 2023 +0000

    Bug 32610: Add date option to extended patron attributes administration page
    
    With this page it will be possible to configure patron attributes
    to be a date.
    
    To test:
    * Go to administration > patron attribute types
    * Add a new patron attribute of type date
      * Dates cannot be repeatable or linked to an AV category, so:
      * Verify, if you check repeatable, date is disabled
      * Verify, if you select an AV category, date disabled
      * Verify, if you check date, AV category and repeatable are disabled
    * Save the new patron attribute
    * Edit the patron attribute
      * Verify all settings have been kept/stored correctly
    
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4d8228c8fe15a479d81708df0c82eb163e163785
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Mar 18 00:08:28 2023 +0000

    Bug 32610: Add borrower_attribute_types.is_date to the database
    
    * Change to kohastructure.sql for new installations
    * Atomic database update to add the column for updating
      installations
    
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1cadd39cd89dc2091d688e6c3ad49b5b02a2eefd
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Apr 30 12:12:12 2024 +0000

    Bug 18360: (follow-up) Fix for CSRF
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2891b0d5e62d3638cb1cafde2a1af90a21bcf23e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Feb 20 12:52:43 2024 +0000

    Bug 18360: Allow to delete a cancelled order from open basket
    
    Doing this under flag of order_manage and not on the higher level
    of baskets.
    
    Starting here with a single order delete for cancelled lines. So
    deleting an open order line requires cancelling it first. Can be
    extended later if needed.
    
    Test plan:
    Pick an open basket with cancelled lines.
    Try to delete a few lines.
    Test that you cannot do this on an closed basket. (Bonus: manipulate
    URL with basketno, ordernumber and op=cud-delete-order.)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 87b921726ac54a8de6a6176361b282bd469bee51
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Apr 30 13:35:46 2024 +0000

    Bug 36002: DBIC schema update
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7edc3652f053af0d61f0ba2c01369b65af111b6d
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Apr 30 13:32:56 2024 +0000

    Bug 36002: DBRev 23.12.00.039
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 52c6177ed903ce42e530e2daf46df513db63b5af
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Apr 30 11:41:55 2024 +0000

    Bug 36002: (follow-up) Save purchaseordernumbers from aqorders
    
    We copy them here to another (temporary) table.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1014bd131e47bf4b38e310ac51d5d233ec5e08c5
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Feb 6 13:47:25 2024 +0000

    Bug 36002: Remove last references to purchaseordernumber
    
    Test plan:
    Git grep for it. Ignore update22to30.pl and atomicupdate.
    Verify that you can still create/update/delete an acq order.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 34e27c191bdbc8cf2f1c18c4e247fcafd6e4f497
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Feb 6 13:42:34 2024 +0000

    Bug 36002: Remove unused subroutine GetParcels
    
    That did refer to our aqorders.purchaseordernumber..
    
    Test plan:
    Git grep for GetParcels.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1baa0c2876b7c43c83a039e6a2eb2d2b46f4cbca
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Feb 6 13:32:28 2024 +0000

    Bug 36002: Database revision for aqorders.purchaseordernumber
    
    Test plan:
    Run dbrev. Check if field is no longer there.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c50bb140a872e67e07426fc3fc20bceb88c7d1e3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Apr 24 16:39:52 2024 +0100

    Bug 33237: Move and simplify language selection logic
    
    This patch moves the language selection into GetPreparedLetter, drops
    the interface check step and ensures the default template always uses
    the default include language as per the OPACLanguages settings.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 25d64cc6b2bdc60c89915e7d47bae6ef15fa8314
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Apr 24 16:38:40 2024 +0100

    Bug 33237: Rearrange unit tests and ensure consistency
    
    This patch re-arranges the unit tests and sets them to ensure we
    consistently return the notice and notice includes in the same language.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit dc554790439658e5a7b5e1bda62a8d0aa9e2dc3a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Apr 24 14:44:05 2024 +0100

    Bug 33237: Add display of which language default language is expected
    
    This patch adds the display of 'Default language' to the 'Default'
    language in the notices editor tool.
    
    This is so that librarians know which language they are expected to be
    writing the notice in so we can remain consistent in both template and
    include language used.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a773770f738fe1b23d6c5b7cbafade636000374f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 23 13:42:46 2024 +0100

    Bug 33237: (QA follow-up) Clarify tests and Mock
    
    This patch tries to clarify the tests a little and expand their
    coverage whilst also adding some defualt translated includes to the test
    area and mocking the config to allow the tests to run without installing
    translations.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 45e4d9a04aaddc24ae625246950cb0b8d886b51b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 23 13:42:08 2024 +0100

    Bug 33237: (follow-up) Restore final fallback
    
    This restores the final fallback to 'en' as mentioned by Jonathan
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f6c7bf1b91db5b8c896abea608490aba9b80f602
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Mon Apr 8 16:43:06 2024 +0000

    Bug 33237: (follow-up) Unit tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ef558f072f95ed6bfa05fe132da5503f8d402dbd
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 26 17:54:19 2024 +0000

    Bug 33237: (follow-up) Tidy
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4f7ae9c1c4a4158976749b97a515731778708479
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Mon Mar 27 21:05:29 2023 +0000

    Bug 33237: If TranslateNotices is off, use the interface language includes in slips
    
    This patch set the language used in slips folloinw this logic:
       --> uses patron's preferred language
       --> if patron's preferred language is 'default', use the interface language
       --> if there is no interface (for overdue_notices for example), use the first language in 'language' system preference
    
    To Test:
    1. Install the other language (i used fr-CA here)
         1.1.
    
         gulp po:update fr-CA
    
         ./misc/translator/translate install fr-CA
    
         1.2. In Administration > Global system preferences, search for language and check the added language
    
    2. Create a manual invoice in a patron's account and pay it
    
    3. From the Transactions tab, click 'Print' next to the payment line
       --> On the printed slip, there's the word 'Payment' in English (OK)
    
    4. Switch interface to other language
    
    5. Redo step 3
       --> On the printed slip, the word 'Payment' is still in English (not ok)
    
    6. In Administration > Global system preferences, enable TranslateNotices
    
    7. Go to Tools > Notices and slips > ACCOUNT_CREDIT and copy the content of the letter into all the languages
    
    8. Redo step 3 (you should still be in the other language interface)
       --> On the printed slip, the word 'Payment' is still in English (not ok)
    
    9. Edit the patron's account and change the preferred language to the other language
    
    10. Redo step 3
       --> On the printed slip, the word 'Payment' is in the other language (Paiement) (OK)
    
    11. Apply the patch
    
    12. Reset config
        12.1. Edit the patron's account and change back the preferred language to 'default'
        12.2. In Administration > Global system preferences, disable TranslateNotices
    
    13. Redo step 3 (you should still be in the other language interface)
       --> On the printed slip, the word 'Payment' is in the other language (Paiement)
    
    14. Switch interface to the english language
    
    15. Redo step 3
       --> On the printed slip, the word 'Payment' is in English
    
    16. In Administration > Global system preferences, enable TranslateNotices
    
    17. Edit the patron's account and change the preferred language to the other language
    
    18. Redo step 3
       --> On the printed slip, the word 'Payment' is in the other language (Paiement)
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fdeaaac81dd027272233865964455a695c0fdfdd
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon Apr 29 23:43:40 2024 +0000

    Bug 36546: Deploy swagger_bundle.json via make
    
    To test:
    0. Apply patch
    1a. perl Makefile.PL
    1b. Choose "single" Installation mode
    1c. Specify /opt/koha directory
    2. make
    2b. ls blib/API_CGI_DIR/v1/swagger/swagger_bundle.json
    3. Ensure you're running as root or make koha user own /opt
    4. make install
    5. ls /opt/koha/api/v1/swagger/swagger_bundle.json
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e1bbbedb80a2c3d2ae17f9ec2ddc75d7c235bb8d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Apr 25 11:09:32 2024 -0300

    Bug 36546: Use JSON instead
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7908e4a4fa4c0474882d1e948d955426fb3ff7d8
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Apr 24 03:19:33 2024 +0000

    Bug 36546: Fix js-yaml dependency in package.json
    
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3939830cdc067a2c9e176cf9aeeb94b81d0945ec
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Apr 23 11:52:37 2024 -0300

    Bug 36546: Add a bundled version of the API spec
    
    This patch makes the Koha::REST::V1 class use a bundled version of the
    API spec.
    
    For that to happen, this patch also adds:
    
    * a `yarn api:bundle` task for generating the `swagger_bundle.yaml`
      file
    * the bundle file to `.gitignore`
    * @redocly/cli to the packages.json dependencies (yarn add @redocly/cli)
    * `api:bundle` is added to the `yarn build` general command
    
    NOTE: A new workflow is introduced by this patch as developers will need
    to call the `yarn api:bundle` command on each API spec change they make.
    
    To test:
    1. Have KTD running
    2. Verify the API works as usual
    => SUCCESS: The API just works
    3. Apply this patch
    4. Run:
       $ ktd --shell
      k$ yarn api:bundle
    5. Restart plack:
      k$ koha-plack --restart kohadev ; tail -f /var/log/koha/kohadev/*.log
    => SUCCESS: The API loads correctly
    6. Repeat 2
    => SUCCESS: Nothing changed
    7. Sign off :-D
    
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b45c0e8999e5970fe5f23df18c6992c188aae9a3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 30 09:59:23 2024 +0100

    Bug 5920: (QA follow-up) Switch to use existing dependancy
    
    We already have a scrubber module we can use; This patch switches us
    from the newly introduced dependancy to using the existing and well
    respected Scrubber we already have.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6e2ba6d4d934e3d1f98ea7f7ffefd2a5c0e7a7e1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jan 23 14:01:41 2024 +0000

    Bug 5920: Add HTML::Restrict to cpanfile
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0d9ebbe95663355c1a39cf41524b1f5fcdbe83e1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jan 10 10:45:54 2022 +0100

    Bug 5920: Strip HTML from report exports
    
    This patch uses HTML::Restrict to strip out HTML tags from the CSV
    download of reports.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4da2e1444be2f80f9a9a87a73af55bec1fe52f98
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 19 11:25:58 2024 +0000

    Bug 32565: (follow-up) Tidy
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c3eac3c8898759291011e9d5a3f2d25cd1112c1d
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Feb 19 10:45:50 2024 +0000

    Bug 32565: (QA follow-up) Fix tests
    
    Apply original tests patch + this follow-up. Run:
    prove t/db_dependent/HoldsQueue.t
    Notice tests fail.
    Apply fix patch, run the above prove command again.
    Notice tests pass.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 379481541f63cbdbadc3884052ef1d6b82be99e3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jan 25 12:31:46 2024 +0000

    Bug 32565: Unit tests
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 939f1f389b848e06b7adcd7121ff7629a0ba4adf
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Mar 2 17:01:07 2023 +0000

    Bug 32565: Add unallocated option to holds queue
    
    Add an unallocated option to CreateQueue and pass through as needed
    Avoid deletion of the tmp_holdsqueue, and only check holds
    and items that are not currently matched
    
    A future hold with a higher priority will still fail here - because the
    item may already be assigned, but on next change to the biblio it would
    be corrected
    
    To test:
    1) Apply both patches
    2) Enable RealTimeHoldsQueue and set HoldsQueueSkipClosed to "open"
    3) Add a holiday to the calendar for all libraries for today, visit:
    /cgi-bin/koha/tools/holidays.pl
    -- Click today's day on the calendar and pick "Holiday repeated every same day of the week"
    -- Click "Copy to all libraries". Hit "Save.
    4) Place a biblio-level hold on a biblio record and set the pickup location to a library that has available copies, visit:
    -- /cgi-bin/koha/reserve/request.pl?biblionumber=76&borrowernumber=51
    -- Click the first "Place hold" button to place the biblio-level hold.
    5) Verify that that hold got added to the holds queue, visit:
    /cgi-bin/koha/circ/view_holdsqueue.pl?branchlimit=&itemtypeslimit=&ccodeslimit=&locationslimit=&run_report=1
    6) Place a biblio-level hold on a biblio record where there are no other holds and copies are available at another location, but not the pickup location, visit:
    -- /cgi-bin/koha/reserve/request.pl?biblionumber=437&borrowernumber=51
    -- On the "pickup at" dropdown, pick something else other than "Centerville", e.g. "Fairfield".
    -- Click the first "Place hold" button to place the biblio-level hold.
    7) Check the holds queue again, notice that this 2nd hold was not added to the queue:
    /cgi-bin/koha/circ/view_holdsqueue.pl?branchlimit=&itemtypeslimit=&ccodeslimit=&locationslimit=&run_report=1
    8) Run the updated cronscript:
    perl misc/cronjobs/holds/build_holds_queue.pl --force --unallocated
    9) Notice nothing changed in the holds queue, visit:
    /cgi-bin/koha/circ/view_holdsqueue.pl?branchlimit=&itemtypeslimit=&ccodeslimit=&locationslimit=&run_report=1
    10) Remove the holiday we created previously, visit:
    /cgi-bin/koha/tools/holidays.pl
    -- Click today's day on the calendar and pick "Delete this holiday"
    -- Click "Copy to all libraries". Hit "Save.
    11) Run the updated cronscript:
    perl misc/cronjobs/holds/build_holds_queue.pl --force --unallocated
    12) Confirm the second hold is added to the holds queue, visit:
    /cgi-bin/koha/circ/view_holdsqueue.pl?branchlimit=&itemtypeslimit=&ccodeslimit=&locationslimit=&run_report=1
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cae2efd69d8ad63822914377733f9819889a0ec1
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Apr 3 20:35:46 2024 +0000

    Bug 36508: Refresh patron object when updating category
    
    To test:
    1 - Find a ptron, I sued #45 in KTD, note their category
    2 - Update them from one category to another using finesunder:
        perl misc/cronjobs/update_patrons_category.pl -f ST -t S --finesunder=5.00 --where "me.borrowernumber=45" -v -c
    3 - Check their modification log (I told you to enabled BorrowersLog,
        right?)
    4 - See many fields reported changed
    5 - Apply patch
    6 - Repeat, but change the to and from options
        perl misc/cronjobs/update_patrons_category.pl -f S -t ST --finesunder=5.00 --where "me.borrowernumber=45" -v -c
    7 - Note only one column changed in the logs
    8 - Ask for unit tests
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8f359aa72c46eaa493e817d4d099b6548846edf0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 25 16:20:53 2024 +0000

    Bug 36508: Unit tests
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e7aa232e57f2558d86c4d42f6b102ae81453b135
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Apr 30 09:57:46 2024 +0000

    Bug 32435: DBRev 23.12.00.038
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bc59661f1457b7eed0e18c4c18b29d4dc9876e62
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 25 16:58:34 2024 +0100

    Bug 32435: Unit tests for Ticket/Ticket::Update change
    
    We add a fallback to allow TICKET_RESOLUTIONS to be returned in the
    strings_map as additional TICKET_STATUS states.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit eec197565ca8dc1ecb7243b3c03ec4e8acc22ac9
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Dec 21 15:58:41 2023 +0000

    Bug 32435: Add resolution states to Catalog concerns
    
    This patch adds resolution types to the catalog concerns feature. It
    allows libraries to define a list of 'TICKET_RESOLUTION' authorized
    values from which librarians can then pick at the point of resolving a
    catalog concern.
    
    To test:
    1) Apply the patches and run the database updates
    2) Enable catalog concerns (staff or opac will do the trick)
    3) Submit a catalog concern
    4) Confirm that you can still resolve a concern from the catalog
       concerns management page as before.
    5) Add some values to the new TICKET_RESOLUTION authorized values
    6) Submit a new catalog concern
    7) Confirm that the 'Resolve' button in the management modal is now a
       dropdown containing the list of resolution values defined above.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Ray Delahunty <lib-systems@arts.ac.uk>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 038ac93103a6a36d44738b28cfb1ccdd7a548023
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Dec 21 15:57:41 2023 +0000

    Bug 32435: Add TICKET_RESOLUTION authorized value
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Ray Delahunty <lib-systems@arts.ac.uk>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7d5bb7c9428b4386ed2baad5b0458e84611e99fb
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Apr 30 09:13:35 2024 +0000

    Bug 35628: DBIC schema update
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 47e0973f5986885091ab84a760133c625860f35e
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Apr 30 09:08:43 2024 +0000

    Bug 35628: DBRev 23.12.00.037
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a6bb25a1602b11357f9d7a74ef28d279e8af6452
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 25 16:51:09 2024 +0100

    Bug 35628: Add unit tests for Koha::Ticket::Update addition
    
    We add a strings_map method to Koha::Ticket::Update and thus need
    to have corresponding unit tests.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8019b5fdbaac493aefc8a14d868e71d1b2fd6f61
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 25 16:33:25 2024 +0100

    Bug 35628: Add unit tests for Koha::Ticket addition
    
    We add a strings_map method to Koha::Ticket and thus need to have
    corresponding unit tests.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e968e80dd9096bf5195d628d06d78d8e289c054d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 25 16:10:24 2024 +0100

    Bug 35628: Unit tests for addition to tickets API
    
    This patch updates the unit test for the ticket_updates api to catch
    both the missing test 'state' for the existing state change
    functionality and also the new 'status' functionality introduced with
    this patchset.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 84f3948c2a12b6c8aaeeb512571cc960d38b5d71
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Dec 28 10:04:36 2023 +0000

    Bug 35628: Add status filters to top bar
    
    This patch adds status filters to the top toolbar alongside the existing
    filter on resolved.
    
    Signed-off-by: Esther Melander <esther@bywatersolutions.com>
    Signed-off-by: Ray Delahunty <lib-systems@arts.ac.uk>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 11dd6b8223d604b6c891c9cf5e082f009bffd155
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Dec 27 11:08:09 2023 +0000

    Bug 35628: Add current status as a class to table rows
    
    This patch adds the current status, if there is one set, to the table
    rows of the concerns interface.
    
    Signed-off-by: Esther Melander <esther@bywatersolutions.com>
    Signed-off-by: Ray Delahunty <lib-systems@arts.ac.uk>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c17ab9bd75ef6ad4dcb9922546fe3273f59aa5ee
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Dec 22 16:14:40 2023 +0000

    Bug 35628: Display status strings instead of codes
    
    Signed-off-by: Esther Melander <esther@bywatersolutions.com>
    Signed-off-by: Ray Delahunty <lib-systems@arts.ac.uk>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 13176b2936f97b9d5a32d568b0596ac240ce551c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Dec 21 15:58:41 2023 +0000

    Bug 35628: Add resolution states to Catalog concerns
    
    This patch adds ticket status to the catalog concerns feature. It
    allows libraries to define a list of 'TICKET_STATUS' authorized
    values from which librarians can then pick at the point of updateing
    a catalog concern.
    
    To test:
    1) Apply the patches and run the database updates
    2) Enable catalog concerns (staff or opac will do the trick)
    3) Submit a catalog concern
    4) Confirm that you can still update a concern from the catalog
       concerns management page as before.
    5) Add some values to the new TICKET_STATUS authorized values
    6) Submit a new catalog concern
    7) Confirm that the 'Update' button in the management modal is now a
       split button with a dropdown containing the list of status values
       defined above.
    
    Signed-off-by: Esther Melander <esther@bywatersolutions.com>
    Signed-off-by: Ray Delahunty <lib-systems@arts.ac.uk>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 97737096384fbd30e3683a08253e1d2754709f1c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Dec 21 15:58:11 2023 +0000

    Bug 35628: Add status to ticket definition
    
    Signed-off-by: Esther Melander <esther@bywatersolutions.com>
    Signed-off-by: Ray Delahunty <lib-systems@arts.ac.uk>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 585b44e2d1184865c17d010d2aac674fe02bc58b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Dec 21 15:57:41 2023 +0000

    Bug 35628: Add status to tickets
    
    This patch adds a new TICKET_STATUS authorized value category as well as
    adding the new 'status' field to both 'tickets' and 'ticket_updates'
    tables.
    
    Signed-off-by: Esther Melander <esther@bywatersolutions.com>
    Signed-off-by: Ray Delahunty <lib-systems@arts.ac.uk>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 28f1cb61586a88d3434a0d6459ecf4d5f31662b3
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Apr 30 09:12:03 2024 +0000

    Bug 31652: DBIC schema update
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fc12fe9db0a901d67f4c0ce136d8e3e57e40e1c3
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Apr 30 08:51:42 2024 +0000

    Bug 35138: Fix typo in error messages
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 423a7a734c2c2f76ee272741e568d290b5b3ce23
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Apr 30 08:49:53 2024 +0000

    Bug 35138: DBRev 23.12.00.035
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5f684849be79e5c8fc21586e1450e47939e582f7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Apr 29 23:13:43 2024 +0200

    Bug 35138: Fix delete button for newly added facet
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ac872697b52705093ebd1f51115ea1a58ed303a7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Apr 29 23:06:17 2024 +0200

    Bug 35138: Fix Koha_Elasticsearch.t
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 02b97f62bda612b518a99b186ea61b3f784d8e13
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 12 09:03:46 2024 +0000

    Bug 35138: (QA follow-up) Tidy update
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b1f33f34b3b9d7c3b04e2ffd648a84018d346780
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 21 14:47:27 2024 +0100

    Bug 35138: A bit of cleaning - UI
    
    This can be moved to its own bug report, it's only a bit of cleaning
    trying to keep the code cleaner after than before.
    No behaviour changes expected.
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Clemens Tubach <clemens.tubach@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2cdd43b97cbfba4dfd076f0d9ff0bf959b5c47c9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 21 12:42:24 2024 +0100

    Bug 35138: UI changes to add/remove a facet
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Clemens Tubach <clemens.tubach@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7a85353be014ba36c308b7417c685c0d7aa2c820
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 22 09:53:47 2024 +0100

    Bug 35138: Mark DisplayLibraryFacets as zebra only
    
    We can know add/remove homelibrary and holdinglibray from the config
    page, this syspref is no longer needed for ES
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Clemens Tubach <clemens.tubach@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e7b0bf583b6d93e235eab0bb4768aeef46034c84
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 21 10:15:23 2024 +0100

    Bug 35138: Adjust existing data
    
    We want the label from the DB displayed on the UI so we are adjusting
    the yaml and the DB.
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Clemens Tubach <clemens.tubach@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ef5307d254fc5ca51b3b4d6ab94828754483855f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 14 11:41:42 2024 +0100

    Bug 35138: Add the ability to manage ES facets
    
    This new feature allows to manage facets for Elasticsearch from the
    administration page.
    Prior to this the facet fields were hardcoded in the codebase.
    
    Librarians can then add/remove facet fields and modify their label.
    
    Test plan:
    1. Create a new search field and set it a label different than its name.
    2. Save
    3. Go the bibliographic mapping tab
    4. Add 1+ mapping for this search field (Searchable and facetable must be "Yes")
    5. Add, reorder, remove new facets
    6. Save and reindex your records
    7. Search and notice the new facet list
    
    QA: There are several wrong things in this area (ES + facets code,
    everything, pm, pl, tt AND on this administration page). I have done my
    best to clean the code as much as I could and keep the code cleaner
    after than before. But there are still a lot to do.
    There are still inconsistencies on this page (like we need to save to
    see the changes applied to the other tables), but this is clearly out of
    the scope of this bug report.
    Another enhancement would be to move the facet list to a different DB
    table, that could bring more flexibility:
      * display or not (could be opac/staff/both/none)
      * define the size per field (number of facet to display)
      * order: move search_field.facet_order to this new table.
    But, again, it's a lot more work.
    
    More work is done in this area, please see related bug reports.
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Clemens Tubach <clemens.tubach@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c120975b7839f8d4b35f9ecb14f6b70ded66509a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 30 07:31:15 2024 +0100

    Bug 26297: (follow-up) Fix specification file
    
    We had a duplicate 'description' key introduced in the patron category
    specification file here which causes errors on bundling the specs.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 83f9535fabc37be46ab8154d940a7ff614617eb2
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Aug 11 15:43:15 2022 -0400

    Bug 31345: Add ability to exit process_message_queue.pl early if any plugin before_send_messages hook fails
    
    Sometimes it would be better for process_message_queue.pl to stop if a plugin hook fails rather than continue processing. It would be nice if that was a command line option.
    
    Test Plan:
    1) Install any plugin with a before_send_messages hook
    2) Modify the plugin, add a 'die;' statement at the start of the
       before_send_messages method of the plugin.
    3) Run process_message_queue.pl as usual
    4) Note the exit code is 0
    5) Run it again with the new -e setting
    6) Note the exit code is 1
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 615c7c5eafd207fdb1adc9a07a063ce83da668c0
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Apr 26 14:41:42 2024 -0400

    Bug 35582: Supress possible warning
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9c445218deb8daa8704ae48433783e723d8e8649
Author: lmstrand <lmstrand@gmail.com>
Date:   Fri Jan 26 10:36:00 2024 +0200

    Bug 35582: Show advanced search languages with selected intranet language descriptions first
    
    To test:
    
    1. Check language dropdowns in advanced search, notice localized
       names of the languages are shown first in the menus, then the
    selected ui language translations if available or the english translation
    2. Apply patch
    3. Check language dropdowns, notice the selected ui language's
       translations are shown first for the languages (if missing, english
    translation), then the localized
    language's name.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 593c3673f276fe18446131a62c95b85727bb7e46
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Apr 24 11:01:08 2024 +0000

    Bug 26297: (QA follow-up): Update tests
    
    prove t/db_dependent/api/v1/patron_categories.t
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 456f47cad4060dcd0b003a9ac3d1b67aa378866c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Apr 23 10:04:06 2024 -0300

    Bug 26297: (QA follow-up) Spec fixes
    
    This patch fixes some spec misses. To test:
    
    1. Run:
       $ ktd --shell
      k$ prove xt/api.t
    => FAIL: Tests fail!
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: Tests pass!
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a43303b88bea5d7fbd0229df1870b9e4f15e6f47
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Dec 12 10:57:50 2023 +0000

    Bug 26297: Add tests
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0e593e59e2a39819e5384f03445a138aa79a7f34
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Dec 11 17:30:37 2023 +0000

    Bug 26297: API specs
    
    Test plan, k-t-d:
    1) Access /api/v1/patron_categories
    2) Verify the patron categories are correctly listed
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Bug 26297: (QA follow-up) Move to REST::V1::Patrons::Categories
    
    Bug 26297: (QA follow-up) Use search_with_library_limits
    
    JD amended-patch: squashed + tidy
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5b205969a91d325378945cad4e2730152f2417a6
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Dec 11 17:31:09 2023 +0000

    Bug 26297: Add patron categories to_api_mapping
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b173ff729d1efc932456b48667f76e9de6633046
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Dec 27 16:01:05 2023 +0000

    Bug 33494: Make filters a toggle
    
    This patch updates the markup to make the 'Filter resolved | Show all' a
    toggle filter rather than two buttons.
    
    Test plan
    1. Enable the CatalogConcerns system preference.
    2. For two records, add a catalog concern (New > New catalog concern).
    3. Resolve one of the concerns (Cataloging > Reports > Catalog concerns)
       - click on the 'Details' button then the 'Resolve' button.
    4. Note that the filters at the top of the page are labelled: Hide
       resolved | Show all
    5. Apply the patch and refresh the page.
    6. Note that it is now a 'toggle': 'Include resolved' (default) or
       'Filter resolved'
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Ray Delahunty <lib-systems@arts.ac.uk>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 631a80aaee684e243ab9ce51f72a866270145666
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Apr 2 11:28:59 2024 +0000

    Bug 35106: CSRF fix
    
    The removal of 'cud-' from op needs to happen sooner
    because ill-requests.tt expects 'edit_action' op,
    not 'cud-edit_action'.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c304eabc195a946d539b9131cb26694f0f3f68bb
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Oct 19 10:21:04 2023 +0000

    Bug 35106: Validate entered borrowernumber and biblio_id
    
    Following up from the test plan of the previous patch:
    1) Edit the request again, input gibberish in the Patron ID e.g. 'asdasd'
    2) Hit 'Submit'
    3) Notice you get a 'The Patron ID you entered is invalid.' message.
    4) Edit again, try to empty the input on the Patron ID, hit 'Submit'.
    5) Notice it saves the patron as null, as expected
    
    Repeat the test plan, but now for the Bibliographic record ID, notice
    the message 'The Bibliographic record ID you entered is invalid.' is
    shown if a no biblio was found.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    squash this
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fd450a86cb040e76b84fa29b30508c14a48aba87
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Oct 19 09:35:32 2023 +0000

    Bug 35106: Add patron search autocomplete to Patron ID input
    
    Test plan, k-t-d:
    1) Install FreeForm and enable ILLmodule, run:
    bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev.sh)
    2) Visit /cgi-bin/koha/ill/ill-requests.pl
    3) Create 'New ILL request'
    4) Select the request type, input cardnumber '42' and select a library. Hit 'Create'
    5) Manage the request created just now: click the request id or 'manage request' button from the table
    6) Click "Edit request" from the top actions toolbar
    7) Input text in Patron ID e.g. 'koha'. Notice you get patron suggestions.
    8) Click one of the suggestions and save the request, notice the patron is saved correctly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit eebfb6d70ab5d55efb2e86e8e0b45562fdef7377
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Apr 23 11:01:26 2024 +0000

    Bug 25682: Style transfers interface to match checkin page
    
    This patch updates the transfer page to make it better match the style
    of the checkin page. The static dialog is converted to a modal for
    consistency's sake, with information displaying as similarly as
    possible to the checkin page. The library dropdown is now styled with
    Select2.
    
    To test, apply the patch and go to Circulation -> Transfers.
    
    - Test some simple transfers: Items which are not checked out, some
      which are checked out.
    - Test that the page's handling of items on hold matches current master
      (i.e. broken, see Bug 36686). Description of current behavior:
    
    - Logged in to Branch A.
    - Find a barcode for a title which has a biblio-level
      hold (not already in transit) to be sent to Branch B.
    
      - Submit transfer to Branch C.
        - Three actions are offered:
          1. Transfer to Branch B
          2. Cancel hold and then attempt transfer
          3. Ignore and return to transfers
    
          Testing each of the three actions:
              1. The page says "Item is now in transit
                 to Branch C (not the hold's destination)"
              2. The item is not in transit, and the hold
                 has been changed to an item-level hold.
              3. Works correctly. No change to the hold
                 and no transfer initiated.
    
    - Logged in to Branch A.
    - Find a barcode for a title which has a biblio-level
      hold (not already in transit) to be sent to Branch B.
      - Check in the item, confirm hold and transfer.
    
      - Submit transfer to Branch C.
        - Two actions are offered:
          1. Cancel hold and then attempt transfer
          2. Ignore and return to transfers
    
          Testing each of the two actions:
              1. The page says "Reserve cancelled" (sic).
                 The original transfer to Branch B is still
                 in place.
              2. Works correctly. No change to the hold and
                 the original transfer remains.
    
    - Logged in to Branch D.
    - Find a barcode for a title which has a biblio-level
      hold (not already in transit) to be held at Branch D.
      - Check in the item, confirm hold.
    
    - Log in to Branch A.
      - Submit a transfer with that barcode to Branch C.
        - Two actions are offered:
          1. Cancel hold and then attempt transfer
          2. Ignore and return to transfer.
    
          Testing each of the two actions:
              1. The page says "Reserve cancelled" (sic).
                 The hold has been cancelled but the item
                 has not been transferred.
              2. Works correctly. Hold remains unchanged,
                 no transfer initiated.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 882678f3e3c3d66842f108e180ee696245e7730c
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Apr 29 15:35:02 2024 +0000

    Bug 29393: DBRev 23.12.035
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a15ec9894c29dd10bc18be8ae0cc96031cd53133
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Apr 29 15:31:35 2024 +0000

    Bug 29393: (follow-up) Rename notice module to "Patron (custom message)"
    
    Also moved it below the similar entry "Patron (custom slip)".
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3a6867591b407428565a484ba1e5d69b00e39615
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 25 11:54:30 2024 +0100

    Bug 29393: (QA follow-up) Improve modal styling
    
    The modal still used a lot of older styles, this patch updates the
    classes to make it more consistent with other message type modals.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5f4caff701910c558d425edf18ca5e24baab4306
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 25 10:01:25 2024 +0100

    Bug 29393: (QA follow-up) Tidy and make executable the new test
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a6e2abdb93dd8baf9ee0a8688a1af204fb8adc60
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 25 09:59:50 2024 +0100

    Bug 29393: (QA follow-up) Tidy add_message.pl
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 270ff5cd1d399ae59a5f8f9b094a74cb834f1069
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 25 09:58:19 2024 +0100

    Bug 29393: (QA follow-up) Make database update idempotent
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit edefd14f23c8f49cd2d735aa527ecdbe8cfc3222
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Apr 18 16:28:34 2023 +0200

    Bug 29393: Prevent SQL errors when SQL strict mode is set
    
    Signed-off-by: Matthias Le Gac <matthias.le-gac@inlibro.com>
    Signed-off-by: Phan Tung Bui <phan-tung.bui@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4606ceb05e18265e762761dc306226855586c806
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Mar 14 10:33:58 2023 -1000

    Bug 29393: (follow-up) Explicite use of methods from C4
    
    Signed-off-by: Matthias Le Gac <matthias.le-gac@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 748091798a5dc6addf95a0617544eeaafae6fde2
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Wed Dec 8 13:56:15 2021 +0100

    Bug 29393: Sort notice templates by name
    
    Signed-off-by: Matthias Le Gac <matthias.le-gac@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f6b5ed8ee91974f1394a1c1a010483595d17c08d
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Fri Nov 19 09:59:59 2021 +0100

    Bug 29393: Don't show notice templates for each language
    
    Signed-off-by: Matthias Le Gac <matthias.le-gac@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 96820a81fb94e9dc05c6bae3bf622e3d84577228
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Wed Nov 10 14:45:17 2021 +0100

    Bug 29393: Add send_messages_to_borrowers permission
    
    Signed-off-by: Matthias Le Gac <matthias.le-gac@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3211fff98fe9847f84e9014af4755db6c26ea3ca
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Wed Nov 10 11:34:17 2021 +0100

    Bug 29393: Add a dedicated letters module for add message
    
    Signed-off-by: Matthias Le Gac <matthias.le-gac@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 48948dc9fa6eb7a9f91ab752ccdbf7144de8e60c
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Mon Nov 8 15:16:17 2021 +0100

    Bug 29393: Use patron language in letters
    
    Signed-off-by: Matthias Le Gac <matthias.le-gac@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ba3f704493e6d0983e69f9ee8933654ab7532ac7
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Tue Nov 2 16:16:29 2021 +0100

    Bug 29393: Ability to send emails from patron details page
    
    Test plan
      - apply Bug 12802
      - go to a patron's details page
      - click on "Add message" in tools bar
      - choose "Email" in "Add a message for"
      - Select a notice (module members) or manualy fill the message
      - Save
      - Check the message is saved in message_queue table
    
    Signed-off-by: Matthias Le Gac <matthias.le-gac@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4c2f58d5db1872d95c78301b63b356e37809cf40
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Apr 29 14:46:33 2024 +0000

    Bug 12802: DBRev 23.12.00.034
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5024513901a65822763c3fa02df891908b7a270a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Dec 20 11:43:34 2023 +0000

    Bug 12802: Clarify system preferences
    
    I felt the switch to multi in the EmailFieldPrimary preference was a bit
    confusing given that type exposes a 'select all' option which doesn't
    make sense with the pre-existing 'first valid' option being an override
    in the code.
    
    This patch opts to switch it back to 'Choice', meaning that only one
    option can be picked and adds a 'selected addresses' option which
    prompts the use of a new 'EmailFieldSelection' preference which allows
    for the multi-select as before.
    
    To test:
    1) Run though the test plan for 'Update notice_email_address method to
       return a list' but with the following ammendments:
    
    * 2) As aposed to being able to select multiple options under
      EmailFieldPrimary, you should now only be able to select one option at
      a time, but a new 'selected addresses' option should be present.
    * 8) Select the 'selected addresses' option for 'EmailFieldPrimary' and
      also select multiple fields for the new 'EmailFieldSelection'
      preference.
    
    Signed-off-by: Brendan Gallagher <brendan@bywatersolutions.com>
    Signed-off-by: Axelle Clarisse <axelle.clarisse@univ-amu.fr>
    Signed-off-by: Mathieu Saby <mathsabypro@gmail.com>
    Signed-off-by: Aleisha Amohia <aleisha@catalyst.net.nz>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1b62b5eaa3f9d868580eab4ec6bba190cbdf3a5d
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Dec 20 01:19:14 2023 +0000

    Bug 12802: Add note to EmailFieldPrimary system preference
    
    To clarify that "first valid" should be unchecked for multiple emails to receive notices
    
    Signed-off-by: Brendan Gallagher <brendan@bywatersolutions.com>
    Signed-off-by: Axelle Clarisse <axelle.clarisse@univ-amu.fr>
    Signed-off-by: Mathieu Saby <mathsabypro@gmail.com>
    Signed-off-by: Aleisha Amohia <aleisha@catalyst.net.nz>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9150d0c6c3641206ca9a929f74e4789c77abe1ee
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Dec 19 17:09:17 2023 +0000

    Bug 12802: Update notice_email_address method to return a list
    
    This patch updates the notice_email_address method to return a comma
    separated list of addresses as expected by Email::Sender if you wish to
    send mail to multiple To addresses.
    
    To test:
    
    1. Install database update and restart services
    2. Go to Koha Administration -> system preferences. Search for EmailFieldPrimary. Confirm the options show as checkboxes and you can select multiple.
    3. Search for a patron. Put different email addresses in each of the possible email fields (i.e. primary email, secondary email, alternate email).
    4. Make sure 'first valid' is checked in EmailFieldPrimary.
    5. Go to your patron, click the More dropdown and send a welcome email.
    6. In your terminal, go into the database to view the message queue.
    
    sudo koha-mysql instance
    select * from message_queue\G
    
    7.  Confirm your welcome email is visible, with ONLY the first valid email in
        the to_address field.
    8.  Select other combinations of emails in EmailFieldPrimary.
    9.  Send another welcome email to the same patron, then run the message_queue
        SQL query again.
    10. Confirm your welcome email is visible and shows all selected addresses
        concatenated by , in the to_address field.
    11. Enable KTD to send email [1] (without email configured you will not
        be able to confirm the delivery to multiple addresses).
    12. Run misc/cronjobs/process_message_queue.pl to trigger sending the
        queued notices from above.
    13. Check that the addresses in the to_address all actually recieve the
        notice.
    
    [1] To test sending emails using a Google account:
        - Set up an App password for your Google Account
        - Configure a new 'SMTP Server' under 'Administration > SMTP servers'
          using the following settings where `User name` = your Google email
          address and `Password` = your APP password, not your Google account
          password):
    
          Host: smtp.gmail.com
          Port: 587
          Timeout: 120
          SSL: STARTTLS
          User name: GOOGLEACCOUNTUSER
          Password: GOOGLEAPPPASSWORD
    
        - Set this server as default
    
    Sponsored-by: St Luke's Grammar School & Pymble Ladies' College
    Signed-off-by: Brendan Gallagher <brendan@bywatersolutions.com>
    Signed-off-by: Axelle Clarisse <axelle.clarisse@univ-amu.fr>
    Signed-off-by: Mathieu Saby <mathsabypro@gmail.com>
    Signed-off-by: Aleisha Amohia <aleisha@catalyst.net.nz>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 49271317fa87d2a439999147193e09d893d2b5b2
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Dec 19 17:08:27 2023 +0000

    Bug 12802: Update system preference
    
    Allow the EmailFieldPrimary preference to accept multiple selections
    
    Signed-off-by: Brendan Gallagher <brendan@bywatersolutions.com>
    Signed-off-by: Axelle Clarisse <axelle.clarisse@univ-amu.fr>
    Signed-off-by: Mathieu Saby <mathsabypro@gmail.com>
    Signed-off-by: Aleisha Amohia <aleisha@catalyst.net.nz>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ab2aa5415cf2ca239d5b593b3a0b833477646dc8
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Apr 23 13:41:22 2024 +0000

    Bug 36559: (follow-up) Fix To/From z-index
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0cab6ee3d43a2a52a2ff09ffc10ade010064bfa8
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Apr 12 07:38:23 2024 +0000

    Bug 36559: Add sticky table headers to transport cost matrix
    
    To test:
    1. APPLY patch and regenerate CSS. ( yarn build )
    2. Have many, many branches. To test it is good to have more branches than in a standard k-t-d.
    3. Go to Admin > Transport cost matrix
    4. Scroll down and to the right, the table headers should stay visible.
    5. Hover over any cell, a title should appear like 'Branch A / Branch B'
    6. Test in Chrome and Firefox.
    
    This uses position: sticky which has recently gained more widespread browser support:
    https://caniuse.com/?search=sticky
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cdb07c02c3730dd98427c930dc9f282bfeae3822
Author: Andrew Fuerste Henry <andrewfh@dubcolib.org>
Date:   Thu Apr 4 21:28:11 2024 +0000

    Bug 36510: Add CircControl and HomeOrHoldingBranch settings to smart-rules
    
    To test:
    1 - apply patch
    2 - restart all
    3 - load circ & fines rules, confirm syspref values show in the blue box of rules explanation
    4 - change sysprefs and confirm values update on circ rules page
    
    Signed-off-by: Michelle Spinney <mspinney@clamsnet.org>
    Signed-off-by: hebah <hebah@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cb9d59d1a5cc61d97d49b53610514c66b95a6e3c
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Apr 29 14:35:41 2024 +0000

    Bug 35993: (follow-up) Fix MarcOverlayRules.t too
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 31a66fcffe85fd3b6a78a7d829de143e48919bd8
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Apr 29 14:14:20 2024 +0000

    Bug 35993: (follow-up) Fix Merge.t
    
    The change for 005 makes some field compares fail. We should
    exclude 005 in the local compare_fields sub.
    
    We do NOT need the compare_fields from AuthoritiesMarc. Removing.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b64533d3ff712ab737a11183b2e3c52e08c83508
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Apr 29 12:53:25 2024 +0000

    Bug 31652: DBRev 23.12.00.033
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 27c496a50dac1698fdba2dafa3b5178b4cf8dc25
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Apr 29 12:46:39 2024 +0000

    Bug 31652: Perltidy
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4bed77da08730d4e9c66d55d898531d39cb47b8a
Author: Mark Hofstetter <mark@hofstetter.at>
Date:   Thu Apr 11 09:14:06 2024 +0000

    Bug 31652: Add geo-search
    
    This patch adds geosearch to Koha (using Elasticsearch 7). ElasticSearch
    search_mappings get new types to store lat/lon, which can be indexed
    from MARC 034$s and 034$t. There is a small change to the DB to allow a
    new value in search_field.type ENUM.
    
    The QueryBuilder is extended to allow for building advanced
    ElasticSearch Querys (eg geo_distance) that cannot be represented in a
    simple string query. The UI for searching (including showing the results
    on a OSM/Leaflet map) is implemented in a separate plugin
    (https://github.com/HKS3/HKS3GeoSearch)
    
    Test Plan:
    
    * make sure you're running ElasticSearch 7
      (eg via `curl http://es:9200?pretty | grep number`)
    * apply patch
    * got to a Framework, check Editor for 034$s and 034$t and save
    * got to some books (in the correct framework) and enter some lat and lon into 034$s and 034$t (for example lat=48.216, lon=16.395)
    * Run the elasticsearch indexer, maybe limited on the books you edited (-bn 123 -bn 456):
      misc/search_tools/rebuild_elasticsearch.pl -b -v
    * You can check if the indexing worked by inspecting the document in elasticsearch:
      * get the biblionumber (eg 123)
      * curl http://es:9200/koha_kohadev_biblios/_doc/123?pretty | grep -A5 geolocation
      * You should get back a JSON fragment containing the lat/lon you stored
    * You can query elasticsearch directly:
      * Run the following curl command, but adapt the value for lat/lng and/or the distance (in meters)
      * curl -X GET "http://es:9200/koha_kohadev_biblios/_search?pretty" -H 'Content-Type: application/json' -d '{"query": {"bool":{"must":{"match_all":{}},"filter":{"geo_distance":{"distance":100000,"geolocation":{"lat":48.2,"lon":16.4}}}}}}'
    * To run the search via Koha, you need to either install and use https://github.com/HKS3/HKS3GeoSearch or create a handcrafted query string:
      * handcrafted query string:
        * /cgi-bin/koha/opac-search.pl?advsearch=1&idx=geolocation&q=lat:48.25+lng:18.35+distance:100km&do=Search
      * HKS3GeoSearch
        * install the plugin and enable it
        * got to OPAC / Advanced Search
        * There is a new input box "Geographic Search" where you can enter lat/long/radius
        * On the search result page a map is shown with pins for each found biblioitem
    
    Sponsored-by: ZAMG - Zentralanstalt für Meterologie und Geodynamik, Austria - https://www.zamg.ac.at/
    Sponsored-by: Geosphere - https://www.geosphere.at/
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Additional finetuning:
    
    - Fix update and remove fixed fixme
    - Update test count as well
    - fix last small issues raised in Comment 23
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 632e280ea2118c9d74cc6427a1fa10cf7533f978
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 21 09:31:38 2024 +0000

    Bug 36374: Also tidy ticket and concern modals js
    
    This patch does the promised follow-up to tidy the two other recently
    added js files for modals. As I'm the main maintainer of those to date
    I'm happy to rebase any patches already submitted atop this bug.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 37a16e69c7ef65bb396eec703631bcf3ff650cfc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 21 09:07:18 2024 +0100

    Bug 36374: Keep tidy files from 'fetch' directory
    
    And tidy them
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit eb498f636ee8ac155f7698aa28f86b056983df2b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 21 08:45:11 2024 +0100

    Bug 36374: flag JS files to keep tidy
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f196f3cb705b0620dec4151f093208ebe9e83e19
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Mar 20 16:18:14 2024 +0000

    Bug 36374: Ensure js/modals/*.js files are tidy
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 362167adeaae3cc0ad3e41cd4c2a9b164f984a50
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Mar 20 15:28:10 2024 +0000

    Bug 36374: Move modal js under /modals
    
    I also didn't stick to the more recent switch to putting modal js under
    a /modals dirctory.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit baf463605048be7a4d8e65a3e6c0f052d06a417e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Mar 20 15:24:18 2024 +0000

    Bug 36374: Tidy place_booking_modal.js according to our prettier config
    
    This was somehow missed when the file was first added.. my mistake.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d1b81e2681156e1865a4e4091ba2ea2c4f25da7c
Author: Kevin Carnes <kevin.carnes@ub.lu.se>
Date:   Wed Dec 6 14:22:22 2023 +0100

    Bug 32392: Fix QA issues
    
    Signed-off-by: Stina <stina.hallin@ub.lu.se>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cb9854dd1ef4224bbf5ee07406c81e29402b9879
Author: Björn Nylén <bjorn.nylen@ub.lu.se>
Date:   Thu Dec 1 23:32:15 2022 +0100

    Bug 32392: Tests for changes in C4::Serials::GetNextSeq
    
    Signed-off-by: Marie Hedbom <marie.hedbom@musikverket.se>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 005a872869f6bc6131911422f96172729b919e32
Author: Björn Nylén <bjorn.nylen@ub.lu.se>
Date:   Fri Apr 1 14:13:47 2022 +0000

    Bug 32392: Enable skipping forward issues when receiving serials.
    
    This patch adds the ability to skip forward issues when receiving and generating the next issue
    from both the serial receive page and serial collection page.
    
    To test:
    1. Apply patch.
    2. Set up a subscription for a bib record.
    3. Go to Serials -> Search your subscription -> Serial receive
    4. Note that below last expected issue there will be checkbox to toggle a field to
       specify how many issues to skip when recieving and generating the next.
    5. On serials-collection page there is also a button 'Skip issues and generate next'.
       When pressed will open a modal promting how many issues to skip.
    6. Generate issues with different values and make sure the correct issue is generated.
    
    ​Sponsored-by: Lund University Library
    Sponsored-by: Bibliotek Mellansjö, Sweden
    Co-authored-by: Johan Sahlberg <johan.sahlberg@tidaholm.se>
    
    Signed-off-by: Marie Hedbom <marie.hedbom@musikverket.se>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3f31f327cc2e68316db17256c3410045e832d6be
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Apr 29 12:05:52 2024 +0000

    Update docs/contributors.yaml with new contributor
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 04d3cf07a858a5efc129b2f78e62d8dd8148b742
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Apr 29 09:38:02 2024 +0100

    Bug 36341: (follow-up) Fix missing Date_from_syspref
    
    It appears this bug introduces the first actual use of this function in
    the OPAC and thus exposes that bug 31261 didn't fully port the
    Date_from_syspref from the intranet.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d1443e7601416b166130d537a85ea0714b509a61
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Feb 5 13:36:21 2024 +0000

    Bug 35993: Apply new routine to ModBiblioMarc
    
    Now both AddBiblio and ModBiblio will insert 005 if not present.
    
    Test plan:
    Run t/db_dependent/Biblio.t
    Add biblio record via acquistion order. Check 005 in the table
    biblio_metadata.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b0712cbd367e926011791a47113428814b855a50
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Feb 5 13:09:54 2024 +0000

    Bug 35993: Add SimpleMarc::update_last_transaction_time
    
    Note: This routine does not check field existence like
    ModBiblioMarc does/did (see next patch). So it inserts
    a field 005 if it is not present.
    
    Test plan:
    Run t/SimpleMARC.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 86d3a42a1cb0332b432c40bc27d30c81e9a76ead
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Apr 22 16:10:46 2024 +0000

    Bug 31671: Add print slip button to transfer page
    
    This patch reimplements/rebases Lucas' patch and adds a style
    modification to the button.
    
    To test:
    1. Apply patch
    2. Go to Circulation / Transfer
    3. Try transfering some items and notice the 'Print slip'
       button
    4. Try clicking on it and make sure it generates correctly and with the
       correct information on the slip
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 48d03a538dba59af096153e2d1a32c765c667278
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Apr 22 17:46:52 2024 +0000

    Bug 36671: (follow-up) remove stray anchor tag
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f3cf7c0de60d6256c7e3e0579082a622c74edf4c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Apr 22 16:05:50 2024 +0000

    Bug 36671: (follow-up) Add markup comments
    
    This patch adds comments to the template to highlight the markup
    structure.
    
    This patch should have no effect on the page's appearance or
    functionality.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ae0feb4c490bcb7ba0c294c96ad9f9522b0bf514
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Apr 22 16:05:21 2024 +0000

    Bug 36671: Reindent item transfer template (branchtransfers.tt)
    
    This patch reindents the item transfer template so that it has
    consistent indentation, with tab indentation coverted to space.
    
    To test, apply the patch and go to Circulation -> Transfer. Test some
    transfers, including transfers which trigger a hold notification.
    Everything should work correctly.
    
    If you view the diff while ignoring whitespace the only changes should
    be places where line breaks were introduced.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ebd00617e1ad2b331fca69172e9b04e4b3129cc3
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Apr 22 15:53:57 2024 +0000

    Bug 36663: Hide specific inner elements, not the whole top pager container
    
    1- Enable StaffDetailItemSelection
    2- Visit a biblio page:
    http://localhost:8081/cgi-bin/koha/catalogue/detail.pl?biblionumber=76
    3- Notice there are no table configuration options on the top right (Columns, Export, Configure).
    4- Click the "Show filters" link, notice the table configuration options now show, as well as top and bottom pagers, column filter inputs and search input.
    5- Disable StaffDetailItemSelection
    6- Visit a biblio page:
    http://localhost:8081/cgi-bin/koha/catalogue/detail.pl?biblionumber=76
    7- Notice that the table configurations options are visible, as well as top and bottom pagers, and search input.
    8- Click the "Show filters" link, notice it now only governs the column filter inputs, the other elements mentioned in step 7 are always visible.
    9- Apply patches, run yarn css:build
    10- Repeat 1 and 2.
    11- Notice the table configuration options are shown on the top right, and no other table options exist.
    
    Further testing:
    Test clicking hide/show filters
    Test with StaffDetailItemSelection enabled/disabled
    Test other datatables in other pages
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 940538a935aa0511d35e3da4b033c23a12f93a34
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Apr 22 15:53:11 2024 +0000

    Bug 36663: Update alignment of datatable buttons
    
    Pack items from the end
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3ec550f7e0bd8ff671d1d34b985aa394365bcbd8
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Apr 22 15:50:34 2024 +0000

    Bug 36663: Adjust datatable button selector
    
    This change makes the selector apply specifically to the 'clear filter' button, instead of whatever is the first button as 'clear filter' may or may not exist.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e0d38c77e6c9fff2d7c39cf523c1517b322ca9c7
Author: Phan Tung Bui <phan-tung.bui@inlibro.com>
Date:   Thu Apr 18 09:49:59 2024 -0400

    Bug 30598: remove all the console.log redundancies
    
    Please test the patch. Thank you!
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bed0563e568c4ee13a851d22025d66f36651beec
Author: Phan Tung Bui <phan-tung.bui@inlibro.com>
Date:   Fri Apr 12 16:53:24 2024 -0400

    Bug 30598: Replacement cost is not copied from retail price when ordering from file
    
    Test plan :
    To test :
    1- In Acquisitions, create a basket
    2- Add an order from a new (empty) record
     --> Note that when you enter the "vendor price", it is copied in the "replacement cost" field
    3- Add an order from a new file
     --> Note that when you enter the "price", the "replacement price" field stays empty
    4- Apply the batch
    5- Redo step 3 and notice that when you change the 'price', the
    'replacement price' syncs with it
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit feeaa09e236cd4ee2689a4bfdb01c44f744ebe74
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Nov 21 11:46:17 2023 +0000

    Bug 34792: Improve flexibility of CookieConsentBar layout
    
    This patch makes CSS and markup changes to the CookieConsentBar, in both
    the OPAC and staff interface, so that the layout of custom text and
    buttons works better with varying text content and varying browser widths.
    
    The patch also adds some JavaScript to the OPAC so that the cookie
    consent bar interacts better with the language selection footer. When
    the language selection footer is visible, the cookie consent bar should
    "stick" to the bottom of the viewport except when the page is scrolled
    all the way down. When the page is scrolled all the way to the bottom
    the cookie consent bar should move to the top of the language selection
    footer.
    
    To test, apply the patch and rebuild the OPAC and staff interface CSS.
    
    - Go to Administration -> System preferences and enable the
      CookieConsent preference if necessary.
    - Follow the link in the preference description to HTML customizations.
    - Create an HTML customization in the CookieConsentBar display location.
      Add a paragraph of text.
    - Go to the OPAC. If you don't see the cookie consent bar at the bottom
      of the screen you may need to clear your browser cookies and local
      storage.
    - Confirm that the text flows well in relation to the buttons: With a
      lot of text, the text expands to fill the width of the cookie consent
      bar and the buttons are below. With a small amount of text, the text
      and buttons should be side by side.
    - Test that this layout adapts well to various browser widths.
    
    - Perform the same tests in the staff interface.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 959ccf34379040ec564ea5098ccdd843afb4c73b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Nov 20 17:22:51 2023 +0000

    Bug 34792: (Preparation) Run stylelint fixes on cookie consent CSS
    
    This patch applies automated stylelint fixes to the OPAC CSS which was
    added when the Cookie Consent feature was added. No other CSS has been
    changed.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 62b48bb932a165bf01e7a0d0866ed2d92e90263e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Feb 12 08:01:26 2024 +0000

    Bug 10758: Show title of deleted biblio on basket page
    
    Test plan:
    Find a completed order line and a cancelled one with deleted biblios.
    Goto acqui/basket.pl
    Check if you see the title if deleted_biblionumber is filled.
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d9fd2ec2266f47e4eeaa588b7cc50a6dc7071fb7
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Tue Apr 16 17:19:13 2024 -0400

    Bug 36615: Terminology: use 'on hold' instead of 'reserved' in OPAC self checkout
    
    This patch changes the term 'reserved' to 'on hold' in the OPAC self
    checkout feature.
    
    To test:
    1. Apply patch
    2. Place a hold for a patron
    3. Enable OpacTrustedCheckout
    4. Log into the OPAC as another patron
    5. Click Self checkout at the top of the page
    6. Paste the item's barcode in the text input
    7. Click 'Submit'
    8. Make sure the warning sentence is correct and there are no spelling
       errors
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f49cf32238caae5c2ed1b3aad2b1558ddb667c2d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Apr 26 11:29:13 2022 +0000

    Bug 30623: Copy permissions from one user to another
    
    This patch adds controls to the patron "Set permissions" page allowing
    the user to copy a set of permissions from one patron to another.
    
    The patch also makes a minor correction to global staff interface CSS to
    correct the appearance of non-primary split buttons.
    
    To test, apply the patch and rebuild the staff interface CSS. You may
    want to clear your browser cache.
    
    - Locate a patron in the staff client and choose More -> Set
      permissions. You might want to start with a staff patron who has
      multiple permissions enabled.
    - You should see two new buttons in the toolbar immediately above the
      list of permissions: "Copy settings," a split button with a secondary
      option to choose "Forget copied settings"; and "Paste settings" which
      should be disabled by default.
    - Clicking the "Copy settings" button should trigger the copy icon to
      cycle/fade from the copy icon to the check-mark icon and back to the
      copy icon. I thought this interaction needed some visual feedback
      since it doesn't otherwise trigger visible action.
    - Clicking the "Copy settings" button should also enable the "Paste
      settings" button.
    - Locate another patron, preferable one with permissions visibly
      different from your first choice.
    - On their "Set permissions" page, click the "Paste settings" button.
      The list of permissions should expand all settings and all the
      checkboxes should now match your original choice.
    - At this stage you could find another patron and paste the same
      permissions again.
    - Click "Copy settings -> Forget copied settings." The "Paste settings"
      button should become disabled.
    - Using the browser console to check the contents of Local Storage
      should confirm that the "copiedPermissions" entry has been removed.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 96d0a4f99613ef4d9ef635246ac3262251fa0905
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 2 11:15:52 2023 +0000

    Bug 19097: (follow-up) Fix typo 'altough'
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d6011d6ae92bf1505719d695aa6715bfc54b4496
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Oct 30 13:00:01 2023 +0000

    Bug 19097: Adjust some GetMarcFromKohaField calls
    
    We need to:
    [1] Remove obsolete framework parameters if any (yes there are).
    [2] Check scalar context calls if any (most probably not).
    
    Ad 1:
    How to find them? Git grep and look at each hit. You will need the -C
    parameter to add a few context lines around the call even.
    
    Found one in C4/Biblio.pm and six in Suggestions.t with ''.
    Found one in C4/Items on a second line. Similar one in Koha/EDI.
    Note: sub receipt_items in EDI has no unit tests yet.
    
    Also did a few git searches like:
    git grep GetMarcFromKohaField | grep -v -P "GetMarcFromKohaField.*;"| grep -P "GetMarcFromKohaField\s*\("
    Note: Seeing still three lines; they are all fine. Last line comes from
    testing to trigger the warn.
    
    Ad 2:
    Have been looking at each git grep line and did not spot any
    scalar context call. Before this report, we had an example in
    POD and the Biblio test only.
    
    Try to find them by performing smarter git searches?
    Did look again at results for:
    git grep GetMarcFromKohaField | grep -v -P "\)\s*=\s*&?(C4::Biblio::)?GetMarcFromKohaField" | grep -v -P "use "
    The tests from this grep are included in the last test plan line.
    
    Test plan:
    Read the patch.
    Run t/db_dependent/Biblio/TransformHtmlToMarc.t
    Run t/db_dependent/Items.t
    Run t/db_dependent/Suggestions.t
    Run prove t/Biblio2.t t/db_dependent/Biblio.t t/db_dependent/Filter_MARC_ViewPolicy.t t/db_dependent/Koha/Authorities.t t/db_dependent/Koha/Biblio/Metadata.t t/db_dependent/Koha/Filter/EmbedItemsAvailability.t t/db_dependent/Koha/SearchEngine/Search.t t/db_dependent/XISBN.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7fc5e472512234007a465141cba8b50c9c92f494
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Oct 30 14:11:17 2023 +0000

    Bug 19097: Remove wantarray from GetMarcFromKohaField
    
    The routine should be called in list context now.
    Warns also about use of obsoleted framework parameter. This
    is the case for several years already btw. But may help us
    catch a forgotten occurrence? Can be removed later.
    
    In a follow-up we will check for second parameters and
    we will update calls in scalar context.
    
    Test plan:
    Prove t/db_dependent/Biblio.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d24ec0e26de5c9c58c0be566ecdea061577edfee
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Oct 30 13:20:14 2023 +0000

    Bug 19097: Remove wantarray from GetMarcSubfieldStructureFromKohaField
    
    Replacing wantarray by always returning all mappings.
    In a few cases only we expect multiple ones.
    Changing two calls to pick the first hit, and add comment about
    the implicit assumption being made (as before, no behavior change).
    
    Test plan:
    Look at results of git grep GetMarcSubfieldStructureFromKohaField
    Run t/db_dependent/Biblio.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2b58f18f64fd75aab037786f77c6c235265a7122
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 18 13:10:16 2024 +0000

    Bug 35646: (follow-up) Correct firstaquidate type
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit db7c4f85b631c0a690db7394f0b6b92c0520dab2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Dec 22 18:52:57 2023 +0000

    Bug 35646: Unit tests
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 15424f9b2f0b938aa507f45df1120ba8ab9e3b01
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Dec 22 18:20:09 2023 +0000

    Bug 35646: Allow use of publication date fields in serial numbering pattern
    
    This patch extends the numbering pattern field to accept subsititutions for:
    {Year} {Day} {DayName} {Month} {MonthName}
    
    These fields are based on the publication date for the serial issue.
    
    To test:
    0 - Apply patch
    1 - Setup a enw numbering pattern
        Serials->Manage numbering patterns + New numbering pattern
    2 - In the numbering formula enter: {X} {Y} {Z} {Year} {Month} {Day} {MonthName} {DayName}
    3 - Populate X/Y/Z in the table as you wish, these should be unaffected by patch
    4 - Set a Frequency /  First issue plublication date / Subscription length
    5 - Click 'Test pattern'
    6 - Confirm the dates in the Number match the publication date values
    7 - Try with different frequencies to confirm they match
    8 - Save the pattern
    9 - Create a new subscription and use the new pattern
    10 - Confirm it works as expected
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 36d96180aea6e71d24da116343cd37bd723e808f
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Jan 25 09:50:28 2024 +0100

    Bug 35903: In cataloguing authority plugin using autocomplete must set operator exact
    
    When cataloguing and using authority plugin, there is auto-completion on inputs and default operator is "contains".
    When using auto-completion and selecting a result it would be logical to set operator "exact".
    
    See doc https://api.jqueryui.com/autocomplete/#event-select
    
    This patch also adds auto-completion missing on "Search all headings".
    
    Test plan:
    1) Create a new authority Topical Term with heading "Cart"
    2) Create a new authority Topical Term with heading "Carthage"
    3) Create a new biblio record
    4) Use authority plugin on field 650
    5) You see current operator are "contains"
    6) Enter "Car" in "Search main heading ($a only):"
    7) You see auto-completion showing "Cart" and "Carthage"
    8) Click on "Cart"
    9) You see operator changes to "is exactly"
    10) Submit form to see the results
    11) Clear form and repeat 6-9 for the three other inputs
    
    Signed-off-by: Michelle Spinney <mspinney@clamsnet.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a750c254da7cbb7e30c8b14af5b1e364536054d7
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Sat Dec 16 16:11:50 2023 +0000

    Bug 35586: Added the collection to the location column in the OPAC cart
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 467968a08c50390edd89d03d59d3b5398a5419ed
Author: Andreas Jonsson <andreas.jonsson@kreablo.se>
Date:   Mon Jan 8 17:57:20 2024 +0100

    Bug 35727: Remove unused code in HoldsQueue::MapItemsToHoldRequests
    
    Test plan:
    
    prove t/db_dependent/HoldsQueue.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7f04a6222993294dab098812d0d1757acc6f4643
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Apr 29 07:35:17 2024 +0000

    Bug 36499: (follow-up) Update "Date last borrowed" to "Last checkout date"
    
    This makes the description on the item search form match with
    the column name in the results and avoids the "borrow" for the
    more Koha common term "checkout".
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6cade0f566a1445ef60cecc69983cbca0eb12a8d
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Thu Apr 4 13:26:06 2024 +0000

    Bug 36499: Added datelastborrowed column to item search results
    
    Test plan:
    1. Apply patch
    2. Checkout an item to a patron
    3. Perform an item search and either search as is, or add a “Last checkout date:” of today’s date for a more refined search.
        1. Notice that there is now a date last borrowed column by the date due column
        2. Export the table into a CSV and notice that there is also a date last borrowed column there
    4. Sign off and have an amazing day :D
    
    Signed-off-by: Michelle Spinney <mspinney@clamsnet.org>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cca7ede28ccd37a56f88b4953aed54304b88833d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 16 03:50:21 2024 +0000

    Bug 36605: Add update_lastseen to handle_patron_status for SIP
    
    This patch extends the TrackLastPatronActivity trigger to cover SIP status messages as well.
    Other SIP messages like Checkin/Checkout should be covered by those values in system preference, so
    should not need adjustment.
    
    To test:
    prove -v t/db_dependent/SIP/Message.t
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d09b3436e4653ccd6271343a49fb69b3dc218e0f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Apr 12 15:08:09 2024 +0000

    Bug 35511: (follow-up) Tweaks to CSS, adding aria-hidden to icons
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 40560b571d40c7e287c5ec6cee64044c0b347200
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Dec 6 17:26:27 2023 +0000

    Bug 35511: Add visual indicators of patron edit form collapsible sections
    
    This patch updates CSS and markup in the patron add/edit form so that
    there is better visual indication that sections can be collapsed by
    clicking headings.
    
    The JS function for showing and hiding sections has also been updated to
    reduce verbosity.
    
    Unrelated markup change for the sake of accessibility: A <label> has
    been added to the "Show collapsed fields" checkbox which is seen when
    CollapseFieldsPatronAddForm is active.
    
    To test, apply the patch and go to Patrons -> New patron.
    
    - Each section of the form should have an arrow indicator by the section
      heading indicating whether it is expanded or collapsed.
    - Mousing over the heading should show a border to help show the
      clickable region.
    - Clicking the header should collapse the section and the arrow
      indicator should change to reflect that the section is collapsed.
    - Go to Administration -> Sytem preferences and search for
      CollapseFieldsPatronAddForm.
    - Make some selections from the dropdown and save your changes.
    - Return to the patron entry form and confirm that your selections are
      collapsed by default.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit dfd4894acbab3af5355b72c859a0a17deef70af5
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jan 3 16:01:56 2024 +0000

    Bug 35689: Add id and classes to each MARC note in OPAC bibliographic details
    
    Building on Bug 14156, this patch updates the OPAC bibliographic
    detail page's display of MARC notes to add the tag number in both a
    class (for consistent styling across the same tag number) and id (for
    unique styling for each repeated tag).
    
    To test:
    
    - As a quick test for custom CSS, go to Administration -> System
      preferences and locate the OPACUserCSS preference.
      - Add this testing CSS:
    
       .marcnote { font-size:140%; font-family: serif; }
       .marcnote-500 { background-color: #66FFCC; }
       .marcnote-511 { background-color: #99FFFF; }
       .marcnote-520 { background-color: #CCFF00; }
       .marcnote-521 { background-color: #CCFFFF; }
       .marcnote-538 { background-color: #FFCCCC; }
       .marcnote-546 { background-color: #FFFFCC; }
    
    - Locate a record with multiple notes fields. In the sample data, record
      46, "Viridiana" is a good example which works well with the above CSS.
    - On the bibliographic detail page for the record, click the
      "Descriptions" tab.
      - Each MARC note should be colored according to the tag it comes from.
      - Inspect the HTML to confirm that each paragraph also has its own
        unique ID.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 98a269669c45045529e081d3e02e70403e1bf477
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jun 16 16:07:35 2023 +0000

    Bug 34082: Cut some redundancy in OPAC JavaScript string translations
    
    This patch consolidates some JS code so that we're not defining a string
    ine one place and using it once elsewhere. With JS-friendly translations
    tools we don't need this workaround.
    
    To test, apply the patch and go to Administration -> Circulation and
    fine rules.
    
    - Configure an item type rule with the "OPAC item level holds" setting
      set to "Force."
    - Log in to the OPAC and locate a record with that item type and
      multiple items. An example in the sample data:
      /cgi-bin/koha/opac-detail.pl?biblionumber=12
    - Place a hold on the item.
      - The holds screen should show a table of items.
      - Open your browser's developer tools.
      - In the Console tab, paste in this code and hit ENTER:
    
        $(".checkitem").prop("checked", false);
    
      - All radio buttons in the table of items should be cleared.
    - Click the "Confirm hold" button. You should get an alert:
      "Expecting a specific item selection."
    
    - Log in to the OPAC and click the "Search history" tab from the user
      summary page.
    - Check one or more checkboxes next to search history items and click
      the "Remove selected searches."
      - You should get an alert: "Are you sure you want to delete selected
        search history entries?"
    
    - Log in to the OPAC, create a new list if necessary, and add some
      titles to the list.
    - Test that confirmation messages show correctly:
      - Deleting a single title by clicking the "Remove
        from this list" link.
      - Deleting multiple titles by checking boxes and
        clicking "Remove from list."
      - Deleting a list.
    
    - In Administration -> System preferences, enable TagsEnabled if
      necessary.
    - Log in to the OPAC and tag one or more items.
    - From the Tag cloud page, check one or more boxes for your tags, and
      click the "Delete selected tags" button at the bottom of the page.
    - The confirmation message should display correctly.
    
    - To test the change to opac-account.tt you have to install a payment
      plugin, e.g.
      https://gitlab.com/thekesolutions/plugins/koha-plugin-pay-via-paypal,
      and attempt to submit a payment which is below the minimum payment
      threshold set in the plugin's configuration.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1fe9180c41f1a5d225640c6c20f5933b0e0b6ab4
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Apr 12 07:11:00 2024 -0400

    Bug 34032: (QA follow-up) Tidy code
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit db68d585928a8227955c62d7aca803951ba46d84
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Mon Nov 6 14:31:03 2023 +0200

    Bug 34032: Use reserves.patron_expiration_date if set
    
    If reserves.patron_expiration_date is set use it as holds
    expiration date when waiting status is reverted.
    
    To test:
    1. Apply this patch.
    2. Add hold for patron A and set expiration date manually.
    3. Check in item on hold for patron A and confirm hold was
    set as waiting.
    4. Revert holds waiting status.
    => Hold should still have expiration date you set manually
    in step 2.
    5. Check that you have DefaultHoldExpirationdate and other
    DefaultHold sysprefs set.
    6. Add hold for patron B, but this time do not set expiration
    date.
    7. Check in item on hold for patron B, revert waiting status.
    => Hold should now have expiration date set based on
    DefaultHold sysprefs.
    
    Also prove t/db_dependent/Hold.t.
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: Esther <esther@bywatersolutions.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 03efe5ba76c80b9ed64de58d292155053a80c012
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Wed Jun 21 14:36:08 2023 +0300

    Bug 34032: Set new expirationdate if waiting status is reverted
    
    When one reverts holds waiting status holds expiration
    date is not set even if DefaultHoldExpirationdate
    syspref is enabled. This patch adds new param
    hold_reverted to be used when RevertWaitingStatus is
    used to determine if expiration date should be set again.
    
    To test:
    1) Make sure you have DefaultHoldExpirationdate syspref enabled.
    2) Find hold with status "Waiting".
    3) Revert waiting status.
    => Note that hold has no expiration date set.
    4) Apply this patch.
    5) Repeat steps 2 and 3.
    => Expiration date should now be set based on reserve
    date.
    
    Also prove t/db_dependent/Hold.t.
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Esther <esther@bywatersolutions.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 875809d66d4e6bde5385d88aad9f05f472a67b6b
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Mon Feb 5 16:50:32 2024 +0000

    Bug 35996: Make it clear that --category-code can not be used alone
    
    This patch adds a clarification to writeoff_debts.pl to make it clear that --category-code can't be used as the only filter when running the script. If this is the case, the script just displays the help menu as it is expecting one of the other filters
    
    Test plan:
    1) Run perl misc/cronjobs/writeoff_debts.pl --category-code TEST --confirm
    2) Observe that the help menu is displayed instead of running the script
    3) Check the help menu for the text added in this patch
    
    WNC amended patch - added same warning in the option section
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f2204a1744513aa251ada33c375eef4849d45cd4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Apr 10 14:07:11 2024 +0200

    Bug 36565: EDI files API docs fixes (bug 30070 follow-up)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9d52416032658f425cb8d485fa48eea4a2b81b67
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Apr 10 14:04:57 2024 +0200

    Bug 36565: Preservation module API docs fixes (bug 30708 follow-up)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f2f789730af65d2d5a7a324b2123fb882acbef03
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Apr 10 14:04:12 2024 +0200

    Bug 36565: Biblio merge API docs fixes (bug 33036 follow-up)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit dcc0bd298d535baf609ebca4865904383510f00b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Apr 10 13:44:28 2024 +0200

    Bug 36565: ILL requests API docs fixes (bug 22440 follow-up)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d39af2fbaaffb7eafe61541e1f68afe1b8777df3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Apr 10 10:14:18 2024 +0200

    Bug 36565: Bookings API docs fixes (bug 29002 follow-up)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0d2a39376c511524fa9dae46d4f7122f37643fb0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Apr 10 13:39:55 2024 +0200

    Bug 36565: Unit tests
    
    This patch introduces tests on the OpenAPI spec so that all tags used in
    path definitions have their corresponding entry at the top level 'tags'
    section.
    
    This it important for correctly rendering the API documentation.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7577e6626824c98121fd229fcae6b4893e26b970
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Mar 28 12:00:14 2024 +0000

    Bug 35856: (follow-up) Expand display of radio button choices
    
    This patch swaps out the icons with tooltips with visible hints,
    expanding the radio button options to hopefully make it more readable.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3433ed94afd475ab3f82bbd01bb33e9a40f72d72
Author: Brendan Lawlor <blawlor@clamsnet.org>
Date:   Wed Jan 24 17:15:09 2024 +0000

    Bug 35856: added options to runtime parameter modal
    
    This patch adds radio checkboxes to the reports runtime parameter modal for adding param options :all and :in.
    
    The :in param option functionality depends on https://bugs.koha-community.org/bugzilla3/show_bug.cgi?id=35746
    
    Test plan:
    1. Apply patch
    2. Create a report from SQL
    3. Click Insert runtime parameter and choose any option other than date, list or text field
    4. Note the form now includes a radio checkbox for parameter options
    5. Choose 'Include option for all' and click Insert parameter
    6. Note the parameter is inserted with :all option like <<label|authval:all>>
    7. Choose 'Allow multiple selections' and click Insert parameter
    8. Note the parameter is inserted with :in option like <<label|authval:in>>
    9. Make sure that parameter options are not included on the form for date, list and text field
    
    Thanks!
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b4e36c1bcd26a1f8b3187de3f8e160e8b5c78844
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 26 16:04:35 2024 +0000

    Bug 30324: (follow-up) Remove stray comments
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d7afd1ca30231dfc5752ddeece123b8471d8b4a4
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jan 11 16:21:48 2024 +0000

    Bug 30324: Don't use default rule if we have a parent rule
    
    Currenty, if we find only a defult rule for a checkout we are ignoring the parent rule.
    We should not use the default if there is a parent rule
    
    To test:
     1: have an itype BK
     2: create an itype BK2, set BK as the parent to BK2
     3: create a circ rule for All Patrons, item type BK (displays as "Books (All)" in the circ rules interface), setting total checkouts to 1
     4: do not create any rule specifically for the BK2 itype
     5: have some BK items and some BK2 items
     6: check a BK item out to a patron
     7: check a BK2 item out to the same patron, observe you are not blocked from doing so
     8: try to check out a second BK2 item to the same patron, get message "Too many checked out. 1 checked out, only 1 are allowed."
     9: try to check out a second BK item to the same patrons, get message "Too many checked out. 2 checked out, only 1 are allowed."
    10: return both items
    11: check a BK2 item out to your patron
    12: try to check a BK item out to your patron, get message "Too many checked out. 1 checked out, only 1 are allowed."
    13: Apply patch
    14: Repeat 7, you are now blocked
    15: Other results should be the same
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Michael Adamyk <madamyk@ckls.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit afe8869d792c3e44fb38b85577b3fa21f7bf32c8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jan 11 14:50:35 2024 +0000

    Bug 30324: Unit tests
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5786aa7530690e027ffe4d924669bcfbe16b4aee
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Apr 26 17:16:34 2024 -0300

    Bug 31791: (follow-up) Fix Permissions.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3a3f1e7ee0d421ea8646083048bfcb92217dc1b4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Apr 26 17:10:21 2024 -0300

    Bug 36495: Fix erm_counter_files.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5432a590328546a4f7079e03d76e05c35d050bf3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Apr 26 17:06:44 2024 -0300

    Bug 36206: (follow-up) Fix Permissions.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0363d08a850f2d59cc9dd9b8a54d6bea1f7d7f83
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 26 17:29:30 2024 +0000

    Bug 35249: (follow-up) Use Asset.css to fix QA script failure
    
     FAIL   koha-tmpl/intranet-tmpl/prog/en/modules/admin/searchengine/elasticsearch/mappings.tt
       FAIL   forbidden patterns
                    forbidden pattern: intranet-tmpl should certainly replaced with [% interface %] (line 12)
                    forbidden pattern: Do *not* include full path to css files, use the Asset TT plugin (bug 20538) (line 12)
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 34bfbf051f40671171b6daab523cded470f17046
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 21 12:36:35 2024 +0100

    Bug 35249: Remove sort indicator on th
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit df7e310397f567a065ed67a04895d00a8d6f6b68
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 21 12:26:51 2024 +0100

    Bug 35249: Remove tableDnD from the about page
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0b33e87abc41b99d8a0111fd5a7d756f06ccbec6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 21 12:25:36 2024 +0100

    Bug 35249: Adjust table id and style
    
    We could eventually have a table for authorities, so better to have a
    specific table id.
    
    Also I think it's better to have the table smaller than taking the whole
    width
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 81d12ad2641a739623254d41357a42de969ecb29
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 30 17:53:41 2023 +0000

    Bug 35249: Use DataTables RowReorder extension instead of tableDND jQuery plugin
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 914afffd56b861727aff1309abc54b2950bdca0b
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Wed Apr 10 14:03:14 2024 +0200

    Bug 22613: Add GET endpoint /patrons/{patron_id}/checkouts
    
    This patch adds a new endpoint, for fetching checkouts from a specific
    patron.
    
    Test plan:
    
    1. Apply this patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/patrons_checkouts.t
    => SUCCESS: Tests pass!
    3. Run:
       $ curl -v -s -u koha:koha --request GET \
            http://kohadev.local/api/v1/patrons/{id}/checkouts
    test with query parameters (they are the same as for /patrons/{id}/holds
    => SUCCESS: The API works!
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5df4c0d34b0029b96c6e5937ac2d1966fc967577
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 26 17:08:32 2024 +0000

    Bug 33478: DBIC schema update
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 220a4a44e7d005f693697a10fb563a7b028faad3
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 26 16:59:58 2024 +0000

    Bug 33478: DBRev 23.12.00.032
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7491ef8247ea22ce43e75f4db035c4d835fc6b5c
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Mar 26 13:44:32 2024 +0000

    Bug 33478: (follow-up) Correct file permission
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 225a6747f0556bd4de4fbc0e5cb58001bc2dcb7b
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Thu Feb 29 01:30:06 2024 +0000

    Bug 33478: Consider TranslateNotices when saving notice styles
    
    This patch ensures saving styles per notice still works as expected when the TranslateNotices system preference is enabled.
    
    To test, enable the TranslateNotices system preference and attempt to save different CSS for each installed language for one notice. Confirm the correct CSS is saved for the correct language.
    
    Confirm the CSS selector helpers are inserted into the textarea as expected.
    
    Confirm the 'Apply format settings to all notices for this language' setting works, as in CSS is saved for all relevant language notices.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c6cb14b3c6f5fc16de2bb97d9739e1692a894495
Author: Aleisha Amohia <aleisha@catalyst.net.nz>
Date:   Thu Oct 19 04:11:09 2023 +0000

    Bug 33478: Make styles apply per notice
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e6b0eba92fcbe9581cf54adab8aa2d6ca2605f48
Author: Aleisha Amohia <aleisha@catalyst.net.nz>
Date:   Sun Nov 12 21:26:42 2023 +0000

    Bug 33478: Apply formatting to AR_SLIP
    
    To test:
    
    1. Enable ArticleRequests system preference in Koha Administration -> Global system preferences
    2. Log into the OPAC
    3. Do a catalogue search
    4. Click the 'Request article' button for a record
    5. Fill in some information and submit
    6. Go to the staff interface
    7. Go to Circulation -> Article Requests
    8. Click the Actions menu next to your article request and choose Print slip
    9. Confirm your format settings for AR_SLIP are applied
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 285ee251210013ba959ccef0dceb2a1164d34356
Author: Aleisha Amohia <aleisha@catalyst.net.nz>
Date:   Sun Nov 12 21:37:02 2023 +0000

    Bug 33478: Apply formatting to RECALL_REQUESTER_DET
    
    To test:
    
    1. Enable UseRecalls system preference and configure all relevant recalls circulation and fines rules
    2. Search for a record with only one item
    3. Check out this item to Patron A
    4. Log into the OPAC as Patron B
    5. Search for the item and place a recall
    6. Go back to the staff interface
    7. Check in the item
    8. When the pop-up for the recall is triggered, confirm recall and print slip
    9. Confirm your format settings for RECALL_REQUESTER_DET are applied
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6d6de01890e8901507944a246ac1d76f87bbc5d8
Author: Aleisha Amohia <aleisha@catalyst.net.nz>
Date:   Sun Nov 12 21:35:58 2023 +0000

    Bug 33478: Apply formatting to ACCOUNTS_SUMMARY
    
    To test:
    
    1. Go to a patron accounting page
    2. Create a manual invoice and Save
    3. Click the Print button in the patron toolbar
    4. Click the 'Print account balance' button
    5. Confirm your format settings for ACCOUNTS_SUMMARY are applied
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4314b5012c90048272f5a1737fc326635fe372cc
Author: Aleisha Amohia <aleisha@catalyst.net.nz>
Date:   Sun Nov 12 21:34:51 2023 +0000

    Bug 33478: Apply formatting to RECEIPT
    
    To test:
    
    1. Enable EnablePointOfSale and UseCashRegisters system preferences in Koha Administration -> Global system preferences
    2. Go to Koha Administration -> Cash registers and add a new cash register
    3. Go to Koha Administration -> Debit types and add a new debit type. Make sure you check the 'can be sold' option
    4. Go to Point of sale
    5. Select Add for your item under Items for purchase
    6. Fill in Collect payment box and click Confirm
    7. When payment is received, click Print receipt
    8. Confirm your format settings for RECEIPT are applied
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6b9c43ec7da65f440f3d4f76e207bd3fc48726ee
Author: Aleisha Amohia <aleisha@catalyst.net.nz>
Date:   Sun Nov 12 21:33:29 2023 +0000

    Bug 33478: Apply formatting to ACCOUNT_CREDIT
    
    To test:
    
    1. Go to a patron accounting page
    2. Create a manual invoice and Save
    3. You'll be redirected to the Transactions tab
    4. Click the Pay button next to your invoice and confirm Payment
    5. Click the Print button next to your Payment
    6. Confirm your format settings for ACCOUNT_CREDIT are applied
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 291f001e14f60d10e34b88d6f682c45014d38360
Author: Aleisha Amohia <aleisha@catalyst.net.nz>
Date:   Sun Nov 12 21:32:13 2023 +0000

    Bug 33478: Apply formatting to ACCOUNT_DEBIT
    
    To test:
    
    1. Go to a patron accounting page
    2. Create a manual invoice and Save
    3. You'll be redirected to the Transactions tab
    4. Click the Print button next to your invoice
    5. Confirm your format settings for ACCOUNT_DEBIT are applied
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 61a608f2255dfef09486f11aedd519a0e2eb63d7
Author: Aleisha Amohia <aleisha@catalyst.net.nz>
Date:   Sun Nov 12 21:28:36 2023 +0000

    Bug 33478: Apply formatting to OVERDUES_SLIP
    
    To test:
    
    1. Check out an item to a user. Set the due date to a time in the past so it is overdue
    2. Click Print in the members toolbar, then Print overdues
    3. Confirm your format settings for OVERDUES_SLIP are applied
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e2377d67f4e99fab1cc83fee5e854de64630a518
Author: Aleisha Amohia <aleisha@catalyst.net.nz>
Date:   Sun Nov 12 21:27:54 2023 +0000

    Bug 33478: Apply formatting to TRANSFERSLIP
    
    To test:
    
    1. Search for an item that was last seen at a library different from your logged in library i.e the holding library is Fairview but your logged in library is Centerville
    2. Use the barcode to check in the item
    3. When the popup to 'please return this item to <home library>' is triggered, click the Print slip button
    4. Confirm your format settings for TRANSFERSLIP are applied
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 34a6450693ab7534ea83d6eb571fa95de23284d1
Author: Aleisha Amohia <aleisha@catalyst.net.nz>
Date:   Sun Nov 12 21:24:53 2023 +0000

    Bug 33478: Apply formatting to HOLD_SLIP
    
    To test:
    
    1. Place a hold on a record
    2. Check in an item attached to the record
    3. When the pop-up for the hold is triggered, confirm hold and print slip
    4. Confirm your format settings for HOLD_SLIP are applied
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 258f18c9e58cf6a75ff1c05ebd4df33cc26434e4
Author: Aleisha Amohia <aleisha@catalyst.net.nz>
Date:   Sun Nov 12 21:15:20 2023 +0000

    Bug 33478: Apply formatting to ISSUESLIP, ISSUEQSLIP, CHECKINSLIP
    
    To test:
    
    1. Check out an item to a patron
    2. Click Print in the members toolbar, then Print quick slip
    3. Confirm your format settings for ISSUEQSLIP are applied
    
    4. Click Print in the members toolbar, then Print slip
    5. Confirm your format settings for ISSUESLIP are applied
    
    6. Return the item
    7. When the item is checked in, click the 'Print checkin slip' button
    8. Confirm your format settings for CHECKINSLIP are applied
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e441aba31549fe4a572cf548221e7a4c5ee74875
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Apr 18 04:52:46 2023 +0000

    Bug 33478: Save notice format settings
    
    Save format settings for an individual notice, or for all notices
    This patch implements a single style field for a slip to allow for advanced CSS customisation of printed notices. There are links to insert selectors as helpers. Styles can be applied for an individual notice, or all notices.
    
    To test:
    
    1. Apply the patches, install database updates, update schema if needed, and restart services
    2. Go to Tools -> Notices and slips
    3. Edit any notice
    4. Go to the Format tab
    5. Confirm there is a textarea for CSS, and links to insert helpful selectors for IDs like #receipt and #slip
    6. Add some CSS and confirm it saves.
    7. Test that 'apply these settings to all notices' option works. Test the confirmation box appears when this is checked.
    8. Add a new notice and confirm CSS settings save successfully
    9. The subsequent patches have specific testing plans for each printable notice. For each, confirm that SlipCSS stylesheet changes are applied first. Specific notice styles should be applied last.
    10. Test with a non-HTML notice as well, such as RECALL_REQUESTER_DET. Plain (non_HTML) notices have always come with <pre> tags around them so the text is formatted slightly differently but any CSS from SlipCSS or the notice Format should still hold.
    
    Sponsored-by: Colorado Library Consortium
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b251a12a372d600700a8c3994810b8273f598e27
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 26 16:32:51 2024 +0000

    Bug 31791: DBRev 23.12.00.031
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8525f8aaa0a188a6b379aa1f18d050d93d026710
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Mar 20 11:34:20 2024 -0300

    Bug 31791: (follow-up) Tidy AddBiblio
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Arthur Suzuki <arthur.suzuki@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 911068670beae1734856a09c1c7107d346265cb0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Mar 20 12:52:25 2024 +0000

    Bug 31791: Display record source on the detail view
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Arthur Suzuki <arthur.suzuki@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7e64e01515c58961cb9e70a30e74305605db5afe
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Mar 20 09:50:39 2024 -0300

    Bug 31791: Add Koha::Biblio::Metadata->record_source
    
    This patch adds a method for retrieving the related *Koha::RecordSource* from a *Koha::Biblio::Metadata* object.
    
    The method is covered by tests:
    
    1. Apply this patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/Koha/Biblio/Metadata.t
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Sponsored-by: ByWater Solutions
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Arthur Suzuki <arthur.suzuki@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a054c569dd0579187f28efa66d763cb4cd06d8d3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Feb 8 20:18:35 2024 -0300

    Bug 31791: Add x-record-source-id header to POST /biblios
    
    This patch adds support for setting the record source on the API. It
    does so by adding support for a new header `x-record-source-id`.
    
    Setting the record source is restricted to patrons with the
    `set_record_sources` permission.
    
    A 403 error is returned on an attempt to set it without the correct
    permissions.
    
    The feature is documented on the spec.
    
    To test:
    1. Apply this patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/biblios.t
    => SUCCESS: Tests pass! Tests cover the right use cases!
    3. Play with Postman (or similar)
    4. Sign off :-D
    
    Sponsored-by: ByWater Solutions
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Arthur Suzuki <arthur.suzuki@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cb8f95bce0408927abce0ee0abbbe2c66dfc7fa8
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Feb 8 20:18:07 2024 -0300

    Bug 31791: Add 'source_record_id' param to {Add,Mod}Biblio(Marc)
    
    Sponsored-by: ByWater Solutions
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Arthur Suzuki <arthur.suzuki@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 03384fdcc7f519ce669cc5139ba05fd8cdecb22f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Feb 7 11:06:32 2024 -0300

    Bug 31791: Limit editing locked records
    
    Sponsored-by: ByWater Solutions
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Arthur Suzuki <arthur.suzuki@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8d986f066e96b615c0a55921eb085a8812dc5614
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Feb 2 17:13:47 2024 -0300

    Bug 31791: Add edit_locked_records and set_record_sources subpermissions
    
    Sponsored-by: ByWater Solutions
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Arthur Suzuki <arthur.suzuki@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7caa0fe66d2260217f7dd98b9e4f10188535e80e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Feb 2 16:26:28 2024 -0300

    Bug 31791: Add record locking based on source
    
    Sponsored-by: ByWater Solutions
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Arthur Suzuki <arthur.suzuki@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 28a2f48ea82f05e1f51fd0efce378e10bcf414d4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Feb 2 16:24:58 2024 -0300

    Bug 31791: DB changes
    
    Sponsored-by: ByWater Solutions
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Arthur Suzuki <arthur.suzuki@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e8595f9d622c5126bc1b3be931c1c8ba032311bb
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Feb 2 16:23:42 2024 -0300

    Bug 31791: Add Koha::Biblio->can_be_edited
    
    Sponsored-by: ByWater Solutions
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Arthur Suzuki <arthur.suzuki@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 048eb5fa958f1d93e0690df9c4d81d36abe0e5e8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 10 12:10:00 2022 +0200

    Bug 31335: Remove unnecessary holds fetch from routing-preview
    
    This $count variable is not used later, and I didn't find why it was
    there in previous versions.
    
    Test plan:
    Use `git log -p serials/routing-preview.pl` and confirm we can remove
    this block
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 76f2214ff7cfc3c004d77aa854b9c05454c94fc1
Author: Brendan Lawlor <blawlor@clamsnet.org>
Date:   Fri Apr 26 15:03:51 2024 +0000

    Bug 35746: (follow-up) Fix invalid tt in html tag
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 521c9294cc726c4f494d0be2e0ba3c4c4effc021
Author: Brendan Lawlor <blawlor@clamsnet.org>
Date:   Tue Feb 20 15:37:40 2024 +0000

    Bug 35746: add multiselect to report dropdowns
    
    Rebased for changes to guided_reports_start.tt
    
    This patch adds the ability to use multi select in report dropdowns.
    
    It uses syntax similar to using a list and when using the :all option
    WHERE i.homebranch in <<Select libraries|brnaches:in>>
    
    Test plan:
    1. Create an SQL report with with new syntax for multi select
        SELECT
        i.homebranch,
        count(*)
        FROM items i
        WHERE i.homebranch in <<Select libraries|branches:in>>
        GROUP BY i.homebranch
    2. Save the report
    3. Note that you get the error
        The authorized value category (branches:in) you selected does not exist.
    4. Apply the patch and repeat steps 1 and 2
    5. Note the report saves successfully
    6. Run the report
    7. Note the select dropdown is now a multiselect
    8. Run the report with multiple selections
    10. Click show SQL and note that multi select parameters get inserted into the query like:
         WHERE i.homebranch in ('CPL', 'FFL', 'FPL')
    11. Test other types of queries with multiple multi selects and lists etc
    
    Sponsored-by: CLAMS
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b8fad11426a69de560c5e5cf04e67e055f3bb58c
Author: Andreas Jonsson <andreas.jonsson@kreablo.se>
Date:   Wed Mar 13 12:09:39 2024 +0100

    Bug 35826: Make copy of cost matrix when substituting inf
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 927c0680b9f52d04ea219453f01a24a5b445ce88
Author: Andreas Jonsson <andreas.jonsson@kreablo.se>
Date:   Sun Mar 10 19:50:13 2024 +0100

    Bug 35826: Add unit tests.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2382eaff2872ac06d4ff9df40e6ec31b0bbac2a5
Author: Andreas Jonsson <andreas.jonsson@kreablo.se>
Date:   Sun Mar 10 19:49:40 2024 +0100

    Bug 35826: Keep items on retry.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6903f00099c9b32a4902c7482b9bafe1e3d49f8b
Author: Andreas Jonsson <andreas.jonsson@kreablo.se>
Date:   Thu Feb 8 20:13:42 2024 +0000

    Bug 35826: Fix errors in transport cost optimization
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2ce4247d3e23d60e06ef629c4c66bd1d5aa95b37
Author: Andreas Jonsson <andreas.jonsson@kreablo.se>
Date:   Sun Jan 21 19:47:55 2024 +0000

    Bug 35826: optimize on transport cost when building holds queue
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 61816873bb44e53fdfdca806535bf3040c41f1a9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Apr 9 08:56:00 2024 +0200

    Bug 36505: (follow-up) Consistent error codes in POST
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 466882a6a2eef95ef08b8249f9144ddeabd6b83e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 8 15:23:17 2024 +0200

    Bug 36505: Add support for `extended_attributes` in PUT /patrons/:patron_id
    
    This patch does what the title says. With it, you will be able to PUT on
    the already existing endpoint, but also pass:
    
    ```json
    [ { "type": "THE_TYPE", "value": "a" }, ... ]
    ```
    
    Bonus: to ease testing I added `x-koha-embed: extended_attributes`
    support.
    
    To test:
    1. Apply the unit tests
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/patrons.t
    => FAIL: This is not implemented!
    3. Apply this patch
    4. Repeat 2
    => SUCCESS: Exhaustive testes pass!
    5. Sign off :-D
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 706246504cbd7af1849292be13cd5a9c264f3919
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 8 15:22:31 2024 +0200

    Bug 36505: Unit tests
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 658161f63741f4b96075f023236c3079bf8932eb
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 26 15:41:02 2024 +0000

    Bug 36495: (follow-up) Terminology: COUNTER is an abbreviation
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bb879d3d053a03461c84ccc7e519b51b18579494
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Apr 2 19:11:49 2024 +0000

    Bug 36495: Use render_resource_deleted() helper everywhere
    
    This patch makes the API controllers use the render_resource_deleted() helper.
    
    No behavior changes are expected.
    
    To test:
    1. Apply this patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1
    => SUCCESS: Nothing broke
    3. Sign off :-D
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cd3c5fcce9c557f0aa4d017a2f2273a4a68539a0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Apr 2 18:22:52 2024 +0000

    Bug 36495: Use render_resource_not_found() helper everywhere
    
    This patch makes the existing controllers use the new helpers for (most) 404 situations.
    The remaining ones are subject to discussion.
    
    To test:
    1. Apply this patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fc7b6d9eb56436417280809fa06467c367615291
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Apr 2 15:18:16 2024 -0300

    Bug 36495: Add render_resource_not_found() and render_resource_deleted() helpers
    
    This patch introduces two helpers to be used in controllers.
    
    To test:
    1. Apply this patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/responses.t
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 39879cd5cf1d46ee57e5ab22e1770c9d5c98b6ae
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Apr 4 11:14:11 2024 +0000

    Bug 36482: Add embed tests
    
    prove t/db_dependent/api/v1/libraries.t
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8cd64b5dd689175a68a8a4b7f6f843cad2d271f0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 1 18:08:46 2024 -0300

    Bug 36482: Make embedding work for GET /libraries/:library_id
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 588ef525f3283fc49661597775b7dbfea1b08753
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 1 18:08:13 2024 -0300

    Bug 36482: Allow embedding desks and cash_registers on libraries endpoints
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ee52b5c252c4fc5defadc28922c422ffd85b1877
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 1 20:52:46 2024 +0000

    Bug 36481: Add GET /libraries/:library_id/cash_registers
    
    This patch adds the mentioned route. For the task it:
    
    * Adds Koha::Cash::Register->to_api_mapping with trivial mappings
    * Adds a cash_register object definition on the API spec
    * Adds a controller to handle requests
    * Adds tests for the new endpoint
    
    To test:
    1. Apply this patch
    2. Run:
       $ ktd --shell
      k$ qa
    => SUCCESS: All green! Tests pass!
    3. Play with Postman!
    4. Sign off :-D
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit afd83c134e2ef4759d0512f713d4f4911f0190f0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 1 20:24:35 2024 +0000

    Bug 36480: Add GET /libraries/:library_id/desks
    
    This patch adds the mentioned endpoint. For it, it does:
    
    * Add Koha::Desk->to_api_mapping
    * Add desk.yaml with the correct data structure for desks
    * Add the route to the spec
    * Add tests
    
    Note: Lucas and I had doubts about the right return value for when the feature is disabled.
    I opted for returning 404 with a message telling the feature is disabled. This can be discussed.
    
    To test:
    1. Apply this patches
    2. Run:
       $ ktd
      k$ qa
    => SUCCESS: All green, all tests pass!
    3. Play with this using Postman.
    4. Sign off :-D
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7f7f486d94e52eb50d070ccead61c94928aeff28
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 1 20:22:22 2024 +0000

    Bug 36480: Add Koha::Library->desks
    
    We add an accessor for the related desks. Tests are added.
    
    To test:
    1. Apply this patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/Koha/Library.t
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7a32231a52d9d1d5007ad574b8e3b48fd4c99878
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Mar 25 16:42:18 2024 +0100

    Bug 35353: Add REST API endpoint to retrieve old holds
    
    Same as checkout but for holds, we need to provide a way to retrieve old
    holds for a patron.
    
    Test plan:
    Create some holds for a patron, cancel and fulfill some, then use the
    REST API endpoint with the new 'old' flag set to 1
      /api/v1/patrons/42/holds?old=1
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6fb82fd6e32d0f38f24463c31adf546efe153bc3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Dec 20 11:23:52 2023 +0100

    Bug 35353: DBIC specific
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 747c9b573b828ee6d38f5085ac6bdbb82f0e3305
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 14 15:01:39 2024 +0100

    Bug 35558: Do not retrieve the local image if none exists - OPAC
    
    Test plan:
     1 - Enable system preferences:
         LocalCoverImages
         OPACLocalCoverImages
     2 - open browser tools network page
     3 - Perform an intranet search
     4 - Note a request for each bib like:
        http://localhost:8081/cgi-bin/koha/catalogue/image.pl?thumbnail=1&biblionumber=35
     5 - Repeat on opac, same requests
     6 - Apply patches
     7 - Restart all
     8 - Repeat searches, note no fetches
     9 - Add local cover images to several biblios in the results
    10 - Repeat searches
    11 - Note the fetches are only for those records with images
    12 - Confirm images still load correctly
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8cde45e0723a4b34bdf26c7ef4cfd2d8e767c837
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Dec 13 11:10:24 2023 +0100

    Bug 35558: Do not retrieve the local image if none exists
    
    On the search results we are fetching the thumbnails of the local cover
    images using catalogue/image.pl
    Which means 1 GET per results on the page.
    
    This patch suggests to have this information beforehand in order to
    reduce the number of hits and network traffic?
    
    However the page load will be slightly slower ofc.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 86e6f8451fb90ceafdef8879c77ecc27e1a44769
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Wed Mar 27 19:55:26 2024 +0000

    Bug 36443: Add a fax field / column to the batch patron modification tool
    
    To test:
    1. Create or modify an existing patron account so that they have a
       value in their fax number field.
    2. Go to Tools > Batch patron modification
        1. Add the patron card number, or borrower number into the
           modification tool and click on continue. There is no option for
           modifying fax numbers, nor are fax numbers visible in the
           modification table.
    3. Apply the patch and restart_all
    4. Repeat step 2
        1. A column for ‘Fax’ is now visible after ‘Other phone’
        2. Test the ‘Fax’ field by clearing out the field with the checkbox.
           ‘Checking the box right next to the label will disable the entry
           and delete the values of that field on all selected patrons.’
        3. Test the ‘Fax’ field by updating the value with a new number
    5. Sign off and have a wonderful day :)
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6a18121ef8050a8ea3e6440667ee3a08b4872950
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 26 15:12:09 2024 +0000

    Bug 35728: DBRev 23.12.00.030
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fc8bf12e97b642900eda4056166e885e58cc4202
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Jan 8 23:04:25 2024 +0000

    Bug 35728: Add ability to NOT redirect to result when search returns only one record
    
    This enhancement adds a new system preference RedirectToSoleResult. By default it is enabled, which matches current behaviour - to redirect to the detail page if it is the only search result.
    
    To test:
    
    1) Apply the patch, install database updates, restart services.
    2) Go to Koha Administration -> Global system preferences. The RedirectToSoleResult system preference is in the Searching tab. Confirm it is enabled (set to "Redirect") by default.
    3) Conduct a catalogue search on the staff interface that you know will return a single result. Confirm you are redirected to the detail page.
    4) Do the same search on the OPAC. Confirm you are redirected to the detail page.
    5) Go back to the system preferences and disable the RedirectToSoleResult system preference by setting it to "Don't redirect"
    6) Do the searches again on the staff interface and OPAC. Confirm you are NOT redirected to the detail page, and the search results page shows as expected.
    
    Sponsored-by: Education Services Australia SCIS
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6d5d204d0316aebe4399c741a0e086a9f3592e72
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Jan 8 23:03:48 2024 +0000

    Bug 35728: Add RedirectToSoleResult system preference
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 26ab7088c30b1e42137f61a5e16de9889a0d6f18
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Apr 23 13:34:10 2024 +0000

    Bug 33703: (follow-up) Fix typo in calendar.inc
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b9b8b88370207ccb7b2c150dad00e605ad42c467
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Apr 22 14:22:24 2024 +0000

    Bug 33703: Add Maskito to about.tt
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 728c75c833535f9a7630e783896af37f2d12e06c
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Mar 4 18:39:35 2024 +0000

    Bug 33703: Add Maskito support for OPAC
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b89c6940cf3a6a5ed31e1927edb566b86cac43e1
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Mar 4 18:19:30 2024 +0000

    Bug 33703: Add Maskito to dateaccessioned.pl
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 173fedce312702e36c2464699701ef17f3b3b2be
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Mar 4 18:05:40 2024 +0000

    Bug 33703: Don't use Maskito when picking a range
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 25d8e9ee59f79dfa2bf3d244c3f4fdb5eefd1309
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Jan 31 00:51:04 2024 +0000

    Bug 33703: Add time support
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a14527777da9eeb494e2121827f5310b20decae7
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Jan 30 00:44:27 2024 +0000

    Bug 33703: Add Masikto core/kit for date masking
    
    To test:
    1. Apply patch
    2. Restart all, clear browser cache
    3. In the staff interface start testing some flatpickr instances with direct inputs.
    4. Try entering your dates without delimiters, '/' or '-', or '.'.
    5. Make sure the dates are well formed.
    6. Test with each of dateformat's Koha supports. ( system preference 'dateformat').
    7. Add/edit an item with the dateaccessioned.pl plugin loaded, making the dates are well formed.
    8. Make an item bookable by going to the item tab of a record and setting at least 1 item to "Bookable:".
    9. Now "Place booking", which should trigger a modal.
    10. In the "Period" date picker, which is a range, the dates should NOT be formatted.
    11. Log in to the OPAC and try some date pickers ( self reg/borrower mod/ect )
    
    Some places to test:
        -Patron record date of birth
        -Patron record registration date
        -Patron record expiry date
        -Checkouts, manually set a due date
        -Patron category, enrollment period
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 780ca530c64a9600ca31e07ae84e7d329849991c
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 26 13:30:02 2024 +0000

    Bug 35919: DBIC schema update
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0084f1309cf942d1bb68bcf30c197b5450366ac2
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 26 13:09:53 2024 +0000

    Bug 35919: DBRev 23.12.00.029
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a1d4e3a689fd3442e67ba7bdffbcc119ef95521a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 22 09:25:08 2024 -0300

    Bug 35919: (QA follow-up) Address QA concerns
    
    This patch:
    
    * Adds the missing entry in permissions.inc
    * Moves the configuration entry above 'Record overlay rules'
    * Adds the 'Record sources' link to the left navigation column, in the
      right position.
    * Makes the <title> element be constructed the same way the 'cities'
      page is.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fbdd2fcba00b71f9f55238245fab2d186b30784a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 19 12:24:21 2024 +0100

    Bug 35919: Fix cypress tests
    
    And remove "remove", "delete" inconsistency
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5f927d615f461c44b366270ff263c940414bc661
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 19 12:17:49 2024 +0100

    Bug 35919: Adjust h1
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 793dd17e291f601f0e63c2ccdfe3beb022bef700
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jan 25 12:29:37 2024 -0300

    Bug 35919: Add Koha::Biblio::Metadata->source_allows_editing
    
    This patch adds a convenient method that tells if the record is
    editable, according to it's record source.
    
    To test:
    1. Apply this patch
    2. Run:
       $ ktd
      k$ prove t/db_dependent/Koha/Biblio/Metadata.t
    => SUCCESS: Tests pass! Use cases covered!
    3. Sign off :-D
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Bug 31791: Rename can_be_edited -> source_allows_editing
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 389debc4cdd6399831bab227be019cedd8765ca2
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue Feb 27 09:30:58 2024 +0000

    Bug 35919: Add superlibrarian permission to Permissions.t
    
    Permissions.t was failing when running a jenkins build to another branch with this bug applied. Permissions.t was missing the permission for record sources and is now added in this patch
    
    Test plan:
    1) prove t/Koha/Auth/Permissions.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit af6b4e1a41ee2fe154320645813038894d0c6ba4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jan 24 16:18:55 2024 -0300

    Bug 35919: Add cypress tests
    
    This patch adds Cypress tests for the `record sources` CRUD as required
    by QA.
    
    I tried to cover all the UI interactions and behaviours.
    
    To test:
    1. Have all the patches applied
    2. Run:
       $ ktd --shell
      k$ cypress run --spec t/cypress/integration/Admin/RecordSources_spec.ts
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 149a6da9ec0508404617bbf400e6c73fff5ce192
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jan 24 16:18:13 2024 -0300

    Bug 35919: Add record sources admin page
    
    This patch introduces a Vue.js based record sources managing page. To
    test it:
    
    1. Apply this patch
    2. Build the Vue.js stuff:
       $ ktd --shell
      k$ yarn js:build
      k$ restart_all
    3. On the staff interface, go to Administration > Record sources
    4. Play with the interface and the offered actions
    => SUCCESS: Things go well
    5. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 07a12da11a2177f4bf1b4b4ee17e054d1f7b1f5b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jan 24 16:17:17 2024 -0300

    Bug 35919: Add /record_sources endpoints
    
    This patch introduces endpoints for managing record sources. This is
    done on top of Koha::RecordSource(s) following the current coding style.
    
    To test:
    1. Apply this patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/record_sources.t
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 47817e3bc5c31d21a1759157d46c51422adad418
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jan 24 16:16:36 2024 -0300

    Bug 35919: Add Koha::RecordSource(s) classes
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5609cbdd9a6ae7d226e40fc4e032a8994fd9bdc7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jan 24 16:12:52 2024 -0300

    Bug 35919: DB changes
    
    This patch adds:
    
    * A new table: `record_sources`.
    * A new user permission: `manage_record_sources`.
    * A FK on record_sources.recour_source_id on the biblio_metadata tables
    
    Record sources will contain a name and (for now) a flag telling if
    records from the specific source can be manually edited.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 764675e06c3c249bf75584dc06d26ae67c1054ee
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 17 11:18:27 2023 +0000

    Bug 35348: Remove cookie consents link from opac consents
    
    The cookies details modal is now visible for all users from a footer
    link, we no longer need it under the 'Consents' tab for logged in users.
    
    Test plan
    1) Enable CookieConsent and add a placholder tracker cookie to
       CookieConsentedJS preference
    2) Log into the OPAC
    3) Note that the 'Consents' link no longer appears in the users page.
    4) Enable 'PrivacyPolicyConsent'
    5) Note that the 'Consents' link now appears but on navigating to it
       there is no link for Cookie consents.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 992a0b7155dc44ad4e7f100ef8154afcc0d901f3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 17 11:08:08 2023 +0000

    Bug 35348: Ensure users can access cookie details in staff client
    
    We remove the check on JSConsents content so that when cookie consent is
    enabled we retain the option for users to get more information about
    what cookies are being used.
    
    Test plan
    1) Enable CookieConsents
    2) Do not add any tracking cookies for the staff client into
       CookieConsentedJS preference
    3) Note that 'My consents' appears in the user menu
    4) Clicking 'My consents' opens the 'Cookie consent' modal displaying
       information about the cookies used.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f00879c0f65e916cab60579a571d40a449693859
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Nov 16 17:24:27 2023 +0000

    Bug 35348: Add cookies link to opac footer
    
    This patch adds a link that opens the cookies info dialogue to the opac
    footer when the CookieConsent feature is enabled.
    
    Test plan
    1) Enable CookieConsent
    2) On the OPAC you should now see a 'Cookies' link at the bottom of the
       page.
    3) Clicking the link should open the "Cookie consent" modal where you
       can see the details of the cookies you have accepted and change your
       choices.
    4) Bonus points: Enable 'OpacProblemReports' and note it aligns left of
       'Cookies' in the same footer bar.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0ff70e0b0ca35a2c91fe4e971a911002ee7241c7
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 26 12:05:45 2024 +0000

    Bug 16122: DBRev 23.12.00.028
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 27250cd03636059b82f46a7c3287fbbe83d5df13
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Mar 18 10:16:15 2024 +0000

    Bug 16122: Add note to database update to point out new script
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f8b5c5029a619b4667a0550201771042ca6946e4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Mar 18 10:06:25 2024 +0000

    Bug 16122: Tidy changed code blocks
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1123d26d093afd01ba49844505a9d41aa7de7204
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Mar 11 23:34:55 2024 +0000

    Bug 16122: Add unit test
    
    To test:
    1. Apply patch, updatedatabase & schema, restart all Services
    2. Go to Administration > Table setting. Find the holdings table ( Catalog > holdings_table ) and turn the local use column on.
    3. Go to an item record and notice the column 'Local uses'
    4. Turn the system preference RecordLocalUseOnReturn Off.
    5. Check in an item that is not checkout out. No local use should be recorded for the item.
    6. Turn RecordLocalUseOnReturn on and check in an item that is not checked out. Local use on that item should increment by 1.
    7. Create a statistical patron and check an item out to them. Local use should increment by 1.
    8. Go to /api/v1/items?external_id={barcode} and make sure the numbers for localuse look correct.
    
    To test maintainence script:
    1. Without the patch, have RecordLocalUseOnReturn on.
    2. Check in some items to record localuse in the stats table. Keep note of those stats.
    3. Apply the patches, updatedatabase.
    4. Run the maintenance script, perl update_localuse_from_statistics.pl
    5. Now check that items.localuse is congruent with what is in the stats table
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 95ff045c65e9d721287c272823f370953e7f5f30
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed May 3 23:24:53 2023 +0000

    Bug 16122: Add maintenance script to update items.localuse from stats
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5e71338ae5331962a37f9da0c406ed9bce153162
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Apr 22 15:31:17 2024 +0000

    Bug 16122: Add display and Table settings
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7552f1e8e46c9bdc58c97173f57518208cd92b6e
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Mar 11 23:26:17 2024 +0000

    Bug 16122: Increment items.localuse
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ce4c61a5002bd92f5f51fbbd3e026e6dfd4fe351
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Apr 7 16:51:01 2023 +0000

    Bug 16122: API and Schema updates
    
    Signed-off-by: Christopher Brannon <cbrannon@cdalibrary.org>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d08320629190ff8c43a37b2e49122acdd25a107a
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Apr 7 16:30:36 2023 +0000

    Bug 16122: Add localuse column to items and deleteditems
    
    Signed-off-by: Christopher Brannon <cbrannon@cdalibrary.org>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit da2d5518470a84d673028f64e9d8b1b5223e871f
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 26 12:01:31 2024 +0000

    Bug 36206: DBRev 23.12.00.027
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bbd1f78bf37ff278d91cfca5ee52990a73f7977f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 25 13:17:42 2024 +0100

    Bug 36206: (follow-up) More conditions on display
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0554a175ebddf9afeb44d4b3ba77c2e31c869dd0
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 25 13:13:30 2024 +0100

    Bug 36206: (follow-up) Fix Typos
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3becfe41d279e61c2f3952403dd8134d0d93391b
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Mar 15 14:19:36 2024 -0400

    Bug 36206: (QA follow-up) Tidy admin-home.pl
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 316e39ff361d5f312e139c3ea26cf8246ae3df3c
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Mar 5 17:00:41 2024 +0000

    Bug 36206: (follow-up) Change file permission
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 82189ad9c0746ff4cb2221b437cc96bc24d97cc1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 1 08:08:08 2024 +0000

    Bug 36206: Add 'Run administration tool' to plugin actions
    
    This patch adds the new 'Run administration tool' option to the plugin
    actions dropdown menu for plugins with such a function.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b9a150cae7004078d0d637f0740e7796cdbf4224
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 1 08:02:47 2024 +0000

    Bug 36206: Expose administration page to users with plugins_admin permission
    
    This patch updates the intranet home page logic such that the
    administration button appears for those users with just the 'admin'
    subpermission of plugins to allow them to access such plugins.
    
    We also update the display logic found inside the admin-home page so
    that user see plugin management appropriately.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f751ec9fd7794706bc023c669efa10721b8c2edf
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Feb 29 18:08:41 2024 +0000

    Bug 36206: Add 'admin' plugins option
    
    This patch adds an admin plugins class to the plugins system and
    displays such plugins under the 'Plugins' section in the Administration
    page.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5d8f6a76ec3aaafe3803d201c52c617994ddee47
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 11 10:25:23 2024 -0300

    Bug 13706: Minor tidy/spelling issues
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d9b71ff26d6cdccea4c1d61142c5254dbaff10c1
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Jul 27 12:30:41 2012 +0200

    Bug 13706: New script dedup_authorities.pl
    
    This script allow to deduplicate authorities automatically.
    
    Script is in misc/maintenance/
    
    It works this way:
     1) authorities are fetched from the database. You can limit fetched
     results by authtypecode, or directly by specifying WHERE clause
     2) for each authority:
      2.1) build a Zebra query using the 'search_form' for the heading
      2.2) run the query, retrieve the results
      2.3) among duplicates, choose the one we want to keep (use
      --choose-method option).
      2.5) use C4::Authorities::merge to merge authorities
     3) delete the merged authorities
    
    Use --help for more informations on options
    
    To be done:
    1 - Move to module and cover with tests
    2 - Add option to only merge unused authorities
    3 - Expand 'ppn' option to be 'control-number' option and allow specifying field
    4 - More?
    
    1 & 2 I will attempt - 3 & 4 may be future enhancements
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 566894f058759c05922ec3399ba4ca96d27978f6
Author: Brendan Lawlor <blawlor@clamsnet.org>
Date:   Fri Apr 12 16:40:41 2024 +0000

    Bug 36295: Space out content blocks in batch record modification
    
    This patch adds a float clearing class to a line break in the batch record modification template to fix a spacing issue in Chrome.
    
    To test apply the patch and go to Cataloging -> Batch record modification
    
    There should be space between the two sections.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 55fbfffa0efe2efc09baa3a5e4d01595152165e7
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Apr 9 12:02:40 2024 +0000

    Bug 36295: Space out content blocks in batch record deletion
    
    This patch adds a float-clearing line break to the batch record deletion
    template so that the "Record type" section has visual separation from
    the record number submission tabs.
    
    To test, apply the patch and go to Cataloging -> Batch record deletion.
    
    There should be padding between the two sections.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f7c8e4ddf24f1820db077d49f70a49d77b875a13
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Apr 22 02:28:23 2024 +0000

    Bug 36659: Show correct tab after conducting an Authorities search
    
    To test:
    
    1. In the staff interface, go to Authorities
    2. Do a search for each tab, i.e. 'Main heading' and 'Entire record'
    3. Notice every search has the 'Main heading ($a only)' tab selected when the results page loads.
    
    4. Apply patch and restart services
    
    5. Repeat step 2 and confirm the appropriate tab is selected by default after each search.
    
    Sponsored-by: Education Services Australia SCIS
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8b4a1edb3b69bc65bf12c17470acefc049456484
Author: Brendan Lawlor <blawlor@clamsnet.org>
Date:   Mon Apr 22 16:50:59 2024 +0000

    Bug 30123: Set desk default to logged-in-desk-id on sety library page
    
    This patch refactors the javascript that runs on the set library page. If the logged in user branch code is the same as the seleceted library, default the desk selection to the current logged in desk id. Otherwise set the default desk selection to the first option for the current branch.
    
    Test plan:
    
    1. Turn on UseCirculationDesks
    2. Create a few desks with unique names for a few different libraries
    3. Set your library and desk
    4. Reload set-library.pl and notice that the desk always defaults to the last option for the library selected
    5. Apply patch and restart_all
    6. Reload set-library.pl and notice that the desk selection defaults to your current logged in desk
    7. Try changing the library selection to libraries with and without desks
    8. Notice that the desk selection defaults to the first option available for the selected library
    9. Notice that the desk selection defaults to the --- no desk for libraries without desks
    10. Notice the desk selection defaults to the currenty logged in desk if you select the library you are currently logged into
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 47400c327394a449b6bcb0998eba0e7840a9e6d8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 25 13:39:40 2024 +0100

    Bug 35977: Nuke value if setting required
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c341b2d37584aca52fcac7243f7ab68f324d002c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Feb 7 15:21:04 2024 +0000

    Bug 35977: Set holddatefrom default to today
    
    This patch sets the holddatefrom date to today by default on the opac.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ee960bd45f7535aec058d3984891e21b255ace12
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Apr 15 14:21:03 2024 +0000

    Bug 16567: Correct RSS feed validity errors
    
    This patch corrects a few markup errors in the XML feeds to make the
    feeds validate correctly. The template has been largely re-indented to
    improve readability and eliminate tab characters.
    
    To test, apply the patch and perform a search in the OPAC.
    
    - Open the RSS link appearing after the "Your search returned..."
      header.
    - Depending on how your browser handles XML documents you may need to
      view source on the page to see the actual XML markup.
    - Copy the source and paste it into the W3C feed validator:
      https://validator.w3.org/feed/#validate_by_input
    - The feed should be found to be valid.
      - In my tests you'll get a "Recommendation" about "Self reference
        doesn't match document location." I think this recommendation
        doesn't apply.
    
    Perform the same test with the other two available formats: Atom and
    OpenSearch:
    
    - Change the end of the RSS feed url from '&format=rss' to
      '&format=atom' and validate the result.
       - The same "self reference" recommendation will come up, and again I
         think we can ignore it.
       - There is another recommendation about "Two entries with the same
         value for atom:updated." The updated time is set to the same time
         as the feed itself (the time when the feed was generated. Maybe
         this is incorrect. If so we need a follow-up that exposes a
         different value to the template. biblio.datecreated maybe?
    - Change the end of the feed url from '&format=atom' to
      '&format=OpenSearchDescription' and validate that result.
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f44e4a72a3bb14fd1cefb7ef94cb700700521eb8
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Fri Feb 23 19:41:26 2024 +0100

    Bug 36160: Use $builder->build_object for patron objects in Circulation.t
    
    1) Set TrackLastPatronActivityTriggers to at least "Checking out an item"
    2) Run tests in t/db_dependent/Circulation.t and verify that
       failes with "Invalid value passed, borrowers.updated_on..."
    3) Apply patch
    4) Run Circulatoint.t tests again and verify that no longer
       produces this error
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ad463f99fd77f80b9731b4d666db27fa26ceadaf
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Apr 26 09:19:29 2024 +0000

    Bug 27893: (follow-up) Check orderstatus in orders->cancel
    
    Removed the results[0] test too in addbiblio, since there
    can be warnings without effectively cancelled order lines.
    Also reworded the warn (cancelled, not deleted).
    
    Test plan:
    Run t/db_dependent/Koha/Acquisition/Orders.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 362cfb3c4739ea3f9a17873528f5d779727bb7e6
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 23 10:03:19 2024 +0100

    Bug 36535: (QA follow-up) Use dt_from_string
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f205cc59eabf688bbacd6503511aefc9d8987834
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 18 13:39:43 2024 +0200

    Bug 36535: (bug 33568 follow-up) Add missing tests
    
    Bug 33568 introduced a lot of new simple accessors without providing unit tests for them.
    
    Test plan:
    All tests modified by this patch should pass
    
    Note that one bug was found! Logic issue in lost/not lost
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f08bb43222eada19d26a7d69746bb3a356fd3996
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Apr 26 08:12:05 2024 +0100

    Bug 35362: (follow-up) Fix guaruntor preview modal close in test
    
    This patch updates the selenium test to correct the selector used to
    close the preview modal as it changed with this patchset.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d38735964c96793c8f328dd5f6bc0c4eaeccc26c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Apr 26 07:48:52 2024 +0100

    Bug 35362: (follow-up) Fix preview close on guarantor add
    
    When adding a guarantor you are given a patron search modal. If you then
    preview a search result, the preview modal could not be closed. It's a
    simple update for 'close' to 'close_window' in the jQuery selector.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 09eb1745997ea58691627aa4d9578b2cce2db48a
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 26 08:07:30 2024 +0000

    Revert "Bug 36111 - 856$h should not appear as a link in detailed record"
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c317bb34c0bb59fd0f52b4e7c5c0d3326b0030ee
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Apr 23 12:47:11 2024 +0000

    Bug 35979: (follow-up) Add check in ->enqueue
    
    Foundation for removing same check elsewhere (later on).
    
    Test plan:
    Run t/db_dependent/Koha/BackgroundJob/BatchUpdateBiblioHoldsQueue.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    PA amended: Fix bug # in commit message
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 310ba95efa7e83559134c7660f7739a6d1314524
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Apr 23 13:42:50 2024 +0200

    Bug 35979: Check pref before inserting holds_queue background jobs
    
    Test plan:
    Confirm that modrequest does no longer insert when pref is off :)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c32688ce985236ba233c85116e5c92e1c7bbd9ef
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Apr 12 12:02:46 2024 +0000

    Bug 36592: Fix default display lenght and default sort
    
    To test:
    1. Go to Admin > Table settings
    2. Find a table that includes Default display length or Default sort
       order.
    3. Try to save a new value.
    4. When the page reloads the new values have not been saved.
    5. APPLY PATCH
    6. Try 1 -3 again, this time the value should save correctly.
    7. Go to Admin > Table settings and make sure the accordians still work
       and the in page links in each section still work.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 63612311e32a546a6ea1067e0c65ac3199f2f292
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Apr 22 14:33:33 2024 +0200

    Bug 36649: Correctly embed biblio when retrieving items when adding to a train
    
    I didn't find when this regression has been introduced but the third
    parameter here is the headers, not parameters, we should not repeat
    "headers".
    
    Test plan:
    1. Add a new processing that contains columns from the database, for example biblio.title and biblio.author.
    2. Create a new train.
    3. Add items to the waiting list.
    4. Click on "Add last x items to the train" button.
    5. Choose the train you created on number 2.
    6. Choose the processing you added on number 1.
    7. Try to click the Submit button.
    => Without the patch nothing happens and there is a JS error in the
    console: Uncaught TypeError: item.biblio is undefined
    => With this patch applied the item is correctly added to the train and
    the attribute is properly populated.
    
    Signed-off-by: Anneli Österman <anneli.osterman@koha-suomi.fi>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b2b3d88b7335c542035fbdf11637fa2a31ea22bb
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 26 19:00:13 2023 +0000

    Bug 32695: Fix search strings for 775, 780, 785 and 787
    
    In the past due to some misunderstanding of the MARC standard
    we built the search links for these fields using $a and $t with
    the title index. But we actually need to search $t as title
    and $a as author.
    This patch fixes the templates for the MARC 7xx fields:
    * 775
    * 780
    * 785
    * 787
    
    To test:
    * Ensure systme preference 'UseControlNumber' is set to don't
    * Create a record with the linking fields above
    * Look at the OPAC and staff interface detail views
    * Verify the content of your fields shows and the links combine a+t as a title search
    * Apply patch
    * Verify you have nicely formatted links now
    
    Example:
    775 _ _ ‡asomeone‡ttitle775
    780 0 2 ‡asomeone‡ttitle780
    785 0 2 ‡asomeone‡ttitle785
    787 _ _ ‡ilabel:‡ttitle787‡asomeone
    
    Signed-off-by: Sabrina Kiehl <kiehl@mpis.mpg.de>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0e7d2c3db4727c629ab76e01a3f42d6810c89916
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Apr 19 17:22:15 2024 +0000

    Bug 36652: Pass copy_form template variable
    
    To test:
    
    1. Go to Tools > Notices and slips
    2. Pick any notice and try to copy it to another library using the 'Copy notice' column.
    3. You are redirected to a blank screen and if you go back to the Notices and slips page the notice has not been copied.
    4. APPLY PATCH
    5. Try steps 1 - 3 again, but this time you should be correctly directed.
    
    Signed-off-by: Roman Dolny <roman.dolny@jezuici.pl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d78a92cf51d994304371675d3ca6f765b67418de
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Apr 18 09:43:19 2024 +0000

    Bug 36639: Fix delete on authorities detail
    
    Test plan:
    Verify that you can delete an authority from detail page again.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 70fde44d4f6eef25e177012318e7acaa0ce740c3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 19 12:29:31 2024 +0000

    Bug 30318: Don't reset messaging preferences when form is empty
    
    In testing, the messaging preferences are set in the form when EnhancedMessagingPreferences is enabled.
    Switching categories silently updates the preferences unless you have made changes, in which case the
    user is warned and can confirm if they want to reset or not. The code only applies to patron creatoin, and
    does not seem to be taken into account during OPAC self-registration.
    
    It seems the silent defaulting when saving can be removed in favor of the current updates/warns in the actual
    form.
    
    To test:
     1 - Set some messaging preferences for at least two categories
     2 - Enter a new patron
     3 - Confirm switching categories correctly defaults the messaging preferences
     4 - Edit the preferences and switch to another category with defaults
     5 - Confirm the warning appears, and preferences are set if confirmed and ignored if not
     6 - Set to a category with defaults, uncheck all, and save
     7 - Ooof, patron is defaulted
     8 - Apply patch
     9 - Repeat 1-5 and confirm nothing has changed
    10 - Set to a category with defaults, uncheck all, save
    11 - Confirm patron is saved with no preferences
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 273e25f78835ca3f73b6affe0d251492f12c1e20
Author: Matthias Le Gac <matthias.le-gac@inlibro.com>
Date:   Mon Apr 22 13:10:50 2024 -0400

    Bug 36111: fixed extra space
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fe37e7eda66dcd3c57abb0836055eed1cc76947f
Author: Matthias Le Gac <matthias.le-gac@inlibro.com>
Date:   Fri Apr 5 09:17:16 2024 -0400

    Bug 36111: 856$h should not appear as a link in detailed record
    
    Test plan:
    1. Add 856$h to MARC editor
       1.1. Go to Administration > MARC bibliographic frameworks
       1.2. Next to Default framework, click Actions > MARC structure
       1.3. Search for field 856
       1.4. Click Actions > Edit subfields
       1.5. Click h
       1.6. Check the Editor box
       1.7. Click Save changes
    2. Catalog a new record with a random URL in 856$h
       2.1. Go to Cataloging
       2.2. Click New record
       2.3. Fill out the mandatory fields (000, 003, 005, 008, 040$c,
            245$a, 942$c)
       2.4. Go to tab 8 and enter a value in 856$h
       2.5. Click Save (No need to add an item)
    3. Search for the title in the staff interface (a large enough
       search to have more than one result)
       --> Notice it says "Online resources: Click here to access online"
       3.1. Try to click the link
            --> Blank page
    4. Access the detailed record in the staff interface
       --> Notice it says "Online resources: Click here to access online"
       4.1. Try to click the link
            --> Blank page
    5. Search for the title in the opac (a large enough search to have
       more than one result)
       --> Notice it says "Online resources: Click here to access online"
       5.1. Try to click the link
            --> Blank page
    6. Access the detailed record in the opac
       --> Notice it says "Online resources: Click here to access online"
       6.1. Try to click the link
            --> Blank page
    7. Edit the item and add a text in field 856$y
    8. Access the detailed record in the staff interface
       --> Notice it says what you put in 856$y field
    9. Apply the patch
    10. Replay steps 3 through 6, but this time, the "Online resources"
       field should not be present.
    11. Replay steps 7 through 8, but this time, what you put in 856$y
       field should not be present.
    12. Edit the item and add a url in field 856$u
    13. Replay steps 3 through 6, but this time, clicking on the link
        should take you to the URL specified in the 856$u field.
    14. Replay steps 7 through 8, but this time, what you put in 856$y
       field should be present and
       clicking on the link should take you to the URL specified in the 856$u field.
    
    Signed-off-by: Roman Dolny <roman.dolny@jezuici.pl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b9f97ec015e4f101546e308754db4ed532987fde
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Mar 8 11:49:26 2024 +0000

    Bug 36282: Chomp whitespace around opac i18n strings
    
    Same logic as bug 26816 but to OPAC
    
    Test plan:
    1) Apply test plan patch only
    2) Visit opac home:
    <opac_url>/cgi-bin/koha/opac-main.pl
    3) Notice there's a space between 'Translated string' and ':', even though the markup does not contain a whitespace
    4) Apply 2nd patch
    5) Notice the white space is gone
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7eb9807334135ab8554f6789f71357567a93bc63
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Mar 25 13:23:36 2024 +0000

    Bug 36416: Fix cud-check_out
    
    1) Install FreeForm and enable ILLModule, run:
    bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev.sh)
    2) Checkout to branch b_36243
    cd /kohadevbox/koha/Koha/Illbackends/FreeForm
    git checkout b_36243
    3) Enable CirculateILL sys pref
    4) Create a new ILL request, visit:
    <staff_url>/cgi-bin/koha/ill/ill-requests.pl?method=create&backend=FreeForm
    5) Set "type" = Book and enter '42' on the cardnumber input, click "Create"
    6) On the top toolbar, click "Confirm" and confirm the following screen.
    7) You now have a new option "Check out" on the toolbar. Click on it. Notice it explodes.
    8) Apply patch. Repeat.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 80beaf875b3645034f5dda37bfadf51a038859cc
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Thu Apr 11 13:12:58 2024 +0300

    Bug 36313: Fix Undefined subroutine &C4::Circulation::CheckReserves error
    
    On (at least) git installations of Koha checkouts and checkins fail on
    error 500. Logs have following error:
    
    Undefined subroutine &C4::Circulation::CheckReserves called...
    
    Error happens also when one tries to open patrons checkouts from detail page.
    Koha doesn't die but table just keeps loading. Solution is to add C4::Reserves
    before CheckReserves when it's called from Circulation.pm.
    
    To test:
    1. Apply this patch.
    2. Try to check out and check in item.
    => Confirm both operations are succesfull.
    3. Attempt to open patrons checkouts from patron detail and checkout page.
    => Table should load
    
    Also prove t/db_dependent/Circulation.t.
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: BabaJaga <babajagawgoglach@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 92a4c99e246be83fbf5eb5ebc51b9f61dc472194
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 28 15:13:17 2022 +0200

    Bug 30645: Add tests
    
    to highlight the problem
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b42574afdcf37e1fdab287ab06e2416f406c5411
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Dec 21 16:06:41 2023 +0000

    Bug 30645: Add REST/Plugin/Query tests
    
    prove t/Koha/REST/Plugin/Query.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0acf44927d1e7f1ba719aaeee2eaaa7b39620e03
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Nov 30 15:43:02 2023 -0100

    Bug 30645: Consider multiple instances of extended_attributes in query params
    
    This will rewrite a query like:
    
    {
        "-and":[
            [
                {
                    "extended_attributes.value":{
                        "like":"abc%"
                    },
                    "extended_attributes.code":[
                        [
                            "arbitrary_attr_code",
                            "another_attr_code"
                        ]
                    ]
                }
            ],
            [
                {
                    "extended_attributes.value":{
                        "like":"123%"
                    },
                    "extended_attributes.code":[
                        [
                            "arbitrary_attr_code",
                            "another_attr_code"
                        ]
                    ]
                }
            ]
        ]
    }
    
    To:
    
    {
        "-and":[
            [
                {
                    "extended_attributes.value":{
                        "like":"abc%"
                    },
                    "extended_attributes.code":[
                        [
                            "arbitrary_attr_code",
                            "another_attr_code"
                        ]
                    ]
                }
            ],
            [
                {
                    "extended_attributes_2.value":{
                        "like":"123%"
                    },
                    "extended_attributes_2.code":[
                        [
                            "arbitrary_attr_code",
                            "another_attr_code"
                        ]
                    ]
                }
            ]
        ]
    }
    
    And it'll also add the number of required 'join' attributes to the query
    attributes to match it.
    
    Test plan (with Joubu's test patch applied), run:
    prove t/db_dependent/selenium/patrons_search.t
    
    Or
    
    Test plan, k-t-d:
    1) Create 2 patron attributes, visit:
    /cgi-bin/koha/admin/patron-attr-types.pl
    2) Name the first attribute 'test1' and the second attribute 'test2'
    3) On both, tick the 'Searchable' and 'Search by default' checkboxes
    4) Edit a koha borrower, example visit:
    /cgi-bin/koha/members/memberentry.pl?op=modify&destination=circ&borrowernumber=51
    5) Put '123' on the test1 attribute, and 'abc' on the test2 attribute
    6) Visit the main patrons page:
    /cgi-bin/koha/members/members-home.pl
    7) On the first left side filter input called 'Search', type '123' and search. Notice you get the patron result
    8) Repeat step 7, but type 'abc' instead of '123'. Notice you get the patron result
    9) Now do the same search but type '123 abc'. Notice you do not get the patron result.
    10) Apply patch. Repeat test plan. Notice you get the patron result in step 9).
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 07682a5a67a80d29dbf98bb7612ce1edaeee94eb
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Apr 24 10:20:38 2024 +0100

    Bug 35568: (RM follow-up) Use warnings_exist over warning_like
    
    We introduced additional warnings triggered by prepared letter and those
    caused the test of the recall hook to fail.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 200fc922d75557b756b3d7265aaa569db7089ae8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Apr 24 10:13:13 2024 +0100

    Bug 36400: (RM follow-up) Add .prettierrc to Makefile
    
    Add the new .prettierrc file to Makefile.PL and set it to be ignored for
    make.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit d5eff4f462d4a98bfcc64f0722dadddd82579639
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Apr 24 10:08:28 2024 +0100

    Bug 32132: (RM follow-up) Use testbuilder in Acquisitions.t
    
    This patch adds a use of testbuilder to create a test fund as apposed to
    using AddBudget which expects foreign keys to already exist.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit c74036dfd58b7666326a637f4fe2c2505906844e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Apr 24 10:00:28 2024 +0100

    Bug 33960: (RM follow-up) Add class decorations to schema
    
    This patch adds the missing koha_objects_class and koha_object_class
    definitions to Koha::Schema::Result::DeletedbiblioMetadata.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 481e4422638d1be524493f939408f4472777bf0f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Apr 24 09:56:06 2024 +0100

    Bug 35581: (RM follow-up) Add class decorations to schema
    
    This patch adds the missing koha_objects_class and koha_object_class
    definitions to Koha::Schema::Result::Illcomment.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 364ada88b03ec592958902566cabf64d1d96192f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 23 16:43:12 2024 +0100

    Bug 32132: (RM follow-up) Merge supplimentary db update
    
    This patch merges the logic from the supplimentary database update that
    was requested into the original DB update revision making the update
    more reliable.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 47ce38d6b03e2bbf62a56542f12fe02737553a7c
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Tue Apr 23 13:51:05 2024 +0300

    Bug 32132: Handle funds without budget_period_id gracefully
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 96c8a0dbf6d3290e3ac3ac9eed157eb6a52621e9
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Mon Apr 22 14:02:20 2024 +0300

    Bug 32132: Fix failing tests
    
    Some tests failed due changes made to aqbudgets.budget_period_id.
    Tests failed with error:
    
    DBIx::Class::Storage::DBI::_dbh_execute(): DBI Exception:
    DBD::mysql::st execute failed: Field 'budget_period_id' doesn't
    have a default value at...
    
    This patch fixes those tests.
    
    To test run following lines:
    prove t/db_dependent/Acquisition/CancelReceipt.t
    prove t/db_dependent/Acquisition/GetBasketAsCSV.t
    prove t/db_dependent/Acquisition/GetBasketGroupAsCSV.t
    prove t/db_dependent/Acquisition/GetBasketsInfosByBookseller.t
    prove t/db_dependent/Acquisition/GetOrdersByBiblionumber.t
    prove t/db_dependent/Acquisition/Invoices.t
    prove t/db_dependent/Acquisition/NewOrder.t
    prove t/db_dependent/Acquisition/OrderUsers.t
    prove t/db_dependent/Acquisition/TransferOrder.t
    prove t/db_dependent/Acquisition/close_reopen_basket.t
    prove t/db_dependent/Koha/Acquisition/Funds.t
    prove t/db_dependent/Letters.t
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 61e7aa374e8b4f85497c55e3741d829123fc4763
Author: Thomas Klausner <domm@plix.at>
Date:   Fri Mar 29 09:20:37 2024 +0000

    Bug 35345: Add --where option to rebuild_elasticsearch.pl
    
    Sometimes we need to only re-index a subset of our bibliographic data or authorities. Currently this is only possible by enumerating all id (-bn or -ai), which does not work well when indexing eg 100.000 items of a 2.000.000 DB. Re-indexing everything is also overkill.
    
    This patch adds an `--where` flag to misc/search_tools/rebuild_elasticsearch.pl which can take arbitrary SQL (that of course has to match the respective tables) and adds it as an additional param to the resultset to index
    
    To test, start koha-testing-docker with ElasticSearch enabled, for example via `ktd --es7 up
    
    Before applying the patch, rebuild_elasticsearch will index all data:
    
    Biblios:
    $ misc/search_tools/rebuild_elasticsearch.pl -b -v
    [12387] Checking state of biblios index
    [12387] Indexing biblios
    [12387] Committing final records...
    [12387] Total 435 records indexed
    (there might be a waring regarding a broken biblio, which can be ignored)
    
    Auth:
    $ misc/search_tools/rebuild_elasticsearch.pl -a -v
    [12546] Checking state of authorities index
    [12546] Indexing authorities
    [12546] 1000 records processed
    [12546] Committing final records...
    [12546] Total 1706 records indexed
    
    Now apply the patch
    
    Biblio, limit by range of biblioid:
    $ misc/search_tools/rebuild_elasticsearch.pl -b -v --where "biblionumber between 100 and 150"
    [12765] Checking state of biblios index
    [12765] Indexing biblios
    [12765] Committing final records...
    [12765] Total 50 records indexed
    
    Note that only 50 records where indexed (instead of the whole set of 435 records)
    
    Auth, limit by authtypecode:
    $ misc/search_tools/rebuild_elasticsearch.pl -a -v --where "authtypecode = 'GEOGR_NAME'"
    [12848] Checking state of authorities index
    [12848] Indexing authorities
    [12848] Committing final records...
    [12848] Total 142 records indexed
    
    Again, only 142 have been indexed.
    
    Sponsored-by: Steiermärkische Landesbibliothek
    Sponsored-by: HKS3 / koha-support.eu
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0fca7711cb83f2a2dd46ad351fd538663cb6bf3e
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Apr 22 10:14:01 2024 +0000

    Bug 29825: (follow-up) Fix translatability and capitalization
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d372e4501572b87d88631f05b4425e09515038a9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jun 30 19:48:04 2023 +0000

    Bug 29825: (follow-up) Some style fixes and modal correction
    
    This patch makes a few coding style changes to the new JavaScript and
    updates the Bootstrap modal markup to be in line with current standards.
    
    The previous patches lacked a trigger for the preview modal, so I added
    that. Since the content of the modal uses spaces for formatting I added
    monospace formatting to the modal body.
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 88065bdc15e22de12372ae720b8b7b0e0626fba7
Author: George Veranis <gveranis@dataly.gr>
Date:   Fri Sep 2 22:30:45 2022 +0200

    Bug 29825: Preview of authority record on edit mode as MARC formatted view
    
    This bug adds a new functionality on Edit mode of a new or existing authority.
    Add a new button 'MARC Preview' in order librarian have the ability to preview
    the record on MARC plain structure mode and have all fields and subfields
    that entered before save/update the record.
    
    To test:
    1. Open or add an authority
    2. The preview button isn't on toolbar
    3. Apply the patch
    4. Do step 1
    5. The preview button exists
    6. Do some changes or not to the authority record
    7. Click to Preview MARC button and a modal window will appear with all fields
       indicators and subfields that filled in the form of cataloguing.
    
    Mentored by: Andreas Roussos
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit af0ca8891f255ffcf5791503a56176f4d44e1785
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Feb 15 13:36:04 2024 -0100

    Bug 32693: About script: Process only the tab being queried
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6a2c5e5d703fbf10c734ba84b7b527af73691acd
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Feb 15 13:33:37 2024 -0100

    Bug 32693: Preparation: About script: versions
    
    versions is being used in both 'team' and 'about' tabs, needs to be
    moved
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6fd01a65992c0fd6c0398ede56212236e1ebf84d
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Feb 15 13:32:33 2024 -0100

    Bug 32693: Preparation: About script: Move template params
    
    These template params are only used in the default first 'about' tab but were being added further down in the script
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 29357f69b4a5cce9941973c3da77bdb4d441093f
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Feb 15 13:27:50 2024 -0100

    Bug 32693: Preparation: About script: docdir
    
    docdir is used in both team + history tabs
    was previously being loaded in team and additionally used in history
    but because now we're only loading one tab at a time, we need to move this
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bde460da6b28d2740789641d2a13ca05c89b4f7f
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Feb 15 13:15:09 2024 -0100

    Bug 32693: Update tab_panels
    
    Each tab panel's content has now been moved to its own BLOCK.
    Each tab panel's content is now only loaded if said tab is the one being viewed
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d96714d09c0eec4136d31993165daa6c541ec755
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Feb 15 13:13:12 2024 -0100

    Bug 32693: Update tab_items
    
    tab_items are now linktabs
    tab_items are now styled active depending if the URL param 'tab' matches the tab name or not
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5dcb9aa16c632a6f9e14c13ac6b663378692199e
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Feb 15 12:42:04 2024 -0100

    Bug 32693: Update tab_item html helper
    
    tab_item html helper now allows for a boolean tablink option to set if the the tab item is a link or not
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 625bb1a545a2b62d3778a627282766133efdc7c3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Apr 1 16:03:37 2024 +0000

    Bug 36328: (QA follow-up) Expand tests and reorder elements to clarify differences
    
    Also tidy
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 920784ce060043e097cdafb222c1fb7f33810e4a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 20 08:34:09 2024 +0100

    Bug 36328: Add a separate 'note' profile
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b6f0c7026a61c45f3551b0314fc9aa39b6fb647f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 15 11:40:57 2024 +0100

    Bug 36328: Add test
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7ad2dcc4d538445d29e25318e30a93781c783fe8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 15 11:39:33 2024 +0100

    Bug 36328: Add p span div to Scrubber
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1ccc22747ea081ac99c0d63305a8229260b11a25
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jan 4 16:42:01 2024 +0000

    Bug 22567: Add transfer details to stockrotation page
    
    This patch adds any pending/current transfer details into the
    stockrotation item management page.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e502c8f34bc228be04f0be332652ebaca39a7cd0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Dec 19 13:29:36 2023 +0000

    Bug 33960: Unit tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a3481d81048bcc37147553e54ff6c886a4b3acd9
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Dec 15 16:56:11 2023 +0000

    Bug 33960: Add routes and controller
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 61e01ec8a1b5a48576d77228609b57830c48c1f6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 7 16:27:07 2023 +0000

    Bug 33960: Add api mapping and biblioitems to Old::Biblios to match Biblio
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit eacd6f56a1c591cb17ed79cadd47d9681031fd5f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jun 8 13:57:35 2023 +0000

    Bug 33960: Add objects and update schema
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 11f805aec276d990424a36329f096baa38b6935e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Nov 17 18:44:46 2023 +0000

    Bug 35364: Update serials pop-up windows with consistent footer markup
    
    This patch updates several serials module templates in order to style
    submission and close buttons in a fixed footer at the bottom of pop-up
    windows, with markup consistent with other pop-up windows.
    
    Unrelated change: A couple of templates have had a "page-section" div
    added where it was missing.
    
    To test, apply the patch and go to Serials. For each affected template,
    test that the window looks correct and the buttons in the footer work
    correctly:
    
    - New subscription ->
      - Search for a vendor:
        - Vendor search form
          - Vendor search results
      - Search for record
        - Record search form
        - Record search results
    - Complete the process of creating a subscription if there are no other
      subscriptions already in your database.
      - From the subscription detail page, click the "Renew" button in the
        toolbar and test that window.
      - From the subscription detail page, click the "Create routing list"
        link in the left-hand sidebar menu.
        - Add one or more recipients and click "Save"
        - Click "Save and preview routing slip" and test the resulting
         pop-up.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8ee1ce0cd2f9d6b513de6e9e7f421976dc2529da
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Mar 7 10:31:28 2024 +0100

    Bug 36265: Bigger font-size for headers in staff interface
    
    In staff interface, text in nav bar and search header are at normal
    size. Since these are used a lot, I propose to increase font-size at
    110%.
    
    Test by applying patch and rebuild CSS to see bigger text in staff
    interface
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fbca7b82f13d0fb008b213d384329822558efc88
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Apr 22 06:56:23 2024 +0000

    Bug 35581: Fix failing t/db_dependent/Koha/ILL/Request.t
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 68f80bda44e17b2bddbb493dc420e1ffa8383269
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 25 10:21:27 2024 -0300

    Bug 35581: POD fixes
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f016094018f4902d592246078c0d5e652c2a1d49
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 25 10:08:18 2024 -0300

    Bug 35581: (follow-up) Remove internal use of ->illrequestattributes
    
    By now, we shouldn't be using the deprecated method internally.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8bda566bb5bca539c904b197f1b563605475d9dc
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 25 09:59:44 2024 -0300

    Bug 35581: Cleanup Comments.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0eac533c39e7795beaa0a4dbe0a41f31d38c3765
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Jan 8 12:03:42 2024 +0000

    Bug 35581: Koha::REST::V1::Illrequests -> Koha::REST::V1::ILL::Requests
    
    Test plan:
    1. Apply patch
    2. Make sure tests pass, run:
        prove t/db_dependent/api/v1/ill_*
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ac157b7a75d84a07002e7c9cecceb549b612cf98
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Dec 15 10:07:11 2023 +0000

    Bug 35581: Koha::Illrequest -> Koha::ILL::Request
    
    Koha/Illrequests.pm -> Koha/ILL/Requests.pm
    
    Merged:
    t/db_dependent/Koha/Illrequests.t
    t/db_dependent/Illrequests.t
    
    Into:
    t/db_dependent/Koha/ILL/Requests.t
    
    ILL classes file structure is, for the most part, around 7 years old and doesn't follow a strict logic. It's so confusing that some test files exist redundantly.
    
    This housekeeping should help future work in regards to ISO18626 to add Koha as a supplying agency instead of just requesting agency, as is now.
    It should also help future housekeeping of moving backend related logic out of the Illrequest.pm into Illbackend.pm (now ILL/Request.pm and ILL/Backend.pm as of this patchset).
    It should also help in structuring the addition of a master generic form (see bug 35570)
    
    This patchset will require existing backends to be updated to match the new class names and structure, if they invoke them.
    
    Test plan, k-t-d, run tests:
    prove t/db_dependent/api/v1/ill_*
    prove t/db_dependent/Koha/ILL/*
    
    Test plan, k-t-d, manual:
    1) Install FreeForm, enable ILL module, run:
    bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev.sh)
    2) You'll have to switch the FreeForm repo to the one compatible with this work, like:
    cd /kohadevbox/koha/Koha/Illbackends/FreeForm
    git checkout reorganize_ILL
    3) Do some generic ILL testing:
    3.1) Create a request
    3.2) Add a comment to a request
    3.3) Edit a request
    3.4) Edit a request's item metadata
    3.5) Confirm a request
    3.6) List requests
    3.7) Filter requests list using left side filters
    4) Install a metadata enrichment plugin:
    https://github.com/PTFS-Europe/koha-plugin-api-pubmed
    4.1) Create an ILL batch and insert a pubmedid like 123
    4.2) Add the request and finish batch
    5) Verify all of the above works as expected
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5ea2e837006bf5f65d6ea26a9418b72d188a434f
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Dec 14 17:24:50 2023 +0000

    Bug 35581: Koha::Illrequest::SupplierUpdate* -> Koha::ILL::Request::SupplierUpdate*
    
    Koha/Illrequest/SupplierUpdate.pm -> Koha/ILL/Request/SupplierUpdate.pm
    Koha/Illrequest/SupplierUpdateProcessor.pm -> Koha/ILL/Request/SupplierUpdateProcessor.pm
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1e6717cf9c95626405fab20c8e5147f4e2afa363
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Dec 14 17:07:23 2023 +0000

    Bug 35581: Koha::Illrequest::Logger -> Koha::ILL::Request::Logger
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bcc0f17317c09de7972727f1503e5c4dc820f35c
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Dec 14 15:32:56 2023 -0100

    Bug 35581: Koha::Illrequest::Config -> Koha::ILL::Request::Config
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fb2d14901b039325bfba694231648eabd32b5cf5
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Dec 14 15:20:48 2023 -0100

    Bug 35581: Koha::Illrequest::Workflow* -> Koha::ILL::Request::Workflow*
    
    Koha/Illrequest/Workflow.pm -> Koha/ILL/Request/Workflow.pm
    Koha/Illrequest/Workflow/Availability.pm -> Koha/ILL/Request/Workflow/Availability.pm
    Koha/Illrequest/Workflow/TypeDisclaimer.pm -> Koha/ILL/Request/Workflow/TypeDisclaimer.pm
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b3678d30f6620b24f069a8ac3c91fa8f845d8f13
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Dec 14 15:02:05 2023 -0100

    Bug 35581: Koha::Illrequestattribute* -> Koha::ILL::Request::Attribute*
    
    Koha/Illrequestattribute.pm -> Koha/ILL/Request/Attribute.pm
    Koha/Illrequestattributes.pm -> Koha/ILL/Request/Attributes.pm
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c766172d50c3384f35fb4068372a0df1b2e24b92
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Dec 14 14:41:07 2023 -0100

    Bug 35581: Koha::Illcomment* -> Koha::ILL::Comment*
    
    Koha/Illcomment.pm -> Koha/ILL/Comment.pm
    Koha/Illcomments.pm -> Koha/ILL/Comments.pm
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b190c5b0587429e1e41fc2d01e015eb1b5675914
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Dec 14 15:08:20 2023 +0000

    Bug 35581: Illbatchstatus* -> ILL::Batch::Status*
    
    Koha/IllbatchStatus.pm -> Koha/ILL/Batch/Status.pm
    Koha/IllbatchStatuses.pm -> Koha/ILL/Batch/Statuses.pm
    Koha/REST/V1/IllbatchStatuses.pm -> Koha/REST/V1/ILL/Batch/Statuses.pm
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit daf37b85d7d4ea4446e40f4a6f608131e9e13229
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Dec 14 14:46:11 2023 +0000

    Bug 35581: Koha::*Illbatch* -> Koha::*ILL::*Batch*
    
    Koha/Illbatch.pm -> Koha/ILL/Batch.pm
    Koha/Illbatches.pm -> Koha/ILL/Batches.pm
    Koha/REST/V1/Illbatches.pm -> Koha/REST/V1/ILL/Batches.pm
    t/db_dependent/Koha/Illbatch.t -> t/db_dependent/Koha/ILL/Batch.t
    t/db_dependent/Illbatches.t -> t/db_dependent/Koha/ILL/Batches.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 64c06fa87cdda2d0b1376acf7f25987e885ed4b2
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Dec 14 14:16:01 2023 +0000

    Bug 35581: Koha::Illbackend -> Koha::ILL::Backend
    
    Koha/Illbackend.pm -> Koha/ILL/Backend.pm
    Koha/REST/V1/Illbackends.pm -> Koha/REST/V1/ILL/Backends.pm
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 58bcedc7f56843b3e2cc205fd63274fe8c8405a3
Author: Paul Derscheid <paul.derscheid@lmscloud.de>
Date:   Mon Mar 25 14:55:13 2024 +0100

    Bug 36400: (follow-up) remove option editorconfig from .prettierrc.js
    
    - The option doesn't seem do what it's intended for:
            - The debug logs still show options from the .editorconfig (which is actually what we want in this case).
    - The option causes unwanted warnings when using the cli.
    - In summary: we have to keep in mind that the rules are now hierarchical:
            1. .editorconfig
            2. .prettierrc.js
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d58dfd1cef6dc1bde62106a165ab98179ef80347
Author: Paul Derscheid <paul.derscheid@lmscloud.de>
Date:   Fri Mar 22 12:29:50 2024 +0100

    Bug 36400: Centralize {js,ts,vue} formatting config in .prettierrc.js
    
        Let's centralize all formatting for js, ts and vue files in a .prettierrc.js.
        The goal here is to preserve eslint's linting but ignore all of its formatting options.
    
        Seems to work for vue files in vscode, vscodium and neovim w/ vscode-eslint-language-server.
    
        To test:
        1) Pick any vue file for example.
        2) Run format via your editor and either npx prettier -c .prettierrc.js <PATH_TO_VUE_FILE> [you can also use the -w flag to directly write].
        3) Look for unexpected changes: vue files should be already formatted w/ these inline flags (see: https://wiki.koha-community.org/wiki/Coding_Guidelines#JS14:_Prettier_JavaScript): [--trailing-comma es5, --arrow-parens avoid].
        4) Sign off if you're happy and comment or show what went wrong in a comment.
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 411f49a9b9057822d52253253a9e187f31cf7ab2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Nov 17 17:42:33 2023 +0000

    Bug 35363: Update transfer order pop-up window with consistent footer markup
    
    This patch updates the "Transfer order" pop-up window so that it has a
    fixed footer consistent with other similar pop-up windows.
    
    In order to make navigation between pages within the pop-up window
    easier I've added a button in the footer which can take the user back to
    the previous step, including any necessary parameters.
    
    To test, apply the patch and go to Acquisitions.
    
    - Locate a vendor with a basket, and a basket with one or more orders.
    - On the basket detail page, click the "Transfer" link in the "Modify"
      column.
    - In the pop-up window, test each step:
      - Vendor search
      - Vendor selection
      - Basket selection
    - Confirm that at any step you can use the new button to go back to the
      previous step.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ad1d8fd561f464484ec5683505d2d86d8db8363e
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Dec 14 11:58:40 2023 +0000

    Bug 35568: Add a transform_prepared_letter plugin hook to allow modification of notices created via GetPreparedLetter
    
    A plugin hook for GetPreparedLetter would be very useful. It could be used to add universal headers and/or footers to messages, attach news, and modify notices in other ways in whole or in part. It could even be used for call webhooks when certain types of notices are sent.
    
    For example, the MessageBee ( https://uniquelibrary.com/messagebee/ ) plugin for Koha generates YAML based notice content, which is then further processed by the before_send_messages hook. This process is unreliable due to the possible changes in data between the creation of the yaml and the reading of that yaml and transforming it into JSON with much more data. For example, the yaml may contain an issue_id, but that checkout may have been returned in the meantime. A hook like this would allow the MessageBee plugin to skip the yaml step and create the json data directly which is then sent to MessageBee for transmission to the patron.
    
    Test Plan:
    1) Apply this patch
    2) prove t/db_dependent/Koha/Plugins/Transform_prepared_letter_hook.t
    3) Download and install the Kitchen Sink plugin v2.4.0
       https://github.com/bywatersolutions/dev-koha-plugin-kitchen-sink/releases/tag/v2.4.0
    4) Generate any notice or slip, such as a checkin or checkout notice
    5) Note that all notices now end with "Thanks for using your local library!"
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ad62f81b03ff51d62d6d43ebbae120b7b85e8909
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Apr 22 06:55:34 2024 +0000

    Bug 35616: DBIC schema update
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ae6c181b63b7f2e84e0d693b123576f1e79eb0c0
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Apr 22 06:55:24 2024 +0000

    Bug 35616: DBRev 23.12.00.026
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0c1e18d655a15713f985238b8b65c7c4199db79c
Author: Victor Grousset <victor@tuxayo.net>
Date:   Tue Mar 19 02:21:06 2024 +0100

    Bug 35616: (QA follow-up): tidy up code and fix exec permission
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 47a75e62e67f7deb05dedde8d6fa15cc5fddeaf1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Dec 20 14:52:10 2023 +0000

    Bug 35616: Update catalog concerns to set/filter on source
    
    This patch updates the catalog concerns feature to respect the new
    'source' field in the API.  We both set the source for new ticket
    submissions and use it for filtering in the corresponding display
    tables.
    
    To test:
    1) Nothing should noticably change here.. follow the test plan for bug
       31028 and confirm all continues to work as described there.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 576b253782f917e1b54f1fc924cdd84cc5d926ae
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Dec 20 14:47:08 2023 +0000

    Bug 35616: API specification update
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit df2a432c65cfe747ac3e741e70a04dd03d48bd16
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Dec 20 14:42:20 2023 +0000

    Bug 35616: Add source field to tickets table
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit df1f5da6734fe94b62e4b50fec9e7fadbfce794b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Mar 13 14:56:27 2024 -0300

    Bug 36309: Make create_superlibrarian.pl output more useful
    
    In situations in which you are not familiar with all the Koha settings,
    and table structure, the fact this script just fails telling there's a
    broken FK is just not practical.
    
    We should capture those exceptions and display a useful message instead.
    
    This script does that. It adds some validations and some exception
    handling too. It prints a nice message about the bad value the user
    passed, and the valid values too!
    
    To test:
    1. Run this on a fresh KTD:
       $ ktd --shell
      k$ perl  misc/devel/create_superlibrarian.pl \
          --userid tcohen \
          --password tomasito \
          --cardnumber 123456789 \
          --categorycode POT \
          --branchcode ATO
    => FAIL: It explodes with a MySQL exception message!
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: It tells you which value is wrong and what values you can
    pick to make the command work
    4. Pick a valid value, and repeat
    => SUCCESS: Now the other value is wrong, a nice message is displayed!
    5. Fix with a valid value and repeat
    => SUCCESS: Patron created!
    6. Sign off :-D
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ba0f7f737882728fba2221a5d8dd02946980ef1b
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Apr 22 06:54:59 2024 +0000

    Bug 36204: (follow-up) Add parenthesis to match display in other places
    
    Updated display to:
    Acevedo, Henry (othername)
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 202cf958fccaabc4bd4732a1a42013415176e5ed
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Apr 19 17:33:05 2024 +0000

    Bug 36204: Add othernames field to PatronAutoComplete display
    
    To test:
    1. APPLY PATCH
    2. Make sure PatronAutoComplete is on.
    3. Find or add othernames to a patron record.
    4. Search for that patron and make sure othernames properly displays in the dropdown.
    5. Add a middle name to that patron and search again, make sure the display looks good.
    6. Remove the othernames field and search again, make sure the display looks good.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6695cf5e8d9b910f11eb522f9f4b9971e407ee5a
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Apr 22 06:51:42 2024 +0000

    Bug 35151: (follow-up) Remove ILLModuleCopyrightClearance from .pref file
    
    Previous patches removed the preference from the database and sysprefs.sql,
    but the yaml file was missed.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fd70e36e6f6b27f7df72ed0a6a80306bc477ec42
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 19 17:48:28 2024 +0000

    Bug 33393: DBRev 23.12.00.025
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ec920d104811b1d5980c0f9742a6394c28baea68
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 19 17:46:51 2024 +0000

    Bug 33393: Specify layout this works with a bit more clearly in system preference description
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6d941605418127b82d3eb1c4b6ee96b63deca94f
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Mar 15 11:49:34 2024 +0000

    Bug 33393: tidy layout1page.pm
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a0ec74ea53feb260a61f03e9814355b00d484db5
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Tue May 2 05:56:52 2023 +0000

    Bug 33393: Add note to system preference explaining text length
    
    Sponsored-by: Pymble Ladies' College
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 098b6a6fab0aa20d90e52973f805bb3260ad76f6
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Thu Mar 30 22:01:54 2023 +0000

    Bug 33393: Enable libraries to configure their own text in the 1-Page order PDF
    
    Test plan:
    1) Apply patches and restart services
    2) Upgrade Koha schema:
    sudo koha-upgrade-schema <instance>
    3) Go to Koha Administration -> Libraries. Ensure Library A has an
    address, phone and fax.
    4) Go to Koha Administration -> System preferences. Search for
    OrderPdfFormat. Set this to English 1-page layout option.
    5) Go to Acquisitions. Use an existing vendor or create a new one.
    Ensure the vendor has a postal address, phone, fax and accout number.
    6) Create a basket for this vendor. Add many orders to this basket, for
    example 25 items (this is to make the Order PDF cover multiple pages).
    7) Close the basket and add it to a basket group of the same name.
    8) Edit the basket group. Add an address in the delivery place, and a
    delivery comment. Check the box to close the basket group and Save.
    9) Click the button to Export as PDF.
    10) View the exported PDF. Confirm the PDF is multiple pages long. If it
    is not then re-open the basketgroup and add more orders to the basket
    and repeat steps 7, 8, and 9
    11) If the PDF is multiple pages long then confirm:
    - The text "Order number must appear on all related correspondence, shipping papers and invoices. Notify us immediately if you are unable to supply item(s)." appears above the order table.
    - The page numbers at the bottom of the first page are not obscured by
    the order table.
    - That the order table starts near the top of the second page, and not
    half way down.
    12) Change content in the '1PageOrderPDFText' syspref (use the Enter key
        to split text over multiple lines) and save
    13) Back in the Acquisitions module click the button to Export as PDF
    14) View the exported PDF. Confirm the following:
    - The text above the order table is what you saved in the
    1PageOrderPDFText system preference
    - The page numbers at the bottom of the first page are not obscrued by
    the order table.
    - That the order table starts near the top of the second page and not
    halfway down.
    15) Empty the 1PageOrderPDFText system preference and save
    16) Back in the Acquisitions module click te button to Export as PDF
    17) View the exported PDF and confirm the line of text between the
    Tel/Fax line and the order table has been removed.
    
    Sponsored-by: Pymble Ladies' College
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bc6d4d7b093779bae235a1f47b96916a90f9a70f
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Thu Mar 30 21:56:15 2023 +0000

    Bug 33393: Add system preference
    
    Sponsored-by: Pymble Ladies' College
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b1aa99e96df314e1ae5f5bc26b8061c74622cd7e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 11 10:45:08 2024 -0300

    Bug 35967: Add more test cases
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1b52c5c5395ebc11bde883ef1947fb91fd2e2cf3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 11 10:38:33 2024 -0300

    Bug 35967: (QA follow-up) `status` is not nullable
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9d8254efd39ef73741eeb80088c1c3378528918e
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Thu Feb 1 00:43:26 2024 +0000

    Bug 35967: Add REST API endpoint to list patron recalls
    
    This enhancement adds a REST API endpoint to list a patron's recalls:
    
    /api/v1/patrons/{patron_id}/recalls
    
    This depends on the logged in patron having the manage_recalls subpermission.
    
    To test:
    
    1. Log in to the staff interface as your superlibrarian self (Patron A)
    2. Go to Koha Administration -> Global system preferences. Enable the UseRecalls system preference
    3. Set the relevant recalls circulation and fines rules
    4. Search for an item (Item A)
    5. Check out Item A to yourself (Patron A)
    6. Log in to the OPAC as Patron B, a patron who does not have the manage_recalls permission
    7. Search for Item A and request a recall
    8. While still logged in to the OPAC as Patron B, hit this URL: https://your-opac-url/api/v1/patrons/patron-b-borrowernumber/recalls (swap out your URL and Patron B's borrowernumber)
    9. Confirm you are given an error: "Authorization failure. Missing required permission(s)."
    10. Log out of the OPAC and log back in, this time as Patron A
    11. Hit the URL again https://your-opac-url/api/v1/patrons/patron-b-borrowernumber/recalls
    12. Confirm you are able to view a list of Patron B's recalls
    13. Confirm tests pass: t/db_dependent/api/v1/patrons_recalls.t
    
    Sponsored-by: Auckland University of Technology
    
    PA amended: QA follow-up: tidy
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6764166b20d75e3527b72101d7b02194dd843938
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Apr 19 13:28:02 2024 +0000

    Bug 19605: (QA follow-up): available_backends fix reduce
    
    available_backends was only considering dir backends for reduce, it should consider all backends, including plugin backends.
    
    This relates to the ILLOpacbackends syspref, where if you add a backend name that happens to be a plugin, it was not disabling it for the OPAC.
    This change considers all backends for Illopacbackends, regardless of if its a plugin or a directory backend.
    
    This was made evident while writing tests for bug 36197.
    Regression tests for this particular use case, and others, are part of bug 36197.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 764e6cd57a670cb5f38195827ebd3a3a24b675c9
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Mar 28 16:56:34 2024 +0000

    Bug 19605: Another fix after bug 35536
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 984710c3bfcf47451ec5def15fe3aa239ede390e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 25 14:18:09 2024 -0300

    Bug 19605: Fix after bug 35536
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f45be5c15a24518f46161d16ed99165a3daceba8
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Mar 9 10:00:17 2024 -0300

    Bug 19605: Clarify method name
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e06cd47e251637393d94a1f5bade48950396c87d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Mar 9 09:47:45 2024 -0300

    Bug 19605: Rename method and use the instantiated plugin in the call
    
    This patch makes the backend instantiation happen through a plugin
    object method instead of a static one. This way, the (already)
    instantiated plugin can be reused (if needed) in the plugin workflow
    like this:
    
    sub new_il_backend {
        my ($self, $params) = @_;
        return Custom::Backend->new(
            {
                config => $params->{config},
                logger => $params->{logger},
                plugin => $self,
            }
        );
    }
    
    The passed plugin object would then be used to retrieve whatever
    plugin-defined configurations, template paths or even helper methods. On
    INN-Reach, it gives the backend access to API user agents, task queue
    injection, etc.
    
    This patch also renames the method so it is more straight-forward this is
    related to ILL.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a78753367dca1d6814c6dfc100aa286769c14ffc
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Mar 9 09:10:03 2024 -0300

    Bug 19605: Tidy
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 37935c7284bd8424f3ad57bdcc5c79da73daa495
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Oct 30 11:14:04 2023 -0100

    Bug 19605: Add support for ILL backends as plugins
    
    This is designed to maintain existing functionality of loading ILL
    backends through the backend_dir config (default Koha/Illbackends/).
    
    A check for a plugin of a given backend name takes precedence over a
    backend of the same name loaded the old way through backend_dir, this
    means that if this happens, the backend plugin is used and NOT the
    backend present in backend_dir.
    
    Old backend_dir backends AND new backend plugins coexist.
    
    Test plan, k-t-d:
    1) Enable ILLModule and install FreeForm, run:
    bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev.sh)
    2) Install the plugin ILL backend example .kpz located at:
    https://github.com/ammopt/koha-ill-backend-plugin/releases/tag/1.0.0
    3) koha-plack --restart kohadev
    4) Visit ILL requests:
    /cgi-bin/koha/ill/ill-requests.pl
    5) Click "+ New ILL request". Notice it lists 'FreeForm' and
       'PluginBackend'
    6) Click 'PluginBackend'. Enter a '123' in pubmedid, '42' in cardnumber
       and pick a library. Click 'Marke request'
    7) Notice the request is created successfully.
    8) Visit plugins:
    /cgi-bin/koha/plugins/plugins-home.pl
    9) Click "View plugin by class". Pick "ill backend plugins". Notice the
       correct plugin is listed.
    10) Click "configure" on the ILL backend plugin. Notice it's a normal
        plugin configuration page
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 513657b09a00934009f77adaf2c31fdea98ecce7
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Oct 30 12:22:52 2023 +0000

    Bug 19605: Update expandTemplate to expand_template method name
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7233681b6c947e2d504ca39c0afe39a0ce2fd9e2
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Oct 30 11:09:39 2023 -0100

    Bug 19605: Add 'ill_backend' plugin category
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 136dc62c61c91de4ba536500ba7f636301b07302
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Mar 8 21:12:39 2023 +0000

    Bug 33174: Add warning about how many holds are being cancelled
    
    To test:
    1. Apply patch
    2. Find or make a record with many holds on it.
    3. Go to the Holds tab ( request.pl ).
    4. Select some hodls to cancel and press "Cancel selected"
    5. A modal popup will appear. Notice the warning telling you exactly how many holds you are about to cancel. Confirm the count is accurate.
    6. Try using the select all button and make sure the warning is accurate.
    7. Make sure you can cancel the holds.
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 518b3aa4a3631b8ec7c6a700e3df1f9076d00213
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Mar 6 23:44:08 2024 +0000

    Bug 35862: Display modal search results to the right of form above 1200px
    
    To test:
    1. Apply patch
    2. Rebuild CSS ( yarn build )
    3. Look at some of the places where there is a modal patron search.
        -suggestion/suggestion.pl: Set to patron
        -members/memberentry.pl: Add guarantor
    
    4. Make sure the modal looks good before and after you have searched for a patron.
    5. Play with many different screen sizes, ensuring everything looks good and makes sense.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b9804c0781f88516c8ba60d584d9a2fa30bf9f36
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Dec 22 10:36:42 2023 +0000

    Bug 34575: Add a CSS class to patron email
    
    Adds a CSS class to the patron email section in the 'name-address' column of search results in members-home.pl
    No functional behaviour change.
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 99014e9395c1811e6c9c31cbb781d77f49f05cc8
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Dec 21 14:11:35 2023 +0000

    Bug 34574: Add CSS class to datatable select filter
    
    Test plan:
    
    1) Create a new patron category, visit:
    /cgi-bin/koha/admin/categories.pl?op=add_form
    2) Add a category code, en enrollment period, a category type and a really long description like:
    "This is a real long description of the patron category code for demo purposes"
    3) Now do the same but for a library, visit:
    /cgi-bin/koha/admin/branches.pl?op=add_form
    4) Add a library code and a really long name like:
    "This is a real long library name for demo purposes"
    5) Visit patrons home:
    /cgi-bin/koha/members/members-home.pl
    6) Hit "Search". Notice the "library" and "category" columns grow in width to match the largest option (added in previous steps)
    7) Apply patch, add the following CSS to IntranetUserCSS:
    .dt-select-filter{
            max-width:200px;
    }
    8) repeat 5) and 6). Notice the columns no longer grow in width.
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0f31a5c9bcc7c4369fbd07027d3f5aafaa721822
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 19 17:11:56 2024 +0000

    Bug 35151: DBRev 23.12.00.024
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5e0d5d8c73768195ce4f30c2a3e69ed1ce941a8b
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 19 17:10:42 2024 +0000

    Bug 35151: (follow-up) Remove ILLModuleCopyrightClearance from sysprefs.sql
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c1ac7b4db9354d3b55ba700f06660a4592cef91e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 26 14:38:14 2023 +0000

    Bug 35151: Convert ILLModuleCopyrightClearance system preference to additional contents
    
    This patch moves the ILLModuleCopyrightClearance system preference into
    HTML customizations, making it possible to have language- and
    library-specific content.
    
    To test you should have some content in the ILLModuleCopyrightClearance
    system preference before applying the patch. Apply the patch, run the
    database update process, and rebuild the OPAC CSS.
    
    - In the staff client, go to Tools -> HTML customizations and verify
      that the content from ILLModuleCopyrightClearance is now stored there.
    - The HTML customization entry form should offer
      ILLModuleCopyrightClearance as a choice under "Display location."
    - Update and reinstall active translations (for instance fr-FR):
      - perl misc/translator/translate update fr-FR
      - perl misc/translator/translate install fr-FR
    - Enable the translation if necessary under Administration -> System
      preferences -> language.
    - Enable the "opaclanguagesdisplay" preference if necessary.
    - Edit the ILLModuleCopyrightClearance HTML customization and add unique
      content to the "fr-FR" tab.
    
    - Enable the "ILLModule" and "ILLModuleUnmediated" system preferences if
      necessary. You must have at least one ILL backend installed.
    - Log into the OPAC and click the "Interlibrary loan requests" in the
      sidebar menu on the user summary page.
    - Click "Create new request."
    - You should be taken to a page with your ILLModuleCopyrightClearance
      content shown along with "Yes" and "No" buttons.
      - Clicking "Yes" should take you to the form for creating a new
        request.
    - Switch to your updated translation and confirm that the content
      appears correctly.
    - Remove all "ILLModuleCopyrightClearance" html customizations. Test the
      "Create new request" process in the OPAC again.
      - There should be no confirmation step before arriving at the form for
        creating a new ILL request.
    - Go to Administration -> System preferences and search for
      "ILLModuleCopyrightClearance." It should return no results.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a4855c3ce287c8fb8f985f41e611d86f86b86599
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Feb 15 15:18:38 2024 +0000

    Bug 36105: Add 'No status alias' option
    
    1) Install FreeForm and enable ILLModule, run:
    bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev.sh)
    2) Visit /cgi-bin/koha/admin/authorised_values.pl add search for 'alias', click on ILL_STATUS_ALIAS
    3) Click on the 'New authorized value for ILL_STATUS_ALIAS' button and add 'alias_code' in authorized value and 'Alias Description' in Description
    4) Visit /cgi-bin/koha/ill/ill-requests.pl and create a new FreeForm request
    5) After created, click 'Manage request', and then click the 'Edit request' button
    6) Edit the Status and select 'Alias Description', click 'Submit'
    7) Create a second request but do not set a status alias this time
    7) Visit /cgi-bin/koha/ill/ill-requests.pl and select 'Alias description' on the 'Status aliases:' left-side filter
    8) Notice the correct record is returned.
    9) Now repeat 7) and select 'No status alias'. Notice the request with an empty status_alias is returned
    10) Repeat 7 but select 'All status aliases'. Notice both requests are returned
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Nell O’Hora <nohora@aub.ac.uk>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d7d22d38b89a91d987ab2b9c46ac5aaca6db5c38
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 19 17:03:30 2024 +0000

    Bug 32132: DBIC schema update
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 065555dfc67fa0f9ea79b25135b7cf78a3564582
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 19 17:01:54 2024 +0000

    Bug 32132: DBRev 23.12.00.023
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d5e54b584beda81458b04fd05b6519d45775324b
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Fri Feb 2 09:02:59 2024 +0200

    Bug 32132: Do not allow NULL value in column aqbudgets.budget_period_id
    
    If budget_period_id column is set as NULL, "Late orders"
    page dies on error 500. Logs read:
    
    Template process failed: undef error - DBIC result _type isn't of the _type Aqbudget at
    /home/koha/Koha/koha-tmpl/intranet-tmpl/prog/en/modules/acqui/lateorders.tt line 157
    
    This patch makes changes to column aqbudgets.budget_period_id so that it
    no longer allows NULL values. This is in line with aqbudgets tables foreign key
    "budget_period_id" which has ON DELETE CASCADE clause.
    
    To test:
    1. Run prove t/db_dependent/Koha/Acquisition/Fund.t
    => Tests should fail
    2. Run updatedatabase.pl and restart services if needed
    3. Rerun prove t/db_dependent/Koha/Acquisition/Fund.t
    => Tests should now pass
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 66ddaa01312d6f74262f840160ccd54207fb0baa
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 19 16:26:03 2024 +0000

    Bug 35724: DBIC schema update
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e9da79efe1217f28f92ae07d44fd16497317e288
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 19 16:22:21 2024 +0000

    Bug 35724: DBRev 23.12.00.022
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d1bd2e9c036db439d969aa470410abaf8e727f08
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Feb 27 11:08:59 2024 +0000

    Bug 35724: (QA follow-up) Also account for port in FTP
    
    We were only passing port into SFTP connections.. now that we allow
    defining it, we should also pass it to FTP connections just in case
    someone is still using those.
    
    This patch adds such functionality and defaults to port 21 in this case
    when the port isn't defined.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e881ace64a99106520e84426439f98e55a0d1c80
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Feb 27 11:01:42 2024 +0000

    Bug 35724: Sync database update and kohasctructure and set to int(11)
    
    We use int(11) in the smtp_servers table for port, so I think it makes
    sense to use the same here too.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0c6a2bd1ad05c812e7ad600288481f5f21dd42ec
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Mon Jan 8 14:47:37 2024 +0000

    Bug 35724: Define non-standard ports for EDI SFTP in EDI accounts
    
    Not all EDI vendors accept Koha servers connecting on port 22, sometimes
    they require a different port to be used, so it would be helpful for
    librarians to be able to configure non-standard EDI SFTP ports
    themselves.
    
    Test plan:
    1. Set EDIFACT syspref = 'Enable' and define a EDI account: Administration > Acquisition parameters > EDI
    accounts.
    2. Create an EDI order: https://koha-community.org/manual/latest/en/html/acquisitions.html#ordering-via-edi
    3. Confirm you can upload the EDI order and download the vendor invoice.
    4. Apply patches, update database, and restart services.
    5. Go to the EDI account you made in #1.
    6. Confirm there are two new fields: Upload port and Download port, both
    have the value of 22.
    7. Create a new EDI order.
    8. Confirm you can upload the EDI order and download the vendor invoice.
    9. Change the EDI account. Set the Download port = 10022.
    10. Create a third EDI order.
    11. Confirm you can upload the EDI order and download the vendor
    invoice.
    
    Sponsored-by: Waikato Institute of Technology, New Zealand
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 185b5ec10ed4abd5dc461637279564d45d7e1c13
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Mon Jan 8 14:45:04 2024 +0000

    Bug 35724: Template changes
    
    Sponsored-by: Waikato Institute of Technology, New Zealand
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 12fabb40831c843d5a7deeb2b56218014c0369a7
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Mon Jan 8 14:40:38 2024 +0000

    Bug 35724: Database changes
    
    Sponsored-by: Waikato Institute of Technology, New Zealand
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f4f2fdb65f37780004d6d538c090902c20544167
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Feb 20 20:49:29 2024 +0000

    Bug 36138: Add reason to status column on opac-holdshistory, if there is a reason
    
    TO TEST:
    1. Turn on OPACHoldsHistory
    2. Make some holds for a patron and then cancel them with a reason.
    3. Log in as that patron and go to the 'Holds history' tab. Notice the text in the 'Status' column is 'Cancelled' but nothing shows up regarding the reason.
    4. Apply patch and try again, this time you should see the reason for cancellation.
    
    Signed-off-by: Esther <esther@bywatersolutions.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit afcd869faeb5756c4b5578c07da1e02fee9f225e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Nov 17 16:29:39 2023 +0000

    Bug 35362: Update patron module pop-up windows with consistent footer markup
    
    This patch updates two patron-related templates in order to style
    submission and close buttons in a fixed footer at the bottom of the
    window, with markup consistent with other pop-up windows.
    
    The patch also updates the "Update child" popup js so that it uses
    the same window-opening function we use elsewhere. I also added form
    validation to the category selection form to help prevent errors if
    someone submits the form without making a selection.
    
    To test, apply the patch and go to the Patrons module
    
    - Click "New patron" and add a patron with the same first and last name
      of a patron already in the database.
    - When you save the new patron record the page should reload with an
      error message: "Duplicate patron record?"
    - Click "View existing record"
    - A pop-up window should appear with patron information.
    - Confirm that the window's footer looks correct.
    
    - Locate a patron with an age-limited child category. In the sample data
      the "Juvenile" category works.
    - View the patron detail page and click More -> Update child to adult
      patron.
    - A pop-up window should appear with patron category selection options.
    - Try submitting the form without making a selection. You should see a
      message about fields being required.
    - Select a category and submit the form to confirm that the controls
      work correctly.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 58b89df4355dcbd1d32162380b67d40720732d33
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Oct 19 14:13:48 2023 +0000

    Bug 35108: Hide empty fields on ILL manage request page
    
    Optionally empty fields are: orderid, biblio_id, batch,
    type, type_disclaimer_value, type_disclaimer_date, cost,
    price_paid, notesstaff, notesopac.
    
    Test plan, k-t-d:
    1) Install FreeForm and BLDSS backends, run:
    bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev-plus.sh)
    2) Create a new FreeForm request, visit:
    /cgi-bin/koha/ill/ill-requests.pl?method=create&backend=FreeForm
    5) Set type 'Book', put '42' in the cardnumber, and pick a library. Click 'create'.
    6) Notice how there is a lot of unnecessary empty field entries
    7) Apply patch, restart plack (koha-plack --restart kohadev)
    8) Refresh the page, notice all the empty fields entries are no longer displayed
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 65e1284ee2550a92bd08f6caec3a941bd35dba6a
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Oct 19 14:00:12 2023 +0000

    Bug 35108: Move request id to page header
    
    Redundant information, can be moved to header for more visibility and less horizontal length
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit efb18db778bcbb0f730602800cc85be12472d1c0
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Apr 19 09:02:13 2024 +0000

    Bug 36093: (QA follow-up) Fix unit tests
    
    This patch removes some unnecessary lines from the test file
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8a1477557e8832c68583b1fac8d662f6e056bc1e
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Mar 1 10:29:40 2024 +0000

    Bug 36093: Add unit test and fix QA tests
    
    prove t/db_dependent/api/v1/erm_custom_reports.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 675ffb1b694339fedbe36f13b82b4fc1a8c8772d
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Feb 14 12:29:01 2024 +0000

    Bug 36093: Fix missing array reference
    
    This patch adds an array reference where it was previously missed.
    
    Test plan:
    Review patch diff and observe that the array reference is now correctly added
    
    Signed-off-by: Jonathan Field <jonathan.field@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8c7ce470c18a0140617d58798e76c5f1bbac0b4e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 18 08:50:55 2024 +0200

    Bug 36634: Replace cud-show with show in tools/automatic_item_modification_by_age.pl
    
    It's never used in the template anyway but for consistency it would be better to use "show" (it's not CUD)
    
    No change expected.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit be4700b0f087e42ea4ab9075fd656b775c63048a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 12 11:21:07 2024 +0000

    Bug 8461: Tidy
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f5fcdb83e63683fac2c369ba3247d16bbd9f9a05
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 24 14:49:53 2024 +0000

    Bug 8461: Display information on withdrawn item when checked in
    
    This patch displays the due date and withdrawn information in the Checked-in items table when 'ShowAllCheckins' is enabled. While the top message is clear, if a staff member checks in two items, then refers to the table they would not have all the information.
    
    To test:
    1 - Enable system preference 'ShowAllCheckins'
    2 - Set system preference 'BlockReturnOfWithdrawnItems' to 'Block'
    3 - Check out an item to a patron
    4 - Mark the item as withdrawn
    5 - Check the item in
    6 - Note message at top says things like 'Cannot check in' 'Item has been withdrawn'
    7 - Note the Checked-in items table says 'Not checked out'
    8 - Apply patch, restart all
    9 - Check the item in again
    10 - Note top message has not changed
    11 - Note the table now say 'Item was not checked in' and displays the due date and patron info
    12 - Note the table also includes the withdrawn value for the item
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a3fc07806a9198ee2ffd1bf6c5373c360bb84520
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Apr 18 14:38:51 2024 +0000

    Bug 36623: (follow-up) Fix translation 'Cronjobs'
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cd1f4145fe091314895a4f8a4f73a5b3a5f8bb87
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Apr 17 11:48:16 2024 +0200

    Bug 34963: Restore the ability to blank fields when editing a suggestion
    
    Regression introduced by bug 23991.
    We don't want to remove the fields from the edition if they are empty.
    
    Ideally we should have separate parameters for edition and search, but
    this is the low-effort fix, and hopefully won't introduce side-effects.
    
    Test plan:
    Try to edit a suggestion and blank some fields
    Try to search for suggestions using the search form on the left of the
    screen
    
    Signed-off-by: Ray Delahunty <lib-systems@arts.ac.uk>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6f705dfb1fe49d65cea09a76cef212ff5205671b
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 19 15:52:33 2024 +0000

    Bug 35973: DBRev 23.12.00.021
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b6a4aa541f43f6c1a4481474ea7059d1ceb83576
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 19 13:30:28 2024 +0000

    Bug 35973: (QA follow-up) Ad exec flag to update
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 34c85d051d330210227eccf76dd835d6b35b3e60
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Mar 17 16:46:26 2024 +0000

    Bug 35973: Correct wrong values for RedirectGuaranteeEmail system preference
    
    The system preferences was added with 0/1 in sysprefs.sql is checked
    as boolean. But the .pref file was added with yes/no which both
    evaluate as strings to true.
    
    This fixes the .pref file and includes a database update that sets
    0 and 1 correctly for the value currently chosen in the pref.
    
    To test:
    * Make sure to update RedirectGuaranteeEmail to Enable/Don't enable
      before applying the patch
    * Verify in the database, that the values was set to yes or no
      You can use a report like:
        SELECT * from systempreferences WHERE variable = "RedirectGuaranteeEmail";
    * Apply patch and run database update
    * Verify the value in the database was corrected:
      Yes = 1, No = 0
    * Change the setting, verify the new value is stored correctly
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1ebd742e08494c111a8998bee730ed8bd4bcee37
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 8 15:25:10 2024 +0000

    Bug 35394: Correction to booked items logic
    
    This patch fixes the overly extreme message that was designed to appeared
    when someone tried to check out a booked item to the wrong user.
    However, the message never appeared due to a logic error within
    CanBookBeIssued which this patch also resolved.
    
    Test plan
    1) Make an item bookable
    2) Add a booking for the item to patron A from tomorrow
    3) In the database, update the booking start_date to today (or wait a
       day before the next step)
    4) Attempt to check the book out to patron B.
       Note that you are displayed with the new message 'The item is booked
       for another patron' and you are unable to check the item out.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1ace57be4643ee255f9ad6ecd135c4e9a1d184e7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 18 08:54:48 2024 +0200

    Bug 36635: Fix vendor's issue show view
    
    Should be "show" not "cud-show"
    
    Test plan:
    Create an issue for a vendor, click on the issue's id on the issue list
    table
    Notice that with the patch applied the issue is displayed. Without the
    patch the "show" view is empty
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 82270fb7e70d9f861c172b6b68c2cc6d5b40c056
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Apr 19 07:05:53 2024 +0000

    Bug 27893: (QA follow-up) Rephrase warning
    
    See comment24 as well.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c1a983a7c7d01f66c242c6c645d8380d4083874d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Apr 19 07:03:02 2024 +0000

    Bug 27893: (QA follow-up) Terminology
    
    See comment24.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 98a500d12005f854709676e1849d1acb9064dd6f
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Feb 19 13:24:47 2024 +0000

    Bug 27893: Optionally skip biblio with open orders in batch delete
    
    If the user unchecks the skip checkbox (on by default), we must
    make sure that order cancellation is done in background job.
    
    Test plan:
    Pick two biblios. One has linked open orders, the other not.
    Go to batch delete records. Select 'Enter list of numbers'.
    Enter both biblio numbers and check that only one is used on the
    follow-up form.
    Run the deletion without the skip open orders and verify
    that linked order line is cancelled.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 82a5b673e18ea423260d3699eed982980c5081aa
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Feb 19 11:43:32 2024 +0000

    Bug 27893: Cancel acq orders in addbiblio.pl
    
    When the user confirms removal although we have linked orders,
    we should cancel them.
    
    Test plan:
    Add order line to a basket.
    Goto newly added biblio record, remove items, remove biblio.
    Notice the warning about attached order lines.
    Confirm. Check the basket again after deletion took place (cancelled line).
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 33e463c108ea76a67661cdf18a68275173b7e4ca
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Apr 18 14:31:37 2024 +0000

    Bug 36068: (QA follow-up) Add OPTIONS section in POD
    
    Test plan:
    Run script with --help.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 54211c84873fbf262f9b69bdee03c33155686006
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Feb 14 16:57:50 2024 +0100

    Bug 36068: Do not overwrite cancellation date in ->cancel
    
    Test plan:
    Run t/db_dependent/Koha/Acquisition/Order.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e50582293bb74ea8cb7ebf57344a89c368d43185
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Feb 8 15:29:30 2024 +0000

    Bug 36068: Add maint script acq_cancel_obsolete_orders.pl
    
    Introducing $orders->filter_by_obsolete and $orders->cancel.
    
    Test plan:
    Run t/db_dependent/Koha/Acquisition/Orders.t
    Create basket with few orders. Remove some biblio records.
    Run acq_cancel_obsolete_orders.pl -c
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit eae74ed6d9935ee7247ccd85f9a1d502755ca338
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Apr 11 10:40:16 2024 +0000

    Bug 36563: Turn into array only if required
    
    Test plan, apply first patch:
    1- Visit item search:
       http://localhost:8081/cgi-bin/koha/catalogue/itemsearch.pl
    2- Set "Home library" -> "is not" -> "Centerville". Notice you get items
       from Centerville.
    3- Apply second patch, repeat step 2, notice you now don't get items
       from Centervile.
    4- Test other use cases, like 'is' and 'is not' for multiple choices
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 492d7be2ccba07f47771184fd5cc903383abb63b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Apr 10 12:04:18 2024 +0200

    Bug 36563: Dirty fix
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 903a8685c661ddde61335a08e126506120345abc
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 18 11:17:33 2024 +0000

    Bug 36473: (follow-up) Additionally warn the stringified exception
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1b99de33f9e553f80507ef7da5e711b98e979e39
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 18 10:35:52 2024 +0000

    Bug 36473: (follow-up) Add biblionumber to warning
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0191500149433313aa73a6c43255a19d659acad0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Apr 18 10:33:40 2024 +0000

    Bug 36473: (follow-up) Correct biblio to bibliographic
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2973a4e81a2878b8d2654477b2556ad1b1fb4e46
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Mar 21 14:17:35 2024 +0000

    Bug 36386: Pass user and group to Net::Server
    
    This prevents the User/Group Not Defined warns in syslog.
    
    Test plan:
    Restart sip and check your syslog.
    
    KTD Test Plan:
    1) Stop your SIP server
    2) Run "perl C4/SIP/SIPServer.pm /etc/koha/sites/kohadev/koha-conf.xml"
       We need valid XML without any valid SIP settings to the output goes
       to the command line
    3) Note the warnings
    4) Apply this patch
    5) Repeat step 2
    6) No warnings!
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 644294e73bb17cc1527aaef5259de54106deb8cc
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Apr 17 15:03:53 2024 +0000

    Bug 36623: Remove localhost reference
    
    This patch removes a reference to localhost from a url within ERM
    
    Test plan:
    This is quite hard to test without sushi credentials and is quite an easy fix. Check the patch diff to verify that the localhost reference has now been removed from the url
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e90cba4e3819fd244e9397fec6c1bc0c4984690d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Apr 17 12:06:03 2024 +0200

    Bug 30068: Remove table_settings_borrowers_table from circulation.tt
    
    The history is a mess, but here we init a JS variable that is never
    used.
    
    Test plan:
      git grep table_settings_borrowers_table
    should not return anything after this patch applied
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1e9bdfb56c5c871a6d29ebc0a0e6d70267a209fe
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Apr 2 12:41:42 2024 +0000

    Bug 36490: Correct tab-switching keyboard shortcut for header search forms
    
    This patch updates staff-global.js so that we correctly define the
    keyboard shortcuts for search header tabs following the switch to using
    the WRAPPER for tabs in Bug 35850.
    
    To test, apply the patch clear your browser cache if necessary.
    
    - Go to the staff interface.
    - Test each keyboard shortcut to confirm that the header search tabs
      activate correctly:
      - Check in: Alt-r
      - Renew: Alt-w
      - Search: Alt-q
      - Check out: Alt-u
    - Test that the keyboard shortcut takes you to the correct page if the
      header search form doesn't exist on the page, e.g. the Authorities
      home page.
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 154a2ea9ad5b6e911a504b8798f5ffe6df1c2297
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Mar 27 12:01:32 2024 +0000

    Bug 36420: Allow Basic authentication using `cardnumber`
    
    This patch makes the API Basic authentication work with cardnumbers.
    The used `checkpw_internal` method already does the fallback check.
    
    To test:
    1. Apply the unit tests patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/auth_basic.t
    => FAIL: Tests explode! [1]
    3. Apply this patch
    4. Repeat 2
    => SUCCESS: Tests pass!
    5. Sign off :-D
    
    [1] This highlights an underlying bug! Instead of getting 403, etc we get a 500. This is because of the internal fallback mechanism allowing the cardnumber+password combination, but then the Koha::Patron->find... not finding :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5c3ad38157f483aeb4ff26048a838b3ba6ad34fc
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Mar 27 12:00:48 2024 +0000

    Bug 36420: Unit tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fccbd327d9f93925917e7a4f478ab72c1d1f2363
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Feb 26 15:59:29 2024 +0000

    Bug 30987: Fix relationship fields for patron full and quick add forms
    
    To test:
    1. APPLY PATACH and restart services.
    2. Find the borrowerRelationship system preference. The description should no longer include the words "Leave empty to deactivate."
    3. Populate the system preference with at least 1 choice.
    4. Find a patron category with can_be_guarantee set to 'Yes'.
    5. Quick add a patron of that type, making sure the relationship field shows in the Patron guarantor section. ( You have to +Add gaurantor before this field will show )
    6. The values in the dropdown should refelct the borrowerRelationship values.
    7. With BorrowerMandatoryField make relationship mandatory.
    8. Try step 5 again, this time the Relationship field should be mandatory.
    9. Remove the field from  BorrowerMandatoryField and add it to BorrowerUnwantedField.
    10. Do step 5 again, the relationship field should not show on the quick add form.
    
    Signed-off-by: Myka Kennedy Stephens <mkstephens@fosgail.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 82fe22ff26fdcc203d1a6f9c281bd56cfff08f70
Author: Brendan Lawlor <blawlor@clamsnet.org>
Date:   Wed Apr 17 20:57:34 2024 +0000

    Bug 36630: Change Post to GET to fix CSRF error on item search batch operations buttons
    
    This patch changes the form that submits to batchMod.pl from the Item search results page. The form method does not need to be a POST.
    
        To recreate:
    
        1. Do an item search
        2. On the results page 'click Select visible rows'
        3. Click 'Batch operations' and select 'Batch item modification'
        4. See Programming error - op 'show' must start with 'cud-' for POST http://localhost:8081/intranet/tools/batchMod.pl (referer: http://localhost:8081/cgi-bin/koha/catalogue/itemsearch.pl)
        5. Click 'Batch operations' and select 'Batch item deletion'
        6. See the same error
    
        To test:
        1. Apply patch and repeat steps to recreate the issue
        2. See that the batchMod.pl page loads with no error.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 68f884d32fb1cfc2d629c117d0932cfa709dec37
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Thu Apr 11 12:36:25 2024 +0000

    Bug 36577: (bug 34478 follow-up) marc21_linking_section.pl not working
    
    After applying "Bug 34478: op =~ ^cud- everywhere" the plugin
    marc21_linking_section.pl stopped working properly.  Since the plugin
    does not perform a CUD operation, the GET request can be used, and so
    the use of CSRF token is not needed.
    
    The patch fixes also problems with result page numbers display.
    
    Test plan
    =========
    1. Configure a MARC bibliographic framework to use the plugin
       marc21_linking_section.pl (e.g. in 773 $t).
    2. Start creating a new record and go to 773 $t. Activate the plugin to find
       the any record to become the host record (perform a search for any
       common word, like 'and').
    3. You will get no results.
    4. Apply the patch, restart plack etc.
    5. Repeat p. 2 - you should now see some results, possibly more than one
       page.  You should be able to change page with Next/Previous arrows and
       also with the page numbers.
    
    BTW, QA people - maybe it would pay to remove the commented code present there
    since the very beginning (2012).
    
    Signed-off-by: Roman Dolny <roman.dolny@jezuici.pl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a81c98e1ea39f4b04bb3eec2fde7c8c6f331e6a3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Apr 12 12:31:15 2024 +0000

    Bug 36597: Fix deletion of circulation desks broken by CSRF
    
    Our CSRF work introduced a problem with deleting circulation desks: The
    "delete_confirm" does not need "cud-" because it's a GET operation
    leading to a POSTed deletion after the confirmation is submitted.
    
    To test, apply the patch and restart services.
    
    - Go to Administration -> Circulation desks.
    - If necessary, create a circulation desk.
    - Click the "Delete" button for you new desk.
    - You should be taken to a confirmation page which shows details of the
      desk you're deleting.
    - Confirming the deletion should result in deletion of the desk.
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e26fc0a3d5a83a7b22f0c3907a98d470b0e2443d
Author: Brendan Lawlor <blawlor@clamsnet.org>
Date:   Fri Apr 12 15:29:37 2024 +0000

    Bug 33832: Allow updating username without changing password on member-password.pl
    
    This patch updates the change password page on the staff interface to
    allow for changing the patron's username without changing the password.
    If the new password is an empty string we can skip setting the patron's
    password and sending the new password to the template.
    
    Test plan:
    1. From a patron record tool bar click 'Change password'
    2. Notice that if you try to change the user's name without also
       changing the password the page just reloads and nothing happens
    3. Apply patch and restart_all
    4. From the patron record click 'Change password' again
    5. Set the user's new username and  password eg. '1234Abc' and click
       'Save'
    6. Confirm that you can log in to the OPAC with the user
    7. Return to the patron record and click 'Change password' again
    8. This time change just the 'New username field' and click 'Save'
    6. Notice that the username is updated
    7. Confirm you can log into the OPAC with the new username and the
       original password '1234Abcd'
    8. Make sure that the change password form still validates passwords
       for length and matching errors etc
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7c71798b44c93be650bb5c5c682a4a24f83ba20d
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Tue Feb 20 09:49:48 2024 -0500

    Bug 35810: (QA follow-up) Add aria label for accessibility
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 926e87de86496003915247bf6d50e4290fd3a1e4
Author: Thibaud Guillot <thibaud.guillot@biblibre.com>
Date:   Mon Jan 15 11:19:51 2024 +0100

    Bug 35810: Add back to top button on staff pages
    
    Test plan:
    
    1) Apply this patch and rebuild css with 'yarn build'
    2) For example, perform a search from catalogue
    3) Scroll down to see the button appear and scroll up to see it
       disappear
    
    Note that it's works also on patron search etc..
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 24fab500c402b2d91a51e29beaf72fdff918ad22
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Nov 29 16:37:04 2023 +0000

    Bug 35432: Expand comments to explain the priority of filling requests
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1bc658e0470322a2d45da3f27f5f32eb8891b8aa
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Nov 29 15:00:18 2023 +0000

    Bug 35432: Remove PULL_BRANCHES and use ifs over unless
    
    PULL_BRANCHES and PULL_BRANCHES2 felt a little arbitrary, moved
    to using a last in the outer loop.
    
    Swapped 'next unless' for an if to more directly show when we are acting
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 707b655b6249d56e69c0d95de434a6eef173bf03
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Nov 29 14:50:41 2023 +0000

    Bug 35432: Simplay HoldsQueuePrioritize branch check
    
    The code here is going to check items held the the pickup location for a request
    or from the least cost branch matching the patron's home library against the HoldsQueuePrioritizeBranch
    setting
    
    The loop is the same in both case, so lets simplify this a bit to make the intent more clear
    
    To test:
    1 - prove -v t/db_dependent/HoldsQueue.t
    2 - It should pass before and after this patch
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0297cb8c175818aa9081e1a8e9682af9ad68ae78
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Nov 29 14:15:09 2023 +0000

    Bug 35432: Add _can_item_fill_request subroutine
    
    There are a series of repeated checks throughout MapItemsToHoldRequests.
    
    This patch simply consolidates them into a single routine that can be called.
    
    To test:
    1 - prove t/db_dependent/HoldsQueue.t
    2 - Confirm it passes before and after this patch is applied
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c3ac21bffcb28ad538e4ba7f25c4503761122924
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Nov 29 14:02:08 2023 +0000

    Bug 35432: Add comments and POD
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a130290ccb1c96583b07a9e9ce81f6cafa47f794
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 12 07:36:52 2024 +0000

    Bug 20388: (QA follow-up) Tidy
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ec56284a26d73ca72de657f7a8880c99d46dd880
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 19 16:00:04 2024 +0100

    Bug 20388: Alert if the search field already exists
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: David Schmidt <davewood@gmx.at>
    Signed-off-by: Thomas Klausner <domm@plix.at>
    Signed-off-by: David Schmidt <davewood@gmx.at>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 748abf178425e281de6f0dd8d895ec9bc73a9ca1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 19 15:33:12 2024 +0100

    Bug 20388: Add trash icon to the delete button
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: David Schmidt <davewood@gmx.at>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 79b06917f7ff905c77189ff017279d8fce998bab
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 19 15:28:30 2024 +0100

    Bug 20388: Adjust code
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: David Schmidt <davewood@gmx.at>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0607e6adfa2dec9e92312303bfa1f11273eda39d
Author: Alex Arnaud <alex.arnaud@biblibre.com>
Date:   Wed Apr 7 13:20:53 2021 +0000

    Bug 20388: Elasticsearch - Ability to add search fields from UI
    
    Test plan:
    
      - apply this patch,
      - check that SearchEngine system preference is set to Elasticsearch,
      - go to Admin > Search engine configuration,
      - on the search fields tab, fill a new line at the bottom of the table
        (name, label, type)
      - click on the "Add" button and save,
      - check that the new search field has been saved,
      - also test field deletions,
      - check that you can't delete already mapped fields.
    
    Signed-off-by: Nicolas Legrand <nicolas.legrand@bulac.fr>
    Signed-off-by: Séverine QUEUNE <severine.queune@bulac.fr>
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Björn Nylén <bjorn.nylen@ub.lu.se>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: David Schmidt <davewood@gmx.at>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0e4677d3ef7f532e588fc016bc51b7bdb8a8e3f3
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Apr 16 15:21:00 2024 +0000

    Bug 36343: DBRev 23.12.00.020
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4b5a02bd1d9c4dc14151578d5a950a282add424a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Apr 16 13:13:55 2024 +0100

    Bug 36343: (QA follow-up) Add warning in DB update
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b6b6f06457c30959766bb62f834d5e66a039fe75
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Apr 5 07:29:40 2024 +0000

    Bug 36343: (QA follow-up) Adjust two other occurrences
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 55fce66a3f141ec31016974ca163ed35c795595f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Mar 18 13:36:11 2024 +0000

    Bug 36343: Add support for 'payload' to _after_biblio_action
    
    This patch adds support for the payload key into the _after_bilio_action
    plugin hook wrapper routine.
    
    This brings it more inline with how these 'action hooks' appear in Holds
    and circulation.
    
    Signed-off-by: Frédéric Demians <f.demians@tamil.fr>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 056b56a3c3afd70166456d5a9e98371ddaa37e7b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 15 06:57:49 2024 -0300

    Bug 36593: Add missing koha_object(s)_class methods to LibraryHour.pm (bug 9796)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 86f917e2bd92a8d8a9ad6286e9a3cc695d2e3e53
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Apr 15 06:56:53 2024 -0300

    Bug 36593: Add 'time' column type support to TestBuilder
    
    This simple patch adds support for the 'time' column type.
    
    To test:
    1. Run:
       $ ktd --shell
      k$ perl -Mt::lib::TestBuilder -e 'my $b = t::lib::TestBuilder->new; my
    $hour = $b->build_object({ class => "Koha::Library::Hours" });'
    => FAIL: It explodes as it doesn't know how to deal with the 'time'
    column type
    2. Apply this patch and the follow-up
    3. Run:
      k$ prove -MDDP -Mt::lib::TestBuilder -e 'my $b =
    t::lib::TestBuilder->new; my $h = $b->build_object({ class => "Koha::Library::Hours" }); p($h->unblessed);'
    => SUCCESS: It generates an hour!
    4. Run:
      k$ prove t/db_dependent/TestBuilder.t
    => SUCCESS: It builds all the things!
    5. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9c2510ea2ef1db46bf42cf948b6c599250d6dd9e
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Sat Mar 11 11:45:32 2023 +0100

    Bug 33205: (bug 28268 follow-up) Method call $row->authid inside quotes - produces meaningless warning
    
    Bug 28268, in
    Koha::MetadataRecord::Authority::get_all_authorities_iterator,
    introduced a warning:
    
    warn "Something went wrong reading record for authority $row->authid: $@\n";
    
    But a method cannot be called from within quotes in Perl - extrapolation
    does not work for functions/methods.  So, if something really goes
    wrong, this line of code produces a warning like:
    
    Something went wrong reading record for authority
    Koha::Schema::Result::AuthHeader=HASH(0x55cf7e0d0958)->authid: Empty
    String at /usr/share/perl5/MARC/File/XML.pm line 450.
    
    which is not very informative -- authid is missing.
    
    Test plan
    =========
    Hard to reproduce.  This problem occurs only in rare cases of some weird problem
    in stores authority data or if a auth record had been deleted after a ES reindex
    action has been initiated.  But the problem in the code and the fix seem obvious.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cc834ba187b7d4a4b817d73f5c4be0eb0ebdaaf4
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Apr 12 08:10:18 2024 +0000

    Bug 36552: (QA follow-up) Add a theoretical check on $record
    
    Theoretically, it might be empty? Note the check too in the
    other script.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 34746f5706fb49377e5d610a9fe6e2c4792b9b26
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Apr 12 08:07:40 2024 +0000

    Bug 36552: (QA follow-up) Add POSIX module
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit dd8f9e1266f2b93b0d57f1f1289d49f61129391e
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Thu Apr 27 01:04:48 2023 +0200

    Bug 36552: Update record 'date entered on file' when duplicating a record
    
    The 'date entered on file' (MARC21: 008/0-5, UNIMARC: 100a/0=7) of a record created
    by duplication of an existing record should be set to the current date instead of
    having the value of the original record.
    
    Test plan
    =========
    1. Check the 'date entered on file' of an existing biblio / authotiry record
       (MARC21: 008/0-5, UNIMARC: 100a/0=7).
    2. Duplicate the record by Edit > Edit as new (duplicate)
    3. Control the 'date entered on file' value - it will equal to that of the
       original record.
    4. Apply the patch (restart plack).
    5. Repeat step 2.
    6. Check the date - it should be the current date.
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c6641ef24f389e65a0dd90d3fd788f110f21158a
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Mar 18 07:04:23 2024 -0400

    Bug 34621: Tidy import_patrons.pl
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6a4c2dd03a99741129bd94e261d7681bd3e634de
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Mar 18 07:00:37 2024 -0400

    Bug 34621: Tidy Import.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b89d744e868cd93632d6b84f5f39116a475d342e
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Aug 25 17:37:46 2023 +0000

    Bug 34621: implement Patron import option to 'Renew existing patrons' 'from the current membership expiry date'
    
    Test Plan:
    1) Test importing a patron with the "from the current membership expiry date" option,
       note it does not work
    2) Apply this patch
    3) Restart all the things!
    4) Re-test, note the expiration was renewed from the patron's current
       expiration date!
    
    Signed-off-by: David Nind <david@davidnind.com>
    Rebased-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f3d2f34d7a6aeead30b40a30b239f15c6c94a7f2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Apr 1 14:32:08 2024 +0000

    Bug 36473: Handle Invalid Metadata Exceptions in totalissues.pl
    
    This patch wraps the call for record in an eval, and catches any invalid metadata
    exceptions, letting the warning show, but allowing the script to continue
    To test:
    1 - In default KTD record 369 has problems, otherwise you need to break a record
    2 - Run : misc/cronjobs/update_totalissues.pl --use-stats --commit=1000 -v
    3 - It dies at record 369 (or the one you broke)
    4 - Apply patch
    5 - Run again
    6 - It succeeds, but skips the bad record
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9e9cc822cbd7836827a9596f71c50d5ad37f6802
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Tue Apr 2 13:43:00 2024 +0000

    Bug 36473: Unit tests
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] Tidied.
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5d9396289e6ff754a79e5fad5f450144eb3a1c7c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Apr 2 12:53:45 2024 +0000

    Bug 36483: Patrons.pm use case
    
    This case brought my attention as there was a different 'user' parameter being passed.
    It turns out we already thought about this, and `objects.to_api` is of course always passing it :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 635e65a3303a01b90bbc93695b24c98720683f10
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Apr 2 12:43:51 2024 +0000

    Bug 36483: Make API controllers use $c->objects->to_api
    
    This patch makes all controller methods using direct $object->to_api, rely on $c->objects->to_api.
    
    Direct ->to_api calling prevents things like embeds, +strings, etc to be dealt with correctly.
    In some cases this change reduces the code as the authors extracted the embed structure from the stash and passed it explicitly.
    
    I left out two Patrons.pm cases because I need to study it a bit more.
    
    To test:
    1. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1
    => SUCCESS: Tests pass
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: Tests still pass!
    4. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9aa811c33481dddded624829dfd24643f31fc04d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 12 09:46:20 2024 +0000

    Bug 23102: No mock in selenium
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5bab87f76b05bbf8627cf6786975e9e30a5f2f6c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jun 12 11:43:48 2019 +0000

    Bug 23102: 404 errors on page causes SCI user to be logged out
    
    To test:
     1 - Have something on the SCO page that won't load
         Add to SCOUserJS:
            </script>
            <img src="http://localhost:8080/silk/famfamfam.png"/>
            <script>
     2 - Enable the SCO and SCI system preferences:
         WebBasedSelfCheck: Enable
         SelfCheckInModuke: Enable
         AutoSelfCheckAllowed: Allow
         AutoSelfCheckID / AutoSelfCheckPass to a valid user with permissions
     3 - Add the self_checkin_module and self_checkout_module permissions to the AutoSelfCheck user
     4 - Access the selfcheckout module https://yoursite.org/cgi-bin/koha/sco/sco-main.pl
     5 - Sign in using a patron
     6 - Enter an unkown barcode, I used "DONTMATTER"
     7 - If not logged out, click to 'Return to account summary'
     8 - You are asked to sign in again
     9 - Repeat with the SCI module
    10 - Apply patch
    11 - Repeat, but this time you can return to account
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fee56e8d85e4cd897293d9d8b0b48b66071fbde0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Feb 14 15:15:10 2020 +0000

    Bug 23102: Selenium test
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cc15deb0011fe2e816428451e442a10f144974e1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Apr 2 17:03:21 2024 +0000

    Bug 36494: Flatpickr error on checkout page if the patron is blocked from checking out
    
    This patch add some error-handling to the recent change to
    circulation.tt where we handle dates and on-site checkouts. This
    prevents an error in the console when the patron is blocked and the
    "specify due date" field is hidden.
    
    To test, apply the patch and make sure OnSiteCheckouts is enabled.
    
    - Go to Circulation and check out to a patron.
    - Under the restrictions tab, add a manual restriction.
    - When the page reloads and the checkout form is no longer visible,
      confirm that there is no error in the browser console.
    
    Confirm that the Bug 18885 test plan still works.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6b54f2932f88607fa6a12d32d0009cfd12b53782
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 12 09:20:24 2024 +0000

    Bug 36051: DBRev 23.12.00.019
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0ef73b53147d0247b233e5ead7ad8c2383653926
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Feb 13 16:30:42 2024 +0000

    Bug 36051: (QA follow-up) Use IGNORE in INSERT
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e739db4000da7e34e73dd1566b5bc2214ea5376e
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Feb 13 11:02:50 2024 -0500

    Bug 36051: (QA follow-up): Use yaml_preference
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 309e0af9bb32f4e515066e8fbc3cacde4a0e8cf2
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Feb 8 12:44:28 2024 -0500

    Bug 36051: Add option to specify SMS::Send driver parameters in a system preference
    
    If an SMS::Send driver ( such as Twilio ) requires additional parameters, those
    parameters have to be placed in a yaml file named after the SMS::Send driver,
    and the path to that file specified in the Koha conf file.
    
    It would be good if we had the option to specify those parameters in a YAML
    system preference instead. This would be less complicated and avoid requiring
    an administrator to update that data from the backend.
    
    Test Plan:
    1) Set up an SMS::Send driver that requires additional options;
       a Twilio account meets these requirements and can be created for
       free. Set this up using the traditional file based system.
    2) Verify you can send SMS messages
    3) Move the contents of that file into the new system preference
       SMSSendAdditionalOptions
    4) Verify you can still send SMS messages
    5) Delete the file
    6) Verify yet again you can still send SMS messages!
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a1d5ad87d7e499357cf0de81aef87ca95d6ad741
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 12 08:59:20 2024 +0000

    Bug 6796: DBIC schema update
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c45487cd11d38363988eda25636cc62b9cb911d8
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 12 08:31:20 2024 +0000

    Bug 6796: DBRev 23.12.00.018
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a8c7429cb5ebdfcf21721b859e7c19e75a748092
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Feb 13 09:21:06 2024 +0000

    Bug 6796: Code defensively for if library hours are not set
    
    Sponsored-by: PTFS Europe
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8017463d34bfc37841a62f9771c80aeebf5376b2
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Feb 12 15:48:06 2024 +0000

    Bug 6796: day_of_week representation fix
    
    The code here was flawed, DateTime returns a 1-7 indexed array with the
    first day being Monday, Koha expects an 0-6 indexed array with the first
    day being Sunday.
    
    Sponsored-by: PTFS Europe
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 688a551e70321f06414c112e576e25e8ea3fd795
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Feb 12 15:21:08 2024 +0000

    Bug 6796: Merge and correct database update
    
    Sponsored-by: PTFS Europe
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e2a48eff6d2fbe8f2657bd7ca8681d838ec6c4d9
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 9 16:59:45 2024 +0000

    Bug 6796: Take CalenderFirstDayOfWeek and TimeFormat into account
    
    This patch adds accounting for the `CalendarFirstDayOfWeek` and
    `TimeFormat` preferences in the libraries management pages.
    
    We respect CalendarFirstDayOfWeek for both input and display, but we
    only respect TimeFormat for input at this time. We need a new template
    helper and js helper for formatting just time in the appropriate format,
    currently we only have such formatters for full datetimes.
    
    Sponsored-by: PTFS Europe
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 685357f2794382ed8099efbb76bc92ef2fa027c4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 9 15:45:28 2024 +0000

    Bug 6796: Fix display of libraries table
    
    Sponsored-by: PTFS Europe
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8b0af8bbaacb39373b8354dac6235d5ade64bbad
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 9 15:38:34 2024 +0000

    Bug 6796: Fix api specifications and embed hours in librarly management
    
    Sponsored-by: PTFS Europe
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3db1a76a62cd815f377597872cebce0c596b868c
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Oct 10 04:06:48 2023 +0000

    Bug 6796: (follow-up) Displaying library hours
    
    This patch shows the set library hours on a library's view page.
    Still to be done:
    - show on the Libraries summary page
    - write tests
    - consider time format settings
    - fix translateability of day names in Libraries summary page
    
    Sponsored-by: Catalyst IT
    Sponsored-by: Auckland University of Technology
    Sponsored-by: PTFS Europe
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 41edb937dfe59983323c70bab23a7a935cb81556
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon May 1 22:10:44 2023 +0000

    Bug 6796: (follow-up) QA test tool fixes
    
    Sponsored-by: Catalyst IT
    Sponsored-by: Auckland University of Technology
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b2a6dd0c1d92b8dc0607e4064840aa84bccc386d
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Fri Aug 5 15:00:52 2022 +1200

    Bug 6796: Don't add a day if hourly loan period pushes due date
    
    If ConsiderLibraryHoursWhenIssuing is set to shorten the loan period to
    the closing time, if the loan period initially pushes the due date to
    the following day, the day still gets added when calculating the due
    date. We simply need to hardcode the due time here as the due day is the
    same as the issue day.
    
    We only need to calculate a due date if ConsiderLibraryHoursWhenIssuing
    is set to extend the loan period to the next opening day, as we'll need
    to consider holidays/closed days.
    
    Sponsored-by: Catalyst IT
    Sponsored-by: Auckland University of Technology
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d80ef8df782191b05571e57b1f6e23e2c8b035ef
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon May 1 02:56:42 2023 +0000

    Bug 6796: Fix saving of libraries and tests
    
    Sponsored-by: Catalyst IT
    Sponsored-by: Auckland University of Technology
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ffcfe6d41e71bb2bec726694d1f55c04d5e0810c
Author: Hayley Pelham <hayleypelham@catalyst.net.nz>
Date:   Thu Apr 28 23:43:52 2022 +0000

    Bug 6796: (follow-up) Fix logic for calculating following day's open hours
    
    Since days for branch hours are stored as 0-6 in the database, when it's
    a Saturday (6) incrementing the date leads to an error when issuing an
    hourly loan because no opening hours are found for the non-existent day
    (7).
    
    This patch fixes this by calculating the tomorrow day and setting it to
    0 if it's greater than 6.
    
    This patch also corrects the mappings for days, where local_day_of_week
    caluclates the date with Sunday first, which put it out of sync with the
    database opening hours days.
    
    Sponsored-by: Catalyst IT
    Sponsored-by: Auckland University of Technology
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 99869d608bd6d377e5c4d05097ab5d76257355e0
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Sep 8 03:59:12 2021 +1200

    Bug 6796: Consider library hours when calculating due date + tests
    
    This feature adds the ability to set opening and closing hours for your
    library and for these hours to be considered when calculating due dates
    for hourly loans. If the due date for an hourly loan falls after the
    library closes, the library can choose for the due date to be shortened
    to meet the close time, or extended to meet the open time the next day.
    This feature adds a new table 'branch_hours' for storing the open and
    close times per day for each library, and a new system preference
    'ConsiderLibraryHoursInCirculation' to choose which behaviour should be
    followed when calculating due dates.
    
    To test:
    1. Apply patches and update database. Upgrade schema if not applying
    patch with schema changes. Restart services.
    2. Go to Administration -> Libraries. Edit a library and scroll to the
    bottom to find the 'opening hours' section. Test adding and removing
    open and close times on various days. Confirm saving works as expected.
    3. Add a new library and test adding open and close times works as
    expected.
    4. Edit your default library and save open and close times for each day.
    5. Go to Administration -> Circulation and fine rules. Edit a rule, set
    the unit to 'hours' and set the loan period to a number that would cause
    a checkout to be due after the close time you just set, i.e. if you set
    your close time to be 5pm and your system time is currently 1pm, set the
    loan period to be 5 (5 hours) so the calculated due date would be 6pm.
    6. Go to Administration -> system preferences. Search for
    ConsiderLibraryHoursInCirculation. It should be under 'Checkout policy' in
    the Circulation system preferences. Confirm the pre-selected option is
    'ignore'. Keep this tab open.
    6. In a new tab, get the barcode for an item that has an itemtype
    matching the circulation rule you just set.
    7. Go to the checkouts for a patron that has a categorycode matching the
    circulation rule you just set.
    8. Check out your item. Confirm that the checkout is due at the end of
    the loan period, not taking closing hours into consideration. Return the
    item.
    9. Back in your other tab, set ConsiderLibraryHoursInCirculation to
    'close', so the due date should be shortened to meet the close time.
    10. Check out your item. Confirm the checkout is due when the library
    closes. Return the item.
    11. Back in your other tab, set ConsiderLibraryHoursInCirculation to
    'open', so the due date should be extended to meet the opening time.
    12. Check out your item. Confirm the checkout is due the next day when
    the library opens.
    13. Confirm tests pass t/db_dependent/Circulation/CalcDateDue.t
    
    Sponsored-by: Catalyst IT
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2216fa9b68affed2f0e385f3e42d890173cb4091
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Sep 8 03:58:46 2021 +1200

    Bug 6796: ConsiderLibraryHoursInCirculation system preference
    
    Sponsored-by: Catalyst IT
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7dac9eb7b5bc415163a40e057fb4a4ff87428d63
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Sep 7 15:22:25 2021 +1200

    Bug 6796: Add library_hours table and set opening hours for library
    
    Sponsored-by: Catalyst IT
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b4ce5051c1ac080ac68d44b464141507e5eca602
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Feb 7 13:53:20 2024 +0000

    Bug 35969: (follow-up) Improve wording
    
    As suggested by David Nind. Thanks!
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 35293612a8d0efa932bf376b7855b17cc29d6d5c
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Feb 1 07:55:55 2024 +0000

    Bug 35969: Add error code in opac-sendbasket.pl
    
    No need to carp about empty basket or no reply address.
    Just add a simple explanation on the form.
    
    Note that it makes no sense to show the form if the patron
    has no email address. We need it as reply-to.
    
    Test plan:
    Try opac-sendbasket.pl?bib_list=null
    Remove email address from your account, try again.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4848def5e2a336e01bf0dd0ff61a75a30b35f137
Author: Magnus Enger <magnus@libriotech.no>
Date:   Fri Apr 5 13:41:08 2024 +0000

    Bug 36517: Fix output from install_plugins.pl
    
    When misc/devel/install_plugins.pl does not find any plugins, it prints
    the list of pluginsdir, but with a literal \n separating the dirs, and
    no newline at the end.
    
    To test:
    - Edit koha-conf.xml and add a second entry for <pluginsdir>, so there
      are two entries. The second one could just be a copy of the original.
    - Run "perl misc/devel/install_plugins.pl"
    - Note the output looks something like this:
    
    No plugins found
    pluginsdir contains:
    /var/lib/koha/kohadev/plugins\n/var/lib/koha/kohadev/pluginsroot@kohadevbox:koha(master)$
    
    - Apply the patch and run the script again. Output should be:
    
    No plugins found
    pluginsdir contains:
    /var/lib/koha/kohadev/plugins
    /var/lib/koha/kohadev/plugins
    root@kohadevbox:koha(master)$
    
    - Sign off
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4436a7d41a74bf002fdd80ec97f0be38d40eee22
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Apr 2 12:39:02 2024 -0300

    Bug 36493: Make cashups test more robust
    
    This patch makes the test independent from existing cash registers in
    the system.
    
    To test:
    1. Enable UseCashRegisters on a fresh KTD
    2. Add a cash register
    3. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/cashups.t
    => FAIL: Tests fail!
    4. Apply this patch
    5. Repeat 3
    => SUCCESS: Tests pass!
    6. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d4bbf76eecad37a5930d2dacdbe0c6a1e6820570
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Thu Apr 11 11:01:11 2024 -0400

    Bug 36581: Define ymd in scope for checkouts table
    
    Test plan:
    1. Find or create an item with a public or nonpublic note
       (in KTD default data, items on biblionumber 12 have notes already)
    2. Check the item out to a patron
    --> Checkouts table loading never completes
    --> Browser console shows: "Uncaught ReferenceError: ymd is not defined"
    3. Apply patch and clear browser cache
    4. Refresh the page
    --> Checkout table loads and console error is gone
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b6a662848bba5a60328e291544efe508df1d526f
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Apr 11 12:11:36 2024 +0000

    Bug 36572: (follow-up) More template clean-up
    
    Further testing:
    1. Turn off UseCirculationDesks, make sure everything still works.
    2. Turn off UseCashRegisters, make sure everthing still works.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 60564519b0e84b9bc911dc2cab55a5a2a76a502e
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Apr 11 08:38:04 2024 +0000

    Bug 36572: Fix and clean-up set library
    
    To test:
    1. Have 3 staff accounts to test:
      -STAFF A: superlibrarian
      -STAFF B: loggedinlibrary permission
      -STAFF C: no loggedinlibrary or superlibrarian permission
    2. Enable 'UseCirculationDesks' and create some desks. (Admin >
       Circulation desks)
    3. Enable 'UseCashRegisters' and create some registers ( Admin > Cash
       registers)
    4. Use STAFF A ( superlibrarian ) and make sure you can change branch,
       desk and register.
    5. Use STAFF B ( loggedinlibrary permission ) and make sure you can
       change branch, desk and register.
    6. Use STAFF C ( no loggedinlibrary or superlibrarian permission ) and
       make sure you can change branch, desk and register.
    7. Each time you change you should be redirected to the page you were
       previously on.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a37ebc77b7f3513b2775ebb8819a710e5a2eb416
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Mar 27 12:19:34 2024 +0000

    Bug 36438: Check object for calling metadata
    
    Resolve: Can't call method "metadata" on an undefined value at catalogue/MARCdetail.pl line 93
    
    The proceeding lines check for $record and respond appropriately.
    
    Test plan:
    Call catalogue/MARCdetail.pl with an unexisting biblionumber.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 66e03ef4e51c9da48c6492d088e1baa33f9db826
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Wed Apr 10 12:54:22 2024 -0400

    Bug 36568: Fix id parameter in template
    
    Fix missed case of changing parameter name from "reports" to "id"
    
    To test:
    1. Find or create an SQL report that will return more than 20 rows
    2. Run the report
    3. Change the "Rows per page" drop-down to a new value
    --> An empty page is displayed!
    4. Apply patch
    5. Repeat steps 2-3
    --> The report is displayed with the appropriate number of results
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0b4bb48f2c8826e1837abe4b1218b89fd3ec3dd8
Author: Brendan Lawlor <blawlor@clamsnet.org>
Date:   Thu Apr 4 18:29:07 2024 +0000

    Bug 35980: Check for CAN_user_borrowers_edit_borrowers in patron-toolbar.inc
    
    This patch removes the 'New patron' and 'Quick add new patron' buttons from the patron tool bar that's included on members-home.pl
    
    To test:
    1. Log in with a user with only 'catalogue', 'list_borrowers' and 'manage_patron_lists' permissions
    2. From the main page click on Patrons
    3. Notice there are 'New patron' and 'Quick add new patron' buttons in the members-home.pl page that lead to permissions errors
    4. Apply patch, restart all, reload the page
    5. Notice the buttons to add new patrons are gone, but the button to manage patron lists is still there
    
    Signed-off-by: Esther <esther@bywatersolutions.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 33c7c8730bede4f84a9dc60a2c50170622295da9
Author: Brendan Lawlor <blawlor@clamsnet.org>
Date:   Thu Apr 4 17:22:08 2024 +0000

    Bug 35980: Check for CAN_user_borrowers_edit_borrowers in more-member.tt
    
    This patch removes edit buttons and add buttons from the more member page if the user does not have CAN_user_borrowers_edit_borrowers
    
    To test:
    1. Log in with a user with only 'catalogue' and 'list_borrowers' permissions
    2. Search for a patron
    3. Notice there are edit and add (pecil and plus icon) buttons in the patron details page
    4. You may have to enable some system prefereences like HouseboundModule to fully test
    5. Test that things like Additional attributes and identifiers are still displayed
    3. Apply patch, restart all, reload the page
    4. Notice the edit and add buttons in the patron details page are gone
    
    Signed-off-by: Esther <esther@bywatersolutions.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 962290a27df7f46a3ed48537fc0639f4711aecfc
Author: Brendan Lawlor <blawlor@clamsnet.org>
Date:   Thu Apr 4 16:35:58 2024 +0000

    Bug 35980: Check for CAN_user_borrowers_edit_borrowers in members-toolbar.inc
    
    This patch removes the message button and more links from the members toolbar if the user does not have CAN_user_borrowers_edit_borrowers
    
    To test:
    1. Log in with a user with only 'catalogue' and 'list_borrowers' permissions
    2. Search for a patron
    3. Notice the 'Add message' and 'More' buttons in the toolbar only link to permissions errors
    3. Apply patch, restart all, reload the page
    4. Notice the buttons in the toolbar are gone
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a6c62f5fd1d668df35d43c3cbdf7ea3c774b7809
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 11 16:37:29 2024 +0200

    Bug 30897: (QA follow-up) Enable graceful restart by default
    
    This patch enabled the restart by default.
    
    After a poll at hackfest24 we opted to enable this by default and the RM
    requested I add the patch to the bug so we don't forget ;)
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e4af79e5130cad5cb506a12f5a40558bd43a3bf5
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 11 10:33:28 2024 +0200

    Bug 30897: Remove recursive parent identification loop
    
    We believe that plack will only spawn from one parent and children
    cannot spawn further child processes.. as such we don't need to walk up
    the tree.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit dfd72b292939d41319c20768d124fb27ca86a672
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 11 10:28:07 2024 +0200

    Bug 30897: Add option to disable automated restart
    
    This patch adds the ability to disable the automated plack restart we
    introduce with this patchset via configuration.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 57ee369e90cfe8f79cfa1e1829074225e28367ea
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 11 07:52:53 2024 +0200

    Bug 30897: Limit to plack environments
    
    I had a feeling we'd want to do this when I submitted the proof of
    concept, though I hadn't appreciated the wider issues that have now been
    highlighted.. it makes a lot of sense to limit to the plack scope.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0a0487d8841ec8f57c5795827fb3aecae1a9a62b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Apr 10 10:54:48 2024 +0200

    Bug 30897: Gracefully restart plack after plugin install/remove
    
    This patch adds a graceful plack restart to the plugin
    install/uninstall routine to fully allow plugin install to work via the
    staff client.
    
    Test plan
    1. list your worker processes with something like htop
    2. install a plugin
       https://github.com/bywatersolutions/dev-koha-plugin-kitchen-sink/releases
    3. note that the PIDs of the workers stay the same and no sign of
       restart (no PID changes and no CPU activity that the workers would
       have if they were starting)
    4. apply patches and restart services
    5. unistall plugin
    6. notice worker restart
    7. install plugin
    8. notice worker restart
    9. downgrade plugin
    10. notice worker restart
    11. upgrade plugin
    12. notice worker restart
    13. disable and enable plugin
    14. *no restart*
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 747f5132311ea51ea6babbfc92a775ac0c67f93a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Apr 9 15:55:57 2024 +0000

    Bug 36511: Some scripts missing a dependency following Bug 24879
    
    These files needed the addition of 'use C4::Auth qw( check_cookie_auth
    );'.
    
    To test, apply the patch and restart services.
    
    - If necessary, enable the LocalCoverImages system preference.
    - Open the browser console and then the "Network" tab. You can click
      "Images" to filter for the correct kind of request.
    - Perform a catalog search. After the search has loaded, check that
      there are no 500 errors in the Network tab.
    
    - Go to Cataloging -> Label creator.
    - If necessary, create a label batch and add some items.
    - Export your batch and test both the "Download as CSV" and "Download as
      XML" links. Both should trigger the correct download.
    
    - Go to Serials -> Claims, and select a vendor with late issues.
    - Select all late issues and click "Download selected claims" at the
      bottom of the page.
    - Your CSV file should download correctly.
    
    The file acqui/check_uniqueness.pl has been corrected as well but I'm
    not sure how to test it!
    
    Signed-off-by: danyonsewell <danyonsewell@catalyst.net.nz>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 14b69a254eb202a08f279d96576618f9b94eb4e2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Apr 9 09:53:58 2024 +0200

    Bug 33568: (follow-up) Fix duplicated key in item spec
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c52af2cef0d79f20d74ebf170d4d5514b139ea65
Author: Phil Ringnalda <phil@chetcolibrary.org>
Date:   Thu Apr 4 18:59:34 2024 -0700

    Bug 36531: Serve text/javascript compressed, like application/javascript is
    
    Koha serves static .js files as application/javascript (if /etc/mime.types
    says to) and serves them compressed, but output_with_http_headers uses the
    currently-correct text/javascript mimetype, and Koha doesn't compress that.
    
    Test plan:
    1. Set the preference EnableAdvancedCatalogingEditor to Enable.
    2. Open the browser Web Developer Tools to the Network tab
    3. Load Cataloging - Advanced editor
    4. Click on the line for the framework?frameworkcode=&callback=define load
    5. Note the content-type text/javascript, no Content-Encoding line, and
       the size of 1.9MB
    6. Apply the patches from bug 36463 if they haven't been pushed, then this
       patch, and reset_all
    7. Repeat steps 1-4, and note a Content-Encoding: gzip header and a
       Transferred size around 160KB
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 69ad327379fe0bc46926fb51276f81849a4a6f49
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 29 16:12:01 2024 +0000

    Bug 36463: (follow-up) Adjust other occurence (intranet)
    
    Signed-off-by: Frédéric Demians <f.demians@tamil.fr>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bccf7764c0e3eea22713edb7d76f90c8d8bf8c2b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 29 12:54:30 2024 +0000

    Bug 36463: Compress application/json
    
    This patch simply adds application/json to the mod_deflate configuration
    
    To test:
    1 - Open the netowrk tab in firefox
    2 - Load http://localhost:8081/api/v1/libraries
    3 - Not the transferred size, and note no 'Content-Encoding: gzip" header
    4 - Apply patch, reset_all (or edit /etc/koha/apache-shared.conf)
    5 - Reload
    6 - Note smaller size, note gzip header
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d7702d6fad6c6ae4ac8c0ff0d104b17a299cde20
Author: Phil Ringnalda <phil@chetcolibrary.org>
Date:   Thu Apr 4 16:28:53 2024 -0700

    Bug 36379: Fix auth_finder.pl to not expect the op cud-do_search
    
    The authority finder just does a GET for a list of search results, it
    doesn't create or update or delete, so the template that thinks the op
    is do_search is correct.
    
    Test plan:
    1. Cataloging - New record
    2. In the 1 tab click the Tag editor icon at the end of 100 subfield a
    3. In the popup, click Search, and nothing happens, no results are shown.
    4. Apply patch, reset_all
    5. Repeat steps 1-3, see that you get results.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a64383de16c8d79e44c297ad8da860b536d91597
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 5 15:36:11 2024 +0000

    Bug 32707: (follow-up) Fix link in system preference description
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c57e25a4086adf71df8fd3b437d9fa07e34fa4c2
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 5 15:31:24 2024 +0000

    Bug 32707: DBRev 23.12.00.017
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3af36faf3e35a67c987281751000a47eda76e423
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Fri Oct 27 21:06:44 2023 +0000

    Bug 32707: Unit tests
    
    NB in t/db_dependent/Koha/SearchEngine/Elasticsearch/QueryBuilder.t,
    I had to modify four existing test by changing Local-number:123456 to
    Personal-name:donald -- since Local-number should never be
    auto truncated according to the submitted patch.
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4a0713c80b022b6e71872072192ecf2397a28fed
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Tue Jan 24 10:45:39 2023 +0100

    Bug 32707: ElasticSearch should not auto truncate (even if QueryAutoTruncate = 1) for identifiers (and some other fields)
    
    Koha with Zebra prevented auto truncation in some circumstances -- see
    the first return for ccl inside C4::Search:: buildQuery, before applying
    auto truncation, and setting $auto_truncation = 0 for some search
    fields.
    
    Koha with ElasticSearch applies auto truncation for all search fields,
    not paying attention to these special cases when it should not be done.
    This leads to various problems as described in bug 26508, 26608, etc.
    
    The solution would be to prevent auto truncation for certain search
    fields, above all – the identifiers.  In addition, under no
    circumstances should a search field other than of text type be truncated
    (an attempt to truncate would generate an exception from ElasticSearch,
    e.g. number_format_exception for integer).
    
    Test plan
    =========
    
    0. Use the test data sample provided in the bug report. Comment 16 in
       the ticket.
    
    Scenario A (authority)
    ----------------------
    1. Enable Elasticsearch engine.
    2. Have like 100+ bibliographic records and properly linked authority
       records.
    3. Reindex ElasticSearch if needed.
    4. Enable QueryAutoTruncate systempreference.
    5. Find the authority record #1 and note the number of linked biblio
       records.
    6. Show the detail of authority #1 and compare the number of linked
       biblio records.
    7. If in the database there are authority records with ids =~ /^1/ (i.e.
       10, 11, 12, ..., 100, 101, ...) linked to the biblio records you get
       two different numbers of linked records.
    8. Also, as lists of linked biblio records (via link: Used in N
       record(s) from results view and detail view) you will get two
       different sets of biblio records.  In particular, on the list generated
       from detail view (authorities/detail.pl?authid=1) you will get biblio
       records that are in fact not linked to the auth #1 (the list is
       generated with &q=an:1).
    8.99. Skip to scenario B and come back here after finishing to not have
    to unapply the patches and restart services for nothing.
    9. Apply this patch.
    10. Counts and list of linked biblios should be ok.
    
    Scenario B (analytics)
    ----------------------
    1. Enable Elasticsearch engine.
    2. Have three monographic bibliographic records with 001 = 1, 10, 100
       (i.e. =~ /^1/).
    3. Have an analytical record with 773 $w = 1 (in the test data set - biblio 896).
    4. Enable QueryAutoTruncate and UseControlNumber systempreference.
    6. Find the analytical record and click on the link generated from 773,
       i.e. (In: ... --> catalogue/search.pl?q=Control-number:1).  You should see
       a list of 100+ records (001 = 1, 10, 100) instead of one (001 = 1).
    7. From the biblio # 1 try to go to the analytice records (with Show analytics
       link) - you should get 60+ records with from different host records (773 $t)
       -- instead of one.
    8. Apply this patch. Make sure that control-number and record-control-number
       are included in ESPreventAutoTruncate syspref.
    9. Repeat steps 6 and 7.  You should arrive at the right host record in p. 6
       and at one analytical records when looking for analytical records in p. 7
       (or more than one, but right, if you modified the test data set).
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 10b43ddd64eeb0a94a887e5936cd25517f72ba9e
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Wed Oct 25 09:05:24 2023 +0000

    Bug 32707: Add 'ESPreventAutoTruncate' preference
    
    This patch adds a new 'ESPreventAutoTruncate' preference allowing to define
    Elasticsearch search fields that should not be autotruncated when 'QueryAutoTruncate'
    is active (e.g. barcode).
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 37a992365cfd2bf85ae5643572b63993006b4412
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 5 14:56:57 2024 +0200

    Bug 35392: Use the same selector as everywhere else for .message
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 57802a38696b99bbe46f90390f5b3d5920b90995
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Jan 4 11:52:43 2024 +0000

    Bug 35392: Update tests
    
    Run:
    yarn cypress run --spec "t/cypress/integration/ERM/DataProviders_spec.ts"
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fcacfaaafa0db3f7099638181dfe2366d3caa71b
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Jan 4 11:52:31 2024 +0000

    Bug 35392: Fix HTML in translatable string
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8acdc1e8e9b88436204f6d16c9d5abbc775d8943
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Mar 13 13:32:17 2024 -0400

    Bug 36307: SMS::Send driver errors are not captured and stored
    
    If an SMS::Send driver succeeds, it returns a value that evaluates to true. Every driver I've inspected uses croak when it encounters a failure state.
    
    When an SMS message fails to send, code hard codes the failure code to NO_NOTES (No notes from SMS driver).
    
    We should store the real error in `failure_code` and display that if the failure code doesn't match a known failure code.
    
    Test Plan:
    1) Apply this patch
    2) Set SMSSendDriver to any value
    3) Generate a pending sms message
    4) Run the following query:
       update message_queue set status = 'failed', failure_code = "This is a test";
    5) View the patron's messages, note the delivery note contains the
       contents of the failure code
    6) Run the following query:
       update message_queue set status = 'failed', failure_code = "SMS_SEND_DRIVER_MISSING";
    7) Reload the patron's messages, not the delivery note is now "The SMS
       driver could not be loaded".
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ae975f9eca011473205c2261bc5b45ae4a89b980
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Feb 29 22:33:33 2024 +0000

    Bug 36082: Set branchcode correctly in opac-facets.inc
    
    1. Tools> HTML Customization
    2. Choose OPACresultssidebar
    3. Create an entry specific to a library.
    4. Also try to add this same entry into a translation tab, if installed.
    5. Go to the OPAC
    6. Login as a patron of that library that the specific OPACresultsidebar is assigned to
    7. Search the catalog, and look below the facets,where the OPACresultssidebar would appear.
    8. No text.
    9. APPLY PATCH
    10. Try step 7 again.
    11. TEXT!
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6005a9a430e04e71ec577514f357f3961aced920
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 5 16:34:02 2024 +0200

    Bug 33568: Prevent api/v1/biblios.t to fail randomly
    
    koha_1       |     #   Failed test 'The items are returned'
    koha_1       |     #   at t/db_dependent/api/v1/biblios.t line 196.
    koha_1       |     #     Structures begin differing at:
    koha_1       |     #          $got->[0]{external_id} = 'th151O2JtgfGdVW6aiF'
    koha_1       |     #     $expected->[0]{external_id} = 'uxrMzUXrkHQy7MHOSfjK'
    koha_1       |     # Looks like you failed 1 test of 11.
    koha_1       |
    koha_1       | #   Failed test 'get_items() tests'
    koha_1       | #   at t/db_dependent/api/v1/biblios.t line 206.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0f49a171fa9296a7d529668de49a8ec5da52cb23
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 5 16:40:26 2024 +0200

    Bug 33568: (follow-up) Add search on home and holding library's names
    
    Silly typo!
    Caught by a test
    
    koha_1       |     #   Failed test 'Home branch code matches holdingbranch'
    koha_1       |     #   at t/db_dependent/Items.t line 581.
    koha_1       |     #          got: 'QHImNSEoNi'
    koha_1       |     #     expected: 'VY5y6p'
    koha_1       |     # Looks like you failed 1 test of 7.
    koha_1       |
    koha_1       | #   Failed test 'Koha::Item(s) tests'
    koha_1       | #   at t/db_dependent/Items.t line 588.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b581996160bf6cd477238df91d89af73bdf6af12
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 5 16:19:40 2024 +0200

    Bug 33568: Fix translatability issues
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d616967631693b4fd6e63507d14e8b01c04c7bad
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 5 15:03:21 2024 +0200

    Bug 33568: Fix false positive 'missing_filter'
    
    It was ok but the QA script complains and xt/find-missing-filters.t as
    well.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fc468c43bb91abdcd9b9909bdde2947d7d2c36f3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 2 13:22:59 2024 +0200

    Bug 33568: Add hint on the table settings admin page
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit eeb48dbc52d5e9cd1d3260e4fa66e5a690994651
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Mar 28 12:20:10 2024 -0300

    Bug 33568: POD fixes
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c48e632bf4faf11332f99e7bf41c544ffe679b78
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Mar 28 11:42:03 2024 -0300

    Bug 33568: serialitem => serial_item
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit db74a8112ad339f820f2c2728bd85002d2b04520
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 1 16:29:24 2024 +0100

    Bug 33568: Remove LPAD ordering
    
    This is coming from bug 3521 it seems. And we are going to deal with
    this later if people complains.
    
    kidclamp> the performance issue for sites with many copies is bigger than sorting issues imho
    kidclamp> drop the LPAD I say :-)
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a767e15c74bd63f4eed51beee982fc5ddd468a02
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 1 15:39:49 2024 +0100

    Bug 33568: Fix columns shift when pref are off
    
    From comment 66:
    If StaffDetailItemSelection and/or LocalCoverImages is turned off, the alignment of the drop-down filters for the other columns is offset by 1 for each of the two sysprefs that is disabled
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 13947b955412412898030a220904cc67da2049f3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 1 09:48:31 2024 +0100

    Bug 33568: (follow-up) Fix ordering - WIP
    
    This is not working. We are still getting the error
    Unable to programatically derive a required group_by from the supplied order_by criteria. To proceed either add an explicit group_by, or simplify your order_by to only include plain columns     (supplied order_by: 'lpad_copynumber').
    
    To recreate the problem you can go to detail.pl and search for something
    Without search the query is working.
    
    The problem appears when the query has WHERE parameters added and "GROUP
    BY" is added.
    DBIC is adding to the GROUP BY what is added to the select, but does not
    handle this situation (not a plain column).
    
    You can play with:
    1.
    Remove from Koha::Items->search_ordered
    475                     'lpad_copynumber',
    => all good
    
    2. Remove the following block from /usr/share/perl5/DBIx/Class/Storage/DBIHacks.pm
     584     # only consider real columns (for functions the user got to do an explicit group_by)
     585     my $chunk_ci;
     586     if (
     587       @{$order_by[$o_idx]} != 1
     588         or
     589       # only declare an unknown *plain* identifier as "leftover" if we are called with
     590       # aliastypes to examine. If there are none - we are still in _resolve_attrs, and
     591       # can just assume the user knows what they want
     592       ( ! ( $chunk_ci = $colinfos->{$order_by[$o_idx][0]} ) and $attrs->{_aliastypes} )
     593     ) {
     594       push @$leftovers, $order_by[$o_idx][0];
     595     }
    => all good
    
    I don't know if we are doing something wrong here, but I have no idea
    how we can build the group_by explicitely.
    
    Is there another way to do this?
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 59a7a68fea908df75e93ee37d156e6cc6a23bd0d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 31 08:45:56 2023 +0100

    Bug 33568: Fix patron_to_html display
    
    Take HidePatronName into account
    Display cardnumber
    Remove parenthesis around cardnumber if the name is hidden
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ce216aaa820037c5a37128d279e5747e7ee27055
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 30 17:51:33 2023 +0100

    Bug 33568: Restore column filters when StaffDetailItemSelection is off
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 67c472eeac145ce79dd4cab1bf93d260f21a6778
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 30 17:11:44 2023 +0100

    Bug 33568: Restore link to patron
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 32331a1f5aec7677ceb783a2a701cc6159dc2273
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 30 17:07:39 2023 +0100

    Bug 33568: Fix popup behaviour for SpineLabelShowPrintOnBibDetails
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 57997263b22f12e91032b5225d38527e45431774
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 30 16:55:20 2023 +0100

    Bug 33568: Hide 'Host records' if EasyAnalyticalRecords is off
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 712a481c6dc59453f1bd75ee8920a74302590751
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 30 16:44:41 2023 +0100

    Bug 33568: Do not display 'null' when no barcode
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e7088fd06c59f9f576498ee1cab77bf093678772
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 20 13:23:38 2023 +0200

    Bug 33568: Fix ordering
    
    Use search_ordered for default ordering
    
    It also fixes a crash when StaffDetailItemSelection is turned off.
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 729d37d4421ab99e6eeb4295a7c4c465155b7bc5
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Oct 17 13:13:42 2023 +0200

    Bug 33568: JSON-encode html output of build_table
    
    This prevents error with quotes coming from translations
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit afc55cb68cecac05dfe7a327a3c5967155e6526f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 16 21:03:55 2023 +0200

    Bug 33568: Hide holdings tabs if empty (SeparateHoldings)
    
    See comment 34.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 42c653518cdcaa37a036f2a41c106ba4d75c0aaf
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 13 10:49:26 2023 +0100

    Bug 33568: Add some missing StaffDetailItemSelection conditionals
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a5ace06893bc60fa324bf5ba4cec1a8b8f6171d6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 12 16:50:10 2023 +0200

    Bug 33568: Follow-up for 29523
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 61f94161338f1a706040b3e9e6293a72c8214e76
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 31 11:33:33 2023 +0200

    Bug 33568: Do not embed item types
    
    Performance for 1000 items from 22 to 19s
    
    It replaces the input in the column header filter with a dropdown list.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5ced551cb78bf8c1f45957cd7f376e156ef92a56
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 31 10:22:11 2023 +0200

    Bug 33568: Do not embed library names
    
    Performance for 1000 items from 30s to 22s
    
    It replaces the input in the column header filter with a dropdown list.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b151bcf0e7998d0194189dd46b593a20e5aa24a5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 24 13:15:52 2023 +0200

    Bug 33568: (bug 34226 follow-up) Add type=date to date columns
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c46e1da54fff948a3b0b1953bfca23e78940fe30
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 20 09:16:29 2023 +0200

    Bug 33568: Fix 'actions' links when filters are shown/hidden
    
    It also fixes a problem when "Select all" was clicked, the checkbox
    selection was not kept when the table was refreshed (was comparing
    string and integer, parseInt needed)
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0604580c6d3200fb3543a88b3c3ccb57e9b02b36
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 20 08:52:33 2023 +0200

    Bug 33568: Fix local cover images
    
    We need to reprocess the images when the table is refreshed, to do that
    we teach verify_cover_images to go through a given container instead of
    the whole document, and pass a call back function to build_items_table
    that will be called when DataTables will have redrawn the table
    (drawCallback).
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a8cc831735f13323fa544f99335066d981cef938
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 2 11:15:32 2023 +0200

    Bug 33568: (follow-up) Restore filters
    
    This is a bit ugly but fixes the problem raised in the previous commit,
    as well as others
    
    for instance comment 18
    "* Click 'show filters', 'hide filters' and repeat X 2 - status column disappears?"
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f1054fd9a7804509e866696ada30980d95621b85
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 2 09:49:35 2023 +0200

    Bug 33568: Prevent 500 when filtering by item type (FIXMEs)
    
    See FIXMEs added by this patch
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 67d480f625655becef388160f8afde0a06587b09
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 2 09:36:11 2023 +0200

    Bug 33568: Add search on home and holding library's names
    
    QUESTION - Do we prefer this or a dropdown list in the column filter
    header?
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 026adcbcd33c1f933fd5e1e67032827a46268a68
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 30 10:28:00 2023 +0200

    Bug 33568: Fix select/clear all links
    
    Follow-up for "Bug 33568: Preserve item selection across pagination and filtering"
    
    FIXME We should deal with the items selection in a better way, but I
    would not consider it blocker, that can be done later.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0db40981dbf96269a9b6c4dbd1c165abce951c6d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 25 09:38:53 2023 +0200

    Bug 33568: Fix DT dom and remove DT info if not needed
    
    Was there a real need to deal with a specific dom? The "no filter" view
    was not really light, only the column filters were shown/hidden.
    
    This patch is suggesting to remove all the DT info in case the table is
    displaying all the items of the bibliographic record: Pagination, filtering, buttons, etc.
    
    This patch is for discussion.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5016cae47cabc0038929359deec8c2ac63ec7d54
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 25 09:04:31 2023 +0200

    Bug 33568: Move code to a dedicated include file
    
    Not very nice but at least the code is isolated in a separate file and
    reduce the size of detail.tt
    
    We could also move the code related to the item bundle that is included
    inside this same table.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cf9fb86a015d361e4cb3aefc22832e563382692b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 24 15:19:43 2023 +0200

    Bug 33568: Restore analytics
    
    FIXME We cannot have the usual _count/+count pattern for the REST API, I
    think it's acceptable
    
    FIXME We lost the sort on this column, not a big deal IMO
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 09934c016094f1856a85596779fdf2d71c505f9e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 24 15:02:30 2023 +0200

    Bug 33568: Restore host records
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1d8a6fa3fdb431f6430d0ed14c7a7166aa430f3c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 24 10:05:50 2023 +0200

    Bug 33568: Restore bundle items
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c871b26f6eaa025d15c3b82997b445407f191e53
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 23 13:42:01 2023 +0200

    Bug 33568: Display the desk name for the first hold
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7ee8395026f2215ab4d4acfacdca20f4ef933875
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 23 13:37:33 2023 +0200

    Bug 33568: Display library names instead of codes for recall
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b7bcb5c5d9880ab63ebb3bf0461046a85786ff62
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 23 13:34:55 2023 +0200

    Bug 33568: Display library names instead of codes for first hold
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit dfe71bac8dcefb3f5308ce84fa86676fab0b3ac4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 23 13:31:25 2023 +0200

    Bug 33568: Display library names instead of codes for transfers
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5f497eb58e5127453a813fa26595ae06f14b26fa
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 23 13:06:52 2023 +0200

    Bug 33568: Use as_due_date to display due dates
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a0932b362e0aa457f8625b9e2d52bafee5a2e038
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 17 15:51:49 2023 +0200

    Bug 33568: Preserve item selection across pagination and filtering
    
    BTW Do we really need StaffDetailItemSelection?
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 51fb971b03409400193d4edc66078c2171804699
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 17 11:34:54 2023 +0200

    Bug 33568: Fix action links display
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ec96f51becd2586cd32424390a4b52ffccee2e7b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 20 07:59:47 2023 +0200

    Bug 33568: Restore filters
    
    FIXME - If we click 'show filters' the 'columns' list does not contain
    all the columns.
    We are destroying the DT and the hidden columns are removed from the
    dom.
    
    I think there are 2 possible solutions here:
    1. don't destroy but adjust the 'dom' parameter of DT (I didn't manage
    to make this work correctly, because of the th filters)
    2. Move the th definition in the JS init of DT
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e40e4e529427a4e3bb3be4e75ed11b460d6f4a42
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 20 10:19:02 2023 +0200

    Bug 33568: Escape all the things
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f319dcf9862627fda8981276d0d69f0ebd5c6371
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 20 08:35:48 2023 +0200

    Bug 33568: Course reserves
    
    FIXME We need tests here
    
    FIXME/TODO - Isn't it possible to replace all this mess with the
    following Koha::Item method and a new DBIC rs?
    sub courses {
        my ($self) = @_;
        return Koha::Courses->search(
            { 'ci.itemnumber' => $self->itemnumber },
            { join            => { course_reserves => 'ci' } }
        );
    }
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a3fa8f04acbd75b366a637d0d11cd714614e6e64
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 18 16:29:44 2023 +0200

    Bug 33568: Separate holdings
    
    This needs to be well tested!
    Sysprefs SeparateHoldings and SeparateHoldingsBranch
    As well as the "Lost items in staff interface" that can be defined at
    patron's category level.
    
    This patch is simply restoring the previous behaviour but I think we
    could do better.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3ec7a3fbfba20205d1f2ada4184f4b9f49ae7cb3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 18 15:36:52 2023 +0200

    Bug 33568: Restore action buttons
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a4cfaf66361a99c0a38939b1674a6ad18e9b155e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 18 15:30:42 2023 +0200

    Bug 33568: Print label button
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3e05aff32826532b1c4b0182c472c39007d61a08
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 18 15:26:56 2023 +0200

    Bug 33568: Host title
    
    See FIXMEs!
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 833f47fb75ed67a6762e99aa98e650fa797c6df3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 18 15:18:28 2023 +0200

    Bug 33568: public notes
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b8c51e998f1f8d0070f57633f6252eca6545dec2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 18 15:07:19 2023 +0200

    Bug 33568: Display stringified version of copy_number
    
    FIXME - should we apply the same test for other row._strings
    occurrences, in case they are not linked with an AV cat?
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 93ef24b91a1715da6fd21ac761568d470235df67
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 18 15:07:03 2023 +0200

    Bug 33568: URI
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a9b4b25ffed5d0af1e2407ec37998e095299164c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 18 14:46:08 2023 +0200

    Bug 33568: Add link to moredetail
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 385048f27ccb5eaeeac2e90130d621305a537960
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 18 14:09:47 2023 +0200

    Bug 33568: Status
    
    FIXME We need tests here!
    
    See the FIXME in the code, we are losing the ability to search on the status,
    but this is really impossible to implement if we are not storing the
    status (DB or search engine).
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c071b1ec2541df3e59a138af73c85e465ea64d11
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 18 10:57:09 2023 +0200

    Bug 33568: enumchron/volinfo
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 869336f98e5cd34be799686618bbe6d7349f8044
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 18 09:57:03 2023 +0200

    Bug 33568: Item groups
    
    FIXME - we need tests, but I'd like to make sure there is no an easier
    way to do this many to many things. Tomas?
    Filter on the "Item group" column needs to be tested!
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b134e564eea8aba85151fc653ff1d177770c20b3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 14 09:44:16 2023 +0200

    Bug 33568: Shelving location
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7e87af5205481f0084e0af36543911f0a6bd1198
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 14 08:54:43 2023 +0200

    Bug 33568: Fix search on item type
    
    Is this good? Cannot we return incorrect results here?
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a7e72e6a6ed07c752bd64783b711e13d3b28507b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 13 16:17:07 2023 +0200

    Bug 33568: Remove visibility conditions
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9179bb11f69f2d3793e7aac7fdf5e51fdc98550d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 13 16:13:02 2023 +0200

    Bug 33568: Add columns visibility
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fbff85773fd00aede6f791fc439eec4426707014
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 13 16:09:59 2023 +0200

    Bug 33568: fix DataTables bKohaColumnsUseNames
    
    Looks like this bug does not exist in Koha, but we hit it here.
    Could be moved to its own bug.
    Compare with ../includes/columns_settings.inc (code that is used prior
    to this change)
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 45de46d3d0db610df058c0a67ea0efe0848e4af4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 13 15:27:10 2023 +0200

    Bug 33568: Temporary set searchable to false where no data
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 781fdb09af2774d924e7da8f9657f6d540b25dea
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 13 15:26:35 2023 +0200

    Bug 33568: Hide empty columns
    
    Instead of relying on the existence of data in at least one item we are
    going to hide empty columns.
    That could be confusing: it does not mean items on another page do not
    have data for this column. The user can still display the column using
    the "Columns" visibility button, and filter on the column.
    
    I think this is an acceptable behaviour.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b1973b3abdb56dd2fe418a67083c7002ba891aa2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 13 15:26:00 2023 +0200

    Bug 33568: Cover images
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1c181f98444eaa005efde8fb21783ab0c7051ae0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 13 13:32:54 2023 +0200

    Bug 33568: Restore class names on th's
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c5584db6ca246070087f469eb44fc4f61dd2810c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 13 13:25:50 2023 +0200

    Bug 33568: Display item type image
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a831f95929df23e9a4a24a57c89819b113ff98fe
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 13 13:15:55 2023 +0200

    Bug 33568: can_be_edited
    
    Not sure if this is ideal but at least the algorithm complexity is way
    better than before!
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 87d7be37f46138e344088d3978a9408cca05adb1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 13 13:03:46 2023 +0200

    Bug 33568: Display string version of coded values + format dates
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1aef2ccf439c1604b3d3d11fbc825b109f3ae36d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 13 12:26:48 2023 +0200

    Bug 33568: Starting up
    
    Copying the same thead and making a new table using the REST API
    endpoint
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5df64d3de556d5b007289d7c6442dc093df18d3d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 18 15:46:40 2023 +0200

    Bug 33568: Remove debug_display
    
    This is useless, we could move it to its own bug report if needed.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomás Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9de44f00f7744b1ad09ffc0d619344872f81305b
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Mon Mar 18 19:42:01 2024 +0000

    Bug 36353: Update relationship value so that it is blank and consistent with other forms
    
    To Test:
    
    1. Choose a User Eligible for a Guarantor:
       1. Modify the user profile to include a new guarantor.
       2. Upon selecting a guarantor, ensure that the empty option in the 'Relationship' dropdown appears as a blank box.
    
    2. Select a User Eligible for a Guarantee:
       1. Navigate to "Add Guarantee" in the top menu.
       2. Verify that the guarantor field is automatically populated with the selected user.
       3. Confirm that the 'Relationship' dropdown displays the empty option as 'Empty record.'
    
    3. Apply Patch and Refresh the Page for Step 2:
       1. After applying the patch, refresh the page for step 2.
       2. Ensure that the empty option value for 'Relationship' is now displayed as blank.
    
    4. Sign Off and Have a Great Day! 😊🎉#
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c1cd6a980a7c6f862cb678aa81533b1fadc60afb
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Feb 8 11:11:24 2024 +0000

    Bug 36036: Fix misnamed location field
    
    This patch fixes a hash reference in the template to allow the location field to display properly
    
    Test plan:
    1) In system preferences, click Search and then select the Acquisitions option from the left hand menu
    2) Paste the following into MarcFieldsToOrder
    price: 975$p
    quantity: 975$q
    budget_code: 975$h
    3) Paste the following into MarcItemFieldsToOrder
    homebranch: 949$a
    holdingbranch: 949$b
    itype: 949$y
    nonpublic_note: 949$x
    public_note: 949$z
    loc: 949$c
    ccode: 949$8
    notforloan: 949$7
    uri: 949$u
    copyno: 949$t
    price: 949$g
    replacementprice: 949$v
    itemcallnumber: 949$o
    quantity: 949$k
    budget_code: 949$l
    Now save the sysprefs
    4) Navigate to acquisitions and go into a basket
    5) Click Add to basket and select “From a new file”
    6) Download the file attached to this bug
    7) Import the file and when the job is complete click “Add staged files to basket”
    8) Click the checkbox next to the record to display the items
    9) Inspect the value for the "loc" field - the value of "AV" from the file has not been selected
    10) Apply patch and refresh the page
    11) On inspection the value should now be properly selected
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 44d2303ef7397e352c889ce2405b4d01e9f11fbe
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Feb 21 13:03:13 2024 +0000

    Bug 36142: recallsview template param for opac-recall.tt
    
    Test plan:
    1) Enable UseRecalls
    2) Visit OPAC confirm recall page:
    <opac_url>/cgi-bin/koha/opac-recall.pl?biblionumber=76
    3) Notice left-side menu 'Recalls history' is not active
    4) Apply patch. Repeat.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5e8059a6f83493149ecefc03b9a47c42288a26ee
Author: Philip Orr <philip.orr@lmscloud.de>
Date:   Thu Mar 28 10:34:32 2024 +0000

    Bug 36452: correct display of patron message
    
    To test:
    1. Before applying the patch:
    2. In the staff interface, navigate to a patron
    3. Add a new staff message that contains multiple lines (e.g. using
       enter for the next line)
    4. Save the message and check the display.
       It will be a single line.
    5. Apply the patch and navigate back to the
       patron
    6. The message should now be displayed as multiple lines.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a97565a6d2c4c43c550da38dc9d81ec9f0342242
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Apr 5 09:41:19 2024 +0000

    Bug 36409: DBRev 23.12.00.016
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c1a137410065a46f6cd8d31a380d0da95c2169d6
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Wed Mar 27 10:51:34 2024 -0400

    Bug 36409: Fix capitalization for AcquisitionsDefaultEMailAddress and SerialsDefaultEMailAddress
    
    Replace all instances in files with correct capitalization for the
    sysprefs:
    SerialsDefaultEMailAddress
    AcquisitionsDefaultEMailAddress
    
    Test plan:
    1. Apply patch
    2. Run database update
    3. Go to Administration > System Preferences > Acquisitions
    -> Confirm correct capitalization for AcquisitionsDefaultEmailAddress
       (should be "Email", not "EMail")
    4. Go to Administration > System Preferences > Serials
    -> Confirm correct capitalization for SerialsDefaultEmailAddress
       (should be "Email", not "EMail")
    5. Use git grep to confirm no remaining instances of "EMail" in the code
       (other than the new dbrev, original dbrev and original release notes)
       e.g. git grep --files-with-matches "EMail"
    6. Confirm the test plan for Bug 20755 still works
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 43e480255d06357416c200b41e59c30c6ae70cac
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Wed Mar 27 10:45:55 2024 -0400

    Bug 36409: Dbrev for existing installations
    
    Dbrev to change EMail to Email for SerialsDefaultEMailAddress and
    AcquisitionsDefaultEMailAddress
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f7df7819cd4f9135c1eb4e389eee1ef2a144e2b2
Author: Andreas Roussos <a.roussos@dataly.gr>
Date:   Fri Mar 29 07:59:41 2024 +0100

    Bug 36462: remove extra Home breadcrumb item
    
    In the Staff interface, when viewing (or editing) the authority MARC
    subfield structure for a particular field, the Home button breadcrumb
    on the top left of the screen appears twice.
    
    This patch fixes that.
    
    Test plan:
    1) Try to view (or edit) the authority MARC subfield structure for
       a particular field. Notice the 'Home' breadcrumb button/icon is
       appearing twice.
    2) Apply this patch.
    3) Refresh the page, the 'Home' breadcrumb icon should now appear
       only once.
    
    Signed-off-by: Esther <esther@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 38875e920d26faffba0b67226daf1d53f80cfb13
Author: Andreas Jonsson <andreas.jonsson@kreablo.se>
Date:   Wed Mar 27 15:15:16 2024 +0100

    Bug 36439: Remove duplicate section in columns_settings
    
       The patch for bug 33575 was carelessely applied so
       the holds section was overwritten by a duplicated
       section which cause the table configuration for
       the holds-to-pull table to be missing.
    
       Test plan:
    
       * Place a hold on a record that has items (so there is at least one hold to pull)
       * Go to the page "holds to pull" and verify that the column settings are present
         to the left above the table (<cog wheel icon> Columns).
    
         NOTE: the column settings are cached, so you need to reset memcached
         between tests if you want to test with and without the patch.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 203b1b3fc2c35adc69f6cc1cd8f1297861207e38
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Mar 21 09:16:39 2024 -0300

    Bug 36384: Fix 'Used saved' typo in guided reports
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0026ee3e971b6556f2fdd97f6173d12337bb7c0f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 4 11:13:04 2024 +0200

    Bug 36516: Fix useless warning from translation script
    
    I lost too much time trying to know what the translation script outputs
      sh: 1: Syntax error: end of file unexpected
    
    To recreate:
    touch 'koha-tmpl/intranet-tmpl/prog/en/modules/<' (yes, don't ask!)
    koha-translate -i de-DE --dev kohadev
    or
    koha-translate -u de-DE --dev kohadev
    
    And you get the shell error without any ideas what's happening!
    
    With this patch applied you will not get any errors because the quote
    will actually copy the file (what is expected).
    
    But without the quote the cp command will fail and the explanation will be
    displayed
    sh: 1: Syntax error: end of file unexpected
    Cannot copy /kohadevbox/koha/koha-tmpl/intranet-tmpl/prog/en/modules/< to /kohadevbox/koha/koha-tmpl/intranet-tmpl/prog/de-DE/modules/< at /kohadevbox/koha/misc/translator/tmpl_process3.pl line 385.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cc94547524743a45dcfc3173dd14dd667d16c2cb
Author: Brendan Lawlor <blawlor@clamsnet.org>
Date:   Thu Apr 4 19:47:49 2024 +0000

    Bug 35708: Update default system preference for AutoRenewalNotices
    
    Test plan:
    1. Apply test plan and restart everything
    2. Confirm AutoRenewalNotices defaults to patron messaging preferences
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a9d8c681d9f36fff2402d11931cd725abf3df22c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Apr 2 11:54:53 2024 +0000

    Bug 36173: (follow-up) Tidy
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d704495138f93943158e2eff87fd10988fa6ff1f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 27 14:00:06 2024 +0100

    Bug 36173: Display basket info when cancelling an order
    
    The basketno is missing from the 2 links in acqui/parcel.tt
    
    Better to retrieve the basketno from the order in the controller.
    
    Test plan:
    Create an order, receive it
    On the parcel view notice that the "Cancel order" link leads to a
    confirmation page that does not contain the info of the basket.
    It's fixed with this patch applied.
    
    Note: Don't fully receive, but 'Receive shipment' from vendor, choose an invoice, and cancel the order from the list to be received
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5c71283c897de456db0824018fcb2b0f7931040d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Mar 7 10:09:13 2024 +0000

    Bug 36268: Add a mock for ReplyToDefault
    
    Test plan:
    Without this patch, add email address in that pref.
    Run Letters.t. It fails.
    Now apply patch and run test again. Should pass.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 65ff613f5910492be75e68a5c5258ea7c3a7c58f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Apr 1 12:22:15 2024 +0000

    Bug 36469: Fix conflict between _header.scss and addbiblio.css tab style
    
    addbiblio.css adds padding to tab panes specific for that interface, and
    the header search form should not pick up that style. This patch adds
    some specificity to _header.scss to avoid unwanted padding.
    
    To test, apply the patch and rebuild the staff interface CSS
    (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_interface).
    
    - Go to Cataloging -> New record (using the basic MARC editor).
      - The style of the MARC edit form should look correct.
      - The header search form should look correct
    - Test other pages with tabs to confirm that there are no other unwanted
      side-effects, e.g. Circulation -> Check out; Advanced catalog search;
      Bibliographic detail page.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3feca570d8c3ce94f05a6302301e604968eb2dd8
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Feb 8 08:41:25 2024 +0000

    Bug 36031: Remove obsoleted script
    
    Since it is not up to date, we should remove it.
    The folder structure changed and this would need digging into SELinux to update that side as well.
    In other words, remove this until someone finds time do it. But dont let it here in its current outdated state.
    
    No test plan here.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4158783eb284cf5f89266d3251f6d647200c0f01
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 21 15:52:52 2024 +0100

    Bug 36395: Remove useless fetch in admin/marc_subfields_structure.pl
    
    Since (a long time ago!)
      commit 62aa3f4292d83bc9304e296de5f0830e28510492
      Bug 17216: Use Koha::AVC from mss.pl
    
    This $sth2 is never fetched, we are retrieving the AV cat using
    Koha::AV::Categories
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7356a5cbd48cdb3a7971608f59131152d296a447
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Mar 21 15:08:38 2024 +0100

    Bug 35868: Warning sign for using a patron category that is limited to another library has moved to other side of page
    
    Bug 31422 implemented a warning sign, when a patron has a patron category that you are not allowed to set due to library limitations on the code.
    It should appear right next to the field, but might appear on the other side of the page now being easily missed.
    
    This patch simply removes the float:right CSS rule.
    
    To test:
    * User's login branch and home library is: Centerville
    * Patron category "B - Board" is limited to Franklin
    * Create a new patron: Board doesn't show
    * Edit an existing patron with another patron category: Board doesn't show
    * Edit a patron with Board category from Centerville
    => Check the warning icon with the tooltip is close to the category select
    
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 10d5f6ef379768663cd6b26a81315ce44b65520d
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Dec 11 04:42:39 2020 +0000

    Bug 27198: Fix syntax in marc21-retrieval-info-auth-dom.xml
    
    This patch fixes the syntax in marc21-retrieval-info-auth-dom.xml,
    so that one can use the Zebra special retrieval elements documented
    at https://software.indexdata.com/zebra/doc/special-retrieval.html
    
    These are very useful when troubleshooting issues with authority
    records in Zebra.
    
    Test plan (using KTD):
    1. yaz-client unix:/var/run/koha/kohadev/authoritysocket
    2. Enter these commands:
       . base authorities
       . format xml
       . elements zebra::snippet
       . find e
       . show 1
    3. Result = diagnostic message:
         Diagnostic message(s) from database:
            [25] Specified element set name not valid for specified database
                 -- v2 addinfo 'zebra::snippet'
    4. Apply the patch
    5. Copy updated file: sudo cp debian/templates/marc21-retrieval-info-auth-dom.xml
       /etc/koha/marc21-retrieval-info-auth-dom.xml
    6. Stop and restart zebra (no need to rebuild the Zebra index):
       . sudo koha-zebra --stop kohadev
       . sudo pkill zebrasrv
       . sudo koha-zebra --start kohadev
    7. Repeat commands in step 2.
    8. Result from show 1 = XML output:
        Sent presentRequest (1+1).
        Records: 1
        Record type: XML
        <record xmlns="http://www.indexdata.com/zebra/">
          <snippet name="Any" type="w">Gontarski, S. <s>E</s></snippet>
        </record>nextResultSetPosition = 2
       Elapsed: 0.013929
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 61c496849d5053d794ec72567f7a4ef4d4c7450d
Author: Per Larsson <per.larsson@ub.gu.se>
Date:   Fri Feb 23 14:29:48 2024 +0100

    Bug 36442: Fix typo in EDIFACT messages list
    
    To test:
    1) Create an edifact message
    2) Go to the acquisition EDIFACT messages page and
       verify the basket link is broken
    3) Apply patch
    4) Verify the link now works
    
    Sponsored-by: Gothenburg University Library
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 07738adbf08a66fdb91728dedc1362a8a75a3067
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Mon Mar 25 15:53:10 2024 +0100

    Bug 35599: Fix Pronouns and HidePersonalPatronDetailOnCirculation
    
    Bug 10950 adds a pronouns text field to the patron record.
    Currently it is hidden by system preference 'HidePersonalPatronDetailOnCirculation'.
    
    This patch moves pronouns outside this system preference influence.
    
    Test plan:
    1) Add pronouns to a patron
    2) Set system preference 'HidePersonalPatronDetailOnCirculation' to "Don't hide"
    3) Check you see pronouns in circulation page
       /cgi-bin/koha/circ/circulation.pl?borrowernumber=X
    4) Set system preference 'HidePersonalPatronDetailOnCirculation' to "Hide"
    5) Refresh circulation page
    => Without patch pronouns are hidden
    => With patch pronouns are displayed
    
    Signed-off-by: Hebah <hebah@bywatersolutions.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 34aa31b22d8262c108988071949c5bd4dfc78a88
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Jan 3 12:01:36 2024 +0000

    Bug 35685: Fix after creation actions
    
    Test plan:
    
    1) Install FreeForm and enable ILLModule, run:
      bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev.sh)
    2) Configure ILLModuleDisclaimerByType, visit:
      /cgi-bin/koha/admin/preferences.pl?tab=&op=search&searchfield=ILLModuleDisclaimerByType
      Click "edit" and paste the example code into the sys pref value
    3) Create a new OPAC ILL request, visit:
      /cgi-bin/koha/opac-illrequests.pl?method=create&backend=FreeForm
    4) Dont put a type or branch, click 'Create', on the next screen click 'Submit'
    5) Notice it explodes
    6) Apply patch and repeat. It no longer explodes and now shows an error message.
    
    7) (After FQA): Create a normal request, input type and library, submit the type disclaimer
    8) Run:
    echo "select * from illrequestattributes;" | koha-mysql kohadev
    9) Notice type_disclaimer_date and type_disclaimer_value are correctly saved
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ade75ea56158e6cf87894d0aeba1711e73dbfcda
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Jan 25 21:54:21 2024 +0000

    Bug 23296: Set patron branchcode when preparing non-digest version
    
    To test:
    1. APPLY PATCH
    2. Set up circ rules to allow for auto renewals.
    3. Set AutoRenewalNotices to 'according to message prefs'
    4. Make a branch specific version of the the AUTO_RENEWAL notice.
    5. Find a patron belonging to that branch and set the message prefs to allow for a AUTO_RENEWAL. But no digest option!
    6. Check some things out and make sure they are eligble for auto renewal.
    7. Run the cron.
    8. Make sure the patron gets the branch specific notice.
    9. Delete the branch specific notice.
    10. DO 6-7 again.
    11. Make sure they now get the all library notice.
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] Tidied one line.
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 70e4a5ed3efe77b9dcef8fdba707732a2b145a18
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Apr 3 21:46:08 2024 +0000

    Bug 36507: Allow non-superlibrarians to set desk and register
    
    To test:
    
    1. Turn on UseCirculationDesks
    2. Create some desks
    3. Login as a non-superlibrarian
    4. Try to switch desks, get an error
    
    5. Turn on UseCashRegisters
    6. Create some registers
    7. As a non-superlibrarian try to change your register, get an error.
    
    8. APPLY PATCH and restart_all
    9. Try changing your desk and register again, it should now work.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d9aef9163ffb99e577c068bcf5702a52244d910b
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Apr 4 12:35:56 2024 +0000

    Bug 36521: Checkbox preferences should be allowed to be submitted empty
    
    Visit:
    http://localhost:8081/cgi-bin/koha/admin/preferences.pl?tab=i18n_l10n
    
    Uncheck English on both 'language' and 'OPACLanguages'. Save.
    Notice "Nothing to save" shows.
    Apply patch. Repeat. Notice you can now save with all options empty.
    
    To my knowledge, these 2 language preferences are the only checkbox preferences of this kind (correct me
    if I'm wrong please).
    
    I need to add a new system preference for bug 35604 listing all installed ILL backends so the user
    may enable or disable each of the backends.
    I want that particular system preference to be disabled as a whole if all backends are unchecked, but I was unable
    to uncheck all before this patch.
    
    I understand that for languages checkboxes specifically not allowing everything to be empty may make sense (at least
    one language should be enabled, after all). But these languages checkbox preferences should be the exception, not the rule,
    for this behaviour.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 335b5b7ad52a7f56bac617e79358d4863a0e0c99
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 9 16:47:56 2024 +0100

    Bug 35714: Prevent items not linked with processing with a letter code a to be printed
    
    Items linked with a processing which does not have a letter code are not
    supposed to be printed.
    Currently the code is allowing to "print slip" for items when using the
    link on top of the table. It results in an error "No letter_code at
    /kohadevbox/koha/preservation/print_slip.pl line 45."
    
    Test plan:
    Create a processing without a letter code
    Add 2 items to the waiting list then add them to a train
    Go to the "show train" view
    => notice that you cannot print slip for those items
    Create another processing with a letter code
    Edit one of the item and set it the new processing
    => A slip for this item can be printed
    Edit the other item and the train to make them use the new processing
    => A slip for those items can be printed
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 805ea1a00e5e05aae71c508947976b0cfff5b81a
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Sep 7 11:24:49 2022 +0200

    Bug 35573: Correctly display warning when placing a hold
    
    Test plan:
    
    1) Add a basic circulation rule like : 0 hold allowed on patron category
       'A' and set AllowHoldPolicyOverride to 'Allow'
    2) Make a hold on a patron belongs to this category
    3) Normally you should see a warning on item (override needed) but it's
       not the case
    4) Apply this patch
    5) Refresh and repeat step 2
    
    This patch comes from an alternative patch on the original bug (I'm including
    the original test plan for your information) :
    
    (Bug 30687 - alternative patch): Always allow to force hold pickup location
    
    If AllowHoldPolicyOverride is enabled and only some pickup locations are
    available, you still have the possibility to force one of the others
    pickup locations.
    But when there are zero pickup locations available, that is not
    possible.
    
    This patch change that by always displaying the list of pickup locations
    when AllowHoldPolicyOverride is enabled.
    
    Test plan:
    1. Apply patch
    2. Disable AllowHoldPolicyOverride
    3. Create a biblio B with an item I at library A.
    4. Configure this library A to not be a pickup location
    5. Add a "Default holds policy by item type" for item I type where "Hold
       pickup library match" is "item's home library"
    6. Try to place a hold on biblio B
       You should not be able to place a hold because there is no valid
       pickup locations
    7. Enable AllowHoldPolicyOverride
    8. Try to place a hold on biblio B
       You should now see all valid pickup locations in a dropdown list
       (with an exclamation mark in front of each option) with none selected
       by default
    9. Verify you can place a title-level hold and an item-level hold
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 33da81f9feb145e357647d456ae3bad0644f6963
Author: Thibaud Guillot <thibaud.guillot@biblibre.com>
Date:   Mon Feb 5 12:59:06 2024 +0100

    Bug 35573: Revert "Bug 30687: Allow pickup location to be forced when override is allowed"
    
    This reverts commit ab93008da7eb61b697e4586c679b88c2eebaacd0.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 94da493d0eaaec80e42258ec421eb7c5ca1a0dd2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Feb 8 20:27:14 2024 +0000

    Bug 36053: Correct input name for item replacement fields
    
    To test:
    1 - Follow test plan and use sample record from bug 35912 ( or similar)
    2 - Confirm that when the order is saved the replacement price is $0.00
    3 - Apply patch, restart_all
    4 - Delete previous orders, and stage and add to basket again
    5 - Confirm that upon adding orders to basket the replacement price is saved correctly
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7ee4252f95415caabcda0f668d4e74b579327cf6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 4 12:30:47 2024 +0200

    Bug 36349: Add tests
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 52098e0dc1371eb4657cc7b934d01a7ca21c2f99
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 4 10:23:18 2024 +0200

    Bug 36349: Remove passing CGI params from sco/printslip.pl
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5c634ee597efec48dd54c55ace5fcac2b93c40c3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 20 10:08:16 2024 +0100

    Bug 36349: Fix AutoSelfCheckAllowed
    
    Move the check to C4::Auth.
    
    Yes, it's not nice, I didn't expect to add exception to this code, and
    it's adding more ugly code to get_template_and_user, but... Suggestions
    welcome!
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5300bcd57458f9d39b376ad02d20903ce727e8db
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 18 16:27:58 2024 +0000

    Bug 36349: Make sure CSRF token is included for all login scenarios
    
    To test:
    1 - In KTD visit:
        http://localhost:8080/cgi-bin/koha/sci/sci-main.pl
    2 - Everything should be set for auto self check user etc, just login
        as a patron
        If not (or not using KTD) setup a self check user, enable SCO and
        SCI, set self check patron system preferences, then login with
        patron
    3 - 403 Error
    4 - Repeat with sco:
        http://localhost:8080/cgi-bin/koha/sco/sco-main.pl
    5 - Apply patch, restart all
    6 - Try again, both should be successful
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2169d774c14d3ecb1d34464f3a5faa7cb812e75d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 5 08:45:51 2024 +0200

    Bug 35610: DBIC schema changes
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit e3c138c02951852166ec9258afcf1d426f955902
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Dec 20 11:18:40 2023 -0300

    Bug 35614: Update cpanfile for Mojolicious::Plugin::OpenAPI v5.09
    
    This patch updates the following libraries, as required by Koha:
    
    * Mojolicious::Plugin::OpenAPI
    * JSON::Validator
    
    To test:
    1. Apply this patch
    2. Run:
       $ ktd --shell
      k$ sudo cpanm --installdeps .
    => SUCCESS: Dependencies updated correctly
    3. Run:
      k$ prove -r t/db_dependent/api/v1/ \
                  t/db_dependent/Koha/REST/
    => SUCCESS: Tests pass!
    4. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Mason James <mtj@kohaaloha.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit df9bc0b86a83d60b7b71924c46087bed7aa4226b
Author: Thomas Klausner <domm@plix.at>
Date:   Thu Mar 7 17:56:13 2024 +0100

    Bug 36269: Elasticsearch: publisher-location (pl) should use260a/264a
    
    Currently the index `pl` points to 008/15-17. It should
    (additionally/instead?) point to 260a and/or 264a.
    
    Test plan (for koha-testing-docker with ElasticSearch via `ktd --es7 up`)
    
    Verify the old/broken behaviour:
    
    * Go to Staff/Advanced Search
    * Select "Publisher Location" and enter "cau", start search
    * You will get some hits (~16), eg "Perl best practices / Damian Conway", which has 008 of "051222s2005 caua b 001 0 eng d" with "cau" on 15-17
    * Edit this record (cgi-bin/koha/cataloguing/addbiblio.pl?biblionumber=5)
    * Inspect 260$a, which should containt "Sebastopol, CA :"
    * Go back to Advanced Search and search for  "Publisher Location" = "Sebastopol"
    * No hits!
    
    Apply the patch!
    
    * exit ktd and stop it (ktd --es7 down; ktd --es7 stop)
    * start it again
    * Go to Staff / Administration / Search Engine Config (Elasticsearch)
    * Click on the Tab "Bibliographic records" and search/filter for "pl"
    * you should see 3 entries for "pl", with Mapping values of "008_/15-17", "260a" and "264a"
    * Go to Search,
    * Select "Publisher Location" and enter "cau", start search
    * same hits as befor
    * Search again, but for "Sebastopol"
    * Now you'll get 9 hits!!
    
    Bonus: Test 264a
    
    * Got to Admin / MARC bibl framework, select BKS -> MARC structure
    * search for tag "264", edit subfields
    * in tabs a, b, c: Check the "Editor" Checkbox (Visibility)
    * Save changes
    * find a book, eg again "Perl best practices" and edit it
    * find field 264 and enter "Test" into  264a, Save
    * Depending on your setup, you might have to manually re-index the book:
      * enter ktd: ktd --shell
      * reindex the one book (via --bn) or all (might also need a -d)
        /usr/share/koha/bin/search_tools/rebuild_elasticsearch.pl -v -b -d
    * Go again to Advanced Search, Publisher Location = "Test"
    * You should find the book
    
    If your NOT running ktd, you might be able to just edit the ElasticSearch Mappings to add / change the mapping for "pl" to point to "260a".
    
    One rather harsh way to do this (which I needed to do, because the ES Mappings UI did not work for me) is via this SQL:
    update search_marc_map set marc_field='260a' where marc_field='008_/15-17';
    
    Sponsored-by: Steiermärkische Landesbibliothek
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 308bb0830cfe69116e442bad4cd206dd402244be
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 18 12:49:20 2024 -0300

    Bug 35129: Return 400 if _per_page=0 passed
    
    This patch adds a safe guard for when consumers pass _per_page=0 to
    endpoints. This condition is checked for on a centralized place and
    avoid reaching the controller in such scenarios that would provoke a
    division by zero exception.
    
    To test:
    1. Apply the regression tests patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/pagination.t
    => FAIL: We expect a 400, but get a 500 instead
    3. Apply this patch
    4. Repeat 2
    => SUCCESS: Tests pass! No more explosions for this!
    5. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9a4e3bd49f1a978fbe5d3dc88e36dc5de0fb81f9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 18 12:48:55 2024 -0300

    Bug 35129: Regression tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ace0bec6baa027c5be862f062d393d13deb8c162
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Apr 1 17:33:52 2024 +0000

    Bug 36341: (QA follow-up) Use future inclusive on staff side too
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c16ec21f4b77971b19e5c4b5140521c4133f0608
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Mar 18 11:35:13 2024 +0000

    Bug 36341: Add futureinclusive to future holds
    
    This patch adds the flatpickr-futureinclusive data to the input field
    for "Hold starts on date" in the OPAC.
    
    We also add 'flatpickr-future' data to the input field for expiration
    date as it also doesn't make sense to allow this to be a past data
    either.
    
    Test plan
    1) Attempt to place a hold on an item from the OPAC
    2) Expand the 'Show more options' dropdown
    3) Note that without the patch 'Hold not needed after' allows setting to
       a date in the past.
    4) Enable `AllowHoldDateInFuture` and `OPACAllowHoldDateInFuture` system
       preferences
    5) The 'Hold starts on date' option should now appear if you refresh
       your hold placing page in the OPAC.
    6) Note that the above input also allows setting a past date
    7) Apply patch
    8) Neith input should allow past dates now.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8d5299639e3f983e95fcf2a9d81febc1406bafdd
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Mar 26 16:19:41 2024 +0100

    Bug 36432: Remove circular dependency from Koha::Object
    
    Koha::Object depends on Koha::DateUtils, which depends on C4::Context,
    which depends on Koha::Config::SysPref, which depends on... Koha::Object
    
    Apart from the circular dependency, the dependency on C4::Context alone
    is problematic as it loads a bunch of modules that are not needed at all
    in Koha::Object (YAML::XS and ZOOM for instance).
    As Koha::Object is used as a base for a lot of modules, we should take
    care to only load the minimum required.
    
    This patch moves some date parsing code to specific modules:
    - Koha::DateTime::Format::RFC3339
    - Koha::DateTime::Format::SQL
    
    and it uses them in Koha::Object and Koha::DateUtils where it is
    possible.
    
    Test plan:
    1. Do not apply the patch yet and run the following command:
       `perl -cw Koha/Object.pm`
       It should print several warnings about redefined subroutines, meaning
       there is a circular dependency.
    2. Apply the patch
    3. Run `perl -cw Koha/Object.pm`. It should only say:
       "Koha/Object.pm syntax OK"
    4. Run the following command:
        prove \
            t/DateUtils.t \
            t/Koha/DateTime/Format/RFC3339.t \
            t/db_dependent/Koha/Object.t
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7aabe354ecf406761d3422130cdea2e9da2f4687
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Apr 1 15:34:44 2024 +0000

    Bug 36394: Fix 'Filter' selection in new line
    
    All other fields in the new line use data-id instead of name, this fixes an inconsistency
    
    To test:
    1 - Before this patch select some values, set filter to punctuation - hit 'Add'
    2 - Punctuation vlaue is cleared
    3 - After patch add a new line and confirm 'Filter' value is saved
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d12ae6b9e26be680be8789f7f2e10aab92680697
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 21 14:16:23 2024 +0100

    Bug 36394: Fix footers behaviour on the ES mapping page
    
    In the footers of the tables of the search fields and mappings,
    the options selected are not consistent.
    Additionally they are not reset correctly when a new line is added.
    
    Test plan:
    0. Do not apply to recreate the problem
    1. Go to the ES mapping page
    2. Click tab "Bibliographic records"
    3. At the bottom, notice the Yes/No dropdown lists
    => They are inconsistent, sometimes 'Yes', sometimes 'No'
    4. Click Add
    => Values are kept
    
    5. Apply this patch
    6. Repeat 1, 2, 3
    => No (first option) is always selected
    7. Click Add after you modified some values
    => "No" is selected
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    Signed-off-by: Christopher Brannon <cbrannon@cdalibrary.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2e6a4a555b73f653e7245bad88973d17ceea5dc6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Apr 1 12:53:01 2024 +0000

    Bug 36376: (QA follow-up) Tidy
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 841dc00ec89dd35cef09890c2f0101f014cc7f92
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Mar 20 18:29:02 2024 +0100

    Bug 36376: Display library limitations alert in patron's messages
    
    Bug 31422 added a warning message when library limitations issue in patron edition page.
    We should add this patron's messages in circ and details pages.
    Like age limitations.
    
    Test plan:
    1) User's login branch and home library is: Centerville
    2) Patron category "B - Board" is limited to Franklin
    3) Edit a patron with Board category from Centerville
    4) A message appears "The patron's current category (Board) is limited to other libraries."
    
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 95394217f081a38c3fe66f21d673aa056c83414b
Author: Phil Ringnalda <phil@chetcolibrary.org>
Date:   Thu Mar 28 15:02:38 2024 -0700

    Bug 36461: Advanced editor should disable RequireJS timeout with waitSeconds: 0
    
    We aren't actually doing any error handling with the RequireJS waitSeconds
    config, just leaving the advanced editor hanging on loading if it times out,
    so instead we should disable it.
    
    Test plan:
    
    1. Set the preference EnableAdvancedCatalogingEditor to Enable
    2. Load the Cataloging module home page in Firefox and open Firefox's
       Web Developer Tools, and in the Network tab change from "No Throttling"
       to "Regular 2G"
    3. In the Cataloging page, click Advanced editor, and watch it attempt to
       load for 30 seconds, followed by a setTimout error in the devtools console,
       and then wait as long as you can stand for anything but the "Loading,
       please wait..." to happen in the web page. Nothing ever will.
    4. Apply the patch, restart, set EnableAdvancedCatalogingEditor back to
       Enable, turn throttling on, load the Advanced editor again, and note that
       even though it will take a minute or more to load through the throttling,
       the editor does actually load.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e518e0be2c97782997037383223e57ce2e196df4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Mar 27 12:29:31 2024 +0000

    Bug 36421: Make sure pre-controller errors are correctly logged
    
    If something explodes in Koha::REST::V1::Auth chances are that no logging will happen.
    
    This patch makes sure they are!
    
    To test:
    1. Make sure you do NOT have 36420 on your tree
    2. Make sure you are looking at the logs:
       $ ktd --shell
      k$ koha-plack --restart kohadev; tail -f /var/log/koha/kohadev/*.log
    3. Use Postman or similar for hitting some known endpoint. Use
       the user's cardnumber instead of the userid. On a default KTD launch, the
       generated user's cardnumber is '42'.
       GET /patrons
    => FAIL: You get a 500 error (expected, fixed on 36420) but no useful logging found.
    4. Apply this patch
    5. Ctrl+c on the logs and re-run the command
    6. Repeat 3
    => SUCCESS: You get a 500, but you also get the exception information logged!
    7. Sign off :-D
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [OK] prove t/db_dependent/api/v1/items.t t/db_dependent/api/v1/unhandled_exceptions.t
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3ed4e096b017a539a3b9afdb913f9d61fb43a0f5
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Mar 6 00:32:03 2024 +0000

    Bug 36227: Remove item group option if there are no items
    
    To test:
    1. Test from OPAC. Any item group without items in it should not display as an option in the "Request specific item group:" dropdown
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 29873200dfdb0ca0956095674dab440e1ff36d0d
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Mar 6 00:02:31 2024 +0000

    Bug 36227: Add warning when item group has no holdable items
    
    To test:
    1. Enable EnableItemGroups and EnableItemGroupHolds
    2. Find a bib and add an item group but do not attach any items to the item group.
    3. Place a hold from the staff interface.
    4. Under  Hold next available item from an item group you see the option for your item group, select it and place the hold.
    5. It's a hold that can not be filled
    6. APPLY PATCH
    7. How on the hold page under  Hold next available item from an item group there is a 3rd column called 'Holdable items'.
    8. Your item group, without any items, should have a disabled radio button and a warning "No holdable items in this item group."
    9. Add items to your item group.
    10. Now on the hold page in the new 'Holdable items' you should see links for each item, make sure those links work.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f80c3a4b4d74e4401870aaa65e8c926b705b69e5
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Mar 17 21:41:28 2024 +0000

    Bug 36294: Replace 'book' in system preference descriptions
    
    Some system preference descriptions have been updated in order
    to replace "books" with items, checkouts or bibliographic records.
    
    To test:
    
    * Check system preference descriptions for following system
      preferences with and without the patch applied:
      * virtualshelves
      * AutoSwitchPatron
      * SyndeticsSeries
      * OPACFineNoRenewals
      * OpacRenewalAllowed
    * If they read better than before, sign off :)
    
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 607b80c5a601f54920a2b3b259896ac4e490e0ab
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Mar 1 15:46:04 2024 +0000

    Bug 36187: Corrected set data.patron_id in select_suggestor()
    
    To test:
    1. Make a new suggestion in the staff interface and attempt to set the "Created by" patron to someone other than the logged in user.
    2. Submit the suggestion.
    3. select suggestedby from suggestions where suggestionid = X; ( Where X is the suggestionid )
    4. The value is NULL
    5. On suggestion/suggestion.pl the "Suggested by" column is blank.
    6. APPLY PATCH
    7. Try 1 - 3 again. This time the suggestedby should be correctly set.
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 56491caa5f6407bbe39b0bce7331ad484a3c8753
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Thu Apr 4 12:51:41 2024 +0000

    Bug 35610: DBRev 23.12.00.015
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7c0c2939cbc0f13b27aca7524842edb4504440ef
Author: Victor Grousset <victor@tuxayo.net>
Date:   Wed Mar 27 02:35:39 2024 +0100

    Bug 35610: (QA follow-up): tidy up code
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 495f0d2caa8f75da5f428b8a18e58ce248a9fea1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Mar 25 16:51:01 2024 +0100

    Bug 35610: Set branchcode to NULL before adding the FK
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 943838ed9950f95325558ae71590559bcb349352
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Dec 20 10:35:17 2023 +0100

    Bug 35610: Add FK on old_reserves.branchcode
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 11cb2fee598f4ca9eef8259881666b9a2770378a
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Wed Apr 3 16:13:38 2024 +0000

    Bug 36244: (follow-up) Remove atomicupdate
    
    Something went wrong on creating the DBRev. Cleaning up.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7b56e8d15eb2a87b0e6b8fd531873825052254a9
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Mar 27 10:20:03 2024 +0100

    Bug 24879: (follow-up) Fix test suite
    
    Running cataloguing pluings (in cataloguing/value_builder) now requires
    authentification.
    
    This patch adds in failing unit tests a mock of C4::Auth::check_cookie_auth
    
    Test with:
    prove t/db_dependent/FrameworkPlugin.t t/db_dependent/Koha/UI/Form/Builder/Biblio.t t/db_dependent/Koha/UI/Form/Builder/Item.t t/db_dependent/Serials.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1ff71cf2004de4b25ac946efdf325b055875469e
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Mon Mar 18 16:32:57 2024 +0100

    Bug 36323: Move koha_perl_deps.pl to misc/devel
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d69521a2c2628d37cf8b707ce9ef5eee861d2cf2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 15 10:19:16 2024 +0100

    Bug 24879: Exclude koha_perl_deps.pl
    
    And tidy.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e4f37ad6a09e97b83bb94642d879dc93ba2dbff6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 14 16:53:35 2024 +0100

    Bug 24879: Use perl shebang to list the exec
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f7efa5ae921d91845f35888b86ec4f3eeb3d963f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 14 16:19:06 2024 +0100

    Bug 24879: Add check_cookie_auth when missing
    
    This can certainly be improved to adjust the permissions, but at least
    they are no longer opened to the world..
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6ae3d984b0c4d8fcd8c67f321a8dfad903e6f331
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 14 16:17:55 2024 +0100

    Bug 24879: Adjust tests
    
    Installer scripts cannot be run from the UI:
    debian/templates/apache-shared-intranet.conf:RewriteRule ^/cgi-bin/koha/(C4|debian|etc|installer/data|install_misc|Koha|misc|selenium|t|test|tmp|xt)/|\.PL$ /notfound [PT]
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fce988fe985308864d2bd15fb39ddd4bf6c21555
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 14 16:14:17 2024 +0100

    Bug 24879: Remove installer/externalmodules.pl
    
    It is not used, if we need it back it must be moved to misc.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3b02db72100faf47367f7ae8d958fd7e985129a9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 17 11:54:12 2020 +0100

    Bug 24879: Add new test to catch missing auth statement
    
    in intranet scripts
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 074ae34913c0c22294c9ec8e3a0f105abd002c72
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 14 16:42:08 2024 +0100

    Bug 36322: Redirect docs dir to 404
    
    http://localhost:8081/cgi-bin/koha/docs/CAS/CASProxy/examples/proxy_cas.pl
    
    Test plan:
    Hit the link
    => Erk
    Copy the apache config to /etc/koha/apache-shared-intranet-git.conf
    restart_all
    Hit the link
    => 404
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ca19c21a5b7f58b505c60f17cf5033987e9a879d
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Feb 1 09:15:23 2024 +0100

    Bug 35960: Use .val() instead of string concat to prevent potential XSS
    
    Test plan:
    1. Log out
    2. Go to /cgi-bin/koha/mainpage.pl#somestring"with<html>char
    3. Open the brower's inspector and find "auth_forwarded_hash" input
    4. Make sure the value attribute is there and corresponds to the URL's
       fragment. It should be URI-encoded.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7f8523ed965371de38d7c805b187d61c40b3b5da
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Wed Apr 3 14:27:42 2024 +0000

    Bug 36244: DBRev 23.12.00.014
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 57916a3fe3ec92a5b44045ec42dfce077fb13e16
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Mar 7 11:10:35 2024 -0500

    Bug 36244: Add atomic update to check for affected notices
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Fixed some typos in bug numbers and text.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bc305ac584f73928c4d28378e57b6c3d945b8d6a
Author: Andreas Jonsson <andreas.jonsson@kreablo.se>
Date:   Thu Mar 7 09:12:25 2024 +0000

    Bug 36244: Do template toolkit processing first
    
    To avoid injection of template toolkit code
    from database fields that are controlled by
    untrusted sources.
    
    Test plan:
    
    * review subtest 'Template toolkit syntax in
      parameters' in t/db_dependent/Letters.t
    * Run the unit test:
      prove t/db_dependent/Letters.t
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 37347c024b01defa473c8ff5a4b73ceaf064ed14
Author: Andreas Jonsson <andreas.jonsson@kreablo.se>
Date:   Thu Mar 7 09:07:49 2024 +0000

    Bug 36244: Unit test for tt syntax in parameters
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 47ccb3165c446f606912ce73826e028659467e43
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Mar 26 12:29:09 2024 +0000

    Bug 36302: members-home.pl defers loading, member.pl does not
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit dcb98892cdde4c4c8dac4fcfb90d26b436877c09
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Mar 25 17:14:01 2024 +0000

    Bug 36302: Reinstate defer_loading
    
    defer_loading is now a patron_search_js BLOCK param - default on
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4e04ff28b61b76e188e929c2e2814ff2190853b3
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Mar 28 10:55:05 2024 -0400

    Bug 36447: Circ rules slow to load when many itemtypes and categories
    
    It seems that we loop all categories and item types to build the circ
    matrix. We should only loop over values that have actually been used
    in circulation rules.
    
    Test Plan:
    1) Create 1000 itemtypes and category codes. You can use the following
       script:
    
       use t::lib::TestBuilder;
       my $builder = t::lib::TestBuilder->new();
       $builder->build( { source => 'Category' } ) for 0..1000;
       $builder->build( { source => 'Itemtype' } ) for 0..1000;
    
    2) Note the lengthy load time for smart-rules.pl
    3) Apply this patch
    4) Restart all the things!
    5) Reload the page
    6) Note the much faster load time!
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f44134a1ffa2de0500c22603aa85bc97df9bc25d
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Mar 29 07:21:20 2024 -0400

    Bug 36159: (QA follow-up) Tidy code
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9c731a75a9c3ef60dad69dc2aa0b1d615cee2899
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Mar 28 06:36:25 2024 -0400

    Bug 36159: Add unit test
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 22d51cdd07cc26fc25e5a2166ef59ad3f2cb00db
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Mar 28 06:20:29 2024 -0400

    Bug 36159: (QA follow-up): Simplify code to supress warnings
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 67680d5d6a782ff81ba21b6910318e6d5d32afd0
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Mar 1 09:50:07 2024 -0500

    Bug 36159: Patron imports record a change for non-text columns that are not in the import file
    
    When importing patrons we assume a default of '' for borrower columns not supplied in the file.
    
    When saving we compare the new object we built to the one form the database - for columns are that are not text type we get undef from the db and '' in the object we make. This means we see a difference and log into the BorrowersLog:
    
       "date_renewed" : {
          "after" : "",
          "before" : null
       },
       "dateofbirth" : {
          "after" : "",
          "before" : null
       },
       "debarred" : {
          "after" : "",
          "before" : null
       },
       "flags" : {
          "after" : "",
          "before" : null
       },
       "gonenoaddress" : {
          "after" : "",
          "before" : null
       },
       "lost" : {
          "after" : "",
          "before" : null
       },
       "password_expiration_date" : {
          "after" : "",
          "before" : null
       },
       "sms_provider_id" : {
          "after" : "",
          "before" : null
       }
    }
    
    This can mean a lot of useless logging in sites that do automated imports
    
    Test Plan:
    1) Enable 'BorrowersLog' system preference
    2) Import the borrowers file attach do this bug report file, matchig on cardnuber, and overwriting
       Contents of the borrowers file are :
    surname,firstname,branchcode,categorycode,cardnumber,dateenrolled,patron_attributes,lastseen
    Acosta,Ednb,CPL,PT,23529001000463,02/01/2013,,
    3) Check the logs, note the modification of columns that have no date
    4) Import the file again with the same settings
    5) Note the new action log
    6) Apply this patch
    7) Restart all the things!
    8) Import the file again with the same settings
    9) Note no new action log was created!
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 10eb5e46a02c73ed17ea4c818d5dc22835288311
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Mar 29 08:23:57 2024 +0000

    Bug 36368: (QA follow-up) Remove unneeded line
    
    As Emmy stated on comment9, this line is indeed unneeded (and wrong).
    A successful cud-insert/cud-save does not come here.
    And it is set for add_form, edit_form and duplicate later on.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit dac285957ddda4d2d865c3a72441fa599301548a
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Wed Mar 20 15:33:21 2024 +0200

    Bug 36368: Declare template param "op" after variable $op is set
    
    If an error occurs while adding new patron, after fixing the error and
    hitting save, patron entry page reloads to "Modify patron" section
    and error "Patron not found. Return to search" is displayed. But no
    patron is saved.
    
    This happens because we declare template param op too early in the
    code and it receives value "cud-insert" instead of "add_form" as it should.
    
    To test:
    1. Add new patron and cause an error (wrong age etc.).
    2. Attempt to save patron, error message is displayed.
    3. Fix your errors and attempt to save again.
    => Error message "Patron not found. Return to search" is displayed and new
    patron is not saved to database.
    4. Apply this patch.
    5. Repeat steps from 1 to 3.
    => Saving patron should now work.
    => To be save, test if modifying patron also works as it should.
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f8665c8d55b4526f6f21f3b7b9c80c8e7ca4e624
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Feb 9 08:55:35 2024 -0100

    Bug 34886: Comment failing tests
    
    These tests highlight the fact that the 'place hold' button visibility in the
    search results page **does not** match the 'place hold' button visibility in
    the detail page, given the same conditions.
    Since that this is a known behavior, these tests should be commented out as they
    are failing by design.
    
    prove t/db_dependent/selenium/opac_holds.t
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ae44fd188951d1710b26554f4aa9a492b03a2aa2
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Mar 22 10:23:15 2024 +0000

    Bug 34886: (QA follow-up) chmod, remove POD
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3758a8c05e05b14360560a3e351439e2c4c0364c
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Feb 1 14:42:12 2024 -0100

    Bug 34886: Add selenium tests
    
    Tests added to cover different use cases and combinations of circulation rules values for authenticated and unauthenticated users
    At the moment, 2 tests are failing, documented on the [DO NOT PUSH] commit.
    These 2 failing tests fail for the search results page but pass on the detail page counterpart. Ideally they should match, for consistency sake.
    But this may be the use case "details page should be more correct, results page is always an approximation" mentioned by Nick.
    
    More test combinations may be added in the future.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d134dbf4f11f8ed091c80eeae70d696f741c7376
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 28 13:14:54 2023 +0000

    Bug 34886: Adjust other opac detail scripts
    
    Same chanegs as before, but for MARC and ISBD details pages
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0d4f520761cead905357892f54fa33a8cb24b827
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 28 12:27:21 2023 +0000

    Bug 34886: Adjust holdability checks on opac details page
    
    This patch tries to simplify some of the logic here to match that on the search results. When we don't have a patron, we fallback to determining if an item can be held buy determining whether there are any items that don't have holds disallowed at the all libraries level. We also remove items with non-holdable statuses like withdrawn etc (and check some system preferences)
    
    If we don't have a patron, then we are done, however, if we do, then we need to check each item against the policies related to that patron.
    
    This patch also removes two checks at the end:
    CountItemsIssued($biblionumber)
    $biblio->has_items_waiting_or_intransit
    
    These seem to be from bug 4319 - however, those rules are checked by IsAvailableForItemLevelRequest and are only relevant when we have a patron. These checks essentially assumed 'onshelfholds' policy of 'If any unavailable' For consistency sake I think we should follow the same logic as the results page.
    
    To test:
    1 - Find a record with two items, of different types, set a 'Default checkout, hold and return policy' of 'No holds allowed'
    2 - Search opac, not logged in, and verify neither the results page or details page shows the place hold button
    3 - Delete that rule, make both items withdrawn
    4 - Search opac, not logged in, and verify neither the results page or details page shows the place hold button
    5 - Mark one item as not withdrawn
    6 - Search opac, not logged in, and verify both the results page or details page shows the place hold button
    7 - Log in to opac
    8 - Search opac, logged in, and verify both the results page or details page shows the place hold button
    9 - Place an 'On shelf holds policy' rule for that patron category of 'If any unavailable'
    10 - Search opac, logged in, and verify the results and details page shows the place hold button
    11 - Set the other item to not withdrawn
    12 - Search opac, logged in, and verify the results page shows the place hold button, but details does not
    13 - Try various other scenarios - details page should be more correct, results page is always an approximation
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 70abef49cd15a38dd4e887126c290adb3145fd3d
Author: Victor Grousset <victor@tuxayo.net>
Date:   Thu Mar 28 18:53:16 2024 +0100

    Bug 36418: opac/svc/club: switch content-type to application/json
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 17466e99fe6adb938c1d1994a7908b25331655c1
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Mar 28 15:13:59 2024 +0000

    Bug 36418: Catch more cases where header response should be application/json
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 286240053c518a7b9c07b5287187450fd20740dc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 26 08:41:21 2024 +0100

    Bug 36418: Set header response content type to application/json - svc
    
    We need to set the content type to application/json for the svc scripts
    returning json
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 193b2c80dcd5ce4694a84a2b5e3f590334e349e8
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Mar 25 16:30:51 2024 +0000

    Bug 36418: Explicitly set response to json
    
    To test:
    1. Add some checkouts and load the issues-table
    2. Select 'Check in' checkbox for that item and click "Check in selected items"
    3. The row becomes read and reads "Unable to check in"
    4. Reload the page, the item has actually checked in
    
    5. Try the 'Renew' checkbox and click "Renew selected items"
    6. It just spins and spins.
    7. Reload the page, the item has actually renewed.
    8. APPLY PATCH and restart_all
    9. Try the steps again and this time everything should work properly.
    10. tests these URLs
    http://localhost:8081/cgi-bin/koha/svc/recall
    http://localhost:8080/cgi-bin/koha/svc/club/enroll
    http://localhost:8081/cgi-bin/koha/svc/mana/increment : empty response
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1e6837aec19687e3281a7dfd8a8f440d69e573bf
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 27 08:33:56 2024 +0100

    Bug 36302: Restore passing deferLoading to DT
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 96f7ef4636f29820bd23e95e8f55c725bafd0270
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Nov 16 13:20:58 2023 +0000

    Bug 35346: Update template logic to display 'Essential'
    
    This patch updates the cookie consent template logic to always display
    the 'Accept essential cookies' button and only expose the 'Accept all
    cookies' button when there are additional cookies to accept, i.e. when
    JSConsents is populated.
    
    Test plan
    1) Enable CookieConsent
    2) Note you see 'Accept essential cookies' in both OPAC and Staff client
       until you have accepted them
    3) Add a cookie to ConsentJS
    4) Note that you will now see 'Accept all cookies' as well as the 'Accept
       essential cookies' button.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ce30f8a03189630bef232e05dd023a1bcc52c335
Author: Victor Grousset <victor@tuxayo.net>
Date:   Sun Feb 11 06:34:53 2024 +0100

    Bug 35347: (QA follow-up): swap "essential" and "all" for OPAC too
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ab1598650b5517e8b86d411d0ed4e708d324f6b7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Nov 16 13:14:39 2023 +0000

    Bug 35347: Display 'More information' button regardless of JSConsents
    
    This patch moves the "More informatin" button outside of the JSConsents
    block so that you are able to access the information modal regardless of
    whether you have tracking cookies added to your configuration or not.
    
    Test plan
    1) Enable CookieConsent
    2) Note that the 'More information' button now appears in the footer on
       both staff and opac until you have accepted cookies.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5a03a66453bf71ba3db0e4308ddcc0af4b124c11
Author: Victor Grousset <victor@tuxayo.net>
Date:   Sun Feb 11 07:41:01 2024 +0100

    Bug 34793: (QA follow-up): forgotten 'Cookie consents'=>'Cookies policy'
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 71a41086ef66bc9fc730e19369f24b4c812602df
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Nov 20 08:00:10 2023 +0000

    Bug 34793: (follow-up) Add table classes to popup
    
    This patch adds the appropriate table classes to the Popup html
    customisation block. This ensure we have proper table display formatting
    in the modal on the OPAC.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit be29bb0dc7227e8a398c3c63d4ced4c024750dc8
Author: Aude Charillon <aude.charillon@ptfs-europe.com>
Date:   Fri Nov 17 15:35:58 2023 +0000

    Bug 34793: (follow-up) Rename 'Cookie consents' to 'Cookies policy'
    
    The modal is not always about consent, but rather about displaying the
    libraries cookie policy. It makes sense to update the heading to reflect
    that.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit df8540cadfc133aa684455b5de2e1fe35be65b76
Author: Aude Charillon <aude.charillon@ptfs-europe.com>
Date:   Fri Nov 17 15:30:22 2023 +0000

    Bug 34793: Add default HTML Customisations for cookie information
    
    This patch adds some default html customisation content for the cookie
    consent feature.
    
    Test plan
    1) Run through the installer and pick to import the sample news items
    2) Confirm that after enabling the CookieConsent preference that the
       default content appears in the cookie bar at the bottom of the page
       and in the modal that appears after clicking 'More information'
    
    Mentored-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ac8e66d3c198ca00e653c277653c8ea69486ec87
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Mar 26 09:38:10 2024 +0100

    Bug 35882: (QA follow-up) Fix wrapper parameter (panelgroup_id)
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e233fcf048193c73fbd86c49f58716a995fd6b8e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jan 23 19:32:03 2024 +0000

    Bug 35882: Use template wrapper for accordions: Notices
    
    This patch updates the notices template so that Bootstrap
    accordion markup for the notice edit view is generated by WRAPPERs.
    
    To test, apply the patch and go to Tools -> Notices.
    
    - Edit any notice.
    - The list of message transport types (Email, Print, SMS) should be
      displayed as before: Collapsible panels where clicking the transport
      type heading expands the corresponding information.
    - Confirm that changes to notices are correctly saved.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7cc23bfe1d3e937d6432ca4a0006ee5c65c1044c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jan 23 19:33:33 2024 +0000

    Bug 35883: Use template wrapper for accordions: Table settings administration
    
    This patch updates the table settings administration page so that
    Bootstrap accordion markup is generated by WRAPPERs.
    
    This patch also makes some changes to fix the automatic scroll when a
    table configuration button was clicked.
    
    To test, apply the patch and go to Administration -> Table settings.
    
    - The list of modules should be displayed as before: Collapsible panels
      where clicking the module name heading expands the corresponding
      panel of settings.
    - Test that direct links to configurable tables still work correctly:
      - Go to Administration -> Libraries.
      - Click the "Configure" button at the top of the table of libraries.
      - You should be taken to the table settings page.
        - The "Administration" panel should be expanded by default.
        - You should be scrolled down automatically to the "Libraries"
          table.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2c4f7df38ee2850135b1c315483b733942d216d7
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jan 23 19:22:12 2024 +0000

    Bug 35880: Use template wrapper for accordions: Patrons requesting modifications
    
    This patch updates the patrons requesting modification page so that
    Bootstrap accordion markup is generated by WRAPPERs.
    
    To test, apply the patch and make sure you have the OPACPatronDetails
    system preference enabled.
    
    - Create at least two different patron modification requests:
      - Log in to the OPAC using two different patron accounts, each time
        following the sidebar link for "Personal details."
      - Make some changes to the patron records and submit them.
    - In the staff interface, from the home page, click the "Patrons
      requesting modifications" link.
    - You should see the list of updates in the same format as before:
      Collapsible panels where clicking the patron name heading expands the
      corresponding information.
    - View the detail or checkout page for one of your updated patrons.
      - Click the "Review pending modifications" link.
      - The modifications page should open with that patron's information
        exapanded.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 17132319d36828e0e425af0215e4c717e5224656
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Mar 22 16:13:34 2024 +0000

    Bug 35877: (follow-up) Correct accordion wrapper parameter name
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a11ba52f2e057ab3b10da6c90612586805ab3dba
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jan 23 18:54:02 2024 +0000

    Bug 35877: Use template wrapper to build Bootstrap accordion components
    
    This patch adds Template::Toolkit WRAPPER blocks to html_helpers.inc so
    that templates can build Bootstrap accordion components while keeping
    the Bootstrap structural markup separate.
    
    Each individual component of a Bootstrap accordion interface is defined:
    
    - Group container
      - Collapsible item
        - Item heading
        - Item content
    
    Included is a usage example:
    
        [ WRAPPER accordion id="accordion container id" ]
            [ WRAPPER accordion_item ]
                [ WRAPPER accordion_heading panel_id = "panel id" ]
                    [Clickable panel heading ]
                [ END ]
                [ WRAPPER accordion_panel panel_id = "panel id" ]
                    [Expanding content panel]
                [ END ]
            [ END ]
        [ END ]
    
    To test, apply this patch and one of the dependent patches.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5783d01af00a5bf21527c81a05252d99a2a14e9a
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Mon Mar 18 16:07:02 2024 +0100

    Bug 36347: Avoid return claims table being loaded twice
    
    The issue is caused by these lines in circulation.js:
    
    $("#finesholdsissues a[data-toggle='tab']").on("shown.bs.tab", function(e){
        $(this).click();
    });
    
    When the user clicks on a hidden tab, 'shown.bs.tab' is triggered and
    then another click event is triggered. And because the table was loaded
    on tab click, it was loaded twice.
    Visually it could have caused the rows to be duplicated (it was random,
    probably due to timing, network latency, ...)
    
    I don't know why we need to trigger a click in this case, but removing
    this will probably break something else, so the fix here is to load the
    table on 'shown.bs.tab' event instead of 'click'
    
    This patch also contains a small fix in refreshReturnClaimsTable which
    was reloading the table right after the table initialization.
    
    Test plan:
    1. Check out an item, and in the checkouts table, click "Claim returned"
    2. Open the network tab of your browser's developer tools
    3. Click on the "Claims" tab, verify that only one call is made to
       svc/return_claims
    4. Verify that the claims table is displayed correctly
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6be8cd83025578962800edfbd4f4d1bdf44fa9fc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 26 08:36:40 2024 +0100

    Bug 36426: Fix 'Set request as pending'
    
    From
      commit cb64ea0c5440f5a7cf7837caafd487f35884430d
      Bug 36084: svc - article_request - POC
    
    It's missing data-ar-id on .ar-set-pending-request
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 27a651388dacc6faedef2c7463cfb580f0a79bbe
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Feb 8 13:57:30 2024 +0000

    Bug 36035: Wrong text colour in addorderiso2709.pl
    
    This patch updates the "Order staged MARC records" page so that the
    class which is added upon selection is more unique to avoid a collision
    with some default DataTables styles. These classes are used in
    JavaScript selectors, not for visual style.
    
    The patch also adds some custom CSS variables to global.scss to override
    the defaults for the DataTables "selected" style, in case this issue
    crops up again.
    
    To test, apply the patch and rebuild the staff interface CSS. Follow the
    test plan from the bug report:
    
    1) In system preferences, click Search and then select the Acquisitions
       option from the left hand menu
    2) Paste the following into MarcFieldsToOrder
    
    price: 975$p
    quantity: 975$q
    budget_code: 975$h
    
    3) Paste the following into MarcItemFieldsToOrder
    
    homebranch: 949$a
    holdingbranch: 949$b
    itype: 949$y
    nonpublic_note: 949$x
    public_note: 949$z
    loc: 949$c
    ccode: 949$8
    notforloan: 949$7
    uri: 949$u
    copyno: 949$t
    price: 949$g
    replacementprice: 949$v
    itemcallnumber: 949$o
    quantity: 949$k
    budget_code: 949$l
    
    4) Save the sysprefs
    5) Navigate to acquisitions and go into a basket
    6) Click "Add to basket" and select "From a new file"
    7) Download the file attached to this bug
    8) Import the file and when the job is complete click "Add staged files
       to basket"
    9) Click the checkbox next to the record to display the items.
       - The expanded form should look correct.
    10) Add one or more items to the order and confirm that submitting the
        form works correctly.
    
    To test the new default "selected" DataTables style, view a page with a
    DataTable, e.g. Administration -> Libraries.
    
    - Right-click on one of the table rows and choose "Inspect"
    - Click the table row element, e.g. '<tr class="odd">'
    - Double-click the class name and replace it with "selected."
    - The row you inspected should now have a pale green background and text
      colors should remain the same.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 286fc8e9833d55d694955849e4050d28a4b053a6
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Mar 25 10:51:13 2024 +0000

    Bug 35107: (QA follow-up) Use TT filter
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a0433c98fa1d0e89f31cc3af6b37261122dee242
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Nov 27 14:31:59 2023 +0000

    Bug 35107: Add tests
    
    prove t/db_dependent/Koha/Illrequest.t
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit be745a55d99ee2687a43d1368071782f266e5536
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Nov 27 14:31:30 2023 +0000

    Bug 35107: (QA follow-up) Use extended_attributes
    
    Addressing the warning:
    illrequestattributes is DEPRECATED in favor of extended_attributes
    
    No functional behaviour change here
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 05f89bc89f484492ba258ba40382db8856c9cc81
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Oct 19 13:53:29 2023 +0000

    Bug 35107: Show type disclaimer value and date in request details
    
    Test plan, k-t-d:
    1) Install FreeForm and BLDSS backends, run:
    bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev-plus.sh)
    2) Set ILLModuleDisclaimerByType system preference , visit:
    /cgi-bin/koha/admin/preferences.pl?tab=interlibrary_loans#interlibrary_loans_Workflow
    3) Copy the example code, click the 'Click to edit' link to open the text area, and paste the example yaml:
    all:
     text: |
      <h2>HTML title</h2>
      <p>This is an HTML paragraph</p>
      <p>This is another HTML paragraph</p>
     av_category_code: YES_NO
    article:
     text: copyright text for all article type requests
     av_category_code: YES_NO
     bypass: 1
    4) Create a new FreeForm request, visit:
    /cgi-bin/koha/ill/ill-requests.pl?method=create&backend=FreeForm
    5) Set type 'Book', put'9780822370451' in ISBN, put '42' in the cardnumber, and pick a library
    6) You should now be in the type disclaimer stage, click 'Submit'
    7) Notice the disclaimer value and date are displayed under 'Details from supplier'
    8) Click the top 'Switch provider' button and pick BLDSS
    9) You should get one result, click the 'Request BLL01018665793' link to finish the migration
    10) You should now be in the ILL table, click the request that was just migrated to BLDSS
    11) Notice the type disclaimer information is no longer visible
    12) Apply patch, restart plack: koha-plack --restart kohadev
    13) Refresh the BLDSS request, the information should now be visible in the 'Request details' section
    
    Signed-off-by: Richard Bridgen <richard.bridgen@nhs.net>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 17b134fcb982768541b66f327ba301e06a727337
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 22 08:41:33 2024 +0100

    Bug 36392: (bug 34219 follow-up) Fix getAll for vendors - ERM
    
    In commit f1078daf8f496e1b4234acf766578c511ca8aad1
       Bug 34219: Allow getAll to receive additional URL parameters
    
    We needed to call getAll instead of get to fetch all the vendors
    
    Test plan:
    Have more than 20 vendors and create/edit an agreement.
    Notice that the vendor list contains all the vendors
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Matthias Le Gac <matthias.le-gac@inlibro.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 67b8ce9220c0ee265db51104c84471e3d4e42882
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Mar 25 11:56:15 2024 +0000

    Bug 35536: (follow-up) Fix Plugins.t for D10
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cd5ab302b194ecb99aae4bb9ca0df8b94e3ee7c9
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Mar 25 08:20:09 2024 +0000

    Bug 35548: (follow-up) Fix mock statement for D10
    
    Test plan: Run t/db_dependent/Koha/Plugins/KitchenSink.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2172c37837c72024d6f8481b434779ebf56a98fc
Author: Victor Grousset <victor@tuxayo.net>
Date:   Thu Feb 8 04:56:47 2024 +0100

    Bug 31286: (QA follow-up): tidy up code
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fd70ee6a9411d9f320c6f609415d74dd38a0116f
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Aug 2 15:17:25 2022 -1000

    Bug 31286: Embed see-from headings into bibliographic records export
    
    In misc/export_records.pl add an option to add see-from headings (from authorities 4xx) into bibliographic records export.
    Like it is done during record indexing.
    
    Test plan :
    1) Choose a biblio record having a field (for example 650) linked to an authority with a see-form.
    2) Export this record without see-from headings :
       misc/export_records.pl --starting_biblionumber=X --ending_biblionumber=X --filename /tmp/record_without.xml --format xml
    3) Export this record with see-from headings :
       misc/export_records.pl --starting_biblionumber=X --ending_biblionumber=X --filename /tmp/record_with.xml --format xml --embed_see_from_headings
    4) Compare /tmp/record_without.xml and /tmp/record_with.xml
    => you should see two 650, one with main heading and one with see-from heading
    
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bc56fb9a281cb3ec3d9e56689c88b8ee4cb976a7
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Mar 25 08:46:56 2024 +0000

    Bug 23208: DBRev 23.12.00.013
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 46278298dabeff920dfd666b216fd6b7fadb8704
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Jan 26 18:47:50 2024 +0000

    Bug 23208: perltidy
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f16fe67426b1cc3992241b646f27c2df5196cff9
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Jan 26 18:43:06 2024 +0000

    Bug 23208: Add ability to set a default hold ratio value
    
    To test:
    1. APPLY PATCH, updatedatebase, restart_all
    2. Search for the system preference 'HoldRatioDefault'.
    3. It should be set to 3. Change the value to something else.
    4. Load the report at 'circ/reserveratios.pl'. Circulation > Hold ratios
    5. The default value should be the value you set in the new system preference.
    6. Run the report with the default value and make sure it works.
    7. Change the value and run the report. The new value should be retained.
    8. Leave the page and come back. Again the default value from the new system preference should be set.
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a08362d5ab20a995eb859692bd6bae1e3e4c9118
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Jan 26 18:42:14 2024 +0000

    Bug 23208: Add system preference HoldRatioDefault
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7552b73503369810fc6873919a0017556cc2e0fe
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Fri Feb 2 15:22:14 2024 -0500

    Bug 35653: (QA follow-up) Perltidy
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 31986217872eba561ed8600a0bc2bc5e03e3743e
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Dec 27 17:35:31 2023 +0000

    Bug 35653: Log import_patrons.pl info to action logs
    
    To test:
    1. APPLY PATCH
    2. Create a CSV file with a few lines that contain at least firstname, surname, cardnumber
    3. Turn on "CronjobLog".
    4. Run the import patron script. I did this: perl /kohadevbox/koha/misc/import_patrons.pl --file 'test1.csv' --matchpoint cardnumber -c
    5. Check the action logs for cronjobs.
    6. You should see info. about the import patron script.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 353f510c146cfcffc0bb488a8411755f111e5711
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 11 14:33:25 2024 -0300

    Bug 34943: (QA follow-up) Use `before_biblio_action` and an `action` param
    
    This patch harmonizes the hook name and parameters with the rest of the
    codebase.
    
    To test:
    1. Apply this patch
    2. Run:
       $ ktd --shell
      k$ qa
    => SUCCESS: All looks green, and tests still pass (i.e. they were
    correctly adjusted to the new schema).
    3. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e78b7bdbe5c10e3d4a568a4560b28e46ab71a02f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Dec 8 17:24:35 2023 -0300

    Bug 34943: Implement `before_biblio_metadata_store` plugin hook
    
    This patch implements a hook allowing record modification right before
    they are written on the DB. The idea is that a plugin could be used to
    add machine-generated fields/subfields.
    
    To test:
    1. Apply the unit tests patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/Koha/Plugins/Biblio_and_Items_plugin_hooks.t
    => FAIL: Tests fail! The hook is not implemented so the desired results
    don't appear (added fields/subfields).
    3. Apply this patch
    4. Repeat 2
    => SUCCESS: It works!
    5. Run:
      k$ qa -c 2
    => SUCCESS: All green!
    6. Sign off :-D
    
    Sponsored-by: Theke Solutions
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ddb2ab7a9fb7e91e10301158fe68d3dfdfae5fcc
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Dec 8 17:23:44 2023 -0300

    Bug 34943: Unit tests
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e5d1fb041dd6012eb76a2a2fefb98a2f28f425ee
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Fri Jan 26 09:48:34 2024 -0500

    Bug 35457: Move SerialsDefaultEMailAddress and SerialsDefaultReplyTo to serials preferences
    
    This patch moved the SerialsDefaultEMailAddress system preference and
    the SerialsDefaultReplyTo system preference to the Serials preferences.
    
    To test:
    1. Apply patch
    2. Go to Administration > System preferences > Acquisitions
       --> SerialsDefaultEMailAddress and SerialsDefaultReplyTo should not
       be there
    3. Go to Administration > System preferences > Serials
       --> There should be a new section called "Notifications" with
       the two system preferences
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit faee93aef666fa04956e14969b069da8874d23c8
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Feb 8 10:42:53 2024 +0000

    Bug 36030: acqui/basket: Do not place hold on deleted biblio
    
    Trivial fix.
    
    Test plan:
    Find a deleted biblio record in ACQ (in active orders part) and
    verify that there is no Place hold option on that row.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 49a7950f38729c54196fbb839a170ce1f958ae6d
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed Feb 21 15:02:17 2024 -0500

    Bug 34663: Errors in UNIMARC default framework
    
    This patch corrects the default UNIMARC bibliographic framework to
    place all the 4XX subfields in tab 4.
    
    To test:
    1. Go to Administration > MARC Bibliographic framework test
       --> There should be errors indicating subfields from 4XX fields
           are in tabs 3 and 4
    2. Apply patch and reset_all
    3. Redo step 1
       --> It should now say that all subfields for each tag are in the
           same tab (or ignored)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 93d3b0b0f75e1d7377ea31c72118ea1376f67b96
Author: Brendan Lawlor <blawlor@clamsnet.org>
Date:   Fri Mar 22 17:25:20 2024 +0000

    Bug 36371: Check if patron attribute is defined in circ-menu.inc
    
    This patch changes the conditional that determines if a patron attribute is displayed in the patron brief info. Instead of checking the value of the attribute we should check if the attribute is defined.
    
    To test:
    1. Create a patron attribute, eg. party_mode, check 'display in patron's brief info' and tie to the YES_NO authorised value.
    2. Find a patron and set your attribute to Yes
    3. Confirm you see the attribute and its value both in the "Additional attributes and identifiers" section of the patron detail page and in the patron brief info area
    4. Set your attribute to No
    5. Confirm you see the attribute and its value in "Additional attributes and identifiers" but it no longer shows in the brief info
    6. Apply patch and restart_all
    7. Notice that your attribute now displays in the brief info, such as Party mode: No
    8. Set the attribute to the first empty option
    9. Check the patron record brief info to confirm that the attribute does not display when the value is empty.
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3b37e9e454d2e8cf961e8614f85512178f42764e
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Mar 25 08:29:24 2024 +0000

    Bug 35850: Adjust tests to changed IDs
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d0c8c8796c84eb8e950b0b24162a4baec8e89dca
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 7 14:03:00 2023 +0000

    Bug 35279: Add fallback to print for 'Send welcome email'
    
    We update the 'Send welcome email' button to read 'Send welcome notice'
    and add a fallback to enqueue a notice for print when the user doesn't
    have an email address defined.
    
    Test plan
    1) Apply patch
    2) Use the 'Henry Acevedo' user who doesn't yet have a valid email
       address.
    3) Click the 'Send welcome notice' button available from the 'more'
       menu.
    4) Note that no notice is queued at all.
    5) Copy the content of the 'email' WELCOME notice into the 'print'
       template.
    5) Repeat step 3.
    6) Note that this time a 'print' type notice is queued for the user.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2ad4c93cdcfb5605bee4165b7d6037f8587c7d7c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jan 26 12:44:21 2024 +0000

    Bug 30554: Embelished MARC21 XSLT example
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 01e2a6d983c272120ec0579536e23eed2b046a62
Author: Jérémy Breuillard <jeremy.breuillard@biblibre.com>
Date:   Fri Apr 15 16:51:14 2022 +0200

    Bug 30554: Use XSLT (if enabled) in authority search cataloguing plugin
    
    Test plan:
    1. Set AuthorityXSLTResultsDisplay to a valid XSL file (see bug 30554
       attachments, there is an example XSL file)
    2. Go to the bibliographic record editor (edit an existing one or create
       a new one)
    3. Find a field linked to authorities and open the plugin
    4. Start a search and verify that the results are displayed using the
       XSLT output (if using the example file it should be a link saying
       "Authority #<authid>")
    
    Sponsored-by: Écoles nationales supérieure d'architecture (ENSA)
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1412f6c65b011ef79f955f75c812e3f7f1a9fce0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Dec 20 19:06:57 2023 +0000

    Bug 35621: Map ÿ to y for searching (Non-ICU)
    
    To test:
    1 - Find or add a record with title: Chevilly-Larue, L'Haÿ-les-Roses, Fresnes, Rungis [par] Sté éditions et de publicité L.F.B.
    2 - Search for 'L'Hay-les-Roses'
    3 - No results
    4 - Apply patch, copy the file:
        sudo cp /kohadevbox/koha/etc/zebradb/etc/word-phrase-utf.chr /etc/koha/zebradb/etc/word-phrase-utf.chr
    5 - Restart all, Reindex
        restart_all
        sudo koha-rebuild-zebra -v -f kohadev
    6 - Search again
    7 - Success!
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 248544e29219541cccc318684d8353dbb2bf1f16
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 19 12:11:43 2024 +0000

    Bug 35850: Use template wrapper for tabs: Header search forms
    
    This patch updates search header includes so that the tabs use WRAPPER
    to build markup.
    
    To test, apply the patch rebuild the staff interface CSS.
    
    Test at least one page which uses each updated search include. Search
    header tabs should look correct and work correctly.
    
    - Acquisitions
      - Suggestions
    - Administration
        - Budgets and funds
        - Cities
        - Currencies
        - Desks
        - Patron categories
        - System preferences
        - Z39.50
    - Advanced search
    - Authorities
    - Bibliographic detail page
    - Cataloging home page
    - Check in
    - Check out
    - Acquisitions -> Vendor -> Contracts
    - ERM
    - Staff interface home page
    - Serials
    - Tool -> Notices
    
    Signed-off-by: Martin AUBEUT <martin.aubeut@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a64a24bfee8c9566431e51ff9ac9011768870409
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Dec 14 22:39:00 2023 +0000

    Bug 35576: Add classes to hq-callnumber column in holds report
    
    To test:
    1. APPLY PATCH
    2. Make sure you have item.itemcallnumber data.
    3. Have some holds and build the holds queue: perl /kohadevbox/koha/misc/cronjobs/holds/build_holds_queue.pl
    4. To make testing easier add the following to IntranetUserCSS:
        .hq-callnumber .location { background: lightblue; }
        .hq-callnumber .itemcallnumber { background: lightgoldenrodyellow; }
    5. Run the holds queue and notice that the data in the 'Call number' column has a lightblue (location) and lightgoldenrodyellow (call number) background.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ce4e4ba516a568898d51309a2d5e4967c596f978
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Dec 13 20:58:01 2023 +0000

    Bug 35564: Add homebranch to the holds queue report
    
    To test:
    1 - Place some holds in your system
    2 - perl misc/cronjobs/holds/build_holdsqueue.pl
    3 - View the holds queue
    4 - Note there is no holding branch column
    5 - APPLY PATCH
    6 - Reload and try again
    7 - Note the column is not there
    8 - Click column setting gear to expose the column
    9 - Go to Admin -> Table settings and make sure you can expose the column via Table settings
    
    Signed-off-by: Michelle <mspinney@clamsnet.org>
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fcbb5fceb8d759eecfbc13b88397c205f3a66eb3
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Tue Dec 5 14:57:58 2023 +0000

    Bug 35034: Add parameter that links titles to their records
    
    To recreate:
    1.  Select two items from the catalog and begin a merge.
    2. Notice that the title of the items, their biblionumber and a
       hyperlink to their MARC record is available.
    3. Apply the patch and refresh the page. The biblionumber for each title
       is now hyperlinked and leads to the item’s bib records.
    4. Sign off and have a great day :)
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4a4032745293af7a3fec97c44c61b11c94e0edf7
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Nov 29 23:19:12 2023 +0000

    Bug 35444: Add hidden span with information about the loggedinuser categorycode
    
    To test:
    1. APPLY PATCH
    2. Log into the staff interface and use the browser's dev tools to look
       for the HTML class 'loggedincategorycode'. It should match the
       current logged in user's categorycode.
    3. You could also use a console.log like so:
    
    console.log( $('.loggedincategorycode').text() );
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4d351d2c6d2452462732a2cce71565ba45ec3c05
Author: Michael Hafen <michael.hafen@washk12.org>
Date:   Tue Feb 20 14:18:59 2024 -0700

    Bug 36139: Bug 35518 Follow-up to fix AutoSwitchPatron - clear variables
    
    Bug 35518 moved some code blocks to after the call to
    get_user_and_template() so that userenv would be populated before it
    was needed.  This caused a couple variables to be set before the
    AutoSwitchPatron block could prevent them from being set.  Which broke
    AutoSwitchPatron functionality.  This clears two variable so that
    AuthSwitchPatron works again.
    
    The AutoSwitchPatron clears the $borrowernumber variable to switch
    patrons. With the AuthSwitchPatron block moved, the $patron variable
    still gets set, and the patron doesn't get switched.  The clears the
    $patron variable too.
    
    Also clear the barcode list.
    The AutoSwitchPatron block got moved, and now the @$barcodes variable
    gets filled and not cleared.  Leading to a 'Barcode not found' error
    when the patron is auto switched.
    
    Test plan:
    1. Ensure AutoSwitchPatron is turned on.
    2. Select the card number of two patron accounts.
    3. Find the first patron in circulation.
    4. Enter the second patron's card number in the item barcode field to
       switch patrons.
    5. Observe the error about item barcode not existing, and the patron did
       not switch.
    6. Apply patch and restart services.
    7. Enter the second patron's card number in the item barcode field
       again.
    8. Observe that the patron was switched with no error about an invalid
       barcode.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b7ad3364cbf8778507f7d0dbd2a0199cbe7c0cdd
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 22 13:54:03 2024 +0000

    Bug 36331: (follow-up) Ignore non_priority holds when checking renewability
    
    When changing the fetch of holds, the check for non-priority was lost - added a loop to pull those out
    so the totals and checks are correct
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Tidied (tcohen)
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 158bcd03e6120f825c20af60e60442f2e596af6c
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Mar 22 13:51:51 2024 +0000

    Bug 35386: DBRev 23.12.00.012
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c3104f4f1cb8ed1191e83ade5e9e4b55f50b2553
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Nov 27 16:31:41 2023 +0000

    Bug 35386: Add RESTAPIRenewalBranch system preference
    
    This patch adds a new system prefernce, RESTAPIRenewalBranch, analogous to the existing OpacRenewalBranch system preference.
    
    The preference allows choosing how the renewal branch is recorded in the statistics table.
    In order ot preserve existing behaviour, the default is to use the api user's branch.
    
    To test:
    1 - Checkout some items to a patron
    2 - Add an API user account with circulation permissions and a different homebranch
    3 - POST a renewal to: http://localhost:8080/api/v1/checkouts/{checkout_id}/renewal
    4 - Check statistics table and confirm the api users branch was used
    5 - Apply patches, restart all
    6 - Repeat API renewal, confirm same branch used
    7 - Change the RESTAPIRenewal syspref
    8 - Repeat API renewal and confirm specified branch is used
    9 - Confirm the syspref works for all settings
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5f6c0f0c3e896f72c086bfacec1501ee3d72fbe0
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Dec 10 15:45:28 2023 +0000

    Bug 35531: Add context for translating gender option "Other"
    
    To test:
    * Apply patch
    * Verify the option "Other" for gender is correctly displayed when:
      * Editing a patron record in the staff interface
      * Viewing the 'Details' tab of a patron in staff interface
      * Triggering a "duplicate" patron warning and looking at the details
        of the existing patron record
      * Self registering a patron in the OPAC
      * Viewing 'Personal details' tab in the OPAC for a registered patron
    * If you are using ktd, run: gulp po:update --lang de-DE
    * Verify string "gender" appears with the occurences of "Other"and
      "Other:" in
      misc/translator/Koha-messages.pot
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 39ff256231f8cbcf250885ba608ba3304aed825d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 18 16:00:45 2023 +0000

    Bug 35097: Use country-list.inc to display choices for UsageStatsCountry preference
    
    This patch updates the system preferences interface so that it uses
    country-list.inc for the selection of countries for the
    UsageStatsCountry preference.
    
    To test, apply the patch and restart services.
    
    - Go to Administration -> System preferences and search for
      "UsageStatsCountry"
    - The dropdown of countries should look correct.
    - Select a country, save, and confirm that your choice is saved
      correctly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit faee84f3d4afaab256774e8fae33c32a7ced0157
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Nov 13 14:26:37 2023 +0000

    Bug 35316: Fix column settings for holds history
    
    Test plan:
    Verify that you are able to toggle the column on the holdshistory
    form.
    Verify that you are able to hide the column via Table settings
    by default.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 74550c754cd86e5bf367a01d50adc9f3d089fc41
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Nov 13 10:07:16 2023 +0000

    Bug 35316: Add callnumber to holdshistory
    
    Test plan:
    Verify that column Call number now shows on the form.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c9c2331ba75c9413813b403cd39f311bd3ad23ae
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 12 11:03:43 2024 +0100

    Bug 36012: Extend cypress's requestTimeout value
    
    default to 5000 but tests are failing because of slow Jenkins's nodes.
    We could try and extend to 10000 (10s) and see if it gets better.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Tests pass with and without the patch on my computer. Tested with:
    
    yarn cypress run --env KOHA_USER=koha,KOHA_PASS=koha \
            --spec t/cypress/integration/ERM/Agreements_spec.ts
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7054edf183dade99e6819b6c063dc34ccaf25a8c
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Mon Oct 23 17:49:06 2023 +0200

    Bug 35133: Don't lazily define accessor methods when invoked through SUPER
    
    To test:
      1) Apply Bug 32476
      2) Run tests in t/db_dependent/Patrons.t
      3) This should produce multiple "Subroutine Koha::Patron::SUPER::dateexpiry redefined at ..." warnings
      4) Apply patch
      5) Run tests in t/db_dependent/Patrons.t again
      6) The warnings in 3) should now no longer appear
    
    Signed-off-by: matthias le gac <matthias@babel.inlibro.net>
    Signed-off-by: Phan Tung Bui <phan-tung.bui@inlibro.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c529e53b89eb2478d84254fcbf7dccee53a934e0
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Aug 31 08:57:20 2023 +0000

    Bug 34431: (QA follow-up) Fix duplicate backend options
    
    Prevent adding backend option if the option already exists
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ec28e4c958d9cc7cca0b2804e9fe51c7070f1b0a
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Aug 7 10:04:25 2023 +0000

    Bug 34431: Add status and status_alias filters to clear
    
    Signed-off-by: Stephen Graham <s.graham4@herts.ac.uk>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 57367be7a0a733352b443ead5e7ce62a587f65ba
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Aug 4 16:06:40 2023 +0000

    Bug 34431: Update tests
    
    Signed-off-by: Stephen Graham <s.graham4@herts.ac.uk>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9d6982348601b0d6c44a73cccc2d89de10bb6f6b
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Aug 4 16:06:11 2023 +0000

    Bug 34431: Add a status_alias filter input, if any status_alias exist
    
    This patch also makes it so that the status input filter is enabled by default, and shows all existing statuses by default, or all existing statuses for a specific backend, if and when selected.
    
    Signed-off-by: Stephen Graham <s.graham4@herts.ac.uk>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 48c6fae7bad55d13301ad607c0ab237433643b47
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Aug 4 16:02:40 2023 +0000

    Bug 34431: Show both status and status_alias - if exists - in table column
    
    Signed-off-by: Stephen Graham <s.graham4@herts.ac.uk>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f08d94133dba6bee5801bb7296955fff14c54572
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Aug 4 16:01:33 2023 +0000

    Bug 34431: Allow for x-koha-embed in ill/backends endpoint
    
    Signed-off-by: Stephen Graham <s.graham4@herts.ac.uk>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 891700d6405783f694040757e92bebb49e1c1154
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Jul 28 09:59:08 2023 +0000

    Bug 34431: Add 'type' to existing_statuses method
    
    Signed-off-by: Stephen Graham <s.graham4@herts.ac.uk>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 80bd0a19dd8cd018b595c743df6e7ac5a518e862
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Mar 22 13:06:29 2024 +0000

    Bug 35536: (follow-up) Add missing koha_object(s)_class definitions
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 72fae3a9c9f85877ffe8162fc15442e3c1fed940
Author: Matthias Meusburger <matthias.meusburger@biblibre.com>
Date:   Tue Sep 10 16:59:30 2019 +0200

    Bug 25813: Enhance patron expiration in SIP display
    
     Currently, the patron information returned by SIP only shows
     "PATRON EXPIRED" when the patron card has expired.
    
     This patch makes the display more consistant with the Opac display
     and also complies with the NotifyBorrowerDeparture system preference.
    
     Test plan:
    
      - apply the patch
    
      - set NotifyBorrowerDeparture to 0
    
      - check that nothing is ever displayed about the card expiration
    
      - set NotifyBorrowerDeparture to a value greater than 0
    
      - check that the following message will be displayed for a card that will
        expire within NotifyBorrowerDeparture days:
        "Your card will expire on {correctly formatted date}"
    
      - check that the following message will be displayed for a card that has
        expired:
        "Your account has expired as of {correctly formatted date}"
    
     You can use src/C4/SIP/interactive_patron_dump.pl for easier testing.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 41a918975a028add5390c121750d8a91078701da
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Mar 22 12:53:26 2024 +0000

    Bug 35793: Remove now obsolete unit test file
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit de91b2e5d9dbff8c43a5090828397583bd397dc1
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Jan 30 15:13:47 2024 +0100

    Bug 35943: Fix group/subgroup filtering of saved reports
    
    Use code instead of name for filtering and escape regexp special
    characters.
    
    This patch also disables datatables' smart filtering as it is not
    recommended to use with regexp filtering
    
    https://datatables.net/reference/api/search()
    
    Test plan:
    1. Create a report in a group named "Foo + Bar" and in a subgroup named
       "Baz + Quux"
    2. Create other reports in group "Foo + Bar" but in other subgroups, as
       well as in other groups. This is useful to see the effect of
       filtering
    3. Go to the saved reports page and verify that navigating between tabs
       have the desired result. Same for the subgroup select
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b23996ee7a3c232223989d01cce98f3419690f82
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 12 14:42:46 2024 +0100

    Bug 35790: Remove Koha::Template::Plugin::Biblio::CanArticleRequest
    
    It is no longer used anywhere.
    
    Test plan:
      % git grep CanArticleRequest
    should not return any results
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b19ff6f4c7d00f150a1cb04c7efd17b8d1029922
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 12 15:39:35 2024 +0100

    Bug 35793: Remove Koha::Template::Plugin::Cache
    
    Introduced in 2011 by bug 7387 but has never been used.
    Removing it.
    
    Test plan:
     git grep Cache **/*.tt **/*.inc
    should not return relevant results.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ea80d2f140fd79d56c1b439c3bce1671ea76d63e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 12 14:34:18 2024 +0100

    Bug 35789: Remove Koha::Template::Plugin::Biblio::ArticleRequestsActiveCount
    
    Can be replaced with biblio.article_requests.filter_by_current.count
    
    Test plan:
    Turn on article requests (syspref + circ rule)
    Request an article (detail page of a bib record)
    On the left you see "Article requests" tab with the number of current
    article requests.
    
    It should show the correct number (same as before this patch).
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f108f73445f28b850f8732b79a8d0985be5a4041
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Dec 14 12:25:23 2023 +0000

    Bug 35548: Test KitchenSink plugin
    
    Removed from Plugins.t on bug 35507.
    Restoring it here on its own.
    Simplified a bit.
    
    NOTE: The CREATE IF NOT EXISTS seems to commit even when the
    table already exists. Therefore mocking install too.
    
    Test plan:
    Check number of records in plugin_data/methods.
    Run t/db_dependent/Koha/Plugins/KitchenSink.t
    Check again number of records in plugin_data/methods. Same?
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 553126e5a3fc59c988185a26562ab02fc2c84619
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Fri Mar 5 14:05:09 2021 +1300

    Bug 35768: Show 'Used in' records link for results in cataloguing authority plugin search
    
    To test:
    
    1. Edit a biblio record
    2. Go to the 100 tab and click the plugin launcher icon for an author
       tag i.e. next to 100$a
    3. Search for an authority and observe the results
    4. Notice that the number of times this authority has been "Used" in a
       record is now a link, and clicking it does a search showing those
       records.
    
    Sponsored-by: Education Services Australia SCIS
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f49f76d60a7ee7dfd370aca53f76a867aa142f29
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 26 18:35:50 2024 +0000

    Bug 35857: Update authority search pop-up windows with consistent footer markup
    
    This patch updates the cataloging authority finder template in order to
    style submission and close buttons in a fixed footer at the bottom of
    the pop-up window, with markup consistent with other pop-up windows.
    
    Some inline CSS has been removed in favor of styling the "Clear" button
    like a default button. Unrelated, "No results found" message has been
    wrapped in a "dialog message" div for consistency's sake.
    
    To test, apply the patch and go to Cataloging -> New record.
    
    - In the "Add MARC record" form, locate a tag which is linked to an
      authority type, e.g. 100$a.
    - Click the icon to the right of the field to trigger the authority
      search window.
    - There should be a fixed footer in the pop-up window with buttons for
      "Submit," "Clear form," and "Close window." Test that each behave
      correctly.
      - The search results view should have the same footer.
      - Clicking "Choose" from the search results should close the window
        and populate the MARC tag with the correct authority data.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 34cc0d29dfd6fe9fb8201640a13936cd5fa6b1b4
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Dec 19 15:29:35 2023 +0000

    Bug 35536: Remove last two references to resultset PluginData
    
    Test plan:
    Run t/db_dependent/Koha/Plugins/Plugins.t
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9b9ae27a0e3c5acfb6093c7977a001fcf4857033
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Dec 19 14:59:36 2023 +0000

    Bug 35536: Silence tests when run from koha-qa.pl
    
    Extending the regex in Plugins::_verbose.
    
    Test plan:
    Run qa tools on patch set.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d8e04545b80869821057d5b2c3ac46f6e18b1b78
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Dec 18 08:52:20 2023 +0000

    Bug 35536: Refine verbose handling in some Koha::Plugins calls
    
    Three routines in Plugins got the verbose parameter on 35507.
    We can refine this a bit further.
    The idea here is report when you are installing plugins but not
    report when just calling plugins (flooding logs).
    
    [1] GetPlugins: Most callers do not expect (or check) results for
        failing plugins. This patch makes GetPlugins only return
        errors when passing the *errors* flag (in 2 cases).
        [a] The misc/devel script prints warnings now using verbose,
            so does not need the errors flag anymore.
        [b] plugins/plugins-home is the only case left. Tiny adjustment
            to keep current behavior. Fixed colspan in template.
            Does not need verbose in favor of 'errors' (passed to
            template).
        [c] For most calls we do not want verbose. New default is 0.
    
    [2] InstallPlugins
        [a] Disabled verbose in plugin-upload. Not really needed.
            Added a FIXME; we need to improve individual install.
        [b] misc/devel: No warnings anymore when calling InstallPlugins
            after GetPlugins.
    
    [3] get_enabled_plugins
        [a] Plugins->call does not need verbose.
        [b] Plugins->feature_enabled does not need it too.
    
    Test plan:
    
    [1] See previous plan. With TestMR data but without patch, run
    misc script and go to plugins-home. Do you see load errors on
    commandline or form?
    
    [2] Run plugins/plugins-upload (uploading just some file is good
    enough); verify that you do not see TestMR lines in logfile.
    
    [3] Run t/db_dependent/Koha/Plugins/Plugins.t for the additional
    test on verbose and errors flag.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e32174f29ac1b06b60b160a0d37c6aaf767c9126
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Dec 14 07:54:22 2023 +0000

    Bug 35536: Reorder rollbacks
    
    Time to move all RemovePlugins calls BEFORE rollbacks.
    Broken.t did not even include a transaction! Some modules
    are removed there as well.
    
    Test plan:
    Search for wrong order with:
      grep -Pzo "txn_rollback;\n.*RemovePlugins" $(git grep -l RemovePlugins)
      No occurrences left? Think of another grep :)
    Check number of records in plugin_data/methods.
    Repeat: prove $(git grep -l Koha::Plugin | grep -P "^t\/db")
    And check number of records again. Same?
    
    Bonus: Apply TestMR plugin patch (marked DO NOT PUSH).
    Run perl -MKoha::Plugins -e"Koha::Plugins->new->InstallPlugins".
    Check plugin records in database.
    Keep those records but remove last patch from git.
    Run previous prove and verify no data changes since last check.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9d73d40ea38ac7a1662f5058c22c57b2b7438e40
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Dec 14 08:02:01 2023 +0000

    Bug 35536: Add RemovePlugins calls in plugin unit tests
    
    [1] Replace Methods->delete by RemovePlugins.
        git grep -l "Plugins::Methods->delete" | xargs sed -i -e's/Plugins::Methods->delete/Plugins->RemovePlugins/g'
    [2] Replace $schema->resultset('PluginData')->delete by destructive parameter.
    [3] Add RemovePlugins too in Handler->delete too. Note that this call
        might be better off with disable? Added a comment.
    
    Test plan:
    prove $(git grep -l Koha::Plugin | grep -P "^t\/db")
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 950c1e63f864ea1b1a194d685b2d8bd7ae83190d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Dec 13 15:12:30 2023 +0000

    Bug 35536: Add Koha::Plugins->RemovePlugins class method
    
    Test plan:
    Run t/db_dependent/Koha/Plugins/Plugins.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5ef6a3fce70efe372733ac5c0a3ff267cd799838
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Dec 13 15:03:39 2023 +0000

    Bug 35536: Add Koha object classes for plugin_data
    
    Test plan:
    Read the patch.
    The objects will be used in subsequent patches, and tested there.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e30915eb6b9266d5e1caca528d9ff0650b966253
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Dec 13 15:20:19 2023 +0000

    Bug 35536: Reorganize Plugins.t
    
    Move stuff in the middle into new subtest.
    Add transaction around second set of subtests.
    
    Test plan:
    t/db_dependent/Koha/Plugins/Plugins.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ca0e117b2cd31c4c256e91aef55074305fbb9d3d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Mar 22 09:48:14 2024 +0000

    Bug 36397: Quick fix for Koha/Plugins/authority_hooks.t
    
    Lazy approach for now: just ignore the other warnings that are
    logical when passing blank records to SearchEngine. Elastic is
    a bit more sensitive than Zebra here..
    
    Test plan:
    Run t/db_dependent/Koha/Plugins/authority_hooks.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ec8897377e4179461b8d0495f1495fccbd0820db
Author: Thibaud Guillot <thibaud.guillot@biblibre.com>
Date:   Tue Oct 31 13:57:00 2023 +0100

    Bug 18885: Specify due date behavior according to on-site checkbox
    
    When a on-site checkout is performed a date is automatically added but
    if you unchecked the date remains. Even with OnSiteCheckoutAutoCheck
    syspref
    
    Test plan:
    1) Do an on-site checkout by clicking on checkbox and see date added
    2) Unchecked and see that the date remains on input
    3) Do another test with OnSiteCheckoutAutoCheck enabled
    4) Apply this patch and repeat actions
    
    Normally now its works correctly
    
    Signed-off-by: tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9cc622be1fb267efe5202f24450f9c5acee77fd2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 15 13:45:58 2024 +0000

    Bug 36331: Don't check reserves that an item cannot fill when checking if it can be renewed
    
    Before this patch we get all holds on a record and see if we can fill them with available items.
    This means we check to fill holds that the item in questoion may not be able to fill, especially
    in the case where no holds are allowed on the item type, this is wrong
    
    To test:
    1 - Find or create a biblio with two items of different item types
    2 - Make sure one item type allows holds, and the other has:
        "Default holds policy by item type"
        Set to "No holds allowed"
    3 - Set system preference "AllowRenewalIfOtherItemsAvailable" to "Don't allow"
    4 - Check out the unholdable item to a patron
    5 - Set a hold for a different patron on the next available item
    6 - Confirm the checked out item can be renewed (don't renew, just view the checkouts page)
    7 - Checkout the other item to a third patron
    8 - Confirm the first item can still be renewed
    9 - Set system preference "AllowRenewalIfOtherItemsAvailable" to "Allow"
    10 - Confirm the item cannot be renewed now
    11 - Apply patch, restart all
    12 - Confirm the item can be renewed
    13 - Set the item type to a type that allows holds
    14 - Confirm the item can no longer be renewed
    15 - Restore the item type
    16 - Set system preference "AllowRenewalIfOtherItemsAvailable" to "Don't allow"
    17 - Confirm the item can be renewed
    18 - Check in the item from the third patron
    19 - Confirm the item can still be renewed
    20 - prove -v t/db_dependent/Circulation.t - test still pass
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a36e8900d70e3ebff6f4f1bcefe059d094228bd8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 15 13:51:02 2024 +0100

    Bug 36326: Fix batch item mod/del access from biblio detail page
    
    Allow both $op eq "show" and "cud-show".
    We need to keep the POST when we upload a file, but we can simply allow
    GET with "show".
    
    Test plan:
    Go to the biblio detail page, select an item and test both tools via the links
    "Delete selected items" and "Modify selected items"
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1ea4a11c2a88f7b23b482e071db48ae235beb42b
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Mar 22 09:29:10 2024 +0000

    Bug 35783: DBRev 23.12.00.011
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1a780ddcf0afc801483c5d8ed681dd1f7f678d15
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 12 09:41:21 2024 +0100

    Bug 35783: Replace TT plugin's method Biblio::RecallsCount
    
    We can use biblio.recalls.search( completed => 0 ).count instead.
    
    Test plan:
    1. Go to the biblio detail view, click on the different entries in the menu
    on the left. Confirm that the "Recalls" tab always has the correct number
    of current recalls display in the parenthesis.
    
    2. Run a search and confirm that the number of current recalls are still displayed
    for each result.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit df2cad62b0bdd0ec778dadf62904785bf1bf6b9c
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Oct 16 12:08:25 2023 +0200

    Bug 35062: Add class plugin-blocks-submit in addbiblio
    
    Adding this condition in Check() allows you to prevent form submittal
    during e.g. an ajax call in a framework plugin.
    The plugin adds and removes the class on the corresponding html
    element during processing.
    
    Test plan:
    Since we do not have a plugin using this class yet, nothing changes now.
    Verify that you can still click Save in addbiblio while using standard
    plugins. In other words: no change in behavior.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 04624f4433ef04107de4025cae4982e1dce34291
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Dec 22 12:28:38 2023 +0000

    Bug 35638: Upgrade Enquire JS library from v2.0.1 to v2.1.6
    
    This patch upgrades enquire.js in the OPAC to the latest version,
    v.2.1.6. The patch also moves the file (enquire.min.js) into its own
    directory for consistency's sake.
    
    Enquire.js lets us use CSS-like "breakpoints" to trigger JS actions. We
    use it to in "mobile" views (narrower browser widths): Collapsing the
    facets menu and triggering automatic scroll to "main content."
    
    The patch also removes media.match.js which should have been removed in
    Bug 29960. At that time Enquire.js required that we used Modernizr to
    load media.match.js as a polyfill for older browsers.
    
    To test, apply the patch and clear your browser cache if necessary.
    
    - In the OPAC, perform a catalog search which will return results.
    - At wider browser widths the facets menu will appear in the left-hand
      sidebar.
    - When you narrow your browser until the viewport is less than 992
      pixels wide* the facets menu should collapse into a "Refine your
      search" button above the search results.
    - If you narrow your browser width to below 600 pixels wide and reload
      the search results page, the browser should automatically scroll down
      so that the "Your search..." heading is at the top of the viewport.
    
    * Use Firefox's Responsive Design Mode to get pixel-level control over
      viewport width: https://firefox-source-docs.mozilla.org/devtools-user/responsive_design_mode/
      In Chrome it's called "Device Mode."
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 59b940300ccaa7bfb9f6b3135df7ddbd8ca85e43
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Dec 22 13:19:15 2023 +0000

    Bug 35640: Upgrade FileSaver JS library to v2.0.4
    
    This patch upgrades filesaver.js from an unknown version added in 2015
    to v2.0.4 which was released in 2020. The patch also moves the asset to
    its own directory for consistency's sake.
    
    To test, apply the patch and clear your browser cache if necessary.
    
    - Locate a bibliographic record in the staff interface and edit it.
    - Switch to the advanced editor.
    - Click the dropdown menu next to the "Save to catalog" button, and test
      both the "Save as MARC" and "Save as MARCXML" controls.
    - In both cases the record should be downloaded correctly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9cb286e36d4f3dffe0a0b965487573f829a7ddfe
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Dec 22 15:15:20 2023 +0000

    Bug 35642: Upgrade Font Face Observer library from v2.0.3 to v2.3.0
    
    This patch upgrades the Font Face Observer library from v2.0.3 to the
    latest release, v2.3.0. The file is moved to its own directory for
    consistency's sake.
    
    To test, apply the patch and clear your browser cache.
    
    - Load any page in the OPAC.
    - The custom font we supply for the OPAC (Noto Sans) should load
      correctly.
    - If you want to see more about the functionality of the library, use
      your browser's developer tools to simulate a slow connection.
      - The page should load with a default sans-serif font first, and then
        the downloaded font will be applied.
      Note: If you throttle your connection speed *too* much, the loading of
      the custom font will time out and you'll only see the default
      sans-serif font.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 336e85c6ac237f8aed1fc22d59f2bedf5084b334
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Dec 18 18:39:36 2023 +0000

    Bug 35540: Separate StaffListsHome block from the table block
    
    This patch makes some minor changes to template markup and CSS so that
    "page-section" divs have consistent margins.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    - Go to Tools -> HTML customizations and create a new entry in
      StaffListsHome, StaffPatronsHome, and StaffPOSHome regions.
    - Confirm that those customizations are displayed well on each of those
      corresponding pages: The lists home page, the patrons home page, and
      the Point of Sale home page.
    - Confirm that other pages affected by the CSS change still display
      correctly. These pages have an added bottom margin on the main
      "container" of content. For example:
      - Patrons -> Patron search results
      - Catalog -> Catalog search results (especially results with multiple
        pages)
      - Circulation -> Circulation history
      - Reports -> Saved SQL reports
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 68c3a802fc70c7ca8d0b7c1d02e6bec14a513a22
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Dec 21 19:07:00 2023 +0000

    Bug 35633: (follow-up) Custom style updates
    
    This patch adds custom CSS to the OPAC and staff interface to override
    the default style of Chocolat controls (for left arrow, right arrow,
    loading, and close window). These controls are given a green color
    matching Koha's color scheme.
    
    The bibliographic detail pages in the OPAC and staff interface have been
    revised so that the inclusion of Chocolat CSS comes before the inclusion
    of Koha's global CSS. We should do this with third-party CSS so that it
    can be more easily overridden by ours.
    
    The patch also makes a minor change to chocolat.js to correct a bug. See
    commit 6ac89ca8558.
    
    To test, apply the patch and rebuild the OPAC and staff interface CSS.
    
    - Go to Administration -> System preferences and enable the
      AllowMultipleCovers, OPACLocalCoverImages, and LocalCoverImages
      system preferences.
    - Add a local cover image to a bibliographic record:
      - Locate a bibliographic record.
      - From the detail page, click the "Images" tab and then "Upload."
      - Upload an image to attach to the record.
      - Upload another image.
    - Return to the bibliographic detail page fro that record, and click the
      image you uploaded.
      - The full-page image viewer should appear, and the controls should
        look correct, with green matching Koha's color scheme:
        - The close button in the upper-right
        - The right-arrow, and then when you click through to the second
          image, the left-arrow.
        - In the footer, the "edit" link should work correctly.
        - Test that the "Full screen" control works too.
    - Click the "OPAC view" link to load the record in the OPAC, and perform
      the same tests.
    
    Signed-off-by: Phan Tung Bui <phan-tung.bui@inlibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f4960ac233d31c37e9d5331fa724040968a5e7c1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Dec 21 19:04:47 2023 +0000

    Bug 35633: Upgrade Chocolat JS library from v1.1.0 to v1.1.2
    
    This patch updates Chocolat JS library assets from v1.1.0 to v1.1.2 in
    both the OPAC and staff interface. The new version uses SVG images
    encoded as data-uris in CSS, so default images can now be overridden in
    our CSS. For that reason the Chocolat-related images files are removed
    by this patch.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6405431b3859e57a8cf110d717d85cb5753ad45f
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue Dec 22 00:15:02 2020 +0000

    Bug 27291: Reformat Zebra output logs
    
    This patch changes the Zebra output log time format from
    the default "hh:mm:ss-DD/MM" to the more standard ISO 8601
    "%FT%T".
    
    This change makes the logs easier to read for both
    humans and machines. One benefit includes easy searching
    and sorting.
    
    Test plan:
    
    1. cp debian/scripts/koha-zebra /usr/sbin/koha-zebra
    2. koha-zebra --stop kohadev
    3. koha-zebra --start kohadev
    4. ps -efww | grep "zebrasrv"
    5. Note "-m %FT%T" in the grep output
    6. tail -f /var/log/koha/kohadev/zebra-output.log
    7. Run a few searches like http://localhost:8081/cgi-bin/koha/catalogue/search.pl?q=ccl%3Dargawarga%3D1 or http://localhost:8081/cgi-bin/koha/catalogue/search.pl?q=e
    8. Note that the timestamp in the Zebra log is formatted "2020-12-22T00:13:42" instead of like "00:13:42-22/12"
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 30816a7fc5bbad5da9a567ae7d3ca16dfc478bdf
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 12 11:06:48 2024 +0100

    Bug 30349: Add missing double dash (--delete) to POD
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 06e7553dc93c656490e77b116313bdae6df53764
Author: David Schmidt <mail@davidschmidt.at>
Date:   Thu Mar 24 13:02:16 2022 +0100

    Bug 30349: More double dashes
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c84c6141468ffcaf8a13a1f4655b4c6b906d4f99
Author: David Schmidt <mail@davidschmidt.at>
Date:   Thu Mar 24 12:33:43 2022 +0100

    Bug 30349: Use double dash for multi character option names
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ccf18acb971421ff1895d56a66733cb43f5f91c0
Author: David Schmidt <mail@davidschmidt.at>
Date:   Thu Mar 24 12:30:56 2022 +0100

    Bug 30349: Tidy bulkmarcimport.pl to fix indentations
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6a6db6aa7c1ae2c7338043a31d2df04acb06f341
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Mar 22 08:55:09 2024 +0000

    Bug 36033: DBRev 23.12.00.010
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0573d01eaa2da7e0b53fd24054e5a3d4e0c2b056
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Feb 8 10:25:12 2024 +0100

    Bug 36033: Add more indexes to table pseudonymized_transactions
    
    Table pseudonymized_transactions contains :
      KEY `pseudonymized_transactions_ibfk_1` (`categorycode`),
      KEY `pseudonymized_transactions_borrowers_ibfk_2` (`branchcode`),
      KEY `pseudonymized_transactions_borrowers_ibfk_3` (`transaction_branchcode`)
    
    To improve SQL queries performance, it needs more indexes, specially on itemnumber.
    
    Looking at table statistics :
      KEY `timeidx` (`datetime`),
      KEY `branch_idx` (`branch`),
      KEY `type_idx` (`type`),
      KEY `itemnumber_idx` (`itemnumber`),
    
    So index is need on pseudonymized_transactions columns :
    itemnumber => For join with table items
    transaction_type => For filter on type issue, return ...
    datetime => For filter on date, this will help cleanup script
    
    Test plan :
    1) Run updatedatabase.pl
    2) Check indexes are created in table pseudonymized_transactions
    3) Run SQL query :
       describe select * from pseudonymized_transactions join items using(itemnumber)
       where transaction_type='issue' and datetime < date_sub(curdate(), INTERVAL 30 DAY)
    => You see the 3 new indexes used in 'possible_keys'.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 571521ba13eccdd9f309d4d9a2c49c353be86fda
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Mar 14 16:37:21 2024 +0100

    Bug 36321: Problem when dateexpiry in BorrowerUnwantedField
    
    hen dateexpiry is in BorrowerUnwantedField it is hidden in patron edition form.
    The problem is when editing an existing patron the value is re-computed with category settings, as if it where empty.
    
    This comes from all fields in BorrowerUnwantedField beeing removed from %newdata in memberentry.pl.
    Whe must skip dateexpiry.
    
    Test plan :
    1) Be sure dateexpiry is not in BorrowerUnwantedField
    2) Define a patron category with enrollment period 12 month
    3) Create a new patron in this category
    4) Its expiration date is in now + 12 month
    5) Edit the patron category to set enrollment period 6 month
    6) Add dateexpiry in BorrowerUnwantedField
    7) Edit the patron and save
    => Without patch the expiration date is changed to now + 6 month
    => With patch the exporation date is unchanged
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Perl-tidied.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0c5b22d3d4117ad4a2f9d0e0caeed764d9ee5d3d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 20 11:03:26 2024 +0100

    Bug 36336: (bug 34478 follow-up) Fix export from catalogue detail
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 354be012b00a788c3da34b89f9c0e778eded24ea
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Mar 15 10:53:08 2024 +0000

    Bug 36327: Update handling of item delete
    
    This needs to be rewritten to .on('click') because the delete item link relevant to this patchset is appended to the dom, this is how we guarantee this event listener is attached to the appended link.
    This also ensures the same item deletion logic is applied for both button: The delete button from the left 'Actions' dropdown and the 'Delete item' link that pops up when anywhere in the row is clicked
    
    1) visit a biblio details view:
    http://localhost:8081/cgi-bin/koha/cataloguing/additem.pl?biblionumber=230
    2) Click anywhere on one of the items rows
    3) Notice 2 actions show up "Edit item" and "Delete item"
    4) Click "delete item"
    5) Notice nothing happens in the UI
    6) Notice console throws the following error:
    cataloging_additem_23.1200007.js:29 Uncaught ReferenceError: confirm_deletion is not defined
        at HTMLAnchorElement.<anonymous> (cataloging_additem_23.1200007.js:29:17)
        at HTMLAnchorElement.dispatch (jquery-3.6.0.min_23.1200007.js:2:43064)
        at v.handle (jquery-3.6.0.min_23.1200007.js:2:41048)
    7) Apply patches
    8) Notice console error no longer shows
    9) Notice delete confirmation is shown, notice clicking it deletes the correct item.
    10) Notice the delete item link anywhere in the item row has the same behavior as the 'Delete' option under 'Actions' on the leftmost column of the table
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ce902285d2b1d95d580b6ee8b009f35994aff1f9
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Mar 15 10:50:50 2024 +0000

    Bug 36327: Delete link is no longer a GET href
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 955218e55a1c0950fd4b035224b6291f2c2b6e23
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Mar 15 10:50:12 2024 +0000

    Bug 36327: Clean-up old unused code that results in error
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7bcd1203fd123ebe38ab5179c048e0908e30f681
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Mar 15 10:47:43 2024 +0000

    Bug 36327: Preparation: Update form
    
    Each delete form now contains the itemnumber to better unambiguosly identify the the itemnumber it refers to
    The delete button now carries the itemnumber it refers to
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 14b6580e14b956766916c7e1481f8ec29e466aba
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 20 06:09:24 2024 +0100

    Bug 36351: Pretty the api-client
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 99911f462a0ce77e6833b396e2283c4a381213f7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 19 15:33:28 2024 +0000

    Bug 36351: Adjust saveRecord and _fromXMLStruct
    
    Using the new API Client means we need to handle some calls differently.
    the http-client is returning only the response, not the text, so we need to handle getting this out
    with a new async function (or promises, but this works)
    
    We also need to adjust _fromXMLStruct as we have reduced the levels in the response by the time it is called
    
    This now adds a new 'update' function to the cataloguing client as well.
    
    Eventually, this should all be using the REST API, but I think for now handling the non-standard responses gets it
    working again
    
    To test:
    To test:
    1 - Browse to Cataloguing->Advanced editor
    2 - New Record
    3 - Enter values and save - confirm it works
    4 - Confirm url now ends in : editor.pl#catalog/{biblionumber} and not editor.pl#new
    5 - Save the record again, confirm biblio is updated and not saved as new
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 73179f9b04030d88e8cf1dd7c5eca210bcc52b50
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 19 12:04:43 2024 +0100

    Bug 36351: Fix http-client when response is not JSON
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0cbc99a3739d6a90fa4c17bde9a47d99ec6d8a0a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 18 17:28:56 2024 +0000

    Bug 36351: Add CSRF tokens to advanced cataloguing editor POST requests
    
    The editor uses ajax post requests to SVC api.
    Becuase these apis are XML based requests, they must be handled in the simplest way, by
    embedding the token as a header
    
    To test:
    1 - Browse to Cataloguing->Advanced editor
    2 - Fill out needed values and save
    3 - 403 error
    4 - Apply patch
    5 - Reload and try agian, success!
    6 - Edit and save again, success!
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 34a3c3b8f69ac859758dfa0e1b732e8021e549c1
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Mar 15 11:33:42 2024 +0000

    Bug 36302: Get rid of defer_loading in patron-search
    
    Same test plan as the other patch, behavior is expected to be the same on both
    
    But this alternative removes technical debt, whereas the other patch adds.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7e05bda48ee17aa6ed755c9e58d898a684252bbb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 19 09:29:13 2024 +0100

    Bug 36355: Prevent csrf.ts to fail if DB has libraries with long name
    
    If one library has a long name the "Delete" button will not appear on
    the screen and the cypress test will fail
     Timed out retrying after 10050ms: `cy.click()` failed because the center of this element is hidden from view
    
    We can either increase the size of the screen or force the click even if
    the button is not visible.
    
    Test plan:
    Edit a library and set info with long name, address, etc.
    Run the cypress test:
      yarn cypress run --spec t/cypress/integration/Auth/csrf.ts
    Note the failure, you can watch the video and notice that the delete
    button is not on the screen (t/cypress/videos/csrf.ts.mp4)
    Apply the patch, try again
    => Succes
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c6fa96eecae4a0f0de95977d8cf032cb9ee941bf
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Nov 23 09:00:59 2023 +0000

    Bug 35388: Add comment to 'Transfers to send'
    
    Test plan:
    Read the patch.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cfcae28c15cde777ba985528ee49da0d8a7845c1
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Mar 19 17:02:59 2024 +0000

    Bug 34668: DBRev 23.12.00.009
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1c2ab5cbd249976dc0bef4b5d5cb4fcbeafb92db
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Jan 8 23:38:33 2024 +0000

    Bug 34668: (QA follow-up) Change file permission
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fa444f549d6bf8d0d58ed50b6019664f332e99dd
Author: Shi Yao Wang <shi-yao.wang@inlibro.com>
Date:   Fri Nov 3 13:13:56 2023 -0400

    Bug 34668: pass whole waiting_holds rs
    
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0c8544f3481f2ea9a1b421280f38c627a54f20dd
Author: Shi Yao Wang <shi-yao.wang@inlibro.com>
Date:   Thu Oct 12 15:51:55 2023 -0400

    Bug 34668: remove binding/unbinding event for one submit event
    
    Signed-off-by: Mia Kujala <mia.kujala@xamk.fi>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 92c17fc3cd9ebd4e1ebe246d1e7edf0532ac8656
Author: Shi Yao Wang <shi-yao.wang@inlibro.com>
Date:   Thu Aug 31 13:31:16 2023 -0400

    Bug 34668: Add popup warn librarians of waiting holds when checking out
    
    When there are holds waiting for patrons, sometimes the librarian misses
    the "Holds waiting here" display. This patch adds a modal popup warning
    when checking out an item for a patron with waiting holds.
    
    Test plan:
    1) find a user (user1)
    2) find a biblio (biblio1)
    3) add a hold for biblio1 to user1
       (search biblio1 > Holds > find user1 > Place hold)
    4) checkout biblio1 to another user if not already checked out
       and checkin through circulation page (not through the user page)
       > confirm hold
    5) there should be a "Holds waiting here (1)" section added on user1 page
    
    6) checkout any items that isn't the one on hold for user1
       -> notice it just checks out as normal
    7) apply patch and update database
    8) go to administration > system preferences > switch "WaitingNotifyAtCheckout" to "Notify"
    9) refresh page and redo step 6
       -> notice there is now a modal to warn the librarian of a waiting hold
       click Ok to proceed with the checkout, click outside the modal to not do anything
    10) additionnally, the popup shouldn't appear if we checkout any of
        user1's waiting hold
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Mia Kujala <mia.kujala@xamk.fi>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 75275ec29135667c7277bc445451add706ee3097
Author: Aleisha Amohia <aleisha@catalyst.net.nz>
Date:   Tue Nov 14 04:49:14 2023 +0000

    Bug 35328: Add a notes pop-up for authority records to authority search results
    
    This enhancement makes authority record notes (6xx) more accessible in a special Notes pop-up, available in all authority search result lists.
    
    To test:
    1) In the staff interface, go to the Authorities module and conduct a search. Any records with 6xx fields should show with an italicised Notes link under the heading. Click on the Notes link for each record and confirm the correct notes for that record show.
    2) Test this in the following staff interface pages:
    - authority plugin when cataloguing a biblio record
    - batch authority record modification
    - batch authority record deletion
    3) Test the Notes pop-up is available in the OPAC authority search
    4) Confirm the Notes link does NOT show if there is no 6xx field in the record
    
    Sponsored-by: Education Services Australia SCIS
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 63b61e34b3d2dfc9bbdb1c7470864a84766d8f84
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Mar 19 09:38:47 2024 -0300

    Bug 36358: Fix typo in errorpage.tt: requets
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5f7a9db93672c14efdba861373c2d330b8aee6c4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Mar 19 12:11:54 2024 -0300

    Bug 36329: (follow-up) Fix error message comparisson in testes
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a1a7193110d5f5121cf084d2cc787256e3753796
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 25 19:08:00 2023 +0000

    Bug 34611: Confirm run if pseudonymized transactions found and add verbose feedback
    
    Signed-off-by: AFHDubCoLib <andrewfh@dubcolib.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 59368f5c9dc4087393215293e5d98c024c5db092
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 25 12:15:31 2023 +0000

    Bug 34611: Add a script to pseudonymize statistics from before a given date
    
    This script takes a date parameter in SQL format and pseudonymizes all statistics
    found before this date.
    
    Only values that can be found will be added, i.e. no deleted patron or item info
    will be present.
    
    Additionally - the values stored will be the current values from patrons and items, so
    some info will be approximate, much as it is when joining from the statistics table for reporting.
    
    To test:
     1 - Perform some issues/returns/renewals/on-site checkouts
     2 - Make sure Pseudonymization is disabled
     3 - perl misc/maintenance/pseudonymize_statistics.pl
     4 - Script ends and reports that preference is not active
     5 - Enable the pref, and choose some borrower and item fields
        NOTE: See bug 28911 if you need a bcrypt key for your koha-conf.xml
     6 - perl misc/maintenance/pseudonymize_statistics.pl
     7 - sudo koha-mysql kohadev
     8 - SELECT * FROM pseudonymized_transactions
     9 - Confirm data is correctly stored
    10 - DELETE FROM pseudonymized_transactions;
    11 - UPDATE statistics SET datetime = '2023-01-01 00:00:00';
    12 - perl misc/maintenance/pseudonymize_statistics.pl -b "2022-12-31 23:59:59";
    13 - SELECT * FROM pseudonymized_transactions;
    14 - Confirm no entries were made
    15 - Select different options in Pseudonmyization prefs, including borrower attributes
         This wil require defining an attribute that can be kept for pseudonymization
    16 - Confirm options are correctly pseudonymized
    
    Signed-off-by: AFHDubCoLib <andrewfh@dubcolib.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6fb75aa6fcbb61d952868333da08b459eecc0043
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 25 12:03:20 2023 +0000

    Bug 34611: Add pseudonymize routine to Koha::Statistics
    
    This patch adds a new routine to pseudonymize a statistic and adjusts
    C4::Stats to use this new routine.
    
    Additionally Koha::PseudonymizedTransaction->new_from_statistic is updated to check for
    the existence of objects before using them (in the case of older stats where things may have been deleted)
    
    Tests are added and can be run using:
    1. Run:
       $ ktd --shell
      k$ prove t/db_dependent/Koha/PseudonymizedTransaction.t \
               t/db_dependent/Koha/Pseudonymization.t
    => SUCCESS: New tests pass, old tests keep passing
    
    Signed-off-by: AFHDubCoLib <andrewfh@dubcolib.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 058ca2fe39e9888314b4b1c449b5a363e2d3156d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 24 15:17:33 2023 -0300

    Bug 34611: Unit tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: AFHDubCoLib <andrewfh@dubcolib.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3c0d244396f18fc3782f6f0bb1c8ec464cdfab15
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Mar 19 09:07:21 2024 +0000

    Bug 27595: DBRev 23.12.00.008
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bb2dcfdced00f9dc7dde3913800c7dd9752d0e8a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Dec 4 14:05:43 2023 +0000

    Bug 27595: Place holds when ordering from a suggestion
    
    This patch updates the ordering code to place a hold when adding to a basket from a
    suggestion if the new preference PlaceHoldsOnOrdersFromSuggestions is enabled.
    
    To test:
    1 - Apply all patches
    2 - updatedatabase
    3 - See new system preference PlaceHoldsOnOrdersFromSuggestions
    4 - Create a new purchase suggestion, mark it accepted
    5 - Go to acquisitions, find a vendor, find a basket, 'Add to basket' -> 'From a suggestion'
    6 - Complete order, confirm no hold was placed
    7 - Enable the new system preference
    8 - Repeast 4-6
    9 - Confirm a hold was placed
    
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e4caa84e86865ff3e3ba95348355aa06ffdbb22e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Dec 4 14:04:44 2023 +0000

    Bug 27595: Add place_hold method to Koha::Suggestion
    
    This patch adds anew method to allow placing a hold from a purchase suggestion
    
    To test:
    prove -v t/db_dependent/Suggestions.t
    
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 28e5e497907aedba6452a374f2a64bb93e82db0c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Dec 4 14:04:06 2023 +0000

    Bug 27595: Add new system preference PlaceHoldsOnOrdersFromSuggestions
    
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e846641eddb98d63f2fb9b78b7fe5fce00cd8569
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Mar 15 09:56:22 2024 -0300

    Bug 36329: Make POST /transfer_limits/batch honor BranchTransferLimitsType
    
    This patch adds tests for the different cases of `BranchTransferLimitsType`.
    It also adds tests for the situation of the consumer sending both limit
    criterias on the request.
    
    The controller gets adjusted for this new behavior and the spec gets
    documentation added about this.
    
    Bonus: tests are added the right guidelines code, and
    BranchTransferLimitsType gets mocked to avoid failures due to existing
    data.
    
    To test:
    1. Apply this patches
    2. Run:
       $ ktd --shell
      k$ qa
    => SUCCESS: All green, and tests pass!
    3. Sign off :-D
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Fixed a typo in one of the return messages
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9760f066dd3488fe166015959aa8b526bb98daa6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Mar 15 09:55:34 2024 -0300

    Bug 36329: Miscelaneous spec fixes
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 506087bc1541c94b46a4f8b405b8b1c131d526b9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Mar 15 09:18:32 2024 -0300

    Bug 36329: Add missing return codes
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1d2165f84106cc27b804ac4c347817d25d1403aa
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 19 09:16:52 2024 +0100

    Bug 36356: Fix rollback from FrameworkPlugin.t
    
    rollback ineffective with AutoCommit enabled at /usr/share/perl5/DBIx/Class/Storage/DBI.pm line 1651.
    
    I have not investigated more than that. Reaching this was already the
    end of a long road... (see comment 0)
    
    Test plan:
    0. Do not apply this patch
    1. select count(*) from branches
    Note the value
    2. Run
      prove t/db_dependent/FrameworkPlugin.t
    => There is a warning
    3. Repeat 1.
    => There are too many libraries!
    4. Apply the patch, retry 1, 2, 3
    => No warning, no library added by the tests
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 24b33936a526187e17719294e236f186aec46d50
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Jan 25 16:49:32 2024 +0100

    Bug 35921: Improve perfs of acqui-home.pl when there are many budgets
    
    When there are a lot of budgets with the same owner, most of the time of
    acqui-home.pl is spent loading the same patron over and over.
    
    This patch makes sure each borrower is loaded only once.
    
    Test plan:
    0. Do not apply the patch yet
    1. Create a thousand budgets with the following command (make sure the
       budget_owner_id is an existing borrowernumber):
           perl -MKoha::Database -e '
               my $schema = Koha::Database->schema;
               my $period = $schema->resultset("Aqbudgetperiod")->create({
                   budget_period_startdate => "2000-01-01",
                   budget_period_enddate => "2999-12-31"
               });
               $schema->resultset("Aqbudget")->create({
                   budget_owner_id => 1,
                   budget_period_id => $period->id
               }) for (1..1000)
           '
    2. Measure the time it takes to load acqui/acqui-home.pl (do it several
       times and keep the average time)
    3. Apply the patch
    4. Repeat step 2
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b374358e84ad0a55b35ec191e4acf22a606573af
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Mar 18 16:58:21 2024 +0000

    Bug 35539: (QA follow-up) Remove defer_marc_save from Elasticsearch.t
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a3beaa24fabdd3cd1204216fcf39f8f0711c4b2a
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Wed Apr 6 15:42:10 2022 +0200

    Bug 25539: Enable bulkmarcimport overlay context
    
    Signed-off-by: Michał Kula <148193449+mkibp@users.noreply.github.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6aa7118c1386b81c1c5124f80d7307d77302ca2c
Author: David Gustafsson <glasklas@gmail.com>
Date:   Fri Nov 12 23:42:30 2021 +0100

    Bug 25539: Strip items when adding new biblio to preserve previous behaviour of the script
    
    Signed-off-by: Michał Kula <148193449+mkibp@users.noreply.github.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e1479daf11170dbb46e813dca4a9b490239fa39e
Author: David Gustafsson <glasklas@gmail.com>
Date:   Fri Nov 12 23:16:55 2021 +0100

    Bug 25539: Remove AddBiblio option "defer_marc_save"
    
    Items are no longer embedded in the MARCXML and because of this the MARC data
    does not need to be saved once more after changing record items data.
    The "defer_marc_save" is no longer needed since bulkmarcimport.pl was the only
    place this option was utilized in order to resave MARC data after possibly changing
    items data. There is also a bug bulkmarcimport.pl where the record data is re-saved
    without stripping items if duplicate items are found and the dedup barcodes
    option is enabled that is resolved by this change.
    
    This change enables MARC Overlay rules to be enabled for bulkmarkcimport.pl as using
    the defer_marc option would previously effectively bypass any defined rules.
    
    To test
    1) Apply patch 29440 (which this depends on), but no not yet apply this
       patch
    2) Remove comments around "bulkmarcimport: _("bulkmarcimport.pl"),"
       in koha-tmpl/intranet-tmpl/prog/en/modules/admin/marc-overlay-rules.tt
       line 463
    3) Enable MARC overlay rules and add a rule (with source => "*" or
       'bulkmarcimport') to protect some field.
    4) Import a biblio using the bulkmarcimport script. Overlay rules will
       only be applied on updates so a match condition matching the
       record in Koha when bulkmarcimport.pl is run the next time for the same
       record needs to be supplied (for example -match "control-number,001")
    5) Edit the imported biblio and change the value of the protected field
    6) Run bulkmarcimport with the same parameters as in 4) and verify the
       the field that should have been protected has been overwritten
    7) Revert changes for line 463 in marc-overlay-rules.tt (or will result in
       conflict applying the patch), apply the patch and repeat steps 4-5,
       verify that the field now was protected from being overwritten.
    
    Signed-off-by: Michał Kula <148193449+mkibp@users.noreply.github.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2998254f1cfd8cbb63a0ac8b9b47847e62652d03
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 15 10:12:41 2024 +0100

    Bug 31988: Remove reports/itemtypes.plugin
    
    This "plugin system" is only used for the itemtypes report. We can
    simply remove the reports/manager.pl script and this plugin in favor of
    a dedicated report.
    
    Test plan:
    Same behaviour expected before and after this patch
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 45305fe2cb42ed83d2b292e13283a88e82ba5a47
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 15 18:17:29 2024 +0000

    Bug 36334: (follow-up) Restore selection of previous values in sidebar
    
    Before and after the first patch the values for category and library were not populated
    
    To test:
    1 - With nothing applied search in the top bar, clicking the 'settings' button
    2 - Select a search field, search type, category, and library
    3 - Perform search, note only search field and search type are populated
    4 - Apply first path, repeat, same result
    5 - Apply this patch, repeat
    6 - Confirm all four fields now populate in sidebar
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 41254a1b64f134ed87c2cd52241c0f5995ef8c4d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 15 15:38:18 2024 +0100

    Bug 36334: Remove unnecessary JS code from member.tt
    
    This was initially written to set the input/select in the form in the
    left side of the main patron search page.
    
    But this is now done in patron-search.inc:
    koha-tmpl/intranet-tmpl/prog/en/includes/patron-search.inc:
      <input type="text" class="search_patron_filter" value="[% search_filter | html %]" class="focus" />
    
    I don't see how/when this code is still used.
    
    Additionally:
     #searchmember_filter
     => does not exist, it's .search_patron_filter
    
     $("searchfieldstype_filter").val("[% searchfieldstype | html %]");
     => Not a valid selector
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1e295fac47e28e69ca3e84d7bf17281891ae06f9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Dec 22 16:02:42 2023 +0000

    Bug 35643: Upgrade HC Sticky library from v2.2.3 to v2.2.7
    
    This patch upgrades the HC Sticky library in the OPAC and staff
    interface to the latest version, 2.2.7. The file is moved to its own
    directory for consistency's sake.
    
    To test, apply the patch and clear your browser cache if ncessary.
    
    Test pages in the OPAC and staff interface which use the "sticky"
    heading feature. As you scroll down the header should "stick" to the top
    of the viewport. For example:
    
    - Administration -> System preferences
    - Catalog -> Search results
    - Cataloging -> Basic MARC editor
    - Patrons -> Add or edit patron
    - Lists -> List contents
    
    In the OPAC:
    
    - Catalog search results
    - Lists -> List contents
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ad91197177e69e8622e7c8f2f827dd2aaa268182
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jan 3 16:21:08 2024 +0000

    Bug 29440: (QA follow-up) Fix tidy
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 70de25b4392b98b3850ded2d1391c8b0809755b8
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Wed Oct 25 14:43:21 2023 +0200

    Bug 29440: Fix AddBiblio/ModBiblio options args
    
    Signed-off-by: Michał Kula <148193449+mkibp@users.noreply.github.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 188ea40db1ed6a47936c5adbec12a30a100a0ebe
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Mon Nov 7 17:56:23 2022 +0100

    Bug 29440: Replace removed syspref BiblioAddsAuthorities with AutoLinkBiblios
    
    Signed-off-by: Michał Kula <148193449+mkibp@users.noreply.github.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6b9251621473c36f89a99ffdc57e9a27a4a2425b
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Mon Sep 26 16:55:36 2022 +0200

    Bug 29440: Only log items has been inserted if actually have been so, and remove extra out of place logging of record insertion
    
    Signed-off-by: Michał Kula <148193449+mkibp@users.noreply.github.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fd3efab876de8d3aeb7667a58aced57eeca5c620
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Mon Sep 26 16:46:30 2022 +0200

    Bug 29440: Rename $modify_biblio_marc_options to $mod_bilbio_options
    
    This variable actually contains ModBibio options and
    ModifyBiblioMarc accepts a subset of these
    
    Signed-off-by: Michał Kula <148193449+mkibp@users.noreply.github.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 33d274bbb9790a9832e7a030e259c2337d6fcba9
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Mon Sep 26 16:09:30 2022 +0200

    Bug 29440: Remove pointless call to _strip_item_fields
    
    Signed-off-by: Michał Kula <148193449+mkibp@users.noreply.github.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2d50eb242d65c4ef9e0df3efd772b37b8c18aec5
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Fri Sep 23 17:32:51 2022 +0200

    Bug 29440: replace usage of removed GetMarcBiblio
    
    Signed-off-by: Michał Kula <148193449+mkibp@users.noreply.github.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 08908b5765e941723d454591608235bd1451c8a8
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Wed Sep 21 17:43:32 2022 +0200

    Bug 29440: defer biblio autolinking until records are indexed
    
    Signed-off-by: Michał Kula <148193449+mkibp@users.noreply.github.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2dddbb4d147a6ebdd7fc949808469c18dc35b10e
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Mon Apr 4 16:41:00 2022 +0200

    Bug 29440: Fix QA-tool issues
    
    Signed-off-by: Michał Kula <148193449+mkibp@users.noreply.github.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit aa86825c337ed70e69ac31db048ba0ea388f551c
Author: David Gustafsson <glasklas@gmail.com>
Date:   Tue Nov 9 12:52:03 2021 +0100

    Bug 29440: Make authorities import behavior consistent with biblios
    
    The current behavior for when importing authorities, when match
    option is enabled, is to insert as a new authority fetching from db
    fails. This is both a bit confusing and not consistent with the biblio
    case where an error is generated. Also clean up error and log messages
    so both messages/errors and when messages/errors are issued are more
    consistent for the biblio and authority case.
    
    Signed-off-by: Frank Hansen <frank.hansen@ub.lu.se>
    Signed-off-by: Michał Kula <148193449+mkibp@users.noreply.github.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 261baeff85ac2e1a6d546582dd87e352fc9f9776
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Wed Mar 15 11:30:50 2017 +0100

    Bug 29440: Refactor and clean up bulkmarcimport.pl
    
    To test:
    1) Import biblios using ./bulkmarcimport.pl -v -b -file biblios.mrc -insert -update -c=MARC21 -match "control-number,001" -n=1 -l "/tmp/import.log"
    2) Verify in /tmp/import.log that one biblio has been inserted
    3) Import again without the "-n" option, verify that one biblio has been
       updated and the rest inserted
    4) In the staff interface search the catalog for some string appearing in
       the imported biblios to verify records have been indexed
    5) View/edit some of the biblios the staff interface to very have been
       properly imported
    6) Import authorities using ./bulkmarcimport.pl -v -m=MARCXML -a -file authorities.xml -insert -update -c=MARC21 -keepids="024a" -match "heading-main,100a" -l "/tmp/import.log" -yaml="/tmp/ids.yml"
    7) Go to the authorities page and find the imported authority by for example search for a
       400 or 100 field value. Verify that the 001 field of the incoming record has been moved to 024a.
       Also check that the value of 024a appear as a key in /tmp/ids.yml.
    8) Edit the authorities.xml file and change the value of field 400a
    9) Import authorities again using the same options
    10) Verify that the 400a field of the authority in Koha has not been
       updated (the import was skippped since revision did not change)
    11) Edit authorities.xml, replace the value of field 005 in the file with field 005
        of the authority in Koha incremented by one
    12) Import again with the same options
    13) Verify that the 400a field of the authority in Koha now have been
        updated
    
    Signed-off-by: Michał Kula <148193449+mkibp@users.noreply.github.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2d668f22dcde6c9aadc35aa17b886282dd184171
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Mar 18 09:37:17 2024 +0000

    Bug 33036: (QA follow-up) Tidy code
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8a9bf27dc11ee12a882cace6443120e9f294d0b2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Dec 14 11:08:37 2023 +0100

    Bug 33036: Improve REST API controller
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7bce391462de5665722994a61d5138841bf8db65
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Dec 14 10:55:42 2023 +0100

    Bug 33036: Use Koha::Objects
    
    Better to use Koha::Objects everywhere and have the same pattern for the
    different related objects.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 52503c4f8752f2462beb8d70a532cccce482e56c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Dec 14 10:29:32 2023 +0100

    Bug 33036: Add more tests
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 06f9ca376b5acb39a84de0ab11ea78ab65e996bd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Dec 14 10:00:25 2023 +0100

    Bug 33036: Improve merge_with tests
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c60a6d8cd994c7af5a5ce234525fae02a933ad0b
Author: Zeno Tajoli <z.tajoli@cineca.it>
Date:   Wed Nov 15 08:41:17 2023 +0100

    Bug 33036: REST API: Merge biblio records implements merging of records
    
    + attached items, subscriptions etc via the API as an alternative to the web interface: cgi-bin/koha/cataloguing/merge.pl
    
    This is a slightly improved version of Zenos patch: I (domm) have converted the code in Koha::Biblio to a more DBICy style and packed it into a transaction (as requested in Comment 23)
    
    Even the QA script is happy now!
    
    To test:
        1) you need an API user with the permissions "editcatalogue"
        2) two records: one to be merged into (with biblio_id, eg 262) and another one from
           which to merge (with biblio_id_to_merge, eg 9) which will be deleted!
           both records may/should have items, subscription, subscriptionhistory, serial, suggestions
           orders and holds
        3) check both records via the web
        4) Apply patch
        5) Write a JSON file with inside the field 'biblio_id_to_merge' and the biblionumber from wihich to merge.
           As example:
           {
             "biblio_id_to_merge" : 9
           }
         6) Execute an API call with correct headers and location. For example:
            curl -s -u koha:koha --header "Content-Type: application/json" --header "Accept: application/marc-in-json"
                      --request POST "http://127.0.0.1:8080/api/v1/biblios/262/merge" -d @file.json
            You must to setup the headers and to use a json file with parameters
         7) The record with the id 9 is deleted now, the record with 262 has all items, etc attached,
            the return is: return code 200 and the changed record 262 in marc-in-json format
         8) It is possible to override biblio data with an external bib record. You need to put external bib record
            into the json file in marc-in-json format. To write use the json file uploaded as example
            You need to fill the fields 'rules' and 'datarecord'. The field 'rules' must contains 'override_ext'
            To do the call:
             curl -s -u koha:koha --header "Content-Type: application/json" --header "Accept: application/marc-in-json"
                      --request POST "http://127.0.0.1:8080/api/v1/biblios/XXX/merge" -d @file_with_recod.json
          9) The record in 'biblio_id_to_merge' is deleted now, in biblio XXX now there are the bibliographic data
             of field 'datarecord' of json file, the return is: return code 200 and the changed record XXX in marc-in-json format
          10) Go into intranet and do a search. Select two or (better) more record.
          11) Merge them; merge must be a success.
          12) Test with prove -v t/db_dependent/Koha/Biblio.t
          13) Test with prove -v t/db_dependent/api/v1/biblios.t
    
    To test with curl the step 8 you can customize the json file attached in bugzilla.
    The marc-in-json record inside follows the MAR21 standard
    
    Sponsored-by: Technische Hochschule Wildau
    Co-authored-by: Zeno Tajoli <ztajoli@gmail.com>
    Co-authored-by: Thomas Klausner <domm@plix.at>
    Co-authored-by: Mark Hofstetter <<mark@hofstetter.at>>
    Signed-off-by: Jan Kissig <jkissig@th-wildau.de>
    
    Bug 33036: Update of test number.
    
    File ../biblios.t was update with a new subutest.
    So we need this update to have a 'OK' after test running.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a4ad43724c0e75abc27cb536b8b0c3ccb1761bba
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Apr 6 11:27:14 2023 -0300

    Bug 33431: Fix remaining cases
    
    This patch tweaks three remaining cases, that are not covered by tests.
    
    To test:
    1. Apply this patch
    2. Make use of those places
    => SUCCESS: No behavior change
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 457c948ad003d23c249e2990de750c2aaab418ec
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Apr 6 10:55:41 2023 -0300

    Bug 33431: Make C4::Record use C4::Context->yaml_preference
    
    This patch makes what the title says.
    
    To test:
    1. Run:
       $ ktd --shell
      k$ prove t/db_dependent/Rec*
    => SUCCESS: Tests pass
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: Tests pass!
    4. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 814d4fd05bf6a23aba1493b3e2117869438ea5f6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Apr 6 10:48:04 2023 -0300

    Bug 33431: Make C4::Circulation use C4::Context->yaml_preference
    
    This patch removes manual YAML handling for sysprefs in C4::Circulation.
    
    It also makes C4::Context->yaml_preference not warn when undef is
    retrieved from the sysprefs.
    
    To test:
    1. Run:
       $ ktd --shell
      k$ prove t/db_dependent/Circulation*
    => SUCCESS: Tests pass!
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: Tests pass!
    4. Sign off :-D
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7095b707ffc94f2fc821e669d675be43e6e867ba
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Nov 29 11:11:37 2023 +0000

    Bug 33171: Fix missing price when mapped from MarcItemFieldsToOrder
    
    This patch fixes an issue where the price is not passed to the UI when read from MarcItemFieldsToOrder.
    
    Test plan:
    1) In Administration, copy and paste the following into MarcItemFieldsToOrder:
    quantity: 975$q
    budget_code: 975$h
    price: 975$p
    itype: 975$y
    coded_location_qualifier: 975$a
    barcode: 975$b
    enumchron: 975$c
    2) Save
    3) Navigate to Acquisitions and find a basket
    4) Click Add to basket and select From a new file
    5) Choose the file attached to this bug
    6) Upload file and click Stage for import
    7) Click Add staged files to basket once the job is finished
    8) Check the box next to the record
    9) The price should show 10.00 under Item record 1
    10) coded location qualifier, barcode, enumchron should also have values as per the other commit on this bug
    11) Save and import, the basket should not have a value of 0 as the price has been read correctly
    12) Check the database, the newest item should have values for price, coded_location_qualifier, barcode and enumchron
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4a6cf130219be37b2c5da4e7849a023e4e5294f1
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Mar 8 11:08:37 2023 -0500

    Bug 33171: Add coded_location_qualifier, barcode, and enumchron to MarcItemFieldsToOrder
    
    Some libraries would like to use the following item fields with the MarcItemFieldsToOrder system preference:
    * coded_location_qualifier
    * barcode
    * enumchron
    
    Test Plan:
    1) Set up MarcItemFieldsToOrder, verify it is functioning
    2) Test coded_location_qualifier, barcode, and enumchron
    3) Note the fields are imported and set for the items
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8d84f8496b7b9c7734a4ce6f2c05a1087bfab628
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Mar 18 08:44:24 2024 +0000

    Bug 35331: Fix URL parmameter in unit test
    
    method => op
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bb6ce70399a4d505305bb20218bb45c6142693a1
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Nov 16 10:01:16 2023 +0000

    Bug 35331: (QA follow-up): Patron ILL history
    
    With the previous patches applied and successfull test plans, access the users ILL history page, visit:
    /cgi-bin/koha/members/ill-requests.pl?borrowernumber=51
    
    Notice you get an error.
    Apply this patch, and try again, notice the error is gone and the custom plugin action is also in the patron's ILL history table
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bcdbc68d9a98277b86888c331cc46ca7fd3de635
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Nov 15 15:26:33 2023 +0000

    Bug 35331: (QA follow-up): Avoid code pattern iterating on plugin responses
    
    (see bug 28010) Use plugin call pattern established in bug 28211.
    
    Please utilize version 1.0.1 of the plugin to test this follow-up:
    https://github.com/PTFS-Europe/koha-plugin-ill-actions/releases/tag/v1.0.1
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e370b6698ee843bdc97f24f3e294561f9ac6536d
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Nov 14 09:41:24 2023 +0000

    Bug 35331: Add plugin hook tests
    
    prove t/db_dependent/Koha/Plugins/Ill_hooks.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bff94dee7785aaf4069ef543d7fea97ccd2905a1
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Mar 6 10:25:08 2024 +0000

    Bug 35331: CSRF follow-up
    
    Update method to op
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d337541353580e936a70c7548ce77942694d65af
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Nov 13 17:24:23 2023 +0000

    Bug 35331: Add table actions hook to ILL table
    
    Test plan, k-t-d, apply patches:
    1) Install FreeForm backend, enable ILLModule sys pref, run:
       bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev.sh)
    2) Navigate to ILL requests, visit:
       /cgi-bin/koha/ill/ill-requests.pl
    3) Click '+New ILL request', select a type, enter an existing cardnumber (e.g. '42') and pick a library. Click 'Create'.
    4) Visit ILL requests again, repeat 2)
    5) Notice the row for the created request has the already existing action button 'Manage request'
    6) Install the ILL actions plugin, located at:
       https://github.com/PTFS-Europe/koha-plugin-ill-actions/releases/tag/v1.0.0
    7) Restart plack, run:
       koha-plack --restart kohadev
    8) Repeat 4) and 5). Notice the row for the created request now has a new custom action in addition to the already existing core one.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d94bf8a5d5adc4b0b316e41e285d39de6a8f3d76
Author: Emily-Rose Francoeur <emily-rose.francoeur@inLibro.com>
Date:   Tue Oct 31 08:58:51 2023 -0400

    Bug 26597: Update the description of the PrefillGuaranteeField system preference
    
    I updated the system preference description so that we now know this option is working from both the guarantee and guarantor forms.
    
    Signed-off-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ab61a934a423d132cf092fee207baf7b4bb90f4c
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Wed May 31 13:15:18 2023 +0000

    Bug 26597: (QA follow-up) Add missing filters
    
    Signed-off-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9ee8d21b264bed3dd92583f92c1a374c9c6920cd
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Tue May 30 21:41:14 2023 +0000

    Bug 26597: (Fix) remove REST API call and retrieve the patron's data from borrower_data input
    
    This patch remove the REST API call in select_user function and retrieve the patron's data from borrower_data
    
    To test:
    1) Apply patch
    2) Search PrefillGuaranteeField preference and make sure some fields are selected
    3) Select a user that can have a guarantor
    4) In the edit form, click on "Search to add" in "Patron guarantor" fieldset
    5) Choose a patron who has at least one of the fields in 1) set
    6) Click Select
    7) Confirm guarantee's information is filled from the guarantor's record
    8) Check that any preexisting information is not overwritten
    
    Signed-off-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0b789bbc9638c34d0b01480b756eb65478a90617
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Wed Mar 22 15:25:43 2023 +0000

    Bug 26597: (follow-up) Add disabling / enabled the save button while waiting from api to respond
    
    I've updated the test plan since the REST API route takes a little time to respond
    
    To test:
    1) Apply patch
    2) Search PrefillGuaranteeField preference and make sure some fields are selected
    3) Select a user that can have a guarantor
    4) In the edit form, click on "Search to add" in "Patron guarantor" fieldset
    5) Choose a patron who has at least one of the fields in 1) set
    6) Click Select
    7) Wait until save button is enabled
    8) Confirm guarantee's information is filled from the guarantor's record
    9) Check that any preexisting information is not overwritten
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b9e4b88d32fd99447a4b03e899701836a5fbfbab
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Tue Dec 13 22:27:29 2022 +0000

    Bug 26597: Fixing the populate of fields when using the REST API route
    
    This attachment correct the populate of fields by using the api mapping.
    Now All fields are populated following the selected PrefillGuaranteeField options
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d3822c7d86f523079a31e125f0f1af3f5da92379
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Wed Dec 7 16:51:20 2022 +0000

    Bug 26597: Transfer informations from guarantor when adding a guarantor to an existing patron
    
    When creating a new guarantee from the guarantor, the preference PrefillGuaranteeField dictates some fields to be transfered from guarantor to guarantee. This patch makes it so those informations are also transfered when adding a new guarantor relationship to an existing patron.
    
    To test:
    1) Apply patch
    2) Search PrefillGuaranteeField preference and make sure some fields are selected
    3) Select a user that can have a guarantor
    4) In the edit form, click on 'Search to add' in 'Patron guarantor' fieldset
    5) Choose a patron who has at least one of the fields in 1) set
    6) Click 'Select'
    7) Confirm guarantee's information is filled from the guarantor's record
    8) Check that any preexisting information is not overwritten
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3954808ac5052a53d5fa40502a4f7bd991be80ab
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 26 13:15:12 2024 +0000

    Bug 29522: Unit test
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1b9371beb33dae4b661768609dca9930a91bfb56
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Sep 6 15:48:12 2023 +0000

    Bug 29522: [alternate] Skip relinking bibliographic records when merging authorities
    
    If autolinking is enabled, there are scenarios where the authorities merge process
    updates the record, then sends it to ModBiblio which then AutoLinks the record, undoing
    the changes in the record (as the 'from' authority is not removed until the process is complete)
    
    This patch simply disables the autolinking process when merging authorities
    
    To test:
    
    Set system preferences
        AutoCreateAuthorities = don't generate
        RequireChoosingExistingAuthority = don't require
        AutoLinkBiblios = Do
        CatalogModuleRelink = Do
        LinkerKeepStale = Don't
        LinkerModule = first match
        LinkerRelink = Do
    
    1. Create an authority record
       1.1. Go to Authorities
       1.2. Click on "New authority" and choose an authority type (I chose Corporate name)*
       1.3. Fill in the mandatory fields (000, 003, 005, 008, 040)
       1.4. In tab 1, click on the label of the main heading (110 for Corporate name)
       1.5. Fill in subfield
       1.6. Copy content of subfield
       1.7. Click on "Save"
       1.8. Note the authority record number
    
    2. Duplicate the authority record
       2.1. Click on "Edit" and choose "Edit as new (duplicate)"
       2.2. Click on "Save"
       2.3. Click on "No: Save as new authority"
       2.4. Note the authority record number (should be the number from step 1.8 +1)
    
    3. Link one of the authority records to a bibliographic record
       3.1 In another tab, do a catalog search
       3.2. Click on "Edit record" under one of the search results
       3.3. Go to the relevant tab (for corporate name, I used field 710 in tab 7)
            3.3.a. If there are no empty fields for that tag, click the "Repeat this tag" button (two rectangles)
       3.4. Paste the text previously copied in subfield
       3.5. Click on "Link authorities automatically" at the top of the page
       3.6. Note the authority record number in subfield
            --> The linked authority record should be the first authority record (step 1.8)
       3.7. Click on "Save"
    
    4. Merge the two authority records, keep the one that is not linked to the bibliographic record
       4.1. Go back to the tab with the authorities
       4.1. Go to Authorities
       4.2. Search for the aurhorities previous created
       4.2. Click on "Actions" and choose "Merge" for both records
       4.3. Select the record number that is NOT linked to the bibliographic record
       4.4. Click on "Next"
       4.5. Click on "Merge"
    
    5. Check the bibliographic record
       5.1. Go back to the tab with the bibliographic record and refresh the page (Ctrl+F5)
       5.2. Hover the mouse cursor over the name or term, without clicking
       5.3. Note the record number that appears at the bottom of the screen
            --> The record number was not changed
    6. Apply the patch
        6.1. Run prove t/AuthoritiesMarc_MARC21.t
        6.2. Repeat Previous steps 1, 2, 3, 4, 5
            --> The record number is change
    
    Signed-off-by: Barbara Petritsch <barbara.petritsch@wienmuseum.at>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bf4b39cb3b4a4142e5d9cae4fc59677280df8c8a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 15 11:37:54 2024 +0000

    Bug 35944: (QA follow-up) Tidy
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 48f9867203e01830a5c5643c5add4a44faff70cd
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 15 11:35:38 2024 +0000

    Bug 35944: (QA follow-up) Check if there are bookings before other calculations
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2cbf17489760a37012f02107b3590821eb9f95dc
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Feb 26 09:27:27 2024 +0000

    Bug 35944: Add link to 'booked' biblio in checkouts table
    
    This patch updates the checkouts table so handle 'booked' items
    including linking to the biblio booking details page.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c5522bc81e5b3c16702450ce61c25d1ccbef173a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Feb 26 08:15:50 2024 +0000

    Bug 35944: Add message to SIP renewal attempt
    
    This patch adds a replacement for 'booked' to the SIP renewal handling
    so we can display 'Item is booked for another borrower'.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 59afaf533b5f8a092f0442f9a8e004bc3db644c5
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Feb 19 12:31:07 2024 +0000

    Bug 35944: Add booking handling to CanBookBeRenewed
    
    This patch adds a bookings check to CanBookBeRenewed
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e9c541506a49c6d6a10250f091d9fafdae675234
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Feb 20 18:04:49 2024 +0000

    Bug 35944: Unit tests
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 03b0f31b9e63ce314c333ac6ffd68587a609e587
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Mar 15 09:05:55 2024 -0300

    Bug 36277: Avoid useless warnings
    
    As mentioned on bug 36329, this endpoint is only used with one of this
    parameters:
    
    * item_type
    * collection_code
    
    The other will be NULL both on the DB and the (deserialized) request
    body. For the data from the DB, the author added `|| q{}` but missed to
    do so on the incoming parameters when generates the hash key.
    
    This generates the following warnings when using from the UI:
    
    [2024/03/15 11:42:51] [WARN] Use of uninitialized value in sprintf at /kohadevbox/koha/Koha/REST/V1/TransferLimits.pm line 146.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 202628342ab9397e8b15aa5e62c0aaa041d3c8a0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 14 14:39:56 2024 +0100

    Bug 36277: Improve algorithmic complexity of batch_add
    
    The 2 nested loops are terrible in term of algorithmic complexity.
    Especially if we are fetching from there.
    
    The goal of this patch is to fetch all the limits outside of the loop.
    
    If you have 100 libraries, it will remove 100^2 - 1 fetches!
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 14388b6478858e298a9f0de104d5e839bc8cb430
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 14 14:06:28 2024 +0100

    Bug 36277: Do not fetch the whole library list
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 687963b016bb9e3f74abebc64c830e53ab4d1e50
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Mon Jan 29 15:25:19 2024 -0500

    Bug 35934: Correct missed case of switching items.transfer to transfer in detail.tt
    
    To test:
    1. Put an item with no holds/recalls in transit (manually or by checking
      it in at a branch other than its homebranch to trigger a ReturnToHome)
    2. Go to the item's bib record
    --> Note that the item's status will display as something like,
        "In transit from X to Y since 01/29/2024 Available"
    3. Apply patch and refresh the page
    --> Note that item now shows only the transit status, but not "Available"
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e07c6d072977b9e52dc2153fd36f03601e161c1a
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Mar 5 16:00:39 2024 +0000

    Bug 36224: Remove unused spsuggest from templates
    
    To test:
    -APPLY PATCH
    -Review the OPAC results and staff interface results pages.
    -Nothing should change, it would be impossible to end up inside of the [% IF koha_spsuggest %] condition because there is nothing like that in the scripts!
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e2d54b1279b65507596ca3a08d6b44d1b15fe2b8
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Mon Mar 11 14:43:26 2024 +0000

    Bug 36292: Fixed 'See all charges' hyperlink for guarantees/guarantor linked charges
    
    To test:
    1. Add a guarantee / guarantor relationship for two patrons.
    2. Add a manual fee to the guarantees' account.
    3. Go to the guarantor's account and view the 'Details' tab. Under contact information there should be a Guarantees section. There you will see the charges for your guarantee. Click on ‘See all charges’. The link leads you no where.
    4. Apply the patch and restart_all
    5. Refresh the guarantor’s page and click on ‘See all charges’ again. This time it will take you down to the ‘Guarantees’ Charges’ panel.
    6. Sign off and have a great day! :D
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3c0ac4cb9a4290c770aa8e4837b6d639b49c97e9
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Mar 12 11:18:18 2024 +0100

    Bug 36298: In patrons search fix road type with authorized value
    
    In new patrons search via API, the road type code is displayed in patron address instead of authorized value description.
    
    Also road type is missing a space separator in DE and FR format.
    
    Test plan :
    1) Create two entries in authorized value category "ROADTYPE" :
       R1 "Road"
       R2 "Street"
    2) Edit a patron (ie Delgado, Floyd) to set road type to "Road"
    3) Perform a search on patrons (click on letter D)
    4) Check you see in address "Road" and not "R1"
    5) Edit authorized value category "ROADTYPE" to delete entry "R1"
    6) Perform a search on patrons (click on letter D)
    7) Check you see in address "R1"
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 304d8e17d643b758426584747477dbd6d856acf1
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Mar 15 08:59:26 2024 +0000

    Bug 35997: (QA follow-up) Number of tests
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4d2df6f9859ddc1f1d96008a6b3373380f0913d7
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Feb 5 14:44:46 2024 -0500

    Bug 35997: Cancelling a hold should remove the hold from the queue
    
    Test plan:
    1) Place a hold for a record for a patron
    2) Build the holds queue
    3) Note the holds queue contains a match for that patron and record
    4) Cancel the holds queue
    5) Reload the holds queue page, note the match for  that patron and
       record is gone!
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit eff15066b29e481728c023b4646d0e0947764662
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Feb 5 14:44:46 2024 -0500

    Bug 35997: Add tests
    
    Test plan: see next patch
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 23b05e812aa40ba452a951002d036b2d6c67441d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 15 14:56:26 2024 +0100

    Bug 36332: Add missing semicolon in moremember.tt
    
    It's fixing a JS error
    Uncaught ReferenceError: script is not defined
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 60dcb2b0775ba4d47502e68af5d4aa3c127f0f81
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Mar 8 21:32:21 2024 +0000

    Bug 35796: Properly set patron_expiration value
    
    To test:
    1) Set an expiration on the password in a patron account and save.
    2) Go to patron details (moremember.pl) and confirm the password has an expiration.
    3) Edit the patron account without touching anything and save the account.
    4) Go back to patron details (moremember.pl) and note that the expiration on the password has been removed.
    5) APPLY PATCH
    6) Try 1 - 4 again except this time password expiration is not removed.
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9a6a0611f8905344493bb471c102e9d0fa958c4b
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Mar 7 23:09:56 2024 +0000

    Bug 36274: Correct links leading to purchase suggestion page
    
    To test:
    1. APPLY PATCH
    2. As a logged in OPAC user go to 'Your account' > Purchase suggestion. The form should display.
    3. Make a suggestion and confirm it works.
    4. Try to make a suggestion using title, author, isbn information from an item that already exists.
    5. See the "A similar document already exists:" warning. Confirm the suggestion anyways.
    6. Set MaxTotalSuggestions to 4 and NumberOfSuggestionDays to 2. Make sure you can still navigate to the purchase suggestion form.
    7. Do an OPAC search that will yield no results as a logged in user.
    8. Click the "Make a purchase suggestion" link, making sure it works.
    9. Turn on AnonSuggestions and log out of the OPAC.
    10. Do an OPAC search that will yield no results. Again click the "Make a purchase suggestion", confirm it works.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b1fc9658782d9831ea5db8199c2e4156d4779ac7
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Mar 15 08:15:03 2024 +0000

    Bug 36305: (QA follow-up) Enforce op values in script
    
    Replacing a FIXME by TODO along the way.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 21eb80cc6656e2e18332327b78dd61412f3b5182
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Mar 13 12:19:31 2024 -0400

    Bug 36305: Implement op paramters
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 10d0c4ccabfd91737356c1ce1caec12caabefda6
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Mar 13 12:00:52 2024 -0400

    Bug 36305: Tidy forms
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e7019264429b90cc4e7d315f7aa600a23fec984a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 13 10:52:28 2024 +0000

    Bug 36190: Fix problems found by test
    
    opac-shelves           - forms were stateless - changed to GET
    sco-main               - forms stateless - changed to GET
                             ** untested because sco + auth is broken
    smart-rules.tt         - JS form template - added placeholder 'cud-' op
    ill-requests           - added cud- tp ops
                             ** tested comments, but not checkout, simple changes
    boraccount             - removed repeated op - updated script
    patroncards/edit-batch - add placeholder 'cud-' op
    patroncards/manage     - add placheholder 'cud-' op
    elasticsearch/mappings - separate forms - this could use a style follow-up, but makes more sense separate I think
    reports/dictionary      - stateless - changed to GET
    guided_reports_start    - stateless - changed to GET
    suggestion/suggestion   - add placeholder 'cud-' op
    inventory               - filed bug 36305, needs more handling
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1a54cf5f5b6f8fd764fce593b550a14e4f1246d8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 13 10:51:08 2024 +0000

    Bug 36190: (QA follow-up) Tidy
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b0cb778a3223523b931194263bad0b1cfdac4964
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 28 14:11:01 2024 +0100

    Bug 36190: To not assume op is invalid if it is a TT variable
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f19c7211714b8ab2ef98e6af06fd2c05a97818ab
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 28 14:06:12 2024 +0100

    Bug 36190: Adjust the test
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 293d9c66ce16742de770a1c4133ab60128f30b6d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jan 15 15:33:40 2024 +0000

    Bug 35473: Also disable the plugin
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit af47cc3056658182163c98585f364cec3bbba1b0
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jan 11 10:24:04 2024 +0000

    Bug 35473: Handle room reservations plugin conflict
    
    We now look for the existance of the room reservations 'bookings' table
    prior to attempting to install the core bookings table and migrate it in
    the same way the upstream plugin does before proceeding with installing
    the core bookings tables.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e9352886facb73d3af056b03c6777366c197459c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 13 17:51:29 2024 +0000

    Bug 36308: Update sip login parameters
    
    To test:
    perl misc/sip_cli_emulator.pl -a localhost -p 6001 -su term1 -sp term1 -l CPL -m patron_information --patron=koha
    Login fails
    Apply patch, restart all
    perl misc/sip_cli_emulator.pl -a localhost -p 6001 -su term1 -sp term1 -l CPL -m patron_information --patron=koha
    Login succeeds
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 49068e15377b8610f18900db0b91f875ea946ff8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Feb 8 11:52:09 2024 +0000

    Bug 35248: Add tests for Koha::Booking->_assign_item_for_booking
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d0981505ba799b78206e9945d3bd465e0a5c5ef7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Feb 7 17:10:40 2024 +0000

    Bug 35248: Refactor - Move assign_item_for_booking
    
    This routine really belongs inside Koha::Booking rather than
    Koha::Biblio. This patch moves it there, renames with _ to highlight
    it's private nature.
    
    Test plan
    1) Confirm that t/db_dependant/Koha/Booking.t still passes, specifically
       the 'store' test.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 89fc242e97a83fc83748e4a5480c648ffe6dcb66
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Feb 7 17:58:11 2024 +0000

    Bug 35248: Add tests for Koha::Booking->store
    
    This patch adds tests for the Koha::Booking->store method.
    
    Test plan
    1) Run t/db_dependent/Koha/Booking.t and confirm they all pass
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c6892074b82d81997f9ae91d18e7cf1edc78ad19
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Feb 7 16:38:20 2024 +0000

    Bug 35248: Add unit tests for Koha::Bibilio->bookable_items
    
    This patch adds basic unit tests for Koha::Biblio->bookable_items
    
    Test plan
    1) Run t/db_dependent/Koha/Biblio.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 17460a41a165c187dbe1ca701490dd5d03acb990
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jan 30 16:38:08 2024 +0000

    Bug 35248: Add unit tests for Koha::Bibilio->check_booking
    
    This patch adds basic unit tests for Koha::Biblio->check_booking
    
    Test plan
    1) Run t/db_dependent/Koha/Biblio.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4d8020258ff2ea0dae41325e7fab724831dc96aa
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jan 30 14:00:17 2024 +0000

    Bug 35248: Add Koha::Biblio->bookings unit test
    
    This patch adds unit tests for the bookings relationship accessor on
    Koha::Biblio objects.
    
    Test plan
    1) Run t/db_dependant/Koha/Biblio.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5384aea5102c55c4891839d71c3902c7e22f3da4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jan 30 13:53:02 2024 +0000

    Bug 35248: Add unit tests for Koha::Booking relations
    
    This patch adds unit tests for the relations introduced in the new
    Koha::Booking class.
    
    Test plan
    1) Run t/db_dependent/Koha/Booking.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b351ab12de684b212d58d055b363621899465d70
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jan 30 11:09:17 2024 +0000

    Bug 35248: Remove Koha::Booking->intersects
    
    Another method left behind from an earlier iteration.. not actually
    called anywhere in the final submission in Koha.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8e370de1d9ea4ba9f1ba17f3ea8bbb28d5bc4479
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jan 30 07:45:13 2024 +0000

    Bug 35248: Add test for Koha::Exceptions::Booking
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6b8c52104c2d2930ed68b66578ebdda507065469
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jan 30 07:34:56 2024 +0000

    Bug 35248: Drop ->place_booking
    
    These methods were introduced and used in an earlier iteration of the
    code, they are no longer called from anywhere (the code in
    Koha::Booking->store handles all cases instead) and thus I choose to
    remove them rather than add unit tests for them.. They are simple
    methods that could be re-introduced as required at a future date.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3496ebee89b9d3ee9d4c22fb772038038010bac1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jan 29 18:34:46 2024 +0000

    Bug 35248: Add unit tests for Koha::Item->check_booking
    
    This patch adds basic unit tests for the Koha::Item->check_booking
    method.
    
    Test plan
    1) Run t/db_dependant/Koha/Item.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit df39d76f305deec6cf7c938299cd1b05f8b32591
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jan 29 16:32:09 2024 +0000

    Bug 35248: Unit tests for CanBookBeIssued
    
    Whilst writing the test, I found a minor flaw in the logic and fixed
    that in CanBookBeIssued at the same time.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit dab5694dad54616367d0ecba365a37711e86ad2f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jan 16 12:47:18 2024 +0000

    Bug 35248: Add unit tests for Koha::Item->find_booking
    
    This patch adds basic unit tests for the Koha::Item->find_booking
    method.
    
    Test plan
    1) Run t/db_dependant/Koha/Item.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6fdc3fdba2efde5d5c1c07b775892a799420c316
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jan 16 11:31:41 2024 +0000

    Bug 35248: Add unit test for Koha::Item->bookings relation
    
    This patch adds a simple unit test for the 'bookings' relation accessor
    added to Koha::Item.
    
    Test plan
    1) Run t/db_dependant/Koha/Item.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2b1469a8c68d596e1451262e3f8566f9b510c7de
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jan 15 10:43:44 2024 -0300

    Bug 35788: Simplify code
    
    We should not load DateUtils and deal with DateTime objects and
    formatting when we can use the DB for it, using \'NOW()' should be
    enough.
    
    This patch makes that change. To test:
    
    1. Apply the previous patches
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/Koha/Bookings.t
    => SUCCESS: Tests pass!
    3. Apply this patch
    4. Repeat 2
    => SUCCESS: Tests pass!
    5. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fe2ae96cf31ed1d699f5825b00fd40c4442f8671
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jan 15 10:35:04 2024 -0300

    Bug 35788: Test for current day booking
    
    The implemented tests checked past and future dates for filtering
    bookings. But `> NOW()` excludes the current date, and this case was not
    covered. It is now.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 93b1cbd69aac54425a6aa492a7d0dd560b81154e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 12 14:19:33 2024 +0100

    Bug 35788: Remove Koha::Template::Plugin::Biblio::BookingsCount
    
    We need a new method filter_by_future in Koha::Bookings.
    
    Additionally this TT plugin's method was not covered by tests. Neither
    is the whole Koha::Booking[s] objects btw.
    
    Test plan:
    Confirm that the number of bookings is displayed in the "Bookings" tab
    in the left menu of the bibliographic record detail page.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 585a5fb927f39b31fde3b103528e2bbf8b6df20a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jan 16 09:47:10 2024 +0000

    Bug 35787: Add unit test for filter_by_bookable
    
    Trivial test added for filter_by_bookable
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bd987c7046d335a9525b65d12601be43e3bddccb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 12 14:02:29 2024 +0100

    Bug 35787: Remove Koha::Template::Plugin::Biblio::CanBook
    
    We can replace it with biblio.items.filter_by_bookable, no need to have this TT method.
    
    Additionally there was no test for it.
    
    Test plan:
    Make sure the Bookings tab on the left of the biblio detail page is
    displayed when needed.
    
    Note that there is also a "Place booking" button that should appear in
    the toolbar.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7af65cf1febb97a6abe6ab7644ac917770a6f4ed
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Mar 15 07:36:44 2024 +0000

    Bug 35782: DBRev 23.12.00.007
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 10ac7876d6327058fb86914dde044c6a8053b15b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 12 15:22:52 2024 +0100

    Bug 35782: Fix scoping problem with "biblio"
    
    The "biblio" Koha::Biblio object we send from the controller needs to be
    accessible from the include files.
    To avoid a clash we rename it biblio_info
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 06c09e15fd23fc9db2b99392e263e6d233339c15
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 12 08:44:12 2024 +0100

    Bug 35782: Replace TT plugin's method Biblio::HoldsCount
    
    We can use biblio.holds.count instead.
    
    The main idea here is to make sure we are passing a Koha::Biblio object
    as 'biblio' to all the templates including biblio-view-menu.inc
    
    Test plan:
    1. Go to the biblio detail view, click on the different entries in the menu
    on the left. Confirm that the "Holds" tab always has the correct number
    of Holds display in the parenthesis.
    
    2. Run a search and confirm that the number of holds are still displayed
    for each result.
    
    QA:
    git grep biblio-view-menu.inc
    notice the tt list, open the corresponding perl controllers and confirm
    that 'biblio' is passed and that it is a Koha::Biblio object.
    The only missing place I found was in viewlog.
    Note that we are not removing the TT method yet, we are marking it as
    deprecated and also display a warning during the update DB process in
    case one of the notice templates is using it.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 638b5ef1b4a02b97c14b6166b1db7c4701fb741b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Mar 14 10:58:48 2024 +0000

    Bug 36233: Set select2 width to 100%
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c29390736f7c49d7276733ea96abfffb24ebcda7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 6 19:24:30 2024 +0000

    Bug 36233: (follow-up) Fix width and enable clear option
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6b1b3718889f3674ac00eccbe3e0636a66f2c1a5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 5 14:52:16 2024 +0000

    Bug 36233: Use select2 to load vendors on invoice search
    
    This patch moves the dropdown to use select2 and avoids loading all
    vendors at page load.
    
    To test:
     1 - Create some extra vendors in your system, ideally over 20
     2 - Search for a vendor in acquisitions
     3 - Click 'Invoices'
     4 - Note the dropdown of all vendors 'Vendor:' in search bar on left
     5 - The vendor you came from shoudl eb selected
     6 - Apply patch
     7 - Repeat
     8 - Note only a partial list of vendors is loaded, confirm current vendor still selected
     9 - Search in the dropdown and confirm vendors are returned
    10 - Select a vendor and search
    11 - confirm selection is retained
    
    Signed-off-by: Lisette Scheer <lisette@bywatersolutions.com>
    Rebased-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e29e058851c1ffec5bcadab8bba357cd53142a2b
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Mar 8 06:07:52 2024 -0500

    Bug 33898: Implement reaping for database polling
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bc42006019acf17e0c9b7284070e2f776dc77335
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Mar 8 07:37:19 2024 +0000

    Bug 33898: Alternative approach with receive frame timeout
    
    See bug 33898 comment6.
    
    Test plan:
    Based on comment12: Stage MARC import and manage. Look at the same
    time to the results of ps aux|grep Z. Verify that the lines with
    [background_jobs] <defunct> disappear within 10 seconds.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4e166e07c15a5726319e20bfef21dc543f0b58a4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Mar 11 16:41:12 2024 +0100

    Bug 32671: Prevent selenium/basic_workflow.t to fail if run on slow servers
    
    When submitting the form to create a new patron we are doing a POST
    memberentry.pl that is redirecting to moremember.pl
    
    The selenium test is expecting for the end of the request to test the
    page's title against "Patron details for ".
    
    But it's only waiting for the POST response (302), not the GET
    moremember that will display the patron's details.
    
    You can simulate a slow server using cpulimit: `cpulimit -b -p $PID -l 1`
    replacing $PID with the pid of the starman process.
    
    Note that other tests are failing using 1%, but... baby steps.
    
    The current failre:
     #   Failed test at t/db_dependent/selenium/basic_workflow.t line 122
     Wide character in print at /usr/share/perl/5.32/Test2/Formatter/TAP.pm line 125
     #                   'Add patron (test cat description) › Patrons › Koha'
     #     doesn't match '(?^u:Patron details for test_patron_surname)'
    
    The next one (NOT fixed by this patch):
    
     #   Failed test at t/db_dependent/selenium/basic_workflow.t line 256.
     #                   '
     #
     #             Checkouts (0)#         #         '#     doesn't match '(?^u:Checkouts \(1\))'
     t/db_dependent/selenium/basic_workflow.t .. 14/22 #   Failed test at t/db_dependent/selenium/basic_workflow.t line 256.
     #                   '
     #
     #             Checkouts (1)
     #
     #         '
     #     doesn't match '(?^u:Checkouts \(2\))'
     t/db_dependent/selenium/basic_workflow.t .. 16/22 #   Failed test at t/db_dependent/selenium/basic_workflow.t line 256.
     #                   '
     #
     #             Checkouts (2)
     #
     #         '
     #     doesn't match '(?^u:Checkouts \(3\))'
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit dee7ad88a0def133942b8b5a5121b0bf9899ac87
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Mar 15 06:57:58 2024 +0000

    Bug 36215: (QA follow-up) Fix &? confusion
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c73c27e02d37712648d6f253aac42c2bb40c1621
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 11 09:44:35 2024 -0300

    Bug 36232: Fix error in DBRev dealing with OAI-PMH:AutoUpdateSetsEmbedItemData typo
    
    This patch fixes the case of the wrong syspref variable co-existing with
    the good one.
    
    OAI-PMH:AutoUpdateSetsEmbedItemData is the only case, as the rest of the
    mispelled ones are just case fixes, which would not trigger the same
    situation as the `systempreferences` table collation is
    case-insentitive.
    
    To test:
    1. Run:
       $ ktd --shell
      k$ koha-mysql kohadev
       > INSERT INTO systempreferences VALUES ('OAI-PMH:AutoUpdateSetEmbedItemData',0,'','','YesNo');
       > UPDATE systempreferences SET variable = 'IllCheckAvailability' WHERE variable = "ILLCheckAvailability";
       > INSERT INTO systempreferences VALUES ('IllCheckAvailability',0,'','','YesNo');
    => FAIL: The last command fails because the good and wrong values cannot
    coexist
    2. Set the version to a prior one:
       > UPDATE systempreferences SET value="23.1200004" WHERE variable like 'version';
    3. Run:
      k$ updatedatabase
    => FAIL: You get this error:
    ERROR: {UNKNOWN}: DBI Exception: DBD::mysql::db do failed: Duplicate entry 'OAI-PMH:AutoUpdateSetsEmbedItemData' for key 'systempreferences.PRIMARY' at ...
    4. Apply this patch
    5. Repeat 3
    => SUCCESS: It works!
    6. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Mohd Hafiz Yusoff <mhby87@gmail.com>
    Signed-off-by: Mohd Hafiz Yusoff <mhby87@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3718d995d58d8f6a91b3f34a351885cb244b75d3
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Feb 19 13:12:25 2024 +0000

    Bug 36130: Fetch all batches for the table
    
    Test plan, ktd:
    - Add 'FreeForm' backend and enable ILLModule, run:
    bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev.sh)
    - Install a metadata enrichment plugin, e.g.:
    https://github.com/PTFS-Europe/koha-plugin-api-pubmed/releases
    - Add 21 batches, run the following command in kshell:
    for x in {1..21}; do echo "INSERT INTO illbatches (name, backend, library_id, status_code, patron_id) VALUES ('$x', 'FreeForm', 'CPL', 'NEW', 52);"; done | koha-mysql kohadev
    - Visit ILL batches page:
    <INTRA_URL>/cgi-bin/koha/ill/ill-requests.pl?method=batch_list
    - Notice only 20 batches show.
    - Apply patch. Notice 20 batches show but now there is a page 2 link.
    - Test page 2 works as expected, delete a batch, notice only 1 page with 20 batches shows again.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Edith Speller <edith.speller@ukhsa.gov.uk>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 81bc300957b6d48f678a1d5dde5820070a8c3f07
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Mar 7 08:50:54 2024 +0100

    Bug 36251: (bug 35329 follow-up) Fix patron search by first letter when placing a hold
    
    Most of the patrons searches open in a modal. Except:
    * the main one (members-home)
    * when placing a hold
    * when requesting an article
    (did I miss one?)
    
    The patron-search.inc BLOCKs need a parent block to know where to locate
    the elements (form, table, etc), because we can have several patron
    searches on the same page.
    
    Bug 35329 reused '#searchresults':
      10 [% SET search_results_block_id = 'searchresults' %]
    which is used on the main patron search.
    The ones in the modal are correctly handled: we build the parent node in
    the "patron_search_modal" block.
    But for the 2 others the parent block id is wrong.
    
    On reserve/request.tt we have one already, so we set the TT variable from the
    .tt file
    On circ/request-article we don't have one already, so we can reuse
    searchresults (could be more specific however to include 'patrons'...)
    
    Test plan:
    Browse patrons by first letter when placing a hold and requesting an
    article
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1201a739676d37f805e886a6ac70c16b37eede14
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 6 17:59:10 2024 +0000

    Bug 36215: Remove limit on fetching bookings
    
    This removes the paging from the bookings request so we take into
    account all bookings.
    
    We may want to replace this with date bounded paging in the future, but
    lets not try to optimise until we need to.
    
    To test:
     1 - Find a record detail page in Koha staff interface
     2 - Click on a barcode to go to items tab
     3 - Edit 'bookable' to 'yes'
     4 - Return to details page
     5 - Place 5 bookings on a record
     6 - Set system preference RESTDefaultPageSize  2
     7 - Click the 'Bookings' tab on the record details
     8 - Confirm onyl 2 bookings shown in calendar view
     9 - Apply patch, reload
    10 - All bookings now show in calendar
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 13cb1a78ef090c701d8ba977aba4bb1dafd716fb
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Mar 5 16:25:46 2024 +0000

    Bug 36235: Encode system preference data with encodeURIComponent
    
    To test:
    1. Add some data to a freetext system preference like IntranetUserJS or AdditionalFieldsInZ3950ResultAuthSearch that includes a semicolon;
    2. Save the pref and reload the page or check the DB. Everything after the semicolon is removed.
    3. Apply patch, try again. Data should remain as is.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f6ec375be2dfa7f65949f9dbc3b0b6156151ba66
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Sep 21 16:49:22 2023 +0200

    Bug 36177: Add Cypress tests
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 06c62ab84a0bb330e84d3feef066df8181577a9c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Sep 22 11:16:21 2023 +0200

    Bug 36177: Cypress tests - cypress-mysql config
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8732405f04e6e3c4de208d6f94dd1890c7e870e3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Sep 22 11:09:18 2023 +0200

    Bug 36177: Cypress tests - yarn add cypress-mysql
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 65c0c01161751e9634adf0119ec6fc52d50b8a37
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Mar 6 12:44:18 2024 -0300

    Bug 36193: cud- treatment for tools/stockrotation.pl
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 98aeda6c54b8e0ce6af7ccd3dd667d050f4fd823
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Mar 6 08:53:59 2024 -0300

    Bug 36193: cud- treatment for catalogue/stockrotation.pl
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b467395b2565c27151dec57ba203ac98936aa570
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Mar 6 08:53:06 2024 -0300

    Bug 36193: Make restore icon consistent in cash registers
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fce3ca13a51041cea873768b3fb4d1038016e1d5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 5 16:21:31 2024 +0000

    Bug 36193: (follow-up) Use buttons and don't nest forms
    
    When changing action links into forms, we should use a submit button rather than JS to submit
    
    Receipt cancelling needed a form embedded in the page as we cannot nest forms
    
    Fixed searching on invoice.pl
    
    Fixed resetting mappings (original button did not need cud-)
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 53fa38f539400060a481783c7ca068f064e8459b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Mar 5 11:58:37 2024 -0300

    Bug 36193: cud- treatment for restrictions.pl
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 58bcd036b1fe93a3b63923f54f0007ceee7cf3bb
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Mar 5 11:46:15 2024 -0300

    Bug 36193: cud- treatment for reset_confirmed on mappings.pl
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7961ac04d1992118af972c81d284d86651d9d7ea
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Mar 5 11:39:53 2024 -0300

    Bug 36193: cud- treatment for debit_types.pl
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9e352b83d92932e7ab86af933de57f943fe6418d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Mar 5 11:32:18 2024 -0300

    Bug 36193: cud- treatment for credit_types.pl
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1415fee322a497a3dc7e511a61854a4099ea40a6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Mar 5 11:23:36 2024 -0300

    Bug 36193: cud- treatment for cash_registers.pl
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 50b7679adb4150ddf2ddb1da8474868afe4e2031
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 4 19:37:34 2024 -0300

    Bug 36193: cud- treatment for Acq order receipt cancelling
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 65a434928869a06d56723b9431299f381da3f634
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 4 17:44:59 2024 -0300

    Bug 36193: Fix acq receiving
    
    This patch addresses the CSRF error when receiving in acquisitions.
    
    To test:
    1. Have at least one order to receive
    2. Follow the steps to receive them
    3. Have the logs open:
       $ ktd --shell
      k$ tail -f /var/log/koha/kohadev/*.log
    4. Click to confirm receipt
    => FAIL: An error modal is displayed
    => FAIL: There's an error about missing CSRF token in POST
    5. Apply this patch
    6. Reload everything:
      k$ restart_all
    7. Repeat 1-4
    => SUCCESS: Receipt works :-D
    => SUCCESS: No error log
    8. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b7c6c0b502e6c5904e154c514d1533904061f03a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Mar 1 15:24:25 2024 -0300

    Bug 36193: Add more request information on Koha::Middleware::CSRF output
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5b6fddb1d946eac74fd5e323241b2cc8b3e66ca9
Author: Brendan Lawlor <blawlor@clamsnet.org>
Date:   Mon Mar 11 17:32:08 2024 +0000

    Bug 36195: Replace POST in itemsearch.tt with GET
    
    We retrieve a list of records for DT, it does not need to be a POST
    request.
    
    Test plan:
    
    1. Try an item search
    2. The page loads but pops an alert that says "403: Forbidden" and table stays empty
    3. Apply patch
    4. Try an item search again and the table loads results
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e0d0f92a91db5114acc8e4f0d9f63d14f9c870e3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 8 13:53:17 2024 +0100

    Bug 36195: Replace POST batch_records_ajax.pl with GET
    
    We retrieve a list of records for DT, it does not need to be a POST
    request.
    
    Test plan:
    1. Stage a batch
    2. When it's done, click on "view batch"
    => Without this patch the page loads but pops an alert that says "403: Forbidden" and table stays empty
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 68a615f6ee17bd28a565e1aa08083564f2a76888
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 1 15:07:38 2024 +0100

    Bug 36195: serials/routing-preview.pl - Fix save and preview
    
    No idea why we are passing issue_escaped instead of the id, but this
    patch fixes the regression.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4032da3f964f438e913ed19d40b0b73aa4bd2533
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Mar 5 14:54:02 2024 +0000

    Bug 36066: (follow-up) Move 403 to 409 when status ne cancelled
    
    Test plan:
    Run t/db_dependent/api/v1/acquisitions_orders.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit dcbda39c0a77a35b2bc4684a286bf26254046877
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Feb 12 09:54:04 2024 +0000

    Bug 36066: Only allow cancelled order deletion in API
    
    Note: I had trouble with listing orders in API without
    status, although formally not required according specs.
    
    Test plan:
    Run t/db_dependent/api/v1/acquisitions_orders.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8bb61c4f8835a7b36d32c580e12fe40381a5f22b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Feb 12 09:54:04 2024 +0000

    Bug 36066: Add tests
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] As Victor discovered, the test with status new in subtest
    'delete' needed the authorised user now.
    
    Test plan:
    Run t/db_dependent/api/v1/acquisitions_orders.t
    Without the follow-up patch this should FAIL.
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit af5453bbd28089acfb99d5877eac939b7a87f2ff
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Feb 2 00:04:33 2024 +0000

    Bug 35983: Remove extra selected=selected from dropdown menu
    
    To test:
    1. Admin > Circ & fine rules
    2. Select a library at the top of the forms ( #selectlibrary )
    3. Try to change the 'Refund lost item replacement fee' to "Refund lost item charge (only if unpaid)".
    4. Press save and let the page reload.
    5. Look at the dropdown again, the value is now set to "Refund lost item charge and restore overdue fine".
    6. APPLY PATCH
    7. Try steps 2 - 5 again but this time the value in the dropdown should not change.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3d7ea3bd99a0b6c68d7bcd763559d43910c4c9e7
Author: Shi Yao Wang <shi-yao.wang@inlibro.com>
Date:   Fri Feb 23 14:16:27 2024 -0500

    Bug 35916: Purchase suggestions bibliographic filter should be a "contains" search
    
    Make all bibliographic information fields filter do a contain match
    rather than an exact match
    
    Test plan:
    1. Create a purchase suggestion with a multi-word title (e.g. one day in december)
       1.1. Go to Acquisitions > Suggestions > New purchase suggestion
       1.2. Enter a title (e.g. one day in december)
       1.3. Click on Submit your suggestion
    
    2. Search for one of the words in the title
       2.1. In the "Filter by" section, click on Bibliographic information
       2.2. In the title field, enter one of the words of the title (e.g. december)
       2.3. Click Go
       --> No results
    
    3. Apply the patch
    4. Redo step 2 and notice there is now a valid result
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c91a43ca1f1cbc9b4174ac435428086fc3ed03db
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Feb 27 08:40:53 2024 -0500

    Bug 36103: Remove the "Cancel hold" link for item level holds
    
    This link is broken and doesn't make sense from a UI/UX perspective
    and thus should be removed.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 85f316f9c8cb0fa930d1432a95b2dd07e8333b6c
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Feb 29 21:03:13 2024 +0000

    Bug 35950: Adjust tests
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 834bff631784cc9788e66b7baad6067a5df7cffc
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Feb 29 20:48:25 2024 +0000

    Bug 35950: Move AddReturn call into circulation.pl
    
    There should be no change in beahavior. Following the test plan from Bug 35840.
    
    To test:
    1. APPLY PATCH, restart_all
    2. Turn on RecordLocalUseOnReturn
    3. Create a Statistical patron.
    4. Check an item out to a regular patron.
    5. Check the item out to a Statistical patron.
    6. This should trigger a return and you will see 2 entries in the statistics table, one for localuse and one for a return.
    7. Try checking out an item to the Stats patron that is NOT checked out.
    8. You should only see 1 entry, localuse, in the statistics table.
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e0554260c7d67b7f41238b8c2c67d6912f4c07e9
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 8 14:40:01 2024 +0000

    Bug 35840: (QA follow-up) Tidy and critic fix
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8b14aca56cdf6ed4c6b9be1d0c771859245ed80f
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Jan 29 19:38:50 2024 +0000

    Bug 35840: Add unit tests
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ffc722554e8a1a0da4cd788625f77bafd1cb1f92
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Jan 29 18:26:28 2024 +0000

    Bug 35840: Add option to AddReturn to skip recording of localuse
    
    To test:
    1. APPLY PATCH, restart_all
    2. Turn on RecordLocalUseOnReturn
    3. Create a Statistical patron.
    4. Check an item out to a regular patron.
    5. Check the item out to a Statistical patron.
    6. This should trigger a return and you will see 2 entries in the statistics table, one for localuse and one for a return.
    7. Try checking out an item to the Stats patron that is NOT checked out.
    8. You should only see 1 entry, localuse, in the statistics table.
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ac71adbd23e2d3a6c599ac963b042576dca635f3
Author: Shi Yao Wang <shi-yao.wang@inlibro.com>
Date:   Fri Feb 23 15:01:43 2024 -0500

    Bug 35911: Make archived suggestions not show in patron's account
    
    Remove archived suggestions in patron's account page
    
    Test plan:
    1. Go to a patron's account in the staff interface
    2. Go to the Suggestions tab
    3. Click New purchase suggestion and create a suggestion
    4. In another browser tab, go to Acquisitions > Suggestions
    5. Click the small arrow next to the edit button to the right of the suggestion, and choose Archive (alternatively, check the suggestion's box and click Archive selected)
       --> Suggestion disappears from the suggestions management page (OK)
    6. Go back to the tab with the patron's account and refresh
       --> Suggestion is still visible
    7. Apply the patch
    8. Redo step 6 and notice the suggestion is not visible anymore
    9. Redo step 4 and 5 but this time, unarchiving the suggestion
    10. Redo step 6 and notice the suggestion is back
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6a0db6c1c4f200114764a97fbb29d596e6fc593c
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Feb 29 22:20:12 2024 +0000

    Bug 35718: Remove ES6 warnings branches.tt
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5e3ae14aa0c204a8fa980d574a998f4194523586
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Jan 5 19:05:01 2024 +0000

    Bug 35718: Remove ES6 warns from JS system preferences
    
    To test:
    1. Add some JS like this to any of the UserJS system preferences:
    
    $(document).ready( function() {
        let something = 1;
        const another_thing = 2;
    
        let an_arrow_function = (a, b) => a + b;
        console.log( an_arrow_function(something, another_thing) );
    });
    
    2. Notice the icons and warnings to the left of the line numbers:
    
    let is available in ES6
    const is available in ES6
    arrow_function_syntax is available in ES6
    
    3. APPLY PATCH
    4. Try steps 1 and 2 again, the warnings should be gone.
    5. Check that the JavaScript still works, in my example it should console.log 3.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6bf839d89244e316d7ec936c439fa0d770f3665e
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Tue Feb 6 16:13:32 2024 +0000

    Bug 36004: Fixed typo in successfully
    
    To test:
    
    1. Turn on the syspref 'OpacCatalogConcerns'
    
    2. Go to view a record in the OPAC and click on "Report a concern" in
       the column located on the right-hand side.
    
    3. Fill out the title on the form and leave everything else the same.
       Click on submit and notice that the message on the screen says "Your
       concern was sucessfully submitted."
    
    4. Apply the patch.
    
    5. Submit a new concern. Notice that the text now has "successfully"
       spelled correctly.
    
    6. Sign off and have a great day! :D
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0fcf48c55f858d19f1b78337b4b83f61831564fb
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Tue Feb 6 16:28:41 2024 +0000

    Bug 36005: Fixed typo in "Your concern was successfully submitted." text
    
    To test:
    
    1. Turn on the syspref 'CatalogConcerns'
    
    2. Go to view a record in the staff intranet and click on "New catalog concern" which is located in the "+New" dropdown.
    
    3. Fill out the title on the form and leave everything else the same. Click on submit and notice that the message on the screen says "Your concern was sucessfully submitted."
    
    4. Apply the patch.
    
    5. Refresh the page and submit a new concern. Notice that the message now has "successfully" spelled correctly.
    
    6. Sign off and have a wonderful day! :D
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0bdd12ea2296710dcaa5b724f1fd4c1cf09c0f06
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Feb 12 13:06:10 2024 +0000

    Bug 36070: Fix CSS class
    
    1) Enable UseRecalls
    2) Checkout an item to a patron:
       Top INTRA search bar: pick 'check out' and paste a patron
       cardnumber:
       23529000035676
       press enter
    3) Enter an item barcode:
       39999000003154
       Press checkout
    4) As user koha/koha, visit OPAC page for this biblio:
       opac-url/cgi-bin/koha/opac-detail.pl?biblionumber=76
    5) Notice all sidebar actions on the right have hover effect except for
       'Place recall'
    
    Apply patch, repeat test plan.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7c1ce64593718143c94c3b666f4f468e55a7fe92
Author: Raphael Straub <raphael.straub@kit.edu>
Date:   Thu Feb 8 09:00:13 2024 +0000

    Bug 36032: Use a single angle in the "Next" button
    
    The "Next" pagination button in the OPAC result list has a double angle
    whereas the "Previous" button only has a single angle. This patch fixes
    that error.
    
    To test:
    1) Do a search in the OPAC with more than one page of results.
    2) Observe that the "Next" button has a double angle whereas the
       "Previous" button has only a single angle.
    3) Apply the patch.
    4) Repeat steps 1 and 2.
    5) Verify that the "Next" button now has a single angle.
    
    Sponsored-by: Karlsruhe Institute of Technology (KIT)
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5998fe93f5a7fe5fa2b55fc18b94e68e99f2a879
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Dec 18 19:05:10 2023 +0000

    Bug 35538: Sort OPAC self registration library list by library name
    
    This patch modifies opac-memberentry.pl so that the list of libraries is
    sorted by library name instead of library code.
    
    To test, apply the patch and restart services.
    
    - If using the default testing data you'll have to go to Administration
      -> Libraries and edit one or more libraries so that the library name
      is alphabetically different than the library code. e.g. Centerville ->
      Zanzibar.
    - Go the OPAC and click "Create an account" (requires the
      PatronSelfRegistration system preference).
    - Under "Home library," the dropdown of libraries should be ordered by
      library name.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8a7a37fb359f836c84b4ccf1be08bb2721507493
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Feb 15 14:40:04 2024 +0000

    Bug 36012: Add 'waits' to cypress test
    
    This patch adds cy.wait() in two places where builds have been failing due to timeouts
    
    Test plan:
    1) cypress run --spec t/cypress/integration/InfiniteScrollSelect_spec.ts
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 285a0fc74da5747922bcc28626066a7067e4fb66
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Feb 6 12:11:12 2024 -0500

    Bug 35357: Enhance unit tests
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Fixed typo in test output.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0eced8086634e0a77786ce4ea2bfc6e36f969b85
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jan 11 09:31:45 2024 -0500

    Bug 35357: Remove item from holds queue when it is checked out
    
    Test Plan:
    1) Place a hold on an item
    2) Build the holds queue
    3) Check out the item to a different patron than the one
       targeted in the holds queue
    4) Verify the holds queue viewer still shows that item and patron
    5) Apply this patch
    6) Repeat stepts 1 through 3
    7) Verify the holds queue viewer no longer shows that patron and item!
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0e11bc0de539692e1ed856a36e6faf4f30335eed
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jan 11 09:25:26 2024 -0500

    Bug 35357: Add unit test
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit aa1049fdd37d87b73c434dfdea11ba691e7095da
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Feb 8 21:29:54 2024 +0000

    Bug 36056: Clarify subpermissions AND behavior
    
    Working on bug 31791, I found myself wondering if our current recursive
    code in C4::Auth::haspermission() would allow checking AND on
    subpermissions.
    
    As it is not documented in the POD or tested, I decided to write some
    unit tests for it.
    
    It turned out it was well supported, so I decided to submit the tests,
    and a small tweak in the POD to reflect that.
    
    To test:
    1. Apply this patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/Auth/haspermission.t
    => SUCCESS: Tests pass! The code supports AND on subpermissions!
    3. Sign off :-D
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5e0afb772a4a2b100ee14c1da0c323fcc32d0fb2
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Dec 19 13:30:14 2023 +0000

    Bug 35469: Add 'manage_bookings' permission to biblios/checkouts
    
    This patch adds the manage_bookings subpermission check to the
    biblios/{biblio_id}/checkouts endpoint and updates the corresponding
    unit test too.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 30b3a8c3820245c5b639818b0515f9c25c47b2c5
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Dec 15 11:37:43 2023 +0000

    Bug 35469: Add 'manage_bookings' subpermission to /checkouts
    
    This patch adds the 'manage_bookings' permission to allow fetching of
    checkouts on the API should the user have 'manage_bookings' but not have
    'circulate_remaining_permissions'
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 52fbb93cda407c406bc7da329446c9d02fe2a1e6
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jan 11 15:22:49 2024 +0000

    Bug 35773: Add manage_bookings subpermission to patron searching
    
    This quickly fixes the issue to allowing those who have the
    manage_bookings subpermission to also search for users.
    
    It's deliberately bare as I'm keen to subsequently remove it again in
    bug 29509 where we will deal with this properly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0233c1d93fe0b490deffcad9e8b51f1bb57747bd
Author: Victor Grousset <victor@tuxayo.net>
Date:   Sun Mar 3 01:07:30 2024 +0100

    Bug 35924: (QA follow-up): Comment magic number (patron.privacy < 2)
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 19f38a286d52b4add421024e31ae232bc216a746
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Jan 29 06:54:56 2024 -0500

    Bug 35924: Hide the print checkins button on the checkin screen for patron's who always anonymize
    
    Test Plan:
    1) Set a patron's privacy to "Never"
    2) Check out a few items to a patron
    3) Check in one item
    4) Note the "Print checkin slip" diplays
    3) Apply this patch
    4) Check in an  item
    5) Note the option is now missing
    6) Set the patron's privacy to "Forever" or "Default"
    7) Check in an item
    8) Note the print checkins option is back!
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7253c38b8a24fb066b90dbaa25db9f12f1287d32
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Jan 29 06:51:14 2024 -0500

    Bug 35924: Hide the print checkins button on the patron screens for patron's who always anonymize
    
    If a patron anonymizes their checkins, the checkin slip cannot retrieve any info to print the checkin slip. We should not show the button in this scenario
    
    Test Plan:
    1) Set a patron's privacy to "Never"
    2) Note the "Print checkin slip" option in the Print button on the
       patrons toolbar displays
    3) Apply this patch
    4) Reload the page
    5) Note the option is now missing
    6) Set the patron's privacy to "Forever" or "Default"
    7) Reload the page
    8) Note the print checkins option is back!
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5511482951f812140f134b0ddfc5f3cab2807c77
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Tue Feb 20 01:47:53 2024 +0000

    Bug 36134: Read complete Elasticsearch configuration in about.pl
    
    When enabling Elasticsearch authentication in Koha using userinfo
    parameter of Search::Elasticsearch, about.pl breaks and gives an
    internal server error.
    
    This patch reads the complete Elasticsearch configuration for
    about.pl including userinfo causing about.pl to recover.
    
    To test:
    1. In Elasticsearch 7 settings, set "xpack.security.enabled: true"
    2. Add <userinfo>elastic:password</userinfo> to KOHA_CONF elasticsearch
       settings
    3. Restart plack and navigate to about.pl
    4. Observe internal server error
    5. Apply patch
    6. Refresh about.pl
    7. Observe it working again
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8413b376798097725cfd2ca3eb7a12427ad08163
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Mar 1 09:39:35 2024 +0000

    Bug 36212: Add check on barcode before searching items
    
    Test plan:
    Add an item to your database that has no barcode.
    Run t/db_dependent/Circulation.t
    It will fail without this patch, pass with this patch.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2e6a2c3b5b6d0464215189e29954d06e5f6e236b
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Feb 8 12:23:30 2024 +0100

    Bug 36010: Fix Items/AutomaticItemModificationByAge.t failing since Bug 32029
    
    UT is failing in jenkins.
    Change to use biblio.copyrightdate instead of bilio.medium
    
    Run prove t/db_dependent/Items/AutomaticItemModificationByAge.t
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cd9de702e2bb9aff991e92b04d2889c91a3dcd58
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 21 13:46:29 2024 +0100

    Bug 36170: Wrong error variable in memberentry
    
    It is hidding an important error.
    
    $@ is never set here, we need $_ (inside a try-catch)
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bcfc786f17fad8b7c866ee6063d2953d7b5d925d
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Jan 12 17:35:24 2024 +0000

    Bug 34234: Respect display_order in additem.tt and detail.tt
    
    1. APPLY PATCH
    2. EnableItemGroups
    3. Find a record and add some new item groups with display orders that are different from the order in which the groups were added
    4. Check the checkbox next to one or more items and click the link to "Add/move to item group"
    5. Ensure display order is correct
    6. Now add a new item to the record and scroll down to the dropdown underneath "+ Add to item group"
    7. Display order should be correct.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c3035f7e1b469acaebfc6e388d60a9684f744ba5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jan 25 19:03:00 2024 +0000

    Bug 35892: Populate order price using GetMarcPrice if no price specified
    
    Previously this happened after the fact, automagically, if no price was included in the order record. We should
    rather load the Marc price into the order form if we don't have a price form the '...ToOrder' system preferences
    
    To test:
    
    Setup -- Set systempreferences below
    
    MarcFieldsToOrder:
    price: 949$g
    quantity: 949$k
    budget_code: 949$l
    discount: 949$m
    sort1: 949$n
    sort2: 949$q
    
    MarcItemFieldsToOrder:
    homebranch: 949$a
    holdingbranch: 949$b
    itype: 949$y
    nonpublic_note: 949$x
    public_note: 949$z
    loc: 949$c
    ccode: 949$8
    notforloan: 949$7
    uri: 949$u
    copyno: 949$t
    replacementprice: 949$v
    itemcallnumber: 949$o
    quantity: 949$k
    budget_code: 949$l
    
    Stage the attached bib-303.marcxml file
    Add to basket from the staged file
    Note that item prices are populated as '6.50' from 949$g
    Cancel
    Update MarcFieldsToOrder and map price to "020$c"
    Add to basket from the staged file
    Note the price is not populated, because 020$c contains a dollar sign
    Cancel
    Apply patch, restart all
    Add to basket from the staged file
    Note the price is now correctly populated from fallback to GetMarcPrice
    
    Note: GetMarcPrice does some automatic munging, that's why 020$c on it's own doesn't work - this could be done to fields in MarcFieldsToOrder/MarcItemFieldsToOrder but this would be an enhancement.
    This bug simply restores the previous behavious, but does it on the front end and is more obvious to the user
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3b8a3c7b869fefbe6809ecbd00311d433d1d7904
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Mar 1 10:29:56 2024 +0000

    Bug 31427: Remove a few refs to CanBookBeRenewed
    
    Actually, the module is not even needed anymore here.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a71c21d2ffc9ea6863bf897270fdcdc923813286
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Oct 26 09:08:04 2023 +0100

    Bug 31427: (follow-up) Unit tests
    
    This patch adds a unit test for error precidence where autorenewals is
    involved.
    
    It is not comprehensive however, and I'm a little confused by the logic
    around cron vs non-cron handling...
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5d7a9395fbc58b49746e7674f33bdecf530eee1b
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Jul 20 03:22:22 2023 +0000

    Bug 31427: Get auto renewal errors before other renewal errors
    
    This patch changes CanBookBeRenewed so that automatic renewal
    errors pop up before other renewal errors. This means that a book
    will be considered "auto_too_soon" before things like "too_many" or
    "restricted". (Otherwise, you'll get an email saying you can't renew
    a book the day after using your last auto renewal, even though the
    earliest renewal isn't available until later.)
    
    Test plan:
    0. Apply patch
    1. prove t/db_dependent/Circulation.t
    2. prove t/db_dependent/Holds.t
    3. prove t/db_dependent/Koha/Account/Line.t
    4. prove t/db_dependent/Koha/Account.t
    
    Additional tests:
    5. Go to http://localhost:8081/cgi-bin/koha/admin/preferences.pl?op=search&searchfield=RestrictionBlockRenewing
    6. Change to "block"
    7. Go to http://localhost:8081/cgi-bin/koha/admin/preferences.pl?tab=&op=search&searchfield=AutoRenewalNotices
    8. Change to "according to patron messaging preferences"
    9. Go to http://localhost:8081/cgi-bin/koha/admin/smart-rules.pl
    10. Set "Automatic renewal" to "Yes" and "No renewal before" to 4
    11. Go to http://localhost:8081/cgi-bin/koha/circ/circulation.pl?borrowernumber=51
    12. Checkout 39999000001310 with a due date 4 days in the future
    13. Add a manual restriction
    14. Run `perl ./misc/cronjobs/automatic_renewals.pl`
    15. Note that it says something like the following:
    Issue id: 1237 for borrower: 51 and item: 73 would not be renewed. (auto_too_soon)
    
    Instead of something like the following:
    Issue id: 1237 for borrower: 51 and item: 73 would not be renewed. (restriction)
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3e164d200acd683119225d4ebd01ad0334f563fb
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Mar 1 07:58:00 2024 +0000

    Bug 36100: (QA follow-up) Move 400 to 409
    
    Duplicate exceptions tend to generate a 409 in our REST API.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d810b3663bf855101d75673abc77d05bf65596dd
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Feb 15 12:33:26 2024 +0000

    Bug 36100: Update unit tests for add
    
    This patch updates the unit tests for booking add to confirm that
    without readOnly we still return an error should a user attempt to
    submit a booking with a booking_id that would clash.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e8a2f4df7368ad7e3de4c992e89f96e8ec242da1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Feb 15 10:15:12 2024 +0000

    Bug 36100: Remove readOnly from bookings definition.
    
    Whilst readOnly feels correct here, swagger doesn't work that way at our
    version. It must be removed to restore the ability to edit exising
    bookings.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4515581effb9ff17e5a74c5b624805d330082c27
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Feb 22 15:42:27 2024 +0000

    Bug 36047: Remove jQuery selector from conditional
    
    This prevents the jQuery from breaking if the reason contains an
    apostrophe character.
    
    1. Create a suggestion
       1.1. Go to Acquisitions > Suggestions
       1.2. Click New purchase suggestion
       1.3. Enter a title
       1.4. Click Submit your suggestion
    
    2. Update the suggestion to accepted and add a reason with an apostrophe
       2.1. In the suggestions list, check the box next to the suggestion
       2.2. At the bottom of the screen, choose Mark selected as: Accepted
       2.3. In With this reason, choose Others...
       2.4. Enter a reason with an apostrophe (my case was in French :
            Disponible en impression à la demande (POD). S'attendre à un
            long temps d'attente)
       2.5. Click Submit
    
    3. Order the suggestion
       3.1. Go to Acquisitions
       3.2. Search for a vendor
       3.3. Click New > Basket
       3.4. Enter a basket name
            (Optional: for testing I like to change Create items when:
            cataloging the record)
       3.5. Click Save
       3.6. Click Add to basket
       3.7. Click From a suggestion
       3.8. Click Order next to the suggestion
       3.9. Enter order details
       3.10. Click Save
       3.11. Click Close basket
       3.12. Click Yes, close
    
    4. Receive the order
       4.1. Click Receive shipments
       4.2. Enter a Vendor invoice number
       4.3. Click Next
       4.4. Click Receive next to the order
            --> Page stays In processing forever
    
    Apply patch. Repeat. Notice the page now renders correctly.
    Extra: Add an entry containg an apostrophe to the SUGGEST authorized
    values category and repeat test plan. Confirm everything works as
    expected.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 649e1de1903f241d0fa0cf2ac6d15957a4c3ae46
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jan 25 19:56:31 2024 +0000

    Bug 35913: Restore price fall back to MarcFieldsToOrder if not set by MarcItemFieldsToOrder
    
    To test:
    Setup -- Set systempreferences below
    
    MarcFieldsToOrder:
    price: 949$g
    quantity: 949$k
    budget_code: 949$l
    discount: 949$m
    sort1: 949$n
    sort2: 949$q
    
    MarcItemFieldsToOrder:
    homebranch: 949$a
    holdingbranch: 949$b
    itype: 949$y
    nonpublic_note: 949$x
    public_note: 949$z
    loc: 949$c
    ccode: 949$8
    notforloan: 949$7
    uri: 949$u
    copyno: 949$t
    price: 949$g
    replacementprice: 949$v
    itemcallnumber: 949$o
    quantity: 949$k
    budget_code: 949$l
    
    Stage the attached bib-303.marcxml file
    Add to basket from the staged file
    Select the biblio
    Note items have prices
    Cancel
    Remove 'price' mapping from MarcItemFieldsToOrder
    Apply patch
    Add to basket from file again
    Note item prices, and other fields, come through as expected
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c86e6ee82d27640c5c66c534d1e93ddbbbc2c4fa
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Feb 5 11:13:15 2024 +0000

    Bug 35819: (QA follow-up) Prevent warning on uninitialized retries count
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7c1d4716beba5aa0d2c77ad460b4e6982cfee236
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 30 09:30:38 2024 +0100

    Bug 35819: Adjust es_indexer_daemon
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] Add forgotten module
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 30e69ebc5644f8b3d0a79c5c36aeb5038b632a30
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 26 14:25:56 2024 +0100

    Bug 35819: Improve logging
    
    Log (warn) if the job will be processed later, but add a debug however.
    
    Have a specific log for bad status
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 83940925685af338be659ef7baa04a40bed9d97d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 23 10:14:21 2024 +0100

    Bug 35819: nack and not requeue if frame is invalid
    
    If a frame cannot be correctly processed (most probably because the body
    is not valid JSON) then we are not acking or nacking the frame and the
    worker is stuck.
    
    In this specific case we should nack without requeuing the frame.
    
    NOTE that requeue must be 'true' or 'false', not 1 or 0, or the default
    'true' will be used.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0feb10df7f9473c8ccd14bea947c0957a839e059
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jan 19 07:10:02 2024 +0000

    Bug 35819: Add simple delay
    
    Here I add 500 ms. In my testing with the 1s sleep from the test
    plan, I might see one or two 'not found' lines. Obviously things
    depend on the time needed before the txn commits. But it will
    reduce a flood of these messages.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1a51c2e973a1b6ce1116bbc243853112be96f0ea
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jan 16 14:46:20 2024 -0300

    Bug 35819: Notify NACK and requeue when Job ID not found
    
    This patch makes the worker reject the incoming frame for putting the
    message back in the queue, in the event the job id doesn't exist yet.
    Which is the case when some actions are being triggered inside a
    transaction which hasn't been commited to the DB yet.
    
    To test you will need 3 KTD shells
    (a) mysql:
       $ ktd --shell
      k$ sudo koha-mysql kohadev
    
    (b) logs:
       $ ktd --shell
       # for restarting the worker and looking at the logs
      k$ sudo koha-worker --restart kohadev  ; tail -f /var/log/koha/kohadev/worker-*.log
    (c) running the test:
       $ ktd --shell
    
    1. Have (a), (b) and (c) terminals ready
    2. On (c), run:
       $ perl -MKoha::Database -MKoha::BackgroundJob::BatchUpdateBiblioHoldsQueue -e 'Koha::Database->schema->txn_do( sub { Koha::BackgroundJob::BatchUpdateBiblioHoldsQueue->new->enqueue({ biblio_ids => [ 1 ] }); sleep 1;  } );'
    => FAIL:
       * (b) shows (once) an error about a job not existing
    3. On (a) run:
       > SELECT * FROM background_jobs;
    => FAIL: Notice the job ID mentioned on 2 stands as 'new'.
    4. Apply this patch
    5. Ctrl+c on (b), and re-run to launch the worker with the patch applied
    6. Repeat 2
    => SUCCESS (partial): The error about the job not existing is displayed
    many times
    7. Repeat 3
    => SUCCESS: The job ID mentioned on 6 stands as 'finished'.
    8. Sign off :-D
    
    Discussion:
    
    * The `requeue` header I added is correct, but it is the default
      behavior anyway. I prefered to make it explicit, though.
    
    * To avoid that bunch of retries, we should requeue with some delay. I
      didn't manage to make it work (yet) but there's a 'delay' plugin for
      rabbit [1]. We already install the 'stomp' plugin in
      koha-common.postinst. But this plugin requires downloading it. Which
      would require further investigation.
    
    * As Nick and Marcel pointed, we need to revisit the whole architecture,
      the need of a MQ (DB polling wouldn't have this problem), etc. But
      that's for another place.
    
    [1] https://hevodata.com/learn/rabbitmq-delayed-message/#:~:text=To%20delay%20a%20message%2C%20the,to%20queues%20or%20other%20exchanges.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 90cd0e4ccf27e37526d9053b75ce7073cc13b0c7
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Mar 6 12:15:24 2024 -0100

    Bug 36245: Remove cud- from op
    
    1) Install FreeForm, enable ILL module, run:
    bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev.sh)
    2) You'll have to switch the FreeForm branch to the one compatible with this work, i.e.:
    cd /kohadevbox/koha/Koha/Illbackends/FreeForm
    git checkout b_36243
    3) Restart plack:
    koha-plack --restart kohadev
    4) Create a new FreeForm request, visit:
    <staff_url>/cgi-bin/koha/ill/ill-requests.pl?method=create&backend=FreeForm
    5) Set 'type' enter '42' in cardnumber and pick a library. Click 'Create'.
    6) Edit that request, click "manage request" or if #1 visit:
    <staff_url>/cgi-bin/koha/ill/ill-requests.pl?op=illview&illrequest_id=1
    7) Click "Edit item metadata". Click "Submit". Notice it explodes.
    9) Apply patch. Restart plack.
    10) Repeat 7)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c39a35ba85eb653ac4bf9d91ef657f54384abdb2
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Mar 6 16:15:31 2024 +0000

    Bug 36249: Fix styling of 'Send email' button
    
    This button was using the old 'btn-default' class instead of the new 'btn-primary' form 22.11 onwards
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4214e5415db28a2b054899e556b89cd02b8d91f2
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Mar 6 15:58:06 2024 +0000

    Bug 36249: Fix generic_confirm op
    
    Test plan, k-t-d:
    
    1) Install FreeForm, enable ILL module, run:
    bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev.sh)
    2) You'll have to switch the FreeForm branch to the one compatible with this work, i.e.:
    cd /kohadevbox/koha/Koha/Illbackends/FreeForm
    git checkout b_36243
    3) Restart plack:
    koha-plack --restart kohadev
    4) Start by adding an e-mail address to the patron of category "Inter-library Loan", visit:
    <staff_url>/cgi-bin/koha/members/memberentry.pl?op=edit_form&destination=circ&borrowernumber=16
    5) Add an e-mail address to "Primary e-mail"
    6) Create a new FreeForm request, visit:
    <staff_url>/cgi-bin/koha/ill/ill-requests.pl?method=create&backend=FreeForm
    7) Set 'type' enter '42' in cardnumber and pick a library. Click 'Create'.
    8) Click "Place request with partners"
    9) Pick a partner library (will be the same patron from step 4)
    10) Click "Send email". Notice the CSRF error.
    11) Apply patch and restart plack
    koha-plack --restart kohadev
    12) Repeat 8-10. Notice error no longer shows.
    13) Notice the request's status is now 'Requested from partners'
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2e633b7f9d7729a84dd8580f512ea9ae433b0f22
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Mar 6 12:45:09 2024 +0000

    Bug 36243: Update edit_action to cud-edit_action
    
    1) Install FreeForm, enable ILL module, run:
    bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev.sh)
    2) You'll have to switch the FreeForm branch to the one compatible with this work, i.e.:
    cd /kohadevbox/koha/Koha/Illbackends/FreeForm
    git checkout b_36243
    3) Restart plack:
    koha-plack --restart kohadev
    4) Create a new FreeForm request, visit:
    <staff_url>/cgi-bin/koha/ill/ill-requests.pl?method=create&backend=FreeForm
    5) Set 'type' enter '42' in cardnumber and pick a library. Click 'Create'.
    6) Edit that request, click "manage request" or if #1 visit:
    <staff_url>/cgi-bin/koha/ill/ill-requests.pl?op=illview&illrequest_id=1
    7) Click "Edit request". Click "Submit". Notice it errors "No CSRF token passed for POST"
    9) Apply patches. Restart plack.
    10) Repeat 7)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0cefd8c112d759b5518f7ab81b5012944dba182e
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Mar 6 12:44:25 2024 +0000

    Bug 36243: Remove cud- from op
    
    'cud-' needs to be removed here because it's showing the form, not handling its POST submission
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6c1a5b83bb115b4d792529786a3fe7604a10e919
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Mar 6 09:56:00 2024 +0000

    Bug 36241: Update missing query_type => op in ill-batch.inc
    
    Test plan:
    - Add 'FreeForm' backend and enable ILLModule, run:
    bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev.sh)
    - Install a metadata enrichment plugin, e.g.:
    https://github.com/PTFS-Europe/koha-plugin-api-pubmed/releases
    - Add 5 batches, run the following command in kshell:
    for x in {1..5}; do echo "INSERT INTO illbatches (name, backend, library_id, status_code, patron_id) VALUES ('$x', 'FreeForm', 'CPL', 'NEW', 52);"; done | koha-mysql kohadev
    - Visit ILL batches page:
    <INTRA_URL>/cgi-bin/koha/ill/ill-requests.pl?method=batch_list
    - Confirm no batches are shown. Apply patch. Repeat.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8f7535856b399b662fa73dbde91f42e3962fe905
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Mar 6 09:55:18 2024 +0000

    Bug 36241: Fix wrong cud-search
    
    This line is supposed to searhc for plugins with the method 'provides_api' which returns a {type => 'search'} entry among others.
    This has nothing to do with search vs cud-search from  in forms
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6e56e4a0d1b74df33b64cc70bd38c0405597e108
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Feb 29 11:28:24 2024 +0000

    Bug 36175: Corrections to reduced due for booked items
    
    This patch fixes a mistake in the circulation controller such that the
    proper reduceddue date is passed to the template when a checkout would
    overlap with a booking.
    
    I also take the oportunity to enhance the functionality to allow
    librarians to set their own reduceddue date between now and the hard
    reduceddue as required for the existing booking.
    
    Test plan
    1) Set an item to 'bookable'
    2) Add a booking to that item for user A for a few days time.
    3) Attempt to checkout the item to user B and note the warning that
       the item is booked for another user.
    4) With the patch applied, a reduced due date of 1 day prior to the
       booking should be defaulted to in the displayed date picker.
    5) You should be able to select any date between today and the day
       before the booking starts
    6) Confirm you can checkout with the reduceddue date set.
    7) Bonus point, confirm the field is required, so if you try to wipe it
       and then checkout, you will be blocked.
    
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2f9e8b2b6f467ac7c517f9407f1d54f4e211544b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 5 16:04:04 2024 +0100

    Bug 36234: Fix 'languages' prefs selection
    
    Test plan:
    Edit and save several types of sysprefs, reload the page to confirm they
    are correctly saved, or check their values in DB
    
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 214fc675cf8f3d7962aa02c03ee9cfc6f18e7973
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Feb 20 23:19:01 2024 +0000

    Bug 36140: Correct label for attribute invoice.tt
    
    To test:
    1. Go to /cgi-bin/koha/acqui/invoice.pl?invoiceid=X  where X is the invoice number.
    2. Look at the Invoice number with your dev tools, the for attribute is wrong. ( shippingdate )
    3. Apply patch and look again, the attribute should correctly be invoicenumber.
    
    Alternatively, just look at the diff of this trivial change. :)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 52e7c8acf450e1b010c384619eca77a0f8846bfa
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Feb 13 10:49:17 2024 +0100

    Bug 36076: paycollect.tt add permission checks for manual credit and invoice
    
    In members/pay.tt one can see permission checks for manual credit and invoice :
    CAN_user_updatecharges_manual_invoice
    CAN_user_updatecharges_manual_credit
    
    This is missing from members/paycollect.tt.
    HTML is also missing classes manualcredit and manualinvoice.
    
    Test plan :
    1) Create a user with permissions to manage accounting
       (remaining_permissions under updatecharges) but without
       manual_invoice and manual_credit
    2) Go to a patron account with an invoice
    3) Click on "Make a payment", you dont see tabs manual credit/invoice
    4) Click on "Pay" in "Actions" column
    => Without patch you see tabs manual credit/invoice
    => With patch you do not see them
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9b8cbf5c83a8f76f3b5eba5065aa5cb7aa26e1d2
Author: Victor Grousset <victor@tuxayo.net>
Date:   Wed Feb 28 05:52:41 2024 +0100

    Bug 35963: (QA follow-up): tidy up code and fix exec permission
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2753eec1ce8ce57afc10162936967d1f39c2b0b8
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Feb 7 14:36:01 2024 +0100

    Bug 35963: Fix bundled items table ordering and filtering
    
    Using the many-to-many relationship results in the table alias `me` to
    be used for table `item_bundles` instead of the expected table `items`.
    This causes ordering and filtering to fail for columns Callnumber and
    Barcode.
    Using Koha::Items->search does not have this problem.
    
    This patch also disables ordering by status because it does not work
    (error message is: "Cannot find Koha::Object class for return_claim'")
    
    Test plan:
    1. Create an item bundle
       https://koha-community.org/manual/23.11/en/html/circulation.html#circulating-bundles
    2. Add at least 2 items to this bundle
    3. Verify that ordering/filtering by callnumber or barcode works
    4. Run `prove t/db_dependent/api/v1/items/bundled_items.t`
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9344f4317083e9d70c3ff9e923447e80282ef01c
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Feb 7 14:36:01 2024 +0100

    Bug 35963: Add tests
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c9f6a4981a69095029cf53a14fc799ed8581b196
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Jan 30 20:38:15 2024 +0000

    Bug 35952: Remove unnecessary line for OpacSuppressionMessage
    
    To test:
    1. Apply patch and restart all
    2. Add an additional contetn entry for `OpacSuppressionMessage`, make
       sure it has a publication date in the past.
    3. Make sure  OpacSuppression is set to 'hide'.
    4. Suppress a record in the OPAC, ( 942$n )
    5. Visit the detail page for that record and make sure you
       OpacSuppressionMessage customization displays.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 112a76650cd8d84e41364fbdbc7610ac9badd511
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Dec 12 09:57:36 2023 -1000

    Bug 35554: Authority search popup width 800px
    
    Authority search popup is only 700 pixels width.
    Most popups use 800 pixels, like the z3950 one.
    
    Test plan :
    1) Edit a biblio record
    2) Click on value builder in a field linked to authority (ie 700)
    3) Check popup is 800 pixels wide
    4) Same with advanced editor
    
    Signed-off-by: Anneli Österman <anneli.osterman@koha-suomi.fi>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 972efe8b5c8d22796437af87bfdf880d2fd659bf
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 23 10:59:45 2024 +0100

    Bug 36009: Document background_jobs_worker.pl --queue elastic_index
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3eff8d02b7ec4435a46972710786630518814cb0
Author: Magnus Enger <magnus@libriotech.no>
Date:   Wed Feb 7 07:51:36 2024 +0000

    Bug 36009: Document koha-worker --queue elastic_index
    
    To test:
    - Copy the koha-worker script to the standard location:
      $ sudo cp debian/scripts/koha-worker /usr/sbin/koha-worker
    - Check "sudo koha-worker --help" and verify elastic_index is
      mentioned in the list of "current queues"
    - See https://wiki.koha-community.org/wiki/Testing_man_pages for
      how to check the "man" page. There should be a new paragraph
      about "Current queues" under "--queue"
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b7f9a86677323d72adabeacc3f123fc8ee4c7d7e
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Feb 22 12:10:31 2024 +0000

    Bug 36150: Update circulation-home.tt layout
    
    Test plan:
    Compare both pages:
    <staff_url>/cgi-bin/koha/cataloguing/cataloging-home.pl
    <staff_url>/cgi-bin/koha/circ/circulation-home.pl
    
    Apply patch
    Compare both pages again
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ab7a8db43dbb240f111e3ea7eef5b9e0a1a62652
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jan 2 08:58:04 2024 -0500

    Bug 35398: (QA follow-up) Tidy code
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 783a58a9d3f26622450c7785182b175c71f50d5e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 24 13:06:37 2023 +0000

    Bug 35398: Fix LRP support for EDI orders with single items
    
    This patch corrects a mistake in the original implementaiton of bug
    20595 where we introduced support for the LRP segments being used to
    automatically assign items ordered via EDI to stock rotation plans.
    
    Signed-off-by: Sophie Halden <sophie.halden@cheshiresharedservices.gov.uk>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit de79e957ce82d53d9978551f1d7ef593884daa29
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Feb 28 16:40:39 2024 +0000

    Bug 35398: Unit test
    
    This patch adds the begginings of unit tests for Koha::EDI.  Right now
    we only test that a simple QUOTE message creates a basket, adds the item
    to said basket and assigns that single item to a corresponding stock
    rotation rota as defined by the LRP segment in the QUOTE message.
    
    It lays the foundations for much more rigorous tests to be written to
    cover the whole of EDI.pm however.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6744b9979a5b7029f9d35d19e680f8a03fcd8a75
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Feb 27 13:45:53 2024 +0000

    Bug 35398: Add unit test for extraction of library_rotation_plan
    
    This unit test addition adds an LRP segment to the test EDI message file
    and adds the corresponding test to confirm is it extracted into the
    field as expected.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit dde374e2ad1fa69deaebf21c2a569ecdb4c12594
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 16 14:12:17 2023 +0000

    Bug 35351: Adjust basket details template to avoid showing empty page-section
    
    This patch makes a minor change to the markup of the basket details page
    so that we don't display an empty div.page-section when there are no
    orders.
    
    Note: This patch includes whitespace changes, so please ignore
    whitespace when viewing the diff.
    
    To test, apply the patch and go to Acquisitions.
    
    - Search for a vendor and add a basket if necessary.
    - View the details of an empty basket.
    - Under the "General information" or "Settings" sections there should be
      no empty white box.
    - View the details of a basket which has orders (using the "Add to
      basket" process if necessary).
      - Orders should be displayed correctly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d485ff32b0949f1e39bb5325a4dbb49db89ec582
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Nov 28 15:54:38 2023 +0000

    Bug 35422: Fix translation of suggestions title tag
    
    This patch corrects a missed instance of a string in the title tag which
    should have been wrapped in the translation function [% t() %]
    
    To test, apply the patch and go to Suggestions.
    
    - Click "New purchase suggestion"
    - The title of the page should be correct: "Add suggestion"
    - Confirm that translation is improved:
      - Update and reinstall active translations (for instance fr-FR):
        perl misc/translator/translate update fr-FR
      - Check the corresponding po file, in this case fr-FR-messages.po
      - There should be an entry for the string "Add suggestion"
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 58013fd61dff23c570ab39672e797f2695bd7193
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 24 10:06:35 2023 -0300

    Bug 35397: Fix SIP2AddOpacMessagesToScreenMessage system preference description
    
    The original syspref description contained an extra  '- Use' and reads
    weird.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3cf72dee6b52bbfadbb46b40d6d8fec5f3e2bf48
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Feb 6 12:31:28 2024 +0000

    Bug 36000: Fix CGI::param warning in catalogue search
    
    Speaks for itself.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit dd7ac62d3f184b7c76296389a16192a45fdadae0
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Feb 13 15:04:53 2024 -0500

    Bug 36088: Remove useless code form opac-account-pay.pl
    
    The script opac-account-pay.pl sums the selected accountlines, formats the amount, pulls the currently active currency, and does nothing with any of this data.
    
    Test Plan:
    1) Apply this patch
    2) Restart all the things!
    3) Note there is no change in behavior
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    PA amended title (missing 'Bug ####:'
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f3feebbfe91764b684ee215b93e81e17fde74c94
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Feb 14 14:11:22 2024 +0000

    Bug 36091: Spelling: Use "card number" instead of cardnumber in text
    
    This patch replaces the term "cardnumber" with "card number" in labels
    and text where the patron's library card number is referred to. Where
    the database column is referenced "cardnumber" is kept.
    
    A full test plan would be very time-consuming and I think examining the
    patch should be verification enough for changes which are limited to
    adding a space.
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Verified that the patch only changes "visible" text, and not
    references to the database column.
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f94d763b6a5d671c4860db76263f72d0643b7555
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Feb 26 10:03:22 2024 +0000

    Bug 36099: count and holdcount template vars into JS vars should default to 0 if empty
    
    Visit:
    http://localhost:8081/cgi-bin/koha/catalogue/detail.pl?biblionumber=4321
    Notice you have 2 console errors:
    1) Uncaught SyntaxError: Unexpected token ';'
    2) Uncaught ReferenceError: biblionumber is not defined
    
    Apply patch. Repeat. Notice no error shows.
    Visit an existing biblionumber. Confirm all is well.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e17959b34ddff470b63c8d2fd6e8239ac812ba32
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Feb 23 16:23:38 2024 +0000

    Bug 36157: Remove class from anchor link
    
    Test plan:
    - Create a notice with the module of "Reports" -- add something to the "Print" section. Example from bug 34136:
    [% FOREACH b IN data %]
    <div class="panel panel-default">
      <div class="panel-heading">[% b.surname %], [% b.firstname %]</div>
      <div class="panel-body">Expiration: [% b.dateexpiry %]</div>
      <div class="panel-footer">ID: [% b.borrowernumber %]</div>
    </div>
    [% END %]
    
    - Create and run a saved report. Example from the other bug:
    SELECT * FROM borrowers
    
    - Click on the "Run with template" dropdown and hover the template title.
    
    - Notice it the styling of the hover. Apply patch. Repeat.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ed4fb21e2cadd6f8ae0bb5f3b8c2cfc5003431f3
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Feb 23 15:15:08 2024 -0100

    Bug 36158: Update t iterator variable
    
    It seems like its causing some sort of conflict with t('Hide SQL code') further down below in the code, but I'm not sure why.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ed037fb2740418816b192abe06a250193ad05e40
Author: Thibaud Guillot <thibaud.guillot@biblibre.com>
Date:   Fri Feb 23 13:12:42 2024 +0100

    Bug 36156: None value selected on clone field/subfield linked to AV
    
    When a field or subfield is linked to a list of authorized values and cloned, the selected value is repeated in the clone. This is linked to the default behavior of Select2Utils, so I've added a precise index (-1) to ensure that no value is selected in the clone.
    
    Test plan:
    
    1) Create a repeatable field and subfield and link a list of authorised values to the subfield.
    2) Edit a record, clone the field and see which value is automatically selected in the clone.
    3) Apply the patch
    4) Repeat step 2
    
    Sponsored by : BibLibre
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fa745c3b1d13643e08cacd0cf3a0cb10d25fd8ec
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Feb 19 10:31:19 2024 +0000

    Bug 35532: Remove shortcut buttons from flatpickr
    
    It doesn't make sense to have the shortcut buttons in the range picker
    for bookings. This patch adds the ability to remove them entirely from
    display and uses that option in the bookings modal.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 03b95cc32a9c41b93aefe15894a3b177da00c290
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Feb 19 10:13:14 2024 +0000

    Bug 35532: Update date select field and add hint
    
    This patch updates the 'Period' select from 'Period' to 'Booking dates'
    and adds a hint beneath it too.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 58cdd793579bc230c896d7849aac36f56466638b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Nov 28 18:46:11 2023 +0000

    Bug 35426: Improve layout of bookings modal form
    
    This patch changes the class on the bookings modal form's fieldset in
    order to make the form work better in the small space offered by the
    modal.
    
    Also changed: The hint for the patron search field has been moved below
    the field for consistency.
    
    To test, apply the patch and search for a title in the staff interface.
    
    - View the detail page.
    - If you don't see a "Place booking" button in the toolbar,
      click "Items" in the sidebar menu.
      - Locate the "Priority" heading, and change the "Bookable" setting to
        "Yes."
    - Click the "PLace booking" button in the toolbar.
      - The bookings modal form should appear, and the form layout should be
        improved.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c12cb8e3c598abd916cd110c5a205fe57e4202a7
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon Mar 4 03:57:27 2024 +0000

    Bug 36219: Re-add missing state param for Oauth/OIDC client
    
    This change restores the csrf token added as the state param for
    the OAuth/OIDC client.
    
    Test plan:
    0. Apply the patch and restart Starman
    1. Test the SSO using the wiki guide
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 190ab37812678f0d9ce2d7465bb4fa5971fdb061
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Mar 4 14:46:07 2024 +0100

    Bug 35329: Fix selenium tests if no fund exist
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit aa63943c2f5f02d67e26918f96996ab686aa1bf5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Mar 4 14:38:16 2024 +0100

    Bug 35329: Fix autocomplete when placing a hold
    
    There was a JS error
    Uncaught TypeError: node.autocomplete(...).data(...) is undefined
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 24191009bdaeb46e89b4349714d500efed06a3ad
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Mar 4 10:20:05 2024 -0300

    Bug 36084: Fix cookie domain for www/ tests
    
    This patch changes the hardcoded `koha.local` value on
    t::lib::Mocks::Zebra so tests don't fail when the domain is not `koha`.
    
    To test:
    1. Run:
       $ ktd --shell
      k$ export KOHA_INTRANET_URL=http://kohadev-intra.myDNSname.org:8081
      k$ prove t/db_dependent/www/batch.t
    => FAIL: Tests fail!
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: Tests pass!
    4. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 36c4d315c8b4bac116377d7fac4d9e51414c7f80
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 1 16:01:13 2024 +0100

    Bug 35329: Fix conflict with 33457
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit e170a3c2ab6b2c3dfc9ed34ce802807c97e95885
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 1 15:32:40 2024 +0100

    Bug 35329: (follow-up) Add styling to info and error
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 4bba3c0380c4662ff8c9b89acac57a0d3cc4c497
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Feb 26 15:34:52 2024 +0100

    Bug 35329: Handle duplicate without 500
    
    This is not perfect but way better than before!
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit da5605ca7318b26929047e23bd0c6321ec6c52aa
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Feb 26 15:34:18 2024 +0100

    Bug 35329: Adjustment for 34478
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit b32b08febb29f93fa7c1dd343a541620bed194a3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jan 23 11:43:06 2024 +0000

    Bug 35329: (QA follow-up) Fix for bug 35865
    
    This restores the missing hint that's restored by bug 35865 ahead of
    this patchset
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 1807573ad13f0346114f1d90bc2265755c4915c8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jan 22 21:52:52 2024 +0100

    Bug 35329: Add styling to info and error
    
    There were 2 "class" attribute and the second was ignored.
    This could still be improved, but then we should adjust the css from
    staff-global, but won't be trivial to test.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 5c1f9b433d29160931e7d933dc07df730e549da1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jan 22 21:35:50 2024 +0100

    Bug 35329: Fix filter vars scope
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 7440730e9a0dce92cc65330f8cbd6e8cf54d5542
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 12 13:27:50 2024 +0100

    Bug 35329: Add POD + tidy Selenium.pm
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 9470aa25fbc2ccabcfb2cd1529252e92bd7dd0e8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 10 16:45:24 2024 +0100

    Bug 35329: Add cypress tests
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit bf3ccde63f26ea4107dcd4882a5445dea382393f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 10 13:43:04 2024 +0100

    Bug 35329: Add selenium tests
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit fc5e0fa8b4cda93b7381ad107a7f63ecaf07e140
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jan 10 13:22:28 2024 +0000

    Bug 35329: (follow-up) Label changes for improved accessibility
    
    This patch alters the patron search form so that <label>s wrap the
    <input> fields, allowing the label to be clickable without having to
    associate it with a unique id. CSS has been modified to accommodate this
    change.
    
    The patch also adds missing Bootstrap classes to the "Clear" button, and
    swaps out the "hint" class for the "note" class on the permissions
    information ("Only staff with superlibrarian or acquisitions
    permissions...").
    
    After this patch, form field labels in the patron search modal should be
    clickable to give focus to the field (except for Sort 1 and Sort 2 --
    label don't work that way with Select2).
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit afd014710f5ded1bc0c42656cccc711bc6828502
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 10 13:56:15 2024 +0100

    Bug 35329: Prevent XSS
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit fadb37d3e1a4218dd8d35cf63c5c491b4c5e9e7c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jan 10 12:20:28 2024 +0000

    Bug 35329: (follow-up) Trigger Select2 upon modal open
    
    If we wait until the modal is visible Select2 can correctly calculate
    the width needed for the Sort 1 and Sort 2 dropdowns.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit eb0a84632916477b940516cb29188b1b55acf165
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 10 09:04:31 2024 +0100

    Bug 35329: Remove fixedHeader
    
    If fixedHeader is set for the result table in the modal, the header will
    still appear (quite randomly) on the main view.
    
    To recreate the problem:
    Go to /cgi-bin/koha/members/memberentry.pl
    Click Add guarantor
    Search
    Close the modal
    Scroll down
    => The header of the table will be displayed randomly at the top of the
    page
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 2880efc5173febeb617d4b621c0be9af936dd95e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 10 08:49:07 2024 +0100

    Bug 35329: Fix neworderempty
    
    Hum I had to put it that way but I cannot remember why. Moving patron_search_js after patron_search_modal fixes the search problem (see comment 12).
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit a15f32ec9b773f6e160bd96c0c1d778660d00ad5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 9 13:42:54 2024 +0100

    Bug 35329: Move patron search to modal - remove members/search.pl
    
     git grep members/search.pl
    should not return any results
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit df85dd3a9005157af8ded6e5bff304ecab79fcd5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 9 12:09:55 2024 +0100

    Bug 35329: Move patron search to modal - suggestion
    
    Test plan:
    Edit a suggestion
    Click "Set patron" to change the suggester
    Click "Select manager" to set the manager
    
    On the suggestion list view, you can also select a manager. Make sure
    you are testing with different tabs (suggestions with different statuses).
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 7c5b691808bd54a9fc3101675956ee5e92209a53
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jan 8 14:17:40 2024 +0100

    Bug 35329: Move patron search to modal - erm
    
    Test plan:
    Edit an agreement or a license
    Add new user and click "Select user" to open the modal
    Test with different user for the same agreement/license
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit e3743529ebf7d9729b836c8f20cccabc06deab87
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 5 14:50:38 2024 +0100

    Bug 35329: Move patron search to modal - routing list
    
    The behaviour is a bit different here. Adding a patron from the popup
    refreshed the parent page with the newly added patron.
    
    With this patch the refresh of the page will happen when the modal is
    closed (if patrons have been added).
    
    Test plan:
    Create a subscription, receive one item, create a routing list.
    Add users.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 7a25557bfeaa889a8da9ab89dec352f95f12e374
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 5 12:01:55 2024 +0100

    Bug 35329: Move patron search to modal - edit-batch
    
    Test plan:
    Create new patron card batch
    Keep the textarea empty and click "Add patron(s)" to open the modal
    There is a special feature here, the "checkbox" column is displayed and
    you can select several patrons and click "Add selected patrons".
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 07890e31635cf8d818a937e1df47fb62676e4e8b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 5 12:10:33 2024 +0100

    Bug 35329: Move patron search to modal - funds
    
    This is a tricky one.
    We can have several modals per page, patron-search.inc needs to be
    adjusted to not use ids but classes. Also we need to declare JS
    variables with 'var' instead of 'let' (which does not allow redefinition
    of the same variable).
    
    Test plan:
    Create or modify a fund
    "Select owner" and "Add users" to open the modals.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit f2932277cf14c33946fd354e419ee22913c04baf
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 5 08:13:29 2024 +0100

    Bug 35329: Move patron search to modal - basket
    
    Add user to an acquisition basket
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit b0f583ca426468347dc759165981862cbbb850b9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jan 4 16:44:39 2024 +0100

    Bug 35329: Move patron search to modal - neworderempty
    
    Test plan:
    Create a new acquisition order and add users.
    
    FIXME:
    Note that rules for .modal-dialog .dialog.message need to be adjusted.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit ee39b8feffb2418a8c5e557efb1db2b9b816936d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jan 4 16:13:49 2024 +0100

    Bug 35329: move patron search to modal - Add guarantor
    
    This is the first of many patches to come.
    
    We will rewrite the patron search popup to convert it to a Bootstrap's modal.
    
    I faced different problems on different pages, it is preferable to test
    each page on top of the whole patchset, to make sure a futur change will
    not break previous pages (and this is why they are all on the same bug
    report).
    
    For each page we will test that:
    * the different filters work
    * the "Clear" filters button work
    * the "Add" or "Select" patron button works
    * the nested modal to display patron's details (when clicking on their
      name or cardnumber) works
    
    On this patch we are testing the guarantor search:
    Create a edit a patron and click "Add guarantor" to open the modal.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 92d7b5e86c614fa0c906939404974cf5a33b3b56
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Feb 26 11:29:17 2024 +0100

    Bug 36148: Do not deal with CSRF error in get_template_and_user
    
    We deal with that in the middleware, we don't want 403.pl to early exit.
    If we notice that we actually need it (for other scripts), we could
    eventually add a new flag to get_template_and_user to skip the CSRF check,
    or build the template without using get_template_and_user for errors/*
    scripts.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 22d680d54c193dac38729e9244d53e1141ed4082
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 23 09:07:23 2024 +0100

    Bug 36148: Fix header name
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 462d170c8eca959396659b738191acd580c3606a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 23 08:53:46 2024 +0100

    Bug 36148: Improve error handling and restore programming errors
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 3e90c5517e7e18fb0e548a4013e6c70d78e86c9f
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Feb 23 05:15:24 2024 +0000

    Bug 36148: Add explanatory notes
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit d3687f0b62dd1d5e83ac5cbd4a12262c5c719508
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Feb 23 05:05:30 2024 +0000

    Bug 36148: Allow Koha::Middleware::CSRF to use error/exception middlewares
    
    This change allows Koha::Middleware::CSRF to use the ErrorDocument and
    HTTPExcetions middlewares to display the correct status codes and HTML
    documents.
    
    Leveraging Plack environmental variables, we're also able to pass along
    data to the error page handlers to show warnings indicating that there
    was a missing CSRF token.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 4bd4b367dd1b23c8917aa0f1b5c655d49aaae063
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 22 15:16:08 2024 +0100

    Bug 36148: Move CSRF check to a Plack middleware
    
    The easiest here is to not empty 'op' but instead redirect to an error
    page.
    
    Minor changes: to keep the patch simple it removed the 'dev only' error and
    display the error for non-dev installs. It should not be a problem
    anyway and will prevent errors to be hidden in the log.
    We could make KOHA_ERROR an arrayref, but later (we don't need it now
    anyway).
    
    Note that the OPAC still not benefit from a friendly specific error for
    invalid token.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 82359cf0853e82ff01a2d1828c0450740ca433e2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Feb 27 19:14:19 2024 +0000

    Bug 36084: svc - overdrive
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 6323e08ed7af6fa1cf76f93fc6ec8ae31aed2c8c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 28 10:01:25 2024 +0100

    Bug 36084: Fix file upload and www/batch.t
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit e19c978f021ec8661fa86dd142d9f67dd5306675
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 27 09:44:42 2024 +0100

    Bug 36084: svc - mana
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 2f44827bc16f2b8adc4cb2a871c7fc3495a4ee1f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Feb 26 14:30:06 2024 +0100

    Bug 36084: (follow-up) svc - localization
    
    This form is never sent.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 74a0961081d526819fc731dee4b76f3ccf917595
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Feb 26 14:13:57 2024 +0100

    Bug 36084: (follow-up) svc - config/systempreferences
    
    This form is never sent.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 99d776f58e0fc99fa23adc58545346983bcbf218
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 23 12:15:42 2024 +0100

    Bug 36084: svc - renew
    
    Material - The code that is supposed to replace the checkbox with a text
    was not at the correct place. It should be with checkin, not renewal.
    With the table refresh it does not make sense to keep it as we will
    never see it.
    Best is to replace the checkbox with the text directly.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit d4ce4d8fa25b8f44b4e7ae0e0716608bb0cfc3ff
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 23 09:51:04 2024 +0100

    Bug 36084: svc - recall
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 25ea67c2ca94b43a6d38c734961606f5d377cd9f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 22 16:50:15 2024 +0100

    Bug 36084: svc - problem_reports
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit bf3e4ec99909ec7fa8e80b8c3ba087836a5cc1a7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 22 14:04:09 2024 +0100

    Bug 36084: svc - virtualshelves/search
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit e3e288c7be2c1772ed4e70101ddee7ec93bd124a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 22 12:01:31 2024 +0100

    Bug 36084: svc - members/add_to_list
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit dfe3fcde904c2e60001456c099223d5d4e6b0783
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 21 16:56:54 2024 +0100

    Bug 36084: svc - localization
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 8ebb11b244cc272e1d94e7a15fc15a3c75395a40
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 21 13:30:29 2024 +0100

    Bug 36084: svc - creator_batches
    
    No desire to have a nice api client for this.
    
    This patch also:
    Improve failure handling
    Remove unecessary code in svc script
    Remove duplicated on click binding
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 374db28eee937cc363a5dfef7884a3ff4302c6f6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 21 11:46:42 2024 +0100

    Bug 36084: svc - cover_images
    
    Removing the ability to remove several cover images, it was not used.
    
    FIXME - Note that I am getting randomly a failure when uploading an image and
    seeing the following error in the log:
    [Wed Feb 21 10:43:59.168934 2024] [cgi:error] [pid 24037] [client 172.18.0.1:45074] AH01215: Use of uninitialized value $fileID in bitwise and (&) at /kohadevbox/koha/tools/upload-cover-image.pl line 101.: /kohadevbox/koha/tools/upload-cover-image.pl, referer: http://localhost:8081/cgi-bin/koha/catalogue/detail.pl?biblionumber=1
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 0fe82b601b4b06ce0e9fcc5ca677810886f26717
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Feb 21 06:17:50 2024 +0000

    Bug 36084: Add CSRF token support to svc/authentication
    
    GET svc/authentication will return a CSRF token in a response header
    
    POST svc/authentication requires a CSRF token which can be sourced
    from the response header of GET svc/authentication or some other
    place like the meta element on a HTML page
    
    Note: misc/migration_tools/koha-svc.pl is a simple script which
    can be used to practically evaluate svc/authentication and svc/bib
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 61f1f88c5c871cf86138f81ed6f2e3db63b78d04
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 20 16:43:51 2024 +0100

    Bug 36084: svc - clubs
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 3fb8940b5a572235ce4ab40329e5aee04a5cd2de
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 20 15:39:51 2024 +0100

    Bug 36084: svc - checkout_notes - OPAC
    
    Decided to not use APIClient for OPAC, LATER.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 526ceeb4fa2203236fd7d01021f21c3bd8e5ab42
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 20 15:39:21 2024 +0100

    Bug 36084: svc - checkout_notes
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 6a9ff124a5b30ad2e7a8244e950516d6003903f4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 20 10:00:11 2024 +0100

    Bug 36084: Fix is_ajax by setting X-Requested-With header
    
    Some svc scripts (and controllers) are using using is_ajax to guess if
    it's an AJAX request.
    $.ajax is setting the (non standard) X-Requested-With header, but the
    low level JS 'fetch' does not.
    
    This patch set it in http-client.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 50f383de75efaec54a6a69dd199805e37793ee84
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Feb 19 16:29:23 2024 +0100

    Bug 36084: svc - checkin
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit d322494ef687f226b955f3c1b9212f4c48e62571
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 16 14:56:09 2024 +0100

    Bug 36084: svc - config/systempreferences
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 52d0005ae076226a9d86065a1860b96bad301d32
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 16 13:41:14 2024 +0100

    Bug 36084: svc - shelfbrowser.pl - Replace with GET
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 40cfd29b83c67b06d1edeb0567ca1188fbe0df87
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 14 16:34:20 2024 +0100

    Bug 36084: svc - authorised_values - APIClient now global
    
    APIClient is not a global variable, which will make the next changes
    much easier!
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 8b1871f5cfef6475bd68a9fd163e3dc537c0f733
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 13 16:32:35 2024 +0100

    Bug 36084: Do not allow absence of token
    
    Well, this test was silly, I was focussed on propagating an error to the
    UI, but we really need to explode in this case.
    
    Note that this requires more work as login is now broken.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 20528b5efc8b5479b20a5974008b87362fbba259
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 13 15:16:38 2024 +0100

    Bug 36084: Add a global #messages div
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 39843c2325deee5365e5917697f9698202cbd00f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 13 15:11:59 2024 +0100

    Bug 36084: Add a Dialog class
    
    To display potential errors.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit a9851c0d8b75f3b8044d441d50211b1e2900701a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 13 15:08:25 2024 +0100

    Bug 36084: Bring fetch for everywhere
    
    We are retrieving the awesome fetch modules from Vue, so that it can be
    used in other areas. Here we will use it to inject the CSRF token to the
    header of every POST request.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit cb64ea0c5440f5a7cf7837caafd487f35884430d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Feb 12 16:32:40 2024 +0100

    Bug 36084: svc - article_request - POC
    
    This is a proof of concept
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit c6c8b66b74c5bc7ee7e715a55bfa3f451f48c4ea
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Feb 12 17:36:44 2024 +0100

    Bug 36084: C4::Auth+plack.psgi for svc?
    
    Suggestion to move the CSRF check to CGI->new so that we will check it
    for every request, and it will cover svc scripts as well (they are not
    using get_template_and_user).
    
    The token will be retrieve from the param list *or the csrf_token
    header* (do we want to name it x-koha-csrf-token instead?).
    
    This will be done for *every* request that are not GET: CSRF token is now
    required everywhere CGI is used (side-effects possible?).
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 59ae5d7b6d3d43bc076764d0e9b927b84efb83bb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 28 10:06:08 2024 +0100

    Bug 36102: (follow-up 2) Add cud-login to the login form - fix tests
    
    Bug 36102: [TO SQUASH] (follow-up 2) Add cud-login to the login form - fix tests
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit e345d34ae55666590ed6397619556be277c1e800
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 28 09:09:05 2024 +0100

    Bug 36102: Add cud-login to the login form (2FA)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 2529a9d3a671536edfa03128850e88c9c1b58e10
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Feb 26 12:18:06 2024 +0100

    Bug 36102: (follow-up) Add cud-login to the login form
    
    Previous patch missed opac-auth
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit b2855e26d46d151fba1ba8deae8f91e950452815
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Feb 21 01:50:24 2024 +0000

    Bug 36102: Fix removal of cookie from the installer session on upgrades
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit a44a01aaf3bc95bacf2953759a1e319f31182088
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 20 15:12:23 2024 +0100

    Bug 36102: Fix expired session on the login page of the installer (?)
    
    I *think* this change fixes a bug when starting the installer with an
    expired session. I am no longer able to reproduce the problem however.
    
    Just skip if it does not make sense.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 59470197c296cf2a3cdb0acd3cdd120409b4dd32
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 20 14:31:04 2024 +0100

    Bug 36102: If CSRF check fails, try with anonymous
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 591646d0901a6869f327701328df79db8f779611
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 20 14:10:40 2024 +0100

    Bug 36102: Remove cookie from the installer session
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 919d0d4c02a35686083aa11351d092df4d348417
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 20 14:01:04 2024 +0100

    Bug 36102: Generate a new sessionID if the existing one is invalid
    
    If the cookie contain an expired sessionID we need to create another
    one to correctly generate the CSRF token.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit e533d5745c558abb7c089b71230ca33355db8c99
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 20 13:37:21 2024 +0100

    Bug 36102: Do not repeat op or csrf_token on the login form - staff
    
    Needed for OPAC?
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 5b82d6147729daa4f729667908d34a06e1a64cdf
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 20 11:03:37 2024 +0100

    Bug 36102: (follow-up) Add cud-login to the login form
    
    Hum this didn't make sense. We are not checking credentials after
    checkauth.
    
    This patch is suggesting to rename "userid" and "password" parameters
    from login forms to "login_userid" and "login_password" to not interfere
    with other parameters with the same name.
    
    This looks quite correct, however I am seeing
      "The form submission failed (Wrong CSRF token)."
    in the log after a successful login. Which feels wrong, what's
    happening?
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 8f5782cf705abdac40c4f13f32e1830319f7137e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 20 10:09:25 2024 +0100

    Bug 36102: Do not keep op and csrf_token in param list after login - OPAC
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 74511d87b5fa57657cadd16588dfe40d30eb9820
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 15 14:06:33 2024 +0100

    Bug 36102: Fix 01-installation.t
    
    Something very weird is happening here.
    
    There is a FIXME already, but the trick does not seem to work anymore
    (?)
    
    This patch contains some debug statements and take some screenshots.
    We are reaching the cud-selectframeworks step then we are expecting the
    form to submit the form with op=cud-addframeworks
    
    BUT it seems that "op" is empty, and there is an unexpected warning from
    Starman:
    
    ==> /var/log/koha/kohadev/plack-error.log <==
    ""
    Use of uninitialized value in string ne at /usr/share/perl5/Starman/Server.pm line 304.
    
    ==> /var/log/koha/kohadev/plack-intranet-error.log <==
    [2024/02/15 13:09:34] [WARN] Warning: something's wrong at /kohadevbox/koha/installer/install.pl line 89.
    
    What's going on here??
    
    UPDATE: This is fixed by "Bug 34478: Manual fix - Make Koha::Token use
    session id not userenv id"
    
    Bug 36102: [TO SQUASH] Fix 01-installation.t
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit fabbd8f940f34f87e4c31b4bf648aeb476371071
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 15 14:04:46 2024 +0100

    Bug 36102: Use Koha::Session from C4::InstallAuth
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 88797c54b0932fe5e516ac2f4438d6342ab22632
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 14 14:54:55 2024 +0100

    Bug 36102: Add cud-login to the login form
    
    TODO This needs to be covered by tests.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 8a20c96b6f4db9e5ade58278c72ba9237e2cbc22
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 1 10:46:41 2024 +0100

    Bug 34478: serials/routing-preview.pl
    
    Not totally done, still need the "save and preview"
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 18b046598c49ff839be27ec096a3e2e656b597f7
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Mar 1 07:27:00 2024 +0000

    Bug 34478: (follow-up) Move resend link out of form for display reasons
    
    This improves display. This only comes up when you try to reset your
    password after you did already.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit c9375e746b3f57e8c1101fce32d48138dc9c030b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 28 13:15:14 2024 +0100

    Bug 34478: (follow-up) Manual fix - Make Koha::Token use session id not userenv id
    
    See comment 174.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit f859c30704f868b11e0b5bbfb8185d4966ba0606
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 28 10:13:08 2024 +0100

    Bug 34478: Fix www/auth_values_input_www.t
    
    See bug 36189, we need to rewrite this using Selenium.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit bb54d3f1cea511c74403df6789899e24d8c452ff
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Feb 27 15:05:46 2024 -0500

    Bug 34478: Manual fix - reopen basket - add cud- - basket.tt
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit ff4b63d5c5d03249b7abcebf50d77174f78d40e2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 27 15:34:40 2024 +0100

    Bug 34478: Add cud to updatestructure
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 74d7ae7672a4b82568e57eaddefbded4bf5b05e6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 27 15:00:31 2024 +0100

    Bug 34478: (follow-up) batchMod
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 925eb73a279e18194f05b92069d78fd93c88a58e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 27 14:54:52 2024 +0100

    Bug 34478: (follow-up) batch_record_modification
    
    Fix Edit > Modify record using template
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit bb7a181b612f870e0c168dfbcbad4346a6d90628
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 27 14:48:14 2024 +0100

    Bug 34478: Fix delete from addbiblio
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit f5681518f02d7582688a33be62662eb7c5609a4f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 27 14:42:08 2024 +0100

    Bug 34478: Fix delallitems for additem
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit cee85d7a5a2435a40cd9e130fb4b55d2d7492651
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 27 14:19:18 2024 +0100

    Bug 34478: Fix saveitem and delete for additem
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit fe6c8e7aa0787cb795cfa3e5424c83fc638b97d7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 27 13:45:11 2024 +0100

    Bug 34478: Manual fix - adjust op for acqui/cancelorder
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 84da78796e8bc385274aa5a1c72c2f33aaf442a4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 27 13:23:09 2024 +0100

    Bug 34478: Adjust 'op' on serials/subscription-renew
    
    multi_renew now has a validation step
    This patch also removes 2 variables that were not used ($mode and $done)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 8c3a25bf1f0490c8a2e1c6cf237313cd8b4905e7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 27 11:43:22 2024 +0100

    Bug 34478: Prevent renew if logged in user is not allowed to
    
    This should be on its own bug. Feel free to do it if you have the
    energy, I do not.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit c706fc9e41583f593bda7a555764f61116e11fbb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 27 11:17:30 2024 +0100

    Bug 34478: Replace delete links with form - smart-rules
    
    We can certainly do better here (too many duplicated code in on click
    functions), but it's good enouh for now...
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit f03b7ce0d00154506e4b9061b48a0758504b7002
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Feb 26 15:20:25 2024 +0100

    Bug 34478: Manual fix - remove cud from members/search
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit e1c6f70c77f0983a2cf42754af62b1430c7925a2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Feb 26 14:38:23 2024 +0100

    Bug 34478: Move to get - reserve/request.tt:248
    
    This form is never sent
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 5c999b124191eb1eb1b79f37eab107c3831fd66f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Feb 26 14:05:54 2024 +0100

    Bug 34478: Move to get - acqui/uncertainprice
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 099df862d3ddf2b97c290399f8326e42b19568c5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Feb 26 12:32:18 2024 +0100

    Bug 34478: Convert form to link - sci-main
    
    Nothing to POST, we could move to GET, but we do not have parameters. A
    link is good here.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit cb922721fd9fe9f5586bd546ad325b8821699d68
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Feb 26 12:05:21 2024 +0100

    Bug 34478: (follow-up) Fix circ/set-library
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit f2394c8c092ac593ecb6c52c3123adcda622134a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 23 18:58:16 2024 +0000

    Bug 34478: Corrections to some serials scripts
    
    This patch updates the serials toolbar and related JS so that delete,
    close, and reopen are all POST operations.
    
    The patch also fixes an incorrect op check in the subscription search
    popup.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 63a51acc8327dffa9029a442eb58fae975034a11
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 23 18:05:16 2024 +0000

    Bug 34478: Correct op name for list edit confirmation
    
    The 'delete_confirm' op leads to a confirmation page, so it's GET.
    
    The patch also consolidates JS for handling deletions, using the same
    class for both the delete button in the toolbar and in the table of
    lists.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 882305704e44e86588169d9fbcb458ed77fe3802
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 23 16:55:12 2024 +0000

    Bug 34478: OPAC problem reports template update for messages
    
    The template uses checks on the op value to show messages, so those
    checks have to be updated with the new values.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 32b1d59568fd76188e27f2cdb076e1f1eaebe3b8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 23 16:52:05 2024 +0000

    Bug 34478: Correct op name in CSV profile deletion confirmation step
    
    The 'delete_confirm' op leads to a confirmation page, so it's GET.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 5b8cfd5f30fc4a52e4d0ef484fee525659b3dd25
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 23 15:47:43 2024 +0000

    Bug 34478: Correct op name in notice deletion confirmation step
    
    The 'delete_confirm' op leads to a confirmation page, so it's GET.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 4e5944f7f97ff6ce21f664e5094f54112362ab0a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 23 15:30:22 2024 +0000

    Bug 34478: Fixes for MARC modification template management
    
    This patch converts several delete links to POSTed forms and corrects
    the op variable names in the script. The patch also simplifies the
    deletion click handlers.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 7798f0346cb505bcaf50ae4413f8330e57b056bc
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 23 13:15:39 2024 +0000

    Bug 34478: SQUASH Follow-up to previous batch operations patches
    
    - Get the CSRF token from the pop-up instead of from the parent window,
      since that seems to work
    - Remove some click handlers which were made obsolete
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit a482208f0938f40d25de54caeadf0d5cc9b13656
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 23 13:26:14 2024 +0100

    Bug 34478: (follow-up) Changes for opac-password-recovery
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 31ed10b82d33d043b5fc25f90908a38c67144bcc
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 23 12:08:50 2024 +0000

    Bug 34478: SQUASH further changes to batch biblio operations
    
    This patch makes a number of changes to finish incomplete work in
    668cd06e1960a3878ec1c976ce7f2e1f93688468
    
    Initial submissions to batch biblio operations have to accommodate
    POSTed file data, so this patch makes changes to instances where we were
    submitting biblionumbers in a URL.
    
    We could also choose to make a change in tools/batch_delete_records.pl
    and tools/batch_record_modification.pl to handle different "list"
    operations differently based on the method of submission. This patch
    presents only the client-side option.
    
    The cart presented a unique problem in that it requires that data be
    passed from the pop-up window to the parent window, something which
    can't as easily be done with a form as with a URL. The workaround I came
    up with is to dynamically generate the form in the parent page and
    trigger the submission from there.
    
    Also changed:
    
    - More updated CSS to handle buttons inside dropdowns inside toolbars.
    - Correct op names for the "list" operation in batch modify and delete
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 41704bdb16bae1feac79bd3d681197080838b584
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 23 13:12:02 2024 +0100

    Bug 34478: Manual fix - serials/subscription-add.pl
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 647d59b44980d2198c7329ce3348bc5f0c6c3cc2
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 23 10:41:02 2024 +0000

    Bug 34478: import_export_authtype - cud-import, export
    
    Changing action to op.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 8eed84fe0b15a7be33182619a0f97b1fe5e992f9
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 23 10:23:41 2024 +0000

    Bug 34478: (follow-up) patroncards: FIXMEs for op and missing script
    
    Looks like create-csv never made it.
    Some op's look like GET to me. Creating a pdf is just downloading.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 195cccd4ef56401cad8aaa0f404348cadfadd54e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 23 10:02:16 2024 +0000

    Bug 34478: (follow-up) patroncards: cud-delete from edit-batch and manage
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit e2125d00e15bca6c60d0e46b0f16e06e7813a227
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 23 09:18:54 2024 +0000

    Bug 34478: (follow-up) patron-cards/edit-batch: op cud-remove, cud-dedup
    
    This is about the links for Remove selected patrons, and Remove duplicates.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 18ff2959231de9923875cfdcdc662129a23aad04
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 23 08:36:37 2024 +0000

    Bug 34478: patroncards/edit-batch: Fix for removing patrons
    
    Added a form for delete link from patron table.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit d8909a5eb9cbc639e5873379e142797dbee91aee
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 23 07:55:02 2024 +0000

    Bug 34478: (follow-up) audio_alerts: Correct duplicate form id's
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 688759b0d5a62c47ca5a34e51e94adc2d4b132e6
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 23 07:16:02 2024 +0000

    Bug 34478: (follow-up) upload-cover-image.pl: Remove bitwise-and from condition
    
    Add one character and we should be fine :)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 9736227d68acdf98382c5924748dc7a0194733eb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 22 16:21:21 2024 +0100

    Bug 34478: Manual fix - tools/batchMod-del
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 268e898910600b5ea1310c9cdcca8dcf7d7ab627
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 22 16:12:44 2024 +0100

    Bug 34478: Manual fix - admin/systempreferences
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit aa5ec5029db046f32d9e0205668494f02cfe7463
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 22 16:07:40 2024 +0100

    Bug 34478: Manual fix - admin/patron-attr-types
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 1d23984ce34a538dbf4f5e359964cadc516fd59b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 22 16:03:10 2024 +0100

    Bug 34478: Manual fix - admin/matching-rules
    
    Bug 34478: [TO SQUASH] Manual fix - admin/matching-rules
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit d57384dbd59bca33e27c066e58e6c31d383ca2d0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 22 16:01:01 2024 +0100

    Bug 34478: Manual fix - acqui/basket.pl - export
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 41e8e79b88acca7e4a6ea9254b39ee415246b05e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 22 15:59:01 2024 +0100

    Bug 34478: Manual fix - acqui/duplicate_orders.tt
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit c83330ab9ccfad055b5675fb2db8e71d3d4f54e4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 22 15:50:51 2024 +0100

    Bug 34478: Manual fix - acqui/vendor_issues.pl
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 0f182f84b0bb3df344484182b94f1d25e4ec4146
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Feb 22 12:46:52 2024 +0000

    Bug 34478: Correct check of list op in batch record modification
    
    The "list" step (previewing records to be modified) is a post operation
    so the op must be cud-list.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 3a8ada1e0fbb14c2c353f93166f8befa55a40896
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Feb 22 07:39:06 2024 -0500

    Bug 34478: Manual fix - add cud- op for checkouts - circulation.tt
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 16a05fa41aa4d5902b6105916f81e3304120e243
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Feb 22 12:10:16 2024 +0000

    Bug 34478: Fix style and markup of forms within dropdowns
    
    This patch adds some CSS for handling the style of form buttons inside
    Bootstrap dropdowns and corrects related markup in two places: Authority
    search results and Suggestion management.
    
    Buttons should look correct if we avoid using <fieldset> inside
    dropdowns and make sure the button has "btn btn-default" classes.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit d6cf04d7da0b5b83a49e2a54bc468aa18c6ee1b7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 22 11:05:20 2024 +0100

    Bug 34478: Fix selenium/administration_tasks.t
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit c0c581c5ee3b97066bd3ac50299f88f923ec872b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Feb 21 14:56:41 2024 -0500

    Bug 34478: Manual fix - add cud- op - alert-subscriptions.pl
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit e5f02342c50c30fe7f912c0862901f9f85812e0d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Feb 21 14:24:35 2024 -0500

    Bug 34478: Manual fix - remove csrf - histsearch.tt
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 12147f64998f26f270500044ff36182e1ebcebe8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Feb 21 14:14:57 2024 -0500

    Bug 34478: Manual fix - add cud- ops or remove form submit - returns.tt / checkin-search-box.inc
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 33380209e99c2910c51140791fd69c6d691ae871
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 21 14:04:50 2024 +0100

    Bug 34478: Remove warnings from members/memberentry.pl
    
    Use of uninitialized value $op in string eq at /kohadevbox/koha/members/memberentry.pl line 86.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit d75f1df99d32ab615365ffb87b975d9a53c219f7
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Feb 15 03:06:00 2024 +0000

    Bug 34478: Manual fix - Make Koha::Token use session id not userenv id
    
    Bug 34478: [TO SQUASH] Manual fix - Make Koha::Token use session id not userenv id
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 3f9b523bc508021340d302bd4875e2cb6672199b
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue Feb 20 23:06:08 2024 +0000

    Bug 34478: Fix sco-patron-image.pl access control regression
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 7dc1b9e95436452d2008bce17aa88df6496064a6
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Feb 20 19:38:34 2024 +0000

    Bug 34478: Update numbering patterns modification and deletion
    
    The numbering patterns script has been update to look for "cud-modify"
    to load the edit form, but that's a GET operation and can stay "modify."
    
    The delete buttons have been updated to be a POSTed form.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 87d12dbe3c57a5f1fb105cdb40eda4c4cf2a3643
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Feb 20 19:26:56 2024 +0000

    Bug 34478: Comment deletion should be POSTed form
    
    This patch updates the "Delete" button on the comments moderation page
    to convert the GET link to a posted form.
    
    Unrelated: The JavaScript has also been modified so that it asks for
    confirmation.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 38b94cf964a2826b1afab4be3ef78c11dfdafa92
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Feb 20 19:19:24 2024 +0000

    Bug 34478: Item removal deletion should be POSTed form
    
    This patch updates the "Remove" button from items which are in a
    rotating collection (in the "Manage items" stage). A GET link is
    converted to a posted form.
    
    Unrelated: The JavaScript has also been modified so that it asks for
    confirmation.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 76aac9b301c0f4afc1ee145c459f8ed779d35282
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Feb 20 17:16:04 2024 +0000

    Bug 34478: Fix name of CGI variable
    
    '$query->param' in this script should be '$input->param'
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 78bcbf52f727f6f3d22eb63933b6952d968a35d3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Feb 20 15:49:41 2024 +0000

    Bug 34478: Convert patron file delete link to a posted form
    
    This patch modifies the patron file template to convert the "Delete"
    link to a form which includes the CSRF token. The script has already
    been modified to check for the "op" value updated in the template.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 7947f7872b23674b3e032bbeb97faf74569f97d5
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Feb 20 15:37:42 2024 +0000

    Bug 34478: Fix various parameters on housebound details page
    
    This patch converts the delivery delete buttons to a form and changes
    the corresponding op check in the script.
    
    The patch also fixes an error in the form markup and corrects the op
    parameter name in several links.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 5bb56bd57a9b953dbe25b214b16609de17233ec9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 16 17:00:27 2024 +0000

    Bug 34478: Correct value of "op" when loading the edit form.
    
    The op doesn't need "cud-" because it's a GET operation.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 75fda75868426580b3ea56664ff53da30ebb4d9f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 16 16:51:31 2024 +0000

    Bug 34478: Correct op value for SMS provider deletion
    
    The op value is set in the JavaScript, where it hasn't been updated to
    match the "cud-delete" value checked in the script.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit cb1f73b1bc3cdf56be5f44261621512dfa92c7cd
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 16 14:18:06 2024 +0000

    Bug 34478: Corrections to add and delete of OAI sets
    
    This patch makes two changes: The first changes the name of the op value
    matched in the script when editing a set. The "mod" step is a GET
    operation to load the edit form.
    
    The second change is a workaround for the fact that a submit
    button looks bad in a Bootstrap dropdown. The patch creates a hidden
    form for deletion operations. Clicking a "delete" link in a dropdown
    fills the hidden form with the OAI set id to be deleted and submits it.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit ecbb2f9a526f919d4d61c500448aded05ed6e199
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 16 13:32:30 2024 +0000

    Bug 34478: Item type deletion - correct delete_confirm and delete_confirmed
    
    "delete_confirm" is a GET operation leading to a confirmation page,
    where "cud-delete_confirmed" should submit a POST to delete.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit cf0581283d7be73cc82775064207ff43b714bb00
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 16 13:21:38 2024 +0000

    Bug 34478: Convert item search field delete to POST form
    
    This patch converts the delete link on the item search field page to a
    form with a POST operation.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 0af9d12027b533ecd945c66d19e7a60c6cd96fb2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 16 13:06:55 2024 +0000

    Bug 34478: Fix op variable in item circulation alerts
    
    The AJAX call in the template still used "action" instead of
    "op".
    
    The patch also fixes references to "action" in the POD and corrects
    "toggle" to "cud-toggle".
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 1825c93fe42cdffe641e6ef34c70c69c20dedebe
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 16 12:29:11 2024 +0000

    Bug 34478: Add notes to pay.pl
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 20d22f17be639489ee3e1be0c220cc449f2e17f3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 16 12:21:25 2024 +0000

    Bug 34478: Add cud-pay and cud-writeoff to paycollect
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit adbe4f0d9053deeb87e7643bd68538b315bfec2d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 16 09:32:57 2024 +0000

    Bug 34478: Add op to pay_individual
    
    I also move the writeoff handling out of it's own block in into the rest
    of the x_individual handling.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 9b1e34fb9f86f9c8ae418cb925bf98313d5a8873
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Feb 15 17:10:00 2024 +0000

    Bug 34478: Move writeoff-individual to paycollect.pl
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit b920d120903c714d62b491db14ace862570e1a93
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 16 11:46:50 2024 +0000

    Bug 34478: Fix op check in table settings admin
    
    The "action" hidden field was renamed to "op", but "action" was still
    being looked for in the script.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit d98bd89094c682421012e849091d757745576592
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 16 10:42:16 2024 +0000

    Bug 34478: Changes for opac-shareshelf
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 2a6ac32c62a5b0b98ca55ea6f3cec1f5395dc652
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Feb 15 11:07:29 2024 +0000

    Bug 34478: Changes for suggestion/suggestion
    
    Too much changes needed. Main functionality works again.
    Some improvements can still be made.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit af3ae06245cee74cd4bc0ce8f3a17a162f75b40e
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Feb 16 00:11:10 2024 +0000

    Bug 34478: Make plack.psgi change more comprehensive
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit bf22d5209889591b6447a3921b139397f06b9e00
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Feb 15 18:02:02 2024 +0000

    Bug 34478: Classification config - Convert delete links to form POSTS
    
    This patch converts the delete links on the classification
    configuration page for sources, filing rules, and splitting rules to
    POST forms.
    
    A couple of op checks in the script are corrected to match.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 2cfd7c4bfe3586a175a4cc57708297ff8999a572
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Feb 15 17:35:32 2024 +0000

    Bug 34478: Cities - Incorrect op check for cud-delete_confirm
    
    On the cities administration page, the delete button is a GET operation
    to a second form for confirmation.
    
    This script should be checking for op=delete_confirm, not
    cud-delete_confirm.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 325b3e7c1087d920d2400f19e9cdf9770c0d75f8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Feb 15 17:07:01 2024 +0000

    Bug 34478: Convert authorised value delete link to POST form
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 09bfb81c5e6b89db344a3b67dee3528039fea0be
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Feb 15 16:35:39 2024 +0000

    Bug 34478: Authority frameworks - first subfield delete button has incorrect op value
    
    From the list of a tag's subfields (e.g.
    /cgi-bin/koha/admin/auth_subfields_structure.pl?tagfield=245&frameworkcode=)
    the delete button is a GET operation to a second form for confirmation.
    
    This script should be checking for op=delete_confirm, not cud-delete-confirm.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 906059fd03b58077cb549fd504f411c2ecfdef53
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Feb 15 16:19:56 2024 +0000

    Bug 34478: Frameworks - first subfield delete button has incorrect op value
    
    From the list of a tag's subfields (e.g.
    /cgi-bin/koha/admin/marc_subfields_structure.pl?tagfield=245&frameworkcode=)
    the delete button is a GET operation to a second form for confirmation.
    
    This script should be checking for op=delete_confirm, not
    cud-delete-confirm.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 8e6b95a936cbfbaadb15f6266222b0bce389d677
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Feb 15 15:10:56 2024 +0000

    Bug 34478: Convert EDIFACT messages deletion to POST
    
    Modify DataTables rendering to put the delete button inside a POSTed
    form.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 5a333e3cfa7dd55d4a1fa0d8a4e2cc40154029c4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Feb 15 15:25:17 2024 +0000

    Bug 34478: Use op and cud in pay -> paycollect redirect
    
    The pay to paycollect post/redirect flow here doesn't actually
    consistute a state change, however it's much simpler to add the csrf
    token check flow here than to refactor the code to a get (url's quickly
    grow too large for a GET) or rework it in other ways.  I opted to do
    this for now and work on a refactor at a future date.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 0896724e34dfe81c8097095efcab53faf7f7383b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Feb 15 13:03:39 2024 +0000

    Bug 34478: Re-correct account-table pay
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 95c4f9367149913057738243ea28856cb44d5189
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Feb 15 12:32:25 2024 +0000

    Bug 34478: Basket group export CSV option should not check cud-op
    
    The Export CSV operation is GET and uses op=export, so the script should
    not check for "cud-op."
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 62d9f73e9e3bfe7fbca1340c753b75c951aceaf1
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Feb 15 09:13:15 2024 +0000

    Bug 34478: Changes for authorities/searchresultlist (new delete form)
    
    Replaces a delete with GET.
    FIXME: Trouble with closing dropdown.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 3931404cd51c980ddcea4b088ce3636afa3169c8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 15 10:43:06 2024 +0100

    Bug 34478: Regression - fix installer stuck
    
    Installer was stuck after "Set up database" with a blank page
    
    It also fixes 00-onboarding.t
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 5567a1a6d4e19436609614b8820dbc304ed9f0a8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 15 10:24:02 2024 +0100

    Bug 34478: Regression - fix change auth type
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 3f2a8ecf3c9f3421260657bfc779029e6ae75f2c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 15 10:18:37 2024 +0100

    Bug 34478: Regression - fix change framework
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 8c35fec8562ac04583c61ae3090907cd4dab7525
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Feb 14 18:51:57 2024 +0000

    Bug 34478: (follow-up) Change invoice files delete link to POST
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit ea6842ea21c7bfde293c9df8c830271ea67cf0cd
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Feb 15 03:06:36 2024 +0000

    Bug 34478: Manual fix - Fix controller op handling of self-checkout
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 8b69d0b4d3e72171d9f2d51234f345405a433c4f
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Feb 15 00:35:16 2024 +0000

    Bug 34478: Manual fix - Fix session cookie management of self-checkout
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 4354a4c1721b190a5980bd670862a88273c0c260
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Feb 14 23:45:28 2024 +0000

    Bug 34478: Manual fix - Remove csrf_token from GET to sco-patron-image.pl
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 768b24af7805027f600b8137c1cdb7111e21eed8
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Feb 14 23:34:27 2024 +0000

    Bug 34478: Manual fix - Remove cud-search from z3950-admin-search.inc
    
    Convert POST to GET for z3950 server search
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 8dc35c14b11e0849d5442a2895bf07f7d4c71018
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Feb 14 11:58:36 2024 -0500

    Bug 34478: Manual fix - change links to JS form submission - change action to op - request.pl/.tt
    
    Bug 34478: [TO SQUASH] Manual fix - change links to JS form submission - cleanup comments and unused routine - request.pl/.tt
    
    Bug 34478: [TO SQUASH] Manual fix - link to js post and add op to form - request.tt
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 7c56ebade74e6f89de70746be239811741be021e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Feb 14 07:13:17 2024 -0500

    Bug 34478: Manual fix - change 'phase' to 'op' add cud- - mana-share-report
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit db040fa49a22460e157830f8e246f45a082d3b87
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Feb 14 06:58:20 2024 -0500

    Bug 34478: Rename the cud op for the statess account redirection form
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 4fe6021685facd04926fce2af6b406c398bed58f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Feb 14 09:54:48 2024 +0000

    Bug 34478: Update op for opac-account-pay
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit c2937c5bd01306e371e4f2e7b119c0c2ad906543
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Feb 13 14:57:54 2024 -0500

    Bug 34478: Add op cud-stateless for account-table.inc
    
    This form calls a payment plugin to prep a new form that submits to a
    the payment site external to Koha.
    
    This form does not change state but a change to GET would cause failures
    if trying to pay more than 133 fees on Chrome ( but not Firefox ).
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 21fa3f64c31dad23e50e633a6f51f98c8f7ade12
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 13 09:06:47 2024 +0100

    Bug 34478: Fix link to batch patron mod from reports
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit cf445df109fedd3ee663396f9347a75d19a46c7e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 13 09:06:13 2024 +0100

    Bug 34478: Move to get for modborrowers
    
    Bug 34478: [TO SQUASH] tools/modborrowers
    
    We actually want to POST here to not reach the limit of a GET request.
    It also fixes the following warning in the console:
      Form contains enctype=multipart/form-data, but does not contain method=post.  Submitting normally with method=GET and no enctype instead.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit f1ecd4eef11cfa5d807ec66c63d963a56367e571
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 13 08:32:50 2024 +0100

    Bug 34478: guided_reports - run is stateless
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit b624cc99287a86c275671118def8a116ceaabd07
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Feb 9 16:08:49 2024 +0000

    Bug 34478: Manual fix - audio alerts
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 2ca4d8184652bc3fb5444b3984b1f598af076fee
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 9 14:37:07 2024 +0000

    Bug 34478: Clarify opac serial alert subscriptions
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit b8814ff696924c6ebdd5c860da571ac69336fc86
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 9 12:59:23 2024 +0000

    Bug 34478: Manual - Replace link with submit button - circu-menu
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 3fbaf6379e2c44914d5d18cb2abb2736c46457e0
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 9 12:41:25 2024 +0000

    Bug 34478: Manual - change to get and remove CSRF - boraccount
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit ebe28ee34400edc961901170e5603df1a6641a69
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Feb 9 07:42:27 2024 -0500

    Bug 34478: Manual fix - change to GET - overdrive-checkout.inc
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 1d4b275332efa78e8560899b13957c9170beecc8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 9 12:38:05 2024 +0000

    Bug 34478: Manual fix - convert link to form - boraccount.tt
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit a060170d29b7ce5be7ff0f21956bfbc0831461a4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 9 11:51:59 2024 +0000

    Bug 34478: Manual fix - change to get remove csrf token - installer/step2
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 5472966a4bc932354d01af353c73f1c3b58eb7e6
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 9 11:38:56 2024 +0000

    Bug 34478: Manual fix - change to get remove csrf token - installer/step1
    
    This form allows the user to select which language they wish to work
    through the installer in, it doesn't update anything serverside.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 0e4f0292aff887a90abf0c1ca79c37748eedd487
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 9 11:29:07 2024 +0000

    Bug 34478: Manual fix - change to get remove csrf token - barcode-print
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit accf5563408d4d69e7b724decd624aa5faa73501
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 9 11:26:11 2024 +0000

    Bug 34478: Manual fix - change to get remove csrf token - downloadcard
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 8a20e0cb6a0efd6b993e361d439dbb4486ba15d1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 9 12:23:59 2024 +0100

    Bug 34478: Add 'op' to reports/guided_reports - WIP
    
    Bug 34478: [TO SQUASH] Add 'op' to reports/guided_reports
    
    Found bug 36071 when working on this. This is not a regression from this
    patch.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit c16e579d48418eb1a7529e3a2f7a3946b7f3ba6b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 9 11:23:35 2024 +0000

    Bug 34478: Add 'op' to sendbasketform
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 6246d9812d87692aeeb060253cdb8abeb21c401f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 9 11:19:43 2024 +0000

    Bug 34478: Manual fix - change to get remove csrf token - citites-admin-search
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit f9f9f2255962a968b5f4d27f002d7aca686f10cb
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 9 11:13:44 2024 +0000

    Bug 34478: Manual fix - change to get remove csrf token - contracts-admin-search
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 351bba2b5518eab81473a10a68a85f44047ab05c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 9 11:12:04 2024 +0000

    Bug 34478: Manual fix - change to get remove csrf token - acquisitions-search
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 5fcce594f6063389bbc04e11448fd2c466b545e9
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 9 11:10:24 2024 +0000

    Bug 34478: Manual fix - change to get remove csrf token - budgets-admin-search
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 5f4d97742d7ac4c073f322b7b3b514c5b58686d4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 9 11:01:17 2024 +0000

    Bug 34478: Add 'op' to circ/renew.pl
    
    Added 'cud-renew' op check to circ/renew.pl and added corresponding op
    params to:
    
    * includes/renew-search-box.tt
    * circ/renew.tt
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit f1be5a8524ad89300f299e5e9a90479c995279c1
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 9 10:51:26 2024 +0000

    Bug 34478: Changes for labels/spinelabel-print.pl (no POST)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit a7525cf6b7b96f937e4f8685322fa42785e3dcec
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 9 10:48:12 2024 +0000

    Bug 34478: Changes for tools/cleanborrowers
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit f3bd0e7ebddac73552dd175b39d458855d7d663e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 9 10:48:24 2024 +0000

    Bug 34478: Manual fix - change to get remove csrf token - member-search-box
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit dc5bc061632553b46d7000b813bb66fe443f69e0
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 9 10:46:42 2024 +0000

    Bug 34478: Manual fix - change to get remove csrf token - preservation-search
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit ab38465b0d706a16bce3d4c5607a83284627fccc
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 9 10:45:05 2024 +0000

    Bug 34478: Manual fix - change to get remove csrf token - letters-search
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit f40fbff72ea70dad4aaf29bbf32c8302236b3d0a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 9 10:42:29 2024 +0000

    Bug 34478: Manual fix - change to get remove csrf token - patron-search-box
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit d0b2a3f362f114f5f31f63b9cd4dacbb66aa247a
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 9 10:38:30 2024 +0000

    Bug 34478: (QA follow-up) Rename change to delete
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit e2691e087054d866068bce522341f7326177b167
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 9 10:09:22 2024 +0000

    Bug 34478: Changes for tools/upload
    
    Required some more changes for mode to op, and delete form.
    Most forms did not need a POST.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit bc2bb899304e79f58ad17d5b95107a561c86dac9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 9 11:02:51 2024 +0100

    Bug 34478: (follow-up) Remove check_csrf from pl files
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 17ec52961ca38346ed4cfe3d7e97627c59661051
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 9 09:02:57 2024 +0000

    Bug 34478: Changes for tools/stage-marc-import
    
    First form is ajax upload, no post needed.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit e50445fef2d61b038bf756f6cd42e4c5b88d6ca3
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 9 08:55:23 2024 +0000

    Bug 34478: Changes for tools/import_borrowers
    
    Removed a csrf check in script itself.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit aa7a8569a43a62118d13b82457e0e32dac68ba09
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 9 08:45:06 2024 +0000

    Bug 34478: Changes for tools/viewlog (no POST, just viewing)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 4f63ac9dff283ce5d3a81d99dacbc0ed06fc2352
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 9 08:36:59 2024 +0000

    Bug 34478: Changes for tools/upload-images
    
    First upload form does not submit (ajax processing).
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 03941cc684a2eb13c8e7f3cb64ff8474758d02e2
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 9 08:26:33 2024 +0000

    Bug 34478: Changes for tools/scheduler
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 6a366faf3fd1d4f14eff013fe4e2f7d949018410
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 9 08:14:32 2024 +0000

    Bug 34478: Changes for tools/holidays
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 159b9bbcf2c9a2fe92567d29f1d1a903f9154478
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 9 08:04:13 2024 +0000

    Bug 34478: Changes for overduerules.tt (remove POST for branch selection)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit e4abc27635b591ddaf0b08f5457a7f41b4de8a9d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 9 07:45:33 2024 +0000

    Bug 34478: Changes for offline_circ
    
    Removed an unused form from process_koc.tt and an unused
    op from process_koc.pl.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit bb1e48267ea20a776f7493d7876754185e6f09e8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 8 12:16:07 2024 +0100

    Bug 34478: Manual fix - change to get - reports
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit fb004545c70b1315387fc517bc7b006ef940969e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 8 12:11:00 2024 +0100

    Bug 34478: op =~ ^cud- - Manual - cud-do_it => do_it
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 0fdcd75b9fcf91e53a9a56923ec58162892d53ba
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 8 12:06:55 2024 +0100

    Bug 34478: Add 'op' to circ/branchtransfers
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 93e51a1103fa7d6973c8f7bd49263c97b3eef576
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 8 11:54:32 2024 +0100

    Bug 34478: Manual fix - change to get - circ/reserveratios
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 07723d6708e607eb204756e182796cfe644e656a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 8 11:44:57 2024 +0100

    Bug 34478: Add 'op' to cataloguing/merge
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 6c8fc9ffc945b4c867709d666c103f9035e9f25a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 8 10:57:15 2024 +0100

    Bug 34478: Add 'op' to cataloguing/moveitem
    
    Bug 34478: [TO SQUASH] Add 'op' to cataloguing/moveitem
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit ddbb1a40558b28fa2cc7c9087e3501e76d91bb8f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 8 10:19:07 2024 +0100

    Bug 34478: Add 'op' to catalogue/MARCdetail
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit a8cc3b3db5b8599a5975da0ebef8e2f6236c0a9d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 8 09:56:39 2024 +0100

    Bug 34478: Add 'op' to authorities/merge
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 77f43b1a636c1dbde09caa598f6e03990e24cf39
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 8 09:50:12 2024 +0100

    Bug 34478: Replace forms with links - authorities/authorities
    
    Bug 34478: [TO SQUASH] Replace forms with links - authorities/authorities
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 025fcdc5ba61bf411ad1401ca292ee3f351d4218
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 7 17:02:14 2024 +0100

    Bug 34478: Add 'op' to admin/marc-overlay-rules
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 23ebad24b69e9cbf6b89e4acad8bb6e7f71a603d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 7 16:19:19 2024 +0100

    Bug 34478: Add 'op' to tags/review
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 6ed291c842269c67a3b4b78415548faca984608e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 7 15:34:07 2024 +0100

    Bug 34478: Add 'op' to admin/smart-rules
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 911adb94b27b88f602960ff4145196d18cc7c52b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Feb 7 13:38:44 2024 +0000

    Bug 34478: (follow-up) Remove POST from sru_modmapping templates
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit c7b576ad7e9e53a572017a2b3e8771bd128f983d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 7 11:56:15 2024 +0100

    Bug 34478: Remove 'Delete' link for news on the homepage
    
    This should not be a link but a POST instead. Simply removing it for
    now, we will reintroduce it later if there is a need for that.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit c95e81aef516a3faf3067da5e17bf7b5cddc1360
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 7 11:25:01 2024 +0100

    Bug 34478: Fix circ/set-library
    
    Why do not we simply redirect instead of POSTing?
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit d8cbdef12b8d0a36b1f93921257e4ab268d30330
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 7 10:39:34 2024 +0100

    Bug 34478: Manual fix - change to get - circ/branchoverdues
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 4e15a406428bd791198b05cd829ad4553482fef4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 7 10:34:53 2024 +0100

    Bug 34478: Manual fix - change to get - circ/curbside_pickups
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 9278a91bc2a85f0700ce1830a35b4bdd8fcf5e95
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 7 10:32:12 2024 +0100

    Bug 34478: Manual fix - change to get - circ/article-requests
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 102ae26bebb6e6570059315889fb208296bb203e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 7 10:27:43 2024 +0100

    Bug 34478: Add 'op' to serials/subscription-batchedit
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 833fe2d2f0f271339318a54e181cedcea4f29210
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 7 10:24:46 2024 +0100

    Bug 34478: Manual fix - change to get - serials/claims
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 861e25443a96f5f3f30bcbcb210f7df1173ce3f2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 7 10:22:23 2024 +0100

    Bug 34478: Replace form with div - serials/serials-search
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 83310f692867b6e8e1da2c80167ed27d7a3cbf11
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 7 10:00:28 2024 +0100

    Bug 34478: Manual fix - change to get - serials/acqui-search
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit e285b2d0e2f8c4cf465d60870d21d0170218fbe7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 7 09:52:19 2024 +0100

    Bug 34478: Replace form with div - catalogue/result / z39.50/SRU search
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 69b6069309484aec4ef47f2565d238fe5d8b623a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 7 09:16:33 2024 +0100

    Bug 34478: Add test to catch missing op in POST forms
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 2c83be0309d60cda1b5f4fd25fb33dfcaa4a0e2b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 6 16:52:45 2024 +0100

    Bug 34478: Add op to reports/dictionary
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit cb79f321e6c64889201db02fa298b3716df81b5c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 6 16:31:59 2024 +0100

    Bug 34478: Add missing CSRF token to acqui/basket.tt
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 1c6c66c0946fcca0fe480239e17da3546645a3aa
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 6 16:29:52 2024 +0100

    Bug 34478: Remove form from preferences.tt
    
    We don't need a form here, it's never submitted
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 40b8e359f321f03dfc5a24f2897247ddd2cc714a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 6 15:54:38 2024 +0100

    Bug 34478: Fix opac-tags and tags/lists
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit fa84aadf36b49b1894ea926737c5b5ca78e7b78d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 6 15:54:32 2024 +0100

    Bug 34478: Add csrf-token in meta
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 0df674ba72f9a6e810d5639c49907371d019ab5c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 6 12:07:08 2024 +0100

    Bug 34478: Fix shelf transfer
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 444888911b52c0585c661da0875ce938726b7e92
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 6 11:36:22 2024 +0100

    Bug 34478: Shorten output of xt/find-missing-csrf.t
    
    To make it more readable.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit fad58b08ba76e260a400a87ce86a0941d10af4ad
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 6 11:26:05 2024 +0100

    Bug 34478: Fix xt/find-missing-csrf.t
    
    It was reporting false positives.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 93e3fed04301c935c95c5ec12bc0895c880df4a6
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Feb 6 09:25:45 2024 -0100

    Bug 34478: Move compatibility code
    
    All ILL backend retrocompatibility code has been moved to Illrequest.pm:get_op_param_deprecation for isolation and clarity
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit a9adee54b89dbdda468129b8342310131e6be331
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Feb 6 10:05:19 2024 +0000

    Bug 34478: ILL INTRA: query_type => op
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 38b21ff3b81fe3240e839ce579086e12f7e4375d
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Feb 5 14:49:07 2024 -0100

    Bug 34478: ILL INTRA: delete to cud-delete
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 40a1ab9db1fd71b09f7299d638d3404ea039eda8
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Feb 5 14:48:48 2024 -0100

    Bug 34478: ILL INTRA: cancel to cud-cancel
    
    cancel -> cud-cancel
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 8818055c82222729e7f53c303a6d1986e8c7e3de
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Feb 5 12:31:40 2024 -0100

    Bug 34478: ILL INTRA: create -> cud-create
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit a24596709a6216cc2743c24afc44e106ec95178d
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Feb 5 12:31:21 2024 -0100

    Bug 34478: ILL INTRA: deprecation check
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 78c8ab3744e0e4982cfa0aeca1acb48fedb39710
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Feb 5 12:23:55 2024 -0100

    Bug 34478: ILL INTRA: method -> op
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit d08c23869a0e4b612fcf6e6fa184699cc9f6cca5
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Feb 5 12:17:34 2024 -0100

    Bug 34478: ILL INTRA preparation: Move function to ILLrequest.pm
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit a7667eafbb8c0f7b9c613ec39caa690dc5e19cdf
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Feb 5 10:56:23 2024 +0000

    Bug 34478: ILL OPAC: update -> cud-update
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit ed3882059711609099f13f408c9272611803a210
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Feb 2 15:16:02 2024 +0000

    Bug 34478: ILL OPAC: create -> add_form
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 6d0cb2648e8241962c42ee8c83676a62d9bdf070
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Feb 2 14:39:58 2024 -0100

    Bug 34478: ILL OPAC: POST not needed
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 6719bc6bba3fdc7d0c15618c8e9dc31eb889cdc5
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Feb 2 14:39:48 2024 -0100

    Bug 34478: ILL OPAC: create => cud-create
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit ed439f28c5b2bc390cdb7f94d309c1c815f5a9c1
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Feb 2 15:12:27 2024 +0000

    Bug 34478: ILL OPAC: method => op
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 4cc6b4c9c0110510273f091bc50ffb60286f8188
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Feb 5 23:09:35 2024 +0000

    Bug 34478: Manual fix - add op clubs/templates-add-modify
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit a58a0d9fa8cb7c489c8cb2eee231c786ad264710
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Feb 5 23:00:23 2024 +0000

    Bug 34478: Manual fix - add op clubs/clubs-add-modify
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 4f54b9ccd6cf0b405bd0aaddd961a2b9921f4f40
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Feb 5 22:35:36 2024 +0000

    Bug 34478: Manual fix - add op admin/branch_transfer_limits
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 4dbdcb0908eef9e9ca48de57af673354a4fc5f4b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Feb 5 15:01:22 2024 +0000

    Bug 34478: Manual fix - change to get remove csrf token - patrons-admin-search
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit b41187439a3fb96aac861821c3c36a31a9f17b70
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Feb 5 14:56:54 2024 +0000

    Bug 34478: Manual fix - change to get - desks-admin-search
    
    Bug 34478: TO SQUASH Manual fix - remove csrf token - desks-admin-search
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit f72237a6c4490ffdf3863839082de305eb07257c
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Feb 2 03:17:53 2024 +0000

    Bug 34478: Manual fix - Add cud-search to z3950-admin-search.inc
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 47d6725a722728c5d0ae38953a0d8c74d99d3d9e
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Feb 2 03:08:51 2024 +0000

    Bug 34478: Manual fix - Convert Z39.50 delete from GET to POST
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit f2e7862341a5c3b37295dd31d7ea0c23e634e2d0
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Feb 2 02:52:39 2024 +0000

    Bug 34478: Manual fix - fix add/edit/copy display of Z39.50 servers
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 3737241a6a083f276257c145af6209178ed11567
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Feb 2 14:03:36 2024 -0500

    Bug 34478: Changes for addorder
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit de20de3cbfea10f0f41e7aeb00ee5a56fc2a86f5
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Feb 2 11:17:32 2024 -0500

    Bug 34478: Changes for acqui-home.tt - Change to GET, remove CSRF token
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 9a34fa984997ae12a1d8b563514c34609518ca25
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Feb 2 09:42:35 2024 -0500

    Bug 34478: Changes for acqui/supplier
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 84922d4ad975956b14d48102802112d0a8a35403
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Feb 2 09:36:31 2024 -0500

    Bug 34478: Changes for members/member-flags
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit e9a4bf0106a915ecc31e3d38473eb9cd1b85c777
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 2 10:52:42 2024 +0000

    Bug 34478: Changes for virtualshelves/addbybiblionumber
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 700ff3508b0eb47d4e0c42c47538f68328345917
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 2 10:47:17 2024 +0000

    Bug 34478: Changes for admin/koha2marclinks
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit abfbf5f4e9004c7d13593547a1daa27c85553b89
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 2 10:30:29 2024 +0000

    Bug 34478: Changes for admin/sru_modmapping (no token needed)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit a43a04215928454786e844b0dbd123c39384793a
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 2 10:19:06 2024 +0000

    Bug 34478: Changes for virtualshelves/downloadshelf (no POST)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit e355fe07359f1264d686f8ef6720b027e5247ff3
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 2 10:15:56 2024 +0000

    Bug 34478: Changes for virtualshelves/sendshelf
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 1a887538b98c747c7ba6da5d9f31eaa62ed1d471
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 2 10:06:43 2024 +0000

    Bug 34478: Changes for patron_lists/add-modify
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit ee17b3d41759e7dc87c402f194f63f010c589329
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 2 09:57:52 2024 +0000

    Bug 34478: Changes for patron_lists/list
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit c3dce50a4fa265f6c06065e4774c0441fcc6dcb9
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 2 09:07:02 2024 +0000

    Bug 34478: Changes for opac-dismiss-message / opac-note.inc
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 02564dc45eab43a5bf0fa004b79bc3608968871d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 2 08:47:46 2024 +0000

    Bug 34478: Changes for opac/sci/sci-main
    
    The template already contained cud-check_in..
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 188803c4eabfe08ea3fd476797a7a7d0fa374543
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 2 08:39:15 2024 +0000

    Bug 34478: Changes for opac-addbybiblionumber
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 90a1586c57449bd3fceeb6277f45ee7da420ca4c
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 2 08:14:38 2024 +0000

    Bug 34478: Changes for opac-serial-issues
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 9e4f5e8247b6dfa951c534aef74935a4be2556aa
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Feb 2 08:05:29 2024 +0000

    Bug 34478: Changes for opac-downloadshelf (no POST needed)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 7db6c3e6e5c3e7163ec85beebed55f226157b0e0
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Feb 1 15:17:38 2024 +0000

    Bug 34478: Changes for opac-password-recovery
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit a77182513a1f3af4568490c045e8b64b82c7900a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 2 05:38:06 2024 +0000

    Bug 34478: Manual fix - add op - pos/pay
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 5c25dd0eecdbe156107448a2f0d8421476b21f11
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Feb 1 21:18:25 2024 +0000

    Bug 34478: Manual fix - add op - rotating_collections/addItems
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 1c91e91e089c0dc08c6403d32a0d477834d1b8d6
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Feb 1 19:02:56 2024 +0000

    Bug 34478: Manual fix - add op - rotating_collections/transferCollection
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 7bd78700cf317ec298aaf9aebc435800e109bdbc
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Feb 1 12:08:14 2024 -0500

    Bug 34478: Manual fix - add op - members/housebound
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 0a92c55c7eb74c3dc6f539dab7e97e6d56702772
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Feb 1 11:28:44 2024 -0500

    Bug 34478: Manual fix - add op - members/maninvoice
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 1244fffa9cbc0bd6590bc7a1c76e23c2f85f84d3
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Feb 1 11:13:36 2024 -0500

    Bug 34478: Manual fix - add op - members/mancredit
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit f731a196765f55a4d023f26792ce51fa0632ef79
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Feb 1 16:10:52 2024 +0000

    Bug 34478: Manual fix - add op - members/member-password
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 806282f6022793448cb6e783fbf548ff726c31eb
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Feb 1 14:43:16 2024 +0000

    Bug 34478: opac-basket does not need a POST for downloading cart
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 44949a88ea7dba3262cb82423d4fedd47ee7168a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Feb 1 15:11:41 2024 +0000

    Bug 34478: Manual fix - add op - members/discharge
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 23bf1c23808daa11c6afada70e854ad1bd6e3da7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Feb 1 09:59:26 2024 -0500

    Bug 34478: Manual fix - add op and change link to form - members-toolbar.inc / patron_messages.inc
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 672c0eafce8e83b569600b248afdd9ae0bbe3f62
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Feb 1 14:39:46 2024 +0000

    Bug 34478: Changes for opac-sendshelf
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 9439c9a36e36cb0cd6617e2eef97abd902afee2e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Feb 1 09:36:03 2024 -0500

    Bug 34478: Manual fix - add ops / change confirmation forms to get - waiting_holds.inc / waitingreserves.tt
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit a08df1a9d5cb68fde3fbc4966cb8914618a22355
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Feb 1 14:04:23 2024 +0000

    Bug 34478: opac-tags_subject does not need a POST
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 84a01ff22a7ef8063c390fc6cda7bcd89fe25778
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Feb 1 13:57:14 2024 +0000

    Bug 34478: Changes for opac-reserve
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 55b5b51532ef88688d783d13961e6b6315cf97a1
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Feb 1 13:44:52 2024 +0000

    Bug 34478: opac-downloadcart does not need a POST
    
    Note: Created bug 35975 for bug with BIBTEX.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit adbc2ae27e08bcde07bdb9245309f3cce08c6fa3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Feb 1 08:53:28 2024 -0500

    Bug 34478: Manual fix - add ops - hold-table.inc opac-user.tt
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 0143ed45bb2dad2ccb9e4ad27f5a76d223a96f95
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Feb 1 12:39:00 2024 +0000

    Bug 34478: Changes for opac-review
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 53991f88b00c3090005b9f4fbc2863fa51aaf441
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 31 11:45:40 2024 -0500

    Bug 34478: Manual fix - add op - request.tt placerequest
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 95c87290e5a4967ea9773ebc2302c12b8cc5f2a3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 31 11:39:08 2024 -0500

    Bug 34478: Manual fix - add ops - patron-detail-tabs
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit be0a647284e569a66bbb3a133d99fd06f5ef1fbd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 31 17:09:05 2024 +0100

    Bug 34478: Remove POST from cataloguing_create_av.inc
    
    The POST is done in JS, we don't need it there.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 800a788504122dd5d08ad4b293fdb4f29af1b030
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 31 10:32:17 2024 -0500

    Bug 34478: Manual fix - change post to get - admin/currency
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit fd03feab5d6da23969c6572db424ca50ecbc0f49
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 31 10:02:30 2024 -0500

    Bug 34478: Manual fix - change op to action - opac-memberentry
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 632146366aa0dbc3625238fc7196b715469c255f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 31 15:54:01 2024 +0100

    Bug 34478: op =~ ^cud- in pl/pm - Manual revert changes to recreateIssueStatistics.pl
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit a1338de38386ac9f9eab5aa56f3eea4e89e6d1c9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 31 15:51:41 2024 +0100

    Bug 34478: op =~ ^cud- in pl/pm - Manual revert changes to sip_cli_emulator.pl
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 7f25a1a131df2e928aef9b6058d79870fb0c214f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 31 15:44:16 2024 +0100

    Bug 34478: op =~ ^cud- in pl/pm - Manual cud-email => email
    
    Wrong replace of 'email' in a lot of places.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 8df0f9123748a4efb67b6eda7f836ffc1ba5be63
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 31 09:16:17 2024 -0500

    Bug 34478: Manual fix - action to op / add cud- - opac-search-history
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 00a084279735d69fa4afacd716fa243081044964
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 31 09:01:48 2024 -0500

    Bug 34478: Manual fix - change action to op and fix transport type - pos/pay
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 1858268384c43d9f8b685ffae6bfc8ad33cca4ee
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 31 08:10:53 2024 -0500

    Bug 34478: Manual fix - update ops and use forms - editCollections
    
    Bug 34478: TO SQUASH - Manual fix editCollections
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 7ba13418bccd00c162e6613d2a1cf9aad299a93b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 31 12:35:02 2024 +0100

    Bug 34478: Add 'op' to opac-sendbasketform
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 4b704d02bc644639a7d8f6d5b142abf6967353ea
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 31 12:18:21 2024 +0100

    Bug 34478: Add 'op' to opac-ratings
    
    This is only for non-JS, might need to be removed
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 36e55551448608f676969a4f856d8bd3dabe24ae
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 31 12:11:10 2024 +0100

    Bug 34478: Add 'op' to opac-tags
    
    There are way more to do in this controller!...
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 797586b9084ddcfeb8357ecd8acecb80ea821635
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 31 11:56:04 2024 +0100

    Bug 34478: Add 'op' to opac-request-article
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 8de3f8a8f62d475f1c2d65ad171473c9bd9d9f2d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 31 11:42:57 2024 +0100

    Bug 34478: Add 'op' to opac-messaging
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 20a94efb4de6a38e6f19b840f0f4de15d78901c9
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jan 31 10:30:34 2024 +0000

    Bug 34478: Remove no longer used Mana comment form
    
    The form was moved and cleaned up but it appears during rebases the
    original got re-introduced.  This just tidies it up as the form itself
    here is never used or displayed.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 1875d5e12ef432b6cfa26369bc363b5fad34efa3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 31 11:13:48 2024 +0100

    Bug 34478: Rename action with op - offline_circ
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit e8d02c58d2457c143e2bfd60ede0d95b44218f70
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 31 11:03:38 2024 +0100

    Bug 34478: Add missing op - members-update
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit c790129c7dd87b299f70c53a137199e3e45dab66
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 31 10:51:49 2024 +0100

    Bug 34478: Rename action with op - mod_debarment
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 48c2364f67e9e60fcf6eed2fce6a800a868c5616
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 31 10:23:45 2024 +0100

    Bug 34478: Rename action with op - opac-issue-note
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit dd5f3701ce670395e7bf7493a99cc36ea480278a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 31 08:44:24 2024 +0100

    Bug 34478: op modify=>edit_form, add=>add_form - memberentry.pl
    
    Bug 34478: TO SQUASH op modify=>edit_form, add=>add_form ( pass opadd to template )- memberentry.pl
    
    The template expects opadd when showing the form - along the way it was changed to 'add' and broke new patron
    entry
    
    Bug 34478: TO SQUASH op modify=>edit_form, add=>add_form ( pass op to template )- memberentry.pl
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 6870eb53291a9bceb57e37bfb901deaaa3e7904c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jan 30 14:32:50 2024 -0300

    Bug 34478: op=modify should be op=add_form - memberentry.pl
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit fc781b238e42271e6e956d553d883f814f0ee406
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jan 30 12:32:50 2024 -0300

    Bug 34478: actionType parameter not used - memberentry.pl
    
    Bug 34478: [TO SQUASH] actionType parameter not used - memberentry.pl
    
    syntax error at members/memberentry.pl line 103, near "\|"
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit e513541238afaac147c289f386a79ca6db85f839
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jan 30 16:05:57 2024 +0000

    Bug 34478: Manual fix - problem_reports
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 43b5c9da5deb2615890aa7b49abd952d10f64c9b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 30 16:33:42 2024 +0100

    Bug 34478: Replace POST with GET - request.tt
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit b78641fd2f8f2dd2dfdcab16d9e6f245c9a30dfd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 30 16:12:52 2024 +0100

    Bug 34478: Rename action with op - members/boraccount
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 4fd1bc729f84a43227eb15d4e5e59158c9519ba0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jan 30 11:55:16 2024 -0300

    Bug 34478: Manual fix - Course reserves
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 64fb3f9d0117376e79a0f94d740e1bf6e88c6763
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 30 13:37:52 2024 +0100

    Bug 34478: Manual fix - opac-shareshelf
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 43e01c43f0ea5d0f649ec4f7bc41fdfd13f3a912
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 30 12:26:42 2024 +0100

    Bug 34478: Manual fix - opac-shelves (WIP)
    
    Share still needs attention, moved to "later"
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit e4c7f15c3fd6f6741f9960bb9d6da2f987f879f4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 30 12:13:36 2024 +0100

    Bug 34478: Log if CSRF is wrong (debug)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 8bde9000fbc12666274a0eaee2119992fadc3cb4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 30 11:39:39 2024 +0100

    Bug 34478: Fix new forms
    
    New forms that need to be fixed after rebase.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 9ff45ceaf674d3fac4a9fe4efb66b8d810212318
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 30 11:28:07 2024 +0100

    Bug 34478: op =~ ^cud- in pl/pm - Manual branches.pl
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 63fcbb0692c0be308d59085bd510f181ea5b67ef
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 30 11:08:24 2024 +0100

    Bug 34478: Rename action with op - import_export_framework
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit e9e8d5ead8b4f90b773d44fe44377f045c54cf3c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jan 29 17:13:10 2024 -0300

    Bug 34478: Manual fix - Batch rm items (course reserves)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit c79a31b7a38107d5ea6eb7fee5ef7520e6613bc7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jan 29 17:05:47 2024 -0300

    Bug 34478: Manual fix - Batch add items (course reserves)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 477a554151c4f2995764a00c307f608e594cdc89
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jan 29 16:47:38 2024 -0300

    Bug 34478: Manual fix - Add items (course reserves)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit b85d77284ab09c1a9e3f623a5a4b2daf17501fbb
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 26 14:15:17 2024 -0500

    Bug 34478: Manual fix - change to post - guided_reports
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit ef40adfd8cb3724c2074c65c3a0c5de6e78597f7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 26 12:56:39 2024 -0500

    Bug 34478: Manual fix - change to post remove cud from confirm step - serials-collection
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 740b87bdda733c0e9506edb8acd0b8af18b77fbb
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 26 12:45:21 2024 -0500

    Bug 34478: Manual fix - remove cud from search op - authorities-home
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 30fcf2f0893753f9feb3b7e7e5f18d4b3340a545
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 26 11:58:07 2024 -0500

    Bug 34478: Manual fix - Switch to post, update op - neworderempty_duplicate
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 43a4a705bfe2b1a4bf6ca45f1d41f2571bfddf16
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 26 11:27:52 2024 -0500

    Bug 34478: Manual fix - Switch to post, update op, add missing include - basket
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 0e1239e93bb162c1b83f9f11accb21494abc57e2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 26 11:01:18 2024 -0500

    Bug 34478: Manual fix - fix ops and method - deletemem
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 9f99265f348c9e2699e7b8c9665a51860b18ae21
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 26 10:52:54 2024 -0500

    Bug 34478: Manual fix - Rename action with op change to post - merge-patrons
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit c4ad20ce1045aed15adf881c0b8e90784c5b774a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 26 11:35:20 2024 +0100

    Bug 34478: Rename action with op - circ/request-article
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit aa3dfa3922e93eb1a6f6d2c8948955037f08069f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 26 11:33:02 2024 +0100

    Bug 34478: Rename action with op - circ/checkout-notes
    
    svc/checkout_notes will need to be adjusted as well
    
    Bug 34478: [TO SQUASH] Rename action with op - circ/checkout-notes
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit e2c3348ec89696e888251234a4c853a04d66a800
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 26 11:11:58 2024 +0100

    Bug 34478: Rename action with op - catalogue/search-history
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 590e235fce0b626d8e34c5f8a398dd87a4254bb4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 26 11:02:56 2024 +0100

    Bug 34478: Rename action with op - admin/library_groups
    
    This is a bit dirty but it works.
    form is not styling correctly when put within the li
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 987938a558b6e87689b1756fe3d2bd6920e58139
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 26 10:28:06 2024 +0100

    Bug 34478: Rename action with op - admin/item_circulation_alerts
    
    Also fix possible XSS.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 7379014e2b3e58e134e538b34c93eedf7a9c6b97
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 26 10:06:20 2024 +0100

    Bug 34478: Rename action with op - admin/columns_settings
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit b091b70724f26a5d84a43772b52b81ceaf24d280
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 26 10:00:41 2024 +0100

    Bug 34478: Rename action with op - acqui/cancelorder
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 1af854b0ee4ef8b1a79989c0bc8e721fa1a79196
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jan 24 11:44:02 2024 +0000

    Bug 34478: Remove no longer reference form
    
    Cleanup whilst we're here.. the form here isn't actually included
    anywhere and the acompanying controller no longer exists.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit cd02e45119ad007cf24de5cd176a1bf3bc6a761d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jan 24 11:09:22 2024 +0000

    Bug 34478: Update label ops 'edit' to 'edit_form'
    
    This serves to clarify that the 'edit' is not an update action in this
    case, but instead is a form fetch.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit adbe19c06b037f12727a2b820d83ae07a8f132a0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 24 12:12:22 2024 +0100

    Bug 34478: op =~ ^cud- in pl/pm - Manual parcels.pl
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 33a9427df5942082aa392dd58c03e6d6e4f31f7d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 24 11:27:01 2024 +0100

    Bug 34478: Manual fix - preferences
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit b13c971ee710c8e5dd53ed4fce58d3756e89c821
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 24 11:32:34 2024 +0100

    Bug 34478: op =~ ^cud- in pl/pm - Manual preferences.pl
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 366d8cafcbe699db589e2e483cfd3b76a2947631
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 23 16:59:44 2024 +0100

    Bug 34478: Add method="get" to forms without method
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 9742566b54dadc658600cc28de1298093bd24633
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 23 16:57:05 2024 +0100

    Bug 34478: Remove duplicated form in virtualshelves/downloadshelf.tt
    
    Just... don't ask... It's there since 2010
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 2fed3f5b79df7a478dcb858a300637af28289713
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jan 22 11:56:37 2024 +0000

    Bug 34478: Manual fix - label-edit-profile (cud-save)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 8cff9b57dd181bbd572f7be9a7c5476e1ec0104c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jan 22 11:52:58 2024 +0000

    Bug 34478: Manual fix - label-edit-template (cud-save)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit b3c46d527b72f57627b95aee3310cc4899079dec
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jan 22 11:13:41 2024 +0000

    Bug 34478: Manual fix - label-edit-layout (cud-save)
    
    Also updated 'cud-edit' in the controller back to 'edit' as it's a 'get'
    request to display the form.. i.e. read not create, write or update.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit e6a59baa82f8bc2724e3565bf5a7cabccabaa0e9
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 19 17:05:26 2024 +0000

    Bug 34478: Manual fix - subscription-nuberpatterns (cud-del)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit f31b3367dac3b9cc7b0a9d514629eae74cc760d8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 19 17:03:47 2024 +0000

    Bug 34478: Manual fix  - subscription-frequencies (cud-del)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit d4a1c1e51f584f1f4dfa9d74993523ed62cd94e0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 19 17:00:44 2024 +0000

    Bug 34478: Manual fix - parcels.pl (cud-confirm cud-new)
    
    Bug 34478: [TO SQUASH] Manual fix - parcels.pl (cud-confirm cud-new)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit acee057c4c1b04d336971d9a3267156528960c73
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 19 16:50:47 2024 +0000

    Bug 34478: Manual fix - edi_ean (cud-ediorder)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit ed70fdc2a87eb12083b26b77717f3ef164b782b6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 19 16:39:37 2024 +0000

    Bug 34478: Manual fix - basketgroups
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit fec3a9c231e2c0ac8c33ed1d75564d7cc07d9d4f
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jan 19 16:22:53 2024 +0000

    Bug 34478: Manual fix - account refund - Add op param to forms
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit beec6ef5dfb32653c7bc7dff648eef335b246870
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jan 19 10:25:35 2024 -0500

    Bug 34478: Manual fix - delete baskets - Add csrf include
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit a89d4576b1020af0809384c1a17cb6bffbd4b2b3
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jan 19 09:19:58 2024 -0500

    Bug 34478: Manual fix - delete baskets
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit f99d7a76e37440168a539b29dbb3bfeeb089891a
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jan 19 09:16:46 2024 -0500

    Bug 34478: Manual fix - account line discount
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 399885aaca92ab9d04b75188916a060878a39e56
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jan 19 09:15:19 2024 -0500

    Bug 34478: Manual fix - account refund
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 1a98ef7584c70bc92b3fc6750830f349530b2015
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jan 19 09:11:40 2024 -0500

    Bug 34478: Manual fix - account payout
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 918fbc24f7a1b628d371d7f6c9ae89f2f42ac01e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Dec 13 09:27:45 2023 +0100

    Bug 34478: Display programming errors in case plack.psgi caught something suspicious
    
    It will help developpers to debug the problematic places.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 1f081b86b6e4706a260b521b20dbcd2564634da9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Dec 13 08:31:04 2023 +0100

    Bug 34478: Manual fix - duplicate_orders (cud-select)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 576f0c29b2abd0b444c4b0ad24739d0edb8bf2f2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Dec 13 08:23:54 2023 +0100

    Bug 34478: Manual fix - preferences
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit b92e9a21153ba0b569a0308b47e8a3133a663587
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Dec 12 17:03:58 2023 +0100

    Bug 34478: Manual fix - memberentry (modify)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 1ea77fbd19f06931987fbeec5ee88be00137d9d6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Dec 12 16:43:21 2023 +0100

    Bug 34478: Manual fix - batchMod
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 18e808240febf817544f21eb84020a270761c9a5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Dec 12 16:43:08 2023 +0100

    Bug 34478: op =~ ^cud- in pl/pm
    
    This is the result of
      bash op_must_start_with_cud-perl.sh
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 11d371a62009afb85c007e717fb5114dfbe6cc82
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Dec 12 16:26:51 2023 +0100

    Bug 34478: Manual fix - additem
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 93e717ac316c3ee03769b6c557e482f04ac9945b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Dec 12 14:54:34 2023 +0100

    Bug 34478: Manual fix - opac-suggestions
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit d320e6fe27531a9f98a537980d715ae73ccba12c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Dec 12 14:39:15 2023 +0100

    Bug 34478: Replace POST with GET when needed - add_form
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 8a39b582f1d2ef5cb3cb7c1a0fe615ff931716c5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Dec 12 14:32:59 2023 +0100

    Bug 34478: Adjust selenium tests
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 21f5c30920f8e3510983c3c9fc8fee13ac802d0f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Dec 12 14:12:20 2023 +0100

    Bug 34478: Add missing csrf-token.inc for opac
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 69fd7c026d6a5ed1e3db2c18c591b367f62bc089
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Dec 12 11:21:07 2023 +0100

    Bug 34478: op =~ ^cud- everywhere
    
    This is the result of
      perl op_must_start_with_cud.pl
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 4e1372b77ce836bc108a2dfdfa8d3673eb732b30
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Sep 22 10:55:29 2023 +0200

    Bug 34478: op =~ ^cud-
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit bf9830d354c5230ad7b552583375c0ba53a32ac2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Sep 21 12:00:17 2023 +0200

    Bug 34478: op-cud - Trick CGI directly
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit c8384299f742b26cd2dc4e0fe4456b2e73ae590b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Sep 21 10:50:07 2023 +0200

    Bug 34478: op-cud - Rename op with op-cud in templates
    
    This is the result of
      perl rename_op_with_op-cud.pl
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 77e3b58eee730eda4c023a9c867c5c810cd65646
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Sep 21 10:23:41 2023 +0200

    Bug 34478: op-cud - Adjust C4::Auth code
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 348dbb1594be77582bb389c9080baa2ebd38fc21
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Sep 21 09:59:09 2023 +0200

    Bug 34478: Move C4::Auth check
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 314fe71ff8c0714acaed84ad3453eb9622445861
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 4 11:37:52 2023 +0200

    Bug 34478: Remove check_csrf from pl files
    
    We should no longer need to check CSRF token from pl files
    
    TODO - there is a change for some files where we returned 403
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit a0dcce9ce19fef84e86a28f9ceae37a4584d0587
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 4 11:32:27 2023 +0200

    Bug 34478: Check CSRF in get_template_and_user
    
    Not sure this is the right place in get_template_and_user
    Will have to test login and 2FA
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 4ed5bf19a7f3404b8aada8d61092862d9ed3d3a2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 4 11:13:14 2023 +0200

    Bug 34478: Add 'op' to opac-passwd
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit bb69578db04f4d7fe545e450bef823a21911e3ea
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 4 11:06:16 2023 +0200

    Bug 34478: Add 'op' to opac-user.tt
    
    Bug 34478: [TO SQUASH] Add 'op' to opac-user.tt
    
    Bug 34478: [TO SQUASH] Add 'op' to opac-user.tt
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit a3c0c9250821553ed4ea361ebf2b52fb0397b282
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 12 15:00:48 2024 +0100

    Bug 34478: Add missing CSRF token to POST forms
    
    This is the result of
      % perl csrf_add_missing_csrf.pl
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 7e7159bf58f2dd1172737d0abe4bcfa15237c88e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 4 11:15:54 2023 +0200

    Bug 34478: Remove generate_csrf from pl
    
    We do not longer need to generate_csrf from pl files
    
    TODO - members/boraccount.tt and sco/sco-main.tt needs to be adjusted
    
    Bug 34478: [TO SQUASH] Remove generate_csrf from pl
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 8596861127b9a7e98436971b4f347323b373a7eb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 4 10:57:42 2023 +0200

    Bug 34478: Replace csrf_token input with include file - manual
    
    A couple of left not caught by the previous regex
    
    Still TODO:
    % git grep csrf_token **/*.inc **/*.tt
    still shows example that needs to be replaced, later (because we use GET)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 4481fb33777660e89b77bbc614ef6757b41e6337
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 4 10:56:50 2023 +0200

    Bug 34478: Replace csrf_token input with include file
    
    perl -p -i -n -e 's#<input type="hidden" name="csrf_token" value="\[% csrf_token \| html %]" />#[% INCLUDE '\''csrf-token.inc'\'' %]#g' **/*.tt **/*.inc
    
    This should have actually been done at the same time as
      "Bug 30524: (QA follow-up) Only generate CSRF token if it will be used"
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 8e3901342a8e2de8290cc5d86e49f809e67e764d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Aug 4 10:32:17 2023 +0200

    Bug 34478: Replace get with post when needed
    
    This is what has been marked as done in "csrf_get.txt"
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 0631153f06278d6acda3042a9243b5fb7bb9c5a4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 27 08:56:24 2024 +0100

    Bug 35955: Add tests
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 108c955eac02707ccaa35081fbece1054a5dcda3
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue Feb 27 06:05:24 2024 +0000

    Bug 35955: Cache CSRF token in template plugin
    
    This change uses the Koha::Cache::Memory::Lite cache to
    cache the CSRF token, so that it is only generated once,
    and is re-used by the Koha::Template::Plugin::Koha object
    throughout the entire template processing for the HTTP request.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit e2440f2c617c48d77cc416857937b6fb18c34208
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 21 09:42:16 2024 +0100

    Bug 36098: Default to 'file' if pref does not exist
    
    During the installer process there is a bunch of warnings
      "Use of uninitialized value $storage_method in string eq at"
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit c42ede262a24503c1f350a8d2639a391b86278bf
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Feb 15 23:07:02 2024 +0000

    Bug 36098: (follow-up) extend test to check driver
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 5572567143c10b424765149bd97c2aa99d577132
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Feb 15 22:49:19 2024 +0000

    Bug 36098: Fix storage_method pass
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 56d8ac247698f8755a8215245dffd000877d76e7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 15 14:05:21 2024 +0100

    Bug 36098: Allow to pass storage_method
    
    Will need this on follow-up bugs.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 09de3f820b5333e3f23f149f6b8c101d24ba15ed
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Feb 15 11:53:02 2024 +0000

    Bug 36098: (QA follow-up) Add POD to Koha::Session
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 0e6537d199fe49a9e91e1c75f9462ddf1c878fed
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Feb 15 02:49:18 2024 +0000

    Bug 36098: Add Koha::Session module to ease session handling
    
    This patch adds a Koha::Session module that makes it easier
    to work with Koha sessions without needing the full C4::Auth module.
    
    Test plan:
    0. Apply the patch
    1. Run the following unit tests:
    prove ./t/db_dependent/Auth.t
    prove ./t/db_dependent/Auth_with_cas.t
    prove ./t/db_dependent/Koha/Session.t
    2. Observe that they all pass
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 7c54394383234f33dcf5b6acb8ceabb72d0deca4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 30 09:02:19 2024 +0100

    Bug 35935: Ensure login branch will be used after incorrect login
    
    If a different branch is selected after an incorrect login, the previous
    branch will be used.
    
    To recreate:
    * login with foo/bar, select CPL => FAIL
    * login with koha/koha, select another branch => OK but CPL is picked!
    
    It was caused by a dup of "branch" in CGI param list (and first was
    picked).
    
    This patch patch also removes "koha_login_context" to not have it twice.
    You can also open the source of the page to confirm that form#loginform
    contains "branch" and "koha_login_context" in hidden inputs.
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Tested in KTD. Works as advertised.
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 7d95c6404817d8dbc9502d45f99460cce77bcc6a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 14 09:45:45 2024 +0100

    Bug 36092: Pass sessionID at the end of get_template_and_user
    
    It seems safer to pass the logged in user and session info at the end of
    the sub.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 3a053ebdf94795120eb5322c6c45121489b2f583
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 14 10:33:11 2024 +0100

    Bug 36092: Pass the sessionID from checkauth if we hit auth
    
    If we hit the auth page we were not passing sessionID to the template
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 1bc2f8cf1bf6a3d773d0e3eef906a2b66552ef5e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 14 10:56:17 2024 +0100

    Bug 36092: Add test
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit c0d5013f2ed1ba6c76827070406ded1c035703fc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 26 08:58:17 2024 +0100

    Bug 35918: Fix auto library connect (AutoLocation)
    
    This code is a bit weird, its purpose it to auto select the library depending on the IP.
    A problem appears if the same IP is used, then the user's choice will
    might be overwritten randomly by another library.
    
    To recreate the problem:
    Turn on AutoLocation
    Use koha/koha @CPL for test
    And the following config:
    *************************** 1. row ***************************
    branchcode: CPL
    branchname: Centerville
      branchip: 172.18.0.1
    *************************** 2. row ***************************
    branchcode: FFL
    branchname: Fairfield
      branchip: 172.18.0.1
    *************************** 3. row ***************************
    branchcode: FPL
    branchname: Fairview
      branchip: 172.18.0.4
    
    Connect and select CPL. Randomly FFL will be picked instead.
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Tested this on top of 35890 and 35904 because git bz said they were required dependencies.
    Figured out the IP Koha was seeing me as coming from in /var/log/koha/kohadev/plack.log.
    Added that IP to the branchip for Centerville, Fairfield and Fairview. Set AutoLocation = Yes.
    After this I could recreate the problem: If i left the "Library" field in the login screen
    at "My Library" I got logged into a random library selected from the three i had set
    branchip for. Applying the patches fixed this, as expected.
    Tests pass, with AutoLocation off.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 837d04527abe36ab714ce033409191d220ae2919
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 26 08:57:03 2024 +0100

    Bug 35918: Add test
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 200799c11e03c2b4935baa10d80ab787094d11d7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jan 25 09:36:01 2024 +0100

    Bug 35890: Add tests for AutoLocation
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit e59623bfc25f88d5fe2e27b589a75500a98a7423
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 24 16:25:30 2024 +0100

    Bug 35890: Reject login if IP is not valid
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 8fb9b814aab873f255d160f2d724ddd4b189248d
Author: Victor Grousset <victor@tuxayo.net>
Date:   Thu Feb 15 04:18:37 2024 +0100

    Bug 35904: (QA follow-up): tidy up code
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit a82772d7ec7dd7a5e9688f191c946f8c8bee41cc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jan 25 10:35:41 2024 +0100

    Bug 35904: Make C4::Auth::checkauth testable easily
    
    This patch suggests to add a new flag do_not_print to
    C4::Auth::checkauth to not print the headers and allow to test this
    subroutine more easily.
    
    We do no longer need to mock safe_exit and redirect STDOUT to test its
    return values.
    
    There are still 3 left:
    1.
    733         # checkauth will redirect and safe_exit if not authenticated and not authorized
    => Better to keep this one, not trivial to replace
    
    2.
    806         # This will fail on permissions
    This should be replaced but testing $template->{VARS}->{nopermission}
    fails, I dont' think the comment is better.
    
    3.
    828         # Patron does not have the borrowers permission
    Same as 2.
    
    2. and 3. should be investigated a bit more.
    
    This patch also move duplicated code to set patron's password to a
    subroutine set_weak_password.
    
    Test plan:
    Read the code and confirm that everything makes sense.
    QA: Do you have a better way for this? Yes it's dirty!
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 16a648e9ca8d37f078fa2abd3ebc594964f22ec4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 24 16:24:51 2024 +0100

    Bug 35904: Remove var loggedin
    
    It is never used and add confusion
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 05dad853b7279b64c9a7e7bca80578a12fbf042c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 7 15:54:28 2024 +0100

    Bug 36019: Remove dead code in tags/review
    
    Since bug 20489 it is no longer possible to login with the DB user.
    At the time, get_template_and_user returned borrowernumber=0 in this case.
    
    In tags/review.pl we have:
      $borrowernumber == 0 and push @errors, {op_zero=>1};
    
    This condition is never met, and op_zero related code can be removed in the template.
    
    Test plan:
    Confirm the above
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 097a27e932ef76cbd5355f235a11edf6ac7f3a9a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 7 15:42:40 2024 +0100

    Bug 36017: Remove dead code in admin/clone-rules
    
    Since
      commit 61628c97c245e72c750b61d9df6fa9b9100f3093
      Bug 18936: (follow-up) Add cloning of circulation rules back to Koha
    
    There are some dead code in admin/clone-rules.
    
    "result" is always passed to the template.
    
    Test plan:
    Confirm the above and that cloning rules from the circ rules page still
    works correctly.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 4b6508e7ea24dd188090ebc1e6e3dba820ece645
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 30 16:40:17 2024 +0100

    Bug 35949: Remove useless code pointing to branchreserves.pl in request.tt
    
    messagetransfert is never set (it is from circ/waitingreserves.pl, `git grep messagetransfert`) and branchreserves.pl does not exist!
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit fc19c774fdbee83a10cefc26d4487af5d41a8d86
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jun 23 09:56:40 2023 +0000

    Bug 34426: (QA follow-up) Polishing xt script
    
    Test plan:
    Run it again. Same results?
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 31edf8d1b9300a8df3309e5ba0087213e1addda3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jun 16 11:04:42 2021 +0100

    Bug 34426: Add xt/find-missing-csrf.t
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit fee4368cd81e4318bed14f0a082c978badca4256
Author: Andreas Jonsson <andreas.jonsson@kreablo.se>
Date:   Mon Feb 12 11:16:02 2024 +0000

    Bug 35930: Add guards for plugins_enabled
    
    The 'new' method in Koha::Plugins returns undefined if
    plugins are disabled.  Therefore, calls to this method
    must be guarded by a check that plugins actually are enabled.
    
    Test plan:
    
    * Code inspection of patch, alternatively
    * Activate the ill system by installing a backend such as
      koha-illbackend-libris:
      https://github.com/Libriotech/koha-illbackend-libris
    * Make sure plugins are disabled in koha-conf.xml
    * In the staff interface, go to ILL requests.
    * The page should load without getting an error 500.
    
    PA amended commit message: This is not related to ILL backends being plugins or not
    This is about ILL batches, where checking for metadata enrichment plugins was missing 'enable_plugins' guard
    Additionally, unrelated to batches, it's also about ILLAvailability, where checking for ILL availabililty plugins was missing enable_plugins guard
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Hans Pålsson <hans.palsson@hkr.se>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit b577b6567045184adcb5bb55b7e5c70428e124ee
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Feb 8 15:55:43 2024 +0000

    Bug 35518: Tidy the moved blocks
    
    This patch just tidies the moved blocks to get us past the QA script
    check.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 90b6f68616e2ba5ca3fcbbd9698c97ef41a45593
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 26 14:10:01 2024 +0000

    Bug 35518: Check authentication and set userenv before fetching userenv variables
    
    Currently we get the userenv before we have set it correctly for the session
    
    To test:
     1 - Sign in as a user with fast cataloging permission
     2 - Bring up a patron, type gibberish into barcode field to get a fast cataloging link
     3 - Check the link, it should have your current signed in barcode
     4 - Sign in to a different browser with a different user and at a different branch
     5 - Bring up a aptron in circulation and type gibberish into barcode field to get a fast cataloging link
     6 - It may have your branch, but it may also have the other user's branch from the other window
     7 - Keep entering gibberish to get a link until one user has the correct branch
     8 - Then switch to the other browser, and keep entering gibberish, watch the branchcode change
     9 - Apply patch, restart all
    10 - Test switching between browsers. generating fast cataloging links
    11 - Users should now consistently have the correct branch
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit a77adbe76e13f79c5b965f9677b0960fb44aabfc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 14 08:49:33 2024 +0100

    Bug 36034: Add test
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 5f9e9e5df2377dd3b9e47354e9eee147bc048792
Author: Andreas Jonsson <andreas.jonsson@kreablo.se>
Date:   Thu Feb 8 11:57:03 2024 +0100

    Bug 36034: (bug 34893 follow-up) fix capture of return values from checkpw
    
    Adapt code to the change of return value type of checkpw
    introduced in bug 34893
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>

commit 989daca8f097f729042cd0adc52cbcd6ba5783c4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jan 11 11:14:27 2024 +0000

    Bug 29002: Remove whitespace only lines
    
    Jonathan highlighted some trailing whitespace.. I only see a few cases
    where a line only contains whitespace and I didn't see these caught by
    the QA script at the time of submission.
    
    Anyway, this removes the spaces

commit d130a6c66b6cc6fb3221c0ea7e26f2d0825f4f72
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 6 08:32:31 2024 +0100

    Bug 35962: (bug 35843 follow-up 2) Fix BackgroundJob.t on D10
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 12b6c0e67d39590da23a614fbe6d4aa4f18923aa
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Dec 15 10:54:11 2023 -0300

    Bug 34893: Unit tests for C4::Auth::checkpw
    
    This patch introduces some tests on the current (and new) behavior for
    the `checkpw` function.
    
    I needed it to better understand if an edge case was actually possible
    (it wasn't).
    
    Found a really minor annoyance for the internal check with expired
    password not returning the $patron object for consistency with the other
    use cases.
    
    I think this method deserves (at least) changing the return value to a
    sane data structure. But that's not target for backporting to stable
    releases. So a separate bug.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2b54d3c82b5e6762f75f35b7fb21bcd96f5bc116
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Dec 1 06:29:19 2023 -0500

    Bug 34893: (QA follow-up) Tidy code for qa script
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 11e919cc1974d278fb28a2fb6b7a38ca3fe178e2
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue Nov 28 22:57:39 2023 +0000

    Bug 34893: Add checkpw change to REST API
    
    This patch adds the checkpw return value change to the REST API
    route for validating user identifiers and password.
    
    Test plan:
    0. Apply patch
    1. prove t/db_dependent/api/v1/password_validation.t
    
    Bonus points:
    1. koha-plack --reload kohadev
    2. Enable syspref RESTBasicAuth
    3. curl -XPOST -H "Content-Type: application/json" \
    -u <staff_userid>:<staff_password> \
    -d '{"identifier":"<cardnumber>","password":"<password>"}' \
    http://localhost:8081/api/v1/auth/password/validation
    4. Validation doesn't fail. It gives you cardnumber, patron_id, userid
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c1b94fc0110db53718053a0ff23d52000f304d47
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Sep 22 14:20:59 2023 -0400

    Bug 34893: ILS-DI can return the wrong patron for AuthenticatePatron
    
    Imagine we have a set of users. Some of those users have a NULL userid. We then call AuthenticatePatron from ILS-DI for a patron with a NULL userid, but a valid cardnumber. We call checkpw, which returns the cardnumber and userid. We then call Koha::Patrons->find on the userid *which is null*, meaning the borrowernumber returned is not the correct one, but instead the earliest patron inserted into the database that has a NULL userid.
    
    Test Plan:
    1) Give three patrons a userid and a password
    2) From the database cli, set all patrons's userid to null
       Run this query: update borrowers set userid = null;
    3) Call AuthenticatePatron with username being the 1st patron cardnumber,
       and password being the password you set for that patron
       http://localhost:8080/cgi-bin/koha/ilsdi.pl?service=AuthenticatePatron&username=kohacard&password=koha
    4) Note you get back a borrowernumber for a different patron. Refresh the page and the number is correct.
    5) Do the same with the 2nd patron. Same issue at 1st and correct number after.
    6) Apply this patch
    7) Restart all the things!
    8) Do the same with the 3rd patron.
    9) Note you get the correct borrowernumber! :D
    10) prove t/Auth.t t/db_dependent/Auth_with_ldap.t t/Auth_with_shibboleth.t t/db_dependent/Auth_with_cas.t
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 795387f5198d2171e694f41d10a6ac7fa3b67139
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Nov 29 17:18:32 2023 +0000

    Bug 34893: Add unit tests
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3584cd7edbdefc4d3e2aeab02da54e7aed0be965
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Feb 2 10:29:06 2024 +0000

    Bug 32474: (follow-up): Tell the tests to wait for the intercepted request responses
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d7669ae2a96d570a6f4de2b60bd207799c69142b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 31 16:44:47 2024 +0100

    Bug 35962: (bug 35843 follow-up) Fix BackgroundJob.t on D10
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 269d6f644480d89e7752e58d299b678dcef93617
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Jan 31 16:36:27 2024 +0000

    Bug 35940: Close modal before typing
    
    Tests currently fail due to a modal remaining open. This patch closes the modal to make the tests pass
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f1b32b5316f6b204d6451a1902a0e510fa498f90
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 30 14:30:31 2024 +0100

    Bug 35940: (bug 35477 follow-up) Fix cypress tests
    
    AssertionError: Timed out retrying after 10000ms: Expected to find element: `main div[class='dialog message']`, but never found it.
    
    We moved from message to alert.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1c7a5bcf11ba6f7f5333cffae73d0e627ac5114c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 23 16:04:32 2024 +0100

    Bug 35506: Move the checkouts table load delay logic out of document ready
    
    == Test plan ==
    0. Have Selenium running
       ktd --selenium up
    1. prove t/db_dependent/selenium/regressions.t
    2. It should still work
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit daeccd84c6858c919f8439ae52ddf254b7cfc176
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 9 18:06:03 2023 +0000

    Bug 34862: (follow-up) Fix some misplaced messages and add missing
    
    This patch fixes some templates where the messages include was appearing
    in the wrong place, for instance above the left-hand sidebar instead of
    at the top of the main content.
    
    The patch also adds the new include to some templates which lacked it.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e37ec44cb50973657c71a1b153a1902096ecc61c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Sep 21 15:12:45 2023 +0200

    Bug 34862: Manual changes
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7f06a4bd0045b8c07069bf73870cae70b24a0d02
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Sep 21 15:08:54 2023 +0200

    Bug 34862: Add messages.inc
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a19d36cf1404c1a6ad43fceb2bc4e785e5768a79
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Sep 21 15:10:48 2023 +0200

    Bug 34862: Include messages.inc
    
    Generated using `perl add_blocking_errors.pl`
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 29cf57064b29a4c4aaf221ccf9159b017909a3c7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Sep 21 14:13:22 2023 +0200

    Bug 34862: Remove blocking_errors where there is no main
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e8c3142d81879eb453468279baa69fa6245c286e
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Wed Jan 31 12:55:01 2024 +0000

    Bug 18397: (follow-up) Some tiny style and spelling changes
    
    * cc is an abbreviation, so updated to CC
    * Adding consistency with punctuation for error messages
    * Updated a borrower to patron
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 137376ab4b624ae01d20e2106196c46a39dd8581
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Nov 8 16:41:02 2023 +0000

    Bug 18397: Add message delivery details to the notices tab
    
    This patch adds further delivery details to the notices tab in patron
    details in the staff client.
    
    Once a message is sent, we display the 'from:', 'to:' and 'cc:'
    addresses in the 'Delivery note' column when they exist.
    
    Test plan
    1. Enable KTD to send email [1] (without email configured the
       delivery note displayed "Unhandled email failure, check the logs for
       further details").
    
    2. Add email addresses to two patrons and to KohaAdminEmailAddress,
       and run misc/cronjobs/process_message_queue.pl after generating
       notices.
    
    3. For the two patrons with email addresses, make one a guarantor.
    
    4. Sent Welcome messages (Patron account > More > Send welcome email) -
       nothing in delivery note column.
    
    5. Checkout out an item to the guarantee (item checkout email enabled) -
       nothing in delivery note column.
    
    6. Send the notices by running misc/cronjobs/process_message_queue.pl
       again.
    
    7. Now the 'Delivery note' columns should contain from:, to: and cc:
       address details.
    
    [1] Option 1 - smpt-sink (aka the sandboxes way)
        - Install the postfix package inside ktd (sudo apt install postfix)
          When asked in the wizard, I named mine 'local'
        - Start smpt-sink with
          `nohup smtp-sink -u root -D mail 127.0.0.1:25 100 </dev/null >/dev/null 2>&1 &`
    
        Option 2 - To test sending emails using a Google account:
        - Set up an App password for your Google Account
        - Edit /etc/koha/sites/kohadev/koha-conf.xml file and add this
          configuration near the end (where <user_name> = your Google email
          address; <password> = your APP password, not your Google account
          password):
    
          <smtp_server>
            <host>smtp.gmail.com</host>
            <port>587</port>
            <timeout>5</timeout>
            <ssl_mode>STARTTLS</ssl_mode>
            <user_name>GOOGLEACCOUNTUSER</user_name>
            <password>GOOGLEAPPPASSWORD</password>
            <debug>1</debug>
          </smtp_server>
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d7a633048e6681e356be24c8192803181abd2383
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Dec 18 12:51:16 2023 +0000

    Bug 35479: (QA follow-up): Tidy
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ea30aaff625b1171ac30cb80c67f8eea69c08de3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Dec 5 13:40:48 2023 +0000

    Bug 35479: (follow-up) Match formatting for other cronjob logs
    
    To test:
    1 - Install the Kitchen Sink plugin
    2 - Restart all
    3 - Enable 'CronjobLog' system preference
    4 - perl misc/cronjobs/plugins_nightly.pl
    5 - Note you see on the command line 'Remember to clean the kitchen' - this indicates the plugin cron ran
    6 - Tools->log viewer, select 'cronjob' and view
    7 - Note you only see 'plugins_nightly.pl' Run and End lines
    8 - Apply patches
    9 - perl misc/cronjobs/plugins_nightly.pl
    10 - View logs agian
    11 - Note you now see Run and End lines for 'Koha::Plugin::Com::ByWaterSolutions::KitchenSink'
    12 - Confirm they look like the other lines
    13 - Edit KitchenSink.pm and add 'die "Kittens";' to the cronjob nightly
    14 - perl misc/cronjobs/plugins_nightly.pl
    15 - View logs, confirm there is a FAILED error message for the KitchenSink cron
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c4b777b0560dd9936ae08e2fd530fd00f52df569
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Dec 4 12:41:32 2023 -0500

    Bug 35479: Log start, end, and any failures for each plugin's nightly cronjob
    
    When running the plugins_nightly.pl cronjob, we should record the plugins that have a nightly method, logging the start and end of each plugins routine
    
    Test Plan:
    1) Enable CronjobLog
    2) Install a plugin with a nightly cronjob ( e.g.
       https://github.com/bywatersolutions/koha-plugin-book-list-printer )
    3) Run plugins_nightly.pl
    4) Note new entries in the cronjob viewer for the start and end of the
       plugin's nightly cronjob run
    5) Edit the plugin, add a line like "die 'this is a test';" to the
       plugin's nightly cronjob
    6) Run plugins_nightly.pl
    7) View the action logs, not the log for the error you added!
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3385142d7c06c3723ecc83399a6d8bbbb5a8f4d2
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Dec 5 15:51:35 2023 +0000

    Bug 35490: Remove GetMarcItem from C4::Biblio module
    
    Test plan:
    Compile module, run qa tools.
    Search for the use of C4::Items in C4/Biblio.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fb02affd57484f96a258772682263468bb92165d
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Jul 14 15:46:56 2023 +0000

    Bug 34282: Fix availability check in ILL batches
    
    Staging modal area had issues listing availability checks for each request in the batch creation process
    
    To test:
    1) Run bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev-plus.sh)
    2) Install a metadata enrichment plugin, e.g. https://github.com/PTFS-Europe/koha-plugin-api-pubmed/releases
    3) Install and configure an availability plugin, e.g. eds https://github.com/PTFS-Europe/koha-plugin-ill-avail-eds/releases
    4) Enable ILLCheckAvailability sys pref
    5) Create a new ILL batch and input some pubmedids, i.e. 34898594, 31452466
    6) Verify that the availability results show and are working, for each request in the batch
    
    Signed-off-by: Edith Speller <Edith.Speller@ukhsa.gov.uk>
    
    Sponsored-by: UKHSA (UK Health Security Agency)
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit acafc292b61d33901525cbfe6d314b9c0363f301
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jan 19 09:53:14 2024 +0000

    Bug 35389: (QA follow-up) Update circ-nav too
    
    As Katrin spotted, we need to not forget the sidebar menu.
    
    Test plan:
    Check if the item is visible/invisible on the sidebar menu of
    Circulation. (Depending on StockRotation pref.)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f7aeff5235dba4cdd86d7adad232881b75230089
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Nov 23 09:08:18 2023 +0000

    Bug 35389: Hide 'Transfer to send' if StockRotation disabled
    
    Test plan:
    Disable StockRotation pref. Check if report is hidden on circ home.
    Enable. Check if report is visible.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 133e2458bafe8c703262d52ed859713fe6603ba5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jan 30 14:01:26 2024 -0300

    Bug 35951: Remove useless include category-out-of-age-limit.inc
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2fe52a72a90ba3c97a5df0a7a9e8ba306ac76b74
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 30 10:34:54 2023 +0100

    Bug 32474: Store the selected option label
    
    It prevents the label to be removed when the selected option is not
    longer in the item list.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 58283765b71f827fa8fe1f33b3d95022d3905ff2
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Nov 30 10:51:14 2023 +0000

    Bug 32474: Add cypress tests
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 123e259a787e6c847231d0a348455fbbe472d989
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 3 10:22:46 2023 +0200

    Bug 32474: Pass label and identifier
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b81afadb16f005f63da07065cb038a821cd8ceb3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 3 16:30:46 2023 +0200

    Bug 32474: Adjust tests
    
    We need to use the same data, for instance we had "license name" and
    "first license name" for the license with license_id=1
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c5a879d5d91f3c73d6b478e1fdb3e22e2a7fa3c6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 3 09:59:24 2023 +0200

    Bug 32474: Adjust tests - X-Total-Count
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5a46403e10928f326819d46d840cbe30bbb5260d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 3 09:58:27 2023 +0200

    Bug 32474: Fix required
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c2830dd1dc0a7b65b513c6b88ebc50dd479cbe23
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Sep 29 15:08:02 2023 +0000

    Bug 32474: Fix scroll bump when new data loads
    
    This patch addresses an annoying scroll bump when new data loads. Previously the
    scrollbar would jump all the way to the top of the selct before resetting, this
    has now been stopped.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4a3601f8dc7e2b2e330026fa77b73146197fd88e
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Apr 27 14:39:04 2023 +0000

    Bug 32474: Fix duplicate API call
    
    This patch fixes a duplicate API call and fixes the "required" attribute
    
    Test plan as before
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 409efe6cdda30792bffa7d5a8fe52da7359093f9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 27 08:56:39 2023 +0200

    Bug 32474: Properly call getAll
    
    To encode q parameter correctly, based on bug 33623
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5b6761efdf419c5934cb6c9a4e85d4d7de3aeb82
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 27 08:54:25 2023 +0200

    Bug 32474: Do not fetch all the licenses
    
    Otherwise we are loosing all the point of the pagination!
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 28078a6e25673a911cd673c547cb06d3047422b0
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Apr 21 10:57:43 2023 +0000

    Bug 32474: Infinite scroll v-selects
    
    This patch is an example ajax based v-select. The v-select will load the first
    20 items and then continue to load paginated sections of 20 items as the user
    scrolls down. The v-select also offers ajax based searches (unpaginated) and
    will return to 20 item pagination if the search is cleared.
    
    Currently the pagination just works with an Intersection Observer based on
    scrolling - the main issue with this is that the size of the v-select window
    changes every time new data is added to the list and this causes the scrollbar
    to jump before resetting at the correct size. This can be a bit annoying,
    especially when scrolling quickly.
    
    The only way round this will either be to paginate using buttons i.e.
    (previous/next page) or to limit the data to 20 items at all times and
    re-paginate when scrolling back up - interested to hear thoughts/suggestions
    on this or whether anyone has a magic CSS fix that solves it ;)
    
    The new v-select is only in one location so far as a test - Agreement Licenses
    
    Test plan:
    1) You will need to add multiple licenses in order to see the pagination,
       attached is a script that will create 100 dummy licenses at a time if you
       wish to use that
    2) Once licenses are created, apply patch and run yarn build
    3) Navigate to Agreements and click the New Agreement button
    4) Scroll down to the Add new license option and click the button
    5) The License select is the InfiniteScrollSelect and should display the
       licenses you have added
    6) Open the dropdown and 20 items will be listed
    7) Scroll down and as you scroll, more items will be loaded (this can be seen
       in the Network tab in developer tools)
    8) Enter a search query and the results should reflect the search query
    9) Delete the search query and the dropdown should return to the first 20
       paginated items and pagination will work again when scrolling
    10) Try submitting the form with paginate/searched options and the form should
        still work as intended
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5fbdc2d7d36a2a02dca145e3def584707b61ad5a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 26 14:51:36 2024 -0300

    Bug 35483: (follow-up) Trivial indentation changes
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Anneli Österman <anneli.osterman@koha-suomi.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c20f4568ad15c5a073c074d9bd7ab0949d32aa65
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Mon Dec 4 22:51:45 2023 +0000

    Bug 35483: Restore holds table select to switch item level holds to record level holds
    
    To test:
    1. Apply patch
    2. Add item level hold to a record/item, make sure patron has no other
       holds on that record
    3. Go to /cgi-bin/koha/reserve/request.pl?biblionumber=xxx where xxx is
       the record you placed the hold for
    4. Under "Existing holds" table, in "Details" column you should see
       "Only item <barcode>" dropdown
    5. Select "Next available" from the dropdown
    6. Click Update hold(s)
    7. Observe dropdown is gone and cell value has changed from
       "Only item <barcode>" to "Next available"
    8. Cancel the hold and add two item level holds for the same patron
    9. Under "Existing holds" table, in "Details" column you should see
       "Only item <barcode>", but no select dropdown
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Anneli Österman <anneli.osterman@koha-suomi.fi>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b5ccd83c6f85b28affe82d980178e376a3dd0a1d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 30 10:04:45 2024 +0100

    Bug 35936: Fix saving existing report with incorrect AV category
    
    When an existing report is saved and an incorrect AV category is selected,
    the UI is asking "do you want to save anyway", but the "Update SQL" button
    leads to a blank page and the report is not saved.
    
    On bug 33966 the value is been adjust to 'update_sql' but this incorrect
    was left.
    
    To test you need to use the browser inspector to adjust the value of the
    selected option.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 731a549b7125c4ba3fa66441badb4cd301fa1d46
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jan 6 19:57:04 2024 +0000

    Bug 35300: Add page-section to invoice files page
    
    To test:
    * Enable AcqEnableFiles system preference
    * Go to acquisitions
    * Search for a vendor and receive shipment
    * Enter an invoice number and create new invoice
    * Finish receive
    * Click on 'manage invice files' link
    * Upload a sample file
    * Verify the table is missing the usual white background
    * Apply patch
    * Verify the the table now displays with the usual white
      background
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5b58afd466f5c20fda889bdbf0db2fc866ef04ae
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 29 13:51:15 2023 +0000

    Bug 35406: (follow-up) More HTML fixes
    
    This patch fixes even more markup errors and HTML validation issues.
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 26af3cae5dbb0e31cb701a22dd15c753d2600592
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Nov 27 12:08:42 2023 -0300

    Bug 35406: Fix typo in holds queue viewer template
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit dbc67ce351e00f71a55586c095895aafab067d72
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Jan 12 23:51:14 2024 +0000

    Bug 35368: Add public to "Add a new checkout" in API documentation
    
    Without this patch the "Add a new checkout" label showed
    up twice in the Checkouts section of the API documentation.
    This adds (public) to the end of one, to make it possible
    to distinguish them.
    
    To test (ON YOUR HOST MACHINE):
    1. Run:
       $ cd api/v1/swagger
       $ docker run --rm -v $(pwd):/api --workdir /api redocly/cli \
               build-docs swagger.yaml --output index.html
    2. Open the generated index.html in your browser
    3. Verify doubled up headings
    4. Apply patch
    5. Re-run docker command form 1.
    6. Verify there are now 2 different labels and "(public)" is on the
       right one.
    
    Note: if you have wrong permissions on the file, chown it to your
    own user to open it in the browser.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit baa7c050d1dbdd28c634f00d0360a5f4b1bdb35a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jan 29 10:04:50 2024 -0300

    Bug 35922: Fix www/batch.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b222ced1cb5d57aa3b5bca000492793fd57d2557
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Jan 29 11:18:10 2024 +0000

    Bug 30230: (follow-up) Fix permission check in staff interface navigation
    
    The patron module should now show up in the staff main navigation on
    top of the page if the user only has the new list_borrowers permission.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2b4cf14e74f5af5008f12af267fe07aa4ff240ec
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Jan 29 11:10:18 2024 +0000

    Bug 30230: (follow-up) Update missing descriptions
    
    One of the follow-ups fixed the description in the
    atomic update, but missed the SQL and include files.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1a6686cb9927a719b8d90cbde85f475ee9724bd6
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Jan 29 10:57:40 2024 +0000

    Bug 30230: DBRev 23.12.00.006
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cd9a3c3a07ea16c336a65c83dcbd2e52f2e56f6e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jan 22 14:23:59 2024 +0000

    Bug 30230: (QA follow-up) Also add list_borrowers to the singular endpoint
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6da8a7c46bce2808fffe9277e146f524f08628e8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jan 22 14:23:34 2024 +0000

    Bug 30230: (QA follow-up) Add unit tests for API definition change
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8c32b44df5b0500286115eae0d463141ceec1c7b
Author: Thibaud Guillot <thibaud.guillot@biblibre.com>
Date:   Tue Jan 16 17:01:58 2024 +0100

    Bug 30230: (follow-up) Add list permission on home-search include and update atomic update file
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7b6ef3fd4786ee8d97b7b1abdae18800cea06b2a
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue Dec 19 02:47:12 2023 +0000

    Bug 30230: (follow-up) fix unit test
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8e047a1f1944798afe86e8cabe9562c0b0657f6c
Author: Thibaud Guillot <thibaud.guillot@biblibre.com>
Date:   Fri Dec 8 09:46:16 2023 +0100

    Bug 30230: (follow-up) Fix display issue on search bar
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fc75a344b89198e7e12a534111132cb7f37baf18
Author: Thibaud Guillot <thibaud.guillot@biblibre.com>
Date:   Thu Nov 30 15:14:42 2023 +0100

    Bug 30230: Add new 'list_borrowers' permission
    
    When a patron search is performed only a user with edit_borrowers
    permission can search by name. Search can works only with cardnumber but
    it makes searching less intuitive I think.
    
    So, as mentioned in the discussion, I've added a new 'list_borrowers' permission,
    completely independent of 'edit_borrowers', so that I can search for a member via the interface
    and get the results. In addition to the permission to perform check in and checkouts, this no longer poses an obstacle to simple use.
    
    Test plan:
    
    1) Check with a user without 'edit_borrowers' permission that the patron search can only be performed with cardnumber
    2) Apply this patch
    3) Make the updatedatabase to add new 'list_borrowers' permissions
    4) Set 'list_borrowers' permission on one user and see the difference
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c1bf46d1e77c4b4bc8d6c6c1df0a5d5d9a953bfd
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Jan 17 15:45:53 2024 +0000

    Bug 35535: Allow for cancellation of holds with or without a reason
    
    TO TEST:
    1. Have a waiting hold on a particular barcode
    2. Have at least 1 HOLD_CANCELLATION auth value
    3. Check in the barcode and try to cancel the hold on the modal while
       selecting a reason.
    => SUCCESS: You can cancel a hold when selecting a reason.
    4. Repeat 1-3 but not selecting any reason.
    => SUCCESS: Hold cancelled correctly.
    5. Delete all HOLD_CANCELLATION auth values.
    6. Repeat Try 1-3
    => SUCCESS: No reason displayed
    => FAIL: Cancelling does nothing. There's an error in the browser
       inspector
    7. Apply this patch
    8. Repeat 1-3
    => SUCCESS: No reason displayed
    => SUCCESS: Cancelling works
    9. Sign off :-D
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Edit: amended the test plan to make it clearer
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 898da9e4eb08f74cff250c44ae6f1252d0fe02f6
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Jan 9 21:57:49 2024 +0000

    Bug 35753: Remove Checkbox() function
    
    To test:
    1. APPLY PATCH and clear browser cache.
    2. Have multiple additional content items ( news/HTML customization/Pages )
    3. From one of the pages ( news/HTML customization/Pages ) click the 'Delete selected' button. Since no items are checked you should see the 'Please select content to delete' alert.
    4. Check some items and click 'Delete selected' they should be correctly deleted.
    
    Note: There is no change in behavior from this patch.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 95e19e758a03b5554e63014a0264a63477b8bbb0
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Jan 12 18:05:22 2024 +0000

    Bug 35774: Use itemnumber instead of biblioitemnumber
    
    With Bug 33639 already pushed to master there should be NO change in behavior.
    
    To test:
    1. APPLY PATCH
    2. Create one or more item groups for a bib if needed
    3. Create a new item, and at the bottom of the 'Add item' screen, select the item group to which you want this item added. Save.
    4. The item should succesffuly be added to the item group.
    5. Add a new item and to the same record and this time try the 'Create a new item group' from the dropdown.
    6. Name the new item group.
    7. Make sure it is correctly added to the item group.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f7d95ab8fba68ee4e9b9c1362e1982eb5a4575ba
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jan 16 17:11:23 2024 +0000

    Bug 34853: Switch to 'div' as suggested
    
    This patch switches us from '<span class="clearfix">' to '<div>' so
    we're just using a block level elemenet instead of manipulating an
    inline element to act like a block.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 939ad01baf228a58deb2bf9300dfee8ee20dda6b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Sep 20 16:47:49 2023 +0100

    Bug 34853: Add clearfix span to Invoice links
    
    This patch adds a clearfix span around the invoicenumber and EDI message
    display texts which should result in them each having their own line.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 45096145619f7033fc8a81b0ae0448d4fd2faa1e
Author: lmstrand <lmstrand@gmail.com>
Date:   Fri Nov 24 14:08:21 2023 +0200

    Bug 35396: Replace Datatables' column filters throttling with input timeout
    
    This patch replaces throttling filter events with a typing timeout for datatable filtering events. This patch should increase filtering responsiveness to datatables that have column filtering enabled across Koha.
    
    To test:
    1) Get a datatable with multiple results showing in intranet, for example search patrons with no search string to get all patrons in a filterable datatable result view or open Receive orders page that shows pending orders and order lines in Acquisitions like /cgi-bin/koha/acqui/parcel.pl?invoiceid=xxx
    2) Type a character into a Datatable column filtering field
    => notice a filtering event fires right after the first character has been entered
    3) Keep typing
    => notice multiple sequential filtering events being fired during the typing and one at the end when typing has stopped
    4) Apply patch
    5) Start typing into a filtering field
    => Note that during typing no filtering events are being fired unless the time between entering characters exceeds 500ms
    6) End typing into the filter field
    => notice that just one filtering event fires at the end of typing if characters were entered sequentially faster than 500ms apart.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c67067744ce45de2caec5e3df43f5ff021b9770d
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon Dec 4 05:24:01 2023 +0000

    Bug 35445: Require OPAC user to confirm self-registration with button push
    
    This change requires the OPAC user to confirm self-registration with
    a button push when verifying registration using an emailed token.
    
    Test plan:
    0. Apply the patch and koha-plack --reload kohadev
    1. Set syspref PatronSelfRegistrationVerifyByEmail to "Don't require"
    2. Create a patron using the self-registration on the OPAC
    3. Note that no confirmation step is needed when self-registering
    4. Set syspref PatronSelfRegistrationVerifyByEmail to "Require"
    5. Create a patron using the self-registration on the OPAC
    6. Look in message_queue to find the URL with the token to
    visit in the browser
    7. Visit that URL
    8. Note that the page says "Registration pending" and asks you to
    click a button labeled "Confirm"
    9. Click the button labeled "Confirm"
    10. Note that the self-registration is confirmed and details are
    shown on the page
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 45c4b936f5109acb9860562de7fde7ee1182c117
Author: Thibaud Guillot <thibaud.guillot@biblibre.com>
Date:   Thu Dec 7 17:06:55 2023 +0100

    Bug 35514: Fix total cost update when adding multiple items to order
    
    Test plan:
    
    1) Create a basket and add an order line to go on neworderempty.pl
       (the new order form)
    2) Choose to add one item and repeat the operation
    3) See on form that the total cost is updated without update vendor
       price
    4) Now add multiple items, for example, "2" you will see that the total
       cost is not updated
    5) Apply this patch, refresh form and repeat steps 3 to 5
    
    Signed-off-by: Michał Dudzik <dudzikmichal@wp.pl>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 28510d473fa5d481c4619d7b568718eb1cc737eb
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Mon Jan 8 14:22:29 2024 +0100

    Bug 35530: Tell UserCSS and UserJS in libraries administration are for OPAC
    
    In libraries administration new fields UserCSS and UserJS are for OPAC,
    this should be in label.
    
    This patch uses text "Specific OPAC CSS", since the system preference OPACUserCSS as help :
    Library specific CSS can be defined in ...
    
    Test plan
    1) Go to Administration >  Libraries
    2) Modify a library
    3) Check you see new labels
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 602521a80aa850ae9f5d53953f5a8696e57f9b73
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 12 16:54:49 2024 +0100

    Bug 35578: Simplify the code using intersect
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0ecb02eff9564908aaed8eb76169e714568e7df1
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Dec 15 00:14:05 2023 +0000

    Bug 35578: Validate "Where" in OPAC Authority search
    
    This patch adds validation to the "Where" field in OPAC Authority search.
    
    Test plan:
    0. Apply the patch and koha-plack --reload kohadev
    1. Go to http://localhost:8080/cgi-bin/koha/opac-authorities-home.pl
    2. Type "test" into "Term(s)" field
    3. Click "Submit"
    4. Confirm a result is found
    
    5. Repeat the above using "Where" values of "in the complete record",
    "in any heading", and "in main entry"
    
    6. Using the HTML inspector in the browser, change the value of
    the selected option of the "marclist" select element to
    "this is broken"
    7. Click "Submit"
    8. Confirm a result is found (ie it's not throwing a fatal error
    anymore)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7ef044cffda97c2318829a06d5ff76f0b67a13fa
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 5 12:17:53 2024 +0100

    Bug 35742: Fix removal of added user from fund
    
    On the fund edition page, if a new user is added the "Remove" link does
    not remove the user.
    
    Test plan:
    0. Do not apply this patch
    1. Edit a fund
    2. Click "Add users"
    3. Search for patron and add some users
       => Notice that the "Remove" link does not remove the user
    4. Apply this patch and repat 1, 2, 3
       => Notice that the "Remove" link remove the user
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 426324062d7f06450123e4e34842f39000bb239f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 5 12:01:55 2024 +0100

    Bug 35743: Fix patron's category selection in the column filter
    
    The "category" filter is not selected in the column filter dropdown.
    
    Test plan:
    0. Do not apply this patch
    1. Search for patron, select a patron's category
       => Notice that the "Category" column has a column filter, but no
          option is selected
    2. Apply the patch
    3. Repeat 1
       => The "Category" column has the option you selected in the filter
          block.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f7171c0a6c61769719afcd0d5e70d1aad3d2a27b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 9 13:16:40 2024 +0100

    Bug 35745: Fix 'Set suggester' of a suggestion
    
    On the suggestion edit form, if a suggester is selected using the "Set
    to patron" (and patron search), the details of the selected patron will
    contained "undefined" for the library's name and patron's category
    description.
    
    Test plan:
    Edit a suggestion, click "Set to patron", select a patron
    Notice that with this patch the library's name and patron category is
    correctly displayed.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5464d1109986d9d082494910f4db5dc7228b5800
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 9 13:14:55 2024 +0100

    Bug 35744: Implement +strings for GET /patrons/:patron_id
    
    In order to retrieve the library's name and patron category's
    description alongwith other patron's info.
    
    Test plan:
    Run the following command before and after this patch:
    
    % curl -u koha:koha --request GET 'http://localhost:8081/api/v1/patrons/42' --header "Content-Type: application/json" --header "x-koha-embed: +strings" | jq
    
    Notice that you now have _strings which contains the library's name and
    patron category's description
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e8c0438d87468d7a5638a3463817aff5c9d75e85
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Jan 23 17:53:39 2024 +0000

    Bug 35800: Remove item.can.be.edited check
    
    To test:
    APPLY PATCH
    1. Check out an item to a patron from library A
    2. Give permissions to a patron from library B
       (example of a circulation staff account)
         - circulate
         - catalogue
         - borrowers ( including view_borrower_infos_from_any_libraries )
         - reserveforothers
         - updatecharges
         - suggestions
         - lists
         - clubs -> enroll
    3. If necessary, change the username and password of that staff member in order to be able to log in
    4. In a private browser window, log in as the staff member
    5. View the record with the checked out item
    6. You should see the name/cardnumber of the patron the item is checked out ot.
    7. Turn off the view_borrower_infos_from_any_libraries for this patron.
    8. Now on the record detail page you should see text like `Checked out to A patron from library Midway : due 01/28/2024`.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cb7921d8d03219e0a8dfb350d0029c764c47f1bd
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jan 18 14:46:45 2024 +0100

    Bug 35833: Silence few warnings from searching
    
    Resolve:
    [2024/01/18 11:31:24] [WARN] Use of uninitialized value $hits in numeric eq (==) at /usr/share/koha/opac/opac-search.pl line 612.
    [2024/01/18 11:31:24] [WARN] Use of uninitialized value $times in subtraction (-) at /usr/share/koha/C4/Search.pm line 1715.
    
    Test plan:
    Look for a few search expressions without results.
    Check log without and with patch.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 857d8f4d826cf513a6a4ba22a324890f7e5f2bd3
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jan 18 14:39:55 2024 +0100

    Bug 35833: Fix warnings from C4/Koha
    
    [2024/01/18 11:52:40] [WARN] Argument " " isn't numeric in numeric eq (==) at /usr/share/koha/C4/Koha.pm line 600.
    [2024/01/18 11:52:40] [WARN] Argument " " isn't numeric in numeric eq (==) at /usr/share/koha/C4/Koha.pm line 659.
    
    Note: According to the code in MARC::Field the indicator returned cannot be undef. So we do not return new
    uninitialized warnings.
    
    Test plan:
    Check your log before and after patch.
    Possibly you may need to create a record with spaces as field indicators.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 806ef1899e96037f3f69195e9e6ab6e72cc40301
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jan 13 18:15:03 2024 +0000

    Bug 33464: Add page-section to "Orders by fund" result list
    
    This updates the results table for the "Orders by fund"
    report with the common white background.
    
    To test:
    * Go to Reports > Orders by fund
    * Search for orders (you might have to add one)
    * Verify the results table is missing the common
      white background
    * Appyl patch
    * Reload page and verify styling is improved
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 621cdbd2b85ce2c2117528a59805132a519d80d9
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jan 13 17:54:32 2024 +0000

    Bug 34298: Add page-section to duplicated orders list
    
    When creating an order from an existing order (copy),
    on the third page, the page section was  missing on the
    table.
    
    To test:
    * Create a basket with an order, close the basket.
    * Create a second basked
    * Create a new order line using:
      "From existing orders (copy)"
    * Search for your previous order and select it for copy - Next
    * Select a fund - Duplicate orders
    * Verify that the table with the order lines to create
      doesn't have the white background
    * Apply patch
    * Reload page - the table now should appear styled correctly
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 34749a20bddccfa853e3abf8bae104c07bb89db5
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jan 13 15:58:17 2024 +0000

    Bug 34872: Add page-section to cart pop-up in staff interface
    
    This adds the page-section class to the tables in the cart pop-up
    in the staff interface.
    
    To test:
    * Search for records in the staff interface and add some to the cart
    * Open the cart, review the normal and brief view
    * Apply patch
    * Review normal and brief view again - tables/sections should now
      have the white background.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f1e9c6e95985b8a7439ad0e7e0a9df688fbdc1c2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 16 13:51:44 2023 +0000

    Bug 35350: Update label creator pop-up windows with consistent footer markup
    
    This patch updates two label creator templates in order to style
    submission and close buttons in a fixed footer at the bottom of the
    window, with markup consistent with other pop-up windows.
    
    To test, apply the patch and go to Cataloging -> Label creator.
    
    - Click New -> Label batch.
    - Click the "Add items" button under the form.
    - A "Search for items" window should pop up.
      - The window's fixed footer should have the "Search" and "Close
        window" buttons. Test that each work correctly.
    - Submit a search which will return results.
      - The search results window should also have a fixed footer. I moved
        the "Add checked" and "Done" buttons out of a floating toolbar and
        put the controls there for consistency's sake.
      - Confirm that both controls work correctly.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ee6fe93274e0e46e91a584272237e535284673f8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 16 12:13:06 2023 +0000

    Bug 35349: Reindent label item search template
    
    This patch reindents the label item search template so that it has
    consistent indentation. These changes should have no visible effect on
    the page.
    
    To test, apply the patch and go to Cataloging -> Label creator.
    
    - Click New -> Label batch.
    - Click the "Add items" button under the form.
    - A "Search for items" window should pop up.
    - The form should look correct, and work as it did before the patch.
    
    Viewing the diff while ignoring whitespace changes should show only
    places where a line break was added.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 633533049ad234f8705390e4b6c78987e90b2802
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Mon Dec 18 16:06:28 2023 -0500

    Bug 35596: Error in writeoff_debts documentation
    
    This patch corrects an error in the documentation of the
    writeoff_debts.pl script. The --type parameter accepts debit type codes,
    not credit type codes.
    
    To test:
    -  Run ./misc/cronjobs/writeoff_debts.pl
    -  Make sure the sentence for --type makes sense, grammar and spelling
       are correct
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0c96e57b0c6986f5bffc7530bd2eaf25ea7e994e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jan 29 10:41:56 2024 +0100

    Bug 34913: Fix perlcritic for VirtualShelves.pm
    
    C4/Utils/DataTables/VirtualShelves.pm: "@order_by" is declared but not used at line 86, column 9.  Unused variables clutter code and make it harder to read.  (Severity: 3)
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1f5d1beddd0a9732110aac3cd194ed3f4a179cba
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jan 24 10:46:55 2024 -0300

    Bug 35893: Add missing </li> in opac.pref
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 898d96adb99861a639c5985a0a739b02e6decabd
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Jan 12 23:23:57 2024 +0000

    Bug 35373: Remove false FIXME comment from gather_print_notices.pl
    
    Removes a FIXME line mentioning bug 8000 that implemented
    SendAllEmailsTo. But the note was added to the "From" line
    and the "To" address is taken from a command line parameter.
    
    To test:
    * Review change carefully
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a2a284c7f56e23174fcc52655273bf5c07282d62
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jan 13 00:08:04 2024 +0000

    Bug 35354: Update description of EmailLibrarianWhenHoldisPlaced system preference
    
    This includes more information about the email addresses
    used in the system preference description.
    
    To test:
    * Search for EmailLibrarianWhenHoldisPlaced in administration >
      system preferences
    * Verify description
    * Apply patch
    * Verify improved description and that the links work as expected
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 976f5e7ce69723ddf82a8d3a28c82d7e60551050
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jan 9 16:15:00 2024 +0000

    Bug 35701: (follow-up) Fix last instance of t variable
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 50904b219e203857f71985b729774b38121c8ee9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jan 4 16:24:26 2024 +0100

    Bug 35701: Do not use t
    
    To not interfer with the t from I18N
    
    On bug 35329 we are using the I18N TT plugin that is providing the 't'
    subroutine.
    
    This loop is redefining the subroutine, therefore it is not longer
    accessible.
    
    Test plan:
    Edit a patron and confirm the the "Title" dropdown still contain the
    different values of syspref BorrowersTitles.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a7f914bf3b521b464c673c5cbf406d9ce9feea19
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 12 16:35:28 2024 +0000

    Bug 35795: Missing closing tag in OPAC course details template
    
    This patch adds a missing closing tag, "</em>" to the breadcrumb
    navigation shown when viewing the detail page of a course.
    
    To test you must have at least one course created in the course reserves
    module (Course reserves -> New course)
    
    - Apply the patch and go to the OPAC.
    - Open the Course reserves page and click the name of the course you
      created.
    - The last item in the breadcrumb menu should be "Course reserves for
      [your course name]" and "you_course_name" should be in italics.
    - The rest of the page should look correct.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 05cdc48fd6c549f5f67af2562f9c5f889b63fa50
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jan 17 11:58:03 2024 +0000

    Bug 35820: Fix table id on hold ratios page
    
    This patch corrects the ID on the table showing holds on the holds
    ratios page so that it matches the DataTables initialization and
    configuration. I'm not aware of any bug with the functionality, but
    consistency is good.
    
    The patch also wraps the table in a "page-section" div, an update which
    includes indentation changes.
    
    To test, apply the patch and if necessary, place multiple holds on a
    title so that the hold ratios page will display results.
    
    - Go to Circulation -> Hold ratios.
    - The table of hold ratios should look correct.
    - Click the "Configure" button at the top of the table.
    - On the table settings page, change the default visibility of some
      columns.
    - Return to the hold ratios page to confirm that the correct columns are
      hidden by default.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fceafbc496967b379f5f5a5f210e5ece75e5a7a9
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed Jan 17 16:38:24 2024 -0500

    Bug 35831: Move UpdateItemLocationOnCheckout to Checkout policy section
    
    This patch moves the UpdateItemLocationOnCheckout system preference from
    the Checkin policy section of the circulation preferences to the
    Checkout policy section.
    
    To test:
    1. Apply patch
    2. Go to Administration > System preferences > Circulation
    3. Check that UpdateItemLocationOnCheckout is under Checkout policy
    
    The text should be the same as before, and the feature should not have changed.
    
    Signed-off-by: Aude <aude.charillon@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f34a639c58534534efe25dd2b3e98e84e79550ee
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jan 18 15:02:10 2024 +0000

    Bug 35835: Fix shebang in cataloguing/ysearch.pl
    
    Speaks for itself.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 24845a8861a1cc07b552fe126dab8ed897be950f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Dec 4 15:47:23 2023 +0000

    Bug 35407: Correct terminology: Show fewer collections
    
    In the OPAC, the "Show more" and "Show less" links have aria-labels to
    make their function clearer to screen readers. The collection and item
    type controls need corrected terminology, and the links also need to
    have their template filter corrected (html, not uri).
    
    To test, apply the patch and perform a catalog search in the OPAC.
    
    - Test that the "Show more" and "Show less" links in the facets sidebar
      work correctly to expand and collapse the lists of facets.
    - It's not necessary to test with a screen reader. You can view the
      source to confirm the markup on the "Show more collections" and "Show
      more item types" links.
    
      Before:
      <a href="#" aria-label="%0A%20%20%20%20Show%20more%20collection%20codes%0A"><strong>Show more</strong></a>
    
      After:
      <a href="#" aria-label="Show more collections"><strong>Show more</strong></a>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ec95c63d417f0268c1aec5f8dc8e9985e601656e
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jan 6 19:49:25 2024 +0000

    Bug 35323: Fix hint for OpacMoreSearches HTML customization
    
    There was some confusion on where this content appears.
    This patch fixes the description shown as hint in the HTML
    customizations tool when when the OpacMoreSearches entry is
    selected.
    
    To test:
    * Before appyling the patch
    * Add a new HTML customization for OpacMoreSearches
    * Verif hint showing below the pull down
    * Set a title and a publication date in the past
    * Enter a short text, like "Koha" as content
    * Save
    * Go to the OPAC, verify text shows in the navigation
    * Apply patch
    * Verify hint is now correct
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cd18b2e6fcc1b10bbb521ce1699ca9caeae8fdd8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jan 25 11:55:42 2024 +0000

    Bug 33457: (follow-up) Simplify even further
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4732d1080900b2437b1d30642e4ec6644ad6c900
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jan 23 14:44:27 2024 +0000

    Bug 33457: (QA follow-up) Use js-patron-format instead
    
    This patch updates the code to use the $patron_to_html js function
    rather than replicating it locally.. this means if in the future we
    introduce further fixes/improvements to the display they're affect here
    too.
    
    Test plan
    1) As for the original implementation, confirm the fix is still fixed
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 00ed806d204f60acb419052f177001d5a76b1310
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jan 16 12:57:34 2024 +0000

    Bug 33457: Improve display of fund users when the patron has no firstname
    
    This patch updates the way the fund modification page handles patron
    names so that a patron with only a first name or only a surname will
    have their name appear correctly when selected as a manager or a user.
    
    To test, apply the patch if necessary, create a patron with only a first
    name and one with only a surname and give them acquisitions permissions.
    
    - Go to Administration -> Funds.
    - Edit a fund.
    - Click 'Add users'.
    - Select a user, only staff users will be searchable
    - Select one of the patrons you created.
      - The patron name should appear correctly
      - Test with both your first name only patron and your last name only
        patron.
    - Perform the same test with the 'Select owner' process.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8a478f912fcd0eb6018449c8264497e55f9ae77e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jan 22 22:07:24 2024 +0100

    Bug 35865: Add missing hint about permissions when adding managers to a basket
    
    When searching for managers for an acquisition basket, the list of patrons is
    limited to patrons with the baskets_managers permission. For other patron
    searches there is a hint about the restriction but it does not appear here.
    
    Test plan;
    Edit a basket, click "Add user" to select a manager.
    Notice the hint about the permission.
    
    Signed-off-by: Loïc Vassaux--Artur <loic.vassaux-artur@outlook.fr>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ffbbee6a76529a28dfdf0b08a80296200290bf74
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Jan 18 23:09:33 2024 +0000

    Bug 35841: Change wording to indicate request to cancel
    
    1. APPLY PATCH
    2. Update circ rules "Default waiting hold cancellation policy" to allow cancellation of holds.
    3. Put some holds onto a patron account, Make some waiting holds and have others be any other status besides waiting.
    4. Log in to the OPAC as that patron.
    5. Go to your account details and look at the Holds tab.
    6. You should see a 'Request to cancel' button for all waiting holds.
    7. You should see a 'Cancel' button for all non-waiting holds.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 074684eaf4f7845e6ad3cb50bd5f941dc5783746
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jan 16 13:41:59 2024 +0100

    Bug 35817: Fix hint on patron's category when batch update patron
    
    When a patron's attribute is limited to a given patron's category, the
    batch patron modification tool will display a hint "This attribute will
    be only applied to the patron's category %s". But this is followed by
    the description of the patron's attribute, not the patron's category.
    
    Test plan:
    Create a patron's attribute "Color of hair" and select a patron
    category (Patron).
    Batch edit batch and select "Color of hair"
    A hint will be display.
    => Without this patch the hint is "This attribute will be only applied
       to the patron's category Color of hair"
    => With this patch it will be corrected to "This attribute will be only
       applied to the patron's category Patron"
    
    Signed-off-by: Anneli Österman <anneli.osterman@koha-suomi.fi>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 241fb630f1a170a5866ddcb4963b1f18508ad8e5
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Jan 9 21:49:44 2024 +0000

    Bug 35752: Pass CSRF token to del_form
    
    To test:
    
    1. Have multiple additional content items ( news/HTML customization/Pages )
    2. On one of the pages ( news/HTML customization/Pages ) select more than one item and try to delete using the 'Delete selected' button
    3. You are redirected but nothing happens.
    4. APPLY PATCH
    5. Try again, this time you should be able to successfully delete additional-contents.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cbc97f5c685e4e97f2d5f5c834f489869d5e2e4c
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Jan 3 22:57:32 2024 +0000

    Bug 35695: Remove useless JS from cataloging_additem.js
    
    To test:
    1. APPLY PATCH
    2. Turn on EnableItemGroups
    3. Go to a record with item groups, or create some.
    4. Add an item, making sure items can be added to a group. ( Bug 33639 must be applied )
    
    If I am wrong and this code should stay, tell me. I'll fix the jQuery instead of removing it. :)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bb7fc5025b6b76e06283d872fd50ac9a65ff25cf
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jan 2 12:59:39 2024 -0500

    Bug 35461: Fix function call parameters causing the HASH to show in the renew all responses
    
    "Renew All" -function aka. 65-66-messages work like this: 66-return messages has renewed items in BM-fields and non-renewables go into BN-fields.
    
    If all items were renewable, then the reply message looks like:
    
    Reply:
    13.07.2022 10:06:17:530 OUTESTI1 6610005000020220713 100616AOOUPK|BM564N15977171|BM564N09203960|BM564N23261720|BM564N25161958|BM564N23455012|C4::SIP::SIPServer=HASHC4::SIP::SIPServer=HASHAY6AZCEFE
    
    If items include renewables and non-renewables, the response includes the renewed  items first, then a HASH mixed into the first BN-field, then rest of the renewed ones like they should show in BN-fields and after that, anohter HASH:
    
    13.07.2022 14:41:32:610 OUTESTI1 6610003000420220713 144130AOOUPK|BM564N23455012|BM564N23261720|BM564N25161958|C4::SIP::SIPServer=HASHBN564N09203960|BN564N04191259|BN564N15977171|BN564N13788332|C4::SIP::SIPServer=HASHAY8AZC7C5
    
    If all loans were unrenewable (this test included just one item), you first get a HASH in a BN-field, and another at the end.
    
    13.07.2022 14:49:00:037 OUTESTI1 6610000000120220713 144858AOOUPK|C4::SIP::SIPServer=HASHBN564N19874533|C4::SIP::SIPServer=HASHAY9AZDD3B
    
    Our self checkout/checkin machine can handle/parse these reply messages correctly, but this might not be the case with all self checkout/checkin devices.
    
    Test Plan:
    1) Unit test patch
    2) prove t/db_dependent/SIP/Message.t
    3) Note failures
    4) Apply this patch
    5) prove t/db_dependent/SIP/Message.t
    6) Tests pass!
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: lmstrand <lmstrand@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e70e1f8a17f1a7aa507cc0fc5982b423612b1c98
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jan 2 13:01:57 2024 -0500

    Bug 35461: Add unit tests
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fea69c86079fddcbd4f339c87a03356a9ab4551d
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Dec 12 22:48:22 2023 +0000

    Bug 35360: Make HTML/buttons consistent on waitingreserves.tt
    
    To test:
    0. Turn on hold cancellation requests in Administration -> Circulation rules.
    1. Have some holds that are waiting, waiting over expiration date, and cancelled waiting holds. In order to create holds waiting over expiration date, if you are in ktd, you can use SQL to update the expirationdate in reserves: UPDATE reserves SET expirationdate="2022-01-01" WHERE reserve_id=1; (make sure it's the correct reserve_id!)
    1a. If you are not using ktd, you will need to set ReservesMaxPickUpDelay to 0 days, then return the reserved item and then wait one day before it will be marked as over expiration date.
    1b. In order to create cancelled waiting holds, you will need to send a cancel request over the OPAC, that is, reserve something after logging in to the OPAC, return it in the staff interface, and then go to the OPAC -> Your Account -> Holds -> click Cancel on the waiting hold.
    2. Notice the differences between the 3 tables and their related buttons:
    -Holds waiting
    -Holds waiting past their expiration date
    -Holds with cancellation requests
    
    -Holds waiting includes a 'Canceled selected' button at the top of the table. It is with in a #toolbar.
    
    -Holds waiting past their expiration date includes a 'Cancel selected' and a 'Cancel all' button. None are within a #toolbar. The 'Cancel selected' here lacks a Bootstrap .btn class. The 'Cancel all' button does have a .btn class.
    
    -Holds with cancellation requests has neither a 'Cancel selected' or a 'Cancel all' button.
    
    3. APPLY PATCH
    4. Look again and the tables/buttons should be more consistent.
    5. The 'Holds with cancellation requests: X' tab should now include a 'Cancel selected (X)' button. Make sure is works.
    6. Make sure TransferWhenCancelAllWaitingHolds is set to "Don't transfer" and make sure the hint displays well in the Holds over table.
    
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bfbace46e1cf547658b3f0248fedd137d4b2a457
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jan 26 13:31:48 2024 +0000

    Bug 34979: DBRev 23.12.000.05
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 92d98c1808f4ae12a91263a8c68099753259084a
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Jan 12 15:07:19 2024 +0000

    Bug 34979: (follow-up) Only print message when preference was added
    
    Implements Joubu's suggestion from comment#14 and improves
    on it for the cases where we fix capitalization.
    
    Test plan remains unchanged. You can run the database update
    a second time to see the difference.
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 971d115c8f3d0f27f38f422569af1a86c389e382
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Jan 7 22:03:31 2024 +0000

    Bug 34979: Fix mistakes in system preference files highlighted by unit test
    
    This fixes the mistakes the unit test helped to find:
    * Add missing system preferences to sysprefs.sql
    * Correct spelling for AutoUpdateSetsEmbedItemData
    * Correct capitalization, so that code and pref files match
    * Fix OverDrive sytem preferences, where explanation/options
      columns where switched, resulting in strange database entries
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 24249e264727f76b2e471448eb601daa60cac449
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jan 6 21:59:17 2024 +0000

    Bug 34979: Sort sysprefs.sql alphabetically
    
    This doesn't add or remove any entries, but only changes
    the sequence of entries to be alphabetic again, compared
    to:
    
    SELECT variable FROM systempreferences ORDER BY variable;
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 06ba28556254e443d0cc678c0f3d6aabd20f6767
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Jan 7 21:54:29 2024 +0000

    Bug 34979: Add unit test for comparing YAMl files with sysprefs.sql
    
    The unit tests will help to detect any discrepancies
    and missing entries in the YAML and sysprefs.sql files.
    
    To test:
    * Apply only this patch
    * prove -v t/db_dependent/check_sysprefs.t
    * It will fail.
    * Apply other patches
    * Run database update
    * Re-run test. It should pass now.
    * Recreate your database or reset_all with patches applied.
    * System preferences should be installed correctly.
    * Test should still pass.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f3a069ad7fa1604a5e9996546e6ef8828bd9dc05
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jan 24 16:32:23 2024 +0000

    Bug 34647: (follow-up) Minor fixes
    
    This patch fixes the functionality of the <select> menu for jumping to a
    particular vendor, "Choose a vendor in the list to jump directly to the
    right place."
    
    The patch also removes the empty anchor tag on the "Items with no
    checkouts" report. It appears to be unused.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a317923bfd0c13e3a46b50f6195f2d2efd8513bc
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Jan 24 15:11:40 2024 +0000

    Bug 34647: Delete unnecessary anchor tag
    
    This patch removes an anchor tag from the form that does not seem to
    serve any purpose. The form has an id attribute and it is this that
    appears to be used for navigation to and displaying the form.
    
    Test plan:
    1) Navigate to Cataloging > marc modification templates
    2) Add a new template or edit an existing one
    3) The form to add a new action should be displayed when either the
       "New action" button is clicked or you select to edit an existing
       action
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8a07455e3beeb58ec934665d301bc76e4ef562a4
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Jan 24 15:08:56 2024 +0000

    Bug 34647: Replace name attributes with ids
    
    This patch replaces name attributes on <a> tags as this is now obsolete
    in HTML 5. The recommended practice is to substitute these for ids, as
    has been done in this patch
    
    Test plan:
    1) Navigate to each page where the link has been amended
    2) Check that the link still works as expected
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f931a0ac8089dc92cec46e1a66d92a8a1bafada4
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Jan 24 14:09:19 2024 +0000

    Bug 35894: Remove duplicate link
    
    This patch deletes a link that appears to be an unnecessary duplicate
    in the template file. The link does not appear in the UI and serves no
    obvious purpose
    
    Test plan:
    1) Navigate to Acquisitions and click Search next to the vendors field
    2) Click on a vendor name and the navigation should still work as
       intended, taking you to the Vendor's details page.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4e480d48f67c2eb942be4c8516533a327c7e2ba5
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Oct 27 21:59:26 2022 -1000

    Bug 32029: Automatic item modifications by age add biblio table
    
    In automatic item modifications by age missing,
    conditions can be on columns of tables items or biblioitems.
    Table biblio is missing.
    
    Test plan :
    1) Create an automatic item modifications by age with a condition on a column of biblio table
    2) Create a record and item matching the rule
    3) Run misc/cronjobs/automatic_item_modification_by_age.pl -c -v
    => Check only matching items are impacted
    
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    
    Bug 32029: (follow-up) unit test
    
    Signed-off-by: matthias le gac <matthias.le-gac@inlibro.com>
    
    Bug 32029: (follow-up) tidy
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b2e5efbdae0d607f6264235ca82d884b95c1a9ef
Author: Andreas Jonsson <andreas.jonsson@kreablo.se>
Date:   Mon Nov 6 15:18:42 2023 +0100

    Bug 30627: Verify --days parameter and use find command to select old backups for deletion
    
    Test plan
    
    * Create some old fake backups:
    
    backuproot=/var/spool/koha
    instance=kohadev
    
    backupdir="$backuproot"/"$instance"
    
    for i in 1 2 3 4 ; do
       for j in sql tar xxx ; do
          file="$backupdir"/"$instance"-$(date -I -d "- $i day").${j}.gz
          if ! test -e "$file" ; then
             touch -t "$(date +%Y%m%d%H%M -d "- $i day")" "$file"
          fi
       done
    done
    
    * Verify that --days parameter is validated
    
    sudo koha-run-backups --days 0
    sudo koha-run-backups --days foo
    
    * Run backup
    
    sudo koha-run-backups --days 3
    
    * Verify that backups from 3 days have been preserved and older backups have been deleted
    * Verify that filenames that do not match the pattern (the .xxx.gz files) are preserved
    
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6341d520ac0a09baa5b005abb3d8d81273a6e310
Author: Janik Hilser <janik.hilser@icloud.com>
Date:   Sun Feb 20 18:14:31 2022 +0100

    Bug 29930: Cardnumber incorrectly set to userid on LDAP auth if cardnumber not mapped
    
    In the sub the userId was given, but the cardnumber was expected, therefore at every login the cardnumber changed to the userId.
    
    To test:
    1. Login to the OPAC with an LDAP account that has a cardnumber which is different to the userId
    2. Check the patron record's cardnumber.
    3. The cardnumber should equal to the userId
    4. Apply the patch.
    5. Login to the OPAC with an LDAP account that has a cardnumber which is different to the userId
    6. Check the patron record's cardnumber.
    7. The cardnumber should be the same as before
    
    Signed-off-by: Alexander Wagner <alexander.wagner@desy.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Extra test plan:
    1. Apply the regression tests
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/Auth_with_ldap.t
    => FAIL: Tests fail! 'cardnumber' incorrectly overwritten
    3. Apply this patch
    4. Repeat 2
    => SUCCESS: Tests now pass!
    5. Sign off :-D
    
    Signed-off-by: Alexander Wagner <alexander.wagner@desy.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fe006e535d5b95445905c0f9c48e04ec31de0476
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jan 16 20:01:22 2024 -0300

    Bug 29930: Regression tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Alexander Wagner <alexander.wagner@desy.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 11b91272f97e3f480b01c6b455e72a59597f2c22
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jan 25 19:37:45 2024 +0000

    Bug 35912: Corretc field name form itemprice to price in addorderiso2709 template
    
    To test:
    Setup -- Set systempreferences below
    
    MarcFieldsToOrder:
    price: 949$g
    quantity: 949$k
    budget_code: 949$l
    discount: 949$m
    sort1: 949$n
    sort2: 949$q
    
    MarcItemFieldsToOrder:
    homebranch: 949$a
    holdingbranch: 949$b
    itype: 949$y
    nonpublic_note: 949$x
    public_note: 949$z
    loc: 949$c
    ccode: 949$8
    notforloan: 949$7
    uri: 949$u
    copyno: 949$t
    price: 949$g
    replacementprice: 949$v
    itemcallnumber: 949$o
    quantity: 949$k
    budget_code: 949$l
    
    Stage the attached bib-303.marcxml file
    Add to basket from the staged file
    Select the biblio
    Note items do no have prices
    Cancel
    Apply patch
    Add to basket from file again
    Note prices, and other fields, come through as expected
    
    Signed-off-by: Michelle Spinney <mspinney@clamsnet.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 291268f3185cb48b6498a9d9121d9567bc0d3419
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jan 19 09:36:23 2024 +0000

    Bug 35843: Correct invalid exception
    
    Test plan:
    Run background job tests. Especially the changed one.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    All test pass when running this:
    prove t/db_dependent/Koha/BackgroundJobs*
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ff2318865e56a8d4fe8aff937b6308403d8eeb22
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jan 26 13:16:01 2024 +0000

    Bug 35687: DBRev 23.12.00.004
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a644f41a924ba40254f6c7ef073d33c7eb7d383b
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Jan 3 14:07:49 2024 +0000

    Bug 35687: Upgrade to 23.06.00.013 may fail
    
    There are reports that this update triggers the error Cannot change column 'itemnumber': used in a foreign key constraint 'tmp_holdsqueue_ibfk_1'
    
    Test Plan:
    1) Upgrade to post 23.06.00.013
    2) Note the failure
    3) Apply this patch set
    4) Run updatedatabase.pl
    5) Update should succeed!
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit aadb6172352c7e1dcdbfd6607d2ca9d3da4af090
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Jan 3 09:31:59 2024 -0500

    Bug 35687: Fix db rev for 23.06.00.013
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a3accea1dd1bb8e7e53e9a165707b9669a2042d5
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Nov 2 01:37:35 2023 +0000

    Bug 34913: Fix Activate/Deactive filters with table_filters.js
    
    This change prevents columnFilter from being called twice. If it's
    called twice, it compromises the formatting of the filters.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 63183059dd975c2f5265fa4c7d2bc59b6ad1a252
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 24 11:12:56 2023 +0200

    Bug 34913: Adjust item search
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 188aab1d7d50d375b0c828726bbe71ed009a840f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 26 07:31:05 2023 +0200

    Bug 34913: Upgrade dataTables.columFilters.js
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 80b2970b7492b8783858182d3c84ea5d52c86f16
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 24 10:32:07 2023 +0200

    Bug 34913: Adjust "Manage staged MARC records"
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 99eb44c6c34492abb122c1be99d406ef75cb2093
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 24 10:20:39 2023 +0200

    Bug 34913: Adjust C4::Utils::DataTables::VirtualShelves
    
    And remove C4::Utils::DataTables, which should no longer be reused
    anyway.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0b788271f998b6b9a738d8b465607f580b9e1a2e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Oct 20 17:15:25 2023 +0000

    Bug 34913: (follow-up) Make sure default DataTables sorting style is always overridden
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a2a0842892f52db627afed5796911d86ee1ce530
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 20 14:53:13 2023 +0200

    Bug 34913: Move item groups table to kohaTable
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2447777c22ecbfdc5c1a8c82540b162870f4d5d0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 3 09:21:35 2023 +0200

    Bug 34913: Fix a selenium test
    
    t/db_dependent/selenium/administration_tasks.t ....... 3/3 Cannot show all entries from table //div[@id="libraries_wrapper"] at /kohadevbox/koha/t/lib/Selenium.pm line 247.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 93866a23205983df93cc954c10acb31ca61ad804
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Sep 28 17:43:32 2023 +0000

    Bug 34913: DataTables upgrade: Update CSS and option names
    
    This patch makes two categories of changes:
    
    1. CSS changes to accommodate changes in DataTables default CSS and
       markup structure. I've tried to make sure all of our Koha-specific
       styles are still applying.
    
       This change necessitates a rebuild of staff interface CSS.
    
    2. DataTables option names: In this version of DataTables you can't
       override a default which uses CamelCase (e.g. "pagingType") with one
       in "Hungarian" notation, e.g. "sPaginationType." Since we define many
       default options in prog/js/datatables.js in camel case, any template
       which previously used a Hungarian notation option to override the
       default has now been updated to use the CamelCase version.
    
       See https://datatables.net/upgrade/1.10-convert#Options for a summary
       of the different option name changes.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 69d547bcd0c0cdaf72de647f108ea635424a6b36
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Sep 28 13:46:34 2023 +0000

    Bug 34913: Upgrade staff interface DataTables from 1.10.18 to 1.13.6
    
    This patch replaces 1.10.18 DataTables assets in the staff interface
    with 1.13.6 versions.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b54da05c73c9ea5b04d3552b34fcc636b0a71851
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Nov 6 17:21:59 2023 +0000

    Bug 35260: Revise structure of the batch checkout page
    
    This patch makes some changes to the style and structure of the batch
    checkout page in order to make it more usable.
    
    To test, apply the patch and rebuild the staff interface CSS. Clear
    your browser cache if necessary.
    
    - Make sure the BatchCheckouts preference is enabled and that the
      BatchCheckoutsValidCategories has some categories selected.
    - Locate a patron and open the batch checkout page.
    - Test the process of checking out to the patron both by entering
      barcodes into the textarea and by uploading a file.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 756a9311a15c2748d0c330540e1e3d38a43448e5
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Nov 17 21:39:02 2023 +0000

    Bug 35356: Show SMS labels only when data exists
    
    To test:
    APPLY PATCH
    1. Set SMSSendDriver = Email
    2. Admin > SMS cellular providers, have at least 1.
    3. Go to the members/moremember.pl
    4. If the patron has no SMSnumber or SMS provider then niether of the labels should appear.
    5. Add both a SMSnumber and SMS provider, make sure the data appears correctly on members/moremember.pl.
    
    Signed-off-by: Andrew Fuerste Henry <andrewfh@dubcolib.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 78d1093cb597d22cb53e96b971ceed0b3d08a303
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Nov 20 14:21:58 2023 +0000

    Bug 34854: (follow-up) Param name change + POD
    
    This patch updates the parameter name to more clearly define what it's
    used for and also adds missing documentation.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit efd932ad42a9c9cc6f422f5286a278de49b76f60
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Sep 20 13:18:54 2023 -0400

    Bug 34854: Add ability to skip Talking Tech Itiva notifications for a patron if a given field matches a given value
    
    Because some notices are mandatory, some libraries would like to allow patrons to opt-in to phone notices. The request is to be able to decide if a patron should get a notice based on the value of a given field ( usually sort1 or sort2 ).
    
    Test Plan:
    1) Apply this patch
    2) Enable TalkingTechItivaPhoneNotification
    3) Set up some overdue items for a patron
    4) Enable phone notices for overdues in the notice status triggers
    5) Run the outbound script for OVERDUE with -t OVERDUE
    6) Note the output the output contains a line for that patron
    7) Set the sort1 field for that patron to TEST
    8) Run the script again, adding in the option "-i sort1:TEST"
    9) Note the ouput no longer contains that patron!
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 325980b43f56454a456e8e833c5d4cad0fc84f40
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Jan 16 16:38:07 2024 +0000

    Bug 26831: DBRev 23.12.00.003
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b4a94459719a0f9c31874eb3b238fa408d636cba
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Nov 17 12:26:56 2023 -0500

    Bug 26831: (follow-up) Tidy cleanup_database.pl
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2f26de8746576c65fb289f7344dc4507f1e64bca
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Nov 17 17:25:58 2023 +0000

    Bug 26831: (follow-up) Tidy code for qa script
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2004ba747d553d9876a615d046de5c84557873f8
Author: David Nind <david@davidnind.com>
Date:   Mon Oct 23 23:28:16 2023 +0000

    Bug 26831: (follow-up) Update system preference description
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 250b7ce55471f36c2bd8e1f25caf03bb2b8aca8a
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Mon Sep 19 00:39:13 2022 +0000

    Bug 26831: Attempting to clarify prioritising of options
    
    Sponsored-by: Catalyst IT, New Zealand
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 428f6d5b17007da312250a5502c748c1f237fb2d
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Tue Sep 13 12:09:14 2022 +1200

    Bug 26831: Use new PurgeListShareInvitesOlderThan syspref
    
    Enable librarians in the staff client to control when unaccepted list
    invites will be removed from the database.
    
    Test plan:
    1. Apply patches
    
    2. Update database
    sudo koha-shell <instance>
    cd installer/data/mysql
    ./updatedatabase.pl
    
    3. Confirm the PurgeListShareInvitesOlderThan syspref = 14
    
    4. Run cleanup_database.pl with --list-invites parameter defined:
    sudo koha-shell <instance>
    cd misc/cronjobs
    ./cleanup_database.pl --list-invites 10 -v
    
    5. Confirm the output contains:
    "Purging unaccepted list share invites older than 10 days."
    
    6. Set PurgeListShareInvitesOlderThan syspref = 15
    
    7. Run cleanup_database.pl without the --list-invites parameter:
    sudo koha-shell <instance>
    cd misc/cronjobs
    ./cleanup_database.pl -v
    
    8. Confirm the output contains:
    "Purging unaccepted list share invites older than 15 days."
    
    9. Empty PurgeListShareInvitesOlderThan syspref
    
    10. Run cleanup_database without the --list-invites parameter:
    sudo koha-shell <instance.
    cd misc/cronjobs
    ./cleanup_database.pl
    
    11. Observe you get the following output (along with documentation on all
    parameters of the script):
    "You did not specify any cleanup work for the script to do."
    
    12. Run the cleanup_database with no days defined for the --list-invites
    parameter:
    sudo koha-shell <instance>
    cd misc/cronjobs
    ./cleanup_database.pl --list-invites -v
    
    13. Confirm the output contains:
    "Purging unaccepted list share invites older than 14 days."
    
    Sponsored-by: Catalyst IT, New Zealand
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2fbd03fdc70cba27818b7aa8304bcb10c696b294
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Mon Sep 12 11:17:01 2022 +1200

    Bug 26831: Add new system preference PurgeListShareInvitesOlderThan
    
    Sponsored-by: Catalyst IT, New Zealand
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8b44fb4d181d845a81b1d79856df4f03ab05968b
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Jan 16 16:10:10 2024 +0000

    Bug 30070: EDIFACT and ID are abbreviations
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2db1ab3ef77b6d76e1172ac44fef5913e088a3e3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Nov 15 09:27:28 2023 +0000

    Bug 30070: (follow-up) Ensure strings are translatable
    
    Some strings moved from inline in templates to embedded in JS so we need
    to wrap them in _() now.
    
    Signed-off-by: Ray Delahunty <r.delahunty@arts.ac.uk>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit deadb2e370ea7c753b0284cbc616152d7eea0e7d
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Nov 14 11:57:40 2023 -0500

    Bug 30070: (QA follow-up) Make qa script happy
    
    Signed-off-by: Ray Delahunty <r.delahunty@arts.ac.uk>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 116e117e0147d83bd37f06a131cfc1e71f5d4e14
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 14 15:29:21 2023 +0000

    Bug 30070: Remove 'Configure' option from datatable
    
    This passes 0 for table_settings effectively removing the 'Configure'
    option from the table. We haven't set up the background logic for table
    settings for this table and I don't believe there's a real use case for
    that here at the moment.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 12ea4ec1f200c17b58ecf1a59d05f1502b83d4ca
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 14 15:19:04 2023 +0000

    Bug 30070: Improve view message modal display
    
    The display had some old specific styling added, we can just use
    modal-lg from the bootstrap library now to make the display more
    consistent with other modals.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8b5a5f46cb2da97e9a6d730b10c8729c094772f1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 14 15:07:01 2023 +0000

    Bug 30070: (follow-up) Filter out deleted files on the API
    
    EDI uses a 'deleted' flag in the table to denote deleted files, we
    should filter those out of the API response.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a2fb53a719f46bd58f23812f16b3d379178f219d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 14 14:52:51 2023 +0000

    Bug 30070: (follow-up) Further javascript fixes
    
    This fixes an issue with the datatables when a message file is found to
    be missing the linked vendor or basket details.  This removes the
    datatables error: DataTables warning: table id=edi_msgs - Requested
    unknown parameter '4' for row 12, column 4.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f4498d54ac6cb92afa0f58ba25519feaecd8f00b
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Nov 14 07:26:59 2023 -0500

    Bug 30070: (follow-up) Fix javascript errors
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 37667e000a814b8857ff343c9947aed0e94e1d50
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 14 11:39:22 2023 +0000

    Bug 30070: Add koha_obejct_class(s) to EdifactMessage
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 97c305081b12ffed1946a11feb97aec5d93428e0
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 14 09:49:47 2023 +0000

    Bug 30070: Add unit tests
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b823a51e7a8a88432152fa8e9aa2af140584a89d
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Nov 13 15:59:19 2023 +0000

    Bug 30070: (follow-up) Return unless the related object exists
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 211dc16280f5bc81bb71b8cfd394d1982b406e55
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 10 15:06:04 2023 +0000

    Bug 30070: Update edifactmsgs to use the API
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9382571968ef043558671827fd05c24d2b598220
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 10 12:44:36 2023 +0000

    Bug 30070: Add fetch endpoint for EDI Files
    
    This patch adds a simple EDI Files listing REST endpoint
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 027befd8ea36c3f7fc5389252b6fb0c8bb1726b7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 10 12:36:04 2023 +0000

    Bug 30070: Add Koha Objects for EDI Message Files
    
    This patch adds the Koha Object based classes assocaited with the
    edifact_message table. This table actually contains the raw message
    files which may well each contain multiple edifact messages.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8e8d4aaef71040a90b1052cc3970ff4ccb36a0ae
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jan 2 13:50:54 2024 +0000

    Bug 35663: Reword default privacy option in opac-privacy.pl
    
    This patch updates the description of the OPAC privacy page, replacing:
    
    "Default: keep my history according to local laws. This is the default
    option : the library will keep your history for the duration permitted
    by local laws."
    
    ...with:
    
    "Default: keep my history according to library policy. This is the
    default option : the library will keep your history for the duration set
    by library policy."
    
    This correctly reflects the fact that privacy is managed according to a
    Koha cron configuration.
    
    To test, apply the patch and make sure the OPACPrivacy and related
    preferences are enabled.
    
    - Log in to the OPAC and click the "Privacy" tab in the left-hand
      sidebar.
    - Confirm that the description of the default privacy option is correct.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a34593a95a6f93ccd9ec18beb5a20c4178fe328e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jan 16 14:26:25 2024 +0000

    Bug 35277: (follow-up) Fix tests
    
    This patch adjusts the tests to mock the Background to ensure it is called
    and directly generate the pseudonymized transactions for testing
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 71a881c4d6f7ed4a4f004dc08a34721cd801b763
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Nov 21 15:08:16 2023 -0300

    Bug 35379: Rename tx() parameter to ease translation
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit eae604c437a9d47f0a846e91162030581cfa0405
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jan 8 16:42:45 2024 +0000

    Bug 35707: (alternate) Add clearfix to item statuses
    
    This proposed alterantive patch adds changes the status <span>s to
    <div>s. A div is basically the block-level equivalent of a span. This
    has the same effect of pushing each status onto its own line.
    
    The patch also adds generic "item_status" class to the <div>s as well so
    that we can attach a consistent style to all statuses. The patch
    includes a small amount of padding on these items in order to repeat
    legibility.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    1) Add an item to stockrotation and trigger the first transfer
    2) Place a hold on the item
    3) Note that you will now see two statuses, one above the other as
       displayed in the screenshots attached to the bug.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 660b4fc218c93001e66507f7ac0ac81b3cca0bb2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Nov 28 17:40:54 2023 +0000

    Bug 35419: Update page title for bookings
    
    This patch updates the structure of the Bookings list page so that the
    title can be better translated.
    
    To test, apply the patch and locate a bibliographic record in the
    staff interface catalog.
    
    - View the detail page.
    - If you don't see a "Place booking" button in the toolbar,
      click "Items" in the sidebar menu.
      - Locate the "Priority" heading, and change the "Bookable" setting to
        "Yes."
    - Click the "Bookings" menu item in the left-hand sidebar.
    - Check that the page title looks correct and consistent with
      breadcrumbs.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 272056791fdb10a6ca1b4fe1aad4933a385ead03
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Dec 4 14:21:08 2023 +0000

    Bug 35474: Add icon for protected patrons
    
    This patch adds a "protected" icon (fa-lock) to the patron information
    in the sidebar of patron-related pages in the staff interface.
    
    To test, apply the patch and perform a patron search in the staff
    interface.
    
    - Edit a patron and go to the "Library management" section.
    - Set "Protected" to "Yes."
    - Save the record and view the information in the sidebar. You should
      see the lock icon by the patron's name.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 63ec52160879b789e206d8bff533910d9b5abe91
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Jan 16 14:11:48 2024 +0000

    Bug 34479: Update syntax for translatable string
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bd9e3145d7188867db9bf31bdf6ab980c0f01c70
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 10 15:01:45 2024 +0100

    Bug 35759: (bug 30708 follow-up) Generated dist file not installed for preservation module
    
    It's missing from the Makefile.PL!
    
    Same as erm.js when need to install it.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 066e34956112c5e370ed804fbafd50fc29be0e34
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Jan 16 11:00:30 2024 +0000

    Bug 34479: Fix string for translatability
    
    When moved from .tt to .js we need to convert the single
    underscore into a double underscore.
    
    Also uses format() to better deal with the variable.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 21e2ee11fba6230b77e8b6376b0a903951170646
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Mon Nov 27 10:35:15 2023 +0000

    Bug 34479: Move patron selection history to a re-useable file
    
    This patch takes some of the functionality for maintaining patron selections and moves it to a new file that can be used in other template files. It also introduces a new method for determining whether to delete the history after an operation is complete, along with an .inc file containing the checkbox that manages this
    
    Test plan:
    1) Navigate to Patrons and run a search
    2) Use the checkboxes to select some patrons and run the three different options in the menu bar: Add to patron list, Merge selected patrons, Batch patron modification.
    3) For each operation, you should see a checkbox asking if you want to "Keep patrons selected for anew operation". N.B. For adding patrons to a list, you will only see this when selecting to add them to a new list
    4) When you run the operations, if you select the checkbox to keep the patrons then when you return tho the patron search, those patrons should all be still selected.
    5) If you don't check the box, when you return to the search, your patron selection history should be empty and no patrons should be selected
    N.B. If you have run a merge operation and elected to keep the patron history, you will only keep the patron who was kept
    
    Signed-off-by: Sharon Dugdale <sharon.dugdale@cumberland.gov.uk>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Michael Adamyk <madamyk@ckls.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2de99d0b028fea2b78fed3a8cd9e44c207e92603
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Mon Nov 27 10:42:09 2023 +0000

    Bug 34479: Add new files to templates
    
    This patch adds two newly created files to the templates to allow the patron selection history to be wiped or persisted as appropriate
    
    Test plan as per previous commit
    
    Signed-off-by: Sharon Dugdale <sharon.dugdale@cumberland.gov.uk>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 963a3a47155cf313d25af6ba10781f4e7922f4dc
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Nov 17 10:18:01 2023 +0000

    Bug 35341: Improve processing hard due date and auto renewal date
    
    After quite a struggle, came up with this approach using
    flatpickr's parseDate and setDate. Seems to be the best.
    The dateformat variable is set in calendar.inc.
    
    Test plan:
    Test edit, save, clear rules, focus on both dates.
    Toggle all I18N preference date formats.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Bug 35341: Do not reinstantiate flatpickr
    
    We do not need to reinstantiate flatpickr, we need to retrieve the
    existing instance.
    
    Test plan:
    See previous patch.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    12-01-2024 Squashed both patches. Removed the unused hidden inputs for
    hardduedatecompare and added a data attribute for the duedate.
    The check with is_valid_date seems no longer needed here. Normally
    date is empty or valid. A js warning from parseDate should be
    exceptional. Made code for both dates a bit more consistent.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9e168686cc7de610275c51c161d02b3bc307a9bd
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Thu Jan 11 15:43:49 2024 -0500

    Bug 35322: (QA follow-up) Perltidy
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 77f045e9a5b9068a335a71bf2de9b4852783a446
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Nov 29 09:33:55 2023 -0500

    Bug 35322: Add unit tests
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9b10f69ee318c6fe3fa1ffb6de82c0f9888cac71
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Nov 13 10:37:43 2023 -0500

    Bug 35322: Fix the logic for checking for holds in CanBookBeIssued
    
    We are having reports that AllowItemsOnHoldCheckoutSCO and AllowItemsOnHoldCheckoutSIP no longer work. It appreas that in CanBookBeIssued, the ignore reserves check was changed from "check reserves unless the ignore reserves flag was passed" to "check reserves unless the ignore reserves flag was passed *and* we have a recall". I think this was a logic mistake and we want to check reserves unless we have an ignore flag *or* there is a recall.
    
    Test Plan:
    1) Enable AllowItemsOnHoldCheckoutSCO
    2) Place a hold on an item
    3) Attempt to check that item out to another patron
    4) Note the checkout is blocked
    5) Apply this patch
    6) Restart all the things!
    7) Attempt the checkout again
    8) The checkout now succeeds!
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8f13f74e39a93314abc814735b6fcd1504e49373
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Dec 27 17:52:57 2023 +0000

    Bug 35651: Add check to make sure user has advanced_editor permission
    
    To test:
    1. Turn on the system preference 'EnableAdvancedCatalogingEditor'.
    2. Set up a staff user with permissions to editcatlouge but make sure "Use the advanced cataloging editor (requires edit_catalogue)" if OFF.
    3. Log in as that patron.
    4. Go to a record or create a new one in the basic editor and see the toggle advanced editor button.
    5. Try toggling it and you are logged out.
    6. APPLY PATCH
    7. Try 3 & 4 again, this time there should be no toggle button.
    8. Log in as a patron who does havbe the "Use the advanced cataloging editor (requires edit_catalogue)" permission on. They should be able to toggle between editors.
    
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 122f29cd8f4d1067e8ccaf64ecb0f13cc7b85d9a
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Tue Dec 19 18:31:54 2023 +0000

    Bug 34950: Add availability statuses for in transit and on hold items.
    
    To test:
    1. Enable the ILS-DI system preference.
    2. Place a hold for a patron and put it in transit.
       Place another hold for a patron that is available for pickup at the local branch.
       And then select an item that is available for checkout but don’t change the status for it.
    3. Go to your testing OPAC and make an ILS-DI “Get Availability” call using
       the item ids of the three items you worked with in step 2.
       (i.e. http://localhost:8080/cgi-bin/koha/ilsdi.pl?service=GetAvailability&id=321+323+214&id_type=item)
    4. Notice that the availability status for all three items is showing as available.
       The item in transit and the item with a local hold should have a status
       of not available and a message of why they are not available.
    5. Apply the patch
    6. Use restart_all.
    7. Refresh the page and notice that the statuses are now correct.
       The item in transit has a status of not available and an availability
       message of “In transit”.
       The item with the local hold has an availability status of not
       available with an availability message of “On hold”.
       Finally the available item is correctly showing up as available.
    8. Sign off and have a wonderful day. :)
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e97dac3cbe43c7a8c2d5b340b29354bf112f3a36
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Dec 6 17:25:39 2023 +0000

    Bug 35510: Non-patron guarantor missing from CollapseFieldsPatronAddForm options
    
    This patch adds a missing option to the CollapseFieldsPatronAddForm
    system preference so that the "Non-patron guarantor" section can be
    collapsed by default.
    
    To test, apply the patch and go to Administration -> System preferences.
    
    - Search for CollapseFieldsPatronAddForm.
    - In the dropdown of options you should see an entry for "Non-patron
      guarantor."
    - Click "Select all" and save your changes.
    - Go to Patrons -> New patron and choose a patron category which can
      have a guarantor (for example J - Juvenile)
    - The patron entry page should load with all sections collapsed,
      including the Non-patron guarantor section.
    - Uncheck  all options in the CollapseFieldsPatronAddForm
      preference and return to the patron entry form. All sections should
      now appear.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5ae5e4367b96cd5685c40197f391ca3c4063c407
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Dec 22 13:35:06 2023 +0000

    Bug 35641: Reduce DB lookups when sending a list of barcodes to inventory
    
    This patch does three things:
    1 - Removes a specific query for withdrawn status of each item scanned - we can use the withdrawn field
    2 - Removes a specific query for checkouts on each item scanned - we can use the onloan field
        a - additionally we don't need to fetch the checkout as we check it in to the homebranch,
        this is likely incorrect - we should use the current branch, but I preserve behavior for now
    3 - Fetches the items ahead of time and builds a hash based on barcode, reduces DB lookups, may raise memory usage
    
    To test:
    1 - Checkout some items
    2 - Withdraw some items
    3 - Generate a lsit of barcodes including some checked out items and some withdrawn items
    4 - Enter that list of barcodes into inventory tool
    5 - Note your results
    6 - Apply patch
    7 - Issue the items again
    8 - Repeat inventory
    9 - Confirm results are the same as before patch
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ae8c96f387997b70b32809f30dedb44d0e170711
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jan 12 13:46:50 2024 +0100

    Bug 35676: Fix DidYouMean when not configured
    
    When DidYouMean is not configured, there is the following message
    displayed:
      "Not what you expected? Check for suggestions"
    suggestions is a link to svc/suggestion which does not return content if
    the feature is displayed
     90 unless ( @plugins ) {
     91     print $query->header;
     92     exit;
     93 }
    
    We should not see this text, it is supposed to be replaced when the ft
    is enabled.
    
    However
      commit 79bf4485c1b2ae8059e2ee15ea1e67bba9961c34
      Bug 34866: Use template wrapper for breadcrumbs: OPAC part 4
    made this change:
    -                    [% IF ( DidYouMean ) %]
    +                    [% #IF ( DidYouMean ) %]
                             <div id="didyoumean">Not what you expected? Check for <a href="/cgi-bin/koha/svc/suggestion?render=standalone&amp;q=[% querystring | uri %]">suggestions</a></div>
    -                    [% END %]
    +                    [% #END %]
    
    Which is obviously wrong.
    
    Test plan:
    Do not have the ft configured and launch a search (OPAC) that will not
    return any results.
    => Without this patch there is the message
    => With this patch applied it is no longer displayed
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 96681cfa07de61ca28b9e0f1d572e1ee03f5a655
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jan 11 11:20:55 2024 +0000

    Bug 35772: Remove double escaping
    
    Patch as proposed by Jonathan in a comment on bug 29002
    
    If a patron has HTML character in surname or firstname, Select2 will escapeHtml twice.
    
    To test:
    * Edit a patron, set firstname: <span>test</span>
    * Place booking, search for test
    * It shows correctly in the result, but when you select it you will see "&lt;", etc.
    * Apply patch
    * Verify the display is now corrected.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 328c5dcdfab66bc6833347796ab292b2c58e57f8
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jan 6 19:29:06 2024 +0000

    Bug 25691: (follow-up) Update control file with wiki link
    
    This is in case it's needed anyway (see comment on previous patch)
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0a49f71e8f0bad53dbdfd48bfc2beddbff89a6cc
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jan 6 19:24:33 2024 +0000

    Bug 25691: Replace link to non-existing README with wiki link
    
    This doesn't update the occurrence in the control file
    as it says in control.in:
    
    To test:
    * Verify all occurrences of the README file have been updated. Exceptions:
      * control (see above)
      * changelog
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 067034f9e0585738df564a555194c76cb5b082be
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Dec 1 06:53:21 2023 -0500

    Bug 35438: Remove skip_intermediate_commit parameter
    
    It no longer does anything.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 74bbb89e9941aab7bf3f946d663d0d66b9df4021
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Nov 30 12:10:41 2023 -0500

    Bug 35438: Transact each record import separately
    
    When importing a staged file we commit every 50 records
    For an authority import we are also merging, which can affect many more biblios, and these all end up in the transaction.
    This can cause tables locks and issues across Koha
    
    Test Plan:
    1) Apply this patch
    2) prove t/db_dependent/ImportBatch.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4d3c83809353c3643b86389b27c141b340479218
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jan 12 10:02:33 2024 +0000

    Bug 35277: (QA follow-up) POD corrections
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cf84410ce51a499ab770d78ae33e4549e6403988
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Dec 1 06:17:39 2023 -0500

    Bug 35277: (QA follow-up) Fix POD
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c4315faba0a9ede5b0b30d4da233ff77b5c29494
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Nov 10 11:42:01 2023 +0000

    Bug 35277: (follow-up) Remove debugging module
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c6d6938ef9b8e40e2a51589ecbfc0d3d7736c228
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Nov 7 16:55:44 2023 +0000

    Bug 35277: Unit tests
    
    prove -v t/db_dependent/Koha/BackgroundJob/PseudonymizeStatistic.t
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1ae58daca8cdfc638548b3e6803014a0261da1b4
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Nov 7 13:45:01 2023 +0000

    Bug 35277: Pseudonymize in a background job
    
    This patch adds a new background job for pseduonymization
    
    To test:
     1 - Download the benchmarking script
     2 - Ensure your koha has bcrypt_settings in koha-conf.xml
         See bug 28911
     3 - perl perf_check_pseudo.pl
     4 - Note the slowdown after pseudonymization enabled
     5 - Apply patches, restart all
     6 - perl perf_check_pseudo.pl
     7 - Note improvement
     8 - Enable pseudonymization in sytem preferences
     9 - Perform some checkouts and returns
    10 - Verify the background jobs complete successfully
    11 - Verify the pseudonymized_transactions table is updated correctly
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit deed5233b785be05f6e30ec9077b252edd2c6d35
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Fri Dec 22 13:05:37 2023 +0200

    Bug 32477: Fix hiding all columns in item batch mod tools
    
    If one hides all columns in batch item modification tool
    and then reloads the page or launches tool again, "Holds"
    column isn't displayed and "Itemtype" column is. Also
    "Itemtype" columns checkbox remains checked. This happens
    because "Itemtype" columns id is out of scope of list of column
    numbers set in cookies. This patch adds 3 to number of columns
    in variable "allColums" to take account all 3 columns we don't
    want to hide.
    
    To test:
    1. Find items to modify and modify them with batch item
    modification tool.
    2. Use "Hide all columns" checkbox to hide all columns.
    3. Confirm all columns expect checkbox, "Title" and "Holds"
    columns are hidden correctly.
    4. Reload the page.
    => Note that "Holds" column is now hidden and "Itemtype"
    column is displayed. Also "Itemtype" checkbox is checked.
    5. Apply this patch.
    6. Repeat steps 1 to 4.
    => "Holds" column should now be displayed and "Itemtype"
    hidden. None of the checkbox should be checked.
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 71a7aa1cdce3a3d52dbb421c3ca5d3cf58fcd9c0
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Thu Nov 23 13:15:57 2023 +0200

    Bug 32477: Launch function hideColumns after changing datatables settings
    
    Hiding columns in batch item modification breaks if page is
    loaded again. If one hides e.g. column "Collection" and then loads
    the page column "Holds" disappears. Also behaviour of checbox
    changes for "Collection" column. This happens because we launch
    function "hideColumns" before changing datatables settings and
    "hidden" column with class "sorting_1" is still present.
    
    To test:
    1. Find items to modify and modify them with batch item
    modification tool.
    2. In modification page, hide column "Collection". Confirm
    correct column is hidden.
    3. Reload the page or modify items again.
    => Note that column "Holds" is now hidden and checking checkbox
    for column "Collection" behaves incorrectly (unchecked checkbox
    shows column, checked hides it)
    4. Apply this patch.
    5. Repeat steps 1, 2 and 3.
    => Confirm correct column is now hidden when page is loaded again
    and checkbox works correctly.
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1847e2ab565243a9e8fcaf8ddbfe48136041e61b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jan 4 14:07:11 2024 +0000

    Bug 35702: Fetch biblios at once and loop
    
    Test plan:
    prove -v t/db_dependent/Authority/Merge.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Amended-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Replace $biblio->id with $biblio->biblionumber
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c703bb2c1cdefa85843a1c04ff659f49cbe30497
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jan 4 14:03:45 2024 +0000

    Bug 35702: Use framework code from biblio object
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ed23bc1364ef0d80cfcd9df4e9dd38b009d52827
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jan 5 13:03:36 2024 +0000

    Bug 35086: (follow-up) Use 5000 as example in conf file
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ddbd00de72ac11f7a0cf8fccd9d720e84d85f4ea
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jan 4 12:55:03 2024 +0000

    Bug 35086: Tidy tests
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7496a603cda7832bcf1bdb606843bd88f18af4f3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 3 18:54:25 2024 +0000

    Bug 35086: Also split chunks when indexing from background job
    
    The es background indexer is designed to combine background jobs when started based on the 'batch_size' option.
    
    While this is helpful for combining individual updates, it can be problematic when there are several large batch modifications, or when worker has stopped and is restarted.
    
    This patch uses the same logic as in the indexer to split the chunks that are sent directly for indexing.
    
    To test:
    1 - Follow test plan on previous patch
    2 - Confirm items are correctly indexed and jobs marked
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9951e230e43d08dc6a2fb635877d0db5c1e245ff
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Dec 22 20:11:34 2023 +0000

    Bug 35086: Add chunk_size option to elasticsearch configuration
    
    Whne performing batch operations we can send a large numebr of records for reindexing at once.
    Currently this can create requetss that are too large for Elasticsearch to process. We need
    to break these requests into chunks/
    
    This patch adds a chunk_size configuration to the elasticsearch stanza in koha-conf.xml
    
    If blank we default to 5000.
    
    To test:
    0 - Have Koha using Elasticsearch
    1 - Create and download a report of all barcodes:
        SELECT barcode FROM items
    2 - Batch modify these items
    3 - Note a single ESindexing job is created
    4 - Create and download a report of all authority ids:
        SELECT auth_header.authid FROM auth_header
    5 - Setup a marc modification template, and batch modify all the authorities
    6 - Again note a single ES backgorund job is created
    7 - Apply patch
    8 - Repeat the modifications above - you still get a single job
    9 - Edit koha-conf.xml and add <chunk_size>250</chunk_size> to elasticsearch stanza
    10 - Repeat modifications - you now get several background ES jobs
    11 - prove -v t/db_dependent/Koha/SearchEngine/Elasticsearch/Indexer.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b8d9cce6645b913c57410a855986b76c84d2346b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jan 11 10:09:57 2024 +0000

    Bug 34999: Add unit test
    
    Test plan:
    Run t/db_dependent/api/v1/auth.t
    [Bonus] Run prove t/db_dependent/api/v1
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1fc82dd827ad298bead46583ada08c549afe8d8e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Nov 24 10:50:54 2023 +0000

    Bug 34999: Throw exception for public routes if OPACMaintenance is enabled
    
    Test plan:
    [1] Try public endpoint like /api/v1/public/biblios/X/items.
        * Replace X by an existing biblionumber.
        You should receive a 200.
    [2] Enable OPACMaintenance. Set to Show.
    [3] Try same endpoint. You should get a 503 with a json error.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6779e64d955f6e90e05eba19fd4d7d3606ae15ec
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 10 09:36:43 2024 +0100

    Bug 35756: Correctly serialize patron's data in patron search popup/modal
    
    We are incorrectly using encodeURIComponent in patron-search.inc.
    When a new patron is selected, the info message is showing "Patron %s is already in the list"
    or "Patron %s added". If the patron has space in their name, they will be substituted with %20.
    
    We are using JSON for select, we can reuse it for add.
    
    Test plan:
    Have a patron with spaces in their name
    Add users to a fund
    Notice that the name is correctly displayed.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f0e7260a29ec2768b442490921d74b8ee267f15c
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Dec 23 16:19:45 2023 +0000

    Bug 35475: Improve concatenated string and fix error in JS file
    
    Fixes 2 problems noted in comment#2 and comment#3 on the bug
    report.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 573d2a3ba86aa0e805975a4d224d341b775eaebd
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Dec 10 16:56:29 2023 +0000

    Bug 35475: Makes strings in booking JS file translatable
    
    This makes several strings in the booking specific JS file
    translatable.
    
    To test:
    * Make an item bookable:
      * Find a record with items in your catalog or create one
      * From the details page, switch to the items tab
      * Mark items as bookable
    * Add a booking, verify the modal works as expected
    * Check the bookings tab
    * Verify the column headings of the bookings table show correctly
    * Verify the "Biblio level" and "Item" in the calendar show
      Note: Months don't translate, this will be a separate bug
    * Cancel a booking, edit a booking... make sure everything works
      as expected
    * If you can: Install a translation and verify strings show up
      in po files as expected
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2ce83fc784ad8bc716bd65f14845141097c72b69
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jan 10 13:46:58 2024 +0000

    Bug 35504: Distinguish different RMaint and Topic Expert roles
    
    This patch further splits up release maintanence and topic expert roles
    so that they display with further, more accurate, detail in the
    development team section.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 73809ff846e7c0c4e18a48c1831acc7ccfcf3b8d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jan 10 13:48:53 2024 +0000

    Bug 35504: Split list of ERM Topic experts
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7fd998c1e7355aeb5635a94d25382125d192cd10
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jan 10 11:39:15 2024 +0000

    Bug 35504: Add full maintainers list into development branch
    
    On a stable branch the current maintainer of your running version is
    listed at the top of the current maintanence team.. however when you're
    on a development branch the RM is responsible for your branch and the
    maintainers were missing from display.
    
    This patch adds the maintainers list back to the bottom of the current
    maintanence team section, just for the development branch.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a26d4bdf9521ca4fad85741b9fddbb540823d4e0
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jan 10 11:38:14 2024 +0000

    Bug 35504: Change 'Jenkins' to 'Continuous integration'
    
    We were naming these roles differently between the 'current team' and
    'past roles' display.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a4061c3f146a41e2fdb41f4be15239a61a04b46d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jan 10 11:37:51 2024 +0000

    Bug 35504: Corrections to wiki team
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 29c1225bf8ee789a6f03d35e8af93a953b8733fa
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Dec 12 12:04:56 2023 +0000

    Bug 35504: Add ktd maintainer
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8190fdb5bda236d762eb6f9e42e8c733c2408a14
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Dec 12 11:48:47 2023 +0000

    Bug 35504: Corrections to team
    
    Correction of 'advocate' to 'advocates' to ensure they appear in the
    team.
    
    Addition of 'website' and 'wiki' handling to ensure they also appear
    in the team.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b9da22b490e676b3781cb7f1439a4cbf420f52ab
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Dec 12 11:10:47 2023 +0000

    Bug 35504: Typo fix
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b6cfef878bfdaa48b36c37c6415293d23042c774
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Dec 6 16:03:55 2023 +0000

    Bug 35504: New cycle, new team :)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2fbd47fdd68678f8f12307b6f5bda1cbcac0ca9a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 3 14:52:25 2024 +0100

    Bug 35634: (bug 33105 follow-up) fix typo issues_manage vs issue_manage
    
    issue_manage inserted into the DB but issues_manage is tested in the
    controller script.
    
    Test plan:
      git grep issues_manage
    should no longer return any results
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5b14f8b11a57a83b5863e32121243c7b133d5c90
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Jan 2 17:49:45 2024 +0000

    Bug 33639: Make add item to item group work from additem.pl
    
    To test:
    
    1, Create one or more item groups for a bib if needed
    2. Create a new item, and at the bottom of the 'Add item' screen, select the item group to which you want this item added. Save.
    3. On the Normal tab, see that the item has not been added to the item group you selected.
    4. APPLY PATCH, restart_all
    5. Try 1-3 again but this time the item should succesffuly be added to the item group.
    6. Add a new item and to the same record and this time try the 'Create a new item group' from the dropdown.
    7. Name the new item group.
    8. Make sure it is correctly added to the item group.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c5f28855ad5870457b5cd8a2171e5bb23c054f2f
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Sun Nov 5 20:53:43 2023 -1000

    Bug 35265: Remove drag and drop in Elasticsearch mappings
    
    Bug 18827 says ordering search fields in Elasticsearch mappings is useless.
    
    This patch removes it.
    Drag and drop is kept for facets.
    
    Test plan :
    1) Enable Elasticsearch
    2) Go to Administration > Search engine configuration (Elasticsearch)
    3) Go to tab 'Bibliographic records'
    4) Check there is no Javscript error
    5) Check you can't drag and drop lines anymore
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Barbara Petritsch <barbara.petritsch@wienmuseum.at>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 23de67a7e4d3701f9a665ec0fee38e22128c5fa3
Author: Andrew Fuerste Henry <andrewfh@dubcolib.org>
Date:   Wed Nov 29 18:02:52 2023 +0000

    Bug 25835: Include overdues with fines in overdues_report permission
    
    To test:
    1 - have a user with circulate_remaining_permissions but not
        overdues_report
    2 - confirm user can see and run Overdues with Fines
    3 - apply patch
    4 - confirm user can no longer see links to Overdues with Fines or load
        the page directly by entering the url
    5 - confirm a user with overdues_report or greate permission can see and
        use the tool
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d6e072fb5f2a0cd47661e759142e59e887724cc6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Dec 28 14:41:39 2023 +0000

    Bug 32551: HTTP_ACCEPT_LANGUAGE legacy CGI variable not set in Mojolicious
    
    This patch addresses the fact some of our code still relies on those CGI-era ENV variables.
    In particular, C4::Laguages::getlanguage expects it to calculate the most suitable language.
    
    As this is reported as required, I provide a fix.
    
    I did a `git grep HTTP_` on the codebase, and the only other occurences are:
    
    * C4::Output (HTTP_X_REQUESTED_WITH)
    * C4::Context (HTTP_USER_AGENT, HTTP_X_FORWARDED_FOR)
    * C4::Auth_with_shibboleth (using HTTP_ variables for matchpoints)
    * Some handling on the 'Koha as a Mojo app' code
    * Some .pl script not relevant to this report
    
    I decided to limit this patch to the requested header which seems harmless. I leave the
    other cases.
    
    To test:
    1. Apply the regression tests patch
    2. Run:
       $ ktd --shell
      k$ qa -c 1
    => FAIL: Tests fail!
    3. Apply this patch
    4. Run:
      k$ qa -c 2
    => SUCCESS: Tests pass! All green!
    5. Sign off :-D
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5292903dc19191b265e5b2c6a1cdce99ed9e447c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Dec 28 14:40:11 2023 +0000

    Bug 32551: Regression tests
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0f2c17e71dcf128a28a9533c2a3040db2535fd1d
Author: Kevin Carnes <kevin.carnes@ub.lu.se>
Date:   Thu Dec 14 10:47:40 2023 +0100

    Bug 35567: Prevent translation of Host-item in "Show analytics" link
    
    The "Show analytics" link is built using text which can be translated.
    
    The following languages have already translated Host-item:
    fa-Arab, fi-FI, nl-NL, pt-BR, ru-RU, sv-SE
    
    To test:
     1. Install one of the affected languages:
        koha-translate --install sv-SE --dev kohadev
     2. Modify and save the following system preferences:
        language: enable the language
        OPACLanguages: enable the language
        opaclanguagesdisplay: Allow
        EasyAnalyticalRecords: Show
     3. View a record with holdings and copy the barcode of one the items
     4. Select the Edit dropdown menu above the record details and click
        "Link to host record"
     5. Paste the barcode, click Select, and click OK
     6. Return to Normal view of the record and reload the page
     7. There should now be a "Show analytics" link
     8. Hover over the link and note that the link contains "Host-item"
     9. Switch to one of the affected languages and note that "Host-item" is
        translated
    10. View the record in the OPAC and confirm that the link is also translated
    11. Apply the patch
    12. Update the affected language:
        koha-translate --update sv-SE --dev kohadev
    13. Restart Koha (restart_all)
    14. Notice that the links are no longer translated
    15. Sign off
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1742893d5a69f0af36c79eb2be39ce66f405cd46
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jan 8 13:36:20 2024 +0000

    Bug 35686: (follow-up) Correct page heading
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Removed space before colon from "Update report :"
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5dbab835970efde42382616df28b0215aee7f2d8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jan 3 13:08:12 2024 +0000

    Bug 35686: Case missing from installer step 3 template title
    
    This patch adds a missing case to the display of the title on step 3 of
    the web installer. This resulted in an empty first part of the title:
    " > Web installer > Koha"
    
    To test, apply the patch and reset the database version from the command
    line in Koha Testing Docker:
    
    > koha-mysql kohadev
    > UPDATE systempreferences SET value = '23.1200002 WHERE variable = 'version';
    > quit
    > Restart all
    
    - Go to the staff interface. You should be taken to the web installer.
    - Log in to the web installer and proceed through until you get to the
      "Updating database structure" page.
    - Confirm that the page title is correct.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit abbacfca5ddc66f66008ebf37cd05fc3eec33929
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Dec 7 18:17:55 2023 +0000

    Bug 35517: Choose correct default header search tab according to permissions
    
    This patch adds some additional template logic to the header search form
    for the staff interface home page so that users with different
    permissions will see the correct tab in the header search form.
    
    To test, apply the patch and view the staff interface home page using a
    user with different permissions:
    
    - 'catalogue' and 'circulate'
      - Header should show circulation search
    - 'catalogue' and 'borrowers'
      - Header should show patron search
    - 'catalogue' only
      - Header should show catalog search
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 78b4fac242f2e4dd940aff0811abccf4aa093b1e
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jan 6 19:40:25 2024 +0000

    Bug 35602: Fix typo AutoMemberNum
    
    The correct spelling is autoMemberNum.
    
    To test:
    * Enable autoMemberNum system preference
    * Set cardnumber to mandatory in BorrowerMandatoryField
    * Add a new patron account
    * Verify correct spelling in hint below cardnumber input field
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 373a3c764c94348ae30299927982552f675f7752
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jan 6 20:27:51 2024 +0000

    Bug 35395: Update DefaultPatronSearchMethod system preference description
    
    This updates the system preference description of DefaultPatronSearchMethod
    so that it's clear that the preference applies to all patron
    searches, including patron module search and auto-completes.
    
    To test:
    * Search for DefaultPatronSearchMethod system preference in administration
    * Verify the setting is reflected in the filters of the patron search
    * Apply patch
    * Verify that the description now is now improved.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 32799f8e36fcadd14c080284b93f09cce235067e
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Thu Jan 11 12:59:12 2024 +0000

    Bug 35650: (QA follow-up) Add spans to errors for user restrictions
    
    This will ease translation.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4699fd0c2f4757443e47efa82421daa1f695f9c9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Dec 26 11:47:37 2023 -0300

    Bug 35650: (follow-up) Other cases found
    
    while editing files for the main patch, I noticed some tiny cases.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ba3130a88a26c96b133c1a709b1afea9828d6120
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Dec 26 10:53:07 2023 -0300

    Bug 35650: Standardize on 'Check the logs for details.'
    
    This patch makes the 'Check the logs..' messages more consistent across
    the codebase.
    
    To test:
    1. Run:
       $ git grep -e 'Check the logs\"' -e 'Check the logs<' -e 'Check the logs\.'
    => FAIL: Several forms show up
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: Empty result.
    4. Run:
       $ git grep -e 'Check the logs for details\.'
    => SUCCESS: Consisten results show
    5. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a18e4d0e6241d4a18ceb62b7543c89cddd74bb1c
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jan 6 18:21:43 2024 +0000

    Bug 35713: Remove outdated debian/docs/LEEME.Debian file
    
    This removes the LEEME.Debian README file from the docs
    directory. We don't even have an English README here as
    we usually refer to the wiki for installation instructions.
    It makes sense to remove it from the codebase.
    
    To test:
    * Verify that the file is removed
    * Verify that all references to the file have been removed as well
      Example: git grep LEEME
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 40d7a90bc576b8263daf7ee90cdd1055a08ba902
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 10 18:09:31 2024 +0000

    Bug 35757: (QA follow-up) Tidy
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f42741d32cfb8142984cffdf3cd7c7b2a3e794b3
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Jan 10 10:14:40 2024 +0000

    Bug 35757: Fix unit tests for external counter registry API
    
    This patch updates the unit tests for the external counter registry API used in the Usage Statistics module. The intent of the tests is to identify any changes in the external response that could lead to errors in Koha. To do this, the tests now compare the list of hash keys returned in the response with the current definition in Koha, and identifies any new fields that need to be added to the definition.
    
    Test plan:
    prove t/db_dependent/api/v1/erm_counter_registries.t
    prove t/db_dependent/api/v1/erm_sushi_services.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 520ac94242818032e7970f62d03caa926597be2e
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Jan 10 10:13:26 2024 +0000

    Bug 35757: Add new fields to api definitions
    
    The counter registry API has added a new field to both the counter registry and sushi service endpoints. This patch adds those new fields to the definitions.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e3ad57ea930402e8e741e73b5d5c269c7d27d5f1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jan 8 17:01:04 2024 +0000

    Bug 35584: (follow-up) Remove duplicate license entry
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4bb1b0e395c27b44041c311e9ca7b45dabe0e954
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Dec 22 12:33:00 2023 +0000

    Bug 35584: (QA follow-up):
    
    Typo fix: GreBox -> Greybox
    Capitalization fix: JavaScript case
    Order to match header fix: jsTree jQuery -> jQuery jsTree
    Capitalization fix: treetable -> Treetable capitalization
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2c342b3b314377a1e4e22da971f19b534f65196f
Author: David Nind <david@davidnind.com>
Date:   Wed Dec 20 20:15:01 2023 +0000

    Bug 35584: (follow-up) Add license information and fix sort order
    
    Add license information and links. Put in alphabetical order.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3ccf5843d26290a74ab3e2b1410aa2396bdb6aa3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Dec 20 13:04:02 2023 +0000

    Bug 35584: Add missing licenses to about page
    
    This patch adds license information to the about page which was missing
    for several JavaScript libraries. The patch also makes a minor change to
    CSS to improve alignment of content in the licenses tab.
    
    One library, vis-timeline-graph2d.min.js, lacked the correct version
    information in the source. This information has been added.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    - Go to the about page and open the "Licenses" tab.
    - Confirm that the information looks correct.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cd3224d558bf685ddf312a3b09856d0ca0b63cbc
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jan 3 19:46:15 2024 +0000

    Bug 35293: Unit test
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 26e7d0c9b392286c784a90fa75024ee1232f2e1e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jan 4 19:03:11 2024 +0000

    Bug 35293: (follow-up) Handle all rules as well
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a0f83767a81a1593f21f152d63fb493c14b8c85f
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Sun Nov 12 21:26:42 2023 +0000

    Bug 35293: Re-implement bug 30407 functionality
    
    To test:
    1. Set a book items notforloan status as -1 and set the AllowNotForLoanOverride system preference to 'Allow'
    2. Add the following lines to UpdateNotForLoanStatusOnCheckin (the
    formatting and indentation is important to keep):
    
    BK:
     -1: ONLYMESSAGE
    
    3. Check a book item out for patron.
    4. Check book item in.
    => Description of notforloan status should be displayed under 'Check in message'.
    => Confirm notforloan status HAS changed.
    
    5. Apply patch and update database if needed
    6. Set book items notforloan status as -1 (or create new one)
    7. Check book item out for patron.
    8. Check book item in.
    => Description of notforloan status should be displayed under 'Check in
    message'.
    => Confirm notforloan status HAS NOT changed.
    
    Also prove t/db_dependent/Circulation/issue.t
    
    Sponsored-by: Catalyst IT, New Zealand
    Signed-off-by: Anneli Österman <anneli.osterman@koha-suomi.fi>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 16c199e3f441112a961acf207ebed02bbefc47ec
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Sun Nov 12 21:23:32 2023 +0000

    Bug 35293: Add ONLYMESSAGE back into UpdateNotForLoanStatusOnCheckin syspref description
    
    Sponsored-by: Catalyst IT, New Zealand
    Signed-off-by: Anneli Österman <anneli.osterman@koha-suomi.fi>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3270d321912823a5621ccff73eb1609a1c852145
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Dec 19 10:28:30 2023 +0100

    Bug 35598: Fix selenium/authentication_2fa.t random failure
    
    Jenkins is failing with
    koha_1       | STRACE:  /usr/share/perl5/Try/Tiny.pm:123 in Selenium::Remote::Driver::catch {...}
    koha_1       |  /usr/share/perl5/Selenium/Remote/Driver.pm:361 in Try::Tiny::try
    koha_1       |  (eval 582):1 in Selenium::Remote::Driver::__ANON__
    koha_1       |  (eval 584):2 in Selenium::Remote::Driver::__ANON__
    koha_1       |  (eval 556):17 in Selenium::Remote::Driver::_execute_command
    koha_1       |  /usr/share/perl5/Selenium/Remote/WebElement.pm:125 in Selenium::Remote::WebElement::_execute_command
    koha_1       |  t/db_dependent/selenium/authentication_2fa.t:276 in Selenium::Remote::WebElement::send_keys
    koha_1       |  /usr/share/perl/5.32/Test/Builder.pm:334 in main::__ANON__
    koha_1       |  /usr/share/perl/5.32/Test/Builder.pm:334 in (eval)
    koha_1       |  /usr/share/perl/5.32/Test/More.pm:809 in Test::Builder::subtest
    koha_1       |  t/db_dependent/selenium/authentication_2fa.t:294 in Test::More::subtest
    koha_1       |
    selenium_1   | 1702911648831    Marionette      INFO    Stopped listening on port 41385
    selenium_1   | JavaScript error: resource:///modules/Interactions.jsm, line 230: NS_ERROR_FAILURE: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsIUserIdleService.removeIdleObserver]
    selenium_1   | 15:00:49.452 INFO [ActiveSessions$1.onStop] - Removing session c3461b22-7a80-4b56-b177-653a53cc2651 (org.openqa.selenium.firefox.GeckoDriverService)
    koha_1       |     # Looks like you planned 7 tests but ran 3.
    koha_1       |
    koha_1       | #   Failed test 'Enforce 2FA setup on first login'
    koha_1       | #   at t/db_dependent/selenium/authentication_2fa.t line 294.
    koha_1       | Error while executing command: element not interactable: Element <input id="pin_code" name="pin_code" type="text"> is not reachable by keyboard at /usr/share/perl5/Selenium/Remote/Driver.pm line 411.
    
    The error is: "Element <input id="pin_code" name="pin_code" type="text"> is not reachable by keyboard"
    
    A guess is that the input is either 1. outside of the viewport, or 2. not
    displayed yet.
    
    1. We are hidding #registration-form then show it when we retrieved the
       info (after POST /api/v1/auth/two-factor/registration)
    2. Couldn't there be a race condition?
    In auth.tt
    284                     success: function (data) {
    292                         $("#registration-form").show();
    And in the selenium test:
    $s->wait_for_ajax; # There is an ajax request to populate the qr_code and the secret
    Not sure this wait_for_ajax is waiting for the end of success, I don't
    think so.
    
    This patch is supposed to fix both theories.
    
    Test plan:
    0. Do not apply the patch
    1. Edit auth.tt and sleep 1 second before showing the form:
    290                         const sleep = ms => new Promise(r => setTimeout(r, ms));
    291                         await sleep(1000);
    292                         $("#registration-form").show();
    
    You will also need to replace the following line (284):
      success: function (data) {
    with
      success: async function (data) {
    
    2. prove t/db_dependent/selenium/authentication_2fa.t
    => "is not reachable by keyboard" error!
    
    3. Apply the patch, keep the sleep
    
    4. prove t/db_dependent/selenium/authentication_2fa.t
    => Tests are passing
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Edit (tcohen): Tidied a bit to clear complaints
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3df1cb33c277925b689b1e45c736ea8532bffdff
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Jan 5 09:04:33 2024 +0100

    Bug 35070: Fix get_enabled_plugins when database is not created yet
    
    Koha::Plugins::get_enabled_plugins is called by Koha::Plugins::call
    which is called by C4::Templates->new, which is used in the web
    installer when the database is not created yet
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 520c84756a2097927ef868630d40035198fbc5f6
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Jan 2 11:15:39 2024 +0000

    Bug 35587: (QA follow-up): QA script tidy
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 930ad0178d41483672ec52fc8bedc94fe0dacc5b
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Dec 20 02:37:48 2023 +0000

    Bug 35587: Do not trigger transfer if lost item returned and BlockReturnOfLostItems enabled
    
    This fixes current buggy behaviour - when BlockReturnOfLostItems is enabled, no transfer should be triggered and the lost status should be retained.
    
    To test:
    
    1. Go to Koha Administration -> Global system preferences
    2. Set the BlockReturnOfLostItems system preference to Block
    3. Enable the AutomaticItemReturn system preference (this is simply to make testing a bit faster)
    4. Take note of your logged in library
    5. Search for an item where the home library is NOT the same as your logged in library
    6. Edit this item and give it a lost status
    7. Check in the item
    8. Notice the item is returned and a transfer is automatically triggered
    9. If you go to the item record page, the lost status has been remove
    
    10. Apply the patch and restart services
    
    11. Edit the item again and give it a lost status. This will also cancel the transfer
    12. Check in the item
    13. Confirm the transfer is NOT triggered and the lost status is retained as expected.
    14. Go back to system preferences and disable the BlockReturnOfLostItems system preference (set to "Don't block")
    15. Check in the item
    16. Confirm the transfer is triggered and lost status is removed
    
    17. Confirm tests pass
    
    prove t/db_dependent/Circulation/Returns.t
    prove t/db_dependent/Circulation/Branch.t
    
    Sponsored-by: Pymble Ladies' College
    Signed-off-by: Esther <esther@bywatersolutions.com>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1f16ac11e228770872b0d2f40538e7816c03940c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jan 4 16:25:35 2024 +0000

    Bug 35696: Fix regression caused by bug 33167
    
    A case was missed when switching from item.transfer.field to just
    transfer.field.
    
    This meant that the daterequested date wasn't getting filled properly in
    the UI.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9149dc4d06286779670013a34e005a7c3f90f0b2
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Dec 21 16:12:22 2023 +0000

    Bug 35629: Remove redundant code
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit dbc206082204ca99a8285479e6fe2aec94eb4dcc
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Dec 19 19:07:41 2023 +0000

    Bug 34900: (follow-up) Add version information to more entries
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4cb2f7f2dbec601ea9e899bc85853c0c29ed2a67
Author: David Nind <david@davidnind.com>
Date:   Sun Dec 3 19:18:42 2023 +0000

    Bug 34900: (follow-up) List alphabetically and tidy ups
    
    Listed in alphabetical order (except for Koha, which is listed
    at the start).
    
    Tidy ups and consistency changes:
    - end of each entry: remove full stops
    - separator between software and license: use a colon
    - headings for software/library name: use sentence case
      unless a noun, abbreviation, or the actual software name
    - http and https: use https where site uses it
    - URLs: update where required
    - license names: use consistent full names with title case
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 99e57919946a0693f5ddeb5fd2e40a6044c8835f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Dec 1 13:05:58 2023 +0000

    Bug 34900: (follow-up) Correct last entry
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 84f18c3cc2815c7fb80a0e1e8f2b39adbdd7f17d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 26 10:35:12 2023 +0000

    Bug 34900: Simplify text of about page license information
    
    This patch simplifies the language describing third-party libraries and
    their licenses so that translation are not so complicated.
    
    The patch also removes information about some assets which are no longer
    part of Koha.
    
    The license information now lists only the library name, version (if
    possible) and license.
    
    To test, apply the patch and go to the about page in the staff
    interface. Open the "Licenses" tab and check the content.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ed37c7e68d350a78b30080b2b4673083a471c50e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Dec 5 14:19:37 2023 +0100

    Bug 35477: Show a warning when non-existent items are added to the waiting list
    
    Only messages "X new items added" or "No items added" were displayed.
    With this patch we will display:
    A warning with "No items added"
    A warning with "X new items added. Y items not found." when some items
    have not been added
    A messages "X new items added" when everything went well
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c3d78bc35aa6e46ff27a6c622deb497c134e913f
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Thu Jan 4 15:35:46 2024 +0000

    Bug 35070: (QA follow-up) Fix missing TT filter
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 2233c230b2dc01dfd4e3624ba846cad252988d0e
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Mon Dec 18 08:36:12 2023 +0100

    Bug 35070: Add test verifying plugins cannot override core templates
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 21fd8644163a171374f6f1a361b452c72eb69b26
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Dec 15 16:58:00 2023 -0300

    Bug 35070: Tidy
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5047e0761cbb975c262c96cf395e6d6285fdb3c1
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Wed Oct 18 16:24:52 2023 +0200

    Bug 35070: Add plugin hook template_include_paths
    
    It allows to add paths to Template::Toolkit's INCLUDE_PATH option
    
    http://template-toolkit.org/docs/manual/Config.html#section_INCLUDE_PATH
    
    Test plan:
    1. Install the modified kitchen sink plugin:
    
        git clone --branch template-include-paths \
        https://github.com/jajm/dev-koha-plugin-kitchen-sink.git
    
    2. Run misc/devel/install_plugins.pl
    3. Restart memcached and koha
    4. Go to Administration -> Manage Plugins
    5. Run the KitchenSink plugin's tool
    6. Click on "Schedule greeting"
    7. Go to Administration -> Manage jobs
    8. If you don't see any jobs, uncheck "Current jobs only"
    9. You should see a job of type "Unknown job type
       'plugin_kitchensink_greeter". Click on the "View" button
    10. Under the Report section you should see "This is the report block"
    11. Under the Detailed messages section you should see "This is the
        detail block"
    12. Open the browser console, you should see a message "This is the js
        block"
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit bc8a9b36ab7d6e796685b9fd89807252a3a603fe
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jan 4 09:54:00 2024 +0100

    Bug 35698: (bug 32162 follow-up) fix bug number in db rev
    
    Should be 32162, not 31162.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 54b07ffc1808082aee868a01ce4d670438309996
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Dec 28 10:16:33 2023 -0300

    Bug 35658: Fix misaligned collectionFormat in patron_holds.yaml
    
    This patch fixes a silly typo.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 000d1d414a73b78445f5b0a187cc2f2a4369dc26
Author: Michał Kula <148193449+mkibp@users.noreply.github.com>
Date:   Wed Dec 20 16:00:00 2023 +0100

    Bug 35618: Remove deprecated parameter "type" from showelastic.pl page
    
    This is a follow-up to Bug 33353. Types are gone in ES8 and deprecated
    in ES7. Support for ES6 is already dropped in Koha master.
    
    The parameter has to be removed, otherwise an exception is thrown with
    ES8 (which is listed as officially supported by Koha now).
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 002e02710b4ea0655ca445acda5c89e3ccd66151
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Dec 22 14:18:12 2023 +0100

    Bug 35588: Tidy up t/db_dependent/AuthorisedValues.t
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f53ebe874e74258e1465bc4ead3fdcd95008ca98
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon Dec 18 00:35:53 2023 +0000

    Bug 35588: Scope authorised value desc lookup according to field/subfield
    
    This patch ensures that the authorised value descriptions looked up
    are for the correct field/subfield designated in the CSV profile.
    
    Test plan:
    0. Do not apply the patch yet!
    1. Go to http://localhost:8081/cgi-bin/koha/tools/csv-profiles.pl
    2. Add a CSV profile with the default values and using the following
    for the "Profile MARC fields":
    000|001|003|005|006|007|008|010|015|016|020|022|040|050|082|100|110|
    111|130|240|243|245|246|247|250|260|300|336|337|338|440|490|500|501|
    505|520|530|600|610|611|630|648|650|651|690|700|710|711|856|887|942|995
    
    3. Create a new List
    4. Add all the database's bibs to that list using SQL like the following (where the shelfnumber equals the number for your list):
    insert into virtualshelfcontents (shelfnumber,biblionumber,borrowernumber) select 1,biblionumber,51 from biblio;
    
    5. Go to that list in the staff interface
    6. Download that list using your CSV profile
    
    7. Apply the patch
    8. koha-plack --reload kohadev
    
    9. Download that list using your CSV profile
    10. Note that the output is a little slower, but still quick enough.
    11. Note that the output is a bit different. For records like "Gairm",
    the output will end in "1" instead of "Yes". This is correct, because
    this subfield isn't an authorised value!!!
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ca754a2c5e8508ee8a3399fcbc8954aa23eda19b
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon Dec 18 00:11:32 2023 +0000

    Bug 35579: Add unit test
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 78c0e8df8da008c87f28d9432e16790ce07eabc1
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Dec 15 06:02:17 2023 +0000

    Bug 35579: Cache authorised value lookup by MARC field
    
    This patch adds a "get_descriptions_by_marc_field" method
    which caches AuthorisedValue descriptions when searched by
    MARC field, which is used when exporting MARC to CSV.
    
    Test plan:
    0. Do not apply the patch yet!
    1. Go to http://localhost:8081/cgi-bin/koha/tools/csv-profiles.pl
    2. Add a CSV profile with the default values and using the following for the "Profile MARC fields":
    000|001|003|005|006|007|008|010|015|016|020|022|040|050|082|100|110|111|130|240|243|245|246|247|250|260|300|336|337|338|440|490|500|501|505|520|530|600|610|611|630|648|650|651|690|700|710|711|856|887|942|995|952|952$c
    3. Create a new List
    4. Add all the database's bibs to that list using SQL like the following (where the shelfnumber equals the number for your list):
    insert into virtualshelfcontents (shelfnumber,biblionumber,borrowernumber) select 1,biblionumber,51 from biblio;
    5. Go to that list in the staff interface
    6. Download that list using your CSV profile
    7. Apply the patch
    8. koha-plack --reload kohadev
    9. Download that list using your CSV profile
    10. Note that the output is the same, but that the output completes much more quickly after applying the patch
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 47ffdaf6f4bf14faec49f64f9ee7d937584b2b20
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Dec 21 15:22:42 2023 +0100

    Bug 31694: Add missing TT filters
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e9c7f84896fe158894c86a682ef110723e5a4a44
Author: Kevin Carnes <kevin.carnes@ub.lu.se>
Date:   Thu Apr 13 15:20:02 2023 +0200

    Bug 31694: (follow-up) Use values for operations to avoid translation issues
    
        To test:
        * Try adding a preset rule that has an operation with different translations
          for the column and the pull down (e.g. Outrepasser for fr-CA)
        * Without the patch it appears as Custom (e.g. Personnalisé)
        * With the patch it appears correctly (e.g. Outrepasser)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Jan Kissig <jkissig@th-wildau.de>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 35ddacf397c6d2b7bd58b7adf9606fdeb24ef681
Author: Shi Yao Wang <shi-yao.wang@inlibro.com>
Date:   Fri Dec 2 16:06:35 2022 -0500

    Bug 31694: (follow-up) Fix preset display issue
    
    Preset column should now display the right preset.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Jan Kissig <jkissig@th-wildau.de>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b1cd199aaa37e5c055f772b10b6015c6c3374fed
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Oct 24 22:40:28 2022 +0000

    Bug 31694: (follow-up) Further improve translatability
    
    To test:
    * Add rules fo different modules and with different settings
    * Verify the saved module description for a saved rule matches the pull down
    * Verify the saved filter matches the pull downs (especially for source and patron category)
    
    Also:
    * Renames 'User category' to 'Patron category'
    * Remove some values from translations, that shouldn't be translated, like value attributs for options.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Jan Kissig <jkissig@th-wildau.de>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c5a98fe574d3b50382d5e0abaf1313b9317ad88f
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed Oct 5 15:48:46 2022 -0400

    Bug 31694: MARC overlay rules presets don't change anything if presets are translated
    
    This patch corrects option value names in MARC overlay rules to prevent
    them from being translated.
    
    To test:
    1. Install a new language
    1.1. In a terminal, run the following commands
    gulp po:update
    cd misc/translator
    ./translate install xx-XX
    1.2. Go to Administration > Global system preferences
    1.3. Search for language
    1.4. In the language syspref check the box for the language you just installed
    1.5. Save
    2. In the staff interface in English, go to Administration > Record
    overlay rules
    3. In the column 'Preset' try the various options, note that the
    'Added', 'Appended', 'Removed', and 'Deleted' settings change depending
    on the chosen preset
    4. Change the interface language
    5. Redo step 3, notice that if the preset name is translated, the other
    settings don't change
    6. Apply patch
    7. Redo step 3, the presets should now change the settings
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Jan Kissig <jkissig@th-wildau.de>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f816027ea15278c7ed4b738915e963e22ee5c2e6
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Wed Dec 27 17:52:55 2023 +0000

    Bug 28012: (QA follow-up) Use form validation for numbering patterns
    
    Activates standard validation and error messages. Converts from
    pattern check to digits class for "display order" field.
    
    To test:
    * Compare error message when leaving required fields empty
    * Compare error message when entering wrong/false data in display order
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 49138a6df7ee69eb4e7dd35858eb7f1dc8625bae
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Dec 22 15:24:04 2023 +0000

    Bug 28012: (QA follow-up) Add numeric imput mode to display order field
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a69b5e6ee99478e730be574178c30f950a09532e
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Sat Sep 3 14:08:50 2022 +0300

    Bug 28012: Creating numbering pattern: mark mandatory fields required
    
    If any of these fields were missing, notably the Numbering formula
    then saving the new numbering pattern silently failed, it didn't give
    any error but it didn't save any new pattern either.
    
    Note that there is a plan to make description field optional, so even
    if it currently is mandatory on the DB level we leave it optional
    here (and due to people using production DB's in non-strict mode which
    allows this to be optional).
    
    To test:
      1) After applying this patch make sure all the 3 fields must be
      filled in
      /cgi-bin/koha/serials/subscription-numberpatterns.pl?op=new
      page and it cannot be saved without those.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 97aab6a98e05ed989e7cc719450d274c80e34bb9
Author: Joonas Kylmälä <joonas.kylmala@iki.fi>
Date:   Sat Sep 3 13:37:31 2022 +0300

    Bug 28012: Use definedness test instead of bool when checking whether to null fields
    
    Saving a new numbering pattern didn't work without having to fill all
    the fields, even those that are not mandatory.
    
    To test:
     1) Go to /cgi-bin/koha/serials/subscription-numberpatterns.pl
        and try creating a new pattern, notice that only Name and
        Description are mandatory after applying this patch
     2) Make sure editing existing numbering patterns still works
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fa4fd2005eba590720c2f2c21de6296f8053ca4d
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Wed Dec 27 17:06:13 2023 +0000

    Bug 31297: DBIC schema
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cbd0cd86bb49043c13a8d14236c8447d5339ab2f
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Wed Dec 27 17:00:04 2023 +0000

    Bug 31297: DBRev 23.12.00.002
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f9b57c5342641e1b8efa68aa202857edadb8f605
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Dec 22 14:52:04 2023 +0000

    Bug 31297: Allow null value for description in subscription_numberpatterns
    
    To test:
    1 - Go to Serials
    2 - Add a enw subscription
    3 - Select Vendor and record, click next
    4 - Select Numbring pattern: Number, or any to populate forms
    4 - Click 'show advanced pattern'
    5 - 'Modify pattern'
    6 - Add a new name
    7 - 'Save as new pattern'
    8 - Nothin happens
    9 - Check logs:
        C4::Serials::Numberpattern::AddSubscriptionNumberpattern(): DBI Exception: DBD::mysql::st execute failed: Field 'description' doesn't have a default value at /kohadevbox/koha/serials/create-numberpattern.pl line 58
    10 - Apply patch
    11 - Update database
    12 - Restart all
    13 - Click save again
    14 - Success!
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Removed wrong 'out' from atomic update file.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f7ea515bcc37fc7c2b93683d6cf15c2fa6018722
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Dec 22 10:29:59 2023 +0100

    Bug 35557: Remove references to unused PREF_LocalCoverImages
    
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4e66aa8065803fb2829db988ca1f4c71cc641137
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Dec 13 10:32:12 2023 +0100

    Bug 35557: Remove LoadResultsCovers
    
    The JS function LoadResultsCovers is not used from the Staff interface.
    
    It is supposed to load the local cover images in JS but actually we are embedding the thumbnail in the img tag.
    
    Test plan:
    Confirm that LoadResultsCovers was called but had no effect.
    Note that the selector ^local-thumbnail only exists in shelfbrowser.inc
    
    but results.js is only used from results.tt (not shelfbrowser.inc)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5961e5c2a3c9c46461fe563b85b0d94bd0df195c
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Dec 12 10:27:07 2023 -0500

    Bug 35547: Show public "staff only" lists in addbybiblionumber.pl
    
    When adding an item to a list from catalogue/detail.pl, we can see the
    latest 10  public lists. If all those lists are set as "staff only" for
    "Allow changes to contents from" they will not show up in the
    addbybiblionumber.pl popup. This is because the query in the popup does
    not look for "staff only" lists while the "Add to list" button does.
    
    Test plan:
    1) Create 11 "staff only" lists as staff member A
    2) Log in as staff member B
    3) Find a record, click the "Add to list" button, note you can see lists
       2 through 11 here
    4) In the pulldown, choose the "More lists" option
    5) Note those lists are not visible in the "Choose list" pulldown under
       "Select an existing list"
    6) Apply this patch
    7) Restart all the things!
    8) Click the "More lists" option again
    9) Those lists should now be in the pulldown!
    
    Signed-off-by: sabrina <kiehl@mpis.mpg.de>
    Signed-off-by: Mikko Liimatainen <mikko.liimatainen@turku.fi>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 46b0b41e09a6ad29b5fce8b56e08dd3922cf394b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Dec 20 16:50:40 2023 +0000

    Bug 35619: Fix validation error alignment in change password form
    
    Bug 31829 made a change to the change password form in the staff
    interface to accommodate a gap in the CSS following the staff interface
    redesign. This gap has been fixed, so we don't need a double class on
    the fieldset.
    
    With this change, the "hint" div can also be put back into place.
    
    To test, apply the patch and locate a patron record in the staff
    interface.
    
     - Click the "Change password" button on the patron detail page.
     - Confirm that the form layout looks correct.
     - Enter mismatched passwords in the "New password" and "Confirm new
       password" fields and click "Save"
       - The validation error message should be aligned to the right of the
         input field.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fe0e638b29e1084156a39886336e205c53aef60c
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Dec 10 15:10:34 2023 +0000

    Bug 35529: Avoid 'click' in link in library administration
    
    It's not necessary to label a link with 'click', it being
    a link and being formatted as such is enough.
    
    To test:
    * Go to administration > libraries
    * Edit any library
    * Verify link texts for UserCSS and UserJS
      * Click to edit
      * Click to collapse
    * Apply patch, restart all
    * Verify links have been updated, click removed
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Julian Maurice <julian.maurice@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7375d82c408ad6963cf3f3cae060b9376ffca91a
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Dec 1 02:36:56 2023 +0000

    Bug 35455: Remove = in ICU for indexing/searching
    
    This change more closely aligns ICU and CHR so that ICU also
    removes the = character. This fixes issues in ICU when searching
    with a : which gets transformed into a =. Without this change,
    the Analytics features won't work for titles with a colon in them.
    
    Test plan:
    0. Apply the patch and import bibs from Bugzilla (using Staged MARC tools)
    1. cp ./etc/zebradb/etc/phrases-icu.xml /etc/koha/zebradb/etc/phrases-icu.xml
    2. cp ./etc/zebradb/etc/words-icu.xml /etc/koha/zebradb/etc/words-icu.xml
    3. vi /etc/koha/zebradb/etc/default.idx
    Change "charmap word-phrase-utf.chr" to "icuchain words-icu.xml" for "index w"
    and "icuchain phrases-icu.xml" for "index p"
    4. koha-zebra --stop kohadev
    5. pkill zebrasrv
    6. koha-zebra --start kohadev
    7. koha-rebuild-zebra -a -b -f -v kohadev
    
    8. Search for "Awesome title" and open the detail page
    9. Note that the "Analytics: Show analytics" line shows up
    10. Click that link
    11. Note that it opens the "Cool article" record and it displays
    "In: Awesome title: awesome subtitle"
    12. Click that link
    13. Note that it opens the "Awesome title" record
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 49f30ad6ed5f36a6c2e570ab52b8ea2ae7ca8f19
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Dec 5 17:09:26 2023 +0000

    Bug 35493: Do not show housebound roles as collapsible unless the housebound module is on
    
    To test:
    1. HouseboundModule - disabled
    2. CollapseFieldsPatronAddForm, add 'Housebound roles'
    3. Edit/create a patron.
    4. Notice the useless Housebound roles link at the top of the page
    5. APPLY PATCH
    6. Try 1 - 3 again, this time no Housebound roles at the top ( Show collapsed fields )
    7. Turn on HouseboundModule and make sure it now shows
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e72e5f5d6ad3f4665c5f0943d13557798ef3b417
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Tue Dec 5 09:51:48 2023 -0500

    Bug 35463: More preservation manual links
    
    This patch adds some missing links from the preservation module to the manual.
    
    To test:
    1. Go to Preservation > Trains
    2. Click on a train name
       --> You are brought to the Show train section of the Preservation chapter of the manual
    3. Click Edit next to an item
       --> You are brought to the Add items section of the Preservation chapter of the manual (there is no section specific to editing items, but the form to edit is the same as the form to add)
    4. Go back to the trains list, and click the Edit button next to one of the trains
       --> You are brought to the Trains section of the Preservation chapter of the manual (there is no section specific to editing trains yet)
    
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 81212d001533d6ff1cd7667b17c6d07c456e2ddf
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Mon Dec 4 17:37:39 2023 -0500

    Bug 35463: perltidy formatting corrections
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d20410a1cc8839e269dda091b8e73077aa5bb036
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Mon Dec 4 17:24:14 2023 -0500

    Bug 35463: Open erm and preservation help in new tab
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fed8fc8618129dd31495d9d6ba283eff829db2ea
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Fri Dec 1 10:36:52 2023 -0500

    Bug 35463: Link preservation module help to the manual
    
    This patch links the various pages of the preservation module to each
    specific section of the preservation module chapter in the manual.
    
    To test:
    1.  Enable the PreservationModule system preference
    2.  Go to the Preservation module
    3.  Click "help" in the top right corner
        --> You are brought to the manual, but not a specific page
    4.  Apply patch
    5.  Click "Help" in the top right corner
        --> You are brought to the Preservation chapter of the manual
    6.  Click "Settings"
    7.  Click "Help" in the top right corner
        --> You are brought to the Settings section of the Preservation chapter of the manual
    8.  Choose a not for loan status for items added to the waiting list (the mandatory field) and submit
    9.  Click "Add a new processing"
    10. Click "Help" in the top right corner
        --> You are brought to the Add a new processing section of the Preservation chapter of the manual
    11. Fill out the form to create the processing and submit
    12. Click "Edit this processing"
    13. Click "Help" in the top right corner
        --> You are brought to the Add a new processing section of the Preservation chapter of the manual (there is no edit a processing section)
    14.  Click "Waiting list"
    15. Click "Help" in the top right corner
        --> You are brought to the Waiting list section of the Preservation chapter of the manual
    16. Add items to the waiting list
    17. Click "Trains"
    18. Click "Help" in the top right corner
        --> You are brought to the Trains section of the Preservation chapter of the manual
    19. Click "New train"
    20. Click "Help" in the top right corner
        --> You are brought to the New train section of the Preservation chapter of the manual
    21. Fill out the form to create a new train and submit
    22. Click "Add items"
    23. Click "Help" in the top right corner
        --> You are brought to the Add items section of the Preservation chapter of the manual
    
    24. Also check ERM help links to make sure nothing is broken
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5cd21f1139269f5e045d759c31ee98a1ad0915cf
Author: David Nind <david@davidnind.com>
Date:   Wed Aug 30 00:15:26 2023 +0000

    Bug 34644: (follow-up) Additional edits to description
    
    Linked system preference in description to cross reference, and
    and removed the spaces in the bracketed text.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 341b90b2eefb62a8f2d776f204221083292c2b86
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Aug 29 14:20:19 2023 -0400

    Bug 34644: replacementprice is support by MarcFieldsToOrder but is not listed
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 61e8073b020746d797a14466cd78b963500bfeb0
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Aug 29 13:53:16 2023 -0400

    Bug 34644: Improve readability of sysprefs
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 884039bd5af43ffc83aaf1ef93500c6ab56efc2a
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Aug 29 17:48:30 2023 +0000

    Bug 34644: Add clarifying text to sysprefs to indicate that MarcFieldsToOrder is a fallback to MarcItemFieldsToOrder
    
    Clarify that fields will fall back to MarcFieldsToOrder from MarcItemFieldsToOrder.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 465fc4c8baea98dba18ade40bd002e47783313e3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Nov 28 15:03:07 2023 +0000

    Bug 35417: Update breadcrumbs and page titles for vendor issues
    
    This patch updates the vendor issues template so that title and
    breadcrumbs follow the same pattern on other updated templates:
    Translatable strings in the title and breadcrumbs using the template
    WRAPPER.
    
    To test, apply the patch and go to Acquisitions.
    
    - Search for a vendor and view the details.
    - Click the "Isssues" link in the sidebar.
    - Check that the page title and breadcrumbs are correct in each
      variation of the page:
      - The main page
      - New vendor issue
      - Modify vendor issue
      - Issue deletion confirmation
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6c8beb2f2ed566dc2e6645d99f2ef0e80eaf726b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Dec 19 11:45:59 2023 +0100

    Bug 35600: Prevent checkouts table to flicker
    
    The checkouts table is displayed in the DOM then hidden in JS, then we show it if the cookie is set.
    
    This patch makes the table hidden by default, and show it if/when needed
    
    Test plan:
    Check an item out, see the checkouts list view
    Play with "Always show checkouts automatically", refresh the page
    => UI should behave better than before this patch
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d6314d32246a7e967e78f1427c338a3e13823617
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Dec 18 16:22:08 2023 +0000

    Bug 35592: Fix closing tag in bookings alert
    
    To test:
    1 - View a record details page for a record with items
    2 - Click on the 'Items' tab
    3 - Change 'Bookable' to 'Yes' and update for an item
    4 - View the details page - place a booking
    5 - Checkout the item to the patron it is booked for
    6 - Note the alert shows, but encompasses the whole page
    7 - Apply patch
    8 - Check in the item
    9 - Checkout the item again
    10 - Note the alert shows above the checkouts page as expected
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4e42f1182d14dd0658c984930c11ea3c952b8051
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Dec 5 16:27:44 2023 +0000

    Bug 35491: Add logging to RevertWaitingStatus
    
    This patch simply adds a logaction line to RevertWaitingStatus
    
    To test:
    1 - Enable HoldsLog
    2 - Place a hold
    3 - Fill the hold
    4 - Revert the waiting status
    5 - Note there is no action log added
    6 - Apply patch
    7 - Repeat 2-4
    8 - Confirm you now have a MODIFY action logged for the reversion
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f6f2d1ae41ef83629cb25c684d261f98238fe051
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri May 26 15:42:08 2023 +0000

    Bug 33847: Database update replaces undefined rules with defaults rather than the value that would be used
    
    Bug 29012 introduces a database update that sets the default values for rules that are required but undefined. This functionally changes the results of the circulation rules.
    
    Instead, this update should find value that is being used for that rule combo and use that as the rule value, only using the default in the case that the derived rule doesn't exist or has a null value.
    
    Test Plan:
    1) Check out Koha 22.05.05
    2) Create a default all/all/all rule, 3 other rules. Ensure they all have Loan period set to 7, with one of the non-default rules having a Loan period of 14.
    3) Delete all but one of the non-default rules with the following query:
       Delete from circulation_rules where rule_name  = 'issuelength' and ( rule_value != 14 and not ( branchcode is null and categorycode is null and itemtype is null ) ) limit 2;
    4) Check out 254f721320
    5) Run updatedatabase.pl and restart
    6) Note the rules were recreated with the value 0
    7) Repeat steps 1-4
    8) Apply this patch
    9) If you're using the same database, set the version to 22.0600023 and restart
    10) Run updatedatabase.pl
    11) Note the rules were recreated, but the value is the derived value from the all/all/all rule!
    
    Signed-off-by: Kevin Carnes <kevin.carnes@ub.lu.se>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    
    Bug 33847: Rewrite to use SQL
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] Squashed, and added reference to new bug too
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 12e90c8b7d08a927c5fbc2c07792f78d6880cde2
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Sat Nov 11 11:06:32 2023 +0000

    Bug 30287: (follow-up) Make unit test more reliable in ktd
    
    This patch mocks NoticeCSS earlier to ensure we're not inadvertantly
    failing due to a local setup in ktd having added to the preference.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c260f4a374c3e3fcb335e997842ffb2fa1bd444a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Nov 8 09:38:18 2023 +0000

    Bug 30287: (follow-up) Unit test for html_content
    
    This patch adds a unit test for the new `html_content` method introduced
    to Koha::Notice::Template in the previous patch.
    
    Test
    1) Run the new unit test ;P
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a09986ea51eb0104b006fac40d1dc7e2f6cdeeab
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Nov 6 14:00:21 2023 +0000

    Bug 30287: (follow-up) Add content wrap matching send time
    
    This patch adds a new method to the Koha::Notice::Message class to wrap
    content in the same way we currently do at email send time. We then
    update the notice preview to use this method so we're embedding
    NoticeCSS into that iframe. This means the generated preview should now
    exactly match how your notice will display in email clients including
    any CSS you may have placed within NoticeCSS.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Fixed typo in POD of html_content
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f83b9ab1ffc7e703804bdc52f30e1994984180b9
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Nov 6 12:50:05 2023 +0000

    Bug 30287: Conditionally render notice preview
    
    This patch adds conditional formatting based on whether the notice was
    generated from an HTML template or a plaintext one. We simply drop the
    'html_line_break' filter for the case where the notice should already be
    html formatted.
    
    I was tempted to replace the html_line_break for plaintext formatted
    notices too as I believe this closer resembles how we actually output
    such generated notices.. but I decided that should be for another bug.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8bb8282d6868b458237fe2b0638dc810c116077b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 15 11:44:37 2023 +0100

    Bug 35309: Remove DT's fnSetFilteringDelay
    
    On bug 35284 we added the delay on the column filters using dt's
    throttle builtin function.
    
    From doc:
    https://datatables.net/plug-ins/api/fnSetFilteringDelay
    """
    Please note that this plug-in has been deprecated and the dt-init searchDelay option in DataTables 1.10 should now be used. This plug-in will not operate with v1.10+.
    
    Test plan:
    Note that column filtering still work as before (test on different
    tables, see bug 35284 for the list)
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9e789a74c00af8d068be668fc445e0205e38c64c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Nov 1 15:39:30 2023 +0000

    Bug 35216: Rename error to issuingimpossible
    
    Test plan:
    1 - Apply two patches
    2 - Confirm code changes make sense
    3 - Confirm you can check out items
    4 - Confirm checkout blocks still block
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 971b2aefd2fac15fc168bc17d7b0482fc5163e84
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Nov 1 15:37:54 2023 +0000

    Bug 35216: Rename question to needsconfirmation
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ac02c1d2adc883cc6ff6b749c271cb165d337436
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Nov 27 16:12:41 2023 +0100

    Bug 35405: Remove noise from MARC::Record in SearchAuthorities
    
    We are calling ->field with an undef parameter.
    MARC::Record does not like that and says:
      Use of uninitialized value $tag in hash element at /usr/share/perl5/MARC/Record.pm line 202.
    For now, a fix at our side.
    
    Test plan:
    Run SearchAuthorities without passing an authtypecode.
    Without this patch, it results in a warning per hit.
    With this patch, the noise should be gone.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f3bb88505245228d97a4e39612b17a688df64a79
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Dec 6 10:03:45 2023 +0000

    Bug 35204: Prevent an expired password from throwing a 500 error
    
    Currently when a patron with an expired password is authenticated via the API a 500 error is returned rather than a 400 "Validation failed" error. This patch catches the return value for an expired password and returns the validation failure before the patron search is attempted.
    
    Test plan:
    1) Choose a patron and set their password expiry date to a date in the past
    2) Send a request to auth/password/validation as an authenticated user with that patron's details
    3) The response should be a 500 error
    4) Apply patch
    5) Repeat steps 1-3 and this time the response should be a 400 code with an error message of  "Password expired"
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 711f9a041a706ed3f025afd6da0259879396ea58
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Mon Dec 18 11:00:06 2023 +0000

    Bug 35204: Add unit tests
    
    prove t/db_dependent/api/v1/password_validation.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b78be9bddb817c1dcc0aab81b5ecb8680b36f241
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Dec 5 15:47:23 2023 +0000

    Bug 35489: Add a hidden input for itemnumber even if item has no barcode
    
    This page is a single form, all fields must have inputs to avoid data loss/mismatch
    
    To test:
    1 - Find a record in the catalog and add or edit items to have one item with a barcode and one without
    2 - Place an item level hold on the item with no barcode
    3 - Place another hold for a different patron on the item with a barcode
    4 - From the holds table add an expiration date to the hold with a barcode and save
    5 - Note the hold on the item with no barcode is now on the item with a barcode and the other hold is now a next available hold
    6 - Delete the holds
    7 - Apply patch
    8 - Repeat 2-4
    9 - Confirm the itemnumbers for the holds have not changed
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 90cdeeac134ccc6ff0fd1b61deda14d75a02fe15
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Dec 15 12:22:53 2023 +0000

    Bug 35574: Tidy
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b33a20255af2d074b7e9a9edd7f65ab2c69ad006
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Dec 15 11:11:56 2023 +0000

    Bug 35574: Don't show the link either
    
    This patch adds the check for permission to the biblio menu item too.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8bffe42f6be72504a68bc06c0a5f8e42a4e0aed3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Dec 15 11:05:42 2023 +0000

    Bug 35574: Add unit tests for api change
    
    We add the corresponding unit tests for the biblio/bookings endpoint to
    ensure no regressions in the future.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 73eb73e3e69ec95bb2b923c36bdf78ef6263d701
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Dec 14 17:43:17 2023 +0000

    Bug 35574: Correct api permission for listing biblio specific bookings
    
    To test:
    1 - Follow above plan and apply only first patch
    2 - Not the table does not load (403: Forbidden)
    3 - Apply this patch
    4 - Reload
    5 - Success!
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 87c1f304d6c236778d7675d6bf1619b4ce23a5a8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Dec 14 17:10:35 2023 +0000

    Bug 35574: Bookings tab from biblio details should only require manage_bookings permission
    
    TO test:
    1 - Find or create a staff user
    2 - Grant permissions:
        circulate: manage_bookings, circ_remaining_permissions
        catalogue
    3 - Open a record details, go to items tab, mark an item as bookable
    4 - Sign out and sign in as the patron above (or use a private window to sign in)
    5 - Place a booking on the record located above
    6 - Success
    7 - Try to view the bookings tab
    8 - Fail, you don't have permission
    9 - Apply patch
    10 - Success!
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f2a5118189642cecf551765e7e51e2133a0cf77c
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Dec 18 13:38:37 2023 +0000

    Bug 35413: DBRev 23.12.00.001
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cfa077652cc70c9775cbbb354654e110b1024460
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Dec 18 10:05:39 2023 -0300

    Bug 35413: DB update
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit b6c71bea4e0a92523f881151c5fbe556eee7eab8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Nov 28 14:58:04 2023 +0000

    Bug 35413: Terminology: Manage issues (issue_manage)
    
    This patch updates several files which use the term "issues" without
    context, changing them to "Vendor issues." Unchanged is the vendor
    issues page template, vendor_issues.tt, which is updated in Bug 35417.
    
    To test, apply the patch and go to Acquisitions.
    
    - Search for a vendor and view the details.
    - You should see a "Vendor issues" link in the sidebar.
    - Go to Patrons and search for a patron. View the patron's details.
    - Click More -> Set permissions.
    - Under Acquisitions management you should see "Manage vendor issues
      (issue_manage)"
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 26447c5a68928bb31388437df6859d7c083ae21e
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Dec 10 14:55:20 2023 +0000

    Bug 35528: Remove 'click' from links in system preferences
    
    It's not necessary to label a link with 'click', it being
    a link and being formatted as such is enough.
    
    This updates the occurences in the sytem preferences editor.
    
    To test:
    * Go to system preferences like OpacUserCSS that allow editing
      in a textarea
    * Verify link descrptions for editing and collapsing the area
    * For a section of grouped system preferences, hover over the
      arrow and verify the text for collapsing/uncollapsing the area
    * Apply patch, restart all
    * Verify the links and tool tips have been updated
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6f511d88501f26fd28da8d2083e2a16ccd6b33f4
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Dec 10 14:00:04 2023 +0000

    Bug 35526: Fix terminology and spelling for ERM data providers
    
    This makes several changes on the form for adding a data provider
    and on the data provider details page:
    
    * Enable ERMModule system preference
    * Go to the ERM module, add a new data provider
      * Look at the labels on the form
      * Save and check the labels on the summary tab
    * Apply patch, run: yarn build
      * Verify fixes
        ...Id => ID
        ...sushi => SUSHI
        ...counter => COUNTER
        ...Report Release => Report release
        ...
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 22644182aae76c55bba96016d3adc254cfe0d1ba
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Dec 10 13:41:46 2023 +0000

    Bug 35525: Fix spelling of SMS in aria-labels for messaging in OPAC
    
    Updates sms to SMS.
    
    * Set SMSSendDriver system preference to Email
    * Go to the OPAC patron account, messaging tab
    * Check some SMS check boxes and save
    * Verify that in the source code the aria-label for the
      checked and unchecked checkboxes reads: sms messaging
    * Verify that in the source code for the 'days in advance'
      pull down, the message reads "... receive notice"
    * Apply patch, restart all
    * Verify that the source code for the checked and unchecked
      the aria-label now reads "Select/Unselect SMS messaging"
    * Verify that the aria-label on the 'days in advance' pull
      down now reads 'receive the message'
    
    Also fixes a mismatched itiva message.
    Repeat test plan with TalkingTechItivaPhoneNotification Enabled
    and the phone checkboxes.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 826a6cbdb9757b4fa486c5daa354f60a4c17d8b7
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Dec 10 13:29:29 2023 +0000

    Bug 35524: Fix terminology in basket group CSV export
    
    Bookseller should be vendor to match our preferred terminology.
    
    To test:
    * Run:
      prove t/db_dependent/Acquisition/GetBasketGroupAsCSV.t
    * Add a basket with at least one order line
    * Close basket and add to a basket group
    * Close the basket group
    * Export as CSV
    * Verify headers include "Bookseller"
    * Apply patch, restart all
    * Repeat export, it should now say "Vendor"
    * Rerun tests
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d534bad99e92cd903ece796a8a0e56ade1042ba9
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Dec 10 13:21:29 2023 +0000

    Bug 35523: Fix doubled up quotes in cash register title
    
    Updates ''{cash_register}'' to '{cash_register}'
    
    To test:
    I believe this is not actually testable, as cash registers
    can only be archived and not deleted?
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d07f20a5a764aef875f9dda45dc76dc68f6adf22
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Dec 15 17:58:25 2023 -0300

    Bug 35476: Make 'Submit' translatable in TrainsFormAddItem.vue
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit fe6e020861eb3599a58c30ee37784fd5e8937068
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Dec 4 15:22:11 2023 +0100

    Bug 35476: Make 'Submit' buttons translatable in vue components
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit c129b3aea233f9820ce4428d645cf7d4aa9c8fc9
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Dec 12 06:55:04 2023 -0500

    Bug 18139: Specify 'all item types' and 'all patron categories' in template
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e62e1be32375be9bcabf1cd3a2d444cab125f01d
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Dec 12 06:57:42 2023 -0500

    Bug 18139: Tidy code
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9eb8d69ca154fa2d3234645e8f0e9f3f1d19c7dd
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Nov 28 12:24:53 2023 -0500

    Bug 18139: Add/update unit tests
    
    Signed-off-by: Eric Gosselin <eric.gosselin@inlibro.com>
    Signed-off-by: Marc Véron <veron@veron.ch>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8a9ddc1b1ca2f63e9129e1381493b60a18db2cce
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Nov 28 14:57:55 2023 +0000

    Bug 18139: Display the rule critera used to determin the checkout limits to the template
    
    The too many checked out message can be very confusing for librarians
    when the limit specified is more or less than the number of checkouts
    the patron already has. We should make it clear to the librarian that
    his is only counting certain types of checkouts by giving them the
    issuing rule criteria used.
    
    Test Plan:
    1) Apply this patch
    2) Try to check out more items than the circ rules allow for
       regular and on-site checkouts
    
    Signed-off-by: Eric Gosselin <eric.gosselin@inlibro.com>
    Signed-off-by: Marc Véron <veron@veron.ch>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d59bf322e9eb41b38ea35bf0e1a1955177c31cb3
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Dec 15 08:31:33 2023 +0000

    Bug 35507: Add verbose parameters in Koha::Plugins
    
    Yet another approach ;)
    Driemaal is scheepsrecht / Third time lucky..
    
    Test plan:
    Run prove $(git grep -l Koha::Plugin | grep -P "^t\/db")
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit dc62d9bed5799b9583bbc1ed59ea37972d7fe472
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Dec 12 14:07:49 2023 +0000

    Bug 35507: Plugins.t - Mock SessionStorage, remove KitchenSink
    
    Removing the CGI::Session behavior to auto-commit by mocking
    SessionStorage makes that the $plugin->test_template does no
    longer commit.
    
    Since KitchenSink includes a CREATE TABLE, removing that code
    removes the second implicit commit. We might move that code
    to its own script?
    
    Adds a missing rollback too at the end.
    
    Test plan:
    Run prove t/db_dependent/Koha/Plugins/Plugins.t
    Verify that no records got added to plugin_data/methods table.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0ac0f58185442939483aa7feed84642f39d011fb
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Dec 15 11:27:35 2023 +0000

    Bug 35468: (follow-up) Fix for older DateTimes
    
    We can't use the rfc3339 method from DateTime itself as older Debians
    don't ship with a recent enough version.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5d0732252ab3e0ed854dce800018c01ccbad89c2
Author: Victor Grousset <victor@tuxayo.net>
Date:   Wed Dec 13 16:38:09 2023 +0100

    Bug 35496: (QA follow-up): tidy up code
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 33ba9c270173703181e4c7f6e03656eea29c0b27
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Dec 5 18:04:47 2023 +0000

    Bug 35496: Open article requests tab by default on opac-user.pl after placing an article request
    
    To test:
    1 - Turn on ArticleRequests
    2 - Place an  Article Requests on the opac
    3 - Note after placing the request the URL is:
        http://localhost:8080/cgi-bin/koha/opac-user.pl#opac-user-article-requests
    4 - Note the article request tab is not active
    5 - APPLY PATCH and restart_all
    6. Try steps 2 - 4 again, this time the article request tab should be open by default.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cc9e40869af83f1eff4f54577a48050f628c9a5c
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Dec 5 17:47:50 2023 +0000

    Bug 35495: Open holds tab by default on opac-user.pl after cancelling a hold
    
    To test:
    1 - Go to the opac-user.pl page for a user with some holds and cancel a hold.
    2 - Note after placing the hold the URL is:
        http://localhost:8080/cgi-bin/koha/opac-user.pl?#opac-user-holds
    3 - Note the holds tab is not active
    4. APPLY PATCH and restart all
    5. Now after cancelling a hold, the refreshed page should have an active hold tab.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 9076f0ba3d11875028e87fae314ae993c196cb2a
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Dec 5 16:50:37 2023 +0000

    Bug 35492: Open holds tab by default on opac-user.pl after suspending a hold
    
    To recreate:
    1. Go to the opac-user.pl page for a user with some holds and suspend
       a hold.
    2. Note after placing the hold the URL is:
       http://localhost:8080/cgi-bin/koha/opac-user.pl?#opac-user-holds
    3  Note the holds tab is not active
    4. APPLY PATCH and restart all
    5. Now after suspending a hold, the refreshed page should have an active
       hold tab.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d8bd46d0d7dcc80ece69f3c8f869ec7113401d65
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Dec 5 16:40:15 2023 +0000

    Bug 35488: Open holds tab by default on opac-user.pl after placing a hold
    
    1 - Place a hold on the opac
    2 - Note after placing the hold the URL is:
        http://localhost:8080/cgi-bin/koha/opac-user.pl?#opac-user-holds
    3 - Note the holds tab is not active
    4 - APPLY PATCH and restart_all
    5 - Try steps 1 - 3 again, this time the holds tab should be opened.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit a2005cd32c99f92d5eb2d25b181f7be79f50b90c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Dec 12 16:52:14 2023 +0000

    Bug 35468: (follow-up) Test only the specific permission needed
    
    The tests were granting circulation top-level permissions - we should be able to
    perform the actions with only 'manage_bookings'. This patch updates the tests to
    use the narrower permission.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 68ff5edb1284bf73b7f7d5014401bae9442e4340
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Dec 12 16:37:49 2023 +0000

    Bug 35468: (follow-up) Fix QA complaints
    
    Tidyness
    Use dt_from_string, not DateTime->now
    Add exec flag
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8ed228ed9e53d7616f9b2b58961d4828a3e7e8a2
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Dec 12 14:53:09 2023 +0000

    Bug 35468: Unit tests
    
    This patch adds all the 'basic' unit tests one would expect to find with
    the api endpoints.  I've been working on this as a follow-up to bug
    29002 as promised, but hadn't yet submitted them as I wanted to get the
    full coverage.. but having these basics in early makes sense whilst I
    continue on the more advanced cases.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 21f341c1e0faaaabdde3908765dabb339c5f64df
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Dec 12 13:10:29 2023 +0000

    Bug 35468: Correct api bookings permission
    
    At some point during development we migrated from 'parameters' to
    'circulate' for the manage_bookings sub-permission. Unfortunately, the
    corresponsing API definition missed the update.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6f45fd45742b1fcea65bb7f626eadfedcbaeb941
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Dec 12 16:14:34 2023 +0100

    Bug 35556: Fix random selenium failure if category on second page
    
    If 'Test category' if on the second page the test will fail to
    locate the Edit button.
    
    To make sure it is displayed on the screen we are selecting "All" in the
    dropdown list.
    
    This is done a couple of lines later in the script for the same purpose.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ba7b62d1fc171f346176cd454f86747fea7928f6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 29 10:02:50 2023 +0100

    Bug 35428: Remove temporary files for gulp po tasks
    
    gulp po:update will generate 1 /tmp/koha-* directory per task.
    
    We need to remove them when the script does not longer need them.
    
    Test plan:
    0. Do not apply this patch
    1. ls -ltr /tmp
    2. gulp po:update --lang es-ES
    3. ls -ltr /tmp
    => Notice new koha-* directories
    Repeat 2, 3
    4. Apply this patch and try again
    => No new directories when the job is done
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f9b3866ebfa78b39dcf6aac6ef4c0e1a5679f7f9
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Dec 6 15:13:20 2023 +0000

    Bug 35498: Allow tab to indent lines and trigger autocomplete
    
    This patch allows the tab key to indent lines as well as trigger autocomplete.
    
    Test plan:
    1) Apply patch, navigate to reports and create a new SQL report
    2) Click in the text editor and press tab, it should indent and then trigger the autocomplete options
    3) Type something to select from the autocomplete box and press tab - it should autocomplete that option
    4) Type any word and then press space. Now press tab and it should indent again
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e756faf860c7475e2761e45f3ebc152c34a2d036
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Nov 10 11:31:28 2023 +0000

    Bug 35310: Show current renewal value of the currently active check out
    
    Test plan, with the previous 2 patches applied:
    
    1) Checkout an item to Koha user, barcode 39999000003192
    2) Renew that barcode
    3) Visit the items page of the biblio record, click on 'View' in front of 'Current renewals'
    /cgi-bin/koha/catalogue/moredetail.pl?biblionumber=76
    4) Notice it shows the renewals as expected
    5) Return the same item: 39999000003192
    6) Repeat 1) to 3). Notice it shows 2 current renewals even tho only 1 corresponds to the currently active check out
    7) Renew again. Notice it shows 3 current renewals even tho only 2 correspond to the currently active check out
    7) Apply this patch. Notice it now only shows 2 current renewals
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ebba646b46455d308cf9e8777bd9af92080156ae
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Nov 10 11:01:58 2023 +0000

    Bug 35310: Only show 'Current renewals' link if item is currently checked out
    
    1) Checkout an item to Koha user, barcode 39999000003192
    2) Renew that barcode
    3) Visit the items page of the biblio record, click on "View" in front of "Current renewals"
    /cgi-bin/koha/catalogue/moredetail.pl?biblionumber=76
    4) Notice it shows the renewals as expected
    5) Return the same item 39999000003192
    6) Repeat 3). Notice it never loads renewals and network console shows HTTP error 400
    7) Apply this patch. Repeat the test plan. Notice the 'Current renewals' no longer shows for the item because it is no longer checked out, so whatever past renewals are no longer 'current'
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 942c4a0535dbbf46746e849758d7dfc741187bec
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Nov 10 11:00:55 2023 +0000

    Bug 35310: Only show 'Current renewals' <li> entry if there are current renewals
    
    'Current renewals' is always showing, even if empty.
    
    Test plan:
    1) Checkout an item to Koha user, barcode 39999000003192
    2) Renew that barcode
    3) Visit the items page of the biblio record, click on "View" in front of "Current renewals"
    /cgi-bin/koha/catalogue/moredetail.pl?biblionumber=76
    4) Notice all items have the 'Current renewals' label entry, but only the checked out item in step 1) has the 'Current renewals' label entry
    5) Apply patch. Notice only the item with current renewals is showing the 'Current renewals' label entry with the respective value.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 20d0d94f22aeab3c71d22b6a99fbfa4421e1f40d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Dec 1 16:34:28 2023 +0000

    Bug 35450: Preservation system preferences should authval dropdowns
    
    This patch updates two preservation module system preferences so that
    they offer dropdowns of "Not for loan" values instead of requiring entry
    of a specific code.
    
    The patch also adds a missing "." at the end of one preference
    description.
    
    To test, apply the patch and restart services.
    
    - Go to Administration -> System preferences.
    - Search for "preservation"
    - Check that the "PreservationNotForLoanDefaultTrainIn" and
      "PreservationNotForLoanWaitingListIn" preferences have dropdowns
      offering "Not for loan" values.
    - Confirm that your choices are correctly saved.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cd6753baeebbf5ac43b2e790c723cd6f9fea47c3
Author: Victor Grousset <victor@tuxayo.net>
Date:   Fri Dec 8 22:30:05 2023 +0100

    Bug 34398: (QA follow-up): add missing |
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6cce6f9e1c1c3cc7697da15793fe99453115bd66
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 3 16:59:16 2023 +0000

    Bug 34398: Fix inconsistencies in Record matching rules page titles, breadcrumbs, and headers
    
    This patch fixes some inconsistencies in the record matching rules
    administration page, making sure the page title, breadcrumb
    navigation, and page headers are consistent with each other.
    
    Some controls on this page have been updated to use Bootstrap link style
    with Font Awesome icons added.
    
    Test each page to confirm that page title, heading, and breadcrumbs are
    consistent:
    
    - Administration -> Record matching rules
      - New record matching rule
      - Edit record matching rule
      - Delete record matching rule
      - Test the process of adding new match points and new match checks,
        and removing match points and match checks.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 871cc4ad9447bc55228fb2ac83dfc0b3aa17941b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Dec 1 16:46:47 2023 +0000

    Bug 35449: Accessibility: No links on "here"
    
    This patch updates two system preferences, "OPACUserJS" and
    "OPACUserCSS" so that the "here" links in the description instead read
    "library administration".
    
    To test, apply the patch and go to Administration -> System preferences.
    
    - Search for "opacuser"
    - The descriptions of the "OPACUserJS" and "OPACUserCSS" preferences
      should include the phrase "...can be defined in library
      administration," with "library administration" leading to the correct
      page.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 289e06edea3284ddc5b61c57a4a62a657328c3f2
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Dec 1 07:55:57 2023 -1000

    Bug 34091: Fix typo log-modules in help for cleanupdatabase.pl
    
    This parameter is actually --log-module.
    
    Test plan :
    Run misc/cronjobs/cleanup_database.pl -h
    Confirm you see --log-module
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e3f961777786b0ebae9fa76d50e8c40a4cb664e3
Author: Adolfo Rodríguez <adolfo.rodriguez@xercode.es>
Date:   Thu Nov 30 11:12:13 2023 +0100

    Bug 35436: Copy is not translatable in OPAC Search History
    
    Test plan
    1 Enter in OPAC Search History in a language other than English and
      check that Copy is not translated
    2 Apply patch, restart services
    3 Regenerate the templates for that language
    4 Repeat step 1 and check that Copy appears now translated
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit ca27b5adb03eae30e425f096ef635a8fe4ce3b3f
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Fri Dec 1 15:08:48 2023 +0200

    Bug 35460: Fix add and edit of hold rules in circulation rules table
    
    Adding or editing following columns in circulation
    rules table didn't work:
    - Holds allowed (total)
    - Holds allowed (daily)
    - Holds per record (count)
    
    At some point those columns were dropped from list of
    saved columns in smart-rules.pl.
    
    To test:
    1. Create new rule or edit existing one.
    2. Add or change values in following columns:
    - Holds allowed (total)
    - Holds allowed (daily)
    - Holds per record (count
    3. Save rule.
    => Note that columns have value "Unlimited" on them.
    If you check database, columns haven't been saved.
    4. Apply this patch.
    5. Repeat steps 1. to 3.
    => Columns should now have values in them and they
    are saved to database.
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 855b8bc66e3bf1d012d0caeab938556eb520fd51
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Nov 16 05:08:30 2023 +0000

    Bug 35344: Warn on patron image upload if missing cardnumber
    
    This change displays a warning message instead of the patron image
    upload feature in the patron record when the patron is missing the
    cardnumber.
    
    Without this change, the staff user can try to upload a patron image
    but it will silently fail. This change warns the staff user of the
    cardnumber requirement for patron image upload.
    
    Test plan:
    0. Apply the patch
    1. Enable the "patronimages" system preference
    2. Go to http://localhost:8081/cgi-bin/koha/members/moremember.pl?borrowernumber=51
    3. Click "Add" over the patron image placeholder
    4. Note the "Upload photo" button and the ability to take a patron photo if your
    device has a camera
    5. Remove "cardnumber" from BorrowerMandatoryField
    6. Go to http://localhost:8081/cgi-bin/koha/circ/circulation.pl?borrowernumber=51
    7. Edit the patron to remove the cardnumber
    8. Click "Add" over the patron image placeholder
    9. Note that no patron image upload features appear. Instead, only
    a warning appears stating that the patron needs a cardnumber before
    the patron image upload can be performed
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 494ee7c68f1dc8437df0b53e55c35e758ccc3c27
Author: Andrii Nugged <nugged@gmail.com>
Date:   Thu Nov 16 18:20:55 2023 +0200

    Bug 35425: Optimize UX when dragging a tag or subfield
    
    To reproduce:
    1. Open any biblio and edit that record.
       (select "Edit record" from the "Edit" drop-down menu).
    2. Check that selecting the text in any draggable block input/textarea
       fields with a mouse is not possible - it starts dragging instantly.
    3. Apply the patch
    4. Make sure that draging is activated only when you click
       on the "::" icon in front of the dragged item. And text selection
       works correctly.
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8ba9ea8a87e0d6653261d90d743cd75328ad0b99
Author: Magnus Enger <magnus@libriotech.no>
Date:   Wed Nov 29 14:58:08 2023 +0100

    Bug 35414: Silence warn related to number_of_copies
    
    To test in ktd:
    - Tail the logs with "sudo tail -f /var/log/koha/kohadev/plack*.log"
    - Find a record in the staff client
    - Add an item to the record
    - Observe "[WARN] Argument "" isn't numeric in subroutine entry ..."
      in /var/log/koha/kohadev/plack-intranet-error.log
    - Apply this patch
    - restart_all
    - Tail the logs again
    - Add another item
    - Observe the absence of the earlier warning
    
    Thanks to Jonathan Druart for suggesting this particular solution!
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 4c6517767a86947361b81e0f718ec3833c5d5a33
Author: Kevin Carnes <kevin.carnes@ub.lu.se>
Date:   Mon Nov 27 09:40:55 2023 +0100

    Bug 34516: Upgrade database fails for 22.11.07.003, points to web installer
    
    MySQL requires key length for indexes of text columns, while MariaDB
    sets it automatically for utf8mb4.
    
    Test plan:
    1. Setup Koha to use MySQL (e.g. ku-my8)
    2. Downgrade database with the following commands (e.g. koha-mysql
       kohadev):
       ALTER TABLE `biblioitems` MODIFY COLUMN `publishercode` varchar(255);
       ALTER TABLE `biblioitems` DROP INDEX `publishercode`;
       ALTER TABLE `biblioitems` ADD INDEX `publishercode` (`publishercode`);
       ALTER TABLE `deletedbiblioitems` MODIFY COLUMN `publishercode` varchar(255);
       ALTER TABLE `deletedbiblioitems` DROP INDEX `publishercode`;
       ALTER TABLE `deletedbiblioitems` ADD INDEX `publishercode` (`publishercode`);
       UPDATE systempreferences SET value="23.0600006" WHERE variable = "Version";
    3. Attempt to upgrade the database (e.g. koha-upgrade-schema kohadev)
    4. Notice the error about "key specification without a key length"
    5. Apply patch
    6. Attempt to upgrade the database (e.g. koha-upgrade-schema kohadev)
    7. Notice that the database is upgraded
    8. Sign off
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    
    Perltidied the database update file.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 09d5355ffb6381b531b5d42cc97b17c1e9790da4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 28 09:11:43 2023 +0100

    Bug 35408: Fix import job link
    
    After importing titles from a list there is a link to the background job
    that is displayed.
    This link points to /cgi-bin/koha/admin/background_jobs/:id
    There is a route to this path in routes/erm.js, to redirect to the
    correct URI /cgi-bin/koha/admin/background_jobs.pl?op=view&id=:id
    However this link will not work if we are accessing it from outside the
    ERM app/module, or if we are opening it in a new tab/window.
    
    The idea was interesting, but does not work...
    
    Test plan:
    Create a new ERM local package, a new list (virtual shelf), add some
    items to the list.
    Go to E-resource management > eHoldings > Local > Titles > Import from a list
    Click "import"
    Notice the "see job" link and click it
    
    => Confirm that with this patch applied you can open it in a new tab
    without getting a 404
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 5249dc42b4c9d0908bff3a3db859dda141db5db4
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Nov 21 14:37:16 2023 +0000

    Bug 33244: Do not show lists in OPAC if OpacPublic is disabled
    
    This patch updates markup and CSS in the OPAC header so that the Cart
    and Lists controls don't appear when OpacPublic is disabled.
    
    The patch also moves the "Your cookies" link into the group of links
    with "Log in to your account" and "Search history." This makes the
    template logic a little simpler and also seems like a more logical
    grouping.
    
    To test, apply the patch and enable the CookieContent system preference.
    
    - View the OPAC with the OpacPublic system preference enabled.
    - If necessary, click the "Accept all cookies" button.
    - The "Your cookies" link should now appear in the header between the
      log-in link and the search history link.
    - Test the page at various browser widths to confirm that the header
      still responds well to changes.
    - Go back to system preferences in the staff client and change the
      OpacPublic system preference to "disabled."
    - Return to the OPAC and refresh the page. You should be redirected to
      the login page, and the Cart and Lists buttons should no longer appear
      in the header.
    - The links in the header for login and cookies should look correct at
      various browser widths.
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1faa3eb0e927f424d830fead5aa7552eb05e0aea
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Nov 1 23:05:42 2023 +0000

    Bug 35157: Remove spans from patronfields.inc
    
    To test:
    1. Run any page that contains the "Search patrons" search bar through an HTML validator and you will see a lot of:
    
            Stray start tag span.
            Stray end tag span.
    
    2. Apply patch
    3. Try step 1 again, no more errors from the HTML validator.
    4. Make sure the patron searches still work when limiting by 'Search field'.
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6aa971be01987e041dcb55a71ad2f36e3f2c40d1
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Nov 16 14:58:56 2023 +0000

    Bug 35352: Allow SMSalertnumber to be hidden via BorrowerUnwantedField
    
    To test:
    1. Add a value to SMSSendDriver like 'Emial'.
    2. Go to BorrowerUnwantedField and attempt to hide "Mobile phone number (smsalertnumber)"
    3. Go to members/memberentry.pl and see the field is not hidden.
    4. APPLY PATCH
    5. Try step 3 again and this time the field should be properly hidden.
    
    Note: This patch also includes some indentation changes.
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e99037989bcc239d2bffeac2c47e74ea4564d24e
Author: Slava Shishkin <slavashishkin@gmail.com>
Date:   Mon Nov 20 18:32:51 2023 +0200

    Bug 35383: Make subfields of repeated tags draggable
    
    To reproduce:
    1. Open any biblio and edit that record.
       (select "Edit record" from the "Edit" drop-down menu).
    2. Repeat any tag that may be repeated and has more than one subfield
       (e.g. 050 or 082) (click "Repeat this tag")
    3. Try dragging a subfield of the new repeated tag
    
    Apply the patch and make sure dragging a subfield works well.
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 6c8ad081a610b6e6b9cdbd3fdd519a2ca4dce3a8
Author: David Nind <david@davidnind.com>
Date:   Mon Dec 4 03:23:03 2023 +0000

    Bug 35410: Use "Online resources" label in search results
    
    Update the staff interface and OPAC XSLT files to use
    "Online resources" as the label in search results, instead of
    "Online access". This matches the label used in the detail page
    for a record.
    
    Test plan:
    1. Search for perl in the staff interface and OPAC (or add to
       an existing record a URL to 856$u with 4 for the first
       indicator).
    2. For any search result that displays the "Online access" label,
       view the detail page for the record.
    3. Note that the detail page uses the label "Online resources".
    4. Apply the patch and restart_all.
    5. Repeat steps 1 and 2.
    6. Note that the search result pages now show "Online resources" for
       the label, matching the detail page.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit f48ef52cfc786bd969ceb03a782b037a10d854d2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 30 09:46:48 2023 -0300

    Bug 35453: Fix wrong 'Laserdisc)' string on 007 builder (MARC21)
    
    Steps to reproduce:
    1. On cataloguing, open the 007 builder.
    2. Choose material type 'Video recording'
    3. On 04 choose g - Laserdisc
    4. Click save
    => SUCCESS: 'g' correctly shows on the 007
    5. Edit the 007 again
    => FAIL: on 04, 'g - Laserdisc)' is displayed
    6. Apply this patch
    7. Repeat 4 and 5
    => SUCCESS: no trailing ')'
    8. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 3ac5c15da58261095dd8464b4bb41b804528925b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Nov 28 19:27:49 2023 +0000

    Bug 35415: Rephrase: Some patrons have requested a privacy ...
    
    This patch revises the wording of the warning which is displayed on the
    'About' page when the 'OPACPrivacy' system preference is enabled but the
    'AnonymousPatron' preference is empty. The new phrasing is hopefully
    more clear.
    
    To test, apply the patch and go to Administration -> System preferences.
    
    - Search for 'AnonymousPatron' and enter a borrowernumber if necessary.
    - Log in to the OPAC and click the 'Privacy' tab in the left-hand
      sidebar of the user summary page.
    - Set your privacy rule to 'Never'.
    
    - Return to Admnistration -> Sytem preferences in the staff interface.
    - Search for 'OPACPrivacy' and set it to 'Allow'.
    - Clear the borrowernumber from the 'AnonymousPatron' preference.
    - Go to the 'About" page and open the 'System information' tab.
    - You should see an error message at the bottom:
    
      "Some patrons have requested privacy after their items are checked in,
       but the AnonymousPatron preference is not set correctly. Set it to a
       valid borrower number or checkins for these patrons will fail."
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 7365d8723943aa7cf8a59fa5112c46d9e586bd8d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Nov 27 10:24:29 2023 -0300

    Bug 35404: Fix wrong copy and paste in string (ILL batches)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit cd6aebf849e0333ddc9b15204039e8641e2cc186
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Nov 28 14:04:52 2023 +0000

    Bug 35412: Fix incorrect capitalization: Toggle Dropdown
    
    This patch corrects incorrect capitalization in the last-borrower
    include file. The string his hidden except to screen readers, so visual
    confirmation isn't straightforward. Viewing the diff should be enough to
    confirm this single character change.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1984d8d5feec6de89d40b6fb6eb3d317f4aad869
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 28 11:39:20 2023 +0100

    Bug 35376: Rephrase "be careful..."
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 08cc74a9b60d85fcdf5b3febfa5653111a16d9ac
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Nov 29 09:13:38 2023 -1000

    Bug 35441: Fix typo 'UniqueItemsFields' system preference
    
    Typo in message :
    NOTE: Fields listed in the 'UniqueItemsFields' system preference will not be copied
    
    The preference is Item without 's' : 'UniqueItemFields'
    
    Test plan :
    1) Check system preference 'UniqueItemFields' contains values
    2) Go to acquisition to create a new order from new record
    3) Check the note you see with the system preference
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit d2048ed71b3c2f817a0a888346551c1b101dd510
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 23 08:30:25 2023 -0300

    Bug 35387: (follow-up) Capitalize 'barcode'
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 1d89484faee3c717e1cb74f16270aaf1f57713c1
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 22 17:56:10 2023 -0300

    Bug 35387: Fix capitalization of 'name' label in preservation module
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit e3e3e0f684ac521e221398219eb7812d3fe81309
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Nov 21 14:30:50 2023 -0300

    Bug 35378: 'This authority type is used {count} times' missing dot
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 8c309ea53d4422b53641a2b7fbd46310df7d9fb9
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Mon Nov 13 23:21:17 2023 +0000

    Bug 35327: Fix capitalization of language name
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Updated opac to OPAC.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0d483a57222876ad264a45794b105001a194c407
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Wed Dec 6 12:51:10 2023 +0000

    DBRev 23.12.00.000: Start of a new release cycle
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>

commit 0e6d576d70630ba2812ae02461be166ceb5d451f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 30 16:23:30 2023 -0300

    Koha 23.11.00 is here!
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a4a343c543190c5bed49fa8e92e82393d173d2e1
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 30 16:17:58 2023 -0300

    Add release notes for 23.11.0
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit df84f4a5e703e8fbb4593eb6955bcc66b80248c2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 30 14:58:11 2023 -0300

    Bug 34587: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 71c555b16955bd2d3a6c566a5a85fad60ff9f49a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 30 14:42:05 2023 -0300

    23.11.00: Update kohastructure.sql
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1a9f61b79415e3e8531b4dee0f5f4d7a71f3a30f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 30 14:28:20 2023 -0300

    23.11.00: Update history.txt
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 71a07f53a6d849fb3ed6720baf25e3d85ae2f3d5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 30 14:19:20 2023 -0300

    23.11.00: Update contributors.yaml
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d3ad98d893a4e53765f5f449a6171ba1af186a3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 30 14:18:20 2023 -0300

    23.11.00: Update mailmap
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ff88ba5371d31e301fd50cc243b35ebaa50edff5
Author: Aude Charillon <aude.charillon@ptfs-europe.com>
Date:   Thu Nov 30 14:08:47 2023 -0300

    Bug 34955: One Koha Manual
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9988925fb5bb1c08bf3cee5dbb574b1f195037f9
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Nov 28 13:24:49 2023 +0000

    Bug 35418: Fix _get_usage_months
    
    No longer falls in an endless loop if the last month in the report period is december.
    
    Test plan:
    1) Apply just the tests patch, run EUsage tests
    prove t/db_dependent/Koha/ERM/EUsage/
    2) Wait for a few seconds. Notice SushiCounter.t it hangs. CTRL+C (cancel it)
    3) Apply the fix patch.
    4) Run the tests again. Notice all EUsage tests pass with no issues.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 684d9263e8e116e2def9e66d0901fedcbfa41968
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Nov 28 13:17:20 2023 +0000

    Bug 35418: Add TR_B2 tests
    
    This test file adds tests for the TR_B2 specific report.
    But also tests for this specific bug, which only happens if
    the report time period ends in december
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 55f024c0e330a4abbc7e9fc15f291e3bc7bd67be
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Nov 10 15:07:35 2023 +0000

    Bug 35115: (QA follow-up):
    
    Spelling.
    Tidyness.
    Removal of leftover warn
    
    Nick's patch fixes the issue as described, and I agree that it is the ideal solution here.
    prove t/db_dependent/api/v1/erm_eholdings* passes
    prove t/db_dependent/Koha/BackgroundJob/CreateEHoldingsFromBiblios.t passes
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f9849696909c2d0f507b55c3888e9613e5fb31ef
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Nov 8 18:36:29 2023 +0000

    Bug 35115: Move store routine from Resource to Title and update code
    
    These patches move the store routine from Koha::ERM::EHoldings::Resource to Koha::ERM::EHoldings::Title as the code deals exclusively with title fields.
    
    It updates the code to ensure that records are created when a title is not attched to a biblio, and that only the biblio title field is updated when updating an eholdings title.
    
    To test:
     1 - Enable ERMModule sys pref
     2 - Create a new public list, visit:
         /cgi-bin/koha/virtualshelves/shelves.pl
     3 - Click "New list" enter name, set public -> public
     4 - Click "Add items", enter 112\n113\n114 (new line for each), in "Biblio numbers"
     5 - Notice that all added biblios have quite a few MARC fields
     6 - Go to packages, visit:
         /cgi-bin/koha/erm/eholdings/local/packages
     7 - Create a new package, add a name and hit 'Submit'
     8 - Go to titles, visit:
         /cgi-bin/koha/erm/eholdings/local/titles
     9 - Click "import from list"
    10 - Pick the package created in 7)
    11 - On the row of the list created in 2), click "Import"
    12 - Go back to the list, visit:
         /cgi-bin/koha/virtualshelves/shelves.pl?op=view&shelfnumber=1
    13 - Notice all the biblios have been stripped of their MARC data, and only title remains.
    14 - Go to details page for one of the bibs
    15 - Edit -> Replace record via Z39.50
    16 - You can search for anything, just make sure to import a mostly full record
    17 - Go back to ERM - eHoldings - Local - Titles
    18 - Edit the title for the record that was replaced
    19 - Save
    20 - Go to record details - note the record is gone again
    21 - Apply patches
    22 - Search the catalog
    23 - Check some titles
    24 - Add to a new list
    25 - repeat 8 - 11 with the new list
    26 - View and confirm records are intact
    27 - Edit the eholdings title for one of the records, changing the title field
    28 - Save and view record details
    29 - Confirm record is intact and title updated
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit abfef3cf5d8646b45938f5c6247a1ab9f020de76
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 24 08:04:16 2023 +0100

    Bug 35366: (bug 33948 follow-up) Fix display of old checkouts if no checkouts exist
    
    Same patch as
      commit bee2b3d33ed6030b5a63d22148b9955a9897e51d
      Bug 33949: Fix display of old checkouts if no checkouts exist
    
    But for the staff interface.
    
    """
    If we pass an empty array from the perl controller, we retrieve an empty
    string from the template, and the merge does not work.
    
    This patch fixes the following bug:
    Pick a patron without checkout history
    Check them an item out and check it in
    => The table is empty, whereas it should display the item that has been
    checked in.
    """
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b30898c8bf48b828080c557186dcb25b980ffb48
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Thu Nov 23 21:08:09 2023 +0000

    Bug 35291: (QA follow-up) Tidying script for QA test tools
    
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bae5256216f3ad911af3ef4dd944174448c85eaa
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Nov 9 00:49:54 2023 +0000

    Bug 35291: Validate filepaths in linking files
    
    Validate that the files in linking files are contained within the ZIP.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4b019fcbb041649bf4e19e95d59117fb9b422c05
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Nov 9 00:23:45 2023 +0000

    Bug 35291: Don't allow symlinks for link files in cover image ZIP
    
    There's no reason to allow symlinks for link files in cover image
    ZIP files. Preventing their use prevents someone from uploading
    a symlink pointing to an existing file on the Koha server.
    
    Test plan:
    0. Apply patch and restart/reload Koha
    1. Create a PNG cover image
    2. Create a datalink.txt file that contains something like the
    following:
    29,Untitled.PNG
    3. Turn on "LocalCoverImages" system preference
    4. Upload via http://localhost:8081/cgi-bin/koha/tools/upload-cover-image.pl
    5. Go to http://localhost:8081/cgi-bin/koha/catalogue/detail.pl?biblionumber=29
    6. Note the cover image has been uploaded
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6023acd648110297a87c65d1b6d024584ac1bc06
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 8 17:14:55 2023 +0100

    Bug 35291: Prevent leaks from FS
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a5f3815c65c8aaa7d1f7641d4cf8550011729fe1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Sep 12 10:25:36 2023 +0100

    Bug 34287: Add check on public availability endpoint
    
    A quick check for patron equals current user in the public availability
    endpoint.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bc2fa03d5c63cfadc7d9f318d3ca718574c391f2
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Sep 20 13:47:19 2023 +0100

    Bug 34287: Amend unit test
    
    This patch updates the unit test to confirm that checkout availability
    should be restricted to the patron checking the availability options on
    the public side.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 350aa94b5e4d5013429fa574ac1598ba4cab7c5c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 9 19:46:35 2023 +0000

    Bug 35290: (follow-up) Perltidy formatting corrections
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4160afa3d74abb703ec1c461156f1b5a061480b3
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Nov 8 23:39:45 2023 +0000

    Bug 35290: Sanitize field input on cataloguing/ysearch.pl
    
    This change sanitizies the field input on cataloguing/ysearch.pl
    
    Test plan:
    0. Apply the patch and restart/reload Koha
    1a. "Add marc21_field_260b.pl plugin to 260$b in the Default framework"
    1b. Go to http://localhost:8081/cgi-bin/koha/admin/marc_subfields_structure.pl?
    op=add_form&tagfield=260&frameworkcode=#subbfield
    1c. Choose "marc21_field_260b.pl" from the dropdown next to "Plugin"
    1d. Click "Save changes"
    2a. "Add new record"
    2b. Go to http://localhost:8081/cgi-bin/koha/cataloguing/addbiblio.pl?frameworkcode=
    3. Click on tab "2" and scroll down to 260 "b"
    4. Type in "Ori" into 260 subfield b
    5. Some autocomplete suggestions should appear
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fb1c01452db88b87fb41cfea7f8f49f7aa080694
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Nov 15 13:10:22 2023 -0100

    Bug 35229: Fix DataProviders_spec.ts
    
    The intercept was wrong:
    Was intercepting GET instead of POST
    Was intercepting /run route intead of /process_SUSHI_response (this naming was updated in the rest of the code but not here)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e56153c510d8eecdce8741137ff05d53a9df2058
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Oct 27 16:25:27 2023 +0000

    Bug 35229: Update cypress tests for usage reports
    
    This patch adds some additional tests for usage reports to improve test coverage.
    It also fixes a small error in the reports store - "platforms" v "platform". This was affecting which columns could be selected for platform reports
    
    Test plan:
    yarn cypress run
    All tests should pass
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 757be1321109fba491157dc20744effcb0bd3e8d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Nov 24 07:22:48 2023 +0000

    Bug 35393: Fix Objects.t - filter_by_last_update
    
    Test plan:
    Keep awake until just after midnight :)
    Run t/db_dependent/Koha/Objects.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fd55e074352fbb5e5a6ab819db9d53c088776de6
Author: Brendan Lawlor <blawlor@clamsnet.org>
Date:   Fri Nov 17 21:40:38 2023 +0000

    Bug 35365: fix stray td tag
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a068bbf273c8207089bb05707ac8aa7404a5a699
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 21 13:46:33 2023 +0100

    Bug 35335: Fix 500 on circulation history
    
    Koha::Patron->issuer is not covered by tests!
    
    Test plan:
    1. Set RecordStaffUserOnCheckout to "record"
    2. Check an item out and in to a patron
    3. Go to their circulation history
    => Without the patch you get an error
    => With this patch applied the table displayed correct. The "checkout by" column contains the name and the link to the librarian
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b6f350e27598ff68d930880fddc7dcb6c08719fd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 21 13:36:17 2023 +0100

    Bug 35374: Remove ES6 template literals to fix translation strings
    
    The .po files contains the whole block after this line. I don't really
    understand what's happening but this change fixes the problem.
    
    Test plan:
    1. Run the following command before and after the patch and compare the
    diff
    % gulp po:update --lang de-DE --task messages-js
    2. Confirm that the list on this vue is correctly populated
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7218fd991dad0d50fcc5d05f89d75b8953b86d98
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 22 09:54:47 2023 +0100

    Bug 35377: Fix Callnumber => Call number
    
    in Preservation/WaitingList.vue
    See: https://wiki.koha-community.org/wiki/Terminology
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f587d0a3620c94d4777fff8506b56f2456a88a8e
Author: Mason James <mtj@kohaaloha.com>
Date:   Thu Nov 16 23:06:27 2023 +1300

    Bug 35174: update control files for koha-l10n dependency package
    
     to test...
    
     - apply patch
     - build koha-common package
     - install koha-common package, and confirm koha-l10n package is installed
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 502e47ea556d4ef49edc419f692bfda28453d9d7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 16 08:45:15 2023 +0100

    Bug 35174: Don't run gulp po commands if po dir is missing
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 0887cacb93fd2dd27bbf0e63d15123e1347fd83e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 16 08:44:56 2023 +0100

    Bug 35174: Add misc/translator/po to .gitignore
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit f31b20a8c8c764e2216694433429f6e0584f9500
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 16 08:43:43 2023 +0100

    Bug 35174: Add a warning to the about page
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 588e834e7de8409a838906ce87f7a296893e1e23
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 16 08:27:10 2023 +0100

    Bug 35174: Do not explode if po dir does not exist
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 986edc2aa9bd105704df82db044057b2bee79a28
Author: Koha translators <>
Date:   Thu Nov 16 08:46:24 2023 +0100

    Bug 35174: Remove .po files from Koha
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 54bdcaef66ef6b121918b8922020a50d1d0177c8
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Nov 6 13:11:49 2023 +0000

    Bug 35266: Fix biblio check in opac-MARCdetail
    
    We should check before retrieving metadata.
    
    Test plan;
    Try /cgi-bin/koha/opac-MARCdetail?biblionumber=X
    Replace X by a not-existing biblionumber.
    Verify that you get a 404 error page.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    
    JD amended patch: Use ternary op
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6a9b6a2e001c481aba79d4a16a4fd8af3712250d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 15 12:11:39 2023 +0100

    Bug 12133: (follow-up) Fix failing tests
    
    Tests were still failing
    
     #   Failed test 'No tests run for subtest "Test where parameter for SendQueuedMessages"'
     #   at t/db_dependent/Letters.t line 1274.
     [Child patron needs a guarantor]# Looks like your test exited with 11 just after 97.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit e9326f0e86881f95fd79b2dd7a2e9578ab517116
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Nov 9 13:16:05 2023 +0000

    Bug 35012: Apply change to all events
    
    We should not just look at Click.
    
    Test plan:
    [1] Apply the example patch for a Blur action in barcode.pl.
    [2] Check that barcode.pl is active in your framework and that
        autoBarcode is not disabled.
    [3] Open the browser dev console.
    [4] Tab a few times through barcode in the neworderempty form of
        Acquisition. If you leave the field, the Blur event fires.
        => Without this patch you will see two console lines (FF may
        show a little '2' icon at the right side) added. With this
        patch just one.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Jan Kissig <jkissig@th-wildau.de>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ec3fe5d41e03d969b876f0948e81389b0a20df4c
Author: Jan Kissig <jkissig@th-wildau.de>
Date:   Tue Oct 10 13:36:04 2023 +0200

    Bug 35012: Prevent Click handler firing twice
    
    test plan:
    a) build a new basket + order line using "item create on placing an order"
    b) in the item creation dialog (neworderempty.pl) please use the webbrowsers dev tools to analyze the [...] button next to subfield d (Date acquired) and inspect the events that get fired by clicking
    c) notice the Clicktag_952_subfield_d_* event gets fired twice.
    d) apply patch and reload page
    e) there should be only 1 click handler left (besides the jquery one), which points to the Clicktag_952_subfield_* function
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    See also bug 35298. You may have seen that the Focus event of dateaccessioned
    did not fire. But that is related to use of Flatpickr in this plugin.
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e2821c7962ca7594f029f4c7fdb0c2f70028eb9b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Nov 7 13:57:42 2023 +0100

    Bug 35276: Remove authentication params from suggestion hash
    
    These would be forwarded to Koha::Objects->as_list and crash on
    unknown column.
    
    Test plan:
    Logout from staff.
    Enter URL /suggestion/suggestion.pl
    Without this patch, it crashes. Now it does not.
    
    Note: The crash may show auth_forwarded_hash but I also saw
    koha_login_context passing by. Same issue.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c2a6356d585b3dd202de16d7e363ffd873926b95
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Nov 10 14:54:00 2023 +0000

    Bug 35306: Fix Expired holds when modding request
    
    To test:
    1. Make some holds on a record and make sure some are set to expired.
    2. Go to to reserve/request.pl?biblionumber=X for the biblionumber
    3. Try updating something besides the expiration date. i.e. Pickup library
    4. Click Update hold(s)
    5. Notice the expirated holds have lost their expiration date.
    6. APPLY PATCH
    7. Try steps 2-4 again, this time the expiration date shold be retained.
    8. Make sure Table settings still work and you can properly hide columns.
    9. The hold expiration date should be hide-able.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0583deac95b35f1ad96493262e922d7ac3eef102
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Nov 9 08:05:34 2023 +0000

    Bug 35298: Remove focus handler from dateaccessioned plugin.
    
    Test plan:
    Verify that setting focus to date acquired field in items editor
    fills date of today when field is empty but does not replace existing
    date.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f7d47ffc81a510d7439d5cc9130663e2501a343a
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Tue Nov 14 13:44:11 2023 +0200

    Bug 12133: Fix failing tests
    
    Tests in erm_users.t and Letters.t failed because when
    we mock patrons they receive category where setting
    can_be_guarantee is not 0. This triggers error "Child
    patron cannot be a guarantor". We also need to mock
    syspref "ChildNeedsGuarantor" accordingly.
    
    To test prove t/db_dependent/api/v1/erm_users.t and
    t/db_dependent/Letters.t.
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6be4e96a3a9578f6719db57900d903928fa9e8e0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 19 09:41:03 2023 +0200

    Bug 35103: Add option to gulp tasks to pass a list of tasks
    
    You can now generate the messages.po for all languages with:
      gulp po:update --task messages
    
    or for only es-ES
      gulp po:update --task messages --lang es-ES
    
    It may be helpful for the "update po" script that will be used on
    weblate.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 3f01f6cafcdf92b6bf2c7751a1c122875701a6b9
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Nov 13 14:11:13 2023 +0000

    Bug 34517: (follow-up) Add test for attribute search field and make cleanup more robust
    
    This patch adds a test to cover the new functionality of searching an attribute not searched by default.
    
    It also moves the addition of objects to the cleanup array right after they are created. Patrons are added to the front of the array to ensure no constraints are violated when deleting. This change ensures that if the tests die before reachign the end, the data generated is still cleaned up.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 16fcc7a92539e6afcb8926ecf8024ed31c46af53
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Nov 13 12:48:06 2023 +0000

    Bug 34517: (follow-up) Mark test attribute as searched_by_default
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit a1c9799f91d0535afe40303a3f9c8359dd71c148
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 10 10:59:22 2023 -0300

    Bug 12133: DBRev 23.06.00.079
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b0c4bc36238a5afec267a3e34a62c2af6c0c0599
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Nov 3 15:35:35 2023 +0000

    Bug 12133: (QA follow-up) Tidy for qa script
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4a3fd23acb734a4fd6dbeb418b429414571ab75e
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Nov 3 15:06:17 2023 +0000

    Bug 12133: (QA follow-up) Fix number of tests
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 319216f7d14d43f3e80af0a0cd081e8344ce5d30
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Fri Sep 29 15:19:36 2023 +0300

    Bug 12133: Fix QA issue
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d9a989eaf0ee3d10a4a39c6845247e456951d894
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Fri Feb 17 13:15:17 2023 +0200

    Bug 12133: Add requirements for guarantor and guarantee
    
    Add two requirements when registering a new patron:
    
    - A child patron must have a guarantor. This is controlled by
      a new syspref ChildNeedsGuarantor.
    - A guarantor cannot be a guarantee.
    
    Test plan:
    1. Add a child patron without guarantor or child patron with guarantee
    as guarantor succesfully.
    2. Apply this patch.
    3. Add a child patron as a guarantor.
    => Error is raised.
    4. Turn syspref "ChildNeedsGuarantor" ON.
    5. Add a child patron without a guarantor and error "Child needs a
    guarantor" is raised.
    6. Add guarantor. Guarantor can either be existing patron or added with
    "Contact" section.
    => Save without errors.
    
    Also prove t/db_dependent/Koha/Patron.t
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2120e3d4c8d0fb7c230fbd36e54bfbd3c30937e2
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Nov 7 14:30:04 2023 -0500

    Bug 34868: (QA follow-up) Tidy sip_circulation_status
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e172b279c39a5761b4b5ac51028b4f2a8fbcbe55
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Nov 7 14:20:50 2023 -0500

    Bug 34868: (QA follow-up) Fix XML
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1feeead338be4ae913e7caf10ebf840dc6de5eb6
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Oct 31 13:33:19 2023 -0400

    Bug 34868: (QA follow-up) Rename new option, add comments
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5788a0f2626a715a4d9c245685b335b4038b3e32
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Sep 21 11:44:49 2023 -0400

    Bug 34868: Add ability for SIP2 to distinguish missing item from other lost types
    
    The SIP circulation status specifies that a 12 means an item is lost, and 13 means an item is missing. In Koha, missing items are simply a type of lost item so we never send a 13. This is an important distinction for some SIP based inventory tools. It would be good to be able to specify when lost status means "missing" at the SIP login level.
    
    Test Plan:
    1) Apply this patch
    2) prove t/db_dependent/SIP/Transaction.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ed6fd4d161877dec1161b0adbd71ee6112d31cd2
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Sep 14 15:28:27 2023 +0100

    Bug 34791: Add links to HTML Customizations to CookieConsent preferences
    
    This patch simply adds a note to the CookieConsent and CookieConsentedJS
    system preferences to link to the HTML customizations page and hint at
    which customization should be used to affect the components governed by
    the preferences.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dd70e43b66fc2a887c5a5d6afc165ebf20469354
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Nov 7 19:06:13 2023 +0000

    Bug 35144: Update style of 'Required' label for OPAC patron attributes
    
    This patch makes some changes to style and markup of the part of the
    OPAC patron entry form which displays patron attribute entry fields.
    
    To test, apply the patch and rebuild the OPAC CSS.
    
    - Create at least two patron attributes which have both "Display in
      OPAC" and "Editable in OPAC" checked: One which is linked to an
      authorized value, one which isn't. At least one attribute should be
      mandatory. At least one attribute should be repeatable.
    - Test the form using either patron self-registration or by logging in
      to the OPAC and clicking the "Personal details" link in the sidebar.
    - Check the appearance of required fields in the form, including the
      mandatory patron attributes.
    - Confirm that the "Clear" and "New" controls look good and work
      correctly, including fields cloned with the "New" button.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4fd674761199c2cce6ffbd0c272ee22f19711c4f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 7 11:23:34 2023 +0100

    Bug 35273: Fix item selection when receiving
    
    For partial receives with items created on order, the
    aqorders_items table was not correctly updated when only
    some of the ordered items were received.
    
    To test:
    1) Create a basket with creating items on order
    2) Create an order line with 3 items
    3) Close basked
    4) Receive shipment and create invoice
    5) Receive your created order line
    6) Edit first item displayed, add barcode
    7) Check checkbox and receive
    8) Verify the order line has been split 2:1
    9) Receive again - notice all 3 items are showing.
      We should only see the remaining 2
    10) Undo receive
    11) Apply patch
    12) Repeat steps 5)-9)
    13) Verify that in step 9) only the remaining 2 items display now.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fe93b31ec73f22712189f9e4d385ec453b1cbd5a
Author: Thibaud Guillot <thibaud.guillot@biblibre.com>
Date:   Fri Nov 3 15:30:04 2023 +0100

    Bug 29007: Add cancellation reason input on check in
    
    Test plan:
    
    1) Check an item in with already a confirmed hold
    2) Cancel the hold, it was cancelled without possibility to choosing a
       reason
    3) Apply this patch and do it again, you must see an input to choose
       your cancellation reason (list from VA)
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0faa48e89a3f5a9cd4557b1b06c459fae0b59d77
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Nov 3 16:51:11 2023 +0000

    Bug 35251: Update checkout count when refreshing issue table
    
    1. Have some checkouts
    2. Go to the issue-table and select some of those checkouts and check them in.
    3. Look at the tab, Checkouts(X)
    4. This is not updated and now shows an incorrect number of checkouts.
    4. APPLY PATCH, clear browser cache/
    5. Try again, now when the table reloads the 'Checkouts(X)' tab should be correctly updated.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 41daf4db992101682c40b577fc29e856284e1647
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Nov 3 15:24:49 2023 +0000

    Bug 35068: (follow-up): Make sure renew/checkin selections get retained on reload
    
    To test:
    1. Have two checkouts. Click one for Renew and one for Checkin. Click on Check in selected items.
    2. When the table reloads the 'renew' selections should be retained
    3. Have two checkouts. Click one for Renew and one for Checkin. Click on Renew selected items.
    4. When the table reloads the 'check in' selections should be retained
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e86264606b06cd2e2b8382a5f15873253b90baf1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 19 14:50:18 2023 +0000

    Bug 35068: (follow-up) Update button order and icons
    
    This patch updates the Renew and Check-in buttons so that they have
    icons matching the ones used for the Renew and Check-in search tabs in
    the header.
    
    The patch also moves the Renew button so that it is next to the Renew
    all button. I think this makes more logical sense. So the order is:
    
    - Check in selected items
    - Renew selected items
    - Renew all
    
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a0f1e3029de36a8795e70a24799f6f19e2a9e96e
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Oct 18 20:04:49 2023 +0000

    Bug 35068: (follow-up) Always disable buttons after action
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 33b8a9dbedc550b94c7fa911a7d480a4cd317691
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Oct 17 14:52:07 2023 +0000

    Bug 35068: (follow-up) Disable button after clicking Renew all
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dfda4e8d34c5e13958910eb6cb4eb57c583e9356
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Oct 16 22:20:54 2023 +0000

    Bug 35068: Split RenewCheckinChecked button into seperate renew/checkin buttons
    
    To test:
    1. APPLY patch, clear browser's cache
    2. Have more than 1 checkout issued to a borrower.
    3. Load the checkout table on circ/circulation.pl
    4. Notice that there is now 'Renew selected items' and 'Checkin
       selected items' button.
    5. Play around with each making sure that they work as excepted when
       checkouts are checked in either the 'Check in' or 'Renew' columns.
    6. Uncheck everything in the 'Renew column', the 'Renew selected items'
       button should be disabled.
    7. Uncheck everything in the 'Checkin column', the 'Checkin selected
       items' button should be disabled.
    8. Try unchecking some of these to make sure the Renew/Checkin button is
       properly disabled when no related checkboxes are checked.
    9. Try using the select all/none options at the top of both the 'Renew'
       and 'Checkin' columns. Make sure the 'Renew selected items' and
       'Checkin selected items' become properly disabled/enabled.
    10. Make sure the 'Renew all' button still works properly.
    11. Do the test plan of 5th patch "Make sure renew/checkin selections"
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dbf07b8cd3143660449cc49d855d2ceca56a42fe
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 9 10:45:32 2023 +0100

    Bug 35284: Fix tests
    
    This fix patrons_search.t but other selenium tests certainly need
    adjustements
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5220dd6004ff34d29c29e1e139d6d17ccecff9b4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 9 08:58:41 2023 +0100

    Bug 35284: Add throttling to column filters
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8738dcd9886cdb5d91e481e11d0d1c730a9e9127
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 9 08:58:11 2023 +0100

    Bug 35284: Fix Vue tables
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3819f4a57c9c208746e7f147ab085c36ccaf7d68
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Nov 8 22:23:20 2023 +0100

    Bug 35284: Add DT delay to kohaTable
    
    To test:
    * When a specific initComplete exists (general patron search)
    * When no specific initComplete exists (cities)
    
    => KO
    * ERM tables display twice the "show X entries" dropdown list
    * Column filters are not affected
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a89aee37239495a7a655d99a3a910ecdd3fce835
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Nov 10 01:06:39 2023 +0000

    Bug 35008: (QA follow-up) Add selenium unit tests
    
    This patch addds selenium tests for the ILS-DI feature.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eb130f559ecc0a232adce9a8af0084a99d6e9a81
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Sun Oct 8 21:59:19 2023 +0000

    Bug 35008: Make ILS-DI not require auth when OpacPublic disabled
    
    To test, disable OpacPublic and ensure a call to ilsdi.pl will still return expected results from a private browser, not logged into the OPAC.
    
    Sponsored-by: Auckland University of Technology
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 653dc1b2214d0ebb291766406354c69cfa57c7e1
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Nov 9 21:33:10 2023 +0000

    Bug 35283: Add missing subfield h to action note 583 in OPAC detail page
    
    $x is nonpublic note, so it makes sense to only display it in staff, but
    $h is Jurisdiction and we should show it in OPAC and staff alike.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d74a89e2dabe355f05c4c45b6b39e581509e1c16
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Nov 8 02:24:01 2023 +0000

    Bug 35283: Add missing subfields h and x to field 583 for staff XSLT
    
    This change adds the missing subfields h and x to field 583 for
    the detail XSLT in the staff interface.
    
    Test plan:
    0. Apply the patch and koha-plack --reload kohadev
    1. Go to http://localhost:8081/cgi-bin/koha/cataloguing/addbiblio.pl?biblionumber=29
    2. Click on tab "5"
    3. Scroll down to 583 and click on "ACTION NOTE" to expand subfields
    4. Fill in using the following example:
       583  0#$adowngraded$c19910110$hJoe Smith$otitle$xfrom secret FRD to confidential NSI
    5. Click "Save"
    6. Note that the "Action note" now shows "Joe Smith" and "from secret
       FRD to confidentail NSI"
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 416adc7991656769f500dae19fddf3b59883b9b3
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Thu Nov 9 11:24:40 2023 -0500

    Bug 35304: Add new Sortable library to didyoumean configuration
    
    To test:
    1. Go to Administration > Did You Mean
    2. Attempt to drag and drop plugin options.
    --> Confirm that they are not draggable
    3. Apply patch and clear browser cache
    4. Reload the page
    --> Confirm that drag-and-drop now works
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 64460e4f4e01d8cb84a8037f444e5f7739a6bd40
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Oct 23 22:28:55 2023 +0000

    Bug 33164: Do not prevent processing of all error messages
    
    This follow-up patch removes the use of $exit_required_p completely. The sysprefs BlockReturnOfLostItems and BlockReturnOfWithdrawnItems are handled in other scripts, and should not prevent the processing of all returns error messages when enabled.
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1f56880812323a003d3d9d043c10c3142d397ac4
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Mar 8 11:07:04 2023 +1300

    Bug 33164: Ensure return claim message shows if lost item return blocked
    
    This fix ensures that a return claim confirmation always shows, even if
    the return of lost items has been blocked by BlockReturnOfLostItems
    being enabled.
    
    To test:
    
    1. Set BlockReturnOfLostItems system preference to Block
    2. Check out an item to a patron
    3. Go to the patrons page and claim a return on the item
    4. Check in the item and keep checking in the item. Notice the message
    "Item is lost, cannot be checked in." shows every time, but the return
    claim message only shows sometimes.
    
    5. Apply the patch and restart services
    
    6. Check in the item and keep checking in the item. Confirm both the
    lost message shows and the return claim message shows every time.
    7. Confirm the return of the item is still blocked.
    
    Sponsored-by: Pymble Ladies' College
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4ef2694c39695b7275dcfa77329f4094d2ed1cc4
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Nov 2 13:41:21 2023 +0000

    Bug 21431: Adjust template for logviewer
    
    Test plan:
    Verify that you can filter by reset password.
    And that the uppercase code is replaced by a description.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d2ace878deedee64991ded67d5a235f1b0603584
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Nov 2 12:59:03 2023 +0000

    Bug 21431: Add unit test
    
    Test plan:
    Run t/db_dependent/Koha/Patrons.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a08dd73621eaef979560a386ace1fdfab8e9f3b6
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Nov 2 12:51:35 2023 +0000

    Bug 21431: Add action parameter to set_password
    
    Added to the call in opac-password-recovery.pl. This allows
    differentiating between password change and password reset when
    viewing the logs.
    
    Test plan:
    Enable BorrowersLog.
    Do a password recovery on OPAC.
    Check with log viewer for 'RESET PASS' action.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a3c6207627f7dc9aac0e551b8feeb00b4fdd7caf
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 9 14:48:33 2023 -0300

    Bug 35065: DBRev 23.06.00.078
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c3a5f13b11eed795f4df293e0508dd3402319e0b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 25 16:21:44 2023 +0000

    Bug 35065: (follow-up) Add entry to HTML customization help include
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cd31d8aa22997a731afd55ad519ad9a30f16faee
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 16 16:16:13 2023 +0000

    Bug 35065: Convert SelfCheckHelpMessage system preference to HTML customization
    
    This patch moves the SelfCheckHelpMessage system preference into HTML
    customizations, making it possible to have language- and
    library-specific content.
    
    To test you should have some content in the SelfCheckHelpMessage
    system preference before applying the patch. Apply the patch, run the
    database update process, and rebuild the OPAC CSS.
    
    - In the staff client, go to Tools -> HTML customizations and verify
      that the content from SelfCheckHelpMessage is now stored there.
    - The HTML customization entry form should offer SelfCheckHelpMessage
      as a choice under "Display location."
    - Update and reinstall active translations (for instance fr-FR):
      - perl misc/translator/translate update fr-FR
      - perl misc/translator/translate install fr-FR
    - Enable the translation if necessary under Administration -> System
      preferences -> language.
    - Enable the "opaclanguagesdisplay" preference if necessary.
    - Edit the SelfCheckHelpMessage HTML customization and add unique
      content to the "fr-FR" tab.
    
    - Log into the self checkout system and click the "Help" link at the
      top.
    - On the help page, confirm that the SelfCheckHelpMessage content is
      shown there.
    - Switch to your updated translation and confirm that the content you
      added for your translation shows up correctly.
    - Go to Administration -> System preferences and search for
      "SelfCheckHelpMessage." It should return no results.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1b11de87b991ddae4d31861c9cdc321ce45d229d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Nov 6 14:00:49 2023 +0000

    Bug 35278: Fix warn from column_settings.pl
    
    We need to add scalar to the calls. These parameters are not meant
    to be used as multi_param.
    
    Test plan:
    Try With and without this patch on staff:
    
    Try: /cgi-bin/koha/admin/columns_settings.pl
    => WITHOUT: No warnings
    => WITH: Same. No change.
    Try: /cgi-bin/koha/admin/columns_settings.pl?module=acqui&page=basket
    => WITHOUT: Opens module, scrolls down. CGI::param called in list context in logfile
    => WITH: Opens module, scrolls down.
    Try: /cgi-bin/koha/admin/columns_settings.pl?module=acqui&page=basket&table=orders
    => WITHOUT: Opens module, scrolls down. CGI::param called in list context in logfile
    => WITH: Opens module, scrolls down.
    
    Try: /cgi-bin/koha/admin/columns_settings.pl?module=acqui&module=admin
    * Hash like: panel => acqui, admin => page, undef  => table, undef => modules, $modules (SHIFTED)
    => WITHOUT: Acqui expanded showing: There is no page using the table configuration in this module.
    => CGI::param warning in log.
    => And: Problem = a value of table has been passed to param without key
    => And: Problem = a value of modules has been passed to param without key
    => WITH: Only the first module (Acqui) should be expanded.
    
    Try: /cgi-bin/koha/admin/columns_settings.pl?module=acqui&module=admin&page=basket&table=orders
    * Hash like: panel => acqui, admin => page, basket => table, orders => modules, $modules hash (SHIFTED)
    => WITHOUT: Acqui expanded showing: There is no page using the table configuration in this module.
    => And: CGI param log warning.
    => WITH:: Opens Acqui. Second module ignored. Scrolling.
    
    Try: /cgi-bin/koha/admin/columns_settings.pl?module=admin&module=acqui&page=basket&table=orders
    * Hash like: panel => admin, acqui=> page, basket => table, orders => modules, $modules hash (SHIFTED)
    => WITHOUT: Admin expanded showing: There is no page using the table configuration in this module.
    => And: CGI param log warning.
    => WITH: Admin should be expanded (page and table ignored, not in Admin). No scroll.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f1e1686ae94820eac8947504100988621f4db2bb
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Nov 9 17:31:57 2023 +0000

    Bug 34587: (follow-up) Remove unnecessary code
    
    This patch removes some commented out lines and some unnecessary imports. No impact to working code - self signoff
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cf8bfc8b4245dfe02c8e3b2780e717545be79224
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 9 14:39:45 2023 -0300

    Bug 35063: (follow-up) Adjust dbrevs to the reference format
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 95bf97dd737c2d46d76eaa97e11cf5077b5833d7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 9 14:33:59 2023 -0300

    Bug 35063: (follow-up) Add reference example for HTML customizations on skeleton.pl
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c892dc9238d096c3e419fdb9f3a306939a03626b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 9 14:26:27 2023 -0300

    Bug 35063: DBRev 23.06.00.077
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2f566b51f6ecc85883eac70c8d64a51fa5d3e20a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 25 16:14:38 2023 +0000

    Bug 35063: (follow-up) Add entry to HTML customization help include
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 71834ac9e18436b670aa9e769335e8e882962c2e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 16 15:16:22 2023 +0000

    Bug 35063: Convert SelfCheckInMainUserBlock system preference to HTML customization
    
    This patch moves the SelfCheckInMainUserBlock system preference into
    HTML customizations, making it possible to have language- and
    library-specific content.
    
    To test you should have some content in the SelfCheckInMainUserBlock
    system preference before applying the patch. Apply the patch, run the
    database update process, and rebuild the OPAC CSS.
    
    - In the staff client, go to Tools -> HTML customizations and verify
      that the content from SelfCheckInMainUserBlock is now stored there.
    - The HTML customization entry form should offer
      SelfCheckInMainUserBlock as a choice under "Display location."
    - Update and reinstall active translations (for instance fr-FR):
      - perl misc/translator/translate update fr-FR
      - perl misc/translator/translate install fr-FR
    - Enable the translation if necessary under Administration -> System
      preferences -> language.
    - Enable the "opaclanguagesdisplay" preference if necessary.
    - Edit the SelfCheckInMainUserBlock HTML customization and add unique
      content to the "fr-FR" tab.
    
    - Log into the self check-in system and confirm that the
      SelfCheckInMainUserBlock content is shown there.
    - Switch to your updated translation and confirm that the content you
      added for your translation shows up correctly.
    - Go to Administration -> System preferences and search for
      "SelfCheckInMainUserBlock." It should return no results.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7b19633209af54baf53a0e9b03369eb2580ebb12
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 9 14:24:29 2023 -0300

    Bug 35048: DBRev 23.06.00.076
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d348e5f9a393c5e3559cbbf66885de98b01121eb
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 25 16:08:45 2023 +0000

    Bug 35048: (follow-up) Add entry to HTML customization help include
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c87385942339e2ff2bae240a685accdad5f76dd8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 12 18:01:04 2023 +0000

    Bug 35048: Convert SCOMainUserBlock system preference to HTML customization
    
    This patch moves the SCOMainUserBlock system preference into HTML
    customizations, making it possible to have language- and
    library-specific content.
    
    The patch also makes a minor fix to CSS in order to get the "Back to
    top" link to show up correctly in self-checkout and self-checkin.
    
    To test you should have some content in the SCOMainUserBlock
    system preference before applying the patch. Apply the patch, run the
    database update process, and rebuild the OPAC CSS.
    
    - In the staff client, go to Tools -> HTML customizations and verify
      that the content from SCOMainUserBlock is now stored there.
    - The HTML customization entry form should offer SCOMainUserBlock
      as a choice under "Display location."
    - Update and reinstall active translations (for instance fr-FR):
      - perl misc/translator/translate update fr-FR
      - perl misc/translator/translate install fr-FR
    - Enable the translation if necessary under Administration -> System
      preferences -> language.
    - Enable the "opaclanguagesdisplay" preference if necessary.
    - Edit the SCOMainUserBlock HTML customization and add unique
      content to the "fr-FR" tab.
    
    - Log into the self checkout system and confirm that the
      SCOMainUserBlock content is shown there.
    - Switch to your updated translation and confirm that the content you
      added for your translation shows up correctly.
    - Go to Administration -> System preferences and search for
      "SCOMainUserBlock." It should return no results.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6815af3febea19c59da425382eac7cdd1ff03faf
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Nov 9 10:35:06 2023 +0000

    Bug 35194: Remove obsoleted sortable function
    
    Removes two occurrences and a commented one.
    
    Test plan:
    [1] Go to cataloguing editor. Open dev console. Clone 500.
    [2] Go to Admin/Did you mean. Try to toggle options.
    
    With this patch it works. Without this patch, JS errors.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9e9fa64d5a9f8966c45a923b258c994df70ac35f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 9 13:21:06 2023 +0000

    Bug 34413: Fix style of Flatpickr in iOS mobile view
    
    This patch updates Flatpickr CSS in the OPAC and staff interface so that
    date fields are displayed correctly in iOS mobile views.
    
    To test, apply the patch and rebuild the OPAC and staff interface CSS.
    
    - In the OPAC, click "Create new account"
    - In the account entry form, confirm that the date of birth field looks
      correct and that the date-picker works as it should.
    - In the staff client, go to Patrons -> New patron.
    - Check the date of birth field in this form too.
    
    This patch has been tested in the Xcode iOS device simulator with iOS
    17. While I wasn't able to reproduce the problem in Firefox, I was able
    to use the developer tools' responsive design mode to trigger the mobile
    view and thus be able to see the styles which are being applied:
    
    - In the OPAC, on the "Create new account" screen, open the Web
      Developer Tools panel (Tools -> Browser tools -> Web Developer Tools).
    - Click the "Responsive Design Mode" button in the upper-right corner of
      the developer tools panel (it looks like a phone and tablet together).
    - The main browser window will now how some settings at the top.
    - In the first dropdown, choose an iPhone model.
    - The date of birth field should now be styled differently because of
      the addition of a "flatpickr-mobile" style.
    - Right-click the field and choose "Inspect." In the developer console
      you can see the styles which are being applied to the field. One of
      those should be ".flatpickr-input.flatpickr-mobile"
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bd4f59cd9aef0b271450d97bd87ae29c60730bcd
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Jun 27 09:08:52 2023 +0000

    Bug 34058: Use buildSearchPatronQuery when searching for patrons on left side filters
    
    This will now use the centered logic from buildSearchPatronQuery, not only
    fixing the original issue of not being considering all the terms in the
    search input, but also reusing already established code.
    
    Test plan, k-t-d:
    1) Install FreeForm, enable ILLModule sys pref, run:
    bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev.sh)
    2) Create a FreeForm ILL request and input 23529000035676 in the cardnumber, that's "Henry Acevedo".
    3) Go back to the ILL list table, input "henry" in the bottom "Patron" filter input and press the "Search" button, notice it fetches the request correctly.
    4) Now do the the same search but with "henry acevedo", notice the request is not retrieved.
    5) Apply patch. Repeat. Do the same for the "patron" input field and the "keyword" input field.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c162b8aa465bc5f5cd29751a5d8561789d0597a0
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Jun 27 09:07:49 2023 +0000

    Bug 34058: Preparation: buildPatronSearchQuery
    
    Add table_prefix argument to buildPatronSearchQuery.
    This allows the buildPatronSearchQuery function to also perform the search
    on a related table, instead of the default patron table.
    This is relevant because the query will be performed on the ILL API endpoint,
    so the table being searched will have to be prefixed with 'patron.', instead of the
    default 'me.'
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 62425b0d859a121bf784a1e22b922441c758a56b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Nov 9 15:10:39 2023 +0100

    Bug 35303: (bug 26916 follow-up) Fix paton autocomplete
    
    Fix the following JS error:
    Uncaught TypeError: search_fields.forEach is not a function
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 771334218acc2a5eb97bac1eab38a53543084444
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Nov 8 21:18:27 2023 +0000

    Bug 35295: Move JS asset in returns.tt
    
    To Test:
    1. Place a hold
    2. Check-in an item of the held record
    3. No hold modal 😱
    4. APPLY PATCH
    5. Hold modal!!!
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8a7d34bb1ea23be0506e8661e72013577a89e0dc
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 9 10:11:08 2023 -0300

    Bug 34517: DBRev 23.06.00.075
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit beecec2b591e219fca1b1d14ea285f30feaa5114
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 9 10:09:20 2023 -0300

    Bug 34517: (QA follow-up) Standardize boolean attributes definition
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 83612d5ecb36c1c03cc21ed59e19454123c01c90
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 9 10:07:06 2023 -0300

    Bug 34517: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 337b18546c0cf6518fa76806200ceca4d652ebcf
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Nov 5 01:14:52 2023 +0000

    Bug 34517: (QA follow-up) Perltidy and fix column check
    
    Without the fix a second run of the database update would fail.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dc59d34688c40cc7fbac0342cda39cda4f34a236
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 11 19:31:57 2023 +0000

    Bug 34517: Add option search patron attributes by default
    
    This patch moves form any staff_searchable attribute being automatically
    included in the the Standard patron serch, to allowing the librarian to choose.
    Current searchable attributes will be marked as 'searched_by_default'
    
    To test:
    1 - Add a searchable patron attribute type
    2 - Add some values
    3 - Confirm they are searched in a 'Standard' patron search
    4 - Apply patch
    5 - Go to admin - >patron attribute types
    6 - Note new 'Searching' column
    7 - Confirm attribute is 'Searched by default'
    8 - Confirm searches work as before
    9 - Edit the attribute type
    10 - Uncheck 'searched_by_default'
    11 - Save
    12 - Confirm attribute not searched in 'Standard' search
    13 - Select the attribute in patron search dropdowns
    14 - Confirm it is correctly searched
    
    Signed-off-by: Kelly McElligott <kelly@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 72b106d0b5e74b75d6d1ee45c56539859ca1d23c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 11 13:11:20 2023 +0000

    Bug 34517: Add boolean to search columns for schema
    
    Signed-off-by: Kelly McElligott <kelly@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4c712ef80f03284cebfef8557167054608add4ec
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 11 13:07:52 2023 +0000

    Bug 34517: DB updates
    
    Signed-off-by: Kelly McElligott <kelly@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0c9cabbff70f443fb0836a7160a41392fb867b2c
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Sep 11 20:38:12 2023 +0000

    Bug 34708: Add ability to modify orderline to increase quantity
    
    This enhancement allows libraries to modify an existing orderline and increase the quantity in the order. The quantity is increased by adding more items to the order, through the usual Item for which is visible when adding or modifying an order.
    
    To test:
    
    1. Ensure you have a budget, fund, vendor etc. to use the Acquisitions module
    2. Open a new basket. Make sure you do NOT check the 'orders are standing' option
    3. Add an order to the basket using any method. Add an item or more to this orderline and save the order to the basket
    4. Click Modify to edit the orderline
    5. Notice the quantity text field. Try to directly change this number. You'll get an error pop-up and be redirected back to the basket.
    
    6. Apply the patch, restart services, refresh the basket page
    
    7. Click Modify to edit the orderline
    8. Notice the item form and Items list table is visible with your existing item(s) for this order. There should be no Action buttons as actions can't be done on an existing item order.
    9. Confirm you are able to add more items to the Items list and to the order by filling out the form and clicking 'Add item' as normal. Confirm the quantity increases accordingly.
    10. Confirm the Edit and Delete buttons for newly added items work as expected
    11. Save and confirm the quantity for the orderline has increased
    12. Confirm this behaviour persists with the other methods of adding new orders to a basket
    
    Sponsored-by: Pymble Ladies' College
    Signed-off-by: Katariina Hanhisalo <katariina.hanhisalo@xamk.fi>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Perltidy
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f74e5d1d9d47b15249bf525a66cab3974f427f1a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 9 09:57:01 2023 -0300

    Bug 34894: DBRev 23.06.00.074
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9c470d97701583a611e6de691776616ce799b7dc
Author: David Nind <david@davidnind.com>
Date:   Thu Oct 26 20:23:44 2023 +0000

    Bug 34894: (follow-up) Fix id for HTML customization help
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 63b5ca46d5ef91b9e02b871967203e65efb33a1c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 25 16:01:19 2023 +0000

    Bug 34894: (follow-up) Add entry to HTML customization help include
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5fc6bedaa714e8e49b0907f44a5ad32342402fbc
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Sep 29 14:19:15 2023 +0000

    Bug 34894: Convert OpacSuppressionMessage system preference to HTML customization
    
    This patch moves the OpacSuppressionMessage system preference into HTML
    customizations, making it possible to have language- and library-specific
    content.
    
    To test you should have some content in the OpacSuppressionMessage
    system preference before applying the patch. Apply the patch and run the
    database update process.
    
    - In the staff interface, locate a bibliographic record and open it for
      editing.
    - Under tab 9, tag 942, change subfield n, "Suppress in OPAC", to "Yes"
      and save the record.
    
    - Go to the OPAC and try to navigate directly to the bibliographic
      detail page for that record:
      /cgi-bin/koha/opac-detail.pl?biblionumber=X
    - You should be redirectd to the "Blocked" page. Under the message "You
      are not authorized to view this record" you should see the content
      which was previously in the OpacSuppressionMessage system preference.
    
    - In the staff client, go to Tools -> HTML customizations and verify
      that the content from OpacSuppressionMessage is now stored there.
    - The HTML customization entry form should offer OpacSuppressionMessage
      as a choice under "Display location."
    - Update and reinstall active translations (for instance fr-FR):
      - perl misc/translator/translate update fr-FR
      - perl misc/translator/translate install fr-FR
    - Enable the translation if necessary under Administration -> System
      preferences -> language.
    - Enable the "opaclanguagesdisplay" preference if necessary.
    - Edit the OpacSuppressionMessage HTML customization and add unique
      content to the "fr-FR" tab.
    
    - Go to the OPAC and switch to your updated translation. Try to view
      the suppressed record again and confirm that the content you added
      for your translation shows up correctly.
    - Go to Administration -> System preferences and search for
      "OpacSuppression." The description of these preferences should show an
      updated message about using HTML customizations to create
      OpacSuppressionMessage content.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 24b22e61b16b1743779229817a58e2f4d0178c80
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Nov 6 12:36:43 2023 +0000

    Bug 32986: (follow-up) Unit tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 827b98046978f1408f0a9cfab9ee98f2acbbdc57
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Nov 4 22:55:28 2023 +0000

    Bug 32986: (QA follow-up) Remove 'slip' from print dialog
    
    This makes it more flexible and the slip can be added to the
    notice name easily.
    
    For example: In German the slip would usually be part of the word, not separate:
    Gebührenquittung (slip = quittung)
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 311658bfb7e346e94dbab61a0f5e748641e7e46d
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Nov 4 22:50:37 2023 +0000

    Bug 32986: (QA follow-up) Rename notices module
    
    This renames the notices and slips module from
    Patrons toolbar (slip) to Patrons (custom slip)
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 48494c357c0042d5161c352119ad354ec41f6d99
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 10 16:14:02 2023 +0000

    Bug 32986: (follow-up) Fix CircAutoPrintQuickSlip and remove unecessary module usage
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9d2567a6f8d0d2788f58a055887d8cd15024a8bf
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jul 14 12:54:35 2023 +0000

    Bug 32986: (follow-up) POD
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c53e6e977ff394c4b2a70e4beae002f36869f85b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jul 14 12:47:29 2023 +0000

    Bug 32986: (follow-up) Tidy conditional in letter.pl
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6322e08a028700fef07951b371ddd421ad51ff6d
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Apr 11 21:35:56 2023 +0000

    Bug 32986: (QA follow-up) Fix QA script complaints: tabs and TT filters
    
    * Perltidied the section with tabs in printslip.pl
    * Fixed indentation and tabs in letter.tt
    * Added missing TT filters to members-toolbar.inc
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c3b40a54992cc856bc3ff6d82c254d0bec896fb7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Feb 16 19:50:49 2023 +0000

    Bug 32986: Add patron_slip module to letters and allow printing on members account
    
    This patch adds a new module to letters 'patron_slip' / Patrons toolbar
    (slip)
    
    This also combines some of the slip printing JS to make things more
    direct
    
    To test:
    1 - Apply patch
    2 - restart_all
    3 - yarn build
    4 - Confirm you can print slip, summary, quickslip, and checkin slip
      when viewing a patron's account
    5 - Enable  DisplayClearScreenButton syspref, and test that it works
      with both values
    6 - Go to Tools->Notices and slips
    7 - Define a new notice in the 'Patron toolbar (slip)' module
    8 - Enter content like below in the 'Print' transport:
    Patron has [% borrower.holds.count %] holds
    
    List of holds:
    [% FOREACH hold IN borrower.holds %]
    ===============================
        Reserve id: [% hold.reserve_id %]
        Title [% hold.biblio.title %]
    [% END %]
    9 - Go to patron scree
    10 - Note new option under 'Print'
    11 - Print the new slip and confirm it works (try with and without
      placing holds for patron
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5ef8eac3648c56cdaf0992301ee3d8ab01c2855a
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Oct 13 21:01:58 2023 +0000

    Bug 26468: Add damaged as a searchable status in item search
    
    This patch removes the Damaged radio box options ( Ignore, yes, no ) in favor a full damage status search option
    
    To test:
    1. APPLY PATCH, restart services.
    2. Make sure you mark some items as damaged.
    3. Go to the item and search and limit by 'Damaged'
    4. You should only see your 'Damaged' items.
    5. Export the results as a CSV, make sure the CSV is well-formed and accurate.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Perltidied.
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7e2f6d66d6a8cae55d3c879ec2ce89af59439ffa
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Nov 3 20:10:01 2023 +0000

    Bug 35254: Add import_record_id to order inputs
    
    This patch follows the logic of bug 32166 and adds specific inputs for each order to avoid any misalignment when some records are not imported
    
    To test:
    1 - Find a vendor in acquisitions
    2 - Create or find an open basket
    3 - Add to basket form a new file
    4 - Stage file and add to basket
    5 - Select the second record in the list
    6 - Enter price info
    7 - Save (don't forget, you need to set item type in the second tab)
    8 - The order has no price info!
    9 - Apply patch
    10 - Repeat 3-7 above, staging file fresh
    11 - Confirm order has correct prices
    12 - Test with a file with many records
    13 - Confirm any combination of choosing/skipping records works as expected
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 64edb692458262133818553c4cbfa86ca3612260
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Nov 6 19:40:06 2023 +0000

    Bug 35262: Improve OPAC self registration confirmation page
    
    This patch corrects logic in the OPAC self registration confirmation
    template so that the right column markup is shown when various
    combinations of OpacNav, OpacNavBottom, and OpacNavRight are displayed.
    
    To test, apply the patch and enable the PatronSelfRegistration system
    preference, and deactivate the PatronSelfRegistrationVerifyByEmail
    preference.
    
    - Go to the OPAC and start the process of registering online.
    - Fill in the form and submit it.
    - On the registration confirmation page, check that the layout looks
      correct.
    - Test with the presence of various combinations of OpacNav,
      OpacNavBottom, and OpacNavRight HTML customizations.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cc70e17f5d07ad8988a1a4a02e0049abc7428547
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 31 17:10:15 2023 +0000

    Bug 35206: Adjust style of add button on curbside pickups administration
    
    This patch adds Bootstrap classes to the "Add" button on the curbside
    administration page, in the "Curbside pickup hours" section. This makes
    it consistent with the markup of similar buttons in the interface and
    makes it slightly smaller so that it fits better in the form.
    
    To test, apply the patch and make sure the "CurbsidePickup" preference
    is enabled.
    
    - Go to Administration -> Curbside pickups.
    - Fill out the form, including the "New slot" fields in the "Curbside
      pickup hours" section.
      - Confirm that the corresponding "Add" button looks correct, and that
        it works to add your new slot.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 84cb4624cf4326459bbae9f0231c4b4b461f2313
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 8 17:50:20 2023 -0300

    Bug 33217: DBRev 23.06.00.073
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1c2796c33974b01c7e782c6a7aea0a7be4666c5f
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Nov 5 01:44:49 2023 +0000

    Bug 33217: (QA follow-up) Improve system preference description
    
    * Make sure MARC21 is mentioned, as this only updates MARC21 XSLT files
    * Move ending punctuation outside the pull down
    * remove 'obey' - it's not needed
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0fdd923d72febdd623073896b9a659e063cd1ff9
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Nov 5 01:40:17 2023 +0000

    Bug 33217: (QA follow-up) Tiny tidy of atomicupdate
    
    Just adds an end and removes the commented line.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 650ea20950e19d255918243773b4b323fa55cb40
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 25 12:33:05 2023 +0000

    Bug 33217: Tidy
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4627f1a8222040b7bf9c22eccdc16f8c145b8603
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Mar 14 15:12:32 2023 +0000

    Bug 33217: DB update
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4b71a85e13ce88d1e6a84be35d0be6d3b27eecbe
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 13 19:45:49 2023 +0000

    Bug 33217: Allow specifiying sort field and order for authro links
    
    When using the facets for author, i.e. limiting a search, it makes sense to preserve the default sort order for the results (relevance, etc)
    
    When clicking on an author to search the catalog for all works by an author, it would be nice to be able to optionally specify sorting for the listing - i.e. publication date, or title
    
    This patch adds two new system preferences:
    AuthorLinkSortBy
    AuthorLinkSortOrder
    
    To test:
    1 - Do a search in intranet and staff for 'austen'
        or an author you have multiple titles from
    2 - Click the linked name
    3 - Note a new search is performed, sorted by field from
        defaultSortField  preference
    4 - Apply patch, updatedatabase, restart_all
    5 - Ensure nothing has changed by searching again
    6 - Set AuthorLinkSortBy to 'date of publication' and
        AuthorLinkSortORder to asc
    7 - Search again, comfirm links obey sorting specific above
    8 - Test other values - confirm links are updated in both staff/opac
        and results/details
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 51ef0f688eaf90031321e7b573780b81fccbfda4
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 11 17:40:28 2023 +0000

    Bug 26916: Adjust unit tests
    
    Signed-off-by: Janusz Kaczmarek <januszop@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cdbf176e8f2bde3ed546701d48e95a7c46bb477b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 11 15:57:42 2023 +0000

    Bug 26916: Show searchable patron attributes in patron search dropdown
    
    This patch adds attributes that have been marked searchable to the patron
    search dropdowns
    
    To test:
    1 - Define some new patron attribute types and make then staff_searchable
    2 - Add some values to patrons
    3 - Confirm they are searched in 'Standard' search, but there is no other way to search them
    4 - Apply patch
    5 - Confirm the fields now show in patorn search dropdowns
    6 - Search using 'standard' and confirm the searhc works
    7 - Search specific attributes and confirm the searhc works
    
    Signed-off-by: Janusz Kaczmarek <januszop@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cf70fd27da5229f212b57e5c3534f45777228b6c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 18 12:16:29 2023 +0000

    Bug 34519: (follow-up) fix QA tool complaints
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3a74e69b15fac8772d6a98dfdefea9a8d1dca4a7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 11 16:43:14 2023 +0000

    Bug 34519: Ensure we always have an array
    
    Signed-off-by: Janusz Kaczmarek <januszop@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1bfaa2a5a5f9ea5b97417c97010bd3f456ce784c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 11 14:37:07 2023 +0000

    Bug 34519: Unit tests
    
    Signed-off-by: Janusz Kaczmarek <januszop@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9d69ae986a9f022d03a806838b34ed794a17d8c5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 11 14:16:12 2023 +0000

    Bug 34519: Add a template plugin for fetch searchable patron attributes
    
    This patch moves code form scripts to a template plguin and unifies the calls
    
    To test:
    1 - Add a searchable patron attribute type
    2 - Add values to several patrons and test patron searching from
        Patrons home
        Patrons search results
        Holds request screen
        Article request screen
        Patron search sidebar
    3 - Apply patch
    4 - Confirm results are the same
    
    Signed-off-by: Janusz Kaczmarek <januszop@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1e56d4953ac1a133d8a0dea5e04f72cd690da9a3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 8 17:41:24 2023 -0300

    Bug 34188: DBRev 23.06.00.072
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 841b052ff87823e43bbf35c8ca39f0bbeede8985
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Nov 4 23:53:30 2023 +0000

    Bug 34188: (QA follow-up) Add standard validation to login form
    
    This changes how the required appears. Now it will display 'our'
    text for requires fields instead of using the browser default.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aae59b54f5ac5429ffa1eaaeb2a2c950ac1c3680
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Nov 4 23:46:39 2023 +0000

    Bug 34188: (QA follow-up) Fix different versions of system preference name: Force(d)LibrarySelection
    
    There were references to ForceLibrarySelection and ForceLibrarySelection (notice
    the additional d) in the patch.
    
    Standardized to: ForceLibrarySelection
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5a5c034b8d24f66763c53e72dc814821418482c5
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 17 19:32:44 2023 +0000

    Bug 34188: (follow-up) Rename pref to 'ForceLibrarySelection' and tidy
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9603f118837bb8171081da6f892761f2d341726f
Author: Sam Lau <samalau@gmail.com>
Date:   Thu Jul 6 19:59:50 2023 +0000

    Bug 34188: Require Library Branch Selection when Logging in
    
    This patch adds the ability to force staff to select a library when
    logging into the staff interface. This is done via a new system
    preference: 'ForcedLibrarySelection'
    
    To test:
    1) Apply patch, restart_all, and updatedatabase
    2) Log out of the staff interface. Notice the login form looks the same
       and the "Library:" dropdown has 'My Library" selected as default. Log
       back into the staff interface.
    3) In Administration, search for the system preference
       "ForcedLibrarySelection". Set it to 'Force' and press save.
    4) Log out of the staff interface. Notice that this time, the "Library:"
       dropdown is required and has a blank selection as the default.
    5) Fill in the username and password but do not select a library. Click
       'Log in'
    6) Notice you cannot log in and are asked to 'Please select an item in
       the list'
    7) Select a library from the drop down and click 'Log in'
    8) Notice the login was successful and you were logged in to the library
       you selected.
    9) Try loggin in with some other libraries to verify it works as
       expected
    10) Sign-off :)
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f4001d5462a3490d04e65b3cf7a45174b9eb4b86
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 8 17:36:37 2023 -0300

    Bug 34328: DBRev 23.06.00.071
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1dd482bb8ebf7091dfff913ad9dc8f8a0e6f328d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 6 10:41:20 2023 +0100

    Bug 34328: Make update idempotent
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Perltidied the atomic update.
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 037619ab95d502086fe9727536fad9496301d2e1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jul 21 08:21:23 2023 +0100

    Bug 34328: (follow-up) Add description to en_GB
    
    This follow-up adds the language description string for Scottish Gaelic
    to the en_GB translation.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 44aa68c3dfa2b067b317cdb1c6578e517e115d46
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jul 20 16:31:40 2023 +0100

    Bug 34328: Add Scottish Gaelic to languages
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1558e8c1654759124538e8bb40f3ba007a7d9bca
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Wed Oct 4 17:36:05 2023 +0000

    Bug 34985: Add a quantity field to the manual invoice form
    
    This patch add a Quantity field and a Cost field to the manual invoice form this will allow to automatically multiply the amount when it has a default amount.
    
    Test plan:
    
    1) Apply the patch
    2) Create multiple charge types some with default amount and some without default amount
        1-1) Go to Administraion -> Debit types
        1-2) Click on New Debit types
        1-3) Fill the form check the "Can be manually invoiced?" field
        1-5) Click on save
    3) Create a manual invoice
        2-1) Find a patrons
        2-2) Click on Accounting tab
        2-3) Click on Create manual invoice tab
        2-4) Select a type with default amount set
            ->Cost field and Quantity field should be added to the form
        2-5) Edit the Cost field or Quantity field
            ->The amount will be automatically calculate
        2-6) Select a type with no default amount set
            ->Cost field and Quantity field should not be added to the form
    
    Signed-off-by: Kristi Krueger <kkrueger@cuyahogalibrary.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 46b8650858b3a5a057775e7283751c021477c852
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 8 17:32:15 2023 -0300

    Bug 34889: DBRev 23.06.00.070
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 646683de1ea9c57af6776a054446dd1a769c4488
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 25 15:12:21 2023 +0000

    Bug 34889: (follow-up) Add entry to HTML customization help include
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 660ae805ad58ae549837a22fcd8e78ebaa1fc80b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 25 14:53:25 2023 +0000

    Bug 34889: (follow-up) Revise database update following Bug 31383
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c2b4115d9c7b32b14d73d4633c8a8d62aac1ec66
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Sep 22 15:27:11 2023 +0000

    Bug 34889: Convert PatronSelfRegistrationAdditionalInstructions system preference to HTML customization
    
    This patch moves the PatronSelfRegistrationAdditionalInstructions system
    preference into HTML customizations, making it possible to have
    language- and library-specific content.
    
    To test you should have some content in the
    PatronSelfRegistrationAdditionalInstructions system preference before
    applying the patch. Apply the patch and run the database update process.
    
     - In the staff client, go to Tools -> HTML customizations and verify
       that the content previously in the
       PatronSelfRegistrationAdditionalInstructions preference is
       now stored there.
     - The HTML customization entry form should offer
       PatronSelfRegistrationAdditionalInstructions as a choice under
       "Display location."
     - Go to Administration -> System preferences and enable
       "PatronSelfRegistration." Set "PatronSelfRegistrationVerifyByEmail"
       to "Don't require."
     - Go to the OPAC and click "Register here."
     - Submit a new registration and confirm that the content that was
       previously stored in the system preference is shown correctly on the
       registration confirmation page.
     - Update and reinstall active translations (for instance fr-FR):
       - cd misc/translator/
       - perl translate update fr-FR
       - perl translate install fr-FR
     - Enable the translation if necessary under Administration -> System
       preferences -> language.
     - Enable the "opaclanguagesdisplay" preference if necessary.
     - Edit the PatronSelfRegistrationAdditionalInstructions HTML
       customization and add unique content to the "fr-FR" tab.
     - Go to the OPAC and switch to your updated translation.
       Complete the online registration process again to confirm that the
       content you added for your translation shows up correctly on the
       confirmation page.
     - Go to Administration -> System preferences and confirm that the
       PatronSelfRegistrationAdditionalInstructions  preference has been
       removed.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fd0cb986222b35779cf181ec5977399706f05f42
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 8 17:27:45 2023 -0300

    Bug 34869: DBRev 23.06.00.069
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8ac8fdf97cbc190f1ab7001f9373079e67c4ca31
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 25 15:20:06 2023 +0000

    Bug 34869: (follow-up) Add entry to HTML customization help include
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2e29442a762eba24d29507bd99c405b0f73b820b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 25 14:33:05 2023 +0000

    Bug 34869: (follow-up) Revise database update following Bug 31383
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 781ef6c4c44edb94ea8fa70bfcc2fe66838ac6a8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Sep 21 17:21:37 2023 +0000

    Bug 34869: Convert OPACResultsSidebar system preference to HTML customization
    
    This patch moves the OPACResultsSidebar system preference into HTML
    customizations, making it possible to have language- and library-specific
    content.
    
    To test you should have some content in the OPACResultsSidebar system
    preference before applying the patch. Apply the patch and run the
    database update process.
    
     - Go to the OPAC and perform a catalog search.
     - Confirm that the content in the sidebar under the search facets,
       which was previously in the OPACResultsSidebar system preference, is
       still displayed.
     - In the staff client, go to Tools -> HTML customizations and verify
       that the content from OPACResultsSidebar is now stored there.
     - The HTML customization entry form should offer OPACResultsSidebar as
       a choice under "Display location."
     - Update and reinstall active translations (for instance fr-FR):
       - cd misc/translator/
       - perl translate update fr-FR
       - perl translate install fr-FR
     - Enable the translation if necessary under Administration -> System
       preferences -> language.
     - Enable the "opaclanguagesdisplay" preference if necessary.
     - Edit the OPACResultsSidebar HTML customization and add unique content
       to the "fr-FR" tab.
     - Go to the OPAC and switch to your updated translation. Perform
       another catalog search to confirm that the content you added for your
       translation shows up correctly.
     - Go to Administration -> System preferences and confirm that the
       OPACResultsSidebar preference has been removed.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 15fefd7c3ee716f6019d69f1aad09be507342ebd
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 8 14:56:20 2023 -0300

    Bug 23798: DBRev 23.06.00.068
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 24cb527bb785e72aa40086975076d669e0c47702
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 8 14:53:11 2023 -0300

    Bug 23798: Atomic update fixes
    
    This patch makes the atomic update remove the syspref even if it wasn't
    previously set. It also tweaks the printed information to comform with
    current practices.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d2ffd8ed886aa38ed0c505a83bac9a114e1fc00
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 8 16:56:09 2023 +0000

    Bug 23798: (follow-up) Revise database update following Bug 31383
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fb590ffd5b0495bebe7511e2a9e81118862e2ad3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 25 15:46:04 2023 +0000

    Bug 23798: (follow-up) Add entry to HTML customization help include
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b7f0b58ee8e39562b03395ffe16fe0e2db1a2f30
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 12 14:17:57 2023 +0000

    Bug 23798: Convert OpacMaintenanceNotice system preference to additional contents
    
    This patch moves the OpacMaintenanceNotice system preference into HTML
    customizations, making it possible to have language-specific content.
    
    The patch modifies the OPAC maintenance page template so that the
    language selection menu can be shown correctly according to the
    OpacLangSelectorMode preference.
    
    To test you should have some content in the OpacMaintenanceNotice
    system preference before applying the patch. Apply the patch and run the
    database update process.
    
    - In the staff client, go to Tools -> HTML customizations and verify
      that the content from OpacMaintenanceNotice is now stored there.
    - The HTML customization entry form should offer OpacMaintenanceNotice
      as a choice under "Display location."
    - Update and reinstall active translations (for instance fr-FR):
      - perl misc/translator/translate update fr-FR
      - perl misc/translator/translate install fr-FR
    - Enable the translation if necessary under Administration -> System
      preferences -> language.
    - Enable the "opaclanguagesdisplay" preference if necessary.
    - Enable the "OpacMaintenance" system preference.
    - Edit the OpacMaintenanceNotice HTML customization and add unique
      content to the "fr-FR" tab.
    
    - Try to view any page in the OPAC. You should see the content you
      added to the OpacMaintenanceNotice HTML customization.
    - Switch to your updated translation. The page should redisplay with
      your translated content.
    - Go to Administration -> System preferences and search for
      "OpacMaintenanceNotice." The search should return no
      results.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1869a0e18cc51c6a4316af47c31cdb8fc79fcdaa
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Nov 6 14:48:59 2023 +0000

    Bug 35261: Update links for self registration avoiding "here"
    
    This patch updates several OPAC templates to change the wording of the
    self registration link to "Create an account."
    
    Minor adjustments to CSS have been made to make whitespace around the
    links more comfortable.
    
    To test, apply the patch and rebuild the OPAC CSS.
    
    - If necessary enable the PatronSelfRegistration system preference is
      enabled.
    - Go to the OPAC and check the login form in the right-hand sidebar.
    - Click the "Log in to your account" link in the header and check the
      form displayed in the modal window.
    - Navigate directly to /cgi-bin/koha/opac-user.pl and check the link on
      the login page.
    - Complete the self-registration process and check the link in the
      right-hand sidebar menu on the "Registration complete" page.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit db19d3f18d8eaffce7def6adc6c86941b9d33d34
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Nov 3 16:45:22 2023 +0000

    Bug 21284: (QA follow-up) Fix QA script issues
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 37c8cf6e34de8db5a3147ffed9cfa96e075080f1
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Nov 3 16:43:47 2023 +0000

    Bug 21284: (QA follow-up) Rename itemonhold and recordonhold
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d1d5811279fe6a2c8fc0953142fffe3adc9f249b
Author: Matthias Meusburger <matthias.meusburger@biblibre.com>
Date:   Fri Apr 27 16:22:28 2018 +0200

    Bug 21284: ILS-DI: Allow GetPatronInfo to tell if a loaned item is on hold by someone else.
    
    This patch adds two new entries in the loans section of GetPatronInfo response:
    
     - itemonhold: number of holds on this specific item.
     - recordonhold: number of holds on the record.
    
    It allows an ILS-DI client to know if a loaned item is already on hold by someone else, and how many holds there are.
    
    Test plan:
    1. Apply the patch.
    2. Enable the ILS-DI system preference.
    3. Check out an item for a patron and make sure there no other holds at either an item or record level.
    4. Check that the new itemonhold and recordonhold entries displayed are equal to zero (example: http://127.0.0.1:8080/cgi-bin/koha/ilsdi.pl?service=GetPatronInfo&patron_id=19&show_contact=0&show_loans=1).
    5. Add either a record or item level hold for the record used in step 2.
    6. Check that itemonhold and recordonhold values are incremented accordingly.
       Note: a hold at an item level counts as a hold at a record level, but not vice-versa.
    7. Run the tests and make sure they pass: prove t/db_dependent/ILSDI_Services.t
    8. Sign-off!
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 07a4446f2f3fcbb22bd41a90f21e808e1c57eadc
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Nov 3 12:10:42 2023 -0400

    Bug 34977: (QA follow-up) Tidy code
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c018a9de48805336bfba80e02554bbc777c9aadf
Author: Salah Ghedds <salah.ghedda@inLibro.com>
Date:   Wed Oct 4 14:43:54 2023 -0400

    Bug 34977: The "Patron Lists" only allows deleting one list at a time
    
    In the patrons lists, it's only possible to delete on list at a time. This patch add the possibility to select lists and delete them at once.
    
    TEST PLAN
    1. Apply the patch.
    2. Create at least 2 patron lists (Navigate to Tools > Patron lists > New patron list).
    3. Select the lists you want to delete.
    4. Click the "Delete selected lists" button.
    5. Confirm that the selected lists have been deleted.
    6. Ensure that the button cannot be used if no list is selected.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d373a55f4aa185c7e86aa3d3b14cb689c31e849
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Nov 3 11:58:30 2023 -0400

    Bug 34938: (QA follow-up) Tidy code
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b0dedd61a488812a1180a1e748186e66e1c9a9fb
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Sep 27 18:38:31 2023 +0000

    Bug 34938: Add collection column to hold ratio report
    
    To test:
    1. Create enough holds on items so that they will appear on the holds ratio report.
    2. Visit circ/reserveratios.pl by going to Circulation > Holds ratios
    3. No collection column.
    4. Apply patch and restart services
    5. Look again at circ/reserveratios.pl, now you should see a collection column.
    6. Ensure that the data in the column looks correct.
    7. Go to Administration > Table settings to ensure you can hide that column, and other columns in the table.
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1fd6bc61d70681589dc914c4506206634d0f2963
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Nov 3 09:33:39 2023 +0000

    Bug 15157: (QA follow-up) Some more changes
    
    Renamed some vars. Removed unused $success.
    Extended die statement.
    Added Modern::Perl.
    
    Added verbose parameter.
    Added some logic around the confirm parameter. Making it possible
    to run the script in 'dry' mode.
    Print totals at the end.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ac0c8cf18115f75bc9864dddecbdaa5854762278
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Wed Feb 2 15:32:00 2022 +0200

    Bug 15157: Add my $amount and fix options
    
    Variable my $amount was missing. Also option
    amount has to be declared as integer and
    option confirm is no longer string.
    
    Sponsored by: Koha-Suomi Oy
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    [EDIT] Run perltidy to resolve one line.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4eb84b0dd7a560fb67c0a30df232c94d0d944816
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jan 21 16:21:29 2022 +0000

    Bug 15157: (follow-up) Add ability to set lower limit
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9e3f47d6b2c8a5ddf12d2e7c5b45139d2fcab0e2
Author: Olli-Antti Kivilahti <olli-antti.kivilahti@jns.fi>
Date:   Mon Nov 9 13:19:07 2015 +0200

    Bug 15157: Cronjob to debar Patrons with unpaid accountlines
    
    If your library wants to debar all Borrower who haven't paid
    their fines by the end of the year, this script will do that
    trick :)
    
    You can give the message from a file if the cronjob runner
    doesn't deal with quotes, or as a command-line parameter.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Bug 15157: Update script
    
    This patch updates debarrBorrowersWithFines.pl script to match
    changes made in bug 15156.
    
    To test:
    1. Have patron(s) with unpaid fines
    2. Run e.g debarrBorrowersWithFines.pl --confirm -m "This is a description of you bad deeds"
    (test other options too)
    3. Confirm patron(s) with fines has been debarred with the explanation
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Bug 15157: Modernise and Update for bug 15156
    
    This patch updates the script to use filter_by_amount_owed, renames
    it to debar_patrons_with_fines.pl and moves it to the cronjobs
    directory whilst also adding a copyright notice and POD.
    
    We could add a series of options to the script to allow more fine
    grained control.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    [EDIT] Run perltidy to resolve three lines.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0801cca4bb944835aacd350828f11db73dd54db3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 8 11:31:25 2023 -0300

    Bug 17617: DBRev 23.06.00.067
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8f37894c8362c1bc9907a48acc6eb17c402994a9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 8 11:28:32 2023 -0300

    Bug 17617: Unify DBRev
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 30c375ae8bf35488e1afeef4f5a211ff90d3a448
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Thu Oct 26 21:06:56 2023 +0000

    Bug 17617: Confirmation email to patron when hold is placed
    
    This enhancement adds a new notice HOLDPLACED_PATRON that will be sent to a patron when a hold is placed for them. It depends on the new system preference EmailPatronWhenHoldIsPlaced to be enabled.
    
    To test:
    1) Update database and restart services
    2) Go to Koha Administration -> System preferences and search for the new EmailPatronWhenHoldIsPlaced syspref. It should be disabled by default - leave it disabled for now.
    3) Search for a record and go to the Holds tab. Place a hold for your patron.
    4) Go to your patron's account and go to the Notices tab. Confirm the HOLDPLACED_PATRON notice was NOT queued.
    5) Enable the EmailPatronWhenHoldIsPlaced syspref.
    6) Repeat steps 3 and 4. Confirm the HOLDPLACED_PATRON notice WAS generated and queued.
    7) Confirm tests pass t/db_dependent/Holds.t
    
    Sponsored-by: Fire and Emergency New Zealand
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9e865b9f03ed2418d4857c804149d1318d10605a
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Thu Oct 26 21:06:35 2023 +0000

    Bug 17617: Unit tests
    
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b62699dff077035d6db225388d446ed569fbcd93
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Thu Oct 26 02:37:01 2023 +0000

    Bug 17617: Add HOLDPLACED_PATRON notice
    
    A HOLDPLACED notice exists and is used by the emailLibrarianWhenHoldIsPlaced function, but libraries may want to use different wording when emailing patrons.
    
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9188bca7594ecbc1e48cd59f42d961756ca8eebc
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Thu Oct 26 02:02:12 2023 +0000

    Bug 17617: EmailPatronWhenHoldIsPlaced system preference
    
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4df860f63876c156c7f3363896d44e6aa677806c
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Nov 2 12:33:52 2023 -0400

    Bug 25814: Tidy code
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7e87b91ce305fded6e436c5770df700f048e2bf6
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Nov 2 16:25:06 2023 +0000

    Bug 25814: Add comment to example sip config file
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c125aa7ecd29b555f2d2c0753f309f88d16268c3
Author: Matthias Meusburger <matthias.meusburger@biblibre.com>
Date:   Thu Oct 17 16:48:43 2019 +0200

    Bug 25814: SIP: Add a message on successful checkin.
    
    Currently, Koha does not return a message on successful SIP checkin.
    
    This patchs adds the show_checkin_message option to SIPconfig.xml, disabled by
    default. When enabled, the following message is displayed on SIP checkin:
    
    "Item checked-in: {homebranch|permanent_location} - {location}"
    
    The UseLocationAsAQInSIP system preference is used to determine whether the
    homebranch or the permanent location will be used.
    
    Test plan:
    
     - Perform a successful checkin using SIP
     - Check that the message is in the checkin response (AF field)
     - prove t/db_dependent/SIP/Transaction.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Edit (tcohen): tidied the whole subtest.
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 41ab406221e2c45c3138805afa884bdb10762506
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 8 10:49:37 2023 -0300

    Bug 20755: DBRev 23.06.00.066
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8382cc9f281e4c12e0e4cf56bfc442506e3f4842
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Wed Oct 25 09:39:30 2023 +0000

    Bug 20755: (QA follow-up) Add descriptions to system preferences
    
    Updates both the atomic update file and the sysprefs.sql with
    * explanations for each preference
    * type = "Free"
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c6b512427cc7bf0d8793c3bc8d357c3bfc8285b4
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Oct 24 15:40:51 2023 +0000

    Bug 20755: (QA follow-up) Fix capitalization in system preference description
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit df286452b3486b0a17e0fc1ceef5ffc105cf7c69
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Oct 24 15:27:42 2023 +0000

    Bug 20755: (QA follow-up) Add unit tests
    
    prove t/db_dependent/Letters.t
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 55b9db4a1a1631f36280b25840449425f984a393
Author: Raphael Straub <raphael.straub@kit.edu>
Date:   Fri Sep 29 08:48:31 2023 +0000

    Bug 20755: Add separate email configuration for acquisition and serial emails
    
    This patch allows every library to define the From and Reply-to email addresses for acquisition and serial emails (orders and claims) sent by Koha.
    Especially in large libraries with dedicated acquisition departments we need a way that vendors/booksellers can reply directly to the acquisition team and not to the library default email. The library email in the library configuration can then be used for circulation purposes only.
    
    1) Apply patch, run database update
    2) Make sure you have set up Koha to send up email (SMTP server, KohaAdminEmailAdress, etc.)
    3) Make sure you have a vendor set up with a valid email address.
    4) Check that you have four new system preferences:
      - AcquisitionsDefaultEMailAddress
      - SerialsDefaultEMailAddress
      - AcquisitionsDefaultReplyTo
      - SerialsDefaultReplyTo
    5) Check that there is no change in behaviour if the four new system preferences are left empty:
    All acquisition and serial emails are sent from the library email (or KohaAdminEmailAddress if no library email is set)
    6) Create an order with at least one order line. Send the order to your vendor by email.
    7) Create an acquisition claim notice and send it to your vendor.
    8) Create a subscription linked to your vendor and with at least one late issue. Claim the issue.
    9) There should be no change in behaviour: emails should be sent from library email (or KohaAdminEmailAddress if nothing is set on library level)
    10) Configure different email addresses for system preferences:
      - First email address: AcquisitionsDefaultEMailAddress, SerialsDefaultEMailAddress
      - Second email address: AcquisitionsDefaultReplyTo, SerialsDefaultReplyTo
    11) Repeat steps 6-8
    12) Verify that the library specific acquisition and serial email addresses are used as From and Reply-to.
    
    Sponsored-by: Karlsruhe Institute of Technology (KIT)
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ffd4eedd0fa5546f2c8aae55d0f65af2bbc352ac
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue May 9 21:38:02 2023 +0000

    Bug 33390: (QA follow-up) Rephrase some preferences
    
    * to include 'authorised value' in text
    * to keep sentences on one line (translation)
    * to use sentences instead of just links in some places
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d9c8fd037228a248e6ba656c33f693a49b3ab85b
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Apr 24 23:01:06 2023 +0000

    Bug 33390: (follow-up) move ItemsDeniedRenewal links to less confusing place
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 54ce1f86f045ec8f6dbc10e80e235dda2e2139cc
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Apr 3 21:09:51 2023 +0000

    Bug 33390: Add links to various system preference descriptions
    
    To test:
    1. Apply patch and look at the descriptions of the following system preferences. Make sure each link works and makes sense:
    
    DefaultLongOverdueChargeValue
    DefaultLongOverdueLostValue and DefaultLongOverdueDays
    DefaultLongOverdueSkipLostStatuses
    UpdateItemWhenLostFromHoldList
    
    NewItemsDefaultLocation
    UpdateItemLocationOnCheckin
    
    SkipHoldTrapOnNotForLoanValue
    UpdateNotForLoanStatusOnCheckin
    Reference_NFL_Statuses
    
    ItemsDeniedRenewal
    
    Signed-off-by: Catrina <catrina@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fd258280482e0c84bf6baf61d7054b1c628e53f7
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 31 13:48:11 2023 +0000

    Bug 35198: Sort database column names alphabetically on automatic item modification page
    
    This patch modifies the automatic item modification by age page so that
    the rule entry form sorts <select>s alphabetically, making it easier to
    find the entry you need.
    
    The [% FOR field IN... %] directives now include the "sort" method, e.g.
    
        [% FOR field IN agefields.sort %]
    
    To test, apply the patch and go to Cataloging -> Item modifications by
    age
    
    - Click the "Add rules" button, then the "Add rule" button.
    - Check the "Age field," "Conditions," and "Substitutions" dropdowns to
      confirm that the choices are listed alphabetically.
    - Fill in the form and save the rule.
    - Go back and edit the rule you created. Check that the dropdowns are
      still correct.
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 353d239ab7f07a97e0b1e292115245aa0d976fbe
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 8 10:38:18 2023 -0300

    Bug 34438: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 04c1e99312aab510e4578a3ac886188537600e62
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 8 10:25:46 2023 -0300

    Bug 34438: DBRev 23.06.00.065
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 181cef50f7030d89bbe4abdf3ec67d9175e96434
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Jul 27 20:32:14 2023 +0000

    Bug 34438: Add lang field to OPAC patron self registration form
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bf249fc5fec6f1493490ee71b1e9bbb7dcfcc1d4
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Oct 31 17:52:51 2023 +0000

    Bug 34438: Database update
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f88cb1da4fdef813c74b5eb890df8d12d72c47ab
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 8 10:10:23 2023 -0300

    Bug 33050: Tidy
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4d604ac2a942354bc903bc9c697d8b18d412e39b
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Feb 22 20:40:14 2023 -1000

    Bug 33050: Allow to specify quote char in runreport.pl
    
    Add to script misc/cronjobs/runreport.pl quote char arg (only for CSV).
    See perl doc https://metacpan.org/pod/Text::CSV#new
    
    This patch also adds missing '--separator' in POD.
    
    Test plan :
    1 - Write a SQL report
    2 - perl misc/cronjobs/runreport.pl --format csv 1 (or correct report number)
    3 - Note you get double quotes
    4 - Apply patch
    5 - Repeat #2 - no change
    6 - perl misc/cronjobs/runreport.pl --format csv --quote "'" 1
    7 - Now it is single quote delimited
    8 - perl misc/cronjobs/runreport.pl --format tsv --separator "'" 1
    9 - Error is reported, you cannot set quote unless csv
    10 - Try empty string as quote
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2b6ec7064e3ecd6297b7fa27367babdba0c74f0d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 8 10:04:23 2023 -0300

    Bug 34557: DBRev 23.06.00.064
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fbe06c7d9cb3f60d7b1553f462bbc9725d899fe9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 18 07:02:24 2023 +0000

    Bug 34557: (follow-up) Make link more like button in staff interface
    
    This patch adds Bootstrap button style to the link and changes the text
    from "Load your checkouts" to "Show your checkouts."
    
    The patch adds an anchor to the link so that the browser jumps down the
    page a bit making the checkouts more visible.
    
    The patch also corrects the includes for Font Awesome files. No icons
    were loading because of incorrect asset links.
    
    To test, follow the previous patch's test plan, checking that the button
    looks correctly styled and that the page reloads with the checkout form
    at the top.
    
    Confirm that Font Awesome icons are loading throughout the page.
    
    Signed-off-by: AndrewA <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8c801ea1323dd5247a8c4e1477b800d18f64f28b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Aug 17 09:10:54 2023 +0000

    Bug 34557: Add SCOLoadCheckoutsByDefault system preference
    
    This patch adds a enw system preference SCOLoadCheckoutsByDefault
    
    When enabled, a patron's list o fcurrent checkouts will be loaded when the sign in to the SCO
    module. If disabled, they will see link to load their checkouts. In either case, a new section
    is added to the SCO to show a brief display of the last checked out it
    
    To test:
    1 - Enable WebBasedSelfCheck system preference
    2 - Browse to:
        http://localhost:8080/cgi-bin/koha/sco/sco-main.pl
    3 - Sign in the SCO user (or enable AutoSelfCheck)
    4 - Sign in as a user with several items checked out
    5 - Confirm you see a list of items checked out
    6 - Apply patches, updatedatabase, restart_all
    7 - 'Finish' and login patron to SCO again
    8 - Confirm you still see the list
    9 - 'Finish'
    10 - Chenge the system preference
    11 - Sign in to SCO, confirm checkouts do not load
    12 - Confirm you see 'Load your checkouts' link
    13 - Check an item out
    14 - Confirm you see the last checkout, but not a list
    15 - Attempt to checkout an item that cannot be checked out
    16 - Confirm "Return to account summary" does not load checkouts
    17 - Click "Load your checkouts"
    18 - Confirm they load
    19 - Check out another item, confrim they remain and are updated
    20 - Checkout an item that cannot be issued
    21 - Confirm 'Return to account summary' loads the checkouts again
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: AndrewA <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1f2bdac94d5821900b35e610184b806a38ddd9f5
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Nov 3 17:48:00 2023 +0000

    Bug 35253: Add classes to materials specfied message on check in and checkout
    
    To test:
    1. APPLY PATCH
    2. Add a materials specified message to an item. ( 952$3 )
    3. Add the following CSS to your IntranetUserCSS:
    
        .mats_spec_label { color: white; background: purple;  }
        .mats_spec_message { color: white; background: green; }
    
    4. Checkout that item. Notice the message should be green and the label (Note about the accompanying materials:) should be purple.
    5. Check in that item. Notice the message should be green and the label (Note about the accompanying materials:) should be purple.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4c15ad658d59d7f63d27fe61dc102ecd4c22a03d
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Nov 7 22:31:31 2023 +0000

    Bug 34704: Remove regex for adding additional line breaks to print templates
    
    This makes sure that we don't change the line breaking for either
    HTML nor plain text print notices.
    For plain text, the <pre> is used to keep the line breaks as defined
    in the notices template.
    For HTML we require on the line breaks added by block elements in the
    HTML notice, not adding any additional ones like before.
    This gives the full control of the formatting to the notice editor.
    
    To test:
    * Make sure your patron doesn't have an email address
    * Make sure to check the hold filled notice in messaging preferences
    * Place a old on any item
    * Checkin the item
    * Confirm hold
    * Verify notices tab shows the Hold (print) notice
    * ./misc/cronjobs/gather_print_notices.pl ./ --html
    * Verify the generated file has the HTML output wrapped in pre.
    * Reformat the HOLD print notice to be HTML by setting the checkbox.
      Mmake sure to add some empty lines for (they should not print later)
      and some <br>, <p>, <div>  - They should be reflected in the notice later.
    * Repeat test.
    * All should be well :)
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3a027a0da974ecc72d2144f2b503d3013257c8a7
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Nov 7 17:07:17 2023 +0000

    Bug 35280: Fix patron attributes "clear" link in OPAC patron entry form
    
    This patch makes a minor correction to the JavaScript controlling the
    behavior of the "clear" link which appears on the patron entry form next
    to patron attribute <select>s or <textarea>s which are editable in the
    OPAC.
    
    To test, apply the patch and create patron attributes
    which have both "Display in OPAC" and "Editable in OPAC" checked.
    
    - Create one which is tied to an authorized value, and one which isn't.
    - Log in to the OPAC and click the "Personal details" tab.
    - In the entry form, find the patron attribute fields under the
      Additional information" heading..
    - Select a value in the dropdown, and enter text in the textarea.
    - Confirm that clicking the corresponding "Clear" link for each works as
      expected.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b5d174c7d9e87766fc7dbe6160932052199b4638
Author: Andreas Jonsson <andreas.jonsson@kreablo.se>
Date:   Tue Nov 7 14:42:58 2023 +0100

    Bug 34857: Do not enable hidden select element (regression from bug 33233).
    
    Test plan:
    
    Using Chrome as web browser:
    
    * Go to opac advanced search
    * Press "more options"
    * Search for two keywords using "and" operator (on ktd search for idea AND behind, which matches 1 result)
    * Search for two keywords using "or" operator (on ktd search for idea OR behind, which matches 4 results)
    * Search for two keywords using "not" operator (on ktd search for idea NOT behind, which matches 2 results)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ce9cd1458c4417e6e52e87df5fe8baeeb6c2d7dd
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Nov 7 11:54:56 2023 +0000

    Bug 35272: Add padding above vendor contracts section
    
    This patch makes minor updates to the CSS and markup of the vendor
    detail page so that the different page sections have the correct
    margins.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    - In Acquisitions, locate a vendor and add at least one contract if
      necessary.
    - View the vendor details page. Each section (Vendor details, Ordering
      information, Contracts) should have comfortable and consistent
      margins.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ef880e349f959686a830bda67ec5a295e3d76eb4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 7 11:35:22 2023 +0000

    Bug 31041: (follow-up) Clean up and generalise
    
    This patch cleans out the print media css rules that were originally
    added for modalprinting.  The window.open method is simpler to maintain
    and will more reliably print modal content as expected.
    
    We factor out the printer code into it's own JS asset that we can apply
    to other printable modals and then use it in the two existing places
    where such modals have been defined already (cashup summary and bundle
    confirmation).
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 85fb62f3d6e0784bf75309325b78712f18877055
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Nov 2 19:56:00 2023 +0000

    Bug 31041: Prevent duplicate display of cashup summary when printing
    
    To test:
    1. Have POS on.
    2. Have some registers and items for sale. Make some sales to 'Cashup'.
    3. If you have enough enough lines in the table so that 'register.pl' would print on 2 or more pages, the summary will be duplicated that same number of time.
    
    If you are lazy like me and don't want to make that many transaction you can also add some content to the page like this:
    
    for (let i = 0; i < 100; i++) {
      $('#register').append('<h1>TEST</h1>');
    }
    
    4. APPLY PATCH, clear browser cahche
    5. Try printing again, you should only get one cashup summary when printing.
    
    Signed-off-by: Juliet Heltibridle <jheltibridle@rcplib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fcd97d8741d1141ee99e5ad0d8ec89d0f9ea32c8
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Nov 7 22:32:47 2023 +0000

    Bug 31041: add modal_printer.js asset to registers.tt
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1944c66fc03e0e661745ece4bbc04e0607dd6def
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Oct 12 22:14:10 2023 +0000

    Bug 34931: Remove fieldset/legend in favor of div/h3
    
    1. Create some PA_CLASS authorized values.
    2. Create some custom patron attributes and add them to the newly created PA_CLASS's.
    3.  Set CollapseFieldsPatronAddForm to collapse 'Additional attributes and identifiers'.
    4. Go to a new or existing patron record.
    5. At the top of the page click the checkbox for "Show collapsed fields:".
    6. Scroll down to that section and notice the PA_CLASS <legend> element is shown but not the individual patron attributes within that PA_CLASS.
    7. Apply patch
    8. Try again, the Additional attributes and identifiers fieldset should display properly.
    
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fac6523b3cb00add7a3557b62a363aa95f23eea7
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 5 15:18:33 2023 +0000

    Bug 34404: Fix inconsistencies in Budgets and funds page titles, breadcrumbs, and headers
    
    This patch fixes some inconsistencies in the budget and fund
    administration templates, making sure the page title, breadcrumb
    navigation, and page headers are consistent with each other.
    
    Other changes: Bootstrap tooltips have been enabled in a few places
    where the markup showed intent for the tooltips to be active but where
    the JS was not being initiated.
    
    Some translation imrovements have been added where budget planning
    strings could be improved with context:
    
     '<span>by months</span>' ->
     '[% tp("Budget planning", "by months") | html %]'
    
    To test, apply the patch and go to Administration -> Budgets. Test each
    of these cases:
    
    - Budgets list
      - New budget
      - Edit budget
      - Duplicate budget
      - Close budget
        - Close a budget with and without unreceived orders.
      - Delete budget
        - Test the delete button on a budget which has funds attached to
          confirm that the menu item is disabled and a tooltip shows with an
          explanation.
        - Delete a budget which has no funds attached.
      - Add fund
        - Test the add fund button on a budget which is locked. The menu
          item should be disabled and it should show a tooltip, "Budget is
          locked."
        - Test the add fund page for a budget which is not locked.
      - Click the name of a budget with funds attached to see the funds view
        - In this view, if the budget is locked, the "New" toolbar menu
          should have a disabled "New fund" item with a Bootstrap tooltip.
      - While viewing the funds on a budget, test the "Planning" button to
        confirm that the view of each planning type.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e7e0390dabbe267abb702812c03a484c4a7909b8
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Mon Nov 6 10:40:33 2023 +0000

    Bug 34375: Fix the option to provide no fund in budget dropdown
    
    Currently it is not possible to use the No fund option as the dropwdown will default to the first budget in the list. This patch re-adds this option so that the defaulting behaviour is fixed
    
    Test plan:
    1) Go to a vendor record in Acquisitions and then Receive Shipment
    2) Enter an invoice number
    3) Leave the Shipping cost empty and Shipping Fund as 'No fund'
    4) Receive some orders or go straight to Finish receiving
    5) Notice the Shipping fund has defaulted to the first fund in the alphabetical list of funds.  It is not possible to select 'No fund' and the selected fund is recorded in shipmentcost_budgetid incorrectly.
    6) Apply patch
    7) Repeat steps 1-5 and this time the No fund option should be used correctly
    
    Signed-off-by: Georgia Newman <g.newman@arts.ac.uk>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 554f791491c4cf918d6f071c6c20e26156468a49
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Nov 6 12:01:09 2023 -0300

    Bug 35269: Improve POD
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 97b1e6a77d25da2f1462c1fcfdeae81e37b09910
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Nov 6 11:53:53 2023 -0300

    Bug 35269: Rename `update_item_location` to `location_update_trigger`
    
    This patch renames all occurences of the method.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ea8022b0f246929b75e6537de6358c42595fd826
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Nov 6 19:30:42 2023 +0000

    Bug 35218: (QA follow-up) Perltidy and file permissions
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6e7059c8a2945f1ab5cfebc9ed032f5c696fb385
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Mon Nov 6 14:14:45 2023 +0000

    Bug 35218: Add unit tests for the counter registry API
    
    This patch adds two unit tests to cover the integration with the Counter Registry API in the Usage Statistics module. This is to prevent regressions caused either by changes to the Koha endpoint, or by changes to the Counter Registry API that might require changes in Koha to handle.
    
    Test plan:
    1) prove t/db_dependent/api/v1/erm_counter_registries.t
    2) prove t/db_dependent/api/v1/erm_sushi_services.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a61c344e332dede8165a457cd66f0ea0d49bc09c
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Nov 7 10:25:18 2023 +0000

    Bug 35263: (QA follow-up) Update code
    
    Thank you Jonathan. I first tried with '||' but it would fallback to 1
    for either undef or 0 (we want the first case, but not the second).
    But using '//' instead, it only falls back to 1 if undef, and not when 0.
    Today I learned between '||' and '//'! Thanks!
    
    From perldoc.perl.org (relating to '//'):
    'In fact, it's exactly the same as ||, except that it tests the left hand
    side's definedness instead of its truth.'
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bac896bb65b97cec1311f68b35c79f56f429f189
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Nov 6 09:39:52 2023 +0000

    Bug 35263: Default 'can_place_ill_in_opac' to 1
    
    If ILLModule sys pref is 'off', this input param is undef. The database does not allow it to be nullable causing an error.
    Check if its defined (i.e. the option was submitted) and use that, if not default to 1
    
    Test plan, k-t-d:
    1) Edit an existing patron category, visit:
    /cgi-bin/koha/admin/categories.pl?op=add_form&categorycode=B
    2) Click 'Save' at the bottom of the form
    3) Notice a yellow box is shown with an error message
    4) Apply patch. Repeat steps 1-3. Notice it now updates successfully.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 93f75b39ac621c3cc3ecb1208e9dee89bcbe4197
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Nov 6 10:13:48 2023 +0000

    Bug 35263: Add selenium tests
    
    Test plan, on k-t-d selenium (ktd --selenium up):
    1) Apply just this tests patch
    2) Run: prove t/db_dependent/selenium/administration_tasks.t
    3) Notice it fails. Apply the other patch. Restart plack
    4) Repeat step 2. Notice it passes.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7a24545dcd991479d6be69bb891170fdbadd7506
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Nov 7 22:16:31 2023 +0100

    Bug 35258: Remove uneeded comment and fix po:update
    
    This comment was breaking gulp po:update on D11
    koha-tmpl/intranet-tmpl/prog/js/vue/components/ERM/LicensesShow.vue:82: warning: unterminated string
    Aborted (core dumped)
    
        at ChildProcess.exithandler (node:child_process:419:12)
        at ChildProcess.emit (node:events:514:28)
        at ChildProcess.emit (node:domain:552:15)
        at maybeClose (node:internal/child_process:1091:16)
        at Socket.<anonymous> (node:internal/child_process:449:11)
        at Socket.emit (node:events:514:28)
        at Socket.emit (node:domain:552:15)
        at Pipe.<anonymous> (node:net:323:12)
        at Pipe.callbackTrampoline (node:internal/async_hooks:130:17)
    [19:23:07] 'po:update' errored after 1.14 s
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 00fb85ddfc833458b8c226281f74cced13f58f60
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Jul 13 17:51:13 2023 +0000

    Bug 34275: Add toggle switch for basic/advanced cataloging editors
    
    To test:
    1. Apply patch and regenerate CSS. (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_interface)
    2. Turn on EnableAdvancedCatalogingEditor.
    3. Go to cataloging > 'New record'
    4. In the upper left notice a new toggle switch labeled 'Editor:'.
    5. Try toggling the switch back and forth to move between editors. Verify it works correecly.
    6. Try editing an existing record and make sure the toggle works well when editing records.
    7. Try the other method of switch editors, Settings > Switch to basic/advanced editor. Make sure it works the same as always
    8. Turn off EnableAdvancedCatalogingEditor, make sure the toggle button is no longer present.
    
    Signed-off-by: Eesther <esther@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 813f18b22984665c6b60a0762ad9020bfb39e005
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Nov 6 11:34:32 2023 -0300

    Bug 21159: DBRev 23.06.00.063
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 432f8076c2952826fc3c79e4d250f152de4601c0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Nov 6 11:00:04 2023 -0300

    Bug 21159: Add Koha::Item->update_item_location tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bb74e21d3f26050a9b20f8f0e9d785dee1cd436e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Nov 6 09:59:27 2023 -0300

    Bug 21159: Remove redundant mock
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f534e799ed164f9401fae0ebc00d91c2736280d9
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Nov 1 11:10:24 2023 +0000

    Bug 21159: (QA follow-up) Add say to database update, perltidy, fix tests
    
    * Perltidies to pass the QA script
    * Adds missing say statement to the database update
    * Makes sure the tests pass on a database, where UpdateItemLocaton*
      system preferences are not empty
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 81826a7af7c57bdfbe4f7443bfbc0ace7de6a1c5
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Wed Aug 10 00:54:20 2022 +0000

    Bug 21159: Update item location on checkout
    
    This patchset shifts the logic for changing the item location on checkin
    (controlled by the UpdateItemLocationOnCheckin system preference) to a
    new subroutine in Koha/Items.pm
    
    That subroutine logic is shared with the UpdateItemLocationOnCheckout
    system preference.
    
    Test plan:
    1. Apply patches, update databases and restart services
    
    2. Set the following system preferences:
    - UpdateItemLocationOnCheckin:
    FIC: PROC
    
    - UpdateItemLocationOnCheckout:
    PROC: FIC
    
    3. Checkout an an item with items.location = 'PROC'. Observe it's
    location is changed to 'FIC'
    
    4. Return the item. Observe it's location is changed to 'PROC'
    
    5. Change UpdateItemLocationOnCheckout to:
    PROC: _BLANK_
    
    6. Issue the item with items.location = 'PROC' and confirm it's location
    is blanked on checkout
    
    7. Issue and return an item with a different location e.g. 'REF' (don't
    use 'CART' as this is blanked by bug 14576 on checkout).
    Observe the location does not change on issue or return.
    
    8. Run unit tests
    sudo koha-shell kohadev
    prove t/db_dependent/Circulation/issue.t
    
    Sponsored-by: Toi Ohomai Institute of Technology, New Zealand
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5ef2c565a8d79d607ec5d6a19e742c8b4fbf6cbc
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Wed Aug 10 20:57:10 2022 +0000

    Bug 21159: Template and yaml changes
    
    Sponsored-By: Toi Ohomai Institute of Technology, New Zealand
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fb3bab46c93429195d89eede193741cd00ea24c9
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Tue Aug 9 15:38:37 2022 +0000

    Bug 21159: Database changes
    
    Sponsored-by: Toi Ohomai Institute of Technology, New Zealand
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4652d311232451a069fee94972d54b0816cb0d6c
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Nov 3 10:48:39 2023 +0000

    Bug 34529: (QA follow-up) Tidy OfflineCirculation.t
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 681dded5b1d7724c260871c76f1a288590980ffc
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Nov 3 06:46:58 2023 -0400

    Bug 34529: (QA follow-up) Add unit tests
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fd90dfb07ca4b6be21351cef3c2bbb463313cc52
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Oct 31 15:45:58 2023 +0000

    Bug 34529: (QA follow-up) Update column heading to "Card number or username"
    
    Updates the column heading on the table of uploaded transactions
    to read "Card number or username".
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 14f7660b2e46ac4e13478b0a60f9cf8b1ef68add
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Aug 14 10:55:09 2023 -0400

    Bug 34529: Offline circulation should be able to accept userid as well as cardnumber
    
    Like everywhere else in Koha, offline circulation should be able to use userid as well as cardnumber to look up the patron for a transaction ( checkouts and fine payments ).
    
    Test Plan:
    1) Apply this patch
    2) Restart all the things!
    3) Download the test.koc file attached to this bug
    4) Verify you have an item with the barcode 39999000001396
       create it if needed
    5) Set a patron's username to "hacevedo"
    6) Upload and import the test.koc file into offline circ
    7) Verify the item was checked out and the payment was made
    
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dcbd3f8387d17f3e6ab8dec60c99d68e1265e11b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Oct 30 12:47:31 2023 +0000

    Bug 35188: Show checkout override for all noisseus statuses
    
    This patch moves the override button up one level into the list of noissues in order to allow
    overriding any blocking status
    
    To test:
    1 - Log in to Koha with a user with force_checkout permission (superlibrarian ok too)
    2 - Mark a patron as expired, lost card, gone no address
    3 - Go to 'Check out' page for the patorn
    4 - Note you cannot override the restrictions
    5 - Add a manual restriction/debarment
    6 - Go to checkout again, now you can override
    7 - Remove the debarment
    8 - Add manually ot URL of checkout page '&foreallow=1'
    9 - Note you can now override the other restrictions
    10 - Apply patch
    11 - Reload patron
    12 - Note you now see the override button on the check out screen
    13 - Add a debarment
    14 - Confirm the button is still there
    15 - Confirm overriding allows the checkout (with or without a debarment)
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b5477b2ea3fb8f8bf367012ff621e6dd7936eefc
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 2 18:36:06 2023 +0000

    Bug 35241: Fix markup errors in point of sale template
    
    This patch makes several markup corrections to the Point of Sale page,
    fixing duplicate ids, invalid "selected" attributes*, a broken comment
    tag, and an invalid "href" attribute.
    
    * The "selected" attribute in this template is on a disabled <option>,
      so it can't be selected.
    
    The patch also changes <div class="action"> to <fieldset class="action">
    for consistency and better layout.
    
    It makes some changes to the "Payment received" dialog in order to
    improve visual consistency.
    
    To test, apply the patch and make sure the EnablePointOfSale preference
    is turned on.
    
    - Go to Point of Sale.
    - Test the process of adding items for purchase and collecting payment.
    - After you submit the payment the confirmation dialog should look
      correct, and the "Print" and "Email" buttons should both work
      correctly.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 79bf4485c1b2ae8059e2ee15ea1e67bba9961c34
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Sep 21 15:17:34 2023 +0000

    Bug 34866: Use template wrapper for breadcrumbs: OPAC part 4
    
    This patch updates several OPAC templates so that they
    use a new WRAPPER for displaying breadcrumbs.
    
    Apply the patch and log in to the OPAC. Test each of the following pages
    and their variations. Breadcrumbs should look correct, and each link
    should be correct:
    
    - Recent comments
    - Most popular
    - Enable "PatronSelfRegistration" and set "PatronSelfRegistrationVerifyByEmail"
      to "Don't require."
      - In the OPAC, go to "Register here." Fill out the form and submit
        your registration.
      - Check the "Registration complete" page.
    - Set "PatronSelfRegistrationVerifyByEmail" to "Require"
      - Submit another registration and check the "Confirm your
        registration" page.
    - Visit the registration page passing an invalid token:
      /cgi-bin/koha/opac-registration-verify.pl?token=foo
      Check the "Registration invalid" page.
    - Enable the "ArticleRequests" system preference and log in to the
      OPAC.
      - Perform a search which will return results.
        - Check the search results page
        - View the detail page for one of the results.
         - Click "Request article."
        - Return to the detail page and click "Place hold."
          - Complete each step of the hold process.
    - Enable the "OpacAllowSharingPrivateLists" system preference.
      - Create a private list if necessary.
      - Click the "Share" link
    - Locate a serial record and view the detail page.
      - Click the "More details" link under the "Subscriptions" plan
    - Enable the system preference "suggestion."
      - From the logged-in user summary page click "Purchase suggestions"
        - Click the "New purchase suggestion" link
    - Enable the "AnonSuggestions" and "OPACViewOthersSuggestions" system
      preferences and log out of the OPAC.
      - View the purchase suggestions page.
    - Enable the "OpacCloud" system preference and go to the "Subject cloud"
      page. (the feature doesn't need to be configured to test).
    - Populate the "RestrictedPageTitle" and "RestrictedPageContent" system
      preferences and navigate directly to /cgi-bin/koha/opac-restrictedpage.pl
      - Remove the contents of "RestrictedPageTitle" and check the page
        again.
    - This patch also updates svc/suggestion.tt but I don't know how to test
      it!
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 19dd4c0f42fa883855bec55fffb31047da228f55
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Nov 6 11:42:02 2023 +0000

    Bug 35187: (follow-up) Use <br> consistently over <br />
    
    The first patch highlighted a minor inconsistency to me and this patch
    just brings us closer to html5 consistency throughout the notices by
    replacing any existing occurences of `<br />` and `<br/>` with the
    recommended `<br>`.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7ed41b65a4704d03dc78ec76e14732b5d28e01b2
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Oct 29 16:10:25 2023 +0000

    Bug 35187: Make sure HTML notices use explicit line breaks
    
    When a notices is marked as HTML, we need to use block elements
    (p, div, li, etc.) or explicit line breaks.
    This adds the line breaks where required.
    
    Affects:
    
    * ISSUEQSLIP
    * ISSUESLIP
    * TRANSFERSLIP
    * CHECKINSLIP
    * HOLD_SLIP
    * WELCOME
    
    The biggest change is the WELCOME notices. With this patch
    it appears no longer on only one line, but properly formatted.
    
    To test:
    
    WELCOME
    * Without patch
    * Make sure your Koha can send email (set up SMTP server, KohaAdminLibraryAddress)
    * Make sure your patron has an email set
    * In patron account, use "More > Welcome email"
    * Verify all text is on one line
    * Apply patch
    * reset_all to install new sample notice templates
    * Repeat test, verify welcome notice is now nice
    
    ISSUESLIP, ISSUEQSLIP
    * Checkout at least 2 items
    * Print > Print slip
    * Print > Print quick slip
    * Verify both look nice!
    
    CHECKINSLIP
    * Return both items
    * Print checkin slip (button in list of checkouts)
    * Verfiy... you know, that it looks nice!
    
    TRANSFERSLIP
    * Checkin an item from another library
    * "Print transfer slip"
    * Verify again.
    
    HOLD_SLIP
    * Place a hold on a record
    * Return an item that can fill the hold
    * "Print slip and confirm"
    * Verify.
    * Note: if you compare to before, this also removes a <> appearing instead
      of the city.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2430d59a00780455622ecfe5b42af3c47f7e8617
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Nov 5 12:39:13 2023 +0000

    Bug 27992: (QA follow-up) Terminology: returned -> checked in
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7e0cd0e2117fed6a1c8ea9deb673dbbc771b655a
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Nov 5 12:07:25 2023 +0000

    Bug 27992: (QA follow-up) Perltidy
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f7e289415681e2b97065648576fd3f9fab6ff15b
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Oct 30 16:45:54 2023 +0000

    Bug 27992: Unit test
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fe0f8389b2710f83256aff4b0b05a9809190bd6a
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Oct 27 23:36:05 2023 +0000

    Bug 27992: Call AddReturn on stats patron
    
    To test:
    1. Create a Statistical Patron
    2. Check out an item to the Stat Patron, that is checked out to another user
    3. See that the local use is recorded, but the item does not get checked in
    4. Check out an item that has a lost status and note that the local use is recorded, and the lost status is cleared.
    5. Item is NOT checked in
    6. Apply patch
    7. Repeat steps 2 - 4. Item is checked in.
    8. Set BlockReturnOfLostItems to Block.
    9. Have a checkout to another patron then mark it as lost.
    10. Check it out to the Statistical Patron. You should see the message "Item was lost, cannot be returned."
    12. Conform the item remains on the patron's account.
    13. Turn off BlockReturnOfLostItems, check out the same item to the Statistical Patron. You should see a message "Item was lost, now found."
    14. Conform the item was actually checked in.
    
    15. Set BlockReturnOfWithdrawnItems to Block.
    16. Have a checkout to another patron then mark it as withdrawn.
    17. Check it out to the Statistical Patron. You should see the message "Item was withdrawn, cannot be returned."
    18. Conform the item remains on the patron's account.
    19. Turn off BlockReturnOfWithdrawnItems, check out the same item to the Statistical Patron. You should see a message "Item was withdrawn."
    20. Conform the item was actually checked in.
    
    21. Have an item on a regular patron account that has a hold on it.
    22. Check it out to the Statistical Patron
    23. See the message "Item on hold, please checkin."
    
    24. Have an item on a regular patron account that has a claim return on it.
    25. Checkit it out to the Statistical Patron.
    26. See the message "Item claimed returned, please checkin."
    
    27. Have an item on a regular patron account that has been recalled.
    28. Checkit it out to the Statistical Patron.
    29. See the message "Item can fill a recall, please checkin."
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f918c3ff803d811ad025bff42e1263e3b3aafa83
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Nov 3 10:17:23 2023 +0000

    Bug 35245: Set default width for select2 in authorities
    
    Test plan:
    1) Edit a authority Marc framework, e.g. 'CHRON_TERM', visit:
       /cgi-bin/koha/admin/auth_tag_structure.pl?authtypecode=CHRON_TERM
    2) Pick any field to turn into a AV field, e.g. 371, and edit its subfields:
       /cgi-bin/koha/admin/auth_subfields_structure.pl?tagfield=371&authtypecode=CHRON_TERM
    3) Pick a subfield e.g. 'd' and click edit, visit:
       /cgi-bin/koha/admin/auth_subfields_structure.pl?op=add_form&tagfield=371&tagsubfield=d&authtypecode=CHRON_TERM#subdfield
    4) Pick a Authorized value list e.g. DEPARTMENT, click Submit
    5) Create a new authority of the same type 'CHRON_TERM', visit:
       /cgi-bin/koha/authorities/authorities.pl?authtypecode=CHRON_TERM
    6) Click on Tab '3' and click on field 371 ADDRESS to expand it
    7) Notice field 'd' select2 width is very narrow
    8) Apply patch. Repeat. Notice its not narrow anymore
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5414d696bc1118044766405f15c27e9f08c52693
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon Nov 6 05:31:29 2023 +0000

    Bug 35264: Add "protected" column to patron import
    
    This change adds the "protected" column to patron import.
    
    Test plan:
    0. Apply the patch and run "restart_all"
    1. prove -v t/db_dependent/Koha/Patrons/Import.t
    2. Go to http://localhost:8081/cgi-bin/koha/tools/import_borrowers.pl
    3. Note "protected" is listed in the "fields you want to supply"
    on the right side of the screen
    4. Note "protected" appears in file downloaded by clicking
    "Download a Starter CSV file with all the columns"
    5. Note that "Protected" appears after clicking "Enter default values"
    and after clicking "Preserve existing values"
    
    6. For bonus marks, use the "Starter CSV file" to import a test patron
    (remember surname, branchcode, and categorycode are the required fields)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 24e1ee2118311bad39203a932dd4c6ab67c5d8c9
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Nov 5 11:50:17 2023 +0000

    Bug 34993: (QA follow-up) Perltidy
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0c941147903294dd33996a8d293285c9a82e4f13
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Thu Nov 2 12:56:35 2023 -0400

    Bug 34993: Pass context parameters to generate_subfield_form
    
    Pass necessary parameters from the UI to ensure that the basic
    MARC editor can correctly identify when a framework is changed,
    a bib is being duplicated, or a bib is being imported with Z39.50 -
    for purposes of filling in default values according to the settings
    of ApplyFrameworkDefaults.
    
    To test:
    1. Set the system preference ApplyFrameworkDefaults - Select All
    2. Create or edit a MARC bibliographic framework with a default value in
       one of the fields (such as 500$a)
    3. Go to the Cataloguing module and create a new record using the
       framework from step 2
       --> Confirm that the default value is filled in
    4. Search for an existing bib record
    5. Click Edit > Edit record to open the basic editor
    6. If the field from step 2 already has data, clear it
    7. Switch the framework to the framework from step 2
       --> Confirm that the default value is filled in
    8. Clear the field again, and save the edit
    9. Click Edit > Edit as new (duplicate)
       --> Confirm that the default value is filled in
    10. Go to the cataloguing module and do a Z39.50 search
    11. Find a record that does not have a value for the subfield from step 2
    12. Import the record using the framework from step 2
        --> Confirm that the default value is filled in
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0ea2a1c7be73995ca4b26c67f049912259c457a6
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Nov 1 14:50:47 2023 +0000

    Bug 35215: Add few assumptions in Suggestions.t around emailing
    
    Test plan:
    Without this patch, set pref ReplytoDefault or EmailAddressForSuggestions.
    Run t/db_dependent/Suggestions.t (FAIL)
    Fill branch email and reply for CPL branch.
    Run t/db_dependent/Suggestions.t (FAIL: more errors)
    Apply patch.
    Run t/db_dependent/Suggestions.t (PASS)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 15f0dc2c2a027896c0b2f62c4e08cd46279426e9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 1 10:21:41 2023 +0000

    Bug 35212: Correct mismatched label on identity provider entry form
    
    This patch corrects the identity provider form so that the label for the
    "Allow staff" field has the correct "for" attribute. Currently it is a
    duplicate of the one for the "Allow OPAC" field.
    
    To test, apply the patch and go to Administration -> Identity providers.
    
    - Click "New identity provider"
    - Near the bottom of the form, look for the "Allow staff" field.
    - Clicking the "Allow staff" label should activate the corresponding
      dropdown.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9a39c181dfc4b5075fe939620d18e4a6b28b45bd
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 31 16:58:48 2023 +0000

    Bug 35205: Fix duplicate id attribute in desks search form
    
    This patch updates the header search form for desks administration so
    that it doesn't contain an HTML id attribute which duplicates one on the
    desks entry form.
    
    To test, apply the patch and make sure the "UseCirculationDesks" system
    preference is enabled.
    
    - Go to Administration -> Circulation desks -> New desk.
    - Click the "Desk" label in the entry form. Cursor focus should move to
      the adjacent input field.
    - Click the "Search desks" label in the header search form to confirm
      that your cursor moves to the header search form.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 38e95c7769ccb7686c1e10347173bfaffa4b70c1
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 2 10:56:30 2023 +0000

    Bug 35181: Don't pass undef to header
    
    It seems passing an undef value causes the headers to be malformed.
    
    To test:
    1 - Visit http://localhost:8081/cgi-bin/koha/svc/bib/303
    2 - Note 'Invalid-metadata' at top of page, as well as other headers
    3 - Apply patch, restart all
    4 - Visit http://localhost:8081/cgi-bin/koha/svc/bib/303
    5 - Page should now appear as xml
    6 - Edit record 303, or any record with valid metadata in the advanced cataloging editor
    7 - Confirm there is no error or alert
    8 - Edit record 369 in the advanced cataloging editor
    9 - Confirm there is an alert
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1ff0181227002e8dcea0a3be0176a0cfc8c3fa2b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Oct 6 17:16:20 2023 +0000

    Bug 33928: Improve translation of title tags: Various
    
    This patch updates various templates so that title tags can be more
    easily translated. Some templates have been updated for consistency as
    well: Harmonizing page title, breaddrumb navigation, and page headers.
    
    To test, apply the patch and confirm that the following pages have the
    correct title tags:
    
    - Staff interface -> Log in
      - Staff interface home page
      - Error page (e.g. for a missing page 404 error)
      - About page
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 81b062ffcb8c56ef01a6a39901b3299126851e35
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Sep 15 13:39:15 2023 +0000

    Bug 34773: (follow-up) Missed templates
    
    This patch fixes three templates I missed the first time around:
    Inventory, MARC diff view, and Upload local cover images.
    
    - Cataloging -> Inventory and the results page after submitting a
      batch of barcodes.
    - Cataloging -> Manage staged records -> Select a batch which includes
      record matches: Click the "View" link in the "Diff" column for a
      record which has a match.
    - Cataloging -> Upload local cover image (with LocalCoverImages enabled)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f97975203196a5ba30366807e194abde7f80eac5
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Sep 12 18:02:43 2023 +0000

    Bug 34773: Improve translation of title tags: Cataloging tools
    
    This patch modifies cataloging tools templates so that title tags can be
    more easily translated. The patch also makes some modifications to
    titles, breadcrumb navigation, and page headers in order to make them
    more consistent with each other and with other similar pages.
    
    Note that stockrotation.pl has been modified so that rota information is
    available to the template in more cases for the purpose of showing that
    information in navigation and headings.
    
    To test, apply the patch and go to Cataloging. Test each page and each
    variation of the page to confirm that titles, breadcrumbs, and page
    headers look correct.
    
    - Export catalog data
    - Stage records for import
      - Main page
      - Upload file -> Stage for import
    - Manage staged records
      - Main page
        - Batch details
          - Import batch
    - Batch item modification and batch item deletion
      - Main page
        - Submit batch
          - Save
    - Batch record modification
      - Main page
        - Submit batch
          - Modify selected
    - Batch record deletion
      - Main page
        - Submit batch
          - Delete selected
    - MARC modification templates
      - Main page
        - Edit actions for a template
    - Item modifications by age
      - Main page
        - Add rules
    - Stock rotation
      - Main page
        - New rota
        - Edit rota
        - Manage stages for rota
          - New stage
          - Edit stage
        - Manage items for rota
          - Add items
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 38e6301fdbd5f2474f7f5561beb2b89f2b720d9e
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed Nov 1 17:04:26 2023 -0400

    Bug 35221: TrackLastPatronActivityTriggers description is misleading
    
    This patch updates the description for the TrackLastPatronActivityTriggers system preference to specify that each time an action occurs, the date last seen is updated, as opposed to once per day.
    
    This patch also uniformizes the options and corrects terminology for
    checking in/returning.
    
    To test:
    1. Apply patch
    2. Go to Administration > System preferences
    3. Search for TrackLastPatronActivityTriggers
    4. Read the description, make sure it makes sense and the spelling and
       grammar are correct
    5. Open the drop down of options, make sure the spelling and grammar are
       correct
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ed95e578b0a40f57d2e7e9c68131832e0df92673
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 3 16:24:07 2023 +0000

    Bug 34397: Fix inconsistencies in Classification sources page titles, breadcrumbs, and headers
    
    This patch fixes some inconsistencies in the classification
    configuration administration page, making sure the page title,
    breadcrumb navigation, and page headers are consistent with each other.
    
    Test each view to confirm that page title, heading, and breadcrumbs are
    consistent:
    
    - Administration -> Classification configuration
      - New classification source
      - Edit classification source
      - New filing rule
      - Edit filing rule
      - New splitting rule
      - Edit splitting rule
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aaa0bd2391fc49a23c2d7a5a8369c7b7300e6bdf
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Nov 3 12:22:34 2023 +0000

    Bug 17798: (follow-up) Adjust color of fieldset nested in .dialog.alert
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d291a6f1d9df762232379bc214753953c2d672e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 2 19:10:02 2023 +0000

    Bug 17798: Add fieldset for 'Yes, check out (Y)'
    
    With the increased text, the buttons don't arrange neatly. Adding a
    fieldset around the options for 'Yes' mitigates this somewhat - it
    could do with a bit more styling, however, it also fixes bug 23953
    
    To test:
    Confirm the 'Yes' options are more clear that they only affect the yes
    button
    Confirm the other buttons arrange nicely
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3ec73d80e2a88e3a87eefc886865ccfb91f9be09
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Nov 2 19:05:16 2023 +0000

    Bug 17798: Confirm hold when printing slip from another patron's account
    
    This patch adds a few pieces of information to the print slip button
    and makes the code confirm the hold
    
    As we are printing before the confirm, we also add the ability to pass
    in the itemnumber to 'ReserveSlip'
    
    This is slightly hacky, however, I don't see another way to allow
    printing without an additional page reload.
    
    To test:
     1 - Place a title level hold for patron A, for delivery to library B
     2 - Attempt to checkout an item from the record above to Patron B from
         library A
     3 - You receive an alert about the hold
     4 - Click "Don't check out, confirm hold, and print slip"
     5 - Confirm the slip looks correct and has item info
     6 - Confirm that item is in transit to fill hold
     7 - Revert transit status
     8 - Attempt to checkout the item to Patron B from Library B
     9 - Click "Don't check out, confirm hold, and print slip"
    10 - Confirm slip is correct
    11 - Confirm item is marked waiting
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0677a53e1445342ac4927a1177100f69e4f02271
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Nov 2 10:47:50 2023 +0000

    Bug 32379: Add check on existing item
    
    Simplest fix; bail out with output_error.
    
    Test plan:
    Try /cgi-bin/koha/cataloguing/additem.pl?biblionumber=1&op=saveitem&itemnumber=999999
    Note: Replace 1 by existing biblionumber, and iitem 999999 should not exist.
    You should get the 404 screen now.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a811dc236bd66571000e190690d289ce50e5e670
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Nov 2 14:01:33 2023 +0000

    Bug 35219: Fix ERM usage endpoints to show in docs
    
    This patch fixes the tags and also adds the tags to the swagger.yaml
    file to allow the endpoints to be documented correctly.
    
    One endpoint has also been deleted as it is no longer required.
    
    Test plan:
    Check the attached files to see that all tags are now prefixed with
    'erm_' and that the swagger file now includes an entry for all of these
    files
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8dcd5127957768e004fea1593abc755a2e24ed94
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Oct 28 22:31:57 2023 +0000

    Bug 35059: (follow-up) Get authorised value description from koha field
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1c81a1bd6bfc52a9a3ce195471d516ea69d7ed72
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Nov 4 13:45:56 2023 +0000

    Bug 28805: (follow-up) Fix non-printable char that breaks tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9e675d2ac43d47692c54b0fd1b2ede9ea31f0aa4
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Jul 13 17:51:13 2023 +0000

    Bug 34275: Add toggle switch for basic/advanced cataloging editors
    
    To test:
    1. Apply patch and regenerate CSS. (https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_interface)
    2. Turn on EnableAdvancedCatalogingEditor.
    3. Go to cataloging > 'New record'
    4. In the upper left notice a new toggle switch labeled 'Editor:'.
    5. Try toggling the switch back and forth to move between editors. Verify it works correecly.
    6. Try editing an existing record and make sure the toggle works well when editing records.
    7. Try the other method of switch editors, Settings > Switch to basic/advanced editor. Make sure it works the same as always
    8. Turn off EnableAdvancedCatalogingEditor, make sure the toggle button is no longer present.
    
    Signed-off-by: Eesther <esther@bywatersolutions.com>
    Signed-off-by: Brendan Lawlor <blawlor@clamsnet.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 470da48af8e4ebbb5c3f89386a2c3be8a9d12c6d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 3 17:11:51 2023 +0000

    Bug 29002: (follow-up) Make CanBook more resilient
    
    This patch adds a check for biblio existance prior to method resolution
    failure in Koha::Template::Plugin::Biblio.
    
    This fixes a failure case in unit tests.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cfc63f77bbeb10f3b80c706361ffabed041853ef
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 3 14:19:52 2023 -0300

    Bug 35190: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2a0410a70146a6d2bc223300255262bc6190eb7c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 3 14:18:17 2023 -0300

    Bug 35190: DBRev 23.06.00.062
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 97c09f1d3cf58500bf7b0f06446592fb77f6570f
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Mon Oct 30 13:19:02 2023 -0400

    Bug 35190: Adjust UI handling to avoid inserting an empty string
    
    To test:
    1. In the Administration module, create an Additional Field that is
       not linked to an authorized value
    2. Create another Additional Field that is linked to an authorized
       value
    3. Access the database in the command line (koha-mysql kohadev)
    4. Select all from additional_fields
    5. Confirm that each field correctly lists either the appropriate
       authorized value, or NULL
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a3be301e628d63e3fc71bcd709f90756f0b9aab8
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Mon Oct 30 12:07:28 2023 -0400

    Bug 35190: Adjust tests
    
    Test plan:
    prove t/db_dependent/Koha/AdditionalField.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 40414f9c694f3d044f81662c6d9df9c6ca19e2fc
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Mon Oct 30 11:31:31 2023 -0400

    Bug 35190: Set default NULL for authorised_value_category in additional_fields table
    
    To test:
    1. Start KTD without this patch
    2. In the Administration module, create an Additional Field with
       Authorized Value set to None
    3. Create another Additional Field with Authorized Value set to an
       existing authorized value
    4. Apply patch and updatedatabase
    5. Access the database in the command line with koha-mysql kohadev
    6. Select all rows from additional_fields
    7. Confirm that the two Additional Fields from earlier have values of
       NULL and the correct authorized value, respectively, in their
       authorised_value_category fields.
    8. reset_all to test new install
    9. Access the database in the command line
    10. Show the table structure for additional_fields and confirm that
        default for authorised_value_category is NULL
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4310e13a6416d680e825621278859e3b91b1942a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Sep 27 16:10:51 2022 -0300

    Bug 30024: Make link_bibs_to_authorities.pl rely on LinkerRelink
    
    This patch makes the trivial change of making the linker script rely on
    LinkerRelink instead of CatalogModuleRelink, which is confusing and
    incorrect (according to both sysprefs descriptions).
    
    To test:
    1. Verify that relinking is now tied to the right syspref
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d3df141a0bfa59e7811c1f919118b89072f0ae81
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 3 17:06:18 2023 +0000

    Bug 29002: (follow-up) Fix Permissions test
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ef9d9a006a59c2a44cc579309904f3019f2e004a
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Nov 3 14:51:35 2023 +0000

    Bug 33749: (QA follow-up) Tidy code for qa script
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b6d39225bccafbdf58b5481e1ab059368f99db79
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jun 7 17:31:37 2023 -0300

    Bug 33749: Use TrimFields instead of stripWhitespaceChars
    
    This patch replaces the uses of the static method with the new filter.
    It also moves the tests to the relevant place and removes the (now)
    unused method.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 54477ecc51e4504fa66d0f0cc6da50029225131a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jun 7 14:28:34 2023 -0300

    Bug 33749: Add TrimFields field class
    
    This patch adds a RecordProcessor filter class that takes care of
    performing the field cleanup that was originally done in the static
    method `Koha::MetadataRecord::stripWhitespaceChars`.
    
    In order to test the results, I adapted the tests to use the filter
    instead of the original method.
    
    To test:
    1. Run:
       $ ktd --shell
      k$ prove t/Koha_MetadataRecord.t
    => SUCCESS: Tests pass
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: Tests still pass
    4. Sign off :-D
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b2c48b3e01a451452020143cb9e44d3a1b28646b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Nov 2 11:07:06 2023 +0000

    Bug 31477: Use clipboard icon for inventory
    
    This patch changes the inventory icon on the cataloging home page. The
    "chart" icon is switched for one of a clipboard with a checkmark.
    
    To test, apply the patch and go to the cataloging home page in the staff
    interface. Check that the icon on the inventory link looks correct.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 05c28e5e1c6936a7b31b05055856ea5c2dd62556
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Nov 3 14:24:09 2023 +0100

    Bug 35230: (bug 30708 follow-up) fix description for catalogue_item
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 69c10412af3ceba7c7013d896f7cb2ce4cd44da3
Author: Fabricio Molina <fabriciomolina@theke.io>
Date:   Mon Oct 30 17:50:00 2023 -0300

    Bug 28805: (follow-up) Fix template logic error
    
    This patch fixes a problem in the template logic that made the 'Due
    date' legend display when `OnSiteCheckouts` and `SpecifyDueDate` are not
    set, as highlighted by QA.
    
    Sponsored-by: Banco Central de la República Argentina
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1cf021d96129646eb754a49d7bc9214e422b6970
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Sep 25 18:48:59 2023 +0000

    Bug 28805: (QA follow-up) Pass onsite variable to confirmation screen
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 23a1dfe04a242b0a4f0d1fbc937dc67febdc577f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Sep 25 18:26:28 2023 +0000

    Bug 28805: (QA follow-up) Restore removed asset
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 42297ccda3e78ad630f6927896a0204b470e039b
Author: Fabricio Molina <fabriciomolina@theke.io>
Date:   Mon Jul 3 14:55:59 2023 +0000

    Bug 28805: Add on-site checkout checkbox in batch checkout
    
    Add the 'on-site checkout' checkbox to the 'Batch checkout'. To verify the functionality, follow these steps:
    
      1) Before the modification is added, enable the 'OnSiteCheckouts' and 'BatchCheckout' system preferences.
      2) In the 'BatchCheckoutsValidCategories' preference, select all categories.
      3) Find a user in the system. For example, Henry Acevedo.
      4) In the 'Check out' section, you can see that the 'Checkout settings' option displays the 'On-site Checkout' checkbox when clicked.
      5) Check the 'On-site checkout' option. This will display the current date with a runtime deadline of 23:59.
      6) Enter a barcode (for example 39999000011418).
      7) Click the 'Check out' button. This will show that the loan was made on-site.
      8) Check the 'Batch checkout' section. This section does not hace the 'On-site checkout' checkbox.
    
    When loading the patch with the addition of the 'on-site checkout' checkbox in 'Batch checkout' starting from step 3), you can already find the checkbox in the 'Batch checkout' section. To use it, you can try the barcodes 39999000006179 and 39999000008494 together. Then continue from step 5).
    
    When viewing the loans, you will see that both items (39999000006179 and 39999000008494) will appear with the label 'On-site checkout'.
    
    If this patch is deactivated, the functionality will remain the same as it was before this change.
    
    Sponsored-by: Banco Central de la República Argentina
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1fa096e7a03ad7d42ca5f4de12d873ea1b8a4bce
Author: Mason James <mtj@kohaaloha.com>
Date:   Fri Nov 3 11:56:51 2023 +1300

    Bug 35242: Force memcache restart after koha upgrade
    
    to test..
    
    1/ install koha-common
        $ sudo apt install koha-common
    
    2/ start memcached, check PID
        $ sudo service memcached start
        $ sudo systemctl status  memcached | grep PID
            Main PID: 52851 (memcached)
    
    3/ build and install new koha-common package (will trigger a restart)
        $ sudo apt install ./koha-common-git+deadbeef.deb
    
    5/ check that memcache is started, and has new PID (52900)
        $ sudo systemctl status  memcached | grep PID
            Main PID: 52900 (memcached)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9110547de098264e2574e27f35859674f1ed18a2
Author: Slava Shishkin <slavashishkin@gmail.com>
Date:   Fri Oct 6 19:25:30 2023 +0300

    Bug 35004: Set row.quantity_received to 1 if row.quantity_received is empty and we're in 'cataloguing' mode
    
    Before the code changes only field value was set to 1,
    but "row.quantity_received" still had an undefined value.
    After correction row.quantity_received set to 1 if it is empty,
    but only when effective_create_items == 'cataloguing',
    and after that its value assigned to the form field.
    
    To test:
    1. Add a new basket.
    2. Create an order line
    3. Receive shipment and create an invoice
    4. Start receiving your order:
        Verify:
        - Quantity ordered: X
        - Quantity received: 1 (pre-filled, don't touch or change it)
    5. Click "Confirm"
    6. Observe the Receive error popup: "Order ZZZ: No quantity to receive
       set. No items will be created."
    7. Verify that "Order receive" was not happen (received orders remains
       empty)
    8. Apply the patch and make sure your order is received correctly after
       step 5.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e49abfa6b528818dbdb921d1997e964a52ea7a7a
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Oct 31 10:14:18 2023 +0000

    Bug 35196: Remove misc/perlmodule_* scripts
    
    These scripts are outdated and no longer needed in
    the codebase.
    
    To test:
    * Verify both perlmodule_* scripts have been removed from misc/
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 53ccbc7b61ec715f120b80723d669b9c164a8b54
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Nov 2 13:16:52 2023 +0000

    Bug 35231: Resolve crash on unexisting patron in Auth
    
    Test plan:
    Without this patch:
    Logout from OPAC. Crash.
    Try to login. Crash.
    
    With this patch:
    Enable login in tracking triggers. Clear lastseen.
    Flush memcache.
    Login. Check lastseen.
    Logout.
    Login.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3c02e599e3d902290ef6029a63a04ff2d87771c3
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Nov 1 22:37:40 2023 +0000

    Bug 34855: (QA follow-up) Terminology: "issue note" to "checkout note"
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0716caf2f8a204c444be5a3645473cfe22c5badc
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Sep 20 15:11:08 2023 +0000

    Bug 34855: Use template wrapper for breadcrumbs: OPAC part 3
    
    This patch updates several OPAC templates so that they
    use a new WRAPPER for displaying breadcrumbs.
    
    This patch also updates html_helpers.inc to add some logic for handling
    the case where the "Home" link is the only breadcrumb (on the OPAC main
    page). The change allows for the link to be disabled in this case.
    
    Apply the patch and log in to the OPAC. Test each of the following pages
    and their variations. Breadcrumbs should look correct, and each link
    should be correct:
    
    - OPAC main page
    - Course reserves
      - Course reserves details
    - Libraries
      - Follow the link for a specific library
    - View the details of a bibliographic record
    - Navigate directly to
      /cgi-bin/koha/opac-downloadshelf.pl?shelfnumber=X where X is the id of
      an existing list. (I don't think this page is ever seen unless the
      user has JavaScript disabled).
    - Locate a serial record and click the "More details" link under the
      "Subscriptions" tab.
      - Click the "Full history" tab.
    - Log into the OPAC as a user with checkouts. Navigate directly to
      /cgi-bin/koha/opac-issue-note.pl?issue_id=X where X is the id
      (issue_id) of one of the user's checkouts. (Another page which is only
      accessed directly if the user has JS disabled).
    - From the logged-in user summary page, click "Change password"
      - Submit a password change.
    - With "UseRecalls" enabled, locate a bibliographic record you can place
      a recall request for.
      - Place a recall.
    - With "OPACLocalCoverImages" enabled, locate a bibliographic record
      which has a local cover image attached.
      - Under the "Images" tab, click the image thumbnail.
    - If you have no custom OPAC pages, go to Tools -> Pages in the staff
      interface anc create one.
      - View the page in the OPAC.
    - With "OPACReportProblem" enabled, click the "Report a problem" link at
      the bottom of any OPAC page.
      - Submit a report.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cb2abacf21e03637be26e22b11ed4264384a3940
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Wed Nov 1 22:21:08 2023 +0000

    Bug 34406: (QA follow-up) Add another "Identity provier" to "domains"
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b75bcd7e9400fabc35144261cf16b2333e426e60
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Oct 6 12:20:23 2023 +0000

    Bug 34406: Fix inconsistencies in Identity providers/domains page titles, breadcrumbs, and headers
    
    This patch fixes some inconsistencies in the templates for identity
    providers and identity provider domains, making sure the page title,
    breadcrumb navigation, and page headers are consistent with each other.
    
    To test, apply the patch and check these views:
    
    - Administration -> Identity providers
      - New identity provider
      - Edit identity provider
      - Confirm deletion of identity provider
      - Manage domains
        - New domain
        - Edit domain
        - Confirm deletion of domain
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c5395ddf7d335e2f706e1de43c6155a1e8600802
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Sep 15 13:46:13 2023 +0000

    Bug 34802: Improve translation of title tags: Tags and comments
    
    This patch modifies tag and comments management templates so that title
    tags can be more easily translated. The patch also makes some
    modifications to titles, breadcrumb navigation, and page headers in
    order to make them more consistent with each other and with other
    similar pages.
    
    To test, apply the patch and go to Tools. Test each of the following
    pages and each variation of the page to confirm that titles,
    breadcrumbs, and page headers look correct.
    
    - Tags
      - Main page
        - Viewing tags by status: Approved, pending, and rejected (link in
          the right-hand column)
      - List of records by tag
        - This page has been modified so that the menu of tag link in the
          left-hand sidebar is styled consistently with other sidebar menus.
    - Comments
      - Approved comments
      - Comments awaiting moderation
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 486f81be1013a8389a620bd14d3a29849038d455
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Sep 12 16:20:39 2023 +0000

    Bug 34769: Improve translation of title tags: Patron lists
    
    This patch updates patron lists templates so that title tags can be more
    easily translated. Some templates have been updated for consistency as
    well: Harmonizing page title, breaddrumb navigation, and page headers.
    
    To test, apply the patch and confirm that the following pages have the
    correct title tags:
    
    - Tools -> Patron lists
      - New patron list
      - View patron list
      - Edit patron list
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ffb5022591f6b96c50bf8a9c0409bd01b108a65c
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Oct 17 09:24:09 2023 +0000

    Bug 35073: perltidy subscription-batchedit.pl
    
    git show -w <this_patch_hash>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7294908de35a46f491af4e170fb9f6294a5fb4bf
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Oct 17 09:20:59 2023 +0000

    Bug 35073: Default to existing value if there is one
    
    For values that dont exist in the batch edit submission, i.e. UI says 'No change', we default to existing value if there is one.
    
    Test plan:
    Preparation - Additional fields:
    1) Add a new 'additional field', visit:
    /cgi-bin/koha/admin/additional-fields.pl
    2) Click 'subscription' and '+ New field'. Enter a 'name' and hit 'save'.
    
    Serials:
    1) Add a new serial, visit:
    /cgi-bin/koha/serials/subscription-add.pl
    2) Put a biblionumber in the 'record' field, i.e. '112'. Press 'next' and click 'ok' on the alert box
    3) Fill all the required fields and click 'test prediction'
    4) Input something in the additional field created previously.
    5) Click 'save subscription'. Notice the additional field is as expected.
    6) Repeat steps 1-5 to create a second serial.
    
    Batch edit:
    1) Visit serials and hit the 'Search' button:
    /cgi-bin/koha/serials/serials-home.pl
    2) Click the 2 checkboxes for the 2 serials we created previously and click the new link that pops up 'edit selected serials'.
    3) Click 'Save' without changing anything.
    4) Go back to either of the serials, notice the value for the additional field is unchanged. Visit:
    /cgi-bin/koha/serials/subscription-detail.pl?subscriptionid=1
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 05d131febf2d98d1c0ec18da845589dcd80a5e8d
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Oct 17 09:18:29 2023 +0000

    Bug 35073: Rename additional_fields to available_additional_fields
    
    'additional_fields' is ambiguous and in other places we name this available_additional_fields instead. Do the same here.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c6284eed812eb4de52738e845b662e199f58fd1a
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Oct 29 15:20:03 2023 +0000

    Bug 35185: Remove is_html flag from sample notices that are plain text
    
    Some notices had the is_html flag for new installations, but actually
    didn't include any HTML formatting. These should be plain text
    to have the line breaks behave as expected.
    
    This updates:
    * 2FA_OTP_TOKEN
    * OPAC_REG_VERIFY
    
    We cannot do a database update here, as libraries will
    have changed and updated these. So this is only for new
    installations.
    
    To test:
    * Apply patch
    * reset_all (create a new sample database)
    * Verify that the HTML checkbox is not set for these notices
    * Verify they appear as plain text notices, not including HTML tags
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eeffa57eab1a693fe8c91990a987e12b61962e80
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 15 20:06:41 2023 +0000

    Bug 24480: (follow-up) Adjust tests
    
    With the way the patchset alters to use insert_fields_ordered, we now add fields to the beginning of their number group as opposed to appending before. We just need ot shift the order we expect the fields to end up in to make the tests pass
    
    To test:
    1 - Apply all patches except this
    2 - prove -v t/SimpleMARC.t t/db_dependent/MarcModificationTemplates.t
    3 - It fails
    4 - Apply this
    5 - prove -v t/SimpleMARC.t t/db_dependent/MarcModificationTemplates.t
    6 - It passes
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 498f0dfeccacb38fbc0b3ccbc6c47e769f7f8518
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 15 19:59:57 2023 +0000

    Bug 24480: (follow-up) Shift new fields into array and add after all are copied
    
    The updated code removed the pushing of fields to an array - this caused a bug.
    When multiple fields were copied and replaced and there were more fields added than existed originally we were adding the new field to the end, then removing the first occurence of the original field. If we tried to move 2 650 fields to 651 and the record had no 651 we would:
    - Delete the first 651, there were none, so nothing happened
    - Take the first 650, add it to the end of the 651 group (there were none, so it became the first 651)
    - Delete the first 651, which was the field we just copied
    - Take the second 650 and add it to the end of the 651 group (whihc had none, because we deleted it)
    
    I re-add the line, but do as suggesed by Phil and reverse the order (unshift vs push)
    
    To test:
    1 - Apply other patches
    2 - prove -v t/SimpleMARC.t
    3 - It fails
    4 - Apply this patch
    5 - prove -v t/SimpleMARC.t
    6 - It still fails, but more tests pass (there's another patch to follow)
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 48fd8d1900f23d33c2e7aa5f3a9f10c21cafdb54
Author: Arthur Suzuki <arthur.suzuki@biblibre.com>
Date:   Sat Jan 25 23:19:52 2020 +0100

    Bug 24480: Unit test
    
    This updates the SimpleMARC tests and MarcModificationTemplates
    tests to expect the new order of fields
    
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d3112dc3191a82e6cc6072394bd8d6035f66e15c
Author: Arthur Suzuki <arthur.suzuki@biblibre.com>
Date:   Fri Jan 17 10:26:58 2020 +0100

    Bug 24480: Fix insert_fields_ordered instead of append_fields in SimpleMARC
    
    Test plan :
     - create a marc modification template which add a new field to a record
     - apply that template to some records
     - verify that the new field is always appended at the bottom of the record, even if some fields are higher.
     - apply patch
     - apply template to another set of records
     - verify the added field is now ordered within the already existing fields in the records
    
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a1a70186920ff383f036edd5165782b52eafb6f9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 3 11:26:19 2023 -0300

    Bug 29002: DBRev 23.06.00.061
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 579887db9e2c1d2ec66f7fc72dd6ad1ab2f58199
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 3 11:18:50 2023 -0300

    Bug 29002: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 19a4e0f4923983fba1fb2078ac11f0f0d1ae4273
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 3 10:55:25 2023 -0300

    Bug 29002: (QA follow-up) Fix stray x-koha-embed
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5ed3758b97aa1dee2fb2b4bb574d89a3b2f318e9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 3 10:51:07 2023 -0300

    Bug 29002: (QA follow-up) Correct param retrieval in controllers
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6b7e493448246bd8bcd18415f5f05b7a97788056
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 3 09:52:15 2023 -0300

    Bug 29002: Tidy
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c369f4c6334e5e0d20907525610e51888224a5a1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 3 11:39:27 2023 +0000

    Bug 29002: Add 'manage_bookings' permission
    
    Somehow this got lost during rebases. Restoring the permission here to
    allow libraries to restrict which librarians can add, edit and remove
    bookings.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c358f9cc45837113e4d4f9beb7ddefda53dd8bb8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 27 15:23:02 2023 +0100

    Bug 29002: Empty select2 options for patron at modal close
    
    Select2's recommended reset doesn't remove <option> blocks it adds for
    ajax responses.. as such it gets confused when you subsequently
    re-initialise.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f1bb412c775204879e7b34fa178c524fc4c0d3be
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Oct 26 12:22:12 2023 +0100

    Bug 29002: Fix permission required to access bookings list
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f5eed5f2e3b339c60c86e8ecb78f4d777c7dd855
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Oct 19 11:40:04 2023 +0100

    Bug 29002: Fix database update idempotency
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e8abbf0814dc17586da3af2ebab99201a3371218
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Oct 18 15:55:04 2023 +0100

    Bug 29002: Update Makefile
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3b1612cf27cbf8ca52b59ed0877cd2db860a7346
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 1 09:03:31 2021 +0100

    Bug 29002: Circulation
    
    This patch adds handling for circulation of booked materials.
    
    We prevent checkouts of booked items during the booking period where the
    booking is for another user.
    
    We update the due date to match the end of booking period when checking
    out to the user who the booking is for.
    
    If a checkout would overlap a booking to another user, we ask the user if
    they will accept a reduced due date so the booked item is returned in
    time to fulfill the booking.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ea4cb8ff854a746d3f6869d36e8048d12e2e53c1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Oct 19 16:59:20 2023 +0100

    Bug 29002: Use buildPatronSearchQuery in patron select
    
    Rebased to use the standardised patron search query builder that has
    been introduced more recently.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 131a87567bcf7b649f2ca2eb727645c8550443b1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 10 17:09:38 2023 +0100

    Bug 29002: Prevent booking a checked out item
    
    This patch updates the bookings logic to prevent placing a booking
    on an item that is checked out to start prior to it's due date.
    
    Test plan
    1) Follow the previous test plans
    2) Add a checkout of an item
    3) Attempt to place a booking and note that the item is not available to
       be booked until after it's due date.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 14afa1318cef0abb7038705bf81960aa64dc389e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Oct 11 17:20:42 2023 +0100

    Bug 29002: Ensure bookings stash is up to date
    
    This patch adds the edited/added booking to the bookings stash such that
    subsequent triggers of the place/edit booking modal will reflect the
    change in thier picker.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0bf474a33822470ba1ceaf7e9e77061bc6c71572
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 10 15:25:20 2023 +0100

    Bug 29002: Fix patron selection and clarify variable names
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 63d710e3b3580b319e49b34bb7abcf713c40deab
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 10 12:07:49 2023 +0100

    Bug 29002: Fix item select options
    
    SQUASH INTO RESET BUG?
    
    This patch ensures that when a period is not selected we remove all item
    selection limitations from the item select.
    
    Prior to this patch, if you clicked to edit a booking, cancelled, then
    clicked to place a new booking.. the modal would prevent selection of
    the item which you just edited.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d13e49854afb5e7c22f8771a65b7a85d4575f488
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 3 15:30:56 2023 +0100

    Bug 29002: Reset timeline object on cancel
    
    When cancelling out of the modal confirm, we should reset the changed
    object in the timeline rather than leaving it with the appearance that
    the edit succeeded.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e018f86de325acbd8ebc89a8e2b956a0261895ce
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 3 08:07:10 2023 +0100

    Bug 29002: Fix async bookings load issues
    
    This patch updates the modal booking form to only fire the ajax request
    upon first modal opening and then moves the data related setup into a
    function that can be trigger either upon promise resolution or
    immediately if the data already exists at the time the modal is opened.
    
    We also update some instances of datetime processing to use dayjs
    endOf('day') function as it appears to work more reliably with timezone
    maths that our prior work that used direct mathematical manipulations.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 927967d9240f3d73423f1c08a7fa5d86da1bcc47
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Sep 29 14:23:25 2023 +0100

    Bug 29002: Properly reset item in form
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c067e176402683749e991b9d4af5ea0615b0b1c7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Sep 29 13:40:52 2023 +0100

    Bug 29002: Focus on edited/added timeline item
    
    This patch triggers a re-focus of the timeline when a new bookings is
    added or an existing booking is edited such that the resulting booking
    is scrolled to in the visable timeline.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit adcaee8b6dc65aa36c15f8beef78c920891ae9ab
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Aug 23 11:54:19 2023 +0100

    Bug 29002: Fix patron display for new bookings in timeline
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9b9e9614d2ce3c2cd9715e7a9924d0c3aaceac3b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Aug 22 16:11:29 2023 +0100

    Bug 29002: Always reset the place/edit form on modal close
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d3a3297963328787191c949ab51ae88686855b8b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Aug 18 17:43:25 2023 +0100

    Bug 29002: Add an edit modal
    
    This patch updates the place_booking modal so it may be used as an
    edit/confirmation modal at booking edit time.
    
    Test plan
    1) Follow the previous test plans
    2) Note the new 'Edit' option in the bookings list table
    3) Click the 'Edit' button to trigger the edit modal
    4) Edit the dates, item or patron and confirm that upon clicking save
       the edit works as expected.
    5) Edit a booking via the timeline
    6) Note that the edit not triggers the same edit dialogue modal where
       you can make further changes.
    7) Save and note the timeline and bookings table reflect the changes.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2c6d57c25405545465ecef34c6b96df1f4015bde
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jun 13 14:11:17 2023 +0100

    Bug 29002: Assign item at time of booking
    
    This patch updates the logic to ensure we always assign an item at the
    point of booking instead of assuming we can assign the item at fulfilment time.
    
    This makes the logic significantly simpler on the client when trying to
    calculate available dates.
    
    Test plan
    1) Attempt to create a new booking using the 'Any item' option in the
       modal
    2) Note that upon placing your booking you are assigned an item for that
       booking.
    
    NOTE: We add a FIXME to the client code to highlight something to test
    when/if someone decides to have another try and moving the item
    assigment to just in time as aposed to up front.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 771fedcaa8c1bc9f431852d6f68713a6634d6bd6
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Aug 18 11:14:00 2023 +0100

    Bug 29002: Add cardnumber to patron display in bookings table
    
    Update the table display to include patron cardnumber to match that of
    the display in the timeline view above.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 040dbfce6357492d3157b281c5aff8ffd619648c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Aug 18 11:12:22 2023 +0100

    Bug 29002: Hide search header in bookings table
    
    This patch disables the header search on the bookings display table
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8b38eec31474e132d95d183841fb9d20595347c6
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Aug 18 11:04:01 2023 +0100

    Bug 29002: Display patron rather than booking id in timeline
    
    This patch improves the display of the bookings timeline to display who
    the booking is for rather than a cryptic booking id.
    
    Test plan
    1) Follow the previous test plans
    2) Navigate to the bookings display tab
    3) Note that the timeline now displays each booking with the patron
       title as expected as apposed to "Booking XX"
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 272aef8b9d4fa69b828f8f76c0117badab3699ba
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Aug 18 10:31:35 2023 +0100

    Bug 29002: Trigger table reload on timeline move
    
    This patch triggers the bookings table to refresh when a booking it
    edited on a page where the table is visable.
    
    Test plan
    1) Follow the previous test plans
    2) Edit a booking
    3) Note that on saving the table is updated to reflect your edit
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e2e0d66ac889953908ed3c2f9a7d6dfc08eca621
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Aug 17 18:14:18 2023 +0100

    Bug 29002: Match select2 patron format to patron_autocomplete
    
    This still needs a little work to fully match, but is getting close now.
    
    I'd love to convert the existing autocompletes to select2 styling
    instead actually.. maybe convert the select here to patron_autocomplete
    and then work on a patch to convert patron_autocomplete to a select2
    implimentation.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d28253536f6a15b39337957afe5fd06b2422b9d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jul 14 16:41:21 2023 +0100

    Bug 29002: (follow-up) Use $patron_to_html function
    
    This didn't exist when we first wrote this code.. it's a useful addition
    now.
    
    Test plan
    1) Follow the test plans for previous patches
    2) Note the proper display of patron names in the bookings list table
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e6224e960f4b5994857e6ef9a059d88c8eb7f2f8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jul 14 14:24:38 2023 +0100

    Bug 29002: (follow-up) Rebase fix, remove q_header
    
    We have removed q_header support in master, so we now need to remove it
    in this patchset too.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6bfe8467cba089fb83d0c4ef93c173078bd72bb1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri May 19 16:48:40 2023 +0100

    Bug 29002: (follow-up) Add bookings count to side menu
    
    This patch adds booking counts to the bookings option in the side menu
    for biblio display pages.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 674d240f03e0152e5bf63e2fff9c77ff2e51f254
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri May 19 16:39:39 2023 +0100

    Bug 29002: (follow-up) Fix biblio-view-menu on bookings tab
    
    Another rebase change, we moved from can_ in Auth.pm to Koha.Preference
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 358aea5eebb2da5a0d7a2e6cc5c8ae44b31f5188
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu May 18 15:34:58 2023 +0100

    Bug 29002: (follow-up) Update for WRAPPER bugs
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 999e5f31c82979e4c19611f5ec934425ffd19ac4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue May 16 23:09:48 2023 +0100

    Bug 29002: Enable editing bookings from the timeline
    
    This patch allows for editing bookings using drag and drop on the
    timeline view.
    
    Test plan
    1) Follow the test plans from the previous patches
    2) Navigate to the bookings tab of a biblio where you have created some
       test bookings
    3) Note you can click on a booking in the timeline to highlight it.
    4) Note you can then drag the booking forward or backwards along the
       timeline to trigger an edit
    5) Note you can drag the start or end of a booking to extend a booking
       and trigger an edit
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1a7d3efcabd30312b05ce5feb8350a03c586b83d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue May 9 10:54:59 2023 +0100

    Bug 29002: Schema update
    
    DBIx::Class schema update for new 'bookable' field in the items table
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2472214301fc04250a978570b78096ebf4d5e5d1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Nov 10 11:42:17 2021 +0000

    Bug 29002: Add bookable state to items
    
    This patch adds a bookable boolean to enable/disable the ability to book
    an item ahead of time
    
    Test plan
    1) Navigate to the 'Items' tab of a biblio
    2) Note the new 'Bookable' option and select at least one item to allow
       bookings to take place
    3) Note that without any items selected as 'bookable' one does not have
       the 'Place booking' option or the 'Bookings' tab on the biblio
       details page.
    4) Note that when at least one item is bookable, the place booking modal
       now only displays items that are marked as bookable in the item
       selection
    5) Sign off
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 662c4d6ba2c9370ee315cd1a99f99cb5acb0ec4d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon May 15 16:56:24 2023 +0100

    Bug 29002: Use vis-timeline in bookings view
    
    This patch uses vis-timeline to display a timeline of bookings on the
    booking details display tab.
    
    Test plan
    1) Follow the steps from the previous patch test plans
    2) Note the new visual timeline view of bookings on the bookings detail
       page.
    3) Confirm that clicking the red cross next to a booking triggers the
       cancellation modal
    4) Sign off
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8741d078449c8adf4801d783e921253f36e8fe6f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon May 15 16:55:44 2023 +0100

    Bug 29002: Add vis-timeline
    
    This is a preparitory patch to add the vis-timeline javascript library.
    We will use if to display bookings in a timeline view on the bookings
    page.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 21fb4634455607f48bd89e1379393b78e0880d74
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Dec 8 14:59:17 2021 +0000

    Bug 29002: Add modal based booking cancellation
    
    This patch adds a modal based booking cancellation flow to the biblio
    bookings display tab page.
    
    Test plan
    1) Follow the test plans for the previous patches
    2) Note a new column now appears in the bookings table with a 'Cancel'
       action button against each booking
    3) Cancel one of the bookings using the new cancel button
    4) A modal dialog should appear allowing you to continue with the
       cancelation or cancel
    5) Confirm the cancelled booking is removed from the bookings table
    6) Sign off
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2ff5cf976c39d5d0759492a078f0623575bcdc31
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu May 18 14:52:58 2023 +0100

    Bug 29002: Fix 'Place booking' for cat pages
    
    We added the 'Place booking' option to the cat-toolbar, but it require
    includes for select2 and calendar which weren't present everywhere..
    This patch corrects that.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 902d7e4fb0fc9d3e98a6db5e7b3197ab43dccfac
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon May 15 16:30:26 2023 +0100

    Bug 29002: Add bookings view
    
    This patch adds a new view to the biblio details page to display any
    bookings that may have been made.
    
    Test plan
    1) Run through the steps from the previous patch
    2) Note the appearance of a new 'Bookings' option in the left menu
    3) Click the bookings option to load the new bookings page for the
       biblio
    4) See that the booking from the previous patch appears on the page
    5) Sign off
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9fff2e1f4e082e470667ad1b338eaab6164896b4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Sep 29 15:17:38 2021 +0100

    Bug 29002: Add ability to book material from the staff client
    
    This patch introduces a new modal to the biblio details page to allow
    booking of materials.
    
    Test plan
    1) Navigate to the details page of a biblio
    2) Note the new 'Place booking' button in the toolbar
    3) Click the new button and note the new modal dialogue
    4) Enter part of a patron name or cardnumber and then select from the
       presented results
    5) Optionally pick an item from the select list
    6) Select a start date and end date from the calender
    7) Submit
    8) Attempt to book the same item to another user, note that the dates
       previously selected are now greyed out.
    9) Experiment with different items and all items options to confirm the
       available slots in the datepicker update as expected.
    10) Sign off
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e8d52195475350b286f980364430648499ec16dd
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Sep 16 09:17:30 2021 +0100

    Bug 29002: Add bookings objects and API classes
    
    This patch adds new Koha::Object based classes for bookings logic and
    adds API controllers to expose the new bookings data via the REST API's.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1a679de4a1c2dcb3ff7e1e2098f3d968cd777104
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Sep 15 16:30:15 2021 +0100

    Bug 29002: DBIC Schema Build
    
    Rebuild of DBIx::Class schema files for the new table and relations
    added.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c41b83cfaba76edee847d8897a40c83bd16b57eb
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Sep 15 16:29:43 2021 +0100

    Bug 29002: Add bookings table
    
    This patch adds a new bookings table to store booking details.
    
    Test plan
    * Confirm that kohastructure and the atomicupdate match such that an
      install or upgrade result in the same table being present on the
      system.
    
    Sponsored-by: PTFS-Europe
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Janet McGowan <janet.mcgowan@ptfs-europe.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 29cb60e92a4b37da841cac4ff3369aab6cbaad0e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 2 10:39:24 2023 -0300

    Bug 8367: (QA follow-up) Fix broken tests in Reserves.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4a1001a3298a709aed3f52a4ce87f75b726a7cb3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Nov 2 10:22:03 2023 -0300

    Bug 8367: (QA follow-up) Fix broken tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 66a87766a2974ad7e403441dbd61c500897b5804
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 1 17:56:34 2023 -0300

    Bug 18203: DBRev 23.06.00.060
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7456c5a4838464ff137d0fb2b04e12f2c624a35b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 1 17:52:04 2023 -0300

    Bug 18203: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 57f2ff845918a83300058184b2ce6e5892e7888f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 1 17:49:03 2023 -0300

    Bug 18203: Rename column
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 13720defdda83e00e2633051c14a887ffbe56ca0
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Jul 12 09:19:15 2023 +0000

    Bug 18203: Add per borrower category restrictions on placing ILL requests
    
        Test Plan:
        - Enable ILLModule sys pref and install any backend, or run
        bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev.sh)
        - Verify you can place new ILL requests in OPAC and Intranet
        - Apply patch
        - In borrower categories, verify there's a new column for 'can place ILL in opac' and is set to 'yes' by default
        - Edit your borrower's patron category and set 'can place ILL in opac' to 'No'
        - Verify you can no longer place new ILL requests in OPAC
        - Verify you also cannot place new ILL requests through URL:
        :8080/cgi-bin/koha/opac-illrequests.pl?method=create&backend=FreeForm
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0780ae325d06ffb7eacd14a412e8c1c9a16aaaec
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Jul 12 09:15:03 2023 +0000

    Bug 18203: DB specific and atomicupdate
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 58d5fc0db147c13b13275a7d530c535b49442a71
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 1 17:39:12 2023 -0300

    Bug 8367: DBRev 23.06.00.059
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c654932f0c376b2b619c9bd4550aab0adf9acdab
Author: Aleisha Amohia <aleisha@catalyst.net.nz>
Date:   Wed Oct 18 01:38:54 2023 +0000

    Bug 8367: (follow-up) Fix for circ rules editor
    
    Make sure holds pickup period field is empty when editing a 'default' rule.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fff910fc56a9d5a6a964ed1e86955cf70e45808a
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Oct 9 21:51:08 2023 +0000

    Bug 8367: (QA follow-up) Fix QA script
    
    * Add +x to atomic database update file
    * Perltidy
    * Add spans to rewritten tab label for translatability
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c2ae16ac876cc275a5a6c9e7a5e556370b134e9a
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Sun Apr 30 22:20:23 2023 +0000

    Bug 8367: Add holds_pickup_period fallback circulation rule
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 63504e325ddf6db61252d94b6d5829bb87628358
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 6 20:03:14 2023 +0000

    Bug 8367: (QA follow-up) Improve display when value not set for rule
    
    When a rule is not set for a speficic line, the value in the syspref
    will be used. This should be made clear in the interface.
    
    To test:
    1 - Add a new rule for a specific item type
    2 - Do not fill the 'Hold pickup period'
    3 - Confirm that the rule defaults to the system preference
    4 - Hover on 'Default' in the circ rules under 'Hold pickup period'
    5 - Confirm the text is readable
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0a5b2b6d6ce68489659e8f5a8b3990cc59759a53
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Mar 6 15:50:13 2023 +0000

    Bug 8367: (QA follow-up) Update message on Hold waiting pickup report
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    https://bugs.koha-community.org/show_bug.cgi?id=8367
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit caef730218b3f5fbf6211a1ce890e7875cdd39b8
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Fri Jan 13 14:39:50 2023 +1300

    Bug 8367: (follow-up) possible to delete circ rule
    
    Signed-off-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3a1c40a29056123de507a89156c9118f7c52a17f
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Nov 2 08:48:19 2022 +1300

    Bug 8367: (follow-up) Remove unnecessary code and atomic update
    
    Signed-off-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c713fa335a3eb938b975be68258ef0872e514487
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Mar 14 16:34:54 2022 +1300

    Bug 8367: (follow-up) Fix tests
    
    Signed-off-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f47c5f09f7efcd2a92dd91f7c2819d62a31ec893
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Mar 14 13:59:37 2022 +1300

    Bug 8367: (follow-up) Remove pickup delay message from OPAC
    
    It adds unnecessary complexity and information.
    
    Signed-off-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ffde32e0d71ef80cc42bc8a55b4fc2c4013a6a97
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Thu Mar 3 10:03:28 2022 +1300

    Bug 8367: (follow-up) Fix pickup delay text on OPAC and other bits
    
    Signed-off-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 015fb672c52daf28bb14ae51fd2bbb2637635c96
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue Sep 21 05:21:42 2021 +0000

    Bug 8367: Make database update idempotent (across different MariaDB versions)
    
    The previous query seemed to work on MariaDB 10.1.48 (used by koha-testing-docker),
    but it didn't work on MariaDB 10.3.29 (default in Debian 10 as of this writing),
    but this patched query works on both indempotently.
    
    Signed-off-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ea68ea1e4c958c67b9f3d3623e2951379abaddae
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue Sep 7 07:09:43 2021 +0000

    Bug 8367: Make database update idempotent
    
    Signed-off-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6c0eb32a084c50efc7af16720820e355ceb8a4bf
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Apr 20 16:13:35 2020 +0000

    Bug 8367: Add holds_pickup_period circulation rule
    
    So that pickup delay can have a different value per patron category,
       item type or branch.
    
    To test:
    
    1) Update database, restart services
    2) Set ReservesMaxPickUpDelay syspref (if not already set)
    3) Edit your circulation rules and set a value under 'Holds pickup
    period (day) that is DIFFERENT from ReservesMaxPickUpDelay. Set a few
    different numbers for different branches as well.
    4) Place a hold on a biblio from the staff client.
    5) Check in an item from that biblio and confirm the hold as waiting
    6) Confirm the expiration date is calculated using the 'Holds pickup
    period' value instead of the ReservesMaxPickUpDelay syspref
    7) Revert the waiting status and delete the hold
    8) Re-place the hold on the biblio on the OPAC. Notice that when you
    change the pick up location, the number of days in the pickup message
    below the dropdown changes based on the circ rules.
    9) Create a holiday with a date that will overlap with the 'Holds pickup
    period'
    10) Check in an item from that biblio and confirm the hold as waiting
    11) Confirm the expiration date is calculated using the 'Holds pickup
    period' value AND considers the special holiday
    12) Confirm tests pass t/db_dependent/Holds/WaitingReserves.t
    13) Test Talking Tech:
    13a) Enable TalkingTechItivaPhoneNotification
    13b) Go to Tools -> Notices & slips. Add content to the HOLD phone
    (itiva) notice.
    13c) In your terminal, run perl
    /path/to/koha/misc/cronjobs/thirdparty/TalkingTech_itiva_outbound.pl -o
    ~/itiva.tmp -w 0 --type=RESERVE
    
    Sponsored-by: Catalyst IT
    
    Signed-off-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c100eda1bd4c6fa4fb46c95b70efef3bbe4c75a2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jun 22 15:42:52 2023 +0000

    Bug 34098: Improve translation of some strings in the patron import template
    
    This patch updates a few sections of the patron import template in order
    to import the way strings are identified for translation.
    
    To test, apply the patch and install another translation if necessary.
    
    - Go to Tools -> Import patrons
    - Under "Notes," you should see a link, "Download a Starter CSV file
      with all the columns."
    - Test the process of importing a batch of patron records.
      - When the import completes, confirm that the status messages are
        correct:
    
        X imported records
        X overwritten records
        X not imported because they are already in borrowers table and
          overwrite is disabled
        X not imported because they are not in the expected format
        X records parsed
    
    TESTING TRANSLATABILITY
    
    - Update a translation, e.g. fr-FR:
    
    > cd misc/translator
    > perl translate update fr-FR
    
    - Open the corresponding .po file for the updated strings, e.g.
      misc/translator/po/fr-FR-messages.po
    - Locate strings pulled import_borrowers.tt for translation and confirm
      that they are readable and have context information under 'msgctxt'
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 639c60d5f3e8b5dff3105fc7aadcf8830c636b20
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 18 14:18:40 2023 +0000

    Bug 35091: Improve translation of usage statistics country list
    
    This patch reworks country-list.inc so that each country name can be
    wrapped separately in the t() translation function and be processed
    individually during the translation process.
    
    To test, apply the patch and update a translation, e.g. fr-FR:
       - perl misc/translator/translate update fr-FR
    
    - Edit the updated po file for the language you chose, e.g.
      misc/translator/po/fr-FR-messages.po, and locate strings from
      country-strings.inc. Each country names should show up as a separate
      string for translation.
    - Update the file to fill in translated strings for one or more
      countries. For example:
    
      koha-tmpl/intranet-tmpl/prog/en/includes/country-list.inc:2
      msgid "Afghanistan"
      msgstr ""
    
    - Install the updated po file:
       - perl misc/translator/translate install fr-FR
    - Enable the translation if necessary under Administration -> System
      preferences -> language.
    - Go to Administration -> Share usage statistics and check the "Your
      country" dropdown. The list should look correct.
    - Switch to your updated translation and confirm that the country names
      you translated show up as expected.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bbf91c7ef66c818ee44d1336df8915453de8e806
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Oct 20 18:18:38 2023 +0000

    Bug 26824: Use confirmation modal when removing titles from a list in the OPAC
    
    This patch changes the process of removing a title from a list so that
    it uses a confirmation modal dialog instead of a JavaScript alert.
    
    To test, apply the patch and view the contents of a list in the OPAC.
    
     - Click the "Remove from this list" link under one of the titles.
     - You should see a modal confirmation message, "Are you sure you want
       to remove this item from the list?" It should show the title of the
       item on the list.
     - Test both the "Yes" and "No" choices.
    
     - Check the box next to one title on the list, and click the
       "Remove from list" link at the top of the table.
     - You should see a modal confirmation message, "Are you sure you want
       to remove this item from the list?" It should show the title of the
       item on the list.
     - Test boh the "Yes" and "No" choices.
    
     - Check the box next to multiple titles on the list and click the
       "Remove from list" link at the top of the table.
     - You should see a modal confirmation message, "Are you sure you want
       to remove these items from the list?" It should show the titles of
       all the records you selected.
     - Test both the "Yes" and "No" choices.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9ad38e6e3893ff3030d433bfc650f3b34419ec5f
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue May 9 22:11:00 2023 +0000

    Bug 33575: (QA follow-up) Fix date sorting on Date column
    
    Implements correct date sorting for different date formats on the Date column.
    
    See:
    https://wiki.koha-community.org/wiki/DataTables_HowTo#Sorting_dates_regardless_of_date_format_preference
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b3e28684b9fd4f95288d79b5e9f3b0522f1cf0f9
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Apr 21 14:10:51 2023 +0000

    Bug 33575: (follow-up) don't allow priority and pickup location to be hidden
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c649f73d029b406a6bad80c31b8388ba19cdd15c
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Apr 20 15:47:01 2023 +0000

    Bug 33575: Add dataTable to hold table on /reserve/request.tt
    
    To test:
    1. Have a record with several holds on it.
    2. Go to the holds page for that record ( /cgi-bin/koha/reserve/request.pl?biblionumber=144 )
    3. Cannot sort by columns
    4. Apply patch, restart_all
    5. Now the table should be a dataTable that will allow you sort.
    6. Try hiding columns by clicking on the 'Columns' icon above the table, make sure columns are correctly being hidden.
    7. Try to hide columns by going to Adminstration > Table settings ( Circulation > Holds > patron_holds_table ), make sure columns are correctly being hidden.
    8. Now login with a user who has the 'place_holds' permission but does NOT have the 'modify_holds_priority' permssion.
    9. The table will not have the change priority columns. Make sure all columns can still be hidden/shown correctly for that use.
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 76b0dbc8a0753bdf6a5c5a694b85b29b1c6e8e85
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed Sep 20 10:24:02 2023 -0400

    Bug 34834: Add translation context for "Order"
    
    This patch adds context for translation to the term "Order". It is
    sometimes used as a verb (e.g. to order) and sometimes as a noun (e.g.
    an order).
    
    To test:
    1. Go to the various pages and make sure Order appears correctly in
       English
    
       -  orderreceive: when receiving multiple orders, the table heading
       -  parcel: when receiving an order, there is a "View" menu with
          "Order", "MARC", and "Card"
       -  z3950_search: when adding an order from an external source, if
          you hover the mouse on the Order option, there is a thing that
          opens (a tooltip?) with the word "Order"
    
    2. Apply patch
    
    3. Redo step 1 in English, make sure the pages still work
    
    4. Update the translation files
    
       gulp po:update --lang fr-CA
    
    5. View the messages.po file and make sure the term is translated for
       both verb and noun context (you can put anything, just something
       different to tell them apart)
    
    6. View the pages in the other language, the terms should be
    
       -  orderreceive: noun
       -  parcel: noun
       -  z3950_search: verb
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 05f33b4fcb36e56cbfd32021f5b8209b59b59511
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Oct 17 17:13:55 2023 +0200

    Bug 35079: Replace --force-extract by --generate-pot={always,auto,never}
    
    This restores the original behaviour of always building the POT file
    in order to not break existing workflows
    Option --force-extract is deleted in favor of a new option
    --generate-pot that can have 3 values:
    
    * always: always build the POT file. This is the default value
    * auto: build the POT file only if it does not exist
    * never: never build the POT file
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0584a2016e6c2b3811524a02cd5f4cb6a26fcb65
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Oct 17 16:33:37 2023 +0200

    Bug 35079: Rebuild POT files only if necessary or asked explicitely
    
    By default, gulp tasks po:create and po:update won't rebuild the POT
    files if they already exist.
    Both tasks gained a new option --force-extract to rebuild them
    unconditionally
    
    This makes it possible to create/update PO files for multiple languages
    sequentially without rebuilding the POT file for each language.
    For instance:
    
        gulp po:update --lang fr-FR
        # do something with the PO files
        gulp po:update --lang en-GB
        # ...
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f380181fc4bc5581558f3582d29f3156be5f6b74
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Oct 30 13:31:47 2023 -0400

    Bug 34456: (QA follow-up) perltidy code
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 38a9c08722185685d1723b20717e90d648b4cc9d
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Oct 30 13:29:52 2023 -0400

    Bug 34456: (QA follow-up) Change download link language
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6fccc1dcb5825d4d59b2b6aeb0bb6b065e10f821
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Aug 2 07:56:46 2023 -0400

    Bug 34456: Add the ability to download a template rendered report as a file
    
    Bug 34136 adds the ability to render a report using a notice template rather than displaying data in a table. It would be even more useful to be able to download the contents as a file where the notice subject can be used as the filename so the filename can be generated dynamically ( such as adding the current date as part of the filename ).
    
    Test Plan:
    1) Follow the test plan for Bug 34136
    2) Run your report
    3) Note under the Download menu the new item "Download as" with the
       subject line for your template
    4) Click that link, note the file contains the contents of your report!
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1e53f48efecfdd05db6acc31083ee2590f278f1d
Author: Victor Grousset <victor@tuxayo.net>
Date:   Mon Oct 30 20:58:21 2023 +0100

    Bug 35171: (QA follow-up): tidy up POD
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4bfd1e21c6ff2415c8e36ec2e376ca1c1330fbb2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Oct 26 18:03:40 2023 +0000

    Bug 35171: Add send_empty option to runreport
    
    This patch adds a new 'send_empty' option to runreport.pl
    
    To test:
    1 - Create a report in Koha that will not return any results:
        SELECT barcode FROM items WHERE 1=2
    2 - perl misc/cronjobs/runreport.pl 1
    3 - Output is: NO OUTPUT: 0 results from execute_query
    4 - perl misc/cronjobs/runreport.pl 1 --send_empty
    5 - Output is: no results were returned for the report
    6 - perl misc/cronjobs/runreport.pl 1 --send_empty --email
    7 - It will die on an email error unless you have SMTP configured - this si good, it means we sent an email
    8 - Bonus points: Test on a system that can correctly send emails, confirm it works :-)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 78589dbe6ecf1a4126b0420894a732bd58a9752a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 30 13:14:16 2023 -0300

    Bug 34008: Harmonize attribute names
    
    This patch harmonizes the attribute names with what is used for `items`
    and `checkouts` in terms of terminology.
    
    It also adapts the tests so they are less random failure-prone (they had
    a fixed value for the item type, which might make things explode if the
    chosen value already exists on the DB.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 05f0604d609c180070207f5608b256639e2e2ccb
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 30 11:08:15 2023 -0300

    Bug 34008: (QA follow-up) 'item_type_id' should be used
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 82bdf93ab71f4d16ced622667ef89bafb5008d1e
Author: Andreas Jonsson <andreas.jonsson@kreablo.se>
Date:   Sat Sep 16 10:13:15 2023 +0000

    Bug 34008: Add REST endpoint for list of itemtypes
    
    Test plan:
    * Enable the system preference RESTBasicAuth
    * curl -s --request GET http://kohadev-intra.mydnsname.org:8081/api/v1/itemtypes
      should give 401 Unauthorized
    * curl -s -u koha:koha --request GET http://kohadev-intra.mydnsname.org:8081/api/v1/itemtypes
      should produce JSON-list of itemtypes
    * curl -s -u koha:koha --header "x-koha-embed: translated_descriptions" --request GET http://kohadev-intra.mydnsname.org:8081/api/v1/itemtypes
      should include the field translated_descriptions containing the translated descriptions, if any
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] perltidy -b t/db_dependent/api/v1/itemtypes.t # Resolve bad score of 44
    [EDIT] chmod 755 t/db_dependent/api/v1/itemtypes.t
    [EDIT] perltidy -b Koha/REST/V1/ItemTypes.pm
    Lesson: Please run qa tools yourself and adjust accordingly?
    Edit (tcohen): I restored the item_type_translated_description.yaml file
    as the entire API was broken because of the lack of it.
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 29bf7500f9c24e7875865b502b7a6b088fc0983b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 1 17:08:48 2023 -0300

    Bug 33664: DBRev 23.06.00.058
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 99272cecd1e6fa7c769b9ab8d917e781b4307d12
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Oct 30 15:34:19 2023 +0000

    Bug 33664: (follow-up) Move check for 'received' to include Modify link
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9c4cd7380ef358fef0953e4d861cf5a50aff3e83
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jul 28 15:39:38 2023 +0000

    Bug 33664: Add ability to cancel order lines in closed baskets
    
    At the moment it's only possible to cancel order lines while the
    basket is still open or from the pending orders page during processing
    a shipment. The latter requires you to add a shipment and fake an
    invoice. To make things easier we want to optionally allow cancelling
    order lines in closed baskets from the basket summary page.
    
    Before applying the patch:
    
    1) Set up data
    * Create a new basket
    * Create a few order lines, at least 3
    * Close the basket
    * Receive shipment and receive one order line
    
    2) Verify current behaviour
    * On basket summary page: you cannot cancel while the basket is closed
    * On the pending orders page you can cancel
    
    Apply patch, run database update, restart_all
    
    3) Verify new behaviour
    * Verify that nothing has changed on pending orders and basket summary
    * Switch new system preference CancelOrdersInClosedBaskets to "Allow"
    * Verify that pending orders hasn't changed a bit
    * Verify that you now can cancel your order lines in the closed basket
      Exception: the received order line should not be cancellable
    
    Test anything else that you think might make sense ;)
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 508d55eb7bd7b7d8e1c2ec1f455c5181fd1d2800
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 17 12:39:44 2023 +0100

    Bug 35074: Add support for category_code to writeoff_debts
    
    This patch adds support for passing category_code as a limiter for the
    writeoff_debts script.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6f693a2420c92556dff2acb05eb0be173ad27c77
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 27 14:02:27 2023 +0100

    Bug 35074: Use patron relationship alias
    
    This patch updates the existing Koha::Account::Line->patron accessor to
    use the new aliased 'patron' relation in the schema class
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 465713bb63be5ece367ef8952671b2f9b1c92b33
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 27 14:01:35 2023 +0100

    Bug 35074: Add patron relationship alias
    
    This patch adds the 'patron' relationship alias to the Acountline
    DBIx::Class schema.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 79908aef27ccbb3bb8a37e87d336aba34e12754d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 1 16:52:08 2023 -0300

    Bug 32730: Add tests for Koha::Patron->get_lists_with_patron
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 21504e2ab4c6b2d4b03788e60d69548e5005588a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 1 16:15:07 2023 -0300

    Bug 32730: Add FIXME in POD to highlight return value
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0f122a940078ed5be92d358d5c0d9c5883c1e7c5
Author: Michael Hafen <michael.hafen@washk12.org>
Date:   Fri Jan 27 11:14:32 2023 -0700

    Bug 32730: Add Patron Lists tab to patron details and circulation pages
    
    Test Plan:
    1. Apply patch
    2. create a patron list if there aren't any
    3. search for a patron
    4. observe the "Patron lists" tab showing the list that the patron is not in
    5. try adding the patron to the list and removing them from the list to
       be sure the feature has full operation
    6. click "Check Out" on the side bar menu to navigate to the circulation
       page for this patron
    7. observe the "Patron lists" tab, and verify it operates as it did on the
       patron details page
    
    Bug 32730: (follow-up) Minor corrections
       by Owen Leonard
    
    This patch corrects an instance of an incorrect capital letter
    ("Patron Lists" -> "Patron lists") and makes minor tweaks to
    indentation.
    
    Signed-off-by: Stina Hallin <stina.hallin@ub.lu.se>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Edit: (tcohen) new files should be run through perltidy ALWAYS. Did it
    and squashed it here.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cf57e2f9184b49ea4e5e0d318d48247c2b523f3c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 1 15:53:51 2023 -0300

    Bug 26170: DBIC booleans
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f739e646ac451895d3e59e120d079e5add3b8d73
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 1 15:45:36 2023 -0300

    Bug 26170: API behavior change tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7cb3241f0604b36b2cd0c2364429177a84813169
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 1 15:35:33 2023 -0300

    Bug 26170: DBRev 23.06.00.057
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4317eca9b3afb1abd77f4283b3f8d561320ca8ba
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 1 15:26:31 2023 -0300

    Bug 26170: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6fec4ea0df18669f0a14d9edafbf63d25099aa45
Author: Magnus Enger <magnus@libriotech.no>
Date:   Thu Jun 15 12:21:19 2023 +0000

    Bug 26170: Add protected status for patrons
    
    This set of patches makes it possible to protect patrons from being accidetally
    deleted or merged with other patrons, from the UI and from (well behaved) cron
    jobs. The following subroutines are affected:
    - Koha::Patron::delete
    - Koha::Patron::merge_with
    - Koha::Patron::safe_to_delete
    - C4::Members::GetBorrowersToExpunge
    
    Please note:
    - This does not intend to protect patrons from being edited, only from being
      deleted
    
    To test:
    
    * Tests
    - Run the affected tests:
      prove t/db_dependent/Members.t
      prove t/db_dependent/Koha/Patrons.t
    
    * Editing protected status and manual deletion
    - Add a new user, note the presence of the "Protected" field under "Library
      management", but leave it at the default "No", for now.
    - Note that "Protected" is displayed in the "Library use" section of the patron
      details.
    - Note that More > Delete is avaiable as an action when the patron is saved
    - Edit the user and set "Protected" to "Yes"
    - Note that More > Delete is now disabled, with a note that the patron is protected
    
    * Batch patron deletion
    - Go to Tools > Batch patron deletion and anonymization
    - Check the box for "Verify you want to delete patrons"
    - Choose the category of your protected patron for "whose patron category is"
      and click "Next" to run the actual deletion
    - Check that your protected patron was not deleted
    
    * Merging patrons
    - Make sure you have two patrons with similar names or the same category, so
      you can find them with one search. One should be protected, one not.
    - Search for the patrons, tick their boxes and click on "Merge selected patrons"
    - Select one of the patrons as the "patron to keep".
    . Click on "Merge patrons"
    - "No valid patrons to merge were found" should be shown
    - Repeat this with the other patron as the "patron to keep"
    (A future enhancement could be to not allow a protected patron to be selected for
    merging in the first place.)
    
    * misc/cronjobs/delete_patrons.pl
    - Make sure you have a protected patron, in a category with at least one more
      patron.
    - Run something like this (at least in ktd):
      $ perl misc/cronjobs/delete_patrons.pl --category_code <code> -v --confirm
      (Replace <code> with the actual categorycode.)
    - Make sure the borrowernumber of the protected patron is not mentioned in the
      output of the script.
    - Check the protected patron was not deleted
    - Check the non-protected patrons were deleted
    
    * REST API (with ktd)
    - Make sure you still have a protected patron, and note their borrowernumber
    - Enable RESTBasicAuth and restart all the things
    - Run these two commands from the command line on the host:
      $ curl -u koha:koha --request GET "http://localhost:8081/api/v1/patrons/54"
      $ curl -u koha:koha --request DELETE "http://localhost:8081/api/v1/patrons/54"
      (Replace 54 with the actual borrowernumber of your protected patron.)
    - The first curl command should give you the patron details. The second should
      give this output:
      {"error":"Protected patrons cannot be deleted","error_code":"is_protected"}
    
    There could be more functions/scripts where patrons are deleted that I have not
    thought about. Please report them on the bug if you find any!
    
    Update 2023-10-19: Fix "More > Delete" on patron, so link can not be clicked.
    Update 2023-10-19: Rebase
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 965797092e6ed71cb0b03e23045dac87a0216182
Author: Magnus Enger <magnus@libriotech.no>
Date:   Thu Jun 15 12:13:45 2023 +0000

    Bug 26170: Database update
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8194419144d05dc64617d8569810be2ff7bbda04
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Mar 28 17:02:19 2023 +0200

    Bug 33353: Add compatibility with Search::Elasticsearch 8.0
    
    For some reasons, with Search::Elasticsearch 8.0 JSON::true is
    interpreted as 1 and Elasticsearch will always respond that it found "at
    least 1 record". Something like this:
    
    {
        total => {
            value => 1,
            relation => 'gte'
        }
    }
    
    Replacing JSON::true by \1 works with every version of
    Search::Elasticsearch I tested (6.80, 7.717, 8.0)
    
    Also worth noting:
    Search::Elasticsearch will stop being supported by Elastic
    https://github.com/elastic/elasticsearch-perl/issues/220
    
    We might need to find an alternative for future versions of
    Elasticsearch
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 24aab6b9c52cb9846653d34d5630caf837e0508a
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Mar 28 16:41:08 2023 +0200

    Bug 33353: Add compatibility with Elasticsearch 8.x
    
    Elasticsearch 8 removed the support of types. This patch adapts the
    requests accordingly.
    With this patch, Koha will still be compatible with Elasticsearch 7.x
    but will no longer work with Elasticsearch 6.x
    Since Elasticsearch 6.x is no longer maintained, this should not be a
    problem.
    
    https://www.elastic.co/guide/en/elasticsearch/reference/7.17/removal-of-types.html
    
    Tested with Search::Elasticsearch 6.80 and 7.717
    
    Test plan:
    1. Install Elasticsearch 8
       (use docker image: docker.io/koha/elasticsearch-icu:8.x)
    2. Change the elasticsearch server location in $KOHA_CONF
    3. Run misc/search_tools/rebuild_elasticsearch.pl -r -b -v
       It should fail
    4. Apply the patch
    5. Run misc/search_tools/rebuild_elasticsearch.pl -r -b -v
       It should end with "Total XXX records indexed"
    6. Try to search some biblios and verify that it works the same as
       before
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3f1e21bbca753168e194f0d4f23f9c84ebadeeaf
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 1 15:26:00 2023 -0300

    Bug 35180: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c7571c6a3295835c5016d02360af6ba7c4aecdeb
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 1 15:24:43 2023 -0300

    Bug 34520: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3ff7771d9420452814455f9026c822ee2bb8f505
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 1 15:00:13 2023 -0300

    Bug 34587: Fix stray type definition
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3d2013a0296f34dad6536151bd4b0dd45ac5bb3b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Nov 1 09:26:03 2023 -0300

    Bug 34587: Fix license issues
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c058dd5efc9d9e2f49f8093b14fd2eb1d6d6e2d8
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 31 16:37:35 2023 -0300

    Bug 34587: DBRev 23.06.00.056
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 23dc20f88a86db85316dec139859914ba1e88bc9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 31 16:11:49 2023 -0300

    Bug 34587: Atomicupdate tweaks
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 55eea9b3c55d4fb71f525f4c1c2481733fbb03a1
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Oct 27 16:24:16 2023 +0000

    Bug 34587: Updated cypress tests
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    (cherry picked from commit 05cf3d9f6a7ddf163d2e144436a6ff8e5854d7e4)
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 17cf580f19c772c5b3facba40e3f8db5dd0c5423
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Oct 27 15:36:06 2023 +0000

    Bug 34587: (QA follow-up) Tidy
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a35403cb84d0231eaedc553738f3755a5f25afca
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Oct 27 11:54:42 2023 +0000

    Bug 34587: Add IR_A1 fields to COUNTER report
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 38f8e116fab0d4425ee0dc196e5c0aca4d523184
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Oct 26 09:09:10 2023 +0000

    Bug 34587: Fix ->validation->output in API endpoints
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c81112e798c01b5df38cd3c88442ddda3984b793
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Oct 25 13:58:22 2023 +0000

    Bug 34587: (QA follow-up): squash
    
    Tidy
    $c->validation in API controllers
    File permissions
    .inc file filters
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f7e2bc5d9bf51350bf325df827988935c0f352e1
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Oct 24 15:06:59 2023 +0000

    Bug 34587: Move YOP to mus/yus instead of erm_usage_titles
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7e8f41cce9353a1aeda333906db0355b7066ab66
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Mon Oct 23 13:58:05 2023 +0000

    Bug 34587: Add tests for the custom report API endpoints
    
    prove t/db_dependent/api/v1/erm_custom_reports.t
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c0b449ea2a060f38fb3a72eabcd1dba1b5e3d481
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Oct 20 15:45:26 2023 +0000

    Bug 34587: Add access_type and yop to the reports viewer
    
    Some report types include access_type and yop headers for each usage statistics
    
    The hierarchy is as follows: yop - access_type - metric_type
    I.e. for each yop there are report lines for access_type and then for each access_type there are also report lines for metric types
    
    This patch adds helper functions to populate the report rows based on this hierarchy and the report data retrieved from the database
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0a8e3e2bdc130635b65087f88cbc6c41b249bcfd
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Aug 29 15:11:54 2023 +0000

    Bug 34587: SushiCounter tests
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ee4db6d7631e8ed3ed211586daa3d471070b011d
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Oct 23 11:02:36 2023 +0000

    Bug 34587: Improve title uniqueness rules
    
    Improve robustness of unique matching here, to make sure we always match for same title if the case,
    
    Some report rows may correspond to the same title as the previous row but have an empty match field, or alternatively come with a filled match field (e.g. DOI or Print_ISSN in TR_J4. Because of this we only verify a uniqueness match field if both current row and previous have it non-empty, otherwise we keep checking the remaining uniqueness match fields.
    
    Example of this use-case, COUNTER report:
    title    | publisher | platform  | Proprietary_ID | Print_ISSN | DOI     | YOP  | usages
    examplet | examplep  | examplepl | 1              | 123        |        | 2020 | usages
    examplet | examplep  | examplepl | 1              | 123        |someDOI | 2021 | usages
    
    The above 2 rows is the same title, same publisher, same proprietary_id,
    same Print_ISSN, etc. It just so happens that one was returned by SUSHI
    with DOI and the other wasnt.
    These 2 rows correspond to different usage statistics by YOP, not 2
    different usage_titles
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 184602ce3823b169873daaa675fdebab4f9ae286
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Oct 24 10:42:13 2023 +0000

    Bug 34587: Add proprietary_id and platform to erm_usage_titles
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5a08ad2863f79fe2df45df79af1fc2c383b15491
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Oct 23 12:37:32 2023 +0000

    Bug 34587: Update database columns length
    
    Some COUNTER files have long data in these fields and were causing new
    database entries to fail
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d55ea648ac6fbc87cf9d4afa7217d01915de3b55
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Oct 23 12:36:15 2023 +0000

    Bug 34587: Improve SUSHI COUNTER error handling
    
    This is doing a few things, checking for sushi errors:
    1) Abort background job and provide error message if SUSHI returned
       {Severity} in response, this means SUSHI error, docs here:
    https://app.swaggerhub.com/apis/COUNTER/counter-sushi_5_0_api/5.0.2#/SUSHI_error_model
    
    2) Abort background job and provide error message if SUSHI provided
       proper response, but contains Exceptions in Report_Header
    
    3) Abort background job and provide error message if SUSHI returned 0
       report items (e.g. everything is fine but there are no items for the
       harvest period provided
    
    4) Abort background job and provide error message if COUNTER file
       created is larger than allowed by the database.
    
    5) Provide error message if manual upload file size exceeds the max
       allowed by the database
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e629e37bd7105977ccb229796d0a1a57ca503e23
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Oct 23 10:59:57 2023 +0000

    Bug 34587: Fix total added objects in job report
    
    Remove obsolete total_records code, this was a leftover from when this code was in UsageDataProvider.pm
    Add a new job_callback 'added_usage_objects' to handle total objects added (titles, platforms, databases, items)
    Update job report include file
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0bba66129c3e5cd7e7ff6de481021e483f81bcc3
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Oct 23 09:59:24 2023 +0000

    Bug 34587: Fix 'Import logs' sorting by import date
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7ac6b1b72cd8d6de8e03441adb4168918be1c799
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Sep 20 16:51:01 2023 +0000

    Bug 34587: Add report type and provider name to failed background job report
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cd2a642c31106910b0137d19c77b0a9b40b45039
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Sep 20 14:57:14 2023 +0000

    Bug 34587: Fix dry run and end date in the cronjob
    
    The cronjob always logs a dry run even on a live harvest and the end date parameter was not working correctly. This patch addresses both issues
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d4afc38c7c64851fe8f5982dce46c056ca355c45
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Sep 20 13:13:12 2023 +0000

    Bug 34587: Add try catch blocks to object creation
    
    Currently a harvest fails completely if a single title fails to harvest. Rather than failing the entire job, this patch introduces try catch blocks to stop this and allow the job to continue. Failed imports are recorded and displayed in the background job UI on job completion
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 979ff589d9c617ceade865797e6cbc5005c6f0f5
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue Sep 19 12:07:55 2023 +0000

    Bug 34587: Remove counter files from API embedding to improve performance
    
    Rather than fetching the counter files and embedding the counter logs, we now add a foreign key to the data provider in the counter logs table and fetch them directly.
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 040f6ef1935caf94d3fc1b372a6faf022d683018
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Mon Sep 18 16:00:28 2023 +0000

    Bug 34587: Update field lengths to 255 characters
    
    (cherry picked from commit 9f384df2ad5f4c037b052e8914d7e4b3e5f26670)
    (cherry picked from commit 02c9a57af9f27cf528a2eb924876037890cf5504)
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8c0df6662de9c2b48ab85db62470552637fde562
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue Sep 12 14:53:33 2023 +0000

    Bug 34587: Add Create from registry button
    
    Currently there is no option to go back to using the registry API to create a provider once "Create manually" has been clicked
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ebc98070d6b483b636a6060643020f9731d9e1d3
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Sep 8 14:33:50 2023 +0000

    Bug 34587: Fix url validation
    
    We need to check whether the url ends in a trailing "/" and also whether it ends in "/reports" for a SUSHI harvest. Two new functions are added to manage this and prevent failed harvests.
    
    report_type is also now lowercase in the url and the dates are truncated to YYYY-MM format
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3ab40366363cd77446d208163ec9951bf687c22a
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Aug 29 12:52:00 2023 +0000

    Bug 34587: New sushi counter class
    
    Moves a lot of the logic for creating a counter file and parsing a SUSHI response to a new class to simplify logic
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ca8ea02fda4ab765b52a2e17254210fe46310e88
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Aug 29 11:39:40 2023 +0000

    Bug 34587: Move everything into a ERM/EUsage subfolder
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f32636bbbd1aba752b32d3fda707fd1af5c3a399
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Aug 24 14:40:47 2023 +0000

    Bug 34587: Add borrowernumber to counter logs display
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b7aebb337ed010828f4ae1667218ffccd6a44e47
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Aug 24 14:09:57 2023 +0000

    Bug 34587: Add integration with the counter registry API
    
    The counter registry offers an API that provides SUSHI information for each provider. This will be incredibly useful for creating new providers as we can use the correct information from the registry for harvesting urls etc. This reduces the risk of user input errors when creating providers and gives greater reliability to the data required to successfully harvest from the SUSHI API
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 89b6d51f07976c4dbf5e8245f3af241b4ee0cefa
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Aug 23 11:05:25 2023 +0000

    Bug 34587: Improve error handling for connection testing
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dd37e0075a211dcd06ddf656c51e654427c79e7e
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue Aug 22 13:23:25 2023 +0000

    Bug 34587: Remove q_header parameter from API specs
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cf87082682343503a6fdff66fcf2cae35fb232d2
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Aug 21 14:50:45 2023 +0000

    Bug 34587: File upload - Background job
    
    ErmSushiHarvester background job will now be initiated by either
    enqueue_counter_file_processing_job or by enqueue_sushi_harvest_jobs
    from Koha/ERM/UsageDataProvider.pm, the former if triggered by a manual
    file upload, the latter if by the 'run now' button or by the cron script.
    
    This commit also includes some rewording/refactoring, namely:
    - COUNTER file validation now happens in the API, before enqueuing the job.
    - Removal of no longer used POST /erm/counter_files endpoint
    - Koha/ERM/UsageDataProvider.pm:
    -- run method is now enqueue_sushi_harvest_jobs
    -- new enqueue_counter_file_processing_job method
    -- harvest method is now harvest_sushi
    -- new set_background_job_callbacks method to set the background job callbacks
    - REST/V1/ERM/UsageDataProviders
    -- run method is now process_SUSHI_response
    -- new process_COUNTER_file endpoint
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e5ec3df36e915debe642cda099cb334754fa14df
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Aug 17 12:21:54 2023 +0000

    Bug 34587: Code tidying
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9fc2151eadd48055c49bea32248896dbfc1781c4
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Aug 9 11:05:50 2023 +0000

    Bug 34587: Remove begin_date and end_date as usage_data_providers properties/columns
    
    (cherry picked from commit 9339eed9358301f7bf17934e2e13fc17205d9cd0)
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 16592d267ab3d7def36a99d1c9e19bfca2997764
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Aug 8 11:15:12 2023 +0000

    Bug 34587: Accept date inputs upon confirming 'run now' button
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3318adf48d61c28f32426f03e4559e4c58211bb9
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Aug 7 14:14:40 2023 +0000

    Bug 34587: Add a report row for each existing metric_type in a sushi result's performance instance, instead of for reach existing metric_type in the sushi response header, because that might not exist.
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ffa16245d307b44d1a0c078266be141fa10c4413
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue Aug 8 16:06:48 2023 +0000

    Bug 34587: Make start and end dates in providers summary data dependent
    
    Currently the start and end dates in the summary tab are based on the earliest and latest harvest run, rather than the earliest and latest data harvested. This should be changed so that we can see the period of data harvested for each provider
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 79fab2b105b9d5d6d396d0eb6cabb82b44a6844e
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Mon Aug 7 12:01:51 2023 +0000

    Bug 34587: Fix keyword search in yearly filtered reports
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e935423b787ed2b057219e3c94bb6e444305de5b
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Aug 4 16:32:16 2023 +0000

    Bug 34587: Move period total calculations to the backend to improve performance
    
    Remove the front end processing in favour of doing this in the backend and passing it in the API response
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1ad9959fa588cc15de5dbdba9d0a5533c53a6a0d
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Aug 3 16:45:41 2023 +0000

    Bug 34587: Make column options dependent on data_type
    
    In the reports builder you can select which columns you would like to display in a report. Not all columns are applicable to all data types so it needs limiting to only be selectable if that column is available for that data type
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6225966b8d4eb06f2a4316b7475da2a4fd5a0616
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Aug 3 15:08:48 2023 +0000

    Bug 34587: Create tabs for new data types in ProvidersShow
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7fd1372e3025bd9886817e1275aac76490820cd9
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Aug 3 13:24:51 2023 +0000

    Bug 34587: Convert titles search to keyword search
    
    Now that we are harvesting more data types, "titles" search no longer applies and should become a keyword search able to work for any data type
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b74815dc6478a64770efb995caab73ab731f229e
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Aug 3 13:24:08 2023 +0000

    Bug 34587: Add list endpoints for usage_databases/items/platforms
    
    Needed to display lists in the provider tabs in the UI
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8987ff1591f05b1f34b8fc9318fad99d59c7a963
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Aug 2 09:20:23 2023 +0000

    Bug 34587: Abstract reports backend to allow new data types
    
    Now that harvesting is possible for platforms, databases and items we need to be able to generate reports for all of these data types. Currently the reporting backend structure is very geared towards titles. Rather than copying this for each different data type, this patch abstracts the code to accept the data type as a url parameter and use that to generate a report based on a given data type
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f57d5088c7366e1633d181ded7656450df1a319e
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue Aug 1 09:14:36 2023 +0000

    Bug 34587: Add ability to delete saved reports
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cbe5e86fe8422c4c0d134de6df730bea06086382
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Jul 26 13:26:03 2023 +0000

    Bug 34587: Cypress update
    
    Update the cypress tests to reflect recent changes
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 13356ae74ee50ecb55694678bf2fa78b6679e65e
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Jul 20 14:44:01 2023 +0000

    Bug 34587: COUNTER file upload
    
    Adds the ability to manually upload a counter file and harvest data to the provider
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b02c7bd00b0cd2583ce44d0bfc170aa146fa3824
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Jul 20 10:19:30 2023 +0000

    Bug 34587: Copy authorised value categories and authorised values to new installs
    
    (cherry picked from commit 338ae09e692420fe783da1699386b14891af62ab)
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a6fe33a4c4fe7721624cfdf0c50d821652a9fee2
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue Jun 20 16:28:01 2023 +0000

    Bug 34587: Move column options into reports store to tidy up url params
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e46321b31e18dad2b4a44a3e9bc199778125a998
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue Jun 20 10:15:38 2023 +0000

    Bug 34587: Add cypress tests for Data providers
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e1583a334a1b693cbf41f1552c65a667376632bc
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Jun 16 16:27:53 2023 +0000

    Bug 34587: Add reports by data provider
    
    Add the option to have a report by provider that rolls all usage up into one top-level figure to see how often that provider is being used a given period
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ffbcf83b9505b5dd43698024abf25d89d62c213f
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Jun 15 11:43:53 2023 +0000

    Bug 34587: Add default report capability to reports viewer
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 73d3b48048dcbcd1f9da2e5f4f9ab3738c7d6976
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Jun 9 15:38:44 2023 +0000

    Bug 34587: Refactor reports viewer to use URL params instead of pinia store
    
    This patch removes the pinia store and uses URL params to pass data between components. Using the pinia store means that the data is lost on page refresh and the report then throws an error.
    
    This patch also merges the first column in the table into one line per object, rather than repeating the same title for each line of data.
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dcf7f58e0e2997a34e63a1379247206a114f83b9
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Jun 2 08:42:52 2023 +0000

    Bug 34587: Limit data provider options when report type is selected in reports builder
    
    When a provider is selected in the reports builder it should only be possible to select report types that that provider currently harvests to avoid redundant reports
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eeb81d97946848b99611ff2207b441e3b6c3f42d
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Jun 2 08:39:19 2023 +0000

    Bug 34587: Add publisher and publisher_id to usage_titles schema and KohaTables
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 979e9df5e2d85b9ba556d12726becb17cbc4e396
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Jun 1 14:26:17 2023 +0000

    Bug 34587: Fix titles search in reports viewer
    
    Titles search does not currently work when data from multiple providers is present. This patch allows for titles to be individually fetched per provider
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8cc8b2501e154e8761448271ad114d3d247a721b
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue May 30 14:45:12 2023 +0000

    Bug 34587: Add reports by metric types
    
    Adds the ability to generate a report with the individual metric types as columns
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c1455422e4c13317166339699fe8b7d3a259e77d
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue May 30 14:44:48 2023 +0000

    Bug 34587: Add test connection button
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2951edc697ea68fcd8c65d608db7a3a743e17563
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Mar 1 17:38:20 2023 +0000

    Bug 34587: SUSHI COUNTER Harvester
    
    This commit is a squash of the following:
    
    SUSHI harvesting process in the data providers class:
    * Builds the URL query and requests the SUSHI service endpoint
    * Parses the JSON response and builds the csv COUNTER file and adds it to counter_files table
    
    Usage statistics data processing:
    * When a counter_files entry is stored, CounterFile.pm will:
    * Parse the csv COUNTER file and
    * Add a usage_titles entry for each unique title in the COUNTER file
    * Add the title's respective erm_usage_mus (monthly usage) entries, repeating for each metric_type
    * Add the title's respective erm_usage_yus (yearly usage) entries, repeating for each metric_type
    
    Harvesting cronjob;
    
    'Run now':
    * API endpoint to start the harvesting process of a data provider
    * Button in the data providers list to run the harvesting process for each data provider upon clicked
    
    ERM SUSHI: Background job
    
    Job progress is updated to total amount of usage titles after retrieving
    the response from SUSHI;
    Job warning and success messages are added accordingly
    Redundant duplicate titles will not be added
    Redundant duplicate monthly and yearly usage statistics will not be added
    Data provider harvest background job harvests once per report_type
    
    Enqueue one background job for each report_type in the usage data provider
    
    Update the way we measure progress in the background job.
    It now uses the COUNTER report body rows instead of SUSHI response results.
    We're now incrementing and showing the number of skipped mus, skipped
    yus, added mus and added yus
    There's a bug in the way we calculate yus
    Updates to background job progress bar - Depends on 34468
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1e50ed86b458cbb170f4f1d184809148f42b25d5
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Apr 27 10:53:36 2023 +0000

    Bug 34587: Add reports components
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d5e2d1502bc2f617c8cf2e2c72c674e5900248c2
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Apr 27 10:53:18 2023 +0000

    Bug 34587: Add reports store
    
    Adds a reports store to facilitate data transfer between the reports builder and reports viewer and remove the need for duplicated code in the two components
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 033b683813ec061f6fbb6038f7245f0fa0ffeedd
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Apr 27 10:52:52 2023 +0000

    Bug 34587: Add data providers components and sub-components
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 383f42b6efd4b9f7363671624b56f2fa9d508082
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Apr 27 10:52:14 2023 +0000

    Bug 34587: Vue router, api client and authorised values
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7a33ba395ea2dab75ff261984f194b8dc9170f78
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Apr 27 10:51:05 2023 +0000

    Bug 34587: Usage statistics table column data
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8417de6c032b4adc8f0996b507110d41a9a0f9af
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Apr 27 10:50:48 2023 +0000

    Bug 34587: API unit tests
    
    prove t/db_dependent/api/v1/erm_counter_files.t
    prove t/db_dependent/api/v1/erm_usage_data_providers.t
    prove t/db_dependent/api/v1/erm_usage_titles.t
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6c4fedc3de1aa507b6b21a04282b960fee96d7c2
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Apr 27 10:50:28 2023 +0000

    Bug 34587: API controllers and objects
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5125195a52e7730c07d207db71507c4570f51a08
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Apr 27 10:49:46 2023 +0000

    Bug 34587: API swagger paths and definitions
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8f372e1e43d7d18abe6558dfaceb3e1780763bea
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Apr 27 10:49:20 2023 +0000

    Bug 34587: DBIC files
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 80b9878de3b9e4fc87897da17d4bdb6069564c24
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Apr 27 10:48:45 2023 +0000

    Bug 34587: SQL structure and atomic update file
    
    Sponsored-by: PTFS Europe Ltd
    Sponsored-by: Bywater Solutions
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 28f309cbf990828b28d6324159051267a2cd8dd7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 31 15:03:23 2023 +0100

    Bug 35201: (bug 30708 follow-up) Fix Preservation/Settings.ts
    
    We were not correctly mocking the config route from the tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f151895e08c2b81c9129ef6994c07c42f17d1e66
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 31 15:27:25 2023 +0100

    Bug 35201: (bug 30708 follow-up) Fix Preservation tests
    
    We didn't mock the config given the last changes
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit df3acf3d68cd24d3b1015432206236b563aaa5d1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 31 14:45:08 2023 +0100

    Bug 35199: (bug 34448 follow-up) Fix error handling in http-client.js
    
    From bug bug 34448.
    
    386         // Submit the form, get 500
    387         cy.intercept("POST", "/api/v1/erm/agreements", {
    388             statusCode: 500,
    389             error: "Something went wrong",
    390         });
    391         cy.get("#agreements_add").contains("Submit").click();
    392         cy.get("main div[class='dialog alert']").contains(
    393             "Something went wrong: SyntaxError: Unexpected end of JSON input"
    394         );
    
    This is wrong: we are now showing a JS error (SyntaxError) instead of the expected 500: internal server error!
    
    The problem was that a regular 500 does not have anything in the body,
    and _fetchJSON didn't handle that ( JSON.parse(text) ).
    If the body of the response does not contain anything we need to get the
    text from statusText (which contains "Internal Server Error" in case of
    500).
    
    Test plan:
    1. Make sure all cypress tests pass
    2. Confirm the above:
    Raise an exception from a given route (/agreements for instance) and
    confirm that the error displayed on the interface is correct (ie. not
    SyntaxError, but "Error: Internal Server Error")
    
    For QA:
    * This change is covered properly in Dialog_spec.ts, no need to redo it in
    every other test files.
    * Without the following change in count, we see:
    "Something went wrong: Error: Error: Internal Server Error" because
    setError is called twice. We don't need to set the error from count, it
    has been set from _fetchJSON already.
    -            error => {
    -                setError(error.toString());
    -            }
    +            error => {}
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0a8303c9fac42e16d4ff5c13dd700789d4a438c3
Author: Victor Grousset <victor@tuxayo.net>
Date:   Mon Oct 30 18:58:09 2023 +0100

    Bug 35033: (QA follow-up): tidy up code
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 07ac0b1f72245de6e8ecf2a1a9d2e485ca233f79
Author: Philippe Blouin <blou@inlibro.com>
Date:   Wed Oct 11 11:57:28 2023 -0400

    Bug 35033: Add a validation for biblioitems in about/system information
    
    In the About section, under the System information tab, we get validation between
    issues, borrowers, biblio, items, reserves tables, and their deleted/old counterpart.
    
    But there's no validation for biblioitems.
    
    This patch will simply add the same test (and display) as the others, but for biblioitems.
    
    Testing
    0) Create a simple biblio entry through cataloguing. Note the biblioitemnumber created.
    1) Insert a dummy entry in deletedbiblioitem using the biblioitemnumber.  An simple SQL will do
    insert into deletedbiblioitems select * from biblioitems where biblioitemnumber = GIVENbin;
    2) Go to about, see there's no warning in systeminformation.
    3) apply the patch, validate that an error appears.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e42d5c6e6f5a8d5c958a3dad5583490a550ce862
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Oct 29 14:36:38 2023 +0000

    Bug 34424: Add Emily Lamancusa to QA Team
    
    Long overdue.
    
    To test:
    * Apply patch
    * Verify that Emily shows as part on the QA Team
      on the About page
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f5d0667f5a1eb6898c14a5cefddfe9c21609762d
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Oct 29 09:31:06 2023 +0000

    Bug 35180: Fix 246 to 264 in COMMENT of deletedbiblioitems.publishercode
    
    This fixes a typo in the comment.
    
    To test:
    * Please check diff of the patch closely.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5a14db8ac9f490fbcf732725946a1369340d48a5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 31 11:02:20 2023 -0300

    Bug 34520: DBRev 23.06.00.055
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6dd4626711866fbf92b49f88770a6b3bfb75ddca
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Oct 29 14:14:37 2023 +0000

    Bug 34520: Fix FK for item_groups in reserves for new installations
    
    There was a discrepancy between the database update for reserves
    and the kohastructure.sql definition. This makes sure that the
    FK is always "ON DELETE SET NULL".
    
    To test:
    * Before applying this path
    * sudo koha-mysql kohadev
    * show create table reserves;
    
    CONSTRAINT `reserves_ibfk_ig` FOREIGN KEY (`item_group_id`) REFERENCES `item_groups` (`item_group_id`) ON DELETE CASCADE ON UPDATE CASCADE
    
    * Apply patch
    * Run database update
    * Check database again:
    
    CONSTRAINT `reserves_ibfk_ig` FOREIGN KEY (`item_group_id`) REFERENCES `item_groups` (`item_group_id`) ON DELETE SET NULL ON UPDATE CASCADE
    
    * reset_all (create a new database)
    * Check database again:
    
    CONSTRAINT `reserves_ibfk_ig` FOREIGN KEY (`item_group_id`) REFERENCES `item_groups` (`item_group_id`) ON DELETE SET NULL ON UPDATE CASCADE
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e772b96cacb509a54a52427262da03efd4e38015
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Oct 29 15:42:36 2023 +0000

    Bug 35186: Remove unnecessary html tags from PASSWORD notices
    
    In HTML notices we don't need to explicitly use <html></html>.
    
    This removes them from the 2 notices using them:
    * PASSWORD_RESET
    * STAFF_PASSWORD_RESET
    
    To test:
    * Apply patch
    * Make sure your Koha can send email (set up SMTP server, KohaAdminLibraryAddress)
    * Make sure your patron has an email set
    * In patron account, use "More > Send password reset"
    * Log out
    * In the OPAC, request password reset ("forgot your password?")
    * Verify both notices appear nicely formatted (line breaks, bold, etc.)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0680910177907847a7dfd4939c1894b768e30b26
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Thu Oct 26 10:21:09 2023 -0400

    Bug 34924: (QA follow-up) correctly handle digest data compilation for successful renewal
    
    automatic_renewals.pl does some data compilation for digest notices that
    depends on the error value returned from attempt_auto_renew. However, on
    successful renewal $error is undefined. Add additional checks on value
    of $success and definedness of $error to compile data accurately and
    avoid warns for undefined variable
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5fea2e431af8d1b87cf8904a6b05191d0f78fe36
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Oct 23 17:52:11 2023 +0000

    Bug 34924: Adjust auto renewal email to reflect success for final renewals
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cc0a8bf423c13f1920d7fda63d39e12891c02761
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Sep 26 17:29:28 2023 +0000

    Bug 34924: Handle final renewal errors
    
    This patch updates Koha::Checkout->attempt_auto_renew to renew when the 'final' errors are passed, and to pass the error value back to the cronjob for processing
    
    The sample notice for AUTO_RENEW and AUTO_RENEW_DGST are both updated to handle the new error
    
    On the next cron the error will be updated to too_many or too_unseen, but a notice will not be sent.
    
    To test:
     0 - Run reset_all to install the updated sample notices or copy the text
     1 - Set system preference UnseenRenewals to 'Allow'
     2 - Setup a circ rule to allow 2 renewals, 2 unseen renewals
     3 - Checkout an item to a patron who has an email defined and auto renewals selected in messaging preferences
     4 - Update the issue to be due/overdue:
        UPDATE issues SET date_due=DATE_SUB(NOW(), INTERVAL 1 DAYS);
     5 - perl misc/cronjobs/automatic_renewals.pl -v -c
     6 - Confirm patron notified and issue renewed
     7 - Set issue due/overdue again
     8 - perl misc/cronjobs/automatic_renewals.pl -v -c
     9 - Confirm patron notified of final unseen renewal
    10 - perl misc/cronjobs/automatic_renewals.pl -v -c
    11 - Confirm issue not renewed, patron not notified
    12 - Update circ rules t all 4 renewals total
    13 - Force renewal on staff side to clear unseen
    14 - perl misc/cronjobs/automatic_renewals.pl -v -c
    15 - Confirm patron notified of final renewal (allowed 4, 2 unseen from cron, 1 manual, this unseen from cron)
    16 - perl misc/cronjobs/automatic_renewals.pl -v -c
    17 - Confirm patron not notified, issue not renewed
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7ecb05f4ec8641daf16eeb77bc3e32a817f6df80
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Sep 26 15:03:45 2023 +0000

    Bug 34924: Add 'auto_renew_final' and 'auto_unseen_final' return to CanBookBeRenewed
    
    There is a desire for auto_renewals to treat the final renewal differently. We would like to notify the patron of the final renewal - but not again when the next renewal fails. This patch adds the new return value and tests.
    
    To test:
    prove -v t/db_dependent/Circulation.t
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 95f6015d433892c83edef6d821fcc7c4dfeef9bb
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Sep 26 13:53:44 2023 +0000

    Bug 34924: Add Koha::Checkout->attempt_auto_renew
    
    This patch moves the actual renewal out of the auto_renewals cronjob script and into the object and adds tests. The logic for notices is still handled in the script.
    
    To test:
    1 - prove -v t/db_dependent/Koha/Checkouts.t
    2 - Add a circ rule with auto_renew checked
    3 - Checkout an item to a patron and set due date in the past
    4 - Checkout an item to a patron and set due date in the future
    5 - perl misc/cronjobs/automatic_renewals.pl -v
    6 - Confirm one would be renewed and the other is too_soon
    7 - perl misc/cronjobs/automatic_renewals.pl -v --confirm
    8 - Confirm the expected issue is successfully renewed
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0f3e68f75f3223fb14dd9cb93a6927dde500e543
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Oct 24 10:49:44 2023 +0100

    Bug 25672: Fix double output_html_with_http_headers
    
    We weren't exiting after calling output_html_with_http_headers and so we
    were ending up with a double template render (and also a subsequent
    confusion in the cookie consent code).
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9d236a20f2c3717358128e58a857fe919664344e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Oct 9 12:26:02 2023 +0100

    Bug 25672: Restore redirect on restricted upload
    
    This patch restores the immediate redirect from plugins-upload should
    uploads be restricted and an uploadlocation not be specified.
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit da2083288ef145e022b4fa28acb71aa718f6e6b7
Author: Victor Grousset <victor@tuxayo.net>
Date:   Mon Oct 9 03:54:00 2023 +0200

    Bug 25672: (QA follow-up): tidy up code
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ea220826499ff23d9a56de31992b7c6123d939e4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jul 25 15:46:34 2023 +0100

    Bug 25672: Convert to restricting to listed repositories only
    
    I think instead of a plain on/off switch we should use it in combination
    with the plugin_repo's and set it to restrict to only those repos' (i.e.
    disable uploads entirely if no repo's are listed, or just allow those
    repo's when there are).
    
    This patch achieves that, but only if plugins are installed via the
    plugin browser method. We disable all direct upload avenues, so install
    is blocked for other cases.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aa8c26ae520667b17286dbac0f63a2583fb1b9e3
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon Jul 24 06:17:13 2023 +0000

    Bug 25672: Prevent uninstall when plugin browser upload disabled
    
    When plugin browser upload is disabled, also prevent plugin browser
    uninstall.
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 678b84c7402bf82138df68dfcde31b255df686aa
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jul 22 09:10:29 2020 +0100

    Bug 25672: (QA follow-up) Hide install after search button
    
    If plugin upload is disabled, but there are git repositories listed in
    the config for plugin searching, then you can search for a plugin and
    attempt to install it. The install leads to an error page.
    
    This patch removes the actions column and install button should the
    enable_browser_upload option be disabled
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bfd633c4610d137d86caa7ef2f3787ef65b6fa96
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Jul 8 23:07:47 2020 +0000

    Bug 25672: Enable enable_plugin_browser_upload by default
    
    This patch enables enable_plugin_browser_upload by default,
    since the current behaviour for Koha is to enable browser upload
    when enable_plugins is 1.
    
    Signed-off-by: Nicolas Legrand <nicolas.legrand@bulac.fr>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e2e61ec6ca746d28a25900aba575806335cc8ade
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Jul 8 11:53:54 2020 +0000

    Bug 25672: Use enable_plugin_browser_upload flag to control plugin upload
    
    This patch adds a enable_plugin_browser_upload flag to koha-conf.xml, which
    controls whether or not Koha intranet users can upload Koha plugins via
    their browser. Like "enable_plugins", it defaults to 0 for new installs.
    
    This is useful when you want to provide Koha intranet users with plugins
    that are pre-installed by administrators (by CLI) or restricting them
    to plugins from a Github repo. See the following for more information:
    Bug 23975 - Add ability to search and install plugins from GitHub
    Bug 23191 - Administrators should be able to install plugins from the command line
    
    To test:
    1) Apply the full patchset
    2) Confirm <enable_plugins>1</enable_plugins> is present in koha-conf.xml
    3) Add <plugins_restricted>1</plugins_restricted> to koha-conf.xml
    4) Ensure that the <plugin_repos> block is not commented and contains at
       least one trusted organisation in koha-conf.xml
       If needed get it from: debian/templates/koha-conf-site.xml.in
    5) Run restart_all (in koha-testing-docker)
    6) Go to /cgi-bin/koha/plugins/plugins-home.pl and note that you don't see
       an option to upload plugins
    7) You should however see a search option and upon search you should have
       results returned from the chosen trusted organisations listed in the
       <plugin_repos> block mentioned above.
    8) Clicking install on one of the results should work as expected and install
       the plugin.
    9) Go directly to /cgi-bin/koha/plugins/plugins-upload.pl and note that it says
       "Plugin upload is restricted to only those plugins listed by your server
       administrator" and gives instructions on how to enable unrestricted browser
       upload.
    
    Signed-off-by: Nicolas Legrand <nicolas.legrand@bulac.fr>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Rebased-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 24ee60cb62cfbe5dc80bbb698eb6fa1e99d1cd4e
Author: Thibaud Guillot <thibaud.guillot@biblibre.com>
Date:   Thu Jan 6 14:48:36 2022 +0100

    Bug 29811: Add timestamp option on authority record type
    
    According to the timestamp option for bibs record type I added the
    timestamp option for authority records.
    Timestamp is already present in database on field "modification_time"
    
    Test Plan :
    1 - Be sure to have authority record type for easiest test create one
    2 - Execute script export_records.pl in your koha/misc directory and
    choose a date (example yesterday if you just created an authority
    right now).(see export_records.pl -h for help)
    3 - Timestamp option has no effect on authority record type
    4 - Execute script again but choose the date of tomorrow for example
    5 - Same result
    6 - Apply this patch
    7 - Play again steps 2 and 4
    8 - On step 2 you will see only your authorities created today (because
    script show you authority has changes since the date you choose in
    option) and for step 4 you must see an empty file.
    
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit af8a332b9ca1f6dec710a3b28ca37c2cf3005a38
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 30 09:38:46 2023 -0300

    Bug 34227: (follow-up) Adjust selenium tests
    
    This patch adjusts the selenium tests to address the renamed ID for the
    elements.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5a188651e484517f28367e44183b680fa77ad77b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 7 09:44:21 2023 +0200

    Bug 33809: Centralize duplicated code
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f2538c8365667c479a227066d68cfb9da7b1413e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jun 1 12:46:22 2023 +0000

    Bug 33809: (follow-up) Grammar correction
    
    This is somewhat nitpicky but I think "Show fewer..." is more correct
    than "Show less..." for strings like "Show fewer authors."
    
    'Generally, fewer is used when the number of things is counted ("fewer
    problems") whereas less is used when the number is measured ("less
    trouble" or "less time").'
    -- https://www.merriam-webster.com/words-at-play/fewer-vs-less
    
    It's not a strict rule but to my ear it sounds more correct. The brief
    "Show less" displayed on screen seems fine because the object feels
    indeterminate: "Show less information."
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b56d54bf7e1c4b6edb70c89b142d06593508f894
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue May 23 14:15:30 2023 +0000

    Bug 33809: Place hold and Add to cart links need better descriptions
    
    The place hold and add to cart buttons should identify to screen readers which title the button is linked to. This patch adds aria-labels that include the item title to make this more clear
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 36c41afe9b0e0972b630277c5b34d33e5adbfb80
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue May 23 14:13:03 2023 +0000

    Bug 33809: Facet "Show more/less" links don't identify what they are showing
    
    This patch addresses the Show more/less links in the side menu in opac-facets.inc. The links don't identify which facet they are linked to and this is confusing for screen readers.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a65c909ebcd943d92c61dbb761c7267c70a3472b
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Oct 14 23:10:30 2023 +0000

    Bug 27943: (QA follow-up) Alternate display in result lists
    
    The original display put the equivalent heading right after
    the main heading with a = as separator. As the 7xx are repeatable
    that could get croweded easily, also if the terms are longer
    we might see not so nice breakage.
    
    This puts every 7xx on its own line below the main heading
    with some indentation.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a04f9447f7e3e92fc1faebd9998b1fdf223eb4fb
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Oct 14 21:48:42 2023 +0000

    Bug 27943: (QA follow-up) Perltidy
    
    I have some trouble to get the tidyness test on
    AuthoritiesMarc.pm passing. There are several outstanding
    patches touching this file, so I didn't dare to perltidy
    the whole file just yet.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b724bb579ce63160cbb92574f1114398b28f1554
Author: George Veranis <gveranis@dataly.gr>
Date:   Mon Feb 20 12:02:27 2023 +0100

    Bug 27943: (follow-up) Fix unit test, and use systempreference AuthoritySeparator
    
    Instead of hardcoding the separator we take the value from systempreference.
    Also adjust the unit test to expect the "equalterm" array.
    Test plan same as before.
    
    Signed-off-by: Christian Nelson <christian.nelson@uwasa.fi>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 956ff1ab56f3bf79cfcd88310946b34e109d2fc1
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Apr 24 11:51:01 2022 +0000

    Bug 27943: (QA follow-up) Add missing TT filters
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a8b075a4d3629af28db60d538cef103e9f02c9ba
Author: George Veranis <gveranis@dataly.gr>
Date:   Fri Jul 2 16:41:24 2021 +0200

    Bug 27943: Add support for 7XX equal terms on authorities marc21 display
    
    Currently when a MARC21 authority has 7XX field they do not display on
    authority search result page. 7XX is equal term of 1XX based on LC rules.
    Applying this patch will enable that feature, which is important for non latin
    catalogues.
    
    Test plan:
    1) Add a new authority with 1XX and 7XX fields.
    2) Try to search that authority and check if 7XX values are displayed
    3) Apply this patch
    4) Try to search that authority and you will see that 7XX values are displayed
       like "1XX = 7XX"
    
    Sponsored-by: Keratsini-Drapetsona Municipal Library, Greece
    Mentored-by: Andreas Roussos
    Signed-off-by: Frank Hansen <frank.hansen@ub.lu.se>
    
    Works for me!
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 60ed1898a09b638ddbf16c5b0054348cd3967832
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Oct 23 19:56:21 2023 +0000

    Bug 22712: Make 'Show inactive funds' button on addorderiso2907.pl work for item budgets
    
    This requires enabling MarcItemFieldsToOrder, see bug 34645
    
    Add an inactive Budget and some funds to your system
    
    Import a file with multiple biblios
    
    Confirm the button hids/displays the funds for all item orders
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f1bbdee7ac8a49a5ba85686d8a0edb59efecc8ba
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 30 09:00:31 2023 -0300

    Bug 31393: Tidy
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6973625e7a06e66ee731ea8f5b69f296943c580f
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Mon Jun 26 15:25:12 2023 +0200

    Bug 31393: Koha::Config: handle the special case for 'content' attribute
    
    <key content="value"></key>
    
    was wrongly parsed as
    
    { key => 'value' }
    
    whereas it should be
    
    { key => { content => 'value' } }
    
    The 'content' attribute is used in shibboleth config
    
    Test plan:
    1 Run `prove t/Koha/Config.t`
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b0a8372c2f5eec6dd1671c0557bb82e3a71436db
Author: David Nind <david@davidnind.com>
Date:   Sun Dec 4 01:33:32 2022 +0000

    Bug 32312: Add missing column descriptions to the statistics table
    
    This adds missing descriptions to the existing statistics database
    columns.
    
    It also improves some existing descriptions.
    
    1. Go to Reports > Guided reports > Create guided report.
    2. Choose 'Circulation' for the module to report on and select
       'Next'.
    3. Choose 'Tabular' for the type of report and select 'Next'.
    4. Scroll down to the statistics table section and note that there
       are no descriptions for:
       - statistics.other
       - statistics.location
       - statistics.ccode
       - statistics.categorycode
    5. Note that:
       - the description for statistics.type is 'Type'
       - the description for statistics.itemtype is 'Item type'
    6. Apply the patch.
    7. Restart all the things (restart_all).
    8. Reload the page.
    9. Note that:
       . there are now descriptions for the columns in step 4
       . the description for statistics.type is now 'Transaction type'
         (to more clearly indicate what it contains)
       . the description for statistics.itemtype is now 'Koha item type'
         (consistent with other tables where this is used, such as items)
    10. Sign off :D
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9cea8312a5e2444ed142e44e2ca5041ba7373b7b
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Oct 28 22:44:56 2023 +0000

    Bug 35147: (QA follow-up) Capitalzation: Shibboleth Login
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 184299c9c84ee35cdd31149214710778648729ad
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Oct 25 00:40:26 2023 +0000

    Bug 35147: Add classes to Shibboleth text on OPAC login page
    
    This enhancement makes it easier for libraries to change the Shibboleth-related messages on the OPAC login page.
    
    Libraries can employ OPACUserJS to change the text. For e.g., I can replace the message "If you do not have a Shibboleth account, but you do have a local login, then you may login below." by putting the following in OPACUserJS:
    
    $(".shib_local_text").text("If you do not have a staff member account, but are a member of the library, then you may log in below.");
    
    To test:
    
    1. Go to <your-opac-url>/cgi-bin/koha/opac-user.pl , or disable the OpacPublic system preference. Ensure you are logged out of the OPAC.
    2. In the staff interface, search for the OPACUserJS system preference under Koha Administration. Add the following JS and Save:
    
    $(".shib_invalid").text("Test changing the invalid Shibboleth login message.");
    $(".shib_title").text("Test changing the Shibboleth login heading.");
    $(".shib_url").text("Test changing the Shibboleth account link text.");
    $(".shib_local_title").text("Test changing the local login heading.");
    $(".shib_local_text").text("Test changing the message that shows if you do not have a Shibboleth account.");
    
    3. Refresh the OPAC and confirm the text changes to reflect your JS. Note: The invalid Shibboleth login will be a bit harder to test, so if you can't test, confirm the HTML in the patch looks correct.
    
    Sponsored-by: New Zealand Council for Educational Research
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 826aeaf22f36fb3ebacafdacf7c270cc72d8c5fe
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:53 2023 +0100

    Bug 32853: Fix cataloguing/value_builder/unimarc_field_125.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4fa7d59c61b524238b2e30f383ccda44e61e1096
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Feb 3 11:58:53 2023 +0100

    Bug 32856: Fix cataloguing/value_builder/unimarc_field_126.pl
    
    Use event parameter
    
    This is part of the refactoring happening in bug 30975
    
    Test plan:
    1. Verify that the plugin continues to work as before
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2988c549719197a5a46a94039f7881b3e74e6e19
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Oct 20 01:15:00 2023 +0000

    Bug 35111: Ignore SIGPIPE in background jobs worker
    
    This change explicitly ignores SIGPIPE signals in the background jobs
    worker.
    
    Daemons like Starman ignore SIGPIPE so it makes sense to explicitly set this.
    Differences in the inner workings of MySQL vs MariaDB client libraries have yielded
    different behaviours in automatic reconnections and potentially SIGPIPE handling,
    so this helps to make the overall behaviour more consistent.
    
    Test plan:
    0. Apply patch and run "restart_all"
    1. Go to http://localhost:8081/cgi-bin/koha/catalogue/detail.pl?biblionumber=29
    2. Click "Save" > "MARCXML"
    3. Go to http://localhost:8081/cgi-bin/koha/tools/stage-marc-import.pl
    4. Click "Choose file", choose the MARCXML file, click "Upload file"
    5. Click "Stage for import"
    6. Note the job is marked as "100% Finished"
    
    7. In a separate window run "docker restart koha-db-1"
    8. Repeat steps 3-5 for uploading file and running stage for import
    9. Note that the job is marked as "100% Finished" as you'd expect
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] Added comment on the SIG PIPE line.
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7c6ef360cdf77c2aa8d473c756f2b94f39038f21
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Oct 28 10:02:26 2023 -0300

    Bug 10762: Fix tests continued
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9f98be593a8bfe32ff17adeb9a9c050540b3dc96
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Sat Oct 28 09:45:34 2023 -0300

    Bug 29523: Fix tests
    
    Some tests compare things to the output of `->to_api` and are exploding
    because the (now mandatory) `user` parameter is not passed in the call.
    
    In the case of IdP.t I just got rid of the use of `to_api` as we are
    just trying to acknowledge a new user has been created and the API
    representation of it is irrelevant.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 42330ef523b99c78c6457543072f12245b029fc9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 27 17:16:27 2023 -0300

    Bug 10762: Fix default values test
    
    This patch adds the new default values to the data structure the result
    is compared with.
    
    It also fixes the tests count (probably an untested rebase issue)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 43bd124f873ac118a9f87a5b5160ee99dc8b8a47
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 27 11:48:07 2023 +0100

    Bug 35173: Correctly concat error strings
    
    This patch moves the call to $sftp->error outside of the double quote
    string and into a . concat to properly expose the error message as
    apposed to outputting 'Net::SFTP::Foreign=HASH(0x559c9118f0c8)->error'
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>

commit 67f4fcc204c11998f9110d8ed723fa826c62a5ce
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Oct 6 15:15:39 2023 +0000

    Bug 35003: Make cancelled hold requests filter by branch
    
    To recreate:
    1. Make sure you have the "Default waiting hold cancellation policy" set to allow via circulation rules.
    2. Make several holds at different branches  holds and set them to waiting
    3. Request to cancel those holds, making sure you cancel some for different branches.
    4. Go to waitingreserves.tt and notice that you see all of the holds from all branches.
    5. APPLY PATCH and restart services
    6. Vist the waitingreserves.tt page and notice that the "Holds with cancellation requests" table can now filters by branch.
    7. Use the "View all libraries" and make sure you can see all the holds with a cancellation request.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>

commit e598fa8f487132988cab480c10b3ebc3a588a86e
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Oct 23 21:42:01 2023 +0000

    Bug 34136: (QA follow-up) Perltidy
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>

commit 0ed87f732e7463a7dee38482b2573cddbb604fff
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Oct 23 21:38:14 2023 +0000

    Bug 34136: (QA follow-up) Change Report to Reports as category in notices and slips
    
    Looking at the other entries for the module in notices we most often
    use the actual module name: patrons, suggestions, holds, etc.
    
    So I updated "Report" to "Reports" to match that pattern.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>

commit 94cee66ec7de1ab76f14be70e98afed05f230460
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jun 27 12:44:18 2023 -0400

    Bug 34136: Add ability to render a report using a notice template
    
    Sometimes it is useful to display the results of a report in a non-table format. We should be able to create notice templates to render reports.
    
    Test Plan:
    1) Apply this patch
    2) Restart all the things!
    3) Create a new notice template using the new "Report" option from the
       "New notice" pulldown.
    4) In the "Print" area, paste the following template:
    
    [% FOREACH b IN data %]
    <div class="panel panel-default">
      <div class="panel-heading">[% b.surname %], [% b.firstname %]</div>
      <div class="panel-body">Expiration: [% b.dateexpiry %]</div>
      <div class="panel-footer">ID: [% b.borrowernumber %]</div>
    </div>
    [% END %]
    
    5) Create a report with the query: SELECT * FROM borrowers
    6) Once the report is saved, use the new "Run with template" option to
       select the template you just created.
    7) Note that instead of the results being a paged table, you instead
       see the results rendered as cards!
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>

commit 1d58ebfee3986a4c4e7027ba2ce76a4274d57e2a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 12 12:35:12 2023 +0200

    Bug 35043: Do not have \n or \t appear in PO files
    
    This is a trick, so that we won't have to deal with \t in PO files.
    \n is not a problem, but it seems consistent to use the same method for
    both.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>

commit 6757cd5f861e6f2972b48f669750003195e67304
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 12 11:44:16 2023 +0200

    Bug 35043: Use Locale::PO->quote
    
    We have our own "quote_po" sub that is stating that Locale::PO::quote
    is buggy because it does not deal with quoting new lines correctly.
    However it seems that it is fixed now.
    
    Ideally we could use Locale::PO::quote everywhere, but it does not
    escape tab characters:
      $string =~ s/\\(?!t)/\\\\/g;           # \t is a tab
    
    This means the following:
    msgid "Tabulation (\\t)"
    msgstr "Tabulation (\\t)"
    become:
    -msgid "Tabulation (\t)"
    -msgstr "Tabulation (\t)"
    
    And we are seeing the following on Weblate:
    https://snipboard.io/BjQmDC.jpg
    
    Note that Locale::PO has not been updated since 2014...
    
    The real problem behind this is that we have 2 methods to quote strings.
    At first glance it seems that Locale::PO::quote was not used before, but
    with the introduction of the koha-i18n project we will have scripts that
    will use Locale::PO->save_file_fromarray, which uses Locale::PO->quote
    => Those scripts will be used on the translation server for post
    processing (security reason, marking potential XSS strings as fuzzy).
    
    Test plan:
    0. Do not apply the patch
    1. gulp po:update --lang LANG # Replace LANG with your favorite language
       code
    2. git commit -a -m"init PO files"
    3. Apply this patch
    4. Repeate 1.
    5. git diff
       => The change is about the "Tabulation" and "New line" strings from
          tools/csv-profiles.tt
    6. Translate them (replace the \t and \n with %s) and remove the fuzzy
       flag
    7. install the template: cd misc/translator && perl translate install
       LANG
    8. Enable the language, use it and go to the "Nouveau profil CSV" view
       => Notice that the \t and \n are correctly displayed.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>

commit 3439185bb0b901e5a902cc8887fa07526f33ea55
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Oct 27 07:21:03 2023 +0000

    Bug 35141: (QA follow-up) Increment the bad count
    
    Also move earlier print to warn for consistency.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>

commit 706641e747336eeb341172ed3d794d86551a45a9
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 24 12:01:09 2023 +0000

    Bug 35141: Prevent link_bibs_to_authorities from dying on invalid metadata
    
    When fetching the record we need to eval in case of exception
    
    To test:
    1 - Apply first patch
    2 - perl misc/link_bibs_to_authorities.pl
    3 - Note it dies on parser error at record 369
    4 - Apply this patch
    5 - perl misc/link_bibs_to_authorities.pl
    6 - The process completes - with warning thrown on record 369
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>

commit 22c0be31c73249fa534afb209f2a0229f84b7568
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 24 11:51:29 2023 +0000

    Bug 35141: Catch ES search exceptions in link_bibs_to_authorities, warn, and continue
    
    This patch simplay adds an eval and a warning to link_bibs_to_authorities to catch any errors while searching and continue linking.
    
    To test:
    1 - edit /etc/kohia/sites/kohadev/koha-conf.xml and add to elasticsearch stanza
        <request_timeout>0</request_timeout>
    2 - perl misc/link_bibs_to_authorities.pl
    3 - It dies immediately
    4 - Apply patch
    5 - perl misc/link_bibs_to_authorities.pl
    6 - Now it tries every record, throwing warnings along the way, but completes
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>

commit bbeab36789d8dd020bc5395d76c54cc2910caf49
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Sep 13 17:03:32 2023 +0000

    Bug 34678: Allow new entries to overwrite hold_fill_targets
    
    When using background jobs, there is a possibility of a race condition where two jobs will be updating the holds queue for the same biblio. We should try to minimize those cases (see bug 34596)
    
    In the meantime though, we should prevent jobs possibly dying, and allow the most recent update to succeed.
    
    There is a possibility two updates wil assign different items to the same reserve, and that a reserve could end up in the queue twice, however, whichever one is filled first will delete both entries. as filling the hold deletes by reserve id (see bug 24359)
    
    This patch adds a transaction to delete and then inset the new row
    
    To test:
    1 - prove -v t/db_dependent/Reserves.t
    2 - It fails
    3 - Apply patch
    4 - t/db_dependent/Reserves.t
    5 - It succeeds!
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>

commit dfad12d0790e38e739c610dd2a5f2345a053ed52
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Sep 13 17:01:09 2023 +0000

    Bug 34678: Unit test
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>

commit b9ea3eb988b116ffc912fad9315533c7774a3754
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 26 14:58:40 2023 -0300

    Bug 35167: Make 'effective_not_for_loan_status' fallback to 0 if itype has it undef
    
    This patch makes the effective not for loan status be set the item value
    if not defined at itype level.
    
    To test:
    1. Apply the regressions tests patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/items.t
    => FAIL: Tests fail!
    3. Apply this patch
    4. Repeat 2
    => SUCCESS: Tests pass!
    5. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>

commit c67d28c5f9136a96bfb665cd13f354af492e3233
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 26 14:56:35 2023 -0300

    Bug 35167: Regression tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>

commit b33209626537d03179ffbda42738fde673e6fac2
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 27 15:46:13 2023 +0100

    Bug 35119: Add back classes used for selenium tests
    
    This patch re-instates the classes used for the selenium tests.. I
    checked we weren't using them for javascript or css, but didn't think
    about tests before.

commit c0eb930e98428d1e96a7cb3a33debfd8038a78fe
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Oct 23 16:19:18 2023 +0100

    Bug 29523: (follow-up) Adding documentation to swagger.yaml
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aeef771dcd52017ddfd1eb577e09d3d05e2e9962
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Oct 23 16:19:18 2023 +0100

    Bug 29523: (follow-up) Comprehensive tests for redaction
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ed6791d64e536d2884611d17e57bfa2d20e65ee1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Aug 31 14:13:54 2023 +0200

    Bug 29523: Add redaction for inaccessible objects
    
    This patch switches from removing inaccessible items from the responses
    to instead redacting fields in innaccessible responses.
    
    This allows for embed traversal and keeps counts etc correct but also
    hides the data we want to hide.
    
    We add support for an 'unredact_list' method at the Koha::* class level
    allowing for individual classes to specify which fields they wish to
    expose to restricted users regardless of their restriction.
    
    It is to be used in combination with the is_accessible method introduced
    earlier in this patchset which is used to denote whether the current
    user should be allowed to see the full record or only a subset of it as
    defined in the unredacted_list.
    
    We undefine any fields not listed in the unredact_list for the API
    response. This has the effect of still returning the full object of
    keys, but setting most fields to a JSON null.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aa3b7fb50d5fe48d7313adba974dd8dfc3d6462a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jun 29 12:25:35 2022 +0100

    Bug 29523: Remove no longer required methods
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 743fac1fe01fc3fdb3ca7b22f3c86981a72b4502
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jun 28 16:50:29 2022 +0100

    Bug 29523: Remove the FIXME
    
    This patch works through the unit tests and existing code to allow
    removal of the FIXME I introduced earlier in the patchset.
    
    We now require the `user` parameter be passed to `is_accessible` which
    in turn makes `user` a required parameter for `to_api` in the
    `Koha::Patron` case.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2c502d320efeda7734d8e328f1feaad2dcd64ca8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Mar 3 14:40:20 2022 +0000

    Bug 29523: Cache the restricted branches list
    
    This patch introduces a very localised cache of the restricted branches
    list in the logged in patron object.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1477ffc7529277f49791966451dcb9a1c798b017
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 26 15:35:05 2021 +0000

    Bug 29523: Pass the logged user around and use for validating
    
    In this patch I add 'user', containing the Koha::Patron object for the
    logged in user in the params hash we pass around in to_api. I then use
    that in a new 'is_accessible' method added to Koha::Patron.
    
    The new method is really the equivilent of 'search_limited' in the plural
    class and could perhaps be renamed 'is_limited' or something clearer for
    the singular form 'is_filtered' or 'fitler_for_api' or something?
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a05f83d8fd62ca3702204f193ce83d0875e369f6
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 26 14:47:12 2021 +0000

    Bug 29523: (QA follow-up) Fix failing test in club holds
    
    With this patch series, all singular objects need to 'use' their plural
    counterparts.. otherwise the parent can't find search_related.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ca2dd193fccc4514970f9e5e9ac5e978120958d2
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 26 13:40:15 2021 +0000

    Bug 29523: (QA follow-up) Catch remaining SUPER::to_api cases
    
    Koha::Object->to_api can now return undefined.. we should be catching
    that cases in all post manipulation cases.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bbd153d68853152c473d7e206c2f73403bf6c4c2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 19 13:13:59 2021 -0300

    Bug 29523: Make Koha::Object->to_api respect accessibility
    
    This patch makes the *to_api* method honour the accessibility check for
    the object. This is relevant in the context of embedding single objects.
    
    The Koha::Patron->to_api method is adjusted to reflect this behavior as
    well (it does some manipulation after the ->to_api call and we need to
    prevent it).
    
    To test:
    1. Apply up to the regression tests
    2. Run:
       $ kshell
      k$ prove t/db_dependent/Koha/Object.t
    => FAIL: A patron, that shouldn't be accessed, is returned by ->to_api
    3. Apply this patch
    4. Repeat 2
    => SUCCESS: Tests pass!
    6. Pick Henry Acevedo from the sample data, assign him 'catalogue'
       permissions and a know user/password combination
    7. Enable basic authentication
    8. Point your favourite tool (Postman?) to
       GET http://kohadev-intra.myDNSname.org:8081/api/v1/biblio/245/checkouts
       Set the following header: x-koha-embed: patron
       Pick whatever biblio you want, actually.
    => SUCCESS: No checkouts
    9. Perform a couple checkouts on the chosen biblio. Make sure one
       checkout is for a patron on the same library as Henry, and the other
       on a different one.
    10. Repeat 8
    => SUCCESS: You see two checkouts. One of them has an attribute 'patron'
       containing the patron from Henry's library. The other, has the
       attribute set to 'null'.
    11. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1fd366ddf7c7ea9a516abfbdcee9bca1131b7ecf
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 19 13:12:14 2021 -0300

    Bug 29523: Regression tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c24b46b403b51162d582b856d79914509661d26a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 19 09:55:15 2021 -0300

    Bug 29523: Add Koha::Object->accessible
    
    This patch introduces a method for checking if an object can be
    retrieved by the current user. It depends on the plural class
    implementation of the ->search_limited method.
    
    To test:
    1. Apply this patch
    2. Run:
       $ kshell
      k$ prove t/db_dependent/Koha/Object.t
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d822e687d28ae8d5c5451cf0e09937d60967dd3c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Nov 19 09:37:38 2021 -0300

    Bug 29523: Add Koha::Objects->search_limited stub method
    
    This method is just a passthru to the search method. It is defined here
    to avoid the need to check if each class implements it.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 67930244ad5dc4e65e9e040b38d0080cb80b23b9
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Sep 15 15:11:21 2023 +0000

    Bug 33662: Add link to acq advanced search to acq navigation
    
    Right now 3 clicks are needed to open the advanced search page
    in the acquisitions module.
    
    This adds a link to the advanced search to the left hand
    module navigation.
    
    To test:
    * Go to acquisitions
    * Verify the way is long to advanced search:
      At the top: Orders search > config icon > advanced search link
    * Apply patch
    * Notice new 'Order search' link on the left
    * Verify it's way shorter now :)
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
      Renamed link from 'Advanced search' to 'Order search'
      Adjusted test plan
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0ef83c041d55cb95a4fd839101135126c3d9854a
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Sep 26 22:40:01 2023 +0000

    Bug 34908: Sort item types alphabetically by description when adding a new empty record as an order to a basket
    
    To test:
    
    1. Go to Koha administration -> Item types. Add a new item type "B" with the description "Test" so it will be obvious if it is sorted by the code "B" instead of the description "Test".
    2. Go to Acquisitions. Add to a basket from a new empty record
    3. In the Catalog details section, note the Item type dropdown. Confirm your "Test" item type, is showing near the top of the list, indicating it has been sorted based on the code "B"
    4. Apply patch and restart services. Refresh the page.
    5. Open the Item type dropdown again and confirm your "Test" item type is showing in the expected alphabetical order.
    
    NC amended patch - tidied
    
    Sponsored-by: South Taranaki District Council
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4ab24451a337d964edead78cf332073ce1a5e0e3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 25 11:43:32 2023 -0300

    Bug 33887: DBRev 23.06.00.054
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2d418257638001f8dba45e5232126acaced9c93b
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Oct 21 08:56:31 2023 +0000

    Bug 33887: (QA follow-up) Perltidy and fix some formatting issues
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 89d15333be423dbf04515071022dfa04827f3206
Author: David Nind <david@davidnind.com>
Date:   Sun Aug 27 18:24:41 2023 +0000

    Bug 33887: (follow-up) Update the system preference description
    
    Remove duplicate word, use singular for the note text.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 57b1cadc4e490984f46563bf21374a1cf92e9026
Author: Sam Lau <samalau@gmail.com>
Date:   Mon Jun 12 17:58:15 2023 +0000

    Bug 33887: Add the ability to optionally fill the next hold when an item is automatically checked in.
    
    When an item is automatically checked in, Koha should be able to trap that item for the next patron and send a notification to that patron that a hold is waiting for them.
    
    To test:
    1. Apply patches
    2. restart_all and updatedatabase
    3. Go to administration -> item types and edit an item type
    4. Make sure the checkbox that is labeled ‘Automatic checkin:’ is checked. At the bottom of the page click save changes.
    5. In Administration -> system preferences, search for ‘AutomaticCheckinAutoFill’ and set it to ‘Do’.
    6. Check out an item to a patron and make it overdue (.ie set due date to yesterday). Also make sure that the item type you are checking out matches the item type edited in step 4.
    7. Place a hold on the item. Make the pickup location the same as the library it is checked out from.
    8. Run cronjob at misc/cronjobs/automatic_checkin.pl
    9. On the item details page, notice that the item was checked in and now the hold is waiting for pickup.
    10. Visit the patron’s page who placed the hold.
    11. Click on the notices tab and see that there is a ‘Hold available for pickup’ notice.
    12. Repeat steps 6-8, but this time make the hold pickup location different than the library the item is currently checked out to.
    13. Notice that this time, the item was checked in, the hold is waiting, and the item is in transit to the other library.
    14. If you visit the patron’s page, this time there should be no new notice because the item is still in transit.
    15. Sign-Off :)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f471af4b60a7861dabb94c3adb8290690c65b2bf
Author: Sam Lau <samalau@gmail.com>
Date:   Thu Jun 15 18:19:50 2023 +0000

    Bug 33887: Unit tests
    
    prove -v t/db_dependent/Koha/Checkouts.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 84268b66ae01c58e01ab1fa094e15d2025ba8757
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Oct 20 14:35:26 2023 +0000

    Bug 34497: (QA follow-up):Fix required text field
    
    input.value can be either null (if flatpickr date field empty) or '' (if simple text input empty),
    so account for both situations.
    Add missing 'required' attribute to text inputs.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4416a6ed35d236e9d9945c48cbc79ca8c6ec91ac
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Aug 8 11:14:11 2023 +0000

    Bug 34497: Dialog component should allow for optional input options on confirmation modal
    
    Currently supports 'Text' or 'Date' inputs
    
    Signed-off-by: Jessica Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fb80c5bd5f1fbfba89da1f75d431c9b21024da2b
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Aug 3 10:12:17 2023 +0000

    Bug 34468: Update how we call updateProgress in stage-marc-import.tt
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 63b7d7e3c560d94c466cbef7585011861b639a3e
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Aug 3 10:11:39 2023 +0000

    Bug 34468: Add progress callback to job_progress.js
    
    These patches change the current updateProgress function to accept a
    progress callback (a function that is called every time the bar
    progresses) in addition to the already existing callback that is called
    when the progress bar finishes.
    
    It's not expected to change any current behavior in master because
    updateProgress is only used once in the stage marc import tool using
    the already existing callback, and these patches aim to keep that.
    
    Test Plan:
    1) Apply this patch
    2) Stage a marc batch ( preferrably a large one to show the progress
       updating )
    3) Note the new progess bar, verify it functions correctly.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5bbc0090f3f1f486a5ac08efe25f601d4daa3ebf
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 25 11:37:41 2023 -0300

    Bug 33970: DBRev 23.06.00.053
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit feb499e87f57d9fa40e2d9c16203f7ebfebb6d77
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 25 11:36:18 2023 -0300

    Bug 33970: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a0161771ce3169c08ddd9a9572c675003051930c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Oct 19 14:32:28 2023 +0100

    Bug 33970: Compatability schim
    
    This adds a compatability option to allow older backends not passing
    their backend code through to the attributes on store.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d447f6c2581c693a4217caf73dbe94cab4f30c0b
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Aug 29 15:16:53 2023 +0000

    Bug 33970: Fix tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 052217e5e2e98a385100ee0aef6712951a2de5ae
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Jun 9 14:14:05 2023 +0000

    Bug 33970: Update DB
    
    Signed-off-by: Chris Walton <C.J.Walton@lboro.ac.uk>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ec3d8259a21fc82950df7b3448bde8f43223c053
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 25 11:34:46 2023 -0300

    Bug 10762: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0c41e05f25e4a9385ad26cdaed68f9c037909931
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Sep 27 11:26:15 2023 -1000

    Bug 34940: Highlight logged-in library in facets
    
    Like in patron searches Bug 10902, use class 'currentlibrary' to highlight logged-in library in facets
    
    Test plan :
    1) Set system preference 'DisplayLibraryFacets' to 'both home and holding libraries'
    2) Perform a seach that will find items of your logged-in library.
       In KTD, search for 'branch:CPL'
    3) Check the facet (home and holding libraries) of your logged-in library is highlighted
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1508e81505f978b473f06b9f8e71a8f22721a7f5
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Oct 25 09:34:53 2023 -0400

    Bug 35148: before_send_messages plugin hook does not pass the --where option
    
    The before_send_messages plugin hook currently sends all the non-smtp related options with the exception of the --where option. This should be added.
    
    Test Plan:
    1) Install the latest version of the kitchen sink plugin (
       https://github.com/bywatersolutions/dev-koha-plugin-kitchen-sink/releases
       )
    2) Apply this patch
    3) Run process_message_queue.pl with a --where option
    4) Run the command: ./misc/cronjobs/process_message_queue.pl --where "letter_code='test'"
    5) Note the output looks like:
    Plugin hook before_send_message called with the params: $VAR1 = {
              'verbose' => 0,
              'where' => 'letter_code=\'test\'',
              'letter_code' => [],
              'type' => [],
              'limit' => undef
            };
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2ce68244991fc90b4606e1aa06e874c9854107a2
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Oct 16 23:03:03 2023 +0000

    Bug 35069: Fix hold ratios items needed column sorting
    
    This patch adds the data-sort attribute to the "Items needed" column to
    ensure proper sorting.
    
    To test:
    1. Make a lot of holds.
    2. On some holds have a high enough holds/copies ratio so the "Items
       needed" has values greater than 10.
    3. Sort by that column. Notice the copies with an "Items needed" higher
       than 10 do not get sorted correctly.
    4. APPLY PATCH
    5. Try steps 1 -3 again. Everything should sort properly.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7a32e68b50202ce70bd6b2123880ac776dd7337b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Oct 23 10:54:33 2023 +0100

    Bug 35119: (follow-up) Adapt advanced editor message
    
    I'd love to have included the error details within the message popup,
    but that alluded me so this patch just updates the message to hint that
    details can be seen on the basic editor screen.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit db6a376fd338a10b26339cfd0712667ead1b09eb
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 20 19:18:43 2023 +0100

    Bug 35119: (follow-up) Same treatment for editor page
    
    We pushed 34014 before I thought about these changes.. I think this is a
    solid follow-up to add the same styling to the catalogue editor page..
    swapping the existing dialog alert with a page-section bg-danger and
    thus allowing more space to 'pre' wrap the encoding error itself to ease
    the spotting of errant characters.
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1cf43ec855a0ee14475bef5ac29ec1ad4174dae7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 20 15:35:12 2023 +0100

    Bug 35119: Use page-section and bg-danger on biblio errors
    
    This patch uses the page-section and bg-danger classes to increase the
    prominence of bibliographic record errors in the staff client to
    encourage staff to fix such issues as soon as possible.
    
    We also output the actual encoding error in a <pre> block to maintain
    the proper whitespacing of the errors themselves.. this makes it much
    clearer which characters are the issues.
    
    Test plan
    1) Using ktd navigate to record 369
    2) Note the display of an encoding warning at the top of the page
    3) Apply the patch
    4) Refresh the above page and note the stronger visual prominence of the
       error
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0e4e22c45c296c24a707e905a96d4c90c39a4b63
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Sep 8 09:48:40 2023 +0100

    Bug 34377: (follow-up) Use patron-title include
    
    This switched the existing manual handling of patron title construction
    to use the accepted include method.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c80004831e528d8cc6b91ad146eecc34c621cd24
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Sep 7 22:52:00 2023 +0000

    Bug 34377: Add managing librarain
    
    1. From the patron Accounting tab > "Create manual credit".
    2. From the patron Accounting tab > "Create manua
    3. Go to the Transaction tab (members/boraccount.pl) and click the 'Details' button.
    4. Do this for  both a debit and a credit.
    5. No info. about which librarain administered the credit/debit.
    6. Apply patch
    7. Try 3 -6 again, notice the table now shows which librarian administed the credit/debit.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit af01b62d2f5395c0c47892b5a2c9012e962791d5
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Oct 19 13:50:59 2023 +0000

    Bug 33608: (QA follow-up) Remove ->insert method
    
    Might come back on the subject when resuming with bug 33636.
    
    Test plan:
    Run t/db_dependent/Koha/Statistics.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] Tidy Koha/Item.pm bit further. Ordered hash keys too.
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9aa95001d409787e1fe3b2f66c28973e40b34f96
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jul 20 06:04:46 2023 +0000

    Bug 33608: (QA follow-up) Restore older gt zero tests
    
    See the Bugzilla report. I have been asked to restore the former
    tests although I definitely think that they are wrong. Will address
    that on bug 34308 separately.
    
    This currently has the side-effect of negative lost values being
    interpreted as 'found'. (Do not use negative lost values!)
    The added subtest still reflects that now. Added a few TODOs.
    
    Test plan:
    [1] Prove t/db_dependent/Koha/Items.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 043f35887828d06098387430c2da8e51ef186981
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jun 1 11:41:54 2023 +0000

    Bug 33608: (follow-up) Default value for interface column
    
    We should default to C4::Context->interface.
    
    Test plan:
    Login via intranet (see Bugzilla report).
    Edit an item. Set to lost.
    Check entry in statistics table on interface value.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b5eb5520ed6f833cd2a50ef0fc3d27fa8dd461ad
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon May 8 12:54:48 2023 +0000

    Bug 33608: Move older Stats tests to Koha/Statistics.t
    
    Test plan:
    Run t/db_dependent/Koha/Statistics.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    [EDIT} Tidied inline.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 917e3283411d8a25d86ed57a470ce6d224365a24
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon May 8 09:17:32 2023 +0000

    Bug 33608: Polish Koha::Statistic further
    
    Adding exceptions, removing croaks.
    No exception in new for unknown hash keys, store will catch that.
    Prepare switching amount parameter to value (db column name).
    
    Test plan:
    Run t/db_dependent/Stats.t
    Run t/db_dependent/Koha/Items.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    [EDIT] Fixed the mandatory check in Stats.t. Removed key_or_default.
           Additional tidy.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7ceb3959c3a715afff1939f71059d7aa60be8c4e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Apr 26 15:58:13 2023 +0200

    Bug 33608: Redirect UpdateStats to Koha namespace
    
    Moving code to Koha::Statistic->new and ->insert.
    Polishing code a bit further in next patch.
    
    Test plan:
    Run t/db_dependent/Stats.t
    Run t/db_dependent/Koha/Statistics.t
    Run t/db_dependent/Koha/Pseudonymization.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    [EDIT] POD headers, use plural module and tidy Koha::Statistic
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4b5a0e6171462e3dffb264e77d9880322b5d40e3
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu May 11 05:59:42 2023 +0000

    Bug 33608: Correct indentation in Stats.t
    
    Test plan:
    Run t/db_dependent/Stats.t
    Run git diff -w HEAD~1.. t/db_dependent/Stats.t, proving that we
    only did whitespace changes.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ee33d83a2502c50a84166109efef209b0b08b7aa
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Apr 26 14:08:18 2023 +0200

    Bug 33608: Rearranging Stats.t, removing useless t version
    
    Subtest, modules, license.
    The t/Stats.t is as good as empty, can be removed.
    
    Test plan:
    Run t/db_dependent/Stats.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit edc49a55bb724a973cdb78bda83d9f95d0f81835
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon May 8 07:52:04 2023 +0000

    Bug 33608: Add UpdateStats to item->store
    
    Test plan:
    Run t/db_dependent/Koha/Item.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3f70c17fd8e35e5af958d2f2c93651488093327f
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Apr 25 16:51:55 2023 +0200

    Bug 33608: Add two new circulation types in Statistics module
    
    These are: item_lost and item_found. Speak for themself.
    
    Test plan:
    Run t/db_dependent/Stats.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bc469d330e6177ac7cb9ae80929a75ebb580458b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 19 17:38:30 2023 +0000

    Bug 34964: (follow-up) Add descriptions of new staff html customization regions
    
    Bug 6419 added several regions in the staff interface for adding html
    customizations. This patch adds descriptions of those.
    
    The patch also makes a correction to the grouping of OPAC and staff
    interface customization regions in the "Display location" dropdown.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7a866a9241ae2dee5d2b8be618e4c457f84a3c0d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Sep 29 17:33:38 2023 +0000

    Bug 34964: Add descriptions for different HTML customization regions
    
    This patch adds dynamically-shown hints on the HTML customization form
    when the user selects a display location. The hint describes where the
    content will be found.
    
    Much of the descriptive text in this patch is adapted from the original
    options' system preference descriptions.
    
    To test, apply the patch and go to Tools -> HTML customizations -> New
    entry.
    
    - The page loads with the first display location preselected, so you
      should see a hint for the "ArticleRequestsDisclaimerText" option.
    - Test the process of selecting each different display location option,
      confirming each time that the correct description is shown.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b497a8071bc64ce380c7044703495355e4ec541b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 25 10:43:51 2023 -0300

    Bug 8838: DBRev 23.06.00.052
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 518a13cfdb04d70fdeb929a339305becd1649235
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Thu Oct 19 09:35:27 2023 -0400

    Bug 8838: (QA follow-up) one more typo fix
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit de63f6eb75b01ca3bb5e82406711be6ea73000a6
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Oct 18 22:31:13 2023 +0000

    Bug 8838: Add SMS default/sample notices
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 358272ebbc3e60b4690e659502769aa417b950e2
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Oct 18 21:03:19 2023 +0000

    Bug 8838: (follow-up) Rebase, fix typos, and tidy.
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cec91b3b270c455ef27e3eec94b947dc06ab4e6f
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Sep 11 13:44:00 2023 -0400

    Bug 8838: Replace the atomic update boilerplate
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1ebb2db92c0c8b3a49934ced6f9b8ca81265be6b
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Sep 8 09:35:21 2023 -0400

    Bug 8838: Make db update idempotent
    
    Signed-off-by: Laura ONeil <laura@bywatersolutions.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fde91e178d7a2fd4748ad1712d5fc59170ee3919
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Aug 30 07:06:31 2023 -0400

    Bug 8838: Add digest option for HOLD notice
    
    Test Plan:
    1) Apply this patch
    2) Run updatedatabase.pl
    3) Restart all the things!
    4) Enable the new digest option for "Hold filled" messages
    5) Trap multiple holds for a patron
    6) Note a single notices is generated for all the trapped holds!
    
    Signed-off-by: George Williams <george@nekls.org>
    Signed-off-by: Laura ONeil <laura@bywatersolutions.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 328af73a945c10c48426f7d8bed59ee12d9e47d1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Oct 18 14:25:08 2023 +0100

    Bug 34020: (QA follow-up) Indentation fix
    
    The middle 'if' block was indented a level deeper than expected.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d8420e42b7e8ca3bcf6e90ecb08a55fa2118cf96
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 18 12:21:30 2023 +0000

    Bug 34020: Add spans to subfields
    
    The 260 field has spans for each subfield, we should provide the same
    for 264
    
    To test:
    1 - Apply patch
    2 - Inspect the record 264 display on staff and opac, results and
        details
    3 - Confirm spans are constructed correctly and named sensibly
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1349fc60da07eea15ae622882b7b5463391752e3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 18 12:00:05 2023 +0000

    Bug 34020: Preserve order of subfields in 264 display
    
    When ordered $a$b$a$b$c in the MARC object, 264 subfields are displayed
    $a$a$b$b$c.  This goes against the standard.
    
    This patch preserves the order.
    
    1) Edit a record and add/update a 264 fields to have subfields a, b, a,
       b, c in that order
    1) Search for record in staff and opac, see subfields displayed in
       order "aabbc" in results
    2) View the details page for the record in staff and opac, note same
       order
    3) Apply the patch, restart all
    4) Confirm staff and opac, results and details now follow the order of
       the subfields in the record's field
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c86d4ff67b9ed824dd254fdf1a9232ab1e12ec53
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 16 14:43:44 2023 +0000

    Bug 35059: Display item location on item details (catalogue/moredetail.pl)
    
    This patch updates the item details template so that item location is
    displayed along with information like collection and call number.
    
    The template has also been modified to correct the label "Item
    callnumber" to "Item call number."
    
    To test, apply the patch and update an item, if necessary, to add a
    shelving location.
    
    - View the bibliographic details page of the record.
    - Click the "Items" tab in the left-hand sidebar menu.
    - Under the "Item information" subheading you should see a line for
      "Shelving location" just after the "Item call number" line.
    - Confirm that the correct item location description is shown.
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d1318e29a13bde873484f942f0b5a56bd9380b13
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 25 10:10:37 2023 -0300

    Bug 10762: DBRev 23.06.00.051
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7082820aee606b5f76704e3853b30b526ac18984
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Oct 14 21:22:31 2023 +0000

    Bug 10762: (QA follow-up) Perltidy
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 71b84b0f2295956381f129ad2a3c731d93186132
Author: Thibaud Guillot <thibaud.guillot@biblibre.com>
Date:   Wed Aug 16 10:07:23 2023 +0000

    Bug 10762: (follow-up) Add tests
    
    Signed-off-by: Johanna Miettunen <johanna.miettunen@haaga-helia.fi>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b5986ba8e27ead688d5722d077769ffaa5b9c760
Author: Thibaud Guillot <thibaud.guillot@biblibre.com>
Date:   Mon Jan 2 15:05:11 2023 +0100

    Bug 10762: (follow-up) Update test plan, add kohastructure.sql files
    
    I also change the default value for scale_height to '0.01'
    
    Test plan:
    
    1)Home > Cataloguing > Tools: Label creator > Manage Layout or New Layout
    2)Make a new layout or edit an existing one
    3)Notice the 2 new fields "Barcode width/Barcode height"
    4)Save it like this
    5)Create a batch of barcode and export if in PDF
    6)Notice the size of barcode
    7)Go back to your existing layout
    8)Enter some values (Barcode width: 1.6 / Barcode height: 0.02), save
    9)Take back your batch of barcode and export it in PDF
    10)The barcode should be 2x bigger
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Johanna Miettunen <johanna.miettunen@haaga-helia.fi>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2cf45462fe7f4cc3aefadf0c03d73cab57c48f64
Author: Jérémy Breuillard <jeremy.breuillard@biblibre.com>
Date:   Wed Nov 17 10:08:49 2021 +0100

    Bug 10762: Change the size of barcodes in label creator
    
    Test plan:
    1)Home > Tools > Label creator > Manage Layout or New Layout
    2)Make a new layout or edit an existing one
    3)Notice the 2 new fields "Barcode width/Barcode height"
    4)Save it like this
    5)Create a batch of barcode and export if in PDF
    6)Notice the size of barcode
    7)Go back to your existing layout
    8)Enter some values (Barcode width: 1.6 / Barcode height: 0.04), save
    9)Take back your batch of barcode and export it in PDF
    10)The barcode should be 2x bigger
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Johanna Miettunen <johanna.miettunen@haaga-helia.fi>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b4cfe0019aceb11fb87a8f648e4a1bb657d84409
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 25 10:01:34 2023 -0300

    Bug 31846: DBRev 23.06.00.050
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 43d9ee68fc0eada3c554405d6d2b078b73be71f1
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Oct 13 09:56:00 2023 -0400

    Bug 31846: (QA follow-up) Tidy code to make qa script happy
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eae494fb33fdd0bd980f6cf4a13f9feba464c8a8
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Mon Oct 17 18:31:38 2022 +0200

    Bug 31846: Add syspref for serials search results limit
    
    To test:
    
    1) Make sure SerialsSearchResultsLimit syspref is unset or set to 0.
    2) Perform an advanced search on serials without any conditions
       and confirm all serials are listed as expected.
    3) Set SerialsSearchResultsLimit to a value less the the number
       of total subscriptions, perform the search again, and confirm
       that the number of serials has been limited to the set value.
    4) Ensure all tests pass in t/db_dependent/Serials.t
    
    Sponsored-by: Gothenburg University Library
    Signed-off-by: Kelly McElligott <kelly@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3738b00c15c09fe98f833f950da8821cc6951788
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 10 15:50:08 2023 +0000

    Bug 35007: Configure self checkout tables consistently
    
    This patch makes some updates to the self checkout page so that
    checkouts, holds, and account tabs are consistent with each other, with
    the same DataTables configuration.
    
    Included in the DataTables configuration are the same options we use on
    the OPAC's user summary page to show controls for copy, CSV, and print.
    
    Also changed: Some extra markup is removed from holds-table.inc, markup
    which was used to show table information responsively before we started
    using the DataTables responsive plugin.
    
    To test, apply the patch and log into the self checkout system as a user
    with checkouts, holds, and present or past charges.
    
    Compare the checkouts, holds, and charges tabs to confirm that the
    tables look correct and work correctly. Test that the copy, CSV, and
    print controls, and the search and clear filter functions. Test that
    each table responds correctly at various browser widths.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e08bf3bb4c4ef8208f7895c000397e4122664c57
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 24 15:32:53 2023 +0200

    Bug 35127: Fix 'Search type' for patron search
    
    We need to fallback on the syspref DefaultPatronSearchMethod but keep
    the value when one is passed!
    
    Test plan:
    Search for patrons, and use the "search type". Set it to different
    values than DefaultPatronSearchMethod and confirm that the value is
    kept.
    Fix is expected when searching for patrons in the header (use the
    options to select a different value and run the search)
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5b803d2b2a0e373e1e747809f106ad2dd2061a42
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 25 09:49:00 2023 -0300

    Bug 31503: DBRev 23.06.00.049
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6a42c854345fa41204e3a1f02ecea819c986c348
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Oct 25 11:27:21 2023 +0000

    Bug 31503: (QA follow-up) Fix number of tests in rebase
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 685ac83fa49ae43b5eab9026f2ba9265d847d521
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Oct 13 14:54:47 2023 +0000

    Bug 31503: (QA follow-up) Improve count of available_types
    
    Tidied one other line.
    
    Test plan:
    Run t/db_dependent/Koha/Patron/Consents.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 22651c9c2b25afd0e63a986f8ffb258480d735b8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Sep 18 10:28:06 2023 +0100

    Bug 31503: (follow-up) Remove OPACCustomConsentTypes
    
    This patch removes all trace of the original OPACCustomConsentTypes
    preference.  We now use Koha::Plugins->feature_enabled in preference.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cef4ef4fb1b337e579790487293aeeb6cc87c2c4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Sep 15 16:42:25 2023 +0100

    Bug 31503: (follow-up) Use KohaPlugins.feature_enabled
    
    This patch switches the code from using
    Koha.preference('OPACCustomConsentTypes') to using
    KohaPlugins.feature_enabled('patron_consent_type').
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3d857d8e9594b516f7778163ccd1ea431b8c6bb8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Sep 15 16:09:56 2023 +0100

    Bug 31503: (follow-up) Add 'feature_enabled' to Koha::Plugins
    
    This patch adds a 'feature_enabled' accessor to the Koha::Plugins class.
    Passing the plugin method name for the plugin feature you're looking for
    will return a boolean denoting whether any enabled plugins carry said
    method.
    
    Included in the patch is an addition to the TT KohaPlugins plugin to
    enable quick access to this function.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    [EDIT] Tidied t/db_dependent/Koha/Plugins/Plugins.t
    [EDIT] Tidied Koha/Template/Plugin/KohaPlugins.pm
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 90604fcfcf7dab43d01ca3412bf0df14ea90f5eb
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Sep 15 08:25:57 2023 +0100

    Bug 31503: (follow-up) Styling and pre-selection
    
    This patch restores some of the wording and styling from the original
    GDPR/Privacy policy feature including highlighting in a warning box.
    
    I also remove the jQuery approach for pre-selecting already selected
    radio options and rely on standard TT processing instead.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 90ca82b5511d56b73c35321bb2454333d76bbff4
Author: David Nind <david@davidnind.com>
Date:   Sun Sep 3 04:07:16 2023 +0000

    Bug 31503: (follow-up) Update description for system preference
    
    Update new OPACCustomConsentType system preference description - bold
    and capitalize NOTE for consistency, link to PrivacyPolicyConsent
    system preference for consistency, and other minor changes.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0a471bfeda152207452884466d690794ce3672fc
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Aug 31 08:40:29 2023 +0000

    Bug 31503: Make opac-patron-consent more generic
    
    Adds $patron->consent and $consents->available_types.
    Incorporates them into script/template.
    Provides two unit tests.
    
    Note: A follow-up patch helps you test this with an
    example plugin.
    
    Test plan:
    Run t/db_dependent/Koha/Patron.t
    Run t/db_dependent/Koha/Patron/Consents.t
    Toggle the value of pref PrivacyPolicyConsent and look at
    OPAC account, tab Consents.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d682d514b8746a74ec1d4b3ea3e016c51ff7b71
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Aug 30 16:32:52 2023 +0200

    Bug 31503: Change usermenu condition, add preference
    
    Adds preference OPACCustomConsentTypes.
    
    Test plan:
    Run dbrev.
    Toggle value of OPACCustomConsentTypes / PrivacyPolicyConsent.
    Check user page for Consents tab.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 05fb6f7848ee5bb723b48f4f5123d0359d4a6da5
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Aug 29 14:09:09 2023 +0200

    Bug 31503: Change patron_consent.type
    
    Test plan:
    Run db rev.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2b8275379e1ae0e40223d5561d03a30063a025e6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 24 15:43:06 2023 -0300

    Bug 27153: DBRev 23.06.00.048
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f0e76ce9d83836759738437df6e028a059cf74b0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 24 15:41:45 2023 -0300

    Bug 27153: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 825ff04bc8a1754430f5575a5c72bdeb4047394f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Sep 5 17:25:45 2023 +0000

    Bug 27153: Adjust kohastructure for new primary key
    
    Signed-off-by: Danielle M Elder <danielle.elder@law.utexas.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f54556041bf0d77e171471668728ddf04fcceefd
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 1 17:32:35 2023 +0000

    Bug 27153: Adjust mappings to add title without punctuation
    
    This patch finally adjust the default mappings to add a new field to
    the elastic index with the title stripped of punctuation
    
    This method optionally allows the library to place the filtered version in the same
    search field, or a new search field. The default mappings will include the filtered version
    in a keyword search, but not a targeted search
    
    To test:
    1 - Import some affected records via z3950, e.g.:
        Carrie's war
        1,000 Japanese words
    2 - Search (using Elasticsearch) for the titles without including punctuation
        Carries war
        1000 Japanese words
    3 - No results
    4 - Reload mappings and reindex
        perl misc/search_tools/rebuild_elasticsearch.pl -v -r
    5 - Search again
    6 - Success!
    7 - Search title specifically:
        ti:Carries war
    8 - No results
    9 - Adjust mappings.yaml to add second mapping for 245 to title index:
        - facet: ''
          marc_field: 245abp
          marc_type: marc21
          sort: 1
          suggestible: 1
          filter: punctuation
    10 - Reload mappings and reindex
    11 - Repeat 7
    12 - Success
    
    Signed-off-by: Danielle M Elder <danielle.elder@law.utexas.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f5347f49587ee5406d4a3051117ada4687bf7a79
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 1 17:30:14 2023 +0000

    Bug 27153: Add filter option to Elasticsearch indexing
    
    This patch uses the filter option from the mappings to add a value_callback
    to reord processing for indexing.
    
    Fields defined with 'punctuation' filter will have all punctuation stripped when
    conveted to documents.
    
    Tests are updated.
    
    Signed-off-by: Danielle M Elder <danielle.elder@law.utexas.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9972085a93501bb9e85ee47a334a379c676c2487
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 1 12:40:15 2023 +0000

    Bug 27153: Interface updates
    
    This patch adds a new column to the 'Bibliographic records' tab in
    Administration > Search engine configuration (Elasticsearch)
    
    To test:
    1 - Confirm the new 'filter' column shows
    2 - Update an existing field to set filter to punctuation
    3 - Confirm it can be saved
    4 - Add a new field
    5 - Confirm it saves correctly
    6 - Unset filter for a field
    7 - Confirm it saves
    
    Signed-off-by: Danielle M Elder <danielle.elder@law.utexas.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 333109c7fd3e463662119f90c5745948cf5764a7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 1 12:38:44 2023 +0000

    Bug 27153: DB Updates
    
    We start by adding the field to the table
    
    It is possible a library would want two versions of the same field in
    the indexing. We need to make the filter part of the primary key in
    order to allow this
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3c319d988c8a765834f77c7be5a378cae0e287e0
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Oct 13 08:26:46 2023 +0000

    Bug 35001: Add some checks to membership_expiry
    
    Test plan:
    Toggle pref TrackLastPatronActivityTriggers (clear it).
    And try variations of --active, --inactive to see the warnings.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5c2c6252fa3d14342d9cb481119c0d06bf93c7d2
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Oct 12 14:10:51 2023 +0000

    Bug 35001: Simplify ->is_active in light of activity triggers
    
    The fact that we update lastseen for various triggers now, makes
    it a bit easier to let go of those 'hardcoded queries' ;)
    
    Test plan:
    Run t/db_dependent/Koha/Patron.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7d783c21efb1a5f786d00f725794c1b42bb85e50
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 24 08:06:55 2023 +0200

    Bug 35136: (bug 31383 follow-up) Fix db rev
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit da9f74e56aa3fcaab2a53f0211113d7600263806
Author: Michał Kula <148193449+mkibp@users.noreply.github.com>
Date:   Mon Oct 23 15:51:40 2023 +0200

    Bug 35072: Fix invalid usage of "&amp;" in JavaScript intranet-tmpl script redirects
    
    These escapes were invalid in these places, as HTML entity escapes
    are meant to be used only inside of HTML elements/attributes, not
    inside of JavaScript code.
    
    These URLs would be sent out by the browser as-is, and that'd usually
    work on the default install only coincidentally. Unfortunately, on some
    setups (such as when using reverse proxies), this would break, and the
    URL after "&amp;" would have been truncated.
    
    This small patch adjusts the URLs in templates to not use wrong escapes,
    and makes them consistent with how URLs are formatted for JavaScript
    redirects in most of the templates already.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a5fc346403665cf6eb692f401bf1cca5ece3cb81
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Oct 4 15:04:27 2023 +0200

    Bug 34983: Force a sort order in JSON output of po2json
    
    This patch does so by default. If you do not want them sorted,
    export CANONICAL-0 on the command line.
    
    Test plan:
    Copy a staff PO file from misc/translator to test.po
    Now run:   time misc/translator/po2json test.po > json1
    And do:    time misc/translator/po2json test.po > json2
    Run:       diff json1 json2; #They should be the same.
    Now:       export CANONICAL=0
    And run:   time misc/translator/po2json test.po > json3
    And again: time misc/translator/po2json test.po > json4
    And run:   diff json3 json4; # Lots of changes
    Remove the created cruft. And signoff :)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 21315eb8dc908591ffd04cca3f8dccc489d6347f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Oct 12 12:53:34 2023 +0100

    Bug 35030: Add 'article' to patron activity triggers
    
    This patch adds 'article' to the list of triggers available for
    tracking patron activity.
    
    Test plan
    1) Select 'Placing an article request
       TrackPatronLastActivityTriggers system preference
    2) As a staff member, place a hold on any item for a test user
    3) Confirm that the borrowers.lastseen field is updated for that
       test borrower
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 795c60e5774d407cbbde2cad462ca15933c1acd4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Oct 12 12:40:17 2023 +0100

    Bug 35027: Add 'hold' to patron activity triggers
    
    This patch adds 'hold' to the list of triggers available for tracking
    patron activity.
    
    Test plan
    1) Select 'Placing a hold on an item' in the
       TrackPatronLastActivityTriggers system preference
    2) As a staff member, place a hold on any item for a test user
    3) Confirm that the borrowers.lastseen field is updated for that test
       borrower
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e1a428425817a3f760b6121de4013d10052d92de
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 24 09:58:57 2023 -0300

    Bug 15504: Fix tests count
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 57cc290bb8473efd7b1630c49f2f37380b61ae60
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 24 09:47:42 2023 -0300

    Bug 15504: DBRev 23.06.00.047
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d6b6ac6a9d68eb975f2a8e6979df3df0f22544c7
Author: Victor Grousset <victor@tuxayo.net>
Date:   Sun Oct 22 22:30:20 2023 +0200

    Bug 15504: (QA follow-up): more consistent quotes in atomicupdate
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a939f8da154cd6e28a8edabe2aba709f082d74c4
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Oct 12 07:35:58 2023 +0000

    Bug 15504: (QA follow-up) Final changes
    
    [1] Comment in Patron->is_active sharpened.
    [2] Patron->update_lastseen
          return if $cached && $cached eq $now->ymd;
        Should be
          return $self if $cached && $cached eq $now->ymd;
        Consistent return value.
    [3] Typo if there are not TrackLastPatronActivityTriggers enabled
    [4] Typo TrackLastPatronActivityTriggers must be contain
    [5] Typo patron is does .. option => performs an action
    [6] Tidy on dbrev to fix
          The file is less tidy than before (bad/messy lines before: 0, now: 4)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7a91be18148b1e9449837ff9efc77fef9b024be7
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Oct 12 07:26:40 2023 +0000

    Bug 15504: (QA follow-up) Fix dbrev
    
    Resolve:
    ERROR - {UNKNOWN}: DBI Exception: DBD::mysql::db do failed: Unknown column 'check_out' in 'field list' at /usr/share/koha/C4/Installer.pm line 741
    
    Test plan:
    Remove new pref from db.
    Run dbrev again.
    Check results.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b46b614b6ca0e4007e7ed1edc25e8d9c9b64a716
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Oct 11 18:43:31 2023 +0100

    Bug 15504: Remove PatronLastActivity preference
    
    This patch removes the older PatronLastActivity preference opting to
    replace it by the new PatronLastActivityTriggers preference. The feature
    can now be disabled by simply not selecting any triggers
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 01a5d302b96a3fa2913e14d00d87a8562f11cc98
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Oct 11 18:10:32 2023 +0100

    Bug 15504: (follow-up) Clarify --last_seen option in delete_patrons
    
    This patch adds clarifications to the last_seen option in delete_patrons
    to clarify that TrackLastPatronActivity and
    TrackLastPatronActivityTriggers system preferences act as a couplet.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6c9924f9f41bc53bd1127d383d0300be99ebc2eb
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Oct 11 18:06:37 2023 +0100

    Bug 15504: (follow-up) Update terminology on cleanborrowers
    
    This patch updates the terminology on the cleanborrowers form to reflect
    that 'activity' and not just 'connectivity' is tracked by
    TrackLastPatronActivity.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 299c05c3d62fc6e4d51e9818cb8ec14acb2025a6
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Oct 11 18:02:13 2023 +0100

    Bug 15504: (QA follow-up) Terminology
    
    This just updates 'Login to OPAC' to 'Login'.. we should squash this
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a377be6afeee435ef9804063941111ddc4077f96
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Oct 11 17:52:43 2023 +0100

    Bug 15504: (follow-up) Rename cache key
    
    I agree, it's better to use borrowernumber for the cache key and I also
    take the oportunity to rename it to more clearly reflect the function
    (it's no longer 'login' only, it's now 'activity')
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 66b6c3e936769c7b57f1eb86032d80c3fa7b6584
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Oct 11 17:47:06 2023 +0100

    Bug 15504: (follow-up) Respect existing TrackLastPatronActivity
    
    This patch updates the database update to set
    'check_out,connection,login' as the activity triggers should we find at
    upgrade time that TrackLastPatronActivity is set to true.
    
    This retains the existing functionality.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 305a221112d14aa6972abfcc593931cdf131e2cd
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 6 11:37:19 2023 +0100

    Bug 15504: (follow-up) Fix is_active test
    
    Bug 33245 introduced a new is_active patron method and the corresponding
    tests included calls to the method we depreacte in this patchset
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2d8dfd89c2940f09f52eca899793d8bd802b7141
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 6 11:25:01 2023 +0100

    Bug 15504: (follow-up) Tidy 'lastseen' section of unit test
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 91b7799c96f66e9c60cdf1c1e2db640427e435e0
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 6 11:16:48 2023 +0100

    Bug 15504: (follow-up) Add Triggers mock to unit tests
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0ae97bba6bcd98ff356722f332d7091d1a9e90d0
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Oct 6 11:02:54 2023 +0100

    Bug 15504: (follow-up) Use borrowernumber in Koha::Patrons->find
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 75f68914beeddf057251257c856f397b822f6189
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jun 20 19:23:11 2023 +0100

    Bug 15504: (follow-up) Migrate to one clear method
    
    We were using a series of similarly named methods spread in distinct places
    around the codebase. This combines the logic of C4::Auth::track_login_daily
    and Koha::Patron->track_login into a new Koha::Patron->update_lastseen method.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b30d32a571e0ba17d1759ee18ba33059f44bc91e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jun 21 08:21:59 2023 +0100

    Bug 15504: (follow-up) Unit tests
    
    This patch removes, moves and updates the existing unit tests for
    track_login_daily and track_login to all sit under Koha::Patron and
    update_lastseen.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dff2fc82d7ea60fd897ceb84d82b0b4caabf2baa
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Jun 14 14:16:34 2023 +0000

    Bug 15504: Add unit test
    
    prove -v t/db_dependent/Auth.t
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2db5afffa17de0b7ba24232ca32d73ffe1ca516c
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Jun 14 14:15:33 2023 +0000

    Bug 15504: Remove update_lastseen method
    
    This patch removes update_lastseen which has been replaced by a call to track_login_daily
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 68f1154f6ddcd22ae1fbe54447e071952675df01
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Jun 14 14:14:53 2023 +0000

    Bug 15504: Add triggers to instances of track_login_daily
    
    This patch adds a trigger to every instance of track_login_daily
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6b20144bbb5a37b8faf2d1179239405ced582c11
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Jun 14 14:11:08 2023 +0000

    Bug 15504: Update track_login_daily to accept triggers
    
    This patch adds triggers to track_login_daily so that it only tracks activity when that trigger is active
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b694c85edf1c0a371728b1c0637cfdb23a8a27e7
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Jun 14 14:08:17 2023 +0000

    Bug 15504: Add new syspref TrackLastPatronActivityTriggers
    
    This patch adds a new syspref TrackLastPatronActivityTriggers to determine which actions should update borrowers.lastseen
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a36e05904aa8c616d6b12fad450fbb61c07a87d5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 16 13:47:40 2023 +0200

    Bug 34030: non-table view
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d0d0a940eaeaf42a80733c6a1c19b6275e64efda
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 16 12:34:59 2023 +0200

    Bug 34030: Add a "print slips" action links to print in batch
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8a099dc4884497ea220a409daf86aed99b5605a0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 23 11:28:02 2023 -0300

    Bug 33547: DBRev 23.06.00.046
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cc69c6961408eab9aaaedb8130e7a0faf34ba67a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Oct 12 13:32:08 2023 +0000

    Bug 33547: (QA follow-up) Tidy
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4fad116545066addfe8353decdff08c594a88d49
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 9 17:18:18 2023 +0200

    Bug 33547: Add missing action button for non-table view
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ddca40a5d45b3d11d520fa09a188bea7c3b4f6a7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jun 6 15:56:46 2023 +0200

    Bug 33547: Display AV descriptions instead of codes
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c61c20bc8e005fdc4b7793095cdfbfcb2fd23e3a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Apr 17 20:59:07 2023 +0200

    Bug 33547: DBIC schema changes
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 10649d492181ea347cc76cb186e73fc642a9d4ad
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Apr 12 15:20:12 2023 +0200

    Bug 33547: Add print slip
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ebc28a9753cedf06676b8a6fbb233fbe28ce8678
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 23 11:22:42 2023 -0300

    Bug 28166: DBRev 23.06.00.045
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a5d75c47e7ef220486d0f4918ca548201089ae1a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Sep 25 13:50:30 2023 +0000

    Bug 28166: (QA follow-up) Fix and tidy tests and code
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1e1616b993047fbaf0ee838a0049de03b16dbde6
Author: Mark Hofstetter <mark@hofstetter.at>
Date:   Mon Mar 27 12:09:32 2023 +0200

    Bug 28166: Optionally add MARC fields to authority search
    
    adds the same feature to Authority Search as in the "normal" Z39.50 search, to display
    arbitrary marc fields in the search results
    
    1. apply patch
    2. go to System preferences->Authorities preferences
    3. the new option "AdditionalFieldsInZ3950ResultAuthSearch" shows up
    4. enter the additional field numbers you want to see eg '001'
    5. make an "Authority" search via Z39.50
    6. the new new column "Additional fields" will display
    7. sign off ;-)
    
    Sponsored-by: Steiermärkische Landesbibliothek
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Clemens Tubach <clemens.tubach@kit.edu>
    
    Bug 28166: Removed comments and _add_rowdata
    
    Bug 28166: (follow-up) Restore custom fields for biblios
    
    To test:
    1 - Add "245$a" to AdditionalFieldsInZ3950ResultSearch preference
    2 - Cataloging -> new from z3950
    3 - Search and see results have 'additional fields' including the title
    4 - Apply other patches
    5 - Restart all
    6 - Repeat Z39 Additional fields are now blank
    7 - Apply thi patch, restart all
    8 - Repeat Z39 search. Additional fields are restored
    
    Bug 28166: (QA follow-up) Fix rebase issue
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 933c779b7d49525a561070dd8d60941f5f000c06
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue May 23 14:49:08 2023 +0000

    Bug 33810: Opac advanced search fields need aria-labels
    
    The OPAC advanced search fields need aria-labels to assist with screen reading. This patch adds labels to both the dropdown selects and the text inputs
    
    Signed-off-by: joubu <xxx@example.org>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 174cd59cea0e9a69aa3d690ef25190c293345a83
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Oct 20 17:01:00 2023 +0000

    Bug 35124: Incorrect item groups table markup
    
    This patch corrects the markup of the item groups table which is found
    under the "Item groups" tab on the bibliographip detail page in the
    staff interface.
    
    The patch also adds the "NoSort" class to the "actions" column to
    prevent it from being sortable.
    
    To test, apply the patch and make sure the "EnableItemGroups" system
    preference is enabled.
    
    - In the staff interface, locate a record with items and view the detail
      page.
    - Under the "Item groups" tab confirm that the table looks correct: The
      heading labels should be centered bold text.
    - You should see sorting indicators on the "Display order" and "Description"
      headings but not on the last one.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0bc2990b0088624dfaee917b35a313f635957724
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Oct 23 11:19:27 2023 +0200

    Bug 31383: (bug 29691 follow-up) Remove get_opac_news_by_id
    
    We can simply use get here
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3bd3db0e12869115e63dd23e4c3b6ce547d084de
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Sat Oct 21 08:17:10 2023 +0200

    Bug 31383: Fix the DB upgrade process
    
    This patch fixes misc4dev/run_tests.pl --run-db-upgrade-only
    
    We need to make sure the column exists before running the query.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit 927e0861917d2de2a8abbc339407ffae8966ff59
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 20 19:12:26 2023 -0300

    Bug 31383: Fix kohastructure.sql
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e258ab9400d6ba57457c02e28d62f4fc66977212
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Oct 20 20:16:24 2023 +0000

    Bug 33916: (QA follow-up) Correct "Label profiles"
    
    ... to "Printer profiles"
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2525eb45abab3a0de7b46565592af6b8160eeaca
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 9 10:59:40 2023 +0000

    Bug 33916: (QA follow-up) Remove redundant template code
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3be7ff56795b3e2728a6153e400b61451b5fb897
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 6 15:16:45 2023 +0000

    Bug 33916: Improve translation of title tags: Labels
    
    This patch label creator templates so that title tags can be more easily
    translated.
    
    The patch also makes some minor changes to some templates to improve
    consistency between page title, breadcrumb navigation, and page heading.
    
    To test, apply the patch and confirm that the following pages have the
    correct title tags:
    
    - Cataloging -> Label creator home
      - Manage -> Label batches
        - Edit ->
          - Click the "Add item(s)" button without entering any barcodes or
            item numbers in the form.
            - Test the search form and search results
      - Manage -> Layouts
      - Manage -> Label templates
      - Manage -> Printer profiles
      - New -> Label batch
      - New -> Layout
      - New -> Label template
      - New -> Printer profile
      - New -> Barcode range
    - Cataloging -> Barcode image generator
    - Cataloging -> Quick spine label creator
    
    Signed-off-by: Salah Ghedda <salah.ghedda@inLibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a0555c00999290758cd0343b3bb1df3be148a9f4
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Thu Oct 19 17:46:49 2023 +0000

    Bug 34824: Added missing colon to 'Title'
    
    To test:
    0. Add budgets, vendors and baskets to acquisitions, if necessary
    1. Go to Acquisitions
    2. Click 'Search' next to the vendor search box
    3. If you don't already have an open basket, create one by clicking New
       > Basket
    4. Click 'Add to basket'
    5. Click 'From an external source'
    6. Search for a title or author (I searched for Shakespeare in the
       author field on the Library of Congress server)
    7. To the right of a record (with a title) Click the arrow next to the
       MARC button and choose Order
       --> Notice that in the 'Catalog details' section, all labels are
           followed by a colon except 'Title'
    8. Apply the patch and refresh the page. Notice that ’Title’ now has a
       colon.
    9. Sign off and have a great day!
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 28a6d14f009dd5830fa106c79cebf26e6df9980e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jul 26 16:40:39 2023 +0000

    Bug 34422: (follow-up) Add markup comments
    
    This patch adds comments to the template to highlight the markup
    structure.
    
    This patch should have no effect on the page's appearance or
    functionality.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6e038351266da98810bd96317845d910d4759a5e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 17 16:46:39 2023 +0000

    Bug 34422: Reindent factets.inc
    
    This patch reindents the staff interface catalog search results facets
    template so that it has consistent indentation. These changes should
    have no visible effect on the page.
    
    To test, apply the patch and perform a catalog search in the staff
    interface.The facets should look the same as always.
    
    Viewing the diff while ignoring whitespace changes should show only
    places where a line break was added.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 76d522a90346ccbdb38793c048d61e73e869d9a0
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Sep 28 12:48:36 2023 +0000

    Bug 34946: Remove the use of event attributes from self checkout and check-in
    
    This patch removes the use of event attributes from the self checkout
    and self check-in templates. These events are defined now along with the
    other in-page JS.
    
    To test you must have SelfCheckInModule and WebBasedSelfCheck
    preferences enabled. And SelfCheckoutByLogin = cardnumber.
    
    - Navigate to the self checkout interface
      (/cgi-bin/koha/sco/sco-main.pl).
    - When the page loads, cursor focus should be automatically placed in
      the barcode field.
    - Test the "munge history" feature from Bug 10016:
      [1] Start a web-based self-check session.
      [2] Enter a patron barcode.
      [3] Allow the self-check session to time out.
      [4] Use the back button.  You should get the patron barcode
          entry form; you should not be prompted to resubmit form input.
      [5] Enter a patron barcode, perform some transactions, then
          use the finish button.
      [6] Next, use the back button.  You should get the patron barcode
          entry form.
    - Test the updated checkout_confirm function by submitting the "magic"
      barcode for checkout: __KOHA_NEW_CIRC__. The user's session should be
      ended.
    
    - Navigate to the self check-in interface
      (/cgi-bin/koha/sco/sci-main.pl).
    - Test the cursor focus and "munge history" feature on this page too.
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a99fa18968c6f2c157a463111653a0b1eba75862
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Sep 21 20:40:22 2023 +0000

    Bug 34227: (QA follow-up) Fix translation issue and add a space
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0a5084eba4db21984b5797f137d2c725dbd01c86
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jan 29 11:48:24 2021 +0000

    Bug 34227: Add persistent selections and batch operations to item search
    
    This patch modifies the item search results page so that user selections
    are stored in local storage. This allows the user to make selections on
    one page of search results, move to another, and continue to make
    selections.
    
    The patch also adds the option to send selected items to batch item
    modification or batch item deletion.
    
    Changes to the patron search results template have been made to make
    some CSS classes more generic so they can be used by both pages.
    
    To test, apply the patch and rebuild the staff interface CSS.
    - Log in to the staff interface as a user with permission to perform
      batch item modification and batch item deletion.
    - Go to item search and perform a search which will return at
      least two pages of results.
      - On the search results page you should see a new search header
        toolbar with some controls: "Select visible rows," "Clear
        selection," "Export all results to" and "Batch operations"
        (disabled).
     - Without making any selections, confirm that the "Export all results
       to" menu items work correctly to export all results to a CSV or a
       barcode file.
     - Confirm that the "Select visible rows" control works as expected,
       selecting all checkboxes on the current page (and on no other pages)
       - After selecting all checkboxes the search header controls should be
         updated:
         - The "Export all..." button should now show the number of
           selections: "Export selected results (X) to..."
         - The batch operations button should be enabled.
         - There should be a new element labeled "Items selected: X" with a
           "Clear" link.
       - If you uncheck any checkboxes the controls should be updated,
         showing the new count of selected records.
       - Move to the next page of results and confirm that making selections
         on this page works to increment all counters
       - Confirm that the "Export selected.." options work and that your CSV
         and barcode files now contain only the items you selected.
       - Test the batch operations menu:
         - Test that the controls correctly reflect the logged-in user's
           permissions:
           - With permission to batch modify items
           - With permission to batch delete items
           - With both; with neither
         - Both menu options should take you to the correct page and the
           list of submitted items should match your selections.
      - Test that clicking the "Clear" button next to "Items selected" hides
        the items selected box and reverts the "Export all" and "Batch
        operations" buttons to their original state.
        - Page through the search results to confirm that no checkboxes are
          checked.
     - Test that your search selections are really persistent:
       - Navigate away from the page, return to item search, and perform
         another search.
         - The "Item selected" box should still show your previous
           selections.
         - Any items you previously selected which are also in this result
           set should have a checked checkbox.
       - Click the "Edit search" button from the item search results page
         and new search with different parameters.
         - The "Items selected" should still show your previous selections.
     - Log out of Koha and back in. When you perform an item search now,
       there should be no "Item selected"
    
     - Go to Patrons and test patron searching. As you make selections the
       "Patrons selected" box should be updated correctly and look correct,
       matching the one on the item search page.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 32e301df15d2eb73d43cb4cdbbb4b5b45bd3e784
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Oct 19 09:17:57 2023 -1000

    Bug 35110: Authorities editor with JS error when only one tab
    
    Exactly like Bug 34251 for biblios :
    When using the an authorities framework with all fields in the same tab, there is thrown a JS error in selectTab( "#tab0XX_panel" );
    This is because no nav tabs are build in authorities/authorities.tt as BIG_LOOP has a length(size) of 1
    
    Test plan :
    1) Edit an authority framework, for example 'Meeting Name', to set all sufields in tab 0
       You may use SQL : UPDATE auth_subfield_structure SET tab=0 WHERE authtypecode='MEETI_NAME'
       Don't forget to restart memcached
    2) Go to 'Authorities'
    3) Click on 'New authority' then 'Meeting Name'
    4) Check you don't see any JavaScript error
    5) Check you can save
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Bug 35110: (follow-up) Fix comment in addbiblio.tt
    
    Change comment in addbiblio.tt since any biblio framework may use only
    one tab.
    Also fixes indenting using 4 spaces.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Edit: squashed because follow-up fixes code introduced by the same
    author.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cd7a8840d54a8db00096e1e9044e600c226935a8
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Oct 10 13:36:45 2023 +0200

    Bug 35000: Fix OPACMandatoryHoldDates feature in opac-reserve
    
    Somewhere (perhaps after bug 29012) this feature has been broken
    somehow.
    The fact that we have two inputs for the date and the active one
    is one level deeper, requires a few adjustments in the jquery
    selectors etc. (Note that two Required lines were visible too.)
    The corrected jquery constructs become a bit complexer now.
    
    Test plan:
    Enable AllowHoldDateInFuture + OPACAllowHoldDateInFuture.
    Set circ rule for book to test with allows item level holds.
    Set OPACMandatoryHoldDates to no hold dates.
    Place hold on a book in OPAC. Check that More options is collapsed.
    (If you force item level holds, it will open.)
    Set OPACMandatoryHoldDates to Hold start date.
    Refresh place hold page. More options is expanded now.
    Click Place hold. You should see an alert and focus goes to start date.
    Set OPACMandatoryHoldDates to Hold end date. Repeat place hold.
    Set OPACMandatoryHoldDates to Both hold dates. Fill one. Place hold.
    Bonus: Place hold on multiple biblios. Repeat former steps.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f4b858778268730d49dc9f11d9d2d9bf6faf3f6e
Author: Emily-Rose Francoeur <emily-rose.francoeur@inLibro.com>
Date:   Tue Oct 10 13:30:43 2023 -0400

    Bug 35019: Add a CSRF token when deleting news
    
    I add a CSRF token as a parameter in the link for deleting a news
    entry, which solves the problem.
    
    TEST PLAN
    1) Apply the patch
    2) Go to "Tools > News > New entry"
    3) "Display location" should be set to "Staff interface"
    4) Fill in the fields
    5) Return to the homepage
    6) Delete the created news entry
    7) The "Additional contents" page is displayed, and the deleted news
       entry no longer appears
    8) Return to the homepage; the news entry no longer displays
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Edit: adapted the template change to latest master inline
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d742f29d77ee1e8a6f825678ce879d4a04037c92
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Thu Oct 19 18:25:51 2023 +0000

    Bug 34954: Fixed typo to 'dateexpiry'
    
    To test:
    
    1. In KTD use grep -rn --exclude=*.po "datexpiry" *
    2. Notice that the four locations below are showing the typo:
        1. git add koha-tmpl/intranet-tmpl/prog/en/modules/tools/import_borrowers.tt
        2. git add misc/release_notes/release_notes_18_05_00.html
        3. git add misc/release_notes/release_notes_18_05_00.md
        4. git add t/db_dependent/Koha/Patrons/Import.t
    3. Apply patch. Repeat step 1.
    4. Notice that no results show. All instances of the typo have been fixed to dateexpiry.
    5. Sign off and have a great day :)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5b1d4b165bb8066a24d1f6f3004a6d95bfa7c3d4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 20 15:54:05 2023 -0300

    Bug 25393: DBRev 23.06.00.044
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5b18fa1fc26e5c20cd7695d607b03bb59adb91e6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 11 14:40:37 2023 +0000

    Bug 25393: (QA follow-up) Tidy
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 448aec3fc902b609659ea4f91bc312757263ab27
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 11 14:00:08 2023 +0000

    Bug 25393: (QA follow-up) simplify auto_renew condition
    
    _CanBookBeAutoRenewed will only ever return 'auto_too_soon' not 'too_soon' so we can do a simple equality check
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d67ab2337308eae7921273f08dbfa94581b59e58
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Oct 11 13:55:42 2023 +0000

    Bug 25393: (QA follow-up) Report 'too_soon' errors from cron
    
    This patchset made it possible for 'too_soon' to be returned instead of 'auto_too_soon' - we just need to take that into account in the error listing
    
    To test:
    1 - Set circ rule to no renewal before 2, no auto renewal before 3
    2 - Checkout 3 items with auto renew, due tomorrow, in 2 days, in 3 days
    3 - perl misc/cronjobs/automatic_renewals.pl -v
    4 - Confirm 1 can be renewed, 1 is too soon, 1 is auto too soon
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fb4a40c34dbc30c06dea8be89f6ca5efaf268d9e
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Aug 17 11:05:20 2023 +0000

    Bug 25393: Update Circulation.t
    
    prove t/db_dependent/Circulation.t
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 758cf9be9b6ab586eb7043a3b322f11e886e13b9
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Aug 16 11:27:06 2023 +0000

    Bug 25393: Tests - Variable renaming
    
    issue_4 is an auto_renew issue, rename to auto_renew_issue
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7d28dd0bdfc7557dce8fc3135bd525c74cfdd4a4
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Aug 16 10:55:16 2023 +0000

    Bug 25393: Update CanBookBeRenewed pod with bug 25758 changes
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6cd5f3b2fc8a6759c4eece974c933308b1662556
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Aug 11 14:20:48 2023 +0000

    Bug 25393: Auto renewals logic reimplementation:
    
    Check if it's too soon for a manual renewal  even if 'Automatic renewals' is enabled
    Allow for a manual renewal even if it's too soon for an automatic renewal
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6d547f65b3c38549991e70a4b3f59b4ba3e5fa0b
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Aug 11 14:16:51 2023 +0000

    Bug 25393: atomicupdate file
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3ddf87aef66957b3930b9c3fafbea16d15c5b580
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Aug 11 13:37:08 2023 +0000

    Bug 25393: Distinguish between auto or normal renewals in GetSoonestRenewDate
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9fabc2f0b805face61730d7b056a243e8bda38c4
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Aug 11 13:35:55 2023 +0000

    Bug 25393: UI adjustments
    
    This updates the information messages that are displayed in Staff, OPAC and SCO
    regarding renewals and if the item is up for automatic renewal or not.
    
    Add issues.auto_renew to svc/checkouts endpoint response
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0e0929c169d965d573172b8a6190323c95924bd1
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Aug 11 13:43:31 2023 +0000

    Bug 25393: Use new noautorenewalbefore circulation rule in _CanBookBeAutoRenewed
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 648d581b655f07d0cca9bbdc0f31480917096702
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Aug 10 15:44:05 2023 +0000

    Bug 25393: Add new noautorenewalbefore circulation rule
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3459a56de5b0da3ca0c4c70f18b36409c28fdc75
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 20 15:13:23 2023 -0300

    Bug 31357: DBRev 23.06.00.043
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cdf18a00154f2ed42ecfe7c171248712985f9453
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jun 29 14:17:09 2023 -0400

    Bug 31357: Separate holds history from intranetreadinghistory
    
    Currently the system preference intranetreadinghistory determines visibility of both circulation history and holds history tabs in the patron record.  It would be helpful to allow the option of setting each of those independently.
    
    Specifically, libraries have requested the option of being able to view the holds history in a patron record without having to enable viewing of the circulation history.
    
    Test Plan:
    1) Apply this patch
    2) Restart all the things!
    3) Run updatadatabase.pl
    4) Verify the new syspref intranetReadingHistoryHolds has the same value
       as the existing syspref intranetreadinghistory
    5) Disable intranetreadinghistory, enable intranetReadingHistoryHolds
    6) Verify you can view a patron's holds history but not reading history
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    JD amended patch:
    * renamed syspref intranetReadingHistoryHolds => IntranetReadingHistoryHolds
    * tidy
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 472e38f9ad695363a74e0ff62c252caacff8fd49
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Sep 22 14:11:23 2023 +0000

    Bug 14092: (QA follow-up) Avoid fiddling with the hash in the template
    
    prove t/db_dependent/Acquisition.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e922ac237c537de08740a01b23f9c5e58933e53a
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Sep 15 17:09:00 2023 +0000

    Bug 14092: Add 'any status' option to acq order search form
    
    Sometimes it's really helpful to see all orders for a basket, a
    vendor or a standing order, including the cancelled ones.
    Currently this is not possible, as we have search options for
    every single status and one for "any except cancelled",
    but no "Any status" option.
    
    This patch adds the "Any status" option. The sometimes
    appearing empty entry is updated to "Any status except cancelled"
    as this is what it does.
    
    Testing data:
    * Requires multiple order lines with different order status
    * Must include at least one order line with status 'cancelled'
    
    To test:
    * Go to acquisitions
    * Open the advanced search page from the top search options:
      Order search > config icon > Advanced search link
    * Verify the status pull down looks as described above
    * Apply patch
    * Verify there is now an "Any status" option in the pull down
    * Try searches for different status, including "Any status"
    * Verify the results are as expected
    * Create a new basket
    * Create an order line by 'From an existing order (copy)'
    * Verify the search form there also works as expected
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bcaaffa838c3276b8590863c826cb133dae03258
Author: Shi Yao Wang <shi-yao.wang@inlibro.com>
Date:   Wed Jul 26 12:58:39 2023 -0400

    Bug 26994: List names in alphabetical order in Suggestion filter
    
    Display list of names in alphabetical order when using the Suggestion information filter in Suggestions management
    
    Test plan:
    1. Add different purchase suggestions from various patron's names
    2. Go to Acquisition > Suggestions
    3. Click on the Suggestion information filters on the left-hand side
    4. Use one of these drop-down menus: "Suggested by" or, "Managed by" or "Accepted by"
    --> notice the list of names in menus, names aren't displayed from A to Z
    5. Apply patch and refresh page
    6. Redo step 4
    --> notice now it's sorted alphabetically
    
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 244bfd7abfdce9d52760dc1be9afe102cb3c5317
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 20 15:08:23 2023 -0300

    Bug 33845: DBRev 23.06.00.042
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit efe239b57eb67d991b223cea82a4350fefe16d9d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Sep 29 13:22:17 2023 +0000

    Bug 33845: Tidy and add update
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4e035ba8ae970ca933df803578bc4cde6af23ccb
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jun 6 12:40:50 2023 +0000

    Bug 33845: (follow-up) Rename config and add a second configuration section
    
    This patch renames the table in the columns configuration to match the id
    used in the templates
    
    It also adds a section for the moremember table to alllow config of each page as we do for issues
    
    Lastly we add the table controls as they exist on the issues tables
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3ed84ea95de52b4d78687d7a8b400056225910e8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 26 12:41:05 2023 +0000

    Bug 33845: (follow-up) escape hold notes for display
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 22685c5abcc5dd7aa8843244ac381029bf8f8b31
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 26 12:23:56 2023 +0000

    Bug 33845: Use table settings and hide note by default
    
    This patch updates the holds table on circulation and moremembers to use
    table settings and hides the note column by default to preserve existing views
    
    To test:
     1 - Apply patch
     2 - Enable system preferece 'OpacHoldNotes'
     3 - Place a hold on the opac and enter a note
     4 - Confirm it shows on the patron's page
     5 - View the patron in staff client
     6 - Ensure the holds note does not display on Holds tab in Checkout or Details view
     7 - Go to Admin->Table settings->Circulation
     8 - Under holds_table confirm 'notes' is hidden by default
     9 - Uncheck the box
    10 - Refresh patron pages and confirm hold note shows
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cb200023a4108b2027040f8f75712c7e0bed1a90
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 26 11:02:51 2023 +0000

    Bug 33845: Display hold notes in OPAC
    
    This patch adds the holds notes to the patron's account holds list
    
    1 - Ensure system preference 'OpacHoldNotes' is enabled
    2 - Place a hold on the OPAC and add a note
    3 - Confirm the note displays on the Summary page Holds tab of 'Your account'
    4 - In staff client, disable system preference 'OpacHoldNotes'
    5 - View Holds on patron's account in opac
    6 - Confirm the note no longer shows
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit baffe97f3e8b1b7db36ca27391310c111e291aef
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 26 10:58:33 2023 +0000

    Bug 33845: Display hold notes in staff client circulation paes
    
    This patch adds the reservenotes column to svc holds, and ensures they display on
    circulation and memeber details
    
    To test:
    1 - Enable system preference 'OpacHoldNotes'
    2 - Place a hold for a ptron via the OPAC
    3 - View the patron in the staff client
    4 - Click on the 'Holds' tab
    5 - Ensure you can see the hold note
    6 - Click on the 'Circulation' tab on the left
    7 - Click the 'Holds' tab and confirm you can view the note
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e1df5918701b27ad5df5063cbdd14cd8201ee131
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Aug 29 16:23:52 2023 +0000

    Bug 15222: Add to cart option/other list options missing from OPAC lists display
    
    This patch adds the option to add titles to the cart or a list from the
    view of a list's contents.
    
    To test you should have at least one public list with titles added.
    Apply the patch and go to the OPAC.
    
    - View a public list.
    - In the toolbar at the top of the table of titles you should see "Add
      to cart" and "Add to list." The controls should be disabled.
    - Check checkboxes for one or more titles on the list.
    - The controls should now be enabled.
    - Clicking the "Add to cart" button should add the selected titles to
      the cart.
    - If you are not logged into the OPAC, clicking the "Add to list" button
      should trigger an alert, "You must be logged in..."
    - Log in to the OPAC and view the list again.
    - Confirm that the "Add to list" control should trigger a popup allowing
      you to add your selected titles to an existing or a new list.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9ea181d407b6524e3fcf4eb67ff91a63ce886cba
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Jun 26 12:00:57 2023 +0000

    Bug 23059: (QA follow-up) Put status strings in a span
    
    No test plan.
    Read the patch.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 69ed355977d94f9abaeab00d394f903ff275c876
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue May 23 12:41:56 2023 +0000

    Bug 23059: reserve_stats.pl: Simplify reservestatus
    
    This patch does the following:
    [1] Go back to four statuses: Cancelled, Filled, Waiting or Placed.
        Placed is used as collective name for all other statuses: pending
        (placed), processing (found==P) or transit (found==T). Placed before
        anyway.
    [2] Allow translation of these statuses in the template. Remove the sub
        reservestatushuman.
    [3] The output of changeifreservestatus is considerably shorter and less
        ugly in the constructed sql statement.
    
    Test plan:
    [1] Use reservestatus as row, as column and only as filter (clicking few
        statuses).
    [2] Verify that the shown statistics meet your expectations.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8f86dcdce24a99d52dae0810e192797097cdd479
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Fri Sep 15 11:51:42 2023 -0400

    Bug 31832: Add reference for EnableItemGroups to EnableItemGroupHolds system preference
    
    This patch adds a note and a link to the EnableItemGroups system
    preference from the description of EnableItemGroupHolds.
    
    To test:
    1. Apply patch
    2. Go to Administration > System preference
    3. Search for EnableItemGroup
    4. Read the description of EnableItemGroupHolds, make sure the grammar
       and spelling are OK.
    5. Click the link, it should bring you to EnableItemGroups
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eaa202f6c6d97f4dc6297299d912a8d3ca2b3487
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 20 15:18:44 2023 +0200

    Bug 30708: Adjust spec for train_item
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 464e548f411c0af10d256491a8a7c314f081baec
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 20 12:17:32 2023 -0300

    Bug 31383: DBRev 23.06.00.041
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5bab527644cf84f0515688f14ec34894ce245beb
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Sep 21 17:40:47 2023 +0100

    Bug 31383: (QA follow-up) Tidy
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9c5d09172d6517939a790429bd39dc0d0eb182f9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 4 13:58:34 2023 +0200

    Bug 31383: Fix dbrevs
    
    We need to remove duplicate entries.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 84368f6d390dcfae26c5d03bcff39dbae9ed4bf2
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jun 22 13:31:10 2023 +0000

    Bug 31383: Fix URLs on staff AC detail view
    
    No real need anymore for showing a Default and Current language link.
    They could be made with the language parameter (not lang), but just
    changing the language allows you to test easily.
    Would you really like to see Default when you added content for all
    enabled languages? You can still add language=default to the URL.
    
    Test plan:
    Test the page URLs. Experiment with changing language in the regular
    way and via URL parameter.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 759db047d2ac72c55b1b4855c25067e0304ec091
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Jun 21 12:38:54 2023 +0000

    Bug 31383: Use one query in search_for_display instead of four
    
    Benchmarking does however not show real performance gain.
    But it might be considered as a code improvement?
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2e773a33c362247a0b763996226df8ca9acd5858
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jun 22 08:41:41 2023 +0000

    Bug 31383: Check lang and use right column in search_for_display
    
    We should check if $lang equals default before looking for translated
    contents.
    And note that @translated_content_id contains additional_content_id
    not id, so cannot be used in the last query.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 772337f5257c3099e36ea4127d0192eb3c167e76
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Jun 21 11:48:27 2023 +0000

    Bug 31383: (QA follow-up) Do not return 0 in ->get
    
    The last statement evaluated is the if( $content->count ).
    If that evaluates to false, the false expression value is returned.
    In this case that is 0.
    We should just return undef or empty list (scalar/list context).
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a072b5305e941e24b5faf1a5a4c79b06846eca02
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 8 10:56:07 2023 +0100

    Bug 31383: Restore updated_on for individual content
    
    Sponsored-by: Rijksmuseum, Netherlands
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8c68dd2c2a21482e95684eeab38cc248c8361741
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 28 20:41:16 2023 +0100

    Bug 31383: DBIC specific
    
    Sponsored-by: Rijksmuseum, Netherlands
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 35ab9f625db698670a52d2027997a41070b09cef
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 28 17:39:40 2023 +0100

    Bug 31383: DBIC changes
    
    Sponsored-by: Rijksmuseum, Netherlands
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aaae30238223b09fce9da4d8c2e4152eeb80c703
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Mar 7 21:38:52 2023 +0100

    Bug 31383: DB changes
    
    Sponsored-by: Rijksmuseum, Netherlands
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 44d1ebece847fa078d50bbee4608008db6a42f07
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Mar 3 12:13:05 2023 +0100

    Bug 31383: Adjust and add tests
    
    Sponsored-by: Rijksmuseum, Netherlands
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f5ac2916f20883252177b2410e15a00bf555b516
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Feb 27 21:47:59 2023 +0100

    Bug 31383: Create a parent-child DB relation for additional content
    
    In the design of additional contents the idea of a parent-child relation is implicitly present. You have a default page and translations.
    But we do this in one table coming from the old news items.
    
    Several reports show that we would be better off creating a parent table listing the main news items, CMS pages or HTML content. And a child table containing the title, content and lang.
    
    Note that this first step is a prelimenary step to clean this area and make it more robust and extensible. More enhancements to come.
    
    What is this patchset doing?
    * DB changes
    - Rename additional_contents.idnew with id
    - Create a new table additional_contents_localizations(id, additional_content_id, title, content, lang) that will contain the translated contents
    - Move the content to this new table
    - Remove title, content and lang columns from additional_contents
    - Replace the notice templates that are using ''<news>" (should only be ISSUESLIP) and remove support for this syntax. Also add a warning in case other occurrences of uses of the old syntax exist.
    
    * CRUD
    - We add a new Koha::AdditionalContentsLocalization[s] couple, and move some logic from Koha::AdditionalContent[s] to there. Note that, to prevent too much drastic changes in notice templates, and to make them easy to use, the different attributes of the content object is accessible from the translated content object (ie. Koha::AdditionalContentsLocatlization->library is available and return $self->additional_content->library). I think it's an elegant way to keep things simple.
    - No changes expected for "NewsLog" logging
    - Little behaviour changes for pages, see tools/page.pl changes. We are now passing the id of the content, and the desired language, instead of the mix of "page_id" or code and lang. Note that here we certainly need to rename "language" query param to not change the full interface language.
    
    Test plan:
    0. Preparation steps, use master
      a. Create notice templates that are using "<< additional_contents.code >>". This won't be replaced, but we want the update process to alert us.
      b. Create several news, additional contents, pages. Some with translated contents, some without.
      c. Make sure ISSUESLIP has the "<news>" section. If you are using the sample data there is nothing to do here
      d. Turn on NewsLogs
    1. Apply the patches, restart_all, updatedatabase
    => Confirm that the new table is created and filled with the contents you had prior to the update
    => Confirm that additional_contents_localizations.updated_on has been kept to the previous values
    => Confirm that ISSUESLIP has been replaced properly
    => Confirm that you get a warning about the additional_contents
    2. Create, update, delete news, html customs, pages
    => Confirm that the additional_contents_localizations.updated_on is only adjusted when required
    => Confirm that the logs are correctly created when NewsLogs is on
    3. Check some items out, generate a slip
    => Confirm that the news are displayed at the bottom of the slip, and that the publication date is correctly formatted
    4. Have several HTML customizations (like OpacNav, opacheader), in translated in different languages
    => Confirm that the default values is displayed when you are using the interface in a language without translation
    => Confirm that the translated version is picked when it exists
    
    Notes for QA:
    * I am not sure we really need the alert during the update DB process about the additional_contents leftover. We should not have them outside of ISSUESLIP.
    Shouldn't it hurt?
    * There is something ugly in sample_news.yml, the id is hardcoded. But how do we prevent that and keep translatability?
    
    Sponsored-by: Rijksmuseum, Netherlands
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 55a30f7c15a2cfbdaafe1a73ca69e72bb7ce3502
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 20 12:16:28 2023 -0300

    Bug 25816: DBRev 23.06.00.040
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 474d6c7462c055c11e58986d837d8087f74562d9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Sep 19 12:10:48 2023 +0000

    Bug 34831: Add input types "tel", "email" and "url" to vendor edit form
    
    This patch updates the vendor edit form so that phone, email, and url
    fields have an input type corresponding to the field's content.
    
    To test, apply the patch and go to Acquisitions.
    
    - Create or edit a vendor.
    - In the form, check that each field looks correct:
      - Company details ->
        - Phone
        - Fax
        - Website
      - Contact details
        - Phone
        - Alternative phone
        - Fax
        - Email
      - Interfaces
        - URI
        - Account email
    
    In a desktop browser the inputs won't display any differently, but if
    you test the patch in a sandbox you can try it in a mobile device
    browser to confirm that the onscreen keyboard changes based on the type
    of input.
    
    Signed-off-by: Émily-Rose Francoeur <emily-rose.francoeur@inLibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0566556cb09cd6c55eccaec4b1c0d94b48cf1c39
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Tue Aug 8 21:17:09 2023 +0000

    Bug 34501: Added Non-public notes to the member purchase suggestion table
    
    Signed-off-by: Lisette Scheer <lisette.scheer@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cd033bfc60f9700d0d52986a95da55a92c88ee01
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jul 21 15:25:00 2023 +0000

    Bug 34171: Use barcodedecode when attaching items to another record
    
    Bug 26351 added barcodecode that transforms scanned barcodes either
    by using itemBarcodeInputFilter  or via a plugin to various pages in
    Koha, including checkout and checkin. But the feature for attaching
    items to a new record was missed.
    
    To test:
    * Add an item with barcode "ab" to any record
    * Set itemBarcodeInputFilter to "Remove spaces from"
    * Search for another record in the catalog
    * Edit > attach item > "a b"
    * The item is not found.
    * Apply patch, restart_all
    * Try again with "a b"
    * Verify that the item is found and attached to the record
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aa771cf3ecb316a7b54de3726c26f7dfe40810de
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Sep 26 20:11:29 2023 +0000

    Bug 34547: (follow-up) add recall cases
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f25fa87198cb28fe78913cc22a29ef79ec6eb464
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Aug 16 21:20:36 2023 +0000

    Bug 34547: Add transfer reason to checkedintable on returns.tt
    
    To test:
    1. Apply patch, restart_all
    2. Check some items out and prepare some reasons that would initiate a branchtransfer. According the schema it can be any of the following: 'Manual', 'StockrotationAdvance', 'StockrotationRepatriation', 'ReturnToHome', 'ReturnToHolding', 'RotatingCollection', 'Reserve', 'LostReserve', 'CancelReserve', 'TransferCancellation', 'Recall', 'RecallCancellation.
    3. CHeck in some the items and notice the 'Transfer reason' column in the table. Make sure the reasons are acurate and make sense.
    4. To go Table settings and find the 'checkedintable'. Make sure you can properly hide the column from the display.
    
    Signed-off-by: AndrewA <andrew.auld@ptfs-europe.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5282a9c4ce2c7c81413e02931fff51cf5836aa95
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 7 16:56:05 2023 +0200

    Bug 33947: Remove GetAllIssues
    
    No more occurrences of GetAllIssues, remove it!
    
    Test plan:
      git grep is your friend
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 31c4ecce6ab0dd4f262f316bc7275d01a0f32b32
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Sep 27 10:47:03 2023 +0000

    Bug 12732: (follow-up) Use data-order instead of data-sort
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bb69f4c3843a0b13a80d17fde992575ead4c81b6
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jul 17 11:39:21 2023 +0000

    Bug 12732: Add basket creation date to late orders table for sorting
    
    This patch modifies the late orders page so that the table of
    information contains a column for basket creation date. This will allow
    administrators to configure the table to sort by default on basket
    creation date if they wish.
    
    To test, apply the patch and restart services.
    
    - Go to Acquisitions -> Late orders.
    - The table of late orders should include a column labeled "Basket date"
      showing the basket creation date.
    - The dates should be formatted correctly and the column should sort
      correctly.
    - Go to Administration -> Table settings and navigate to the settings
      for the lateorders page.
    - Try changing various settings for the table to confirm that everything
      works correctly, including setting the default sort to use the basket
      date column.
    
    Signed-off-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4e3b0d616173022a87c18cd5a164a007f4ae8055
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Sep 12 14:34:55 2023 -0400

    Bug 25816: (QA follow-up) Add system preference
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 71b22b663c8e0d72789b05cc0e90f03ac5e60eec
Author: Matthias Meusburger <matthias.meusburger@biblibre.com>
Date:   Wed Sep 11 11:39:31 2019 +0200

    Bug 25816: Add opac messages in SIP display.
    
    Test plan:
    
     - Add one or more opac messages to a patron
       (patron detail -> add message -> Add a message for: OPAC)
    
     - Check that the messages will be displayed, with correctly formatted dates.
    
    You can use src/C4/SIP/interactive_patron_dump.pl for easier testing.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e8b66cadf2e2e313663544d3978e9c8b1ddeba32
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 17 19:15:24 2023 +0000

    Bug 34014: (follow-up) No need to parse old record before updating
    
    If the old record doesn't parse correctly it will cause a failure - the check is just to ensure we
    are editing an existing biblio, just getting the metadata object should confirm it exists
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Kelly McElligott <kelly@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f7630f5de412b98d562f8df3a22a1786a2367d56
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 17 18:13:32 2023 +0000

    Bug 34014: (follow-up) Tidy
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Kelly McElligott <kelly@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5506a031ed20dd95f77fe165dfc05ab5cd4a4217
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 17 18:06:27 2023 +0000

    Bug 34014: Unit test
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Kelly McElligott <kelly@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8dc2152e2f32b79abfe5f5531ddc225601498116
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Oct 17 17:06:22 2023 +0000

    Bug 34014: Add support for advanced cataloging editor
    
    To test:
    1 - Enable the advanced cataloging editor
    2 - Edit record 369 in the advanced cataloging editor
    3 - On load, get a notice that there were issues and to check logs
    4 - Save record
    5 - Close and reopen in editor
    6 - Confirm warning is gone
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Kelly McElligott <kelly@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 66d519ae41756c38ecc6baef622c30ef596b599c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jun 14 19:05:14 2023 +0000

    Bug 34014: Allow staff to edit degraded records
    
    This patch adds an eval to the call for the record form metadata
    
    If there is an error we catch it, display it, and attempt to strip bad characters from the record
    
    To test:
    1 - In koha testing docker attempt to view record 369 in the staff interface
    2 - You see a warning about degraded view
    3 - Attempt to edit the record
    4 - Internal server error
    5 - Apply patch, restart all
    6 - Reload the editor
    7 - Record successfully loads!
    8 - You have a warning about encoding issues!
    9 - Save the record
    10 - No more warning!
    11 - Edit again, no more warning!
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Kelly McElligott <kelly@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b905bf5d0e6eedd5b952d6b91580458cff0d45fc
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Oct 18 16:25:26 2023 +0000

    Bug 35098: Fix display of clickable batch name in ILL table
    
    Test plan, k-t-d:
    1) Install FreeForm and enable ILLmodule, run:
    bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev.sh)
    2) Install an ILL availability plugin (e.g. pubmed):
    https://github.com/PTFS-Europe/koha-plugin-api-pubmed/releases/tag/1.1.1
    3) restart plack:
    koha-plack --restart kohadev
    4) Create a new ILL batch, visit:
    /cgi-bin/koha/ill/ill-requests.pl
    5) Click '+New ILL requests batch'
    6) Input a name, '42' on the cardnumber and pick a library. Click 'Continue'.
    7) On the identifiers textarea, insert '123' and click 'Process identifiers'
    8) After the metadata has been retrieved, click the bottom 'Add items to batch' button, click 'Finish and view batch'
    10) Go back to ILL requests table, visit:
    /cgi-bin/koha/ill/ill-requests.pl
    11) On the top right of the table, click 'Columns' and enable Batch
    12) Notice the batch column now shows correctly and is clickable
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5797f5095ecb9fc1eab3fe129eab83c048cc422b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Oct 5 09:56:30 2023 +0000

    Bug 34990: Add persistent header when sending msg to RabbitMQ
    
    Test plan:
    NOTE: It is very hard to add a Koha unit test for adding this
    single header when communicating to RabbitMQ via Stomp plugin.
    When we would mock the send, we are only testing if perl can
    pass a hashref to a subroutine ;)
    
    Do NOT yet apply this patch.
    Make sure that RabbitMQ runs.
    Stop the koha-worker for long_tasks:
      koha-worker --stop --queue long_tasks myclone
    Stage a MARC file.
    Check queues with rabbitmqctl list_queues.
    Look for: koha_myclone-long_tasks 1  (at least 1)
    Stop rabbitmq (something like /etc/init.d/rabbitmq-server stop)
    Start rabbitmq (/etc/init.d/rabbitmq-server start)
    Check queue again with with rabbitmqctl list_queues.
    Look for: koha_myclone-long_tasks 0
    Your messages have been gone.
    
    Now apply this patch.
    Reiterate the former steps. But note that you will still see
    a non-empty queue in the last step:
    koha_myclone-long_tasks 1 (at least 1)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 709dabb7e8c6285d5c93ece3baed845123cd3a8e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Oct 18 13:58:17 2023 +0000

    Bug 32305: Counterpart for es_indexer_daemon.pl
    
    This is a kind of copy-and-paste variant of background worker.
    We probably could do better than having two scripts here ;)
    
    Test plan:
    See former test plan. Apply it to ES indexing.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] Removed queue from query at MQ side. Discussed on IRC.
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f1edd8fe77897c0f293f3d11ac20fd9ddb8bde8f
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Oct 17 14:43:32 2023 +0000

    Bug 32305: Worker should ignore wrong status or queue in MQ mode
    
    MQ mode: The worker has seen that MQ is running and consumes messages
    instead of polling db only.
    
    Test plan:
    Stop worker for long tasks.
    Make sure that Rabbit MQ runs.
    Stage a file. (This adds a long task.)
    Goto staff view of jobs and cancel this job.
    Check if job is still in MQ with rabbitmqctl list_queues.
    Now start worker for long tasks.
    Check if job is gone in MQ with rabbitmqctl list_queues.
    And check logfile for the adjusted warning like:
      [WARN] Job 5 not found, or has wrong status/queue main:: /usr/share/koha/misc/workers/background_jobs_worker.pl (134)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] Removed queue from query at MQ side. Discussed on IRC.
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 82e0edd87606ce05511b33ddeeea10f2b9e68f3d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 17 09:07:28 2023 -0300

    Bug 35053: Make sure request is checked as an item-level request if item_id passed
    
    This patch makes the validation code have the `$item` variable defined
    when checking holdability, in the case both `item_id` and `biblio_id`
    params are passed.
    
    Otherwise, if the requested item is not holdable, but a biblio-level
    hold *could* be placed, the item-level hold is placed.
    
    This is highlighted by the regression tests.
    
    To test:
    1. Apply the regression tests patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/holds.t
    => FAIL: Tests don't pass. A request that should be rejected is allowed
    because biblio-level hold is allowed.
    3. Apply this patch
    4. Repeat 2
    => SUCCESS: Tests pass! Item-level rules are checked and thus the
    request rejected (code 403)
    5. Sign off :-D
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 683b74d202d57f4c3fdad62d81b92bf49f7d1fc4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 17 09:03:33 2023 -0300

    Bug 35053: Regression tests
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bd30e81f126020e79663b4030326fc7ad1932108
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 17 17:43:45 2023 +0000

    Bug 35081: Make it possible to translate catalog concern status messages
    
    The JavaScript in both OPAC and staff interface for submitting catalog
    concerns contains English strings which are not properly wrapped with
    the __() function to allow for translation. This patch fixes both
    affected files.
    
    The patch also modifies the dialog classes used in the staff interface
    so that the messages are styled consistently.
    
    To test, apply the patch and update a translation, e.g. fr-FR:
       - perl misc/translator/translate update fr-FR
    - Edit the updated po file for the language you chose, e.g.
      misc/translator/po/fr-FR-messages-js.po, to fill in translated
      strings for the two catalog concern entries. For example:
    
      koha-tmpl/intranet-tmpl/prog/js/modals/add_catalog_concern.js:38
      koha-tmpl/opac-tmpl/bootstrap/js/modals/catalog_concern.js:55
      msgid "Your concern was sucessfully submitted."
      msgstr ""
    
    - Install the updated po file:
       - perl misc/translator/translate install fr-FR
    - Enable the translation if necessary under Administration -> System
      preferences -> language.
    - Enable the "opaclanguagesdisplay" preference if necessary.
    - Enable the " CatalogConcerns" preference if necessary.
    - Locate a bibliographic record in the staff interface and view the
      detail page
      - From the toolbar, choose New -> New catalog concern.
      - Test submitting the form. When the form is submitted a message
        should display on the page: "Your concern was sucessfully submitted"
    
    - Perform the same test in the OPAC, where the "Report a concern" link
      is in the right-hand sidebar menu of the bibliographic detail page.
    
    - Perform the same tests, in both OPAC and staff interface, in your
      translated language to confirm that the translations show up
      correctly.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eec5d7e4be7d092f07e47468c50a4ec48b842dc1
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Oct 18 20:31:32 2023 +0000

    Bug 35101: Stop screen from jumping back to top when using barcode.pl plugin
    
    To test:
    1. Set 'autoBarcode' to something other than 'don't generate automatically'
    2. If the a framwwork make sure some 952 fields have the barcode.pl plugin enabled
    3. Add a new item and click the '...' next to the 952 field with the barcode.pl plugin enabled.
    4. The screen jumps back to the top, annoying.
    5. Apply patch
    6. Try again, it should not jump anymore!
    
    Signed-off-by: Barbara Johnson <barbara.johnson@swbell.net>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f50d2c7d0edcf5024f05d81d5919f5848d939a36
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 20 14:38:37 2023 +0200

    Bug 35099: (bug 26314 follow-up) Fix detail view for records with invalid MARCXML
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b28f7ad0e62097386d44efb945f652ba8f4001d4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 20 10:00:54 2023 -0300

    Bug 30708: Last spec fixes
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a7237dde72a379b47d3ebcde20e80ed1bcd7ab30
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 20 14:15:33 2023 +0200

    Bug 30708: Fix API specs
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fbb05f1487c9808a0c1cef50edc1a0c1cee6ebfa
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 20 08:48:46 2023 -0300

    Bug 30708: Add missing koha_object(s)_class definitions
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1ee763b7099473e011e739f70905c0a0762512b2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 20 08:43:45 2023 -0300

    Bug 30708: Some spec fixes
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f19531d908101cdd2ef36859b33d6666f48b2262
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Oct 20 08:33:34 2023 -0300

    Bug 30708: Add 'preservation' to Makefile.PL
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5db28348ea219dff070acc221f151ff8719d77ba
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Oct 9 21:29:13 2023 +0000

    Bug 34300: (QA follow-up) Add permission check and fix missing table cells
    
    * Changes text from "Place a hold on order" to the more common "Place hold"
    * Adds permission check on reserveforothers.
    * We were missing table cells in the footer rows of the table.
    
    I would have liked to hide the column for someone missing permissions,
    but I failed to get the datatable configuration right with the export
    and column configuration settings.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 01602b59d5d6916f80483d49c55f1ef632e3bb1b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 19 15:38:32 2023 -0300

    Bug 32721: DBRev 23.06.00.039
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d822253071d850777e03cae9bcfe055a6a946e7b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 19 15:36:59 2023 -0300

    Bug 32721: Atomic update fixes
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 96cac12e1d637ff734f7a67b68158b9c25cbca78
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 19 15:13:20 2023 -0300

    Bug 32721: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c48421e6ffb993c22387337107e6ce2a5df91701
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri May 5 14:43:01 2023 +0100

    Bug 32721: (QA follow-up) Drop fields from API response
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Bug 32721: (QA follow-up) Rename fields to opac*
    
    This patch updates the field names to reflect that they're OPAC
    related.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Bug 32721: (QA follow-up) Fix rebase errors
    
    We let some superflous template params creep back in during a rebase
    somewhere.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a96761bd51b2bd8a3a102a0bf0a22097fd1aa5bd
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri May 5 11:05:04 2023 +0000

    Bug 32721: (QA follow-up) Add exec flag to DB update and expand tests
    
    Added tests for case of no branch specific settings and when no branch passed
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e75461d6f06ffbac11f6bf76bede569bf4df849c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri May 5 08:35:21 2023 +0100

    Bug 32721: Highlight the branch specific option from the global syspref
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6deab09c1317f202252afee99d06af5cdb533af0
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Jan 27 14:46:44 2023 +0000

    Bug 32721: (QA follow up) - fix QA issues
    
    This patches addresses issues raised by the QA tests. It also adds a missed import of the Branches file in the document head
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Bug 32721: (QA follow-up) Add missing imports
    
    Missing imports added in three template files
    Exec flag added to atomic update file
    Tinymce imports removed
    
    A new bug will be created to move codemirror into an inc file at latest
    version
    
    Test plan as before
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Bug 32721: Tidy up - duplicate fetching of userjs and css
    
    Currently UserJS and UserCSS is injected into the template as a parameter through Auth.pm but is then fetched using Koha.Preference() in the template. This patch tidies this up by removing the parameters from Auth.pm
    
    Test plan as per first commit
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dd3d59f1f87a12b8d335e48ced08c9fd3f09bf65
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Jan 27 12:59:10 2023 +0000

    Bug 32721: Add unit tests
    
    Unit tests to test two new functions: GetBranchSpecificJS and GetBranchSpecificCSS
    
    Test plan:
    1) In the shell run prove -t t/db_dependent/Template/Plugin/Branches.t
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6eea26c7296e0276b9c3beb6b28e31a9eda9a9d2
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Jan 27 12:55:17 2023 +0000

    Bug 32721: Database update to add userjs and usercss to branches table
    
    This patch adds the columns for userjs and usercss to the branches table
    
    Test plan as per previous commit
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 82e2547e1b5d9d056d7aac88e02db948cbe3c1a5
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Jan 27 12:34:39 2023 +0000

    Bug 32721: Add branch specific userjs and usercss
    
    This patch allows for branch specific userJS and userCSS to be added through the libraries table. This works in conjunction with the global UserJS and UserCSS functionality and allows for multiple OPACs with different css and js options.
    
    Test plan:
    1) Add to apache conf (/etc/apache2/sites-available/kohadev.conf)
        SetEnv OPAC_BRANCH_DEFAULT "FFL"
        RequestHeader add X-Koha-SetEnv "OPAC_BRANCH_DEFAULT FFL"
    2) In the container, run restart_all
    3) Navigate to the OPACUserJS and OPACUserCSS system preferences and add the following: OPACUserJS - console.log('Hello from global sysprefs');, OPACUserCSS - 'body { background-color: black; }'
    4) Refresh the OPAC and the background should be black and the message should be logged to the console in developer tools
    5) Navigate to Administration > Libraries
    6) On the Fairfield branch (if this does not exist you will need to create a branch with a code matching the code that you added to the apache conf file), click edit
    7) At the bottom there should be two fields to add userjs and usercss, complete with Codemirror syntax checking
    8) In userjs add console.log('Hello from branch level'); and in usercss add 'body { background-color: blue; } then save
    9) Return to the OPAC and refresh
    10) If you are logged out of the OPAC it should now be logging both the message from global and from the branch level and the background should be blue (if not you will need to log out)
    11) Log back into the OPAC using a user that DOES NOT have a default branch matching the branch you added to the Apache conf
    12) The OPAC should now revert to only showing the global message in the console with a black background
    
    Sponsored-by: PTFS Europe
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7e23abcccb4868637d542147f25e6ca437ec5622
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Oct 16 19:37:41 2023 +0000

    Bug 34531: Fix template logic to not hide patron restrictions
    
    To test:
    1. From BorrowerUnwantedFields Hide Gone no address flag (gonenoaddress) and Lost card flag (lost).
    2. Got to memberentrygen.tt and see that Patron restrictions is now hidden
    3. Apply patch, now the Patron restrictions field should not be hidden.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dc9f6f09d8d6869a41e80a496b58038c246ad6cf
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 17 13:51:49 2023 +0000

    Bug 35078: Remove invalid HTML from OpacShowSavings system preference
    
    The options defined for the OpacShowSavings system preference contain
    HTML: "on patron's checkout history page (the system preference
    <em>opacreadinghistory</em> must be enabled)". This text ends up in an
    <option> tag, and even though the form is rendered using the
    multiple-select plugin the HTML still won't render and should
    be removed.
    
    To test, apply the patch and restart all.
    
    - Go to Administration -> System preferences and search for
      "OpacShowSavings"
    - Check the dropdown of options on the preference. The system
      preference names referred to should now be single-quoted instead of
      wrapped in visible <em> tags.
    - Confirm that the preference still works correctly.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 540626ef1510f9cae567efe646bb72f520cfbf2e
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Oct 19 10:42:48 2023 +0000

    Bug 35105: Fix patron accessor in Illrequest.pm
    
    Patron is nullable, so we need to consider undef return
    
    Test plan, k-t-d:
    1) Install FreeForm and enable ILLmodule, run:
    bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev.sh)
    2) Visit /cgi-bin/koha/ill/ill-requests.pl
    3) Create 'New ILL request'
    4) Select the request type, input cardnumber '42' and select a library
    5) Hit 'Create'
    6) Manage the request created just now: click the request id or 'manage request' button from the table
    7) Click "Edit request" from the top actions toolbar
    8a) Input text in Patron ID e.g. 'asdasdasf'. Notice you get redirected to the table - now renders correctly.
    8b) Input a patron id that doesn't exist e.g. '987654'. Notice you get an error upon saving "FK Constraint error",
    go back to the table and verify it renders correctly.
    
    In both instances, the request is saved with borrowernumber as NULL,
    this was preventing the table from rendering because the 'patron' API
    embed was trying to retrieve a patron - getting an empty resultset instead
    of undef.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c91e02a4d6b7ec75137fcd1fe17f1acf6d3b3236
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Oct 19 15:05:59 2023 -0300

    Bug 35105: Regression tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5da1c562a08aaea74985e08e71b4ae4972b3cf54
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Oct 18 16:11:48 2023 +0000

    Bug 35096: Fix batch accessor in ILL request page
    
    Test plan, k-t-d:
    1) Install FreeForm and enable ILLmodule, run:
    bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev.sh)
    2) Install an ILL availability plugin (e.g. pubmed):
    https://github.com/PTFS-Europe/koha-plugin-api-pubmed/releases/tag/1.1.1
    3) restart plack:
    koha-plack --restart kohadev
    4) Create a new ILL batch, visit:
    /cgi-bin/koha/ill/ill-requests.pl
    5) Click '+New ILL requests batch'
    6) Input a name, '42' on the cardnumber and pick a library. Click 'Continue'.
    7) On the identifiers textarea, insert '123' and click 'Process identifiers'
    8) After the metadata has been retrieved, click the bottom 'Add items to batch' button, click 'Finish and view batch'
    9) You should now be seeing 'View ILL requests for batch <batch_name>' with the request you just added.
    10) Click the request id (or the 'Manage request' button)
    11) Notice you can view the request correctly, the batch it belongs to shows correctly and is clickable
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 44c16df625a61b0bc66d683f4aa3f831bd251f52
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Oct 18 15:40:17 2023 +0000

    Bug 35094: Update batch to ill_batch accessor in .tt file
    
    Test plan:
    1) Install FreeForm and enable ILLmodule, run:
    bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev.sh)
    2) Visit /cgi-bin/koha/ill/ill-requests.pl
    3) Create 'New ILL request'
    4) Select the request type, input cardnumber '42' and select a library
    5) Hit 'Create'
    6) Notice the request now creates successfully
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a2c5ac52ad4f9136dac2845998d42bac4334a57d
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Oct 18 15:30:50 2023 +0000

    Bug 35093: Update batch to ill_batch embed
    
    Test plan:
    
    Install FreeForm and enable ILLmodule, run:
    bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev.sh)
    
    Visit /cgi-bin/koha/ill/ill-requests.pl
    
    Notice the table now renders correctly
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 312ecca51f2928e3d86e4b5625eb08886c827fa3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 11 11:35:41 2023 +0200

    Bug 35024: Do not wrap translations
    
    PO files wrap differently depending on versions.
    
    Looks like (thanks Julian!) it's coming from libunistring, between 0.9.10 and 1.0 I am seeing a change in how the strings in the PO files are wrapped.
    
    Debian 11 (using libunistring 0.9):
    "%s %sPrintemps%s %s %sÉté%s %s %sAutomne%s %s %sHiver%s %s %sPrtps%s %s %sÉté"
    "%s %s %sAut%s %s %sHiv%s %s %s %s"
    
    Debian 12, Ubuntu 22.04(using libunistring 1.0)
    "%s %sPrintemps%s %s %sÉté%s %s %sAutomne%s %s %sHiver%s %s %sPrtps%s %s "
    "%sÉté%s %s %sAut%s %s %sHiv%s %s %s %s"
    
    It *could* come from this changes:
    https://git.savannah.gnu.org/gitweb/?p=libunistring.git;a=blob;f=NEWS;h=5a43ddd7011d62a952733f6c0b7ad52aa4f385c7;hb=HEAD
       * The functions u*_possible_linebreaks and u*_width_linebreaks now make it
         easier to work with strings that contain CR-LF sequences: In this case,
         in the returned array, it will return UC_BREAK_CR_BEFORE_LF followed by
         UC_BREAK_MANDATORY (instead of twice UC_BREAK_MANDATORY).
    
    The command used is:
    % msgmerge --backup=off --quiet -F --update misc/translator/po/fr-FR-staff-prog.po misc/translator/Koha-staff-prog.pot
    
    No matter the value of --width.
    
    One solution is to use --no-wrap, and never wrap :)
    
    I sent an email to the list about this suggestion https://lists.katipo.co.nz/pipermail/koha/2023-October/060143.html
    
    Test plan:
    % gulp po:update --lang LANG
    
    And notice that the lines are no wrapped anymore.
    
    Note that in master there were already not wrapped (?)
    commit edd378f4d14d79107d662b053c8e6f750326dd23
    Translation updates for Koha 23.05.00
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b680695142cc4b1b7bfc95e6786f88118676214d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Sep 19 13:37:20 2023 +0000

    Bug 34392: Run automated Stylelint fixes on staff CSS
    
    This patch corrects errors raised by the new stylelint configuration in
    staff-global.scss. Many of the fixes were made automatically by using
    the "--fix" option:
    
    npx stylelint koha-tmpl/intranet-tmpl/prog/css/src/staff-global.scss
    --fix
    
    Some examples of errors found:
    
        - Expected single space after ":"
        - Expected single space after "("
        - Expected single space before ")"
        - Expected empty line before comment
        - Expected no more than 1 empty line
        - Expected a trailing semicolon
    
    Manual fixes include replacing named colors with hex codes, combining
    duplicate selectors, removing empty blocks, etc.
    
    Some warnings remain: "Unexpected !important" requires more than a
    quick fix, if we should choose to address them.
    
    To test, apply the patch and rebuild the staff interface CSS:
    https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_client
    
    The changes affect CSS all around the staff interface, but there should
    be no visible results of the patch. Everything should look correct.
    
    The stylelint check should return only warnings about "!important"
    
    npx stylelint koha-tmpl/intranet-tmpl/prog/css/src/staff-global.scss
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 09459e3dd5e428e4c4ed00b6e784cab8cbebbab1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 16 13:30:15 2023 +0000

    Bug 35057: Improve tag description labels in biblio and authority framework editing
    
    This patch updates several templates in order to clarify labels in forms
    and on table columns.
    
    To test apply the patch and go to Administration -> Authority types ->
    MARC structure.
    
    - The second column should now be labeled "Tag description."
    - Click "Edit" on one of the tags.
    - The description fields should now be labeled "Description in staff
      interface" and "Description in OPAC."
    - Return to the list of tags and choose Actions -> Subfields for one of
      the tags. The second column should read "Description."
      - Click "Edit" on one of the subfields.
        - The description fields should now be labeled "Description in staff
          interface" and "Description in OPAC."
    
    Go to Administration -> MARC bibliographic framework -> MARC structure.
    
    - The second column should now be labeled "Tag description."
    - Click "Edit" on one of the tags.
    - The description fields should now be labeled "Description in staff
      interface" and "Description in OPAC."
    - Return to the list of tags and choose Actions -> Subfields for one of
      the tags. The second column should read "Description."
      - Click "Edit" on one of the subfields.
        - The description fields should now be labeled "Description in staff
          interface" and "Description in OPAC."
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>

commit 81c25dc0be7cb8f2e50b65b17d6c17b51dfda1cc
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 18 11:50:56 2023 -0300

    Bug 30708: Tidy perl files
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2817639d54590c240ac63c441a7a90421262c147
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 18 11:45:12 2023 -0300

    Bug 30708: DBRev 23.06.00.038
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5194cd32646064ea38fd6de882665b6d6f2993de
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 6 12:45:19 2023 +0200

    Bug 30708: Remove c->validation in API controllers
    
    Fixed conflict with bug 33556
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cf348a1a9ba47a6639e2b7325274ea698b2df6d3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 6 12:41:56 2023 +0200

    Bug 30708: Fix conflict with 34055 and 34219
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0f13508c1d729cabdae0be22297b0e20f2bddc7e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 6 10:56:05 2023 +0200

    Bug 30708: Pass csrf_token to the Vue app
    
    It's needed since bug 34369 to POST to the syspref route
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7146ce1e928dd19641e7a5a9d4cc4feb7ef5ce28
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 31 18:19:49 2023 +0200

    Bug 30708: Do not allow non-authorised users to edit the settings
    
    In case the logged in user does not have manage_sysprefs we should no
    display the form in the settings.
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f5c581b0adc4fefeae19f8fe87bc8fddb9e356c3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 31 17:51:28 2023 +0200

    Bug 30708: Rebase - Use a dedicated 'config' endpoint
    
    To retrieve the sysprefs, instead of using the svc script. See bug
    33606.
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9de59655bf14cf70f5abf9b20bbfed9953293b16
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 6 12:54:52 2023 +0200

    Bug 30708: Rebase - Adjust breadcrumbs
    
    To match what has been done on bug 33169 and bug 34418.
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9acd9ed3c824fb7f1b52b7d33b32339f1469e062
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 6 11:27:50 2023 +0200

    Bug 30708: Rebase - Use name instead of url for router-links
    
    Adjust code to match changes done by bug 32932.
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 638da2dea8e2c1dcc176f6f0ec5cbd4abdbaa2e2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 6 10:01:31 2023 +0200

    Bug 30708: Rebase - Rewrite toolbar
    
    Bug 33417 has changed how we handle the toolbars in Vue apps, this patch
    is adjusting the 'Preservation' module code on top of it, but also adds
    to make it more flexible (see bug 34215).
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f4083a6f5c4e8bffdf081bdffa70afe3cbd5f4a5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 6 10:43:05 2023 +0200

    Bug 30708: (bugfix) Redirect to train list view after the train is deleted
    
    Do not stay on the show train view.
    
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d2884a3a8dfbdb0ff8009b43b1b5873ad857341a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 6 17:44:03 2023 +0200

    Bug 30708: Remove q_header from specs
    
    It broke the REST API routes.
    Adjustement for bug 33971.
    
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d1c31da24d9100a8e00d2f4d8cae6b37bae496bc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 19 11:36:21 2023 +0200

    Bug 30708: Fix Trains.ts tests
    
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dec235fc5579e4832524f13b56e65c9de4fc13ba
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 16 14:19:48 2023 +0200

    Bug 30708: Deal with deleted authorised value categories
    
    If a AV category is renamed or deleted, the app will freeze with
    "TypeError: av_match is undefined"
    
    To prevent that we add an check to prevent the freeze and a warning in
    the settings.
    
    We could eventually add a FK on option_source, but the idea was to let
    it flexible in case we want to add another source.
    
    This bug can be considered a configuration error anyway.
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aad36a8a61364b493002c3723ff11c3b070d919c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 9 17:14:16 2023 +0200

    Bug 30708: Add missing action buttons for non-table view
    
    If items with different processings are in a train, there is only the "edit" action button.
    It's missing "Remove" and "Copy".
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a68a4a84726420fdf4ffff700dca50e55524eeaa
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 9 17:00:26 2023 +0200

    Bug 30708: Add a default sort for trains
    
    We want opened, closed, sent, then finally received trains.
    But ordering by desc for opened, and asc for the others.
    Which means the last opened will be first, but the closed, send and received will display oldest first.
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 637ac75f9571a2c4bb928031f7795ca5f0393adf
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jun 6 15:36:52 2023 +0200

    Bug 30708: Prevent dropdown list to be hidden behind the modal
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ff9c9aaa260297ed245079e82ebccc271539edf6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jun 6 15:16:17 2023 +0200

    Bug 30708: Add spacing for buttons
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5dae3d5965fd7751f050df463ff210c7a436f252
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jun 6 15:14:36 2023 +0200

    Bug 30708: Display AV descriptions instead of codes
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3e6c15f6315ea81f0eb640d4406bc9c3059ad0e4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 25 12:12:01 2023 +0200

    Bug 30708: Set default values for items added in batch to a train
    
    Technical notes: Ideally we would have split TrainsFormAddItem to make some part
    reusable, but it turned out into a complicated component that would have
    been hard to maintain. It seems easier to have two different components.
    Ideas to improve this area are welcome!
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d929ef8951948189c76170b992d3d3eccda9b27d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Apr 24 15:19:37 2023 +0200

    Bug 30708: Allow modifying attribute linked with AV to another value
    
    If a value is not in the AV list, or if it differs slightly, they would
    like to force the modification of the value, without creating a new
    authorised value.
    
    Note that this could be a candidate for an option at the attribute
    level if there are different needs (ie. for some attributes we don't
    want to allow an other value).
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e3c875d74ae7b790458023040683806edc756768
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Apr 24 20:38:28 2023 +0200

    Bug 30708: DBIC
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1030e04e8c5204c324adda7c7cfdcdfc85f0f85e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Apr 24 15:30:31 2023 +0200

    Bug 30708: Allow attributes to be multivalued
    
    This is not working as it, but we are going to fix the problem when
    working on the "Set default values for items added in batch to a train"
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7b6aea44110c37dd48bb715bf3fd280164ba07c0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Feb 2 14:36:56 2023 +0100

    Bug 30708: DBIC specific
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c984f42c94c621079d367e8363298cd8e74602d1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Apr 17 20:48:16 2023 +0200

    Bug 30708: DBIC schema changes
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4aff88aa134e10ed945df311ebe2e1a1523aaf59
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 7 12:34:10 2023 +0200

    Bug 30708: Do not allow adding new items to a closed train
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3970889e71a83489d85fcdfddee018567a136e9d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 7 12:07:29 2023 +0200

    Bug 30708: Do not allow copy item to a train if the item already exists in a non-received train
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2c61a7af9567792eb0c7b27f1e0ab275ae7a2809
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 7 11:35:06 2023 +0200

    Bug 30708: Do not allow deletion of processings that are used
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eae94108e7ef8ca91deadb881f0722e360be2b7f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 6 17:00:21 2023 +0200

    Bug 30708: Duplicate/copy items to an opened train
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4819f89b43c3525aa97d23bf69a995f50773fbf5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 6 16:23:41 2023 +0200

    Bug 30708: Show the copy button right after the train is received
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2f1b35ea56f01d05ba187fc8385ab883490c3ad9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 6 15:57:35 2023 +0200

    Bug 30708: Keep item attributes when editing a new processing
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c40e1899a0cafac7404b7d4204533c09edc20b64
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 6 15:05:20 2023 +0200

    Bug 30708: Do not allow edition of 'status for item added to train'
    
    It does not seem useful to enforce it at lower level, it is not a
    condition that will break the feature, but it does not feel correct to
    allow the modification of this value
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f7e6d2f1bd8642258c7f7be452e5c7fef74b6185
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Apr 6 14:50:42 2023 +0200

    Bug 30708: Add user_train_item_id
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8bbe2eac8ef05b2682ce7ad2f4216734fc6ac2a6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 7 14:51:50 2023 +0200

    Bug 30708: Koha controller script and template changes
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cf90b426d1c8d48b18479608a1f0006f6438c663
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 7 14:51:09 2023 +0200

    Bug 30708: Add apache RewriteRule
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fd170b6ab7cf20cf99c9168b3934aab465d90c61
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 7 14:50:43 2023 +0200

    Bug 30708: DB changes
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a639ec291f888f43ed1a76f1dbc35ba241d0dc35
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 7 14:50:11 2023 +0200

    Bug 30708: Vue app
    
    This commit contains the main commit message
    
    The description of the original need is described in documents attached by the sponsor on the bug report specifically "[En] Preservation module - Main principles".
    The idea is to develop a whole new module to track the status of the documents that are sent for processings/treatments in order to preserve them (eg. covering).
    
    This is a first step, more are certainly coming later.
    
    The author and sponsors have worked for several months before providing this MVP version. The different discussion and needs can be found at https://tree.taiga.io/project/joubu-koha-preservation-module/kanban
    Some ideas of the next steps are also listed.
    
    The first iterations have been done using the classic .pl/.tt Koha style but we finally switched to a new Vue module, for more fun.
    
    These patches made the following main changes:
    New files
    * Koha objects under Koha/Preservation
    * REST API controllers under Koha/REST/V1/Preservation
    * preservation/home.pl and preservation/home.tt
    * Vue components under js/vue/components/Preservation
    * tests under t/db_dependent/Koha/Preservation and t/db_dependent/api/v1/preservation_*
    * Cypress tests under t/cypress/integration/Preservation
    DB:
    * 3 new sysprefs PreservationModule, PreservationNotForLoanWaitingListIn, PreservationNotForLoanDefaultTrainIn
    * 1 new permission "preservation" (will be split into subpermissions later)
    * 5 new tables:
    - preservation_processings
    - preservation_trains
    - preservation_processing_attributes
    - preservation_trains_items
    - preservation_processing_attributes_items
    
    Terminology and workflow:
    *Processings* are the different treatments an item can receive during its stay in the preservation module
    A *processing* is defined by a list of *attributes*. To make the module as easy to use for the librarians in charge of the preservation area a list of processings will be defined when the module will be set up. An *attribute* is a name and a value. That's it. However it also has a type, to define what the value is coming from: *free text*, *authorised value* or *database column*.
    For instance if you are defining a processing that will handling the book cover you could have 3 *attributes*:
    - first named "Barcode" that will be automatically filled with "items.barcode" (type *database column*"
    - second attribute named "color" linked with a new PRES_COLOR authorised value category you would have previously defined with "red", "blue", "green", etc. (type *authorised value*)
    - third attribute named "notes", because librarians like notes (type *free text*)
    Important: Even if the attribute is linked with a DB column or AV category, the value will be automatically pre filled but will stay editable (could be a config option to restrict the edition, later, if needed).
    
    The *status* of an item will change during the preservation process. First it will arrive in the preservation area and be on a *waiting list*. It is not processed already but is not available anymore for the patrons of the library. That's why we are going to use the "not for loan" (items.notforloan) value for this. This *waiting list* is a fictional concept, it simply lists all the items in the library with a specific *status*.
    A *train* is... how they call that at the BULAC, a train (same in French!). And we quite like the word so we kept it. It is what it is: a list of items/waggons, one after each other. We could have picked "cart", "list", but the concepts were already used in different places. We are not strongly attached to the term and it can be modified (but it's spread all over the code already and will be tedious to modify!) if you have a very good suggestion :)
    So, a *train* is where items are going after they have been sent to the waiting list. It's a stack of items that will be sent to a provider. When you create a new train you will be asked for the "Status for item added to this train", that will be the "not for loan" value to set to the items added to this train, and a "Default processing" that will be the processing used. But keep in mind that a train can have items that have different processings (specific case, will see later).
    When all items have been added to a *train*, you can *close* it. You cannot add items anymore to it! Then you can *send* it, and finally *receive* it. They are just statuses to keep track of the dates, and filter trains by status.
    However when a train is received you can *copy* an item to another (opened) train. It means that you have the item on hand but something went wrong, you are not happy with the work done by the supplier and want to send it back, so you create a new train (that can have different items, and it is the case where you will have items in a train that don't all have the same processing!).
    
    Test plan:
    A. Prerequisites
    0. Just `reset_all` and jump to B, or:
    1. Apache configuration
    You will need to edit /etc/koha/apache-shared-intranet-git.conf and add the following lines after the RewriteRule for erm (line.24?)
    RewriteCond %{REQUEST_URI} !^/cgi-bin/koha/preservation/.*.pl$
    RewriteRule ^/cgi-bin/koha/preservation/.*$ /cgi-bin/koha/preservation/home.pl [PT]
    The RewriteCond is only useful if you are testing the "print slips" bugs as well, but it cannot hurt to have it!
    2. `yarn js:build` to regenerate the Vue app for the preservation module
    3. `updatedatabase`
    4. `restart_all`
    B. Settings
    0.
    Create 2 different values for NOTLOAN, eg. 'In preservation' and 'In preservation external'
    Create different authorised values for a new category, eg. PRES_COLORS: RED, BLUE, GREEN. Feel free to create more categories.
    1. You can turn on the "PreservationModule" syspref and go to the Koha homepage to see a new "Preservation" link
    2. You landed on the empty home page of the preservation, no worry! We need to fill this page with useful information! (see #2 on the kanban)
    3. Go to settings
    4. Set "Status for item added to waiting list" to "In preservation"
    and "Default status for item added to train": "In preservation external"
    Create a new processing and define some attributes. Ideally at least one of each type.
    5. Go to "Waiting list" and add some items
    6. Go to "Trains" and create several trains (at least 2). Notice that the "Status for item added to this train" value is set to the value defined in the settings, but can be modified. Notice that this status can be set when a train is created but it won't be possible to edit later.
    7. Add items to a train. You can only add items that are already in the waiting list. Add values for the attributes. Notice that the attributes linked with a database column are automatically pre filled. Notice that attributes linked with an authorised value are displayed with a dropdown list but that a different value can be set (remember, this is a feature!). Notice that attributes can be multivalued.
    8. Add other items to the waiting list, notice the "Add last X items to a train" link at the top of the waiting list table, click it
    9. You can now add several items to a train, directly (for instance if you don't really need to pass through the waiting list). Values can be set for the batch, but attributes linked with a database column are not editable (they will be prefilled automatically)
    10. Once you have a train with several items, look at the "show train" view and notice the item list. If all of them are using the same processing then a table is displayed, one column per attribute. However if at least one item of the train has a different processing then the items are not listed in a table.
    11. Edit items and confirm that the values are correctly saved.
    12. Close, send and receive a train
    13. Once a train is closed you can no longer add items to it
    14. Once a train is received notice that you can "copy" an item to another (opened) train
    
    QA notes:
    The patch is huge! New enhancements and improvements have been moved to separate bug reports but this cannot be split. We need a ground base to build on top.
    The size is mainly coming from Vue components, Koha::Objects, REST API controllers and specs, and tests. Nothing hard ;)
    
    More to come:
    - See the kanban!
    - Print slips (bug 33547 and bug 34030)
    - Put something on the landing page!
    - Link with the acquisition module (suppliers, funds, etc.)
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 897218148413b76d7bcdb439268dd2ba83212311
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 7 14:48:43 2023 +0200

    Bug 30708: REST API specs
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4e9bc78f2cae1b3754efa4ac3c874d6204630700
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 7 14:48:19 2023 +0200

    Bug 30708: Add tests
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c70d2bcd20d92a9788c12e8a264416d199eeae71
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 7 14:48:06 2023 +0200

    Bug 30708: Add Koha Objects
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e741a86de19bcf232a748d2f223d5530d87699cb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 7 14:47:45 2023 +0200

    Bug 30708: Add REST API controllers
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    Signed-off-by: Laurence Rault <laurence.rault@biblibre.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cb8228ff0a0956ebac314b001ebbd019f0b520e3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 18 11:34:07 2023 -0300

    Bug 31631: DBRev 23.06.00.037
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ef16271ed59b5ccd78b9322d8d7ec993556db9ce
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Sep 22 06:50:42 2023 -0400

    Bug 31631: (QA follow-up) Tidy code
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 53e719a001d2c6181d16e3d7ffc6c29679482fbe
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Tue Feb 21 17:48:02 2023 +1300

    Bug 31631: Unit tests
    
    Test plan:
    Run amended Budgets.t test and all existing unchanged Acquisition tests in koha-shell
    - sudo koha-shell <instance>
    - prove t/db_dependent/Budgets.t
    - prove t/db_dependent/Acquisition
    - prove t/db_dependent/Acquisition.t
    - prove t/db_dependent/Budgets
    
    Sponsored-by: Waikato Institute of Technology, New Zealand
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Bug 31631: (follow-up) Fixes for failing unit test t/db_dependent/Budgets.t
    
    Test plan:
    1. Set CalculateFundValuesIncludingTax = 'Include'
    
    2. Run Budgets.t unit test
    sudo koha-shell kohadev
    prove t/db_dependent/Budgets.t
    
    3. Set CalculateFundValuesIncludingTax = 'Exclude'
    
    4. Run Budgets.t unit test
    sudo koha-shell kohadev
    prove t/db_dependent/Budgets.t
    
    Sponsored-By: Waikato Institute of Technology, New Zealand
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3a720e5181395e9a5a978b8a2a126164e1cc711d
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Oct 25 03:08:03 2022 +0000

    Bug 31631: (follow-up) Use CalculateFundValuesIncludingTax when modifying existing order
    
    This patch depends on Bug 31840.
    
    To test:
    1) Edit an order and increase the price so that you would expect it to
    trigger a warning that you will exceed the amount allowed for this Fund
    2) Confirm the warning is triggered
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3ca1ab63ac65104a16f5a0bcfd87f080b8a869fc
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Tue Sep 27 16:59:00 2022 +1300

    Bug 31631: Optionally use tax-exclusive values for calculating fund values
    
    Test plan:
    1. Apply patches
    2. sudo koha-upgrade-schema <instance>
    3. Restart services
    4. Set TaxRates syspref = 0.15
    5. Create a new fund with amount = 1000
    6. Add an order to a basket with the following values:
    - Fund = Choose the fund from step #5
    - Quantity = 1
    - Vendor price = 10
    - Tax rate = 15%
    - Discount = 20%
    - Retail price = 10.00
    - Replacement cost = 10.00
    - Actual cost = 10.00
    - Ensure the basket belongs to a vendor with ("List prices" = "Don't include tax" and "Invoice prices" = "Don't include tax")
    7. Go to the Acquisitions home page
    8. Confirm the 'Ordered' column for the step #5 fund contains 9.20
    9. Click on the 9.20 link and confirm the ordered.pl page that loads
    also contains 9.20 as the 'Subtotal'
    
    10. Change 'CalculateFundValuesIncludingTax' = 'Exclude'
    11. On the Acquisitions home page confirm the 'Ordered' column now
    contains 8.00
    12. Click on the 8.00 link and confirm the ordered.pl page also contains
    8.00 as the 'Subtotal'
    
    13. Close your basket and receive your order - change the 'Actual costs'
    = 8.00 (the $10 retail price less the 20% discount, tax exclusive)
    14. Go to the Acquisitions home page and confirm the 'Spent' column now
    contains 8.00
    15. Click on the 8.00 link and confirm the spent.pl page also contains
    8.00 as the 'Subtotal'
    
    16. Change 'CalculateFundValuesIncludingTax' = 'Include'
    17. Confirm the 'Spent' column on the Acquisitions home page now shows
    9.20
    18. Click on the 9.20 link and confirm the spent.pl page also contains
    9.20 as the 'Subtotal'
    
    Sponsored-by: Waikato Institute of Technology, New Zealand
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c684833b825d3b8e775e2b97cba10451e97e00cf
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Tue Sep 27 16:54:06 2022 +1300

    Bug 31631: Add new system preference
    
    Sponsored-by: Waikato Institute of Technology, New Zealand
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3d21b002c12fcf39359782fb587ae05836b2b62e
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Jul 7 16:07:47 2023 +0000

    Bug 33620: Don't show guarantor info on details page if borrowerRelationship is empty
    
    To test:
    1. Apply patch
    2. Have some values in borrowerRelationship.
    3. Go to a patron details page and see both 'Show checkouts to guarantor:' and 'Show charges to guarantor:'
    4. Now empty borrowerRelationship.
    5. Visit the patron detail page again and you should no longer see either of those fields.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f596a474171193543da9d573e787f7e55a1ddd29
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Aug 16 08:20:35 2023 +0000

    Bug 6419: (follow-up) Use Select2 with optgroups
    
    This patch divides the OPAC and staff options into separate optgroups
    and adds Select2 for styling and filtering.
    
    THe patch also corrects a few missed instances of "Intranet" in the list
    of location options on the entry form.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d617fa4d817203cc0addb3185e51cba915b14a31
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Aug 16 07:49:53 2023 +0100

    Bug 6419: Add StaffSerialsHome block to additional contents
    
    This patch adds a new `StaffSerialsHome` block to the HTML
    Customisations options. This allows for the addition of a block of
    content in a page-section at the bottom of the point of sale page.
    
    NOTE: This patch also removes the now defunct database update introduced
    in the first patch of the series.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ae842b62ffac71bab5f5225121aabd359e46ece8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Aug 16 07:40:14 2023 +0100

    Bug 6419: Add StaffPOSHome block to additional contents
    
    This patch adds a new `StaffPOSHome` block to the HTML
    Customisations options. This allows for the addition of a block of
    content in a page-section at the bottom of the point of sale page.
    
    NOTE: All the blocks have been placed at the bottom of the home pages
    respectively for consistency. However, in this case it doesn't look as
    clean as the content above is a form.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 791f0ae19377cb99ced60fcd54bf66fb147dce6c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Aug 16 07:33:01 2023 +0100

    Bug 6419: Add StaffPatronsHome block to additional contents
    
    This patch adds a new `StaffPatronsHome` block to the HTML
    Customisations options. This allows for the addition of a block of
    content in a page-section at the bottom of the patrons home page.
    
    NOTE: This one may highlight an issue with Panels directly followed
    by page-sections.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cf50fc91670db81c45983e597a788a0e0290a915
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Aug 15 16:36:27 2023 +0100

    Bug 6419: Add StaffListsHome block to additional contents
    
    This patch adds a new `StaffListsHome` block to the HTML
    Customisations options. This allows for the addition of a block of
    content in a page-section at the bottom of the lists home
    page.
    
    NOTE: This one may highlight an issue with Panels directly followed by
    page-sections.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b98e3950557e0e306e721dc682a34c045946ed16
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Aug 15 16:02:52 2023 +0100

    Bug 6419: Add StaffCataloguingHome block to additional contents
    
    This patch adds a new `StaffCataloguingHome` block to the HTML
    Customisations options. This allows for the addition of a block of
    content in a page-section at the bottom of the cataloguing home
    page.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4ad4677c70fbdb1978ee1c55a8bb25fe9443a59c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Aug 15 15:53:57 2023 +0100

    Bug 6419: Add StaffAuthoritiesHome block to additional contents
    
    This patch adds a new `StaffAuthoritiesHome` block to the HTML
    Customisations options. This allows for the addition of a block of
    content in a page-section at the bottom of the authorities home
    page.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fe04bbf462255b176c89508df1e208e95629e20a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Aug 15 15:41:47 2023 +0100

    Bug 6419: Add StaffAcquisitionsHome block to additional contents
    
    This patch adds a new `StaffAcquisitionsHome` block to the HTML
    Customisations options. This allows for the addition of a block of
    content in a page-section at the bottom of the acquisitions home page.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5aac8d7a316bbaf9475aab5875c62c1a552a9630
Author: David Roberts <david@koha-ptfs.co.uk>
Date:   Fri May 22 09:36:25 2020 +0000

    Bug 6419: Add custom HTML areas to intranet home pages
    
    This patch adds customisable HTML text areas to acqui/acqui-home.pl,
    authorities/authorities-home.pl, cataloguing/addbooks.pl,
    virtualshelves/shelves.pl, members/members-home.pl, pos/pay.pl and
    serials/serials-home.pl pages
    
    To test:
    
    1) Apply patch
    2) Run updatedatabase.pl
    3) Add some html to the new prefs IntranetAcquisitionsHomeHTML,
       IntranetAuthoritiesHomeHTML, IntranetCatalogingHomeHTML,
       IntranetListsHomeHTML, IntranetPatronsHomeHTML, IntranetPOSHomeHTML
       and IntranetSerialsHomeHTML
    4) View the Acquisition, Authorities, Cataloging, Lists, Patrons,
       Point of Sale, and Serials homepages and confirm that your changes
       show. Note that this should display in exactly the same way as it
       does in the already extant IntranetCirculationHomeHTML and
       IntranetReportsHomeHTML system preferences.
    
    Signed-off-by: Brandon J <brandon.jimenez@inLibro.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bee2b3d33ed6030b5a63d22148b9955a9897e51d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Sep 18 11:41:36 2023 +0200

    Bug 33949: Fix display of old checkouts if no checkouts exist
    
    If we pass an empty array from the perl controller, we retrieve an empty
    string from the template, and the merge does not work.
    
    This patch fixes the following bug:
    Pick a patron without checkout history
    Check them an item out and check it in
    => The table is empty, whereas it should display the item that has been
    checked in.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 891835895cd9d2849c6f5e8e569af20451d26364
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 8 10:00:53 2023 +0200

    Bug 33949: Replace GetAllIssues with Koha::Checkouts - opac
    
    Same as bug 33948 for the OPAC side.
    Additionally you will test
    * OPACMySummaryHTML
    * The different cover images services
    * Display of ISBN
    * Display of UPC
    * Ratings
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5dd4043b06b462080858061dc5bf6b1b193d5c33
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Sat Oct 14 14:20:00 2023 +0000

    Bug 34980: Remove the use of event attributes from title-actions-menu.inc in OPAC
    
    This patch updates the include file used to show actions with each
    search result, removing two instances of "onclick" in favor of an event
    handler class which was already in use elsewhere.
    
    To test, apply the patch and log in to the OPAC.
    
    - Perform a catalog search which will return results.
    - Test the "Save to lists" link under any search result. The "Save to
      lists" pop-up window should appear.
    - View the contents of a list which contains some titles.
    - Test the "Save to another list" control. The same pop-up window should
      be triggered.
    - Tag at least one title in the catalog and view the "Tag cloud" page.
    - Perform the same test with the "Save to lists" button in the table of
      our tags.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 90b89948f11be1f8419a0847ffbc500cc3a38206
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 16 11:02:00 2023 +0000

    Bug 35058: Automatically show authority tab 0 if DefaultAuthorityTab is empty
    
    The change to the authority detail page made by Bug 34075 didn't take
    into account the possibility that the DefaultAuthorityTab tab preference
    might be empty. This leads to a JavaScript error and no tabs being
    shown.
    
    We can avoid this situation by initializing the tab_object variable as
    an empty object.
    
    To test, apply the patch and go to Authorities to repeat the test plan
    for Bug 34075:
    
    1. Locate and view the detail page for an authority record.
    2. The page should default to the 0XX or first tab.
    3. Go to Administration -> System preferences and set the
       DefaultAuthorityTab preference to a number that won't be found
       in your authority record (e.g. there are no 3XX tags defined).
    4. Return to the detail page and verify that the first tab is displayed.
    5. Set DefaultAuthorityTab to 1XX or greater, one that exists in your
       record.
    6. Reload the detail page and confirm the correct tab is selected.
    7. Test the case where DefaultAuthorityTab is undefined by directly
       updating the database. In koha-testing-docker you can run this
       command:
    
       echo "update systempreferences set value = 3 where variable = 'DefaultAuthorityTab';" | koha-mysql kohadev
    
       Return to the authority detail tab to confirm that the first tab is
       displayed.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5bad6a6d4963010c43f14f8af7c9dff7c03d36d4
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 16 12:50:06 2023 +0000

    Bug 35055: Exclude actions column from patron search results DataTables export
    
    This patch updates the markup of the patron search results table so that
    the "actions" column (Edit, Check out) are excluded when using the
    DataTables "Export" button. The configuration was already in place but
    the column header lacked the required class.
    
    To test, apply the patch and perform a patron search which will return
    multiple results.
    
    Click the "Export" control at the top of the patron search results
    table and choose "Print." In the print preview there should be no final
    column containing "Edit" and "Check out."
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 375578014abb9ed1e52025b656f71310d8fb5b62
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Oct 7 19:36:56 2023 +0000

    Bug 3007: Remove unimarc_field_700-4.pl value builder
    
    I tried translating it, found it not working and replaced
    by the qualif authorised value list with relator terms/codes.
    
    To test:
    * Make sure the unimarc_field_700-4.pl is no longer listed in
      frameworks.
    * Make sure it's not used in the standard frameworks.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ab14e7f8ebe200de748a38f1d795c2588048aa3a
Author: David Nind <david@davidnind.com>
Date:   Thu Sep 28 22:14:29 2023 +0000

    Bug 34462: (follow-up) Shorten card experiation message
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7d4e5a66bd8ce72a997f7c4285efa84d4ee5c04f
Author: Emily-Rose Francoeur <emily-rose.francoeur@inLibro.com>
Date:   Thu Sep 28 10:10:26 2023 -0400

    Bug 34462: Display the patron's expiration date
    
    The problem is in the patron_messages.inc file on line 25. The variable "expiry" is used, but it should be "patron.dateexpiry" because the patron's card isn't expired yet.
    
    TEST PLAN
    1) Go to “Patrons > + New patron”
    2) Create a patron with an expiry date that is less than 30 days in the future
    3) Go to the "details" tab of this account
    4) Notice that the date is missing after "expires on":
    "Expiration: Patron's card will expire soon. Patron's card expires on Renew or Edit details"
    5) Apply the patch
    6) Reload the page; the expiry date should now be displayed
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1c03352ae57a3c8f6f77d64a026a5d87d6f6830e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 11 09:58:34 2023 +0200

    Bug 34204: Fix koha-shell under debian 12
    
    In Debian 12/Bookworm:
    root@kohadevbox:koha$ koha-shell kohadev
    This account is currently not available.
    
    This is because /etc/passwd has /usr/sbin/nologin as shell, which is coming from the --disabled-login param we passed to adduser in koha-create.
    
    Looks like a bug has been fixed in adduser, because we didn't have this behavior in bullseye.
    
    Context:
    https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=625758#72
    
    """
    - change and document (adduser(8)) that --disabled-password will behave
      like --disabled-login and additionally set the shell to
      /usr/sbin/nologin.
    """
    https://salsa.debian.org/debian/adduser/-/commit/427ade7d9116af5af7baa9d0c538e14fa86560cf
    
    Test plan:
    Confirm the above and that the change makes sense.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ef6a031bbd3f0106a1d7285288b4c8f0a9ec34e4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 18 11:10:06 2023 -0300

    Bug 30719: (QA follow-up) Fix template validation test
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a3ce05012b8a2ee6b47c82d14f61c082798ab8a1
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jul 13 14:23:22 2023 +0000

    Bug 34271: Remove a few Logger statements from REST API
    
    See also bug 22678.
    We should call app->log->warn, ->debug, etc. instead of Logger.
    
    Test plan:
    The simplest way I tested V1, is add a app->log->warn in the try
    blocks, restart all and check that your log4perl is set correctly
    too.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c063990a92fc056237071af3f0cf1b2b7933a59f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jun 26 14:38:41 2023 +0000

    Bug 29181: Create patron card creator batch from report result
    
    This patch adds the option of taking the results of a report that
    returns borrowernumbers and create a new patron card creator batch with
    those results.
    
    The logic of the dropdown menu has been modified in order to ensure that
    duplicate patron modification options aren't shown in the menu when a
    report return both borrowernumber and cardnumber.
    
    To test, apply the patch and create a new report which will return
    patron borrowernumbers, e.g.
    
    SELECT borrowernumber, cardnumber, surname, firstname FROM borrowers
    order by RAND() LIMIT 20
    
    - Run your report
    - Click the "Batch operations with..." button at the top of the result
      -  Click "Patron card creator"
    - A new tab should open with a new patron card creator batch with the
      patrons from your report.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f0f860a43dd7bc32af36caf941a31efb8e24aca6
Author: Philippe Blouin <blou@inlibro.com>
Date:   Mon Oct 16 11:07:39 2023 -0400

    Bug 35064: Extra parenthesis in db_revs/220600072.pl
    
    See Bug 34332.
    
    The same error it corrected is also present in the update process.
    
    This patch simply removes an extra parenthesis in the tt instruction.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c8748cd289f37cfa871b8fe368422c4ea58f1c0d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 10 15:12:12 2023 +0000

    Bug 34119: Improve staff interface print stylesheet following redesign
    
    This patch makes some updates to the staff interface print stylesheet in
    order to make it work better following the staff interface redesign.
    
    To test, apply the patch and clear your browser cache if necessary.
    
    In the staff client, go to various pages and view the print preview. The
    print view should exclude the header navigation, header search, page
    toolbars and page sidebars.
    
    - Pages with tabbed displays should show content from all tabs: e.g.
      bibliographic details, MARC editor.
    - In Reports, check that report results print well.
    - Pages with DataTables should print with table information visible but
      table controls hidden.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e8f6a3bfee47d90ad3db7f3a934e3f6af5c17032
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 10 14:24:22 2023 +0000

    Bug 34119: (Preliminary) Run stylelint fixes on print.css
    
    This patch corrects errors raised by the new stylelint configuration in
    print.css. Most of the fixes were made automatically by using the
    "--fix" option:
    
    npx stylelint koha-tmpl/intranet-tmpl/prog/css/print.css --fix
    
    Some examples of errors fixed automatically:
    
    - Expected indentation of 4 spaces
    - Unexpected whitespace before ":"
    - Unexpected unit
    - Expected single space before "{"
    - Expected newline after ";" in a multi-line declaration block
    
    Errors from use of "!important" have been ignored.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fa1485639b6727061572c310731f9b5a3f79adcd
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Wed Sep 27 12:35:58 2023 -0400

    Bug 34901: Display transit status on patron holds tab only if hold found value is "T"
    
    Check the transit status of the *hold* in addition to the transit status
    of the *item*, to avoid displaying a misleading transit status on
    item-level holds when the item is actually in transit for a different
    hold
    
    To test:
    1. Create a record-level hold for Patron A for pickup at a library other
       than the logged-in library
    2. Check in an item to fill that hold
    3. Put an item-level hold on that same item for Patron B at a different
       library other than the logged-in library
    4. Open Patron A's and Patron B's account details pages in separate tabs
    --> Note that the Holds tab on Patron A's account detail page correctly
        shows that their hold is in-transit
    --> Note that the Holds tab on Patron B's account detail page incorrectly
        shows that their hold on the same item is also in-transit
    4. Apply patch
    5. Clear browser cache
    6. Refresh both patrons' account details pages
    --> Confirm that the holds tab on Patron A's account still correctly
        says their hold is in-transit
    --> Confirm that the holds tab on Patron B's account now correctly shows
        a blank status for their hold
    7. Cancel Patron A's hold
    8. Check in the item again to put it in transit for Patron B's hold
    9. Reload Patron B's account page
    --> Confirm that the holds tab on Patron B's account now correctly says
        their hold is in-transit
    
    Signed-off-by: Katariina Hanhisalo <katariina.hanhisalo@xamk.fi>
    Signed-off-by: Tuomas Kunttu <tuomas.kunttu@kouvola.fi>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a8e770d9c49a88fbfd46c27b31d3eb2a413a1618
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Mon Sep 25 22:11:39 2023 -1000

    Bug 34910: (follow-up) alert in patron details
    
    The anonymous patron details page should show an alert message.
    
    1) Configure an existing borrowernumber in system preference 'AnonymousPatron'
    2) Go to details page of this borrower :
       /cgi-bin/koha/members/moremember.pl?borrowernumber=x
    3) Check you see alert 'This is the anonymous patron.'
    
    Signed-off-by: Kelly McElligott <kelly@bywatersolutions.com>
    Signed-off-by: Johanna Miettunen <johanna.miettunen@haaga-helia.fi>
    Signed-off-by: Päivi Knuutinen <paivi.knuutinen@joensuu.fi>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aca49ca14b9f2d009f469144f975cd9fbf098181
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Mon Sep 25 21:53:45 2023 -1000

    Bug 34910: Do not allow checkout for anonymous patron
    
    The anonymous patron circulation page should show an alert message and not allow check-out.
    
    1) Configure an existing borrowernumber in system preference
       AnonymousPatron
    2) Go to circulation page of this borrower :
       /cgi-bin/koha/circ/circulation.pl?borrowernumber=x
    3) Check you see alert 'This is the anonymous patron, so circulation is disabled.'
    
    Signed-off-by: Kelly McElligott <kelly@bywatersolutions.com>
    Signed-off-by: Johanna Miettunen <johanna.miettunen@haaga-helia.fi>
    Signed-off-by: Päivi Knuutinen <paivi.knuutinen@joensuu.fi>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 44aff60fa2f9169d50e85f95b9bd3a0b9a064120
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Sep 20 15:10:17 2023 +0000

    Bug 34852: Use template wrapper for breadcrumbs: OPAC part 2
    
    This patch updates several OPAC templates so that they
    use a new WRAPPER for displaying breadcrumbs.
    
    Apply the patch and log in to the OPAC. Test each of the following pages
    and their variations. Breadcrumbs should look correct, and each link
    should be correct:
    
    - Navigate to /cgi-bin/koha/ilsdi.pl
      - Check a variety of links in the list
    - Advanced search
      - Locate a bibliographic record and view the ISBD detail page
      - View the MARC detail page
    - Locate a serial record which has a patron notification notice defined
      in its subscription details
      - On the detail view under the "Subscriptions" tab, click the
        "Subscribe to email notification on new issues" button.
        - Confirm the subscription, then when you return to the detail page,
          click "Cancel email notification" to check that view as well.
    - Authority search
      - Perform a search which will return results
        - Click the "Details" link on one of the results
          - Also view the "MARC view" tab (note that I didn't address the
            breadcrumb inconsistency between the normal and MARC view in
            this patch).
    - Try to view a bibliographic record which is suppressed in the
      OPAC. Requires OpacSuppression enabled and OpacSuppressionRedirect set
      to "An explanatory page"
      - Set the value of 942$n to 1 to suppress it in the OPAC.
    - In a system with ElasticSearch enabled, go to "Browse search" (or
      navigate directly to /cgi-bin/koha/opac-browse.pl
    - With  OpacBrowser enabled, go to "Browse by hierarchy."
    
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 869dc05acc3b412ab9f23f05570e13a2335dd93f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Sep 20 14:46:01 2023 +0000

    Bug 34849: Use template wrapper for breadcrumbs: OPAC part 1
    
    This patch updates several OPAC templates so that they
    use a new WRAPPER for displaying breadcrumbs.
    
    The patch contains a minor CSS update, so you will have to rebuild the
    OPAC CSS for testings.
    
    Apply the patch and log in to the OPAC. Test each of the following pages
    and their variations. Breadcrumbs should look correct, and each link
    should be correct:
    
    - User summary
    - Charges
    - Personal details
      - Submit changes
    - Consents (with PrivacyPolicyConsent enabled)
    - Tags
    - Change password
      - Submit password change
    - Search history
      - Test when logged in and when not logged in
    - Checkout history
    - Privacy
    - Holds history
    - Recalls history
    - Messaging (with  EnhancedMessagingPreferences
      and EnhancedMessagingPreferencesOPAC enabled).
    - Lists
      - View private list
      - View public list
      - Edit list
      - Share list
        - Submit invitation
      - Create list
      - View list contents
    - Routing lists (with RoutingSerials enabled)
    - Ask for a discharge (with useDischarge enabled)
    - ILL requests
    - Curbside pickups
    - Error page: Navigate to a non-existent page
    
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f08fc018670a356103a80a41ea83aa67e33476fa
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Oct 12 09:56:25 2023 +0000

    Bug 35042: Remove set datelastseen to null on table in Members.t
    
    Non-trivial was adding the category_type <> S.
    
    Test plan:
    Run t/db_dependent/Members.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4b337b107e16d47ab79571b9a38d273c9e980b20
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 6 16:48:57 2023 +0200

    Bug 34959: Sort PO files correctly
    
    The PO files are not sorted when we update them which leads to
    unnecessary changes that are commited: hard to see differences and
    make git index grow superfluously.
    
    Test plan:
    0. Do not apply this patch
    1. gulp po:update --lang es-ES
    2. git commit -a -m"First PO update"
    3. Run again the gulp update command
    4. git diff
    => You have a lot of changes generated here, the po:update is not
    idempotent.
    
    5. Apply this patch
    6. Run the gulp update command
    7 git commit -a -m"PO update after 34959"
    8. Run the gulp update command
    9. git diff
    => No changes are generated
    
    Note that this patch will all the entries by files, and per line
    numbers.
    It fixes a bug in some condition, where we add information/context about
    the string. For instance search for "For the first occurrence" in the
    file. Prior to this patch this was not correct, we didn't add info about
    the first occurrence (but whichever in the list).
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e4d638e14890449839c42db340766bee9a735e2e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Oct 6 17:17:51 2023 +0200

    Bug 34959: Remove unused sub
    
    Nothing special here, this sub is not used and we can remove it.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 461d17b2701ad83eaab9c43b2b2d62d9cd479d2e
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Fri Sep 15 16:39:42 2023 -0400

    Bug 34752: (QA follow-up) perltidy
    
    Signed-off-by: emlam <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 772140dbc69f75eca878440315c6d092cc813af5
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Sep 11 11:32:25 2023 +0100

    Bug 34752: Add AV handling to sort1/sort2 on baskets
    
    This patch adds Authorized Value handling for the display of sort1 and
    sort2 fields in the acquisitions basket display page.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: emlam <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2fc96b840daee1994110be6efc5b7399422f8ec8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jul 21 16:41:48 2023 +0000

    Bug 35032: Remove the use of "onclick" from Koha to MARC mapping template
    
    This patch eliminates two instances of "onclick" from the Koha to MARC
    mapping template, moving these event handlers into JS in the footer.
    
    To test, apply the patch and go to Administration -> Koha to MARC
    mapping.
    
    - Click "Add" next to a Koha field.
      - You should get a JS popup asking for entry of a MARC tag. Confirm
        that this process completes correctly.
    - Test a "Remove" link too. It should work to remove mapping from a Koha
      field.
    - Test the "Cancel" choice in both the "Add" and "Remove" cases to
      confirm that the operation is cancelled.
    
    Signed-off-by: Andrew  Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 06d182bc82b40872970d99055c449d3c406724fa
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 10 12:03:18 2023 +0000

    Bug 35006: OPAC holdings table - Fix sort for library columns
    
    This patch updates the holdings table on the OPAC's bibliographic detail
    page so that home and current library columns can be sorted correctly by
    library name. There have been changes to the way the template shows
    these values, but the DataTables "data-sort" attribute on the table cell
    had not been updated accordingly.
    
    To test, apply the patch set the OpacLocationBranchToDisplay system
    preference to "home and holding libraries."
    
    - Make sure home and holding library columns are not hidden in the
      table settings under Administration -> Table settings -> OPAC ->
      holdingst.
    - Locate a bibliographic record in the OPAC which has multiple items
      from different libraries.
    - Test that the home and current library columns sort correctly by
      library name.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0128ce5b100df4f96a9b79076077459d3ea8b6c2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Oct 12 14:53:50 2023 +0000

    Bug 34881: (QA follow-up) Remove stray paren
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d9463f82c4344b93e4b5d0aea64339bb6c3d492a
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Wed Oct 11 09:40:05 2023 -0400

    Bug 34881: Improve idempotency of DBRev
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 531bbbcaa563a5c01f073ffb173da25362add61d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Oct 12 07:48:11 2023 +0000

    Bug 35041: Fix Patron.t for a filter_by_last_update test
    
    Since filter with from now tests stricter, we should be a bit
    more accurate with setting our test datetime.
    
    Test plan:
    Run t/db_dependent/Koha/Patron.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1a2288052dab4709ba5c1236bc8141384e2d1aa5
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Oct 10 11:53:17 2023 +0200

    Bug 27249: Replace DateTime->now by dt_from_string
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9e2a258f6f6213629c33bbc838b4fbac5366c544
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Oct 10 11:53:00 2023 +0200

    Bug 27249: Add missing POD for Koha::Exceptions::Calendar
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4b4028d783a3660b9e16e647ef0e51c624ef3ff6
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Oct 10 11:52:26 2023 +0200

    Bug 27249: Fix code style
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4eec4020fa66f789f77637234aab81c46c3e6972
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Aug 24 09:27:28 2023 +0200

    Bug 27249: Catch NoOpenDays exception while checking out an item
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2b58f4d89ca2d71c8979e4d87759fc45d63795f4
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Jul 18 10:26:03 2023 +0200

    Bug 27249: Prevent infinite loop when searching for an open day
    
    Calendars can be configured in a way that all days are closed.
    The simplest way to do that is to configure a repeatable holiday for
    every day of the week.
    With such calendars, searching for an open day will literally take
    forever.
    
    This patch sets a hard limit on how many iterations are allowed before
    giving up. This limit is set to the arbitrary value of 5000, which
    should be large enough to be able to consider there is no open days if
    we haven't found any with that many iterations, and small enough to
    allow the loop to end quickly
    
    Test plan:
    1. Set system preference 'useDaysMode' to 'Use the calendar to push the
       due date to the next open day' ('Datedue'). Make sure the existing
       circulation rules do not conflict with that setting.
    2. Browse to Tools » Calendar
    3. Set every day of the week to "Holiday repeated every same day of the
       week"
    4. Issue an item to a patron
    5. Check the box and select 'Renew selected items'
    6. The renewal should fail pretty quickly
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ebc7f492540821dc7f7b0339fb2f16c330ba67ef
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Oct 12 10:38:34 2023 +0000

    Bug 35037: (follow-up) Minor adjustments to margins and padding
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4ac7c8bc061406ca4753e3204858e8012b417ff1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 11 17:41:45 2023 +0000

    Bug 35037: Revise the appearance of the last patron button
    
    Following Bug 21246 I find the button to be too obtrusive. This patch
    makes CSS changes to the style of the "Last patron" button shown in the
    staff interface when the "showLastPatron" system preference is enabled.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    - Enable the showLastPatron system preference if necessary.
    - Go to Circulation in the staff interface and check out to a patron.
    - A "Last patron" button should appear on the right-hand end of the
      breadcrumbs bar.
    - Check that the link, dropdown button, and dropdown menu look good.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d10ce467f5b59d8ae8d1a776346eb40134f81dda
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 4 10:51:14 2023 +0000

    Bug 34401: Fix inconsistencies in Item search fields page titles, breadcrumbs, and headers
    
    This patch fixes some inconsistencies in the item search fields
    administration page, making sure the page title, breadcrumb navigation,
    and page headers are consistent with each other.
    
    The patch makes some changes to the way new item search fields are added
    in order to keep the display consistent with other similar interfaces:
    The "add" form is no longer shown dynamically from the page listing item
    search fields. Clicking the "New search field" toolbar button will now
    take you to the same template used for editing existing search fields.
    This allows us to put the correct context into page title, breadcrumbs,
    and headings.
    
    To test, apply the patch and go to Administration -> Item search fields.
    Test the process of adding a new search field and editing an existing
    search field.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 40b8180ff9bcfe75088c321af58d33719f073581
Author: David Nind <david@davidnind.com>
Date:   Sat Sep 30 06:27:39 2023 +0000

    Bug 34966: Terminology - fix add item form (& to and)
    
    This patch updates the add item form in the staff interface to
    change the 'Add & duplicate' button to 'Add and duplicate'.
    
    In our terminology guide, & should only be used when
    it is part of a proper noun or a common abbreviation:
    https://wiki.koha-community.org/wiki/Terminology
    
    Test plan:
    1. In the staff interface, search for and select a record.
    2. Select New > New item.
    3. Note that "Add & duplicate" is one of the action buttons at the
    bottom of the add item form.
    4. Apply the patch.
    5. Refresh the page.
    6. Note that the action button is now labelled 'Add and duplicate'.
    7. Sign off! 8-)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katariina Hanhisalo <katariina.hanhisalo@xamk.fi>
    Signed-off-by: Reetta Pihlaja <reetta.pihlaja@siilinjarvi.fi>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2a7be7d6c86926226dab4356be3f760f5c166d19
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Fri Sep 15 03:41:56 2023 +0000

    Bug 34800: Adding openhub links for Koha contributors
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6a22310dd42325e003498b3e0b368c61513e00b2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 25 15:00:20 2023 +0000

    Bug 34395: Fix inconsistencies in Authority types page titles, breadcrumbs, and header
    
    This patch fixes some inconsistencies in the authority
    types administration page, making sure the page title, breadcrumb
    navigation, and page headers are consistent with each other.
    
    Test each page to confirm that page title, heading, and breadcrumbs are
    consistent:
    
    - Administration -> Authority types
      - New authority type
      - Edit authority type
      - Delete an authority type which is not used
      - Delete an authority type which is in use
      - Authority type MARC structure
        - New tag
        - Edit tag
        - Delete tag
        - View subfields
        - Edit subfields
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 094441d3f6901fac881942f8b805a951caffca07
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Oct 3 17:53:25 2023 +0000

    Bug 34399: Fix inconsistencies in Record overlay rules page titles, breadcrumbs, and headers
    
    This patch fixes some inconsistencies in the record overlay rules
    page, making sure the page title, breadcrumb navigation, and page
    headers are consistent with each other.
    
    Test the record matching rules page to confirm that page title, heading,
    and breadcrumbs are consistent.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eedd3223bc45e3722396e9b7718586de5201788d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Oct 6 11:24:49 2023 +0000

    Bug 34405: Fix inconsistencies in EDI accounts/Library EAN page titles, breadcrumbs, and headers
    
    This patch fixes some inconsistencies in templates for EDI accounts
    and Library EANs, making sure the page title, breadcrumb navigation, and
    page headers are consistent with each other.
    
    To test, apply the patch and check these views:
    
    - Administration -> EDI accounts
      - New EDI account
      - Edit EDI account
      - Confirm deletion of EDI account
    - Administration -> Library EANs
      - New library EAN
      - Edit library EAN
      - Confirm deletion of EDI account
        - With an account for a specific library
        - With an account for any library
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d19cfb44aec474a31724dfa56dc8c162ae81d691
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 17 14:40:13 2023 -0300

    Bug 30719: DBRev 23.06.00.036
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 56419590cb58bf8f2dd40460e33cde46cddbaa61
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 17 13:40:09 2023 -0300

    Bug 30719: Rename `batch` for `ill_batch` in Koha::Illrequest
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e6de47e9ecdf01190c7a244e30cb760281554f38
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 17 11:51:24 2023 -0300

    Bug 30719: Remove unused Koha::Illbatch->requests_count method
    
    This patch removes this stray method from the original implementation.
    
    To test:
    1. Apply this patch
    2. Run:
       $ git grep requests_count
    => SUCCESS: Notice the only ILL-related mantions are API related, which
    is returned by using the 'requests+count' embed, which is unrelated to
    this particular method
    3. Run:
       $ prove t/db_dependent/api/v1/ill_batches.t \
         t/db_dependent/Illbatches.t
    => SUCCESS: Tests pass!
    4. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f51f1265a1d3a12cffb5142e652bf4203db28bb0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 17 11:16:07 2023 -0300

    Bug 30719: Remove unused (and wrong) key in Koha::Illrequest->strings_map()
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e21c19e170c35e42010f3af956fb5db988e32552
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Oct 11 08:38:57 2023 +0000

    Bug 30719: (QA follow-up) Updating remaining naming
    
    Update statuscode -> status_code on the js files
    Update remaining batch_id -> ill_batch_id
    Update batch object in Illrequest.pm strings_map
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a71140fe607ce73211c9a1f1bbecdd845743544a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 10 16:02:38 2023 -0300

    Bug 30719: (QA follow-up) Pick better column names and cleanup
    
    This patch takes on normalizing the attribute names, embeds, and also
    makes the whole API more kosher, in terms of using accessors for related
    objects, using the standard structure for strings_map, etc.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2102e948a8a50e536f7e22046a2930924f03e822
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Oct 10 10:47:21 2023 +0000

    Bug 30719: (QA follow-up) Rename illbatchstatuses
    
    illbatchstatuses endpoint is now ill/batchstatuses
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 833a808cdf70a63e3a5089210e9624ef5fa59b00
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Oct 9 15:54:54 2023 +0000

    Bug 30719: (QA follow-up) Rewrite remaining ill batches endpoints
    
    get, add and update rewrite
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3801c65bee66a7eb5c982ea8267163fe89de6fdd
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Oct 9 15:29:58 2023 +0000

    Bug 30719: (QA follow-up) Rewrite Illbatches list endpoint
    
    Update accessors
    Add +strings embed
    Add x-koha-embed to batches list andpoint
    Add embed to API call from the front-end
    Update table to get data from _strings
    Add x-koha-embed to tests
    Add strings_map to Illbatch
    Add to_api_mapping to Illbatch
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit edb048de78bccf1bc7b9c9d84284cdb0228ca4be
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Oct 9 12:23:57 2023 +0000

    Bug 30719: (QA follow-up) Rename illbatches endpoint to ill/batches
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 17499fbf06060495e0cd209500ba6999db34e956
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 4 15:53:41 2023 -0400

    Bug 30719: Atomic update fixes
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9e57d4abaa623bab36b7008fbe16298905f6649e
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Sep 8 14:22:57 2023 +0000

    Bug 30719: (QA follow-up) Fix "Request Status" capitalization
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 33ab6fc91cd8e7c7413271257e41bfc5eb0bbb3d
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Sep 8 13:32:43 2023 +0000

    Bug 30719: (QA follow-up) c->validation fixes
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fc83fb3ebbd093a7a1e3fb73cc1f16e0a3b9eb51
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Jun 29 13:57:06 2023 +0000

    Bug 30719: (QA follow-up) Squash:
    
        This is a squash of 25 QA patches located at:
        https://github.com/PTFS-Europe/koha/commits/new_30719
    
    Bug 30719: (QA follow-up) Batch column should be hidden by default
    Bug 30719: (QA follow-up) Fix wrong tt filter type
    Bug 30719: (QA follow-up) Make atomicupdate idempotent
    Bug 30719: (QA follow-up) Use COMMENT syntax in database files
    Bug 30719: (QA follow-up) Fix tiny boolean is_system
    Bug 30719: (QA follow-up) Add missing CONSTRAINT entries from kohastructure.sql to the atomicupdate file
    Bug 30719: (QA follow-up) Add missing koha_object_class and
    koha_objects_class methods
    Bug 30719: (QA follow-up) Swap search to find
    Bug 30719: (QA follow-up) Fix tests
    Bug 30719: (QA follow-up) API terminology - id -> batch_id
    Bug 30719: (QA follow-up) API terminology - borrowernumber -> patron_id
    Bug 30719: (QA follow-up) API terminology - branchcode -> library_id
    Bug 30719: (QA follow-up) Make mandatory illbatch_statuses translatable
    Bug 30719: (QA follow-up) Improve translatability
    Bug 30719: (QA follow-up) Fix capitalization of Interlibrary Loan
    Bug 30719: (QA follow-up) Change Branch to Library in ILL batches table
    Bug 30719: (QA follow-up) Add template WRAPPER to batch statuses breadrcrumbs
    Bug 30719: (QA follow-up) Utilize patron_to_html function to display patron info in batches table
    Bug 30719: (QA follow-up) Add mandatory batch statuses to the atomicupdate
    Bug 30719: (QA follow-up) Add page-section to the batch statuses list page
    Bug 30719: (QA follow-up) Style Save button on batch status edit page
    Bug 30719: (QA follow-up) Add question mark to label string, rephrase new ILL batch button
    Bug 30719: (QA follow-up) Add noExport class to action columns in batch list table and batch modal table
    Bug 30719: (QA follow-up) Add page-section and headers to ILL batch table
    Bug 30719: (QA follow-up) Perltidy
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 45d369aa81cfb0fabb7e9aaa7a575adacf4c7392
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 12 17:11:24 2023 +0000

    Bug 30719: DBIC schema
    
    Signed-off-by: Edith Speller <Edith.Speller@ukhsa.gov.uk>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4a694c4fb5659134746db6025fd4813b69a1a2e1
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri May 12 17:10:00 2023 +0000

    Bug 30719: Tests
    
    Co-authored-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    Signed-off-by: Edith Speller <Edith.Speller@ukhsa.gov.uk>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 36680ea6c0f6b3ba143be404d9cc391f7f58bd55
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri May 12 17:09:39 2023 +0000

    Bug 30719: ILL Batch Statuses
    
    - UI adding support for batch statuses in batch UI
    - Admin UI for managing batch statuses
    - API specs
    
    Co-authored-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    Signed-off-by: Edith Speller <Edith.Speller@ukhsa.gov.uk>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a5dbafec5bdca4b5ccd3906df50a885176f2093b
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri May 12 17:06:01 2023 +0000

    Bug 30719: ILL Batches
    
    - Add batch column to requests table
    - Establish if there are any availability or metadata enrichment plugins and pass that to the template
    - Verify if we have any backend that can support batches, if not, don't show the option
    - Updates to the ILL toolbar
    - New ILL batch modal
    - New Koha classes
    - API specs
    
    Co-authored-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    Signed-off-by: Edith Speller <Edith.Speller@ukhsa.gov.uk>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5bf5860370f2990fd2d756f546505c8c352dcd30
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri May 12 16:59:21 2023 +0000

    Bug 30719: DB and API
    
    - Adds 'batch' accessor to Illrequest object
    - New illbatches and illbatch_statuses tables
    - New foreign key 'batch_id' in illrequests table
    - Atomic update file
    - Default illbatch_statuses
    - Add 'add' ill_requests api method
    - Add POST method in ill_requests path
    - Add 'batch_id property to ill_request api definition
    - Updated swagger.yml with new batches and batchstatuses endpoints
    
    Co-authored-by: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
    Signed-off-by: Edith Speller <Edith.Speller@ukhsa.gov.uk>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1cabc0ed6716ba92a88222248c13a312efc1c761
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Sep 15 13:55:07 2023 +0000

    Bug 26314: (QA follow-up) Improve POD and fix links for UseControlNumber off
    
    When UseControlNumber is off, we previously did a search on the title index,
    but this was not actually correct. It might work when we have a dependent
    title and the title also appears on 245$p, but there is a better way:
    
    The title of the set record will be found in:
    * 773$3 for a dependent title
    * 800/810/811/830 for an independent title
    
    The search indices to use are host-item and title-series.
    
    As we are not only looking for 773, POD was adjusted to reflect that.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a210aa9f63395757bbbf9319c2cd35e056033009
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Sep 8 15:36:20 2023 +0100

    Bug 26314: (QA follow-up) Resolve new QA script failures
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f14f56a8f4c886dc4dca985495658ebc756995d9
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Oct 27 08:50:47 2021 +0100

    Bug 26314: Update for changes to bug 11175 methodology
    
    This moves the show_volumes calculation back out of C4::XSLT into the
    controller scripts and refined the search query builder slightly based
    on the XSLT equivilent.
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 80a775d5f9d2ac4160a5aca80471694516444ca7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Oct 18 18:06:32 2021 +0100

    Bug 26314: (follow-up) Make title search explicit
    
    This patch updates the get_volumes_query search returned when
    UseControlNumber is disabled such that it matches the query produced by
    XSLT sheets by replacing the ->title accessor with the more specific
    ->subfield('245', "a") accessor to just take subfield `a` into account.
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6e49a8be26c5656e1e545d2fc7880ca1fb0849f7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Sep 1 16:12:18 2021 +0100

    Bug 26314: (follow-up) Use clean_search_term
    
    This patch uses the now public clean_search_term from bug 28316 to
    sanitize the title string and prevent crashes in elastic search when
    title contain reserved characters.
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cd0a374b939754ef545f8255dda384a398f898db
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Aug 9 11:39:56 2021 +0100

    Bug 26314: Only display volumes link when required
    
    This patch makes C4::XSLT query for volumes the same way it would do
    with the generated link (i.e. based on UseControlNumber) and passes
    a flag to the XSLT so it displays (or not) the 'Show volumes' link.
    
    To test:
    1. Apply the first patch
    2. Have a known record without volumes
    3. Open the record in the OPAC
    => FAIL: It shows the 'Show volumes' link
    4. Have a record known to have volumes
    5. Open the record in the OPAC
    => SUCCESS: It shows the 'Show volumes' link
    6. Apply this patch and restart_all
    7. Reload the above records
    => SUCCESS: It shows the link where it has to, and hides it where it
       shouldn't be displayed.
    8. Repeat for Intranet
    9. Sign off :-D
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f27ed123be8ac1f0ecd76cd54ed9c2a8e591aefe
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 11 12:13:00 2023 -0300

    Bug 16223: DBRev 23.06.00.035
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d4da5419dcd5817eb81afa2b83f09d29ad916708
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 11 12:01:14 2023 -0300

    Bug 16223: Tidy
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 693b52f5aac2fc79cc019feb44f5aadfc90a7c9c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 11 11:38:37 2023 -0300

    Bug 16223: Mark lift_after_payment as boolean in schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bc94bf81adbbb55369e3fb70bf9763f899ab5c66
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 11 11:33:38 2023 -0300

    Bug 16223: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b12f3515d88886d0a8bb59c5f72a76a2f4b51afd
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 11 11:32:25 2023 -0300

    Bug 16223: (QA follow-up) Adjust DB changes
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ad29aae5c3290f6be276a2a48a94d27f3fd80026
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 15 09:01:06 2023 +0000

    Bug 16223: (QA follow-up) Add filter, remove superfluous condition
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8d2bb62d3cfde429ab05620fbb8e1f6e20b895d5
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Fri Mar 17 09:55:39 2023 +0200

    Bug 16223: Require fee limit only if "Lift after payment" is set as "Yes"
    
    Fee limit should only be required if restriction is
    meant to be lifted after payment. This patch makes
    "Fee limit" input field required based on value of
    "Lift after payment" select field.
    
    To test:
    1. Create a new restriction.
    2. "Lift after payment" should be set as "No".
    3. Change value as "Yes".
    => "Fee limit" should now have "Required" text
    after input field.
    4. Try to save restriction.
    => Text "This field is required" should be
    displayed after "Fee limit".
    5. Change "Lift after payment" back to "No".
    => Both texts should now be lifted.
    
    Also test with existing restriction and make sure
    restrictions are still saved without problems.
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c04e297f39e6b8df73490b1bf29092eccaf00b7f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 11 09:54:05 2022 +0000

    Bug 16223: (QA follow-up) Move trigger to apply
    
    This patch moves the del_restrictions_after_payment from before the
    actual credit application call inside Koha::Account::pay to after the
    application of credits to debits in Koha::Account::Line::apply.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cba9824e6d53fc77e75a041ab8e529e3717e4ba6
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Nov 11 09:49:50 2022 +0000

    Bug 16223: (QA follow-up) Remove GetDebarments
    
    We remove the GetDebarments routine in 31095.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 335f68eb51679fd58b25cf5a563c0cb7b2237dfa
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Thu Sep 22 12:19:03 2022 +0300

    Bug 16223: Add ability to define liftable restrictions
    
    Some libraries debar Patrons at the end of the year for having unpaid fines,
    like in Bug 15157. Currently librarians have to manually remove this type of
    debarments after Patron has paid his/her fines.
    
    This patch adds ability to create restrictions which are lifted after
    patron pays ceratain amount of fines.
    
    To test:
    1. Apply this patch.
    2. Restart your services if needed.
    3. Navigate to page restrictions.pl.
    => Note that table has two new colums in it, "Lift after payment?" and "Fee limit".
    4. Add new restriction which has "Lift after payment?" set
    as Yes and fee limit as 5.
    5. Create fees for a patron so they exceed fee limit e.g. 10
    6. Add restriction made in step 2. for the patron
    7. Pay patrons fees partially so that they go under fee limit
    => Note that patrons restriction should now be lifted.
    
    Also prove t/db_dependent/Patron/Borrower_Debarments.t.
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: Anneli Österman <anneli.osterman@koha-suomi.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c894703b7c160b5b254514626dfc00c73c132e9c
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Wed Sep 14 14:51:51 2022 +0300

    Bug 16223: Add new columns to table restriction_types
    
    This patch adds two new columns, lift_after_payment and fee_limit,
    to table restriction_types. These colums are used to control
    lifting patrons restrictions after paying their fees.
    
    To test:
    1. Apply this patch.
    2. Update your database via updatedatabase.pl.
    => Confirm your table restriction_types has two new columns.
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: Anneli Österman <anneli.osterman@koha-suomi.fi>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ba8d05cbc8f4a5120b2aafaaaa45714d76059723
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Thu Sep 14 14:19:14 2023 +0000

    Bug 33087: OPACHoldsIfAvailableAtPickup considers On order as available
    
    if OPACHoldsIfAvailableAtPickup is set to "Don't allow" (i.e. if patrons cannot place holds on items that are available at their library), patrons cannot place holds on items that are on order (or any negative not for loan value) for pickup at their library.
    
    Technically, those items are not "available", so they shouldn't be affected by this system preference.
    
    To replicate:
    
    Prerequisites :
    
    -  Have at least two libraries (I used the sample libraries)
    
    -  Have a patron in one of the libraries (I used Henry Acevedo), make sure you know the user id and password for that patron
    
    -  Make sure the circulation rules allow holds for the patron category
    
    1. Set OPACHoldsIfAvailableAtPickup to "Don't allow"
    
       1.1. Go to Administration > Global system preference
       1.2. Search for OPACHoldsIfAvailableAtPickup
       1.3. Change the value to "Don't allow"
       1.4. Click "Save all Circulation preferences"
    
    2. Make an item "On order" at the patron's library (Henry Acevedo is at Midway)
    
       2.1. If needed, create a bibliographic record and item
       2.2. Edit the item to assign the "On order" not for loan status
       2.3. Change the home and holding library to the patron's library (Midway)
       2.4. Click "Save changes"
    
    3. Try to place a hold on the item through the OPAC
    
       3.1. In the OPAC, log in as the patron
       3.2. Search for the item
       3.3. Click "Place hold"
    
       --> Notice the patron's library is greyed out in the pickup location drop-down menu"
    
    4. Apply the patch
    
    5. Repeat step 3
    
       --> Notice you can select the patron's library in the pickup location drop-down menu and place a hold with it
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 70fc698899f51b9f17bd38a91df75bf3c3274e1d
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Wed Dec 14 08:36:01 2022 +0200

    Bug 26558: Make guarantor information persist despite an error
    
    When one tries to create an account with patron guarantor and
    error occurs (already used username, wrong age etc.), guarantor
    information is lost. This patch always saves added patron
    guarantor information to the template param new_guarantors.
    
    To test:
    1. Create a new account but cause an error that will keep the
    account from saving (enter the wrong age for a category or
    give the patron a username that's already being used).
    2. Search for and select a guarantor.
    3. Try to save the account and wait for the "The following
    fields are wrong. Please fix them." message.
    => Note that the guarantor information is gone and you need
    to search for and select the guarantor again.
    4. Apply this patch.
    5. Repeat steps 1.-3.
    => Note that guarantor information hasn't been lost.
    
    This patch also removes code block from duplicate patron
    check because we now save param new_guarantors even if
    error doesn't occur.
    
    To test:
    1. Create a new account but cause a duplicate patron error.
    2. Search for and select a guarantor.
    3. Try to save the account.
    => Guarantor information should persist.
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2f8a24bd58eac12499ad92eddcbcfa1e5a0e91f4
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Fri Jan 27 21:05:38 2023 +0000

    Bug 32740: Add a new option patron home library to OverdueNoticeFrom
    
    This patch add 'patron home library' option to the OverdueNoticeFrom preference. When it's selected notification messages for overdues will be bundled and sent from the borrowing user's home library
    
    To Test
    1. Create 3 libraries B1, B2 and B3
        1.1. Go to Koha administration, click on Libraries
        1.2. Click New library
        1.3. Fill the Library Code (ex. B1), Name(ex. B1) and email(ex. b1@test.com) fields.
    2. Create a user belonging to B1
        2.1. Go to patron module, click on New patron and patron
        2.2. Fill the Surname,Card number,Primary email,Card number field and select B1 as Library.
    3. Create 2 notices : the first belongs to B2 and the second belong to B3
        3.1. Go to Cataloging module and click on new
        3.2. field the required field (000 subfield 0, 003 subfield 0,  005 subfield 0, 008 subfield 0, 040 subfield c,245 subfield a, and 942 subfield c )
        3.3. Click on save
        3.4. In the item form, Select Home library = B2 and Current library = B2 and type a Barcode.
        3.5. Repeat 3.1 3.2 3.3 3.4 to create a second notice belong to B3
    4. Have (or create) a default notice for all branches in Notices and Slips Module
    5. Make sure you connected to branch B2 or Switch to branch B2
    6. checkout item I2 (belonging to B2) to the user created in step 2 (specifying as due date the day before (1 day overdue))
    7. switch to branch B3
    8. checkout item I3 (belonging to B3) to the user created in step 2 (specifying as due date the day before (1 day overdue))
    9. make sure you have defined 'Overdue notice/status triggers' for that patron category, ie with Delay=1 so that 'Overdue Notice' is selected and 'Email' is checked.
    Note: we have a user belong to B1, two item: I2 belong to B2, I3 belong to B3 and the user has borrowed I2 from B2 and I3 from B3.
    10. Test
        10.1. Search for OverdueNoticeFrom in System preferences and select item home library
        10.2. from cli run 'perl ./misc/cronjobs/overdue_notices.pl'
            => Two new entries will be generated in message_queue DB table, coming from different branches that have the SAME list of overdue items.
            => The sender address is the item home library address for each entry.
    11. Apply the patch
    12. Search for OverdueNoticeFrom in System preferences
            => There is now 'patron home library' in the options list
    13. Select patron home library
    14. from cli run 'perl ./misc/cronjobs/overdue_notices.pl'
            => You will see that only one message had been created. Its content shows both B2 and B3 overdue items
            => The sender address matches B1 address (the patron home library).
    15. Search for OverdueNoticeFrom in System preferences and select cron
    16. from cli run './misc/cronjobs/overdue_notices.pl --frombranch patron-homebranch'
        => you will get the same result at step 14
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Hinemoea Viault <hinemoea.viault@inlibro.com>
    
    Was failing the qa script, so I perltidied the changed lines.
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a19f1ffbbd3b87aec9f243b161f238730ff4639c
Author: Hinemoea Viault <hinemoea.viault@inlibro.com>
Date:   Tue Jun 6 12:23:10 2023 -0400

    Bug 26978: Add item type option to batch extend due date tool
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fadf69f224fb0513791fefb93d472e2d576bd09c
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jun 29 15:20:32 2023 -0400

    Bug 34160: Hyperlink item barcode to the item more details editor from the holds queue viewer
    
    Sometimes librarians fail to find an item on the shelf for a hold and need to mark the item as lost. In these cases it would be helpful to link the barcode to the item's "more details" form in the same way we do for the standard details item barcode hyperlink.
    
    Test Plan:
    1) View the holds queue, note the item barcode is not a hyperlink
    2) Apply this patch
    3) Reload the page, note the item barcode is a hyperlink to the more
       details page for that item!
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 214a30e65779dfe7a5d22fe7fa23a4164aabe2c6
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Mar 8 09:53:07 2023 -0500

    Bug 33170: Refactor MARCItemFieldsToOrder to make adding more fields trivial
    
    There is no need for this code to have a hard coded list of fields directly in the code.
    Any invalid keys would be skipped anyway.
    If we refactor this code then adding new fields will be much simpler.
    
    Test Plan:
    1) Set up your MARCItemFieldsToOrder, verify everything is working
    2) Apply this patch
    3) Restart all the things!
    4) Verify there has been no change to the MARCItemFieldsToOrder
       functionality
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bfd65a2bda8af2403c0a09150c85c5eafe810607
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Sep 7 15:38:00 2023 +0000

    Bug 32335: (QA follow-up) Add 'btn-primary' instead of 'btn-default' class to dialog Save buttons
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 00dcf58a13d5f3c54676729a0dab7a605fe50616
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Sep 7 15:37:29 2023 +0000

    Bug 32335: (QA follow-up) Add 'Actions' label to 'Actions' column
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4ceb5ac4551f5a7177a8749ebd4832d035abc3f4
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Nov 23 13:24:12 2022 +0000

    Bug 32335: Allow stock rotation items to be advanced when in transit
    
    This patch adjusts the logic so that we check:
    1 - If there are less than 2 stages we disable the 'Move to next stage' button
    2 - If the item is not in transit, we show move to next normally
    3 - If the item is in transit (and there is more than 1 stage) the button is enabled with a note about transfer
    
    To test:
    1 - Setup a rota with multiple stages
    2 - Add an item
    3 - Advance to next stage
    4 - Observe 'Move to next stage' button is disabled
    5 - Check item in at destination
    6 - Reload rota - observe 'Move to next stage' is enabled
    7 - Apply patch
    8 - Click 'Move to next stage'
    9 - Note button is not disabled
    10 - Hover and confirm note about transit
    11 - Click 'Move to next stage'
    12 - Checkin item at wrong branch, confirm it is correctly directed to correct stage
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fecd7a0a275c4f44365a88a0fedefae6d43d3e6f
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Sep 1 13:02:26 2023 -0400

    Bug 33239: (QA follow-up) Tidy and improve description
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5c531ead879630f0dce59646a2a109b595edf31a
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Mar 15 16:50:40 2023 -1000

    Bug 33239: Add the ability to run borrowers-force-messaging-defaults.pl only on a specified message name
    
    Test plan:
    1) Select a patron A
    2) Change all the message prefs away from defaults.
    3) Run misc/maintenance/borrowers-force-messaging-defaults.pl --doit --message-name Item_due
        Verify that patron A prefs changed only for 'Item due'
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3d3e28c7bbcce0738980a357705a72ffc5572930
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri May 26 08:19:36 2023 +0000

    Bug 33843: Use filter_by_last_update in Koha::Notice::Util
    
    Resolve FIXME in sub _get_domain_count by using new logic
    from bug 33837.
    
    Test plan:
    Run t/db_dependent/Koha/Notice_Util.t.
    This triggers the _get_domain_count call using the filter.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9e4b0c4c72681919d560c29ff635b96aec6504ed
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 21 14:32:11 2023 +0200

    Bug 33837: Remove datetime parameter
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] Perltidied one line in cleanup_database.pl.
    
    Bug 33837: Perl tidy block in Objects.t
    
    WARN   t/db_dependent/Koha/Objects.t
       WARN   tidiness
                    The file is less tidy than before (bad/messy lines before: 319, now: 320)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ef0868a21b2c439b5fd7f937d07552e9cc298a0f
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri May 26 07:26:15 2023 +0000

    Bug 33837: Replace days_inclusive by min_days
    
    Instead of passing days and days_inclusive, this patch adds
    min_days as replacement. Since days_inclusive is not widely
    used, this can be done easily. It removes the confusion
    whether days_inclusive impacted other parameters or not.
    
    Test plan:
    Run t/db_dependent/Koha/Objects.t
    Run t/db_dependent/Koha/Old/Checkouts.t
    Run t/db_dependent/Koha/Patrons.t (verifying the change in the
    Koha::Patrons module for filtering by expiration date).
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 587bcae366cc9886ce2db113a002ece062d12cc7
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed May 17 11:22:08 2023 +0000

    Bug 33837: filter_by_last_update: Add older_than and younger_than
    
    Test plan:
    Run t/db_dependent/Koha/Objects.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d3e286b20464ec5abd45cb93df07fa014889ec12
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu May 25 14:25:32 2023 +0000

    Bug 33837: Add unit test
    
    Test plan:
    Run t/db_dependent/Koha/Objects.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 47288e23364b21e9dbef452ffbbf9c4678d6bcac
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon May 15 09:48:58 2023 +0000

    Bug 33837: Add datetime comparison to filter_by_last_update
    
    Test plan:
    Verify that filter_by_last_update still works as expected by
    running cleanup_database.pl with --messages DAYS parameter.
    Look at the oldest messages.message_date (or insert one).
    Run with -days X where today - X is before that date.
    Run with -days Y where today - Y is just after it.
    
    Note: misc/cronjobs/cleanup_database.pl -confirm -messages -1 -v
    will remove all messages including one you inserted just now.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0b5bf20c996a0bf324ad6ed5bced3161fd2d58dd
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 11 10:06:51 2023 -0300

    Bug 21246: DBRev 23.06.00.034
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fe933e27717eb8f71835791d9dfeb0d9d3af16e3
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jul 28 09:14:59 2023 +0000

    Bug 21246: Set ShowLastPatronCount to 1 on update
    
    Setting the new preference to 1 will allow us to keep the
    current behaviour on update. The library can then actively
    decide to increase the number to whatever they prefer.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 558c801b28032b18c3e2191f5fc238399cc3d24a
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Jul 24 12:22:57 2023 -0400

    Bug 21246: (QA follow-up) Add new syspref to control how many previous patrons are displayed
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Tidied the atomicupdate file.
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 064788babfdd25024b15d730fcccad2389665f5d
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jun 29 15:07:04 2023 -0400

    Bug 21246: Extend the 'Last patron' navigation feature to 'Last 10 patrons'
    
    This retains the "last patron" link, but extends it to add a dropdown
    containg the last 10 patrons.
    
    A future enhancement to control how many patrons to retain would
    complement this well.
    
    1) Enable showLastPatron
    2) Visit two patrons details pages
    3) Note "Last patron" link displays and links to the last visited patron
    4) Log out
    5) Apply this patch
    6) Log in
    7) Visit the patron details page for a few patrons
    8) Note the "Last patron" link behaves as is did previously
    9) Note the split button has a pulldown with the other previous patrons
    10) Verify that only the last 10 patrons are retained in the pulldown
    11) Verify that if you visit a patron who is already in the list
        they get moved to the top of the list
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fe21bbad2abcacba1091d80a2f75490a8be8ad17
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jul 21 13:00:10 2023 +0000

    Bug 28130: (QA follow-up) Tidy
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 73739dd0b6458faca14c14f7c0dd950f89a686e3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jul 21 12:56:51 2023 +0000

    Bug 28130: (QA follow-up) Use schema result to fetch alerts to allow for prefetch
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e790f75c0dedd30b20ce4bf8828954a64a5520e5
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed May 24 21:53:38 2023 +0000

    Bug 28130: Manage subscription alerts on OPAC
    
    This patch adds an 'Alert subscriptions' tab to the patron's account on the OPAC, so they can easily view or cancel email alerts they have subscribed to.
    
    To test:
    
    1. Subscribe to email alerts for one or more subscriptions via the OPAC
    2. Go to your account, notice the new 'Alert subscriptions' menu option, click here
    3. Confirm your subscribed alerts show here. Confirm the table sorting works etc (JS enabled).
    4. Test unsubscribing from email alerts, make sure the confirmation pop-up works as expected (JS enabled).
    5. Confirm that, when unsubscribing, you are redirected back to this page.
    6. Confirm the menu option disappears from the left sidebar navigation if you have no alert subscriptions.
    
    Sponsored-by: Bibliotheksservice-Zentrum Baden-Wuerttemberg
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 84e5c570db97fe21997a89ead337f9008f57dd4c
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue May 23 05:09:10 2023 +0000

    Bug 28130: Manage a patron's subscription alerts
    
    This enhancement adds an 'Alert subscriptions' page to a patron account to easily view or cancel email alerts the patron has subscribed to.
    
    To test:
    
    1. Go to Cataloging. Create a biblio.
    2. Go to Tools -> Notices & slips. Create a notice under the "Serials (new issue)" module, if you don't already have one.
    3. Go to Serials. Create a subscription. Link the biblio you just created. Add info like the callnumber, location, library. Choose your notice under Patron notification. Fill out the remaining details and save your subscription.
    4. Open this record in the OPAC. Under the Subscriptions tab, click the button to "Subscribe to email notification on new issues"
    5. Go back to the staff interface. Go to your patron account.
    6. Notice there is a new "Alert subscriptions" tab in the left sidebar menu. The number in brackets should say 1, for the subscription you just enabled email alerts.
    7. Click into the page. Confirm your subscription shows in the table.
    8. Click the button to unsubscribe. A confirmation should pop up. Confirm you can cancel the unsubscribe action. Then confirm you can unsubscribe using this button.
    9. Confirm tests pass t/db_dependent/Koha/Patron.t
    
    Sponsored-by: Bibliotheksservice-Zentrum Baden-Wuerttemberg
    Signed-off-by: Christian Stelzenmüller <christian.stelzenmueller@bsz-bw.de>
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ba298ebdf91d91110243f17080c6da7ecc252ca9
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Sep 1 12:47:47 2023 -0400

    Bug 33204: (QA follow-up) Improve option description
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 20a3b135164cd6a719af6c9c7b54f9abc121a9e7
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Mar 10 20:32:56 2023 -1000

    Bug 33204: Add the ability to filter on patron library for borrowers-force-messaging-defaults.pl
    
    Like filter on category Bug 19454, it would be helpful to filter on a specified library for misc/maintenance/borrowers-force-messaging-defaults.pl
    
    Test plan:
    1) Select two patrons A and B in say libraries L1 and L2.
    2) Change the msg prefs for A and B away from defaults.
    3) Run misc/maintenance/borrowers-force-messaging-defaults.pl -doit -library L1
        Verify that patron A changed and patron B did not.
    4) Run with both category and library filters
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 813aaa69699d98cdef11ed7097fcf426df2f68ef
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 10 10:51:38 2023 -0300

    Bug 34064: Tidy script
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 37aa5a9b01ceec08cc82cbaa61e074331dc84779
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Jul 5 05:47:54 2023 +0000

    Bug 34064: Add SQL::Translator dependency to cpanfile
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c30dd8d6b0e94cf4b43e513a4ebd713f91703334
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue Jun 20 06:20:00 2023 +0000

    Bug 34064: Remove no_batch_alters option
    
    This change removes the no_batch_alters option.
    
    When working with real world databases, you really want to use batch
    alters to group together changes. Otherwise, the output becomes
    too overwhelming/unwieldy.
    
    On real world databases, I'm noticing big discrepancies, although
    I think most of the time this is a difference in the collation
    at the column level.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d3bfc5d5b7f61b287391a6871f080ed63ced246
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue Jun 20 04:18:09 2023 +0000

    Bug 34064: Add an audit script to compare database with kohastructure.sql
    
    This script can take a connected database handle and compare that database
    schema against kohastructure.sql to see what changes the database would
    need in order to match kohastructure.sql
    
    NOTE: It uses SQL::Translation::Diff, which is installed with DBIx::Class.
    
    WARNING: The diff doesn't seem to compare comments, so that difference
    won't appear in the output. If we wanted, we could easily enhance the
    audit_database.pl script to also compare comments.
    
    WARNING: The output is a proposed series of SQL commands. While they
    are useful to review, they won't always duplicate the changes done
    by updatedatabase.pl, so it's important to carefully analyze the output.
    The key purpose of this audit script is to just highlight the differences
    between the two.
    
    Test plan:
    0. Apply patch
    1. vi ./installer/data/mysql/kohastructure.sql
    2. Comment out some columns, change NULL status, or whatever you like
    3. perl misc/maintenance/audit_database.pl \
        --filename /kohadevbox/koha/installer/data/mysql/kohastructure.sql
    4. Note that the output includes SQL commands to change the database
    to match the new kohastructure.sql
    
    5a. Try using koha-foreach and note that the database name appears above
    the database comparison
    5b. koha-foreach "perl misc/maintenance/audit_database.pl \
        --filename /kohadevbox/koha/installer/data/mysql/kohastructure.sql"
    
    Signed-off-by: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 51e67a264271243dd4762a5050d2ec6d0e5fa3a6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 10 10:46:06 2023 -0300

    Bug 34075: DBRev 23.06.00.033
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4f9fa72828ddeccc31a541de6065a05e6c72f697
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 19 09:32:15 2023 +0200

    Bug 34075: Improve JS code
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6247cd9b5efec71ab61828f77c42a42bfadf25c0
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jun 23 13:03:40 2023 +0000

    Bug 34075: (follow-up) Fixes for QA tool errors
    
    - Added missing filter to template variable
    - Correct spelling in atomicupdate
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 537132da7bec95958cc548a915733c1ff76cce14
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jun 21 12:41:21 2023 +0000

    Bug 34075: Add DefaultAuthorityTab system preference
    
    This patch adds a new system preference, DefaultAuthorityTab.
    When set, this will choose the default display on the authorities details
    page.
    
    To test:
    1 - Apply patch, update database
    2 - View an authority detail
    3 - You should default to the 0XX or first tab
    4 - Set DefaultAuthorityTab to a number that there is no tab for in your authority
    5 - Reload and verify details page loads the first tba
    6 - Set DefaultAuthorityTab to 1XX or another tab that exists in your record
    7 - Reload the details and confirm the correct tab is selected
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f09c5e045e3c6c21bada86018d2b15ea04956677
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Jul 16 11:29:19 2023 +0000

    Bug 31731: (QA follow-up) Add pull down to DefaultLongOverdueLostValue and DefaultLongOverdueChargeValue preferences
    
    Adds LOST pull downs to 2 more preferences.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0f3a7074cb7be32ab059226675455042c3706dec
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jul 10 13:46:48 2023 +0000

    Bug 31731: Offer user a dropdown of authorized values instead of a text field in preferences
    
    This patch updates the system preferences interface so that preferences
    which ask for a single authorized value can offer a dropdown menu of
    choices instead of a text field.
    
    The patch also updates a few existing preferences to use the new
    feature: BundleLostValue, BundleNotLoanValue, and
    ClaimReturnedLostValue.
    
    To test, apply the patch and restart services.
    
    - Go to Administration -> System preferences and search for "authorized
      value."
    - The search results should include the entries for BundleLostValue,
      BundleNotLoanValue, and ClaimReturnedLostValue.
    - Confirm that the dropdowns show the correct authorized value category
      (LOST or NOT_LOAN)
    - Confirm that setting or unsetting each of the preferences works
      correctly.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 538e55afef38fa3ce1d917d926c8b5d56126b0e8
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Sep 15 15:56:59 2021 -0300

    Bug 29033: Add C4::Context->multivalue_preference
    
    I've seen several places in which a syspref is retrieved and then
    splitted using split and the fact they are pipe-separated strings.
    
    It seems it would be simple (and handy) to add a method to do that.
    
    To test:
    1. Apply this patch
    2. Run:
       $ kshell
      k$ prove t/Context.t
    => SUCCESS: Tests pass, a pipe-separated syspref is correctly retrieved
    as an arrayref.
    3. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 77303901381b84eaec2bee18a5df1d4ab1bdb6f7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 10 10:21:15 2023 -0300

    Bug 25560: DBRev 23.06.00.032
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9705aaec772128be3c1ecdcc1fd6676234e83d77
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Mon Aug 1 18:58:19 2022 +0000

    Bug 25560: Unit tests
    
    Test plan:
    1. Run tests
    sudo koha-shell <instancename>
    prove t/db_dependent/Circulation/issue.t
    
    Sponsored-By: Waikato Institute of Technology, NZ
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 54b52815f60b8de46b34e459039d1bafe0fbcaf0
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Tue Aug 2 17:05:39 2022 +1200

    Bug 25560: Define item-type specific rules in UpdateNotForLoanStatusOnCheckin
    
    This enhancement respects the 'item-level_itypes' syspref, so will look
    at the authoritative item type when determining to update the notforloan
    status.
    
    Test plan:
    1. Set -1 to 'Ordered', and 1 to 'Not for Loan' in Administration > Authorised values > NOT_LOAN
    
    2. Make sure the 'item-level_itypes' syspref is set to 'specific item'
    
    3. Add the following rules in UpdateNotForLoanStatusOnCheckin system
    preference:
    -1: 0
    
    4. Apply patch & update database
    cd installer/data/mysql
    sudo koha-shell <instancename>
    ./updatedatabase.pl
    
    5. Restart plack
    
    6. Observe the UpdateNotForLoanStatusOnCheckin syspref values have
    updated to the following format:
    _ALL_:
     -1: 0
    
    7. Check in an 'Ordered' item of any item type and confirm it is changed
    to 'Available for loan' (NOT_LOAN=0)
    
    8. Reset the UpdateNotForLoanStatusOnCheckin syspref to:
    _ALL_:
     -1: 0
    
    CD:
     -1: 2
     2: 0
    
    9. Check-in an 'ordered' (NOT_LOAN=-1) CD item (item level itype='CD') and observe the item's notforloan status updates to 'Staff collection' (NOT_LOAN=2). This is because the _ALL_ rule does not override all other rules.
    
    10. Check-in a 'Staff collection' (NOT_LOAN=2) CD item (item level itype='CD') and
    observe the item's notforloan status updates to 'Available for loan'
    (NOT_LOAN=0)
    
    11. Check-in a 'Staff collection' (NOT_LOAN=2) DVD item (item level itype='DVD') and observe
    the items notforloan status does not change
    
    12. Check-in an 'ordered' (NOT_LOAN=-1) DVD item (item level itype='DVD') and observe the items notforloan status updates to 'Available for loan' (NOT_LOAN=0)
    
    Sponsored-By: Waikato Institute of Technology, NZ
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 123d021c75dfa47a94beb6e1f3a11a6583215c7e
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Tue Aug 2 17:04:34 2022 +1200

    Bug 25560: Template changes
    
    Sponsored-by: Waikato Institute of Technology, New Zealand
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 53cd638098d9258b69352a1750b62267cfebfb55
Author: Alex Buckley <alexbuckley@catalyst.net.nz>
Date:   Tue Aug 2 15:05:33 2022 +1200

    Bug 25560: Database changes
    
    Sponsored-by: Waikato Institute of Technology, New Zealand
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4506145b9144ae15854d51daad1cddedd467fb6f
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Wed Apr 5 15:51:33 2023 -0400

    Bug 33426: Add DataTables saveState to suggestion.tt
    
    To test:
    1. In the staff client, go to Purchase Suggestion management page and
       add a suggestion if needed to make the table display.
    2. Make some changes to the table settings (hide/show columns, change
       sort column, and/or change number of rows to display)
    3. Navigate to a different page.
    4. Navigate back to Purchase Suggestions page. Note that the table
       settings have been reset.
    5. Apply patch and restart_all
    6. Repeat steps 1-4. Note that this time the changes to the table
       settings were preserved.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a45e79c1f4fc6cb168a75a11b79e9145e65321d5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 10 09:53:19 2023 -0300

    Bug 31692: Tidy and rebase fix
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 889853bc9d7fca6bea567181b161988528ddf0c2
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Thu Nov 3 20:50:33 2022 +0000

    Bug 31692: (follow-up) Adjust reserves.item_level_hold
    
    Original patch missed handling reserves.item_level_hold column.
    
    To test:
    1. prove t/db_dependent/Koha/Hold.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b0f49d5dafa4e2dcc05e1e85c13cde3b66f041f5
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Wed Oct 5 16:04:59 2022 +0000

    Bug 31692: Allow librarians to change hold type in staff client
    
    To test:
    1. Apply patch
    2. Add item level hold to a record/item, make sure patron has no other
       holds on that record
    3. Go to /cgi-bin/koha/reserve/request.pl?biblionumber=xxx where xxx is
       the record you placed the hold for
    4. Under "Existing holds" table, in "Details" column you should see
       "Only item <barcode>" dropdown
    5. Select "Next available" from the dropdown
    6. Click Update hold(s)
    7. Observe dropdown is gone and cell value has changed from
       "Only item <barcode>" to "Next available"
    8. Cancel the hold and add two item level holds for the same patron
    9. Under "Existing holds" table, in "Details" column you should see
       "Only item <barcode>", but no select dropdown
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 26afea24f82c8eaaa7442a8c4edffc20545fe0d8
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Wed Oct 5 14:54:03 2022 +0000

    Bug 31692: Add Koha::Hold::change_type and unit tests
    
    To test:
    1. prove t/db_dependent/Koha/Hold.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b703d978168b462453fed0c3830ec85fa201546c
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Fri Sep 29 09:27:30 2023 -1000

    Bug 26053: Add unit test for Koha::Patron::Restriction
    
    Run:
    prove t/db_dependent/Koha/Patron/Restriction.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 79be5f361bfc77a9767511d5965e4ed9f4598f4b
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Sep 21 12:12:46 2023 -1000

    Bug 26053: Distinguish expired patron restrictions
    
    On the patron detail page, in restrictions table to show that the restriction has expired.
    With text and a grey color line.
    Uses 'text-muted' boostrap class (already used in OPAC).
    
    Test plan :
    1) Go to a patron details page cgi-bin/koha/members/moremember.pl
    2) Create 2 restrictions in the future
    3) Edit in database to se the first restriction into the past
    4) Create a retriction without date
    5) Check you see on expired line text : (expired)
    6) Check line is grey
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5b25b26f70c21c609793f10706c04c9dbce4a5ad
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Oct 9 16:37:22 2023 +0100

    Bug 35014: Only set time for enable-time flatpickr
    
    This patch adds a check to the onChange function such that we only
    attempt to set the default time on change for time enabled flatpickrs
    when the date is entered manually.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 69a19fb5261bf1f7df4cba889a7b33b40bf57005
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 10 09:43:14 2023 -0300

    Bug 12532: DBRev 23.06.00.031
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9dc1852d8fbb65294c5d725bfdb8df89485e99f1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Sep 20 15:09:26 2023 +0100

    Bug 12532: (follow-up) Catch more cases in tests
    
    This patch added lots more cases to the unit tests to try and catch all
    the new functionality.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b9325a9177668e346ea79f33391143cc57888294
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Sep 19 11:14:42 2023 +0200

    Bug 12532: Fix test
    
    The mock was working. The problem was that the to_address of the notice
    was set from the previous send.
    
    A fix would be to update the message, but it seems better to simply
    re-enqueue it.
    
    This patch also use Koha::Notice::Messages.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 273440924d323b94c67797e52fe062554c61a41b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Sep 18 16:29:28 2023 +0100

    Bug 12532: (QA follow-up) Fix issues highlighted by unit tests
    
    * YesNo preferences yield '1' or '0' not 'yes' and 'no'.
    * Set message_cc address so we can report later that the message went to
      a cc address.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 50f5458d27785ded9592af08d290e71eafd36df8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Sep 18 15:26:31 2023 +0100

    Bug 12532: DBIC Schema
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eef928e5d901a698c21ac7ea86b20075f39c733d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Sep 19 07:38:40 2023 +0100

    Bug 12532: Expose CC address in patron notices display
    
    Add the CC address into the patrons notices on the staff client to
    highlight that the message was copied to another user.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 157bab3b90356b38afe4573a5653736737cd46be
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Sep 18 15:24:35 2023 +0100

    Bug 12532: (QA follow-up) Add cc_address to message_queue
    
    Add the cc_address field to the message_queue so we may report back that
    an email was copied to the guarantor email addresses.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 91a5d20e24a2430121093505c3e7f78763cc5052
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Sep 18 15:19:05 2023 +0100

    Bug 12532: (QA follow-up) Add tests for SendQueuedMessages
    
    This patch adds unit tests for the changes made to
    _send_message_by_email for Guarantor CC
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5c5c335e6b2bec2d512ad42769ae4db1266b4ce2
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Sep 18 14:04:11 2023 +0100

    Bug 12532: (QA follow-up) Remove defunkt test
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0a35ec19e1a2ce6b522e327315f37530b9a66865
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Sep 18 13:31:59 2023 +0100

    Bug 12532: (QA follow-up) More cleanup
    
    Minor QA cleanup, perltidy, remove Data::Dumper and clarify warn
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 54c9b488dcc5514ae001c9fa547470eb980d4a39
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Fri Aug 25 23:39:24 2023 +0000

    Bug 12532: (follow-up) Send email to guarantor using the CC field
    
    In This patch the CC field is used to send the message to the guarantors. If the «to» field is empty (the guarantee has no address) we send the message «to» the garantors.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 82a4d40890d0cc56274db68cc23509f4fe1dc3a5
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 10 19:25:21 2023 +0100

    Bug 12532: (QA follow-up) Clean up notice_email_address
    
    Reduce some of the code duplication
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7517fb6235516827646fedf1ce0aeff6ca9937dd
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 10 18:11:52 2023 +0100

    Bug 12532: (QA follow-up) Undo changes to Koha::Email
    
    The changes here aren't required (Email::Address already deals with
    lists of addresses internally)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dc629ea7b5775a3cad92e18cc170c576bbaf58a3
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Wed Apr 26 15:02:02 2023 +0000

    Bug 12532: Send email to guarantee and guarantor
    
    This patch allows guarantors to receive emails sended to their
    guarentees. This patch is a rebase of the previous patches.
    I took all the content of previous commit and put it in one commit.
    
    TO TEST:
    
    Before applying:
    1) Search, or create, a patron with guarantor.
    2) For both guarantors and guarantees:
       - Add an email address
       - Update the 'Patron messaging preferences' section so that an email is sent for item checkouts
    3) Checkout an item. An email should be sent only to the guarantee.
    4) Apply the patch.
    5) Run updatedatabase.pl
    6) Run prove t/db_dependent/Members.t and prove t/db_dependent/Letters.t
    7) Enable 'RedirectGuaranteeEmail'
    8) Run misc/cronjobs/process_message_queue.pl
    9) Notice that the email should be sended to both the guarantee AND the
    guarantor.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 101eabfd9dd332647e76698f379cd13e24454381
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Oct 10 14:16:11 2023 +0200

    Bug 34828: Fix test
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ed6a556df31631bb57297bd811ecd1000f799d4f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Oct 9 11:44:06 2023 +0100

    Bug 23241: Remove unused koha-index-daemon-ctl.sh
    
    This script was never fully promoted or documented and it requires third
    party libraries are installed to use. This patch removes it from the
    repository and the Makefile so it is no longer installed.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4b1d4ca170be6d35e72953a4eb233f4ddf4037a4
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Oct 9 19:58:50 2023 +0000

    Bug 35015: (QA follow-up) Fix paid transactions filter in the staff interface
    
    Same problem: we added a column without adjusting the filter.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7cf209a550260eb1dc60dd7457c8b8e197a9b5ef
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Mon Oct 9 16:11:48 2023 +0000

    Bug 35015: Adjust column index in fnFilter
    
    This patch fixes the column index in the call to fnFilter following the
    addition of a new column to the table in bug 32341
    
    Test plan:
    1) Add some charges to a patron account
    2) Pay some of these charges so that they are no longer outstanding
    3) In the OPAC log in as that patron and navigate to the Charges tab in
       their account
    4) Observe that all charges are listed, even if they have been paid and
       clicking the Show all transactions button has no effect even if
       clicked multiple times between the different filtering options
    5) Apply patch
    6) Refresh page and now the settled charges should be filtered out
    7) Click the Show all transactions button and it should correctly update
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 40f7a1cc2f5f7b5acae67da54bd137387987e07b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 9 15:21:30 2023 +0000

    Bug 35013: Font Awesome icons broken in self checkout and self checkin
    
    This patch updates the way Font Awesome icon assets are included on the
    self checkout and self checkin pages. This change should have been made
    during the upgrade to Font Awesome 6 (Bug 32910).
    
    To test, apply the patch and make sure both SelfCheckInModule and
    WebBasedSelfCheck system preferences are enabled.
    
    - Go to the self checkout module (/cgi-bin/koha/sco/sco-main.pl) and log
      in.
    - Check that Font Awesome icons are working: You should see an
      information icon by the "Help" link in the header, and a check mark
      icon in the "Finish" button.
    - Click the help link to confirm that the icon appears there too.
    - Go to the self checkin module (/cgi-bin/koha/sci/sci-main.pl).
    - In the header you should see the information icon by the help link and
      an icon with the "Log out" link too.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dad04bbf0a1915930a95bdb3fea73f47602be884
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Sun Oct 8 22:57:29 2023 -1000

    Bug 35010: In record checkout history do not show anonymous patron link
    
    In a biblio record checkout history, when a checkout is anonymized the
    patron id has been replaced by anonymous patron id.
    In this case we should not show anonymous patron link.
    It looks like a real patron did this checkout.
    
    Test plan :
    1) Set an existing patron id in system preference 'AnonymousPatron'
    2) Perform anonymisation on old checkouts (or edit database manually)
    3) Look at a record checkout history with old checkouts
    => You see 'Anonymized' for anonymized checkouts
    4) Set system preference 'AnonymousPatron' empty
    5) Look at same record checkout history
    => Check no error
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b4f928003eac4bcd5d1c778cda7b346151782d45
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Sep 29 09:04:52 2023 +0000

    Bug 34883: Add unit test
    
    prove -v t/db_dependent/Koha/Patrons/Import.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f4f77357f63013a21e700f14df82ca9261403310
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Mon Sep 25 10:34:18 2023 +0000

    Bug 34883: Stop patron expiry date being set to NULL during import
    
    A regression has been identified whereby an empty field in the dateexpiry field in a patron import file will cause the patron's expiry date to be set to NULL. This patch addresses this by checking for an empty field and using the existing expiry date if one is found.
    
    Test plan:
    1) Setup a csv with column headers:
        surname     firstname       branchcode      categorycode    cardnumber      dateenrolled dateexpiry
    2) Add values:
        Acosta      Edna    CPL     PT      23529001000463  02/01/2013
    3) Leave the dateexpiry column blank
    4) Check Edna and make a note of her patron expiry date
    5) Run the import_patrons.pl script with the following flags:
        a) --file <filepath_for_your_csv_file>
        b) --matchpoint cardnumber
        c) --confirm
        d) --overwrite
    6) Check Edna, note her expiry date is now set to NULL
    7) Manually edit Edna's expiry date to be reset to what it was before you ran the script
    8) Apply the patch and restart_all
    9) Repeat step 5
    10) Check Edna, this time her expiry date should be the same as the value you set it to in step 7
    11) Sign off!
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f0477dfd36799b1e18b513189eddbdb9ad5164e7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 10 08:51:04 2023 -0300

    Bug 28688: DBRev 23.06.00.030
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f6119e750327d48c40e5c0a4e20fbefcf0573778
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Oct 4 13:41:17 2023 +0000

    Bug 28688: (follow-up) Remove redundant options
    
    Test plan:
    Run misc/cronjobs/membership_expiry.pl --help
    misc/cronjobs/membership_expiry.pl --man
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bb9f7b5558707455b4fb3c3a68b47c33a30aa34c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 4 15:02:08 2023 +0200

    Bug 28688: Use pod2usage for incorrect usage
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5588d688fd37edc95c03832c2e86947ca6542c16
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jun 15 06:39:00 2023 +0000

    Bug 28688: Add renewal to crontab example
    
    Note: I did not add an example to the debian cron daily file, since
    we have no commented lines there. And automatic renewal is no default
    behavior.
    
    Test plan:
    Read new lines in misc/cronjobs/crontab.example. Just comments.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9ab80608f1322be137d27b82c421c5b6a3b82a61
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jun 15 07:04:37 2023 +0000

    Bug 28688: Allow to pass another renewal notice
    
    Just as passing another expiry notice.
    
    Test plan:
    Pick a patron to expire.
    Create another membership renewal notice, say X.
    Run misc/cronjobs/membership_expiry.pl -c -n -v -letter_renew X
    Check output on command line.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9022ec16c33a5d4caba193c0b8ba34aa61ca42dc
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Jun 14 13:34:11 2023 +0000

    Bug 28688: Add renew option to membership_expiry.pl
    
    Test plan:
    [1] Pick an account to expire soon.
    [2] Choose MembershipExpiryDaysNotice so that it will be selected.
        (Note: You can extend the selection with -before or -after.)
    [3] Run misc/cronjobs/membership_expiry.pl -c -v -renew
    [4] Check new expiry date in the notice. Does it correspond with
        enrollment period of category and pref BorrowerRenewalPeriodBase?
    [5] If the patron category has an enrollment fee, check account too.
    [6] Reset dateexpiry of this patron to original date.
    [7] Run misc/cronjobs/membership_expiry.pl -c -v
    [8] Check if you got an expiry notice instead and dateexpiry did not
        change.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] Removed $fees and $substitute in favor of notice approach
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a912709898952849ab9843fe31f9591af1d1b685
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jun 15 08:51:32 2023 +0000

    Bug 28688: Add new notice MEMBERSHIP_RENEWED
    
    Test plan:
    Run new install or upgrade.
    Check for this notice under Tools/Notices.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] Enrollment fee via object instead of substitute hash.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7f6009068ecafb08dc90d5550aa554e160b0020f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 10 08:33:54 2023 -0300

    Bug 34828: Remove useless variable
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5ee20cba58b7184ec84db850068e3319ff3428b2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 5 11:48:59 2023 +0200

    Bug 34828: Make normalized_oclc use Koha::Biblio::Metadata::Extractor
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d5d2f319df686302b0c3281c9f02024f39a5b1e9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 5 09:44:42 2023 +0200

    Bug 34828: Add Koha::Biblio::Metadata::Extractor::MARC
    
    and inherit from it
    
    The new usage is now:
    
    1. With a Koha::Biblio object
    my $extractor = Koha::Biblio::Metadata::Extractor->new({biblio => $biblio});
    $extractor->get_normalized_upc;
    
    or
    
    2. With a MARC::Record
    my $extractor = Koha::Biblio::Metadata::Extractor->new({metadata=> $biblio->metadata->record});
    $extractor->get_normalized_upc;
    
    Note that there are "Inconsistent hierarchy during C3 merge of class"
    warnings raised by the QA script. We could remove them by replacing the
    'use' by 'require' in Koha::Biblio::Metadata::Extractor::MARC (in ->new)
    but that's suboptimal.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7efeeda29dddaa14447420b1649c1bfce36e5ed9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Oct 5 08:30:05 2023 +0200

    Bug 34828: Move to Koha::Biblio::Metadata::Extractor
    
    We are not directly linked with the other Koha::Metadata* packages.
    Better to isolate this under Koha::Biblio::Metadata (at least for now).
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0161eeba1301885658519b7b0c15cd6221d54a3d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Sep 18 09:35:16 2023 -0300

    Bug 34828: Introduce Koha::MetadataExtractor and ->get_normalized_upc
    
    This patch introduces a new pattern for the different ->get_<thing>
    methods we've been adding. The aim is that code will look more like:
    
    my $metadata_extractor = Koha::MetadataExtractor->new;
    
    while ( my $biblio = $biblios->next ) {
        my $record = $biblio->record;
        my $schema = $biblio->record_schema;
    
        $data->{$biblio->id}->{normalized_upc} =
    $metadata_extractor->get_normalized_upc( { record => $record, schema =>
    $schema } );
        $data->{$biblio->id}->{normalized_ean} =
    $metadata_extractor->get_normalized_ean( { record => $record, schema =>
    $schema } );
    }
    
    The key is that we are actually reusing the MARC::Record, and code for
    each schema is organized cleanly so easier to maintain.
    
    For the class names, I chose to add the 'MARC' name in the path, so we
    don't need to refactor anything if we want to add support for another
    serialization formats.
    
    To test:
    1. Apply this patch
    2. Run:
       $ ktd --shell
      k$ qa -c 1
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a0564496b9b4344d95ee1cdd2529b9e49c548209
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Oct 9 16:30:41 2023 -0300

    Bug 34657: DBRev 23.06.00.029
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 216a2dcb9f571134fd2fbb6ac5aeca096d0e8ef6
Author: Frédéric Demians <f.demians@tamil.fr>
Date:   Thu Aug 3 10:59:01 2023 +0200

    Bug 34467: OAI GetRecord bad encoding for Unimarc
    
    For some Unimarc biblio records, the OAI Server returns a bad XML
    document, ie a document with extended characters, such as accents, not
    encoded in UTF8. It seems to come from somewhere in MARC::Record library
    trying to deduce biblio record endoding from some fields. It may work
    for MARC21 records. It doesn't for Unimarc records. So it's necessary to
    send to the method transforming record into XML the marcflavour. This
    way there is no encoding guessing from Unimarc biblio records content.
    
    https://bugs.koha-community.org/show_bug.cgi?id=34467
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d163bf0b86d3f9ef33512b92edcd74dc355d2e05
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Oct 6 06:52:28 2023 +0000

    Bug 34336: Remove the dependency for Test::DBIx::Class
    
    The module is removed from t.
    We only have 01-test_dbic.t and we do not need it any longer.
    
    Test plan:
    git grep for Test::DBIx::Class. You should only see release notes.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c92f23901e02c7d83ff84f0fee5e2d4964feee44
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed Aug 30 16:49:49 2023 -0400

    Bug 34667: Update MARC21 default framework to Update 36 (June 2023)
    
    This patch updates the default MARC21 framework to reflect the changes brought by Update 36 (June 2023).
    
    To test:
    1. Apply patch and restart
    2. Go to Administration > MARC bibliographic framework
    3. Click Actions next to the default framework and choose MARC structure
    4. Check for the changes detailed in the update https://www.loc.gov/marc/bibliographic/bdapndxg.html
    
    - There should be one new subfield in field 041
      - 3 Materials specified (NR)
    
    - There should be a new field 361, named STRUCTURED OWNERSHIP AND CUSTODIAL HISTORY
      - This field should be repeatable
      - Subfields:
        - 0 Authority record control number or standard number (R)
        - 1 Real World Object URI (R)
        - 3 Materials specified (NR)
        - 5 Institution to which field applies (NR)
        - 6 Linkage (NR)
        - 7 Data provenance (R)
        - 8 Field link and sequence number (R)
        - a Name (NR)
        - f Ownership and custodial history evidence term (R)
        - k Formatted date (NR)
        - l Date (NR)
        - o Type of ownership and custodial history information (R)
        - s Shelf mark of copy described (NR)
        - u Uniform Resource Identifier (R)
        - x Nonpublic note (R) **This should not be visible in the OPAC
        - y Identifier of the copy described (NR)
        - z Public note (R)
    
    - There should be three new subfields in field 653
      - 0 Authority record control number or standard number (R)
      - 1 Real World Object URI (R)
      - 5 Institution to which field applies (NR)
    
    - There should be two new subfields in field 658
      - 0 Authority record control number or standard number (R)
      - 1 Real World Object URI (R)
    
    - There should be four new subfields in field 720
      - 0 Authority record control number or standard number (R)
      - 1 Real World Object URI (R)
      - 5 Institution to which field applies (NR)
      - 7 Data provenance (R)
    
    - There should be a new field 857, named ELECTRONIC ARCHIVE LOCATION AND ACCESS
      - This field should be repeatable
      - Subfields
        - 2 Access method (NR)
        - 3 Materials specified (NR)
        - 5 Institution to which field applies (NR)
        - 6 Linkage (NR)
        - 7 Access status (NR)
        - 8 Field link and sequence number (R)
        - b Name of archiving agency (NR)
        - c Name of Web archive or digital archive repository (NR)
        - d Date range of archived material (NR)
        - e Data provenance (R)
        - f Archive completeness (NR)
        - g Persistent identifier (R)
        - h Non-functioning Uniform Resource Identifier (R)
        - l Standardized information governing access (R)
        - m Contact for access assistance (R)
        - n Terms governing access (R)
        - q Electronic format type (R)
        - r Standardized information governing use and reproduction (R)
        - s File size (R)
        - t Terms governing use and reproduction (R)
        - u Uniform Resource Identifier (R)
        - x Nonpublic note (R)
        - y Link text (R)
        - z Public note (R)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit abd249d1ee6587ea0439f4098b06a59632d41f97
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed Aug 30 15:13:34 2023 -0400

    Bug 34665: Update MARC21 default framework to Update 35 (Dec. 2022)
    
    This patch updates the default MARC21 framework to reflect the changes brought by Update 35 (December 2022).
    
    To test:
    1. Apply patch and restart
    2. Go to Administration > MARC bibliographic framework
    3. Click Actions next to the default framework and choose MARC structure
    4. Check for the changes detailed in the update https://www.loc.gov/marc/up35bibliographic/bdapndxg.html
    
    - There should be one new subfield in field 856
      - g Persistent identifier (R)
      - Subfield h should now be named Non-functioning Uniform Resource Identifier
      - Subfield q should now be repeatable
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a969ca1472bf4b8d02ae29dcf23cd2cdfc277ee9
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed Aug 30 14:44:58 2023 -0400

    Bug 34659: Update MARC21 default framework to Update 34 (July 2022)
    
    This patch updates the default MARC21 framework to reflect the changes brought by Update 34 (July 2022).
    
    To test:
    1. Apply patch and restart
    2. Go to Administration > MARC bibliographic framework
    3. Click Actions next to the default framework and choose MARC structure
    4. Check for the changes detailed in the update https://www.loc.gov/marc/up34bibliographic/bdapndxg.html
    
    - There should be one new subfield in field 041
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 082
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 083
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 084
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 100
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 110
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 111
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 130
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 210
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 240
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 245
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 246
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 247
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 250
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 255
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 256
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 264
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 300
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 335
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 336
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 340
      - q Reduction ratio designator (R)
      - Subfield f should now be named Reduction ratio value
    
    - There should be one new subfield in field 348
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 370
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 377
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 380
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 381
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 382
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 383
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 384
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 385
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 386
      - 7 Data provenance (R)
    
    - There should be a new field 387, named REPRESENTATIVE EXPRESSION CHARACTERISTICS
      - This field should be repeatable
      - Subfields:
        - 0 Authority record control number or standard number (R)
        - 1 Real World Object URI (R)
        - 2 Source of term (NR)
        - 3 Materials specified (NR)
        - 6 Linkage (NR)
        - 7 Data provenance (R)
        - 8 Field link and sequence number (R)
        - a Aspect ratio of representative expression (R)
        - b Color content of representative expression (R)
        - c Content type of representative expression (R)
        - d Date of capture of representative expression (R)
        - e Date of representative expression (R)
        - f Duration of representative expression (R)
        - g Intended audience of representative expression (R)
        - h Language of representative expression (R)
        - i Place of capture of representative expression (R)
        - j Projection of cartographic content of representative expression (R)
        - k Scale of representative expression (R)
        - l Script of representative expression (R)
        - m Sound content of representative expression (R)
    
    - There should be one new subfield in field 388
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 490
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 500
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 501
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 502
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 505
      - 7 Data provenance (R)
    
    - Field 507 should now be named SCALE NOTE FOR VISUAL MATERIALS
    
    - There should be one new subfield in field 508
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 510
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 515
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 518
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 520
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 533
      - y Data provenance (R)
    
    - There should be one new subfield in field 546
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 550
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 555
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 583
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 600
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 610
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 611
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 630
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 648
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 650
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 651
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 653
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 655
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 700
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 710
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 711
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 751
      - 7 Data provenance (R)
    
    - There should be one new subfield in field 760
      - l Data provenance (R)
    
    - There should be one new subfield in field 762
      - l Data provenance (R)
    
    - There should be one new subfield in field 765
      - l Data provenance (R)
    
    - There should be one new subfield in field 767
      - l Data provenance (R)
    
    - There should be one new subfield in field 770
      - l Data provenance (R)
    
    - There should be one new subfield in field 772
      - l Data provenance (R)
    
    - There should be one new subfield in field 773
      - l Data provenance (R)
    
    - There should be one new subfield in field 774
      - l Data provenance (R)
    
    - There should be one new subfield in field 775
      - l Data provenance (R)
    
    - There should be one new subfield in field 776
      - l Data provenance (R)
    
    - There should be one new subfield in field 777
      - l Data provenance (R)
    
    - There should be one new subfield in field 780
      - l Data provenance (R)
    
    - There should be one new subfield in field 785
      - l Data provenance (R)
    
    - There should be one new subfield in field 786
      - l Data provenance (R)
    
    - There should be one new subfield in field 787
      - l Data provenance (R)
    
    - There should be a new field 788, named PARALLEL DESCRIPTION IN ANOTHER LANGUAGE OF CATALOGING
      - This field should be repeatable
      - Subfields:
        - 4 Relationship (R)
        - 5 Institution to which field applies (NR)
        - 6 Linkage (NR)
        - 8 Field link and sequence number (R)
        - a Main entry heading (NR)
        - b Edition (NR)
        - d Place, publisher, and date of publication (NR)
        - e Language of cataloging (NR)
        - i Relationship information (R)
        - l Data provenance (R)
        - n Note (R)
        - s Uniform title (NR)
        - t Title (NR)
        - w Record control number (R)
        - x International Standard Serial Number (NR)
    
    - There should be one new subfield in field 800
      - y Data provenance (R)
    
    - There should be one new subfield in field 810
      - y Data provenance (R)
    
    - There should be one new subfield in field 811
      - y Data provenance (R)
    
    - There should be one new subfield in field 830
      - y Data provenance (R)
    
    - There should be one new subfield in field 856
      - e Data provenance (R)
      - Subfield l is renamed Standardized information governing access (R)
      - Subfield n is renamed Terms governing access (R)
      - Subfield r is renamed Standardized information governing use and reproduction (R)
      - Subfield t is renamed Terms governing use and reproduction (R)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4d88c27187e7783e43887e7ab42a834228548d35
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed Aug 30 11:39:48 2023 -0400

    Bug 34658: Update to 007 value builder to reflect changes brought by Update 33 (Nov. 2021)
    
    This patch updates the terms used in the 007 value builder in
    concordance with the MARC21 format update 33.
    
    To test:
    1. Apply patch and restart
    2. Go to Cataloguing > New recordGo to Cataloguing > New record
    3. Click the small tag editor icon next to 007
    3. Change Material type to Sound recording
       --> Position 13 should now be named Original capture and storage technique
    4. Open the 13 Original capture and storage technique drop-down menu
       --> The values should be renamed
    
    a - Acoustical capture, analog direct storage
    b - Electrical capture, analog direct storage
    d - Electrical capture, digital storage
    e - Electrical capture, analog electrical storage
    u - Unknown capture and storage
    z - Other **Unchanged
    | - No attempt to code **Unchanged
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 50be9447d7570e8095e61428d0b8efa2376f8259
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed Aug 30 11:38:32 2023 -0400

    Bug 34658: Update MARC21 default framework to Update 33 (Nov. 2021)
    
    iThis patch updates the default MARC21 framework to reflect the changes brought by Update 33 (November 2021).
    
    To test:
    1. Apply patch and restart
    2. Go to Administration > MARC bibliographic framework
    3. Click Actions next to the default framework and choose MARC structure
    4. Check for the changes detailed in the update https://www.loc.gov/marc/up33bibliographic/bdapndxg.html
    
    - There should be a new subfield in field 340
      - l Binding (R)
    
    - There should be a new subfield in field 344
      - j Original capture and storage technique (R)
    
    - There should be two new subfields in field 490
      - y Incorrect ISSN (R)
      - z Canceled ISSN (R)
      **Note that subfield 7 was added in a later update and is therefore not included in this patch
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7ddf8593671ab00419ff574f64bcdc9af1ba8e18
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed Aug 30 10:39:14 2023 -0400

    Bug 34649: (fixup) Update MARC21 default framework to Update 32 (June 2021)
    
    Fixes a small typo that prevented the yaml from loading correctly
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eff44c28926e9151f2c100a8858c1fa9259725a3
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Tue Aug 29 17:53:23 2023 -0400

    Bug 34649: Updated code list for 008 value builder for continuing resources
    
    This patch updates the code list for 008/21 for continuing resources in
    concordance with Update 32 to the MARC21 format.
    
    g - Magazine
    h - Blog
    j - Journal
    r - Repository
    s - Newsletter
    t - Directory
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1e47e7da94ec2583b2223d9433dd95112b165faa
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Tue Aug 29 17:52:26 2023 -0400

    Bug 34649: Update MARC21 default framework to Update 32 (June 2021)
    
    This patch updates the default MARC21 framework to reflect the changes brought by Update 32 (June 2021).
    
    To test:
    1. Apply patch and restart
    2. Go to Administration > MARC bibliographic framework
    3. Click Actions next to the default framework and choose MARC structure
    4. Check for the changes detailed in the update https://www.loc.gov/marc/up32bibliographic/bdapndxg.html
    
    - There should be two new subfields in field 022
      - 0 Authority record control number or standard number (NR)
      - 1 Real World Object URI (R)
    
    - There should be three new subfields in field 046
      - 3 Materials specified (NR)
      - x Nonpublic note (R) (this one should be hidden from the OPAC)
      - z Public note (R)
      **Note that subfield 7 was added in a later update and is therefore not included in this patch
    
    - Subfield 082$2 should now be named Edition information
    
    - Subfield 083$2 should now be named Edition information
    
    - There should be a new field 334, named MODE OF ISSUANCE
      - This field should be repeatable
      - Subfields:
        - 0 Authority record control number or standard number (R)
        - 1 Real World Object URI (R)
        - 2 Source (NR)
        - 6 Linkage (NR)
        - 8 Field link and sequence number (R)
        - a Mode of issuance term (NR)
        - b Mode of issuance code (NR)
    
    - There should be one new subfield in field 344
      - i Sound content (R)
      **Note that subfield j was added in a later update and is therefore not included in this patch
    
    - Field 348 should now be named NOTATED MUSIC CHARACTERISTICS
      - There should be two new subfields
        - c Form of musical notation term (R)
        - d Form of musical notation code (R)
        **Note that subfield 7 was added in a later update and is therefore not included in this patch
    
    - There should be a new field 353, named SUPPLEMENTARY CONTENT CHARACTERISTICS
      - This field should be repeatable
      - Subfields:
        - 0 Authority record control number or standard number (R)
        - 1 Real World Object URI (R)
        - 2 Source (NR)
        - 3 Materials specified (NR)
        - 6 Linkage (NR)
        - 8 Field link and sequence number (R)
        - a Supplementary content term (NR)
        - b Supplementary content code (NR)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2a71efa0e42b626a5dd99614539acc69978fc7e3
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Thu Aug 31 09:03:55 2023 -0400

    Bug 34648: (fixup) Update MARC21 frameworks to Update 31 (December 2020)
    
    Added missing 881$a subfield.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a6bde4534a163644f80307062c04d9af6b6898f7
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Tue Aug 29 17:11:12 2023 -0400

    Bug 34648: (follow up) updated comment
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3fdee6e8dcf21df2ee6604a264b3d05eb044e662
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Tue Aug 29 17:02:32 2023 -0400

    Bug 34648: Update MARC21 frameworks to Update 31 (December 2020)
    
    This patch updates the default MARC21 framework to reflect the changes brought by Update 30 (Dec. 2020).
    
    To test:
    1. Apply patch and restart
    2. Go to Administration > MARC bibliographic framework
    3. Click "Actions" next to the default framework and choose "MARC structure"
    4. Check for the changes detailed in the update https://www.loc.gov/marc/up31bibliographic/bdapndxg.html
    
    - Field 043 should now be repeatable
    
    - There should be a new field 335, named EXTENSION PLAN
      - This field should be repeatable
      - Subfields:
        - 0 Authority record control number or standard number (R)
        - 1 Real World Object URI (R)
        - 2 Source (NR)
        - 3 Materials specified (NR)
        - 6 Linkage (NR)
        - 8 Field link and sequence number (R)
        - a Extension plan term (NR)
        - b Extension plan code (NR)
        **Note that subfield 7 was added in a later update and is therefore not included in this patch
    
    - Field 345 should now be named MOVING IMAGE CHARACTERISTICS
      - There should be two new subfields
        - c Aspect ratio value (R)
        - d Aspect ratio designator (R)
    
    - There should be two new subfields in field 384
      - 0 Authority record control number or standard number (R)
      - 1 Real World Object URI (R)
    
    - The following subfields of field 856 should have an [OBSOLETE] mention and be hidden (shown in OPAC and intranet, but not editor)
      - b Access number [OBSOLETE]
      - h Processor of Request [OBSOLETE]
      - i Instruction [OBSOLETE]
      - j Bits per second [OBSOLETE]
      - k Password [OBSOLETE]
      - l Logon [OBSOLETE]
      - n Name of location of host [OBSOLETE]
      - r Settings [OBSOLETE]
      - t Terminal emulation [OBSOLETE]
    
    - There should be a new field 881, named MANIFESTATION STATEMENTS
      - This field should be repeatable
      - Subfields:
        - 3 Materials specified (NR)
        - 6 Linkage (NR)
        - 8 Field link and sequence number (R)
        - a Manifestation statement, high-level/general (R)
        - b Manifestation identifier statement (R)
        - c Manifestation title and responsibility statement (R)
        - d Manifestation edition statement (R)
        - e Manifestation production statement (R)
        - f Manifestation publication statement (R)
        - g Manifestation distribution statement (R)
        - h Manifestation manufacture statement (R)
        - i Manifestation copyright statement (R)
        - j Manifestation frequency statement (R)
        - k Manifestation designation of sequence statement (R)
        - l Manifestation series statement (R)
        - m Manifestation dissertation statement (R)
        - n Manifestation regional encoding statement (R)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3e1d32f9caaab56acd8f4b338a859eb599955634
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Aug 17 04:28:29 2023 +0000

    Bug 34549: Strip non-XML chars during TransformHtmlToMarc
    
    This patch strips non-XML characters from inputs during
    TransformHtmlToMarc.
    
    To test:
    0. Apply patch
    1. koha-plack --restart kohadev
    2. Go to http://localhost:8081/cgi-bin/koha/cataloguing/addbiblio.pl
    3. Fill out record and use the text from "Text file containing control characters"
    as the title
    4. Click Save
    5. Note that your record displays without any warnings like the following:
    Error: invalid data, cannot decode metadata object
    parser error : PCDATA invalid Char value 27
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] Squashed the tidy patch. Still needed a few spaces to satisfy qa tools.
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6b6534a22a60f8797c678c8ea5d66eefdb474141
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Oct 4 11:42:44 2023 +0200

    Bug 34982: Add pagination to the currencies table
    
    Otherwise we only display the first 20.
    
    Test plan:
    Create more than 20 currencies and confirm that you can know
    filter the table and see all the currencies.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 070af9aaf38e36c2c69d825ac43d28e288d62f04
Author: Zeno Tajoli <z.tajoli@cineca.it>
Date:   Thu Aug 17 14:04:12 2023 +0200

    Bug 34558: Update custom.sql for it-IT webinstaller
    
    It is an update of this file, here there are the specific customization for
    italian users. There are simple changes on defaults values.
    
    To test it:
    1 - Start a web installation with italian language.
    2 - Select Marc21 as biblio format
    3 - Select all optional .sql files
    4 - Conclude the installation.
    5 - Go to MySQL command line and do:
        SELET value FROM systempreferences where variable = 'BorrowersTitles'
        You see: 'Sig|Sig.ra|Sig.na'
    6 - Apply the patch.
    7 - Drop and recreate the mysql db
    8 - Redone the installation with italian language.
    9 - Use the same options written above.
    10 - Conclude the installation.
    11 - Go to MySQL command line and do:
        SELECT value FROM systempreferences where variable = 'BorrowersTitles'
        You see: 'Sig|Sig.ra|Dott.|Dott.ssa'
    12 - Refactor is OK
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 23796a3d6c496543ee9722e87023a261c26cec7a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Oct 4 11:12:14 2023 +0000

    Bug 34393: (follow-up) QA fixes and further refinement
    
    This patch addresses issues discovered during testing and fixes a couple
    of issues which were missed.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit db5642410b07d15d9956613a3119c74ec64ceafb
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 2 18:41:15 2023 +0000

    Bug 34393: Fix inconsistencies in MARC bibliographic framework page titles, breadcrumbs, and header
    
    This patch fixes some inconsistencies in the MARC bibliographic
    framework administration page, making sure the page title, breadcrumb
    navigation, and page headers are consistent with each other.
    
    The file admin/marc_subfields_structure.pl is modified so that it
    provides the framework name to the template.
    
    Test each page to confirm that page title, heading, and breadcrumbs are
    consistent:
    
    - MARC bibliographic frameworks
      - New framework
      - Edit framework
      - Delete a framework which is not used
      - Delete a framework which is in use
      - Framework MARC structure
        - New tag
        - Edit tag
        - Delete tag
        - View subfields
        - Edit subfields
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6b655474013ed73b2f97364021eaa9462de5bae8
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Oct 6 14:30:23 2023 +0000

    Bug 34677: (QA follow-up) Update description of RELTERMS authorised value
    
    The patch as is kind of undid the change of bug 34679. The new
    proposal is a mix of this and the old version with a link that
    opens in a new tab.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 39cbe567f05e56a66a562bd0e69bebffa91eed3d
Author: David Nind <david@davidnind.com>
Date:   Sat Sep 23 20:16:08 2023 +0000

    Bug 34677: (follow-up) Additional updates to match the LOC list
    
    This patch makes additional updates to the RELTERMS authorized
    value list to make it match the MARC Code List for Relators
    at https://www.loc.gov/marc/relators/relaterm.html and
    https://www.loc.gov/marc/relators/relacode.html
    
    It also updates the description displayed in the
    authorized values list.
    
    Test plan:
    1. Apply the patch.
    2. Reload the values (reset_all if using KTD).
    3. Go to Administration > Authorized values.
    4. Note that the description for RELTERMS is changed
       (now says 'MARC Code List for Relators
        (https://www.loc.gov/marc/relators/).' instead of
        'French terms of relations').
    5. Check that the changes listed are incorporated
       into the RELTERMS authorized values list.
    
    Additions:
    prv - Provider
    rcd - Recordist
    stg - Setting
    
    Changes:
    aui - Author of introduction -> Author of introduction, etc.
    aus - Author of screenplay -> Screenwriter
    coe - Contestant -appellee -> Contestant-appellee
    cot - Contestant -appellant -> Contestant-appellant
    cou - Court-governed -> Court governed
    dpb -> dbp - Distribution place
    dgg - Degree grantor -> Degree granting institution
    osp - On-screen presenter -> Onscreen presenter
    pte - Plaintiff -appellee -> Plaintiff-appellee
    rcp - Recipient -> Addressee
    red - Redactor -> Redaktor
    wde - Wood-engraver -> Wood engraver
    
    Removals:
    -grt - Graphic technician
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 936939f04a6fe083a888c784ef6a3f8dac0028eb
Author: David Nind <david@davidnind.com>
Date:   Fri Sep 1 19:47:37 2023 +0000

    Bug 34677: (follow-up) Update transposed value
    
    Update sdg Stage director to sgd (May 31, 2013 technical notice).
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 808714b3b4e883499356ecddf4379dae888d3c91
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Thu Aug 31 13:20:47 2023 -0400

    Bug 34677: Update to MARC21 relator terms list (August 8, 2023 technical notice)
    
    This patch adds missing relator codes/terms to the marc21_relatorterms.yaml file in accordance with the August 8, 2023 technical notice.
    
    https://www.loc.gov/marc/relators/tn230808rel.html
    
    To test:
    1. Apply patch and restart
    2. Go to Administration > Authorized values > RELTERMS
       --> New terms should be there
    
    anc - Announcer
    aue - Audio engineer
    aup - Audio producer
    bka - Book artist
    cad - Casting director
    cop - Camera operator
    dbd - Dubbing director
    djo - DJ
    edd - Editorial director
    fon - Founder
    mka - Makeup artist
    mup - Music programmer
    mxe - Mixing engineer
    nan - News anchor
    onp - Onscreen participant
    rap - Rapporteur
    rxa - Remix artist
    sde - Sound engineer
    sfx - Special effects provider
    swd - Software developer
    tau - Television writer
    tlg - Television guest
    tlh - Television host
    vfx - Visual effects provider
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fff344940c656d3a530eca1a89e172f6d5ff919b
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Thu Aug 31 13:08:54 2023 -0400

    Bug 34677: Update to MARC21 relator terms list (Apr. 26, 2021 technical notice)
    
    This patch adds missing relator codes/terms to the marc21_relatorterms.yaml file in accordance with the April 26, 2021 technical notice.
    
    https://www.loc.gov/marc/relators/tn210426rel.html
    
    To test:
    1. Apply patch and restart
    2. Go to Administration > Authorized values > RELTERMS
       --> New term should be there
    
    Addition:
    pad - Place of address
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 68671cdf09e550243bbbe45516d9a28b2e54b56c
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Thu Aug 31 13:04:52 2023 -0400

    Bug 34677: Update to MARC21 relator terms list (Dec. 14, 2020 technical notice)
    
    This patch adds missing relator codes/terms to the marc21_relatorterms.yaml file in accordance with the December 21, 2020 technical notice.
    
    https://www.loc.gov/marc/relators/tn201214src.html
    
    To test:
    1. Apply patch and restart
    2. Go to Administration > Authorized values > RELTERMS
       --> New term should be there
    
    Addition:
    dgc - Degree committee member
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 72c65d188b6a704e91c834ec4ffdd8f10954251f
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Thu Aug 31 13:01:15 2023 -0400

    Bug 34677: Update to MARC21 relator terms list (Feb 21, 2014 technical notice)
    
    This patch adds missing relator codes/terms to the marc21_relatorterms.yaml file in accordance with the February 21, 2014 technical notice.
    
    https://www.loc.gov/marc/relators/tn140221rel.html
    
    To test:
    1. Apply patch and restart
    2. Go to Administration > Authorized values > RELTERMS
       --> New terms should be there and modified terms should be changed
    
    Additions:
    dgs - Degree supervisor
    med - Medium
    mtk - Minute taker
    vac - Voice actor
    wst - Writer of supplementary textual content
    win - Writer of introduction
    wpr - Writer of preface
    
    Changes:
    orm - Organizer
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bc7d55d9ba7edacf046f39b788f51d6d6028a634
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Thu Aug 31 12:53:30 2023 -0400

    Bug 34677: Update to MARC21 relator terms list (May 31, 2013 technical notice)
    
    This patch adds missing relator codes/terms to the marc21_relatorterms.yaml file in accordance with the May 31, 2013 technical notice.
    
    https://www.loc.gov/marc/relators/tn130531rel.html
    
    To test:
    1. Apply patch and restart
    2. Go to Administration > Authorized values > RELTERMS
       --> New terms should be there and deprecated terms should have been removed
    
    Additions:
    abr - Abridger
    apl - Appellant
    ape - Appellee
    adi - Art director
    ato - Autographer
    brl - Braille embosser
    brd - Broadcaster
    cas - Caster
    cor - Collection registrar
    cou - Court-governed
    crt - Court reporter
    edc - Editor of compilation
    edm - Editor of moving image work
    enj - Enacting jurisdiction
    fds - Film distributor
    fmk - Filmmaker
    fmd - Film director
    fmp - Film producer
    his - Host institution
    isb - Issuing body
    jud - Judge
    jug - Jurisdiction governed
    osp - On-screen presenter
    pan - Panelist
    pra - Praeses
    pre - Presenter
    prn - Production company
    prs - Production designer
    rdd - Radio director
    rpc - Radio producer
    rsr - Restorationist
    sll - Seller
    sgd - Stage director
    tld - Television director
    tlp - Television producer
    wac - Writer of added commentary
    wat - Writer of added text
    wal - Writer of added lyrics
    
    Deprecated relators:
    clb - Collaborator
    voc - Vocalist
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6cb78c4d613c38b95036319d33143a48e9a84dd4
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Aug 17 10:52:12 2023 +0000

    Bug 34562: Update more pop-up windows with consistent footer markup
    
    This patch updates a few more pop-up window templates to standardize the
    markup of footer controls. The patch also updates the way catalog.js
    triggers the "Add to list" pop-up so that it uses the same
    window-opening JS function that similar pages do, since the default
    gives us consistent popup features.
    
    To test, apply the patch and perform a catalog search in the staff
    interface which will return multiple results.
    
    - Check the box next to one or more results.
    - Click the "Add to list" button.
      - Test the various options here: Add to an existing list, a new list,
        or choose "More lists."
      - In each case the pop-up window which appears should have a
        consistent fixed footer with "Save" and "Cancel" buttons.
      - Confirm that these controls can be navigated to using the tab key.
      - Confirm that each one works correctly.
    
    - Go to Administration -> Z39.50/SRU servers -> New SRU server.
      - Click the "Modify" button by the "SRU Search fields mapping" field.
      - Inspect and test the resulting pop-up window.
      - Switch the "Record type" dropdown to "Authority," click the
        "Modify" button again, and test this version of the pop-up window
        too.
    
    Signed-off-by: Émily-Rose Francoeur <emily-rose.francoeur@inLibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 816942f64dc943c474b5d53d84e66bfdd96a4a94
Author: David Nind <david@davidnind.com>
Date:   Tue Oct 3 00:00:13 2023 +0000

    Bug 34390: (follow-up) Add single quotes around credit type
    
    For consistency with other bugs - adds single quotes around the
    credit type code.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 993a296fa96e0290f1192715b642faa718f975a9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 2 15:59:08 2023 +0000

    Bug 34390: Fix inconsistencies in credit types titles, breadcrumbs, and header
    
    Fix inconsistencies in credit types titles, breadcrumbs, and header
    
    This patch fixes a couple of inconsistencies in the credit types
    administration page, making sure the page title, breadcrumb
    navigation, and page headers are consistent with each other.
    
    To test, apply the patch and go to Administration -> Credit types. Test
    each variation of the page:
    
    - Main page
    - New credit type
    - Modify credit type
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b291da995d2f52564f971080e21ec185dc48b834
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Sep 22 18:33:36 2023 +0000

    Bug 34873: Fix inconsistencies between "Sending your cart/list" headings
    
    This patch modifies the templates for the popup windows which are shown
    when you send a cart or a list via email in the staff interface.
    
    To test, apply the patch and log into the staff interface.
    
    - Perform a catalog search which will return results.
    - Select one or more results and add them to the cart.
    - Click the cart icon in the header menu to open the Cart popup.
    - Click "Send". Compare this pop-up window to the version shown when
      sending a list:
    
    - Open the Lists page and view the contents of a list.
    - Click the "Send list" button in the toolbar.
    - This popup should look correct and be consistent with the Cart
      version.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2813e1e27688cd216ca64a10413bee0f5de00c15
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Sep 14 16:33:48 2023 +0000

    Bug 34796: Improve translation of title tags: Tools - Additional tools
    
    This patch modifies templates for tools under the "Additional tools"
    heading so that title tags can be more easily translated. The patch also
    makes some modifications to titles, breadcrumb navigation, and page
    headers in order to make them more consistent with each other and with
    other similar pages.
    
    To test, apply the patch and go to Tools. Test each page below and each
    variation of the page to confirm that titles, breadcrumbs, and page
    headers look correct.
    
    - Calendar
    - CSV profiles
      - Main page
        - New CSV profile
        - Modify CSV profile
        - Confirm deletion of CSV profile
    - Log viewer
      - Search results
    - News, HTML customizations, and pages
      - Create and modify each content type: news, pages, HTML
        customizations
    - Task scheduler
    - Quote editor
      - Main page
      - New quote
      - Edit quote
      - Import quotes
    - Uploads
      - Main page
      - Upload file
      - Delete file
      - Search for file
    - Access files
    - OPAC problem reports (with OPACReportProblem enabled)
    
    Signed-off-by: Stina Hallin <stina.hallin@ub.lu.se>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1a0ccaa991c426219a8a304d43c1039286a7de58
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed May 24 14:57:20 2023 +0000

    Bug 33819: Add page numbers to opac results breadcrumb
    
    This patch adds the page number to the breadcrumb in the opac search results to ensure that it is unique to the content on the page. Currently it is not compliant to Accessibility guidelines as the breadcrumb is identical on every page despite the content being different.
    
    To test:
    1) Apply patch
    2) Run a search in the OPAC that will return more than 20 results.
    3) The breadcrumb should say "Results of search for 'search term', page x of y"
    4) Run a search that will return less than 20 results
    5) The breadcrumb should say "Results of search for 'search term'
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dbd85697ac07f02ef7367bfdbf26cef14ec2142b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Aug 30 16:31:03 2023 +0000

    Bug 34661: Update UNIMARC cataloging plugins with consistent footers
    
    This patch updates UNIMARC cataloging plugin templates so that they have
    consistent fixed footers in the plugin popup window. Plugins for the
    following UNIMARC fields have been updated:
    
    000 (Leader) 123$f    128$a    181$b
    100$a        123$g    128$b    182$2
    105$a        123$i    128$c    182$a
    106$a        123$j    130$a    182$c
    110$a        124$a    135$a    183$2
    115$a        124$b    140$a    183$a
    115$b        124$c    141$a    210$c
    116$a        124$d    146$a    225$a
    117$a        124$e    146$c    225$a
    120$a        124$f    146$d    283$2
    121$a        124$g    146$e    283$a
    121$b        125$a    146$f    325$h
    122$a        125$b    146$h    325$j
    123$a        126$a    146$i
    123$d        126$b    181$2
    123$e        127$a    181$a
    
    Most of these will be pre-configured in a test system with default
    UNIMARC data. In KTD you can use the 'reset_all_unimarc' command.
    
    Go to Cataloging -> New record and test the plugin link for each of the
    fields listed above.
    
      - In each case, confirm that the correct popup window is shown when
        you click the plugin link.
      - Confirm that clicking the "Cancel" button closes the window without
        copying any data to the field in the MARC editor.
        * Note that if the plugin is also triggered by cursor focus in the
          input field, some data may be automatically filled anyway.
      - Confirm that filing in data and clicking "Submit" will copy the
        correct information into the field.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 845771e960ecf16ce9002fe5c2e0330708f6d898
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Aug 30 16:00:15 2023 +0000

    Bug 34566: Update MARC21 cataloging plugins with consistent footers
    
    This patch updates MARC21 cataloging plugin templates so that submit and
    cancel controls are consistently displayed in a fixed footer.
    
    To test, apply the patch and go to Cataloging.
    
    - Create or edit a bibliographic record
    - Test the cataloging plugins for these fields:
      - 000 (Leader)
      - 006
      - 007
      - 008
      - In each case, confirm that the correct popup window is shown when
        you click the plugin link.
      - Confirm that clicking the "Cancel" button closes the window without
        copying any data to the field in the MARC editor.
        * Note that if the plugin is also triggered by cursor focus in the
          input field, some data may be automatically filled anyway.
      - Confirm that filing in data and clicking "Submit" will copy the
        correct information into the field.
    
    - Go to Authorities and create or edit an authority record.
    - Test the plugin for these fields:
      - 000 (Leader)
      - 008
     - Perform the same tests as above.
    
    I don't think the marc21_field_008_classifications is used at all, but
    the template has been updated anyway. To test, edit your authority
    record to use the plugin:
    
     - Administration -> Authority types -> Default -> MARC structure -> 008
       -> Subfields -> Edit.
     - Under Advanced constraints -> Plugin, select
       "marc21_field_008_classifcations.pl"
     - Re-test the behavior of the authority editor's tag 008 plugin to
       confirm that this plugin is used and works correctly.
    
    Signed-off-by: Émily-Rose Francoeur <emily-rose.francoeur@inLibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0d42a7c865a4b0e23bb03d5699d3a3e9b2357ec7
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Aug 30 15:41:28 2023 +0000

    Bug 34630: Update MARC21 cataloging plugin templates with consistent body class
    
    This patch updates cataloging plugin templates to remove the inline
    style "padding:1em" from the body tag. This style conflicts with fixed
    Bootstrap footers.
    
    A "value_builder" class is added to the body tag instead, the style
    added to staff-global.scss. There shouldn't be any visible change to the
    appearance of the pages.
    
    To test, apply the patch and rebuild the staff interface CSS and clear
    your browser cache if necessary.
    
    - Go to Cataloging -> New record.
    - In a default MARC21 installation you can test various plugin popups to
        confirm that they display correctly:
        - 000
        - 006
        - 007
        - 008
    
    To visually confirm each affected template, the plugins can be loaded in
    their own tab for testing the appearance of the page. I have a list of
    direct links here:
    
    https://gitlab.com/-/snippets/2555254
    Signed-off-by: Émily-Rose Francoeur <emily-rose.francoeur@inLibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f6cce74736c05570a6a7b279958c81697cf5c798
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Oct 7 15:41:36 2023 +0000

    Bug 34657: (QA follow-up) Fix plugin link in UNIMARC default framework
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9f54c1c9f08a5cb97d2cd09d73dbd83e967eba46
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Aug 30 14:53:01 2023 +0000

    Bug 34657: Merge cataloging plugins for UNIMARC 123d, e, f, and g
    
    This patch removes some UNIMARC cataloging plugins which were
    essentially duplicates of each other and renaming the remaining version
    to reflect that it's for use with multiple subfields.
    
    UNIMARC 123$d, e, f, and g can all be filled with
    unimarc_field_123defg.pl
    
    It's easiest to test if you have UNIMARC sample data. In KTD, run
    'reset_all_unimarc'
    
    - Apply the patch and run the database update process.
    - Go to Cataloging and create or edit a bibliographic record.
    - Under tab 1, look for tag 123.
    - Test the plugin link for subfields d, e, f, and g
      - In each case the popup window should have the heading "UNIMARC field
        123d/e/f/g builder"
      - Fill out the form each time and confirm that the values are copied
        to the correct field in the MARC editor window.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2b4e22b5b9eaff81738da0725f422989b072376f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jul 13 13:41:21 2023 +0000

    Bug 34270: Upgrade and prune jQueryUI assets in the staff interface
    
    This patch updates jQueryUI assets in the staff interface with an
    upgraded and trimmed version which includes only support for jQueryUI
    autocomplete.
    
    Global staff interface CSS has been modified to remove unused
    jQueryUI-related styles and to accommodate the updated assets.
    
    The patch also removes some unused jQueryUI image assets from the OPAC
    templates.
    
    To test, apply the patch and rebuild the staff interface CSS. Test the
    "Check out" form in the header to confirm that it still looks correct
    and works correctly.
    
    Signed-off-by: Émily-Rose Francoeur <emily-rose.francoeur@inLibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 64afe78e04ed8df6cea2a820512276990c63b369
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Fri Aug 4 17:29:20 2023 +0000

    Bug 34457: Added cardnumber view to hold details page
    
    Signed-off-by: Rebecca Coert <rcoert@arlingtonva.us>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e2269c2b88fb3ac947128d95af67b5ff84cdb847
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jun 16 13:39:40 2023 +0000

    Bug 34035: Move translatable strings out of opac-bottom.inc: Tags
    
    This patch removes the definition of JS variables in opac-bottom.inc
    related to the tags feature. These strings can be wrapped in the __()
    function inside tags.js and they'll get picked up for translation.
    
    Some other tags-related JS variable definitions are removed from
    templates in favor of embedding them directly in the <script> block.
    
    To test you must have TagsEnabled set to "Allow." Apply the patch and
    log in to the OPAC.
    
    - Perform a catalog search and select some items in the result list.
      - Add the items to the cart and open the cart.
        - Check a box next to one of the titles in the cart.
        - Click the "Tag" link
        - Submit the "New tag" form without entering a tag. You should see
          "No tag was specified."
        - Perform the same test on the search results page both using the
          checkboxes and by clicking the "Add tag" link on an individual
          result.
      - Perform the same test on the bibliographic detail page.
      - When adding tags from the cart, result list, or detail page, confirm
        that the "Tags added: X" message is always displayed.
      - Test adding a tag to a title which is already attached to that
        title.
      - Test adding HTML markup, e.g. "<script>"
      - Test adding HTML markup and plain text, e.g. "<script>Foo"
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7b976cd7fe1b1f417dcd9ed86efbdbf406ed5626
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jun 16 13:05:58 2023 +0000

    Bug 34035: (preparatory cleanup) Convert indentation to spaces.
    
    This patch converts tabs to spaces in tags.js. No other changes are
    made.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 04648e58195a6c9e933f49e1ac666327ac7adfed
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jun 16 12:47:29 2023 +0000

    Bug 34034: Move translatable strings out of opac-bottom.inc: OverDrive and OpenLibrary
    
    This patch removes some string variable definitions from
    opac-bottom.inc. The strings can now be picked up for translation from
    the corresponding <script> block.
    
    To test you must enable OpenLibrarySearch and enter OverDrive
    credentials to enable OverDrive search integration.
    
    - Perform a search in the OPAC.
    - As the results page loads you should see at the top "Searching
      OverDrive..." and "Searching OpenLibrary..."
    - When the searches complete you should see "Found X results in the
      library's Y collection" for each service.
    - Try to trigger an error message by entering the wrong (non-zero) value
      for the OverDriveLibraryID preference.
    - The search results page should show "Error searching OverDrive
      collection"
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b25cd57592a24db7289ce5283f9170b31e00bec2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jun 16 11:36:10 2023 +0000

    Bug 34031: Move various translatable strings out of opac-bottom.inc
    
    This patch moves some JS variable definitions out of opac-bottom.inc.
    These variables where defined so that they could be picked up for
    translation, but they can now be moved to the corresponding <script>
    blocks.
    
    Many other of these variables are not used at all and have been removed.
    
    To test you should have EnableOpacSearchHistory, OPACPrivacy, and
    opacreadinghistory enabled. Apply the patch and log into the OPAC as a
    user with suggestions, search history, and checkout history.
    
    - Click your user menu at the top of the page and click the "Clear" link
      for search history. You should see a confirmation, "Are you sure you
      want to delete your search history?" Confirming should trigger your
      search history deletion.
    - From your user summary page, click "Privacy." Under "Immediate
      deletion," clicking any of the delete buttons should trigger a
      confirmation, "Warning: Cannot be undone. Please confirm once again"
    - From your user summary page, click "Purchase suggestions."
      - Without checking any checkbox, click the "Delete selected" button at
        the bottom. You should see an alert, "No suggestion was selected."
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f2db5f846de3ebc719860a73c34633a1627c2293
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Oct 8 13:54:00 2023 +0000

    Bug 34026: (QA follow-up) Remove NO_COCE_JACKET
    
    As already noted in Owen's commit message, this variable
    appears to be unused.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 85a4779f9a308b5cd8dcde123230d001907a2c10
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jun 15 18:56:25 2023 +0000

    Bug 34026: Move translatable cover-handling strings out of opac-bottom.inc
    
    This patch removes several instances from opac-bottom.inc where we
    define strings for translation and use in separate JavaScript files. The
    JavaScript files are updated to use the __() function to mark strings
    for translation.
    
    Note: Definition of the variable NO_COCE_JACKET is removed because it is
    unused.
    
    To test, apply the patch and clear your browser cache if necessary.
    
    - In the staff interface, enable OPAC cover image services:
      - OPACAmazonCoverImages
      - BakerTaylorEnabled
      - GoogleJackets
      - OpenLibraryCovers
    
    - In the OPAC, perform a search and confirm that there are no JS errors
      on the search results page related to cover images.
    - Check the bibliographic detail page as well.
    
    To confirm that the strings are being picked up for translation, run the
    update process for another language, e.g.
    
    perl misc/translator/translate update fr-FR
    
    Then check the newly-built po file: fr-FR-messages-js.po. It should
    list the updated files:
    
     koha-tmpl/opac-tmpl/bootstrap/js/amazonimages.js:8
     koha-tmpl/opac-tmpl/bootstrap/js/amazonimages.js:10
     koha-tmpl/opac-tmpl/bootstrap/js/bakertaylorimages.js:7
     koha-tmpl/opac-tmpl/bootstrap/js/google-jackets.js:77
     koha-tmpl/opac-tmpl/bootstrap/js/openlibrary.js:63
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 49e52c3105de71c68ef6e569553ac3bfa133217a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jun 16 14:22:08 2023 +0000

    Bug 33983: Move translatable strings out of OPAC's datatables.inc into JavaScript
    
    This patch removes the definition of translatable strings out of
    the OPAC datatables.inc file and into datatables.js using the new JS
    i81n function.
    
    To test apply the patch and test some DataTable-driven tables in the
    OPAC. A list of possible examples:
    
    - Cart
    - Bibliographic detail page
      - Place hold (with OPAC item level holds enabled in circulation rules)
        - Show more options ->
          - A specific item
    - Bibliographic detail page for a serial record ->
      - More details ->
        - Full history
    - Most popular
    - Self checkout
    - Logged in user ->
      - Charges
      - Curbside pickups
      - Messaging
      - Checkout history
      - Suggestions
      - Holds history
      - Tags
      - Recalls history
      - Search history
      - ILL requests
    
    DataTables functionality should be unaffected. Check that the strings
    defined for translation are still working. For instance the "Clear
    filter" label on user summary checkouts, or the "No matching records
    found" text displayed when you search a table for a string that doesn't
    exist.
    
    TESTING TRANSLATABILITY
    
    - Update a translation, e.g. fr-FR:
    
      > cd misc/translator
      > perl translate update fr-FR
    
    - Open the corresponding .po file for JavaScript strings, in this case
      misc/translator/po/fr-FR-messages-js.po
    - Locate strings pulled from
      koha-tmpl/intranet-tmpl/prog/js/members.js for translation, e.g.:
    
      msgid "Clear filter"
    
    - Edit the corresponding "msgstr" string however you want (it's just for
      testing).
    - Install the updated translation:
    
      > perl translate install fr-FR
    
    - Switch to your newly translated language and repeat the test plan
      above. The translated strings should appear.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0c74f429bcc5e05fc2444ce47349c9905c5fc448
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Sep 27 12:36:15 2023 +0000

    Bug 34921: Tabs on Additional Content page need space above
    
    This patch adds a separator element, <hr /> between the additional
    contents form and the tabs for visual clarity. Using an element is a
    little hackish but it's a simple solution.
    
    To test, apply the patch and go to Tools -> News -> New entry.
    
    There should be a clear gap between the top form and the tabs below.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 643e38e835d868ba46c3614e6aeefd4eeb85a522
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Sep 20 06:23:36 2023 -0400

    Bug 34153: (QA follow-up) Tidy code
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Rebased-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7f2d38d85e7b4e53217f060eda110e75e789f532
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jun 29 08:06:51 2023 -0400

    Bug 34153: Add ability to allow items with additional materials notes to be checked out via SIP
    
    At this time, any item with an additional materials date is blocked from checkout via SIP with a screen message to take the item to a circulation desk for checkout.
    Some libraries wish to allow patrons to check out items via SIP even if the item has additional materials.
    
    Test Plan:
    1) Create an item with an additional materials note
    2) Attempt to check it out via SIP
    3) Note the failure and message
    4) Enable the new SIP account option "allow_additional_materials_checkout"
    5) Restart the SIP server
    6) Attempt the checkout again
    7) Note the checkout success and new AF field message!
    8) prove t/db_dependent/SIP/Message.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Rebased-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7bb4d949304fff8685f0041e7ca0c1b79521af49
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Sep 20 08:47:48 2023 +0200

    Bug 34153: Add tests
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit be375ed01ce997817b23bbd219b05033ac1c35e7
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Wed Sep 6 00:13:48 2023 +0000

    Bug 34722: Prevent other items from displaying to fill item-level recalls
    
    This patch prevents other items attached to a record from being displayed as 'recalled' by item-level recalls.
    
    To test:
    1. Ensure UseRecalls system preference is enabled and circulation rules relevant to recalls are configured. Set 'on shelf recalls allowed' circulation rule 'if any unavailable' for ease of testing.
    2. Search for a record that has multiple items, or create one with multiple items. Check out two of the items (Item A and Item B) to a patron, Patron A.
    3. Log into the OPAC as another patron, Patron B. Search for the record and place a recall. Choose to recall a specific item and select Item A.
    4. Go back to the staff interface and view the catalogue detail page for the record. Notice that every item has a 'recalled by...' message, even though Item A was specifically recalled.
    5. Log into the OPAC as another patron, Patron C. Search for the record and place a recall. Choose to recall a specific item, notice every item has a 'recalled by...' message. Select Item B and Confirm.
    6. In your terminal, the 'Other items are not returned for item-level recalls' test should fail when running
    prove t/db_dependent/Koha/Item.t
    
    7. Apply the patch and restart services
    
    8. Confirm tests at t/db_dependent/Koha/Item.t now pass
    9. Refresh the staff interface, confirm only Items A and B have the recalled message and the recall patron information for each item is accurate
    10. Log into the OPAC as another patron, Patron D. Search for the record and place a recall. Choose to recall a specific item. Confirm only Items A and B have the recalled message.
    
    Sponsored-by: Toi Ohomai Institute of Technology
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Perltidied new code.
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a6ba086a92115af5e43c84eb4e8dc8dbe2422ff7
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Sep 26 19:04:17 2023 +0000

    Bug 34923: Allow direct input of hold dates on opac-reserve.tt
    
    To test:
    1. Turn on AllowHoldDateInFuture and OPACAllowHoldDateInFuture
    2. Make a hold in OPAC and notice you cannot directly input a date in either the "Hold starts on date:" field or the "Hold not needed after:" field.
    3. APPLY PATCH
    4. Clear your browser cache and try again. You should be able to directly input dates.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7382e305e1bc6c43c74397f135e2267fcb9f8e4e
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Sep 21 01:27:45 2023 +0000

    Bug 34859: Remove unnecessary params from reports-home.pl
    
    This change removes unnecessary syspref template parameters
    and tidies the code.
    
    Test plan:
    0. Apply the patch and koha-plack --reload kohadev
    1. Go to
    /cgi-bin/koha/admin/preferences.pl?op=search&searchfield=IntranetNav
    2. Add the following and save:
    <li><a href="#">Awesome</a></li>
    3. Go to
    /cgi-bin/koha/admin/preferences.pl?op=search&searchfield=intranetstylesheet
    4. Add the following and save:
    http://bad
    5. Go to
    /cgi-bin/koha/admin/preferences.pl?op=search&searchfield=intranetcolorstylesheet
    6. Add the following and save:
    http://bad2
    7. Go to /cgi-bin/koha/reports/reports-home.pl
    8. Note the "Awesome" link in the top navbar
    9. Note in the console that there are two errors where http://bad
    and http://bad2 can't be resolved
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c9ab718a39174d0a874fc8de8964b6f96b704f37
Author: David Nind <david@davidnind.com>
Date:   Sat Sep 23 01:10:31 2023 +0000

    Bug 33395: Patron search results - show number of overdues and checkouts when patrons have overdues
    
    This fixes the display of patron search results, so that it shows
    the number of checkouts when a patron has overdue items. For
    example: 1 / 2
    
    Bug 30063 changed the display to show only the number of overdue
    items in bold and red, without the total number of items checked
    out.
    
    Test plan:
    1. Check out two items to a patron - make one overdue (click the
       checkout setting options and then specify a due date a month
       ago).
    2. Check out another item to another patron.
    3. Search for patrons so that the two patrons you checked out
       items to are listed in the results.
    4. Note the display for the 'Checkouts' column:
       4.1 For patrons without any checkouts: 0 / 0
       4.2 For the patron from step 2 with one checkout: 0 / 1
       4.3 For the patron from step 1 with one overdue and one
           checkout: 1 (in bold and red)
    5. Apply the patch.
    6. Refresh the page of results (step 3).
    7. Note that for the patron from step 1, the display now shows:
       1 / 2 (with the 1 in bold and red).
    8. Sign off! 8-)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f3ebd78dee3399459f1250571c0ee53fe14aa2be
Author: Wainui Witika-Park <wainuiwitikapark@catalyst.net.nz>
Date:   Tue Jul 18 01:24:16 2023 +0000

    Bug 34300: Add holds column to order table
    
    Adds the ability to easily place a hold on an ordered item from a basket
    
    To test:
        1) Apply patch
        2) Go to acquisitions
        3) Go to an existing basket, or create a new one
        4) Add an order to the basket
        4) Notice there is a "Place hold" column in the Orders table
        5) Click the link for an item which allows you to place a hold easily on the biblio
        6) On the columns settings, toggle the "Place hold" column to hide it, and make sure it gets hidden
    
        Sponsored-by: Pymble Ladies’ College
    
    Signed-off-by: Lisette Scheer <lisette.scheer@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5dc577088618b76e1da824f15aafbc1d1016a14b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 4 14:07:38 2023 -0400

    Bug 9525: DBRev 23.06.00.028
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ccc720186672b1361349f99411be41ebed046e90
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 4 14:03:10 2023 -0400

    Bug 9525: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9f845d83f9a2cf7da40c50ba2620454e0fd0059b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Oct 4 13:59:26 2023 -0400

    Bug 9525: Atomic update fixes
    
    This patch modernizes the atomic update, makes it follow the current
    pattern of checking the column existence, and printing a message about
    the column being created.
    
    It also adds the COMMENT statement so tests pass later.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 151298709afcac0376f9a4b8c3e3b13cd3b9d207
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 28 13:59:24 2023 +0000

    Bug 9525: (QA follow-up) Tidy
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c4080836de6d42534930ceccdf27f6fa7b749d9d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Apr 26 15:06:53 2023 +0000

    Bug 9525: (QA follow-up) Clarify how float groups are selected in circulation rules
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fdf7732dc208e682bd63021f480a6b4b159a896b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Apr 26 15:02:54 2023 +0000

    Bug 9525: (QA follow-up) Fix QA complaints
    
    Add boolean to schema
    Remove stray console.log
    Fix subroutine name in POD
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 43726e7b9455225f49458d312eca14f3f2b6b53e
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Fri Nov 11 09:24:37 2022 +0200

    Bug 9525: Fix tests
    
    To test prove t/db_dependent/Koha/Libraries.t
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7c22b12240a94413ccd6920e5b4fb5e4cc96bd1a
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Wed Sep 8 08:58:14 2021 +0300

    Bug 9525: Add option to define float groups and rules for float
    
    Bug 22284 introduced ability to create hold groups.
    We should have ability to create float groups in
    same manner. This patch adds checkbox "Is local
    float group" to group creation feature and new return
    policy "Item floats by librarygroup".
    
    To test:
    1. Add new float group and some libraries to it.
    2. From circulation and fine rules, set default
    return policy as "Item floats by library group".
    3. Check out an item for a patron.
    4. Set library as one that belongs in the same
    float group.
    5. Check in the item.
    => Observe that notice for transfer doesn't pop up.
    6. Check out again.
    7. This time set library as one that doen's
    belong in the same float group.
    8. Check in.
    => Observe that notice for transfer pops up.
    
    Experiment this feature by changing return policy
    per library, item type etc.
    
    Also prove t/db_dependent/Koha/Libraries.t
    
    Sponsored-by: Koha-Suomi Oy
    
    Signed-off-by: Lisette Scheer <lisettePalouse+Koha@gmail.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2e5d60a83b80cae5ce0a78c747f722548d100fc5
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Tue Sep 7 09:33:44 2021 +0300

    Bug 9525: Add ft_local_float_group column
    
    This patch adds new ft_local_float_group column
    to library_groups table.
    
    To test:
    1. Apply patch and update database
    2. Confirm new column is added correctly to the
    library_groups table
    
    Sponsored-by: Koha-Suomi Oy
    
    Signed-off-by: Lisette Scheer <lisettePalouse+Koha@gmail.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 00967065415684d11aad37d9018e3d2afcc35c00
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Sep 15 13:00:54 2023 -0400

    Bug 33958: (QA follow-up) tidy normalized_oclc
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3fb6dc40fe54fad06a28d061ff5222444de990a4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 8 14:15:16 2023 +0200

    Bug 33958: Koha::Biblio::normalized_oclc
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 69841b192a2e6cb74e03aa692112fb90e6a62a76
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 8 14:14:43 2023 +0200

    Bug 33958: Add tests
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1c016176341be0197d1978e3b4ee0e6c5136c319
Author: Emily-Rose Francoeur <emily-rose.francoeur@inLibro.com>
Date:   Fri Sep 22 11:58:23 2023 -0400

    Bug 34870: Perform UTF8 encoding before redirection
    
    Display special characters correctly when writing off an invoice.
    
    The issue arises because pay.pl does not perform UTF-8 encoding on the “notes” parameter before redirecting the page. By using uri_escape_utf8, characters with a code above 255 are also UTF-8 encoded. Then, paycollect.pl can collect the information without any trouble.
    
    This patch work with “;” and “:” characters.
    
    TEST PLAN
    1) Go to any patron profile > Accounting
    2) Click “Create manual invoice”
    3) Fill the fields and click the “Save” button
    4) Repeat steps 2 and 3
    5) Click “Make a payment”
    6) Add a note with special characters for each one (e.g., éçö)
    7) Select the created invoices and click the “Write off selected” button
    8) In the note field, you should see “�” symbols where the special characters are supposed to be
    9) Click the “Cancel” button
    10) Now add a note with “:;” for one of the invoices
    11) Select the invoices and click the “Write off selected” button
    12) You should see a page with an error 500
    13) Go back to the “Make a payment” page
    14) Apply the patch
    15) Add a note with special characters for each one (e.g., éçö)
    16) Add “:;” to one of the note fields
    17) Select the invoices and click the “Write off selected” button
    18) Now the special characters are displayed correctly
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1f730fb8665a53457ad709933d3518577c041a6e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Sep 29 18:33:59 2023 +0000

    Bug 34961: Add sort parameter to OPAC search results RSS feed link
    
    This patch corrects two RSS links in the OPAC search results template so
    that they include the correct parameters, including the descending sort
    by acquisition date.
    
    To test, apply the patch and go to the OPAC.
    
    - Perform a catalog search which will return search results.
    - Next to the page heading "Your search returned X results" is an RSS
      link. Check the link to confirm that it has all the expected
      parameters:
    
      opac-search.pl?idx=kw&q=nude&count=50&sort_by=acqdate_dsc&format=rss
    
    - Perform a search which will return no results and check the RSS link
      on that page. It should be the same.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f90715782c0acb4cd548e005b34a76e08c20b0c5
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Sep 8 12:06:26 2023 +0100

    Bug 33690: Convert to x-koha-override
    
    This patch converts the existing work to use x-koha-override instead of
    introducing an entirely new header and we default to the system
    preference value if the override isn't passed.
    
    I believe this is more consistent with our approach in other areas of
    koha to date.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6a9b4d909618b7f6dd6f6d46d1a96802e81f0c1d
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jun 23 10:50:33 2023 -0400

    Bug 33690: (QA follow-up) Mock C4::Letters subroutines for unit tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    JD Amended patch: tidy
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 79a5509b775095643952f94028d62ba978515cfb
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri May 5 12:22:53 2023 -0400

    Bug 33690: Add ability to send welcome notice when creating patrons using the REST API
    
    It would be nice to have the ability to send a welcome notice when creating patrons via the API.
    
    Test Plan:
    1) Apply this patch
    2) Ensure you have a WELCOME notice
    3) Create a new patron using the REST API ( api/v1/patrons )
    4) Note no welcome notice is sent to the patron ( you can check the
       notices tab for the patron )
    5) Repeat step 3, but send the header X-Koha-SendWelcomeEmail with a
       value of 1 as part of the POST
    6) Note the welcome message for the patron is in their notices!
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Bug 33690: Tidy test
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c914473e811d6670a7195b11dc09cddc08182c24
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Sep 25 11:29:20 2023 +0100

    Bug 34737: (follow-up) Code more defensively
    
    This patch adds some defense for errant preference lines, allowing for
    empty lines, comment lines and even skipping easily identified malformed
    lines.
    
    Signed-off-by: Toni Ford <Toni.Ford@newcastle.gov.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6fbed94d45ae6ad20c6dca5f50301dfbc7489586
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Sep 25 11:39:22 2023 +0100

    Bug 34737: (follow-up) Unit test for skipping bad lines
    
    We update the test rules set to include some malformed, empty and
    comment lines. No actual tests are added, but the skipping is checked by
    all other tests in this way.
    
    Signed-off-by: Toni Ford <Toni.Ford@newcastle.gov.uk>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 46bf81d44356e55359cdb501f57e4647850be830
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Sep 14 13:59:42 2023 -0400

    Bug 34737: Tidy t/db_dependent/SIP/Transaction.t
    
    Signed-off-by: Toni Ford <Toni.Ford@newcastle.gov.uk>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8d55afc04e3f9a43dcf8e17f3eace7b55f156034
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Sep 7 17:24:24 2023 +0100

    Bug 34737: (follow-up) Squelch a warning
    
    We weren't checking whether an item property was defined or not and as
    such the new test highlighted a new warning.
    
    Signed-off-by: Toni Ford <Toni.Ford@newcastle.gov.uk>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 85fa7b04fb30eac363b6f8caea80abb7e632710d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Sep 7 17:23:42 2023 +0100

    Bug 34737: Unit tests
    
    This patch adds unit test to prove the multi-field match functionality
    added in this patchset.
    
    Signed-off-by: Toni Ford <Toni.Ford@newcastle.gov.uk>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1a633d68da8d2d8a1576d3d9c50ef13ec37fca81
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Sep 7 16:53:00 2023 +0100

    Bug 34737: Add ability to match on combinations of item fields
    
    This patch updates the sort bin selection logic to allow for multiple
    item field comparisons in a single config rule line.
    
    Test plan
    1) Run the unit tests before and after applying this patch and confirm
       they pass in both cases (prove -v t/db_debendant/SIP/Transaction.t
    2) Check out an item and return it via SIP2:
         $ telnet localhost 8023
         9300CNterm1|COterm1|CPCPL|
         09N20200422    12430020200422    124300APCPL|AOCPL|AB001|AC|
       (Where 001 in |AB001| is the barcode of the item in question)
    4) Check there is no CL field in the last response
    5) Apply the patch, fill in SIP2SortBinMapping with e.g.:
           CPL:itype:eq:BK:ccode:eq:TEEN:3
    6) Repeat the first step
    7) Check the response contains a CL field with a value of 3 (or what
       you put in the config). The field should look like |CL3|
    
    Signed-off-by: Toni Ford <Toni.Ford@newcastle.gov.uk>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6296658e862b7d0cd267f580b3ae4169dd6e80b4
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Sat Sep 2 07:05:22 2023 +0000

    Bug 33522: (follow-up) Do not rely on fallback
    
    Bug 33245 has been adjusted; the fallback has been removed.
    We should check now if the -active or -inactive parameter
    actually has been passed.
    
    Test plan:
    See earlier test plan.
    Run the script without active/inactive.
    Run the script with active.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d6a2a3c88cd5a12137e70125c513e7129402d1e0
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue May 30 15:04:28 2023 +0000

    Bug 33522: Add active and inactive parameter to membership_expiry.pl
    
    Test plan:
    Enable TrackLastPatronActivity.
    Set MembershipExpiryDaysNotice to X days.
    Pick a patron, make it expire in X days. Add email address.
    Update borrowers.lastseen for this patron to make it active.
    Run membership_expiry.pl -c -v -active 6
    You should see at least one enqueued notice.
    Run membership_expiry.pl -c -v -inactive 6
    You should see that it skipped a number of active patrons (>=1).
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 52ae9a3a25037fe73f99fa5777a2e5b75e0568fe
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Mar 16 15:41:55 2023 +0000

    Bug 33245: Add unit test
    
    Test plan:
    Run t/db_dependent/Koha/Patron.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    JD amended patch: Adjust number of tests
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b9f8147cdff878165dd2cb12e7554c123111b223
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Mar 16 14:34:58 2023 +0000

    Bug 33245: Introduce patron->is_active
    
    Does only add the new patron method.
    
    NOTE: We may define additional criteria at some point, but I think
    that this is a good starting point.
    
    Test plan:
    Run perl -MKoha::Patron -e'print Koha::Patrons->find(X)->is_active(Y);'
    Note: replace X by a valid borrowernumber and Y by date criterium.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c6283f5d9a0a0710ebf3e6a95f939f1e4f760ac1
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Mar 16 15:41:33 2023 +0000

    Bug 33245: TestBuilder: Default value for anonymized
    
    When we create a patron with TestBuilder, we normally
    do not expect an anonymized status. This will certainly
    hold for the patrons we are creating for testing is_active
    in a following patch.
    
    Test plan:
    Run t/db_dependent/Koha/Patron.t
    Run t/db_dependent/Koha/Patrons.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ca2fdda34281fb65c65c8cee0715868825794cd0
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Sep 22 16:31:08 2023 +0000

    Bug 34891: Correct link on view restrictions button
    
    This patch updates the button which appears on the circulation page
    when a patron is restricted. Before this patch, clicking the button
    would activate the restrictions tab but wouldn't scroll the page to make
    the tab visible.
    
    To test, apply the patch and check out to a patron who has one or more
    restrictions.
    
    - There should be a message on the page, "Restricted since..."
    - Click the "View restrictions" button.
    - The page should jump down so that the tabs are visible and the
      restrictions tab should be active.
    - Test on the patron details page too.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b0b33b382c5254db2b4d78ee4d00f03d589513ca
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jan 31 12:42:46 2023 -0500

    Bug 32676: Fix EDI message status case
    
    Edifact status appear to vary between all lower case and being
    capitalized. This breaks the switch in the edi_status block of the
    basket.tt template. We should make this switch case-insensitive.
    
    Test Plan:
    1) View the basket for a sent EDI order, note the Sent status does not
       display.
    2) Apply this patch
    3) Reloate the page, note the status is now visible!
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d949ac5e5c277dc18f44fc958d6ccb72a4acfa75
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Oct 3 12:34:11 2023 +0000

    Bug 34820: (QA follow-up) Fix span tag
    
    One span tag was missing a <.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 659ccabd938b4459b6b33bf93a539c17df8df886
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Sep 20 13:43:56 2023 -0400

    Bug 34820: (QA follow-up) Replace em tags with quotes
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 80b85e1bb37689a1003705c2d0fd9651943b8f81
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Sep 20 06:40:08 2023 -0400

    Bug 34820: (QA follow-up) add filter, update CSV output
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1810fac11e5329804a6340dc60ebeb50527b7160
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Sep 18 12:02:34 2023 -0400

    Bug 34820: Clarify inventory tool message for items with non-matching notforloan value
    
    In the inventory tool, if one or more not for loan values are selected, and an item is scanned that has no NFL status or an unselected NFL status, the error message reads "Unknown not-for-loan status". This can be interpreted as the item having an NFL status value that is not defined in the system, but that is not accurate. This should be reworded to remove ambiguity.
    
    Test plan:
    1) Create two items, one of which has the NFL status of "Ordered", the
       other having no NFL status
    2) Enter those two barcodes in the inventory tool barcodes list
    3) Check only "Ordered" in items.notforloan
    4) Note the problem messages
    5) Apply this patch
    6) Re-run the inventory tool
    7) Note the new clarified messages!
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a3849909a98f286ffedead029aff5fc2b16a6c76
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Sep 28 11:30:35 2023 +0000

    Bug 34945: Remove the use of event attributes from OPAC clubs tab
    
    This patch removes the use of event attributes (onclick) from the
    template for the clubs tab shown in the OPAC to a logged-in user.
    These events are defined now along with the other in-page JS.
    
    The patch also makes some general improvements to the template for
    consistency:
    
    - Adding Bootstrap color classes to the "Enroll" and "Cancel enrollment"
      buttons.
    - Enhancing the responsive configuration to the DataTable.
    
    To test you should have a few patron clubs defined (Tools -> Patron
    clubs).
    
    - Apply the patch and log in to the OPAC.
    - On the user summary page, click the "Clubs" tab.
    - The "Enroll" and "Cancel enrollment" buttons should look correct and
      work as expected:
      - Click the "Enroll" button.
        - On the enrollment confirmation view, test both the "Finish
          enrollment" button and the "Cancel" link.
      - Test "Cancel enrollment" button.
    - Test the responsive behavior of the page to confirm that it adjusts
      well to narrow browser widths.
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 075876fe0530258eaa22c0a24e7f472896232d9d
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Sep 25 10:11:03 2023 -0400

    Bug 22873: Add comment to explain what disallow_overpayment is for
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dc140bdb2e4837dae5906f0e7e98a35c1ebe81b6
Author: Victor Grousset <victor@tuxayo.net>
Date:   Mon Sep 25 08:47:36 2023 +0200

    Bug 34833: (follow-up): remove redundant spaces
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2b1b7c9ce84683543267816f6e6d351fe3f891d0
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Sep 19 19:53:38 2023 +0000

    Bug 34833: Make "order number" in acq modal translatable
    
    The 'order number' was not translatable when editing the
    estimated delivery date or notes from basket summary or
    when editing the estimated delivery date from late orders.
    
    To get there:
    0. Make sure you have budgets and vendors set up
    
    1. Create a basket (skip this if you already have an open basket)
       1.1. Go to acquisitions
       1.2. Search for a vendor
       1.3. Click New > basket
       1.4. Enter a name for the basket
       1.5. To make the tests easier, choose to create items when : cataloging the record
       1.6. Click save
    
    2. Add an order
       2.1. Click add to basket > From a new (empty) record
       2.2. Fill out the form, minimally
            - Enter a title
            - Enter a quantity
            - Choose a fund
            - Enter a vendor price
       2.3. Click Save
    
    3. Next to the order line, click Edit under Estimated delivery date
    4. Verify that the 'order number <ordernumber>' shows on top of the modal
    5. Edit internal/vendor note, verify it shows there as well
    6. Close basket
    7. Go to late orders
    8. Edit estimated delivery date, text should show there as well
    9. Apply patch
    10. Run translation update script
    11. Verify the string now appears in po files
    12. Translate it
    13. Install translation
    14. Verify it shows nicely translated in all 3 mentioned spots
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 799f7968dd6aa1f84b26db6dcb7216a3e4a857f7
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Aug 28 12:49:43 2023 +0000

    Bug 34619: Show debug mode column in list of SMTP servers
    
    This patch adds a column to the table of SMTP servers which shows
    whether debug mode is on or off. This information was previously only
    conveyed through the color of the text in the table row.
    
    To test, apply the patch and go to Administration -> SMTP servers.
    
    - If necessary, add one or more SMTP servers so that there are more than
      one: At least one with debug mode on, at least one with debug mode
      off.
    - In the table listing SMTP servers you should see a column for "Debug
      mode," where the rows indicate "On" or "Off."
    - Each row which is highlighted in red should show "On" for debug mode.
    
    Signed-off-by: Émily-Rose Francoeur <emily-rose.francoeur@inLibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f91db88fcebeaa4b2ed0a58f4e2f2f9d1487178f
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed Aug 9 16:22:39 2023 -0400

    Bug 34511: Typo in manage_staged_records permission description
    
    This patch corrects a typo in the description of the manage_staged_records permission. All other permission descriptions are in the present tense, but this one is in the past tense.
    
    To test:
    0. Apply the patch
    1. Go to any patron record
    2. Click More > Set permissions
    3. Click Show details next to the Use all tools permission
    4. Read the description for the manage_staged_records permission, make sure the spelling and grammar are correct
    
    Signed-off-by: hebah <hebah@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5c47fd33f3d9b3917e3db5fe2ea4e38687332c28
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue May 23 16:08:31 2023 +0000

    Bug 33812: Checkboxes need labels in opac-messaging.tt
    
    Aria-labels have been added to checkboxes in the OPAC messaging preferences table to assist with screen reading. The relevant preference has been mentioned in each label to identify what the checkbox is for.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 92ef068232e1c7b60c2312cb6f3747d8778f0d73
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Sep 25 12:46:08 2023 +0000

    Bug 34865: Use OPACURLOpenInNewWindow for library URLs
    
    If a library has a URL defined it is shown in the OPAC under the
    libraries page. This patch updates the template so that the link
    respects the OPACURLOpenInNewWindow system preference.
    
    To test, apply the patch and go to Administration -> Libraries and edit
    a library if necessary so that it has a URL defined.
    
    In the OPAC, go to the Libraries page. Test that the library link
    respects whichever setting you have for OPACURLOpenInNewWindow
    
    Signed-off-by: Kelly McElligott <kelly@bywatersolutions.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8a45084b7f757e131f2cc1aa61b8bce16e0ea34c
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Thu Aug 31 12:40:45 2023 -0400

    Bug 34679: Change description for RELTERMS authorized value category
    
    This patch changes the description of the RELTERMS authorized value
    category to "List of relator codes and terms".
    
    To test:
    1. Apply patch
    2. Go to Administration > Authorized values
    3. Search for category RELTERMS
       --> The description should read "List of relator codes and terms"
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 834365f4b4b2dea6eeb69ca500daea7d057155bf
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Sat Sep 23 07:08:27 2023 +0000

    Bug 34887: Merge with db_dependent Patron.t
    
    Test plan:
    Run t/db_dependent/Koha/Patron.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    JD amended patch: Fixed QA failures
     FAIL   t/db_dependent/Koha/Patron.t
       FAIL   spelling
                     personnal ==> personal
                     personnal ==> personal
                     personnal ==> personal
                     personnal ==> personal
       WARN   tidiness
                    The file is less tidy than before (bad/messy lines before: 361, now: 382)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 53377edcc7351935f8ff8bec838616479d59e358
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 22 14:14:02 2023 +0000

    Bug 34887: Fix transactions in db dependent Patron.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a432dda3f4fc42c47e2ca7e2c68c2206dd5e2b5f
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 22 13:54:31 2023 +0000

    Bug 34887: Remove Test::DBIx::Class from Patron.t
    
    Moving all tests into one subtest with two underlying
    subtests for checking accessors after new or set.
    This will make it more easy to merge with the db
    dependent counterpart.
    
    Test plan:
    Run t/Patron.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5fd831755205fc3b3b7481103fbe2145b421a5ea
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Sep 19 07:09:54 2023 +0000

    Bug 34825: Merge Letters.t into t/db/Letters.t
    
    Test plan:
    Run t/db_dependent/Letters.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 22aee4db67280da3a92713dae93e57737a94b303
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Sep 19 06:50:52 2023 +0000

    Bug 34825: Remove Test::DBIx::Class from Letters.t
    
    Includes a tidy.
    
    Test plan:
    Run t/Letters.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 23a8497123e9898f48f7e23f1fe8c09158e19d88
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Sat Sep 30 06:40:50 2023 +0000

    Bug 34968: Remove unneeded module from Search.t
    
    Test::DBIx::Class is not even used here.
    Just like C4::Biblio.
    We should remove TestBuilder too (this is t not t/db)!
    
    Test plan:
    Run t/Search.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit af093305b8c936f20c49fa707d5bc58fc9059ba8
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Sat Sep 30 06:52:08 2023 +0000

    Bug 34969: Remove unneeded module from buildQuery.t
    
    Test plan:
    Run t/Search/buildQuery.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a408421b9b5e56bc4f8123e8ebe409558a0b1111
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Sep 25 16:10:06 2023 +0000

    Bug 34905: Fix icon
    
    Test plan, on k-t-d:
    1) Install FreeForm, run:
    bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev.sh)
    
    2) Create a new FreeForm ILL request:
    http://localhost:8081/cgi-bin/koha/ill/ill-requests.pl?method=create&backend=FreeForm
    
    3) Pick a request type and input "42" in cardnumber and select a random library.
    
    4) Notice the "Place request with partners" icon is gone from the top action bar.
    
    5) Apply patch. Repeat.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 80db256a4700c6a7eec78fe85dade334d8b05bec
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Sat Sep 30 06:58:23 2023 +0000

    Bug 34970: Remove most modules from SuggestionEngine_AuthorityFile.t
    
    There is really no need for all those modules here.
    What remains, is just a trivial test.
    
    Test plan:
    Run t/SuggestionEngine_AuthorityFile.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 10ef1fe67226a09b15a563b04cde6cca266b87ce
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Sep 28 11:25:02 2023 +0000

    Bug 34944: Remove the use of event attributes from OPAC full serial issue page
    
    This patch removes the use of event attributes (onclick) from the OPAC's
    full serial issues template. These events are defined now along with the
    other in-page JS.
    
    To test you must have a serial record with issues from multiple years.
    
    - Locate the serial record and view the detail page.
    - Click "More details" at the bottom of the "Subscriptions" tab.
    - Click the "Full history" tab.
    - Test the "Show year" controls to confirm that clicking each year
      correctly filters the table of issues to show only issues from that
      year.
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8d4b10fc846eb74aa381c809923d13bf258a9752
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Sep 27 01:45:58 2023 +1400

    Bug 34912: Add 14 hours to 1970 date in Account(s).t
    
    This makes those tests pass in whatever timezone.
    
    Test plan:
    Do not yet apply patch.
    Change timezone on commandline with: export TZ='Etc/GMT-14'
    NOTE: GMT-14 is what we also call UTC+14 (sign reversed).
    Run prove t/db_dependent/Accounts.t t/db_dependent/Koha/Account.t
    This fails now.
    Apply patch.
    Rerun tests and verify that they pass now.
    Bonus: Try some other time zone.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7d93d18548d02b1b634db09356caf18795a6ddbf
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Sep 26 13:45:35 2023 +0000

    Bug 34916: Fix wrong borrowernumber in ArticleRequests.t
    
    Simple fix: Send patron to userenv instead of library only.
    
    Test plan:
    Do not apply patch.
    Remove borrowernumber 51.
    Run t/db_dependent/Koha/ArticleRequests.t. (FAIL)
    Apply patch, rerun test (PASS)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ff00e77f466bb217ed6235cec16047da5a620c75
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Sep 27 21:22:43 2023 +0000

    Bug 34939: Set hour:minute to 23:59 when inputing dates unless explicitly set
    
    1. Find some places in the staff interface where data-flatpickr-enable-time is set to true. Examples: renew.tt or circulation.tt
    2. Directly input a date in whatever date format you have specified in DateFormat but omit the hour/minute. Example: 12/12/2023
    3. See that the hour/minute default to 00:00 if your TimeFormat is 24hr and 12:00 AM if your time format is 12hr
    4. Apply patch, clear browser cache.
    5. Try step again, setting a date like '12/12/2023'. The hour:minute should be added as 23:59.
    6. With TimeFormat set to 24hr try entering a date with the hour:minute like '12/12/2023 11:22'. The hour:minute should be set to 11:22.
    7. With TimeFormat set to 12hr try entering a date with the hour:minute like '12/12/2023 11:22 AM'. The hour:minute should be set to 11:22 AM.
    8. Play with this in as many TimeFormat and DateFormat combonatinons as you can.
    
    Signed-off-by: Kristi Krueger <kkrueger@cuyahogalibrary.org>
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b50d43c14ee19b32c312a2955c888f48235fddc8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Sep 18 17:25:15 2023 +0000

    Bug 34822: Process real time holds along with indexing
    
    Current code already skips indexing when adding record to instead index in a single call. This patch pdates the code to do the same thing for real time holds queue updates.
    
    Note: Newly added records do not need to be updated as they won't have holds yet.
    
    To test:
    1 - Have a marc file with several records that match records in your catalog
        You can export part of your catalog to generate one
    2 - Set system preference:  RealTimeHoldsQueue to 'enable'
    3 - Stage and import file, make sure you are matching and overlaying
    4 - Go to Administration->Manage jobs
    5 - Note a batch update for each updated record
    6 - Apply patch
    7 - Repeat
    8 - Note a single job added for the entire batch containing only updated records
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5b9dbe558f6b9c548786691f29b940e4f2f66b86
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Sep 29 12:44:11 2023 +0000

    Bug 34689: Ignore itemnumber when creating item hash
    
    A primary key error can be thrown when an item number is included in a new title hash. We need the item creation to ignore an itemnumber even if it is included in a MARC Framework
    
    Test plan:
    1) Edit the MARC framework relating to books (BKS in KTD)
    2) In the 952$9 field (Koha itemnumber (autogenerated)), change the value of "Managed in tab" to "items (10)"
    3) In the catalog, find a record that uses that MARC framework
    4) Click "New" and choose to add a new item
    5) Enter a barcode and click the "Add & duplicate" button
    6) The page will refresh and an item will have been added
    7) Enter a new barcode and click the same button again
    8) An error will be thrown
    9) Click the back button in the browser
    10) Apply patch and restart_all
    11) Click the add and duplicate button again
    12) This time no error will be thrown and the page will refresh with another new item added
    13) Sign off!
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9f41a0fb979fabd70c1b1dc8ff6c54454969f818
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Sep 25 13:12:40 2023 +0000

    Bug 34645: (follow-up) save sort1 and sort2 in order
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f3bf1f3da5f82e9479ac1c39f0a5ab869e7a748c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Sep 18 16:32:10 2023 +0000

    Bug 34645: always use discount, sort1, and sort2 from MarcFieldsToOrder
    
    These values are stored at the order level, not per item. This patch simply sets the order values from the values retrieved from MarcFieldsToOrder even inf MarcItemFields to order is being used for other fields
    
    To test:
    Setup -- Set systempreferences below
    
    MarcFieldsToOrder:
    price: 949$g
    quantity: 949$k
    budget_code: 949$l
    discount: 949$m
    sort1: 949$n
    sort2: 949$q
    
    MarcItemFieldsToOrder:
    homebranch: 949$a
    holdingbranch: 949$b
    itype: 949$y
    nonpublic_note: 949$x
    public_note: 949$z
    loc: 949$c
    ccode: 949$8
    notforloan: 949$7
    uri: 949$u
    copyno: 949$t
    price: 949$g
    replacementprice: 949$v
    itemcallnumber: 949$o
    quantity: 949$k
    budget_code: 949$l
    
    Stage the attached bib-303.marcxml file
    Add to basket from the staged file
    Note that discount and sort1 and sort2 are not populated per the Marc
    Apply patch, restart all
    Stage and add to basket again
    Confirm discount and sort1 and sort2 are populated correctly
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7dd57db42932a45e1af9a5bc3f827e1178bec469
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Sep 26 10:27:57 2023 +0200

    Bug 34911: Test files from HEAD instead of 'master'
    
    Since bug 34303 the test suite (when ran on jenkins) is no longer testing Perl::Critic
    
    koha_1       | fatal: Not a valid object name master
    koha_1       | [14:58:14] t/00-testcritic.t
    
    We are not cloning the whole repo and "master" is not available. Additionally we do not want to test master's files on stable branches anyway...
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ca4da5e17ea7a65a473778f590c2703e8eecf7ce
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Sep 27 14:48:27 2023 +0200

    Bug 34932: Patron.t - Pass borrowernumber of manager to userenv
    
    Test plan:
    Make sure that you do not have borrowr 51.
    Run t/db_dependent/Koha/Patron.t.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1628a576c4984c7b18990315d8e7084c4e3fb30d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 29 16:02:46 2023 +0000

    Bug 34967: Move to db_dependent
    
    No further changes.
    
    Test plan:
    Run t/db_dependent/Prices.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e36b873a47dce9f21f19b25e4c617e330f31e1ff
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 29 16:01:13 2023 +0000

    Bug 34967: Add sample biblios and tidy some lines
    
    Test plan:
    Run t/Prices.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7378865f4e5a8430f54169825e20e4d6c71fb2cd
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 29 15:52:35 2023 +0000

    Bug 34967: Remove Test::DBIx::Class
    
    Move everything in one subtest
    
    Test plan:
    Run t/Prices.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3b190d625b378de451dd1ca6d1db636dc5f56741
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Sep 15 10:27:39 2023 +0000

    Bug 34801: Fix incorrect use of __() in .tt and .inc files (bug 34038 follow-up)
    
    __() should be used in .js files, not .tt files
    
    To test, apply the patch and update a translation, e.g. fr-FR:
    
      > cd misc/translator
      > perl translate update fr-FR
    
    - Open the corresponding .po file for JavaScript strings, in this case
      misc/translator/po/fr-FR-staff-prog.po
    - Confirm that the strings are now in the .po file for translation. You
      should find the lines in the commit
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 20524530c8308ea44e27c44d7e75861b0b923cae
Author: Jacob O'Mara <jacobomara901@gmail.com>
Date:   Tue Sep 26 15:19:45 2023 +0100

    Bug 34917: Fix default sort column of table in suggestion.tt
    
    Test plan:
    1. Navigate to Acquisitions and load the suggestions management page
    2. Ensure that there are some suggestions in the table
    3. Observe that the default sort is on the "Suggester Category" column
    4. Apply Patch
    5. Observe that the default sort is now on the "Suggested on" column
       instead
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 86628b352332a49afea34c6885672c99810bd89e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 2 15:43:29 2023 +0000

    Bug 34389: Fix inconsistencies in debit types titles, breadcrumbs, and header
    
    This patch fixes a couple of inconsistencies in the debit types
    administration page, making sure the page title, breadcrumb
    navigation, and page headers are consistent with each other.
    
    To test, apply the patch and go to Administration -> Debit types. Test
    each variation of the page:
    
    - Main page
    - New debit type
    - Modify debit type
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0b2cc01ca570748876e35818067ef7724806fe81
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Oct 2 16:14:21 2023 +0000

    Bug 34391: Fix inconsistencies in cash registers titles, breadcrumbs, and headers
    
    Fix inconsistencies in cash register page titles, breadcrumbs, and
    header
    
    This patch fixes a couple of inconsistencies in the cash register
    administration page, making sure the page title, breadcrumb
    navigation, and page headers are consistent with each other.
    
    To test, apply the patch and go to Administration -> Cash register. Test
    each variation of the page:
    
    - Main page
    - New cash register
    - Modify cash register
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7ec0a8ae60190c1d2baf716bb4c922ded0ef24b7
Author: David Nind <david@davidnind.com>
Date:   Sat Sep 30 09:03:06 2023 +0000

    Bug 34942: Fix typo - 'brower' to 'browser'
    
    This fixes a typo in a message used in the advanced cataloguing
    editor when macros are converted from being stored in the browser to
    being stored in the database (bug 17268 - Advanced cataloging editor
    - rancor - macros are lost when browser storage cleared).
    
    Test plan:
    1. Search for 'brower' in the codebase - there should be one occurance:
       grep -rn --exclude=*.po brower *
    2. Apply the patch.
    3. Run the search in step 1 again, there should now be no occurances.
    4. Review the diff for the patch a nd make sure that the change makes
       sense.
    5. Sign off! 8-)
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 68e141893cdd413f119e2f9885c221607e53d63d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Sep 26 11:35:45 2023 +0200

    Bug 27634: Fix self_registration.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f4b47321f478edfacd94e9946f9647416e296f27
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Oct 3 09:05:50 2023 -0400

    Bug 29145: DBRev 23.06.00.027
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit db5e08c6a6433e9c1676b74f7ddf244c588fbb36
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Sep 29 13:57:28 2023 +0000

    Bug 29145: (QA follow-up) Add +x to atomicupdate file
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 855a18f8ab64e2c50499d7b27da388487ebd31a8
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Sep 29 13:49:47 2023 +0000

    Bug 29145: (QA follow-up) Fix tests removing 'unblessed'
    
    This fixes issues with the tests caused by:
    Bug 32496: Reduce unnecessary unblessings of objects in Circulation.pm
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 51ec5d8a62dc69bc10c989f5c3efeb5528cd3349
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jul 21 16:31:53 2023 +0000

    Bug 29145: Perltidy files and added code
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit da81704cf2ae81d6463ad10009b5e25a0d133c42
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jul 21 16:05:11 2023 +0000

    Bug 29145: Replace GetDebarments in unit tests
    
    GetDebarments was removed and replaced by $patron->restrictions.
    The tests needed some adjustments to reflect that change.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 388762ae0b82a605dd1f4a493676bfe00c1452d6
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jan 27 14:37:28 2023 +0000

    Bug 29145: (QA follow-up) Remove debugging line
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 67bcdeed2826a77190ef3952b3a63b74be0f508e
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jan 27 14:36:40 2023 +0000

    Bug 29145: (QA follow-up) Use objects instead of straight SQL queries
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 91ecb7405ebc9698283315d5caa7b5ad603e3534
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jan 27 09:22:59 2023 -0500

    Bug 29145: (QA follow-up) Rename has_debarring_overdues to has_restricting_overdues
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 56d1ff05ff92fca12ff47efa2c49c4b18f654ca7
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jan 27 11:28:13 2023 +0000

    Bug 29145: (QA follow-up) Fix typo
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 12a6d4d4ba10fab47fa088eea984c28d318425a7
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Fri Nov 4 15:16:17 2022 +0100

    Bug 29145: (QA follow-up) Add missing POD and don't return undef
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0a66a4879aa47bfad4a409f13c81f1451da6d16d
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Oct 30 10:54:20 2022 +0000

    Bug 29145: (QA follow-up) Fix missing bug number in database update and typos
    
    Fixes some typos in test and update message that were highlighted
    by the QA tools.
    
    Add missing bug number to the atomic update file.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4678505e1e2be8bac2f10b1054d4566e3e67357b
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Thu Oct 13 13:20:12 2022 +0200

    Bug 29145: Fix conditions for patron debarring overdues
    
    Signed-off-by: Michaela <michaela.sieber@kit.edu>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ee8ef4b17411057424ed7baefab2148b517bf44d
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Wed Sep 21 16:09:51 2022 +0200

    Bug 29145: Add tests and modify sysprefs
    
    Add tests, remove ODueDebarmentRemovalAllowUnrestricted syspref and instead
    modify AutoRemoveOverduesRestrictions to have a third option
    
    Signed-off-by: Michaela <michaela.sieber@kit.edu>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f2d2a7839ed8727ce603ed2b435b7fcae56f7f49
Author: Stefan Berndtsson <stefan.berndtsson@gmail.com>
Date:   Thu Feb 8 15:54:44 2018 +0100

    Bug 29145: use overdues restrict delays when removing overdues restriction upon return
    
    How to test:
    1) Run tests in t/db_dependent/Circulation/MarkIssueReturned.t
    
    Sponsored by: Gothenburg University Library
    
    Signed-off-by: Michaela <michaela.sieber@kit.edu>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f8233f44a5e4871be38d9b850d97166dcf99c981
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Sep 27 10:43:04 2023 +0000

    Bug 34918: Fix userenv for safe_to_delete tests
    
    Instead of the fallback to 51, we pass a borrower that has
    permission for editing items.
    
    Test plan:
    Do not apply patch.
    Run test without a borrower 51 in db. (FAIL)
    Apply patch.
    Run test again. (PASS)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3298b2798520b9e9d7d37848739dc0b24b5f2e0d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Sep 26 14:42:08 2023 +0000

    Bug 34918: Fix hardcoded borrowernumber 42
    
    Test plan:
    Run t/db_dependent/Koha/Item.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0fb84e424e005179480faddb5d7d646bb594ea7b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Sep 27 13:57:49 2023 +0200

    Bug 34930: Change timezone in Koha/Object.t where tests assume it
    
    This is the case for subtest: attributes_from_api() tests.
    
    Test plan:
    export TZ='Europe/Amsterdam'
    prove t/db_dependent/Koha/Object.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6109a41ca607f826bb7bce5083009c74139d898a
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Sep 27 14:13:45 2023 +0200

    Bug 34489: Fix timezone problem in Patrons.t
    
    See also bug 34930. Using same approach.
    
    Test plan:
    export TZ='Europe/Amsterdam'
    prove t/db_dependent/Koha/Patrons.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 56348379ec35bbccbb54e205cc180cc0bd4f9297
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Sep 27 15:42:26 2023 +0000

    Bug 34934: Remove the use of event attributes from OPAC lists page
    
    This patch removes the use of event attributes (onclick, onchange) from
    the OPAC lists template. These events are defined now along with the
    other in-page JS.
    
    The patch also removes a "delete list" button which was only shown
    when viewing an empty list and which was redundant.
    
    To test, apply the patch and log into the OPAC.
    
    - Go to Lists -> New list.
    - Change the category to "Private" and the "Allow changes" dropdown to
      "Staff only."
      - You should see a message, 'The "Staff only" permission has no actual
        effect while this list is strictly private'
    - Change the category to "Public." The message should disappear.
    
    - View the contents of a list.
      - Click the "Send list" button at the top of the table of titles.
      - It should trigger the "Sending your list" popup window.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f03cf6cc108022a05d036d4c197760203d31468b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Sep 27 16:26:03 2023 +0000

    Bug 34936: Remove the use of event attributes from OPAC detail page
    
    This patch removes the use of event attributes (onclick) from the OPAC's
    bibliographic detail page template. These events are defined now along
    with the other in-page JS.
    
    The patch also adjusts the global "Dopop" function so that the popup
    window is a litte bigger. The comments form did not fit well.
    
    In checking for use of the "Dopop" function I found that it was being
    redefined in opac-topissues.tt for no reason so I removed it.
    
    To test you must have the OPACComments system preference enabled.
    
    - Log in to the OPAC, locate a bibliographic record, and view the detail
      page.
    - Under the "Comments" tab, click the "Post your comments on this title"
      link. It should trigger a popup window.
      - Submit your comment. When the detail page reloads, return to the
        "Comments" tab and click the "Edit" link on your comment. The same
        popup window should be triggered.
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ee381ca702b089e1d3116bc0ec4c873913528792
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Mon Feb 27 10:05:44 2023 +0100

    Bug 33074: Take ReservesControlBranch into account in opac-reserve.pl
    
    Test plan:
    1. Set system preferences:
       - Disable OPACAllowUserToChooseBranch
       - Set ReservesControlBranch to "item's home library"
       - Enable UseBranchTransferLimits
       - Set BranchTransferLimitsType to "item type"
       - Enable canreservefromotherbranches
       - Disable IndependantBranches
    2. Create two libraries: ITEM_LIB and PATRON_LIB
    3. Set circulation rules:
       - Remove all circulation rules (DELETE FROM circulation_rules)
       - Set a default rule that allow some holds and with "OPAC item level
         holds" = "force". Allow "on shelf" holds for easier testing.
       - In the rules for ITEM_LIB, under "Default checkout, hold and return
         policy",
         - set "Hold policy" to "From any library"
         - set "Hold pickup library match" to "item's home library"
       - In the rules for PATRON_LIB, under "Default checkout, hold and
         return policy",
         - set "Hold policy" to "From any library",
         - set "Hold pickup library match" to "any library"
    4. In "Library transfer limits" disable all transfers from ITEM_LIB to
       PATRON_LIB for an item type (let's say "BOOK")
    5. Create a biblio with an item:
       - item type must be the same as in previous step ("BOOK")
       - home branch and holding branch must be ITEM_LIB
    6. Create a patron at PATRON_LIB, give it a password so it can log in.
    7. Go to OPAC, and login with this patron
    8. Try to place a hold for the new item. You should be allowed to place
       a hold, but when doing it, no holds will be created.
    9. Apply patch, restart Koha
    10. Try to place a hold for the new item. This time the hold should be
        created
    
    Signed-off-by: Jessie Zairo <jzairo@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] Merged tidy patch and switch to Koha::Policy::Holds here.
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 97307b881d3b718776f5bd47cb83870ce3127062
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Sep 22 14:59:54 2023 +0200

    Bug 34842: Fix Illrequest/Config.t if DB upgraded twice
    
    Not sure this is correct, but I think it is!
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4fadf73a95f82ca7abd3d27f490a51825949f7b0
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Sep 25 10:21:36 2023 +0000

    Bug 34836: Add patron check to isbd and marc detail pages
    
    Test plan:
    - Go to circulation rules and set On shelf holds allowed to If all unavailable
    - Log out
    - Visit a MARC detail or ISBD detail bib record on OPAC:
    http://localhost:8080/cgi-bin/koha/opac-MARCdetail.pl?biblionumber=76
    http://localhost:8080/cgi-bin/koha/opac-ISBDdetail.pl?biblionumber=76
    - Notice it blows up with error 500, on both occasions
    - Apply patch. Repeat.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ea91896f1531f2c042897849cf313e18aaa5bd64
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 3 10:01:32 2023 +0200

    Bug 34369: Fix 'Did you mean'
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3c6dd02acbfc021c85b23e38d1ef605e09e65764
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Aug 1 09:12:10 2023 +0200

    Bug 34369: Pass csrf token from syspref API client (for Vue app)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c6ef2aba6bf93b3f17b57b384859edee54f99a72
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue Aug 1 06:56:23 2023 +0000

    Bug 34369: Require CSRF token for updating system preferences
    
    This patch adds the requirements that updating a system preference
    requires a CSRF token. (Also, adding and deleting local system preferences.)
    
    0. Apply patch
    1. koha-plack --reload kohadev
    2. Add local system preference
    3. Update local system preference
    4. Delete local system preference
    5. Update normal system preference
    6. Note no errors
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4e32b761986f5de28df4f1125b5d16c6c2f24306
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Sep 13 01:33:43 2023 +0000

    Bug 34761: Prevent XSS for searches and saved search filters
    
    </script> tags are interpreted in JSON strings as HTML, which can
    lead to XSS attacks.
    
    This patch puts HTML escaped JSON in the value of a hidden HTML element.
    The Javascript then takes the value as a string, parses it as JSON,
    and is able to use it to save search filters without triggering a
    XSS attack.
    
    This patch also adds DataTable's built-in HTML escaping for the query
    and limits on the admin UI for the search filters.
    
    Test plan:
    0. Apply patch
    1. Go to
    http://localhost:8081/cgi-bin/koha/admin/preferences.pl?op=search&searchfield=SavedSearchFilters
    2. Enable the system preference
    3. Go to http://localhost:8081/cgi-bin/koha/catalogue/search.pl?q=e
    4. Click "Save search as filter"
    5. Checkbox "Show in staff interface?"
    6. Type "E-TEST" into box and click 'Save'
    7. Go to
    http://localhost:8081/cgi-bin/koha/catalogue/search.pl?q=e
    8. Click "E-TEST" under "Custom search filters"
    9. Note that you see search results
    10. Go to
    http://localhost:8081/cgi-bin/koha/admin/search_filters.pl
    11. Note that for "E-TEST" you see a "Query" like
    {"operators":[],"operands":["e"],"indexes":[]}
    12. Note that for "E-TEST" you see a "Limits" like
    {"limits":[]}
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dcd698a4b4ed7f3a714ef35fe83c007fce9d52ae
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon Jul 24 04:31:15 2023 +0000

    Bug 34349: Validate/escape inputs for task scheduler
    
    This change validates and escapes inputs for task scheduler.
    
    Test plan:
    0. Apply patch
    1. koha-plack --reload kohadev
    2. Go to http://localhost:8081/cgi-bin/koha/tools/scheduler.pl
    3. Input a time a minute in the future and leave the date blank
    4. Choose an existing report and output format
    5. Type a malicious string which is also a valid email address
    into the Email field
    6. Click "Save"
    7. Note that the job is added but the Email is wrapped in single
    quotes
    8. Try using a non-malicious email address with a single quote.
    9. Note that the single quote is escaped, so that it will still
    be used by runreport.pl
    
    JD amended patch: tidy
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] Removed pars for $email =~ regex, removed old commented lines.
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 332b95b2507184e20cd70ddfb16c6f5a260d6dc0
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Aug 24 18:19:37 2023 +0000

    Bug 34513: (QA follow-up) Tidy
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit abbbc5924de287a73c7d91c0f8ab70f8d7461508
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Aug 16 02:51:43 2023 +0000

    Bug 34513: Add checkauth unit test for resetting auth state when changing users
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bb581fe78be9dacb9215366f3a54ab9b640f783f
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Aug 16 02:21:40 2023 +0000

    Bug 34513: Add end-to-end test for authorization check after first failed authorization
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 16da12cbbc200d9ef07a87ee7f9bdf8e61ae06f3
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Aug 11 03:03:01 2023 +0000

    Bug 34513: Set auth state correctly when changing auth sessions
    
    This patch sets the $auth_state to failed when changing auth sessions,
    so that the new login attempt gets processed correctly (instead
    of skipping the authorization step).
    
    Test plan:
    0. Apply the patch
    1. koha-plack --reload kohadev
    2. Go to
    http://localhost:8081/cgi-bin/koha/admin/preferences.pl?tab=&op=search&searchfield=baseurl
    3. Log in as an OPAC user with 0 permissions
    4. Note the auth screen "Error: You do not have permission to access this page"
    5. Click "Log in"
    6. Note that you're still shown a login screen (and that you've been logged out of
    your previous authenticated session)
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d9849aaa3aa777072c846526c772a896b5424cfb
Author: Evan Giles <evan@catalyst.net.nz>
Date:   Fri Sep 1 18:42:45 2023 +1200

    Bug 34653: Make koha-foreach return the correct status code
    
    I think the correct behavior for this script should be that koha-foreach
    will return 0 (success) if all the commands it tried to run succeeded, but
    1 (failure) if any of the commands failed.
    
    To test:
    1. $ koha-create --create-db test
    2. $ vi test.sh
    if [ $USER = 'kohadev-koha' ]; then
        echo "FAILED";
        exit 1;
    else
        echo "SUCCESS";
        exit 0;
    fi
    
    3. $ debian/scripts/koha-foreach sh test.sh
    FAILED
    kohadev: 1 status returned by "sh test.sh"
    SUCCESS
    4. $ echo $?
    5. Note that the exit status is 0 (success)
    
    6. Apply patch
    
    7. $ debian/scripts/koha-foreach sh test.sh
    FAILED
    kohadev: 1 status returned by "sh test.sh"
    SUCCESS
    8. $ echo $?
    9. Note that the exit status is 1 (failure)
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7ac91b24cfb49e094a1d13008bd0efda0b63e288
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Sep 8 01:53:38 2023 +0000

    Bug 30843: Add unit test for Koha::Auth::TwoFactorAuth::verify
    
    This change adds a unit test to test Koha::Auth::TwoFactorAuth::verify
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6a0955946e06354ecd05f714057a878794314155
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Sep 6 05:12:50 2023 +0000

    Bug 30843: Add mfa_range configuration option for TOTP
    
    This change adds a mfa_range configuration option for TOTP
    to koha-conf.xml, and overrides the "verify" method from
    Auth::GoogleAuth in order to provide a new default for "range"
    
    Test plan:
    0. Apply the patch
    1. koha-plack --restart kohadev
    2. Go to
    http://localhost:8081/cgi-bin/koha/admin/preferences.pl?op=search&searchfield=TwoFactorAuthentication
    3. Change the syspref to "Enable"
    4. Go to
    http://localhost:8081/cgi-bin/koha/members/moremember.pl?borrowernumber=51
    5. Click "More" and "Manage two-factor authentication"
    6. Register using an app
    7. In an Incognito window, go to
    http://localhost:8081/cgi-bin/koha/mainpage.pl
    8. Sign in with the "koha" user
    9. Note down a code from your Authenticator app
    10. Wait until after 60 seconds and try it
    11. Note it says "Invalid two-factor code"
    12. Try a new code from the app
    13. Note that it works
    
    14. Add <mfa_range>10</mfa_range> to /etc/koha/sites/kohadev/koha-conf.xml
    15. Clear memcached and koha-plack --restart kohadev
    16. Sign in with the "koha" user
    17. Note down a code from your Authenticator app
    18. Wait 4 minutes and then try it
    19. Note that it works
    
    20. Disable your two-factor authentication and click to re-enable it
    21. Use a code older than 60 seconds when registering for the two
    factor authentication
    22. Note that the code works
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 120b9915291ff41be1a922f0af924def07a7b6bf
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jun 6 12:16:22 2023 -0400

    Bug 33926: Add ability to specify fields allowed in a response
    
    At this time, we can specify fields to hide in SIP response at the login level. From a security perspective, it would be useful to also be able to specify which fields are allowed in a response.
    
    Test Plan:
    1) Apply this patch
    2) prove t/db_dependent/SIP/Message.t
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 06c2b4898bc37f0d3296c08508e9092132567e52
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Sep 8 15:34:33 2023 +0000

    Bug 28449: Add column with invoice number to basket summary page
    
    At the moment it's quite a lot of clicks to get from the basket
    summary to the invoice something was received in. This adds a nice
    shortcut by creating a new column for the invoicenumber in the basket
    summary table.
    
    To test:
    * Make sure you have a basket with some received and unreceived
      order lines
    * Verify that the (received) shows for your received lines
    * Verify no invoice number or link to it in sight
    * Apply patch
    * Verify that there is now a column for the Invoice containing
      the invoice number as a link to the invoice
    * Test with a staff patron, that doesn't have edit_invoices permission
    * Verify that now instead of a link you see the invoice number as text
    
    Be happy, sign off ;)
    
    Note: this doesn't change the CSV export. The way the CSV is built is
    quite different to the summary table, so it would be better handled
    in a separate bug/patch. The columns are already quite different!
    
    Sponsored-by: The Research University in the Helmholtz Association (KIT)
    
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Émily-Rose Francoeur <emily-rose.francoeur@inLibro.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8922fb1863b6f6edc1cd657e2387bcc3e5869cc6
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Aug 29 14:53:03 2023 +0000

    Bug 34618: Add sort 1 and 2 fields to basket in acquisitions
    
    This patch adds the option to display sort1 and sort2 columns in the
    view of the contents of a basket in acquisitions. The columns are
    labeled "Statistic 1" and "Statistic 2" to match the labels in the
    order creation/edit form.
    
    The fields are hidden by default in the updated table configuration.
    
    To test, apply the patch and restart services.
    
    - Go to acquisitions and create a basket if necessary:
      - Search for a vendor and click New -> Basket from the vendor
        toolbar on the vendor search results screen.
      - Create a basket, then click "Add to basket" from the basket details
        page.
      - Add an order to the basket.
    - With at least one order in the basket, check the table of orders in
      the basket.
    - The columns should be unchanged.
    - The table configuration button should show the two statistics fields
      as hidden. Test that they can be displayed.
    
    - Go to Administration -> Table settings.
      - Under Acquisitions -> basket, try changing the settings for the
        Statistic 1 and Statistic 2 fields, and check that your changes are
        reflected in the basket view.
    
    - Test with a vendor which has an EDI account:
      - Enable the EDIFACT system preference.
      - Go to Administration -> EDI accounts and create an account for your
        vendor.
      - Confirm that the table of orders in your basket still displays
        correctly now that the "Supplier report" column is present.
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Ray Delahunty <r.delahunty@arts.ac.uk>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 384f9282e1cf0dcbbfa5dec6b48951300d05cc50
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 18 11:16:44 2023 +0000

    Bug 33428: (follow-up): Default to searching 'standard' fields
    
    Before this patch set, a search for patrons from article requests or
    reserves would search the attributes by default. They were not considered
    'standard' searches, however.
    
    This patch simply defaults to searching the 'standard' fields unless a value is passed
    
    To test:
    1 - Apply other patches
    2 - Have patrons with searchable attributes
    3 - From a title, click the holds or artickle requests tab
    4 - Search for the attribute values and confirm patrons are not returned
    5 - Apply this patch
    6 - Search again, patrons are now returned
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bfdee70f2468ec5d042373453bfaaed0bde5736e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Aug 17 11:41:47 2023 +0100

    Bug 33428: (QA follow-up) Fix escaping in a split call
    
    We'd missed an escape case in one of the calls to .split for the pipe
    delimited split operations.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 47a202916154f6765c37ac0a76f17f95793f1a9b
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 11 12:28:15 2023 +0000

    Bug 33428: Adjust Unit Tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b1b92cb9a494a05cdc1f83ef6cf3ebe4fcd13f00
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Aug 10 18:58:55 2023 +0000

    Bug 33428: Parse search fields in buildPatronSearchQuery
    
    This patch moves the parsing of standard search_field into the buildPatronQuery subroutine
    and adds a check for 'standard' field before adding attributes to the search
    
    To test:
    1 - Add a new attribute type and make it searchable
    2 - Add a value to a patron
    3 - Search for this value using 'Standard' fields, confirm you get the patron
    4 - Search for the value using 'Cardnumber' field, confirm you get the patron - BAD!
    5 - Apply patch
    6 - Repeat cardnumebr search, confirm patron not found - Yay!
    7 - Search standard, confirm patron is found
    8 - Add a new field to 'DefaultPatronSearchFields
    9 - Confirm it appears in patron search dropdown
    10 - Confirm a search of this field with the attribute value does not return the patron
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a06396c2826c604fc9dfe79c22256b6d69edc415
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Sep 25 10:14:08 2023 -0300

    Bug 34748: DBRev 23.06.00.026
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f9f9c3a7faeba4a36e233d867019dad495a09c25
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Sep 19 21:33:00 2023 +0000

    Bug 34748: Fix column name in columns configuration for basket table
    
    The first column was named basket_number, but it's actually the
    order_line.
    
    To test:
    * Edit column configuration for acquisition > basket
    * Make sure to set at least one checkbox for 'basket_number'
    * Apply patch, run database update
    * Verify that the first column is now 'order_line', but your
      settings have been preserved
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 82234aba24fb1337a5e8b975da34c064a04774d1
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Sep 25 10:11:03 2023 -0300

    Bug 29822: DBRev 23.06.00.025
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cdedd6f2db90ace66d083dc678c239d1cf4ee02c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 11 11:31:24 2023 +0000

    Bug 29822: (QA follow-up) Use pipe for all field separators
    
    - Tidy atomic update
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bfcdbeb9a800122be36bebef855c02fd9094da7c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 10 15:50:44 2023 +0000

    Bug 29822: Update unit tests
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6a98a8ef837e10ab2303d03af49bf9f6d5f297a3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 10 15:39:32 2023 +0000

    Bug 29822: Database and Preference description updates
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ffcfc13c7e5b77b25fb8978f683a0b58a594331a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Feb 10 15:22:04 2023 +0000

    Bug 29822: Update code to reference by pipe
    
    Moving to modalselect also has the effect of moving from comma delimited
    to pipe delimitation for the preference contents
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0b4a37a29d7bb4beea3225771848ebebedf3c917
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Feb 9 17:32:19 2023 +0000

    Bug 29822: Use the modal
    
    As requested by Katrin.. switch to the modal and expose all fields from
    the borrowers database table
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4d2a3d58b46c45c430ff5eb2174b8809e04cd08c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Dec 23 11:05:01 2022 +0000

    Bug 29822: Update 'DefaultPatronSearchFields' to a select list
    
    This patch updates the `DefaultPatronSearchFields` preference from
    freetext expecting a comma delimited list of borrower fields to a
    multi-select with a sensible list of fields available.
    
    I opted to not use the Modal approach with all borrower fields listed as
    I felt it made more sense to only expose a more limited subset of the
    fields available to us.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1bd3f2cc1bb0dac9c524e96b97dec3cd7145b3ca
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Thu Jun 15 17:21:37 2023 +1200

    Bug 34016: Manage recalls via SIP
    
    This enhancement allows SIP to better handle recalled items - preventing the check-out of recalled items if they have been allocated to another patron, or fulfilling recalls if the item was recalled and allocated to this patron.
    
    To test:
    
    1. Run test `prove t/db_dependent/SIP/Transaction.t`
    2. Confirm the test fails when trying to fulfill the recall
    3. Apply the patch and restart services
    4. Run test again `prove t/db_dependent/SIP/Transaction.t`
    5. Confirm tests pass
    
    Sponsored-by: Auckland University of Technology
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b1126cfcefd1598a4c2843b273ec68595dc61e7f
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Thu Jun 15 17:21:21 2023 +1200

    Bug 34016: Tests for fulfilling recalls via SIP
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 872c4ba2dc83446e58b06f4add117c309bc7fde9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jul 13 11:57:02 2023 +0000

    Bug 34114: Replace the use of jQueryUI sortable
    
    This patch adds a replacement for jQueryUI sortable, a standalone
    library called Sortable. The patch updates pages which previously used
    jQueryUI for sorting.
    
    The patch updates the style of most sortable elements to use the
    "grip-vertical" Font Awesome icon.
    
    To test, apply the patch and test the following pages, confirming that
    sortable elements are sortable and that the newly sorted state is saved
    correctly:
    
    - Administration -> System prefernces -> I18N/L10N
      - With multiple languages installed, test that languages listed in the
        'language' and 'OPACLanguages' preferences can be sorted and that
        after saving your changes the interface relfects your changes: In
        the footer and header of the OPAC and in the footer of the staff
        interface.
    - Administration -> MARC bibliographic framework -> MARC structure ->
      Edit subfields of a tag.
      - Test using a tag with multiple subfields, e.g. MARC21 245.
        - Test that you can click and drag to reorder the tabs in the
          subfield edit view.
        - Test that when you save your changes, including changes to the
          "New" tab position, that fields are ordered correctly both in the
           display on this page and in the basic MARC editor.
      - Perform the same tests on Authorities: Administration -> Authority
        types -> MARC structure -> Edit subfields of a tag.
    - Authorities -> New (or edit) authority
      - Multiple subfields of a tag should be sortable.
      - Multiple copies of the same tag should be sortable relative to each
        other.
      - Confirm that your changes are saved correctly and that the detail
        view of your updated authority record is correct.
      - Perform the same tests on Cataloging -> New (or edit) record in the
        basic MARC editor.
    - Enable the StockRotation system preference if necessary.
      - Go to Cataloging -> Stock rotation
        - If necessary, create a new rota and add multiple stages
          - In the "Manage stages" view you should be able to click and drag
            to reorder stages. The new position should be saved immediately
            via AJAX.
    
    Signed-off-by: paul <paul.poulain@biblibre.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fe18b0569298502dc20ca1322d919baab5526281
Author: Andreas Roussos <a.roussos@dataly.gr>
Date:   Tue Aug 1 20:49:55 2023 +0200

    Bug 21828: build $bib_heading_fields only once per invocation
    
    In UNIMARC instances, the run time of link_bibs_to_authorities.pl
    can be reduced by up to 80% and the number of DBI calls
    can be reduced by up to 90% with a very simple fix that
    optimises the constructor of the C4::Heading::UNIMARC object.
    
    Currently, the constructor resets the $bib_heading_fields hash
    *in each invocation* (i.e. for every field the bibliographic
    record contains), then populating it again with the results
    fetched from the database! This is inefficient.
    
    The patch/fix is trivial: we take advantage of the fact that
    $bib_heading_fields is declared at the top of the
    C4::Heading::UNIMARC module and is thus a package variable
    that is in scope for the entire execution of the program
    (more info here: https://stackoverflow.com/q/75317862).
    
    Placing the section that generates the $bib_heading_fields
    hash inside a "unless ( defined $bib_heading_fields )" code
    block is enough to cause a significant reduction in the
    number of "expensive" SQL SELECT queries that must be run.
    
    Test plan:
    
    0) Have a UNIMARC instance with some sample data (the KTD one
       will do just fine for this experiment).
    
    1) Run the following commands:
    
        $ ktd --shell
       k$ DBI_PROFILE=1 ./misc/link_bibs_to_authorities.pl -t
    
       Observe the output from the script and the DBI profiling info.
       [You may want to play with different DBI_PROFILE levels (such as
       2, 4, 6, 8, etc.) to see what's going on under the hood DBI-wise,
       for reference see: https://metacpan.org/pod/DBI::Profile]
    
    2) Apply this patch.
    
    3) Rerun the script from step 1), it should run a lot faster!
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7d80a1df25a1c4e726bcf148e1c2432ea8c9a007
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 27 15:01:24 2023 +0200

    Bug 34302: (bug 28653 follow-up) Do not refresh the table if an error happened
    
    If checkin or renew failed, we should not refresh the table or it will
    hide the error message.
    
    Test plan:
    Apply the DO NOT PUSH patch
    Do a renew
    => No error in the table
    Apply this patch
    Do a renew
    => You see the error
    Revert the DO NOT PUSH patch
    Do a renew
    => The table is refreshed
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9f59ea2f61a4660a9e1f5c27a2ecca33bea89b0b
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Sep 19 12:20:43 2023 -1000

    Bug 34835: Highlight logged-in library in patron searches fix for new staff interface
    
    Since Bug 30952 the feature from Bug 10902 does not work anymore.
    The class "currentlibrary" is there but no background color in CSS.
    Bug 30952 removed it :
    -    background-color: #E6FCB7;
    
    This patch restores this rule plus '!important' that is used by
    class 'ac-currentlibrary'
    
    Test plan:
    1) Perform a patrons search
    2) Check you see green background color for patrons with same branch as
       currently logged in.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7fd26e069eb0694f07ee63fbacebd3e8d1c8290c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 8 09:36:35 2023 +0200

    Bug 33948: Replace GetAllIssues with Koha::Checkouts - staff
    
    This patch replace GetAllIssues in readingrec.pl which is the only
    occurrence in the staff code.
    
    To test this patch you will need several items in your checkout history
    in order to confirm that the display is the same before and after the
    patch.
    
    However there is one change! And it's a bug fix (or an enhancement, it
    depends on how you see things). It includes checkouts with deleted items, which is
    a long standing bug (see bug 8483).
    
    Performance will be compared as well.
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8dcdeaf23d002d2f6bd0208b73da6ca7a37cae6c
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Sep 19 20:36:19 2023 +0000

    Bug 33499: (QA follow-up) Open external links in new tab
    
    Adds target="_blank" to the vendor website and interface URLs,
    as we can expect them to be external sites.
    
    Also changes mark-up a little so that the URL is shown without
    an additional space in front, lining up with the other fields.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f6b9f25a4fa776457cbbf7a09205f9e9e7902ac7
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Sep 19 10:57:52 2023 +0000

    Bug 33499: Make interface URL clickable on vendor details
    
    This patch adds markup around the vendor details interface URL so that
    it is a clickable link.
    
    To test, apply the patch and go to Acquisitions.
    
    - Search for a vendor
    - If you don't have a vendor with interfaces defined, edit one
      - Under Interfaces -> Interface details, fill out the form, including
        the URI field.
      - Add more than one interface
    - Save your changes and then view the vendor details page
    - In the Interfaces section the interfaces you defined should have
      clickable links.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d550bcd90994f0cf77169d1370d721eb20ff291a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Sep 22 16:55:59 2023 +0200

    Bug 32496: Fix tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e9d8cc08c500ceb48b6394a9b100c3ac236ce0a9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 7 14:28:42 2023 +0200

    Bug 30825: Move holds_control_library to Koha::Policy::Holds
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 752fb21b4726380980813888a626baa4ebb2613f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 20 11:48:28 2022 -0300

    Bug 30825: Remove GetReservesControlBranch in favour of Koha::Item->holds_control_library
    
    This patch removes the GetReservesControlBranch method, and replaces its
    uses with the newly introduced method.
    
    To test:
    1. Apply this patch
    2. Verify that placing holds from the OPAC works
    => SUCCESS: Things work as expected
    3. Run:
       $ kshell
      k$ prove t/db_dependent/Reserves* \
               t/db_dependent/Hold* \
               t/db_dependent/Koha/Hold* \
               t/db_dependent/Koha/Biblio.t
    => SUCCESS: Tests pass!
    4. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e0b5542b077de94d53dc7049a0edbadae5a06ca8
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 20 11:46:12 2022 -0300

    Bug 30825: Add Koha::Item->holds_control_library
    
    This simple method takes care of calculating the control branch for an
    item and a patron, depending on a syspref.
    
    It targets replacing C4::Reserves::GetReservesControlBranch
    
    To test:
    1. Apply this patch
    2. Run:
       $ kshell
      k$ prove t/db_dependent/Koha/Item.t
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f32ca2b8bd8e1ad7c4cc8bd68f92988735888769
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri May 20 11:45:54 2022 -0300

    Bug 30825: Add unit tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 31f850cb58d72846abd8b37454e17fa9d21c49f5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 22 11:32:19 2023 -0300

    Bug 32496: (follow-up) Fix t/db_dependent/SIP/Message.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2ff3b14e935f4ebe016ab4b1924c6cfb11064b4b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 22 11:13:44 2023 -0300

    Bug 34720: DBRev 23.06.00.024
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cd79c78dbdbddb6b4de548b79975bc68828c4169
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Sep 22 08:30:35 2023 +0200

    Bug 34720: Say if syspref has been inserted
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d91ea53e901a5bacfb42aa3923e37186cb41c877
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Thu Sep 21 11:49:12 2023 +0300

    Bug 34720: Fix bug 30403 atomic update
    
    Bug 30403 had wrong syspref name in its
    atomic update file. This patch fixes this in
    db_rev 221200018.pl and adds new atomic
    update file.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b07842d243bd45b0c11fa7b4d0b02c0589ee44fb
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 22 08:51:59 2023 +0000

    Bug 34848: (QA follow-up) Resolve warn on useless constant
    
    Useless use of a constant ("Dies if sip user cannot be found") in void context at t/db_dependent/SIP/Message.t line 582.
    
    We should remove the comma..
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4fd7857e3fcc0314aba2fe851082e6e125a16650
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Sep 20 16:00:08 2023 +0200

    Bug 34848: Fix SIP/Message.t if DB has been upgraded
    
    There were a lot of failures (in the context of bug 34841)
    
    t/db_dependent/SIP/Message.t .. 2/16
        #   Failed test 'Found AH field as timestamp in response'
        #   at t/db_dependent/SIP/Message.t line 820.
    
        #   Failed test 'Found AH field as SQL date in response'
        #   at t/db_dependent/SIP/Message.t line 825.
        # Looks like you failed 2 tests of 8.
    t/db_dependent/SIP/Message.t .. 3/16
    
        #   Failed test 'Desensitize flag was set for patron category not in inhouse_patron_categories'
        #   at t/db_dependent/SIP/Message.t line 1133.
        #          got: 'N'
        #     expected: 'Y'
    
        #   Failed test 'Desensitize flag was set for empty inhouse_patron_categories'
        #   at t/db_dependent/SIP/Message.t line 1139.
        #          got: 'N'
        #     expected: 'Y'
    
    Because renewalsallowed is 0 for upgraded DB, when it's 5 for new
    install.
    
    We need to set the value.
    
    This patch also adds some missing transaction
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aea9fce4b0320fa57bc729042286c655580735e3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 22 11:12:00 2023 -0300

    Bug 34843: DBRev 23.06.00.023
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f809c272af42864b48d2d650ba5ddd0cf03d6b06
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 22 07:33:57 2023 +0000

    Bug 34843: Fix database comment inconsistency on toc_request
    
    Bug 29093 had a dbrev without comment, but added comment to
    kohastructure.
    
    Test plan:
    Check (or remove) comment on article_requests.toc_request.
    Run dbrev.
    Check if comment was added (if you removed).
    Run t/db/Koha/Database/Commenter.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 60f0aee9b6d3c9e1312521d6e40b76b38006d2e0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 6 10:17:20 2023 +0200

    Bug 34215: Introduce a ToolbarButton Vue component
    
    Our toolbar component is not flexible enough, we cannot:
    * have something else than a router-link
    * have a link outside of the app (it needs to be a Vue route)
    
    This patch adds a ToolbarButton component that is used for existing
    button. But other buttons can be added without being a router-link.
    
    Test plan:
    No change in behaviour here! Test the buttons in the 4 existing toolbar
    (in the ERM module)
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3da3e6e8ff2b8a87a5709f67cdaf8097fab339f5
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 4 13:26:22 2023 +0000

    Bug 34453: Update background of quick spine label pop-up
    
    This patch updates the quick spine label popup so that the footer uses
    the same markup as the recently updated Z39.50 popup window in
    cataloging.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    Go to Cataloging -> Quick spine label creator.
    
     - Test the form with both an existing barcode and a non-existent
       barcode.
       - In the pop-up window, confirm that the footer looks correct and
         that the buttons in the footer, in both cases, work correctly.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d92f033cfc6bcee3d6bea1925c9de13c56d55def
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 18 10:40:49 2023 +0000

    Bug 34383: Fix inconsistencies in Patron attributes page titles, breadcrumbs, and header
    
    This patch makes changes to the patron attribute types administration
    template so that the page title, breadcrumb navigation, and page headers
    are more consistent with each other and with other parts of Koha.
    
    To test, apply the patch and go to Administration -> Patron attribute
    types. Test these versions of the page to confirm that the breadcrumbs
    and page title are consistent with each other:
    
    - Main view
    - New patron attribute type
    - Edit patron attribute type
    - Confirm deletion of attribute type
    
    Signed-off-by: Christian Nelson <christian.nelson@uwasa.fi>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 160bfe32adaa4dc7a8476e8434e2db0f5ea85e22
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Aug 17 07:14:26 2023 +0000

    Bug 34553: Update send list and send cart popup footers
    
    This patch updates the templates behind the "send cart" and "send list"
    pop-ups in order to make the style of the footer consistent with some
    recently-updated similar examples, like the catalog's Z39.50 search
    popup.
    
    The patch also makes a minor change to our global JavaScript include so
    we can get away from using the "close" class as a trigger for closing a
    pop-up window. Bootstrap has a built-in "close" class that we always
    have to override. "close_window" is added as another class to use, and
    the other instances can be cleaned up overy time.
    
    To test, apply the patch and perform a catalog search in the staff
    interface.
    
     - Add one or more items to the cart.
     - Open the cart popup and click the "Send" button.
     - In the pop-up window, confirm that the footer looks correct.
     - Test the process of using the tab key between input fields and
       submit/cancel buttons. All controls should be accessible.
     - Test the "Cancel" button to confirm that it closes the window.
     - Reopen the window and test sending the email.
     - On the confirmation page, confirm that the footer looks correct and
       that the "Close window" button works.
    
     - Test the same processes in the Lists module: View a list in the staff
       interface and test the process of sending a list.
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4b588121e482e6be8ffef38cf000913792ad17f4
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jul 7 15:27:42 2023 +0000

    Bug 34199: Add full title information to subscription detail page
    
    Show the full title information, including part_name and part_number
    on the subscription detail page.
    
    To test:
    * Add a subscription linked to a record with 245$abnp set
    * Verify only 245$ab will show up on the subscription detail page
    * Apply patch
    * Verify that the full title information shows up on the detail page
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b770b691e67dbb468e0025a33ca3fe77185f297a
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jul 7 16:10:30 2023 +0000

    Bug 34230: Add part_name and part_number to subscription search results
    
    This adds biblio.part_name and biblio.part_number to the SELECT of
    SearchSubscriptions in order to be able to display the information in
    the results list. It does not affect search.
    
    To test:
    * Add one or more subscriptions
    * Make sure at least one is linked to a title with 245$abnp
    * Verify that the result list only shows 245$ab
    * Apply patch
    * Verify full title information is now shown
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f4ee7f2bb9bedfbe24073d0385cfcc67726b8054
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Sep 21 21:37:08 2023 +0000

    Bug 34446: (QA follow-up) Add colons on delete confirm page
    
    This adds the missing colon on the 'confirm deletion' page.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f9a4097200fdc9762593b674b4bf70bb76d33d53
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Thu Sep 21 20:59:13 2023 +0000

    Bug 34446: Added missing colon to Can be guarantee
    
    To test:
    
    1. Go to Administration > patron categories and edit or create a new category. Notice that “Can be guarantee” does not have a colon.
    2. Apply patch and refresh the page.
    3. Can be guarantee now has a colon — yay!
    4. Sign off and have a great day. :)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9afc411a150ab5bdf9337d73e82b2ac39e851e91
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 25 12:06:07 2023 +0200

    Bug 34054: Allow to embed biblio on GET /items
    
    Test plan:
    Request the /items REST API endpoint and ask for the biblio's info to be
    embeded into the response passing x-koha-embed
    
    curl -u koha:koha --request GET 'http://localhost:8081/api/v1/items' --header "x-koha-embed: biblio" --header "Content-Type: application/json"
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Andreas Roussos <a.roussos@dataly.gr>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bd0380c272e83f7da60f24ab7205a65a693cab7d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 19 09:49:08 2023 +0200

    Bug 34054: Add tests
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Andreas Roussos <a.roussos@dataly.gr>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1a398c5e9dab3a31d827ab7980899e0366353a37
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 22 13:07:51 2023 +0000

    Bug 34885: Improve confusing pref description for OPACHoldsIfAvailableAtPickup
    
    Changes pref description and sysprefs.sql.
    The change is not important enough for a dbrev.
    
    Test plan:
    Look at the changed text in Systempreferences.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b47431b395383cfb09be72be99c5593daedf9ebb
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Sep 21 21:27:57 2023 +0000

    Bug 33911: Move variables into strings
    
    This has the advantage that translators can tell the full
    context and are also able to move the variable if needed
    for better grammar.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b2f479f51cea68bc133d74ce40ed66fb8b79b09f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 6 15:10:37 2023 +0000

    Bug 33911: Improve translation of title tags: Catalog, basket, and lists
    
    This patch updates catalog, basket, and lists templates so that title
    tags can be more easily translated.
    
    To test, apply the patch and confirm that the following pages have the
    correct title tags:
    
     - Advanced search
       - Search results
         - Bibliographic details
           - MARC preview
           - Image viewer (with local cover images)
           - MARC details
           - Labeled MARC details
           - ISBD details
           - Items
           - Checkout history
           - Rota
       - Add titles to the cart and view the cart
         - Send cart
     - Item search
     - Lists
       - View list
       - New list
       - Edit list
       - Send list
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 26d3520ed73e2da01f25f379f4ebb6b5521010cc
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Sep 15 19:17:45 2023 +0000

    Bug 33927: Improve translation of title tags: Tools
    
    This patch modifies tools templates so that title tags can be
    more easily translated. The patch also makes some modifications to
    titles, breadcrumb navigation, and page headers in order to make them
    more consistent with each other and with other similar pages.
    
    To test, apply the patch and go to Tools. Test each of the following
    pages and each variation of the page to confirm that titles,
    breadcrumbs, and page headers look correct.
    
    - Tools home page
    - Import patrons
      - Import results
    - Notices and slips
      - Main page
        - Main page filtered by library
        - New notice
        - Edit notice
          - Preview notice: With a CHECKIN, CHECKOUT, or HOLD_SLIP notice,
            fill in the "Data for preview" box in the "Email" section.
            Although the template loads in a modal window which doesn't show
            the page title, you can confirm that there are no errors.
    - Overdue notice/status triggers
    - Batch patron deletion
      - Confirmation page
    - Batch patron modification
    - Batch extend due dates
    - Upload patron images
    
    Print notices: With useDischarge enabled, log into the OPAC as a
    user with no checkouts. Go to the "Ask for a discharge" tab and click
    "Ask for a discharge."
    
    Locate the patron's record in the staff interface and click "Discharges"
    in the left-hand sidebar menu. Click "Generate discharge." Open the
    resulting PDF file in a browser. The page title should be "Print notices
    for [date]."
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3f6b9565339a929c05a95e5062b19d86579b8e07
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 6 15:14:31 2023 +0000

    Bug 33919: Improve translation of title tags: Patron clubs
    
    This patch updates patron clubs templates so that title tags can be more
    easily translated.
    
    The patch also makes some minor changes to some templates to improve
    consistency between page title, breadcrumb navigation, and page heading.
    
    To test, apply the patch and confirm that the following pages have the
    correct title tags:
    
    - Tools -> Patron clubs
      - New and Edit club template
      - New and Edit club
      - Club enrollments (from the list of clubs choose Actions ->
        Enrollments)
    
    Signed-off-by: Salah Ghedda <salah.ghedda@inLibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8ff6189c2afcbfc64f42ed06d052df90cf8449d8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 6 15:20:38 2023 +0000

    Bug 33918: Improve translation of title tags: Patron card creator
    
    This patch updates patron card creator templates so that title
    tags can be more easily translated.
    
    The patch also makes some minor changes to some templates to improve
    consistency between page title, breadcrumb navigation, and page heading.
    
    To test, apply the patch and confirm that the following pages have the
    correct title tags:
    
    - Tools -> Patron card creator home page
      - New -> Card batch
      - New -> Image
      - New -> Layout
      - New -> Card template
      - New -> Printer profile
      - Manage -> Card batches
      - Manage -> Images
      - Manage -> Layouts
      - Manage -> Card templates
      - Manage -> Printer profiles
    
    Signed-off-by: Émily-Rose Francoeur <emily-rose.francoeur@inLibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0f3a1fe13779feeb8e77ef8217e5280842865036
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 6 16:16:37 2023 +0200

    Bug 34055: Rebased on top of 34219
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4ffe9a6ed99c463d7126b920ff9a026cd68195f4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 25 12:11:51 2023 +0200

    Bug 34055: Add API client class to get items
    
    This patch add a new item-api-client.js API client to fetch items using
    our /items REST API endpoint.
    
    Test plan:
    Add the following two lines to one of the existing Vue component (in
    data() for instance) and hit the view that is using it.
      let client = APIClient.item
      client.items.getAll().then((items) => console.log(items))
    Notice that you see all the items in the console.
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Was failing the pretty test, fixed with yarn pretty
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5f55775f402d4f4b56ab82426588b202d6f327ce
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Sep 20 16:13:40 2023 +0200

    Bug 34846: Fix SIP/ILS.t if DB has been upgraded
    
    t/db_dependent/SIP/ILS.t .. 12/15
        #   Failed test 'Renewal succeeded'
        #   at t/db_dependent/SIP/ILS.t line 346.
        #          got: '0'
        #     expected: '1'
        # Looks like you failed 1 test of 2.
    t/db_dependent/SIP/ILS.t .. 15/15
     #   Failed test 'renew'
     #   at t/db_dependent/SIP/ILS.t line 348.
     # Looks like you failed 1 test of 15.
    
    Because renewalsallowed is 0 for upgraded DB, when it's 5 for new
    install.
    
    We need to set the value.
    
    Test plan:
    perl /kohadevbox/misc4dev/run_tests.pl --run-db-upgrade-only
    
    prove t/db_dependent/SIP/ILS.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aacbadb22f21dbb427e62ee2a2b6bb2da54012a7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 22 10:43:50 2023 -0300

    Bug 34844: DBRev 23.06.00.022
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7b46b319980cd236e85e75c88e8a1428e1bb8bbb
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Sep 21 08:55:50 2023 -0400

    Bug 34844: Add db update file
    
    JD amended patch: tidy
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d2f3ffe7d2dfb796a4ec7e0b4503a3266f3ee80
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Sep 20 09:31:47 2023 -0400

    Bug 34844: Add manage_item_editor_templates to userpermissions.sql
    
    Test Plan:
    1) perl /kohadevbox/misc4dev/run_tests.pl --run-db-upgrade-only; prove t/Koha/Auth/Permissions.t
    2) Note failure
    3) Apply this patch
    4) perl /kohadevbox/misc4dev/run_tests.pl --run-db-upgrade-only; prove t/Koha/Auth/Permissions.t
    5) Tests pass!
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 057b00f349da3325ccbb54bc70e4f9c7560649f5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Sep 22 14:36:26 2023 +0200

    Bug 34845: Fix GetBasketGroupAsCSV.t is CSVDelimiter is not ','
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ca3243d00ff094c86fcd02406543b6b3d06627ee
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Sep 22 14:33:31 2023 +0200

    Bug 34847: Fix t/db_dependent/Search.t
    
    If 01e still exists then the test will fail with
    Truncated incorrect DECIMAL value: '01e' at t/db_dependent/Search.t line 945
    
    Test plan:
    % perl /kohadevbox/misc4dev/run_tests.pl --run-db-upgrade-only
    % prove t/db_dependent/Search.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e28ea9c4af380cae9b29b56ebe03ab0f244d2c47
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Sep 22 08:53:23 2023 +0000

    Bug 34880: (follow-up) Make condition more specific
    
    To test (applies to both patches):
    
    * Add a new basket as 'standing order' and with 'items created in cataloguing'
    * Create an order line
    * Receive shipment and create an invoice
    * Receive your order
    * Verify:
      * Quantity ordered: 1
      * Quantity received: 1 (pre-filled)
      * No item form on the right
    * Confirm
    * Receive error:
      Order X: No quantity to receive set. No items will be created.
    * Verify no receive was processed (received orders remains empty)
    * Apply patch
    * Verify receive works as expected
    
    Other possible combinations to test:
    
    * Standing order, items on receive
    * Standing order, items on order (no items are created)
    * Standing order + order from subscription + any item setting (no items are created)
    * No standing order + items in cataloguing
    * No standing order + items on receive
    * No standing order + items on order
    * No standing oder + order from subscription + all item settings (no items are created)
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9dd6fa2d8d015b16a60bb1f1cc6bda8dba3ce662
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Sep 22 10:25:38 2023 +0200

    Bug 34880: Fix order receive for standing orders
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 15f62f42d639e5408b0c81b7ff10db3bde730cac
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Jul 16 13:00:05 2023 +0000

    Bug 32496: (QA follow-up) Fix POD and DateTime use
    
     FAIL   t/db_dependent/Koha/Object.t
       FAIL   forbidden patterns
                    forbidden pattern: Use of DateTime->now should certainly be replaced with dt_from_string (bug 24840) (line 991)
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fa28d2a17ce1688da44924a2cf4ae2184d82375d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 4 15:48:00 2023 +0200

    Bug 32496: Some fixes
    
    This can be squashed
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f7265585109d28750eedddb1ba3d44d4c61382b7
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Thu Sep 29 17:15:32 2022 +0200

    Bug 32496: Reduce unnecessary unblessings of objects in Circulation.pm
    
    Refactor the most performance critical subroutines in Circulation.pm
    to take objects instead of unblessed ones to reduce unnecessary
    unblessings and generally clean up the code.
    
    To test:
    
    1) Ensure the following tests all pass:
      t/db_dependent/Circulation.t
      t/db_dependent/Circulation/CalcDateDue.t
      t/db_dependent/Circulation/CheckIfIssuedToPatron.t
      t/db_dependent/Circulation/GetPendingOnSiteCheckouts.t
      t/db_dependent/Circulation/GetTopIssues.t
      t/db_dependent/Circulation/IsItemIssued.t
      t/db_dependent/Circulation/MarkIssueReturned.t
      t/db_dependent/Circulation/ReturnClaims.t
      t/db_dependent/Circulation/Returns.t
      t/db_dependent/Circulation/SwitchOnSiteCheckouts.t
      t/db_dependent/Circulation/TooMany.t
      t/db_dependent/Circulation/dateexpiry.t
      t/db_dependent/Circulation/issue.t
      t/db_dependent/Circulation/maxsuspensiondays.t
      t/db_dependent/Circulation/transferbook.t
      t/db_dependent/Circulation_holdsqueue.t
      t/db_dependent/DecreaseLoanHighHolds.t
      t/db_dependent/Holds/DisallowHoldIfItemsAvailable.t
      t/db_dependent/Holds/RevertWaitingStatus.t
      t/db_dependent/ILSDI_Services.t
      t/db_dependent/Illrequests.t
      t/db_dependent/Koha/Account/Line.t
      t/db_dependent/Koha/Biblio.t
      t/db_dependent/Koha/Items.t
      t/db_dependent/Koha/Object.t
      t/db_dependent/Koha/Patrons.t
      t/db_dependent/Koha/Pseudonymization.t
      t/db_dependent/Koha/Template/Plugin/CirculationRules.t
      t/db_dependent/Letters/TemplateToolkit.t
      t/db_dependent/Members/GetAllIssues.t
      t/db_dependent/Members/IssueSlip.t
      t/db_dependent/Patron/Borrower_Discharge.t
      t/db_dependent/Patron/Borrower_PrevCheckout.t
      t/db_dependent/SIP/ILS.t
      t/db_dependent/Holds.t
      t/db_dependent/Holds/LocalHoldsPriority.t
      t/db_dependent/Holds/HoldFulfillmentPolicy.t
      t/db_dependent/Holds/HoldItemtypeLimit.t
      t/db_dependent/Reserves/GetReserveFee.t
      t/db_dependent/api/v1/return_claims.t
      t/db_dependent/api/v1/biblios.t
      t/db_dependent/api/v1/checkouts.t
      t/db_dependent/Reserves.t
      t/db_dependent/HoldsQueue.t
      t/db_dependent/selenium/regressions.t
      t/db_dependent/Koha/Plugins/Circulation_hooks.t
      t/db_dependent/Koha/Plugins/Recall_hooks.t
      t/db_dependent/Koha/Recalls.t
      t/db_dependent/Koha/Recall.t
      t/db_dependent/Circulation/_CalculateAndUpdateFine.t
    
    Sponsored-by: Gothenburg University Library
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 266194321453d096a1fd1a9f80195dfb77ad5258
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Sep 12 14:52:30 2023 +0000

    Bug 34730: Add responsive behavior to more tables in the OPAC
    
    This patch adds responsiveness to several DataTables which were not
    updated in 32341. The patch removes the CSS-based responsive styling
    which was previously used for these tables.
    
    This patch also adds some additional configuration to the tables on the
    user home page so that the title column is always prioritized when
    DataTables collapses columns in narrow views.
    
    To test, apply the patch and rebuild the OPAC CSS. Ideally this should
    be tested with a user who has checkouts, overdues, holds, tags, and a
    checkout history.
    
    - Log in to the OPAC and test the user summary page. Check that each
      table adjusts well to narrow browser widths. In each case the column
      containing the title should never be hidden no matter how narrow the
      window:
      - Checkouts
      - Relatives' checkouts (requires that the user is a guarantor for a
        patron with checkouts and that the guarantee's account is set up to
        show checkouts to the guarantor).
      - Overdues
      - Holds
      - Article requests
    
    The new places the responsive DataTables extension is being used:
    
    - Checkout history
    - Suggestions
    - Tags (in the table of user-submitted tags)
    - Most popular
    
    Again, in each case the table should be responsive and the title column
    should be prioritized so that it doesn't get hidden at narrow page
    widths.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7c736793cba2e763cca2dca1528e57a835bda817
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Sep 15 15:51:34 2023 +0000

    Bug 34804: Fix translations
    
    This patch fixes some translations in the ERM module
    
    Translations should be wrapped in this.$__()
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b07ee89b54689f3f35f28e9964f7251eb1bd0755
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Sep 19 16:32:06 2023 -0300

    Bug 33716: DBRev 23.06.00.021
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit db37dbf8b842023e0fc0462d0cc2e582e56f343c
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Aug 23 15:24:49 2023 +0000

    Bug 33716: (QA follow-up) Fix submission when cardnumber is invalid
    
    Issue that this patch fixes:
    1) Enable ILLmodule and install FreeForm, run:
    bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev.sh)
    2) Copy the example YAML text into the system preference input box
    3) Create a new FreeForm request and enter a duff borrowernumber e.g. '11111111111111'
    4) Click 'Create'. Submit the type disclaimer stage.
    5) Notice there's an error
    6) Apply this patch.
    7) Repeat steps 3 and 4. Verify that the correct 'The borrower details you entered are invalid' error message is displayed instead of the error in 5).
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d80827f033da3689d3a1f32e7e035b4f59dfa035
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Aug 16 08:43:34 2023 +0000

    Bug 33716: (QA follow-up) Fix xt/yaml_valid.t
    
    Test plan: Run
    prove -vv xt/yaml_valid.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a1e6468181f0188fa898b313f6504604788f750c
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Aug 7 13:02:34 2023 +0000

    Bug 33716: (QA follow-up) Update z39.50 availability search in 'Request from partners' screen
    
    Test plan:
    - Enable ILLCheckAvailability;
    - Enable ILLModule and install FreeForm
    - Update partner_code in koha-conf.xml to match the patron category being used ('IL' if on k-t-d)
    - Install and configure z39.50 availability plugin, link it to the patron ID ('16' if on k-t-d)
    - Add a valid e-mail address to the patron of 'IL' category
    - Create a new ILL request and go to 'Manage request' screen
    - Click 'Place request with partners' notice the label 'Partners available for searching: none'
    - Apply patch and refresh, notice a 'Search selected partners' button now shows up after you select the partner from the list
    
    This is a fix for a regression caused by the rest of the code in this bug. I'm submitting this here since this has not yet been pushed and the fix is quite self-explanatory
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c813e7ed6d69295bb9ed549a4ca985d2e35febbf
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Jun 28 15:01:31 2023 +0000

    Bug 33716: (QA follow-up) Fix copy/paste issues in Workflow.pm and TypeDisclaimer.pm
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 53ab81b450667ba626edadd730fc11f7ff618a20
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Jun 28 15:06:03 2023 +0000

    Bug 33716: (QA follow-up) Fix styling for Type_disclaimer_date and Type_disclaimer_value on 'Request details'
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4c516eb81b3d6071acd17c2bf0948b968b8f8c26
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Jun 28 15:00:17 2023 +0000

    Bug 33716: (QA follow-up) Add atomic update file
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 53a08bcbe6760dca7876254513f642b3c59c3869
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu May 18 12:20:57 2023 +0000

    Bug 33716: (follow-up) Move sysprefs to new Workflow sub heading
    
    Move ILLModuleCopyrightClearance, ILLCheckAvailability,  and ILLModuleDisclaimerByType sys prefs
    State that ILLModuleCopyrightClearance is OPAC only in its description
    Correct 'bold' reference in ILLModuleDisclaimerByType description
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d85c270eb1ef20115ffe6dd48831999524cecea
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu May 18 11:21:38 2023 +0000

    Bug 33716: (follow-up) Add cancel links and update breadcrumbs
    
    For both staff interface and OPAC:
    * Update breadcrumbs to have a new entry for the page
    * Rename button From Next to submit
    * Add a cancel link to back out
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a9c700f8e6c11af7fb47b65d186b956608263e03
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu May 18 10:36:48 2023 +0000

    Bug 33716: (follow-up) Amend system preference descrpition and improve formatting
    
    This adds some documentation for the different options presented in
    the example YAML entry and improves formatting a little for better
    readability of the example.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6d0225096074efe730d87eab24baa6da6abd9d4c
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed May 10 17:50:12 2023 +0000

    Bug 33716: Tests
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 753e5a86d9b3498e75b81a22887385cb50423f9a
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu May 4 13:34:57 2023 +0000

    Bug 33716: ILL Type Disclaimer - OPAC
    
    Update the way Availability is handled
    Add the new type disclaimer workflow operation
    after Availability
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0d45394827b6f5cb66410321b168bd662a28efa8
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu May 4 13:34:18 2023 +0000

    Bug 33716: ILL Type Disclaimer - Staff
    
    Update the way Availability is handled
    Add the new type disclaimer workflow operation
    after Availability
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 712d7f29efb960d38b512d5025e52f3b02607aae
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu May 4 13:32:36 2023 +0000

    Bug 33716: Preparation
    
    New Illrequest::Workflow superclass
    New Illrequest::Workflow::TypeDisclaimer
    Moved Illrequest::Availability to Illrequest::Workflow::Availability
    
    Removed check for backend capability "should_display_availability"
    Instead, the check is now done for "can_create_request" backend
    capability
    This serves the purpose of having the backend let core know
    if it can create the request or not. In other words, if the
    create form has been submitted or not.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1009d3fca807d9ee5f9f3e388f6d6143e377b93e
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu May 4 13:33:23 2023 +0000

    Bug 33716: New ILLModuleDisclaimerByType sys pref
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7d46c5496699b785390023a677b284507f6a0ad0
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Thu Jun 22 14:53:36 2023 -0400

    Bug 33828: ExportCircHistory description is misleading
    
    This patch removes the mention of checkout history from the
    ExportCircHistory system preference description, as this system
    preference only allows to export current checkouts, not checkout
    history.
    
    This patch also modifies the description of the ExportRemoveFields
    system preference to also remove mention of checkout history.
    
    To test:
    0. Apply patch
    1. Go to Administration > System preferences > Circulation
    2. Read the description for ExportCircHistory, make sure it makes sense,
       and that spelling and syntax are correct
    3. Read the description for ExportRemoveFields, make sure it makes
       sense, and that spelling and syntax are correct
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dd493fe2cb7104ebcb1fa4cc6cb978db32da5f43
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Fri Sep 15 15:52:53 2023 -0400

    Bug 34807: Move EnableItemGroups in cataloging preferences
    
    This patch moves the EnableItemGroups system preference with cataloging
    preferences, as it deals with the grouping of items in a bibliographic record.
    
    To test:
    1. Apply patch
    2. Go to Administration > System preferences
    3. Search for enableitemgroup
    --> EnableItemGroups should be in cataloging preferences
    --> EnableItemGroupHolds should be in circulation preferences
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e7707b768ba50f2128e8efc50378ec3117962a60
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Sep 11 20:47:34 2023 +0000

    Bug 34760: Confirm session ID is set to save OPAC search history to logged in user
    
    This patch confirms that a session ID has been set before trying to save search history to a logged in user on the OPAC.
    
    This depends on EnableOpacSearchHistory system preference being enabled.
    
    Apply the patch and test that you don't see an Error 500 page at any point through this plan:
    
    1. Do an OPAC search, ensure you are not logged in
    2. Confirm your search was saved to search history
    3. Do another search, then log in
    4. Confirm you are brought back to the search results after logging in
    5. Confirm all search history from the session is visible
    
    Sponsored-by: Toi Ohomai Institute of Technology
    Signed-off-by: Salah Ghedda <salah.ghedda@inLibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit befb7f9f425cff38c459c19e2230213b049053f4
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Sep 8 20:00:40 2023 +0100

    Bug 32984: (QA follow-up) Update to respect EDIFACT preference
    
    Since the first submission of this patch we have introduced a system
    preference to enable/disable edifact in it's entirety. This patch adds
    the check for this preference.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2fb758d39585c35042e42fb3a1fcfa4850df2a3b
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Feb 16 10:32:07 2023 -0500

    Bug 32984: Add link to EDI invoice to "Invoice" column if there is one
    
    Test Plan:
    1) Find or create an item invoiced via an EDI INVOICE message
    2) Ensure you have the edi_manage subpermission
    3) View catalogue/detail.pl, not the invoice link in the invoice column
    4) Apply this patch
    5) Restart all the things!
    6) Reload catalogue/detail.pl
    7) Note the new "(EDI invoice)" link in the column for the item
    8) Verify the link does not show if you do not have the edi_manage
       subpermission
    
    Signed-off-by: Jeremy Evans <Jeremy.Evans@ukhsa.gov.uk>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bf515ec6d45ac78dd586c01c18d21703bfc60b17
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 8 11:47:03 2023 +0200

    Bug 33955: Koha::Biblio::normalized_upc
    
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 284aa1496e566b1784dbc9e95e368fbd543944fc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 8 12:50:59 2023 +0200

    Bug 33955: Add a test
    
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 51e602e61cc5dc46188aa298f276e6410678fdf7
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Sep 13 02:25:13 2023 +0000

    Bug 33734: Remove incorrect URL escaping on search filters
    
    This patch removes an incorrect URL escaping on search filter
    facet URLs.
    
    Without this patch, search filters using non-ASCII characters won't
    return results.
    
    To test:
    0. Apply patch
    1. Enable SavedSearchFilters syspref
    2. Search for "the"
    3. Save as search filter (to show on both OPAC and staff interface)
    4. Search for "ü" in staff interface
    5. Apply the "the" filter
    6. Note that search results appear
    7. Search for "ü" in OPAC
    8. Apply the "the" filter
    9. Note that search results appear
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 703ecab2c6911175f673565249d7c0c6f13bbe56
Author: Victor Grousset <victor@tuxayo.net>
Date:   Fri Sep 15 20:36:38 2023 +0200

    Bug 34732: (QA follow-up): tidy up code
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0f888f48fa0f839aa62eda7a457ed5c6f50c5a8a
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Sep 8 02:19:20 2023 +0000

    Bug 34732: For Code39, append or prepend asterisk if missing from barcode
    
    This patch appends or prepends an asterisk on Code39 barcodes if
    they are missing from the input. This is so that they form correct
    Code39 barcode images.
    
    Test plan:
    0. Apply the patch
    1. koha-plack --reload kohadev
    2. Go to http://localhost:8081/cgi-bin/koha/labels/barcode-print.pl
    3. Type 39999000001310 into "Barcode" and click "Show barcode"
    4. Note that the barcode text on the right includes asterisks around it
    5. Type *39999000001310 into "Barcode" and click "Show barcode"
    6. Note the same as above
    7. Type 39999000001310* into "Barcode" and click "Show barcode"
    8. Note the same as above
    9. Type *39999000001310* into "Barcode" and click "Show barcode"
    10. Note the same as above
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 03f160cba988be2ee0d18c67bbad2f7303926cc0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Sep 19 16:19:45 2023 -0300

    Bug 27634: DBRev 23.06.00.020
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8a833a351064925a470457ef17a3760c179a3fbd
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Apr 22 18:29:43 2023 +0000

    Bug 27634: (QA follow-up) Add punctuation to message on About page
    
    This just adds some missing commas and turns a pref into preference
    in the messages displayed on the system information tab.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 44e2eef451a20d12b3d892c9cf3cd7d8fbb6f0b6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Feb 8 11:30:39 2021 +0100

    Bug 27634: Hide "Register here" links
    
    Make sure the pref is filled with a valid patron's category to display
    the "register" link
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6c176f323b7bb4a6f90a0ff5f19b3f5a5eb89bd5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 5 11:46:54 2021 +0100

    Bug 27634: Update PatronSelfRegistrationBorrowerUnwantedField's value
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6ea09bbe0a5ddf93e41150080b9293187f15a2fa
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 5 11:16:23 2021 +0100

    Bug 27634: Add a warning to the about page if PatronSelfRegistrationDefaultCategory not set
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dcf02a9e4be87d3bfe81c13065c1c6a739f4cfe6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 5 11:16:17 2021 +0100

    Bug 27634: Force include of dateexpiry
    
    Otherwise we see a "Date expiry" entry in the form.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 461cd346985b5e26669438469dcb917aa4ef3aff
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 5 11:08:37 2021 +0100

    Bug 27634: Add the ability to exclude fields from "modal" sysprefs
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 931d39a19713862e36c77873b5a46aa25d3f642c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 5 10:56:20 2021 +0100

    Bug 27634: Force include categorycode to PatronSelfRegistrationBorrowerUnwantedField
    
    We should always use the category defined in
    PatronSelfRegistrationDefaultCategory.
    This could be discussed however.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 17b384ee3bbe212dfaf5440926d6a02fb0cc6b5e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Feb 5 10:53:54 2021 +0100

    Bug 27634: Turn off patron self-registration if no default category is set
    
    If there is no default category defined in PatronSelfRegistrationDefaultCategory the full feature must be displayed.
    
    We already hide the link from the OPAC main page, but the form is still accessible.
    
    Test plan (for the whole patch set):
    1. Turn on PatronSelfRegistration
    2. Don't set PatronSelfRegistrationDefaultCategory
    3. Go to the OPAC main page and confirm that the "Register here" link is
    not displayed
    4. Hit opac-memberentry.pl and confirm that you are redirected to the
    OPAC main page
    5. Go to the about page and confirm that you see a warning in the
    "System information" tab
    6. Set PatronSelfRegistrationDefaultCategory to an invalid patron's
    category
    7. Repeat 3, 4, 5
    8. Set PatronSelfRegistrationDefaultCategory to a valid patron's
    category
    9. Self-register a patron and confirm it works as expected
    10. Edit PatronSelfRegistrationBorrowerUnwantedField and confirm that
    you cannot remove dateexpiry and categorycode
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6d54d2419f98d7d473c0a0ef888aea00be5f9eb7
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Aug 25 16:26:10 2023 +0000

    Bug 34622: Fix store default query
    
    Exclude self smtp server from all the servers being updated to not default if self is_default
    
    Signed-off-by: Émily-Rose Francoeur <emily-rose.francoeur@inLibro.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0018fe8fba99ea200c6ac2924b9e5aff83e64af5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Sep 18 19:03:37 2023 +0200

    Bug 34818: (bug 21083 follow-up) Fix batch patron modification tool
    
    It is not possible to perform batch patron modification without selecting
    a patron attribute
    
    Test plan:
    Test the batch patron modification tool, with or without extended
    attributes.
    
    The error was
    Can't call method "category_code" on an undefined value at /kohadevbox/koha/tools/modborrowers.pl line 407
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4e33042105435078222aab1b72a1e7a1d0a8ff56
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Sep 19 16:37:08 2023 +0100

    Bug 32942: (follow-up) Restore missing statuses
    
    At some stage we lost some of the core statuses. This patch simply
    adds them back into the list.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 07a602d995db1aec4067a47116cfa5d91800747f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Sep 19 16:23:29 2023 +0100

    Bug 32942: (follow-up) Fix typo
    
    Spelling typo fix
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 078e98a7a35d6e5f598c51cd7c94b917f68128d1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Sep 19 16:19:53 2023 +0100

    Bug 32942: (follow-up) Fix test
    
    I missed a test case when doing follow-ups before.. this patch catches
    that case and create the required authorized value to allow
    ModSuggestion to succeed.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b593f6b806c8f2ec000470b9221ffcdb22aa7ac6
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue Sep 19 09:24:04 2023 +0000

    Bug 34789: (follow-up) Fix atomic update file
    
    Atomic update file had a versioning issue - now changed to be compatible with older versions
    
    Please backport

commit 4e4a4a2d44096dd9c1ae2dec65c6272e2967f908
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Aug 25 20:39:07 2023 +0000

    Bug 34626: Add waitingdate to holdswaiting patron message
    
    To test:
    1. Apply patch
    2. Place 2 or more holds for a patron and trigger them so they are waiting holds.
    3. Now go to both moremember.tt and circulation.tt for that patron.
    4. Confirm that you now see a 'Waiting here since' message.
    
    Signed-off-by: Kelly <kelly@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d70f71774df525e80c4b62e0321403cab5e9f8a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 6 15:27:49 2023 +0000

    Bug 33924: Improve translation of title tags: Rotating collections
    
    This patch updates rotating collection templates so that title tags can
    be more easily translated.
    
    The patch also makes some corrections to breadcrumb navigation and page
    headers to make sure they are consistent with titles.
    
    To test, apply the patch and confirm that the following rotating
    collection pages have the correct title tags:
    
    - Tools -> Rotating collections
      - Rotating collections list
      -> New collection
      -> Edit collection
      -> Delete collection -> Confirmation page
      -> Transfer collection
    
    Signed-off-by: Salah Ghedda <salah.ghedda@inLibro.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5f6e1a1cf77dfc893de08b66840f2ea16abf1998
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 7 17:13:46 2023 +0000

    Bug 34740: Update sort options in ES config to by Yes/No
    
    At some point the option for 'undef' was removed from te sort options
    and was collapsed to yes/no
    
    The dropdowns when adding a new field were missed, this patch corrects that.
    
    While undef in a mappings file wil stil load, when saving we should not privde undef any longer
    
    To test:
    1 - Browse to bottom to add a new field on the 'Bibliographic records' tab in
        Administration > Search engine configuration (Elasticsearch)
    2 - Set sortable column to undef, set other columns and provide a valid field
    3 - Click '+Add'
    4 - Click 'Save'
    5 - At top of page you receive an error:
     An error occurred when updating mappings: DBIx::Class::Storage::DBI::_dbh_execute(): DBI Exception: DBD::mysql::st execute failed: Column 'sort' cannot be null at /kohadevbox/koha/Koha/SearchField.pm line 37 .
    6 - Apply patch, restart all
    7 - Add a new mapping, your only choices are Yes/No
    8 - Save mapping
    9 - Confirm it saves correctly
    
    Signed-off-by: Salah Ghedda <salah.ghedda@inLibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3cf3ab9a8d64fe5ce254459a404d6821eb3672d6
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Aug 30 16:16:43 2023 +0000

    Bug 34660: Make deliveries table on housebound.tt a DataTable
    
    To test:
    1. Turn on the housebound module ( HouseboundModule )
    2. From a staff account add at leats one staff member as a Deliverer and a Chooser.
    3. From a patron account click on the 'Housebound' tab. Add some deliveries.
    4. Notice they sort with the oldest deilivery first.
    5. Apply patch and reload the page.
    6. Now the table is a DataTable and can be dymacially sorted.
    
    Signed-off-by: Rhonda Kuiper <rkuiper@roundrocktexas.gov>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d4be7b10aca91a5af3e9614f465429c78a28fb13
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Mon Aug 28 14:20:17 2023 +0000

    Bug 32048: Added clear cache routine to delete_holiday_range_repeatable
    
    When adding and deleting holidays, holidays might return
    unexpectedly.
    
    To test:
    1 - Enter a holiday repeated yearly on a range from the 1st of the month to the 5th
    2 - Delete it
    3 - Add a new holiday from the 20th to the 25th
    4 - When saved, the holiday from the 1st to the 5th is also added again.
    5 - Apply patch and restart_all.
    6 - Repeat steps 1-3. Notice that the holiday from the 1st to the 5th is no longer added and it has properly been cleared from the cache.
    7 - Sign off! :D
    
    Signed-off-by: Salah Ghedda <salah.ghedda@inLibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bda428399aa76057f0596883d5a619a27520a7c7
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 15 07:01:24 2023 +0000

    Bug 34728: (QA follow-up) Remove o modifier, bit more compact
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d947ae3c1a62a8abaabcba67d655084ecff8aa58
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Sep 6 10:50:30 2023 +0000

    Bug 34728: Make pre tag conditional
    
    This patch makes the pre-formatting of notice templates conditional on the content type.
    
    Test plan:
    1) Navigate to tools > Notices and slips
    2) Edit the notice with the code of HOLD
    3) Under print, paste the following
    <p>Please collect within 10 days from the date of this letter and don't forget to bring your library card with you.</p>
    <p>Be aware that opening hours vary at different library branches so if in doubt double check the times before you visit.</p>
    <p>Should you no longer require this item please contact us so we can make it available for another customer.</p>
    
    <p>Thank you</p>
    4) Check the box that says HTML message and save the notice
    5) In Patrons, select a patron and in Patron messaging preferences, check the box in the Email column for Hold filled
    6) Find a record in the catalogue
    7) Copy the barcode for one of the items
    8) Place a hold on the item for the patron you selected
    9) Navigate to Circulation > Check-in
    10) Paste the barcode in the Check-in box and click Check-in
    11) In the pop-up box, click Confirm hold
    12) In the command line, run perl misc/cronjobs/gather_print_notices.pl --letter_code=HOLD --html /tmp
    13) cd /tmp
    14) There should be a file in there called 'notices_HOLD-date.html
    15) cat this file
    16) The html you pasted in the template will be wrapped in a <pre> tag
    17) Apply patch and restart_all
    18) rm the notices file that was created
    19) cd /kohadevbox/koha
    20) Select a new record from the catalogue and repeat steps 7-15 for this record, using the same patron
    21) This time, the html file should not contain the <pre> tag
    22) Sign off!
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4ce7ce2a158d9c61ac176660e341b4111e76a2ca
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jul 20 20:18:27 2023 -0300

    Bug 34333: Add embed option for `cancellation_requested` for holds
    
    This patch adds the `cancellation_requested` attribute to the hold
    object definition, and allows embeding it as on the different holds
    endpoints that migt be useful.
    
    To test:
    1. Apply this patches
    2. Run:
       $ kshell
      k$ prove t/db_dependent/Koha/Hold.t \
               t/db_dependent/api/v1/*holds.t
    => SUCCESS: Tests pass!
    3. Play with your REST tool (Postman?) on the following endpoints:
       GET http://localhost:8081/api/v1/holds
       GET http://localhost:8081/api/v1/patrons/:patron_id/holds
    on both, pass and not pass the `x-koha-embed` header with
    `cancellation_requested` on it.
    => SUCCESS: It is easy! You see the attribute and you don't, and the
    content makes sense!
    4. Sign off :-D
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 23cfdf97e379255139a6a3a73d74ee60f36aa5a2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jul 20 20:16:39 2023 -0300

    Bug 34333: Add Koha::Hold->cancellation_requested
    
    This patch adds a helper method for telling if a hold has cancellation
    requests. To be used for embedding such information.
    
    To test:
    1. Apply this patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/Koha/Hold.t
    => SUCCESS: Tests pass, the new method is covered by tests.
    3. Sign off :-D
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ac7581e90a79961a4de915f0592834eb9f2611c5
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Sep 14 09:11:56 2023 +0000

    Bug 34786: after_biblio_action hooks - No find when action is delete
    
    Test plan:
    Run t/db_dependent/Koha/Plugins/Biblio_and_Items_plugin_hooks.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a4bdd27fd9d953a8ae086a6f3e8b7960f9b7160b
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Aug 25 01:26:01 2023 +0000

    Bug 34613: Replace onclick attributes in midiplayer.js
    
    This patch replaces the onclick attributes in midiplayer.js
    with Javascript click handlers.
    
    To test:
    0. Apply patch
    1. Clear browser cache (it may be necessary to go into the
       Network tab and explicitly disable cache)
    2. Add 031 subfields 2gopnu to Default framework
    3. Create a catalogue record with a 031 like follows:
    2: pe
    g: G-2
    o: 4/4
    p: 4bB''C2bE/2F4GbB/'bB2''C4D/F2.bE/4GG2bB/4'''C2C4''bB/4bE2G4bB/4bE2.F/
    n: xFCGD
    4. Enable the following sysprefs:
       OPACShowMusicalInscripts
       OPACPlayMusicalInscripts
    5. Go to OPAC record view and click "Play this sample"
    6. Play with the "Pause/Start" and "Stop" buttons
    7. If the buttons work, it means the patch worked
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8eb27c40e6fd771e8d4c2bff28cc1a45838af712
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Sep 18 12:59:50 2023 +0100

    Bug 32942: (QA follow-up) Fix regression test
    
    With the move to checking status during store, we broke the api
    regression test introduced earlier in the patch set.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 40ca7aa06c166b005fda5b6ff38f4cbf20b3d081
Author: Arthur Suzuki <arthur.suzuki@biblibre.com>
Date:   Fri Aug 18 13:16:53 2023 +0200

    Bug 32942: (QA follow-up) Moving Suggestion->STATUS check to Suggestion::store
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 672e8a9d715d144812329aeb07cea5c915c50377
Author: Arthur Suzuki <arthur.suzuki@biblibre.com>
Date:   Fri Aug 18 13:11:45 2023 +0200

    Bug 32942: (QA follow-up) Add tests for STATUS checking in Suggestion::store
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 54c8aa9471e83b380e455dafe2e8cbf208cb6f36
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Feb 13 15:11:17 2023 -0300

    Bug 32942: (QA follow-up) Document possible values
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3dc9bf900bd666eb17272060e071422a35267ada
Author: Frédéric Demians <f.demians@tamil.fr>
Date:   Fri Feb 10 18:23:11 2023 +0100

    Bug 32942: Suggestion API route when non 'standard' status are present
    
    The API route for listing all suggestion:
    
    /api/v1/suggestions
    
    send back an error message when there is a suugestion with non standard
    status (ASKED, CHECKED, ACCEPTED, REJECTED).
    
    This patch fixes this too restrictive restriction.
    
    TO TEST:
    
    1. Add a status in SUGGEST_STATUS AV list.
    2. Create a suggestion, and assign it to the previsous status.
    3. Call /api/v1/suggestion
    3. You get an error message:
       {
        "errors": [ {
          "message":"Not in enum list: ASKED, CHECKED, ACCEPTED, REJECTED.",
          "path":"\/1\/status"
        }],
        "status":200
       }
    4. Apply the patch. Call /api/v1/suggestion
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e13f68965efab9b5f25daf1ec9926386fd386800
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Feb 13 11:54:07 2023 -0300

    Bug 32942: Regression tests
    
    Having a custom status shouldn't cause issues
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5ede6ad49e1c6842a9c0691ec3d828bdef11de32
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Jul 26 07:29:06 2023 +0000

    Bug 34415: Remove T::D::C from EdiTransport.t, move to t/db
    
    Moving file now here.
    
    Test plan:
    Run t/db_dependent/Koha/Edifact/Transport.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 03641d9111525f0a137acd001cbb9e303fe89586
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Sep 18 09:05:13 2023 +0000

    Bug 34812: Move subtests to db_dependent/Koha.t
    
    Note that a few isbn tests were identical.
    Tidied the three moved subtests here.
    
    Test plan:
    Run t/db_dependent/Koha.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1acd58896da114efa525df8ca32aea8ee1f36054
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Sun Sep 17 14:56:46 2023 +0000

    Bug 34812: Remove Test::DBIx from Koha.t
    
    The DBIx fixture here is replaced by a simple mock on Libraries.
    getFacets only needs the count of libraries.
    Feels better than removing all libraries here..
    
    Note: Moved tests at 'root level' to a new subtest.
    
    Test plan:
    Run t/Koha.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3db74c80866cb9252d13885d2cc09566e9c5a22c
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Sep 13 11:29:17 2023 +0000

    Bug 34781: Add a span tag in opac-memberentry
    
    Test plan:
    Enable self registration and GDPR consent (privacy policy).
    Look at selfreg page on OPAC. Scroll to bottom.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6091a938c1c148cbeab6ff27f5261c6fe64d1463
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed May 31 22:38:50 2023 +0000

    Bug 33876: Add class for styling
    
    To test:
    1. Checkout and item that has a public and nonpublic note.
    2. In the checkout table ( Title column ) notice the notes display. If you use the browser dev tools to inspect you'll notice a "-" outside of any HTML element.
    3. Apply patch.
    4. See the '-' is now inside of a html element with class of seperator.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6ee6bea6bfee301146dc2f631480b227d237e43a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 25 15:51:12 2023 +0000

    Bug 34552: Don't exclude payments with no status
    
    Bug 29664 removed payments with a void status, however, the query also
    removed any payments with no status set
    
    Test Plan:
    1 - Set up your cash registers and enable POS and add a debit type that is able to be sold
    2 - Take 2 payments via POS
    3 - Void one payment
    4 - Go to Reports->Statistics wizards->Cash register
    4) Verify neither shows for the "All payments to the library" and
       "Payment" transaction type filters
    5) Apply this patch
    6) Restart all the things!
    7) Verify the non-voided fee shows for the "All payments to the library" and
       "Payment" transaction type filters and the voided fee does not
    
    Signed-off-by: Christopher Brannon <cbrannon@cdalibrary.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c997fe863f70fa951c71dca73296ed1f497aeca7
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue Sep 5 04:58:52 2023 +0000

    Bug 34711: Remove use of onclick for opac-privacy.pl
    
    This change removes the "onclick" attribute for the buttons
    on opac-privacy.pl.
    
    Note: The Javascript is placed in a separate file, which is
    the preferred way for Javascript to be handled by
    Content-Security-Policy
    
    Test plan:
    0. Apply the patch
    1. Go to http://localhost:8081/cgi-bin/koha/admin/preferences.pl?op=search&searchfield=OPACPrivacy
    2. Set syspref to "Allow"
    3. Go to http://localhost:8080/cgi-bin/koha/opac-privacy.pl
    4. The confirmation modal appears and "OK" and "Cancel" buttons work as
       expected
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bc8a0620012a79567c44d863c029a4b0025a2fbd
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Sep 8 16:01:03 2023 +0000

    Bug 34724: (QA follow-up):
    
    Replace href from thumbnail link with a # to keep pointer event. The href link gets reconstructed by showCover anyway
    Remove return false from on click event, its not triggering a location change anymore because of the above
    Remove check for imagenumber, its a non-null primary key, if the image exists, then the imagenumber must also exist
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 847b5f0777c51a56100108ac44351de8a81660e0
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Sep 6 06:40:21 2023 +0000

    Bug 34724: Remove inline onclick handler for opac-imageviewer.pl
    
    This patch moves the click handler for thumbnails for opac-imageviewer.pl
    out of the inline HTML and out to an existing <script> element.
    
    Test plan:
    0. Apply the patch (including dependent patches)
    1. Go to
    http://localhost:8081/cgi-bin/koha/admin/preferences.pl?tab=&op=search&searchfield=localcover
    2. Change both *LocalCoverImages sysprefs to "Show"
    3. Go to
    http://localhost:8081/cgi-bin/koha/admin/preferences.pl?tab=&op=search&searchfield=AllowMultipleCovers
    4. Change "AllowMultipleCovers" to "Allow"
    5. Go to
    http://localhost:8081/cgi-bin/koha/catalogue/detail.pl?biblionumber=29
    6. Click "Images (0)" tab
    7. Download or make two JPEG images
    8. Upload the images
    9. Go to http://localhost:8080/cgi-bin/koha/opac-imageviewer.pl?biblionumber=29
    10. See one large image in the centre and two smaller thumbnails on the right side
    11. Click on the thumbnail of the image that isn't displayed in the centre
    12. Note that the image changes
    13. Click the other thumbnail and note that the image changes back
    
    PA amended patch: Added missing test plan step
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9e39d2d67135186b2202d42004b31f9fcfa9eb58
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Sep 6 06:57:15 2023 +0000

    Bug 34725: Remove use of onclick for OPAC cart
    
    This patch moves the click handler in the OPAC cart from the inline HTML
    and out to an existing <script> element.
    
    Test plan:
    0. Apply the patch
    1. Go to http://localhost:8080/cgi-bin/koha/opac-search.pl?idx=&q=test&weight_search=1
    2. Add the results to the cart
    3. Click on the "Cart"
    4. One by one click on the title of each row
    5. Notice how the parent window changes to the detail record for that title
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f636a041a62331a09cb1a2bd39c86fd3d8a04c13
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 25 16:35:18 2023 +0000

    Bug 34400: Inconsistencies in OAI sets page titles, breadcrumbs, and header
    
    This patch fixes a couple of inconsistencies in the style of the
    OIA sets administration screen, making sure the page title, breadcrumb
    navigation, and page headers are consistent with each other.
    
    The patch also corrects the structure of the form on the OAI set
    mappings page so that the submit button is outside the "page-section"
    area.
    
    To test, apply the patch and go to Administration -> OAI sets. Test each
    variation of the page:
    
    - Main page
    - New OAI set
    - Edit OAI set
    - OAI set mappings
    
    Signed-off-by: Émily-Rose Francoeur <emily-rose.francoeur@inLibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b952d2eb9922ed1afc5c52a2706290f94bb83e03
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Sep 18 11:56:35 2023 -0300

    Bug 34789: DBRev 23.06.00.019
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c1b344b002b3ff2471c72f18a9746f71f7900978
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Sep 17 13:18:49 2023 +0000

    Bug 34789: (QA follow-up) Improve output of database update
    
    * Adds description
    * Adds column names to success messages
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4ec7c6a62ec12abe1ea092e0fbbdcc6e7ecee110
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Sep 14 12:27:20 2023 +0000

    Bug 34789: Update unit tests
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7d2ce611f71958d31b6b3592e305bea415e50ef5
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Sep 14 12:26:53 2023 +0000

    Bug 34789: Update usage throughout Koha modules and Vue components
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6989d25df7dcb1bc1f4a9b2897b107c38a583053
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Sep 14 12:25:21 2023 +0000

    Bug 34789: DBIC file
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cf94eae1ff89d1c99604dd68429c77f7247aa9a7
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Sep 14 12:23:49 2023 +0000

    Bug 34789: Database and API update
    
    Currently the erm_eholdings_titles table has a field called preceeding_publication_title_id. This should be preceding_publication_title_id
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7b99f2eeca182f8d39f84c28d6153980addf739f
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Sep 7 09:55:28 2023 +0000

    Bug 34735: Remove uneeded CSS
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e0d3ffff480dc1fbb18ffd4954b270ed39879492
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Sep 7 09:53:43 2023 +0000

    Bug 34735: Update breadcrumb markup
    
    Make the breadcrumb navigation item markup match the rest of Koha
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c84d53c2cdbfb3e8d9da65316530a22ab347ed65
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Sep 7 09:52:06 2023 +0000

    Bug 34735: Remove pointer events from disabled links
    
    Add pointer-events: none to a.disabled links in staff
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit df756cbb1783b007848b7504c12025dc20a88ae1
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Sep 7 01:52:47 2023 +0000

    Bug 34735: Style disabled breadcrumbs
    
    To test:
    1. Turn on ERMModule.
    2. Notice the disbaled breadcrumbs are color: #000;
    3. Apply patch, yarn build
    4. Look again, disbaled breadcrumbs are color; #696969;
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d3dde3c9cdf8ba11ce67ccb6755559f7f59bf700
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Sep 6 10:38:41 2023 +0000

    Bug 34411: Inconsistencies in Additional fields page titles, breadcrumbs, and header
    
    This patch makes changes to the additional fields administration
    template in order to make it more consistent with other pages in Koha.
    
    To test, apply the patch and go to Administration -> Additional fields.
    View each variation of the page to confirm that breadcrumb navigation,
    page title, and page headings are consistent with each other.
    
    - Main list
      - Table view (e.g. aqbasket, aqorders, etc)
        - New field
        - Edit field
    
    Signed-off-by: Salah Ghedda <salah.ghedda@inLibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5064a7f76f863cc38e34049c746a86c8a00c993c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Sep 7 15:41:58 2023 +0000

    Bug 34409: Fix inconsistencies in Audio alerts headers
    
    This patch makes a minor change to the structure of the audio alerts
    administration template so that the add/edit form is more consistent
    with other similar forms.
    
    The patch doesn't make any changes to page title and breadcrumbs because
    the add/edit action doesn't trigger a page reload, so the required
    change can't be made just with markup.
    
    To test, apply the patch and enable the AudioAlerts system preference
    if necessary.
    
    - Go to Administration -> Audio alerts.
    - Click "New alert" and confirm that the form looks correct.
    - Edit an existing alert to confirm that this view also looks correct.
    
    Signed-off-by: Salah Ghedda <salah.ghedda@inLibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2c67096c0773980e9703953575e47d0264a424d3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Sep 7 16:46:05 2023 +0000

    Bug 34407: Inconsistencies in Z39.50 servers page titles, breadcrumbs, and header
    
    This patch makes changes to the Z39.50 servers administration and
    related templates in order to make them more consistent with other pages
    in Koha.
    
    One case has been added to page title and breadcrumb navigation: An
    indication that a search has been performed. The subheading is modified
    to make it clear that the search is a "starts with" search.
    
    To test, apply the patch and go to Administration -> Z39.50/SRU
    servers. View each variation of the page to confirm that breadcrumb
    navigation, page title, and page headings are consistent with each
    other.
    
    - Z39.50/SRU servers list.
      - New Z39.50 server
      - New SRU server
      - Edit Z39.50 server
      - Edit SRU server
        - Modify SRU search field mapping for a bibliographic record
          server
        - Modify SRU search field mapping for an authority record server
      - Use the header search form to search for a server by name
    
    Signed-off-by: Émily-Rose Francoeur <emily-rose.francoeur@inLibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b0342302a0d70dbad25c0f2c2970a0957ec34bf2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Sep 5 17:06:51 2023 +0000

    Bug 34380: Fix inconsistencies in Item types page titles, breadcrumbs, and header
    
    This patch fixes inconsistencies in the item type administration page so
    that page titles, breadcrumb navigation, and page headers are consistent
    with each other and with other pages in Koha.
    
    To test, apply the patch and go to Administration -> Item types. Check
    each variation of the page to confirm that everything looks correct:
    
    - Item types list
     - New item type
     - Edit item type
     - Confirm deletion of item type
    
    Signed-off-by: Émily-Rose Francoeur <emily-rose.francoeur@inLibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 766bdd638acbf8870c3f6eb21d03d8195040e54f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Mon Sep 18 13:24:53 2023 +0000

    Bug 33406: (follow-up) Mock SearchEngine to ensure using ES
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a6c77f664c6b21b3d7c9ee4590a8b8b21a18a9b2
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Sep 7 21:19:26 2023 +0000

    Bug 34719: Add middle_name to patron autocomplete
    
    To test:
    1. Apply patch and clear browser cache.
    2. Find some patrons with middle_name populated or add new patrons with a middle_name.
    3. Make sure PatronAutoComplete is on
    4. Try searching for a part of one of the patron's names who has a middle_name.
    5. It should appear in the autocomplete dropdown
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9b385a2c36f433bc9fe1a2b5c6896eca28aae447
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Thu Sep 14 15:17:54 2023 +0000

    Bug 34794: Fix typo in recalls_to_pull.tt
    
    Fixed typo - it's v its
    
    Test plan:
    Look at the bug patch and confirm the change is correct
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3d7b60dc90142b171b6aaa268bdf2abf917b3739
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 14 13:21:44 2023 +0000

    Bug 33406: (QA follow-up) Adjust tests and tidy
    
    Rather than test that nothing is returned, we want to test that the terms are filtered as expected. This also avoids the possibility of the tests failing in a db where there is a record for Donald Duck
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 27c6171222bf3abb5ed91e399bb2663579e8e367
Author: Janusz Kaczmarek <januszop@gmail.com>
Date:   Tue Aug 8 08:41:53 2023 +0000

    Bug 33406: Filter out some known isolated trouble makers
    
    Test plan:
    1) Launch k-t-d with ES:
    -- ktd --es7 pull
    -- ktd --es7 up
    2) Visit /cgi-bin/koha/authorities/authorities-home.pl and search for 'tim'
    3) Edit that, add a dash '-' to 100$a, like 'Bunce, Tim - name'"
    4) Do a authority search for 'tim - name', notice it errors out
    5) Apply patch
    6) Perform the same search, notice it doesn't error and returns the correct record
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 09b29d06da5fac2bd1315d849f1b9bf924576700
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 11 12:38:53 2023 +0200

    Bug 33406: Handle ES search errors for authorities
    
    We are dealing ok with ES exceptions for biblio records search,
    catching them and raising them to the end user. But we don't for
    authorities, where we explode with an ugly 500.
    
    Test plan:
    Search for "(term_1*) AND (-) AND (term_2*)" in the authority search and
    notice that you don't get a 500 but an error instead saying that you
    should try again
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fbd62562e0d67d22738435e44adf9f03900a147e
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Sep 4 12:28:29 2023 +0000

    Bug 33406: Add tests
    
    Test plan:
    1) Apply this tests patch only
    2) Run: prove t/Koha/SearchEngine/ElasticSearch/Search.t
    3) Notice it fails with nasty ES "Failed to parse query" error
    4) Apply the other patches
    5) Repeat 2) - notice theres no nasty error
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2bdfe69df80d2028563eda175d6f9a0db4d0b19d
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Aug 22 15:09:17 2023 +0000

    Bug 34589: Only update users if permission is added
    
    To test:
    1 - Assign a user 'edit_items' permission
    2 - Manually run the update
        perl -e 'use C4::Installer; warn Data::Dumper::Dumper(C4::Installer::run_db_rev("installer/data/mysql/db_revs/221200003.pl"));'
    3 - Edit patron permissions
    4 - Note they now have edit_any_item permission
    5 - Remove that permission
    6 - Run the update again
    7 - Edit patron permissions
    8 - They have edit_any_item again - remove it
    9 - Apply patch
    10 - Run the update
    11 - Edit patron permissions
    12 - No new permissions added!
    13 - sudo koha-mysql kohadev
         DELETE FROM permissions WHERE code = 'edit_any_item'
    14 - Run the update again
    15 - Edit patron permissions
    16 - They do have edit_any_item
    
    Signed-off-by: Émily-Rose Francoeur <emily-rose.francoeur@inLibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5e6943562fc12f475442a2e05de700ae1f9d6020
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Aug 15 07:36:43 2023 +0000

    Bug 14156: Add id tags to each MARC note in the display
    
    This patch adds tag number to the data which is returned by
    $biblio->get_marc_notes(). The bibliographic detail page in the staff
    client is modified to use the tag number in both a class (for consistent
    styling across the same tag number) and id (for unique styling for each
    repeated tag).
    
    To test, apply the patch and restart services.
    
    - As a quick test for custom CSS, go to Administration -> System
      preferences and locate the IntranetUserCSS preference.
      - Add this testing CSS:
    
       .marcnote { font-size:140%; font-family: serif; }
       .marcnote-500 { background-color: #66FFCC; }
       .marcnote-511 { background-color: #99FFFF; }
       .marcnote-520 { background-color: #CCFF00; }
       .marcnote-521 { background-color: #CCFFFF; }
       .marcnote-538 { background-color: #FFCCCC; }
       .marcnote-546 { background-color: #FFFFCC; }
    
    - Locate a record with multiple notes fields. In the sample data, record
      46, "Viridiana" is a good example which works well with the above CSS.
    - On the bibliographic detail page for the record, click the
      "Descriptions" tab.
      - Each MARC note should be colored according to the tag it comes from.
      - Inspect the HTML to confirm that each paragraph also has its own
        unique ID.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5797079fc5e5b1e9a4d883f0ceb5a344b8cdbd36
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Sep 14 09:31:00 2023 +0000

    Bug 34787: Fix typo gorup
    
    No test plan (fixing comment).
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b5540d8c949a2ea3f7e95667821e2a1668a58e18
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue Sep 5 13:40:07 2023 +0000

    Bug 34716: Fix typo
    
    Fixes a typo where "it's" should be "its"
    
    Test plan:
    1) Check the commit and observe that the change has been made correctly
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 34296cd6b0e9cbdd674cb03b0b1152c10437d7e2
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed May 24 14:51:04 2023 +0000

    Bug 33818: Descriptive title added to opac-ISBDdetail.tt
    
    This patch adds the biblio.title to the breadcrumb for the ISBD viewer.
    This now matches the normal and MARC views and is much clearer for
    screen readers.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e07c3b6b79b04b8928683aeb9e936ac3c719715b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 15 09:26:31 2023 +0000

    Bug 33045: Fix shebang of marcrecord2csv.t
    
    Resolves:
    bash: t/db_dependent/Record/marcrecord2csv.t: /usr/bin/perl;: bad interpreter: No such file or directory
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d00feafe758c0631009ad7f9acf96222b4f1d922
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Feb 22 13:16:35 2023 -0500

    Bug 33045: Use process_tt in C4::Record::marcrecord2csv
    
    Bug 33030 implements a new helper subroutine to standardize processing of Template Toolkit syntax outside slips and notices. We should use this subroutine in marcrecord2csv.
    
    Test Plan:
    1) Apply this patch
    2) prove t/db_dependent/Record/marcrecord2csv.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 93d4defeda79349d57be209bfb8fa4132cae3b77
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Sep 8 15:44:33 2023 +0000

    Bug 34443: Spelling: Patron search pop-up Sort1: should be Sort 1
    
    This patch instances of "Sort1" and "Sort2" being used
    as labels in the interface, replacing the strings with "Sort 1" and
    "Sort 2"
    
    To test, apply the patch and test this page:
    
    With the borrowerRelationship system preference populated, edit a
    child record and click the "Add guarantor" button. There are two
    fields in the form with the updated labels.
    
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 91dd8dd16f11f721d109f240eb9928b7383f9b15
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Sep 8 11:04:56 2023 +0000

    Bug 34743: Fix POD description
    
    Currently --expiration-from-today has the same definition as --update-expiration. The description has now been updated to reflect the fact that it will set the date from today, and not the patron's enrollment date
    
    Test plan:
    Look at the patch file and confirm that the POD now mentions today's date rather than the patron's enrollment date
    
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 70b4f0970125c03f6ec4dd20c3974a82d5883d1e
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Mon Jul 10 10:52:35 2023 -0400

    Bug 34228: Add translation context to "Managed by"
    
    This patch adds context for translators to the Managed by string when it
    applies to acquisitions baskets (as opposed to purchase suggestions).
    
    To test:
    0. If you don't already have acquisitions set up, create a budget and a vendor
    
    1. Apply patch
    
    2. Create a basket
       2.1. Go to Acquisitions
       2.2. Search for a vendor
       2.3. Click New > Basket
       2.4. Fill out the form
       2.5. Click Save
    
    3. View the basket details page
       --> The page works (no errors)
       --> 'Managed by:' is displayed on the right, no spelling errors
    
    4. Click Add to basket > From a new (empty) record
       --> The page works (no errors)
       --> 'Managed by:' is displayed under Basket details, no spelling errors
    
    5. Click Cancel
    
    6. Update the po files
    
    gulp po:update --lang xx-XX
    
    for example, gulp po:update --lang fr-CA
    
    7. Check the xx-XX-messages.po file (e.g. misc/translator/po/fr-CA-messages.po)
       --> There should be an entry for 'Managed by:' with a line msgctxt that gives the 'Acquisitions basket managed by user' context
    
    8. Update the file with a random phrase for the 'Managed by:' translation
    
    for example, I translated 'Managed by:' by 'AAAAAAA:', just to see the difference
    
    \#: koha-tmpl/intranet-tmpl/prog/en/modules/acqui/basket.tt:308
    \#: koha-tmpl/intranet-tmpl/prog/en/modules/acqui/neworderempty.tt:281
    msgctxt "Acquisitions basket managed by user"
    msgid "Managed by:"
    msgstr "AAAAAAA:"
    
    9. Install a new language
       9.1. Run the following commands in the terminal, replacing xx-XX with the language code (e.g. fr-CA)
    
       ./misc/translator/translate install xx-XX
    
       9.2. In the Koha staff interface, go to Administration > System preferences
       9.3. Search for language
       9.4. Check the box next to the new language
       9.5. Save
    
    10. Switch the language of the interface
    
    11. Redo steps 3 and 4
       --> The pages still work (no errors)
       --> The 'Managed by:' string should be replaced by whatever you put in step 8
    
    Optional test
    12. In the staff interface in English, view one or more of these pages, the 'Managed by' string should be unchanged
    - Acquisitions > Suggestions (Managed by column heading)
    - Acquisitions > Suggestions (Organize by: Managed by sorting option)
    - Acquisitions > Suggestions (Filter by: Suggestion information: Managed by filter option)
    - Acquisitions > Suggestions > Click on a suggestion (Managed by table row under Suggestion management)
    - Patrons > Patron account > Purchase suggestions (Managed by column heading)
    
    13. View these same pages in the other language, the Managed by string should NOT be changed to whatever you put in step 8
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4988bcdb93008b44e2ce0517c0441f08c61958b2
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Thu Aug 31 10:52:52 2023 -0400

    Bug 34656: (QA follow-up) perltidy
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 84521918d93878ffa314decc4eb3b67afe46dca3
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Aug 30 13:46:52 2023 +0000

    Bug 34656: Do not update real Time Holds Queue when moving from cart to shelf
    
    To test:
    1 - Enable RealTimeHoldsQueue system preference
    2 - Set UpdateItemLocationOnCheckin to _ALL_: CART
    3 - Check in an item
    4 - Check the background jobs - the RTHQ is updated
    5 - perl -e 'use C4::Items; C4::Items::CartToShelf(##);' -- substitute the itemnumber from above
    6 - Check the background jobs - no new update to RTHQ
    7 - Confirm item was set back to correct permanent_location
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aff84104127552fe5f5e4394f84b501dafcbc497
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Aug 30 13:46:17 2023 +0000

    Bug 34656: Unit test
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3a2dcf0733733a92ddbf46fb863434a46060e279
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Sep 12 16:24:19 2023 +0100

    Bug 34767: Pass fee_ack into ::Transaction::Renew(All)
    
    This patch copies the $fee_ack field into the generated
    ::Transaction::Renew|All objects such that the fee acknowldegement flag
    is respected for renewals.
    
    Test plan
    To test:
    1) Add a rental charge to an itemtype
    2) Checkout an item of that itemtype to a user
    3) Attempt a renewal of that item via SIP2 and note that it fails
       sip_cli_emulator.pl -a localhost -p 6001 -su term1 -sp term1 -l CPL --patron 23529000035676 --item 39999000007756 -m renew
    4) Pass the fee_acknowledgement bit in renewal and note the renewal
       still fails.
       sip_cli_emulator.pl -a localhost -p 6001 -su term1 -sp term1 -l CPL --fee-acknowledged Y --patron 23529000035676 --item 39999000007756 -m renew
    5) Apply patch and note the above now succeeds
       sip_cli_emulator.pl -a localhost -p 6001 -su term1 -sp term1 -l CPL --fee-acknowledged Y --patron 23529000035676 --item 39999000007756 -m renew
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a3e40408ea6792186e87e95a7de1dff515981432
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Sep 12 15:28:34 2023 +0000

    Bug 34768: Remove checkbox column from relatives fines on OPAC
    
    When a patron has a guarantee and can see their fines on the opac and
    an opac payment plugin is enabled there is an error on the 'Charges'
    tab.
    
    The table uses a 'COLSPAN' variable which is set to 5 or 6 depending on
    if OPAC payments are enabled. The guarantees table has one less column
    than the patron's however, so it is going out of range and causing a JS
    error. Additionally, we are adding a column to the child's table which
    is not used as their fines cannot be selected for payment at this time.
    
    This patch removes the checkbox column and sets the colspan directly to
    4
    
    I also fix an issue where the table is not being set as we need to
    reference the patron object in the guarantor info to obtain the id.
    
    To test:
    1 - Set system preference: AllowStaffToSetFinesVisibilityForGuarantor to
        allow
    2 - Find a patron
    3 - Add some fines to their account
    4 - Install and enable an opac payment plugin
        (https://github.com/bywatersolutions/koha-plugin-pay-via-govolution
        for example)
    5 - Sign in to OPAC as borrower
    6 - Go to 'Charges' tab
    7 - Select a fee
    8 - Confirm 'Make payment' button enabled and 'amount to pay' is
        updated
    9 - Add a guarantee to patron in staff interface
    10 - Set 'Show charges to guarantors' to 'Yes'
    11 - Add and pay a fine for the child
    12 - View guarantor account on the OPAC
    13 - Confirm you now see child's charges
    14 - Confirm selecting your own fees does not enable the button or
         update amount to pay
    15 - Note JS error in console
    16 - Apply patch
    17 - Reload patrons page
    18 - Confirm the table loads correctly (no JS error)
    19 - Confirm selecting a fine updates the total and enables button
    20 - Disable the payment plugin
    21 - Confirm the display is still correct, no errors
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0e9603bb49436e4bb74e893f74a63ef31065f798
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Sep 12 14:18:37 2023 +0100

    Bug 34764: Set fee_acknowledged to expect a string
    
    For consistency with other options I opted to have the fee acknowledged
    parameter to expect a string and as it's an optional parameter I've
    dropped the default value of 'N' too.
    
    Test plan
    1) Prior to this patch
    1a) Attempt a checkout without passing -fa/--fee_acknowledged flag
        `./misc/sip_cli_emulator.pl -a localhost -p 6001 -su term1 -sp term1 -l CPL --patron 23529000035676 --item 39999000007756 -m checkout`
        The final field of the SIP request will be '|BON', the default
    1b) Attempt a checkout passing -fa/--fee_acknowledged flag
        `./misc/sip_cli_emulator.pl -a localhost -p 6001 -su term1 -sp term1 -l CPL --fee-acknowledged --patron 23529000035676 --item 39999000007756 -m checkout`
        The final field of the SIP request will still be '|BON', failure
    1c) Attempt a checkout passing a string for fee_acknoewledeged flag
        `./misc/sip_cli_emulator.pl -a localhost -p 6001 -su term1 -sp term1 -l CPL --fee-acknowledged Y --patron 23529000035676 --item 39999000007756 -m checkout`
        The final field of the SIP request will still be '|BON', failure
    2) Apply the patch
    2a) Attempt a checkout without passing -fa/--fee_acknowledged flag
        `./misc/sip_cli_emulator.pl -a localhost -p 6001 -su term1 -sp term1 -l CPL --patron 23529000035676 --item 39999000007756 -m checkout`
        The optional `|BO` element should not be present
    2b) Attempt a checkout passing -fa/--fee_acknowledged flag
        `./misc/sip_cli_emulator.pl -a localhost -p 6001 -su term1 -sp term1 -l CPL --fee-acknowledged N --patron 23529000035676 --item 39999000007756 -m checkout`
        The final field of the SIP request will now be '|BON', success
    2c) Attempt a checkout passing a string for fee_acknoewledeged flag
        `./misc/sip_cli_emulator.pl -a localhost -p 6001 -su term1 -sp term1 -l CPL --fee-acknowledged Y --patron 23529000035676 --item 39999000007756 -m checkout`
        The final field of the SIP request will now be '|BOY', success
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 08858b161c597b329d21815f8ae0d787e71d7e2e
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Sep 7 19:02:08 2023 +0000

    Bug 34736: Don't trigger quantity change on loading order
    
    We have a change event to automatically check or uncheck the first items on a list when
    the value is changed directly.
    
    The code is calling this when setting the quantity when loading an order, but this is causing a problem
    in that we are setting the quantity to load.switch orders and triggering the checkboxes wrongly
    
    To test:
     1 - Create a new basket, create items on placing the order
     2 - Create an order line with 4 items
     3 - Create another order line with 2 items
     4 - Close the basket
     5 - Receive shipment and create an invoice
     6 - Select both orders via the checkboxes got multi-receive
     7 - Click "receive selected"
     8 - Edit first order line, quantity received = 1 (1 out of 4)
     9 - Verify that one item is also selected in the table
    10 - Switch to "next order"
    11 - Quantity received is 0, no items checked in the second order
    12 - Switch to "Previous order"
    13 - ERROR: Item checkbox was lost, quantity received still correct
    14 - Switch to next order
    15 - ERROR: item is now checked, quantity received 0
    16 - Note: We see a mix up of the information entered, one has the checkbox now, the other the quantity.
    17 - Save changes
    18 - Click confirm
    19 - Continue (complaint about the second order left unchanged)
    20 - You are back on the summary:
         * pending order: quantity changed from 4 to 3 - correct
         * received order: quantity shows 1 - correct
    21 - Click on receive for your updated order line (with 3 items)
         * 4 items show to be received (should be 3)
    22 - Apply patch
    23 - Cancel receipt of items
    24 - Repeat 1-12
    25 - Items are loaded correctly
    26 - Try with various checkboxes and switch back and forth
    27 - Confirm that manually adjusting quantity received checks the first n boxes
    28 - Confirm setting quantity to 0 unchecks the boxes
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1164402b49bfb775a7aafab55b629ae443bddf1c
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Aug 14 21:11:52 2023 +0000

    Bug 34532: Silence warns in Patroncard.pm
    
    To test:
    
    1. Go to patron card creator and make a patron card batch, card layout, and card template.
    2. In the card layout leave some values blank for Lower left X coordinate and Lower left Y coordinate.
    3. Now go create a card batch while tailing the plack-intranet-error log/
    4. Notice in the logs:
    
    [2023/08/14 20:50:54] [WARN] Argument "" isn't numeric in multiplication (*) at /kohadevbox/koha/C4/Patroncards/Patroncard.pm line 109.
    [2023/08/14 20:50:54] [WARN] Argument "" isn't numeric in multiplication (*) at /kohadevbox/koha/C4/Patroncards/Patroncard.pm line 248.
    [2023/08/14 20:50:54] [WARN] Argument "" isn't numeric in multiplication (*) at /kohadevbox/koha/C4/Patroncards/Patroncard.pm line 249.
    
    5. Apply patch, restart_all
    6. Try again and notice the WARNS should be gone from the logs now.
    7. Make sure you can still create patron cards and the PDF's the generate look right.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d48b62382e6b68bdb28ffd57e2b7410624c72c2d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Jul 26 06:56:03 2023 +0000

    Bug 34414: Remove DBD::Mock
    
    We never actually used it. See BZ report.
    
    Test plan:
    Run git grep DBD::Mock. Only finding old release notes.
    Run git grep mock_add_resultset. Nothing.
    Bonus: Find a few other DBD::Mock properties/attributes.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dc4bf60031149d9efbd4d1f73996828a3304d58c
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jul 21 09:44:18 2023 +0000

    Bug 33940: (QA follow-up) Remove obsolete length of 20
    
    Currently 32. Could be 43 tomorrow :)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3d2267b643ec792ea0cb1abb2eed0ddc874ee7de
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 21 10:46:41 2023 +0200

    Bug 33940: Consider NULL as valid
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b987fd5afd40bee7ba229ddd28dee272e233702e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 7 15:37:55 2023 +0200

    Bug 33940: Move C4::Members cardnumber sub to Koha::Policy::Patrons::Cardnumber
    
    Test plan:
    The idea here is to confirm this patch does not introduce regression.
    For that you will play with the CardnumberLength syspref and create a
    new user, modify an existing one, and check that the UI does not let you
    modify an invalid cardnumber.
    The onboarding process and the patron import tool will also have to be tested
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Bug 33940: Fix selfreg
    
    please squash with first patch
    
    Bug 33940: Fix messages we sent to templates
    
    please squash with the first patch
    
    Bug 33940: Fix what we send to memberentry
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b8c4d8bb875bd51ae51ea2c4c8342be2cb228c67
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Sep 12 16:21:40 2023 -0300

    Bug 17499: (QA follow-up) Fix permissions
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c503bad72d634dd6fa5bc0c8dc1091373b3b1e38
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Sep 7 13:47:21 2023 +0000

    Bug 34721: (QA follow-up) update the other labels
    
    Showing only available items -> Showing only records with available items
    Show all items -> Show all records
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 151d947eaa5ab9a7f90e911d9ba149e7943ee235
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Sep 5 21:34:36 2023 +0000

    Bug 34721: Change facet availability text in staff interface and OPAC
    
    To test:
    1. Apply patch
    2. Do a catalog search in the staff interface. Make sure the 'Availability' button reads 'Limit to records with available items'.
    3. Do a catalog search in the OPAC. Make sure the 'Availability' button reads 'Limit to records with available items'.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9aa126090781731b895940924b3bb0a9e012874b
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Fri Feb 10 10:48:19 2023 +0000

    Bug 17499: Replace Koha::MessageAttribute(s) with Koha::Patron::MessagePreference::Attribute(s)
    
    To test:
    1. prove t/db_dependent/Illrequests.t
    2. grep -rn 'Koha::MessageAttribute', observe no results in Koha code
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 80af5847eac08c31b1a54d5da9188de0ba0c5cf6
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Thu Mar 18 03:16:11 2021 +0000

    Bug 17499: (follow-up) Add $patron->messaging_preferences accessor
    
    To test:
    1. prove t/db_dependent/Koha/Patron.t
    
    Sponsored-by: The National Library of Finland
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d7184e10c404101b5caa7ee708eaeef5e8557785
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Thu Mar 18 02:13:50 2021 +0000

    Bug 17499: (follow-up) Rename to Koha::Patron::MessagePreference
    
    Koha::Patron::Message refers to "messages" table that is used for circulation
    messages. MessagePreference now refers to a messaging preference that is used
    for enqueued notifications.
    
    To test:
    1. prove t/db_dependent/Koha/Patron/MessagePreference/Attributes.t
    2. prove t/db_dependent/Koha/Patron/MessagePreference/Transport/Preferences.t
    3. prove t/db_dependent/Koha/Patron/MessagePreference/Transport/Types.t
    4. prove t/db_dependent/Koha/Patron/MessagePreference/Transports.t
    5. prove t/db_dependent/Koha/Patron/MessagePreferences.t
    
    Sponsored-by: The National Library of Finland
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f139509818fa5a317ebc4e63791698680d460b3f
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Wed Nov 18 02:15:23 2020 +0000

    Bug 17499: (follow-up) Contact information vs. mtt validation
    
    This patch adds a subroutine that handles message transport type validation by
    first checking related patron contact information.
    
    As an example, if there is no email address, we shouldn't let email be selected
    as a messaging transport type.
    
    The reason to isolate logic into a separate subroutine is that C4/Reserves.pm
    _koha_notify_reserve() also uses the same logic and we should not duplicate it.
    C4::Reserves::_koha_notify_reserve() will be adjusted to use this new sub in
    Bug 18595.
    
    To test:
    1. prove t/db_dependent/Koha/Patron/Message/Preferences.t
    
    Sponsored-by: The National Library of Finland
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ea9dbf6a81e3f9b36b4b9025fd35c806c78eb915
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Wed Nov 18 04:10:48 2020 +0000

    Bug 17499: (follow-up) Validate phone and itiva transport types
    
    Message transport types 'phone' and 'itiva' were not validated unlike
    'email' and 'sms'. This patch adds equivalent checks to the missing mtts.
    
    To test:
    1. prove t/db_dependent/Koha/Patron/Message/Preferences.t
    
    Sponsored-by: The National Library of Finland
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 124f3dadb85eb9f8c81d99732a0fa092fe3ddccd
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Thu Nov 5 18:26:42 2020 +0000

    Bug 17499: (follow-up) Fix warning
    
    Fix warning
    
    DBIx::Class::Storage::DBI::select_single(): Query returned more than one row.
    SQL that returns multiple rows is DEPRECATED for ->find and ->single.
    
    Sponsored-by: The National Library of Finland
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a0e5f4e0d97eec2c13fb2825869fdacc259b01f2
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Wed Nov 4 15:19:22 2020 +0000

    Bug 17499: (follow-up) More explicit exceptions
    
    Adds and throws more detailed exceptions.
    
    This is useful for APIs and generating translatable errors in GUI.
    
    In short, replaces Koha::Exceptions::BadParameter with:
    
    Koha::Exceptions::Patron::NotFound
    Koha::Exceptions::Patron::Category
    Koha::Exceptions::Patron::Category::NotFound
    Koha::Exceptions::Patron::Message::Preference
    Koha::Exceptions::Patron::Message::Preference::AttributeNotFound
    Koha::Exceptions::Patron::Message::Preference::DaysInAdvanceOutOfRange
    Koha::Exceptions::Patron::Message::Preference::DaysInAdvanceNotAvailable
    Koha::Exceptions::Patron::Message::Preference::DigestNotAvailable
    Koha::Exceptions::Patron::Message::Preference::DigestRequired
    Koha::Exceptions::Patron::Message::Preference::EmailAddressRequired
    Koha::Exceptions::Patron::Message::Preference::NoTransportType
    Koha::Exceptions::Patron::Message::Preference::SMSNumberRequired
    
    To test:
    1. prove t/db_dependent/Koha/Patron/Message/Preferences.t
    
    Sponsored-by: The National Library of Finland
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 33aa562f793108ad752ee044f61580e17001b949
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jul 8 13:32:17 2020 +0100

    Bug 17499: (QA follow-up) Fix POD errors
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1865176b24c718ee1319db6e2bad8d6ca3e9b959
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jul 8 13:20:35 2020 +0100

    Bug 17499: (QA follow-up) Fix Licence Statements
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 325e9980488c8877279aff9b786bec8f32e2b4ee
Author: Emmi Takkinen <emmi.takkinen@outlook.com>
Date:   Wed Feb 26 12:04:08 2020 +0200

    Bug 17499: Replace test subroutines with build_object
    
    This patch replaces subroutines used to build test
    objects with call to $builder->build_object.
    
    To test prove that tests are still running with:
    prove t/db_dependent/Koha/Patron/Message/*
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5ed051b11485e3dccf80317b0aa80b08c1f58b7a
Author: Emmi Takkinen <emmi.takkinen@outlook.com>
Date:   Thu Feb 20 12:45:27 2020 +0200

    Bug 17499: Define koha_object(s)_class where needed
    
    This patch adds koha_object(s)_class for needed modules
    to fix issues with tests.
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b5b88b053d1ccfa11fce4a0002e01cf13ab64f8e
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Fri Oct 21 17:26:24 2016 +0300

    Bug 17499: Add Koha-objects for messaging preferences
    
    This patch adds Koha-objects for messaging preferences.
    
    Adds simple validation for messaging preferences.
    
    The validation includes
    - throw exception if both borrowernumber or categorycode is given for a new pref
    - throw exception if patron for the given borrowernumber is not found
    - throw exception if category for the given categorycode is not found
    - throw exception if days in advance cannot be configured but is given
    - throw exception if days in advance configuration is invalid (value between 0-30)
    - throw exception if digest is not available but attempted to set on
    - throw exception if digest must be enabled but attempted to set off
    - throw exception on duplicate messaging preference
    
    Adds a method for getting available messaging options.
    
    Adds a method for setting default messaging preferenes.
      $patron->set_default_messaging_preferences (where $patron is a Koha::Patron)
      ...or...
      Koha::Patron::Message::Preference->new_from_default({
        borrowernumber => 123,
        categorycode => "ABC",
        message_attribute_id => 1,
      });
    
    Since messaging preference is a feature that has multiple related database tables,
    usage via Koha-objects is sometimes frustrating. This patch adds easy access to
    message transport types via
      $preference->message_transport_types                              (for getting)
      $preference->set({ message_transport_types => ['email', 'sms'] }) (for setting)
      (also supports other calling conventions, see documentation for more)
    
    Adds optional parameter message_name for Koha::Patron::Message::Preferences->find
    and ->search. Simplifies the Koha-object usage by allowing developer to skip joins
    and / or querying the message name via attribute_id from message_attributes table.
    
    Includes test coverage for basic usage.
    
    To test:
    1. prove t/db_dependent/Koha/Patron/Message/*
    
    Following Bug 17499, check also Bug 18595 that replaces C4::Members::Messaging
    with these new Koha-objects.
    
    Signed-off-by: Dominic Pichette <dominic@inlibro.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9da5895d79163a518825fbb102526aef119a93fe
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Aug 9 01:06:05 2023 +0000

    Bug 34502: Remove useless SEARCH_RESULT.localimage
    
    This patch removes a useless Template Toolkit tag.
    
    To test:
    0. Apply the patch
    1. Go to
    http://localhost:8081/cgi-bin/koha/admin/preferences.pl?op=search&searchfield=LocalCoverImages
    2. Change to "Show"
    3. Go to http://localhost:8081/cgi-bin/koha/catalogue/detail.pl?biblionumber=29
    4. Upload an image
    5. Go to http://localhost:8081/cgi-bin/koha/catalogue/search.pl?q=test
    6. Note that the local cover image appears even without the TT tag
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 68b97cc7e4c60e6b84b9a7554e29c1c32453f685
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Tue Jan 31 09:20:15 2023 +0100

    Bug 32765: Retry transfer after cancelling hold
    
    When trying to manually transfer an item that is on hold, we have the
    choice to cancel the hold and try the transfer again. When choosing
    this option, the hold is correctly cancelled but the transfer is not
    tried again.
    This patch fixes that
    
    Test plan:
    1. Place a hold on a specific item
    2. Try to transfer it manually (Circulation » Transfer)
    3. Choose the option to "Cancel hold and then attempt transfer"
    4. See that the hold was cancelled, but no transfer was made
    5. Apply the patch
    6. Repeat step 1-3
    7. See that the hold was cancelled, and the transfer was made
    
    Signed-off-by: Nicolas Giraud <nicolas.giraud@inlibro.com>
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d1838c23edb475294a260ff5cbd32372f574a903
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Sep 12 09:48:04 2023 -0300

    Bug 27378: Fix permissions
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7f9ff906d9c2800fc5bf3d38db23a77e1f3745ab
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Sep 11 14:50:43 2023 +0100

    Bug 34223: (follow-up) Ensure consistent ordering of statuses
    
    This patch adds an order_by clause to ensure consistent ordering of the
    returned status and status_alias statuses from the database between
    MySQL 8 and other DB engines.
    
    This fixes the failing tests introducd in bug 34223.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit edb9787fc85752c636e0d982871c4b715a2e57d8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 18 07:40:16 2023 +0000

    Bug 34572: Simplify template logic around check-in input form
    
    This patch makes a minor simplifying change to the check-in template
    around how to style the barcode input field in dropbox or fine-exempt
    mode.
    
    To test, apply the patch and go to Circulation.
    
    - If necessary, check some items out to patrons so that you have items
      to check in.
    - Go to the check-in page and click the icon inside the barcode field to
      expand the panel of options.
    - Check the "book drop mode" checkbox. The barcode field should now be
      highlighted yellow.
    - Check in an item. When the page redisplays, the barcode field should
      have the same highlighted style.
    
    - If necessary, enable the finesMode system preference.
    - On the check-in page, in the panel of options, check the "Forgive
      overdue fines" checkbox. Test checking in again, confirming the same
      style consistency in the barcode field.
    
    Signed-off-by: Inkeri <inkeri.hakulinen@helsinki.fi>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 00edf9a541c6d512682f19db7120c808d60a4bf2
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Sep 6 06:28:45 2023 +0000

    Bug 34723: Show thumbnails on opac-imageviewer.pl when imagenumber not provided
    
    This patch fixes a method call in the opac-imageviewer.pl so that thumbnails
    correctly appear.
    
    Test plan:
    0. Apply the patch
    1. Go to
    http://localhost:8081/cgi-bin/koha/admin/preferences.pl?tab=&op=search&searchfield=localcover
    2. Change both *LocalCoverImages sysprefs to "Show"
    3. Go to
    http://localhost:8081/cgi-bin/koha/admin/preferences.pl?tab=&op=search&searchfield=AllowMultipleCovers
    4. Change "AllowMultipleCovers" to "Allow"
    5. Go to
    http://localhost:8081/cgi-bin/koha/catalogue/detail.pl?biblionumber=29
    6. Click "Images (0)" tab
    7. Download or make two JPEG images
    8. Upload the images
    9. Go to http://localhost:8080/cgi-bin/koha/opac-imageviewer.pl?biblionumber=29
    10. See one large image in the centre and two smaller thumbnails on the right side
    
    PA amended patch: Added missing test plan step
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5de9926ab1e3159f863b62d6a169ea5b98883149
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Sep 12 09:37:31 2023 -0300

    Bug 27378: DBRev 23.06.00.018
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 21ff3d167584294a08fd5cb6415dee72a8097711
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Aug 4 12:47:04 2023 +0000

    Bug 27378: (QA follow-up) Tidy admin/preferences.pl
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 49bfb9ff39b8b0a652a2bfdaa93ffb2c5d3b3a8c
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Mon Jan 11 14:50:17 2021 +0000

    Bug 27378: Introduce cookie consent to OPAC and staff client
    
    To avoid confusion around commit messages and the content of this enhancement, this first commit is a squashed commit of all the original code submited to this bug. Following a few years of inactivity, it has been rebased and re-submitted with some fixes and concept changes contained in the more recent commits.
    
    Signed-ff-by: Barry Cannon <bc@interleaf.ie>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Bug 27378: (follow-up) Add missing filters
    
    (cherry picked from commit 6b8565b949b62269f6d850e6d412458d0dbcfb37)
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Bug 27378: Fix accessibility issues
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Bug 27378: Update to new atomicupdate structure
    
    This patch consolidates the previous 4 database update files into one atomicupdate file in line with the new structure
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Bug 27378: Change ConsentJS to CookieConsentedJS
    
    This patch updates the name of the ConsentJS syspref to CookieConsentedJS and amends the description to be more clear what the syspref is for
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Bug 27378: Stop the codemirror editor and delete confirmation from duplicating
    
    Previously, if the "Add new code button" was clicked in the CookieConsentedJS editor, the original entry would have duplicated CodeMirror editors.
    This was exponential, i.e adding two new lines would result in three codemirror editors appearing on the first entry, two on the second and so on.
    The click event was not being applied properly and was being applied to every element with the .expand-textarea class, rather than specifically the new elements being created. The addExpandHandler function now loops through each element individually and decides whether to apply the click event handler.
    
    Similarly, the delete confirmation was dupliacting for the same reason. This has also been resolved.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Bug 27378: Remove two sysprefs and replace with html customisations
    
    Currently there are two sysprefs - CookieConsentBar and CookieConsentPopup. These allow the user to select what text they would like to see in the consent bar and modal. These have been removed and replaced with HTML customisations to allow more flexible customisations and different languages.
    
    Sponsored by: PTFS-Europe
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Bug 27378: (QA follow-up) Small fixes and tidy-ups
    
    This patch does the following:
    - Realphabetizes the lines in sysprefs.sql
    - Fixes a formatting error in patrons.pref
    - Adjusts the position of the cookie consent bar if the language selector is visible
    - Fixes translatability on the syspref modal
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Bug 27378: (QA follow-up) Allow staff to view their cookie consents
    
    This patch allows staff to view their cookie consents through a link in the dropdown menu in the navbar. Previously staff had no way of accessing their cookie consents
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Bug 27378: (QA follow-up) Add cancel button to cookie modal
    
    This patch adds a cancel button to the modal for reviewing cookie consents. Previously there was no way to exit without selecting one of the cookie options
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Bug 27378: (QA follow-up) Add filtering for OPAC only and staff only cookies
    
    This patch fixes an issue where cookies selected as OPAC only would still show in the staff client and vise versa. The cookies are now filtered and only the correct cookies will be used in the OPAC and staff client
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    
    Bug 27378: (QA follow-up) Fix tests and character encoding
    
    This patch fixes an encoding issue when using diacritics. It also fixes a failing test, corrects the format of the "Cancel" links in the modal and perltidy has been used on all relevant files
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 272a080cb35fe83e9f11ab8401effb7223f5d94c
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed Jun 21 10:59:47 2023 -0400

    Bug 34079: The phrase "Displaying [all|approved|pending|rejected] terms" was separated
    
    This patch reunites the words for the sentence "Displaying
    [all|approved|pending|rejected] terms" in order to facilitate
    translating in languages that have a different syntax.
    
    To test:
    1. Install a new language
    
       ./misc/translator/translate install xx-XX
    
    2. Check the xx-XX-staff-prog.po file for the sentence
       --> All the words are individual strings
    
    3. Apply patch
    
    4. Update the po files
    
       ./misc/translator/translate update xx-XX
    
    5. Check the xx-XX-staff-prog.po file again
       --> The sentence is reunited for each status (Displaying all terms,
           Displaying approved terms, etc.)
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d23be933f958bf4b3343c41802530088afc0b1d
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Wed Jun 21 12:27:12 2023 -0400

    Bug 34081: Contextualization of "Approved" (one term) vs "Approved" (more than one term), and other tag statuses
    
    To test:
    
    1. Apply patch
    
    2. Install language
    
       ./misc/translator/translate install xx-XX
    
    3. Update po files
    
       ./misc/translator/translate update xx-XX
    
    4. View the xx-XX-messages.po file
    
       --> Strings for tag statuses for one tag should be separated from
           strings for statuses for multiple tags, with context Tags
           (single) or Tags (multiple)
    
    5. Change the strings so you know which is which
    
       For example, in French, the approved status for a single tag would
       be "Approuvé" and for multiple tags would be "Approuvés" (with the
       plural s at the end)
    
    6. Apply translations
    
       ./misc/translator/translate install xx-XX
    
    7. Add tags through the OPAC
       7.1. In another tab, go to the OPAC
       7.2. Log in
       7.3. Search for a record
       7.4. From the detailed record, click Add tags
       7.5. Enter a tag and click Add
    
    8. In the staff interface, go to Tools > Tags
    
    9. Approve/Reject the tag
       --> The status in the table and on the button should be the singular
           status, the status in the summary on the right should be plural
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9254af7b41349d563d526a0eeac946464dfef7b4
Author: Victor Grousset <victor@tuxayo.net>
Date:   Mon Sep 4 01:06:23 2023 +0200

    Bug 34257: (QA follow-up): tidy up code
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 13d5ff94248df32623853ed2d87258f81edc0a8f
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Aug 18 14:45:14 2023 +0000

    Bug 34257: Limit item types by branch in batchMod.pl
    
    To test:
    1. Go to Item types administration.
    2. Set some items types to be limited to a branch you are not logged in as.
    3. Find some items from the branch you are logged in at and go to Batch item modification.
    4. Add the barcodes and attempt to edit the item type to the one you limited in step 2.
    5. You can change these item types to ones that your branch should not be able to.
    6. Apply patch
    7. Try steps 4 -5 again but this time you should not see item types in the dropdown that are limited to other branches.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 365121cae2d4df41333d4e2144acfe8c8a82b9a9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jul 26 12:25:11 2023 +0000

    Bug 34402: Sorting holds on patron account includes articles
    
    This patch adds some configuration to the table of holds shown on the
    checkout and patron detail pages so that sorting by title correctly
    excludes articles.
    
    To test, apply the patch and clear your browser cache.
    
    - Check out to a patron who has multiple holds on titles which include
      leading articles like "a" "an" and "the."
    - Click the holds tab and click the "title" column to sort by title.
      - The titles should be correctly sorted alphabetically while ignoring
        articles.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4fb49407dd16ceb0b4215d9cb7d6dc0c4e5dd669
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Sep 8 10:56:24 2023 +0000

    Bug 34624: (follow-up) Add "for" attribute to serials-search.inc label
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 363189ddddbbfb2db98bb1b23b86d185f06b07af
Author: Victor Grousset <victor@tuxayo.net>
Date:   Thu Sep 7 05:34:59 2023 +0200

    Bug 34624: (follow-up) fix broken <span>
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1c3f2ef8e7cd1e40d7455c5170d64cd6fc1def65
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 25 17:43:00 2023 +0000

    Bug 34624: Add "for" attribute to label in header search forms which lack it
    
    This patch adds a "for" label to header search forms labels which lack
    it.
    
    To test, apply the patch and test the affected pages to confirm that
    clicking the label corresponding to the active search form can be
    clicked to move cursor focus to that input field.
    
    As you activate each search form, the cursor focus will automatically be
    moved to the input. Click outside of the field to remove the focus, and
    then click the label to test that it is correctly tied to the field.
    
    - Staff interface home page:
      - Checkout, Check in, Renew, Search patrons, and Search catalog.
    - Acquisitions: Vendor search and orders search
    - Acquisitions -> Vendor search -> Vendor -> Contracts: Contract search
    - Acquisitions -> Vendor search -> Vendor -> Basket -> Add to basket ->
      From a suggestion: Search suggestions
    - Authorities: Main heading ($a only), Main heading, All headings, and
      Entire record.
    - Administration -> Budgets: Search funds
    - Administration -> Cities & towns: City search
    - Administration -> Currencies: Currencies search
    - Administration -> Desks: Search desks
      * With UseCirculationDesks enabled
    - Administration -> Patron categories: Search patron categories
    - Administration -> System preferences: Search system preferences
    - Administration -> Z39.50 servers -> Z39.50 server search
    - Cataloging: Cataloging search
    - E-resource management: Search agreements, Search licenses, Search
      packages, and Search titles
      * With ERMModule enabled
    - Patrons -> Search patrons
    - Serials: Search subscriptions
    - Tools -> Notices & slips: Search notices
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f965db69f1b1aaa0afaf7a3a48723f7e87c5b32c
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Jun 30 02:50:17 2023 +0000

    Bug 34163: Handle both anonymous userenv when generating CSRF tokens
    
    An anonymous session might have a userenv which is undef or which is
    a hashref of undef/empty values.
    
    This patch generates the "anonymous" prefix for undef/empty 'id'
    values, which prevents CSRF errors when logging in via OAuth2/OIDC
    following a Koha logout.
    
    Test plan:
    Before applying patch:
    1. Go to https://wiki.koha-community.org/wiki/Testing_SSO
    2. Set up OpenID Connect realm, user, client, and Koha
    integration to Keycloak for koha-testing-docker as noted in the wiki
    
    3. Go to http://localhost:8080/cgi-bin/koha/opac-main.pl?logout.x=1
    4. Click on OIDC "Log in with XXXX" button and log into IDP
    5. Note that you're not logged in and you instead see an error message like:
    "There was an error authenticating to external identity provider wrong_csrf_token"
    
    6. Apply patch
    7. Go to "Sessions" section of the test realm in Keycloak
    e.g. http://sso:8082/auth/admin/master/console/#/test/sessions
    8. Click "Action" on the far right side of the screen
    9. Choose "Sign out all active sessions"
    
    After applying patch:
    10. koha-plack --restart kohadev
    11. Go to http://localhost:8080/cgi-bin/koha/opac-main.pl?logout.x=1
    12. Click on OIDC "Log in with XXXX" button and log into IDP
    13. Note that you're logged in
    
    14. prove t/Token.t
    15. Note all tests pass
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 60d6d79b2232893ec84488bf17aa32adde8c01be
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Sep 11 12:47:48 2023 +0100

    Bug 34731: (follow-up) Fix conditional variable declaration
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c030a5e5408956e16675c03c9412e1f5be45e013
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Sep 7 11:40:59 2023 -0400

    Bug 34731: Use Koha::Notice::Message in EnqueueLetter
    
    Test Plan:
    1) Apply this patch
    2) prove t/db_dependent/Letters.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e0b3a6c2aaee82e2af2d817a98db1a749bbd1116
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Sep 7 11:15:25 2023 -0400

    Bug 34731: Don't call SendQueuedMessages if message_id is bad
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7eb195b6bdd0bdbf5bfa92a71b051935f78d1db4
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Sep 7 11:04:32 2023 -0400

    Bug 34731: Throw exception if SendQueuedMessages is passed a bad message_id
    
    Test Plan:
    1) Apply this patch
    2) prove t/db_dependent/Letters.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 066c0b3e0de7b2d49f673cea0eddf67b3b5eb171
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Tue Aug 29 19:14:56 2023 +0000

    Bug 34639: Restore order_by
    
    To test:
    1. prove t/db_dependent/Koha/Item.t
    2. Observe success
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 74b205649bbbf59ab512e71dcad8d13046a13670
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Aug 29 12:17:14 2023 +0000

    Bug 34639: Use coderef for releationship
    
    This patch switches from a simple relationship to a custom join as
    illustrated in the DBIx::Class docs
    
    Reference:
    https://metacpan.org/pod/DBIx::Class::Relationship::Base#Custom-join-conditions
    
    This does not include an order_by, so I am not sure if it is sufficient
    
    To test:
    1 - On command line:
        export DBIC_TRACE=1;
    2 - Save simple script:
    use Modern::Perl;
    use Koha::Items;
    
    my $items = Koha::Items->search( {'me.itemnumber'=>27}, {prefetch => 'current_branchtransfers'} );
    my $item = $items->next;
    
    warn $item->_result->current_branchtransfers->count();
    warn $item->get_transfer();
    3 - run it
    4 - Note that the query doesn't include conditions on the transfers
    5 - Apply patch
    6 - Repeat
    7 - Note that query is correct
    
    Test in staf client:
    1. Add an item to library A
    2. Go to Circulation -> Transfer
    3. Transfer the item from library A to another library B
    4. Set your currently logged in library to library B
    5. Check-in the item
    6. Observe message "Item received from A"
    7. View the bibliographic record of the item (catalogue/detail.pl)
    8. Observe item in "In transit from A to B since xx/xx/xxxx Available"
    9. Apply patch
    10. Restart all
    11. Reload details - item no longer in transit
    
    Signed-off-by: Lari Taskula <lari.taskula@hypernova.fi>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1395bc00eb6bd9ec3d3f36d970972dc960ae6de8
Author: Lari Taskula <lari.taskula@hypernova.fi>
Date:   Tue Aug 29 09:34:04 2023 +0000

    Bug 34639: Add tests
    
    To reproduce:
    
    1. Add an item to library A
    2. Go to Circulation -> Transfer
    3. Transfer the item from library A to another library B
    4. Set your currently logged in library to library B
    5. Check-in the item
    6. Observe message "Item received from A"
    7. View the bibliographic record of the item (catalogue/detail.pl)
    8. Observe item in "In transit from A to B since xx/xx/xxxx Available"
    
    To test:
    1. prove t/db_dependent/Koha/Item.t
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7c28ce8ddcc71b53bfb8b232b6cffb0beb508e35
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 25 17:38:56 2023 +0000

    Bug 34403: Inconsistencies in Currencies and exchange rates page titles, breadcrumbs, and header
    
    This patch updates the currencies administration page in order to make
    the page title, breadcrumb navigation, and page headings consistent with
    each other.
    
    To test, apply the patch and go to Administration -> Currencies and
    exchange rates. Test each variation of the page to confirm that the
    title, breadcrumbs, and headings are consistent.
    
    - Currencies main page
    - New currency
    - Edit currency
    - Delete currency confirmation
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 526904b0a073d41e7dd17c2afddd48109a2f37c9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Sep 8 10:42:24 2023 +0000

    Bug 34412: (QA follow-up) Terminology updates
    
    - Use "system preference" instead of just "preference"
    - Use "system_preference" as placeholder in translatable strings
    
    This patch also updates a few places where the placeholder i18n syntax
    can be used for consistency.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 767b9a512621691db81cb6951d18fddb4ce0f908
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Sep 6 10:53:55 2023 +0000

    Bug 34412: (follow-up) Clarify page heading, remove unused markup
    
    This patch updates the heading for the "modify" view so that it includes
    the name of the preference being modified.
    
    The patch also removes markup related to the "add_validate"
    state--a view confirming that a preference has been added--because that
    view doesn't exist.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c46dd36389f235db6dac4314a4aae716109f8a72
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Sep 5 17:58:58 2023 +0000

    Bug 34412: Inconsistencies in System preferences page titles, breadcrumbs, and header
    
    This patch makes changes to the markup of various areas of the local use
    system preferences template in order to make it more consistent with
    other pages in Koha.
    
    To test, apply the patch and go to Administration -> System
    preferences -> Local use. View each variation of the page to confirm
    that breadcrumb navigation, page title, and page headings are consistent
    with each other.
    
    - On the main page confirm that the heading is "Local use system
      preferences"
      - New preference:
        - The form on this page has been updated to make the markup
          structure more consistent with other pages, with the heading
          outside the white box of the form.
        - The two portions of the form have been combined into one so that
          the layout of the form is more consistent with similar forms.
     - Edit preference
     - Delete:
       - The deletion confirmation page has been reformatted to use an
         "alert" style dialog with styled confirmation buttons.
       - The "Data deleted" view has been reformatted to use a "message"
         style dialog.
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d4e53a1362b4a4f236a2f1056d7f4347e15ef631
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Aug 24 06:25:52 2023 +0000

    Bug 34085: (follow-up) remove typo in Javascript
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 059e598f388bd99d998e69e30515b419518e31cb
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jun 21 17:24:20 2023 +0000

    Bug 34085: Remove the use of event attributes from basket groups template
    
    This patch removes the use of event attributes (onclick, onsubmit) from
    the basket groups template. These events are defined now along with the
    other in-page JS.
    
    This change allows us to move the scripts to the bottom of the page.
    
    Unrelated changes: There was no confirmation tied to the process of
    deleting a basket group. I've added one. And there were several "MSG_"
    variables defined which were unused and have been removed.
    
    To test you should have at least one vendor with at least one basket
    group.
    
    - Apply the patch and go to Acquisitions.
    - Locate a vendor with an associated basket group.
    - Edit a basketgroup
      - Confirm that editing works correctly (leaving "Close basket group"
        unchecked")
      - Confirm that editing works correctly with "Close basket group"
        checked.
    - In the list of closed basket groups, confirm that all the controls
      work correctly.
    - Create an empty basket group and confirm that clicking the associated
      "Delete" button in the list of basket groups triggers a confirmation,
      "Are you sure you want to delete this basket group?" Test that both
      confirming and cancelling work correctly.
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c23f36b81218032ed2aa3f2f476fd880e2d1b704
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jul 20 11:24:23 2023 +0000

    Bug 34310: Input prompt in datatables column search boxes untranslatable
    
    This patch corrects the internationalization function wrapped around the
    "% search" string in datatables.js. It should be the double-underscore
    function instead of the single-underscore.
    
    To test, apply the patch and test that the placeholder string is
    translatable. In this example I'm testing fr-FR:
    
    - Update a translation:
    
      > cd misc/translator
      > perl translate update fr-FR
    
    - Open the corresponding .po file for the strings pulled from
      JavaScript  e.g.  misc/translator/po/fr-FR-messages-js.po
      - Locate strings pulled from prog/js/datatables.js for
        translation, e.g.:
    
        \#: koha-tmpl/intranet-tmpl/prog/js/datatables.js:894
        \#, javascript-format
        msgid "%s search"
        msgstr "%s recherche"
    
      - Install the updated translation:
    
        > perl translate install fr-FR
    
    In the staff interface, test a page that has column header filters, e.g.
    patron search. Confirm that the table of search results shows the
    translated string in the column header placeholders.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8f7d565df51ac65d7b20b489a416355442fb141b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Nov 15 09:35:04 2021 +0000

    Bug 28995: Update aliases
    
    Add an alias for added-before, added-after (Using an alias makes it
    backwards compatible) and update the POD.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0a5f4350bdd85f1f8378970c1e7c8fb14f47f1a7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Nov 9 10:33:01 2021 +0000

    Bug 28995: Add `--added_after` filter to writeoff_debts script
    
    This adds, as requested, the `added_after` filter option to
    writeoff_debts.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fcf0ba17b55be93c4b63b1683ca2960e5edda0cd
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Sep 5 14:38:38 2023 +0000

    Bug 34666: Tidy
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 72bfb416d3725bd11dc4595ac429d4c510d6d3ee
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Aug 30 18:56:59 2023 +0000

    Bug 34666: Combine queries in _Findgroupreserve
    
    The queries here are the same except for 2 differences:
    1 - They check if the hold was on a particular item
    2 - The latter confirms that the reserve item group matches the item's item group
    
    For 1, it doesn't matter - only 1 item can be mapped ot a reserve, itemnumber is the primary key
    for hold_fill_targets - so we are either matching it in the first query or the second, either way we get the same
    reserve - the returns are the same so we don't care which query it came from
    
    For 2, this has already been checked when the queue was built. We don't need to verify the match because
    it wouldn't be in the targets if they didn't match
    
    To test:
    1 - Apply second unit test patch
    2 - prove t/db_dependent/Reserves.t
    3 - It should pass
    4 - Apply this patch
    5 - prove t/db_dependent/Reserves.t
    6 - It continues to pass
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6f7ccdf6c3d4916ac19b7ace58068ff862a5ee24
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Aug 30 18:54:15 2023 +0000

    Bug 34666: Add a second unit test for item level
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fe3872f62885b4b0ee483e446c0b2b85e74970f7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Aug 30 18:38:56 2023 +0000

    Bug 34666: Allow item_group to be null and still match
    
    The current logic requires that the grop ids match, but this eliminates null matches
    from the group.
    
    The fallout essentially is that the queue won't be checked to fill holds in cases of title level matches
    where holds don't have an item group id. The queue checks the transport cost matrix while the check reserves
    check does not, so this may have an impact on holds costs and delivery times
    
    To test:
    0 - Apply unit test patch
    1 - prove -v t/db_dependent/Reserves.t
    2 - It fails
    3 - Apply this patch
    4 - prove -v t/db_dependent/Reserves.t
    5 - It passes!
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 99d7e55be67332fea1ced61ddf8105b4261923d8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Aug 30 18:29:27 2023 +0000

    Bug 34666: Unit test
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6f5915cf01b711d3a20af2634c9eb2a07d1bd289
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Sep 8 06:16:44 2023 +0000

    Bug 34339: (QA follow-up) Replace new by search in Licenses
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dd8b3c3da77562569b397c208d112107c4490bf2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 21 16:35:05 2023 +0200

    Bug 34339: Avoid relying on $c->validation - ERM
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5788f94868bde660179a183382aad42e9e3b40be
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 8 13:27:13 2023 -0300

    Bug 34339: (bug 33556 follow-up) Easy ERM-related changes
    
    I left the (easy) ERM cases out because it throws this when running the
    QA script:
    
    Processing files before patches
    |========================>| 51 / 51 (100.00%)
    
    An error occurred : Inconsistent hierarchy during C3 merge of class 'Koha::REST::V1::ERM::EHoldings::Titles::Local':
            current merge results [
                    Koha::REST::V1::ERM::EHoldings::Titles::Local,
            ]
            merging failed on 'Mojolicious::Controller' at /kohadevbox/qa-test-tools/koha-qa.pl line 112.
    
    and didn't want this to pollute the rest of the changes.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d1d9f4698eb2f959964d83d22b2079f07286a7c4
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jun 16 14:29:42 2023 +0000

    Bug 34038: Fix incorrect use of __() in .tt and .inc files
    
    This patch corrects instances of the double-underscore function being
    used in .tt and .inc files where the single-underscore function should
    be used instead.
    
    To test, apply the patch and update a translation, e.g. fr-FR:
    
      > cd misc/translator
      > perl translate update fr-FR
    
    - Open the corresponding .po file for JavaScript strings, in this case
      misc/translator/po/fr-FR-staff-prog.po
    - Confirm that the strings are now in the .po file for translation. You
      should find these lines:
    
    - koha-tmpl/intranet-tmpl/prog/en/includes/js-biblio-format.inc: "No
      title."
    - koha-tmpl/intranet-tmpl/prog/en/modules/catalogue/detail.tt:
      "Check in and add to bundle"
      "Ignore holds and add to bundle"
    - koha-tmpl/intranet-tmpl/prog/en/modules/course_reserves/add_items-step1.tt:
      "Please enter only a barcode, or only a biblionumber."
    - koha-tmpl/intranet-tmpl/prog/en/modules/course_reserves/batch_add_items.tt:
      "Please enter only barcodes, or only biblionumbers."
    - koha-tmpl/intranet-tmpl/prog/en/modules/tools/additional-contents.tt:
      "Please specify a content for 'Default'"
    
    - Check fr-FR-opac-bootstrap.po for these lines:
    
    - koha-tmpl/opac-tmpl/bootstrap/en/includes/calendar.inc:
      "Please enter a valid date (should match %s)."
    - koha-tmpl/opac-tmpl/bootstrap/en/modules/opac-basket.tt:
      "No item was selected"
    - koha-tmpl/opac-tmpl/bootstrap/en/modules/opac-reserve.tt,
      koha-tmpl/opac-tmpl/bootstrap/en/modules/opac-results.tt,
      koha-tmpl/opac-tmpl/bootstrap/en/modules/opac-shelves.tt:
      "No item was selected"
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 93dd749ecaf229a8860ba078668190e5bbfd61c6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Sep 6 16:47:09 2023 -0300

    Bug 34223: (QA follow-up) Fix file permissions
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 95b43b6c61550ff565531c6895ab2d9c36c38111
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Sep 6 15:05:00 2023 -0300

    Bug 33480: Tidy tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 23744e7ef1851bb1379438db51994e4aa5501233
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Sep 6 15:34:07 2023 +0000

    Bug 33480: (QA follow-up) Add cypress tests:
    
    Add tests for vendor aliases
    Test plan:
    perl /kohadevbox/misc4dev/run_tests.pl --run-cypress-tests-only
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 26141598a8e58d156f257c77650abe749b81320c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 11 11:09:16 2023 +0200

    Bug 33480: Remove vendors when not needed
    
    Several components retrieve the vendor list from store but it's not
    needed in those components.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e90ccb7ff33d68263a62a4f0f2f5234c79481d5f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 11 11:05:07 2023 +0200

    Bug 33480: Improve vendor aliases display in dropdown list
    
    On bug 33103 we are adding the ability to filter vendors by aliases.
    To make it possible in the ERM module we are adding the alias list in
    the dropdown list. However it's not nicely displayed, especially if
    there are several entries.
    
    This patch suggests to display the aliases in a different line, and not
    for the selected option.
    
    To acchieve that we create a new Vue component FormSelectVendors.
    
    Test plan:
    Create several vendors, and add some aliases to them (keep one vendor
    without alias)
    Go to the ERM module go to the following page, search for vendors by
    aliases, save the form, and confirm that everything is nice and works
    correctly:
    * Add/edit an agreement
    * Add/edit a license
    * Add/edit a local package
    * Add a new package to a title (edit a title)
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b00806774d3353086fc7c7e3def22f4de570c795
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Jul 27 14:20:11 2023 +0000

    Bug 34223: (follow-up) Mock backend in tests
    
    Add a new request with a backend specific status
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cda13a73284ce049535f782dad794c6593e55ba9
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jul 27 13:20:13 2023 +0100

    Bug 34223: Add unit test for existing_statuses
    
    This patch adds a unit test for the 'existing_statuses' method.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b67a4f8549d03a43ca771acc205779a78708240d
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Jul 27 12:25:20 2023 +0100

    Bug 34223: (follow-up) Restore status_alias handling
    
    By reducing the original call to all distinct 'status' we also removed
    the status_alias combinations. This patch adds an additional distinct
    query to fetch all 'status_alias' and add them to the returned data
    structure.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 87d1b1fdb61ea27effbac654d55923bf6abbe1ab
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jul 10 17:03:34 2023 +0000

    Bug 34223: Work around ONLY_FULL_GROUP_BY in Illbackend
    
    This patch re-works the query in the existing_statuses method to remove
    the FIXME and improve performance.  We pass an SQL literal into the
    query to make it explicit which illrequest_id we're looking for (which
    dampens the SQL warning) even though we really don't mind which request
    is returned here.
    
    Test plan:
    
    The following command will (hopefully) reset your ILL data and create 10k fake ILL requests (run this in DEV KTD only).
    
    1) On an empty k-t-d, run:
    bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev-data.sh)
    2) Pet a cat
    3) Visit /cgi-bin/koha/ill/ill-requests.pl and select a backend on the left side filters
    4) Notice how the status filter takes a while (3-5 secs) to load
    5) Apply patch and koha-plack --restart kohadev
    6) Repeat 3, notice how the status filter now loads fast
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 531fb2c9fd2e8b38ac1c6ef21be047bbb0358d7a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Sep 1 09:10:52 2023 +0200

    Bug 34685: Make updatedatabase.pl propagate the error
    
    updatedatabase.pl already return 0 even if an error occurred during the upgrade.
    
    Test plan:
    Adjust a db rev to make it fail and modify the value of the syspref 'version' in DB to
    make the db rev run.
    
    Run updatedabase.pl and `echo $?`
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 027e1e18620e3c790e85ea49b3870f9ee7785871
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 31 17:05:57 2023 +0200

    Bug 34684: Prevent 220600007.pl to fail if run twice
    
    The error is
      ERROR 1292 (22007): Truncated incorrect DECIMAL value: 'no'
    
    Happens on MariaDB 10.5.22, not MySQL 8
    
    Test plan:
    update systempreferences set value="0" where variable="DisplayClearScreenButton";
    play installer/data/mysql/db_revs/220600007.pl
    select value from systempreferences where variable="DisplayClearScreenButton";
    => "no"
    
    update systempreferences set value="1" where variable="DisplayClearScreenButton";
    play installer/data/mysql/db_revs/220600007.pl
    select value from systempreferences where variable="DisplayClearScreenButton";
    => "issueslip"
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9bb23b7d5e3606dad6e9b3976c3a1fad1cc2087a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Sep 6 14:58:28 2023 -0300

    Bug 30451: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ee9982ed5bbcfd529491f1a5b4c28c33bda07b5a
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Aug 25 10:20:14 2023 +0000

    Bug 34217: Add vendor tests for licenses
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 25e21173fdabdd61913d8577b2a1b1633249aea6
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Jul 20 13:49:25 2023 +0000

    Bug 34217: (QA follow-up) Clean-up old unused code
    
    Spotted this and didn't want to open a new bug for it
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8522fc5d2ac55a1a2c59562e9a9797e8e570f358
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Jul 6 10:14:11 2023 +0000

    Bug 34217: Add vendor tests for agreements
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3c6971d50cefa376df3a760519d1d9a8da1f5d71
Author: Victor Grousset <victor@tuxayo.net>
Date:   Thu Aug 31 23:00:46 2023 +0200

    Bug 23548: (QA follow-up) tidy up code
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2256a8532335f763346f13698cb840dd97ecafa3
Author: Per Larsson <per.larsson@ub.gu.se>
Date:   Wed Sep 18 10:50:37 2019 +0200

    Bug 23548: Set AQ to empty when item not exist
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1cd82e29b5ceec08cf77f8c24497b1def1ee3c7e
Author: Matthias Meusburger <matthias.meusburger@biblibre.com>
Date:   Thu Aug 17 12:26:39 2023 +0000

    Bug 23548: Unit test - Set AQ to empty when item not exist
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aea3ad0b7bbe900840998d3e6597328708350b05
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Thu Aug 31 22:31:36 2023 +0000

    Bug 34036: Reload 'already received' table when edit modal closed
    
    Bug 33784 introduced a fix that prevents the 'already received' table from reloading completely if the modal is hidden and there is only one order in the table. This appears to assume that the 'hidden modal' event is only triggered if the receive form is cancelled, but the 'hidden modal' event is also triggered when the receive form is submitted. This means that the table isn't redrawn when the form is submitted and there's one order already received, so the next order does not show in the table when the page reloads.
    
    To test:
    1. Set up a vendor, budget, fund, and create a new basket.
    2. Add two orders (two different records) to this basket.
    3. Close the basket and go to receive the orders.
    4. Once on the 'Receive orders' page, use the checkboxes in the Pending orders table to receive both orders at once. Choose the 'Receive selected' button
    5. Click Edit for the first order, receive the item and click 'Next order'. Receive the next item and click 'Save changes'. Then Confirm
    6. Both orders should now show under Already received. Click Cancel receipt for one of the orders. It should go back to Pending orders.
    7. Click Receive for the now pending order. Receive the item and Confirm.
    8. Notice that the page appears to reload but the order doesn't show under Already received with the other order. The order also no longer shows under Pending orders.
    
    9. Apply the patch and restart services. Reload the page. Cancel receipt of the order again.
    10. Click Receive for the now pending order. Receive the item and Confirm.
    11. The Already received table should reload so that both orders now show under Already received.
    12. Click Cancel receipt for the order.
    13. Click Receive for the now pending order, then Cancel without receiving the item.
    14. Confirm the page loads as expected with one pending order and one already received order.
    
    Sponsored-by: Toi Ohomai Institute of Technology
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eaab32eb0ee100752bee8822a367144157c69c51
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 4 14:13:25 2023 +0000

    Bug 34109: Check mandatory item fields when creating during recipt
    
    This patch adds a check of mandatory item fields before saving during order receipt.
    We check both when adding the item initially, and when submitting the order, as it will use
    the values from the open form.
    
    To test:
    * Go to administration > frameworks > ACQ > MARC structure > 952
    * Set callnumber (o) or barcode (p) to mandatory
    * In acquisition:
    * Create a basket with "create items on order" and "is standing"
      "standing" helps as you can do multiple receives testing different things,
      but is optional
    * Add an order line
    * Receive shipment
    * Verify the mandatory fields show in the item form
    * Set itemtype = Music
    * Save with the fields blank
    * Item row is added, no warning
    * Edit the item, change the item type to blank
    * Click 'Confirm' for the order without closing the item edit form
    * Verify the item was added with itemtype Books (on sample data) and empty mandatory field
    * Apply patch
    * Repeat above, however, you should not be able to submit the item or order until mandatory fields are filled
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 021d083a9a2f5690cb0e92fa9c8b5fa3da122f06
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Sep 6 14:43:39 2023 +0200

    Bug 34319: Remove cypress.json from Makefile.PL
    
    And move cypress.config.ts with the others NONE
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 68b999ad67004be4dc729a73afa6c278d82fa0ad
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Sep 5 15:28:16 2023 -0300

    Bug 34319: (QA follow-up) Add cypress.config.ts to Makefile.PL mapping
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d548f00ae00d28d2d435a7ebefd6cfb9f96f8b08
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jul 13 16:49:21 2023 +0000

    Bug 21083: (QA follow-up) Add a hint that attributes will replace all existing attributes
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 88be91a7869491859e56a5c78dcd7075b68b01bc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Apr 8 09:28:40 2022 +0200

    Bug 21083: Remove all attributes
    
    not only the first one
    
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 40a37ecccdd1e92fc8b5bcf787df3d9f9ebfc492
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 21 16:12:52 2020 +0200

    Bug 21083: Handle repeatable patron attributes in batch patron modification tool
    
    This patch adds the ability to set patron attributes marked as
    repeatable in the batch patron modification tool.
    Prior to this patch they were ignored.
    
    Test plan:
    You should try with several combinaisons and set patron attributes using
    the batch patron modification tool.
    Make sure there is no data lose and that the result is what you expect
    Please detail in a comment what you tested.
    
    Signed-off-by: Philip Orr <philip.orr@lmscloud.de>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0663e692cf022611a0be2c3e5ef5beb7eac10e5e
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Aug 29 15:45:39 2023 +0000

    Bug 34641: Fix Novelist display when NovelistSelectView is set to below
    
    To test:
    1. Have Novelist credentials:  NovelistSelectProfile,  NovelistSelectPassword.
    2. Enable  NovelistSelectEnabled
    3. Set  NovelistSelectView to 'below holdings table'.
    4. Find a record on the OPAC that would have Novelist content. It does
       not display.
    5. Set  NovelistSelectView to any except 'below holdings table'. Notice it displays the content.
    6. APPLY PATCH
    7. Try steps 1 -5 again, this time when NovelistSelectView is set to
       'below' the content should properly display.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d35c3596da488b61f49fd605872de02f0f31fe4
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon May 29 15:41:44 2023 +0000

    Bug 22135: Display 'shelved out of order' error in inventory CSV export
    
    When using the inventory tool with an uploaded barcode file
    and checking the "Compare barcodes list to results",
    "Check barcodes list for items shelved out of order" and
    "Export to CSV file" checkboxes, the resulting CSV file showed
    a blank in the "problem" column for items with out of order
    callnumbers. With this patch, you'll see "Shelved out of order".
    
    To test:
    * Create 3 items with callnumbers and barcodes a, b, and c
    * Go to Cataloguing > Inventory
    * Enter a c b (each on its own line) into the barcode field
    * Check "Compare barcodes list to results"
    * Check "Check barcodes list for items shelved out of order"
    * Check "Export to CSV file" (at the bottom)
    * Verify the file has empty lines in the problem column
    * Apply patch
    * Repeat test, the empty lines should now read: "Shelved out of order"
    
    Note: Also fixes "problem" to "Problem" to make capitalization
    consistent. All those strings are currently not translatable,
    this will be filed separately.
    
    Co-authored-by: Mark Alexander <marka@pobox.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c7cf368f16f98c00069ce295406a474f22d2a875
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Jun 6 16:16:30 2023 +0000

    Bug 33895: (follow-up) Build overdrive tab-pane only if OverDriveCirculation is turned on
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 324a501f2c2544bac907f67107cbb6a00a3dc7d9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jun 1 14:16:18 2023 +0000

    Bug 33895: Use template wrapper for tabs: OPAC user summary
    
    This patch updates the OPAC user summary page so that it uses
    the new WRAPPER syntax to generate tabs markup.
    
    To test, apply the patch and log in to the OPAC. Check these tabs on
    the patron summary page:
    
      - Checkouts
      - Relatives' checkouts
      - Relatives' charges
      - Overdues
      - Charges
      - Credits
      - Clubs
        - Test enrolling and unenrolling
      - Holds
      - Recalls
      - Article requests
      - Overdrive
        - Test with OverDriveCirculation enabled
        - Logging in, logging out
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6cd84c54b5d7f85ef87c9897b25ce0bea8b54ad6
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon May 22 08:47:34 2023 +0000

    Bug 33833: Move to db_dependent
    
    Test plan:
    Run t/db_dependent/SocialData.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a6c67ada11da466c4249a95e236a535e62070890
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon May 22 08:46:31 2023 +0000

    Bug 33833: Add two FIXMEs to SocialData::get_report
    
    Just comments, no test plan.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 69967feeaa2711264c1f473fbb413d77c363ac77
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon May 22 08:41:02 2023 +0000

    Bug 33833: Use database in t/Socialdata.t
    
    Remove T::D::C.
    Add subtests.
    Remove useless parameter from get_report call.
    Add two additional trivial tests.
    
    Note: The module C4::SocialData looks a bit weird.
    
    Test plan:
    Run t/SocialData.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d77aa887e4b9df61493837b9d88a80537c525471
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Aug 25 15:49:09 2023 +0000

    Bug 34620: Do not throw expection if payment type is writeoff
    
    To test:
    1. Turn on RequirePaymentType
    2. Create a manual invoice and then attempt to write it off.
    3. 500 error
    4. Turn of RequirePaymentType, no error.
    5. Apply patch, restart_all
    6. Try step 2 again, you should not get an error
    7. prove t/db_dependent/Koha/Account.t
    8. Make sure tests pass
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e3d579a01805e512c7c919e56a7da5bd88a04e3c
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Sep 1 12:53:43 2023 +0000

    Bug 34690: Fix dialog_spec.ts
    
    Run the tests, verify they fail
    Apply this patch, run tests again, verify they now pass
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dc91fd9bb9a915986cfd51dd7cf0563625aeb1a2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Sep 1 15:18:08 2023 +0200

    Bug 34690: Make the test fail consistently
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Edit: I amended the commit title
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 37427f136255ba1a54f9cd4a883099aa85a1c208
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 25 14:15:10 2023 +0000

    Bug 34394: Fix inconsistencies in MARC Bibliographic framework test page title and breadcrumbs
    
    This patch makes some changes to the MARC bibliographic framework test
    page so that breadcrumbs, page title, and page heading are consistent
    with each other.
    
    The patch also creates standard message and alert dialogs to show the
    status of the check. This is more consistent than having the message
    only at the bottom of the table.
    
    The patch also changes the term "itemnum" to "itemnumber."
    
    To test, apply the patch and go to Admnistration -> MARC bibliographic
    framework test.
    
    - The page title, breadcrumb navigation, and page heading should match:
      "MARC bibliographic framework test."
    - If your system has no errors, there should be a message-style dialog
      at the top of the page saying "Configuration okay."
    - Create an error in your MARC configuration:
      - Go to Administration -> MARC frameworks -> MARC structure
      - Locate the 952 tag and click Actions -> View subfields
      - Edit subfield 9 and set the "Managed in tab" dropdown to something
        other than "ignore"
    - Return to the framework test page. There should be an alert-style
      dialog at the top of the page, "Configuration errors found"
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f20b460ab6aea64965848b5b4317b19000a53a99
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jul 14 18:11:04 2023 +0000

    Bug 34196: Improve styling of sidebar form on funds admin page
    
    This patch makes a few markup changes to the sidebar filter form on the
    funds administration page in order to make it more usable and more
    consistent with other similar forms.
    
    The patch removes the link for expanding and collapsing the sidebar
    filter because it looked bad and was inconsistent with all similar
    forms.
    
    To test, apply the patch and go to Administration -> Funds. Confirm that
    the sidebar form looks correct. Compare to, for example, the sidebar
    form at Acquisitions -> Invoices.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1742913a0522c589705c5e54ce13c6ef1c7463ea
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Sep 1 16:12:56 2023 +0000

    Bug 34694: Only check for IsAvailableForItemLevelRequest if is authenticated
    
    - Go to circulation rules and set On shelf holds allowed to If all unavailable
    - Log out
    - Visit a bib record on OPAC:
    http://localhost:8080/cgi-bin/koha/opac-detail.pl?biblionumber=76
    - Notice it blows up with error 500
    - Apply patch. Repeat
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cac122b6117d10f58fefa437a67b9f23ed9ab947
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Aug 28 12:26:51 2023 +0000

    Bug 34625: Fix search engine configuration tables header problem
    
    This patch corrects the JavaScript which allows DataTables to be created
    and destroyed based on which tab is clicked on the search engine
    configuration page. When you click from one tab to the other, the
    original tab's DataTable should be destroyed and the new tab's DataTable
    initialized.
    
    To test, apply the patch and go to Administration -> Search engine
    configuration (Elasticsearch)
    
    - The page should load with the "Search fields" tab enabled and the
      DataTable initialized: Sorting and filtering should work. If you
      scroll down the page the floating table header should be correct.
    - Switch to the "Bibliographic records" tab. This table should have
      filtering enabled, and the floating table header should work when you
      scroll down the page.
    - The same should be true for the "Authorities" tab.
    - Return to the "Search fields" tab to confirm that the DataTable is
      still working as expected.
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d00151e6509e9b4ff21fd6951b7d572a583d331d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Sep 5 11:45:10 2023 -0300

    Bug 34319: Update yarn.lock
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4f45300d91bcedffd3981d7116c3d9ab47180460
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 20 11:53:19 2023 +0200

    Bug 34319: Upgrade cypress 9.7.0 to 12.17.2
    
    We are currently using 9.7.0. Since 10 the config file structure changed, and has been renamed cypress.json to cypress.config.ts
    
    https://docs.cypress.io/guides/references/migration-guide#Migrating-to-Cypress-version-10-0
    
    Also cypress-studio (used for bug 34076) is not working on 9.7.0.
    
    Test plan:
    yarn install
    yarn build
    mv /root/.cache/Cypress/12.17.2/ /kohadevbox/Cypress/
    perl /kohadevbox/misc4dev/run_tests.pl --run-cypress-tests-only
    
    You should not get any failures from the tests.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b46418478ed5c0b28360aa6d0a01c1042f1bd28d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Sep 4 09:30:14 2023 -0300

    Bug 34043: Remove incorrect spaces
    
    This bug looked cool and safe, but tests highlighted that the
    (introduced) newlines were translated into spaces, which is not correct
    in the CSV format (i.e. q{"Column 1" , "Column 2"} is not really
    correct).
    
    Also, the double quotes were forcibly introduced (semi-correct) but the
    tests weren't adjusted.
    
    We should really stop using templates for generating CSV, and use a
    library for the task instead of manually crafting them. But that's for
    another bug report.
    
    This patch:
    
    * Removes extra spaces in TT-generated CSV headers
    * Adjusts the tests to the new format introduced by this report
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1ca21fabb2a521b6c206b85e3f1feaffb2380e75
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Sep 4 08:50:52 2023 -0300

    Bug 32911: (QA follow-up) Adjust tests
    
    This patch adjusts tests so they acknowledge the new syspref and the
    fact `partner_code` will be skipped if found on the config file.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0b3c46aa241c6b10468a64e148dae51852c84411
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Mar 8 11:23:26 2023 +0000

    Bug 27542: (follow-up) Fix unit test
    
    Signed-off-by: Stephen Graham <s.graham4@herts.ac.uk>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 93f103d9b55309209ef49524d746b9d321487cc1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Mar 8 11:23:00 2023 +0000

    Bug 27542: (follow-up) Capitalization
    
    Signed-off-by: Stephen Graham <s.graham4@herts.ac.uk>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9b0a44322f89f3819ea33f0015c1c4191c66002d
Author: Andrew Isherwood <andrew.isherwood@ptfs-europe.com>
Date:   Mon Jan 25 11:18:29 2021 +0000

    Bug 27542: Allow cancellation of partner ILL
    
    This commit enables the display of the "Revert request" button when a
    request's status is GENREQ / "Requested from partners"
    
    The relevant unit test has also been updated
    
    Rescued-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Stephen Graham <s.graham4@herts.ac.uk>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a707d10d8017cad5333a2eb5c0be784004874cd6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 1 12:04:23 2023 -0300

    Bug 34569: (QA follow-up) Tidy block
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f4f4feb50b3d2b58b9212b692daf2c4e3e000b7d
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Thu Aug 17 10:42:31 2023 -1000

    Bug 34569: Fix misc/cronjobs/holds/holds_reminder.pl trigger arg
    
    misc/cronjobs/holds/holds_reminder.pl help says one can use arge -t for --triggered
    But not implemented in code.
    Should be like in misc/cronjobs/overdue_notices.pl :
      't|triggered'    => \$triggered,
    
    Test plan :
    Play with misc/cronjobs/holds/holds_reminder.pl with arg -t and
    --trigger
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0710ccb606faba126acb7b7e62b2868b6a28cbb5
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Aug 28 22:24:24 2023 +0000

    Bug 34634: Show expirationdate of expired holds on reserve/request.pl
    
    To test:
    1. Place some holds and go to /reserve/request.pl for that bib.
    2. If the reserves.expirationdate is set to today or some date in the past the date does not display in the Flatpickr instance.
    3. Change the reserves.expirationdate to sometime in the future, the date displays.
    4. Aply patch, restart_all
    5. Try steps 2-3 again.
    6. This time if the expiration date is in the past you should see it displayed. However it will be uneditable.
    7. Make sure holds with a expiration date in the future can still be properly edited.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Christine <chlee@pascolibraries.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7c3a0b9131f3a0df92d1aba4b2548ab3ffbc9980
Author: Petr Svoboda <svoboda@rbit.cz>
Date:   Tue Aug 22 15:13:18 2023 +0200

    Bug 34583: Overdue notice - wrong coding in outlook in czech e-mail in “print” mode
    
    Koha overdue notice “print” email in Outlook is incorrectly encoded in czech language.
    Tested in KohaTestingDocker - https://gitlab.com/koha-community/koha-testing-docker
    This patch fixes that error.
    
    Test plan:
    Overdue notice, set print in UI, https://snipboard.io/FLkIxf.jpg.
    
    Message body:
    <table style="padding:0; margin: 0; border-collapse: collapse; font-family: 'Trebuchet MS', Helvetica, sans-serif; width: 100%; "><tr><td style="vertical-align: top; padding: 0"> </td><td style="width: 75mm; vertical-align: top;"><table style="margin-top: 2.5cm; font-size: 11pt;"><tr><td><<borrowers.cardnumber>></td></tr><tr><td><<borrowers.firstname>> <<borrowers.surname>></td></tr><tr><td><<borrowers.address>> <<borrowers.streetnumber>></td></tr><tr><td><<borrowers.city>></td></tr><tr><td><<borrowers.zipcode>></td></tr></table></td></tr><tr><td colspan="2" style="padding: 0;"><table style="width: 100%; margin: 3cm 0 0 0;"><tr><td style="width: 5mm; height: 5mm; border-bottom: 1px dotted #000;"> </td><td style="height: 1mm;"></td><td style="width: 5mm; height: 1mm; border-bottom: 1px dotted #000;"> </td></tr></table></td></tr><tr><td colspan="2"><table><tr><td style="padding: 0.5cm 0.3cm">V Chrudimi dne <<today>></td></tr><tr><td style="padding: 0 0.3cm">Upozorňujeme Vás, že byla již o 30 dnů překročena doba, na kterou jsme Vám půjčili dokumenty (celkem<<count>>). Žádáme Vás o brzké vrácení těchto výpůjček:</td></tr><tr><td style="padding: 0.5cm 0.3cm;"><table><tr><th>Od</th><th>Do</th><th>Název</th><th>Autor</th><th>Částka</th></tr><item><tr><td><<issues.issuedate>></td><td><strong><<issues.date_due>></strong></td><td><<biblio.title>></td><td><<biblio.author>></td><td><<items.fine>> Kč</td></tr></item></table></td></tr><tr><td style="padding: 0 0.3cm">Zpozdné je účtováno dle ceníku knihovny.</td></tr><tr><td style="padding: 0 0.3cm">Dokumenty můžete vrátit na jakémkoli oddělení knihovny a pobočce v jejich provozní době.</td></tr><tr><td style="padding: 0 0.3cm">Nesplní-li čtenář svou povinnost vyrovnat závazky s knihovou, má knihovna právo postupovat podle příslušných ustanovení občanského zákoníku.</td></tr></table></td></tr></table>
    
    Set delay 1 day, https://snipboard.io/boAd3F.jpg.
    
    Checkout any book.
    
    Set in database issues->date_due = today() - 1
    for checkouted book, https://snipboard.io/PrylGB.jpg.
    
    Run this scripts:
    
    koha-shell kohadev -c "/kohadevbox/koha/misc/cronjobs/overdue_notices.pl -v -t"
    
    You must have KOHA set up for sending e-mails (SMTP server). Replace xxx@email.cz to your e-mail and run this script:
    
    koha-shell kohadev -c "/kohadevbox/koha/misc/cronjobs/gather_print_notices.pl /var/spool/koha/kohadev/ --email xxx@email.cz"
    
    Signed-off-by: Michal Denar <black23@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a3d0e443ce7a90687077c73b5d5a7116d4401d71
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Jul 13 10:58:42 2023 +0200

    Bug 34266: Add unit tests
    
    Signed-off-by: joubu <xxx@example.org>
    Signed-off-by: tuxayo <victor@tuxayo.net>
    
    Took the opportunity to perltidy this file as I was signing off
    
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] Added a rollback. Shouldnt harm :)
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 807c58d28d7be4fa1a9606cd6cf2f59f661249ec
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Thu Jul 13 09:22:44 2023 +0200

    Bug 34266: Default to biblioitems.itemtype only if it's a valid itemtype
    
    biblioitems.itemtype can contain values that are not itemtypes (for
    instance if the MARC field mapped to it uses another authorised value
    category)
    This patch checks that before using it as a default value for the
    'itemtypes' item subfield.
    
    Test plan:
    0. Do not apply the patch yet
    1. Change your MARC framework so that the field linked to
       biblioitems.itemtype uses an authorised value category different from
       'itemtypes'
    2. Make sure that you have an item subfield linked to the authorised
       value 'itemtypes' in your MARC framework
    3. Create a biblio with an itemtype (using a value that is NOT an item
       type, but a value from the authorised value category you selected in
       step 1)
    4. Create a new item for this biblio. Notice that the biblio itemtype is
       automatically selected for the 'itemtypes' subfield
    5. Apply the patch
    6. Create a new item for the same biblio. Now the 'itemtypes' subfield
       should be empty.
    7. Revert the change at step 1 so that your biblioitems.itemtype MARC
       field uses the 'itemtypes' AV category
    8. Modify your biblio to use a valid item type.
    9. Create a new item. The biblio itemtype should be used as a default
       value
    
    Signed-off-by: joubu <xxx@example.org>
    Signed-off-by: tuxayo <victor@tuxayo.net>
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ed2b395a1084d9c064e1631f3f68215ce9df7702
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 25 14:51:28 2023 +0000

    Bug 34617: Preserve calculated expiration dates if set to update on import whether column included or not
    
    To test:
    1 - Setup a csv with column headers:
        surname     firstname       branchcode      categorycode    cardnumber      dateenrolled
    2 - add values
        Acosta      Edna    CPL     PT      23529001000463  02/01/2013
    3 - Set PT catgeory enrollement period to a specific date in the future
    4 - Import the file and overwrite patrons and update dateexpiration
    5 - Check Edna, note her date is not correct
    6 - Apply patch
    7 - Repeat
    8 - Expiration date is now set as expected
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b38780f6cb0ec0cddc0fdbf8cc2c1a3c6dcecfb6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Aug 25 14:51:23 2023 +0000

    Bug 34617: Unit tests
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 086810633b596eb7d5fdce6fb93f37f42f93c9af
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 27 18:23:59 2023 +0000

    Bug 34135: Show the icons for selected tab to the left of the search bar in the staff interface
    
    This patch modifies header search forms so that the form label has the
    same icon used by the "tab" link.
    
    The patch also improves the responsive behavior of the header search by
    using the icon as the form label when the browser window is narrow
    enough to hide the label text.
    
    I've added the "aria-hidden" attribute to other icons in the modified
    templates and made the "fa-fw" class consistent for all tab icons.
    
    To test, apply the patch and rebuild the staff interface CSS. Clear your
    browser cache if necessary.
    
    View the header search form at various browser sizes to confirm that
    content is shown and hidden correctly. Test at least one page which uses
    each of the modified header search includes:
    
     - Staff client home page
     - Acquisitions -> Acquisitions home
       - Vendor ->
         - Basket -> Add to basket -> From suggestion
         - Contracts
     - Administration ->
       - Budgets
       - Currencies
       - Desks (with UseCirculationDesks enabled)
       - System preferences
       - Z39.50/SRU servers
     - Catalog advanced search
       - Search results
     - Authorities -> Authorities home
     - Cataloging -> Cataloging home
     - Circulation -> Check out
     - E-resource management (with ERMModule enabled)
     - Patrons -> Patrons home
     - Serials -> Serials home
     - Tools -> Notices
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 29fabf23dff138f11f7b8058af03a8e138dfe0bb
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jun 16 18:08:14 2023 +0000

    Bug 34043: Improve translation of CSV header templates
    
    This patch reformats serverl CSV header templates so that it's easier to
    translate the English strings. The templates now use the [% t("  ") %]
    construction to ensure that each string is managed separately.
    
    To test, apply the patch and go to Acquisitions.
    
    - Locate a vendor with a basket and view the basket.
      - Click the "Export as CSV" button. The CSV file you get should be
        well-formatted.
      - Go to basket groups for that vendor and click the "Closed" tab.
        - Click the "Export as CSV" button for one of the baskets. The CSV
          file should be correct.
    - Go to Acquisitions -> Late orders.
      - Check some checkboxes in the list of late orders. Click "Export as
        CSV" at the bottom of the page. The CSV file should be correct.
    
    - Go to the catalog's item search page.
      - Perform a search which will return results. On the result page,
        choose "Export all results to -> CSV" and check the resulting CSV
        file.
    
    - Go to Reports -> Statistics Wizards -> Cash register
      - Select "To a file" under "Output" and submit. Check the resulting
        CSV file.
    - Go to Reports -> Orders by funds.
      - Choose "To a file" under "Output" and submit. Check the resulting
        CSV file.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 84df32f16dc830b5779efea041b5b3b698995ed5
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jun 22 12:35:34 2023 +0000

    Bug 34247: Improve translation of notice character count
    
    This patch restructures the template markup around the part of the
    notice edit screen where the system tracks how many characters have been
    entered in an SMS message. The change is intended to make translation
    easier.
    
    To test, apply the patch and run the translation script to update the
    .po files, e.g.
    
    perl misc/translator/translate update fr-FR
    
    Check the updated .po files:
    
    - In fr-FR-staff-prog.po there should not be a line with the string "160
      characters"
    - In fr-FR-messages.po the string should have been picked up like this:
    
      msgid "{content_length} / 160 characters"
      msgstr ""
    
    - Add a translation to fr-FR-messages.pl and install the updated
      translation:
    
      perl misc/translator/translate install fr-FR
    
    - Switch to the update language in the staff interface and go to Tools ->
      Notices. Edit any notice and expand the "SMS" block. (you may be asked
      to enable SMSSendDriver).
    - Confirm that the "X/160 characters" text updates correctly as you
      enter content into the textarea. Confirm that the same is true when
      you switch to your updated translation.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ce8c78c6baf35c086b8a47235bd0fcaee7f1de94
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jul 25 14:29:42 2023 +0000

    Bug 34373: Improve layout of curbside pickups items ready list
    
    This patch adds fieldset + list markup around the list of titles ready
    for pickup on the staff interface curbside pickup page.
    
    - Properly testing requires testing data. You can run this command to
      REPLACE your curbside pickup data with sample data:
    
      bash <(curl -s https://gitlab.com/-/snippets/2572579/raw/main/test_curbside_pickups.sh)
    - Apply the patch and restart services.
    - Place multiple holds for a single patron and check them in to mark
      them waiting.
    - Under Circulation -> Curbside pickups, click the "Schedule pickup"
      tab.
      - Search for the patron you placed the holds for.
      - When the patron information comes up, the list of items ready for
        pickup should be well-formatted.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b0df1252a951cc01c071e3f6032cc20bf5120687
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 1 11:34:03 2023 -0300

    Bug 32911: DBRev 23.06.00.017
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3c24667a518810aa8c56fd70f06392314e373f58
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri May 5 15:08:24 2023 +0000

    Bug 32911: (follow-up) Only move config value from koha-conf.xml if it exists
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cc175067b5c3c93b1d99e450c1ed9b790c4003a5
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri May 5 15:07:15 2023 +0000

    Bug 32911: (follow-up) Remove partner_code
    
    from debian and /etc koha-conf.xml files
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 941c015e8ff758bfa7e3d9e6820984cacfd1716d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri May 5 14:24:37 2023 +0100

    Bug 32911: (follow-up) Remove a couple of cases from tests
    
    This patch simply removes the partner_code defaults from some tests
    where it is no longer required.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 95e4992b2e49e8d4fac83306bea920ba5d9354dc
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Thu May 4 14:53:42 2023 +0000

    Bug 32911: (follow-up) Move pref from Notifications to Features section
    
    The new preference appeared under Notifications, but is better
    suited for the Features section on the ILL tab in system
    preferences.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1e468e18c0d274b03e4ce77f7bc4397786c50632
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Feb 8 17:06:56 2023 +0000

    Bug 32911: Database update
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f0f9bd0f752817b0ab70551398c5f6b1b62ae840
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Feb 8 16:57:14 2023 +0000

    Bug 32911: Remove ILL partner_code config from koha-conf.xml and turn it into a system preference
    
    Preparation:
    1) apply patch
    2) run reset_all
    3) enable ILLModule sys preference
    4) install a backend (e.g. FreeForm)
    5) go into system preferences and confirm that ILLPartnerCode exists and is the default inter-library loan (IL)
    
    Test plan:
    1) create an ILL request
    2) ensure the patron of category 'IL' has a primary e-mail configured
    3) click on "place request with partners"
    4) verify that the patron(s) of said category are on the partners list
    
    Upgrade test:
    1) Remove the system preference from the database, run query:
    delete from systempreferences where variable="ILLPartnerCode";
    2) Check or edit the value or partner_code in koha-conf.xml and run atomicupdate:
    installer/data/mysql/updatedatabase.pl
    3) Confirm the value in koha-conf.xml has been successfully migrated into the system preference, run query:
    select * from systempreferences where variable="ILLPartnerCode";
    
    Optional tests:
    - Set a patron category in the sys pref and then delete said patron category (needs to not have patrons in it)
    - Check the about page -> System information and confirm the warning message is correct
    
    - Set the sys pref to the empty option
    - Check the about page -> System information and confirm the warning message is correct
    
    - Set the sys pref to a category that has no patrons of its type (ktd examples: Board, or Library)
    - Check the about page -> System information and confirm the warning message is correct
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b33b45d7718a1997d3c00dc967fe64d93454de6b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Sep 1 11:32:59 2023 -0300

    Bug 34584: DBRev 23.06.00.016
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 99929a7d8979a26f97975cb82d06ab163a97a771
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jul 20 13:03:22 2023 +0000

    Bug 34323: Enhance header search icon for more options
    
    This patch modifies header search forms which have a "more options"
    icon, adding a title attribute to the control and "aria-hidden" to the
    Font Awesome icons.
    
    I've added a bit of CSS and JS to change the appearance of the icon when
    it is clicked to expand the panel of options.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    - Test pages which have a "more options" icon in the search header:
      - Home -> Catalog search tab, with IntranetCatalogSearchPulldown
        enabled.
      - Acquisitions -> Orders search tab
      - Authorities -> All search tabs
      - Administration -> Budgets
      - Patrons -> Patron search tab
      - Serials -> Subscription search tab
    - On all these pages, hovering your mouse over the icon in the search
      form should trigger a "More options" title.
    - Clicking the icon should expand the panel, and the icon should be
      now have a highlighted style.
    - Clicking the icon to collapse the panel should return the icon to its
      original state.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e433a92d51d68d997f8dad5bc8a180c3e87e9da2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 6 15:24:02 2023 +0000

    Bug 33921: Improve translation of title tags: Plugins and Point of sale
    
    This patch updates plugin and point of sale templates so
    that title tags can be more easily translated.
    
    The patch also makes some minor changes to some templates to improve
    consistency between page title, breadcrumb navigation, and page heading.
    
    To test, apply the patch and confirm that the following pages have the
    correct title tags:
    
    - Administration ->
      - Manage plugins
      - Upload plugin
    
      * With 'useplugins' set to 0 in koha-conf.xml you can navigate
      directly to /cgi-bin/koha/plugins/plugins-home.pl to confirm that
      the "Plugins disabled" page is shown.
    
    With EnablePointOfSale and UseCashRegisters enabled:
    
    - Point of sale
      - Make a sale and print a receipt for the transaction
      - Transaction history for [register]
      - Cash summary for [library]
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7e87e39040be0263b3f6897365825a954686f7ad
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Sep 1 13:03:21 2023 +0000

    Bug 34691: Fix linkActiveClass in createRouter
    
    Test plan:
    1) Visit /cgi-bin/koha/erm/agreements/add
    2) Notice the "Agreements" menu item is not active
    3) Apply the tests patch only
    4) Run tests, watch them fail
    5) Apply this patch, restart yarn js:watch and hard refresh browser
    6) Repeat steps 1) and 2) Verify it's now active
    7) Run tests, watch them pass
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6b74b5df5aac6d29cddf839b746fd87bd2eafd63
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Sep 1 13:31:23 2023 +0000

    Bug 34691: Add cypress tests
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8c63a4bb049b663bb94769b5f5e78ba85ca9918f
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Aug 29 07:59:05 2023 -1000

    Bug 34646: Fix two attributes class in OPAC masthead-langmenu.inc
    
    In OPAC template masthead-langmenu.inc a link as two class attributes :
      <a class="dropdown-item" href="#" tabindex="-1" class="menu-inactive" role="menuitem">
    
    Test plan :
    1) Go to OPAC with at least one translation
    2) Look at HTML source code
    => Without patch you see a link with 2 class attributes
    => With patch you see the 2 classes in same class attribute
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 34d52bc641ebf83ed8add39faa80e524811e7c11
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 6 15:15:55 2023 +0000

    Bug 33915: Improve translation of title tags: Installer and onboarding
    
    This patch updates installer and onboarding templates so that title
    tags can be more easily translated.
    
    To test, apply the patch and run through the installation and
    onboarding process. At each stage confirm that the page title is
    correct.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fe22e14775c174a29914035a8c15a670a7f643ae
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 6 15:19:20 2023 +0000

    Bug 33917: Improve translation of title tags: Offline circulation and patron lists
    
    This patch updates offline circulation and patron lists templates so
    that title tags can be more easily translated.
    
    To test, apply the patch and confirm that the following pages have the
    correct title tags:
    
    - Circulation -> Upload offline circulation file
      - Add to queue
      - View pending offline circulations
    - Tools -> Patron lists
      - New list, edit list
      - View list
    
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f895e8be4c386385f7419aded811a1568c231777
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Thu Jul 27 10:57:37 2023 -0300

    Bug 34418: Replace dynamic parameter on unnamed route node
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6660b561242b14ad9cd0bc60d4303695f73308ae
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 26 13:32:28 2023 +0200

    Bug 34418: Add is_empty flag
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 05637b23cf8bc95d7acb2b800120b98f67124fc0
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Jul 26 13:17:43 2023 +0200

    Bug 34418: Allow empty nodes in breadcrumb's elements
    
    Coming from an adaptation of "Bug 33169: DO NOT PUSH  Allow breadcrumbs to accept dynamic values"
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cc1a94d9a95c1d3831119eadae525943353051fd
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed May 31 12:55:04 2023 +0000

    Bug 33871: Test where parameter in Sitemapper.t
    
    This makes it possible to remove the ugly global deletes at the
    start.
    
    Test plan:
    Run t/db_dependent/Sitemapper.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4fd847b7ae12f4efdbf8c4740fd20a7dccee0849
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed May 31 11:44:26 2023 +0000

    Bug 33871: Use Koha object in Sitemapper, add optional filter
    
    Test plan:
    Run misc/cronjobs/sitemap.pl -where "biblionumber>X" (replace X
    by some clever value)
    Verify results by browsing sitemap files.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2557ef4e51745baab57e6b1a1dc9e9482f29b337
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed May 31 12:12:34 2023 +0000

    Bug 33870: Fix indentation in subtest
    
    Test plan:
    git diff -w HEAD~1.. t/db_dependent/Sitemapper.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    JD amended patch: tidy
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 57e6200757fbf9b9167e7678718f1f9c43a0d491
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed May 31 07:18:17 2023 +0000

    Bug 33870: Polishing Sitemapper.t
    
    Create subtest.
    Remove (useless) mock on DateTime.
    Remove T::D::C module, add TestBuilder.
    Replace local slurp function by use File::Slurp.
    
    Test plan:
    Run t/db_dependent/Sitemapper.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 16480be3213cd414880ca070bd0e389652ddc98a
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed May 31 07:00:13 2023 +0000

    Bug 33870: Make $MAX in Sitemapper::Writer global
    
    This should preferably not be a lexical variable (in case we ever
    should call this under Plack). A global variable will also simplify
    testing (see next patch).
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1b1b5cda5b1f12b59ddfeb1ce6ce25ffaf56eb89
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Jul 31 14:57:06 2023 +0000

    Bug 34448: Update the way we handle response in http-client.js
    
    Test plan:
    Before patch:
    - Visit a non-existent ID i.e. /cgi-bin/koha/erm/agreements/999
    - Visit a char ID i.e. /cgi-bin/koha/erm/agreements/abc
    
    Apply patch:
    Repeat above steps.
    
    Run cypress tests
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0312acc211546e9ef469ffb1932e75187e527079
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Jul 31 15:04:09 2023 +0000

    Bug 34448: Update cypress tests
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit af60975fbccfa66dcace7b2756bf59260e9b9133
Author: Pascal Uphaus <pascal.uphaus@gwdg.de>
Date:   Thu Aug 17 11:32:51 2023 +0000

    Bug 34441: Fixed Typo "Paramater"
    
    To test:
    1. git grep paramater
    2. notice 3 files have spelling mistakes
    3. apply the patch
    4. git grep paramater
    5. notice there are no spelling mistakes for that word
    
    Signed-off-by: Thomas Klausner <domm@plix.at>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 169758fb565114d7957404a6b02db07d0511d8fb
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jun 29 16:41:56 2023 +0000

    Bug 31014: Minor UI problems in QOTD editor tool
    
    This patch makes some cosmetic and functional updates to Quote of the
    Day template, including simplifying some JavaScript, adding consisten
    styles to buttons and page sections, and adding visible buttons to
    jEditable text inputs.
    
    The patch also improves the Quotes page breadcrumbs to add context
    on the single quote entry page.
    
    The patch removes quotes.css which is obsolete.
    
    To test, apply the page and go to Tools -> Quote editor.
    
    - The breadcrumbs should read "Tools -> Quote editor."
    - Click the "New quote" button. The breadcrumbs should read "Tools ->
      Quote editor -> Add quote"
    - Go back and click the "Import quotes" button.
    - Confirm that the layout of the page looks good and that the upload
      instructions are shown.
    - Upload a CSV file of quotes
      - The instructions should now show information about editing and
        saving quotes.
      - The "Save quotes" button should be styled consistently with other
        submit buttons.
      - Confirm that you can click in the "Source" and "Quote" table cells
        to trigger the display of a textarea where you can edit the text.
        Confirm that both the "Save" and "Cancel" buttons work.
      - Click the "Save quotes" button. A message should appear which shows
        how many quotes were imported.*
      - Confirm that your quotes are saved correctly, including any changes
        you made.
    
    * This process could be improved: When the quotes are done importing the
    toolbar doesn't change, and there isn't an indication that the import is
    complete.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cdf2dfeceb7129713f6d22b288a432927e77198e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 6 15:26:33 2023 +0000

    Bug 33923: Improve translation of title tags: Reports
    
    This patch updates reports templates so that title tags can be more
    easily translated.
    
    To test, apply the patch and confirm that the following pages have the
    correct title tags:
    
    - Reports ->
      - Reports home
        - Statistics wizards ->
          - Acquisitions
          - Patrons
          - Catalog
          - Circulation
          - Serials
          - Cash register
          - Holds
        - Top lists ->
          - Patrons with the most checkouts
          - Most-circulated items
        - Inactive
          - Patrons who haven't checked out
          - Items with no checkouts
        - Other
          - Items lost
          - Orders by fund
          - Catalog by item type
          - Average loan time
        - Create guided report
        - Create from SQL
        - Use saved report
        - View dictionary
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b0656e853cc06ba8aaca42fd4dd6134f55fee2b2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 6 15:25:13 2023 +0000

    Bug 33922: Improve translation of title tags: Recalls
    
    This patch updates recalls templates so that title tags can be more
    easily translated.
    
    To test you must have UseRecalls enabled. Apply the patch and confirm
    that the following pages have the correct title tags:
    
    - Circulation ->
      - Recalls queue
      - Recalls to pull
      - Overdue recalls
      - Recalls awaiting pickup
      - Old recalls
    - Catalog -> Locate a bibliographic record with an existing recall.
      - View the "Recalls" tab in the sidebar.
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 54fcc144c362e53b6af5edef861c6f6c93271e09
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon May 29 07:19:06 2023 +0000

    Bug 33869: Move Matcher.t to t/db_dependent
    
    Test plan:
    Run t/db_dependent/Matcher.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ccb86ed6ff58e58c9e7793b03417fab50c26a72b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon May 29 07:12:57 2023 +0000

    Bug 33869: Matcher.t - indentation and whitespace changes
    
    Test plan:
    Run git diff --ignore-all-space --ignore-blank-lines HEAD~1.. t/Matcher.t; #no output expected
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3d2f2fb1382bbadfc26264c64986fb70aea649ac
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon May 29 07:08:19 2023 +0000

    Bug 33869: Matcher.t - use TestBuilder
    
    Remove T::D::C
    
    Test plan:
    Run t/Matcher.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f69a7e4ba1897012228e6f741f5564b9b70977a8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 6 15:15:11 2023 +0000

    Bug 33914: Improve translation of title tags: Course reserves
    
    This patch updates course reserves templates so that title
    tags can be more easily translated.
    
    To test you should have the UseCourseReserves system preference enabled.
    Apply the patch and confirm that the following course reserves
    pages have the correct title tags:
    
    - Course reserves
    - New course
    - Course details
    - Edit course
    - Add reserves (step 1 and 2)
    - Batch add reserves (step 1 and 2)
    - Batch remove reserves
    - Invalid course (/cgi-bin/koha/course_reserves/course-details.pl?course_id=)
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d3bfe0f80922194d8ea5edd515b6a608a7e219f2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jul 7 12:35:34 2023 +0000

    Bug 33912: (follow-up) Correct case where a search has not been submited
    
    The former cataloging home page, addbooks.pl, shows an extra ">" in the
    title if a search has not been submitted. This patch corrects it.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 884621825cece9bb683d164d25a5afbc09b572c8
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jun 12 17:21:02 2023 +0000

    Bug 33912: Improve translation of title tags: Cataloging
    
    This patch updates cataloging templates, including cataloging "value
    builder" plugins, so that title tags can be more easily translated.
    
    To test, apply the patch and confirm that the following cataloging
    pages have the correct title tags:
    
    - Cataloging home page
    - Catalog concerns
    - Cataloging search results
      - Select two results ->
        - Merge selected
    - Basic MARC editor (Add, edit)
      - Replace via Z39.50
    - Advanced MARC editor
    - Item editor
    - Bibliographic detail page ->
      - Edit ->
        - Attach item
      - Edit ->
        - Link to host record (with EasyAnalytics enabled)
    - Authorities -> New from Z39.50/SRU
    
    The patch updates 81 different cataloging plugins. It's not necessary to
    configure your MARC framework to use any particular plugin. The plugins
    can be loaded in their own tab for the purpose of testing just the
    title. I've made a list of direct links here:
    
    https://gitlab.com/-/snippets/2555254
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c2464231b0799ab372b1a54c202f3a7df6077ad4
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 6 14:59:36 2023 +0000

    Bug 33908: Improve translation of title tags: Acquisitions
    
    This patch updates acquisitions, suggestions, and ERM templates so that
    title tags can be more easily translated.
    
    To test, apply the patch and confirm that the following pages have the
    correct title tags:
    
     - Acquisitions -> Acquisitions home
       - Ordered
       - Spent
       - Vendors: Search, new, edit
         - Baskets: New, edit
           - New order
             - From an empty record
             - From an existing record
             - From existing orders (copy)
             - From a suggestion
             - From a subscription
             - From an external source
             - From a staged file
         - Basket groups
         - Receive shipments
       - Uncertain prices
       - Late orders
       - Suggestions
       - Invoices
         - Invoice details
           - Invoice files
           - Receive orders
             - Transfer order
             - Cancel order
       - EDIFACT messages
       - Order search
     - ERM
    
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2fa6105779d02e9b7fa81bc0ea47bff51e9f3170
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue May 16 11:14:01 2023 +0000

    Bug 33744: Fix cloning (sub)fields with framework plugins
    
    This patch is meant as a temporary measure for fixing the problem.
    Bug 30975 may resolve it further, but this is good for now.
    
    Note: The original commit message referred to removing a deprecated internal
    structure. But this patch actually still uses the structure which has been
    moved to _data in jQuery now.
    
    Test plan:
    1) Apply patch
    2) Repeat steps in the original bug description
    3) This time clicking on the Upload button for a cloned field should launch the uploads pop up.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bc427bf433c86a7a13a65725e01d2cc1d702169b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Aug 21 15:11:38 2023 +0000

    Bug 34388: Fix inconsistencies in Patron restriction types page headers
    
    This patch fixes a couple of inconsistencies in the style of the patron
    restriction types administration screen, making sure the restriction
    type name is consistently in single quotes in headings and formatting
    the deletion confirmation page like other administration interfaces.
    
    Note: This patch contains indentation spaces, so ignore whitespace when
    viewing the diff.
    
    To test, apply the patch and go to Administration -> Patron restriction
    types.
    
    - If necessary, add a custom restriction type.
    - After saving it, edit it.
    - The page title, breadcrumb, and page heading should match: "Modify
      restriction type 'X'
    
    - From the list of restriction types, click "Delete" on one of your
      custom restriction types.
    - On the deletion confirmation page you should see a standard
      alert-style dialog box and two button options: "Yes, delete" and "No,
      do not delete." Both should work correctly.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0ad83f95ec33dcdcbd341ce11d678eb457ec3ce2
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Aug 24 20:14:13 2023 +0000

    Bug 34584: (QA follow-up) Update system preference SocialNetworks
    
    SocialNetworks was set to be YesNo, but is actual choice with
    3 options: linkedin, facebook, email.
    
    This updates the database and the sysprefs.sql file.
    
    It doesn't correct the value, but if it still contains twitter, this
    will be fixed by the next change of the pref and has no negative
    consequences.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1162629cf09f1c7bbc3c938f470b24dc90100a6f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Aug 21 16:51:59 2023 +0000

    Bug 34584: Remove Twitter share button from the OPAC
    
    This patch removes the option to share content in the OPAC via Twitter
    now that Twitter doesn't exist anymore.
    
    To test, apply the patch and go to Administration -> System preferences.
    
    - Search for "SocialNetworks."
    - The menu of options should contain only email, Facebook, and LinkedIn.
    - Select all options and save.
    - In the OPAC, locate a bibliographic record and view its details.
    - In the right-hand sidebar, you should only see options to share via
      email, Facebook, and LinkedIn.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d3b7cf08949d5776b732f24cefcbe377260c281
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Aug 30 00:28:53 2023 +0000

    Bug 34650: Convert list toolbar delete into form POST
    
    This patch adds a HTML form with a CSRF token to POST the list delete,
    which is triggered by a click handler on the A element. The A element
    is still needed for existing style reasons.
    
    Test plan:
    0. Apply patch
    1. koha-plack --reload kohadev
    2. In the staff interface, add a list
    3. Go into that list (e.g. virtualshelves/shelves.pl?op=view&shelfnumber=X)
    4. From the toolbar click the "Edit" dropdown
    5. From the dropdown try either "Edit list" or "Delete list"
    6. Note no CSRF error and operation completes as expected
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit caf962fbaa4f52bfea12acfa02671cd6920f7a53
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Aug 30 00:07:23 2023 +0000

    Bug 34650: Remove unnecessary CSRF check on edit_form
    
    The op "edit_form" doesn't change state. It just renders the edit
    form. Therefore, it doesn't need a CSRF token/check.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7cab415f0b3d363761e773c728e976470c81337a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Aug 31 09:03:31 2023 +0200

    Bug 34609: Add missing test for Koha::Hold->biblio
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7b57163ef32e08179acd76b245b1b4f49aa93875
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Aug 30 13:12:31 2023 +0000

    Bug 34609: Add biblio method to Old::Hold
    
    Test plan, clean k-t-d:
    
    1) Add a reserve to koha/koha user, mysql run:
    insert into reserves(borrowernumber, reservedate, branchcode, cancellationdate, timestamp, biblionumber)
    VALUES (51, '2022-09-23', 'CPL', '2022-09-23', '2022-09-23 15:46:21', 76);
    
    2) Add an old_reserve to koha/koha user, mysql run:
    insert into old_reserves(borrowernumber, reservedate, branchcode, cancellationdate, timestamp, reserve_id)
    VALUES (51, '2022-09-23', 'CPL', '2022-09-23', '2022-09-23 15:46:21', 1);
    
    3) Visit holdshistory on either OPAC (requires OPACHoldsHistory sys pref) or STAFF
    STAFF/cgi-bin/koha/members/holdshistory.pl?borrowernumber=1
    OPAC//cgi-bin/koha/opac-holdshistory.pl
    
    4) Notice it blows up with a 500 error
    5) Repeat step 3
    
    Signed-off-by: Ray Delahunty <r.delahunty@arts.ac.uk>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eaa1a1d7e29d1421bf58f8215994e9ddfe8cdefa
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Aug 30 13:13:04 2023 +0000

    Bug 34609: Add tests
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5316b4c9cc1138c21a8ff05d2599784e2f6139ca
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Aug 31 16:18:56 2023 +0000

    Bug 34466: Add listener to enable or disable clear filter button on KohaTable.vue
    
    Test plan:
    Apply only the cypress test patch
    Run KohaTable_spec.ts
    Notice it fails
    
    Apply this patch, repeat
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 68baf8a7c13e77dc8fa5208665044498fa3f936c
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Aug 31 16:14:45 2023 +0000

    Bug 34466: Cypress tests
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 20586899d560f0f6106df423fd6ec729d8a0df9b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 25 15:59:12 2023 +0000

    Bug 34408: Inconsistencies in SMTP servers page titles, breadcrumbs, and header
    
    This patch updates the SMTP servers administration page in order to make
    the page title, breadcrumb navigation, and page headings consistent with
    each other.
    
    The patch also adds a space between the delete button icon and the text.
    
    To test apply the patch and go to Administration -> SMTP servers.
    
    - Confirm that the page header, breadcrumb navigation, and page headings
      are consistent on each view of the page:
      - Main page
      - New SMTP server
      - Edit SMTP server
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fb47d04efd0987bb173fb78d12c439d82e4e83ab
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Aug 25 16:41:12 2023 +0000

    Bug 34616: Move default server info outside the <fieldset>
    
    Also DRY current default information dialog block
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f0383e5f6a8025f6b50bdb32a287456375800e60
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Aug 25 16:36:20 2023 +0000

    Bug 34616: Fix showing default server info on edit SMTP server page
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b9d3997063344dcd04f6fac4810a9d3576c9e4c2
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Aug 25 14:14:35 2023 +0000

    Bug 34616: Add native bootstrap behaviour to default server dialog
    
    Test plan:
    Create a new SMTP server
    Tick the 'default server' checkbox
    Verify it now has a backdrop, closes if u click the backdrop or press 'esc'
    The Yes and No buttons are now styled properly
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 352a2afd0bf1b67c4c579d299c088604d131ae1a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Aug 30 16:21:37 2023 +0200

    Bug 34276: (bug 21983 follow-up) Fix db rev 23.06.00.002
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eb902d7a92b2e435890cff78c9c118a2a8280fa7
Author: Andreas Roussos <a.roussos@dataly.gr>
Date:   Sun Aug 27 23:42:49 2023 +0000

    Bug 31964: add a man page for koha-z3950-responder
    
    The koha-z3950-responder command does not have a man page.
    
    This patch fixes that.
    
    Test plan:
    
    1) Apply this patch.
    
    2) Run the following command to generate the new man page:
    
       xsltproc /usr/share/xml/docbook/stylesheet/docbook-xsl-ns/manpages/docbook.xsl debian/docs/koha-z3950-responder.xml
    
    3) View the generated man page with `man -l koha-z3950-responder.8`
    
       (KTD users may need to `apt-get install man-db` first as
       that package provides tools for reading manual pages)
    
    4) Make sure this unit test passes:
    
       prove -v xt/verify-debian-docbook.t
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e26d7c783eb8c70d318e402e3a90930afcff44cd
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jun 21 13:30:57 2023 +0000

    Bug 34066: Datatable options don't fully translate on list of saved reports
    
    This patch corrects the DataTable option for defining an alternate
    language string when no records are returned by a table filter. An
    obsolete version of the option name was breaking the existing custom
    option supplied by our datatables.js
    
    To test, apply the patch and go to Reports -> Use saved..
    
     - In the DataTable of existing reports, all the DataTable controls
       should look correct.
     - In the filter field at the top of the table, enter a string which
       will not be found. You should see a message, "No matching reports
       found."
     - Install another language if necessary, and switch to that language.
     - The labels on all the DataTable controls should show the terms which
       have been translated for that language.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 60cf53cf798b16138b53d6012f083caee06941f3
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Aug 25 10:28:58 2023 +0000

    Bug 34465: Make KohaTable.vue actions column not sortable
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cb4db13612da28c3a04114fbdb2c7005c13631ef
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Aug 11 20:53:44 2023 +0000

    Bug 34522: Pass the suggestion branchcode, not the suggester branchcode
    
    To test:
    1. Turn on OPACViewOthersSuggestions
    2. Log into OPAC as patron of Branch A
    3. Make purchase suggestion for Branch B
    4. Refresh /cgi-bin/koha/opac-suggestions.pl and see that suggestion appears to have been made for Branch A
    5. View suggestion from staff client - See that it accurately reflects suggestion having been made for Branch B
    6. Apply patch and try steps 2 - 5 again, this time you should see the proper branch.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8341ffe13db350f3d0c623e1f6ff6671e1944d82
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Aug 18 04:32:31 2023 +0000

    Bug 34571: Remove use of "onclick" for ExpandField in cataloguing editors
    
    This change replaces the onclick HTML attribute with a Javascript binding
    to make it more in line with Koha conventions and make it CSP compatible.
    
    Test plan:
    0. Apply patch
    1. Go to http://localhost:8081/cgi-bin/koha/cataloguing/addbiblio.pl?frameworkcode=#
    2. Try hiding/unhiding fields
    3. Try cloning fields and hiding/unhiding those too
    4. Note that everything works as expected
    5. Do the same thing for authorities by going to
    http://localhost:8081/cgi-bin/koha/authorities/authorities.pl?authtypecode=#
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0b992dd12ed657a9af516bac6a507bab395e9add
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Aug 18 03:02:30 2023 +0000

    Bug 34570: Remove use of "onclick" for PopupMARCFieldDoc()
    
    This change removes the "onclick" attribute for the MARC doc
    link in the cataloguing editor.
    
    Test plan:
    0. Apply patch
    1. Go to http://localhost:8081/cgi-bin/koha/cataloguing/addbiblio.pl?frameworkcode=#
    2. Click on the question mark (?) next to any of the MARC fields
    3. Press the "Repeat this tag" button
    4. Click on the question mark (?) on the cloned MARC field
    5. Note that both times it worked
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 275197f4052c1695994a978b9ade04b6fc38e910
Author: Michael Hafen <michael.hafen@washk12.org>
Date:   Thu Aug 24 10:27:36 2023 -0600

    Bug 34592: Patron Search filter fields needs to be at least an empty array
    
    If buildPatronSearchQuery() doesn't return an empty array when it exits
    early, then the code that adds the sort fields to the filters will fail.
    
    Test plan:
    
    - If there is not all ready a patron with a sort1 or sort2 value from
      the bSort1 or bSort2 authorized values, add an authorized value if
      necessary.
    - Add a patron if necessary, and set the patrons sort field to the added
      value.
    - In Tools -> Patron card creator start a new card batch.
    - Click on Add Patron(s) to open the patron search window.
    - Pick the value in either the sort1 or sort2 drop down.
    - Submit the page.  The page will reload and there won't be results.
    - Apply the patch, close the patron search window, clear the browser
      cache, reload the "New patron card batch" page, and open the patron
      search window again.
    - Repeat the search. There will be results.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cb6dd4e82be67977c5f58f10639a0e6f39219c0e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jun 23 16:02:43 2023 +0000

    Bug 34115: Use a global tab select function for activating Bootstrap tabs based on location hash
    
    This patch fixes automatic tab selection by location.hash in the MARC
    subfield editor. This allows links which target a specific subfield to
    open the page with the subfield tab selected.
    
    I've put this into a global function since it can be reused in multiple
    places: The about page and the checkout page have variations of this
    functionality which can be replaced with this function.
    
    The patch also corrects two links in Koha pointing to the About
    page which included the wrong location hash (changed in the switch to
    Bootstrap tab wrappers).
    
    To test, apply the patch and go to Adminstration -> Bibliographic
    frameworks.
    
    - View the MARC structure for any framework.
      - In the "Search for tag" input field, submit a tag and subfield which
        will be found in that framework, e.g. "245$a"
      - When you submit the form you should be sent to the MARC subfield
       structure page for that tag with the subfield tab automatically
       selected.
    - View the MARC subfield structure for any framework.
      - In the table of subfields, click the subfield link in the first
        column. You should be taken to the edit form with the corresponding
        tab selected.
    - Go to Circulation and check out to a patron. Append a tab anchor to
      the URL, e.g. "#holds_panel" and submit. You may have to shift-reload
      the page to see the change. (As far as I know no links in Koha take
      advantage of this)
    - Perform the same test on the patron detail page
    - Go to the About page and perform the same test with a tab anchor like
      "#team_panel" or "#sysinfo_panel"
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a5cadff4829eb62624ac839799b9b13c8cc7eac6
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Fri Aug 11 15:36:20 2023 +0000

    Bug 34095: Adjust logic so that shipment cost is empty if the receiving shipment cost is blank.
    
    Signed-off-by: Anneli Österman <anneli.osterman@koha-suomi.fi>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b3427f71aede6cf0c8915c1b3e0ef970d2f188de
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Mon Jul 31 09:48:18 2023 +0000

    Bug 34445: Set default budget in addorderiso2709.pl
    
    This patch allows the default budget to be used as a fallback if no budget is selected. Currently the default budget is set using lines 129-133 but then is never used.
    
    QA follow-up:
    - perl tidied
    - budget_codes changed to budget_ids for consistency
    
    Test plan:
    1) Apply patch
    2) restart_all
    3) Follow the steps from the bug description
    4) Order lines should be added properly
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] Rearranged comments
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 62a757acd1d370f442f49992933f998bb5b3702e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Aug 21 12:34:43 2023 +0000

    Bug 34307: (follow-up) Use template wrapper for title tag
    
    This patch updates the title tag to use a wrapper too, since Bug 33906
    is in the process of getting fixed.
    
    The patch also removes an extra <span> tag: Only the translatable string
    needs the span, not the entire line.
    
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a6ec493647f29843eed0fc9f7937944f2f39562c
Author: Victor Grousset <victor@tuxayo.net>
Date:   Sun Aug 20 04:22:44 2023 +0200

    Bug 34307: (QA follow-up) add <span> to have cleaner strings for i18n
    
    Cleaner strings are extracted this way.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e8a48054354613f96565a22c610145b0e946fc02
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Jul 19 05:35:35 2023 +0000

    Bug 34307: Update plugin template to match master conventions
    
    This change uses WRAPPER to build the breadcrumbs and
    updates the plugin template to follow some other master conventions
    like differentiating between Administration and Tools for plugins.
    
    Test plan:
    0. Apply patch
    1. Upload koha-plugin-test-wrapper
    2. Enable the plugin
    3. Click "Actions" and click "Run tool"
    4. Note how the plugin page looks like a perfect Koha Tools page
    5. Note that the plugin only contains 6 lines of template code
    to achieve this effect
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f2ecb1e9be38613e32800f0d96bfe7a139b0edbf
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Fri Jul 21 13:30:00 2023 +0000

    Bug 34340: Changed "Tendered" to the correct input id which is "Collected"
    
    Must also apply bug 34332 - fixed a syntax error for the pos email template
    
    To test:
    1. Configure your Koha to enable the point of sale system (i.e. enable syspref,
       set up a register, set up an item to sell).
    2. Complete a transaction in the POS system.
    3. Click on the “Email receipt” button next to the “Print receipt” option and
       enter an email address and confirm that the email is sent.
    4. Check the “Tendered” field. It is showing up as 0.00 and not reflecting the
       actual amount that was tendered.
    5. Apply patch
    6. Repeat steps 2 & 3
    7. The emailed receipt is now showing the correct tendered amount.
    8. Sign off!
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f8c474019d74c9fd608206daf3074a79c5737f12
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Jul 20 02:39:27 2023 +0000

    Bug 30362: Fix GetSoonestRenewDate to really return soonest renew date
    
    This change fixes GetSoonestRenewDate so that it returns the soonest
    renew date as calculated using "No Renewal Before" and "NoRenewalBeforePrecision".
    In the past, it would only return the soonest renew date if "$now" was
    lesser than it, which would typically only happen when using an "exact"
    precision rather than a "date" precision.
    
    Test plan:
    0. Apply the patch
    1. prove t/db_dependent/Circulation.t
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 95aa1c3da584c06ce439cc2d065e838790e7f6f9
Author: David Cook <dcook@prosentient.com.au>
Date:   Thu Jul 20 02:39:18 2023 +0000

    Bug 30362: Fix unit test
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 145788398ab6ef606bb9cb86a4783577b6f2d234
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 25 15:18:27 2022 +0000

    Bug 30362: Unit test
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3ed91683159206474505f697d0888919f77f8b4c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Aug 17 13:06:01 2023 +0000

    Bug 34567: Correct colors for advanced cataloging editor status bar
    
    This patch updates the advanced cataloging editor CSS so that the
    "status bar" footer below the editor has colors consistent with the
    staff interface redesign.
    
    To test, apply the patch and clear your browser cache if necessary.
    
    - Enable the EnableAdvancedCatalogingEditor preference if necessary.
    - Go to Cataloging -> Advanced editor.
    - At the bottom of the screen below the editor the "status bar" should
      have a green border that matches color in the header search bar.
    
    Signed-off-by: Chris Cormack <chris@bigballofwax.co.nz>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 298043edb73f2f18b93a91135bc348aeffc428c9
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Aug 23 14:45:27 2023 +0000

    Bug 34598: Improve handling of not found ILL request
    
    1) Enable ILLmodule and install FreeForm, run:
       bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev.sh)
    2) Visit a request that doesn't exist (assuming empty illrequests table):
       INTRA/cgi-bin/koha/ill/ill-requests.pl?method=illview&illrequest_id=1
    3) Verify an error 500 is returned with message "Can't call method
       "backend_illview""
    4) Apply patch
    5) Repeat steps 1-3. Verify that a "ILL request not found." message is
       now displayed
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1e9d4dfdd58e61f384c8704c7028774fa8679cab
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Aug 30 08:51:17 2023 -0300

    Bug 34601: Fix wrong quote
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7d5dc65867a55045fa32189d177379e70ecf5725
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Aug 28 10:59:29 2023 +0000

    Bug 34627: CMS pages do not correctly display the opaccredits footer
    
    This patch corrects the page structure of CMS pages in the OPAC so that
    the contents of the footer, including opaccredits, OpacKohaUrl, and the
    language selection bar, are displayed correctly.
    
    This patch contains indentation changes, so ignore whitespace when
    viewing the diff.
    
    To test you should have these settings:
    
    - OpacKohaUrl enabled in system preferences
    - Some content in the opaccredits HTML customization region
    - Some content in the OpacNav HTML customization region
    - At least one translation installed and enabled
    - The opaclanguagesdisplay preference enabled
    - The OpacLangSelectorMode set to "only footer" or "both top and footer"
    
    - Apply the patch and go to Tools -> Pages and create a page with the
      display location "OPAC."
    - Open the OPAC link for your newly-created page and confirm that the
      page looks correct:
      - The "main" region with the white background should contain the
        breadcrumb navigation, the sidebar OpacNav content, and the contents
        of your CMS page.
      - The opaccredits and OpacKohaUrl content should appear below that
        region.
      - The language selection footer should be at the bottom of the page.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c26dff61e729df5c782840dfe29f032c83e0e14b
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Aug 8 21:44:24 2023 -1000

    Bug 34505: Patron invalid age in search_for_data_inconsistencies.pl skip expired patrons
    
    Bug 26311 added patron invalid age in search_for_data_inconsistencies.pl
    But this is not relevant for expired patrons, especially in child categories.
    Check should skip expired patrons
    
    1) Set a non-expired patron with invalid age
    2) Run misc/maintenance/search_for_data_inconsistencies.pl
    => Check you see the patron
    3) Edit patron to be expired
    4) Run misc/maintenance/search_for_data_inconsistencies.pl
    => Check you do not see the patron
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] If we do not want to test valid age for expired patrons, you should
    obviously test expired first. Reversing the order in the test.
    Putting it in the search criteria would be nicer but leads to more
    complicated code.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 39ea14846c2645dc5e3135846ff121c841acaa5a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 25 18:38:11 2023 +0000

    Bug 33910: (follow-up) Remove mistaken addition of 'USE raw'
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f1975ff68ea16ab0d5df3bcba3a7c3f0ba783c14
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 6 15:05:17 2023 +0000

    Bug 33910: Improve translation of title tags: Authorities
    
    This patch updates authorities templates so that title
    tags can be more easily translated.
    
    To test, apply the patch and confirm that the following authorities
    pages have the correct title tags:
    
    - Authorities -> Authorities home page
      - Authority search results
        - Authority details
          - Edit authority
          - Merge authorities
    - Cataloging -> New or edit record
      - Trigger the authority search plugin on a field which is linked to an
        authority type.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1ce37bf5297d394bcda1d82a2a2072a7881f7b95
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Aug 24 20:55:37 2023 +0000

    Bug 33913: (QA follow-up) Move variables into strings
    
    To test:
    
    1) Checking out to {patron}
    * Search for any patron
    * Click on cardnumber in patron search results
    * Verify that page title reads correctly and includes patron's name
    
    2) Batch check out to {patron}
    * Activate BatchCheckouts system preference
    * Check all patron categories for BatchCheckoutsValidCategories
    * Go to any patron account
    * Click on batch checkout tab
    * Verify that the page title reads correctly and includes patron's name
    
    3) Place a hold on {title}
    * Search for a record with items in the staff interface catalog
    * Click on 'place holds'
    * Verify that the page title reads correctly and includes the title of the record
    
    4) Overdues as of {date}
    * Set DateFormat system preference to any other than default
    * Go to circulation > overdues
    * Verify the page title includes today's date in the correct format
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5c62994abd122635af73d137b0415d75929905fd
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 6 15:13:18 2023 +0000

    Bug 33913: Improve translation of title tags: Circulation, holds, and ILL
    
    This patch updates circulation, holds, and ILL templates so that title
    tags can be more easily translated.
    
    To test, apply the patch and confirm that the following pages have the
    correct title tags:
    
     - Circulation -> Article requests
     - Catalog -> Bibliographic record -> Items -> View item's checkout history
     - Circulation -> Overdues with fines
     - Circulation -> Transfers
     - Circulation -> Checkout notes
     - Circulation -> Circulation home
     - Circulation -> Check out
     - Circulation -> Batch checkouts
     - Circulation -> Curbside pickups
     - Circulation -> On-site checkouts
     - Circulation -> Overdues
     - Circulation -> Holds to pull
     - Circulation -> Checkout to patron -> Print slip
     - Circulation -> Renew
     - Catalog -> Bibliographic record -> Request article
     - Circulation -> Hold ratios
     - Circulation -> Check in
     - Circulation -> Set library
     - Circulation -> Transfers to receive
     - Circulation -> Transfers to send
     - Circulation -> Holds queue
     - Circulation -> Holds awaiting pickup
     - ILL requests
     - Catalog -> Bibliographic record -> Holds
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1f71c971e3fcd9f7c7f19a6e28f6e68bf217e4e9
Author: Pascal Uphaus <pascal.uphaus@gwdg.de>
Date:   Thu Aug 17 11:58:24 2023 +0000

    Bug 34240: Added hint about having to use Koha-to-MARC mappings for Koha link in frameworks
    
    To test:
    1. Go to administration > marc bibliographic framework > choose framework > marc structure
    choose any tag
    2. go to actions and edit subfields
    3. check that the koha link pulldown can not be edited
    => There is no hint
    4. Apply patch
    5. Refresh the page, the select box is replaced by text and there is a hint on how to edit
    
    Signed-off-by: Christina Fairlamb <cjf@wmu.se>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d2ff2f80a17295ef0c6af926722fe2cc0ac3efe
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 6 15:18:02 2023 +0000

    Bug 33920: Improve translation of title tags: Patrons
    
    This patch updates patron module templates so that title
    tags can be more easily translated.
    
    To test, apply the patch and confirm that the following patron-related
    pages have the correct title tags:
    
    - Patrons home page
      - Patron search ->
        - Select two patrons -> Merge selected
      - Add patron ->
        - Add a patron with the same name and email address ->
          - Click "View existing record" in "Duplicate patron record?"
            dialog.
    - Patron details
      - Manage API keys (must have RESTOAuth2ClientCredentials enabled)
      - Accounting
        - Transactions
          - Print fee receipt
          - Print invoice
          - Make a payment
        - Create manual invoice
        - Create manual credit
      - Routing lists (must have RoutingSerials enabled)
      - Circulation history
      - Notices
      - Statistics
      - Files (must have EnableBorrowerFiles enabled)
      - Purchase suggestions
      - Discharges (must have useDischarge enabled)
      - Housebound (must have HouseboundModule enabled)
      - ILL requests history (must have ILLModule enabled)
      - Set permissions
      - Change password
      - Print summary
      - Print account balance
      - Two-factor authentication (must have TwoFactorAuthentication
        enabled)
      - Edit patron
      - Update child to adult patron:
        - Must have more than one "adult" type category defined
        - Locate a patron with a "child" type category
        - Choose More -> Update child to adult patron
      - Delete patron (confirmation page)
    - Pending discharge requests
    - Patrons requesting modifications
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 749783debf95abd69410c62f119627564ae092ed
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jul 19 16:15:13 2023 -0300

    Bug 34313: Add patron information in pass validation response
    
    This patch makes the password validation response return the following
    patron attributes to the API consumer:
    
    * cardnumber
    * userid
    
    This will give hints on what was used to validate in the fallback
    bahvior the endpoint has.
    
    To test:
    1. Apply the unit tests patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/password_validation.t
    => FAIL: The endpoint doesn't return this valuable data
    3. Apply this patch
    4. Repeat 2
    => SUCESS: Tests pass! We got the cardnumber and the userid!
    5. Sign off :-D
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eeef7839fbbf72637b9d7eccf84ec62760b9cd23
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jul 19 16:14:46 2023 -0300

    Bug 34313: Unit tests
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit edad82662cf00e60bf228cd838ae86bdc1f36143
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Aug 17 17:25:56 2023 +0000

    Bug 34356: Make sort order always default to correct column
    
    To test:
    1- Check out an item to a patron
    2- View checkout history, default sort is on 'Date due'
    3- Enable RecordStaffUserOnCheckout
    4- View checkout history, default sort is on 'Checked out by'
    5- Apply patch
    6- Table should sort to 'Date due' no matter what the sys pref is set to
    
    Signed-off-by: Jason <jrobb@sekls.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f2d7149603087ea535a63bcce2b2560a85316560
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 18 11:18:45 2023 +0000

    Bug 34384: Fix inconsistencies in Library transfer limits page titles, breadcrumbs, and heading
    
    This patch makes a few minor corrections to the library transfer limits
    pages, both basic and advanced, standardizing on the name "Library
    transfer limits" for page title, breadcrumb navigation, and page
    heading.
    
    To test, apply the patch and go to Administration -> Library transfer
    limits.
    
    - Confirm that the page shows "Library transfer limits for [library]
      [library code]"
    - Breadcrumb navigation, page title, and heading should match.
    - Swith to the advanced editor
    - The title should now be simply "Library transfer limits"
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8460158f6bf9596e933c496d86ce0591e1cfe2bc
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 18 11:43:15 2023 +0000

    Bug 34386: Fix inconsistencies in Cities and tows page titles, breadcrumbs, and header
    
    This patch updates the cities administration page so that page title,
    breadcrumb navigation, and headings are consistent with each other and
    with other parts of Koha.
    
    To test, apply the patch and go to Administration -> Cities and towns.
    Check each variation of the page to confirm that page title, breadcrumb
    navigation, and heading are correct.
    
    - Main page (listing cities)
    - New city
    - Edit city
    - Delete city
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4b3c14df4d95ebe69d39a5a4e10afeb1e36fa789
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 18 10:03:49 2023 +0000

    Bug 34382: Fix inconsistencies in Patron categories page titles, breadcrumbs, and header
    
    This patch makes some changes to the patron categories administration
    page so that the page title, breadcrumb navigation, and headings are
    more consistent with each other.
    
    To test, apply the patch and go to Administration -> Patron categories.
    
    - Test all variations of the page:
      - Main page (listing categories)
      - New category
      - Edit category
      - Confirm deletion of category when the category is in use (there are
        existing patrons who have that category)
      - Confirm deletion of category when the category is not in use
    
    Note: This patch contains whitespace changes, so please ignore
    whitespace if you're checking the diff.
    
    Signed-off-by: Amanda Hovey <amanda.hovey@parliament.nsw.gov.au>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c263a45450521feed6d1259fcd9a914f023a361a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 18 09:07:59 2023 +0000

    Bug 34381: Correct inconsistencies in Authorized values page title
    
    This patch rewords the authorized values template title logic so that it
    matches the breadcrumb navigation for consistency.
    
    To test, apply the patch and go to Administration -> Authorized values.
    
    Test all versions of the page to confirm that the breadcrumbs and page
    title are consistent with each other:
    
     - Main view
     - New category
     - View category (click a category, e.g. CCODE, in the main view)
     - Add authorized value
     - Edit authorized value
    
    Signed-off-by: Christian Nelson <christian.nelson@uwasa.fi>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 879f7db9e8f835c699ad2a0c8ff9adcb4d7b5d6e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 18 08:52:06 2023 +0000

    Bug 34379: Fix label of new library group button
    
    This patch corrects the label on the button for creating a new library
    group, changing it from "Add group" to "New group" for consistency.
    
    To test, apply the patch and go to Administration -> Library groups.
    Confirm that the button is now labeled "New group" and that it
    still works to trigger the library group creation modal.
    
    Signed-off-by: Andrew <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3c5b129f1d33c83b390cda2d6db43a073ada5f65
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 18 08:39:50 2023 +0000

    Bug 34378: Fix inconsistencies in Libraries page titles, breadcrumbs, and header
    
    This patch makes changes to the libraries administration page so that
    the page title, breadcrumbs, and page headings are more consistent with
    each other.
    
    To test, apply the patch and go to Administration -> Libraries.
    
    - Click "New library"
    - The page title, breadcrumb navigation, and page heading should all
      read "New library"
    - Enter some details, save your new library, and then click the "Delete"
      button corresponding to your new library.
    - On the deletion conformation page, the page title and breadcrumb
      navigation should match, "Confirm deletion of library 'X'"
    - Edit a library. On the edit page, the page title, breadcrumb
      navigation, and page heading should match: "Modify library 'X'"
    
    Signed-off-by: paul <paul.poulain@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c7daaa901b6ec8a0fa6e2b0a8ffb7f9e6befbc5e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Aug 18 11:32:42 2023 +0000

    Bug 34385: Correct page heading of transport cost matrix page
    
    This patch corrects the main heading on the transport cost matrix page
    so that it matches the page title and breadcrumb navigation.
    
    To test, apply the patch and go to Administration -> Transport cost
    matrix. Confirm that the page heading reads "Transport cost matrix."
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1156b3683b7231560c18e8001fc97777d007c899
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jul 21 11:38:32 2023 +0000

    Bug 25023: Claims returned dates not formatted according to dateformat preference
    
    This patch updates the code for rendering the claims returned table on
    the checkout and patron detail pages. Now the dates are formatted using
    the global js-date-format.inc code.
    
    To test, apply the patch and make sure the claims returned feature is
    enabled by setting a value in the ClaimReturnedLostValue system
    preference.
    
    - Check out some items to a patron.
    - Under the checkouts tab, mark several checkouts as "Claim returned."
    - Open the claims tab.
    - The dates in the "Created on" column should be formatted according to
      your dateformat system preference.
      - Change the dateformat preference and return to the checkouts page.
        Confirm that the claims tab shows dates formatted correctly.
    - The "created on" and "updated on" columns should sort correctly with
      any dateformat setting. You may have to directly modify the dates in
      the database in order to have the right data for testing this.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f1078daf8f496e1b4234acf766578c511ca8aad1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 6 16:13:22 2023 +0200

    Bug 34219: Allow getAll to receive additional URL parameters
    
    It's not possible to pass additional URL parameters. We need it at least for bug 32474.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bd28eae578c215f5dc27dae6d4ce262e523f2de4
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Aug 24 12:22:23 2023 +0000

    Bug 34331: Use register from userenv if parameter not passed
    
    To recreate:
    1. Enable the "EnablePointofSale" syspref.
    2. Set the "UseCashRegisters" syspref to use.
    3. Create 3 new registers (Register A, B and C) with a float amount of $25.
    4. Under POS, configure 3 new debit types (i.e. Copies, Earbuds, Friends Donation)
    -- You can leave the default amounts blank, or add an amount if desired.
    -- Set "Can be manually invoiced?" and "Can be sold?"
    5. Under point of sale make a $5 sale of copies under Register A.
    6. Under point of sale make a $10 sale of earbuds under Register B.
    7. Under point of sale make a $100 sale of Friends Donation under Register C.
    8. At circ/set-library.pl set your register to Register A.
    9. Go back to POS and view the "Transaction history for Register A" - it shows the correct amount of $5 sold in copies.
    10. Go back to circ/set-library.pl and change your register to Register B.
    11. Go back to POS and view the "Transaction history for Register B" - it shows the incorrect transaction history. It is showing the transaction history for Register A.
    12. Go back to circ/set-library.pl and change your register to Register C.
    13. Go back to POS and view the "Transaction history for Register C" - it shows the incorrect transaction history. It is showing the transaction history for Register A.
    14. Apply patch, repeat. The correct transactions should now show.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 004bde79508b0248458aad4892b70bdcc9ab7f1d
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Thu Aug 10 13:26:54 2023 +0000

    Bug 33759: Fix typo 'Thankyou' in sample notices
    
    This fixes the typo 'Thankyou' in some of the sample notices.
    
    To test:
    * With the sample data
    * Create and run a report:
      SELECT code,content FROM letter where content LIKE "%Thankyou%";
    * Verify 3 notices contain 'Thankyou'
    * Apply patch
    * Drop your database
    * Run the web installer
    * Run report again, you should no longer get any results
    
    Signed-off-by: Alexander Wagner <alexander.wagner@desy.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8d78ba7ff2612f784b97e76d881899b9cb8fa342
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Aug 14 11:49:43 2023 +0000

    Bug 34341: Revert Bug 34072: Holds queue search interface hidden on small screens
    
    This patch undoes the changes made by 34072 because they have had a more
    far-reaching effect than was expected. I have never been able to
    reproduce Bug 34072 before the patch.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    - Go to Circulation -> Holds queue
    - Try adjusting the width of the browser window to confirm that it is
      responsive at various widths.
    - When the viewport width is below 768 the page layout will adjust, and
      the contents of the sidebar will drop below the table of holds. This
      is consistent with other pages in the staff interface.
    - Check that the corrected CSS has resulted in a correction to the
      layout of submit buttons in forms:
      - For example, in Administration -> Cities and towns -> New city.
      - Before the patch there was no padding between the submit button and
        the white fieldset containing the form fields.
      - After the patch the correct padding has been restored.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f2be2cedc5e721e715a98b18299c55a0fdfa61d1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Aug 15 08:38:20 2023 +0000

    Bug 34533: jsdiff library missing from guided reports page
    
    This patch restores the inclusion of the jsdiff JS library on the guided
    reports page when displaying saved SQL reports. This fixes a JS error in
    the browser console when the user tries to use our automatic update on
    SQL reports which use an older syntax.
    
    The patch also corrects a problem with svc/convert_report which was
    causing an error when trying to display the diff information.
    
    To test, apply the patch and restart services.
    
    - Go to Reports -> Create from SQL.
    - Add a report which is based on an older db structure. The example I
      found was:
    
      SELECT biblionumber,
      ExtractValue(marcxml,'//datafield/@tag/text()[substring(.,1,1) = "5"]') as 'notes'
      FROM biblioitems
      HAVING notes <> ''
    
    - Save the report and go to the list of saved reports. There should be
      an "Update" column in the table, with a message about your newly-added
      report:
    
      "This report seems obsolete, it uses biblioitems.marcxml field."
    
    - Clicking the "Update SQL" button should trigger a modal window that
      shows the before an after versions of the report. There should be
      no error in the browser console. Unfortunately the diff will not
      display because of a separate bug in svc/convert_report
    
    Signed.off-by: Jessie Zairo <jzairo@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fb48155cc4bdb17935c7d3cd4bdd4e74695d3948
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Aug 17 11:37:30 2023 +0000

    Bug 34565: Label mismatch in MARC21 006 and 008 cataloging plugins
    
    This patch modifies the JS which builds the table of options for
    populating MARC21 fields 006 and 008 when using the cataloging plugin.
    
    To test, apply the patch and go to Cataloging -> New record.
    
    - Click the plugin trigger link next to the 006 input field (you may
      need to click the tag to expand it.
    - In the table of input fields, test that clicking the label, e.g. "Type
      of material", "00 - Form of material," etc,  moves focus to the
      corresponding form field.
    - Perform the same test on the plugin-popup for field 008.
    
    Signed-off-by: Andrew <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ac3351d4a475561a6eea76f68a01bd7ea3be45a3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 5 14:47:41 2023 +0200

    Bug 34129: Fix plus and minus icon
    
    This patch fixes the plus and minus on the buttons to expand the columns
    in mobile or zoomed in view.
    
    To test:
    1. Apply the patch
    2. Rebuild css (yarn build)
    3. Go to the OPAC and search for a record with an item
    4. Zoom in to 400% or change view to mobile
    --> The items table should have a plus (+) button in the last column to
    expand and have the rest of the information
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3b9de04b8917a62e1e8d143c2c4f5e8a6abdd81a
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Aug 24 19:48:44 2023 +0000

    Bug 34601: (QA follow-up) Fix edit/delete links in toolbar
    
    We also need to fix the links in the toolbar visible when
    'viewing' the suggestion.
    
    1) Create a suggestion
    2) Click on the title
    3) Click edit > CSRF error
    4) Click delete link in toolbar > CSRF error
    5) Apply patch and repeat
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b630dfcb080ddbca5e7f14a9c9863989f0252ea3
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Aug 23 18:18:57 2023 +0000

    Bug 34601: Fix edit/delete links on suggestion.tt
    
    1. Make a suggestion
    2. Try to edit, delete the suggestion.
    3. Error:
    4. Apply patch and restart_all
    5. Try again and you should not get the error anymore.
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bee56606a6cf6b7f42578ed615d5a333b312d252
Author: Andreas Roussos <a.roussos@dataly.gr>
Date:   Tue Feb 21 20:02:19 2023 +0100

    Bug 29578: Upgrade the jQuery highlighter plugin
    
    Under certain conditions, the jQuery term highlighter
    can break and in the process make the "Highlight" /
    "Unhighlight" button disappear altogether. This affects
    catalog searches in both the OPAC and the Staff Client,
    with UNIMARC-based instances affected the most as the
    "Highlight" / "Unhighlight" button disappears if you
    perform a specific OPAC search (see Test plan below).
    
    This patch fixes that by upgrading the highlighter
    plugin to its latest version for both the OPAC and
    the Staff interface. Then, the changes from commit
    2e4b574074 (Bug 5844) are applied to the plugin code.
    Also, Koha uses "term" instead of "highlight" as the
    class name for the <span> highlighting elements, so
    the plugin code is modified for that aspect, too.
    Finally, the plugin file is renamed to reflect the
    version change (v3 -> v5) and all references to the
    old filename in the Template files are updated.
    
    Test plan:
    
    0) In a UNIMARC instance, catalogue two books using
       the titles given below (Title subfield = 200$a):
    
       Book 1: Συλλογής των εν επιτομή τοῖς πάλαι γεωγραφηθέντων
       Book 2: Επιτομή της ιστορίας των Βαλκανικών Πολέμων (1912-1913)
    
    1) OpacHighlightedWords and StaffHighlightedWords
       should both be set to "Highlight".
    
    2) Search the OPAC for "επιτομή των" (without the
       quotes). In the results page, notice that:
    
       a) You get an Uncaught DOMException error in the
          web browswer's JavaScript Console (press F12):
          "Failed to execute 'splitText' on 'Text': The
          offset 3 is larger than the Text node's length."
       b) the "Highlight" / "Unhighlight" button vanishes
       c) some search terms matches are not highlighted
          (for example "των" in the 2nd Book)
    
    3) Repeat the same search in the Staff interface.
       In the results page, notice that:
    
       a) You get an Uncaught DOMException error in the
          web browswer's JavaScript Console (press F12):
          "Failed to execute 'splitText' on 'Text': The
          offset 3 is larger than the Text node's length."
       b) Even though some terms are highlighted, the
          button still says "Highlight"
       c) some search terms matches are not highlighted
          (for example "των" in the 2nd Book)
    
    4) Apply this patch.
    
    5) Repeat the searches (you may have to press CTRL-F5
       to reload the JavaScript code). This time the
       "Highlight" / "Unhighlight" button is displayed
       in the OPAC, and all your search terms should be
       highlighted in yellow. Toggling the highlight
       should cause no problems, and there shouldn't be
       any errors logged in your browser's Console.
    
    Signed-off-by: Christian Nelson <christian.nelson@uwasa.fi>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e0007bf3623a6e58091eb233c95610761ac33a9e
Author: Kevin Carnes <kevin.carnes@ub.lu.se>
Date:   Fri Aug 18 13:37:51 2023 +0200

    Bug 27496: Accessibility: Navigation buttons are poorly described by screen readers
    
        This patch adds aria-haspopup and aria-expanded attributes to the language
        and welcome user buttons so that screen readers will know that they cause a
        popup menu to be displayed.
    
        To test:
        1. Use an installation with at least 2 active languages
        2. Log in the OPAC
        3. Use a screen reader (e.g. ChromeVox in Chrome) and use the tab key to
           navigate to the language and welcome user buttons while noticing that
           they are described as "Button collapsed" and "Button", respectively
        4. Alternatively, inspect the buttons and notice that they are missing
           aria-haspopup and aria-expanded attributes
        5. Apply the patch
        6. Observe that these buttons now are described as "Popup button collapsed"
           or that they contain the aria-haspopup and aria-expanded attributes like
           the lists button
        7. Sign off
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 77ee1ca74317f8e2ffa1a5dcccaffa4081a508da
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Aug 9 17:39:45 2023 +0000

    Bug 34509: Use select2 to load vendors on basket creation
    
    This patch moves the dropdown to use select2 and avoids loading all
    vendors at page load.
    
    To test:
     1 - Create some extra vendors in your system, ideally over 20
     2 - Search for a vendor in acquisitions
     3 - Click 'New->basket'
     4 - Note the dropdown of all vendors
     5 - Choose a vendor and create a basket
     6 - Apply patch
     7 - Repeat
     8 - Note only a partial list of vendors is loaded
     9 - Search in the dropdown and confirm vendors are returned
    10 - Select a vendor and create the basket
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b679c8221141d7b998bf7600f06b48908ac0b83a
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Aug 11 13:08:15 2023 +0000

    Bug 34518: Fix 'Renew all' button in OPAC
    
    Test plan:
    - Checkout an item to koha user (42)
    - Log-in to OPAC and visit user summary to see check-outs
    - Press 'Renew all' button at the bottom, notice it doesn't work.
    - Apply patch. Repeat and verify it now works
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1403fd847a66432efda2c8724f61bcc6e413cda9
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Jul 24 15:42:57 2023 +0000

    Bug 34364: Fix progress bar progress update
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a05dff84ebae55b0c02538c2689b9c3eaa6b9484
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Aug 1 16:40:03 2023 -0300

    Bug 34024: (QA follow-up) Allow pickup location changing for in transit holds
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3870b5a068be06ef4d177b8f0701f6c3d967f431
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 31 14:00:36 2023 -0300

    Bug 34024: Unit tests
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a1b5bd95341b81deec29493997e824c84849001e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 31 14:26:01 2023 -0300

    Bug 34024: Block changing pickup location for found holds
    
    This patch adds a check on holds for 'found' statuses. Holds with the
    following statuses have special workflows in Koha, and overwritting
    their pickup locations yields uncertain scenarios:
    
    * Waiting: the item has probably been put on a special shelve
    * In transit: the item is travelling to a new destination, and changing
      the pickup location should include some validations, and probably
      generate some notifications. At least.
    * In processing: the item has already been taken out of the shelve for
      some internal processing. Changing the pickup location could interfere
      with this workflow. Overriding this limitation could be introduced
      with care on a separate report.
    
    To test:
    1. Apply the unit tests patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/holds.t
    => FAIL: Tests don't pass. Holds go through (200) instead of being
    rejected (409).
    3. Apply this patch
    4. Repeat 2
    => SUCCESS: Tests pass!
    5. Sign off :-D
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 58893f4c0b3afdcce752d5d87219f5c161126744
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon Jul 3 23:52:53 2023 +0000

    Bug 34193: SSLProtocol enable in use versions and disable deprecated versions
    
    This patch changes the default SSLProtocol for the Let's Encrypt
    HTTPS template, so that it enables in use versions of TLS while
    disabling the deprecated versions of TLS.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 13d3e87503232201b4cfae15dd3a8c6e39a6e44b
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Mon Feb 27 14:35:15 2023 +0000

    Bug 30846: (follow-up) Unit tests
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Bug 30846: (Fix) Unit tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a09a9264584cd6d50f18f4bbea38622fbd60b8b0
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Mon Jan 23 15:41:41 2023 +0000

    Bug 30846: 'If any unavailable' doesn't consider negative notforlan values as unavailable
    
    When we set up a circulation rule where 'On shelf holds allowed' is 'If any unavailable' and we have a record with one 'Ordered' item, we cannot place this item on hold.
    
    This patch allows placing hold on item with negative not for loan values, when using rule with 'On shelf holds allowed' set to 'If any unavailable'
    
    To test:
    
    1. Set up a circulation rule where on shelf holds are not allowed and force the choosing of an item (to facilitate the test)
        1.1. Go to Administration > Circulation and fines rules
        1.2. In the matrix, add a circulation like this
              - Patron category: All
              - Item type: Books
              - Current checkouts allowed: 10
              - Current on-site checkouts allowed: 10
              - Loan period: 21
              - Holds allowed (total): 10
              - Holds allowed (daily): 10
              - Holds per record (count): 10
              - On shelf holds allowed: If any unavailable
              - OPAC item level holds: Force
        1.3. Click Save
    2. Create a record with one 'Ordered' item (or any negative value not for loan status)
        2.1. Go to Cataloging
        2.2. Click New record
        2.3. Fill out the mandatory fields (by default in MARC21: 000, 003, 005, 008,  040, 245, and 942 (942 should be set to Books))
        2.4. Click Save
        2.5. Fill out the following item fields
              - Not for loan: Ordered
              - Koha item type: Books
        2.6. Click Add item
        2.7. Click Normal to go to the detailed record
    3. Try to place a hold on the 'Ordered' item
        3.1. From the detailed record, click OPAC view: Open in new window.
        --> Note that the 'Place hold' option is not present
    4. Add a second 'Available' item
        4.1. Back in the staff interface tab with the detailed record, click New > New item
        4.2. Make sure the item type is set to Books
        4.3. Add a barcode in p
        4.4. Click Add item
    5. Try again to place a hold on the 'Ordered' item
        5.1. Go back to the OPAC tab and refresh the page
        --> Note that the 'Place hold' option is still not present
    6. Check out the available item to a patron
        6.1. In the staff interface tab, copy the barcode from the available item
        6.2. Go to Patrons
        6.3. Click on Search
        6.4. Click Check out next to one of the patrons
        6.5. Paste the barcode in the box and click Check out
    7. Try again to place a hold on the 'Ordered' item
        7.1. Go back to the OPAC tab and refresh the page
        --> Note that the 'Place hold' option is now present
        7.2. Click Place hold
        --> Note that only the checked out item is available to place on hold, if you click Show unholdable items, it will show the Ordered item, but you can't place a hold on it.
    8. Apply the patch
    9. Go to the OPAC tab and click on the book title right next to 'Place a hold on' checkbox to go back to the record details.
            --> Note that the 'Place hold' option is still present
            9.1. Click Place hold
            --> Note that you can now place a hold on the 'Checked out' or the 'Ordered' item.
    10. Check in the item to make it available again
        10.1. In the staff interface tab, click on 'Show checkouts' button
        10.2. Select the Checked out item and click on 'Renew or check in selected items' button.
    11. Try again to place a hold on the 'Ordered' item
        11.1. Go back to the OPAC tab and click on the book title right next to 'Place a hold on' checkbox to go back to the record details.
        --> Note that the 'Place hold' option is still present
        11.2. Click Place hold
        --> Note that only the 'Ordered' item is available to place on hold, if you click Show unholdable items, it will show the Available item and you can't place a hold on it.
    12. Delete the available item to keep only the Ordered item
        12.1 in the staff interface tab, click on 'Search catalog' and search for the record
        12.2 click on 'Edit' then 'Edit items'
        12.3 Delete the available item
    13. Try to place a hold on the remain 'Ordered' item
        13.1 Go back to the OPAC tab and click on the book title right next to 'Place a hold on' checkbox to go back to the record details.
            --> Note that the 'Place hold' option is present
        13.2. Click Place hold
        --> Note that you can place a hold on the Ordered item.
    
    Signed-off-by: Amaury GAU <amaury.gau@bulac.fr>
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cbee8477976f2424a49867ab39fcbcc53ad7cf53
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Mar 12 12:24:00 2015 -0400

    Bug 12421: no way to get back to search results from overdrive results
    
    When on your search results you can click the link to overdrive results,
    but then you can't get back to your catalog search results, the
    line that links to the results should be there on both pages.
    
    Test Plan:
    1) Apply this patch
    2) Enable Overdrive searching
    3) Perform a search
    4) View the overdrive results
    5) Note the "Catalog search for '$q'" link in the breadcrumbs
    6) Click the link
    7) Note you return to the search results page
    
    Signed-off-by: Barry Cannon <bc@interleaf.ie>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e645bf152dd639d4464be4a436304c5e9e3a43ec
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Jul 24 10:23:41 2023 +0000

    Bug 34351: Add link to access_url
    
    On k-t-d
    1) Run bash <(curl -s https://raw.githubusercontent.com/ammopt/koha-ill-dev/master/start-ill-dev.sh)
    2) Create a new Freeform request
    3) Update access_url field. Run this mysql query:
    update illrequests set accessurl = https://koha-community.org/;
    4) Visit ill table list at /cgi-bin/koha/ill/ill-requests.pl
    5) Verify access url is not clickable
    6) Apply patch. Refresh. Verify it's now clickable.
    
    Signed-off by: Jeremy Evans <Jeremy.Evans@ukhsa.gov.uk>
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3ac122f47d18fe527c6c789a664d4c2b401f5e4c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jul 24 10:36:18 2023 +0000

    Bug 34343: Update style of fixed footer navbar in Z39.50 searches
    
    We use a Bootstrap fixed navbar in the footer of two pages: the popup
    Z39.50 searches in cataloging and authorities. The style of these
    footers needs to be udpated for the new staff interface design.
    
    This patch also changes the style of the "cancel" controls in these
    footers from links to buttons. The popup window in cataloging has been
    adjusted to be the same size as the one in authorities.
    
    To test, apply the batch and rebuild the staff interface CSS.
    
    - Go to Cataloging -> New from Z39.50/SRU.
      - In the popup window, the form should fit comfortably in the window.
      - The footer should be white with a grey border at the top, with
        Bootstrap-styled buttons aligned to the right.
    - Perform the same test in Authorities -> New from Z39.50/SRU
    - Install and enable an additional translation so that you can confirm
      that the language-selection footer still has the correct style.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d8054e30fcc8ee402e0e7d96f68bc1b35f41ad4f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jul 25 15:32:44 2023 +0000

    Bug 31667: Merge 'tip' and 'hint' classes
    
    This patch corrects a few instances of the use of the "tip" class and
    replaces them with "hint." The patch also removes the class from the
    staff interface CSS.
    
    To test, apply the patch and rebuild the staff interface CSS.
    
    - View a patron account and click the "Routing lists" link in the
      left-hand sidebar.
      - On the subscription routing lists page the "Search subscriptions"
        page label should look correct.
    - Go to Reports -> Catalog by item type.
      - The "Select none..." hint should be styled correctly.
    - The third instance, in the installer, is only visible if you try to
      install Koha using a MySQL user who doesn't have the correct
      privileges, so may be too much trouble to really test. A check of the
      patch should be adequate.
    
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 01a6b2b63b929d6b367f95919dd72559736cb002
Author: Andreas Jonsson <andreas.jonsson@kreablo.se>
Date:   Sun Mar 5 13:21:34 2023 +0100

    Bug 33140: Use facet label value for mouseover text on facet removal link
    
    This patch updates the facets includes in both the staff interface and
    OPAC so that the title attribute on "remove" links uses the full name
    rather than the code of the facet. So, library name instead of
    branchcode, collection code description instead of authorized value
    code.
    
    To test, apply the patch and perform a search in the staff interface.
    
    - Click a facet in the left-hand sidebar which will return more than one
      result.
      - On the reloaded page there should be a link next to that facet: [X].
        Hovering your mouse over it should show "Remove facet [facet name]"
        e.g. "Remove facet Centerville" instead of "Remove facet CPL"
    - Test on library facets, item type facets, and collection code facets.
    - Perform the same test in the OPAC.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 758712dc0140bb40cf0254125d006eed6c590b3a
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Jul 18 14:47:43 2023 +0000

    Bug 34305: Account for negative prices on acq details tab
    
    The acquisition detail tab shows the estimated cost while
    the order is still pending and the actual price, once received.
    At least the tool tip on the table header row says so. This
    was not working correctly.
    
    To test:
    * Create a basket
    * Create a new order line with a negative list price (credit)
    * Close the basket
    * Verify that the price shows correctly in the acquisition details
      tab on the record
    * Receive the order and enter a different negative actual price.
    * Reload detail view, verify it still shows the estimated price
    * Apply patch, restart_all
    * Verify now the correct actual price displays
    * Create another basket and order line
    * Verify while not yet received, it still shows the estimated price
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 585138f13f42ec76a7d45b44faba70445b27d7b3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 31 13:23:53 2023 +0200

    Bug 34447: Do not export "Actions" columns
    
    In the KohaTable Vue component we should add the noExport class to the actions columns to not export them.
    
    Test plan:
    Go to the ERM module, create at least one agreement.
    Go to the agreement list view and click "export" to export the table
    => Without this patch the "Actions" column was exported
    => With this patch is no longer there
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dae5607fd184c2e4b19b197cca313aca92975e47
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Thu Jul 27 16:36:34 2023 +0000

    Bug 34435: Remove side effect from get_password_expiry_date
    
    If get_password_expiry_date is passed a DateTime object
    as a parameter, it modifies and returns the original
    object. This can create possible side effects.
    
    This patch modifies get_password_expiry_date to clone the
    DateTime object that it receives as a parameter and
    return the modified clone, so that object references can
    be passed in safely.
    
    To test:
    prove t/db_dependent/Koha/Patron/Category.t
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 420363258214e2c397ef604c63b13491462ed955
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Thu Jul 27 12:29:15 2023 -0400

    Bug 34435: Add unit test
    
    To test:
    prove t/db_dependent/Koha/Patron/Category.t
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c68bec11dad962721a286576a7f540778055cd2a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jul 24 10:56:45 2023 +0000

    Bug 34344: Make item types breadcrumbs uniform
    
    This patch updates the breadcrumbs on the item types administration page
    so that it reads "Item types" instead of "Item types administration,"
    making it more consistent with other administration pages. The same
    change is made to the page's main heading.
    
    To test, apply the patch and go to Administration -> Item types.
    
    The breadcrumbs should read "Home -> Administration -> Item types. The
    page heading should read "Item types."
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d313f9b963ff0e5187eb19d81ef13231e0add39d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri May 26 17:28:50 2023 +0000

    Bug 33848: Enabling Coce in the OPAC breaks cover images on bibliographic detail page
    
    Bug 32412 added an additional "context" parameter to KOHA.coce.getURL.
    The code which pulls a Coce image for the "main" cover image slider
    needs to include the correct context parameter for the images to load.
    
    This patch also makes a minor correction to CSS in order to make the
    cover image slider "dots" change color to highlight the current slide.
    
    To test, apply the patch and rebuild the OPAC CSS.
    
    - Enable multiple cover image sources in the OPAC including Coce, e.g.
      Amazon, Google, OpenLibrary, etc.
    - Search for a title which will match multiple cover image sources. In
      the sample data a search for "Perl" will return good results.
    - Note the number of cover images loading for a title in the search
      results.
    - View the detail page for that title. There should be the same number
      of covers in the cover image slider.
    - Clicking the slider navigation dots should work to show each image,
      and the dot should change color to highlight the current image.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aa8dc28e97d1971e191d5f7d08802257ae98f378
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 31 13:41:26 2023 +0200

    Bug 33848: Don't remove coce container from template
    
    It's removed from coce.js
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 38fc85ade940b732b3565400a0ff41c06a382497
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Mon Jul 31 08:52:23 2023 +0000

    Bug 33755: Set profile_id and add missing import
    
    This patch adds a missed parameter (profile_id) in stage-marc-import.pl and also adds a missing import in the background job for staging marc files. This means that the profile used when importing can now be shown in the import batches table and also in batch details
    
    Test plan:
    1) Stage a record for import and make sure to save the import profile you use
    2) Import a record using that profile
    3) Navigate to Cataloging > Manage staged MARC records
    4) In the Profile column, no value will be shown for the staged record
    5) Click on the batch, the profile will be missing in this screen as well
    6) Apply patch
    7) Restart_all
    8) Repeat steps 2-5, the profile name should be visible in both places
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Emmanuel Bétemps <e.betemps@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 37d5a0cb44d3d37bde91ef6d05e7af694acbee16
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jul 19 11:23:58 2023 +0000

    Bug 34197: Group and label vendor contact settings
    
    This patch changes the layout of vendor contact settings, both in the
    entry form and in the detail view. Now acquisitions-specific contact
    settings and serials-specific contact settings are grouped together and
    labeled as such.
    
    The patch also corrects some markup to make the display more consistent.
    JS handling of some labels has been removed because the structure change
    eliminated the need for a "for" attribute.
    
    The patch also makes a minor unrelated change to the display of discount
    percentages to ensure that a blank value doesn't display.
    
    To test, apply the patch and go to Acquisitions -> New vendor.
    
    - In the vendor entry form, in the "Contacts" section, you should see
      two groups of checkboxes, "Acquisitions options" and "Serials
      options." Confirm that the labels can be clicked to check checkboxes.
    - Test the process of adding another contact and confirm that the
      additional entry fields work correctly.
      - Confirm that the "Primary acquisitions contact" and "Primary serials
        contact" checkboxes act like radio buttons between the two contacts:
        Checking the box under one contact should uncheck the same box under
        the other contact.
    - Confirm that all your data is saved correctly.
    - Test the page during the edit process as well.
    - View your updated vendor and confirm that the detail view looks
      correct.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f049e40c44097df367bd13cfa28ffe934b967dcf
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jul 27 14:49:50 2023 +0000

    Bug 34433: 'Custom cover image' in lightbox is untranslatable
    
    In the staff interface, when viewing a custom cover image in the
    lightbox, at the bottom, it says 'Custom cover image'. This string is
    not translatable. The string is missing the _() i18n function.
    
    This patch also corrects the "Coce image from Amazon.com" which was
    missing the correct i18n function too.
    
    If necessary, import the MARC records attached to this bug to use
    in testing.
    
    1. Enable CustomCoverImages
       1.1. Go to Administration > System preferences
       1.2. Search for CustomCoverImages
       1.3. Select "Show" in CustomCoverImages
       1.4. Set CustomCoverImagesURL to {956$u}
       1.5. Click "Save all Enhanced content preferences"
    
    2. Install a new language
       2.1. gulp po:update --lang fr-CA
       2.2. Search for "Custom cover image" and "Coce image from Amazon.com"
            in fr-CA-staff-prog.po file, make sure it is translated
       2.3. Install translations
            ./misc/translator/translate install fr-CA
       2.4. In the staff interface, go to Administration > System
            preferences
       2.5. Search for language
       2.6. Check the box next to the newly installed language
       2.7. Click "Save all I18N/L10N preferences"
    
    3. View the image in the lightbox in the staff interface
       3.1. If using the attached records, search the catalog in the staff
            interface for "As you like it";
            If not using the file, add an image URL in 956$u, or finagle
            something with CustomCoverImagesURL
       3.2. Click on the title to view the detailed record
       3.3. Click on the image to view it in the lightbox
    
    Test the lightbox in the default English translation and in your
    newly-translated language. In both cases the caption in the lightbox
    footer should be correct.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5749df1e3ab13e80f119652bd4710c8bc313b117
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jul 27 15:12:12 2023 +0000

    Bug 34434: Terminology: Biblio should be bibliographic
    
    This patch corrects several more instances where the templates use the
    term "biblio" where it should use "bibliographic."
    
    To test, apply the patch and confirm that these instances read
    correctly:
    
    - About -> Special thanks... -> Mines Paristech: "bibliographic
      frameworks"
    - Acquisitions -> Vendor -> Receive shipments: "Record count" in the
      table of shipments.
    - Catalogue -> Bibliographic record details -> Labeled MARC: "Labeled
      MARC record" heading.
    - Circulation -> Holds to pull: Error message, "hold has been placed at
      the bibliographic record level."
      * I'm not sure how one can trigger this error message.
    - Tools -> Log viewer -> Filter by "Catalog" and "Add": "Bibliographic
      record..." link in the "Object" column.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2234ecb8c93d3ad2dc0a0f41d46db479c9a05d56
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Jul 24 13:36:02 2023 +0000

    Bug 34354: Fix progess typo
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e50d437e87bbe57ff61c8d90c1eee0203cfdda70
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jul 20 12:16:22 2023 +0000

    Bug 34322: Correct icon triggering more fund search options
    
    This patch updates the budget/fund administration header search form so
    that it uses the "fa-slider" Font Awesome icon instead of a folder icon.
    This makes it consistent with other search forms which have a similar
    set of additional options.
    
    To test, apply the patch and go to Administration -> Budgets.
    
    - The "Search funds" form should have the "fa-sliders" icon.
    - Clicking it should trigger the expansion of the additional search
      options.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0761107a5f02c60413a0950913bfb8bfb6f75ebe
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jul 17 10:35:22 2023 +0200

    Bug 34292: (bug 33804 follow-up) Format "checked out on" date
    
    Test plan:
    
    1) Without applying this patch, issue an item to a patron and
       notice that in the 'Checkouts' table the 'Checked out on'
       date is of the form YYYY-MM-DD HH:MM:SS.
    
    2) Apply this patch, restart Plack if necessary.
    
    3) Refresh the patron 'Checkouts' table: this time the 'Checked
       out on' date will observe the setting of your `dateformat`
       System Preference.
    
    4) Extra credit: repeat step 3) for different `dateformat`
       settings, each time you should get a 'Checked out on' date
       that matches the date format you chose.
    
    Signed-off-by: Andreas Roussos <a.roussos@dataly.gr>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fc2dc973f0beca5e30777a465aece074a29682ae
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Mon Aug 7 13:11:14 2023 -1000

    Bug 34493: Fix indenting in search_indexes.inc
    
    Bug 32683 broke indenting in koha-tmpl/intranet-tmpl/prog/en/includes/search_indexes.inc
    Not on purpose looks like.
    
    Test plan :
    1) Look at changes to validate indenting
    2) Run prove xt/tt_valid.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4ff90997001ba10c1c40242107dc0f8f4f9dccac
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jul 17 16:42:13 2023 +0000

    Bug 34289: Add missing class to one condition of the checkin template
    
    The markup of the checkin template varies depending on the conditions of
    the operation, and in one case the barcode field was missing the
    "barcode" class. This patch adds it.
    
    To test, apply the patch and make sure the finesMode system preference
    is enabled.
    
    - Go to returns.pl (/cgi-bin/koha/circ/returns.pl)
    - Expand the the options so you see 'Forgive overdue charges'.
    - Check that box and check in an item
    - After checkin, the barcode field should keep the same style it had
      before the transaction.
    - Note: The yellow background of the input when the "Forgive" checkbox
      is checked is to be expected.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a4b7490633d2e8bc9ca9a0f60ebec1200ed0b07a
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Aug 4 15:13:36 2023 +0000

    Bug 34469: Block editing for received order lines
    
    When an already received order line is modified/edited,
    we experience data loss. Most prominently, we will lose the
    linked invoiceid. Therefore we should not allow editing an
    order line that was already received. If something needs to be
    changed, the receipt should be cancelled first.
    
    To test:
    * Create basket as standing order with items added in cataloguing
    * Add an order line
    * Receive shipment
    * Go to the basket summary page, click on 'Modify'
    * Change the actual cost
    * Save
    * Verify that the invoice is now empty
    * In the database aqorders.invoiceid will be NULL
    * Apply patch
    * Receive another shipment for the standing order
    * Go back to basket summary page
    * Verify the 'Modify' link is no longer present
    * Click 'Modify' on the unreceived order line
    * Edit the URL parameter odernumber to have the number of an
      already received order line
    * Verify you see a nice error message:
      This order cannot be edited, the basket is closed or the order was already received.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 27cf76b4845b966bf67e1f67a1cf144f4e187456
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Aug 3 12:26:17 2023 +0000

    Bug 34108: Preserve checked orders after item editing
    
    The js that buils the new row after editing expects to receive a
    value '_checked' indicating if theitem was selected. The 'item' variable
    used to create the row after edit comes from the api and doesn't include this.
    
    We need to inspect the previous html before building the new row to confirm the box wa checked
    
    To test:
     1 - Create a basket with 'items created on receive'
     2 - Add an order line with multiple items to it
     3 - Close basket
     4 - Receive shipment
     5 - Add invoice information
     6 - Receive through receive link in the table
     7 - Check some items
     8 - Click on the "Edit" link and make some change to the item
     9 - Save
    10 - Checkboxes have disappeared
    11 - Cancel receipt
    12 - Apply patch
    13 - Reload the page
    14 - Repeat 7-9
    15 - Checkbox is preserved
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fa5f9470c9e9f09ecf51ea141390f8175b1923d1
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Jul 24 14:00:48 2023 +0000

    Bug 34357: Replace SUPER->imageurl in ItemTypes
    
    Test plan:
    Run t/db_dependent/Koha/ItemTypes.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 99b3e2dbcc29c1fa1caf619eaab4c4a98a661479
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Jul 24 14:30:11 2023 +0000

    Bug 34359: Remove unneeded module Koha/BiblioUtils/Iterator.pm with test
    
    Test plan:
    git grep BiblioUtils::Iterator
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cb2c62665a2434b9044ec419ba1f61f23e4e5530
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Aug 15 11:04:00 2023 +0300

    Bug 34494: DBRev 23.06.00.015
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3e606c4df1d9ab5b8ea609ae2165ef20285f9df8
Author: Victor Grousset <victor@tuxayo.net>
Date:   Tue Aug 15 08:32:27 2023 +0200

    Bug 34494: (QA follow-up) fiks spelin
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 158ac7df71f3be25bcba85543ff98eef4d5c6ad3
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Aug 8 07:07:34 2023 -0400

    Bug 34494: Table tmp_holdsqueue fails to be created for MySQL 8
    
    It appears that MySQL 8 rejects creating any table where the primary key is nullable. The table tmp_holdsqueue has a nullable pk ( itemnumber ) but there is no reason for this column to be nullable ( generating a holds queue entry with no itemnumber is not possible ) so it make sense to just remove the nullability for MySQL compatiability.
    
    Test Plan:
    1) Using MySQL 8.0, attempt to create a database from kohastructure.sql
       If you use ktd, you can try:  DB_IMAGE=mysql:8.0 ktd up
    2) Note the failure to create the table
    3) Apply this patch
    4) Repeat step 1
    5) The table is created!
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 813cfe1eec1f6090f715638a774fa755b5ff4788
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Mon Jun 19 10:15:20 2023 +0200

    Bug 34056: Add -api-client suffit to authorised-values API client
    
    In koha-tmpl/intranet-tmpl/prog/js/vue/fetch all files have the -api-client suffix but authorised-values. For consistency we should add it.
    
    Test plan:
    Go to the ERM module and confirm that dropdown lists are correctly
    filled in with authorised values.
    You can also inspect the console and confirm that a GET query to /authorised_value_categories is done
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ad41643d5aa67f7c9755bde439608a63a2750136
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Tue Aug 1 20:43:43 2023 +0000

    Bug 34436: (QA follow-up) Move spans to surround full text
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8933036742e5484639c2649042102117664ce9c7
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jul 27 16:11:54 2023 +0000

    Bug 34436: Some breadcrumbs lack <span> for translatability
    
    This patch modifies several templates which were updated recently so
    that breadcrumbs markup could be built using template wrappers. The
    patch wraps strings in <span> in cases where it is necessary to make
    them translatable.
    
    To test, apply the patch and view the following pages to confirm that
    the breadcrumbs still show up correctly:
    
    - Administration -> MARC bibliographic framework
      - Add framework
      - Edit framework
      - Delete framework
    - Administration -> Share content with Mana KB
    - Administration -> Circulation and fine rules
    - Authorities ->
      - Add authority
      - Edit authority
    - Catalog -> Advanced search
      - Bibliographic detail page
        - Must have EasyAnalyticalRecords enabled.
        - Edit -> Link to host record
    - Patrons
    - Reports -> Average loan time
    - Serials -> Serials home
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eb224540e223d71f1f494b94ce3442567a1c6664
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 24 16:08:50 2023 -0300

    Bug 34365: Add cancellation request flow to DELETE /holds
    
    This patch adds a new `x-koha-override` header to allow enforcing the
    cancellation request flow for waiting holds.
    
    If the hold is not waiting, the header has no effect.
    
    To test:
    1. Apply the tests patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/holds.t
    => FAIL: The endpoint doesn't implement the required logic
    3. Apply this patch
    4. Repeat 2
    => SUCCESS: Tests pass! The endpoint behavior is changed!
    5. Sign off :-D
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2a8c43f975306081ec4f7a218346187bba08585c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 24 16:08:22 2023 -0300

    Bug 34365: Unit tests
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 33f5982c3ecfaf2411abb93f87ec04ef9caec528
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jul 26 10:35:28 2023 +0000

    Bug 33909: (follow-up) QA fixes
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9bd21c7a381ee2d1cc146db38f0d79133e299cc5
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 6 15:04:43 2023 +0000

    Bug 33909: Improve translation of title tags: Administration
    
    This patch updates administration templates so that title tags can be
    more easily translated.
    
    To test, apply the patch and confirm that the following
    Administration pages have the correct title tags:
    
     - Libraries
     - Library groups
     - Item types
     - Authorized values
     - Patron categories
     - Circulation and fines rules
     - Patron attribute types
     - Library transfer limits
     - Library transfer limits advanced editor
     - Transport cost matrix
     - Item circulation alerts
     - Cities and towns
     - Curbside pickup
     - Patron restriction types
     - Debit types
     - Credit types
     - Cash registers
     - Manage plugins
     - Manage jobs
     - MARC bibliographic framework
     - Koha to MARC mapping
     - MARC Bibliographic framework test
     - Authority types
     - Classification configuration
     - Record matching rules
     - Record overlay rules
     - OAI sets configuration
     - Item search fields
     - Search engine configuration
     - Currencies and exchange rates
     - Budgets
     - Funds
     - EDI accounts
     - Library EANs
     - Network Printers
     - Identity providers
     - Z39.50/SRU servers
     - SMTP servers
     - Did you mean?
     - Table settings
     - Audio alerts
     - Share your usage statistics
     - Share content with Mana KB
     - Additional fields
     - Keyboard shortcuts
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 19f9240759103196943228bbbbb3b35e46fa2e56
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Jul 31 20:15:20 2023 +0000

    Bug 34345: (QA follow-up) Fix some more occurrences
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 452ac93b92045b014ecb7210e673aa30d96a5560
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jul 24 11:11:56 2023 +0000

    Bug 34345: 'Circulation and fine rules' vs 'Circulation and fines rules'
    
    This patch corrects two instances of the phrase "Circulation and fines
    rules" in favor of the more common "Circulation and fine rules" for
    consistency's sake.
    
    To test, apply the patch and go to Administration.
    
    - In the description under the "Circulation and fine rules" link it
      should read, "Define circulation and fine rules..."
    - Open the Circulation and fine rules page and confirm that the link in
      the sidebar menu is correct.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a3c64f62c0dca2acf7d7558281e006ef41286771
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Wed Aug 9 12:29:35 2023 -0400

    Bug 34470: Initialize random seed after spawning a child worker process
    
    When background_jobs_worker.pl spawns a new child process, it needs to
    explicitly reinitialize the random seed - otherwise each child process
    will inherit the same random seed from the parent process, and any
    randomization will produce identical results each time.
    
    This patch adds a call to srand immediately after the fork to
    reinitialize the seed. Note that child processes should not call
    srand with no parameter anywhere else, as the Perl documentation
    indicates that srand should not be called with no parameter more than
    once per process.
    
    To test:
    1. Apply the logging patch only
    2. Set system preferences:
        a. RealTimeHoldsQueue -> Enable
        b. RandomizeHoldsQueueWeight -> in random order
    3. Watch the logs for the staff interface
       in ktd:
       ktd --shell
       koha-intra-err
    4. Place a hold. Note that the logs display the branch list before and
       after it is randomized.
    5. Place some more holds. Note that the branch order after randomization
       is identical each time.
    6. Apply both patches and restart_all
    7. Repeat steps 3-5.
       -> Note that the branch order before randomization hasn't changed
       -> Note that the branch order after randomization is now different
          each time.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3ff1430bb4f1203a3d2d9ee8017633c73ff6a3de
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Thu Jul 27 14:33:38 2023 +0000

    Bug 34117: Add unit tests
    
    To test:
    prove t/db_dependent/Koha/Patron/Categories.t
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bba9feff5ca9e1601a38408625cf7ba40b70645f
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Thu Jul 20 13:41:15 2023 -0400

    Bug 34117: Remove side effect from get_expiry_date
    
    If get_expiry_date is passed a DateTime object as a parameter,
    it modifies and returns the original object. When memberentry.pl
    prefills the input fields for duplicating a patron, it passes the
    enrollment date object to get_expiry_date. This causes the enrollment
    date object to be modified with the expiry date value.
    
    This patch modifies get_expiry_date to clone the DateTime object that it
    receives as a parameter and return the clone, so that references to an
    enrollment date object can be passed in safely.
    
    To test:
    1. Have or make a patron
    2. Duplicate that patron
    3. Before saving the new patron, scroll down to Registration Date and
       see that it's defaulting to a date in the future.
    4. Apply patch and restart_all
    5. Try duplicating a patron again
    6. Registration Date should correctly set to today
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9b1bd01a428823e0ed99d7d265dec3606ea3e893
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Mon Jul 17 11:10:07 2023 +0200

    Bug 34155: Hide 'Next available' at OPAC when item-level hold is forced
    
    This was a regression caused by bug 24860
    
    Test plan:
    1. Set up circulation rules so that OPAC users can place holds only on
       specific items ("OPAC item level holds" = "force")
    2. Try to place a hold at OPAC. The "Next available item" option should
       not appear.
    3. Set "OPAC item level holds" to "allow"
    4. Try to place a hold at OPAC. The "Next available item" option should
       appear
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e211d8b34b8e3755ef254f9677d8c82dc27e0ae1
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jul 14 09:17:27 2023 +0000

    Bug 34269: (QA follow-up) Add missing TT filters
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e0fdb2db51072e10a3f53b1efb9571728560bd64
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jul 13 17:01:07 2023 +0100

    Bug 34269: Convert to using codes in select compares
    
    This patch updates the logic in smart rules to compare option values to
    codes as apposed to option texts to value descriptions.
    
    0. Apply patch
    1. Install another language in the staff interface
       1. ./translate install xx-XX
       2. Check the box of the language in the 'language' system preference
       3. Refresh
    2. Create an item type with a parent
       1. Go to Administration > Item types
       2. Create a new item type or modify an existing one, assigning a parent type
          Example: Create a 'Children's books' itemtypetype
          and assig 'Books' as its parent
       3. Create a third item type with the same description but something added in ():
          Example: 'Children's books (3-5)'
    3. Create a circulation rule for the parent type
       Example: All/Books, with 2 checkouts allowed
    4. Create a circulation rule for:
       All/All with 3 checkouts allowed
    5. In English, click on "Edit" next to the parent type rule (All/Books)
       --> Note that the item type in the bottom row (the modifiable row) is changed to 'Books (All)'
    6. Modify the number of checkouts allowed (e.g. 99)
       --> The All/Books rule is modified
    7. Switch the interface to the other language
    8. Click on "Edit" next to the parent type rule (All/Books)
       --> The All/Books rule is modified
    9. Add rules for Children's books and Children's books (3-5)
    10. Click on "Edit" next to each rule and change a value
       --> Verify that the changed values are always saved for the correct rule
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 72ef65edbe3413027fb877e37929e98cf7fd26fe
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Aug 4 14:29:11 2023 +0000

    Bug 34452: Restore fund label and 'Update adjustments' button
    
    This patch fixed 2 small and recent regressions:
    
    * The "Update adjustments" button used to always display. It's
      required to save a new first adjustment, but also to save
      changes to existing adjustments edited inline. It now would
      only display after "Add adjustments" was clicked. We retore
      to display it always. (bug 32746)
    
    * We have several "Fund" pull downs on this page, but they are
      for different things and require different labelling.
      "Fund" was changed to "Shipping fund" which matches at the top,
      but doesn't work for the adjustments table and single adjustment
      form. Now we use "Shipping fund" "Fund" and no label in the table
      as the table header covers it there. (bug 33721)
    
    To test.
      * Add a vendor
      * Receive shipment
      * Add invoice and save
      * Click on "Finish receiving"
      * Verify the button "Update adjustments" appears after clicking
        "Add new adjustment"
      * Verify the button is gone after you clicked it and the table shows
      * Change something in the table - no button to save change :(
      * Apply patch
      * Repeat steps, button "Update adjustments" should not always be
        visible.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2e40b1c3561186bf7d7e6d6493c48063f286dc52
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Aug 15 10:31:00 2023 +0300

    Bug 30451: DBRev 23.06.00.014
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 765d3d85b5b2b2e0711550b5b244d71967a2ee0c
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jul 21 14:39:07 2023 +0000

    Bug 30451: Update FK constraint on aqorders.subscriptionid
    
    This updates the FK constrant from ON DELETE CASCADE to ON DELETE
    SET NULL. This means that if a subscription linked to an order is
    deleted, we no longer will also delete the order, but we will just
    set subscrptinid in the order to NULL. This will avoid data loss
    that can cause the budgets/funds not to add up anymore with the
    real espenses of the library.
    
    To test:
    
    Preparation:
    * Create 2 subscriptions on different records
    * Create a new basket
    * Use the "order from subscription" functionality to create order
      lines for both of your subscriptions
    * Close basket
    
    Without patch:
    * Delete the first subscription
    * Verify the order line for this subscription is gone from your basket
    
    Apply patch:
    * Run database update and restart_all
    * Delete the second subscription
    * Verify the order line now remained in the basket
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    
    JD amended patch: perl tidy
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 39e6b100cb977f072e6f23a13625e986a31aab97
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Jun 19 14:24:30 2023 +0000

    Bug 34059: Add only issues from the branch that is creating the notice
    
    Test plan, on k-t-d
    1) Go to 'my account' on top right user menu
    2) On 'Patron messaging preferences', click 'Edit'
    3) On the 'Item due' row, check the 'Email' and 'Digests only' checkboxes and save
    4) On the top search bar, press 'Check out' and enter '42' (koha user cardnumber)
    5) On the checkout input bar, enter 39999000001372 and press checkout
    7) Go to 'Set library' on top right user menu and pick a different library
    8) Repeat step 4), then, on the checkout input, enter 39999000004571 and press checkout
    9) Verify that this user now has 2 items checked out, from 2 different libraries at /cgi-bin/koha/circ/circulation.pl?borrowernumber=51
    9) Run the following 2 queries to force the due_date to be equal to 'today's' date for both issues:
    NOTE: change the YYYY-MM-DD below to whatever day it is you're running this test plan
    
    UPDATE issues SET date_due = '2023-06-19 23:59:00' where issue_id = 1;
    UPDATE issues SET date_due = '2023-06-19 23:59:00' where issue_id = 2;
    
    10) Run the cronjob:
    ./koha/misc/cronjobs/advance_notices.pl -c --digest-per-branch
    
    11) Verify that two DUEDGEST notices were created, one per each library, but both notices contain both issues:
    SELECT letter_code, time_queued, content FROM message_queue ORDER BY message_id DESC LIMIT 2;
    
    12) Apply patch, then do 10) and 11) again
    13) Verify that each notice only contains the issue for its respective library
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Stephen Graham <s.graham4@herts.ac.uk>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e88fe2fe60839164a11ee01186f8a759e06715c4
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sat Jul 29 21:14:39 2023 +0000

    Bug 34387: (QA follow-up) Fix display of 'Import batches'
    
    Fixes the heading and sidebar display of the 'Import batches'
    section.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Edit: I removed the wrongly introduced import_batches.yaml file
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ca77df53506a583e9626da21096fc446f06479fd
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jul 26 07:15:56 2023 +0100

    Bug 34387: (follow-up) Minor spelling and quoting fixes
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 75cff54c53ca19617d700bcd1a9c5fefa3bf1839
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jul 25 15:57:58 2023 -0300

    Bug 34387: Improve API docs naming consistency
    
    This patch aims to make our API docs be more consistent.
    It addresses two particular things:
    
    * There's no consistency on the `tags` used across the spec, and not all
      of them are correctly described and have an `x-displayName` entry.
      More on this later.
    * This are not sorted either by some for of grouping, or at least
      alphabetically.
    
    For the former, I did my best trying to harmonize (specially on the ERM
    front) with what we do in the rest of the use cases.
    
    For the latter, I opted for sorting everything alphabetically, as a
    first step. Hoping someone else could work on grouping things.
    
    To test (ON YOUR HOST MACHINE):
    1. On current master run:
       $ cd api/v1/swagger
       $ docker run --rm -v $(pwd):/api --workdir /api redocly/cli \
               build-docs swagger.yaml --output index.html
    => SUCCESS: It doesn't break or anything
    2. Open your browser, open the generated api/v1/swagger/index.html file
    => FAIL: The left column has
             * several lower case entries
             * not everything is correctly grouped (ERM? packages?)
             * Things are not sorted. There's an attempt but looks messy
    3. Apply this patch
    4. Repeat 1 and 2
    => SUCCESS: Things look much better!
    5. Sign off :-D
    
    CAVEAT1: I'm not sure why, but import_batches doesn't work. Ideas are
    welcome, I'll keep looking for fixes.
    CAVEAT2: I don't have enough eHoldings background to weight in, but I
    feel like 'ERM eHoldings packages' could just be 'ERM packages'.
    Follw-up patches with better ideas are welcome.
    CAVEAT3: Patron credits, debits, balance... They could all go in to
    'Patrons accounts' or similar. Open to ideas.
    CAVEAT4: Old redocly didn't support mapping an endpoint to more than one
    target section. Something to explore if we want (for example) to reach
    'credits' through the 'Patrons' section but also from 'Accounting'.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7957368c34f103bc07b3e439c3404ba82b0bf182
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Aug 7 15:13:46 2023 -0300

    Bug 33117: Make dbrev idempotent
    
    QA didn't spot the issue, nor I. So fixing now.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bbe1bffd9e01eb08ce99667dd64ffbfa2c1f6fae
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue Jun 6 03:48:06 2023 +0000

    Bug 33881: Clear self-check JWT during auth kick out
    
    This patch clears the JWT cookie during auth kick out (ie
    when a web user navigates from the self-check out/in to
    the rest of Koha).
    
    Test plan:
    0. Apply patch and koha-plack --reload kohadev
    1. Go to http://localhost:8080/cgi-bin/koha/sco/sco-main.pl
    2. Log in as the "koha" user
    3. In another tab, go to http://localhost:8080/cgi-bin/koha/sco/sco-main.pl
    4. Go to http://localhost:8080/cgi-bin/koha/opac-search.pl?idx=&q=a&weight_search=1
    5. Note that you are prompted to "Log in to your account" via the normal Koha prompt
    6. Go to http://localhost:8080/cgi-bin/koha/sco/sco-main.pl
    7. Note that you are prompted to "Log in to your account" within the "Self checkout system",
    and note that your self-checkout session for the "koha" user has *not* persisted like
    it did before the patch was applied
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6e0afe7b042ad14c6a833f495515631268aa5b54
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 28 10:40:28 2023 -0300

    Bug 30524: (QA follow-up) Fix tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 68a03b7f4ced3b588240d183d6c0172bd9c0e184
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jul 27 15:33:55 2023 -0300

    Bug 30524: (QA follow-up) Unit tests for GenerateCSRF()
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 98a4b52be1e3f51394e6aea1dc6cd8ab55c1801d
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jul 27 07:45:57 2023 -0400

    Bug 30524: (QA follow-up) Only generate CSRF token if it will be used
    
    This patch avoids generating CSRF tokens unless the csrf-token.inc file
    is included in the template.
    
    Passed token doesn't need HTML escaped. The docs for WWW::CSRF state:
      The returned CSRF token is in a text-only form suitable for inserting into a HTML form without further escaping (assuming you did not send in strange things to the Time option).
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3241671cdd11a3ee88a11284ab2a77f8d83eb0ca
Author: Michał Górny <mgorny@gentoo.org>
Date:   Fri Jun 16 16:16:37 2023 +0200

    Bug 34023: Prevent HTML injection in "back to results" link from search page
    
    It is possible inject raw HTML into the "Back to search results" link by leading the user to a search with specially crafted URL.
    
    For example, using the demo instance:
    
    1. Visit https://koha.adminkuhn.ch/cgi-bin/koha/opac-search.pl?idx=&q=test&weight_search=1&%22%3Etest%3Ca%20foo=%22
    
    2. Refresh the page (for some reason, "back to results" doesn't appear unless I do that at least once).
    
    3. Click any result.
    
    Note that the result page now contains:
    
      <a href="opac-search.pl?idx=&amp;q=test&amp;weight_search=1&amp;">test<a foo=%22" title="...
    
    i.e. `">test<a ...` was successfully injected into the HTML.
    
    I'm attaching a quick patch I've used to patch up our instance.  It just indiscriminately URI-escapes all parameter keys.  I didn't decode them back since as far as I understand all valid keys do not contain special characters.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 043e81817679114c7a804a14dfff1b1cdce721b6
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jul 13 10:40:38 2023 +0100

    Bug 22990: (follow-up) Fix suggestion.pl
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 75d66cd266c59c85cdeceeba84a78f73acdd89d0
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed May 11 07:06:55 2022 +0000

    Bug 22990: Fix template toolkit syntax issues in shelves_results.tt
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 30a763a9be6417e1a4bc79dcf32a1c26737d1952
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Sep 16 15:13:23 2021 +0100

    Bug 22990: Fix for shelves table
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1a64c1c1db49b2deb28aeabf20dba0041488f83d
Author: Amit Gupta <amit.gupta@informaticsglobal.com>
Date:   Wed Jan 22 21:37:22 2020 +0530

    Bug 22990: Add CSRF protection to boraccount, pay and suggestion
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Test plan would have been nioe.
    Tested by changing MAX_AGE with suggestions.
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 593e1dc5840f59d1c8f7fb457fe580b907f46385
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue Jul 25 05:18:00 2023 +0000

    Bug 34368: Add CSRF token to Content Management pages
    
    This change adds a CSRF token to the Content Management pages
    at additional-contents.pl.
    
    Test plan:
    0. Apply patch
    1. koha-plack --restart kohadev
    2. Try to add "News", "HTML customizations", and "Pages".
    3. Try to delete these new content entries
    4. Note that you were successful in your endeavours
    
    JD amended patch: remove empty line removal (no need to create
    unecessary conflicts)
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9497556fef914ab22d3a5be7f3449985032901f3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Jun 23 11:52:28 2023 +0100

    Bug 30524: Unit tests
    
    Test plan:
    Run t/Output.t
    Run t/db_dependent/Auth.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0221fec5ac0e316e1d3d52e4fb1abb5bfe81bf81
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Apr 13 13:55:04 2022 +0100

    Bug 30524: Core CSRF checking code
    
    Split out from bug 22990 as requested.
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2fd6625abc2a3036979b77964ea274a4c65e945b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jul 26 17:45:41 2023 -0300

    Bug 28966: (QA follow-up) tmp_holdsqueue no longer an iterator
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 64d63cba2e76107e88a6ba40a7e63d7bdf15583b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jul 26 14:48:00 2023 -0300

    Bug 28966: DBRev 23.06.00.013
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 40d343ee15f9a09e5e252d7b6c828b99bb36b030
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jul 26 14:46:54 2023 -0300

    Bug 28966: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c195ffa9b1f5a95159298e1303cffef74597af06
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Jul 26 11:57:24 2023 -0400

    Bug 28966: (QA follow-up) Fix failing unit tests
    
    Test Plan:
    1) prove t/db_dependent/TestBuilder.t
    2) Note tests fail
    3) Apply this patch
    4) Run updatedatabase.pl
    5) Update the schema files ( alias 'dbic' can be used in
       koha-testing-docker )
    6) prove t/db_dependent/TestBuilder.t
    7) Tests now pass!
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 328baf44b457bc34cd93ffad8128b79d4ee30a42
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jul 19 15:20:46 2023 +0100

    Bug 34258: (QA follow-up) Tidy the test
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d0b4b4433b1751e16a1ed14b427ae266e4e72a6
Author: Andreas Roussos <a.roussos@dataly.gr>
Date:   Thu Jul 13 16:02:02 2023 +0000

    Bug 34258: update SIP-related unit test
    
    Test plan:
    
    1) Run the updated SIP-related unit test *without* having applied
       the other patch from this bug report -- it should fail:
    
       $ prove t/db_dependent/SIP/ILS.t
    
    2) Apply the patch that fixes C4/SIP/ILS/Transaction/Renew.pm
    
    3) Re-run the unit test -- it should pass.
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 54924681d2d6d567e10a248d136a87f02d6f5ca9
Author: Andreas Roussos <a.roussos@dataly.gr>
Date:   Thu Jul 13 16:01:47 2023 +0000

    Bug 34258: pass an unblessed hash to AddIssue()
    
    In Koha 23.05, we lost the ability to renew an item via SIP2.
    
    The relevant commit is ddc2906b77 from Bug 31735, where the
    file C4/SIP/ILS/Transaction/Renew.pm was modified to no longer
    pass an unblessed $patron hash to C4::Circulation::AddIssue()
    
    This patch fixes that.
    
    Test plan:
    
    1) Using the SIP emulator, check out an item to a patron, then
       try to renew it. Example commands for a KTD instance:
    
       $ misc/sip_cli_emulator.pl -a localhost -p 6001 -l CPL -su term1 -sp term1 -m checkout --patron koha --item 3999900000001
       $ misc/sip_cli_emulator.pl -a localhost -p 6001 -l CPL -su term1 -sp term1 -m renew --patron koha --item 3999900000001
    
       Notice that the second command will fail!
    
    2) Apply this patch.
    
    3) Repeat the 2nd command -- this time the renewal should work.
    
    4) Run the SIP-related unit tests, they should all pass:
    
       $ prove t/db_dependent/SIP/
       t/db_dependent/SIP/ILS.t .......... ok
       t/db_dependent/SIP/Message.t ...... ok
       t/db_dependent/SIP/Patron.t ....... ok
       t/db_dependent/SIP/SIPServer.t .... ok
       t/db_dependent/SIP/Transaction.t .. ok
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 54b8a6433ab1d61a66e04865f15d8674a98a0e4f
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Jul 25 09:43:23 2023 -0400

    Bug 28966: (QA follow-up) Remove superfluous joins
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bdf5f94bfa7c41e434e40b88da5a8096ea752dd2
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jul 7 07:32:54 2023 +0000

    Bug 28966: (QA follow-up) Changes for Koha objects
    
    Trivial edits.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 96187695d7782778a30af90fd47fca25107dbfc4
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Nov 9 13:11:32 2022 -0500

    Bug 28966: Prefetch patron data for holds queue viewer
    
    Test Plan:
    1) Generate the holds queue
    2) Load the holds queue viewer page
    3) Apply this patch
    4) Restart all the things!
    5) Reload the page
    6) Note nothing has changed
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e997b4b3a3ab748e5a4d26da42c1db9ebb1697bb
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Nov 9 12:09:34 2022 -0500

    Bug 28966: Add Koha::Object(s) for tmp_holdsqueue
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3c90dbcb82e16bee63cda729a0db4c94d8d8a78f
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jul 25 16:28:27 2023 +0100

    Bug 32739: (follow-up) QA Cleanup
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 69653a281dcbe2d0d610cbc2be6cc2718b52fca3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 17 15:48:20 2023 -0300

    Bug 32739: Allow other patron identifier on pwd validation
    
    This patch takes a step forward on the password validation endpoint, by
    adding  the `identifier` parameter and making it be allowed
    to be the patron's `cardnumber` or the `userid`.
    
    The current `userid` only validation option is kept as-is.
    
    The implementation relies on `C4::Auth::checkpw` to query for the
    patron.
    
    To test:
    1. Apply this patches
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/password_validation.t
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 419d1d4fe9e4dae2e98493b81a74b0193104acfd
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 17 15:48:09 2023 -0300

    Bug 32739: Unit tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4485963f5d24e0ddeff7cb534ecd6c620169d843
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jan 4 11:13:54 2023 +0100

    Bug 34226: Add tests
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 958c37c5c976449b91f1d8a46979aa1a2e5d79c3
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jul 24 11:14:31 2023 +0100

    Bug 34226: Use 'type' at the datatable config level
    
    Lets use 'type' definitions at the datatables settings level instead
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4e3b209a0d6b6adecfd5ce3107f416bd581b8aaf
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 7 15:11:44 2023 +0200

    Bug 34226: DT wrapper - pre-processed date term when filtering
    
    If we have filters on top of column on a table that is using the DT REST API wrapper,
    we cannot filter on date using formatted dates.
    
    This was done for "date of birth" for bug 32505.
    Here we want to provide a generic approach.
    
    Note that we cannot use what has been done on bug 22440 in some cases
    (when we don't write the thead DOM directly but rely on DataTables
    constructor, for instance bug 33568). The data- attributes are not
    passed by DT.
    
    Test plan:
    On top of 33568, filter date columns using the full version of the
    formatted date
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9c3fa90aec58dbc50a7577489a20d1b74556f790
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jul 25 08:20:48 2023 -0300

    Bug 33964: (QA follow-up) Remove library from cpanfile
    
    Email::Sender::Transport::SMTP::Persistent is part of the Email::Sender
    distribution, and a git diff on the repository doesn't show any
    difference.
    
    The patch author just took the number from MetaCPAN.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9b992a797cb1883807448f540aef39e562fb0b1f
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 24 22:18:53 2023 -0300

    Bug 33964: (QA follow-up) Syntax error in cpanfile
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 71377c5e7bd1ecf7731f3891455a5b8fdb461736
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Jul 18 07:30:23 2023 +0000

    Bug 34169: (follow-up) Fix ordering from staged files by removing superfluous form
    
    Removes the unneded new form element as we have one big form for the whole page.
    
    This should fix the situation where only the prices and information
    of the first selected record carreid over into the order.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c943fddac6ba8b7ab5228b57c59d22adce4becc1
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Jul 17 16:01:25 2023 +0000

    Bug 34169: Add decimal class to all relevant input fields in the acquisitions module
    
    This is a first step towards more consistency and possibly supporting
    multiple input formats as well in the future. It marks all input fields
    for monetary values, such as prices, replacement prices etc. with a class
    that is linked to a check for number format with the jQuery Validator plugin.
    
    To test:
    
    For any input field to test, try adding various false entries, like "abc" or "1,00".
    It should only accept inputs with decimal dot, like: "1.00"
    
    0) Apply patch, restart_all
    1) Suggestion
      * Add a new suggestion in the staff interface
      * Test: price input field at the bottom of the form.
      * Accept the suggestion
    2) Order form
      * Create a new basket
      * Create an order line from an existing record
      * Test: list price, replacement price, and actual price.
      * Check the checkbox for uncertain price before you save
    3) Uncertain prices
      * Go to the uncertain prices page for this vendor
      * Test: price field
        Note: this form does its own validation, but the change should not change behaviour for now
      * Resolve the uncertain price
      * Close order
    4) Receive shipment
      * Test: Shipping cost
    5) Receive the order
      * Test: replacement price, actual price
      * Check checkbox for price in foreign currency
      * Test: price in foreign currency
      * Receive order line
    6) Invoice summary
      * Finish receiving
      * Test: shipping cost
      * Test: invoice adjustments: amount in the form for the first entry, amount in the table after adding it
    7) Merging invoices
      * Receive another shipment and create and invoice
      * Go to invoices and search all
      * Check the 2 entries for merging
      * Test: shipping cost
    8) Adding orders from a staged/new file
      * Export some records using the cart or list
      * Create a new basket
      * Order from new file
      * Import your file, ignore item records
      * Test: price and replacement price
      + Bonus: also test with items, test plan and file from bug 22802 are really helpful here
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6b2308c17bd8add62e5cc7deb095ed28a2e2fcf4
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jul 14 15:42:46 2023 +0000

    Bug 34169: Use jQuery validator plugin to validate amounts
    
    This is a first step towards more consistency and possibly supporting
    multiple input formats as well in the future. It allows us to mark all
    input fields for monetary values, such as prices, replacement prices,
    fees etc. with a class that is linked to a check for the 'number' format
    in the jQuery Validator plugin.
    
    This is the base patch that does nothing by itself, please see
    test plan in second patch.
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5de1c66fe1a38aafaea690e5075b01b85e685f8e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jul 20 14:11:22 2023 +0000

    Bug 33964: (QA follow-up) Handle absence of smtp server
    
    Resolve:
    Use of uninitialized value in hash element at /usr/share/koha/C4/Letters.pm line 1472.
    Use of uninitialized value in hash element at /usr/share/koha/C4/Letters.pm line 1473.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e9ce739b74c1357d4ca8fc0136377b4f15de7f6e
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jun 8 11:57:47 2023 -0400

    Bug 33964: Use Email::Sender::Transport::SMTP::Persistent for sending email
    
    As described in bug 30013, some outgoing SMTP services ( such as Gmail ) do not like Koha's current behavior of initiating a new connection for each email sent.  If we switch from Email::Sender::Transport::SMTP to Email::Sender::Transport::SMTP::Persistent and store the object for the duration of the message queue processing, this should solve that issue.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ad124fe536aa11380bdce38b4dfc600864159477
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Wed Jun 14 17:20:00 2023 +0000

    Bug 33978: Adding authority from automatic linker closes imported record
    
    If you import a record, then create an authority record using the automatic linker, it closes the biblio record. The problem occures when a record is edited in a new tab.
    
    To recreate:
    
    1. Import the example records
       1.1. Download the example records
       1.2. Go to Cataloging > Stage records for import
       1.3. Choose the downloaded file
       1.4. Click Upload file
       1.5. Click Stage for import
       1.6. Click View batch
       1.7. Click Import this batch into the catalog
       1.8. Click View detail of the enqueued job
       1.9. Click Manage imported batch
    
    Correct behaviour:
    
    2. In another tab, search for one of the records (for example, Fafounet)
    3. Click Edit > Edit record
    4. Go to field 100
    5. Click Link authorities automatically
       --> It should say 100 - No matching authority found.
    6. Click the plus sign next to 100
    7. Fill out the mandatory fields by clinking in the text fields (000, 003, 005, 008, 040), field 100 should already be filled
    8. Click 'Save'
       --> Authority number is added in 100 and you get to stay in the record for more edits if needed
    
    Incorrect behaviour:
    
    9. Go back to the imported batch tab
    10. Click Edit next to the second title (the one by Paventi, Eza)
    11. Redo steps 4 to 8
        --> Record is closedclear :(
        The behaviour should be the same, stay in the bibliographic record until it is saved.
    
    12. Apply the patch
    13. Redo step 9, 10, 4
    14. Edit field 100, Type 'Paventi Test 2'
    15. Redo step 5 to 8
        --> Authority number is added in 100 and you get to stay in the record for more edits if needed
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 80db7c05b8e393556138878b10ec506062d5eac7
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Mon Jul 24 15:59:17 2023 +0000

    Bug 34280: (QA follow-up) perltidy
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0cf5dfcbd8c2e5f896f041faff157c7768b468e6
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Fri Jul 14 14:11:28 2023 +0000

    Bug 34280: Fix warning in logs when saving patron details
    
    If a patron has no valid email address then a warning message appears in the logs when saving:
    
    "Use of uninitialized value $email in string ne at /kohadevbox/koha/Koha/Patron.pm line 1445."
    
    This patch fixes that error by removing an unnescessary string ne
    
    Test plan:
    1) Create/choose a patron with no email addresses
    2) On the patron record in the page section for Contact information, click edit
    3) Now click save
    4) The warning above should appear in the logs
    5) Apply patch
    6) Repeat steps 2 and 3
    7) The warning should no longer appear
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3cb77a590bb884e2e6151ec2d24333e828c8ddb9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 4 12:03:59 2023 +0200

    Bug 34028: Show the secret when registering from the auth screen
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 55ac11f55e1f335f73dce798048ec7efa5f45183
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 20 17:38:12 2023 +0200

    Bug 33105: Fix Auth/Permissions.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d81b009ab0634e1ae33a1bb5cf20cad538bb361f
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Jul 16 14:11:19 2023 +0000

    Bug 34181: Fix jQuery selector to make delete checkboxes reappear
    
    Bug 32257 changed the page structure slightly to fix a display
    issue with the labels. This resulted in a broken selector in the
    function for displaying the checkboxes for deleting/emptying a
    certain patron field.
    
    To test:
    * Go to Tools > Batch patron modifications
    * Enter some cardnumbers or borrowernumbers
    * On the batch patron edit form, verify that the checkboxes
      behind each input field are missing
    * Apply patch
    * Verify the checkboxes reappeared
      * Verify that for mandatory fields the checkbox is locked
    * Make some batch edits and verify the checkboxes work as
      intended
    
    Signed-off-by: Lisette Scheer <lisette.scheer@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ec8705550967f3224f9b64b0d6fb22a7dfe845ab
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Mar 7 12:21:12 2023 +0000

    Bug 32711: Fix biblio embeds
    
    We need to drop the embed part of the args we pass to biblioitem else we end
    up with some very strange behaviours on the acquisitions endpoint.
    
    Signed-off-by: Silvia Meakins <smeakins@eso.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 61cacd898547bbddd7a1cbb5fb9f7b99380e8a83
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jan 24 15:00:03 2023 +0000

    Bug 32711: Add 'public_read_list' appropriately
    
    We're exposing biblio (and thus biblioitem) to the public API now and as
    such we need to explisitely list which fields to include in the response
    when called on the public api.
    
    Signed-off-by: Silvia Meakins <smeakins@eso.org>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 050c173f6cb2570948fd9ff22e047ee750bd0270
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jan 24 12:22:34 2023 +0000

    Bug 32711: Add biblio details to modal
    
    This patch adds biblio details to the self-checkout modal. As part of
    this we add 'biblio' to the x-koha-embed option on the public items
    endpoint, clone the js-biblio-format include from the staff client
    adapting it slightly for OPAC use along the way and also import
    escape_str and escapeHtml from staff to opac too.
    
    Signed-off-by: Silvia Meakins <smeakins@eso.org>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2442a4537d4d439bdf27e031116f98d880e47e09
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 6 14:54:11 2023 +0200

    Bug 34213: import_patrons.pl - Fix short version of matchpoint option in POD
    
     44     'c|confirm'                      => \$confirm,
    
     46     'm|matchpoint=s'                 => \$matchpoint,
    
    The POD is wrong.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eb84c45da46b0b49dec9e9191aeb85a767d119f7
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Thu Jul 20 18:23:32 2023 +0000

    Bug 34332: Removed extra parenthesis that was causing an error
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 92692a2ee96f2eced21849e0ca9fa0b5d7c44801
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jul 21 10:17:39 2023 +0000

    Bug 34334: Item(s) in MARCdetail untranslatable
    
    This patch adds a <span> around the text "Item(s)" in the template for
    the MARC detail page in the staff interface. Without the span the
    translation tool can't detect the string.
    
    To test, apply the patch and update a translation, e.g. fr-FR:
    
      > cd misc/translator
      > perl translate update fr-FR
    
    - Open the corresponding .po file, in this case
      misc/translator/po/fr-FR-staff-prog.po
    - Confirm that the string is now in the .po file for translation. You
      should find these lines:
    
    koha-tmpl/intranet-tmpl/prog/en/modules/catalogue/MARCdetail.tt:146
    c-format
    msgid "Item(s)"
    msgstr "Exemplaire(s)"
    
    I found that the translation was already populated. Install the updated
    po file:
    
     > perl translate install fr-FR
    
    Test the MARC detail page in your translated language to confirm that
    the string is correct.
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c8dbed27f1e3b5f962318b0e158166794974b406
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jul 20 16:57:37 2023 +0100

    Bug 33286: Update 'catalog' to 'bibliographic' in preferences
    
    Correct the terminology to make it clear catalog concerns only concerns
    bibliographic records at the moment, not authority records too.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6b914e8c232f81a5ed8a542d82fe8b833a676121
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jul 20 10:55:14 2023 +0000

    Bug 34320: Hold reordering arrows look broken after Font Awesome upgrade
    
    This patch makes minor CSS corrections to the arrows on the place hold
    page in the staff interface. The corrections are necessary because of
    changes in the display of icons in Font Awesome 6.
    
    To test, apply the patch and locate a bibliographic record in the staff
    interface to place a hold on.
    
    - Place at least one hold on that title.
    - After placing the hold, you should see a table of all the existing
      holds on that record.
    - The arrow control links should look correct, with the "move to top"
      and "move to bottom" arrows having an extra border to differentiate
      them from the others.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 95af4c9de18ebbb686ec2b1291dbf0fa980c9450
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon May 29 12:10:51 2023 -0300

    Bug 33556: Avoid relying on $c->validation
    
    Talking to the OpenAPI plugin maintainer, he mentioned the use of $c->validation->output should be avoided as the plugin is not designed to have a stable behavior there, and he even thought of just removing the method.
    
    That method returns an internal data structure the plugin uses to validate things, and then updates the request itself.
    
    Take the following example:
    
    GET /patrons/123
    x-koha-embed: checkouts,library
    
    without the OpenAPI plugin, requesting the header like this:
    
    $c->req->headers->header('x-koha-embed')
    
    would return a scalar, the string 'checkouts,library'.
    
    When using the plugin, and with `x-koha-embed` being defined as collectionFormat: csv, that header is entirely replaced by an arrayref.
    
    That's how the plugin works and how it is expected to be used. So we need to replace the uses of $c->validation format, with normal Mojo usage to avoid future headaches.
    
    This patch changes:
    * $c->validation->param => $c->param
    * $c->validation->param('body') => $c->req->json
    
    To test:
    1. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/*.t
    => SUCCESS: Tests pass!
    2. Apply this patches
    3. Repeat 1
    => SUCCESS: Tests still pass!
    4. Sign off :-D
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dcbd3e69295a778788f0d3d840b3edc30a8657e1
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 8 11:52:11 2023 -0300

    Bug 33556: Path parameters are handled explicitly in the controllers
    
    In the case of $c->objects->search_rs, the variable is just not used.
    In the case of /acq/orders, it's a leftover from when we removed in the
    helper. Check there are tests with path params everywhere (including
    orders) and it has no effect.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 39496af98f3d6408821636b92c5f6e3a25e5e71c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 21 11:27:26 2023 +0200

    Bug 34337: (bug 33581 follow-up) Sample patrons not inserted
    
    The "select all" link for the optional sample data is not selecting
    holidays and patrons.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 951722370a82f88966f5d4781da9ff9dab6b8d6e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jul 20 12:59:06 2023 -0300

    Bug 33379: DBRev 23.06.00.012
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5864ca6974a385c21d815ae5f2853a738ef9d2bc
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jul 20 12:49:04 2023 -0300

    Bug 33379: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 36b6eeceb849a9e6aa7e2333f0c2a7951c621a7c
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Jun 27 14:25:44 2023 +0000

    Bug 33379: Remove virtualshelfcontents.flags
    
    This field is unused. A historic leftover from 2000-2010.
    
    Test plan:
    Run dbrev.
    Run prove t/db_dependent/Koha/Virtualshel*
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d0fddc019478432847dac708fdc8f9db129c877d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 20 16:25:45 2023 +0200

    Bug 33105: (follow-up) DB changes
    
    boooh!
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>

commit fa9750e24de0a6300d683a1316b64e9bed248c4b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jul 20 07:45:05 2023 +0000

    Bug 34316: Add_credit should rethrow an exception correctly
    
    Found while running Items.t on top of 33608.
    Another exception was thrown but not rethrown.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9919d7afd492f844012d8ae12a1ea4155e2edca2
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jul 20 11:49:37 2023 +0000

    Bug 34321: Tidy skeleton.pl
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6e03a187b78bbb16e39e507bccc7ae8f9703f328
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jul 20 10:54:11 2023 -0300

    Bug 33105: DBRev 23.06.00.011
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e8c5c0360afd8a09bec83662e44625f5f40b440d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jul 20 10:43:36 2023 -0300

    Bug 33105: Avoid using $c->validation
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 20070fc6bcd95cdf5d226d73749da7f4efba3b9b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jul 20 10:29:52 2023 -0300

    Bug 33105: Add missing POD
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5ba8a8510a374de0b0574f30d7796c42168960c3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jul 20 10:24:41 2023 -0300

    Bug 33105: Tidy files
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6a55fad7b42ce8a9735dabc965dfd524899e4e71
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 7 10:03:36 2023 +0200

    Bug 33105: Redirect to 404 if no vendor exists
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2f5883c997c727ecc2b85a3974795920bb7d9ac8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 7 09:55:15 2023 +0200

    Bug 33105: Fix vendor api spec
    
    vendor ID must be integer and date attributes should specify the format
    accordingly.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5a28ce57a00ceb7a85773c90abb43e41d97a82ac
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jul 7 06:58:41 2023 +0000

    Bug 33105: (QA follow-up) REST API
    
    Includes removing q_header.
    Inconsistent use of quotes for response codes.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8be682c96108d5705e9e3ca9051fa073310e6c7d
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jul 7 06:57:37 2023 +0000

    Bug 33105: (QA follow-up) Changes for Koha objects
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b1194c60da694b85e91f3b5a03389929abf1fc46
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jul 7 06:41:27 2023 +0000

    Bug 33105: (QA follow-up) Small changes in dbrev
    
    Similar edit in kohastructure added.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7b68f1afcaeda3c3b99f6e3aab2b018b3639c931
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 11 22:38:45 2023 +0200

    Bug 33105: DBIC specific
    
    Signed-off-by: Jonathan Field <jonathan.fieeld@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bd5e7148fb22c12a96e524f86da77f2d47f698f1
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jun 30 09:55:14 2023 +0000

    Bug 33105: [DBIx] Schema changes
    
    Former patches did not apply anymore. Refreshed them.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3ead2ab623d2702c46416a635b9b80d2f09e6109
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Apr 12 10:45:33 2023 +0200

    Bug 33105: Add tests
    
    Signed-off-by: Jonathan Field <jonathan.fieeld@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fb8c31c287b8b2f7842f82f3ae1278ccb1873411
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 11 23:12:18 2023 +0200

    Bug 33105: REST API specs
    
    Signed-off-by: Jonathan Field <jonathan.fieeld@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0f7daf1b0006ca4fd7e0afb59097eff026e42db0
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 11 23:01:53 2023 +0200

    Bug 33105: Add vendor issues
    
    This patch is the main patch of this patch set, it contains the
    controller acqui/vendor_issues.pl, its corresponding template, and some
    links to this script.
    
    It adds:
    * A new DB table aqbookseller_issues linked with the aqbooksellers table
    * A new subpermission acquisition.issue_manage
    * A new authorised value category VENDOR_ISSUE_TYPE and two examples
    MAINTENANCE and OUTAGE
    * A new controller couple acqui/vendor_issues.[pl,tt]
    
    Test plan:
    0. Apply the patches, run updatedatabase and restart_all
    1. Go to the acquisition module, create a new vendor or use an existing
    one
    2. Create a couple of issues for this vendor
    3. Edit/Delete and search for those issues
    
    This is the basics for tracking issues with vendors.
    Suggestions welcome, on follow-up bug reports.
    
    Signed-off-by: Jonathan Field <jonathan.fieeld@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 56cdee5037dc6ea0b147c12b5d2dd8aa0573834d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 11 23:01:02 2023 +0200

    Bug 33105: Add Koha object classes
    
    Signed-off-by: Jonathan Field <jonathan.fieeld@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1a135e5e8cff30e910bd8a4a68496cf6ca62cade
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 11 15:17:24 2023 +0200

    Bug 33105: DB changes
    
    Signed-off-by: Jonathan Field <jonathan.fieeld@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 08913eeda1fe2637b93cb9879bc813a9f553351b
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jul 19 10:24:32 2023 +0100

    Bug 34178: (QA follow-up) Tidy
    
    Tidy the relevant lines to pass the new QA rules
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c5e45213d50145435b0d311e1491e12f34d9edbf
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jun 30 19:32:36 2023 +0000

    Bug 34178: Adjust tests
    
    We need to clear the cache when changing rules/statuses
    
    To test:
    1 - prove -v t/db_dependent/Holds/DisallowHoldIfItemsAvailable.t
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 105750acb100aa618f3cfe8f3a1dcb5071b287ed
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jun 30 19:26:40 2023 +0000

    Bug 34178: Cache ItemsAnyAvailableAndNotRestricted in memory and don't precalculate
    
    There are several places in the code where we precalculate ItemsAnyAvailableAndNotRestricted to avoid
    looping on this routine when calling IsAvailableForItemLevelRequest on a list of items form a biblio
    
    The value of ItemsAnyAvailableAndNotRestricted is only used when there is a circulation rule for
    'onshelfholds' with a value of '2' (If all unavailable)
    
    Rather than calculate a value that may never be used, let's cache this value per request when we do
    calculate it - and reuse the cached value
    
    To test:
     1 - Apply patch
     2 - Set circulation rule 'On shelf holds allowed' as 'If all unavailable'
        make sure the rule applies to all of the items/patrons you test with
     3 - Find a record with two items that are available
     4 - Try to place a hold for a patron - not allowed
     5 - Check out one item to another patron
     6 - Attempt hold - still not allowed
     7 - Check out second item to another patron
     8 - Attempt hold - allowed!
     9 - Apply patch
    10 - Cancel and replace hold - it is allowed!
    11 - Check in one item, and cancel hold
    12 - Place hold - not allowed!
    13 - Check in second item
    14 - Place hold - not allowed!
    15 - prove -v t/db_dependent/Holds/DisallowHoldIfItemsAvailable.t
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4ce7f8c49378c0e32212493779b07e3ab369dee7
Author: Mason James <mtj@kohaaloha.com>
Date:   Wed Sep 21 23:38:59 2022 +1200

    Bug 28493: Make koha-passwd display the username
    
    to test...
    
    1/ run command
     $ sudo koha-passwd dev1
     Password for dev1: CraZyPa$$WoRD!!
     Press enter to clear the screen...
     ^C
    
    2/ apply patch
    
    3/ run command again, note 'username' section
     $ sudo koha-passwd dev1
     Username for dev1: koha_dev1  <<<<<<<<<<<<
     Password for dev1: CraZyPa$$WoRD!!
     Press enter to clear the screen...
     ^C
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1763b136d1dcd3348ee26bca8663823b5a05f07c
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jul 14 07:36:47 2023 -0400

    Bug 34279: Don't enforce overduefinescap unless it is greater than 0
    
    When creating a circ rule, we can set overduefinescap to blank or 0 and no cap is enforced. If we edit that rule, the blank/0 is converted to "0.00" which perl considers true, thus zero-ing out any calculated fine.
    
    Considering we've always ignored an overdue fines cap of 0, we should also ignore 0.00. However, perl is evaluating it as a string which makes it true instead of false as 0 is.
    
    Test Plan:
    1) Apply the first patch ( unit tests )
    2) prove t/db_dependent/Circulation/CalcFine.t
    3) Note the test fails
    4) Apply the second patch as well
    5) prove t/db_dependent/Circulation/CalcFine.t
    6) Note the test passes
    
    Test Plan 2:
    1) Create an all/all/all rule with an overduefinescap of 0.00, with a
       daily fine. Enable CalculateFinesOnReturn
    2) Backdate a checkout so it is overdue
    3) Return this item, note the lack of a fine
    4) Apply this patch set
    5) Backdate a checkout and return it again
    6) Note the fine is generated!
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8096ec9fff44a04c8ff32525499652116d1a8ad0
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jul 14 07:32:11 2023 -0400

    Bug 34279: Unit tests
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 093d1959af59423e3a9a69139a4745703b7a399a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jul 19 12:41:28 2023 +0100

    Bug 32271: (QA follow-up) Restore $Price filtering for valid values
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c42725bab4f7f4dc360d9b4fe0417b8b3082d879
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jul 19 12:31:14 2023 +0100

    Bug 32271: (QA follow-up) Correction to 'can_be_blank' logic
    
    The logic introducing the can_be_blank check into the monetary decimal
    format check was flawed and meant we were no longer checking decimal
    formatting in the majority of cases. This patch updates that so we pass
    the unit tests and correctly check any value passed that's not an empty
    string.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 41274ef7516ad09f1f9a5e6723ba7bd53379dd02
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jul 19 12:11:50 2023 +0100

    Bug 32271: Unit test
    
    Add a unit test for the allow blank option added to the monetary check
    in CirculationRules.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit daedce4f6ea7d7ae9d4f12cd54e94b0230683a92
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Jul 14 09:08:51 2023 -0400

    Bug 32271: (QA follow-up) Convert all positive numbers to monetary float and convert all 0 equivilents to blank value
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit adeb4d54530d6ef8c4adc171846eb7c47a81bb23
Author: Géraud Frappier <geraud.frappier@inlibro.com>
Date:   Mon Dec 5 12:30:40 2022 -0500

    Bug 32271: Fix overdue fines cap (amount) set to 0.00 when editing rule.
    
    Signed-off-by: Anneli Österman <anneli.osterman@koha-suomi.fi>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 05aeca0bc1df0552a2e750cce69862f7f6118a8c
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Jul 18 11:18:35 2023 +0000

    Bug 33444: (QA follow-up) Add forgotten skipfinecalc in POD
    
    No test plan needed.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dfe1c367040e5b21fcd433765a90971309b78b73
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Jul 18 11:10:22 2023 +0000

    Bug 33444: (QA follow-up) Tidy block in automatic_renewals.pl
    
    Resolves:
    The file is less tidy than before (bad/messy lines before: 94, now: 101)
    
    Test plan:
    Run qa tools.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7afbba200dd8a1615f4ee65b49465ab902827f7c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 7 14:54:36 2023 +0000

    Bug 33444: Update AddRenewal to take a hashref of params
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] Removed skip_record_index => 1 from automatic_renewals.pl. See BZ.
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 67916fc23a518bb1ddc895f6f3e0b27c434b8a92
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Jun 27 15:00:00 2023 +0000

    Bug 34133: Set default sort on first column (ID) desc
    
    Test plan:
    
    Before applying patch:
    * Open incognito at /cgi-bin/koha/ill/ill-requests.pl,
    * Verify order is by ASC (lowest ID first)
    * Close incognito
    
    Apply patch, then:
    * Open incognito at /cgi-bin/koha/ill/ill-requests.pl,
    * Verify order is by DESC (highest ID first)
    
    Signed-off-by: Magnus Enger <magnus@libriotech.no>
    Followed the test plan from Bugzilla, and added it above.
    Works as advertised.
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0d2052088ec62654f81154be0b9916b8e8630891
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Jun 13 17:29:22 2023 +1200

    Bug 33992: Only consider the date when auto-expiring problematic recalls
    
    This patch carries this fix into the misc/cronjobs/recalls/expire_recalls.pl cronjob so that recalls are automatically expired when they have been waiting a problematic number of days, not considering hours, as expected.
    
    To test, follow the test plan from the first patch. This will set you up with a waiting problematic recall.
    
    Run the cronjob manually
    
    perl misc/cronjobs/recalls/expire_recalls.pl
    
    Refresh your 'Recalls awaiting pickup' page. Your problematic recall should be gone/expired.
    
    Expiration dates will apply when expiring any 'unfulfilled' recall i.e. newly requested, overdue to be returned, and awaiting pickup.
    
    Sponsored-by: Auckland University of Technology
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 45b050871e7ed882b553f211db97204f30634646
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jul 19 11:51:54 2023 -0300

    Bug 33028: (follow-up) Lower the two digits requirement
    
    This patch makes the code not require two decimal digits, as the main
    intention here is to forbid (locale) formatted strings to reach the DB.
    
    The number of digits we support needs to be discussed on its own bug,
    and a centralized check implemented.
    
    This patch fixes tests:
    
    prove t/db_dependent/Circulation.t
    t/db_dependent/Circulation.t .. 1/67 Exception 'Koha::Exceptions::CirculationRule::NotDecimal' thrown 'The circulation rule expected a decimal value' with name => fine, value => 0.1
    t/db_dependent/Circulation.t .. Dubious, test returned 11 (wstat 2816, 0xb00)
    Failed 53/67 subtests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b82f1bd8075e0d14aa9d08293831af4cd8a3059a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jul 19 11:26:59 2023 +0100

    Bug 33028: (follow-up) Add POD to new Exception
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 88ccaaf3acab9996070a5bcbc057bbe9dad1c771
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jul 19 11:21:46 2023 +0100

    Bug 33028: Unit tests
    
    Add unit tests for is_monetary functionality introduced in the
    CirculationRules module.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9b7c077c9ddade728a7d84a1cf2f5b62cc4d4841
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jul 18 15:05:50 2023 -0300

    Bug 33028: Make exception less generic
    
    While testing this bug I found Circulation.t was failing, but the
    exception doesn't actually display anything useful in terms of helping
    debug what's going on.
    
    This patch makes it add the rule_name and rule_value to the message.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 82bdaa8fbcdf836dd2fea93850173f15f17b7de9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jul 18 14:28:27 2023 -0300

    Bug 33028: (QA follow-up) Tidy introduced code
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 86c2d9d1e96f318615ca6c83d6bfd685723ab5c9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jul 18 14:24:46 2023 -0300

    Bug 33028: DBRev 23.06.00.010
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f0a3b98cdb1ae0938403bf919f5494e2708821c4
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Tue Jul 11 13:23:40 2023 +0000

    Bug 33028: Perltidy database update script
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d5b1041f43c2a6d8b82f6ee88c1ecf6aaaeb9cae
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jul 3 13:45:28 2023 +0100

    Bug 33028: Throw exception if not passed a decimal number
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 461c1931b9137bfcf64c5ec9a5bc3f127727ec14
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jun 27 16:54:02 2023 +0100

    Bug 33028: (follow-up) Apply unformat_price to decimal fields
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 31cbd5ce946832234c8eb6b99729d781e75fd4bc
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jun 27 16:22:36 2023 +0100

    Bug 33028: (follow-up) Add unformat_price js function
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0199f5fbbb50cbc4656cbeb73c269a7cc6718e55
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jun 16 17:01:52 2023 +0000

    Bug 33028: (follow-up) Rewrite database update
    
    This rewrite the database update with some things in mind:
    
    * We now use a positive value list of allowed characters to check
      This makes sure that all of those are recognized:
      1,00
      1.00€
      abc
    * Instead of dying after finding one wrong value, we loop through
      all values first, building up an error string
    * When we have errors... we die and print the full list of things
      that need fixing.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3c2d40bb4a05687eca67a8e06befd5d43d0a4b9d
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jun 16 16:59:22 2023 +0000

    Bug 33028: Add TT filters for Price and pattern checks to input fields
    
    With this patch, all monetary values in the table will be displayed
    formatted.
    
    Also, the input will be checked against our agreed pattern to make
    sure no false values can be entered.
    
    Missing: When editing a rule, we need to unformat the value, so that
    instead of the display format we have the input format available
    for editing.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e2634097c15d808d4e9a96e33efa9ab245bba88c
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jun 16 16:57:51 2023 +0000

    Bug 33028: Add is_monetary to recall_overdue_fine and article_request_fee
    
    This patch marks the 2 missing monetary values for recal over due fines
    and article request fees as monetary.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 598970a1223b9af043b1977965322758565f7d06
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 3 11:33:46 2023 +0000

    Bug 33028: (follow-up) Fix trailing 0 decimals
    
    We want to recognise the truthyness of a number vs string so we drop
    trailing decimals if they're just 0.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2b48a948cbe7f14526e4ea8836e5175e38ab9d20
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Mar 3 11:28:20 2023 +0000

    Bug 33028: (follow-up) Move monetary definition into hash
    
    This patch moves the defintion of monetary rule type into the rule kinds
    hash.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1f9e161b412621c048c55741bab56b92c0b01a15
Author: Thibaud Guillot <thibaud.guillot@biblibre.com>
Date:   Tue Feb 21 17:05:45 2023 +0100

    Bug 33028: Fix calculations around cronjob fines.pl
    
    When currency format is set on FR commas are decimals separators
    but when cron like fines.pl try to calculate fines it's fails due to
    this format.
    
    I changed this behavior by targetted 'fine' and 'overduefinescap' in
    circulation_rules.rule_name to unformat them when we save them.
    
    This also fix the display in smart_rules table (before with commas price
    was not good displayed - without decimals)
    
    Test Plan :
    1) Set your currency format on 'FR' and 'fine' OR/AND 'overduefinescap'
    with commas
    2) Be sure to have some patron overdues
    3) Run ~/misc/cronjobs/fines.pl with args to find overdues
    4) See an error like 'isn't numeric in substraction[..] or gt > [...]'
    5) Run updatedatabase script (it will replace commas in your rules
    changed in step 1) )
    6) Repeat step 3 and see that everything was going "fine" (:tada:)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0397251ece455801d5b3083feb84cf959cfcea83
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Jul 12 14:09:35 2023 +0000

    Bug 33671: (follow-up) Disable FK check for column change
    
    See also BZ report. As suggested by Tomas.
    
    NOTE: The dbrev is extended too for removing records with a failing guarantor_id
    foreign key (theoretically not present obviously).
    
    Test plan:
    1) cp installer/data/mysql/db_revs/220600048.pl installer/data/mysql/atomicupdate/
    2) Run updatedatabase.pl
    3) Remove copied file
    
    Bonus:
    Manually remove FK constraint before running updatedatabase.
    Insert a record with bad guarantor_id into relationships manually.
    Run the update again.
    You should not see the message that the constraint is removed.
    Is the bad record count reported and record removed?
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    [EDIT] Simplified. No longer removes the FK. Just disables during ALTER.
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2bc251cfdd1efdf6d0f7f299838ff067744ff17b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Tue Jul 18 10:59:33 2023 +0000

    Bug 34303: Only perlcritic files from git repo
    
    Test plan:
    Run t/00-testcritic.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    
    JD amended patch: tidy
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b41cfcd38d4afc153210a90bc3a638788f799b69
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Feb 22 13:23:09 2023 -0500

    Bug 33046: Use process_tt in C4::Reports::Guided::EmailReport
    
    Bug 33030 implements a new helper subroutine to standardize processing of Template Toolkit syntax outside slips and notices. We should use this subroutine in EmailReport.
    
    Test Plan:
    1) Apply this patch
    2) prove t/db_dependent/Reports/Guided.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e2e4b894675a24688058c930d50ed5928292cdbe
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Feb 22 11:47:12 2023 -0500

    Bug 33041: Use process_tt in C4::Serial::NewIssue
    
    Bug 33030 implements a new helper subroutine to standardize processing of Template Toolkit syntax outside slips and notices. We should use this subroutine in C4::Serial::NewIssue
    
    Test Plan:
    1) Apply this patch
    2) prove t/db_dependent/Koha/Items.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bc13d57e02083a541411aa964cb244a0e75ae8d5
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue Aug 23 06:27:59 2022 +0000

    Bug 31339: Add staff wrapper template include for tool plugins
    
    This change adds a template include which can be used as a
    WRAPPER for tool plugins, which makes it easy to pages in tool
    templates without having to copy and maintain a lot of template
    boilerplate.
    
    Test plan:
    0. Apply patch and koha-plack --restart kohadev
    1. Upload koha-plugin-test-wrapper
    2. Enable the plugin
    3. Click "Actions" and click "Run tool"
    4. Note how the plugin page looks like a perfect Koha Tools page
    5. Note that the plugin only contains 6 lines of template code
    to achieve this effect
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 256518bf75f4df70a62bfe401bd911473e629efd
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jun 30 14:22:17 2023 +0000

    Bug 29471: Add display of MARC 520 to staff interface detail page
    
    At the moment 520 only displays in the OPAC. With this patch it
    also displays in the staff interface detail page.
    
    To test:
    * Find a record with 520 or add some 520 entries to a record
      Note: different ind. 1 values will result in different labels
    * View the record in the staff interface and the OPAC
    * Verify only the OPAC shows the 520 entries
    * Apply patch
    * Verify now the staff interface displays them as well
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Updated patch for displaying $u as link.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Restored signoff line from Phil. Change only for $u.
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d572ec461adc2693cd3aa35d5180006636416cb
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 27 13:40:07 2023 +0000

    Bug 29732: Check alert in cataloguing authorities should be a static message
    
    This patch modifies the authority record editor so that form
    validation errors are collected in a static "dialog" at the top of the
    page instead of showing in a transient JavaScript alert.
    
    The text of the message is roughly the same as it was in the alert, and
    links have been added so that the user can click to jump directly to the
    field referenced.
    
    If the user scrolls down away from the static error message, a button
    appears in the floating toolbar to jump back to the message.
    
    - Go to Authorities and create a new authority record using a framework
      which has multiple mandatory fields defined
      (e.g. an unmodified default framework)
    - Without entering anything in mandatory fields, click the "Save"
      button.
    - You should see a message box appear at the top of the page.
      - It should list each missing mandatory subfield and tag, each with a
        "Go to field" link next to it.
      - Clicking the "Go to field" link should switch you to the correct tab
        and scroll the mandatory field into view.
    - When you have scrolled down far enough for the error messages to be
      offscreen, an "Errors" button should appear in the floating toolbar.
      Clicking it should scroll the box back into view.
    - If you fix some but not all of the missing mandatory fields the
      message should update with only the current issues.
    - Confirm that the record saves when all issues are resolved.
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cfbe8daf2118f0ecdeea13ef866e86d2e905b686
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Jul 17 10:59:26 2023 +0000

    Bug 33270: (QA follow-up) Do not change param hashref
    
    Might just be a theoretical thing now, but safer to clone.
    
    Test plan:
    Run t/db_dependent/Koha/Biblio/Metadata.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b3aba2b06527a36ad4edcf1cafbf614c974a590e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Jul 17 10:52:03 2023 +0000

    Bug 33270: (QA follow-up) Tidy
    
    Resolve:
    WARN   tidiness
      The file is less tidy than before (bad/messy lines before: 21, now: 24)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ea1a282b5e2100578354c44d273ba77ede7ae5af
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jul 11 13:59:50 2023 +0000

    Bug 33270: (follow-up) Handle records that fail attempt to ignore bad characters
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c71468537b4fa589e91e7fd5823ddd4f54379e21
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jun 22 11:22:18 2023 +0000

    Bug 33270: Attempt to recover from invalid metadata exception
    
    This patch uses the new record_strip_nonxml routine to attempt to display
    the record when it contains invalid characters
    
    Rather than silently strippg these, we warn in the logs, then add an 'about'
    container to the response. It is displayed nicely in the web view or sent as "INVALID_METADATA" in
    the xml response
    
    The 'error' codes for OAI seem to be at the request level, and the offered codes don't have a match
    for a bad record. Adding the about when we can recover seems the most generous response
    
    To test:
    Test plan, assumes using KTD default data - otherwise you need to find and import a record with encoding issues:
     1 - Enable OAI-PMH system preference
     2 - Browse to:
        http://localhost:8080/cgi-bin/koha/oai.pl?verb=ListRecords&resumptionToken=marcxml/350////0/0/352
     3 - 500 error:
        Invalid data, cannot decode metadata object (biblio_metadata.id=368, biblionumber=369, format=marcxml, schema=MARC21, decoding_error=':8: parser error : PCDATA invalid Char value 31...
     4 - Apply patch, restart all
     5 - Reload the page
     6 - It loads!
     7 - Click 'Metadata' for record 369 - it succeeds!
     8 - Check the logs - confirm you see a warning of the record problem
     9 - Confirm 369 has an about section
    10 - Check the individul 'GetRecord' response as well
        http://localhost:8080/cgi-bin/koha/oai.pl?verb=GetRecord&metadataPrefix=oai_dc&identifier=KOHA-OAI-TEST:369
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4997d59c83ec1c63a3dc2c089fed79e3ad5fa764
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jun 23 13:08:31 2023 +0000

    Bug 33270: Add record_strip_nonxml routine to Koha::Biblio::Metadata
    
    This adds a routine that can strip non xml characters form a record.
    It is intended for cases where we do not wish to throw an exception,
    but rather need to process a record to allow other work to continue
    
    To test:
    prove -v t/db_dependent/Koha/Biblio/Metadata.t
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a8035bea2a597da2c1687afeabd02b426f3148f6
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Feb 22 12:00:07 2023 -0500

    Bug 33043: Use process_tt in SIP modules
    
    Bug 33030 implements a new helper subroutine to standardize processing of
    Template Toolkit syntax outside slips and notices. We should use this
    subroutine in the various parts of the SIP server code where we are
    currently using Template::process directly.
    
    Test Plan:
    1) Apply this patch
    2) prove -r t/db_dependent/SIP
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e3ff3a62048731c130e7185f7ac81e07f41f6ff9
Author: Jan Kissig <jkissig@th-wildau.de>
Date:   Wed Jul 12 10:40:32 2023 +0200

    Bug 34251: When using the fast add framework in addbiblio.pl there is thrown a JS error in selectTab( "#tab0XX_panel" );
    
    This is because no nav tabs are build in addbiblio.tt as BIG_LOOP has a
    length(size) of 1
    
    To test:
    
    1) go to More>Cataloging
    2) click +New record
    3) Click Settings> Fast add framework
    4) take a look on console
    5) try selecting a different framework now, will have no effect
    6) apply patch and redo steps 1 to 5
    7) there should be no error in console and a change in settings works a
       expected
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fbc21148e73547c0e557f106c02dcedbdcc67807
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 17 12:08:34 2023 -0300

    Bug 34288: Unit tests
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8e545cff7523b1930702b9de0eaff0b246a0ef1e
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 17 10:22:39 2023 -0300

    Bug 34288: (follow-up) Tidy block
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0db60995a8dd093210ffa772f56b7d5bac28d197
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 14 20:15:41 2023 -0300

    Bug 34288: Allow access to the cataloguing module with `tools` permission
    
    Bug 31162 moved the cataloguing tools to a new cataloguing module home
    page. This prevents people without cataloguing permissions, but with
    some tools permissions to access things like the labels creator tool.
    
    I tracked all permissions on the cataloging-home.tt template, including
    the Stock Rotation ones which I initially missed because I was focusing
    on tools.
    
    This patch makes the cataloging-home.pl page require either
    'cataloguing' or any relevant 'tools' permission to allow access. the
    page.
    
    The staff interface main page and the top bar dropdown are updated using
    the same logic to display the cataloguing module link.
    
    For that purpose, I wrapped the permissions on a sub in `C4::Auth`.
    
    To test:
    1. Have a patron with only 'catalogue' and some of this permissions:
    
    * inventory
    * items_batchdel
    * items_batchmod
    * items_batchmod
    * label_creator
    * manage_staged_marc
    * marc_modification_templates
    * records_batchdel
    * records_batchmod
    * stage_marc_import
    * upload_cover_images
    * stockrotation => manage_rotas
    
    2. Log in
    => FAIL: No link to the cataloguing module, neither in the dropdown
    3. Apply this patch
    4. Repeat 2
    => SUCCESS: You have the link!
    5. Play with the different combinations and notice things are sound and
       correct
    6. Sign off :-D
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 06cd446ac99adccc5db62fc87022cf0049235328
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 18 10:22:59 2023 +0200

    Bug 33745: Tell perlcritic we know what we are doing
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8eda30af8c8c46ff3cfc77412c79577f38f7c8a2
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Fri Mar 10 10:20:07 2023 -0500

    Bug 33030: Add unit tests
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9282fb55786cf9afc6a3a13d8398dfa72703e16d
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Feb 21 14:17:09 2023 -0500

    Bug 33030: Add standardized subroutine for processing Template Toolkit syntax outside of notices
    
    Koha has evolved to use Template Toolkit for many uses outside of generating slips and notices for patrons. Historically, each of these areas processed template toolkit in a slightly different way. We should add a module to allow Template Toolkit syntax to be processed in a standard and generic way such that all non-notice TT syntax is handled and processed the consistently.
    
    Test Plan:
    1) Apply this patch
    2) prove t/db_dependent/Koha/Items.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3f80a0fcf74be12bb12f249d79139df29455f4a5
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Jul 9 14:08:51 2023 +0000

    Bug 29762: (follow-up) Change field names from phone to primary phone
    
    This change is made in order to make sure that the labels on the
    normal patron form and the batch patron edit tool match up.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 782bb4acf96e9263fabcd6d3b3d1637f890aa9f1
Author: Philip Orr <philip.orr@lmscloud.de>
Date:   Fri Jul 7 13:21:46 2023 +0000

    Bug 29762: Change field names from "Mobile" to "Other phone"
    
    This Patch changes the field name for "Mobile" to "Other phone"
    in Patron batch modification.
    
    To test:
    1. Apply the patch
    2. Go to Tools -> Batch Patron Modification and add some patrons
    3. Hit "continue"
    4. Verify that in the list of patrons you selected, the field
    "Mobile" has been replaced by the field "Other phone"
    5. Verify that down below in the fields to be batch modified,
    the field "Mobile" has also been replaced by the field "Other
    phone"
    6. Add some data into the field "Other phone" (e.g. 12345 or
    some other number) and hit save
    7. Confirm that the field was correctly modified and is still
    named "Other phone"
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 12c5679322a99c08637a53b0ad2c3e6fd78e6169
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 14 16:32:10 2023 -0300

    Bug 30979: Fix xt/api.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2c0ea36a0072f0398c896bc6f3280cf7bfea48e8
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Jul 10 21:30:41 2023 +0000

    Bug 34232: (QA follow-up) Remove superfluous "Use:" from each list entry
    
    We do have a heading "Use existing item groups" above the
    entries. The added "Use:" in front of each entry is not requires and
    makes entries longer and harder to scan.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8065e3515abb79317f7c2dcddcb794529ffc9348
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Jul 7 19:31:15 2023 +0000

    Bug 34232: Make dropdown on additem page rescept display order
    
    To test:
    1. EnableItemGroups
    2. Find a record and add some new item groups with different display orders
    3. Now edit an item on the record and scroll down to the dropdown underneath "+ Add to item group"
    4. Notice that the values in the dropdown do not respect the display order.
    5. Apply patch and restart_all
    6. The display order should now be respected
    
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ca0d91aed46f43e29640914f806dc926c519ae68
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jul 14 09:29:59 2023 +0000

    Bug 33745: (QA follow-up) Tidy
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit abc14dbaf2a982576e17fa157f067d37ce7c3424
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jul 14 09:28:54 2023 +0000

    Bug 33745: (QA follow-up) Remove goto
    
    Test plan:
    Prove t/db_dependent/Koha
    Run the benchmark (on BZ) again
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 837d0a955e3b3ebf66cc381911330f9476a4f2ff
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Tue May 16 13:42:55 2023 +0200

    Bug 33745: Lazily create attribute accessor methods in AUTOLOAD
    
    Lazily create accessor methods when getting or setting an Koha::Object
    attribute resulting in a significant speed up.
    
    To test:
    1) Run the benchmark.pl script
    2) Apply the patch
    3) Run the script again, Koha::Object accessors should be about 7 times faster
    5) Ensure tests in t/db_dependent/Item.t still pass
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8fac9067b2494cca29a2b2147b78366c6a53bcf6
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue May 23 14:01:40 2023 +0000

    Bug 33808: Add aria-labels in reports-toolbar.inc
    
    This patch adds an aria-label and an aria-haspopup to Download buttons
    identified as non-descriptive in accessibility testing
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e0813a3b3dc68f8498ec83cd7df2b0ebad099378
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue May 23 14:00:59 2023 +0000

    Bug 33808: Add aria-labels in basket.tt
    
    This patch adds an aria-label and an aria-haspopup to Download buttons
    identified as non-descriptive in accessibility testing
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aa0f113f97c1b79b69fc7f3999ced00d3ac2b3c3
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue May 23 14:00:11 2023 +0000

    Bug 33808: Add aria-labels in opac-basket.tt
    
    This patch adds an aria-label and an aria-haspopup to Download buttons
    identified as non-descriptive in accessibility testing
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 429f0d6dce8e28fee5e63f06f63552775aadc543
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue May 23 13:58:13 2023 +0000

    Bug 33808: Add aria-labels in opac-shelves.tt
    
    This patch adds an aria-label and an aria-haspopup to Download buttons
    identified as non-descriptive in accessibility testing
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c2e5a3242529a417d75585af113f6b50e2e690f0
Author: Michael Hafen <michael.hafen@washk12.org>
Date:   Wed Jul 5 11:17:09 2023 -0600

    Bug 34209: Follow up on Bug 28726 - move whole 'select all ...' header into condition
    
    Move the whole search header div into the checkbox column condition, so
    that other patron search popups don't have an empty div.
    
    To test:
    * Activate the ERM module
    * Create a new agreement
    * Search for a user using the pop-up search
    * Verify there is an empty div showing as grey box above the table
    * Go to tools > label creator > new batch
    * Search for patrons
    * Verify the box isn't empty and shows the select all ... options
    * Apply patch
    * Repeat steps, verify the empty div is gone and the options remain
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 65b7c6731933f4b7d284ac07b9adab0d2ada60ca
Author: Phil Ringnalda <phil@chetcolibrary.org>
Date:   Sat Jul 1 08:41:15 2023 -0700

    Bug 34182: Don't set biblio.serial based on biblio.seriestitle in AddBiblio
    
    A misunderstanding of the intention of some dead code that probably wanted
    to set biblio.series (which doesn't exist) left us setting biblio.serial
    if biblio.seriestitle was set. The only thing series and serial have in
    common is the first four letters. We shouldn't set serial on something
    with a series (unless someone also sets serial on it, of course).
    
    Test plan:
     1. Administration - MARC bibliographic framework - Actions button next to
        Default framework - MARC structure
     2. In the Search for tag input type 942 and click search
     3. Actions button next to 942 - Edit subfields
     4. Tab s - check the checkbox for Editor, uncheck the checkbox for
        Collapsed - Save changes
     5. Cataloging - New record
     6. Click in the input for 000 and hold down Tab until you get past 008
        to fill in mandatory default values, then type any character in 040
        subfield c
     7. Tab 2 - In 245 subfield a type Series not serial
     8. Tab 4 - In 490 subfield a type any character
     9. Tab 9 - Set the value of subfield c to Books
    10. Click save and leave the tab open to keep the biblionumber
    11. Cataloging - New record - repeat step 6
    12. Tab 2 - In 245 subfield a type Serial not series
    13. Tab 9 - Set the value of subfield c to Books - Type 1 in subfield s
    14. Click save, the biblionumber should be one higher than the first one
    15. Reports - Create from SQL
    16. Type something in Report name, paste in the SQL
    SELECT biblio.serial, biblio.seriestitle, biblio.title FROM biblio WHERE
    biblionumber IN ("","")
        and put your first biblionumber in the first "", your second in the
        second.
    17. Save report - Run report
    18. Series not serial should have a blank in the serial column and the
       character you typed in the seriestitle column; Serial not series
       should have a 1 in the serial column and a blank in the seriestitle
       column.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6485f244e085fe48b796dd64178659c2f4a5e4ba
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 5 12:41:09 2023 +0200

    Bug 34184: Add empty option for suggestion "document type"
    
    Currently when editing a suggestion, the document type will preselect to the
    first entry as we don't have an empty entry.
    This can lead to data errors easily.
    
    Test plan:
    Create a new suggestion
    => Notice that "document type" is empty by default, pick one
    Edit it again
    => Notice that the value is kept and empty can be picked, pick empty
    Edit again
    => Empty is selected and saved in DB
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bcabb5d24712b23963c4616efae19e940cf2c544
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Jul 14 08:37:27 2023 +0000

    Bug 34256: Fix regression from 34092
    
    It appears search_fields variable got lost somewhere in my own rebases.
    search_fields variable was not being considered as it should, in the function.
    I think this patch fixes it.
    
    This showed in the borrowernumer no longer being searchable:
    
    * Use search filters in patron search
    * Set 'Search field' to borrowernumber
    * Search for 19 (Henry) or 41 (koha) in sample data
    * No results :(
    * Apply patch
    * Search leads to the patron record again
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0992769f6ee935d7f12c127ab5df827768361585
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Jul 12 13:22:54 2023 +0000

    Bug 34261: Add missing argument to show_account
    
    This patch fixes a missing $crypt in the show_account function when deleting an edifact ordering account.
    
    Test plan:
    1) In system preferences search for EDIFACT and change EDIFACT to Enable
    2) Navigate to Administration > EDI accounts
    3) Create a dummy account
    4) Try deleting the account using the delete button in the actions column on the far right
    5) An error should be thrown - "Can't call method "decrypt_hex" on an undefined value"
    6) Apply patch
    7) Try deleting the account again
    8) This time it should work and show the confirmation dialog box
    9) Sign off
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 80eb5ac35be44afd5547e1fa75da475d88f95612
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jun 7 13:20:40 2023 +0000

    Bug 33939: Preserve order budget dropdowns and default budget dropdowns seperately
    
    The dropdowns have different hints after bug 22802. We need to preserve those when adding
    or hiding inactive budgets
    
    To test:
    1 - Add some inactive budgets to Koha
    2 - Use the settings and file from bug 22802 to stage a file and begin adding to basket
    3 - When adding to basket test the 'Show inactive funds' on both the 'Select to import' tab and the 'Default accounting details' tab
    4 - Ensure the dropdown hints/defaults don't change when hiding/showing budgets
    5 - Confirm inactive budgets are correctly shown/hidden
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8813c23a79cae05b8eb3a176bea5fa755bf1ee6a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jul 7 12:19:27 2023 +0000

    Bug 34225: KohaTable broken on batch item deletion and modification results
    
    This patch adds the columns_settings include file to the batch item
    modification and batch item deletion templates so that the tables can be
    rendered as DataTables.
    
    To test, apply the patch and go to Cataloging -> Batch item
    modification.
    
    - Submit a batch of barcodes or item numbers for modification.
    - On the next page which shows all the items you submitted, the table
      should be rendered as a DataTable.
    - Confirm that sorting, filtering, and export all work correctly.
    - Confirm that there are not JS errors in the browser console.
    - Perform the same tests on Cataloging -> Batch item deletion.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 228938541b6ad3142f1b7ca65c28440e99a4d58d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 14 12:05:13 2023 -0300

    Bug 30979: DBRev 23.06.00.009
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d0ef15717f0d6ea0b9e0406e865631d17e1f585a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 14 10:20:27 2023 -0300

    Bug 30979: Fix regression
    
    This patch fixes a regression introduced by the 'Fix public availability
    500' follow-up.
    
    To test:
    1. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/checkouts.t
    => FAIL: Tests fail!
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: Tests pass! Tests are useful!
    4. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0a0b1eb68bdff791060f3f9daa404bd102aa2910
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 14 10:07:20 2023 -0300

    Bug 30979: (QA follow-up) Tidy things
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d9491b75539c69aeaa95cadc4fcba7cad20de525
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 14 09:43:29 2023 -0300

    Bug 30979: (QA follow-up) Add missing docs on error codes
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 96bbd70d2dd16c9dadeaf343e12abc83537f65c1
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 17 19:56:43 2023 +0100

    Bug 30979: (follow-up) Fix public availability 500
    
    When we introduced the logged in user id to the token generation we
    had the knock on effect of creating a 500 response for unauthenticated
    availability lookups.
    
    This patch resolves the 500, but results in a token that's not useful
    for the end user.  We should consider this in the wider context down the
    line.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 89b008bccd54dfc2c85458e8f346dac367804d0e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Feb 20 17:02:05 2023 +0000

    Bug 30979: Add modal trigger to shibboleth target url
    
    Signed-off-by: Silvia Meakins <smeakins@eso.org>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1d2539b803b2ea13a9548bca3c7140a5a3907aed
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jan 24 11:03:40 2023 +0000

    Bug 30979: Redirect to checkout summary
    
    This is a temporary solution whilst we wait for the biblio api endpoints
    so we may include more biblio details in the checkout modal itself.
    
    Signed-off-by: Silvia Meakins <smeakins@eso.org>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d77006331b3691310e8c7643cb6eb240783abc8c
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jan 17 14:14:36 2023 +0000

    Bug 30979: Always show self-checkout when preference enabled
    
    This patch updates the display logic such that if the truested
    self-checkout option is enabled we always show the checkout button and
    prompt a login when no user is found.
    
    Signed-off-by: Silvia Meakins <smeakins@eso.org>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 709255fdfa0182e9928447c1b64af52ff31c5ca6
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Aug 15 12:19:31 2022 +0100

    Bug 30979: Add checkout modal to the OPAC
    
    This patch adds a new self checkout modal to the OPAC when
    OpacTrustedCheckout is enabled and a user is logged in.
    
    The new modal allows an end user to scan an item barcode to checkout.
    We check for item existance and availability and then check the item
    out after any confirmations have been displayed.
    
    Signed-off-by: Silvia Meakins <smeakins@eso.org>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bc55051e494efa5fd62f825e6d863dbdaddd30e8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Mar 6 17:32:32 2023 +0000

    Bug 30979: Limit public checkout endpoint using preference
    
    The public api endpoint for self-checkout should only be enabled in the
    case where the OpacTrustedSelfCheckout option is enabled.
    
    Signed-off-by: Silvia Meakins <smeakins@eso.org>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9d97f4764d7710020acb725f42c670e2a16fb8f5
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jul 18 10:22:06 2022 +0100

    Bug 30979: Add 'OpacTrustedCheckout' preference
    
    This patch adds a new 'OpacTrustedCheckout' system preference to govern
    whether the library allows opac users to check out items to themselves
    from their OPAC login.
    
    Signed-off-by: Silvia Meakins <smeakins@eso.org>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 959794e1cbd88e34c93478d534c13c306738e3ef
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri May 5 15:56:27 2023 +0100

    Bug 30979: Add public endpoints
    
    This patch expands the checkouts endpoints to allow for a public workflow.
    
    We add the availability endpoint under `/public/checkouts/availability`
    and restrict the information we send back to only those fields a public
    user should be allowed to see.
    
    We also add a new checkout endpoint at `/patrons/{patron_id}/checkouts`
    that allows for users to checkout to themselves and accepts the same POST
    request with checkout details including item_id and a confirmation token
    in the body that the staff client endpoints accept.
    
    Signed-off-by: Silvia Meakins <smeakins@eso.org>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b72c623c30808cf1ce4a0225d89fd3f9db23bedc
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 10 11:24:17 2023 +0100

    Bug 30979: Unit tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c0f2a47d3ce78a23aa1b6253188108ce3b0047b7
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jul 14 07:36:03 2023 +0000

    Bug 33727: (QA follow-up) perl tidy whole file
    
    Test plan:
    Run prove again. Run qa tools.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2eb6c36c4ddec644619486dea5520e89ef9af56b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Sat May 13 12:18:02 2023 +0000

    Bug 33727: Merge both Calendar tests
    
    The old t tests become part of the first subtest.
    
    Test plan:
    Run the new t/db_dependent/Calendar.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6e736a5d5f342325651944772b74c5ace1b8814f
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Sat May 13 12:06:55 2023 +0000

    Bug 33727: Groundwork for Calendar.t
    
    Update test while removing need for Test::DBIx::Class.
    
    Test plan:
    Run t/Calendar.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 308d75d05d105a5829c98617b5229fae587c32f3
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Jul 12 14:53:46 2023 +0000

    Bug 34243: Fix copy/pasted city references in api tests
    
    Two occurrences.
    Just comments.
    
    Test plan:
    Read the patch.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9c7fdb3ea874a20debb73bac176bcc3ccec081c5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 14 08:46:53 2023 -0300

    Bug 33039: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 631609322418632d724b81848a72b1f7b1b8e74c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jul 14 08:44:23 2023 -0300

    Bug 33039: DBRev 23.06.00.008
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cc478eaaa9a7b6322dbd37daf6e96fe196701be9
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Feb 22 07:03:39 2023 -0500

    Bug 33039: Add ability to specify a template for serial subscription "Published on (text)" field
    
    Some libraries would like to have the text version of the serials
    "published on" field auto-generated from a template. This template
    should be definable at the subscription level.
    
    Test Plan:
    1) Apply this patch
    2) Run updatedatabase.pl
    3) Restart all the things!
    4) Create or edit a new subscription
    5) Edit the "Publication date template", create a template toolkit
       template.
       Keys available are the Koha::Subscription object as 'subscription'
       and the following serial table columns as keys:
        serialseq
        serialseq_x
        serialseq_y
        serialseq_z
        subscriptionid
        biblionumber
        status
        planneddate
        publisheddate
        publisheddateext
        notes
        routingnotes
       So your example template could be "[% subscription.subscriptionid %] [% biblionumber %]"
    6) Generate the next serial
    7) Note the next issue has a "Date published (text)" field based on the
       template you set!
    
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 930eb65c94342ae0f1a2bd993acaefcff8564e18
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu May 25 11:57:15 2023 +0100

    Bug 33804: (follow-up) Convert to JSDoc formatted documentation
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1000ab402b86ea9cafefbea698e9b05f62105353
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 23 12:16:55 2023 +0200

    Bug 33804: Use as_due_date to display due dates
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fb040a330fc968c1bf297c70a7e28f866cac06e2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 23 12:16:41 2023 +0200

    Bug 33804: Add as_due_date option to $date
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3824547e5c92328ae0bf54939ec0315b1cbfd98f
Author: Phil Ringnalda <phil@chetcolibrary.org>
Date:   Tue Jun 27 15:34:59 2023 -0700

    Bug 34097: Prevent clicking ellipsis for dateaccessioned plugin from scrolling up
    
    Test plan:
    1. Find a record with several items (in ktd "MacLaren's Gaelic
       self-taught" will do nicely
    2. Click the Edit button next to one of the items
    3. Click the "..." to the right of "d - Date acquired" and verify that the
       page doesn't scroll up to the top, and that the current date is
       inserted in the field
    4. Click the "..." to the right of "w - Price effective from" and verify
       that the page doesn't scroll up and the current date is inserted
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e3a7202363d0033a9c29b1143fc47c8c631f269f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jul 11 10:21:09 2023 +0200

    Bug 33863: Update values in data that will be saved
    
    We are not saving the values of the input but a representation of the
    form, contains in $("#order_edit").data('row');
    
    To acchieve that it's preferable to reuse _update_unitprice and call it
    when #change_currency is modified.
    
    Some code cleaning slipped into the patch, for readability purpose.
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 768702be7af6afe8df4558c56ef3bd3d09562603
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 5 11:55:33 2023 +0200

    Bug 33863: Reset value if checkbox is unchecked
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 140bad214c86531c57ecf1ec804697ac1be4895a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 30 14:37:33 2023 +0200

    Bug 33863: (bug 25655 follow-up) Check "Change currency" only if checked before
    
    We should not check "Change currency" if it has not modified in the
    original order.
    
    Test plan:
    Create an order with 3+ items
    Receive 1 item, don't check "change currency"
    Receive an other item
    => "Change currency" is not checked
    Check "Change currency", modify the currency and the price
    Receive a third item
    => Change currency is checked, invoice currency and price are set
    correctly to the previous values
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f91cc77a68983c1c47ca785eb750dfebd3a1cdb5
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon Jul 10 21:08:38 2023 +0000

    Bug 33946: (QA follow-up) Add spans and classes for styling and translatability
    
    Adds back the spans around No title and more spans for
    'No bibliographic record' with individual classes for each
    to allow for styling later.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 04814be829ad99bb5a5302f84419528d64548465
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jun 8 13:19:07 2023 +0100

    Bug 33946: Resync opac/intranet includes
    
    This patch resyncs the whitespace chomping in the opac include to match
    that in the intranet include so aid in diffing between the two.
    
    No changes should be visible in the UI but there may be cleaner markup
    as a result.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f3e0abddffb8927a48dcf798f8934b5565a9b3b4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 8 09:48:42 2023 +0200

    Bug 33946: Do not display link to non-existing bibliographic record
    
    If you use biblio-title.inc on a biblio that does not longer exist, "No title" is shown with a link to catalogue/detail?.pl?biblionumber=
    
    We should at least remove the link.
    
    We could even do better and display "No bibliographic record" if the biblio does not longer exist.
    
    Test plan:
    Edit mainpage.pl, add
    $template->param( your_bib => Koha::Biblios->find(42) );
    Edit intranet-main.tt, add
    [% INCLUDE 'biblio-title.inc' biblio=your_bib link = 1 %]
    
    Not hit the main page and see what's hapenning.
    If you have a bibliographic record with biblionumber=42, its info will
    be displayed.
    Remove this record and try again => it's replaced with "No bibliographic record"
    without a link
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3f3503f10386cb7b2f27ca9c4455a502e9c06709
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 5 11:07:35 2023 +0200

    Bug 33956: Use Koha::Biblio->opac_summary_html from opac-user.pl
    
    This code is currently duplicated in controllers opac-readingrecord.pl
    and opac-user.pl.
    
    After bug 33949 it will be removed from opac-readingrecord.pl, and bug
    33956 aims to remove it from opac-user.pl.
    
    Final situation will be: we have the code in a module, covered by tests
    \o/
    
    Test plan:
    Check an item out
    Setup OPACMySummaryHTML ("biblionumber: {BIBLIONUMBER}" for instance)
    Go to the "Your summary" at the OPAC and notice the "Links" column
    Everything should work identically before and after this patch
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b1dcab3077d352d89ec2013d4cc9d30a9f7ed132
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 8 11:38:01 2023 +0200

    Bug 33954: Koha::Biblio->opac_summary_html
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3b68039351c874a44a51cafae1895a2117c436f6
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 8 12:46:25 2023 +0200

    Bug 33954: Add tests
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e0140072f6e577f5c38a20878b5f2e9e947d50cd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 8 11:58:51 2023 +0200

    Bug 33953: Koha::Biblio->ratings
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d5ded8684d4f3df056babeeab38c0062a153dea7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 8 12:36:52 2023 +0200

    Bug 33953: Adjust tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9d59d0d308fc5dfd007df31e300b99a01c85bcb4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 8 10:55:36 2023 +0200

    Bug 33952: Koha::Biblio->normalized_isbn
    
    This is needed for bug 33947 where we need to call ->normalized_isbn on a Koha::Biblio object.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3c52e63f782ed4cbe275c19dfcadfd59def43d39
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 8 12:29:38 2023 +0200

    Bug 33952: Add tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2d27d02a4d63b3d3a322db18db8420693e986fdd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 6 14:08:26 2023 +0200

    Bug 34211: Add +strings for GET /api/v1/biblios/:biblio_id/items
    
    Allow to embed stringified version of attributes for the "Get items for
    a biblio" endpoint
    
    Test plan:
    curl -u koha:koha --request GET 'http://localhost:8081/api/v1/biblios/47/items' --header "Content-Type: application/json" --header "x-koha-embed: +strings" | jq
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b86ad81bbf19eb5becf0652dcd23dad99cf158be
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 6 14:08:13 2023 +0200

    Bug 34211: Add tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2c73648f77e530fdd50885bd0e72343d0d4c5c4e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 5 15:44:50 2023 +0200

    Bug 27824: Trim column headers
    
    To support additional spaces.
    
    Using the system for defining a column name placeholder (Bug 23390), if
    there is a space inside the column name placeholder it won't work. The
    SQL example in Bug 5697:
    
    SELECT
    i.itemnumber,
    i.itemnumber as Exemplarnummber,
    [[i.itemnumber| itemnumber for batch]],
    CONCAT('<a
    href=\"/cgi-bin/koha/cataloguing/additem.pl?op=edititem&biblionumber=',
    i.biblionumber, '&itemnumber=', i.itemnumber, '#edititem', '\">',
    i.itemnumber, '</a>' ) AS "itemnumber as edit link"
    FROM items i
    
    "[[i.itemnumber| itemnumber for batch]]" has a space before "itemnumber
    for batch." With that space removed it works as expected.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a91e80af7dc76c926c246b8f6f98bf6682345dcd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 5 15:44:32 2023 +0200

    Bug 27824: Add a test
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 780d6ecb51710bfc2b6978cbe8b8614b12c7eadf
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Mon Jul 10 03:45:52 2023 +0000

    Bug 31147: Recalls should not adjust due time for related checkouts
    
    The current recalls behaviour adjusts the due date of the most appropriate checkout based on the 'recall due date interval' circulation rule. It also adjusts the due time, which is buggy behaviour. The due date should be adjusted based on the circulation rule, but the due time should remain the same.
    
    To test:
    
    1. Enable the UseRecalls system preference and configure recalls-related circulation and fines rules
    2. Check out Item A to Patron A
    3. Log into the database and check the due date for that checked out item, e.g.
    
    SELECT date_due FROM issues WHERE itemnumber = XXXX;
    
    --> It should be YYYY-MM-DD 23:59:00
    
    4. Log into the OPAC as Patron B and place a recall on Item A. This will force a change to the recall's due date. Check the due date in the database
    
    SELECT date_due FROM issues WHERE itemnumber = XXXX;
    
    --> It should be today + the number of days in your recall due date interval circulation rule, at the exact time you placed the recall. This is buggy behaviour.
    
    5. Apply the patch and restart services
    6. Check in Item A, do NOT fulfill the recall
    7. Cancel the recall
    
    8. Check out Item A to Patron A
    9. Log into the database and check the due date for that checked out item, e.g.
    
    SELECT date_due FROM issues WHERE itemnumber = XXXX;
    
    --> It should be YYYY-MM-DD 23:59:00
    
    10. Log into the OPAC as Patron B and place a recall on Item A. This will force a change to the recall's due date. Check the due date in the database
    
    SELECT date_due FROM issues WHERE itemnumber = XXXX;
    
    --> It should be today + the number of days in your recall due date interval circulation rule, with time of 23:59:00.
    
    11. Check in Item A, do NOT fulfill the recall
    12. Cancel the recall
    
    13. Check out Item A to Patron A. Specify a due date and change the due time so it isn't 23:59.
    14. Log into the OPAC as Patron B and place a recall on Item A. This will force a change to the recall's due date. Check the due date in the database
    
    SELECT date_due FROM issues WHERE itemnumber = XXXX;
    
    --> It should be today + the number of days in your recall due date interval circulation rule, with time you set in Step 13.
    
    15. Confirm tests pass t/db_dependent/Koha/Recalls.t
    
    Sponsored-by: Catalyst IT
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e0df163bfcfafb3baac6d11ab1864bdbd4d0befa
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Jun 7 05:30:40 2023 +0000

    Bug 33933: Only show use restriction once on OPAC detail page
    
    This patch removes a regression from bug 32611 that caused the
    use restriction text to be shown twice for "Available" items.
    
    Test plan:
    0. Apply patch
    1. Go to http://localhost:8081/cgi-bin/koha/cataloguing/additem.pl?biblionumber=29
    2. Edit item and add "Restricted access" for "5 - Use restrictions"
    3. Go to http://localhost:8080/cgi-bin/koha/opac-detail.pl?biblionumber=29
    4. Note that "Status" says "Available (Restricted access)" and there is no
    duplicate "Restricted access" at the top of that table cell
    
    Signed-off-by: ebal <eric.balluto@univ-lyon2.fr>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 213392fd6bc02f3551a573e3a6127f3ecbaaed31
Author: Phil Ringnalda <phil@chetcolibrary.org>
Date:   Mon Jun 19 18:32:46 2023 -0700

    Bug 28196: Insert searchid in URL correctly, so it doesn't follow the hash
    
    Test plan:
    1. Search the catalog in the staff client for anything which will return
       at least two results
    2. Click on any result to go to the bib detail page
    3. Click the edit button for any item attached to the bib
    4. Verify that the loaded URL contains &searchid=scs_(a number), and
       that the URL ends with #edititem
    5. Make any change to the item, save, verify that your change was made
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7118a01294c6eab2b79305d95ecf7cad64d69458
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Jul 7 23:12:56 2023 +0000

    Bug 34220: Only show biblio-view-menu.inc if their is an associated bib
    
    To test:
    - Go to Tools > Log viewer
    - Uncheck All modules
    - Check the 'Catalog' module
    - Make sure "To screen in the browser" is the selected output
    - Click Submit
    
    After the page loads, instead of the tools side navbar appearing on the left, a 'catalog detail' type navbar (Normal, MARC, ISBD, etc.) is present with links that error out as there's no associated bibnumber.
    
    -Apply patch
    -Try again, you should not see the biblio-view-menu
    -Try one more time but this time add a valid biblionumber to the Object: field. Now the biblio-view-menu should show with links to that particular bib.
    
    Works as advertised.
    Signed-off-by: Alexander Blanchard <alexander.blanchard@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c7a0a31a79d09b985f0fd8dd4166f7ee825bc561
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Sun Jul 9 15:33:01 2023 +0000

    Bug 31082: (QA follow-up) Fix translation - we are in a .tt not in a .js file
    
    Just changing from two to one underscore.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4c21e6a3e2e97fd8fc481d84c437fefaac4bccf8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 7 11:40:32 2023 +0200

    Bug 31082: Make the string translatable
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 826db3092bc59a5ea2f8b37b6d542973a13bca94
Author: Victor Grousset <victor@tuxayo.net>
Date:   Mon Jun 19 00:39:19 2023 +0200

    Bug 31082: (follow-up) same for "remove" action button on bundle item list
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cbc46793415a531ae0041a9857520bb4f0b9b90b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 25 11:46:39 2023 +0200

    Bug 31082: Add tooltip to buttons when item bundles cannot be changed while checked out
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b2f5c9362138189509f09b61c8e18c2a844b432e
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Jun 8 10:20:02 2023 +0000

    Bug 33581: Add sample patrons to patch and some hints
    
    * Adds sample patrons to the new dependency checking JS
    * Adds a hind "requires sample libraries" to sample patrons
      and sample holidays.
    
    To test:
    * Build CSS (yarn build)
    * Veriy the checkbox for sample patrons works like the
      sample holidays one
    * Verify the hint shows up as intended
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1137511e63e9b6fd0b1d52f34fb35b0ffb8dc363
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 7 11:31:20 2023 +0200

    Bug 33581: Disable sample holiday if libraries are not selected
    
    If libraries are not selected we should not try to insert holidays, or
    the installer will fail with a missing FK.
    
    This patch simply disable and uncheck the checkbox when libraries are
    not going to be inserted.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c4cb183ae1f7225c86a38178176c966ad9cebeda
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 5 12:26:09 2023 +0200

    Bug 32801: Prevent 500 on /checkouts
    
    If checked_in flag is passed we return the "old checkouts". But if the
    item has been deleted we explode with
      "message":"Expected integer - got null.","path":"\/0\/item_id"
    
    The specs should reflect that an item can have been deleted.
    
    Test plan:
    Hit the endpoint and confirm the above.
    Can be done easily using curl:
      curl -u koha:koha --request GET 'http://localhost:8081/api/v1/checkouts?patron_id=5&checked_in=1' --header "Content-Type: application/json" | jq
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b157a2cd7fd57169850ac12e9cb18c4edf771ef7
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 5 12:25:40 2023 +0200

    Bug 32801: Add tests
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b787e66fef1f14440aa24685171d386bc41b666d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jul 11 14:26:46 2023 +0100

    Bug 34094: (follow-up) Fix failing unit test
    
    The unit tests were written to assume we always do a 'contains' search,
    but the new system preference allows for 'starts_with' or 'contains'.
    
    As such, for the tests to pass, we need to explicitly mock the
    preference to 'contains'
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 28d7108624d779934aad74931ef0aebdd9e732c2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jun 5 13:07:35 2023 +0000

    Bug 33893: Use template wrapper for tabs: OPAC checkout history
    
    This patch updates the OPAC checkout history page so that it uses
    the new WRAPPER syntax to generate tabs markup.
    
    This patch also updates tab WRAPPER directives in html_helpers.inc to
    allow us to pass a custom id for tab links in situations like this one
    where we have multiple tabs requiring unique IDs but they all point to
    the same panel.
    
    To test, apply the patch and make sure the OnSiteCheckouts system
    preference is set to "disabled."
    
    - Log into the OPAC as a patron with checkouts.
    - View the checkout history page. The checkout history information
      should be displayed without any tabs.
    - Enable the OnSiteCheckouts system preference and if necessary check
      out some on-site checkouts to your patron.
    - On the OPAC history page there should now be three tabs: All,
      Checkouts, and On-site checokuts.
      - Switching between the tabs should filter the table accordingly.
    - Test that the changes to the tab wrapper have not broken tabs on other
      pages, e.g. bibliographic details or user summary.
    
    Signed-off-by: AlexanderBlanchardAC <alexander.blanchard@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2bed26db3b6e0e57c0ced394b51d3a9f07e6e662
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Mon Jul 3 16:19:28 2023 +0000

    Bug 26862: Improve MARC21 530 display on detail pages
    
    This makes some changes to the way we display field 530 in OPAC
    and staff interface:
    
    * Adds missing spaces before $u and between repeated $u subfields
    * Adds a description/label before the output of the subfields
    * Adds display to the staff interface (was OPAC only)
    * Adds separators between repeated 530 fields:
      * OPAC: updates mark-up to use the new CSS driven separators
      * Staff interface: adds | with separator class
    
    To test:
    * Find or create a records with multiple 530 entries
    * Repeat $u with multiple URLs
    * Verify display in staff (missing) and OPAC
    * Apply patch
    * Verify display is improved :D
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Heather Hernandez <heather_hernandez@nps.gov>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f6b935a4ca7e9b70c5627fa601b5e9edf42e566d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jul 10 12:37:07 2023 +0000

    Bug 34244: Improve contrast in staff interface main page layered icons
    
    This patch adjusts CSS for the staff interface home page so that there
    is better contrast with Font Awesome icons which are layered. The
    main advanced search and item search links have two icons layered one on
    top of the other, and the "lower" one needs to have better contrast
    after the staff interface redesign.
    
    To test, apply the patch and rebuild the staff interface CSS. Log into
    the staff interface and confirm that the advanced search and item search
    link icons are clear and distinguishable from each other.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c92c893c12ea7fdc37c66916ee3f54ff666d1474
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Jul 7 21:58:55 2023 +0000

    Bug 34233: Move select2 include out of patron-search.inc
    
    1. Apply patch
    2. Place a hold and make sure the patron pickup locations are
       populating correctly again/
    3. Work through the test plan on Bug 28726 to make sure it still works.
    4. Enable ArticleRequests, make sure you can still do a patron search
       there.
    5. Do a patron search from members.tt, make sure that still works.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9066cd152ec5a7bba896676deb6df47791c43140
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jun 23 13:54:43 2023 +0000

    Bug 34112: Replace fa.fa-pencil-alt with fa-solid.fa-pencil in edit buttons
    
    The FontAwesome class "fa-pencil-alt" works in v.6 but is actually a v.5
    class. We should use "fa-solid fa-pencil" instead.
    
    This patch also corrects some leftover instances of "fa-edit"
    
    To test, apply the patch and view some pages in the OPAC and staff
    interface which have updated icons, e.g.
    
     - Administration -> Libraries
     - Catalog -> Bibliographic details
     - OPAC -> Bibliographic details
    
    Confirm that the pencil icon looks correct. Checking all modified
    templates is probably too much, but inspecting the patch should show
    that only fa-pencil-alt and fa-edit icons are affected.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c8452e55fbd738064ce4daf4ceabc9e2949663cb
Author: Philippe Blouin <blou@inlibro.com>
Date:   Thu May 18 16:39:05 2023 -0400

    Bug 33776: Additional default plugin repo in koha-conf-site.xml.in
    
    Solutions inLibro started formating its repository to be found by Bug
    23975.  This patch adds it to the default list in the config template.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cbd0c15c8712601aff2fce3cb0e2d522146096f3
Author: Thibaud Guillot <thibaud.guillot@biblibre.com>
Date:   Thu Jul 6 13:46:47 2023 +0200

    Bug 34218: Send a record copy to avoid loss of information and display problems
    
    As I wrote in the bug description, I encountered this problem in a particular case,
    so I'll explain it in the test plan, but it's certainly likely to be encountered in different ways.
    
    Test plan:
    
    1) Link authorised values with  a field on a MARC framework, like a 942a related to branches
    2) Set it on a record with no items
    3) Activate syspref "AlternateHoldingsField" and set it to field 942a
    4) Go to OPAC View and you will see "Holdings: " without any values
    5) Apply this patch
    6) Do step 4) again and now it's fixed
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 836dc32d6237160de642750676db437599387653
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jun 28 14:48:55 2023 +0000

    Bug 34137: Requested cancellation date column missing from holds awaiting pickup table config
    
    This patch adds an entry for the requested cancellation date column to
    columns_settings.yml so that the column can be configured correctly in
    table settings and on the fly.
    
    To test you will need at least one hold with a cancellation request:
    
    - Go to Administration -> Circulation and fine rules -> Default waiting
      hold cancellation policy
      - Add at least one rule allowing cancellation on waiting items.
    - Place a hold for a patron which would fall under the rule you defined.
    - Satisfy the hold by checking the item in at the hold's destination
      location.
    - Cancel the hold, either by logging in to the OPAC as the patron with
      the hold, or in the staff client via the holds tab on the patron's
      record.
    
    - Apply the patch and restart all services.
    - Go to Circulation -> Holds awaiting pickup
    - In the "Holds with cancellation requests" tab, confirm that there is a
      "Date cancellation requested" column and that it is one of the choices
      under the "Columns" button.
    - Confirm that the correct columns are shown and hidden when making
      selections in the columns menu.
    - Go to Administration -> Table settings -> Circulation -> Holds
      awaiting pickup.
       - Test setting "Is hidden by default" and "Cannot be toggled" for
         various columns in the table, including the "Date cancellation
         requested" column.
    
    Signed-off-by: Quinn <quinn.morris@citruslibraries.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a7db3895a760922ce6371d63fd99dcd55ef1c7c9
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jun 26 17:51:29 2023 +0000

    Bug 34116: Add page-sectioning to item search in label creator
    
    This patch adds a "page-section" class to search results page seen when
    adding items to a label batch. The patch also makes some minor changes
    to markup around the search header to make it more consistent with other
    search pages.
    
    To test, apply the patch and go to Cataloging -> Label creator.
    
    - Click New -> Label batch
    - Without entering anything in the textarea, click the "Add item(s)"
      button"
    - In the pop-up window, perform a search which will return multiple
      results.
    - Confirm that everything looks correct and all controls work as they
      should.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5f43478512a884243bb56f8eac2d8b4dc8211d96
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 11 15:49:08 2023 +0200

    Bug 33047: Return 404 instead of 500 when biblio does not exist
    
    If the biblionumber or the itemnumber passed in parameter does not
    exist we should return 404 instead of exploding with a 500.
    
    Test plan:
    Attach cover images to biblio and items
    Notice that the UI is working correctly (staff and OPAC)
    Hit catalogue/image.pl and opac/opac-image.pl with non-existent
    biblionumber and imagenumber
    Notice that you now get 404 instead of 500
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 72dd43c051f3d8435866f4fb9284541c6ef555b1
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Jun 20 22:19:01 2023 +0000

    Bug 34072: Remove float/clear from froms.scss
    
    To test:
    - go to /cgi-bin/koha/circ/view_holdsqueue.pl
    - inspect something within the page to open the dev tools
    - press ctrl-shift-m to show the device toolbar
    - use the device toolbar to reduce the resolution of your window
    - observe that the search controls are lost at smaller resolutions
    - Apply patch, regerate CSS ( https://wiki.koha-community.org/wiki/Working_with_SCSS_in_the_OPAC_and_staff_interface ), clear browser cache
    - Try again, you should now see the search controls
    - Since this patch changes forms.scss try some other forms in Koha at different screen sizes to make sure they still look correct
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b5c6435fe8df35ef45b6cfd4cc7c4f7e7c92b52a
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Jun 21 19:21:05 2023 +0000

    Bug 34086: Show location on detail page when there is no permenant location
    
    To test:
    1. Have some items without a permanent location.
    2. Go to the staff detail page.
    3. In the 'Home library' column notice the span .shelvingloc is empty.
    4. Add a permanent location, now the shelvingloc is populated
    5. Apply patch
    6. The location should now show even when there is no permenant location.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 927c5a891352e5c63fe7baa0ecb7c9eca001865b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 10 14:31:40 2023 -0300

    Bug 33817: (QA follow-up) Fix tidyness
    
    This patch fixes some reported tidyness issues with the patches.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 34b704fb0b9da3d279c4169920d39b286d17fb39
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jun 27 12:03:58 2023 +0100

    Bug 33817: (follow-up) Fix spec and messages
    
    This patch should resolve the issues highlighted at signoff time by
    Victor.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 384de4a74adb6af1296ee2ad53f1c9ad1dd0c2eb
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 25 11:37:38 2023 +0200

    Bug 33817: Enforce server-side
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8cb2dd4e3077f95528ffffaa4a825aae314d034f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 24 13:16:14 2023 +0200

    Bug 33817: Prevent item bundle that is checked out to be modified
    
    While an item bundle is checked out, we don't want any items to be
    added or removed from the bundle.
    
    To test:
    * Create a record with LDR Pos. 7 = c
    * Add an item for your bundle
    * Add one or more existing items from other records to the bundle
    * Check out the bundle item
    * Verify it appears correctly on the patron account
    * Verify you can still add/remove items from the bundle
    * Apply patch set
    * Verify that the add/remove links are now disabled (greyed out)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 55f3eb3919b282dd3adf7c584b57158b8eed8c25
Author: Andreas Roussos <a.roussos@dataly.gr>
Date:   Wed Jun 14 14:00:15 2023 +0000

    Bug 34005: Move button toggling code outside JS for loop
    
    When OpacHighlightedWords is set to "Highlight", if you search
    in the OPAC and the number of keywords is odd (1, 3, 5, etc.),
    then the "Unhighlight" / "Highlight" button will stop working
    after a couple of clicks. The relevant commit is 9cb89b46397
    from v20.11.00, where the code responsible for toggling the
    "Unhighlight" / "Highlight" button was moved inside the JS
    for loop that cycles through each term in the array of search
    terms. This explains why the toggling only works when an even
    number of search terms is being used.
    
    This patch fixes that, by placing the button toggling code in
    its original position (outside the JavaScript for loop of the
    highlightOn() function).
    
    Test plan:
    
    0) If required, set OpacHighlightedWords to "Highlight".
    
    1) Search for "history" in the OPAC, and view the details page
       of one of the results. Click on the "Unhighlight" button a
       few times -- after a couple of clicks the button text will
       stop toggling and you won't be able to remove the keyword
       highlight any more.
    
    2) Apply this patch.
    
    3) Repeat step 1): this time you should be able to toggle the
       search keyword highlighting no matter how many times you
       click on the "Unhighlight" / "Highlight" button.
    
    4) Repeat step 1), but this time search for "century history":
       you should be able to toggle search keyword highlighting in
       the details page on and off repeatedly without any problems.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f317247776735154722cc41d3afec15bfa7ff9e2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 6 09:19:11 2023 +0200

    Bug 34214: Make 'icon' configurable for Toolbar options
    
    Bug 33417 added a generic 'Toolbar' Vue component but always add a 'plus' icon. We should make it configurable.
    
    Test plan:
    Regenerate the Vue app: `yarn js:build`
    Go to the ERM module and confirm that the toolbar has the '+' icon.
    
    Sponsored-by: BULAC - http://www.bulac.fr/
    Signed-off-by: Alexander Blanchard <alexander.blanchard@ptfs-europe.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 29063caca234f61cbf9640622164dcfce5a2b8ac
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 5 13:47:23 2023 +0200

    Bug 34201: Restore sorting indicator on ERM tables
    
    DataTable Vue component keep the 'sorting' class on the th which display
    the grey up/down icon over the blue icon which indicate the current sort
    column
    
    Test plan:
    Create several agreements, notice that the list view is having the
    sorting indicators (blue arrows) in the top right of the first column.
    Sort the columns: asc, desc, combined sort (shift+click) and confirm
    that the indicators are correct
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8bd54203126322392abeab29144c6240e0f95e27
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jul 7 15:50:52 2023 +0200

    Bug 33497: Don't get host items if the MARC record is invalid
    
    When don't want to explode with "invalid data" later so we need to
    condition the host_item search
    
    call trace was
            Koha::Biblio::Metadata::record('Koha::Biblio::Metadata=HASH(0x55ab92e60120)') called at /kohadevbox/koha/Koha/Biblio.pm line 538
            Koha::Biblio::_host_itemnumbers('Koha::Biblio=HASH(0x55ab92e4d5c0)') called at /kohadevbox/koha/Koha/Biblio.pm line 498
            Koha::Biblio::items('Koha::Biblio=HASH(0x55ab92e4d5c0)', 'HASH(0x55ab934615d8)') called at /kohadevbox/koha/catalogue/detail.pl line 200
    
    This is fixing t/db_dependent/selenium/regressions.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 24b2cd367f511e6f5f3dfb4bfb9b34d1e1ec8068
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jun 26 20:30:56 2023 +0000

    Bug 34124: Improve in-page navigation on table settings page
    
    This patch adds links to the table settings page so that the user can
    jump directly to a particular table within a page section.
    
    The patch also changes the logic of when in-page links are displayed: I
    think it makes sense not to show a "Jump to page" link when there is
    only one page. The page will show a "Jump to table" link only if there
    is only one table.
    
    To test, apply the patch and go to Administration -> Table settings.
    
    - Expand and check multiple sections.
    - In the "Administration" section, there are multiple pages.
      - Check that the "Jump to page" links work correctly.
    - In the "Catalog" section, there is only one page: "detail."
      - Check that the "Jump to table" links work correctly.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1b579868d5568e40225fce079161ae98746ea0ad
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Apr 6 10:21:35 2023 +0000

    Bug 34074: Improve translations of strings on the about page
    
    This patch makes a few simple changes to the about page template to
    improve how the translation tool picks up strings to translate.
    
    The patch also corrects a couple of lines where template tags contained
    line breaks.
    
    To test, apply the patch and view the about page in the staff interface.
    Everything should look correct.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 68f22a1d9f8be45eab99b1c91b6a73c2206064b8
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 6 15:41:40 2023 +0200

    Bug 34212: Fix tests
    
    Not sure what we were trying to do, but apparently we only use the keys
    to generate the id string. How did "please" end up here?
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5f0c2ef48dd9f528e8a526b10154c542fb905c81
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jul 6 15:41:15 2023 +0200

    Bug 34212: Compare strings with eq instead of ==
    
    And don't ignore warnings next time ;)
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fa85255a0c0da7e643e650252012eb37ebcae3ff
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jul 6 07:44:48 2023 +0100

    Bug 34212: Replace Koha::Checkouts->find with $item->checkout
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d20e4ebbdee270e11faf33b9ca9d0e76da675de7
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 25 13:24:28 2023 +0000

    Bug 33781: Terminology: Item already issued to other borrower.
    
    This patch updates a couple of error message strings so that they use
    the correct terminology and read well.
    
    "This item is on hold for another borrower." becomes "This item is on
    hold for another patron."
    
    "Item already issued to other borrower." becomes "This item is already
    checked out to another patron."
    
    To test, apply the patch and log into the OPAC as a patron who has items
    checked out which are available for renewal.
    
    In another tab, place a hold on one of those items on behalf of a
    different patron.
    
    Back in your OPAC tab, click the "Renew" link next to the title which is
    now on hold. The page should reload and show the updated message, "This
    item is on hold..."
    
    I was not able to trigger the other message.
    
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3e15d728e5698bd9afe512a53456da0560cdc5c9
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 7 10:57:37 2023 +0200

    Bug 33858: Format dates in offline circ
    
    1 - check item 3999900000001 out to a patron
    2 - upload the attached KOC file from bug 33838
    3 - navigate to pending offline circ actions
    4 - verify that the date is shown unformatted
    5 - apply patch
    6 - verify that the date is now shown formatted
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Univ Brest <cecile.lambour@univ-brest.fr>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eef588d71c3c53884df0b8b2917528028b81f2b4
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Jul 7 10:46:14 2023 +0000

    Bug 34131: (QA follow-up) Update page title to reflect breadcrumbs and side-menu behaviour
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cfee701b85b5e05e946440ccf9a8bc463f53a0c1
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Fri Jul 7 10:34:22 2023 +0000

    Bug 34131: (QA follow-up): Add 'ill_availability_services' to method filter check
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 680bf6af2faa3b1612e16f77ec58daf129ef431a
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Jun 27 12:38:09 2023 +0000

    Bug 34131: Add 'current' class on correct side menu link
    
    This changes the way we're looking for the correct menu item to set as
    active.
    
    If we don't find an exact match for path+params, we attempt to set
    'current' to just matching on path.
    
    What this does is it sets the 'Plugins' menu item as active, even if
    the url is 'plugins-home.pl?method=report
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 053439e50bd59a981a7f8c727818520653f484b5
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Jun 27 12:33:16 2023 +0000

    Bug 34131: Update breadcrumbs and side bar
    
    Update plugins-home accordingly if tool plugins only filter is being
    used or not.
    Update breadcrumbs for plugins-disabled page
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c3b1d009bf1b5eddfbb90d775846a007146ca3ae
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Mon May 29 19:39:03 2023 +0000

    Bug 33790: Fix and add various links to the manual
    
    * Makes the move from tools to cataloguing for the pages linked
      from the cataloguing start page
    * Adds missing help links to admin and tools pages
    * Fix other existing links
    
    To test:
    * Best is to look at the patch, you'll see the pages you need
      to test on the left.
    * Open the page and access the help page through the help link
      Note: for a few links you'll need to update the version in the
      URL to 23.05 (identity providers is one) as the page doesn't
      exist yet in the 22.11 manual
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d90d264253134a1c6fa7dbb64b959bd7d3789fce
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jul 6 15:50:40 2023 -0300

    Bug 33974: (follow-up) _order_by is not always an arrayref
    
    The loop through the `_order_by` query parameter occurences introduced
    by this patchset was naive regarding the possible scenarios.
    
    When there's only one parameter passed, it shouldn't be expecting an
    arrayref, but a scalar. This patch deals with that in the simplest way.
    
    To test:
    1. Run:
       $ ktd --shell
      k$ prove t/db_dependent/Koha/REST/Plugin/Objects.t
    => FAIL: Tests are failing
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: Tests pass!
    4. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f3cc00d945ecdd74f84c9183e3fb9655248b0e68
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Jul 4 15:26:27 2023 +0000

    Bug 34107: Switch order for id and name feeding the first column in datatables
    
    Test plan:
    * Create 3 agreements, agreement #1 named 'a', agreement #2 named 'c' and agreement #3 named 'b'.
    * Go to agreements list, click the Name column header, notice how the agreements get sorted by id #, not by first char in name. Expected order would be abc or cba, but it's acb or bca.
    * Apply patch, on k-t-d, run the following if you're not using 'yarn js:watch':
        yarn js:build
    * Sort the list again on the 'name' column, notice how it now sorts alphabetically as expected, either abc or cba.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 720dec3f4567f5ff7cbc01b7f7bbe52a21b7244d
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue Feb 21 12:45:48 2023 -0500

    Bug 33029: Add wrapper method for dt_from_string to KohaDates template toolkit plugin
    
    It would be very useful to have direct access to dt_from_string in our templates. This would allow for us to handle custom date and time formatting. It would, for example, allow us to output the month name for a given date via Template Toolkit easily.
    
    Test Plan:
    1) Apply this patch
    2) In a notice add '[% Use KohaDates %][% KohaDates.datetime_from_string().ymd %]' to the top of a notice
    3) Generate that notice for a patron
    4) Note today's date in iso format is rendered at the top of the notice
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Aleisha Amohia <aleishaamohia@hotmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4e1a2f148c91bc2438410f3e71c91f8deb889b91
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Jun 13 19:41:48 2023 +0000

    Bug 34002: Check for stage_marc_import permssion
    
    -1 Log in to the staff client as a user who has  Acquisition management (acquisition) permissions but not the stage_marc_import (tools) permission.
    -2 Go to Acquisitions and Add to a basket.
    -3 Select 'From a new file'
    -4 You will be logged out as the user does not have percussion to visit that page.
    -5 Apply patch
    -6 Try again, you will not see the link for 'From a new file' if you don't have the permssion.
    -7 Give the user the stage_marc_import, you will now see the link
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 251aef431bf554ea333360df515d12b2961242ff
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jun 23 07:11:23 2023 +0000

    Bug 33606: (QA follow-up) Cosmetic changes
    
    Even the POD name wasnt changed after copying :)
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 73b6fc7a55105dc80bff965d0999942d0bb7d4a8
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed May 17 16:28:23 2023 +0000

    Bug 33606: Fix settings
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f5d6955a60078ac1ec92506533ce10441b448e9b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 16 14:33:29 2023 +0200

    Bug 33606: Mark the endpoint as experimental
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit feeb288e300934c29fdc02cdc480e4300ead197a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Apr 25 15:56:51 2023 +0200

    Bug 33606: Add a erm/config route to retrieve the ERM config needed for the Vue app
    
    This could be extended later in bug 32968 to pass the permission of the
    logged in user.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6a2ef1a82de62c6e245933e91ec795f39f1a4ada
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jul 5 16:45:19 2023 +0200

    Bug 34174: (bug 33341 follow-up) Fix Ris export
    
    Bug 33341 incorrectly fix the perlcritic warning.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 83589f0317068a5cd2da7b5524ea6b6b738dfdfe
Author: Emmi Takkinen <emmi.takkinen@koha-suomi.fi>
Date:   Tue May 23 15:29:12 2023 +0300

    Bug 33667: Allow copying holidays to all libraries when editing
    
    When editing an existing holiday and checking the
    "copy to all libraires" checkbox, the other calendars won't
    get updates. Allow this by first checking if holiday exists
    in target calendar and if not, add it.
    
    To test:
    1. Add unique holiday to branch A.
    2. Don't check checkbox "Copy to all libraries".
    3. Save.
    4. Verify the holidays shows on all calendars as
    a green box.
    5. Edit the holiday, now check "Copy to all libraries"
    and save.
    => Verify nothing has changed in other calendars:
    only the green box, no holiday in list on the right
    6. Edit again, make a change to description,
    check checkbox, save.
    => Verify it's still not showing in the other
    calendars.
    9. Apply this patch.
    10. Edit holiday again, check "Copy to all libraries"
    and save.
    => Verify holiday is now added to other calendars.
    11. Edit again, this time do not copy and save.
    => Verify holiday was edited just in branch A.
    12. Again edit, check and save.
    => Verify holiday was edited in all libraries.
    
    Sponsored-by: Koha-Suomi Oy
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7e1104da8340b3c62d3747fe75c13c8c5adea21d
Author: Michael Hafen <michael.hafen@washk12.org>
Date:   Thu Jan 19 14:56:31 2023 -0700

    Bug 18855: Don't create duplicate overdue fines if an issue is returned
    
    This includes Jonathan's followup
    
    If cronjobs/fines.pl is running during circulation hours, then an issue may
    be considered for having it's overdue fine updated after the issue has been
    returned and it's fine status flipped from 'UNRETURNED' to 'RETURNED'.  In
    this case UpdateFine will create a duplicate fine because it can't find the
    specific accountline for the (formerly) overdue issue.
    
    This changes cronjobs/fines.pl to double check the issue before updating
    the fine.  If the issue has changed between starting the script and updating
    the fine, then the script will skip it.
    
    There is a small amount of time between the check and calling UpdateFine
    where the issue can be changed and this problem can reoccure.  The chance
    of that happening is so small that it's probably fine to leave as is.
    
    It is also possible that the fine won't be updated because the issue was
    returned.  In this case the fine payed by the patron will be lower, but that
    is better then the patron finding later that there is more to a fine they
    thought they had paid all of.
    
    Test plan (by Caroline):
    0. Preliminary settings
       0.1. finesMode system preference must be set to Calculate and charge
       0.2. There must be a circulation rule that will charge fines (beware of bug 32271)
       0.3. In Tools > Calendar, today must not be a holiday
    
    1. Make a lot of overdue checkouts - I used the batch checkout feature, but if your system already has a lot of overdue checkouts, you can skip to step 2
    
       1.1. Enable batch checkouts
            1.1.1. Go to Administration > Global system preferences
            1.1.2. Search for BatchCheckouts
            1.1.3. Set BatchCheckouts to Allow
            1.1.4. Select all categories in BatchCheckoutsValidCategories
            1.1.5. Click "Save all Circulation preferences"
    
       1.2. Get a list of barcodes
            1.2.1. Go to Reports
            1.2.2. Click "Create from SQL"
            1.2.3. Give the report a name
            1.2.4. For the SQL query, enter
    
                   SELECT barcode FROM items WHERE onloan IS NULL LIMIT 60;
    
            1.2.5. Click "Save report"
            1.2.6. Click "Run report"
            1.2.7. Click "Download" > "Tab separated text"
    
       1.3. Go to a patron's file
            1.3.1. Go to Patrons
            1.3.2. Click on "Search"
            1.3.3. Click on a patron's name
    
       1.4. Do a batch checkout with a due date in the past
            1.4.1. Click on the "Batch check out" tab on the left
            1.4.2. In "Use a file", click "Choose file"
            1.4.3. Choose the file downloaded from the report
            1.4.4. In "Hard due date", choose a date in the past
            1.4.5. Click "Check out"
            1.4.6. Click "Checkout or renew"
    
    2. Find the last issue in the database
    
       2.1. In the database (or in reports), type the following query
    
            SELECT issues.*, items.itype as itemtype, items.homebranch, items.barcode, items.itemlost, items.replacementprice, items.biblionumber FROM issues  LEFT JOIN items USING (itemnumber) WHERE date_due < NOW() \G;
    
       2.2. Copy the barcode from the last entry
    
    3. Set up so that you can run fines.pl and check in the item at the same time (or very close to the same time)
    
       3.1. In Koha, click the "Check in" option in the search bar at the top of the page
       3.2. Paste the barcode in the search bar BUT DO NOT PRESS ENTER OR THE ARROW RIGHT AWAY
       3.3. In a terminal, enter the fines.pl command
    
            ./misc/cronjobs/fines.pl
    
       3.4. Execute the command and immediately click on the arrow in the staff interface to check in the item
    
    4. Check the patron's fines
    
        4.1. Click on the patron's name in the check in screen
        4.2. Go to the Accounting tab on the left
        4.3. In the search box just above the table, paste in the returned item's barcode
    
        --> Without the patch, there are two fines, one Fine (Accruing) and one Fine (Returned) for the same item at the same time
        --> With the patch, there is only one fine, Fine (Returned)
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 82d0021cd854787127ffdb42c769919ddb41dcdc
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 31 12:06:20 2023 +0000

    Bug 33497: (follow-up) Adjust relationship name from bug 33493
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c662bfe18e6cb47671cf5cc3fb7865e59e6bc007
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 31 11:32:54 2023 +0000

    Bug 33497: (follow-up) Remove unecessary scalar
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2fe2a0aa03b40e143de551aaf9ee87edd592dc0f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 10 16:14:50 2023 +0000

    Bug 33497: Add a filter relationship for branchtransfers
    
    This uses the new relationship from bug 33493 to fetch the transfers for items
    
    To test:
    1 - Transfer some items on a bib
    2 - View the biblio details page in the staff interface
    3 - Apply patch
    4 - Confirm  the view is the same
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2cf00f1a49a7b9f8d5ca105e2dd1add5d5d95198
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 10 12:40:30 2023 +0000

    Bug 33497: Use 'host_items' param to fetch all items at once
    
    This patch adjusts the detail page to fetch items and host items
    together, and prefetches transfers and checkouts
    
    To test:
    1 - Enable easy analytics
    2 - Attach some items to a bib
    3 - Checkout an item on the bib
    4 - View the details page
    5 - Apply patch
    6 - View details page, confirm nothing has changed
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7d72e686531a54c51534a2871909256b22832128
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri May 19 09:57:23 2023 +0000

    Bug 33496: (QA follow-up) Update POD statement
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1d4182a944e5048e307d1b554a3724041b1ce75a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 14 12:40:55 2023 +0000

    Bug 33496: (follow-up) Correct param names
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8ff2e962b2e8e41db60cbc746a849287a83ccb65
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 10 12:37:49 2023 +0000

    Bug 33496: Add 'host_items' param to Koha::Biblio->items
    
    This patch adds an option to the $biblio->items method to allow
    retrieving the items and analytic items for a record. This is intended
    to allow fetching a single Items object, and related object, rather than
    having to fetch the items, and the host items, and push them together
    
    This is step towards being able to fetch items using API/DataTables directly
    
    To test:
    1 - prove -v t/db_dependent/Koha/Biblio.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 68aeaf5c4c6aeeca4347995e5f74464929c20ac5
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jun 1 13:03:50 2023 +0000

    Bug 33879: Do no longer overwrite interface in check_cookie_auth
    
    This will only have effect on installations running OPAC and staff
    on the same domain name. In that case an OPAC cookie still allows
    you to access intranet, and v.v.
    
    Test plan:
    Repeat the following steps WITHOUT this patch and WITH it.
    Login via OPAC.
    Go to staff. Perform an action that logs the interface in e.g. the
    statistics table, like a checkout.
    Inspect interface in the corresponding table. Observe difference
    that this patch makes.
    
    With this patch:
    Run t/db_dependent/Auth.t. Should pass again.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Björn Nylén <bjorn.nylen@ub.lu.se>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a7fda386475f5d8b9c5866305ab6a4128a9ef584
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jun 1 13:42:03 2023 +0000

    Bug 33879: Add unit test to show problem
    
    Test plan:
    Run t/db_dependent/Auth.t without second patch.
    Should fail:
        #          got: 'opac'
        #     expected: 'intranet'
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Björn Nylén <bjorn.nylen@ub.lu.se>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c2b066d4be734bbb583c9207582b68f4026479c5
Author: Sam Lau <samalau@gmail.com>
Date:   Tue Jun 27 22:10:32 2023 +0000

    Bug 34101: Limit items types that can be checked out via SIP2
    
    This bug adds the ability to define a list of item types that are blocked from being issued at that SIP account
    
    To test:
    1) Apply this patch
    2) Visit Administration->Item types and select edit on the music item type
    3) Make the rental charge 0 and save changes (this allows for the item to be checked out via SIP)
    4) In the terminal, vim /etc/koha/sites/kohadev/SIPconfig.xml
    5) Edit the term1 account and add the following *inside* the login section:
         blocked_item_types="BK|MU"
         You should have something similar to this: <login id ="term1" ........... checked_in_ok="1" blocked_item_types="BK|MU" />
    6) Restart SIP (sudo koha-sip --restart <instancename>)
    7) Run a checkout query for an item with the item type book. Here is an example you could use:
        perl misc/sip_cli_emulator.pl -a localhost -p 6001 -su term1 -sp term1 -l CPL --patron 23529001000463 --item 39999000011418-m checkout
    8) Notice the checkout failed and you are given the screen msg "Item type cannot be checked out at this checkout location"
    9) Run a checkout query for an item with the item type music. Here is an example you could use:
        perl misc/sip_cli_emulator.pl -a localhost -p 6001 -su term1 -sp term1 -l CPL --patron 23529001000463 --item 39999000008715 -m checkout
    10) Notice the checkout failed and you are given the screen msg "Item type cannot be checked out at this checkout location"
    11) vim /etc/koha/sites/kohadev/SIPconfig.xml and delete the BK from the blocked_item
    12) Delete the BK from blocked_item_types. It should now look like :
        blocked_item_types="MU"
    13) Restart SIP (sudo koha-sip --restart <instancename>)
    14) Run a checkout query for the item with the item type book
        perl misc/sip_cli_emulator.pl -a localhost -p 6001 -su term1 -sp term1 -l CPL --patron 23529001000463 --item 39999000011418    -m checkout
    15) Checkout succesful
    16) Run a checkout query for the item with the item type music
        perl misc/sip_cli_emulator.pl -a localhost -p 6001 -su term1 -sp term1 -l CPL --patron 23529001000463 --item 39999000008715     -m checkout
    17) Still fails (because it is blocked)
    18) prove t/db_dependent/SIP/Message.t
    19) Congratulate yourself for making it through the long test and sign-off :)
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5d9bc07316524413cbdd961935e62dfd8ad3dfec
Author: Sam Lau <samalau@gmail.com>
Date:   Tue Jun 27 22:54:54 2023 +0000

    Bug 34101: Unit Tests
    
    prove t/db_dependent/SIP/Message.t
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e9cab7f1fc7acc0b340d07770c750ac9fed50a58
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu May 25 07:29:30 2023 +0000

    Bug 33404: Add unit tests
    
    Test plan:
    Run t/db_dependent/Breeding.t
    Run t/db_dependent/Breeding_Auth.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Amended patch: perltidy
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eb759719908949bc5f7c388d26d4e9dd28b1e415
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu May 25 06:03:48 2023 +0000

    Bug 33404: Fix serverhost and init $page
    
    The array serverhost is not filled. Should be replaced with values
    from servers array.
    
    Test plan:
    Nothing exciting here. Read the patch.
    Note that we will test in the next patch if the hostname is saved
    correctly in the import batch.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1233480ffaecb307ae7e9279acee7b516e42776f
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed May 24 14:57:46 2023 +0000

    Bug 33404: Z3950SearchAuth: Save in UTF-8 encoding
    
    Test plan:
    [1] If you have access to a Z3950 MARC8 auth server, search
        for an authority record and import it.
    [2] If you have access to a Z3950 UTF8 auth server, search
        for an authority record and import it.
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4b47f8e48f1ee27d6f2aa5da8f01dceeff96c6aa
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jul 4 07:21:48 2023 +0100

    Bug 23336: (follow-up) Add checkout_availability schema
    
    At some point in the patch series we lost the availability api schema.
    This patch restores a basic version, but we should work towards a
    clearer enum based schema for each of the available blockers, confirms
    and warnings.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a24d1589ce433fd570ee6582a6655f66eff7121d
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jul 4 07:07:05 2023 +0100

    Bug 23336: (follow-up) Fix failing test
    
    Our consistency improvement to the AddIssue return in bug 23336
    highlighted a bad test assumption.  The 'Reinsert the original issue'
    line was silently failing and as such the subsequent test lines were
    actually resulting in a renewal (which previous to this patchset
    returned an empty return that happened to match the empty return of an
    issue failure)
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ba80c71e63549e60fcdd5666bd2484b75e5a174d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 3 13:30:56 2023 -0300

    Bug 33974: (follow-up) biblionumber column needs special handling
    
    This patch makes a particular use case be handled correctly: i.e. no
    context is passed (e.g. 'biblio' explicitly) and the query is done
    against the `biblio_id` attribute. This results in the following DBIC
    error:
    
    [ERROR] GET /api/v1/biblios: unhandled exception (DBIx::Class::Exception)<<DBIx::Class::Storage::DBI::_dbh_execute(): DBI Exception: DBD::mysql::st execute failed: Column 'biblionumber' in where clause is ambiguous at /kohadevbox/koha/Koha/Objects.pm line 394>>
    
    With this patch, this is no longuer the case :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6d433ffa8931487c967ec01c483e9bb13eb5700b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Nov 16 12:10:16 2022 +0000

    Bug 34180: Template variable in JavaScript prevents authority MARC preview from displaying
    
    Since template variables cannot be processed by JS, we must use a
    template to declare a JS variable which the JS file can used. This patch
    corrects this problem in the JS file which handles display of the
    authority MARC preview from the authority search results page.
    
    To test, apply the patch and go to Authorities.
    
    - Perform a search which will return multiple authority results.
    - Click "Actions -> MARC preview." The preview should display correctly.
    - Click "Actions -> MARC preview" on another search result. This preview
      should also look correct.
    - There should be no JavaScript errors in the browser console.
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c7be8462436350841c0b3715f007f2000e1735f5
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jul 3 16:28:44 2023 +0100

    Bug 33974: (QA follow-up) Remove superflous import
    
    We don't actually need the Clone import.. it's not used in Biblios.pmt
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c07e43cf2afecfa6df0ba259187b90f567bc2603
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jun 16 12:53:05 2023 -0300

    Bug 33974: (follow-up) Adapt the orders endpoint
    
    In order to reduce the technical debt carried on the orders controller,
    and to highlight the decisions made on the prior patch, I adapted the
    list() orders controller using the new tools in town.
    
    The result is this endpoint can now embed bibio, without needing to have
    a custom piece of code.
    
    To test:
    1. Apply this patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/*.t
    => SUCCESS: Tests pass :-D
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 353f328ad3a99cc5a9ee913cd1f72a1d841705f2
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jun 16 12:50:07 2023 -0300

    Bug 33974: Make biblioitem columns searchable in a generic way
    
    This patch makes biblioitem attributes be searchable on the biblios
    endpoint. It does so by using the new method in Koha::Biblios, and by
    adjusting objects.search(_rs) to accept a $query_fixer arrayref of
    functions to be applied to each query or order_by parameters.
    
    The result is cleaner code to write, but complex internals.
    
    To test:
    1. Apply this patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/biblios.t
    => SUCCESS: Tests pass! Searching for biblioitem attributes works on the
    API!
    3. Sign off :-D
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 60e8998e914d8f8ba9b2153d542bf42365a41994
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jun 16 12:48:14 2023 -0300

    Bug 33974: Add Koha::Biblios->api_query_fixer
    
    This patch adds the `api_query_fixer` method to the class, and adds
    tests to validate its behavior.
    
    To test:
    1. Apply this patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/Koha/Biblios.t
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8939dc992854c1022e1910a96ca2ac90c13e7f36
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Apr 12 17:29:43 2023 +0000

    Bug 33271: Add collective owing message to moremember page
    
    To test:
    1. Turn on NoIssuesChargeGuarantorsWithGuarantees and set the amount to 5.
    2. Create a guarantor/guarantee relationship.
    3. Add a manual invoice to the guarantor that is larger than 5.00.
    4. Notice the message on that circulation ( check out tab ) page. " Charges: Patron's guarantors and their other guarantees collectively owe X. Checkouts are BLOCKED because fine balance is OVER THE LIMIT. "
    5. Look at the moremember ( details ) page. The same message does not appear.
    6. Apply patch, restart_all
    7. Try step 5 again, the message should now appear.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3a805557dbce850942ec28845974dfc616e2a942
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jun 30 06:55:29 2023 +0000

    Bug 34092: (QA follow-up) Typo
    
    Typo patron_searh_js.
    
    Note for QA/RM: Ignore this qa tools warning:
        forbidden pattern: console.log (line 211)
    This is an intended console warning.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a9f8db17fed36434ef831316f53ded6a478e6747
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Jun 26 12:51:13 2023 +0000

    Bug 34092: Move search-patron.inc logic into buildPatronSearchQuery
    
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ea599d774de4f43adb36a6a8382f0026246b16c1
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Jun 26 12:37:08 2023 +0000

    Bug 34092: Preparation: New buildPatronSearchQuery function
    
    Move patron search query logic out of patron_autocomplete into new function
    
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 972c847bddec64b84f85e221c4edf708bb521740
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Jun 26 10:22:19 2023 +0000

    Bug 34092: Move patron_autocomplete to staff-global.js
    
    Remove patron-autocomplete.js file
    
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b804313c20462fce7648570a4619b7b212765262
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jun 22 15:37:55 2023 +0100

    Bug 34094: Use DefaultPatronSearchMethod consistently
    
    This patch updates the patron search bar and pages to default search
    method to that defined by DefaultPatronSearchMethod system preference.
    
    Test plan
    1) Prior to this patch confirm that regardless of what you set
       DefaultPatronSearchMethod to, the search in /members/member.pl,
       members/members-home.pl and the search from the patrons search top bar
       all default to 'contains'.
    2) Apply the patch
    3) Confirm that the system preference now affects the default option for
       match type upon page load.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e3803577eedac53c26280f1a0f6837803b69d82e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jun 30 07:38:46 2023 +0000

    Bug 29664: (QA follow-up) Typo transacton
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 65a45b761b65b784ac03d2c5901fb60e0dfe06b2
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon May 1 09:50:24 2023 -0400

    Bug 29664: Do not show voided payments in cash_register_stats.pl
    
    Test Plan:
    1) Set up your cash register
    2) Take a payment
    3) Void that payment
    4) Verify the voided fee shows for the "All payments to the library" and
       "Payment" transaction type filters
    5) Apply this patch
    6) Restart all the things!
    7) Verify the voided fee no longer shows for the "All payments to the library" and
       "Payment" transaction type filters
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 35c6d94d251e87ab2e09724e8b30fae4c882d0af
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jun 26 14:04:23 2023 +0000

    Bug 33999: (follow-up) Use link-styled button
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 72524c3fbf3caf67c29c6f1f14afaacf04abd232
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 13 14:11:33 2023 +0000

    Bug 33999: Subscription details link on bibliographic detail page should have permission check
    
    This patch wraps the "Subscription details" link on the bibliographic
    detail page with a permissions check, "CAN_user_serials," so that a user
    lacking permission to access the Serials module will not be shown the
    link.
    
    To test, apply the patch and view the bibliographic detail page of a
    serial record.
    
    - When viewing the "Subscriptions" tab as a user with Serials
      permissions you should see the "Subscription details" link.
    - When viewing the tab as a user without the correct permissions the
      link should not be present.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f88d2e7983a8962e6c7de424dee7cc20200f2c74
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jun 29 06:18:04 2023 +0000

    Bug 34146: Counterpart for serials-edit
    
    Not only additem suffers from it. We can do the same with serials-edit.
    This patch adds a server-side and client-side check as we did for additem.
    
    Test plan:
    Receive serial with adding items.
    Try to add more than 999 items in number of copies.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 143693e217c2ef4616678aa1b1cf9e53e2b0e456
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jun 29 05:58:29 2023 +0000

    Bug 34146: Add a client-side check with maxlength too
    
    Test plan:
    Try to add more than 3 characters now in the number of copies.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2eba689a5a5db2ac6a747c927d6daf01e7c64002
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Wed Jun 28 14:14:51 2023 +0000

    Bug 34146: Do not allow multiple copies to crash server
    
    Currently hardcoded to 1000.
    Can be refined later. Let's first prevent this kind of accidents.
    
    Test plan:
    Add additem.pl. Edit the 1000 to 2. Restart all.
    Add 3 multiple copies. Notice that you got 2.
    Revert your code change.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 252753f84f53a33f3fd3bd4bf3fb8ae02b53ede7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jun 7 10:42:15 2023 -0300

    Bug 33573: Add public endpoint for cancelling holds
    
    This patch introduces a public endpoint for cancelling holds.
    Cancellation requests are generated when the hold is waiting and
    configuration allows requesting cancellation, as the OPAC does right
    now.
    
    Tests cover all the use cases.
    
    To test:
    1. Apply this patches
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/patrons_holds.t
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 24d753cda1e5f7e6a126ffe3af87cbed97dfaea6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jun 7 10:41:53 2023 -0300

    Bug 33573: Unit tests
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bd72f24d04a9843cdb6a86b2ee7a7adff1fc46bb
Author: Jérémy Breuillard <jeremy.breuillard@biblibre.com>
Date:   Mon Apr 4 11:00:09 2022 +0200

    Bug 23775: Claiming a serial issue doesn't create the next one
    
    Whenever we need to generate manually a new serial we go to page
    'serials-edit.pl'. With this patch it is possible to generate a new
    serial on page 'serials.pl'.
    
    Test Plan:
    -- Previously we need a serial which is in EXPECTED status & the Date
    received should not be later than today --
    1) On the intra. Make sure to have at least 1 subscription for a
       bibliographic record & 1 vendor linked
    2) Then Home > Serials > Claims > Claims for <your_vendor_name>
    3) Tick the checkbox of the row where the status is EXPECTED then
    4) Click 'Send notification'
    5) Notice the status of the row : it is now CLAIMED
    6) To verify: Home > Serials > Serial collection information for
       <your_record_name>
    7) Here the status is CLAIMED too but nothing happened around
    8) Apply patch
    9) Repeat from 2) to 6)
    10) The status is still CLAIMED & the new serial with status EXPECTED is
        freshly generated
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b9ffc47100dbb13e966af73c713a6857cb9e8ca0
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Jun 27 14:40:59 2023 +0000

    Bug 34106: Update header search box searchtype when form is submitted
    
    We're updating the side menu searchtype when the search header is submitted,
    we should also update the searchtype in the search header when the form is submitted
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6f1d3883c81184e067e334f3d29f1366f62508d3
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Jun 22 21:59:35 2023 +0000

    Bug 34106: Retain searchtype parameter in member-search-box
    
    To test:
    
    1. In the main search header switch to 'Search patrons'. Bring up the dropdown and look at 'Search type:'.
    2. It defaults to 'Starts with'.
    3. Go to '/cgi-bin/koha/members/members-home.pl' and look at the 'Search type:' on the left side.
    4. It defaults to 'Contains'
    5. Do a patron search from both these places, setting the 'Search type' to contains.
    6. The search bar in the header always resets to 'Starts with'
    7. Apply patch
    8. Try everything again. By default both places should default to contain.
    9. If you change the 'Search type' the search in the main header should always retain that value.
    
    Signed-off-by: Ed Veal <eveal@mckinneytexas.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3fc1f27524a4a0f0dfc6385b289c252502e45fd6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jun 13 11:27:07 2023 -0300

    Bug 33971: Remove x-koha-query header support
    
    This patch removes support for the `x-koha-query` header entirely from
    the codebase. For the purpose:
    
    - $c->objects->search is adjusted
    - Relevant tests are cleared/adapted
    - The OpenAPI spec gets the header removed
    
    To test:
    1. Apply this patch and run:
       $ ktd --shell
      k$ prove t/db_dependent/Koha/REST/Plugin/Objects.t \
               t/Koha/REST/Plugin/Query.t \
               t/db_dependent/api/v1/*.t
    => SUCCESS: Tests pass!
    2. Sign off :-D
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f32fe0d39c88a55d5c6d95a2f6850714adb19ffa
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jun 13 10:48:14 2023 -0300

    Bug 33971: Remove x-koha-query handing in Orders.pm
    
    This patch removes manual handling of `x-koha-query` in the
    Orders:list() controller.
    
    There are no tests for the feature but you can verify no behavior is
    changed by doing:
    
    1. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/acquisitions_orders.t
    => SUCCESS: Tests pass
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: Tests pass
    4. Sign off :-D
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0f1b048b5d1a0e575a0352b978a21297cc282ad5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jun 13 10:44:47 2023 -0300

    Bug 33971: Remove x-koha-query usage in biblios.t
    
    This patch removes handling of x-koha-query from the tests.
    
    To test:
    1. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/biblios.t
    => SUCCESS: Tests pass
    2. Apply this patch
    3. Repeat 1
    => SUCCESS: Tests still pass! Change from x-koha-header to q= gives same
    results.
    4. Sign off :-D
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 41c43449c6c2e2e926ed04cc06647d223a5864dd
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jun 29 09:19:59 2023 +0100

    Bug 33720: Also flush in install
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4391e23ea573bdf4ebec4e5abfc86eb87d504390
Author: Jake Deery <jake.deery@ptfs-europe.com>
Date:   Wed Jun 7 13:37:09 2023 +0200

    Bug 33720: Update the updatedatabase.pl script to flush caches before running
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d735a5804ba5f2a63bf1dcd3925ace9f872ae0ce
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jul 28 09:13:09 2022 -0400

    Bug 31253: Item search in staff interface should call barcodedecode if the search index is a barcode
    
    We should run any inputted barcode through barcodedecode before passing it to any subroutines.
    This was missed during the initial development of bug 26351.
    
    Test Plan:
    1) Set itemBarcodeInputFilter to "Remove spaces from"
    2) Create an item with the barcode "MYTEST"
    3) Browse to the staff side advanced search
    4) Run a barcode search for "MY TEST"
    5) Note no results are round
    6) Apply this patch
    7) Restart all the things!
    8) Repeat your search
    9) Note the item was found!
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Edit: fixed typo in comment
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 871a96552ec9cacad73bf7737d72eee3166523dc
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jul 3 10:15:57 2023 -0300

    Bug 23336: (QA follow-up) Minor fixes
    
    There are two leftover includes, and a couple typos in a comment and POD
    title.
    
    This patch fixes that.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 918bdd435d38d4e1a16e2400c0352fd02d786160
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed May 17 16:54:45 2023 +0100

    Bug 23336: (QA follow-up) Minor fixes
    
    This patch deals with some QA script warnings, and also makes some
    changes in line with bug 33556.
    
    We also adds current user id and checkout item id into the confirmation
    token to improve security and fix the failing tests.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c5a304b4cab1de044b1e531573ef2e682c6c3b75
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue May 16 10:46:43 2023 +0100

    Bug 23336: (follow-up) Switch to using Koha::Token
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 38139718f534f308e5eb846f5e26ef54c01c3376
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Oct 3 17:07:20 2022 +0100

    Bug 23336: Fix inconsistent return of AddIssue
    
    AddIssue can on occasion create a renewal instead of a fresh issue and
    in such a case we currently return undefined. We should be consistent
    and return the existing issue object for the renewal.
    
    Signed-off-by: Silvia Meakins <smeakins@eso.org>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6db025bd9dfeecb1f59490578befafbe57a1548e
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri May 5 15:53:50 2023 +0100

    Bug 23336: Add checkout API's
    
    This patch adds API's to allow for a checkout flow using the RESTful
    API.
    
    We add an availability endpoint to check an items current availability
    status. The endpoint can be found at `/checkouts/availability` and is
    a GET request that requires item_id and patron_id passed as parameters.
    
    We return an availability object that includes blockers, confirms,
    warnings and a confirmation token to be used for checkout.
    
    We also add a corresponding checkout method to the `/checkouts` endpoint.
    The method accepts a POST request with checkout details including item_id
    , patron_id and the confirmation token in the body.
    
    Future work: We should properly migrate CanBookBeIssued into Koha::* and
    use that here instead of refering to C4::Circulation.
    
    Signed-off-by: Silvia Meakins <smeakins@eso.org>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dfc6da2df495a74b697ab450d38ae6b6e17a0a61
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Apr 27 17:03:15 2023 +0100

    Bug 23336: Unit tests
    
    This patch adds unit tests for the new checkout availability endpoint
    we're going to introduce in this patchset.
    
    Signed-off-by: Silvia Meakins <smeakins@eso.org>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 52917c63ab10a165ddf82fd405f387f11921a299
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Jun 27 13:26:10 2023 +0000

    Bug 33972: Remove settings of batch status to importing
    
    This change was done in a transaction - it would either be set as imported
    on success, or rolled back to staged on failure
    
    There is no need for the intermediate status which is never committed
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1b7b44b24d372cd95e1337c5a2557cadc99bf19a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jun 26 15:15:31 2023 +0100

    Bug 33996: (QA follow-up) Fix mappings to match guidelines
    
    The date field guidelines are recorded on the wiki:
    https://wiki.koha-community.org/wiki/Coding_Guidelines_-_API#SWAGGER1.3.4.1_date.2Fdatetime.2Ftimestamp_fields
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3b0fc1fc41ce540a3f1373ec3d0e8aa84a31c046
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jun 13 10:13:40 2023 -0300

    Bug 33996: Add missing authority objects mapping
    
    This patch adds a minimal mapping (i.e. some things get excluded from
    the API objects for now). It makes some attributes consistent with the
    current API names, and the rest can be added later when they become
    needed and we discuss a proper name. But right now is a mess :-/
    
    To test:
    1. Apply this patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/authorities.t
    => SUCCESS: Tests pass!
    3. Sign off :-D
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a8633a58129bc2bb6b26986973501aa6649f2c78
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue Jun 27 13:23:08 2023 +0000

    Bug 34130: Make requested_date nullable in api definition
    
    This patch allows the requested_date for an ILL request to be NULL to accomodate
    older data
    
    To test:
    1 - Install the Koha 2 Koha ILL plugin:
        https://gitlab.com/koha-community/plugins/koha-plugin-ill-koha
    2 - Enable the ILL  system preference
    3 - Force an ILL request with minimal data from backend:
        INSERT INTO illrequests (borrowernumber,biblio_id,branchcode,backend,status) VALUES (5,3,'CPL','Koha','placed');
    4 - View the ILL table
    5 - Error:
        {"message":"Expected string - got null.","path":"\/body\/0\/requested_date"}
    6 - Apply patch
    7 - Table loads successfully
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 23b328d6af61bd9ab402c230097748337c8f5257
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jun 26 12:00:30 2023 +0100

    Bug 33778: (QA follow-up) Update for master
    
    The error message was updated in master.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 38a09d187e7689727577d92f0458f8110c176331
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri May 19 08:51:42 2023 +0000

    Bug 33778: Move to db_dependent
    
    Test plan:
    Run t/db_dependent/Auth_with_shibboleth.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 02ec437d4768f0155463a41203977dd9c629444b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri May 19 08:38:20 2023 +0000

    Bug 33778: Fix indentation of last subtest
    
    Only whitespace.
    
    Test plan:
    git diff -w HEAD~1.. t/Auth_with_shibboleth.t
    No differences.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f951b553d413f4363184435db36b890950d2554b
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri May 19 06:45:22 2023 +0000

    Bug 33778: Further polishing
    
    Use mock_preference.
    Move final tests for BaseURLs into one subtest.
    Change reset_config to allow passing parameters replacing some variables.
    Copyright line.
    
    Test plan:
    Run t/Auth_with_shibboleth.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a8ff03d192876028eebaea8e0cfd1fd6664fb344
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu May 18 11:19:13 2023 +0000

    Bug 33778: Remove T::D::C from Auth_with_shibboleth.t
    
    This test should be in t/db. It needs patrons, categories, branches.
    T::D::C now hides e.g. the branchcode constraint.
    When removing T::D::C, we therefore need to add a branchcode in the
    shibboleth test config.
    
    Test plan:
    Run t/Auth_with_shibboleth.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9fce9bdc6332a0f43492463adcbd2a81812a560d
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 29 09:51:08 2023 -0300

    Bug 34029: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 12956d3e8a1a929da3c0944fe637d9511e5a2621
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 29 09:46:13 2023 -0300

    Bug 34029: (QA follow-up) Fix slipped broken char
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c93df980683661787c3e1b3ed8f314322ce39213
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 29 09:36:47 2023 -0300

    Bug 31651: Adjust tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 532cf4ab9f5549c1e8f41d6c7191f9e1a9ed9e3c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jun 26 10:28:55 2023 -0300

    Bug 34029: DBRev 23.06.00.007
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 16ad89bb96630fd9fb74fe69a30cb37dc3c1a411
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jun 26 10:25:33 2023 -0300

    Bug 34029: DBIC schema
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 377e2a70dec073063443c23e9b6a06f54da6b53c
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Mon Jun 26 10:46:17 2023 +0000

    Bug 34029: (QA follow-up) Fix pushing undef to biblio_ids
    
    See comment1. Although we now fix the error on publishercode, it
    is good to verify the result before pushing.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 00545f8780390d735dad664d76d09cc67f42fdaa
Author: Katrin Fischer <katrin.fischer@bsz-bw.de>
Date:   Fri Jun 16 11:14:29 2023 +0000

    Bug 34029: Extend datatypes of biblioitems.columns to text to avoid breaking import
    
    This updated the datatype of the following columns from varchar(255) to text
    to avoid import problems if the mapped MARC field's data exceeds 255
    characters.
    
    This is for:
    * place (260$a and 264$a)
    * publishercode (260$b and 264$b)
    * size (300$c)
    * illus (300$b)
    * pages (300$a)
    
    To test:
    * Edit a bibliographic record and enter more than 255 characters into
      the MARC fields listed above. Try to save.
    * Run the updatedatabase script to modify the DB structure
    * restart_all
    * Edit a bibliographic record and enter more than 255 characters into
      the MARC fields listed above.
    * Save
    * Export the record
    * Import the record using staging tools, all should work well
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 30be338c2421a5b1e791e28732f83eb2542f7eb0
Author: David Cook <dcook@prosentient.com.au>
Date:   Tue Jun 13 04:44:41 2023 +0000

    Bug 33989: Only look up authorized value descriptions for items in results
    
    This patch changes the inventory tool so that it only populates the
    authorized value descriptions for items that show up in the results.
    That is, items that will be viewed by a human.
    
    This change saves a lot of time by not performing unnecessary
    database lookups.
    
    Test plan:
    
    0. Apply patch and koha-plack --restart kohadev
    1. Go to create a SQL report from SQL
    /cgi-bin/koha/reports/guided_reports.pl?phase=Create%20report%20from%20SQL
    2. Save a report with the following SQL:
    SELECT barcode FROM items where barcode <> '';
    3. Run the report
    4. Download as CSV
    5. Edit the CSV and remove the "barcode" heading
    
    6. Go to edit item for barcode 3999900000001
    /cgi-bin/koha/cataloguing/additem.pl?op=edititem&biblionumber=1&itemnumber=1
    7. Add "Damaged status" of "Damaged"
    8. Click "Save changes"
    
    9. koha-mysql kohadev
    10. update items set notforloan = 9 where barcode = 3999900000001;
    
    11. Go to inventory tool
    http://localhost:8081/cgi-bin/koha/tools/inventory.pl
    12. Upload barcode file via "Choose file"
    13. Uncheck "Compare barcodes list to results"
    14. Open F12 tools
    15. Click "Submit"
    16. Click "OK" on confirm box
    
    17. Note that the inventory job takes around 30 seconds to run
    instead of 60 seconds
    17b. The exact figures may vary. If you compare with before patch
    inventory runs, you'll be saving roughly 18 seconds.
    18. Note that "Damaged" appears in the "Damaged" column, which
    demonstrates that the authorized value lookup was completed for
    the item in the result list
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6857d4f896f5a79875ce609e54307cf8afc2b448
Author: Emily Lamancusa <emily.lamancusa@montgomerycountymd.gov>
Date:   Fri Jun 9 14:54:33 2023 -0400

    Bug 33976: Disable claims returned option in moredetail.pl when another lost status is selected
    
    Prevent "claims returned" from being selectable from moredetail.pl, even
    if another lost status is already set
    
    To test:
    1. Configure Claims returned
        i. Go to Administration > Authorized Values > LOST
        ii. Add a new authorized value with value:6 and description:Claims returned
        iii. Go to Administration > System Preferences
        iv. Set ClaimReturnedLostValue to 6 and save
    2. Go to any title record and click the barcode for any item
    3. Click the Lost status drop-down.
       Note that the Claims Returned option is disabled.
    4. Select a Lost status and click "Set status"
    5. Click the Lost status drop-down.
       Note that the Claims Returned option is now selectable.
    6. Apply the patch and refresh the page
    7. Note that the Claims Returned option is now disabled.
    8. Find a different item and check it out to a customer.
    9. On that customer's account, click "Claim Returned" for that item
    10. Click the barcode to view moredetail for that item
        Note that the Lost status drop-down is disabled with Claims Returned selected
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1d60fd79a47cd1dcc3f8e9e1e27ac2c887d77f3c
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri Jun 23 15:13:42 2023 +0000

    Bug 34080: Make suggestions_batch_ops a class
    
    To test:
    1. Make some suggestions with different statuses.
    2. Try moving some suggestion to different statuses.
    3. Going from PENDING to another status works fine.
    4. Moving from other status (REJECTED, ORDERED, etc ) will cause a 500 error.
    5. Apply patch
    6. Try 2 - 4 again, no more 500 errors, yay!
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 241eaa1967f0933b286779b813368850e9b0286b
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Jul 12 16:48:44 2022 +1200

    Bug 31132: (follow-up) Reset dropdown values and style button
    
    This follow-up patch resets the dropdown values of the form alongside
    the text inputs. It styles the button to look like a link so it doesn't
    distract the user and get 'accidentally' clicked when attempting to
    submit.
    
    Test that the button looks and behaves as expected after submitting a
    search.
    
    Signed-off-by: nicolas <nicolas@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a9731a2d17138567cb262ecdb8850bc687d885eb
Author: Aleisha Amohia <aleisha@catalystacademy.net.nz>
Date:   Tue Jul 12 11:04:03 2022 +1200

    Bug 31132: Add button to clear the cataloguing auth finder form
    
    This enhancement adds a 'Clear form' link to empty all of the input
    fields on the authority finder plugin form when cataloguing
    bibliographic records.
    
    To test:
    1) Search for a bibliographic record in the staff interface
    2) Edit a record
    3) Go to tabs 1, 6 or 7 to find a tag linked to the authority finder
    plugin
    4) Launch the authority finder plugin by clicking the Tag editor icon at
    the end of the field
    5) If the fields are empty, add some text in the text fields
    6) Click the 'Clear form' link at the bottom of the form
    7) Confirm the text is cleared from the input fields and the form is
    empty
    
    Sponsored-by: Education Services Australia SCIS
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: nicolas <nicolas@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1a29ff17a550eedfa6ca2c68b6c02b817cb709b3
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Thu Jun 22 16:06:50 2023 -0400

    Bug 34103: Capitalization: Currencies & Exchange rates
    
    This patch corrects the breadcrumbs in the Administration > Currencies
    and exchange rates page to follow current capitalization and
    typographical guidelines.
    
    To test:
    0. Apply patch
    1. Go to Administration > Currencies and exchange rates
    2. Verify that the breadcrumb has no spelling errors, and that
       capitalization and typography guidelines are applied
    3. Click 'Delete' next to one of the currencies
    4. Verify that the breadcrumb has no spelling errors, and that
       capitalization and typography guidelines are applied
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b77e8d1b3706dd4c58848c97718b8bcd75735fb0
Author: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
Date:   Thu Jun 15 09:45:50 2023 -0400

    Bug 34015: Terminology: Relative issues should be Relative's checkouts
    
    This patch changes the term 'issues' in a screen reader caption in the
    OPAC to the correct term 'checkouts'.
    
    To test:
    Setup:
    - Have a patron with a guarantee
    - Check out an item to the guarantee
    - Make sure the guarantee allows their guarantor to see their checkouts
      (AllowStaffToSetCheckoutsVisibilityForGuarantor must be on for you to
      be able to set this)
    
    1. In the OPAC, log in with the guarantor patron
    2. Click on the Relatives' checkouts tab
    3. Open a screen reader (in Ubuntu, Super + Alt + S to turn on/off)
    4. Navigate to the table in the Relative's checkouts tab
       --> The screen reader should say 'Relative issue table with...'
    5. Apply patch
    6. Refresh the page
    7. Restart the screen reader (if it was off)
       --> The screen reader should now say 'Relatives' checkouts table
       with...'
    
    Alternatively, open the page inspector and inspect the table, the
    caption is in the table tag, before the thead tag.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 17e19fe311d470e73d2cca332ffcce4dc5663a47
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Thu Jun 22 08:58:34 2023 +0000

    Bug 34083: (follow-up) Prevent showing 'null'
    
    In patron lists, if the patron added is an organization without the firstname, it presents 'null'. This fixes that
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a8e9b25d8e1a1da19a22f20c3cd74ed8a32e3ffb
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed Jun 21 16:10:17 2023 +0000

    Bug 34083: Add searching for full term on patron auto-complete
    
    To reproduce, on k-t-d:
    1) Create a new patron of category 'School'
    2) Enter 'Middle school high school' on the mandatory 'Name' field and put something in 'Card number:'
    3) Visit patron lists at /cgi-bin/koha/patron_lists/lists.pl and click 'New patron list'
    4) Put something in 'Name:' and click 'Save'
    5) On the 'Patron search' input, enter 'middle school high school' slowly and observe the auto-complete behaviour
    6) Notice how after you start typing the second word, the auto complete results vanish.
    7) Apply patch, repeat plan and verify it now works as expected.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d7e189b5bf187184c83645b5d26cc49b56d8f408
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Fri Jun 9 09:46:47 2023 +0000

    Bug 33968: Add missing colons to guarantor related labels
    
    Fixes some inconsistencies with the labels on the
    patron detail page and patron edit form.
    
    To test:
    * Activate AllowStaffToSetCheckoutsVisibilityForGuarantor
      and AllowStaffToSetFinesVisibilityForGuarantor system
      preferences
    * Link a patron to a guarantor
    * Verify on the details tab the options for showing fines
      and checkouts show and are missing colons on the label
    * Edit the patorn and verify the same is true for the form
    * Apply patch
    * Verify missing colons have been added :)
    
    Signed-off-by: Sally <sally.healey@cheshiresharedservices.gov.uk>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 526f2c433bb4a4718c98739a3024095927ba57a5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jun 23 10:27:44 2023 -0300

    Bug 25079: (QA follow-up) FA v6 update
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 576dff0a13a5f506fbeae917a9ce10dff755ceda
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Tue May 30 13:42:16 2023 -0400

    Bug 25079: (QA follow-up) Fix TT issues
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b6cd0ef0d268b0bee02093400e040fdec699c98a
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Wed Apr 12 12:48:31 2023 +0000

    Bug 25079: Show club enrollment question answers in staff client
    
    When a patron is enrolled in a patron club, koha collects answers to library-defined enrollment questions.
    Those answers go into the database but are not viewable outside of reports.
    
    This patch make those answers viewable on club-enrollments.pl.
    
    Test plan
    1. Apply the patch
    
    2. Create a club template
        2.1. Go to Tools > Patron clubs
        2.2. Click on 'New Club Template'
        2.3. Fill the form
        2.4. on the 'Club fields' section, Click on Add new field
        2.5. Fill in the form
        2.6. on the 'Enrollment fields' section, Click on Add new field
        2.7. Fill in the form
        2.8. Click on Save button
    
    3. Creation of the club
        3.1. Go to Tools > Patron clubs > 'Clubs' section (bottom)
        3.2. Click on the 'New Club' button and select the club template create on step 1
        3.3. Fill in the form
        3.4. Click on Save button
    
    4. Club enrollement
        On the intranet (or the OPAC if permitted)
        4.1. Search for a pratron and open the patron folder
        4.2. Click on the 'Clubs' tab
        4.3. Find the name of the club and click on 'Enroll'
        4.4. Fill the questionnaire
        4.5. Confirm registration
    
    5. Check registrations on the intranet
        5.1. Go to Tools > Patron clubs
        5.2. In the bottom 'Clubs' section, find the name of the club
        5.3. check the 'Enrolled patrons' column
           ---> should not be equal to zero.
        5.4 Click on 'Action' and choose the option “Enrollments”
           ---> The Enrollment fields created on step 2.6. are viewable in the table with their values
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ee24e53a66562fb2a71ac1c82356d7928eb48e83
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Wed Apr 12 00:32:02 2023 +0000

    Bug 25079: Add a 'edit' functionality to the Clubs tool in the staff interface
    
    A club enrollment can be cancel but it can't be edited
    This patch add a 'edit' functionality to the Clubs tool in the staff interface
    
    Test plan
    1. Create a club template
        1.1. Go to Tools > Patron clubs
        1.2. Click on 'New Club Template'
        1.3. Fill the form
        1.4. on the 'Club fields' section, Click on Add new field
        1.5. Fill in the form
        1.6. on the 'Enrollment fields' section, Click on Add new field
        1.7. Fill in the form
        1.8. Click on Save button
    
    2. Creation of the club
        2.1. Go to Tools > Patron clubs > 'Clubs' section (bottom)
        2.2. Click on the 'New Club' button and select the club template create on step 1
        2.3. Fill in the form
        2.4. Click on Save button
    
    3. Club enrollement
        On the intranet
        3.1. Search for a pratron and open the patron folder
        3.2. Click on the 'Clubs' tab
        3.3. Find the name of the club and click on 'Enroll'
        3.4. Fill the questionnaire
        3.5. Confirm registration
            ---> Note that the enrollement can be canceled but it cannot be modified
    
    4.  Apply the patch
    5. Click one more time on the 'Clubs' tab
       ---> Note that the enrollement can now be modified
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 45852c950e8a7a2a5611d818790192dab76c1370
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Mar 22 16:30:31 2023 +0100

    Bug 30860: Cache CanItemBeReserved return value
    
    This patch caches the return value of CanItemBeReserved that could
    be then returned *on
    demand*
    We don't want to introduce side-effects hard to catch from this simple
    change, so let's return the cache value only from the 2 scripts we are
    dealing with.
    
    This patch requests all item values from CanBookBeReserved on request.pl
    
    Before this we either:
    - Looped every item to find out that book could not be reserved
    - Looped until we found an item that could be reserved, then looped all items to get statuses
    
    In the worst case we avoid double processing a single item, in the best case we avoid double
    processing all items (if only last on record is holdable)
    
    To test:
    1 - Find a record in staff client with several items
    2 - Set AllowHoldsOnDamagedItems  to 'Dont allow'
    3 - Add a damaged item to record
    4 - Set a hold rule to only allow holds form homebranch and ensure record has items from other branches
    5 - Setup things to prevent more items from being held
    6 - Attempt hold for patron
    7 - Note item statuses
    8 - Apply patch
    9 - Confirm statuses are as they were before
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 79f8e148af7f7f84ccf43334e73e14f919157edd
Author: Michael Hafen <michael.hafen@washk12.org>
Date:   Tue Jul 20 12:12:42 2021 -0600

    Bug 28726: Add sort1 and sort2 to patron card creator - patron search.
    
    Also adds a select all / clear all and checkboxes.
    
    Test plan:
    
    1. start a new batch in the patron card creator (Tools -> Patron card creator -> New -> card batch)
    2. click the Add patron(s) button.  Observe that Category and Library are the only options.
    3. Close search for patron window.
    4. Apply patch.
    5. click the Add patron(s) button.  Observe that you can now search for patrons by their sort1 and sort2 values.
    6. perform a search and observe the 'Select all | Clear all | Add selected patrons' links and button.
    7. use the Select all link to select all the patrons found by the search.
    8. use the Add selected patrons button to add the selected patrons to the card batch's Add by borrowernumber(s) text input field.
    9. close the search for patron window.
    
    Signed-off-by: Solene Ngamga <solene.ngamga@inLibro.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e2e236fa9eae3954b75afc8919f5ad18baf9d8a6
Author: Sam Lau <samalau@gmail.com>
Date:   Wed Jun 21 17:18:20 2023 +0000

    Bug 34071: Change the phrasing of 'automatic checkin' to fit consistent terminology
    
    This patch simply changes 'Automatic checkin' to be 'Automatic
    check-in'.
    
    Test plan:
    1) Go to administration -> item types and click the edit button on an
       item.
    2) Notice there is a checkbox labeled 'Automatic checkin'.
    3) Apply patch.
    4) Refresh the page and notice the checkbox now says 'Automatic
       check-in'.
    5) prove t/db_dependent/Koha/Checkouts.t
    6) Sign-off :)
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b5de15c4b8daccfb80718e82633553f7dbb8b623
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 10 13:53:20 2023 +0200

    Bug 33578: Fix controller when editing a restriction type
    
    Do not display a warning when we are editing a restriction type and no
    other types with this description exists.
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9e32945f208fa16c773dfc0867754649fcf820ca
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 10 11:21:19 2023 +0200

    Bug 33578: Fix patron restriction types edition
    
    When editing an existing patron restriction type you'll always get an error on saving:
    
    Label is already in use
    
    To test:
    * Activate use of patron restriction types
    * Edit any of the system types
    * Create new ones
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2c6e64ba962474f5d2a109426c20256acdcd065c
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jun 1 13:40:02 2023 +0000

    Bug 33894: Use template wrapper for tabs: OPAC search history
    
    This patch updates the OPAC search history page so that it uses
    the new WRAPPER syntax to generate tabs markup.
    
    To test, apply the patch and view the OPAC search history page. With the
    OpacAuthorities system preference enabled you should see two tabs:
    Catalog and Authority. Confirm that each tab shows the correct
    information.
    
    Deactivate OpacAuthorities and reload the search history page. The
    bibliographic search history should display without tabs.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f3def0d264d321d535ebc6cef1bcddba31dc38c3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jun 1 13:33:38 2023 +0000

    Bug 33894: Restructuring: Use BLOCKs for biblio and authority sections
    
    In order to make the conversion to the tab wrapper markup easier I'm
    putting the biblio search history and authority search history sections
    into blocks. This will make it easier to include or not include the
    sections using template logic.
    
    To test, apply the patch and, if necessary, perform some searches for
    bibliographic and authority records. The OPAC search history page should
    be unchanged, with the correct information showing under each tab and in
    each section for current and previous searches.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 44759b4be3aa4c3088edca77837d5d278de5cb1e
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jun 14 17:23:40 2023 +0000

    Bug 34013: Recalls awaiting pickup doesn't show count on each tab
    
    This patch modifies recalls_waiting.pl so that it defines template
    variables for 'recalls waiting' and 'recalls waiting over x days'
    counts in the same way that waitingreserves.pl handles it.
    
    To test you must have UseRecalls enabled, and some recalls data that
    will allow you to see content under each tab.
    
    Go to Circulation -> Recalls awaiting pickup and confirm that both tabs
    show the correct count.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 309148160b34e5dbb6f2ca723d1c2aeb1400d6ba
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jun 14 17:09:48 2023 +0000

    Bug 34012: Use template wrapper for tabs: Recalls awaiting pickup
    
    This patch updates the recalls awaiting pickup template so that it uses
    the new WRAPPER directive to build tabbed navigation.
    
    Note: this patch includes indentation changes, so check the diff
    accordingly.
    
    To test you must have UseRecalls enabled. Apply the patch and go to
    Circulation -> Recalls awaiting pickup.
    
    Both the "Recalls waiting" and "Recalls waiting over X days" tabs should
    look correct and work correctly.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e0c09d230ce46e9d085a970625408744814cbdc5
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Mon Jun 5 13:08:47 2023 +0000

    Bug 33896: Check whether index is defined before string match
    
    This patch checks that $indexes[$i] is defined before testing whether the string matches to remove the logged warning when searching
    
    Test plan:
    1) In the intranet, search the catalog from the top search bar
    2) Check plack-intranet-error.log
    3) There should be a warning "[WARN] Use of uninitialized value within @indexes in string eq"
    4) Apply patch
    5) restart_all and then re-try the search
    6) The warning should no longer appear
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 74bd33205193a6c4f957dccc9e540eacf507ccfc
Author: Sam Lau <samalau@gmail.com>
Date:   Tue Jun 13 15:00:21 2023 +0000

    Bug 31618: Fix typo in POD for C4::ImportBatch::RecordsFromMARCXMLFile
    
    To test:
    1) Apply the patch
    2) Visit C4::ImportBatch::RecordsFromMARCXMLFile
    3) See that in the POD (mine was somewhere around line 1592) the line starting with '@PARAM1' now says '@PARAM1, String, absolute path to the MARCXML file.'
    4) Sign off :)
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7b1391ea9f4758cb1145da4af7ddcea89d208e8a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jun 21 16:20:09 2023 -0300

    Bug 33169: (QA follow-up) Tidy Vue-related files
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c61669f92caad8db3f598de7ac8602a456ac53d6
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jun 21 16:05:26 2023 -0300

    Bug 33169: Add support for FA styles
    
    Font awesome now provides a different approach to icon styles so you can
    specify things like:
    
    ```
    <i class="fa fa-camera-retro"></i>
    ```
    
    but also
    
    ```
    <i class="fa-solid fa-camera-retro"></i>
    ```
    
    The original implementation had a hardcoded `fa` and having an extra
    parameter for the *style* seemed overkill, as we would need to handle
    even a list of styles like on this example:
    
    ```
    <i class="fa-sharp fa-solid fa-camera-retro"></i>
    ```
    
    So I chose to just explicitly require the full FA icon class and pass it
    thru. With no manipulation on the Vue side.
    
    This patch does that, and adjusts the 'style' for some icons, as
    introduced by the FA v6 patchset.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 13fbc155d21375b4a87d4e6760428fe205cd76a4
Author: Agustín Moyano <agustinmoyano@theke.io>
Date:   Mon Mar 6 16:44:44 2023 -0300

    Bug 33169: Build breadcrumbs and left-hand side menu from routes definition
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a40c512bf083a1bb48daeecd2f407b4f5586d819
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 22 16:06:11 2023 -0300

    Bug 34022: Adjust items data structure
    
    When creating items at receiving, the generated data structure didn't
    match what the code expected, so this patch adapts the code to match the
    new data structure introduced by bug 8179.
    
    Once I fixed that, I noticed that the $.ajax request payload, when it
    contains an array parameter, it renames it like `param[]`. So the
    finishreceive.pl controller is adjusted to this behaviour for the 'on
    receiving' use case.
    
    To test:
    1. Apply this patch
    2. Create a basket with 'create items on receive'
    3. Create an order line
    4. Close basket
    5. Receive shipment
    6. Enter invoice number
    7. Click on Receive link in the table
    8. Fill out item form, make sure all mandatory fields are set
    9. Save
    10. Verify that the order line is marked as 'received'
    11. Verify that there item is created on the record
    => SUCCESS: Works as expected
    12. Sign off :-D
    
    Signed-off-by: Michaela Sieber <michaela.sieber@kit.edu>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5f1c5a04faa3b4c38e3ca4d3372b3d7f612b6701
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jun 23 09:40:08 2023 -0300

    Bug 33117: DBRev 23.06.00.006
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c50fab16b50850589017c4902138eee74c482caf
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Thu Jun 22 12:38:04 2023 +0100

    Bug 33117: (follow-up) Rename preference
    
    As it's been requested that we keep the search defaults consistent, I
    think this preference is better names DefaultPatronSearchMethod and
    appear next to DefaultPatronSearchFields. This patch makes that change,
    though actually applying it to the other search area's (outside of
    autocomplete) has been left for another bug.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7b675997b4ed5bd076ada5cedcbbc039e0fabe7b
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Fri May 26 16:19:54 2023 +0000

    Bug 33117: Adding new PatronAutoCompleteSearchMethod system preference
    
    This patch adds a new system preference called "PatronAutoCompleteSearchMethod"
    which allows staff to choose between "Starts with" or "Contains" when
    searching for patrons.
    
    The "Contains" option should be useful when searching for patrons that have
    multiple surnames or when searching using a patron's middle name.
    
    New Test Plan:
     0. Ensure system preference PatronAutoComplete is set to Try
     1. Create a patron that has a first name, middle name and two surnames.
        (i.e. Adela Maria, Hernandez Acosta).
     2. In patron or checkout search, enter their first name and first
        surname without submitting.
     3. Confirm that a record is found in the autocomplete results
     4. In patron or checkout search, enter their first name and second
        surname without submitting.
     5. Confirm that no record is found.
     6. Enter their middle name and first surname. Confirm that no record is
        found.
     7. Enter their middle name and second surname. Confirm that no record
        is found.
     8. Apply the patch, update database
     9. Under Administration > Global System Preferences > search for
        "PatronAutocompleteSearchMethod"
    10. Choose "Contains" instead of "Starts with" for the system
        preference, reload your search page
    11. Repeat steps 2-4. The patron record should appear for all search
        methods.
    12. Sign off!
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b7f89dcca3a2d0115ebc37bc34e2a5a3596105c1
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon Jun 19 04:28:53 2023 +0000

    Bug 34052: Use root relative URL for subscription-detail.pl
    
    This patch replaces a same directory relative URL with a root
    relative URL, so that the navigation to subscription-detail.pl
    works correctly after deleting a serial.
    
    To test:
    0. Apply patch
    1. Go to http://localhost:8081/cgi-bin/koha/serials/serials-home.pl
    2. Click "New subscription"
    3. Click "Search for a vendor"
    4. Click "OK"
    5. Click "Choose"
    6. Click "Search for record"
    7. Type "e" into "Keyword:" box
    8. Click "Search"
    9. Click "Choose" on top result
    10. Click "Next"
    11. Fill in "Serials planning" however you like, and click
    "Test prediction pattern"
    12. Click "Save subscription"
    13. Click "Serial collection" in left nav menu
    14. Click "Delete selected issues"
    15. Click "Yes, delete"
    16. Click the link under the "Subscription num." table column
    17. Note that you're taken to the subscription detail page
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4610bc64eb6d36583ec7533bc2a624241653b0ed
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Jun 7 18:03:07 2023 +0000

    Bug 33944: Don't fetch item object unless using recalls
    
    To test:
    1 - Check someitems out to a patron
    2 - View thier checkouts
    3 - Apply patch, restart_all
    4 - Confirm checkouts load as before
    5 - Enable recalls
    6 - Recall an item checked out to this patron
    7 - Confirm recall shows as expected
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7990f3e74142ab20c813534ea615586965524415
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 9 16:36:43 2023 +0200

    Bug 33973: Restore sorting on Vue tables
    
    Regression from the KohaTable Vue component added by bug 33066.
    
    _dt_default_ajax expects options.columns to contain the columns.
    
    Test plan:
    Add some agreements, go the the agreement list view and confirm that you
    can now sort the agreements using the header columns.
    
    Note that the CSS is not correct yet. My understanding is that the
    DataTable Vue component keep the 'sorting' class on the th which display
    the grey up/down icon over the blue icon which indicate the current sort
    column.
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a9389b60d371dc946e69782159bf1641626909ae
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jun 22 13:30:10 2023 +0000

    Bug 32245: Fix delete news item from staff home page
    
    Simple fix: op was named incorrectly in URL.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ec6f8186ae39c4a23bad7af2d0feb1642b165f57
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Jun 14 15:49:57 2023 +0000

    Bug 34010: Template corrections to recall pages
    
    This patch makes some corrections to recall pages:
    - Update breadcrumbs menu to use wrapper.
    - Add <div class="page-section"> where it is missing.
    - Use biblio-title include to show links to bibliographic record titles.
    - Correct Bootstrap button dropdown markup for consistent style
    - Change some submit buttons to <button> elements for consistent style
    
    To test you must have UseRecalls enabled. Having some sample recalls
    data will help. Check the following pages to confirm that everything
    looks correct:
    
    - Circulation ->
      - Recalls queue
      - Recalls to pull
      - Overdue recalls
      - Recalls awaiting pickup
      - Old recalls
      - Existing recalls: View a bibliographic record with a recall and
        click "Recalls" in the sidebar.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 12a986e6687424c00b0a14a627d8f694c6ef19c6
Author: David Cook <dcook@prosentient.com.au>
Date:   Wed Jun 7 03:13:24 2023 +0000

    Bug 24517: Add missing 6th position to date-entered-on-file index
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Adding the biblio-zebra-indexdefs.xsl on same patch (as should
    be generated with xsltproc).
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d6566f41e942fe260a7553c9ff0355ff48d221ef
Author: Jacob O'Mara <jacobomara901@gmail.com>
Date:   Tue Nov 29 10:19:24 2022 +0000

    Bug 31651: Replaced duplicate error message
    
    The duplicated error message on ln119 has now been replaced for clarity.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2238d9f09639328a5f50315852566c6e2d286473
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Jun 14 17:15:23 2023 +0000

    Bug 33500: Add tests for RecordLocalUseOnReturn
    
    To test:
    1. Turn on RecordLocalUseOnReturn
    2. prove -v /kohadevbox/koha/t/db_dependent/Circulation.t
    3. Tests fail.
    4. Apply patch
    5. prove -v /kohadevbox/koha/t/db_dependent/Circulation.t
    6. Tests pass.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1f0cd38d56ac3215a4b00865dd4a17ae702d2952
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Tue Jun 13 09:45:24 2023 +0100

    Bug 33993: Add order_receive to GET orders endpoints
    
    This adds order_receive to the list of permissions that allow the
    endpoint to return orders.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Sharon Dugdale <Sharon.Dugdale@cumberland.gov.uk>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bb8db3c7f6f14cb04312c49bd9b8b7ca6b74425c
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jun 22 11:02:31 2023 +0000

    Bug 34093: Fix paths to jQuery for OAI XSLT
    
    To test:
    1 - Enable OAI-PMH system preference
    2 - Browse to:
        http://localhost:8080/cgi-bin/koha/oai.pl?verb=ListRecords&metadataPrefix=marcxml
    3 - Click 'Metadata' button for a record
    4 - Nothign happens
    5 - Check the console:
        Loading failed for the <script> with source “http://localhost:8080/opac-tmpl/bootstrap/lib/jquery/jquery-migrate-3.3.2.min.js”.
        Loading failed for the <script> with source “http://localhost:8080/opac-tmpl/bootstrap/lib/jquery/jquery-3.6.0.min.js”.
        Loading failed for the <script> with source “http://localhost:8080/opac-tmpl/bootstrap/lib/bootstrap/js/bootstrap.bundle.min.js”.
    6 - Apply patch
    7 - Reload
    8 - Console errors are gone
    9 - Clicking 'Metadata' expands the record content
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f0360be7a73336ec82ed64aed952d0fb9c23a8c5
Author: Adolfo Rodríguez <adolfo.rodriguez@xercode.es>
Date:   Fri May 5 16:11:26 2023 +0200

    Bug 31185: Link authorities automatically doesn't detect duplicate authorities
    
    Signed-off-by: Rachael Laritz <rachael.laritz@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 30b06a6c006f89452cb23a19be4fdd7c10db3a81
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 3 17:20:51 2023 +0000

    Bug 31185: Unit test
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 756de0f09a42245df72d9c85ed8487b898fc30cc
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 24 15:16:37 2023 +0000

    Bug 33820: (follow-up) Add hint to member-password.tt
    
    This follow-up makes the same change to the "Change password" template.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8e611b79f18d829a5aa70c18a50ca20438d0413a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed May 24 09:31:05 2023 +0200

    Bug 33820: Add hints to warn the librarian that they will be logged out if they change their username
    
    This patch adds some JavaScript to the patron entry form which adds a
    hint if the logged-in librarian tries to change their own username. It
    warns them that they will be logged out.
    
    To test, apply the patch and log into the staff interface.
    
    - Locate and edit your own patron record.
    - In the "OPAC/Staff interface login" section, change the value in the
      username field. When focus leaves that form field a hint should
      appear, "You will be logged out if you modify your username."
    - Change the username field back to your original username. The hint
      should disappear.
    - Confirm that submitting a username change works correctly: You should
      be logged out, and when you log in again your username should be
      updated.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a3a0aaec102b05fc5a5b0573e1888facd22a731f
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon Jun 19 01:26:35 2023 +0000

    Bug 34051: Cache empty hashref for non-existent authorised values
    
    When fetching authorised value descriptions, we need to handle
    scenarios where a value doesn't exist in the cache and doesn't
    exist in the database. In this situation, we return an empty
    hashref, and this patch makes us cache this empty hashref.
    
    This is important because otherwise the function
    Koha::AuthorisedValues->get_description_by_koha_field will
    do a database call every time it encounters the same value that
    doesn't exist in the authorised values table.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7c05333914e3f54d66b9de6dde82b614ea83569a
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Jun 16 06:04:37 2023 +0000

    Bug 34028: Fix manual entry for two factor authentication
    
    This patch changes the "Account" and "Key" display so that
    you can manually enter two factor authentication details into
    an authenticator app.
    
    The details are the same as those provided by scanning the QR code.
    
    Test plan:
    0. Apply patch
    1. Go to
    http://localhost:8081/cgi-bin/koha/admin/preferences.pl?op=search&searchfield=TwoFactorAuthentication
    2. Change setting to "Enable"
    3. Go to http://localhost:8081/cgi-bin/koha/circ/circulation.pl?borrowernumber=51
    4. Click "More" on record toolbar and choose "Manage two-factor authentication"
    5. Click "Enable two-factor authentication"
    6. Scan the QR code into an authenticator app and note it creates an entry called
    "Centerville: Centerville_koha"
    7. Manually enter an entry into an authenticator app (like Google Authenticator)
    7a. Add the "Account" as shown on the Koha screen
    7b. Add the "Key" as shown on the Koha screen
    8. Note that the entries added by QR code and manual entry have the same
    label and both were accepted by the authenticator app
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 396030df43c231f8e8e215373f941b02176fcb15
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jun 16 18:19:45 2023 +0000

    Bug 34042: Item search broken by FontAwesome upgrade
    
    This patch corrects a small regression in one of the templates for
    outputting item search results. The template lost the change made to it
    by  Bug 33070: "Remove use of can_edit_items."
    
    The error meant that item searching wasn't working at all.
    
    To test, apply the patch and perform an item search in the staff
    interface. Results should be returned as expected.
    
    Signed-off-by: Phil Ringnalda <phil@chetcolibrary.org>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 96794db65956051b19df8240a14816e11f967ba6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Jun 16 12:15:25 2023 +0000

    Bug 34033: (bug 30649 follow-up) Fix update typos
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a28af7ba4c224994bcc6958c6f0abb2e0ffccf74
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 16 15:12:02 2023 +0200

    Bug 32910: Fix 'Agreements' icon
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ab91409f7f3c18142e0694fab80effd7c0b35980
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Mon Jun 12 14:20:53 2023 -0400

    Bug 33987: Combine multiple db updates one in BatchCommitRecords
    
    When replacing existing records BatchCommitRecords will the table import_records will be updated three times for three different fields by three different queries. Not only is this inefficient ( especially for large batches ), it seems that this is causing the dreaded "Lock wait timeout exceeded; try restarting transaction" error on some mysql/mariadb configurations.
    
    1) Test plan
    2) Download a marc record from Koha
    3) Modify the title of that same bib in Koha
    4) Stage the downloaded record and overlay the existing record
    5) Verify the title has reverted to the original title from the
       downloaded record!
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer@bsz-bw.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 30d2ffd2953434eec112a403a0297e285fa4a76d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 7 11:07:36 2023 +0200

    Bug 33885: Prevent JS crash if creator does no longer exist
    
    JS error in the console was
      Uncaught TypeError: row.creator is null
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1c3a35418ea3defb50debbab4fd334bee4eb5229
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 7 11:05:18 2023 +0200

    Bug 33885: Make Koha::Acq::Order->creator return undef if no creator
    
    If the account of the creator of an order has been deleted we should
    return undef here, instead of crashing with
    GET /api/v1/acquisitions/orders: unhandled exception (Mojo::Exception)<<DBIC result _type  isn't of the _type Borrower at /kohadevbox/koha/Koha/Objects.pm line 445.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2ab07927e23e05976a8d2f0171d1e3fe2c7b8c34
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Apr 19 16:53:22 2023 +0000

    Bug 29691: Unit tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c1f628fbc98b572cfc06ba00a88f656f753cadee
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue Dec 14 13:35:45 2021 +0000

    Bug 29691: Use template to display news on opac homepage
    
    This patch moves the fetching of news to the template and
    adds a p[lugin method to get news by id
    
    TO test:
    1 - Define some general and library specific news items
    2 - Define in various languages
    3 - Define some 'Additional contents' as well
    4 - Apply patch
    5 - Confirm onlly 'all libraries' news show if not loigged in to opac
    6 - Confirm correct library news show when logged in
    7 - View specific news items:
        http://localhost:8080/cgi-bin/koha/opac-main.pl?news_id=12
    8 - Confirm that non-existent ids show " This news item does not exist. "
    9 - Confirm if you enter ID for additional contents you get 'does not exist'
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit de49b8cd3a45941565f6d2bf7e856eeb6af75c8f
Author: David Cook <dcook@prosentient.com.au>
Date:   Mon Dec 5 05:34:12 2022 +0000

    Bug 32402: Add "Modification date" to OPAC Lists table
    
    This change adds a "Modification date" column to the
    OPAC Lists table, so that you can see when a list was last modified.
    
    Test plan:
    1. Apply patch
    2. Create a public list and a private list
    3. Go to http://localhost:8080/cgi-bin/koha/opac-shelves.pl?op=list&public=1
    4. Note that "Modification date" appears in the relevant date format
    on both the "Your lists" and "Public lists" tabs
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Fridolin Somers <fridolin.somers@biblibre.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 719b30000159c0c2914d1d259e1c8d6cdd741bcd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 8 17:33:10 2023 +0200

    Bug 33963: Remove leftovers from previous works
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 37f441edd83f06734aba6ccb0d4ebb648961c17f
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 8 17:31:28 2023 +0200

    Bug 33963: Remove C4::BackgroundJob
    
    Finally! No more occurrences of this module, we can happily remove it!
    
    Test plan:
    git grep is your friend
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7a417aa33f100633eba9465f6c990bead46f46bc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 8 17:19:55 2023 +0200

    Bug 33962: Remove background job from process koc
    
    The last occurrence of C4::BackgroundJob is in process_koc.pl that is used to upload a file.
    Added by bug 2608 (15 years ago), I think it does not longer make sense as networks are faster, and we should not expect big koc files to be uploaded.
    If there are complains we will move it to Koha::BackgroundJob.
    
    Test plan:
    Upload a koc file, enqueue the operations and confirm that everything is
    working correctly
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9f4e9f451bc596a2b0fac0fa9e1cb232804c1f61
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jun 14 12:46:45 2023 -0300

    Bug 33528: Fix basic_workflow.t
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fa809812be0bc6a3a524350b27785f65ff3533fa
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 31 12:08:27 2023 +0000

    Bug 33868: Upgrade the Multiple Select plugin in the staff interface
    
    This patch upgrades the Multiple Select plugin in the staff interface
    and adds some minor adjustments to system preferences CSS to accommodate
    the change. The listing on the about page is updated with current
    information.
    
    To test, apply the patch and clear your browser cache if necessary.
    
    - Go to Administration -> System preferences.
    - Test some preferences which use the plugin, e.g.
      - ApplyFrameworkDefaults
      - CoceProviders
      - OpacHiddenItemsExceptions
      - OPACAllowUserToChangeBranch
    - Confirm that the menus look correct and work correctly.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 62b2609e86fea4048386437d4aa856a49c8b5935
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Apr 5 14:02:39 2023 +0000

    Bug 33417: Fix translation in toolbar
    
    This commit allows the string to be translated - tested using fr-FR and a dummy string in the .po file
    
    Test plan as above
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bd9255d84978ee7b3f1dc62ac53d9e320ea703e0
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Apr 5 12:05:35 2023 +0000

    Bug 33417: Remove old components
    
    This commit deletes the old toolbar components as they are no longer
    necessary
    
    Test plan as above
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c10d6c6b0045f78baa033048956d3ae9cd29d5d0
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Apr 5 12:04:20 2023 +0000

    Bug 33417: Add toolbar imports and options
    
    This commit amends the required files to import the toolbar and add the
    correct options
    
    Test plan as above
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 09666ecf4e2eeabfc13ddc4d0b43311e35dbe0b5
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Apr 5 12:02:22 2023 +0000

    Bug 33417: Create standard toolbar component
    
    This commit introduces a standard Toolbar component that can be used
    throughout ERM
    
    Test plan:
    1) Apply patch
    2) Navigate to Agreements and click the "Add agreement" button - this
       should work as normal
    3) Navigate to Licenses and repeat
    4) Navigate to Local packages and repeat
    5) Navigate to local titles - there should be two buttons, one to add and
       one to import. These should work as normal
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 78431a983d6dabc5c5d2be655f8f959bdb79aaed
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 13 11:49:44 2023 +0000

    Bug 33528: (follow-up) Correct selector for event handler
    
    The event handler for restriction deletion needs to be adjusted
    according to the new container ID. Without this change the JavaScript
    confirmation message didn't appear and restrictions were deleted without
    confirmation.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 263196d194e06787b6c0d51ac603f0956d1fff6f
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue May 9 17:48:53 2023 +0000

    Bug 33528: Use template wrapper for tabs: Patron details page
    
    This patch updates the checkout and patron details templates so
    that they use the new WRAPPER directive to build tabbed navigation.
    
    The markup for the tab navigation and tab panels is moved into its own
    include file since the templates were duplicating essentially the same
    code.
    
    To fully test you should have patrons with checkouts, fines, holds,
    recalls, and article requests.
    
    Apply the patch and go to the checkout page in the staff interface. With
    each tab, test as much functionality as you can within that tab.
    
    - Checkouts
    - Holds
    - Recalls (with UseRecalls enabled)
    - Claims (with a LOST value defined in ClaimReturnedLostValue)
    - Restrictions
    - Article Requests (with ArticleRequests preference enabled)
    - Clubs (with at least one club defined)
    - Relatives' checkouts (patron must have a guarantee linked to their
      account).
    
    Perform the same tests on the patron details page. Note that the
    "Charges" tab is shown on the patron details page but not the checkout
    page. This is not a change made by this patch.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 33c704832ec58dbf39c2207a6bcd540ba7e8f2e3
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue Jun 13 16:11:53 2023 +0000

    Bug 33998: Installer and onboarding have incorrect Font Awesome asset links
    
    This patch corrects the Font Awesome asset links in the web installer.
    They were not updated during the upgrade to Font Awesome 6.
    
    Unrelated: The patch also removes the inclusion of jQueryUI. It is not
    used in the installation or onboarding process.
    
    To test, apply the patch and run the web installer. The display of
    installation steps should include square icons indicating which steps
    are complete.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 97afec9bc3a5e437ecf9fb3a451618c7a24d465d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 2 07:23:53 2023 +0200

    Bug 26700: Remove occurrences in Makefile.PL
    
    As well as other 2 non existing paths
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a83f798511661967abc40172ec76781da28ec18a
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Jun 2 02:18:45 2023 +0000

    Bug 26700: Remove unused C4/SIP/t directory
    
    This patch removes the unused C4/SIP/t directory.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0843221be2a9c87b03babcfb68fc196323eb2ba8
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jun 14 09:16:48 2023 -0300

    Bug 32910: (follow-up) Adjust Koha::Template::Plugin::Asset tests
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2d1d69f3bc2f8b7e24989b86d88241db8266ac75
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jun 12 15:45:41 2023 -0300

    Bug 33961: DBRev 23.06.00.005
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bb30626c49467d159648189d2a62e7371034ae23
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Tue Apr 4 15:43:41 2023 +0000

    Bug 33398: Add primary_contact_method to display when triggering a waiting hold
    
    To test:
    1. Apply patch, yarn build
    2. Trigger a waiting hold for a patron that has a value for primary_contact_method
    3. Notice the modal now includes a line indicating the primary_contact_method.
    4. Trigger a hold for a patron without a primary_contact_method. Nothing should display.
    
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3248afdc1256928cef749f927166e90e4ed5e4e3
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 8 17:00:31 2023 +0200

    Bug 33961: Remove built-in offline circ tool
    
    The tool has not been updated and is no longer working with modern
    browser.
    
    It should either be rewritten/adjusted or removed. Given that we didn't
    get complains its non-functional status, bugs related to this tool
    didn't get attention, and the community is lacking resources, I am
    suggesting to remove it and redirect users to the koct FF plugin that
    is known to be working.
    
    Test plan:
    See bug 10240 and use `git grep` to confirm that we are removing all
    tracks of this feature.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5308697ab8080915e6b4a415e37056ccdfb6ec59
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jun 9 17:19:28 2023 +0000

    Bug 33897: (QA follow-up) Correct code for tab selection
    
    This patch corrects the code for selecting tabs other than the first
    tab.
    
    To test, apply the patch and view the bibliographic detail page for a
    serial record and with various settings of the opacSerialDefaultTab
    system preference.
    
    If you select "subscriptions tab" the subscriptions tab should be active
    by default.
    
    You can also enable html5media and view a record with html5media
    information and no holdings. The media tab should be displayed by
    default.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 59c2a77ab78dfcfa57429cff1d8f6e0e994554c2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Jun 1 15:32:43 2023 +0000

    Bug 33897: Use template wrapper for tabs: OPAC bibliographic detail page
    
    This patch updates the OPAC bibliographic detail page so that it uses
    the new WRAPPER syntax to generate tabs markup.
    
    To test, apply the patch and locate a bibliographic record. View the
    detail page. Verify that tabs are working, including all the options:
    
      - Holdings
      - Other holdings (If OpacSeparateHoldings is enabled)
      - Descriptions (MARC notes)
      - Subscriptions
      - Serial collection (UNIMARC, untested)
      - Components (If ShowComponentRecords is enabled. See Bug 11175 for
        sample record)
      - Comments
      - Editions (OPACFRBRizeEditions)
      - Html5media (If HTML5MediaEnabled is on. See Bug 8377 for sample
        records)
      - Images (If OPACLocalCoverImages is enabled)
      - NovelistSelect
      - Author identifiers (Witgh OPACAuthorIdentifiers enabled, see Bug
        29897)
    
    Bonus points for testing these tabs for which I don't have credentials:
    - Syndetics TOC
    - Syndetics Excerpt
    - Syndetics Reviews
    - Syndetics AuthorNotes
    - LibraryThing for Libraries (with LibraryThingForLibrariesTabbedView
      set to "in tabs.")
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3d24b53addd6320f73acb93adf0609a9e24e7d5a
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Jun 12 17:54:53 2023 +0000

    Bug 33988: Update gear icon on staff main page
    
    To test.
    1. On staff home page notice the gear icon necxt to 'Koha
       administration' looks different than the others/
    2. Apply patch.
    3. It looks better.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 46cde7d1f7db6a4866ac6c6d2e6ab080073739b1
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue May 16 14:11:46 2023 +0000

    Bug 32910: (follow-up) Remove unused Font Awesome assets
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4e90f74ab9698c8b0f412b77b92d6e7d59b7bcfb
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue May 2 16:27:49 2023 +0000

    Bug 32910: (follow-up) A few more icon name corrections
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 81b2ee0eb0fc082dce463088cfc84f3abbf421ce
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu Feb 9 13:01:39 2023 +0000

    Bug 32910: (follow-up) Replace v4 icon names with v6
    
    This patch updates icons which are listed as having changed names in
    this document:
    
    https://fontawesome.com/docs/web/setup/upgrade/upgrade-from-v4
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ce2309decce63246824479e93f0d1ba5e752cd6a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed Feb 8 19:38:01 2023 +0000

    Bug 32910: (follow-up) Correct name of font family in CSS
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5ea933862653a854275bdced9dbdc87048356314
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Feb 10 19:40:42 2023 +0000

    Bug 32910: (follow-up) Make OPAC FA assets match staff interface's
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2d76bfa5ddd07502acc3acce6947ccb26becbecd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 8 15:22:52 2023 +0100

    Bug 32910: Adjust fontawesome icons ref
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1a792ed133989cc63f72c84c44e4628a9f739514
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Feb 8 15:14:49 2023 +0100

    Bug 32910: Upgrade fontawesome icons to V6
    
    6.3.0
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 676d263687ad666184fce6d505af6d9672412732
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed Jun 7 18:40:48 2023 +0000

    Bug 33176: Enforce bad values
    
    1. Turn on RequirePaymentType
    2. Create a manual invocie on a patron account
    3. Go to pay it, 'Payment type:' is marked as required.
    4. In the inscept the select input ( #payment_type ) with your browser's dev tools. Removed the required attribute.
    5. You are able to make the payment without a payment type.
    6. Apply patch and restart_all
    7. Try 4-5 again. This time you should get a 500 error and the payment should not go through.
    8. Try a paymnet again this time manipulate the DOM and change the value of 'CASH' to something else like 'SOMETHINGELSE'.
    9. Try to submit the payment and again you will get a 500 error. The payment should not go through.
    10. Turn RequirePaymentType off. Try a payment with a payment type, you shoud be successful.
    11. Make sure tests will pass
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit df4285adb2f6669ad62b0e3b1eddb04f44761d16
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Apr 13 17:52:58 2023 +0000

    Bug 33176: Enforce RequirePaymentType with API
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b15a15df9e2f579f984c804bdea4d2951ec75891
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Apr 13 17:28:24 2023 +0000

    Bug 33176: Handle RequirePaymentType
    
    Test plan:
    
    1. Turn on RequirePaymentType
    2. Create a manual invocie on a patron account
    3. Go to pay it, 'Payment type:' is marked as required.
    4. In the inscept the select input ( #payment_type ) with your browser's dev tools. Removed the required attribute.
    5. You are able to make the payment without a payment type.
    6. Apply patch and restart_all
    7. Try 4-5 again. This time you should get a 500 error and the payment should not go through.
    8. Turn RequirePaymentType off. Try a payment with a payment type, you shoud be successful.
    9. Make sure tests will pass:
    
    prove -v t/db_dependent/Koha/Account.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cd5212ac2fef6fd0b9a435ebe9258ca1b13de014
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jun 12 11:05:19 2023 -0300

    Update .mailmap
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9bca328d91acc6b010a44afea4403dd4d595cb98
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue May 23 12:54:34 2023 +0000

    Bug 33806: Retain specified date when confirming item parts at checkin
    
    This patch simply adds hidden inputs to the item parts confirm form
    to ensure specified checkin date is retained
    
    To test:
     1 - Find or add an item with subfield 3 - materials specified
     2 - Enable system preference CircConfirmItemParts
     3 - Go to Circulation->Checkin
     4 - Click the settings button in the input box and enter a checkin date and select the remeber check box
     5 - Check in some items, confirm date retained
     6 - Checkin the item with the materials specified
     7 - Confirm checkin
     8 - Note that checkin date is cleared
     9 - Apply patch
    10 - Repeat 3-7
    11 - Confirm date is retained
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Victor Grousset/tuxayo <victor@tuxayo.net>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a8c6c134d8e7322d935af8e95231f942f55c0342
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 9 15:35:41 2023 +0200

    Bug 33966: (bug 23824 follow-up) Fix submit buttons for translated templates
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Andrii Nugged <nugged@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8040370e78c83b1a581cd10d61842b637fd8c279
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jun 9 15:42:23 2023 -0300

    Bug 30002: (QA follow-up) Add .perltidyrc to Makefile.PL mapping
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f8d2291f2efc6e3f66b24b5152b6be6cd7ad50f9
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Wed Jun 7 12:42:01 2023 +0100

    Bug 30649: (follow-up) Improve database update
    
    This patch implements the proposed switch to use the standard DB handle
    and only require Koha::Encryption if necessary.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 913f351056f52187572b4bb94705bcaa48be1308
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Fri Jun 9 09:37:39 2023 +0200

    Bug 32932: Fix resource_id param for EHoldingsLocalResourcesShow
    
    Caught by cypress tests  "ReferenceError: resource_id is not defined" in "Show title".
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit edd65cbfaf1311b3c1ee51074319741c3f8bf63c
Author: Laura Escamilla <laura.escamilla@bywatersolutions.com>
Date:   Tue May 30 18:26:21 2023 +0000

    Bug 33698: Add fields to the verbose output that show the barcode and title of items that cannot be deleted
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2c7142fe940e7eed25afc814bb8afb017e5f90ea
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Jun 9 06:46:43 2023 +0000

    Bug 33967: Add unit test to ensure SetEnv doesn't compromise $env
    
    This patch includes a unit test which checks the memory address
    of the $env hashref in middlewares before and after
    Koha::Middleware::Env is applied.
    
    It succeeds when the same $env is maintained before and after
    this middleware. It fails if the $env has been overwritten with
    a new hashref (as evidenced by the new memory address for the
    hash).
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 42823da209bbef2148eb4245c1bdfe215bf899ee
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Jun 9 03:59:28 2023 +0000

    Bug 33967: Fix SetEnv middleware to preserve $env integrity
    
    This patch fixes the Koha::Middleware::SetEnv, so that it
    preserves the referential integrity of the $env hash
    reference as it passes through the pre-process and post-process
    stages of middleware wrapped around the core Koha Plack application.
    
    Test plan:
    0a. Apply the patch
    0b. vi /etc/koha/sites/kohadev/koha-conf.xml
    0c. Uncomment "koha_trusted_proxies"
    0d. Add "172.0.0.0/8" to the end of the "koha_trusted_proxies"
    0e. koha-plack --restart kohadev
    1. vi /etc/apache2/sites-enabled/kohadev.conf
    2. Add the following to the OPAC virtualhost:
    SetEnv OVERRIDE_SYSPREF_LibraryName "The Best, Truly the Best, Koha Library"
    RequestHeader add X-Koha-SetEnv "OVERRIDE_SYSPREF_LibraryName The Best\, Truly the Best\, Koha Library"
    RequestHeader add X-Forwarded-For "192.168.100.100"
    3. service apache2 restart
    4. tail -f /var/log/koha/kohadev/plack.log
    5. Go to http://localhost:8080/
    6. Note that the plack.log lists 192.168.100.100 as the client IP address
    7. Note that the title of the OPAC webpage is
    "The Best, Truly the Best, Koha Library Library catalog"
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit cd24b5a37f7baf6a8bf690ffa74f3014e128ee49
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue May 30 13:02:51 2023 +0000

    Bug 33855: Clean up forms and page sections on 'manage MARC imports' page
    
    This patch makes minor changes to the structure of the "Manage MARC
    imports" page so that sections are more clearly delineated and forms
    have the correct structure.
    
    The patch also shortens the new framework field labels and adds hints
    for clarification.
    
    To test, apply the patch and go to Cataloging -> Stage MARC records for
    import.
    
    - Import a batch of MARC records.
    - Go to Cataloging -> Manage staged records.
    - View the batch you just imported.
    - You should see three sections:
      - A list of information about the batch
      - Options for changing the matching rules
      - Options for setting frameworks during import.
    - Test that the form for applying different matching rules still works
      correctly.
      - Import a batch of records which contains matches (by, for example,
        exporting MARC records from Koha and then reimporting the same
        batch)
      - On the manage page for that batch try changing the matching rule
        applied, switching between "Do not look for matching records" and a
        matching rule which will catch the duplicate records.
    - Test that your records are imported correctly according to the
      framework settings you select, both for new records and for replaced
      records.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4bd6abf9a2aa3a239ec3c8658e26d61ea198e84c
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 1 09:08:08 2023 +0200

    Bug 33798: Improve consistency of the vendor display view
    
    It was not consistent: indentation, bold, etc.
    
    This patch is suggesting a new style using .page-section and .rows
    
    Is it what we want?
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5be54fc9e6dafea5110fa2fe286ac23e24dd9eb5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 1 08:52:55 2023 +0200

    Bug 33798: Add colons after the labels on the edit form
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a59f757fd715600c21c9e7ceca87d1a24d5d694f
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jun 8 11:15:27 2023 +0000

    Bug 33957: Add normalized_oclc and only fetch when needed
    
    opac-user.tt wants to normalized_oclc number if using syndetics or B&T images
    
    We don't need to fetch it if not, but we need to pass it if so
    
    To test:
    1 - Switch all Syndetics prefs to 'Show' or 'Use' except
        SyndeticsClientCode = just enter 'test'
    2 - Checkout some items to a patron, ensure the records have:
        - ISBN
        - UPC
        - OCLC number
    3 - View opac-user.pl (sign in to opac as the user)
    4 - View the network console tab (may need to reload)
    5 - Note requests like:
        https://secure.syndetics.com/index.aspx?isbn=1780335792/MC.GIF&client=test&type=xw10&upc=&oclc=
    6 - Note that oclc parameter is not filled for record with an oclc number
    7 - Apply patch
    8 - Reload
    9 - Confirm the link now has oclc as expected
    10 - Disable syndetics, enable google books or another source
    11 - Confirm images display as expected
    
    JD amended patch: tidy
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c9a2cf948dc12d7f9ad6c7334232c2165857c4e1
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 7 11:49:41 2023 +0200

    Bug 33901: (bug 30718 follow-up) Predition pattern - don't set end date to today
    
    If the end date is not set we should not set it to today.
    On bug 30718 the following change was wrong:
    -$enddate = eval { output_pref( { str => $enddate, dateonly => 1, dateformat => 'iso' } ); };
    +$enddate = dt_from_string($enddate)->ymd;
    
    output_pref returns undef if str is empty
    After the change we returned today's date.
    
    Test plan:
    1. Go to Serials > Manage numbering patterns
    2. Click Edit next to one of the existing patterns (e.g. Number)
    3. Enter information in the Test prediction pattern section
       -  Frequency: choose one (e.g. 1/month)
       -  First issue publication date: enter a date (e.g. 2023-06-01)
       -  Subscription length: issues + enter a number of issues (e.g. 12)
       -  Locale: leave empty
       -  Begins with: enter a number in the X column, e.g. 42
    4. Click Test pattern
    => Without this patch only one issue is shown, no matter how many you enter in Subscription length
    => With this patch applied the end date is not set to today and the
    prediction pattern list is correct
    
    Signed-off-by: Caroline Cyr La Rose <caroline.cyr-la-rose@inlibro.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ec83facde71a96c4a07eb050c574a7db56be25d5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Fri Jun 9 08:37:25 2023 -0300

    Bug 33945: DBRev 23.06.00.004
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3d737ef3fc3267adfac95c7569b2a1588b1e766b
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jun 8 12:32:33 2023 +0000

    Bug 33945: (QA follow-up) Don't show delay message on patron details page
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9e4ee8850acdb9ad19624082d07385ebe9daafde
Author: Katrin Fischer <katrin.fischer.83@web.de>
Date:   Thu Jun 8 12:21:18 2023 +0000

    Bug 33945: (follow-up) Avoid breaking checkouts table when pref is empty
    
    When the pref is empty, the checkouts table would break.
    This avoids it.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ee5f12a57437262f63a3ea81b255f5329fb2a89c
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jun 8 07:55:22 2023 -0400

    Bug 33945: (QA follow-up) Add delay spinner and message
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7242c32a1fab642975ab92538438eb13764b4bea
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Wed Jun 7 14:29:05 2023 -0400

    Bug 33945: Add ability to delay the loading of the current checkouts table on the checkouts page
    
    If a librarian has opted to load the checkouts table automatically on the checkouts page, it will trigger a call to svc/checkouts. If a librarian is checkout out 10 items to a patron, that means svc/checkouts is called uselessly 9 times, with only the 10th time being used to display the checkouts table.
    
    It would be useful to add a delay such that the table only load if the page has been display for a given number of seconds. That way the continuous scanning does not trigger useless svc/checkouts calls, but the librarian also does not need to click the load checkouts button manually.
    
    Test Plan:
    1) Apply this patch
    2) Run updatedatabase.pl
    3) Verify "Always show checkouts immediately" retains its' original
       behavior of loading the checkouts table immediately
    4) Set LoadCheckoutsTableDelay to a non-zero integer
    5) Verify the automatic table loading is delayed by that number of
       seconds
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 144efca99d09834839f89a88a6caeb928c32e2d4
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 8 14:32:53 2023 +0200

    Bug 33852: Add one more test
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 76983f5275edc9df8f41c4c62f20827c822cc344
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon May 29 10:30:06 2023 -0300

    Bug 33852: Make jobs.t test the only_current parameter
    
    This trivial patch adds a test to the only_current parameter.
    
    To test:
    1. Apply this patch
    2. Run:
       $ ktd --shell
      k$ prove t/db_dependent/api/v1/jobs.t
    => SUCCESS: New tests added, and pass
    3. Sign off :-D
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e7116af43822477961080218b5b7990793e9c76a
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 7 12:14:53 2023 +0200

    Bug 33937: Remove incorrect export in C4::Members
    
    Bug 17600 re-add those exports, but the module does no longer have the
    subroutines. We should remove these export.
    
    Test plan:
    git grep is your friend
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 20d22366813ddbd2c68fc72b609cee88e74e3872
Author: Jake Deery <jake.deery@ptfs-europe.com>
Date:   Fri Jun 2 13:13:47 2023 +0000

    Bug 33880: Remove Version param from GB::Barcode->new
    
    Looking at the code here
         if (Koha/Auth/TwoFactorAuth.pmoSelf->{Version}){        #--- auto version select
            for(->{Version}=1; ->{Version} <= 40; ++->{Version}) {
                last if ({->{Ecc}}->[->{Version}]
                            >=  + ->[->{Version}]);
            }
       }
    
    in https://metacpan.org/release/KWITKNR/GD-Barcode-1.15/source/Barcode/QRcode.pm#L349
    
    It appears the version parameter is not required, and will default to whatever version has the necessary bits for the input words given
    
    Signed-off-by: Pedro Amorim <pedro.amorim@ptfs-europe.com>
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7eafb103b584dcc41b863c3920ee8ab4e94b2c06
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 7 10:33:40 2023 +0200

    Bug 33888: (bug 22375 follow-up) Add missing USE KohaDates
    
    Bug 22375 added use of KohaDates without the USE statement.
    
    Test plan:
    Make sure you have overdues and go to circ/branchoverdues.pl
    Without this patch you get a 500
      Template process failed: undef error - : filter not found at /kohadevbox/koha/C4/Templates.pm line 127
    With this patch applied you can see the overdue list
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit deeb5ebdbd59956f5f6cf1bfa989ef41c9af9720
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jun 6 10:42:20 2023 +0200

    Bug 33904: Fix 2FA registration when library name has non-latin characters
    
    If the library name contains non-latin characters, the 2FA registration
    process will fail with a JS alert coming from a 500 server-side.
    
    The problem is that Auth::GoogleAuth is expecting an already UTF8 encoded string.
    We should set the encoding correctly to make Auth::GoogleAuth deal with
    the URL escaping internally correctly, then decode on our own (in the
    REST API controller)
    
    Test plan:
    * Modify your logged in library name and add some non-latin characters
    (eg. "my ❤ library")
    * Turn on TwoFactorAuthentication
    * Go to your account > More > Manage 2FA
    * Click the enable button
    => Notice that you see the QR code and that both "issuer" and "key id"
    entries display the library name correctly.
    * Test the whole 2FA process, confirm that the library name is correctly
    displayed on the app you are using.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dfed7f235d2e079743a74bb2791db2d4ebd63b1d
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Jun 6 10:40:03 2023 +0200

    Bug 33904: Add tests
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e70ef6b16b8f4292b47ae6c17c17d224799b21f8
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon Jun 5 15:53:12 2023 +0100

    Bug 33899: Add the 23.11 release team
    
    This patch updates the teams.yaml to include the voted in 23.11 release
    team and also updates the release date of 22.11 to match the actual
    release.
    
    Test plan
    1/ Check against https://wiki.koha-community.org/wiki/Release_Teams
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f9002b96cd9e052a9332107cf05c43dadff8af78
Author: Kyle M Hall <kyle@bywatersolutions.com>
Date:   Thu Jun 8 09:45:18 2023 -0400

    Bug 27424: (QA follow-up) Make db update idempotent
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b10b8405774eea1113df2863d2d1b113b622da48
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jun 8 11:03:45 2023 +0000

    Bug 33951: (QA follow-up) Import GetNormalizedOCLCNumber
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8e93668796fd579e4dcbbbdf01b316ed044bd5bc
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 8 11:51:17 2023 +0200

    Bug 33951: Set normalized_oclc in opac/opac-readingrecord.pl
    
    normalized_oclc is used in the template to build the link to syndetics,
    but it's not passed from the controller. Is this patch correct? Is
    syndetics broken on this page? Should we remove it or keep it?
    Is oclc parameter in the URL unecessary and should be removed?
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b608c05fd47e018e0c7085fe7f3d6a4b0023b755
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Thu Apr 27 21:52:52 2023 +0000

    Bug 32341: (follow-up) Making the label not showed twice when the tables are in responsive mode
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 16008c24c5ec0838eb61b5e19603104b2071c004
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Thu Feb 16 18:06:56 2023 +0000

    Bug 32341: (follow-up) Add responsivity to Curbside pickups table and changing button style for finestables
    
    To activate Curbside pickups
        1- Enable the CurbsidePickup system preference
            1.1 Go to Administration > Global system preferences
            1.2 Search for CurbsidePickup
            1.3 Change the value for 'Enable'
            1.4 Click on 'Save all circulation preferences'
        2- Configure time slots for at least one library
            2.1 Go to Administration > Curbside pickup
            2.2 Fill out the form for Centerville (or another library)
                Enable: Check
                Pickup interval: 10 (or other)
                Maximum boss per interval: 3 (or other)
                Patron-scheduled pickup: Check
                Enable for waiting holds only: DO NOT check
            2.3 Add a time slot
                In 'New slot', enter
                    Monday
                    From: 10:00
                    To: 12:00
                Click on 'Add'
        3- Make an appointment from the OPAC
            3.1 Go to OPAC
            3.2 Open mobile mode
            3.3 Connect with a user
            3.4 Click on 'Curbside pickups'
            3.5 Choose the library in 'Pick a library'
            3.6 Choose a date in 'Pickup date'
            3.7 Choose a time range in 'Select a time'
            3.8 Click on 'Schedule pickup'
                => Notice The table is not responsive
        4- Apply the patch
        5- Execute 'yarn build --view opac'
        6- Clean your cache or open your navigator on private mode (to load updated css files)
        7- Perform step 3.1, 3.2, 3.3, 3.4,
        8- click on 'Your pickups'
         => Confirm that the CurbsidePickup table are now displayed correctly and is now responsive.
        9- Click on 'Charges'
         => Confirm that the Charges table are now displayed correctly and is now responsive.
    
    I correct a little bug. The "suspend_hold" button did not work anymore. This change resets it to it's original state.
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6caeb1f6274ead6509b27edcdc701d1c6d1d3c9e
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Mon Feb 6 18:06:26 2023 +0000

    Bug 32341: (follow-up) Making the remains OPAC tables responsive
    
    Apply the patch and check for the responsivity of the following tables
    1- Go to the OPAC
    2- Open mobile mode
    3- The following tables are not responsive
    - Summary - Clubs
    - Summary - Recalls
    - Summary - Article requests
    - Charges - (relative's)
    - Search history - Authority
    - Checkout history - All
    - Checkout history - Checkouts
    - Checkout history - On-site
    - Recalls history
    - Messaging
    - Subscription (serial)
    - Course reserves - Courses
    - Course reserves - Reserves
    - Authority search results
    4- Apply the patch
    5- Execute 'yarn build --view opac'
    6- Clean your cache or open your navigator on private mode (to load updated css files)
    7- Perform previous step (1-3)
    8- Confirm that the tables are now displayed correctly and is now responsive.
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9f277e625ee928246531189afcc511df64a703d2
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jan 9 18:53:27 2023 +0000

    Bug 32341: (follow-up) Alternate button style
    
    This patch applies a different button style and does a couple of clean
    up tasks: Removing the redundant sorting-related CSS and moving the
    responsive button CSS to _common.scss where other DataTable-related
    styles are found.
    
    I think this different button style is more consistent with the OPAC's
    design. It also eliminates untranslatable strings from the CSS.
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 68c3ad5fac8241956ef46475a44db2a19759f620
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Thu Dec 22 21:54:37 2022 +0000

    Bug 32341: (Fix) Changing the placement of the button
    
    This attachment correct the placement of the responsive button. It is now in its own column at the last column and the '+' and '-' are remplaced by 'Expand' and 'Unexpand' to make it more clear.
    
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eb2e0c2efd52f7553cd0035e79c74e6f15a7a21d
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Mon Dec 12 22:58:28 2022 +0000

    Bug 32341: Some OPAC tables are not displayed well in mobile mode
    
    Some OPAC tables are not displayed well in mobile mode, it is absolutely necessary to scroll to the right to read the content properly
    
    This patch fix this problem by making the tables responsive
    
    To test:
          1- Go to the OPAC
          2- Open mobile mode
          3- Go to a bibliographic record detail page in the OPAC (opac-detail.pl?biblionumber=X)
          4- Check the Holdings table
                --> the information is not presented in a table as it is when viewing on a laptop or PC browser screen.
                --> we see very narrow columns
                --> unreadable text
          5- Go to to the page 'Summary' (opac-user.pl)
          6- Check the 'Checked out' table
                --> the information is not presented in a table as it is when viewing on a laptop or PC browser screen.
                --> The columns are overflowing to the right
          7- Check the 'Overdue' table
                --> the information is not presented in a table as it is when viewing on a laptop or PC browser screen.
                --> The columns are overflowing to the right
          8- Go to the page 'Charges' (opac-account.pl)
          9- Click on 'Show all transactions'
                --> the information is not presented in a table as it is when viewing on a laptop or PC browser screen.
                --> The columns are overflowing to the right
          10- Go to the page 'Search history' (opac-search-history.pl)
                --> the information is not presented in a table as it is when viewing on a laptop or PC browser screen.
                --> The columns are overflowing to the right
          11- Apply the patch
          12- Execute 'yarn build --view opac'
          13- Clean your cache or open your navigator on private mode (to load updated css files)
          14- Perform previous step (1-10)
          15- Confirm that the tables are now displayed correctly and is now responsive.
    
    Signed-off-by: Paul Derscheid <paul.derscheid@lmscloud.de>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d46a959a696eb88bc99279ee38838d4bf6291b47
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 2 14:37:01 2023 +0200

    Bug 30002: Adjust perltidy
    
    Remove the following 3 options that are not available in perltidy
    v20190601 that is the version shipped with bullseye
    --add-terminal-newline
    --valign-exclusion-list
    --extended-continuation-indentation
    
    Extend max line length
    --maximum-line-length=120
    
    Prevent perltidy to format lists (see bug 30002 comment 10)
    --break-at-old-comma-breakpoints
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit aae185cf5d533761b7aa7f280dacdd186d261691
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Mar 31 12:26:20 2023 +0200

    Bug 30002: Remove unused xt/perltidyrc
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dfe6767f60c5231fe244d66b067265631ed5a384
Author: Julian Maurice <julian.maurice@biblibre.com>
Date:   Fri Mar 31 12:25:24 2023 +0200

    Bug 30002: Add .perltidyrc
    
    The options set in this file try to match the current code style without
    deviating too much from perltidy's defaults.
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c4e016f4dfdcce272524dfff5abffe01a276d25e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 8 10:14:33 2023 +0200

    Bug 33950: Don't get marcxml if not necessary - opac-readingrecord.pl
    
    We are retrieving normalized_upc from the MARC XML in the controller (opac-readingrec.pl)
    for all issues to display, but this is only used if BakerTaylor or Syndetics are enabled.
    
    Test plan:
    Have some checkouts and confirm that the checkout history is displayed
    the same before and after this patch.
    You should also test BakerTaylor or Syndetics and see if they are
    working correctly, but I have no idea how to test them!
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fac7bb247a5a8430152f97727f2cbdd8b4b54e19
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Mon Jun 5 15:38:58 2023 +0000

    Bug 33900: Fix handling of due_digest
    
    Test plan, on k-t-d
    1) Go to 'my account'
    2) On 'Patron messaging preferences', click 'Edit'
    3) On the 'Item due' row, check the 'Email' and 'Digests only' checkboxes and save
    4) On the top search bar, press 'Check out' and enter '42' (koha user cardnumber)
    5) On the checkout input bar, enter a barcode e.g. 39999000001372 and press checkout
    6) Run the following query to force the due_date to be equal to 'todays' date:
    NOTE: change the YYYY-MM-DD below to whatever day it is you're running this test plan
    
    UPDATE issues SET date_due = '2023-06-05 23:59:00' where issue_id = 1;
    
    7) Run the cronjob:
    ./koha/misc/cronjobs/advance_notices.pl -c --digest-per-branch
    
    8) Notice it hangs, it's stuck on an infinite loop on the 2nd while cycle after if ()
    9) Cancel the cronjob script, apply patch
    10) Run the cronjob script again (step 7), notice it finishes
    11) Access patron's notices:
    /cgi-bin/koha/members/notices.pl?borrowernumber=51
    
    Check that the 'Item due reminder' notice is there.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ab5dc834009b846e3850ca8eb34c3fdb43f855a1
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Wed Jun 7 16:07:02 2023 +0000

    Bug 33941: Fix wrong URL name in EBSCOPackagesList
    
    This patch fixes a URL pointing to the wrong route which stops filtering from working in the table.
    
    Note: To test you will need some EBSCO credentials
    
    Test plan:
    1) In ERM, go to EBSCO > Packages and search for a package
    2) It should fail with a warning in the console saying that a required param "package_id" is missing
    3) Apply patch
    4) Repeat step 1
    5) It should now successfully fetch packages
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4d613494abef955c41479b2e0269481e73b99176
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue May 9 11:49:48 2023 +0000

    Bug 32894: (QA follow-up) Fix tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit e84ef47018e5682764b64073c43b6f95f37c5b31
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 9 11:02:30 2023 +0200

    Bug 32894: Make ->sharee looks like others
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 9ad94cf3e06836da81cfef272f65ae9d9fe9cf3e
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 9 11:00:48 2023 +0200

    Bug 32894: (follow-up) Koha::Item->last_returned_by
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 70d7bb57d88a8ed6d26d85eacdea8c0cd6550ad7
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Apr 21 11:24:04 2023 +0100

    Bug 32894: (QA follow-up) Fix typo
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 8e2d841a2950f3cd6008f296e67c362ebfe4b954
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Fri Apr 21 11:18:35 2023 +0100

    Bug 32894: Remove incorrect caching from bundle_items
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 45d882de53058ebf49f9683e53bdc3751cd22e99
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 28 17:14:52 2023 +0100

    Bug 32894: Fix test
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 994132a60a2e4a12eb88cc8b9d1a89f28450a7bf
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 28 16:40:00 2023 +0100

    Bug 32894: Koha::Biblio->biblioitem
    
    Can we do better here?
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 3545292513453b2383c406e96c3d51a3a2f5e6c5
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 28 16:13:56 2023 +0100

    Bug 32894: Koha::Item->last_returned_by
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 68216c541bfd9b5baf5e3fe97c0a99d193dfccce
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue Feb 28 16:11:38 2023 +0100

    Bug 32894: Remove wrong caching from Koha:: methods - simple
    
    In some of our Koha:: objects we have methods that cache their result and return it in subsequent calls. However there is no invalidation of the cache if the object is modified.
    
    For instance, in Koha/ArticleRequest.pm
    
    sub biblio {
        my ($self) = @_;
    
        $self->{_biblio} ||= Koha::Biblios->find( $self->biblionumber() );
    
        return $self->{_biblio};
    }
    
    This pattern exists in several places.
    
    It can lead to confusion and incorrect results, such as:
    
    use Koha::ArticleRequests;
    my $ar = Koha::ArticleRequest->new({
        borrowernumber => 42,
        biblionumber => 42,
    })->store;
    say $ar->biblio->biblionumber;               # Display 42, correct
    $ar->set({ biblionumber => 24 })->store;
    say $ar->biblio->biblionumber;               # Display 42, wrong
    $ar->discard_changes;
    say $ar->biblio->biblionumber;               # Display 42, wrong
    $ar->delete;
    
    We should remove those caching and rely on DBIC/DBMS caching mechanism instead.
    
    This patch is adjusting the trivial occurrences
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>

commit 001160975702177e2568cb25cab6016abb7864ac
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Mon Jun 5 23:00:43 2023 +0000

    Bug 33902: Move modal inside HTML body
    
    To test:
    -Go Administration > Libraries and add a URL for a branch.
    -Also add some OPAC info: ( via HTML Customizations )
    -Now find a record belonging to that branch and bring up the OPAC detail page.
    -In the holdings table there should be a link under the 'Current library' column.
    -Clicking it should bring up a modal.
    -Make sure the modal pops up correctly, can be dismissed, and the 'Visit web site' link works.
    
    Nothing about the appearance or behavior of the page should change.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: David Cook <dcook@prosentient.com.au>

commit a8353844537ccc0ef234cbff48e85706aa89a23d
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed May 31 21:39:14 2023 +0000

    Bug 33725: (follow-up) Add ccode to grouping logic
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>

commit 3e77b5b9740470c468c16efc31432a9cd6ea5f0f
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri May 12 17:54:26 2023 +0000

    Bug 33725: Add collection to search results
    
    To test:
    1. Apply patch and restart services
    2. Do a catalog search that will return available, onloan, and notforloan items. (withdrawn,lost,damaged)
    3. Notice that the location column should now also include the collection description underneath the shelving location.
    
    Signed-off-by: Andrew Fuerste-Henry <andrewfh@dubcolib.org>
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>

commit 2d28f7417c4dba186d4f07e98940ed1881c7419c
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri May 26 12:58:22 2023 +0000

    Bug 33844: Fix is_denied_renewal
    
    Going via result_set->has_column does cost actually nothing if
    the object is already there.
    
    Test plan:
    Run again t/db_dependent/Koha/Item.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6264ecdad0fa2cb29cd16a062b751bb29c65b9bb
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri May 26 12:54:22 2023 +0000

    Bug 33844: Modify test to show problem
    
    Add delete key.
    Without the follow-up, this triggers a delete. Test fails.
    DBIx::Class::Row::delete(): Not in database at /usr/share/koha/Koha/Object.pm line 234
    
    Test plan:
    Run t/db_dependent/Koha/Item.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 61e5bab67365da674ee128371f78bb452e5c289b
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed Jun 7 15:07:42 2023 -0300

    Bug 32478: DBRev 23.06.00.003
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ba06af4974e58fb100e335ebd47fd078bb508fa9
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri May 26 09:28:28 2023 +0000

    Bug 32478: (QA follow-up) Keep current hashref behavior
    
    Prevent a crash on wrong contents for ItemsDeniedRenewal pref
    as we did before.
    Note: Could be a provisional measure (no band aid to repeat anywhere)
    until we resolve this in preferences.pl.
    
    Test plan:
    Without this patch:
    Change ItemsDeniedRenewal to 'nonsense'
    Run perl -MKoha::Items -e'Koha::Items->find(X)->is_denied_renewal; print "OK\n"'
    => Replace X by a valid itemnumber
    Crashes with: Can't use string ("nonsense") as a HASH ref ... No OK print.
    
    Apply this patch
    Run perl -MKoha::Items -e'Koha::Items->find(X)->is_denied_renewal; print "OK\n"'
    => Replace X by a valid itemnumber
    Warns only with: Hashref expected for ItemsDeniedRenewal. You got OK.
    Clear ItemsDeniedRenewal
    Try again. No warning anymore.
    Run t/Context.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c50dda0d475544f35a6dc08b1beb5f8a26e5302f
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri May 26 08:32:21 2023 +0000

    Bug 32478: (QA follow-up) Shebang and chmod for Koha/Config/SysPrefs.t
    
    Test plan:
    Run t/db_dependent/Koha/Config/SysPrefs.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e67f956e0efca508fa5e9d3cae9a9878b12b20e6
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Fri May 12 16:52:33 2023 +0200

    Bug 32478: Fix syspref NULL values in tests
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 89bc6d0967fbdf0d8a29251e190631a0594dcaef
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu May 4 18:39:50 2023 +0000

    Bug 32478: (follow-up) Tidy code
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit ae9163d4150cc22e386dee96c20f8197be8091b8
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu May 4 18:37:53 2023 +0000

    Bug 32478: (follow-up) UpdateItemLocationOnCheckin no longer needs flattening
    
    This patch removes a line flattening the arrays generated by get_yaml_pref_hash
    as it is no longer necessary
    
    Conditionals are adjusted to avoid warnings in tests
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dc357552386dbe9ae08035ccc126b2dde7eb52cb
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Thu May 4 17:51:44 2023 +0200

    Bug 32478: Fix handling of undef values in ItemsDeniedRenewal
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e9738a8370af75eaf12cfa540e4105e782066ebd
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Thu Sep 29 17:18:40 2022 +0200

    Bug 32478: Remove Koha::Config::SysPref->find since bypasses cache
    
    get_yaml_pref_hash also allows invalid YAML and only parses a limited
    subset so remove this method to avoid future issues.
    
    To test):
    
    Since tests already exists for C4::Context->yaml_preference and this
    is a trivial change, do we really need a test plan for this?
    
    Sponsored-by: Gothenburg University Library
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 52b807544c6a0fa3944029fd4c94d4a21a7272b2
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 7 09:30:15 2023 +0200

    Bug 33934: Add more detail to 'No encryption_key in koha-conf.xml'
    
    If encryption_key is not set in $KOHA_CONF we are raising an exception.
    
    This key was only needed for a couple of feature, but now we are using Koha::Encryption from the update DB process, and so the upgrade fails with no more info than 'No encryption_key in koha-conf.xml'.
    
    We need to provide more detail in this error.
    
    Additionally we reject "__ENCRYPTION_KEY__", in case people will simple
    copy/paste that
    
    Test plan:
    Apply the patch
    Edit $KOHA_CONf, remove the encryption_key entry (or blank)
    restart_all
    Go to the about page and enable 2FA
    => warning on the about page, and 500 server-side are displaying more
    info about how to generate the missing entry
    Edit $KOHA_CONF and set the value to __ENCRYPTION_KEY__
    restart_all
    => Same messages
    Edit $KOHA_CONF and set a correct value
    restart_all
    => No error, everything is working correctly
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 894797e311862d28610b296704304b455d37e931
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Wed Jun 7 11:16:15 2023 +0200

    Bug 33935: (bug 26403 follow-up) Remove occurrences to deleted files
    
    account_credit_types.sql and account_debit_types.sql have been moved to yml files but there are still references to them in C4::Installer.
    
    If you select the files during the installer process it will explode with
    
    Test plan:
    DROP database koha_kohadev
    CREATE database koha_kohadev
    restart_all
    then install Koha using the UI
    Select all the sample data files
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c12e14842d877d10a9a16b71118036b8922e188d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri May 26 13:45:56 2023 +0000

    Bug 33524: Use template wrapper for tabs: Authority editor
    
    This patch updates the authority editor template to replace tab markup
    with the use of WRAPPERs. Some CSS and JS has been modified in order to
    make the custom style and behavior of the tabs on this page work
    correctly with standard Bootstrap tab markup.
    
    To test, apply the patch and go to Authorities -> New authority.
    
    - Confirm that the tabs look correct, with the same style they had
      before the template change.
    - The first tab ("0") should be selected by default.
    - Confirm that tab-switching works correctly: The tab color should
      change and the list of numbered tags in the menu just below should
      change to match the section.
      - Confirm that these tag number links still work correctly to jump you
        down the page to the corresponding tag.
    - Without filling in any mandatory fields, click the "Save" button.
      - You should get an error message about missing mandatory fields.
        - Clicking the "Go to field" link should take you to the correct tab
          and the correct tag.
    - Append a hash to the URL to pre-select a tab other than the first one,
      e.g. "/cgi-bin/koha/authorities/authorities.pl?authtypecode=PERSO_NAME#tab5XX_panel"
      The correct tab should be selected upon page load.
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4a3ae69173950456908cd22c6bac273fffae3f1a
Author: Martin Renvoize <martin.renvoize@ptfs-europe.com>
Date:   Mon May 22 15:54:14 2023 +0100

    Bug 33343: Catch more cases and correctly use new-password hint
    
    I believe where we're allowing a user to set a new password instead of
    using autocomplete="off" we should be hinting to the brownser that it's
    a new password box with autocompelte="new-password".
    
    I also correct a couple of missing instances.. Honestly, I'm not sure
    how much this helps these days as most browsers offer to save passwords
    regardless.
    
    See: https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/autocomplete
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 292c0ea24d73f9d5ad992b1c97ef872e3b962888
Author: Hammat Wele <hammat.wele@inlibro.com>
Date:   Mon Apr 3 21:04:28 2023 +0000

    Bug 33343: Make use of the 'autocomplete=off' attribute on password fields
    
    This patch adds 'autocomplete=off' to all password type fields in the OPAC
    
    To test:
    1. Apply the patch
    2. Visit http://master/cgi-bin/koha/opac-main.pl
    3. Inspect the page
        --> Confirm html shows autocomplete off on the password field
    4. Click on Log in (without filling any field)
    5. Repeat step 3
        --> Confirm html shows autocomplete off on the password field
    6. Set 'PatronSelfRegistration' system preference to 'Allow' and PatronSelfRegistrationDefaultCategory to 'Board'
    7. Visit http://master/cgi-bin/koha/opac-memberentry.pl
    9. Repeat step 3
        --> Confirm html shows autocomplete off on the password field
    10. Connect to the OPAC
    11. Click on Change password
    11. Repeat step 3
        --> Confirm html shows autocomplete off on the password field
    12. Set 'EnableExpiredPasswordReset' system preference to 'Enable'
    13. Visit http://master/cgi-bin/koha/opac-reset-password.pl
    14. Repeat step 3
        --> Confirm html shows autocomplete off on the password field
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d78bbbeddd0ca8dfb9555977638d177b3b2cbb9b
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 16 16:36:26 2023 +0200

    Bug 32060: Use selectrow_array
    
    Trivial ergonomic patch, use selectrow_array, no need to prepare the
    query
    
    + perltidy the sub
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b6ae2c1ee38d6d07dcfb0f9c555b5839ccc7dff7
Author: David Gustafsson <david.gustafsson@ub.gu.se>
Date:   Tue Nov 1 15:30:01 2022 +0100

    Bug 32060: Improve performance of columns_to_str
    
    To test:
    1) Ensure the following tests pass
      t/db_dependent/Koha/Item.t
      t/db_dependent/Koha/Bibio.t
    2) Go to a biblio (preferably as serial) with many items and
       click "New" -> "New item" and note down the response time.
    3) Apply the patch
    4) Ensure tests in 1) still pass
    5) Repeat step 2), the response time should be substantially
       improved
    
    Sponsored-by: Gothenburg University Library
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 5b3ecbe0685a63a31f35cf5c52cbec5ef8056a5c
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue Mar 21 16:14:45 2023 -0300

    Bug 32932: Update router to use object references - agreements
    
    This patch updates the Vue files for ERM to use router object links rather than urls - this will make it much simpler to maintain the router if urls need to be updated. This first patch only updates the files in the agreements section of ERM as a first step to introduce the topic for discussion.
    
    Test plan:
    1) Apply patch
    2) Navigate to the Agreements section of ERM and click on different navigation links/buttons
    3) The links/buttons should all work as normal
    4) Review the code to see that the component files now refer back to the router using objects rather than url strings
    
    Signed-off-by: Agustin Moyano <agustinmoyano@theke.io>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 657fad8283190e410d28853c91f7e042dfd1745d
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed Dec 14 23:08:40 2022 -1000

    Bug 32464: (follow-up) fix t/db_dependent/Koha/Item.t
    
    Remove useless unit tests with mss arg
    
    Test with :
    prove t/db_dependent/Koha/Filter/EmbedItems.t
    
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 4cb5f36c2a376cd2b41ee90e3d1aaca1e33e22cc
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Tue Dec 13 11:24:54 2022 -1000

    Bug 32464: Koha::Item->as_marc_field obsolete option mss
    
    Since Bug 28445 the method Koha::Item->as_marc_field has the option mss not anymore.
    
    This patch removes this in Koha::Filter::MARC::EmbedItems.
    
    Test with :
    prove t/db_dependent/Koha/Filter/EmbedItems.t
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 75c9b07c5c995534faa6cc2aeb20fc0e3225853d
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Mon Jun 5 13:06:39 2023 +0000

    Bug 33892: Use template wrapper for tabs: OPAC authority detail
    
    This patch updates the OPAC authority detail page so that it uses
    the new WRAPPER syntax to generate tabs markup.
    
    To test, apply the patch and locate an authority record in the OPAC
    which has notes fields.
    
    When viewing the details for that record the notes should appear in a
    single "Notes" tab.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 48ccc9245cee03d04133eea7a43b2de63c4808d5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jun 6 15:26:52 2023 -0300

    Bug 21983: DBRev 23.06.00.002
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 35628505de76ede5c54435aae935e2c1d92902b3
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Tue Jun 6 15:24:36 2023 -0300

    Bug 21983: (QA follow-up) Skip deleted_biblio_id from the API object
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit d23593725956c64d94c5ff4f647669d406b99bc4
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jun 5 13:54:40 2023 -0300

    Bug 21983: Make DelBiblio update linked ILL requests
    
    This patch makes DelBiblio update the biblio linked ILL requests so the
    value in biblio_id is moved to the deleted_biblio_id.
    
    The change is covered by tests.
    
    To test:
    1. Apply this patchset
    2. Run:
       $ ktd --shell
      k$ updatedatabase
      k$ qa --run-tests
    => SUCCESS: Tests pass! All green/good
    3. Sign off :-D
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f1cd3a44b083a8921ebae0f465eadca02cdb3014
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jun 5 13:53:18 2023 -0300

    Bug 21983: Add Koha::Biblio->ill_requests
    
    This patch adds a new method, used for retrieving the linked ill
    requests for a biblio.
    
    To test:
    1. Apply this patch and run:
       $ ktd --shell
      k$ prove t/db_dependent/Koha/Biblio.t
    => SUCCESS: Tests pass!
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6a6b64cd265bfea572fca76476f0f36e7edc0098
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jun 5 13:52:52 2023 -0300

    Bug 21983: DBIC schema
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 19143be87338ed6a8a3436065b2245102ecf5b6c
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jun 5 13:50:00 2023 -0300

    Bug 21983: DB update
    
    This patch:
    - Adds a illrequests.deleted_biblio_id column
    - Adjusts existing db_rev so people upgrading have the biblio_id value
      moved to the also created column, before attempting to add the FK
      constraint on the biblios table.
    - Adds a new db_rev for those who unfortunately already updated, it
      should be idempotent.
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 73384f636d0985110081b879da5dfe14365ca83e
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Mar 16 11:01:07 2023 +0100

    Bug 33242: Add unit test
    
    Test plan:
    Run t/db_dependent/Letters/TemplateToolkit.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>

commit c4f78fbdbb9ce0a4818afbb239e5f537d0754897
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Mar 16 09:53:20 2023 +0100

    Bug 33242: Allow passing add_{duration} options to KohaDates
    
    For example, if I want to add a few days to the issuedate in a
    TT template, I could do this:
        [% checkout.issuedate | $KohaDates add_days => 3 %]
    
    This development allows you to pass add/subtract years, months, weeks,
    days, hours, minutes and seconds.
    
    Test plan:
    Pick a notice like CHECKOUT.
    Add a line like:
        [% checkout.date_due | $KohaDates with_hours => 1, add_minutes => 15 %]
    Do a checkout. Verify that the notice generated contains a time that
    shifted 15 minutes.
    Undo your change.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Nick Clemens <nick@bywatersolutions.com>
    
    Signed-off-by: Kyle M Hall <kyle@bywatersolutions.com>

commit 0386c14a29e537fe0faeaa7cca0bcbaf43dddcc6
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Tue May 2 10:58:27 2023 +0000

    Bug 33236: (follow-up) Add use statements

commit f6ad0a24a6bd504a837f73dc13e6093053c9ec0a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 14 13:43:17 2023 +0000

    Bug 33236: (follow-up) Remove export of NewSuggestion
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>

commit 0f0897f6b05321ff7a1ed6241d42aad43d8cdbf1
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 14 13:42:03 2023 +0000

    Bug 33236: (follow-up) Handle new suggestion in ReNewSubscription
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>

commit fb877da7d3fee54e1b53b28299e24bbcd4635ef1
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed Mar 15 15:27:11 2023 +0000

    Bug 33236: Move NewSuggestion to Koha::Suggestion->store
    
    The NewSuggestion routine saved the suggestion to the DB
    and returned the id
    
    This patch moves the code to Koha::Suggestion->store and
    handles emailing upon creation, this adds that functionality to
    suggestions added via api
    
    To test:
    1 - Apply patch
    2 - Test adding a suggestion on the opac and staff client
    3 - Confirm the suggestions are added correctly
    
    Signed-off-by: Andrew Auld <andrew.auld@ptfs-europe.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>

commit f0dc1fff2a0f8c526cdb12b50e6757fdd1694dcf
Author: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
Date:   Tue May 23 16:24:30 2023 +0000

    Bug 33813: Masthead lists button requires an aria-label
    
    This patch adds an aria-label to the Lists button in the masthead. It is currently not descriptive enough and doesn't identify what is displayed when clicking the button.
    
    Signed-off-by: David Nind <david@davidnind.com>
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 85aa6b786865c4eecf9c89ee225533d2a2d05140
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Wed May 31 14:10:35 2023 +0000

    Bug 33873: Improve check for inexistant biblio object
    
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit eac2787565ab397da4280deef706f85f4dee80c4
Author: Pedro Amorim <pedro.amorim@ptfs-europe.com>
Date:   Tue May 30 09:20:20 2023 +0000

    Bug 33786: ILL requests table id
    
    Make sure requests table is unique when visiting patron ILL
    history so the table state is not shared unintentionally
    
    Reproduce:
    1) Have a borrower with >20 ILL requests in their history
    2) Visit cgi-bin/koha/members/ill-requests.pl?borrowernumber=<borrowernumber>
    3) On the table, click page 2
    4) Visit a different borrower with <20 ILL requests
    5) Verify that no requests are shown, this is because the table is using page 2 from step 3)
    6) Go back to original borrower, click table page 1
    7) Now go back to 2nd borrower, verify is now showing page 1 correctly
    
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Martin Renvoize <martin.renvoize@ptfs-europe.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9eb62ef191ad90fdcb556026c9e8f5d3ca3ddebd
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu Jun 1 20:03:53 2023 +0000

    Bug 33882: Add spans in dateofbirth column on member.tt
    
    To test:
    1 Apply patch
    2 Do a patron search that will return multiple patrons.
    3 Look at the date of birth column and notice the text is now wrapped in a class called 'dateofbirth'
    4. Notice that the age hint is wrapped in a class called 'agehint'.
    5. Add '.agehint { display: none }' to intranetusercss.
    6. Now notice the date of birth still displays but no age information.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 536f860038c8ed0eeb851928403185559c98dcce
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Fri Jun 2 14:00:34 2023 +0000

    Bug 33883: "Make sure to copy your API secret" message overlaps text
    
    This patch updates the markup on the patron API keys page so that it
    uses standard classes for dialogs and page sections.
    
    To test you must have RESTOAuth2ClientCredentials enabled.
    
    - Apply the patch and locate a patron record.
    - From their checkout or detail page, choose More -> Manage API keys
    - Click "Generate a new client id/secret pair"
    - Enter a description and click Save.
    - You should see a message in a standard message-style dialog, "Make
      sure to copy your API secret now. You won’t be able to see it again!"
    - The API key information should be displayed in a .page-section div.
    - The table of existing keys should be displayed in a .page-section div.
    
    Signed-off-by: Matt Blenkinsop <matt.blenkinsop@ptfs-europe.com>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 087861cb435cf2b1c1c67d99016340487868afcd
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Wed May 31 17:51:46 2023 +0000

    Bug 33891: Use template wrapper for tabs: OPAC advanced search
    
    This patch adds the tab WRAPPER markup to the OPAC, adapted for the
    Bootstrap version used by the OPAC (4.5.0). The advanced search page is
    updated to use the wrapper construction.
    
    Unrelated markup fix: an empty size attribute is removed from an
    <input>.
    
    To test, apply the patch and view the the advanced search page in the
    OPAC. The tabs for item type, shelving location, and collection should
    all look correct and work correctly.
    
    In the staff interface, go to Administration -> System preferences ->
    OpacAdvancedSearchTypes and try various configurations, confirming each
    time that the OPAC page adjustes correctly.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 399eb51d3445f3fe727cba4bc3176ba766b67bbd
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 23 10:58:55 2023 +0200

    Bug 33803: Remove comment about tab width
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 61a21e4d827af7af1ab8f87b8cbd30f06f898f0a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue May 23 16:45:10 2023 +0000

    Bug 33525: Use template wrapper for tabs: Basic MARC editor
    
    This patch updates the basic MARC editor template to replace tab markup
    with the use of WRAPPERs. Some CSS and JS has been modified in order to
    make the custom style and behavior of the tabs on this page work
    correctly with standard Bootstrap tab markup.
    
    To test, apply the patch and go to Cataloging -> New record.
    
    - Confirm that the tabs look correct, with the same style they had
      before the template change.
    - The first tab ("0") should be selected by default.
    - Confirm that tab-switching works correctly: The tab color should
      change and the list of numbered tags in the menu just below should
      change to match the section.
      - Confirm that these tag number links still work correctly to jump you
        down the page to the corresponding tag.
    - Without filling in any mandatory fields, click the "Save" button.
      - You should get an error message about missing mandatory fields.
        - Clicking the "Go to field" link should take you to the correct tab
          and the correct tag.
    - Append a hash to the URL to pre-select a tab other than the first one,
      e.g. "/cgi-bin/koha/cataloguing/addbiblio.pl#tab5XX_panel" The correct
      tab should be selected upon page load.
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: Katrin Fischer <katrin.fischer.83@web.de>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 3590baa8329b680a8331fa1fa86f4cd1cc414687
Author: David Cook <dcook@prosentient.com.au>
Date:   Fri Jun 2 02:13:01 2023 +0000

    Bug 33884: Remove unused Koha::RDF code
    
    This patch removes the unused Koha::RDF module
    and its associated unit test.
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit afd7b89094e8c30900d506e98a6362e37772b1f0
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jun 5 15:22:15 2023 -0300

    Bug 33697: DBRev 23.06.00.001
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 8b9355088ad6e5238921ef554af44ffeb7677364
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Tue May 16 10:18:13 2023 +0200

    Bug 33697: Remove RecordedBooks (rbdigital) integration
    
    RecordedBooks search API integration is now obsolete following
    rbdigital's incorporation into OverDrive. Associated code should be
    removed.
    
    https://company.overdrive.com/2020/06/23/overdrive-to-acquire-rbdigital-from-rbmedia/
    
    Test plan:
    use git grep extensively and confirm that this patch removes all
    occurrences of this feature.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 229b6b58efdac2972e9739dbe6959649c89d3bac
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Mon Jun 5 15:18:04 2023 -0300

    Bug 33789: Update POD
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 143e0fe8aca35c15e8a37c18807f54fdf570b06d
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Wed May 24 18:38:42 2023 +0000

    Bug 33789: Add unit test
    
    JD amended patch: Remove biblionumber => 144
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 14e4a3b5c7aabf816a6c21a0c318d6c4e3b1939a
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Fri May 19 22:09:16 2023 +0000

    Bug 33789: Return issue info. when adding a credit
    
    To test:
    1. Make sure MarkLostItemsAsReturned is set so a lost item will stay on a patrons account after being marked as lost.
    2. Check an item out to a patron, make sure it has a replacementprice
    3. Mark the item as lost.
    4. Now check the item in.
    5. Go to the patrons account -> transaction tab. You should see 2 accountlines related to the item.
    6. For the account type 'Lost item' you will see issue infomation ( check out date, due date, checkouted out from, etc )
    7. For the account type 'Lost item fee refund' there is no issue information.
    8. Apply patch
    9. Try 2 - 6 again. This time the 'Lost item fee refund' should include issue information.
    
    Signed-off-by: Laura Escamilla <laura.escamilla@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 7095ef2fa757cca641cd4236878cdec3bbaa8479
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jun 2 09:10:01 2023 +0000

    Bug 33493: (QA follow-up) Only bless the first transfer
    
    No need to do a walk through on all the results.
    Correcting two test descriptions on the way.
    
    Test plan:
    Run t/db_dependent/Koha/Item.t
    Run t/db_dependent/Koha/Items.t
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 110d74f572748958720ee690ea68d666a7a0b477
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Wed May 31 12:02:41 2023 +0000

    Bug 33493: (follow-up) Rename relationship and add test
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 6c2e092d5b120d251e161ab914ce342fddd35a5a
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Mar 10 16:14:50 2023 +0000

    Bug 33493: Add a filter relationship for branchtransfers
    
    Prefetching is useful, but we don't want to fetch all the inactive
    transfers for an item. This patch adds a filtered relationship and
    updates get_transfer(s) to use this
    
    To test:
    prove -v t/db_dependent/Koha/Item.t
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 94ed265e6a6cc66493ab1799828a5332d148cf3a
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Thu May 25 13:48:34 2023 +0000

    Bug 33779: Terminology: biblio record
    
    This patch corrects a string in the staff interface's ILL requests
    template. "This item cannot be issued as it has no biblio record
    associated with it" is updated to read "This item cannot be checked out
    as it has no bibliographic record associated with it."
    
    I don't know how to trigger the error message in the interface, but the
    change is simple enough that it could be verified by examining the
    patch.
    
    Signed-off-by: Lucas Gass <lucas@bywatersolutions.com>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1f265d7d4aacaaa20fa29d702d9546b2fc1b66a7
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Thu Jun 1 18:20:14 2023 +0000

    Bug 33411: (follow-up) Set debit type for mocked fines
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit a0c002a6d790b08802f8b14744e8891245be62d2
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 7 18:50:25 2023 +0000

    Bug 33411: Don't count related guarantees fees against NoIssuesChargeGuarantees
    
    To test:
     1 - Find an adult patron in Koha
     2 - Add two guarantees
     3 - Add $1 fine to parent, $5 fine to each guarantee
     4 - Set no issues charge guarantees to 9
     5 - perl misc/sip_cli_emulator.pl -a localhost -p 6001 -su term1 -sp term1 -l CPL -m patron_information --patron BARCODE
     6 - Note the 64 message starts with Y's that mean patron is blocked
     7 - Repeat with each child barcode
     8 - They are blocked?
     9 - Apply patch, restart all (restart_all will restart SIP)
    10 - Try again
    11 - Parent blocked, children should not be
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit fe1c67b3d75881b9baaef053e68921c2aa4c4494
Author: Nick Clemens <nick@bywatersolutions.com>
Date:   Fri Apr 7 18:49:41 2023 +0000

    Bug 33411: Unit test update
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2a2284ceebe7a83d5160cc303fbcfa6637ccfee2
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Fri Jun 2 08:17:45 2023 +0000

    Bug 33247: (QA follow-up) Remove pending deletion from results array
    
    Both Elastic and Zebra search_auth_compat return a hash key
    authid for a result.
    
    Test plan:
    Remove an authority that should be in your results list.
    Note that it is no longer marked as pending, but just not displayed.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit c58bae15ea44a34e48fe0e821612030ce2c52d01
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu May 11 13:48:50 2023 +0200

    Bug 33247: Flag the authority pending deletion in the result list
    
    When an authority is removed from the result list it is not removed from
    the search engine yet.
    This patch suggests to add a note in the summary column to tell the user
    that the deletion is pending.
    
    Test plan:
    1 - Go to authorities home and perform a search;
    2 - Delete any authority;
    3 - After the confirmation, the page is refreshed but still contains the
    deleted authority, with a red note explaining that the deletion is
    pending.
    
    Signed-off-by: David Nind <david@davidnind.com>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit b3c739872a7171e049506c7c2af6c67abda181d0
Author: Lucas Gass <lucas@bywatersolutions.com>
Date:   Thu May 25 22:04:08 2023 +0000

    Bug 33748: Fix UI issue when importing records from a staged MARC file
    
    This patch attempts to fix a UI issue on addorderiso2709.tt. It removes the <td> which contains the actoin buttons MARC, Card, and Add Order and adds them to the title line. This is so there is more space for the fieldsets.
    
    1. Apply patch
    2. Set  MarcItemFieldsToOrder like this:
    
        homebranch: 975$a
        holdingbranch: 975$b
        itype: 975$y
        nonpublic_note: 975$x
        public_note: 975$z
        loc: 975$c
        ccode: 975$8
        notforloan: 975$7
        quantity: 975$q
        price: 975$g
        replacementprice: 975$v
        uri: 975$u
    
    3. Stage a MARC file where the bibs have items attached
    4. From acquisitions create a new basket and add 'From a staged file'.
    5. Add the staged files to a basket.
    6. Make sure the display looks correct.
    7. Expand the data by clicking on the checkbox on the left hand side, or by clicking 'Select all'.
    8. Make sure the display looks correct.
    9. Tab over to 'Item informtion' and make sure that display looks correct.
    10. Shrink the screen size down to less that 992px, ensuring the display remains correct.
    
    Signed-off-by: Barbara Johnson <barbara.johnson@bedfordtx.gov>
    
    Signed-off-by: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 78f1bfaccf3b02e92d4823e1d134331d408f481b
Author: Owen Leonard <oleonard@myacpl.org>
Date:   Tue May 30 10:51:16 2023 +0000

    Bug 33859: Use the phrase 'Identity providers' instead of 'Authentication providers'
    
    This patch updates instances in the code and templates where the term
    "Authentication providers" is used, replacing it with the preferred
    "Identity provider."
    
    Most of the instances of this change are in module or API documentation,
    but you can see a couple of the changes in the interface:
    
    - Administration -> Identity providers:
      - The sidebar menu should show "Identity providers" instead of
        "Authentication providers."
    - Patrons -> Patron details -> More -> Set permissions
      - Under " Manage Koha system settings (Administration panel)" you
        should see "Manage identity providers (manage_identity_providers)"
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 30725ed462e3072992d5f502c5f9d58743724854
Author: Fridolin Somers <fridolin.somers@biblibre.com>
Date:   Wed May 31 10:58:45 2023 -1000

    Bug 33875: Fix missing closing tag a in API key management page
    
    In API key management page, anchor closing tag is missing in message "No keys defined for the current patron".
    
    This patch fixes that.
    Also changes display with link on a new line.
    Translatable text is on purpose surrounded by span or div.
    
    Test plan :
    1) Enable system preference  RESTOAuth2ClientCredentials
    2) Go to a patron page
    3) Click More > Manage API Keys
    4) Look at page source HTML code
    => Check code is OK
    
    Signed-off-by: Sam Lau <samalau@gmail.com>
    Signed-off-by: David Cook <dcook@prosentient.com.au>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit e09f54435a79e4e603f189bd862cd75db54e7f73
Author: Jonathan Druart <jonathan.druart@bugs.koha-community.org>
Date:   Thu Jun 1 08:29:53 2023 +0200

    Bug 33865: (bug 27421 follow-up) Remove leftover
    
    Bug 27421 replaced the progress bar with job_progress.inc.
    The code related to the old progress bar has not been removed however.
    
    Moreover there was a JS error in the console:
    "Uncaught ReferenceError: submitBackgroundJob is not defined"
    
    Test plan:
    Stage a MARC record for import
    Import it
    Revert the import
    All should work correctly, without JS error in the console and with the
    progress bar displayed nicely during the staging step.
    
    Signed-off-by: Owen Leonard <oleonard@myacpl.org>
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit db85bf444a88360c5f688cc1cbfb8b40993546a8
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 1 11:47:04 2023 -0300

    Bug 33877: Add missing team members
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit bc62698f9ba6b29634a26943f562576cfd0ee65f
Author: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
Date:   Thu Jun 1 08:27:35 2023 +0000

    Bug 33877: Fix some entries in teams.yaml
    
    Trivial edit.
    
    Remove versions from the name of the packaging manager.
    As also commented on BZ:
    The script only expects to find a name here, not a version too.
    See also maintainer role and how versions are handled there.
    In this case I dont think it is really needed to still add that
    distinction when we had two packaging managers in the past.
    
    Test plan:
    Look again at about.pl, Koha team, Koha development team.
    Look at Mason James.
    
    Signed-off-by: Marcel de Rooy <m.de.rooy@rijksmuseum.nl>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 96cc7473951af378247f10bf41259b0273559dc8
Author: Mason James <mtj@kohaaloha.com>
Date:   Fri Jun 2 00:49:27 2023 +1200

    Bug 33371: Add [Install] section to koha-common.service
    
    to test:
    
     1/ install pkg, reboot, note service is not 'active'
    
     2/ add patch, build package
    
     3/ install pkg, reboot, note service is 'active' :)
    
      root@deb11:/etc# systemctl status koha-common
      * koha-common.service - Start required services for each Koha instance
         Loaded: loaded (/etc/init.d/koha-common; enabled; vendor preset: enabled) <<<<
         Active: active (exited) since Thu 2023-06-01 12:45:08 UTC; 13min ago
          Tasks: 0 (limit: 2244)
         Memory: 0B
            CPU: 0
         CGroup: /system.slice/koha-common.service
      Jun 01 12:45:08 deb11 systemd[1]: Starting Start required services for each Koha instance...
    
    Signed-off-by: Andrew Nugged <nugged@gmail.com>
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit f4e2c2b4761b47cfd4dad1f789b2f73ce6287b57
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Thu Jun 1 11:35:15 2023 -0300

    Bug 22440: (QA follow-up) Fix wrong check in db_rev
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 2eca0fe3632bf0ec4396da0c694b9fdbddf9e4df
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 31 21:09:06 2023 -0300

    Amend release team
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 00e33f875808761e6a280778842fd28bd5ab27d9
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 31 20:52:59 2023 -0300

    Koha 23.06 - start of a new dev cycle
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dd76c6bcdc4432d7f1ff900873b09116dc258f44
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 31 11:30:05 2023 -0300

    Koha 23.05.00 is here!
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit dd0d35be1e3d5dafef5c6a06f38b01189710de87
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 31 12:06:29 2023 -0300

    Translation fixes
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit edd378f4d14d79107d662b053c8e6f750326dd23
Author: Koha translators <>
Date:   Wed May 31 09:15:03 2023 -0300

    Translation updates for Koha 23.05.00
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 56c149c31bc124a33e6770638faa4c87e1deca58
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 31 11:27:30 2023 -0300

    Add release notes for 23.05.00
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 919197f5171f64dbb76bc365399e0255e0bb8ae1
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 31 10:05:23 2023 -0300

    23.05.00: Fix db_revs
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 78cce24e579bbcae67e1bb49845d3022f794a276
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 31 10:04:12 2023 -0300

    23.05.00: Update kohastructure.sql
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 1539ef22bed84f46f6cebabd16b07f7cf71675b7
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 31 08:50:56 2023 -0300

    23.05.00: Update history.txt
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 0da4eef6f6987a9b3c71b16a9deaf139cd4522b5
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 31 08:50:15 2023 -0300

    23.05.00: Update contributors.yaml
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>

commit 9a9b00907e0d270798aad5dcd0bfacf27dca5a6a
Author: Tomás Cohen Arazi <tomascohen@theke.io>
Date:   Wed May 31 16:03:04 2023 -0300

    23.05.00: Update .mailmap
    
    Signed-off-by: Tomas Cohen Arazi <tomascohen@theke.io>
